!function(){"use strict";function e(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function n(n){for(var r=1;r<arguments.length;r++){var o=null!=arguments[r]?arguments[r]:{};r%2?e(Object(o),!0).forEach((function(e){t(n,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):e(Object(o)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))}))}return n}function r(e,n){for(var r=0;r<n.length;r++){var t=n[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function t(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function o(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var t,o,i=[],a=!0,c=!1;try{for(r=r.call(e);!(a=(t=r.next()).done)&&(i.push(t.value),!n||i.length!==n);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(e,n)||i(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,n){if(e){if("string"==typeof e)return a(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,n):void 0}}function a(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function c(e,n){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=i(e))||n&&e&&"number"==typeof e.length){r&&(e=r);var t=0,o=function(){};return{s:o,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return c=e.done,e},e:function(e){l=!0,a=e},f:function(){try{c||null==r.return||r.return()}finally{if(l)throw a}}}}var l="undefined"!=typeof window?window:void 0,u="undefined"!=typeof globalThis?globalThis:l,s=null==u?void 0:u.navigator;null==u||u.document,null==u||u.location,null==u||u.fetch,null!=u&&u.XMLHttpRequest&&"withCredentials"in new u.XMLHttpRequest&&u.XMLHttpRequest,null==u||u.AbortController,null==s||s.userAgent;var f=null!=l?l:{},p=Array.isArray,d=Object.prototype.toString,v=p||function(e){return"[object Array]"===d.call(e)},g=function(e){return"function"==typeof e},h=function(e){return e===Object(e)&&!v(e)},y=function(e){return void 0===e},_=function(e){return"[object String]"==d.call(e)},b=function(e){return null===e},x=function(e){return"[object Number]"==d.call(e)};function O(e){return!y(Event)&&E(e,Event)}function E(e,n){try{return e instanceof n}catch(e){return!1}}function m(e){return b(e)||!h(e)&&!g(e)}function j(e,n){return Object.prototype.toString.call(e)==="[object ".concat(n,"]")}function w(e){return j(e,"DOMError")}var $=/\(error: (.*)\)/,S=50,T="?";function H(e,n,r,t){var o={filename:e,function:n,in_app:!0};return y(r)||(o.lineno=r),y(t)||(o.colno=t),o}var R=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,P=/\((\S*)(?::(\d+))(?::(\d+))\)/,A=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,D=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,U=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i;var k=function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];var o=r.sort((function(e,n){return e[0]-n[0]})).map((function(e){return e[1]}));return function(e){for(var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=[],i=e.split("\n"),a=r;a<i.length;a++){var l=i[a];if(!(l.length>1024)){var u=$.test(l)?l.replace($,"$1"):l;if(!u.match(/\S*Error: /)){var s,f=c(o);try{for(f.s();!(s=f.n()).done;){var p=(0,s.value)(u);if(p){t.push(p);break}}}catch(e){f.e(e)}finally{f.f()}if(t.length>=S)break}}}return function(e){if(!e.length)return[];var r=e.slice(0,S);return r.reverse(),r.map((function(e){return n(n({},e),{},{filename:e.filename||r[r.length-1].filename,function:e.function||"?"})}))}(t)}}.apply(void 0,[[30,function(e){var n=R.exec(e);if(n){if(n[2]&&0===n[2].indexOf("eval")){var r=P.exec(n[2]);r&&(n[2]=r[1],n[3]=r[2],n[4]=r[3])}var t=o(M(n[1]||T,n[2]),2),i=t[0];return H(t[1],i,n[3]?+n[3]:void 0,n[4]?+n[4]:void 0)}}],[50,function(e){var n=A.exec(e);if(n){if(n[3]&&n[3].indexOf(" > eval")>-1){var r=D.exec(n[3]);r&&(n[1]=n[1]||"eval",n[3]=r[1],n[4]=r[2],n[5]="")}var t=n[3],i=n[1]||T,a=o(M(i,t),2);return i=a[0],H(t=a[1],i,n[4]?+n[4]:void 0,n[5]?+n[5]:void 0)}}],[40,function(e){var n=U.exec(e);return n?H(n[2],n[1]||T,+n[3],n[4]?+n[4]:void 0):void 0}]]),M=function(e,n){var r=-1!==e.indexOf("safari-extension"),t=-1!==e.indexOf("safari-web-extension");return r||t?[-1!==e.indexOf("@")?e.split("@")[0]:T,r?"safari-extension:".concat(n):"safari-web-extension:".concat(n)]:[e,n]},I=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i,N=/Minified React error #\d+;/i;function C(e){var n=e.stacktrace||e.stack||"",r=function(e){if(e){if(x(e.framesToPop))return e.framesToPop;if(N.test(e.message))return 1}return 0}(e);try{return k(n,r)}catch(e){}return[]}function G(e){var n=C(e);return{$exception_type:e.name,$exception_message:e.message,$exception_stack_trace_raw:JSON.stringify(n)}}function z(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:40,r=Object.keys(e);if(r.sort(),!r.length)return"[object has no keys]";for(var t=r.length;t>0;t--){var o=r.slice(0,t).join(", ");if(!(o.length>n))return t===r.length||o.length<=n?o:"".concat(o.slice(0,n),"...")}return""}function q(e){var r=o(e,5),t=r[0],i=r[1],a=r[2],c=r[3],l=r[4],u={};if(y(l)&&_(t)){var s="Error",f=t,p=t.match(I);p&&(s=p[1],f=p[2]),u={$exception_type:s,$exception_message:f}}var d=l||t;if(w(d)||function(e){return j(e,"DOMException")}(d)){var v=d;if(function(e){return"stack"in e}(d))u=G(d);else{var g=v.name||(w(v)?"DOMError":"DOMException"),h=v.message?"".concat(g,": ").concat(v.message):g;u=function(e){return{$exception_type:"Error",$exception_message:e}}(h),u.$exception_type=w(v)?"DOMError":"DOMException",u.$exception_message=u.$exception_message||h}"code"in v&&(u.$exception_DOMException_code="".concat(v.code))}else if(function(e){return j(e,"ErrorEvent")}(d)&&d.error)u=G(d.error);else if(function(e){switch(Object.prototype.toString.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return E(e,Error)}}(d))u=G(d);else if(function(e){return j(e,"Object")}(d)||O(d)){u=function(e){return{$exception_type:O(e)?e.constructor.name:"Error",$exception_message:"Non-Error ".concat("exception"," captured with keys: ",z(e))}}(d),u.$exception_is_synthetic=!0}else u.$exception_type=u.$exception_type||"Error",u.$exception_message=u.$exception_message||d,u.$exception_is_synthetic=!0;return n(n(n(n({},u),{},{$exception_type:u.$exception_type||"UnknownErrorType",$exception_message:u.$exception_message||""},i?{$exception_source:i}:{}),a?{$exception_lineno:a}:{}),c?{$exception_colno:c}:{})}var L="[PostHog.js]",X={_log:function(e){if(l&&f.POSTHOG_DEBUG&&!y(l.console)&&l.console){for(var n=("__rrweb_original__"in l.console[e]?l.console[e].__rrweb_original__:l.console[e]),r=arguments.length,t=new Array(r>1?r-1:0),o=1;o<r;o++)t[o-1]=arguments[o];n.apply(void 0,[L].concat(t))}},info:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];X._log.apply(X,["log"].concat(n))},warn:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];X._log.apply(X,["warn"].concat(n))},error:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];X._log.apply(X,["error"].concat(n))},critical:function(){for(var e,n=arguments.length,r=new Array(n),t=0;t<n;t++)r[t]=arguments[t];(e=console).error.apply(e,[L].concat(r))},uninitializedWarning:function(e){X.error("You must initialize PostHog before calling ".concat(e))}},W=function(e,n){var r=new B(e);return r.afterDecideResponse(n),r},B=function(){function e(n){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),t(this,"originalOnErrorHandler",void 0),t(this,"originalOnUnhandledRejectionHandler",void 0),t(this,"errorsToIgnore",[]),this.instance=n}var i,a,c;return i=e,a=[{key:"startCapturing",value:function(){var e;if(l&&this.isEnabled()&&(null===(e=l.onerror)||void 0===e||!e.__POSTHOG_INSTRUMENTED__))try{this.originalOnErrorHandler=l.onerror,l.onerror=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.captureException(n),!!this.originalOnErrorHandler&&this.originalOnErrorHandler.apply(this,n)}.bind(this),l.onerror.__POSTHOG_INSTRUMENTED__=!0,this.originalOnUnhandledRejectionHandler=l.onunhandledrejection,l.onunhandledrejection=function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];var i=function(e){var r=o(e,1)[0],t=r;try{"reason"in r?t=r.reason:"detail"in r&&"reason"in r.detail&&(t=r.detail.reason)}catch(e){}var i={};return(i=m(t)?{$exception_message:"Non-Error promise rejection captured with value: ".concat(String(t))}:q([t])).$exception_handled=!1,n(n({},i),{},{$exception_type:i.$exception_type="UnhandledRejection",$exception_message:i.$exception_message=i.$exception_message||r.reason||String(t)})}(r);return this.sendExceptionEvent(i),!l||!this.originalOnUnhandledRejectionHandler||this.originalOnUnhandledRejectionHandler.apply(l,r)}.bind(this),l.onunhandledrejection.__POSTHOG_INSTRUMENTED__=!0}catch(e){X.error("PostHog failed to start exception autocapture",e),this.stopCapturing()}}},{key:"stopCapturing",value:function(){var e,n;l&&(y(this.originalOnErrorHandler)||(l.onerror=this.originalOnErrorHandler,this.originalOnErrorHandler=null),null===(e=l.onerror)||void 0===e||delete e.__POSTHOG_INSTRUMENTED__,y(this.originalOnUnhandledRejectionHandler)||(l.onunhandledrejection=this.originalOnUnhandledRejectionHandler,this.originalOnUnhandledRejectionHandler=null),null===(n=l.onunhandledrejection)||void 0===n||delete n.__POSTHOG_INSTRUMENTED__)}},{key:"isCapturing",value:function(){var e;return!(null==l||null===(e=l.onerror)||void 0===e||!e.__POSTHOG_INSTRUMENTED__)}},{key:"isEnabled",value:function(){var e;return null!==(e=this.remoteEnabled)&&void 0!==e&&e}},{key:"afterDecideResponse",value:function(e){var n=e.autocaptureExceptions;if(this.remoteEnabled=!!n||!1,!m(n)&&"errors_to_ignore"in n&&v(n.errors_to_ignore)){var r=n.errors_to_ignore;this.errorsToIgnore=r.map((function(e){return new RegExp(e)}))}this.isEnabled()&&(this.startCapturing(),X.info("[Exception Capture] Remote config for exception autocapture is enabled, starting with config: ",h(n)?n:{}))}},{key:"captureException",value:function(e,r){var t=q(e);if(this.errorsToIgnore.some((function(e){return e.test(t.$exception_message||"")})))X.info("[Exception Capture] Ignoring exception based on remote config",t);else{var o=n(n({},r),t),i=this.instance.requestRouter.endpointFor("ui");t.$exception_personURL=i+"/person/"+this.instance.get_distinct_id(),this.sendExceptionEvent(o)}}},{key:"sendExceptionEvent",value:function(e){this.instance.capture("$exception",e,{_noTruncate:!0,_batchKey:"exceptionEvent"})}}],a&&r(i.prototype,a),c&&r(i,c),Object.defineProperty(i,"prototype",{writable:!1}),e}();l.extendPostHogWithExceptionAutoCapture=W}();
//# sourceMappingURL=exception-autocapture.js.map
