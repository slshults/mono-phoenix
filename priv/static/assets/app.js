(() => {
  var __create = Object.create;
  var __defProp = Object.defineProperty;
  var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
  var __getOwnPropNames = Object.getOwnPropertyNames;
  var __getOwnPropSymbols = Object.getOwnPropertySymbols;
  var __getProtoOf = Object.getPrototypeOf;
  var __hasOwnProp = Object.prototype.hasOwnProperty;
  var __propIsEnum = Object.prototype.propertyIsEnumerable;
  var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
  var __spreadValues = (a2, b2) => {
    for (var prop in b2 || (b2 = {}))
      if (__hasOwnProp.call(b2, prop))
        __defNormalProp(a2, prop, b2[prop]);
    if (__getOwnPropSymbols)
      for (var prop of __getOwnPropSymbols(b2)) {
        if (__propIsEnum.call(b2, prop))
          __defNormalProp(a2, prop, b2[prop]);
      }
    return a2;
  };
  var __objRest = (source, exclude) => {
    var target = {};
    for (var prop in source)
      if (__hasOwnProp.call(source, prop) && exclude.indexOf(prop) < 0)
        target[prop] = source[prop];
    if (source != null && __getOwnPropSymbols)
      for (var prop of __getOwnPropSymbols(source)) {
        if (exclude.indexOf(prop) < 0 && __propIsEnum.call(source, prop))
          target[prop] = source[prop];
      }
    return target;
  };
  var __commonJS = (cb, mod) => function __require() {
    return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
  };
  var __copyProps = (to, from, except, desc) => {
    if (from && typeof from === "object" || typeof from === "function") {
      for (let key of __getOwnPropNames(from))
        if (!__hasOwnProp.call(to, key) && key !== except)
          __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
    }
    return to;
  };
  var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target, mod));

  // vendor/topbar.js
  var require_topbar = __commonJS({
    "vendor/topbar.js"(exports, module) {
      (function(window2, document2) {
        "use strict";
        (function() {
          var lastTime = 0;
          var vendors = ["ms", "moz", "webkit", "o"];
          for (var x2 = 0; x2 < vendors.length && !window2.requestAnimationFrame; ++x2) {
            window2.requestAnimationFrame = window2[vendors[x2] + "RequestAnimationFrame"];
            window2.cancelAnimationFrame = window2[vendors[x2] + "CancelAnimationFrame"] || window2[vendors[x2] + "CancelRequestAnimationFrame"];
          }
          if (!window2.requestAnimationFrame)
            window2.requestAnimationFrame = function(callback, element) {
              var currTime = new Date().getTime();
              var timeToCall = Math.max(0, 16 - (currTime - lastTime));
              var id = window2.setTimeout(function() {
                callback(currTime + timeToCall);
              }, timeToCall);
              lastTime = currTime + timeToCall;
              return id;
            };
          if (!window2.cancelAnimationFrame)
            window2.cancelAnimationFrame = function(id) {
              clearTimeout(id);
            };
        })();
        var canvas, progressTimerId, fadeTimerId, currentProgress, showing, addEvent = function(elem, type, handler) {
          if (elem.addEventListener)
            elem.addEventListener(type, handler, false);
          else if (elem.attachEvent)
            elem.attachEvent("on" + type, handler);
          else
            elem["on" + type] = handler;
        }, options = {
          autoRun: true,
          barThickness: 3,
          barColors: {
            0: "rgba(26,  188, 156, .9)",
            ".25": "rgba(52,  152, 219, .9)",
            ".50": "rgba(241, 196, 15,  .9)",
            ".75": "rgba(230, 126, 34,  .9)",
            "1.0": "rgba(211, 84,  0,   .9)"
          },
          shadowBlur: 10,
          shadowColor: "rgba(0,   0,   0,   .6)",
          className: null
        }, repaint = function() {
          canvas.width = window2.innerWidth;
          canvas.height = options.barThickness * 5;
          var ctx = canvas.getContext("2d");
          ctx.shadowBlur = options.shadowBlur;
          ctx.shadowColor = options.shadowColor;
          var lineGradient = ctx.createLinearGradient(0, 0, canvas.width, 0);
          for (var stop in options.barColors)
            lineGradient.addColorStop(stop, options.barColors[stop]);
          ctx.lineWidth = options.barThickness;
          ctx.beginPath();
          ctx.moveTo(0, options.barThickness / 2);
          ctx.lineTo(Math.ceil(currentProgress * canvas.width), options.barThickness / 2);
          ctx.strokeStyle = lineGradient;
          ctx.stroke();
        }, createCanvas = function() {
          canvas = document2.createElement("canvas");
          var style = canvas.style;
          style.position = "fixed";
          style.top = style.left = style.right = style.margin = style.padding = 0;
          style.zIndex = 100001;
          style.display = "none";
          if (options.className)
            canvas.classList.add(options.className);
          document2.body.appendChild(canvas);
          addEvent(window2, "resize", repaint);
        }, topbar2 = {
          config: function(opts) {
            for (var key in opts)
              if (options.hasOwnProperty(key))
                options[key] = opts[key];
          },
          show: function() {
            if (showing)
              return;
            showing = true;
            if (fadeTimerId !== null)
              window2.cancelAnimationFrame(fadeTimerId);
            if (!canvas)
              createCanvas();
            canvas.style.opacity = 1;
            canvas.style.display = "block";
            topbar2.progress(0);
            if (options.autoRun) {
              (function loop() {
                progressTimerId = window2.requestAnimationFrame(loop);
                topbar2.progress("+" + 0.05 * Math.pow(1 - Math.sqrt(currentProgress), 2));
              })();
            }
          },
          progress: function(to) {
            if (typeof to === "undefined")
              return currentProgress;
            if (typeof to === "string") {
              to = (to.indexOf("+") >= 0 || to.indexOf("-") >= 0 ? currentProgress : 0) + parseFloat(to);
            }
            currentProgress = to > 1 ? 1 : to;
            repaint();
            return currentProgress;
          },
          hide: function() {
            if (!showing)
              return;
            showing = false;
            if (progressTimerId != null) {
              window2.cancelAnimationFrame(progressTimerId);
              progressTimerId = null;
            }
            (function loop() {
              if (topbar2.progress("+.1") >= 1) {
                canvas.style.opacity -= 0.05;
                if (canvas.style.opacity <= 0.05) {
                  canvas.style.display = "none";
                  fadeTimerId = null;
                  return;
                }
              }
              fadeTimerId = window2.requestAnimationFrame(loop);
            })();
          }
        };
        if (typeof module === "object" && typeof module.exports === "object") {
          module.exports = topbar2;
        } else if (typeof define === "function" && define.amd) {
          define(function() {
            return topbar2;
          });
        } else {
          this.topbar = topbar2;
        }
      }).call(exports, window, document);
    }
  });

  // js/dark_mode.js
  function setDarkModePreference(isDarkMode) {
    localStorage.setItem("darkMode", isDarkMode ? "true" : "false");
    document.cookie = "darkModePreference=" + (isDarkMode ? "true" : "false") + ";path=/";
    var bodyElement = document.body;
    var lightModeToggle = document.getElementById("light-mode-toggle");
    var darkModeToggle = document.getElementById("dark-mode-toggle");
    if (isDarkMode) {
      bodyElement.classList.add("dark-mode");
      lightModeToggle.style.display = "none";
      darkModeToggle.style.display = "block";
    } else {
      bodyElement.classList.remove("dark-mode");
      lightModeToggle.style.display = "block";
      darkModeToggle.style.display = "none";
    }
  }
  function toggleDarkMode() {
    var isDarkMode = localStorage.getItem("darkMode") === "true";
    setDarkModePreference(!isDarkMode);
  }
  var darkModeIcon = document.getElementById("dark-mode-icon");
  if (darkModeIcon) {
    darkModeIcon.addEventListener("click", toggleDarkMode);
  }
  var initialDarkMode = localStorage.getItem("darkMode") === "true";
  setDarkModePreference(initialDarkMode);
  window.getCookie = function(name) {
    const value = "; " + document.cookie;
    const parts = value.split("; " + name + "=");
    if (parts.length === 2)
      return parts.pop().split(";").shift();
    return null;
  };

  // ../node_modules/posthog-js/dist/es.js
  function e(e5, t2) {
    var n2 = Object.keys(e5);
    if (Object.getOwnPropertySymbols) {
      var i2 = Object.getOwnPropertySymbols(e5);
      t2 && (i2 = i2.filter(function(t3) {
        return Object.getOwnPropertyDescriptor(e5, t3).enumerable;
      })), n2.push.apply(n2, i2);
    }
    return n2;
  }
  function t(t2) {
    for (var n2 = 1; n2 < arguments.length; n2++) {
      var i2 = arguments[n2] != null ? arguments[n2] : {};
      n2 % 2 ? e(Object(i2), true).forEach(function(e5) {
        o(t2, e5, i2[e5]);
      }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(t2, Object.getOwnPropertyDescriptors(i2)) : e(Object(i2)).forEach(function(e5) {
        Object.defineProperty(t2, e5, Object.getOwnPropertyDescriptor(i2, e5));
      });
    }
    return t2;
  }
  function n(e5) {
    return n = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(e6) {
      return typeof e6;
    } : function(e6) {
      return e6 && typeof Symbol == "function" && e6.constructor === Symbol && e6 !== Symbol.prototype ? "symbol" : typeof e6;
    }, n(e5);
  }
  function i(e5, t2) {
    if (!(e5 instanceof t2))
      throw new TypeError("Cannot call a class as a function");
  }
  function r(e5, t2) {
    for (var n2 = 0; n2 < t2.length; n2++) {
      var i2 = t2[n2];
      i2.enumerable = i2.enumerable || false, i2.configurable = true, "value" in i2 && (i2.writable = true), Object.defineProperty(e5, i2.key, i2);
    }
  }
  function s(e5, t2, n2) {
    return t2 && r(e5.prototype, t2), n2 && r(e5, n2), Object.defineProperty(e5, "prototype", { writable: false }), e5;
  }
  function o(e5, t2, n2) {
    return t2 in e5 ? Object.defineProperty(e5, t2, { value: n2, enumerable: true, configurable: true, writable: true }) : e5[t2] = n2, e5;
  }
  function a(e5, t2) {
    if (e5 == null)
      return {};
    var n2, i2, r2 = function(e6, t3) {
      if (e6 == null)
        return {};
      var n3, i3, r3 = {}, s3 = Object.keys(e6);
      for (i3 = 0; i3 < s3.length; i3++)
        n3 = s3[i3], t3.indexOf(n3) >= 0 || (r3[n3] = e6[n3]);
      return r3;
    }(e5, t2);
    if (Object.getOwnPropertySymbols) {
      var s2 = Object.getOwnPropertySymbols(e5);
      for (i2 = 0; i2 < s2.length; i2++)
        n2 = s2[i2], t2.indexOf(n2) >= 0 || Object.prototype.propertyIsEnumerable.call(e5, n2) && (r2[n2] = e5[n2]);
    }
    return r2;
  }
  function u(e5, t2) {
    return function(e6) {
      if (Array.isArray(e6))
        return e6;
    }(e5) || function(e6, t3) {
      var n2 = e6 == null ? null : typeof Symbol != "undefined" && e6[Symbol.iterator] || e6["@@iterator"];
      if (n2 == null)
        return;
      var i2, r2, s2 = [], o2 = true, a2 = false;
      try {
        for (n2 = n2.call(e6); !(o2 = (i2 = n2.next()).done) && (s2.push(i2.value), !t3 || s2.length !== t3); o2 = true)
          ;
      } catch (e7) {
        a2 = true, r2 = e7;
      } finally {
        try {
          o2 || n2.return == null || n2.return();
        } finally {
          if (a2)
            throw r2;
        }
      }
      return s2;
    }(e5, t2) || c(e5, t2) || function() {
      throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
    }();
  }
  function l(e5) {
    return function(e6) {
      if (Array.isArray(e6))
        return d(e6);
    }(e5) || function(e6) {
      if (typeof Symbol != "undefined" && e6[Symbol.iterator] != null || e6["@@iterator"] != null)
        return Array.from(e6);
    }(e5) || c(e5) || function() {
      throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
    }();
  }
  function c(e5, t2) {
    if (e5) {
      if (typeof e5 == "string")
        return d(e5, t2);
      var n2 = Object.prototype.toString.call(e5).slice(8, -1);
      return n2 === "Object" && e5.constructor && (n2 = e5.constructor.name), n2 === "Map" || n2 === "Set" ? Array.from(e5) : n2 === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n2) ? d(e5, t2) : void 0;
    }
  }
  function d(e5, t2) {
    (t2 == null || t2 > e5.length) && (t2 = e5.length);
    for (var n2 = 0, i2 = new Array(t2); n2 < t2; n2++)
      i2[n2] = e5[n2];
    return i2;
  }
  function h(e5, t2) {
    var n2 = typeof Symbol != "undefined" && e5[Symbol.iterator] || e5["@@iterator"];
    if (!n2) {
      if (Array.isArray(e5) || (n2 = c(e5)) || t2 && e5 && typeof e5.length == "number") {
        n2 && (e5 = n2);
        var i2 = 0, r2 = function() {
        };
        return { s: r2, n: function() {
          return i2 >= e5.length ? { done: true } : { done: false, value: e5[i2++] };
        }, e: function(e6) {
          throw e6;
        }, f: r2 };
      }
      throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
    }
    var s2, o2 = true, a2 = false;
    return { s: function() {
      n2 = n2.call(e5);
    }, n: function() {
      var e6 = n2.next();
      return o2 = e6.done, e6;
    }, e: function(e6) {
      a2 = true, s2 = e6;
    }, f: function() {
      try {
        o2 || n2.return == null || n2.return();
      } finally {
        if (a2)
          throw s2;
      }
    } };
  }
  var f = { DEBUG: false, LIB_VERSION: "1.113.2" };
  var p = Array.isArray;
  var g = Object.prototype;
  var v = g.hasOwnProperty;
  var _ = g.toString;
  var m = p || function(e5) {
    return _.call(e5) === "[object Array]";
  };
  var y = function(e5) {
    return typeof e5 == "function";
  };
  var b = function(e5) {
    return e5 === Object(e5) && !m(e5);
  };
  var w = function(e5) {
    return e5 === void 0;
  };
  var k = function(e5) {
    return _.call(e5) == "[object String]";
  };
  var S = function(e5) {
    return e5 === null;
  };
  var F = function(e5) {
    return w(e5) || S(e5);
  };
  var R = function(e5) {
    return _.call(e5) == "[object Number]";
  };
  var x = function(e5) {
    return _.call(e5) === "[object Boolean]";
  };
  var P = function(e5) {
    return e5 instanceof FormData;
  };
  var E = typeof window != "undefined" ? window : void 0;
  var I = typeof globalThis != "undefined" ? globalThis : E;
  var C = Array.prototype;
  var $ = C.forEach;
  var T = C.indexOf;
  var O = I == null ? void 0 : I.navigator;
  var A = I == null ? void 0 : I.document;
  var q = I == null ? void 0 : I.location;
  var M = I == null ? void 0 : I.fetch;
  var D = I != null && I.XMLHttpRequest && "withCredentials" in new I.XMLHttpRequest() ? I.XMLHttpRequest : void 0;
  var L = I == null ? void 0 : I.AbortController;
  var N = O == null ? void 0 : O.userAgent;
  var B = E != null ? E : {};
  var H = "[PostHog.js]";
  var j = { _log: function(e5) {
    if (E && (f.DEBUG || B.POSTHOG_DEBUG) && !w(E.console) && E.console) {
      for (var t2 = ("__rrweb_original__" in E.console[e5]) ? E.console[e5].__rrweb_original__ : E.console[e5], n2 = arguments.length, i2 = new Array(n2 > 1 ? n2 - 1 : 0), r2 = 1; r2 < n2; r2++)
        i2[r2 - 1] = arguments[r2];
      t2.apply(void 0, [H].concat(i2));
    }
  }, info: function() {
    for (var e5 = arguments.length, t2 = new Array(e5), n2 = 0; n2 < e5; n2++)
      t2[n2] = arguments[n2];
    j._log.apply(j, ["log"].concat(t2));
  }, warn: function() {
    for (var e5 = arguments.length, t2 = new Array(e5), n2 = 0; n2 < e5; n2++)
      t2[n2] = arguments[n2];
    j._log.apply(j, ["warn"].concat(t2));
  }, error: function() {
    for (var e5 = arguments.length, t2 = new Array(e5), n2 = 0; n2 < e5; n2++)
      t2[n2] = arguments[n2];
    j._log.apply(j, ["error"].concat(t2));
  }, critical: function() {
    for (var e5, t2 = arguments.length, n2 = new Array(t2), i2 = 0; i2 < t2; i2++)
      n2[i2] = arguments[i2];
    (e5 = console).error.apply(e5, [H].concat(n2));
  }, uninitializedWarning: function(e5) {
    j.error("You must initialize PostHog before calling ".concat(e5));
  } };
  var U = {};
  var V = function(e5) {
    return e5.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g, "");
  };
  function W(e5, t2, n2) {
    if (m(e5)) {
      if ($ && e5.forEach === $)
        e5.forEach(t2, n2);
      else if ("length" in e5 && e5.length === +e5.length) {
        for (var i2 = 0, r2 = e5.length; i2 < r2; i2++)
          if (i2 in e5 && t2.call(n2, e5[i2], i2) === U)
            return;
      }
    }
  }
  function z(e5, t2, n2) {
    if (!F(e5)) {
      if (m(e5))
        return W(e5, t2, n2);
      if (P(e5)) {
        var i2, r2 = h(e5.entries());
        try {
          for (r2.s(); !(i2 = r2.n()).done; ) {
            var s2 = i2.value;
            if (t2.call(n2, s2[1], s2[0]) === U)
              return;
          }
        } catch (e6) {
          r2.e(e6);
        } finally {
          r2.f();
        }
      } else
        for (var o2 in e5)
          if (v.call(e5, o2) && t2.call(n2, e5[o2], o2) === U)
            return;
    }
  }
  var G = function(e5) {
    for (var t2 = arguments.length, n2 = new Array(t2 > 1 ? t2 - 1 : 0), i2 = 1; i2 < t2; i2++)
      n2[i2 - 1] = arguments[i2];
    return W(n2, function(t3) {
      for (var n3 in t3)
        t3[n3] !== void 0 && (e5[n3] = t3[n3]);
    }), e5;
  };
  function Q(e5, t2) {
    return e5.indexOf(t2) !== -1;
  }
  function Y(e5) {
    for (var t2 = Object.keys(e5), n2 = t2.length, i2 = new Array(n2); n2--; )
      i2[n2] = [t2[n2], e5[t2[n2]]];
    return i2;
  }
  var J = function() {
    return Date.now = Date.now || function() {
      return +new Date();
    }, Date.now();
  };
  var K = function(e5) {
    try {
      return e5();
    } catch (e6) {
      return;
    }
  };
  var X = function(e5) {
    return function() {
      try {
        for (var t2 = arguments.length, n2 = new Array(t2), i2 = 0; i2 < t2; i2++)
          n2[i2] = arguments[i2];
        return e5.apply(this, n2);
      } catch (e6) {
        j.critical("Implementation error. Please turn on debug mode and open a ticket on https://app.posthog.com/home#panel=support%3Asupport%3A."), j.critical(e6);
      }
    };
  };
  var Z = function(e5) {
    var t2 = {};
    return z(e5, function(e6, n2) {
      k(e6) && e6.length > 0 && (t2[n2] = e6);
    }), t2;
  };
  function ee(e5, t2) {
    return n2 = e5, i2 = function(e6) {
      return k(e6) && !S(t2) ? e6.slice(0, t2) : e6;
    }, r2 = /* @__PURE__ */ new Set(), function e6(t3, n3) {
      return t3 !== Object(t3) ? i2 ? i2(t3, n3) : t3 : r2.has(t3) ? void 0 : (r2.add(t3), m(t3) ? (s2 = [], W(t3, function(t4) {
        s2.push(e6(t4));
      })) : (s2 = {}, z(t3, function(t4, n4) {
        r2.has(t4) || (s2[n4] = e6(t4, n4));
      })), s2);
      var s2;
    }(n2);
    var n2, i2, r2;
  }
  function te(e5) {
    var t2, n2, i2, r2, s2, o2 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=", a2 = 0, u2 = 0, l2 = "", c2 = [];
    if (!e5)
      return e5;
    e5 = ne(e5);
    do {
      t2 = (s2 = e5.charCodeAt(a2++) << 16 | e5.charCodeAt(a2++) << 8 | e5.charCodeAt(a2++)) >> 18 & 63, n2 = s2 >> 12 & 63, i2 = s2 >> 6 & 63, r2 = 63 & s2, c2[u2++] = o2.charAt(t2) + o2.charAt(n2) + o2.charAt(i2) + o2.charAt(r2);
    } while (a2 < e5.length);
    switch (l2 = c2.join(""), e5.length % 3) {
      case 1:
        l2 = l2.slice(0, -2) + "==";
        break;
      case 2:
        l2 = l2.slice(0, -1) + "=";
    }
    return l2;
  }
  var ne = function(e5) {
    var t2, n2, i2, r2, s2 = "";
    for (t2 = n2 = 0, i2 = (e5 = (e5 + "").replace(/\r\n/g, "\n").replace(/\r/g, "\n")).length, r2 = 0; r2 < i2; r2++) {
      var o2 = e5.charCodeAt(r2), a2 = null;
      o2 < 128 ? n2++ : a2 = o2 > 127 && o2 < 2048 ? String.fromCharCode(o2 >> 6 | 192, 63 & o2 | 128) : String.fromCharCode(o2 >> 12 | 224, o2 >> 6 & 63 | 128, 63 & o2 | 128), S(a2) || (n2 > t2 && (s2 += e5.substring(t2, n2)), s2 += a2, t2 = n2 = r2 + 1);
    }
    return n2 > t2 && (s2 += e5.substring(t2, e5.length)), s2;
  };
  var ie = function() {
    function e5(t2) {
      return t2 && (t2.preventDefault = e5.preventDefault, t2.stopPropagation = e5.stopPropagation), t2;
    }
    return e5.preventDefault = function() {
      this.returnValue = false;
    }, e5.stopPropagation = function() {
      this.cancelBubble = true;
    }, function(t2, n2, i2, r2, s2) {
      if (t2)
        if (t2.addEventListener && !r2)
          t2.addEventListener(n2, i2, !!s2);
        else {
          var o2 = "on" + n2, a2 = t2[o2];
          t2[o2] = function(t3, n3, i3) {
            return function(r3) {
              if (r3 = r3 || e5(E == null ? void 0 : E.event)) {
                var s3, o3 = true;
                y(i3) && (s3 = i3(r3));
                var a3 = n3.call(t3, r3);
                return s3 !== false && a3 !== false || (o3 = false), o3;
              }
            };
          }(t2, i2, a2);
        }
      else
        j.error("No valid element provided to register_event");
    };
  }();
  function re(e5, t2) {
    var n2 = function() {
      if (!A)
        return t2("document not found");
      var n3 = A.createElement("script");
      n3.type = "text/javascript", n3.src = e5, n3.onload = function(e6) {
        return t2(void 0, e6);
      }, n3.onerror = function(e6) {
        return t2(e6);
      };
      var i2, r2 = A.querySelectorAll("body > script");
      r2.length > 0 ? (i2 = r2[0].parentNode) === null || i2 === void 0 || i2.insertBefore(n3, r2[0]) : A.body.appendChild(n3);
    };
    A != null && A.body ? n2() : A == null || A.addEventListener("DOMContentLoaded", n2);
  }
  function se(e5) {
    return e5 ? V(e5).split(/\s+/) : [];
  }
  function oe(e5) {
    var t2 = "";
    switch (n(e5.className)) {
      case "string":
        t2 = e5.className;
        break;
      case "object":
        t2 = ("baseVal" in e5.className ? e5.className.baseVal : null) || e5.getAttribute("class") || "";
        break;
      default:
        t2 = "";
    }
    return se(t2);
  }
  function ae(e5) {
    return F(e5) ? null : V(e5).split(/(\s+)/).filter(function(e6) {
      return Fe(e6);
    }).join("").replace(/[\r\n]/g, " ").replace(/[ ]+/g, " ").substring(0, 255);
  }
  function ue(e5) {
    var t2 = "";
    return ve(e5) && !_e(e5) && e5.childNodes && e5.childNodes.length && z(e5.childNodes, function(e6) {
      var n2;
      de(e6) && e6.textContent && (t2 += (n2 = ae(e6.textContent)) !== null && n2 !== void 0 ? n2 : "");
    }), V(t2);
  }
  function le(e5) {
    return !!e5 && e5.nodeType === 1;
  }
  function ce(e5, t2) {
    return !!e5 && !!e5.tagName && e5.tagName.toLowerCase() === t2.toLowerCase();
  }
  function de(e5) {
    return !!e5 && e5.nodeType === 3;
  }
  function he(e5) {
    return !!e5 && e5.nodeType === 11;
  }
  var fe = ["a", "button", "form", "input", "select", "textarea", "label"];
  function pe(e5) {
    var t2 = e5.parentNode;
    return !(!t2 || !le(t2)) && t2;
  }
  function ge(e5, t2) {
    var i2 = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : void 0, r2 = arguments.length > 3 ? arguments[3] : void 0, s2 = arguments.length > 4 ? arguments[4] : void 0;
    if (!E || !e5 || ce(e5, "html") || !le(e5))
      return false;
    if (i2 != null && i2.url_allowlist) {
      var o2 = E.location.href, a2 = i2.url_allowlist;
      if (a2 && !a2.some(function(e6) {
        return o2.match(e6);
      }))
        return false;
    }
    if (i2 != null && i2.dom_event_allowlist) {
      var u2 = i2.dom_event_allowlist;
      if (u2 && !u2.some(function(e6) {
        return t2.type === e6;
      }))
        return false;
    }
    for (var l2 = false, c2 = [e5], d2 = true, f2 = e5; f2.parentNode && !ce(f2, "body"); )
      if (he(f2.parentNode))
        c2.push(f2.parentNode.host), f2 = f2.parentNode.host;
      else {
        if (!(d2 = pe(f2)))
          break;
        if (r2 || fe.indexOf(d2.tagName.toLowerCase()) > -1)
          l2 = true;
        else {
          var p2 = E.getComputedStyle(d2);
          p2 && p2.getPropertyValue("cursor") === "pointer" && (l2 = true);
        }
        c2.push(d2), f2 = d2;
      }
    if (!function(e6, t3) {
      var i3 = t3 == null ? void 0 : t3.element_allowlist;
      if (w(i3))
        return true;
      var r3, s3 = h(e6);
      try {
        var o3 = function() {
          var e7 = r3.value;
          if (i3.some(function(t4) {
            return e7.tagName.toLowerCase() === t4;
          }))
            return { v: true };
        };
        for (s3.s(); !(r3 = s3.n()).done; ) {
          var a3 = o3();
          if (n(a3) === "object")
            return a3.v;
        }
      } catch (e7) {
        s3.e(e7);
      } finally {
        s3.f();
      }
      return false;
    }(c2, i2))
      return false;
    if (!function(e6, t3) {
      var i3 = t3 == null ? void 0 : t3.css_selector_allowlist;
      if (w(i3))
        return true;
      var r3, s3 = h(e6);
      try {
        var o3 = function() {
          var e7 = r3.value;
          if (i3.some(function(t4) {
            return e7.matches(t4);
          }))
            return { v: true };
        };
        for (s3.s(); !(r3 = s3.n()).done; ) {
          var a3 = o3();
          if (n(a3) === "object")
            return a3.v;
        }
      } catch (e7) {
        s3.e(e7);
      } finally {
        s3.f();
      }
      return false;
    }(c2, i2))
      return false;
    var g2 = E.getComputedStyle(e5);
    if (g2 && g2.getPropertyValue("cursor") === "pointer" && t2.type === "click")
      return true;
    var v2 = e5.tagName.toLowerCase();
    switch (v2) {
      case "html":
        return false;
      case "form":
        return (s2 || ["submit"]).indexOf(t2.type) >= 0;
      case "input":
      case "select":
      case "textarea":
        return (s2 || ["change", "click"]).indexOf(t2.type) >= 0;
      default:
        return l2 ? (s2 || ["click"]).indexOf(t2.type) >= 0 : (s2 || ["click"]).indexOf(t2.type) >= 0 && (fe.indexOf(v2) > -1 || e5.getAttribute("contenteditable") === "true");
    }
  }
  function ve(e5) {
    for (var t2 = e5; t2.parentNode && !ce(t2, "body"); t2 = t2.parentNode) {
      var n2 = oe(t2);
      if (Q(n2, "ph-sensitive") || Q(n2, "ph-no-capture"))
        return false;
    }
    if (Q(oe(e5), "ph-include"))
      return true;
    var i2 = e5.type || "";
    if (k(i2))
      switch (i2.toLowerCase()) {
        case "hidden":
        case "password":
          return false;
      }
    var r2 = e5.name || e5.id || "";
    if (k(r2)) {
      if (/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(r2.replace(/[^a-zA-Z0-9]/g, "")))
        return false;
    }
    return true;
  }
  function _e(e5) {
    return !!(ce(e5, "input") && !["button", "checkbox", "submit", "reset"].includes(e5.type) || ce(e5, "select") || ce(e5, "textarea") || e5.getAttribute("contenteditable") === "true");
  }
  var me = "(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11})";
  var ye = new RegExp("^(?:".concat(me, ")$"));
  var be = new RegExp(me);
  var we = "\\d{3}-?\\d{2}-?\\d{4}";
  var ke = new RegExp("^(".concat(we, ")$"));
  var Se = new RegExp("(".concat(we, ")"));
  function Fe(e5) {
    var t2 = !(arguments.length > 1 && arguments[1] !== void 0) || arguments[1];
    if (F(e5))
      return false;
    if (k(e5)) {
      if (e5 = V(e5), (t2 ? ye : be).test((e5 || "").replace(/[- ]/g, "")))
        return false;
      if ((t2 ? ke : Se).test(e5))
        return false;
    }
    return true;
  }
  function Re(e5) {
    var t2 = ue(e5);
    return Fe(t2 = "".concat(t2, " ").concat(xe(e5)).trim()) ? t2 : "";
  }
  function xe(e5) {
    var t2 = "";
    return e5 && e5.childNodes && e5.childNodes.length && z(e5.childNodes, function(e6) {
      var n2;
      if (e6 && ((n2 = e6.tagName) === null || n2 === void 0 ? void 0 : n2.toLowerCase()) === "span")
        try {
          var i2 = ue(e6);
          t2 = "".concat(t2, " ").concat(i2).trim(), e6.childNodes && e6.childNodes.length && (t2 = "".concat(t2, " ").concat(xe(e6)).trim());
        } catch (e7) {
          j.error(e7);
        }
    }), t2;
  }
  function Pe(e5) {
    return function(e6) {
      var n2 = e6.map(function(e7) {
        var n3, i2, r2 = "";
        if (e7.tag_name && (r2 += e7.tag_name), e7.attr_class) {
          e7.attr_class.sort();
          var s2, o2 = h(e7.attr_class);
          try {
            for (o2.s(); !(s2 = o2.n()).done; ) {
              var a2 = s2.value;
              r2 += ".".concat(a2.replace(/"/g, ""));
            }
          } catch (e8) {
            o2.e(e8);
          } finally {
            o2.f();
          }
        }
        var l2 = t(t(t(t({}, e7.text ? { text: e7.text } : {}), {}, { "nth-child": (n3 = e7.nth_child) !== null && n3 !== void 0 ? n3 : 0, "nth-of-type": (i2 = e7.nth_of_type) !== null && i2 !== void 0 ? i2 : 0 }, e7.href ? { href: e7.href } : {}), e7.attr_id ? { attr_id: e7.attr_id } : {}), e7.attributes), c2 = {};
        return Y(l2).sort(function(e8, t2) {
          var n4 = u(e8, 1)[0], i3 = u(t2, 1)[0];
          return n4.localeCompare(i3);
        }).forEach(function(e8) {
          var t2 = u(e8, 2), n4 = t2[0], i3 = t2[1];
          return c2[Ee(n4.toString())] = Ee(i3.toString());
        }), r2 += ":", r2 += Y(l2).map(function(e8) {
          var t2 = u(e8, 2), n4 = t2[0], i3 = t2[1];
          return "".concat(n4, '="').concat(i3, '"');
        }).join("");
      });
      return n2.join(";");
    }(function(e6) {
      return e6.map(function(e7) {
        var t2, n2, i2 = { text: (t2 = e7.$el_text) === null || t2 === void 0 ? void 0 : t2.slice(0, 400), tag_name: e7.tag_name, href: (n2 = e7.attr__href) === null || n2 === void 0 ? void 0 : n2.slice(0, 2048), attr_class: Ie(e7), attr_id: e7.attr__id, nth_child: e7.nth_child, nth_of_type: e7.nth_of_type, attributes: {} };
        return Y(e7).filter(function(e8) {
          return u(e8, 1)[0].indexOf("attr__") === 0;
        }).forEach(function(e8) {
          var t3 = u(e8, 2), n3 = t3[0], r2 = t3[1];
          return i2.attributes[n3] = r2;
        }), i2;
      });
    }(e5));
  }
  function Ee(e5) {
    return e5.replace(/"|\\"/g, '\\"');
  }
  function Ie(e5) {
    var t2 = e5.attr__class;
    return t2 ? m(t2) ? t2 : se(t2) : void 0;
  }
  var Ce = function() {
    function e5(t2) {
      i(this, e5), this.clicks = [], this.enabled = t2;
    }
    return s(e5, [{ key: "isRageClick", value: function(e6, t2, n2) {
      if (!this.enabled)
        return false;
      var i2 = this.clicks[this.clicks.length - 1];
      if (i2 && Math.abs(e6 - i2.x) + Math.abs(t2 - i2.y) < 30 && n2 - i2.timestamp < 1e3) {
        if (this.clicks.push({ x: e6, y: t2, timestamp: n2 }), this.clicks.length === 3)
          return true;
      } else
        this.clicks = [{ x: e6, y: t2, timestamp: n2 }];
      return false;
    } }]), e5;
  }();
  var $e = "$people_distinct_id";
  var Te = "__alias";
  var Oe = "__timers";
  var Ae = "$autocapture_disabled_server_side";
  var qe = "$session_recording_enabled_server_side";
  var Me = "$console_log_recording_enabled_server_side";
  var De = "$session_recording_recorder_version_server_side";
  var Le = "$session_recording_network_payload_capture";
  var Ne = "$session_recording_canvas_recording";
  var Be = "$sesid";
  var He = "$session_is_sampled";
  var je = "$enabled_feature_flags";
  var Ue = "$early_access_features";
  var Ve = "$stored_person_properties";
  var We = "$stored_group_properties";
  var ze = "$surveys";
  var Ge = "$flag_call_reported";
  var Qe = "$user_state";
  var Ye = "$posthog_quota_limited";
  var Je = "$client_session_props";
  var Ke = [$e, Te, "__cmpns", Oe, qe, Be, je, Qe, Ye, Ue, We, Ve, ze, Ge, Je];
  var Xe = "$copy_autocapture";
  function Ze(e5, t2) {
    return t2.length > e5 ? t2.slice(0, e5) + "..." : t2;
  }
  var et;
  var tt = { _initializedTokens: [], _isDisabledServerSide: null, _isAutocaptureEnabled: false, _setIsAutocaptureEnabled: function(e5) {
    var t2, n2 = S(this._isDisabledServerSide) ? !((t2 = e5.persistence) === null || t2 === void 0 || !t2.props[Ae]) : this._isDisabledServerSide, i2 = !!e5.config.autocapture;
    this._isAutocaptureEnabled = i2 && !n2;
  }, _previousElementSibling: function(e5) {
    if (e5.previousElementSibling)
      return e5.previousElementSibling;
    var t2 = e5;
    do {
      t2 = t2.previousSibling;
    } while (t2 && !le(t2));
    return t2;
  }, _getAugmentPropertiesFromElement: function(e5) {
    if (!ve(e5))
      return {};
    var t2 = {};
    return z(e5.attributes, function(e6) {
      if (e6.name.indexOf("data-ph-capture-attribute") === 0) {
        var n2 = e6.name.replace("data-ph-capture-attribute-", ""), i2 = e6.value;
        n2 && i2 && Fe(i2) && (t2[n2] = i2);
      }
    }), t2;
  }, _getPropertiesFromElement: function(e5, t2, n2) {
    var i2, r2 = e5.tagName.toLowerCase(), s2 = { tag_name: r2 };
    fe.indexOf(r2) > -1 && !n2 && (r2.toLowerCase() === "a" || r2.toLowerCase() === "button" ? s2.$el_text = Ze(1024, Re(e5)) : s2.$el_text = Ze(1024, ue(e5)));
    var o2 = oe(e5);
    o2.length > 0 && (s2.classes = o2.filter(function(e6) {
      return e6 !== "";
    }));
    var a2 = (i2 = this.config) === null || i2 === void 0 ? void 0 : i2.element_attribute_ignorelist;
    z(e5.attributes, function(n3) {
      var i3;
      if ((!_e(e5) || ["name", "id", "class"].indexOf(n3.name) !== -1) && ((a2 == null || !a2.includes(n3.name)) && !t2 && Fe(n3.value) && (i3 = n3.name, !k(i3) || i3.substring(0, 10) !== "_ngcontent" && i3.substring(0, 7) !== "_nghost"))) {
        var r3 = n3.value;
        n3.name === "class" && (r3 = se(r3).join(" ")), s2["attr__" + n3.name] = Ze(1024, r3);
      }
    });
    for (var u2 = 1, l2 = 1, c2 = e5; c2 = this._previousElementSibling(c2); )
      u2++, c2.tagName === e5.tagName && l2++;
    return s2.nth_child = u2, s2.nth_of_type = l2, s2;
  }, _getDefaultProperties: function(e5) {
    return { $event_type: e5, $ce_version: 1 };
  }, _extractCustomPropertyValue: function(e5) {
    var t2 = [];
    return z(A == null ? void 0 : A.querySelectorAll(e5.css_selector), function(e6) {
      var n2;
      ["input", "select"].indexOf(e6.tagName.toLowerCase()) > -1 ? n2 = e6.value : e6.textContent && (n2 = e6.textContent), Fe(n2) && t2.push(n2);
    }), t2.join(", ");
  }, _getCustomProperties: function(e5) {
    var t2 = this, n2 = {};
    return z(this._customProperties, function(i2) {
      z(i2.event_selectors, function(r2) {
        z(A == null ? void 0 : A.querySelectorAll(r2), function(r3) {
          Q(e5, r3) && ve(r3) && (n2[i2.name] = t2._extractCustomPropertyValue(i2));
        });
      });
    }), n2;
  }, _getEventTarget: function(e5) {
    return w(e5.target) ? e5.srcElement || null : (t2 = e5.target) !== null && t2 !== void 0 && t2.shadowRoot ? e5.composedPath()[0] || null : e5.target || null;
    var t2;
  }, _captureEvent: function(e5, t2) {
    var n2, i2 = this, r2 = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : "$autocapture", s2 = arguments.length > 3 ? arguments[3] : void 0, o2 = this._getEventTarget(e5);
    (de(o2) && (o2 = o2.parentNode || null), r2 === "$autocapture" && e5.type === "click" && e5 instanceof MouseEvent) && ((n2 = this.rageclicks) !== null && n2 !== void 0 && n2.isRageClick(e5.clientX, e5.clientY, new Date().getTime()) && this._captureEvent(e5, t2, "$rageclick"));
    var a2 = r2 === Xe;
    if (o2 && ge(o2, e5, this.config, a2, a2 ? ["copy", "cut"] : void 0)) {
      for (var u2, l2, c2 = [o2], d2 = o2; d2.parentNode && !ce(d2, "body"); )
        he(d2.parentNode) ? (c2.push(d2.parentNode.host), d2 = d2.parentNode.host) : (c2.push(d2.parentNode), d2 = d2.parentNode);
      var h2, f2 = [], p2 = {}, g2 = false;
      if (z(c2, function(e6) {
        var n3 = ve(e6);
        e6.tagName.toLowerCase() === "a" && (h2 = e6.getAttribute("href"), h2 = n3 && Fe(h2) && h2), Q(oe(e6), "ph-no-capture") && (g2 = true), f2.push(i2._getPropertiesFromElement(e6, t2.config.mask_all_element_attributes, t2.config.mask_all_text));
        var r3 = i2._getAugmentPropertiesFromElement(e6);
        G(p2, r3);
      }), t2.config.mask_all_text || (o2.tagName.toLowerCase() === "a" || o2.tagName.toLowerCase() === "button" ? f2[0].$el_text = Re(o2) : f2[0].$el_text = ue(o2)), h2 && (f2[0].attr__href = h2), g2)
        return false;
      var v2 = G(this._getDefaultProperties(e5.type), t2.elementsChainAsString ? { $elements_chain: Pe(f2) } : { $elements: f2 }, (u2 = f2[0]) !== null && u2 !== void 0 && u2.$el_text ? { $el_text: (l2 = f2[0]) === null || l2 === void 0 ? void 0 : l2.$el_text } : {}, this._getCustomProperties(c2), p2, s2 || {});
      if (r2 === Xe) {
        var _2, m2 = ae(E == null || (_2 = E.getSelection()) === null || _2 === void 0 ? void 0 : _2.toString()), y2 = e5.type || "clipboard";
        if (!m2)
          return false;
        v2.$selected_content = m2, v2.$copy_type = y2;
      }
      return t2.capture(r2, v2), true;
    }
  }, _navigate: function(e5) {
    E && (E.location.href = e5);
  }, _addDomEventHandlers: function(e5) {
    var t2 = this;
    if (E && A) {
      var n2 = function(n3) {
        n3 = n3 || (E == null ? void 0 : E.event), t2._captureEvent(n3, e5);
      }, i2 = function(n3) {
        n3 = n3 || (E == null ? void 0 : E.event), t2._captureEvent(n3, e5, Xe);
      };
      ie(A, "submit", n2, false, true), ie(A, "change", n2, false, true), ie(A, "click", n2, false, true), b(e5.config.autocapture) && e5.config.autocapture.capture_copied_text && (ie(A, "copy", i2, false, true), ie(A, "cut", i2, false, true));
    }
  }, _customProperties: [], rageclicks: null, config: void 0, init: function(e5) {
    var t2;
    x(e5.__autocapture) || (this.config = e5.__autocapture), (t2 = this.config) !== null && t2 !== void 0 && t2.url_allowlist && (this.config.url_allowlist = this.config.url_allowlist.map(function(e6) {
      return new RegExp(e6);
    })), this.rageclicks = new Ce(e5.config.rageclick);
  }, afterDecideResponse: function(e5, t2) {
    var n2 = t2.config.token;
    this._initializedTokens.indexOf(n2) > -1 ? j.info('autocapture already initialized for token "' + n2 + '"') : (t2.persistence && t2.persistence.register(o({}, Ae, !!e5.autocapture_opt_out)), this._isDisabledServerSide = !!e5.autocapture_opt_out, this._setIsAutocaptureEnabled(t2), this._initializedTokens.push(n2), e5 && e5.config && e5.config.enable_collect_everything && this._isAutocaptureEnabled ? (e5.custom_properties && (this._customProperties = e5.custom_properties), this._addDomEventHandlers(t2)) : t2.__autocapture = false);
  }, enabledForProject: function(e5, t2, n2) {
    if (!e5)
      return true;
    t2 = w(t2) ? 10 : t2, n2 = w(n2) ? 10 : n2;
    for (var i2 = 0, r2 = 0; r2 < e5.length; r2++)
      i2 += e5.charCodeAt(r2);
    return i2 % t2 < n2;
  }, isBrowserSupported: function() {
    return y(A == null ? void 0 : A.querySelectorAll);
  } };
  !function(e5) {
    for (var t2 in e5)
      y(e5[t2]) && (e5[t2] = e5[t2].bind(e5));
  }(tt), function(e5) {
    for (var t2 in e5)
      y(e5[t2]) && (e5[t2] = X(e5[t2]));
  }(tt), function(e5) {
    e5.GZipJS = "gzip-js", e5.Base64 = "base64";
  }(et || (et = {}));
  var nt = "$active_feature_flags";
  var it = "$override_feature_flags";
  var rt = "$feature_flag_payloads";
  var st = function(e5) {
    var t2, n2 = {}, i2 = h(Y(e5 || {}));
    try {
      for (i2.s(); !(t2 = i2.n()).done; ) {
        var r2 = u(t2.value, 2), s2 = r2[0], o2 = r2[1];
        o2 && (n2[s2] = o2);
      }
    } catch (e6) {
      i2.e(e6);
    } finally {
      i2.f();
    }
    return n2;
  };
  var ot = function() {
    function e5(t2) {
      i(this, e5), this.instance = t2, this._override_warning = false, this.featureFlagEventHandlers = [], this.reloadFeatureFlagsQueued = false, this.reloadFeatureFlagsInAction = false;
    }
    return s(e5, [{ key: "getFlags", value: function() {
      return Object.keys(this.getFlagVariants());
    } }, { key: "getFlagVariants", value: function() {
      var e6 = this.instance.get_property(je), t2 = this.instance.get_property(it);
      if (!t2)
        return e6 || {};
      for (var n2 = G({}, e6), i2 = Object.keys(t2), r2 = 0; r2 < i2.length; r2++)
        t2[i2[r2]] === false ? delete n2[i2[r2]] : n2[i2[r2]] = t2[i2[r2]];
      return this._override_warning || (j.warn(" Overriding feature flags!", { enabledFlags: e6, overriddenFlags: t2, finalFlags: n2 }), this._override_warning = true), n2;
    } }, { key: "getFlagPayloads", value: function() {
      return this.instance.get_property(rt) || {};
    } }, { key: "reloadFeatureFlags", value: function() {
      this.reloadFeatureFlagsQueued || (this.reloadFeatureFlagsQueued = true, this._startReloadTimer());
    } }, { key: "setAnonymousDistinctId", value: function(e6) {
      this.$anon_distinct_id = e6;
    } }, { key: "setReloadingPaused", value: function(e6) {
      this.reloadFeatureFlagsInAction = e6;
    } }, { key: "resetRequestQueue", value: function() {
      this.reloadFeatureFlagsQueued = false;
    } }, { key: "_startReloadTimer", value: function() {
      var e6 = this;
      this.reloadFeatureFlagsQueued && !this.reloadFeatureFlagsInAction && setTimeout(function() {
        !e6.reloadFeatureFlagsInAction && e6.reloadFeatureFlagsQueued && (e6.reloadFeatureFlagsQueued = false, e6._reloadFeatureFlagsRequest());
      }, 5);
    } }, { key: "_reloadFeatureFlagsRequest", value: function() {
      var e6 = this;
      if (!this.instance.config.advanced_disable_feature_flags) {
        this.setReloadingPaused(true);
        var t2 = this.instance.config.token, n2 = this.instance.get_property(Ve), i2 = this.instance.get_property(We), r2 = { token: t2, distinct_id: this.instance.get_distinct_id(), groups: this.instance.getGroups(), $anon_distinct_id: this.$anon_distinct_id, person_properties: n2, group_properties: i2, disable_flags: this.instance.config.advanced_disable_feature_flags || void 0 };
        this.instance._send_request({ method: "POST", url: this.instance.requestRouter.endpointFor("api", "/decide/?v=3"), data: r2, compression: et.Base64, timeout: this.instance.config.feature_flag_request_timeout_ms, callback: function(t3) {
          var n3;
          e6.setReloadingPaused(false);
          var i3 = true;
          t3.statusCode === 200 && (e6.$anon_distinct_id = void 0, i3 = false), e6.receivedFeatureFlags((n3 = t3.json) !== null && n3 !== void 0 ? n3 : {}, i3), e6._startReloadTimer();
        } });
      }
    } }, { key: "getFeatureFlag", value: function(e6) {
      var t2 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
      if (this.instance.decideEndpointWasHit || this.getFlags() && this.getFlags().length > 0) {
        var n2, i2 = this.getFlagVariants()[e6], r2 = "".concat(i2), s2 = this.instance.get_property(Ge) || {};
        if (t2.send_event || !("send_event" in t2)) {
          if (!(e6 in s2) || !s2[e6].includes(r2))
            m(s2[e6]) ? s2[e6].push(r2) : s2[e6] = [r2], (n2 = this.instance.persistence) === null || n2 === void 0 || n2.register(o({}, Ge, s2)), this.instance.capture("$feature_flag_called", { $feature_flag: e6, $feature_flag_response: i2 });
        }
        return i2;
      }
      j.warn('getFeatureFlag for key "' + e6 + `" failed. Feature flags didn't load in time.`);
    } }, { key: "getFeatureFlagPayload", value: function(e6) {
      return this.getFlagPayloads()[e6];
    } }, { key: "isFeatureEnabled", value: function(e6) {
      var t2 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
      if (this.instance.decideEndpointWasHit || this.getFlags() && this.getFlags().length > 0)
        return !!this.getFeatureFlag(e6, t2);
      j.warn('isFeatureEnabled for key "' + e6 + `" failed. Feature flags didn't load in time.`);
    } }, { key: "addFeatureFlagsHandler", value: function(e6) {
      this.featureFlagEventHandlers.push(e6);
    } }, { key: "removeFeatureFlagsHandler", value: function(e6) {
      this.featureFlagEventHandlers = this.featureFlagEventHandlers.filter(function(t2) {
        return t2 !== e6;
      });
    } }, { key: "receivedFeatureFlags", value: function(e6, n2) {
      if (this.instance.persistence) {
        this.instance.decideEndpointWasHit = true;
        var i2 = this.getFlagVariants(), r2 = this.getFlagPayloads();
        !function(e7, n3) {
          var i3, r3 = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {}, s2 = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : {}, a2 = e7.featureFlags, u2 = e7.featureFlagPayloads;
          if (a2)
            if (m(a2)) {
              var l2, c2 = {};
              if (a2)
                for (var d2 = 0; d2 < a2.length; d2++)
                  c2[a2[d2]] = true;
              n3 && n3.register((o(l2 = {}, nt, a2), o(l2, je, c2), l2));
            } else {
              var h2 = a2, f2 = u2;
              e7.errorsWhileComputingFlags && (h2 = t(t({}, r3), h2), f2 = t(t({}, s2), f2)), n3 && n3.register((o(i3 = {}, nt, Object.keys(st(h2))), o(i3, je, h2 || {}), o(i3, rt, f2 || {}), i3));
            }
        }(e6, this.instance.persistence, i2, r2), this._fireFeatureFlagsCallbacks(n2);
      }
    } }, { key: "override", value: function(e6) {
      if (!this.instance.__loaded || !this.instance.persistence)
        return j.uninitializedWarning("posthog.feature_flags.override");
      if (this._override_warning = false, e6 === false)
        this.instance.persistence.unregister(it);
      else if (m(e6)) {
        for (var t2 = {}, n2 = 0; n2 < e6.length; n2++)
          t2[e6[n2]] = true;
        this.instance.persistence.register(o({}, it, t2));
      } else
        this.instance.persistence.register(o({}, it, e6));
    } }, { key: "onFeatureFlags", value: function(e6) {
      var t2 = this;
      if (this.addFeatureFlagsHandler(e6), this.instance.decideEndpointWasHit) {
        var n2 = this._prepareFeatureFlagsForCallbacks(), i2 = n2.flags, r2 = n2.flagVariants;
        e6(i2, r2);
      }
      return function() {
        return t2.removeFeatureFlagsHandler(e6);
      };
    } }, { key: "updateEarlyAccessFeatureEnrollment", value: function(e6, n2) {
      var i2, r2, s2 = o({}, "$feature_enrollment/".concat(e6), n2);
      this.instance.capture("$feature_enrollment_update", { $feature_flag: e6, $feature_enrollment: n2, $set: s2 }), this.setPersonPropertiesForFlags(s2, false);
      var a2 = t(t({}, this.getFlagVariants()), {}, o({}, e6, n2));
      (i2 = this.instance.persistence) === null || i2 === void 0 || i2.register((o(r2 = {}, nt, Object.keys(st(a2))), o(r2, je, a2), r2)), this._fireFeatureFlagsCallbacks();
    } }, { key: "getEarlyAccessFeatures", value: function(e6) {
      var t2 = this, n2 = arguments.length > 1 && arguments[1] !== void 0 && arguments[1], i2 = this.instance.get_property(Ue);
      if (i2 && !n2)
        return e6(i2);
      this.instance._send_request({ transport: "XHR", url: this.instance.requestRouter.endpointFor("api", "/api/early_access_features/?token=".concat(this.instance.config.token)), method: "GET", callback: function(n3) {
        var i3;
        if (n3.json) {
          var r2 = n3.json.earlyAccessFeatures;
          return (i3 = t2.instance.persistence) === null || i3 === void 0 || i3.register(o({}, Ue, r2)), e6(r2);
        }
      } });
    } }, { key: "_prepareFeatureFlagsForCallbacks", value: function() {
      var e6 = this.getFlags(), t2 = this.getFlagVariants();
      return { flags: e6.filter(function(e7) {
        return t2[e7];
      }), flagVariants: Object.keys(t2).filter(function(e7) {
        return t2[e7];
      }).reduce(function(e7, n2) {
        return e7[n2] = t2[n2], e7;
      }, {}) };
    } }, { key: "_fireFeatureFlagsCallbacks", value: function(e6) {
      var t2 = this._prepareFeatureFlagsForCallbacks(), n2 = t2.flags, i2 = t2.flagVariants;
      this.featureFlagEventHandlers.forEach(function(t3) {
        return t3(n2, i2, { errorsLoading: e6 });
      });
    } }, { key: "setPersonPropertiesForFlags", value: function(e6) {
      var n2 = !(arguments.length > 1 && arguments[1] !== void 0) || arguments[1], i2 = this.instance.get_property(Ve) || {};
      this.instance.register(o({}, Ve, t(t({}, i2), e6))), n2 && this.instance.reloadFeatureFlags();
    } }, { key: "resetPersonPropertiesForFlags", value: function() {
      this.instance.unregister(Ve);
    } }, { key: "setGroupPropertiesForFlags", value: function(e6) {
      var n2 = !(arguments.length > 1 && arguments[1] !== void 0) || arguments[1], i2 = this.instance.get_property(We) || {};
      Object.keys(i2).length !== 0 && Object.keys(i2).forEach(function(n3) {
        i2[n3] = t(t({}, i2[n3]), e6[n3]), delete e6[n3];
      }), this.instance.register(o({}, We, t(t({}, i2), e6))), n2 && this.instance.reloadFeatureFlags();
    } }, { key: "resetGroupPropertiesForFlags", value: function(e6) {
      if (e6) {
        var n2 = this.instance.get_property(We) || {};
        this.instance.register(o({}, We, t(t({}, n2), {}, o({}, e6, {}))));
      } else
        this.instance.unregister(We);
    } }]), e5;
  }();
  Math.trunc || (Math.trunc = function(e5) {
    return e5 < 0 ? Math.ceil(e5) : Math.floor(e5);
  }), Number.isInteger || (Number.isInteger = function(e5) {
    return R(e5) && isFinite(e5) && Math.floor(e5) === e5;
  });
  var at = "0123456789abcdef";
  var ut = function() {
    function e5(t2) {
      if (i(this, e5), this.bytes = t2, t2.length !== 16)
        throw new TypeError("not 128-bit length");
    }
    return s(e5, [{ key: "toString", value: function() {
      for (var e6 = "", t2 = 0; t2 < this.bytes.length; t2++)
        e6 = e6 + at.charAt(this.bytes[t2] >>> 4) + at.charAt(15 & this.bytes[t2]), t2 !== 3 && t2 !== 5 && t2 !== 7 && t2 !== 9 || (e6 += "-");
      if (e6.length !== 36)
        throw new Error("Invalid UUIDv7 was generated");
      return e6;
    } }, { key: "clone", value: function() {
      return new e5(this.bytes.slice(0));
    } }, { key: "equals", value: function(e6) {
      return this.compareTo(e6) === 0;
    } }, { key: "compareTo", value: function(e6) {
      for (var t2 = 0; t2 < 16; t2++) {
        var n2 = this.bytes[t2] - e6.bytes[t2];
        if (n2 !== 0)
          return Math.sign(n2);
      }
      return 0;
    } }], [{ key: "fromFieldsV7", value: function(t2, n2, i2, r2) {
      if (!Number.isInteger(t2) || !Number.isInteger(n2) || !Number.isInteger(i2) || !Number.isInteger(r2) || t2 < 0 || n2 < 0 || i2 < 0 || r2 < 0 || t2 > 281474976710655 || n2 > 4095 || i2 > 1073741823 || r2 > 4294967295)
        throw new RangeError("invalid field value");
      var s2 = new Uint8Array(16);
      return s2[0] = t2 / Math.pow(2, 40), s2[1] = t2 / Math.pow(2, 32), s2[2] = t2 / Math.pow(2, 24), s2[3] = t2 / Math.pow(2, 16), s2[4] = t2 / Math.pow(2, 8), s2[5] = t2, s2[6] = 112 | n2 >>> 8, s2[7] = n2, s2[8] = 128 | i2 >>> 24, s2[9] = i2 >>> 16, s2[10] = i2 >>> 8, s2[11] = i2, s2[12] = r2 >>> 24, s2[13] = r2 >>> 16, s2[14] = r2 >>> 8, s2[15] = r2, new e5(s2);
    } }]), e5;
  }();
  var lt = function() {
    function e5() {
      i(this, e5), o(this, "timestamp", 0), o(this, "counter", 0), o(this, "random", new ht());
    }
    return s(e5, [{ key: "generate", value: function() {
      var e6 = this.generateOrAbort();
      if (w(e6)) {
        this.timestamp = 0;
        var t2 = this.generateOrAbort();
        if (w(t2))
          throw new Error("Could not generate UUID after timestamp reset");
        return t2;
      }
      return e6;
    } }, { key: "generateOrAbort", value: function() {
      var e6 = Date.now();
      if (e6 > this.timestamp)
        this.timestamp = e6, this.resetCounter();
      else {
        if (!(e6 + 1e4 > this.timestamp))
          return;
        this.counter++, this.counter > 4398046511103 && (this.timestamp++, this.resetCounter());
      }
      return ut.fromFieldsV7(this.timestamp, Math.trunc(this.counter / Math.pow(2, 30)), this.counter & Math.pow(2, 30) - 1, this.random.nextUint32());
    } }, { key: "resetCounter", value: function() {
      this.counter = 1024 * this.random.nextUint32() + (1023 & this.random.nextUint32());
    } }]), e5;
  }();
  var ct = function(e5) {
    if (typeof UUIDV7_DENY_WEAK_RNG != "undefined" && UUIDV7_DENY_WEAK_RNG)
      throw new Error("no cryptographically strong RNG available");
    for (var t2 = 0; t2 < e5.length; t2++)
      e5[t2] = 65536 * Math.trunc(65536 * Math.random()) + Math.trunc(65536 * Math.random());
    return e5;
  };
  E && !w(E.crypto) && crypto.getRandomValues && (ct = function(e5) {
    return crypto.getRandomValues(e5);
  });
  var dt;
  var ht = function() {
    function e5() {
      i(this, e5), o(this, "buffer", new Uint32Array(8)), o(this, "cursor", 1 / 0);
    }
    return s(e5, [{ key: "nextUint32", value: function() {
      return this.cursor >= this.buffer.length && (ct(this.buffer), this.cursor = 0), this.buffer[this.cursor++];
    } }]), e5;
  }();
  var ft = function() {
    return pt().toString();
  };
  var pt = function() {
    return (dt || (dt = new lt())).generate();
  };
  var gt = "Thu, 01 Jan 1970 00:00:00 GMT";
  var vt = "";
  var _t = /[a-z0-9][a-z0-9-]+\.[a-z]{2,}$/i;
  function mt(e5, t2) {
    if (t2) {
      var n2 = function(e6) {
        var t3 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : A;
        if (vt)
          return vt;
        if (!t3)
          return "";
        if (["localhost", "127.0.0.1"].includes(e6))
          return "";
        for (var n3 = e6.split("."), i3 = Math.min(n3.length, 8), r2 = "dmn_chk_" + ft(), s2 = new RegExp("(^|;)\\s*" + r2 + "=1"); !vt && i3--; ) {
          var o2 = n3.slice(i3).join("."), a2 = r2 + "=1;domain=." + o2;
          t3.cookie = a2, s2.test(t3.cookie) && (t3.cookie = a2 + ";expires=" + gt, vt = o2);
        }
        return vt;
      }(e5);
      if (!n2) {
        var i2 = function(e6) {
          var t3 = e6.match(_t);
          return t3 ? t3[0] : "";
        }(e5);
        i2 !== n2 && j.info("Warning: cookie subdomain discovery mismatch", i2, n2), n2 = i2;
      }
      return n2 ? "; domain=." + n2 : "";
    }
    return "";
  }
  var yt;
  var bt = { is_supported: function() {
    return !!A;
  }, error: function(e5) {
    j.error("cookieStore error: " + e5);
  }, get: function(e5) {
    if (A) {
      try {
        for (var t2 = e5 + "=", n2 = A.cookie.split(";").filter(function(e6) {
          return e6.length;
        }), i2 = 0; i2 < n2.length; i2++) {
          for (var r2 = n2[i2]; r2.charAt(0) == " "; )
            r2 = r2.substring(1, r2.length);
          if (r2.indexOf(t2) === 0)
            return decodeURIComponent(r2.substring(t2.length, r2.length));
        }
      } catch (e6) {
      }
      return null;
    }
  }, parse: function(e5) {
    var t2;
    try {
      t2 = JSON.parse(bt.get(e5)) || {};
    } catch (e6) {
    }
    return t2;
  }, set: function(e5, t2, n2, i2, r2) {
    if (A)
      try {
        var s2 = "", o2 = "", a2 = mt(A.location.hostname, i2);
        if (n2) {
          var u2 = new Date();
          u2.setTime(u2.getTime() + 24 * n2 * 60 * 60 * 1e3), s2 = "; expires=" + u2.toUTCString();
        }
        r2 && (o2 = "; secure");
        var l2 = e5 + "=" + encodeURIComponent(JSON.stringify(t2)) + s2 + "; SameSite=Lax; path=/" + a2 + o2;
        return l2.length > 3686.4 && j.warn("cookieStore warning: large cookie, len=" + l2.length), A.cookie = l2, l2;
      } catch (e6) {
        return;
      }
  }, remove: function(e5, t2) {
    try {
      bt.set(e5, "", -1, t2);
    } catch (e6) {
      return;
    }
  } };
  var wt = null;
  var kt = { is_supported: function() {
    if (!S(wt))
      return wt;
    var e5 = true;
    if (w(E))
      e5 = false;
    else
      try {
        var t2 = "__mplssupport__";
        kt.set(t2, "xyz"), kt.get(t2) !== '"xyz"' && (e5 = false), kt.remove(t2);
      } catch (t3) {
        e5 = false;
      }
    return e5 || j.error("localStorage unsupported; falling back to cookie store"), wt = e5, e5;
  }, error: function(e5) {
    j.error("localStorage error: " + e5);
  }, get: function(e5) {
    try {
      return E == null ? void 0 : E.localStorage.getItem(e5);
    } catch (e6) {
      kt.error(e6);
    }
    return null;
  }, parse: function(e5) {
    try {
      return JSON.parse(kt.get(e5)) || {};
    } catch (e6) {
    }
    return null;
  }, set: function(e5, t2) {
    try {
      E == null || E.localStorage.setItem(e5, JSON.stringify(t2));
    } catch (e6) {
      kt.error(e6);
    }
  }, remove: function(e5) {
    try {
      E == null || E.localStorage.removeItem(e5);
    } catch (e6) {
      kt.error(e6);
    }
  } };
  var St = ["distinct_id", Be, He];
  var Ft = t(t({}, kt), {}, { parse: function(e5) {
    try {
      var t2 = {};
      try {
        t2 = bt.parse(e5) || {};
      } catch (e6) {
      }
      var n2 = G(t2, JSON.parse(kt.get(e5) || "{}"));
      return kt.set(e5, n2), n2;
    } catch (e6) {
    }
    return null;
  }, set: function(e5, t2, n2, i2, r2) {
    try {
      kt.set(e5, t2);
      var s2 = {};
      St.forEach(function(e6) {
        t2[e6] && (s2[e6] = t2[e6]);
      }), Object.keys(s2).length && bt.set(e5, s2, n2, i2, r2);
    } catch (e6) {
      kt.error(e6);
    }
  }, remove: function(e5, t2) {
    try {
      E == null || E.localStorage.removeItem(e5), bt.remove(e5, t2);
    } catch (e6) {
      kt.error(e6);
    }
  } });
  var Rt = {};
  var xt = { is_supported: function() {
    return true;
  }, error: function(e5) {
    j.error("memoryStorage error: " + e5);
  }, get: function(e5) {
    return Rt[e5] || null;
  }, parse: function(e5) {
    return Rt[e5] || null;
  }, set: function(e5, t2) {
    Rt[e5] = t2;
  }, remove: function(e5) {
    delete Rt[e5];
  } };
  var Pt = null;
  var Et = { is_supported: function() {
    if (!S(Pt))
      return Pt;
    if (Pt = true, w(E))
      Pt = false;
    else
      try {
        var e5 = "__support__";
        Et.set(e5, "xyz"), Et.get(e5) !== '"xyz"' && (Pt = false), Et.remove(e5);
      } catch (e6) {
        Pt = false;
      }
    return Pt;
  }, error: function(e5) {
    j.error("sessionStorage error: ", e5);
  }, get: function(e5) {
    try {
      return E == null ? void 0 : E.sessionStorage.getItem(e5);
    } catch (e6) {
      Et.error(e6);
    }
    return null;
  }, parse: function(e5) {
    try {
      return JSON.parse(Et.get(e5)) || null;
    } catch (e6) {
    }
    return null;
  }, set: function(e5, t2) {
    try {
      E == null || E.sessionStorage.setItem(e5, JSON.stringify(t2));
    } catch (e6) {
      Et.error(e6);
    }
  }, remove: function(e5) {
    try {
      E == null || E.sessionStorage.removeItem(e5);
    } catch (e6) {
      Et.error(e6);
    }
  } };
  var It = ["localhost", "127.0.0.1"];
  var Ct = function(e5) {
    var t2 = A == null ? void 0 : A.createElement("a");
    return w(t2) ? null : (t2.href = e5, t2);
  };
  var $t = function(e5, t2) {
    return !!function(e6) {
      try {
        new RegExp(e6);
      } catch (e7) {
        return false;
      }
      return true;
    }(t2) && new RegExp(t2).test(e5);
  };
  var Tt = function(e5) {
    var t2, n2, i2 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : "&", r2 = [];
    return z(e5, function(e6, i3) {
      w(e6) || w(i3) || i3 === "undefined" || (t2 = encodeURIComponent(function(e7) {
        return e7 instanceof File;
      }(e6) ? e6.name : e6.toString()), n2 = encodeURIComponent(i3), r2[r2.length] = n2 + "=" + t2);
    }), r2.join(i2);
  };
  var Ot = function(e5, t2) {
    for (var n2, i2 = ((e5.split("#")[0] || "").split("?")[1] || "").split("&"), r2 = 0; r2 < i2.length; r2++) {
      var s2 = i2[r2].split("=");
      if (s2[0] === t2) {
        n2 = s2;
        break;
      }
    }
    if (!m(n2) || n2.length < 2)
      return "";
    var o2 = n2[1];
    try {
      o2 = decodeURIComponent(o2);
    } catch (e6) {
      j.error("Skipping decoding for malformed query param: " + o2);
    }
    return o2.replace(/\+/g, " ");
  };
  var At = function(e5, t2) {
    var n2 = e5.match(new RegExp(t2 + "=([^&]*)"));
    return n2 ? n2[1] : null;
  };
  var qt = "Mobile";
  var Mt = "iOS";
  var Dt = "Android";
  var Lt = "Tablet";
  var Nt = Dt + " " + Lt;
  var Bt = "iPad";
  var Ht = "Apple";
  var jt = Ht + " Watch";
  var Ut = "Safari";
  var Vt = "BlackBerry";
  var Wt = "Samsung";
  var zt = Wt + "Browser";
  var Gt = Wt + " Internet";
  var Qt = "Chrome";
  var Yt = Qt + " OS";
  var Jt = Qt + " " + Mt;
  var Kt = "Internet Explorer";
  var Xt = Kt + " " + qt;
  var Zt = "Opera";
  var en = Zt + " Mini";
  var tn = "Edge";
  var nn = "Microsoft " + tn;
  var rn = "Firefox";
  var sn = rn + " " + Mt;
  var on = "Nintendo";
  var an = "PlayStation";
  var un = "Xbox";
  var ln = Dt + " " + qt;
  var cn = qt + " " + Ut;
  var dn = "Windows";
  var hn = dn + " Phone";
  var fn = "Nokia";
  var pn = "Ouya";
  var gn = "Generic";
  var vn = gn + " " + qt.toLowerCase();
  var _n = gn + " " + Lt.toLowerCase();
  var mn = "Konqueror";
  var yn = "(\\d+(\\.\\d+)?)";
  var bn = new RegExp("Version/" + yn);
  var wn = new RegExp(un, "i");
  var kn = new RegExp(an + " \\w+", "i");
  var Sn = new RegExp(on + " \\w+", "i");
  var Fn = new RegExp(Vt + "|PlayBook|BB10", "i");
  var Rn = { "NT3.51": "NT 3.11", "NT4.0": "NT 4.0", "5.0": "2000", 5.1: "XP", 5.2: "XP", "6.0": "Vista", 6.1: "7", 6.2: "8", 6.3: "8.1", 6.4: "10", "10.0": "10" };
  var xn = function(e5, t2) {
    return t2 && Q(t2, Ht) || function(e6) {
      return Q(e6, Ut) && !Q(e6, Qt) && !Q(e6, Dt);
    }(e5);
  };
  var Pn = function(e5, t2) {
    return t2 = t2 || "", Q(e5, " OPR/") && Q(e5, "Mini") ? en : Q(e5, " OPR/") ? Zt : Fn.test(e5) ? Vt : Q(e5, "IE" + qt) || Q(e5, "WPDesktop") ? Xt : Q(e5, zt) ? Gt : Q(e5, tn) || Q(e5, "Edg/") ? nn : Q(e5, "FBIOS") ? "Facebook " + qt : Q(e5, Qt) ? Qt : Q(e5, "CriOS") ? Jt : Q(e5, "UCWEB") || Q(e5, "UCBrowser") ? "UC Browser" : Q(e5, "FxiOS") ? sn : Q(e5, Dt) ? ln : Q(e5.toLowerCase(), mn.toLowerCase()) ? mn : xn(e5, t2) ? Q(e5, qt) ? cn : Ut : Q(e5, rn) ? rn : Q(e5, "MSIE") || Q(e5, "Trident/") ? Kt : Q(e5, "Gecko") ? rn : "";
  };
  var En = (o(yt = {}, Xt, [new RegExp("rv:" + yn)]), o(yt, nn, [new RegExp(tn + "?\\/" + yn)]), o(yt, Qt, [new RegExp(Qt + "/" + yn)]), o(yt, Jt, [new RegExp("CriOS\\/" + yn)]), o(yt, "UC Browser", [new RegExp("(UCBrowser|UCWEB)\\/" + yn)]), o(yt, Ut, [bn]), o(yt, cn, [bn]), o(yt, Zt, [new RegExp("(Opera|OPR)\\/" + yn)]), o(yt, rn, [new RegExp(rn + "\\/" + yn)]), o(yt, sn, [new RegExp("FxiOS\\/" + yn)]), o(yt, mn, [new RegExp("Konqueror[:/]?" + yn, "i")]), o(yt, Vt, [new RegExp(Vt + " " + yn), bn]), o(yt, ln, [new RegExp("android\\s" + yn)]), o(yt, Gt, [new RegExp(zt + "\\/" + yn)]), o(yt, Kt, [new RegExp("(rv:|MSIE )" + yn)]), o(yt, "Mozilla", [new RegExp("rv:" + yn)]), yt);
  var In = [[new RegExp(un + "; " + un + " (.*?)[);]", "i"), function(e5) {
    return [un, e5 && e5[1] || ""];
  }], [new RegExp(on, "i"), [on, ""]], [new RegExp(an, "i"), [an, ""]], [Fn, [Vt, ""]], [new RegExp(dn, "i"), function(e5, t2) {
    if (/Phone/.test(t2) || /WPDesktop/.test(t2))
      return [hn, ""];
    if (new RegExp(qt).test(t2) && !/IEMobile\b/.test(t2))
      return [dn + " " + qt, ""];
    var n2 = /Windows NT ([0-9.]+)/i.exec(t2);
    if (n2 && n2[1]) {
      var i2 = n2[1], r2 = Rn[i2] || "";
      return /arm/i.test(t2) && (r2 = "RT"), [dn, r2];
    }
    return [dn, ""];
  }], [/((iPhone|iPad|iPod).*?OS (\d+)_(\d+)_?(\d+)?|iPhone)/, function(e5) {
    if (e5 && e5[3]) {
      var t2 = [e5[3], e5[4], e5[5] || "0"];
      return [Mt, t2.join(".")];
    }
    return [Mt, ""];
  }], [/(watch.*\/(\d+\.\d+\.\d+)|watch os,(\d+\.\d+),)/i, function(e5) {
    var t2 = "";
    return e5 && e5.length >= 3 && (t2 = w(e5[2]) ? e5[3] : e5[2]), ["watchOS", t2];
  }], [new RegExp("(" + Dt + " (\\d+)\\.(\\d+)\\.?(\\d+)?|" + Dt + ")", "i"), function(e5) {
    if (e5 && e5[2]) {
      var t2 = [e5[2], e5[3], e5[4] || "0"];
      return [Dt, t2.join(".")];
    }
    return [Dt, ""];
  }], [/Mac OS X (\d+)[_.](\d+)[_.]?(\d+)?/i, function(e5) {
    var t2 = ["Mac OS X", ""];
    if (e5 && e5[1]) {
      var n2 = [e5[1], e5[2], e5[3] || "0"];
      t2[1] = n2.join(".");
    }
    return t2;
  }], [/Mac/i, ["Mac OS X", ""]], [/CrOS/, [Yt, ""]], [/Linux|debian/i, ["Linux", ""]]];
  var Cn = function(e5) {
    return Sn.test(e5) ? on : kn.test(e5) ? an : wn.test(e5) ? un : new RegExp(pn, "i").test(e5) ? pn : new RegExp("(" + hn + "|WPDesktop)", "i").test(e5) ? hn : /iPad/.test(e5) ? Bt : /iPod/.test(e5) ? "iPod Touch" : /iPhone/.test(e5) ? "iPhone" : /(watch)(?: ?os[,/]|\d,\d\/)[\d.]+/i.test(e5) ? jt : Fn.test(e5) ? Vt : /(kobo)\s(ereader|touch)/i.test(e5) ? "Kobo" : new RegExp(fn, "i").test(e5) ? fn : /(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i.test(e5) || /(kf[a-z]+)( bui|\)).+silk\//i.test(e5) ? "Kindle Fire" : /(Android|ZTE)/i.test(e5) ? !new RegExp(qt).test(e5) || /(9138B|TB782B|Nexus [97]|pixel c|HUAWEISHT|BTV|noble nook|smart ultra 6)/i.test(e5) ? /pixel[\daxl ]{1,6}/i.test(e5) && !/pixel c/i.test(e5) || /(huaweimed-al00|tah-|APA|SM-G92|i980|zte|U304AA)/i.test(e5) || /lmy47v/i.test(e5) && !/QTAQZ3/i.test(e5) ? Dt : Nt : Dt : new RegExp("(pda|" + qt + ")", "i").test(e5) ? vn : new RegExp(Lt, "i").test(e5) && !new RegExp(Lt + " pc", "i").test(e5) ? _n : "";
  };
  var $n = "https?://(.*)";
  var Tn = { campaignParams: function(e5) {
    var t2 = ["utm_source", "utm_medium", "utm_campaign", "utm_content", "utm_term", "gclid", "gad_source", "gclsrc", "dclid", "gbraid", "wbraid", "fbclid", "msclkid", "twclid", "li_fat_id", "mc_cid", "igshid", "ttclid"].concat(e5 || []), n2 = {};
    return z(t2, function(e6) {
      var t3 = A ? Ot(A.URL, e6) : "";
      t3.length && (n2[e6] = t3);
    }), n2;
  }, searchEngine: function() {
    var e5 = A == null ? void 0 : A.referrer;
    return e5 ? e5.search($n + "google.([^/?]*)") === 0 ? "google" : e5.search($n + "bing.com") === 0 ? "bing" : e5.search($n + "yahoo.com") === 0 ? "yahoo" : e5.search($n + "duckduckgo.com") === 0 ? "duckduckgo" : null : null;
  }, searchInfo: function() {
    var e5 = Tn.searchEngine(), t2 = e5 != "yahoo" ? "q" : "p", n2 = {};
    if (!S(e5)) {
      n2.$search_engine = e5;
      var i2 = A ? Ot(A.referrer, t2) : "";
      i2.length && (n2.ph_keyword = i2);
    }
    return n2;
  }, browser: Pn, browserVersion: function(e5, t2) {
    var n2 = Pn(e5, t2), i2 = En[n2];
    if (w(i2))
      return null;
    for (var r2 = 0; r2 < i2.length; r2++) {
      var s2 = i2[r2], o2 = e5.match(s2);
      if (o2)
        return parseFloat(o2[o2.length - 2]);
    }
    return null;
  }, browserLanguage: function() {
    return navigator.language || navigator.userLanguage;
  }, os: function(e5) {
    for (var t2 = 0; t2 < In.length; t2++) {
      var n2 = u(In[t2], 2), i2 = n2[0], r2 = n2[1], s2 = i2.exec(e5), o2 = s2 && (y(r2) ? r2(s2, e5) : r2);
      if (o2)
        return o2;
    }
    return ["", ""];
  }, device: Cn, deviceType: function(e5) {
    var t2 = Cn(e5);
    return t2 === Bt || t2 === Nt || t2 === "Kobo" || t2 === "Kindle Fire" || t2 === _n ? Lt : t2 === on || t2 === un || t2 === an || t2 === pn ? "Console" : t2 === jt ? "Wearable" : t2 ? qt : "Desktop";
  }, referrer: function() {
    return (A == null ? void 0 : A.referrer) || "$direct";
  }, referringDomain: function() {
    var e5;
    return A != null && A.referrer && ((e5 = Ct(A.referrer)) === null || e5 === void 0 ? void 0 : e5.host) || "$direct";
  }, properties: function() {
    if (!N)
      return {};
    var e5 = u(Tn.os(N), 2), t2 = e5[0], n2 = e5[1];
    return G(Z({ $os: t2, $os_version: n2, $browser: Tn.browser(N, navigator.vendor), $device: Tn.device(N), $device_type: Tn.deviceType(N) }), { $current_url: q == null ? void 0 : q.href, $host: q == null ? void 0 : q.host, $pathname: q == null ? void 0 : q.pathname, $raw_user_agent: N.length > 1e3 ? N.substring(0, 997) + "..." : N, $browser_version: Tn.browserVersion(N, navigator.vendor), $browser_language: Tn.browserLanguage(), $screen_height: E == null ? void 0 : E.screen.height, $screen_width: E == null ? void 0 : E.screen.width, $viewport_height: E == null ? void 0 : E.innerHeight, $viewport_width: E == null ? void 0 : E.innerWidth, $lib: "web", $lib_version: f.LIB_VERSION, $insert_id: Math.random().toString(36).substring(2, 10) + Math.random().toString(36).substring(2, 10), $time: J() / 1e3 });
  }, people_properties: function() {
    if (!N)
      return {};
    var e5 = u(Tn.os(N), 2), t2 = e5[0], n2 = e5[1];
    return G(Z({ $os: t2, $os_version: n2, $browser: Tn.browser(N, navigator.vendor) }), { $browser_version: Tn.browserVersion(N, navigator.vendor) });
  } };
  var On = ["cookie", "localstorage", "localstorage+cookie", "sessionstorage", "memory"];
  var An = function() {
    function e5(t2) {
      i(this, e5), this.config = t2, this.props = {}, this.campaign_params_saved = false, this.name = function(e6) {
        var t3 = "";
        return e6.token && (t3 = e6.token.replace(/\+/g, "PL").replace(/\//g, "SL").replace(/=/g, "EQ")), e6.persistence_name ? "ph_" + e6.persistence_name : "ph_" + t3 + "_posthog";
      }(t2), this.storage = this.buildStorage(t2), this.load(), this.update_config(t2, t2), this.save();
    }
    return s(e5, [{ key: "buildStorage", value: function(e6) {
      On.indexOf(e6.persistence.toLowerCase()) === -1 && (j.critical("Unknown persistence type " + e6.persistence + "; falling back to localStorage+cookie"), e6.persistence = "localStorage+cookie");
      var t2 = e6.persistence.toLowerCase();
      return t2 === "localstorage" && kt.is_supported() ? kt : t2 === "localstorage+cookie" && Ft.is_supported() ? Ft : t2 === "sessionstorage" && Et.is_supported() ? Et : t2 === "memory" ? xt : t2 === "cookie" ? bt : Ft.is_supported() ? Ft : bt;
    } }, { key: "properties", value: function() {
      var e6 = {};
      return z(this.props, function(t2, n2) {
        if (n2 === je && b(t2))
          for (var i2 = Object.keys(t2), r2 = 0; r2 < i2.length; r2++)
            e6["$feature/".concat(i2[r2])] = t2[i2[r2]];
        else
          o2 = n2, a2 = false, (S(s2 = Ke) ? a2 : T && s2.indexOf === T ? s2.indexOf(o2) != -1 : (z(s2, function(e7) {
            if (a2 || (a2 = e7 === o2))
              return U;
          }), a2)) || (e6[n2] = t2);
        var s2, o2, a2;
      }), e6;
    } }, { key: "load", value: function() {
      if (!this.disabled) {
        var e6 = this.storage.parse(this.name);
        e6 && (this.props = G({}, e6));
      }
    } }, { key: "save", value: function() {
      this.disabled || this.storage.set(this.name, this.props, this.expire_days, this.cross_subdomain, this.secure);
    } }, { key: "remove", value: function() {
      this.storage.remove(this.name, false), this.storage.remove(this.name, true);
    } }, { key: "clear", value: function() {
      this.remove(), this.props = {};
    } }, { key: "register_once", value: function(e6, t2, n2) {
      var i2 = this;
      if (b(e6)) {
        w(t2) && (t2 = "None"), this.expire_days = w(n2) ? this.default_expiry : n2;
        var r2 = false;
        if (z(e6, function(e7, n3) {
          i2.props.hasOwnProperty(n3) && i2.props[n3] !== t2 || (i2.props[n3] = e7, r2 = true);
        }), r2)
          return this.save(), true;
      }
      return false;
    } }, { key: "register", value: function(e6, t2) {
      var n2 = this;
      if (b(e6)) {
        this.expire_days = w(t2) ? this.default_expiry : t2;
        var i2 = false;
        if (z(e6, function(t3, r2) {
          e6.hasOwnProperty(r2) && n2.props[r2] !== t3 && (n2.props[r2] = t3, i2 = true);
        }), i2)
          return this.save(), true;
      }
      return false;
    } }, { key: "unregister", value: function(e6) {
      e6 in this.props && (delete this.props[e6], this.save());
    } }, { key: "update_campaign_params", value: function() {
      this.campaign_params_saved || (this.register(Tn.campaignParams(this.config.custom_campaign_params)), this.campaign_params_saved = true);
    } }, { key: "update_search_keyword", value: function() {
      this.register(Tn.searchInfo());
    } }, { key: "update_referrer_info", value: function() {
      this.register({ $referrer: this.props.$referrer || Tn.referrer(), $referring_domain: this.props.$referring_domain || Tn.referringDomain() });
    } }, { key: "get_referrer_info", value: function() {
      return Z({ $referrer: this.props.$referrer, $referring_domain: this.props.$referring_domain });
    } }, { key: "safe_merge", value: function(e6) {
      return z(this.props, function(t2, n2) {
        n2 in e6 || (e6[n2] = t2);
      }), e6;
    } }, { key: "update_config", value: function(e6, t2) {
      if (this.default_expiry = this.expire_days = e6.cookie_expiration, this.set_disabled(e6.disable_persistence), this.set_cross_subdomain(e6.cross_subdomain_cookie), this.set_secure(e6.secure_cookie), e6.persistence !== t2.persistence) {
        var n2 = this.buildStorage(e6), i2 = this.props;
        this.clear(), this.storage = n2, this.props = i2, this.save();
      }
    } }, { key: "set_disabled", value: function(e6) {
      this.disabled = e6, this.disabled ? this.remove() : this.save();
    } }, { key: "set_cross_subdomain", value: function(e6) {
      e6 !== this.cross_subdomain && (this.cross_subdomain = e6, this.remove(), this.save());
    } }, { key: "get_cross_subdomain", value: function() {
      return !!this.cross_subdomain;
    } }, { key: "set_secure", value: function(e6) {
      e6 !== this.secure && (this.secure = e6, this.remove(), this.save());
    } }, { key: "set_event_timer", value: function(e6, t2) {
      var n2 = this.props[Oe] || {};
      n2[e6] = t2, this.props[Oe] = n2, this.save();
    } }, { key: "remove_event_timer", value: function(e6) {
      var t2 = (this.props[Oe] || {})[e6];
      return w(t2) || (delete this.props[Oe][e6], this.save()), t2;
    } }, { key: "get_user_state", value: function() {
      return this.props[Qe] || "anonymous";
    } }, { key: "set_user_state", value: function(e6) {
      this.props[Qe] = e6, this.save();
    } }, { key: "get_quota_limits", value: function() {
      return this.props[Ye] || {};
    } }, { key: "set_quota_limits", value: function(e6) {
      this.props[Ye] = e6, this.save();
    } }]), e5;
  }();
  var qn = 2;
  var Mn = 4;
  var Dn = s(function e2(t2) {
    var n2, r2, s2 = this, a2 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
    i(this, e2), o(this, "bucketSize", 100), o(this, "refillRate", 10), o(this, "mutationBuckets", {}), o(this, "loggedTracker", {}), o(this, "refillBuckets", function() {
      Object.keys(s2.mutationBuckets).forEach(function(e5) {
        s2.mutationBuckets[e5] = s2.mutationBuckets[e5] + s2.refillRate, s2.mutationBuckets[e5] >= s2.bucketSize && delete s2.mutationBuckets[e5];
      });
    }), o(this, "getNodeOrRelevantParent", function(e5) {
      var t3 = s2.rrweb.mirror.getNode(e5);
      if ((t3 == null ? void 0 : t3.nodeName) !== "svg" && t3 instanceof Element) {
        var n3 = t3.closest("svg");
        if (n3)
          return [s2.rrweb.mirror.getId(n3), n3];
      }
      return [e5, t3];
    }), o(this, "numberOfChanges", function(e5) {
      var t3, n3, i2, r3, s3, o2, a3, u2;
      return ((t3 = (n3 = e5.removes) === null || n3 === void 0 ? void 0 : n3.length) !== null && t3 !== void 0 ? t3 : 0) + ((i2 = (r3 = e5.attributes) === null || r3 === void 0 ? void 0 : r3.length) !== null && i2 !== void 0 ? i2 : 0) + ((s3 = (o2 = e5.texts) === null || o2 === void 0 ? void 0 : o2.length) !== null && s3 !== void 0 ? s3 : 0) + ((a3 = (u2 = e5.adds) === null || u2 === void 0 ? void 0 : u2.length) !== null && a3 !== void 0 ? a3 : 0);
    }), o(this, "throttleMutations", function(e5) {
      if (e5.type !== 3 || e5.data.source !== 0)
        return e5;
      var t3 = e5.data, n3 = s2.numberOfChanges(t3);
      t3.attributes && (t3.attributes = t3.attributes.filter(function(e6) {
        var t4, n4, i3, r3 = u(s2.getNodeOrRelevantParent(e6.id), 2), o2 = r3[0], a3 = r3[1];
        if (s2.mutationBuckets[o2] === 0)
          return false;
        (s2.mutationBuckets[o2] = (t4 = s2.mutationBuckets[o2]) !== null && t4 !== void 0 ? t4 : s2.bucketSize, s2.mutationBuckets[o2] = Math.max(s2.mutationBuckets[o2] - 1, 0), s2.mutationBuckets[o2] === 0) && (s2.loggedTracker[o2] || (s2.loggedTracker[o2] = true, (n4 = (i3 = s2.options).onBlockedNode) === null || n4 === void 0 || n4.call(i3, o2, a3)));
        return e6;
      }));
      var i2 = s2.numberOfChanges(t3);
      return i2 !== 0 || n3 === i2 ? e5 : void 0;
    }), this.rrweb = t2, this.options = a2, this.refillRate = (n2 = this.options.refillRate) !== null && n2 !== void 0 ? n2 : this.refillRate, this.bucketSize = (r2 = this.options.bucketSize) !== null && r2 !== void 0 ? r2 : this.bucketSize, setInterval(function() {
      s2.refillBuckets();
    }, 1e3);
  });
  var Ln = function(e5) {
    return e5[e5.DomContentLoaded = 0] = "DomContentLoaded", e5[e5.Load = 1] = "Load", e5[e5.FullSnapshot = 2] = "FullSnapshot", e5[e5.IncrementalSnapshot = 3] = "IncrementalSnapshot", e5[e5.Meta = 4] = "Meta", e5[e5.Custom = 5] = "Custom", e5[e5.Plugin = 6] = "Plugin", e5;
  }(Ln || {});
  var Nn = "[SessionRecording]";
  var Bn = { initiatorTypes: ["audio", "beacon", "body", "css", "early-hint", "embed", "fetch", "frame", "iframe", "icon", "image", "img", "input", "link", "navigation", "object", "ping", "script", "track", "video", "xmlhttprequest"], maskRequestFn: function(e5) {
    return e5;
  }, recordHeaders: false, recordBody: false, recordInitialRequests: false, recordPerformance: false, performanceEntryTypeToObserve: ["first-input", "navigation", "paint", "resource"], payloadSizeLimitBytes: 1e6 };
  var Hn = ["authorization", "x-forwarded-for", "authorization", "cookie", "set-cookie", "x-api-key", "x-real-ip", "remote-addr", "forwarded", "proxy-authorization", "x-csrf-token", "x-csrftoken", "x-xsrf-token"];
  var jn = ["password", "secret", "passwd", "api_key", "apikey", "auth", "credentials", "mysql_pwd", "privatekey", "private_key", "tokenconst"];
  var Un = ["/s/", "/e/", "/i/"];
  function Vn(e5, t2, n2, i2) {
    if (F(e5))
      return e5;
    var r2 = (t2 == null ? void 0 : t2["content-length"]) || function(e6) {
      return new Blob([e6]).size;
    }(e5);
    return k(r2) && (r2 = parseInt(r2)), r2 > n2 ? Nn + " ".concat(i2, " body too large to record (").concat(r2, " bytes)") : e5;
  }
  function Wn(e5, t2) {
    if (F(e5))
      return e5;
    var n2 = e5;
    return Fe(n2, false) || (n2 = Nn + " " + t2 + " body redacted"), z(jn, function(e6) {
      var i2, r2;
      (i2 = n2) !== null && i2 !== void 0 && i2.length && ((r2 = n2) === null || r2 === void 0 ? void 0 : r2.indexOf(e6)) !== -1 && (n2 = Nn + " " + t2 + " body redacted as might contain: " + e6);
    }), n2;
  }
  var zn = function(e5, n2) {
    var i2, r2, s2, o2 = e5.session_recording, a2 = o2.recordHeaders !== false && n2.recordHeaders, u2 = o2.recordBody !== false && n2.recordBody, l2 = o2.recordPerformance !== false && n2.recordPerformance, c2 = (i2 = o2, s2 = Math.min(1e6, (r2 = i2.payloadSizeLimitBytes) !== null && r2 !== void 0 ? r2 : 1e6), function(e6) {
      return e6 != null && e6.requestBody && (e6.requestBody = Vn(e6.requestBody, e6.requestHeaders, s2, "Request")), e6 != null && e6.responseBody && (e6.responseBody = Vn(e6.responseBody, e6.responseHeaders, s2, "Response")), e6;
    }), d2 = function(e6) {
      return function(e7) {
        if (!w(e7))
          return e7.requestBody = Wn(e7.requestBody, "Request"), e7.responseBody = Wn(e7.responseBody, "Response"), e7;
      }(c2(function(e7) {
        var t3 = Ct(e7.name);
        if (!(t3 && t3.pathname && Un.some(function(e8) {
          return t3.pathname.indexOf(e8) === 0;
        })))
          return e7;
      }((t2 = e6, z(Object.keys((n3 = t2.requestHeaders) !== null && n3 !== void 0 ? n3 : {}), function(e7) {
        var n4;
        Hn.includes(e7.toLowerCase()) && ((n4 = t2.requestHeaders) === null || n4 === void 0 || delete n4[e7]);
      }), t2))));
      var t2, n3;
    }, h2 = y(e5.session_recording.maskNetworkRequestFn);
    return h2 && y(e5.session_recording.maskCapturedNetworkRequestFn) && j.warn("Both `maskNetworkRequestFn` and `maskCapturedNetworkRequestFn` are defined. `maskNetworkRequestFn` will be ignored."), h2 && (e5.session_recording.maskCapturedNetworkRequestFn = function(n3) {
      var i3 = e5.session_recording.maskNetworkRequestFn({ url: n3.name });
      return t(t({}, n3), {}, { name: i3 == null ? void 0 : i3.url });
    }), o2.maskRequestFn = y(e5.session_recording.maskCapturedNetworkRequestFn) ? function(t2) {
      var n3, i3, r3, s3 = d2(t2);
      return s3 && (n3 = (i3 = (r3 = e5.session_recording).maskCapturedNetworkRequestFn) === null || i3 === void 0 ? void 0 : i3.call(r3, s3)) !== null && n3 !== void 0 ? n3 : void 0;
    } : void 0, o2.maskRequestFn || (o2.maskRequestFn = d2), t(t(t({}, Bn), o2), {}, { recordHeaders: a2, recordBody: u2, recordPerformance: l2, recordInitialRequests: l2 });
  };
  var Gn = "__ph_opt_in_out_";
  function Qn(e5, t2) {
    ni(true, e5, t2);
  }
  function Yn(e5, t2) {
    ni(false, e5, t2);
  }
  function Jn(e5, t2) {
    return ti(e5, t2) === "1";
  }
  function Kn(e5, t2) {
    return !!function(e6) {
      if (e6 && e6.respectDnt) {
        var t3 = e6 && e6.window || E, n2 = t3 == null ? void 0 : t3.navigator, i2 = false;
        return z([n2 == null ? void 0 : n2.doNotTrack, n2.msDoNotTrack, t3.doNotTrack], function(e7) {
          Q([true, 1, "1", "yes"], e7) && (i2 = true);
        }), i2;
      }
      return false;
    }(t2) || ti(e5, t2) === "0";
  }
  function Xn(e5, t2) {
    Zn(t2 = t2 || {}).remove(ei(e5, t2), !!t2.crossSubdomainCookie);
  }
  function Zn(e5) {
    return (e5 = e5 || {}).persistenceType === "localStorage" ? kt : e5.persistenceType === "localStorage+cookie" ? Ft : bt;
  }
  function ei(e5, t2) {
    return ((t2 = t2 || {}).persistencePrefix || Gn) + e5;
  }
  function ti(e5, t2) {
    return Zn(t2).get(ei(e5, t2));
  }
  function ni(e5, t2, n2) {
    k(t2) && t2.length ? (Zn(n2 = n2 || {}).set(ei(t2, n2), e5 ? 1 : 0, R(n2.cookieExpiration) ? n2.cookieExpiration : null, n2.crossSubdomainCookie, n2.secureCookie), n2.capture && e5 && n2.capture(n2.captureEventName || "$opt_in", n2.captureProperties || {}, { send_instantly: true })) : j.error("gdpr." + (e5 ? "optIn" : "optOut") + " called with an invalid token");
  }
  function ii(e5) {
    var t2 = false;
    try {
      var n2 = e5.config.token, i2 = e5.config.respect_dnt, r2 = e5.config.opt_out_capturing_persistence_type, s2 = e5.config.opt_out_capturing_cookie_prefix || void 0, o2 = e5.config.window;
      n2 && (t2 = Kn(n2, { respectDnt: i2, persistenceType: r2, persistencePrefix: s2, window: o2 }));
    } catch (e6) {
      j.error("Unexpected error when checking capturing opt-out status: " + e6);
    }
    return t2;
  }
  var ri;
  var si = 3e5;
  var oi = si;
  !function(e5) {
    e5[e5.Mutation = 0] = "Mutation", e5[e5.MouseMove = 1] = "MouseMove", e5[e5.MouseInteraction = 2] = "MouseInteraction", e5[e5.Scroll = 3] = "Scroll", e5[e5.ViewportResize = 4] = "ViewportResize", e5[e5.Input = 5] = "Input", e5[e5.TouchMove = 6] = "TouchMove", e5[e5.MediaInteraction = 7] = "MediaInteraction", e5[e5.StyleSheetRule = 8] = "StyleSheetRule", e5[e5.CanvasMutation = 9] = "CanvasMutation", e5[e5.Font = 10] = "Font", e5[e5.Log = 11] = "Log", e5[e5.Drag = 12] = "Drag", e5[e5.StyleDeclaration = 13] = "StyleDeclaration", e5[e5.Selection = 14] = "Selection", e5[e5.AdoptedStyleSheet = 15] = "AdoptedStyleSheet";
  }(ri || (ri = {}));
  var ai = [ri.MouseMove, ri.MouseInteraction, ri.Scroll, ri.ViewportResize, ri.Input, ri.TouchMove, ri.MediaInteraction, ri.Drag];
  var ui = function(e5) {
    return { rrwebMethod: e5, enqueuedAt: Date.now(), attempt: 1 };
  };
  var li = "[SessionRecording]";
  var ci = function() {
    function e5(t2) {
      var n2 = this;
      if (i(this, e5), o(this, "queuedRRWebEvents", []), o(this, "isIdle", false), o(this, "_linkedFlagSeen", false), o(this, "_lastActivityTimestamp", Date.now()), o(this, "windowId", null), o(this, "sessionId", null), o(this, "_linkedFlag", null), o(this, "_sampleRate", null), o(this, "_minimumDuration", null), o(this, "_forceAllowLocalhostNetworkCapture", false), this.instance = t2, this._captureStarted = false, this._endpoint = "/s/", this.stopRrweb = void 0, this.receivedDecide = false, E == null || E.addEventListener("beforeunload", function() {
        n2._flushBuffer();
      }), E == null || E.addEventListener("offline", function() {
        n2._tryAddCustomEvent("browser offline", {});
      }), E == null || E.addEventListener("online", function() {
        n2._tryAddCustomEvent("browser online", {});
      }), !this.instance.sessionManager)
        throw j.error(li + " started without valid sessionManager"), new Error(li + " started without valid sessionManager. This is a bug.");
      this.buffer = this.clearBuffer();
    }
    return s(e5, [{ key: "started", get: function() {
      return this._captureStarted;
    } }, { key: "sessionManager", get: function() {
      if (!this.instance.sessionManager)
        throw j.error(li + " started without valid sessionManager"), new Error(li + " started without valid sessionManager. This is a bug.");
      return this.instance.sessionManager;
    } }, { key: "isSampled", get: function() {
      return R(this._sampleRate) ? this.instance.get_property(He) : null;
    } }, { key: "sessionDuration", get: function() {
      var e6, t2, n2 = (e6 = this.buffer) === null || e6 === void 0 ? void 0 : e6.data[((t2 = this.buffer) === null || t2 === void 0 ? void 0 : t2.data.length) - 1], i2 = this.sessionManager.checkAndGetSessionAndWindowId(true).sessionStartTimestamp;
      return n2 ? n2.timestamp - i2 : null;
    } }, { key: "isRecordingEnabled", get: function() {
      var e6 = !!this.instance.get_property(qe), t2 = !this.instance.config.disable_session_recording;
      return E && e6 && t2;
    } }, { key: "isConsoleLogCaptureEnabled", get: function() {
      var e6 = !!this.instance.get_property(Me), t2 = this.instance.config.enable_recording_console_log;
      return t2 != null ? t2 : e6;
    } }, { key: "canvasRecording", get: function() {
      var e6 = this.instance.get_property(Ne);
      return e6 && e6.fps && e6.quality ? { enabled: e6.enabled, fps: e6.fps, quality: e6.quality } : void 0;
    } }, { key: "recordingVersion", get: function() {
      var e6, t2 = this.instance.get_property(De);
      return ((e6 = this.instance.config.session_recording) === null || e6 === void 0 ? void 0 : e6.recorderVersion) || t2 || "v1";
    } }, { key: "networkPayloadCapture", get: function() {
      var e6, t2, n2 = this.instance.get_property(Le), i2 = { recordHeaders: (e6 = this.instance.config.session_recording) === null || e6 === void 0 ? void 0 : e6.recordHeaders, recordBody: (t2 = this.instance.config.session_recording) === null || t2 === void 0 ? void 0 : t2.recordBody }, r2 = (i2 == null ? void 0 : i2.recordHeaders) || (n2 == null ? void 0 : n2.recordHeaders), s2 = (i2 == null ? void 0 : i2.recordBody) || (n2 == null ? void 0 : n2.recordBody), o2 = this.instance.config.capture_performance || (n2 == null ? void 0 : n2.capturePerformance);
      return r2 || s2 || o2 ? { recordHeaders: r2, recordBody: s2, recordPerformance: o2 } : void 0;
    } }, { key: "status", get: function() {
      return this.receivedDecide ? this.isRecordingEnabled ? F(this._linkedFlag) || this._linkedFlagSeen ? x(this.isSampled) ? this.isSampled ? "sampled" : "disabled" : "active" : "buffering" : "disabled" : "buffering";
    } }, { key: "startRecordingIfEnabled", value: function() {
      this.isRecordingEnabled ? (this._startCapture(), j.info(li + " started")) : (this.stopRecording(), this.clearBuffer());
    } }, { key: "stopRecording", value: function() {
      this._captureStarted && this.stopRrweb && (this.stopRrweb(), this.stopRrweb = void 0, this._captureStarted = false, j.info(li + " stopped"));
    } }, { key: "makeSamplingDecision", value: function(e6) {
      var t2, n2 = this.sessionId !== e6;
      if (R(this._sampleRate)) {
        var i2, r2 = this.isSampled;
        if (n2 || !x(r2))
          i2 = Math.random() < this._sampleRate;
        else
          i2 = r2;
        i2 || j.warn(li + " Sample rate (".concat(this._sampleRate, ") has determined that this sessionId (").concat(e6, ") will not be sent to the server.")), (t2 = this.instance.persistence) === null || t2 === void 0 || t2.register(o({}, He, i2));
      } else {
        var s2;
        (s2 = this.instance.persistence) === null || s2 === void 0 || s2.register(o({}, He, null));
      }
    } }, { key: "afterDecideResponse", value: function(e6) {
      var n2, i2, r2, s2, a2, u2, l2, c2, d2, h2, f2, p2 = this;
      this.instance.persistence && this.instance.persistence.register((o(f2 = {}, qe, !!e6.sessionRecording), o(f2, Me, (a2 = e6.sessionRecording) === null || a2 === void 0 ? void 0 : a2.consoleLogRecordingEnabled), o(f2, De, (u2 = e6.sessionRecording) === null || u2 === void 0 ? void 0 : u2.recorderVersion), o(f2, Le, t({ capturePerformance: e6.capturePerformance }, (l2 = e6.sessionRecording) === null || l2 === void 0 ? void 0 : l2.networkPayloadCapture)), o(f2, Ne, { enabled: (c2 = e6.sessionRecording) === null || c2 === void 0 ? void 0 : c2.recordCanvas, fps: (d2 = e6.sessionRecording) === null || d2 === void 0 ? void 0 : d2.canvasFps, quality: (h2 = e6.sessionRecording) === null || h2 === void 0 ? void 0 : h2.canvasQuality }), f2));
      var g2 = (n2 = e6.sessionRecording) === null || n2 === void 0 ? void 0 : n2.sampleRate;
      this._sampleRate = F(g2) ? null : parseFloat(g2);
      var v2, _2 = (i2 = e6.sessionRecording) === null || i2 === void 0 ? void 0 : i2.minimumDurationMilliseconds;
      (this._minimumDuration = w(_2) ? null : _2, this._linkedFlag = ((r2 = e6.sessionRecording) === null || r2 === void 0 ? void 0 : r2.linkedFlag) || null, (s2 = e6.sessionRecording) !== null && s2 !== void 0 && s2.endpoint) && (this._endpoint = (v2 = e6.sessionRecording) === null || v2 === void 0 ? void 0 : v2.endpoint);
      if (R(this._sampleRate) && this.sessionManager.onSessionId(function(e7) {
        p2.makeSamplingDecision(e7);
      }), !F(this._linkedFlag)) {
        var m2, y2, S2 = k(this._linkedFlag) ? this._linkedFlag : (m2 = this._linkedFlag) === null || m2 === void 0 ? void 0 : m2.flag, x2 = k(this._linkedFlag) ? null : (y2 = this._linkedFlag) === null || y2 === void 0 ? void 0 : y2.variant;
        this.instance.onFeatureFlags(function(e7, t2) {
          var n3 = b(t2) && S2 in t2, i3 = x2 ? t2[S2] === x2 : n3;
          i3 && j.info(li + " linked flag matched", { linkedFlag: S2, linkedVariant: x2 }), p2._linkedFlagSeen = i3;
        });
      }
      this.receivedDecide = true, this.startRecordingIfEnabled();
    } }, { key: "log", value: function(e6) {
      var t2, n2 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : "log";
      (t2 = this.instance.sessionRecording) === null || t2 === void 0 || t2.onRRwebEmit({ type: 6, data: { plugin: "rrweb/console@1", payload: { level: n2, trace: [], payload: [JSON.stringify(e6)] } }, timestamp: J() });
    } }, { key: "_startCapture", value: function() {
      var e6 = this;
      if (!w(Object.assign) && !(this._captureStarted || this.instance.config.disable_session_recording || ii(this.instance))) {
        this._captureStarted = true, this.sessionManager.checkAndGetSessionAndWindowId();
        var t2 = this.recordingVersion === "v2" ? "recorder-v2.js" : "recorder.js";
        this.instance.__loaded_recorder_version !== this.recordingVersion ? re(this.instance.requestRouter.endpointFor("assets", "/static/".concat(t2, "?v=").concat(f.LIB_VERSION)), function(n2) {
          if (n2)
            return j.error(li + " could not load ".concat(t2), n2);
          e6._onScriptLoaded();
        }) : this._onScriptLoaded();
      }
    } }, { key: "_isInteractiveEvent", value: function(e6) {
      var t2;
      return e6.type === 3 && ai.indexOf((t2 = e6.data) === null || t2 === void 0 ? void 0 : t2.source) !== -1;
    } }, { key: "_updateWindowAndSessionIds", value: function(e6) {
      var t2 = this._isInteractiveEvent(e6);
      t2 || this.isIdle || e6.timestamp - this._lastActivityTimestamp > oi && (this.isIdle = true, this._tryAddCustomEvent("sessionIdle", { reason: "user inactivity", timeSinceLastActive: e6.timestamp - this._lastActivityTimestamp, threshold: oi }));
      var n2 = false;
      if (t2 && (this._lastActivityTimestamp = e6.timestamp, this.isIdle && (this.isIdle = false, this._tryAddCustomEvent("sessionNoLongerIdle", { reason: "user activity", type: e6.type }), n2 = true)), !this.isIdle) {
        var i2 = this.sessionManager.checkAndGetSessionAndWindowId(!t2, e6.timestamp), r2 = i2.windowId, s2 = i2.sessionId, o2 = this.sessionId !== s2, a2 = this.windowId !== r2;
        this.windowId = r2, this.sessionId = s2, (n2 || [qn, Mn].indexOf(e6.type) === -1 && (a2 || o2)) && this._tryTakeFullSnapshot();
      }
    } }, { key: "_tryRRWebMethod", value: function(e6) {
      try {
        return e6.rrwebMethod(), true;
      } catch (t2) {
        return j.warn(li + " could not emit queued rrweb event.", t2), this.queuedRRWebEvents.length < 10 && this.queuedRRWebEvents.push({ enqueuedAt: e6.enqueuedAt || Date.now(), attempt: e6.attempt++, rrwebMethod: e6.rrwebMethod }), false;
      }
    } }, { key: "_tryAddCustomEvent", value: function(e6, t2) {
      var n2 = this;
      return this._tryRRWebMethod(ui(function() {
        return n2.rrwebRecord.addCustomEvent(e6, t2);
      }));
    } }, { key: "_tryTakeFullSnapshot", value: function() {
      var e6 = this;
      return this._tryRRWebMethod(ui(function() {
        return e6.rrwebRecord.takeFullSnapshot();
      }));
    } }, { key: "_onScriptLoaded", value: function() {
      var e6, n2 = this, i2 = { blockClass: "ph-no-capture", blockSelector: void 0, ignoreClass: "ph-ignore-input", maskTextClass: "ph-mask", maskTextSelector: void 0, maskTextFn: void 0, maskAllInputs: true, maskInputOptions: {}, maskInputFn: void 0, slimDOMOptions: {}, collectFonts: false, inlineStylesheet: true, recordCrossOriginIframes: false };
      this.rrwebRecord = E.rrweb ? E.rrweb.record : E.rrwebRecord;
      for (var r2 = this.instance.config.session_recording, s2 = 0, o2 = Object.entries(r2 || {}); s2 < o2.length; s2++) {
        var a2 = u(o2[s2], 2), l2 = a2[0], c2 = a2[1];
        l2 in i2 && (i2[l2] = c2);
      }
      if (this.canvasRecording && this.canvasRecording.enabled && (i2.recordCanvas = true, i2.sampling = { canvas: this.canvasRecording.fps }, i2.dataURLOptions = { type: "image/webp", quality: this.canvasRecording.quality }), this.rrwebRecord) {
        this.mutationRateLimiter = (e6 = this.mutationRateLimiter) !== null && e6 !== void 0 ? e6 : new Dn(this.rrwebRecord, { onBlockedNode: function(e7, t2) {
          var i3 = "Too many mutations on node '".concat(e7, "'. Rate limiting. This could be due to SVG animations or something similar");
          j.info(i3, { node: t2 }), n2.log(li + " " + i3, "warn");
        } }), this._scheduleFullSnapshot();
        var d2 = this._gatherRRWebPlugins();
        this.stopRrweb = this.rrwebRecord(t({ emit: function(e7) {
          n2.onRRwebEmit(e7);
        }, plugins: d2 }, i2)), this.instance._addCaptureHook(function(e7) {
          try {
            if (e7 === "$pageview") {
              var t2 = E ? n2._maskUrl(E.location.href) : "";
              if (!t2)
                return;
              n2._tryAddCustomEvent("$pageview", { href: t2 }), n2._tryTakeFullSnapshot();
            }
          } catch (e8) {
            j.error("Could not add $pageview to rrweb session", e8);
          }
        }), this._lastActivityTimestamp = Date.now(), this.isIdle = false, this._tryAddCustomEvent("$session_options", { sessionRecordingOptions: i2, activePlugins: d2.map(function(e7) {
          return e7 == null ? void 0 : e7.name;
        }) }), this._tryAddCustomEvent("$posthog_config", { config: this.instance.config });
      } else
        j.error(li + "onScriptLoaded was called but rrwebRecord is not available. This indicates something has gone wrong.");
    } }, { key: "_scheduleFullSnapshot", value: function() {
      var e6 = this;
      this._fullSnapshotTimer && clearInterval(this._fullSnapshotTimer), this._fullSnapshotTimer = setInterval(function() {
        e6._tryTakeFullSnapshot();
      }, si);
    } }, { key: "_gatherRRWebPlugins", value: function() {
      var e6 = [];
      (B.rrwebConsoleRecord && this.isConsoleLogCaptureEnabled && e6.push(B.rrwebConsoleRecord.getRecordConsolePlugin()), this.networkPayloadCapture && y(B.getRecordNetworkPlugin)) && (!It.includes(location.hostname) || this._forceAllowLocalhostNetworkCapture ? e6.push(B.getRecordNetworkPlugin(zn(this.instance.config, this.networkPayloadCapture))) : j.info(li + " NetworkCapture not started because we are on localhost."));
      return e6;
    } }, { key: "onRRwebEmit", value: function(e6) {
      if (this._processQueuedEvents(), e6 && b(e6)) {
        if (e6.type === Ln.Meta) {
          var t2 = this._maskUrl(e6.data.href);
          if (!t2)
            return;
          e6.data.href = t2;
        }
        e6.type === Ln.FullSnapshot && this._scheduleFullSnapshot();
        var n2 = this.mutationRateLimiter ? this.mutationRateLimiter.throttleMutations(e6) : e6;
        if (n2) {
          var i2 = function(e7) {
            var t3 = e7;
            if (t3 && b(t3) && t3.type === 6 && b(t3.data) && t3.data.plugin === "rrweb/console@1") {
              t3.data.payload.payload.length > 10 && (t3.data.payload.payload = t3.data.payload.payload.slice(0, 10), t3.data.payload.payload.push("...[truncated]"));
              for (var n3 = [], i3 = 0; i3 < t3.data.payload.payload.length; i3++)
                t3.data.payload.payload[i3] && t3.data.payload.payload[i3].length > 2e3 ? n3.push(t3.data.payload.payload[i3].slice(0, 2e3) + "...[truncated]") : n3.push(t3.data.payload.payload[i3]);
              return t3.data.payload.payload = n3, e7;
            }
            return e7;
          }(n2), r2 = JSON.stringify(i2).length;
          if (this._updateWindowAndSessionIds(i2), !this.isIdle || i2.type === Ln.Custom) {
            var s2 = { $snapshot_bytes: r2, $snapshot_data: i2, $session_id: this.sessionId, $window_id: this.windowId };
            this.status !== "disabled" ? this._captureSnapshotBuffered(s2) : this.clearBuffer();
          }
        }
      }
    } }, { key: "_processQueuedEvents", value: function() {
      var e6 = this;
      if (this.queuedRRWebEvents.length) {
        var t2 = l(this.queuedRRWebEvents);
        this.queuedRRWebEvents = [], t2.forEach(function(n2) {
          Date.now() - n2.enqueuedAt > 2e3 ? e6._tryAddCustomEvent("rrwebQueueTimeout", { enqueuedAt: n2.enqueuedAt, attempt: n2.attempt, queueLength: t2.length }) : e6._tryRRWebMethod(n2) && e6._tryAddCustomEvent("rrwebQueueSuccess", { enqueuedAt: n2.enqueuedAt, attempt: n2.attempt, queueLength: t2.length });
        });
      }
    } }, { key: "_maskUrl", value: function(e6) {
      var t2 = this.instance.config.session_recording;
      if (t2.maskNetworkRequestFn) {
        var n2, i2 = { url: e6 };
        return (n2 = i2 = t2.maskNetworkRequestFn(i2)) === null || n2 === void 0 ? void 0 : n2.url;
      }
      return e6;
    } }, { key: "clearBuffer", value: function() {
      return this.buffer = void 0, { size: 0, data: [], sessionId: this.sessionId, windowId: this.windowId };
    } }, { key: "_flushBuffer", value: function() {
      var e6 = this;
      this.flushBufferTimer && (clearTimeout(this.flushBufferTimer), this.flushBufferTimer = void 0);
      var t2 = this._minimumDuration, n2 = this.sessionDuration, i2 = R(n2) && n2 >= 0, r2 = R(t2) && i2 && n2 < t2;
      return this.status === "buffering" || r2 ? (this.flushBufferTimer = setTimeout(function() {
        e6._flushBuffer();
      }, 2e3), this.buffer || this.clearBuffer()) : this.buffer && this.buffer.data.length !== 0 ? (this._captureSnapshot({ $snapshot_bytes: this.buffer.size, $snapshot_data: this.buffer.data, $session_id: this.buffer.sessionId, $window_id: this.buffer.windowId }), this.clearBuffer()) : this.buffer || this.clearBuffer();
    } }, { key: "_captureSnapshotBuffered", value: function(e6) {
      var t2, n2 = this, i2 = 2 + (((t2 = this.buffer) === null || t2 === void 0 ? void 0 : t2.data.length) || 0);
      (!this.buffer || this.buffer.size + e6.$snapshot_bytes + i2 > 943718.4 || this.buffer.sessionId && this.buffer.sessionId !== this.sessionId) && (this.buffer = this._flushBuffer()), S(this.buffer.sessionId) && !S(this.sessionId) && (this.buffer.sessionId = this.sessionId, this.buffer.windowId = this.windowId), this.buffer.size += e6.$snapshot_bytes, this.buffer.data.push(e6.$snapshot_data), this.flushBufferTimer || (this.flushBufferTimer = setTimeout(function() {
        n2._flushBuffer();
      }, 2e3));
    } }, { key: "_captureSnapshot", value: function(e6) {
      this.instance.capture("$snapshot", e6, { _url: this.instance.requestRouter.endpointFor("api", this._endpoint), _noTruncate: true, _batchKey: "recordings" });
    } }]), e5;
  }();
  var di = function() {
    function e5(t2) {
      i(this, e5), this.instance = t2, this.instance.decideEndpointWasHit = this.instance._hasBootstrappedFeatureFlags();
    }
    return s(e5, [{ key: "call", value: function() {
      var e6 = this, t2 = { token: this.instance.config.token, distinct_id: this.instance.get_distinct_id(), groups: this.instance.getGroups(), person_properties: this.instance.get_property(Ve), group_properties: this.instance.get_property(We), disable_flags: this.instance.config.advanced_disable_feature_flags || this.instance.config.advanced_disable_feature_flags_on_first_load || void 0 };
      this.instance._send_request({ method: "POST", url: this.instance.requestRouter.endpointFor("api", "/decide/?v=3"), data: t2, compression: et.Base64, timeout: this.instance.config.feature_flag_request_timeout_ms, callback: function(t3) {
        return e6.parseDecideResponse(t3.json);
      } });
    } }, { key: "parseDecideResponse", value: function(e6) {
      var t2, n2 = this;
      this.instance.featureFlags.setReloadingPaused(false), this.instance.featureFlags._startReloadTimer();
      var i2 = !e6;
      if (this.instance.config.advanced_disable_feature_flags_on_first_load || this.instance.config.advanced_disable_feature_flags || this.instance.featureFlags.receivedFeatureFlags(e6 != null ? e6 : {}, i2), i2)
        j.error("Failed to fetch feature flags from PostHog.");
      else {
        if (!A || !A.body)
          return j.info("document not ready yet, trying again in 500 milliseconds..."), void setTimeout(function() {
            n2.parseDecideResponse(e6);
          }, 500);
        this.instance.toolbar.afterDecideResponse(e6), (t2 = this.instance.sessionRecording) === null || t2 === void 0 || t2.afterDecideResponse(e6), tt.afterDecideResponse(e6, this.instance), this.instance._afterDecideResponse(e6);
        var r2 = E == null ? void 0 : E.extendPostHogWithSurveys;
        e6.surveys && !r2 && re(this.instance.requestRouter.endpointFor("assets", "/static/surveys.js"), function(e7) {
          if (e7)
            return j.error("Could not load surveys script", e7);
          E.extendPostHogWithSurveys(n2.instance);
        });
        var s2 = E == null ? void 0 : E.extendPostHogWithExceptionAutoCapture;
        if (e6.autocaptureExceptions && e6.autocaptureExceptions && w(s2) && re(this.instance.requestRouter.endpointFor("assets", "/static/exception-autocapture.js"), function(t3) {
          if (t3)
            return j.error("Could not load exception autocapture script", t3);
          E.extendPostHogWithExceptionAutocapture(n2.instance, e6);
        }), e6.siteApps)
          if (this.instance.config.opt_in_site_apps) {
            var o2, a2 = h(e6.siteApps);
            try {
              var u2 = function() {
                var e7 = o2.value, t3 = e7.id, i3 = e7.url, r3 = n2.instance.requestRouter.endpointFor("api", i3);
                B["__$$ph_site_app_".concat(t3)] = n2.instance, re(r3, function(e8) {
                  e8 && j.error("Error while initializing PostHog app with config id ".concat(t3), e8);
                });
              };
              for (a2.s(); !(o2 = a2.n()).done; )
                u2();
            } catch (e7) {
              a2.e(e7);
            } finally {
              a2.f();
            }
          } else
            e6.siteApps.length > 0 && j.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.');
      }
    } }]), e5;
  }();
  var hi = ["source"];
  var fi = E != null && E.location ? At(E.location.hash, "__posthog") || At(location.hash, "state") : null;
  var pi = function() {
    function e5(t2) {
      i(this, e5), this.instance = t2;
    }
    return s(e5, [{ key: "afterDecideResponse", value: function(e6) {
      var n2 = e6.toolbarParams || e6.editorParams || (e6.toolbarVersion ? { toolbarVersion: e6.toolbarVersion } : {});
      e6.isAuthenticated && n2.toolbarVersion && n2.toolbarVersion.indexOf("toolbar") === 0 && this.loadToolbar(t({}, n2));
    } }, { key: "maybeLoadToolbar", value: function() {
      var e6, t2, n2 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : void 0, i2 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : void 0, r2 = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : void 0;
      if (!E || !A)
        return false;
      n2 = (e6 = n2) !== null && e6 !== void 0 ? e6 : E.location, r2 = (t2 = r2) !== null && t2 !== void 0 ? t2 : E.history;
      try {
        if (!i2) {
          try {
            E.localStorage.setItem("test", "test"), E.localStorage.removeItem("test");
          } catch (e7) {
            return false;
          }
          i2 = E == null ? void 0 : E.localStorage;
        }
        var s2, o2 = fi || At(n2.hash, "__posthog") || At(n2.hash, "state"), a2 = o2 ? K(function() {
          return JSON.parse(atob(decodeURIComponent(o2)));
        }) || K(function() {
          return JSON.parse(decodeURIComponent(o2));
        }) : null;
        return a2 && a2.action === "ph_authorize" ? ((s2 = a2).source = "url", s2 && Object.keys(s2).length > 0 && (a2.desiredHash ? n2.hash = a2.desiredHash : r2 ? r2.replaceState("", A.title, n2.pathname + n2.search) : n2.hash = "")) : ((s2 = JSON.parse(i2.getItem("_postHogToolbarParams") || "{}")).source = "localstorage", delete s2.userIntent), !(!s2.token || this.instance.config.token !== s2.token) && (this.loadToolbar(s2), true);
      } catch (e7) {
        return false;
      }
    } }, { key: "loadToolbar", value: function(e6) {
      var n2 = this;
      if (!E || B._postHogToolbarLoaded)
        return false;
      B._postHogToolbarLoaded = true;
      var i2 = 3e5, r2 = Math.floor(Date.now() / i2) * i2, s2 = this.instance.requestRouter.endpointFor("assets", "/static/toolbar.js?t=".concat(r2)), o2 = this.instance.requestRouter.region === "custom" && this.instance.config.advanced_disable_toolbar_metrics, u2 = t(t({ token: this.instance.config.token }, e6), {}, { apiURL: this.instance.requestRouter.endpointFor("ui") }, o2 ? { instrument: false } : {});
      u2.source;
      var l2 = a(u2, hi);
      return E.localStorage.setItem("_postHogToolbarParams", JSON.stringify(l2)), re(s2, function(e7) {
        e7 ? j.error("Failed to load toolbar", e7) : (B.ph_load_toolbar || B.ph_load_editor)(u2, n2.instance);
      }), ie(E, "turbolinks:load", function() {
        B._postHogToolbarLoaded = false, n2.loadToolbar(u2);
      }), true;
    } }, { key: "_loadEditor", value: function(e6) {
      return this.loadToolbar(e6);
    } }, { key: "maybeLoadEditor", value: function() {
      var e6 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : void 0, t2 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : void 0, n2 = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : void 0;
      return this.maybeLoadToolbar(e6, t2, n2);
    } }]), e5;
  }();
  var gi = function() {
    function e5(t2) {
      i(this, e5), o(this, "isPaused", true), o(this, "queue", []), o(this, "flushTimeoutMs", 3e3), this.sendRequest = t2;
    }
    return s(e5, [{ key: "enqueue", value: function(e6) {
      this.queue.push(e6), this.flushTimeout || this.setFlushTimeout();
    } }, { key: "unload", value: function() {
      var e6 = this;
      this.clearFlushTimeout();
      var n2 = this.queue.length > 0 ? this.formatQueue() : {}, i2 = Object.values(n2);
      [].concat(l(i2.filter(function(e7) {
        return e7.url.indexOf("/e") === 0;
      })), l(i2.filter(function(e7) {
        return e7.url.indexOf("/e") !== 0;
      }))).map(function(n3) {
        e6.sendRequest(t(t({}, n3), {}, { transport: "sendBeacon" }));
      });
    } }, { key: "enable", value: function() {
      this.isPaused = false, this.setFlushTimeout();
    } }, { key: "setFlushTimeout", value: function() {
      var e6 = this;
      this.isPaused || (this.flushTimeout = setTimeout(function() {
        if (e6.clearFlushTimeout(), e6.queue.length > 0) {
          var t2 = e6.formatQueue(), n2 = function(n3) {
            var i3 = t2[n3], r2 = new Date().getTime();
            i3.data && m(i3.data) && z(i3.data, function(e7) {
              e7.offset = Math.abs(e7.timestamp - r2), delete e7.timestamp;
            }), e6.sendRequest(i3);
          };
          for (var i2 in t2)
            n2(i2);
        }
      }, this.flushTimeoutMs));
    } }, { key: "clearFlushTimeout", value: function() {
      clearTimeout(this.flushTimeout), this.flushTimeout = void 0;
    } }, { key: "formatQueue", value: function() {
      var e6 = {};
      return z(this.queue, function(n2) {
        var i2, r2 = n2, s2 = (r2 ? r2.batchKey : null) || r2.url;
        w(e6[s2]) && (e6[s2] = t(t({}, r2), {}, { data: [] })), (i2 = e6[s2].data) === null || i2 === void 0 || i2.push(r2.data);
      }), this.queue = [], e6;
    } }]), e5;
  }();
  var vi = Uint8Array;
  var _i = Uint16Array;
  var mi = Uint32Array;
  var yi = new vi([0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0, 0, 0, 0]);
  var bi = new vi([0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13, 0, 0]);
  var wi = new vi([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]);
  var ki = function(e5, t2) {
    for (var n2 = new _i(31), i2 = 0; i2 < 31; ++i2)
      n2[i2] = t2 += 1 << e5[i2 - 1];
    var r2 = new mi(n2[30]);
    for (i2 = 1; i2 < 30; ++i2)
      for (var s2 = n2[i2]; s2 < n2[i2 + 1]; ++s2)
        r2[s2] = s2 - n2[i2] << 5 | i2;
    return [n2, r2];
  };
  var Si = ki(yi, 2);
  var Fi = Si[0];
  var Ri = Si[1];
  Fi[28] = 258, Ri[258] = 28;
  for (xi = ki(bi, 0)[1], Pi = new _i(32768), Ei = 0; Ei < 32768; ++Ei) {
    Ii = (43690 & Ei) >>> 1 | (21845 & Ei) << 1;
    Ii = (61680 & (Ii = (52428 & Ii) >>> 2 | (13107 & Ii) << 2)) >>> 4 | (3855 & Ii) << 4, Pi[Ei] = ((65280 & Ii) >>> 8 | (255 & Ii) << 8) >>> 1;
  }
  var Ii;
  var xi;
  var Pi;
  var Ei;
  var Ci = function(e5, t2, n2) {
    for (var i2 = e5.length, r2 = 0, s2 = new _i(t2); r2 < i2; ++r2)
      ++s2[e5[r2] - 1];
    var o2, a2 = new _i(t2);
    for (r2 = 0; r2 < t2; ++r2)
      a2[r2] = a2[r2 - 1] + s2[r2 - 1] << 1;
    if (n2) {
      o2 = new _i(1 << t2);
      var u2 = 15 - t2;
      for (r2 = 0; r2 < i2; ++r2)
        if (e5[r2])
          for (var l2 = r2 << 4 | e5[r2], c2 = t2 - e5[r2], d2 = a2[e5[r2] - 1]++ << c2, h2 = d2 | (1 << c2) - 1; d2 <= h2; ++d2)
            o2[Pi[d2] >>> u2] = l2;
    } else
      for (o2 = new _i(i2), r2 = 0; r2 < i2; ++r2)
        o2[r2] = Pi[a2[e5[r2] - 1]++] >>> 15 - e5[r2];
    return o2;
  };
  var $i = new vi(288);
  for (Ei = 0; Ei < 144; ++Ei)
    $i[Ei] = 8;
  for (Ei = 144; Ei < 256; ++Ei)
    $i[Ei] = 9;
  for (Ei = 256; Ei < 280; ++Ei)
    $i[Ei] = 7;
  for (Ei = 280; Ei < 288; ++Ei)
    $i[Ei] = 8;
  var Ti = new vi(32);
  for (Ei = 0; Ei < 32; ++Ei)
    Ti[Ei] = 5;
  var Oi = Ci($i, 9, 0);
  var Ai = Ci(Ti, 5, 0);
  var qi = function(e5) {
    return (e5 / 8 >> 0) + (7 & e5 && 1);
  };
  var Mi = function(e5, t2, n2) {
    (t2 == null || t2 < 0) && (t2 = 0), (n2 == null || n2 > e5.length) && (n2 = e5.length);
    var i2 = new (e5 instanceof _i ? _i : e5 instanceof mi ? mi : vi)(n2 - t2);
    return i2.set(e5.subarray(t2, n2)), i2;
  };
  var Di = function(e5, t2, n2) {
    n2 <<= 7 & t2;
    var i2 = t2 / 8 >> 0;
    e5[i2] |= n2, e5[i2 + 1] |= n2 >>> 8;
  };
  var Li = function(e5, t2, n2) {
    n2 <<= 7 & t2;
    var i2 = t2 / 8 >> 0;
    e5[i2] |= n2, e5[i2 + 1] |= n2 >>> 8, e5[i2 + 2] |= n2 >>> 16;
  };
  var Ni = function(e5, t2) {
    for (var n2 = [], i2 = 0; i2 < e5.length; ++i2)
      e5[i2] && n2.push({ s: i2, f: e5[i2] });
    var r2 = n2.length, s2 = n2.slice();
    if (!r2)
      return [new vi(0), 0];
    if (r2 == 1) {
      var o2 = new vi(n2[0].s + 1);
      return o2[n2[0].s] = 1, [o2, 1];
    }
    n2.sort(function(e6, t3) {
      return e6.f - t3.f;
    }), n2.push({ s: -1, f: 25001 });
    var a2 = n2[0], u2 = n2[1], l2 = 0, c2 = 1, d2 = 2;
    for (n2[0] = { s: -1, f: a2.f + u2.f, l: a2, r: u2 }; c2 != r2 - 1; )
      a2 = n2[n2[l2].f < n2[d2].f ? l2++ : d2++], u2 = n2[l2 != c2 && n2[l2].f < n2[d2].f ? l2++ : d2++], n2[c2++] = { s: -1, f: a2.f + u2.f, l: a2, r: u2 };
    var h2 = s2[0].s;
    for (i2 = 1; i2 < r2; ++i2)
      s2[i2].s > h2 && (h2 = s2[i2].s);
    var f2 = new _i(h2 + 1), p2 = Bi(n2[c2 - 1], f2, 0);
    if (p2 > t2) {
      i2 = 0;
      var g2 = 0, v2 = p2 - t2, _2 = 1 << v2;
      for (s2.sort(function(e6, t3) {
        return f2[t3.s] - f2[e6.s] || e6.f - t3.f;
      }); i2 < r2; ++i2) {
        var m2 = s2[i2].s;
        if (!(f2[m2] > t2))
          break;
        g2 += _2 - (1 << p2 - f2[m2]), f2[m2] = t2;
      }
      for (g2 >>>= v2; g2 > 0; ) {
        var y2 = s2[i2].s;
        f2[y2] < t2 ? g2 -= 1 << t2 - f2[y2]++ - 1 : ++i2;
      }
      for (; i2 >= 0 && g2; --i2) {
        var b2 = s2[i2].s;
        f2[b2] == t2 && (--f2[b2], ++g2);
      }
      p2 = t2;
    }
    return [new vi(f2), p2];
  };
  var Bi = function e3(t2, n2, i2) {
    return t2.s == -1 ? Math.max(e3(t2.l, n2, i2 + 1), e3(t2.r, n2, i2 + 1)) : n2[t2.s] = i2;
  };
  var Hi = function(e5) {
    for (var t2 = e5.length; t2 && !e5[--t2]; )
      ;
    for (var n2 = new _i(++t2), i2 = 0, r2 = e5[0], s2 = 1, o2 = function(e6) {
      n2[i2++] = e6;
    }, a2 = 1; a2 <= t2; ++a2)
      if (e5[a2] == r2 && a2 != t2)
        ++s2;
      else {
        if (!r2 && s2 > 2) {
          for (; s2 > 138; s2 -= 138)
            o2(32754);
          s2 > 2 && (o2(s2 > 10 ? s2 - 11 << 5 | 28690 : s2 - 3 << 5 | 12305), s2 = 0);
        } else if (s2 > 3) {
          for (o2(r2), --s2; s2 > 6; s2 -= 6)
            o2(8304);
          s2 > 2 && (o2(s2 - 3 << 5 | 8208), s2 = 0);
        }
        for (; s2--; )
          o2(r2);
        s2 = 1, r2 = e5[a2];
      }
    return [n2.subarray(0, i2), t2];
  };
  var ji = function(e5, t2) {
    for (var n2 = 0, i2 = 0; i2 < t2.length; ++i2)
      n2 += e5[i2] * t2[i2];
    return n2;
  };
  var Ui = function(e5, t2, n2) {
    var i2 = n2.length, r2 = qi(t2 + 2);
    e5[r2] = 255 & i2, e5[r2 + 1] = i2 >>> 8, e5[r2 + 2] = 255 ^ e5[r2], e5[r2 + 3] = 255 ^ e5[r2 + 1];
    for (var s2 = 0; s2 < i2; ++s2)
      e5[r2 + s2 + 4] = n2[s2];
    return 8 * (r2 + 4 + i2);
  };
  var Vi = function(e5, t2, n2, i2, r2, s2, o2, a2, u2, l2, c2) {
    Di(t2, c2++, n2), ++r2[256];
    for (var d2 = Ni(r2, 15), h2 = d2[0], f2 = d2[1], p2 = Ni(s2, 15), g2 = p2[0], v2 = p2[1], _2 = Hi(h2), m2 = _2[0], y2 = _2[1], b2 = Hi(g2), w2 = b2[0], k2 = b2[1], S2 = new _i(19), F2 = 0; F2 < m2.length; ++F2)
      S2[31 & m2[F2]]++;
    for (F2 = 0; F2 < w2.length; ++F2)
      S2[31 & w2[F2]]++;
    for (var R2 = Ni(S2, 7), x2 = R2[0], P2 = R2[1], E2 = 19; E2 > 4 && !x2[wi[E2 - 1]]; --E2)
      ;
    var I2, C2, $2, T2, O2 = l2 + 5 << 3, A2 = ji(r2, $i) + ji(s2, Ti) + o2, q2 = ji(r2, h2) + ji(s2, g2) + o2 + 14 + 3 * E2 + ji(S2, x2) + (2 * S2[16] + 3 * S2[17] + 7 * S2[18]);
    if (O2 <= A2 && O2 <= q2)
      return Ui(t2, c2, e5.subarray(u2, u2 + l2));
    if (Di(t2, c2, 1 + (q2 < A2)), c2 += 2, q2 < A2) {
      I2 = Ci(h2, f2, 0), C2 = h2, $2 = Ci(g2, v2, 0), T2 = g2;
      var M2 = Ci(x2, P2, 0);
      Di(t2, c2, y2 - 257), Di(t2, c2 + 5, k2 - 1), Di(t2, c2 + 10, E2 - 4), c2 += 14;
      for (F2 = 0; F2 < E2; ++F2)
        Di(t2, c2 + 3 * F2, x2[wi[F2]]);
      c2 += 3 * E2;
      for (var D2 = [m2, w2], L2 = 0; L2 < 2; ++L2) {
        var N2 = D2[L2];
        for (F2 = 0; F2 < N2.length; ++F2) {
          var B2 = 31 & N2[F2];
          Di(t2, c2, M2[B2]), c2 += x2[B2], B2 > 15 && (Di(t2, c2, N2[F2] >>> 5 & 127), c2 += N2[F2] >>> 12);
        }
      }
    } else
      I2 = Oi, C2 = $i, $2 = Ai, T2 = Ti;
    for (F2 = 0; F2 < a2; ++F2)
      if (i2[F2] > 255) {
        B2 = i2[F2] >>> 18 & 31;
        Li(t2, c2, I2[B2 + 257]), c2 += C2[B2 + 257], B2 > 7 && (Di(t2, c2, i2[F2] >>> 23 & 31), c2 += yi[B2]);
        var H2 = 31 & i2[F2];
        Li(t2, c2, $2[H2]), c2 += T2[H2], H2 > 3 && (Li(t2, c2, i2[F2] >>> 5 & 8191), c2 += bi[H2]);
      } else
        Li(t2, c2, I2[i2[F2]]), c2 += C2[i2[F2]];
    return Li(t2, c2, I2[256]), c2 + C2[256];
  };
  var Wi = new mi([65540, 131080, 131088, 131104, 262176, 1048704, 1048832, 2114560, 2117632]);
  var zi = new vi(0);
  var Gi = function() {
    for (var e5 = new mi(256), t2 = 0; t2 < 256; ++t2) {
      for (var n2 = t2, i2 = 9; --i2; )
        n2 = (1 & n2 && 3988292384) ^ n2 >>> 1;
      e5[t2] = n2;
    }
    return e5;
  }();
  var Qi = function(e5, t2, n2, i2, r2) {
    return function(e6, t3, n3, i3, r3, s2) {
      var o2 = e6.length, a2 = new vi(i3 + o2 + 5 * (1 + Math.floor(o2 / 7e3)) + r3), u2 = a2.subarray(i3, a2.length - r3), l2 = 0;
      if (!t3 || o2 < 8)
        for (var c2 = 0; c2 <= o2; c2 += 65535) {
          var d2 = c2 + 65535;
          d2 < o2 ? l2 = Ui(u2, l2, e6.subarray(c2, d2)) : (u2[c2] = s2, l2 = Ui(u2, l2, e6.subarray(c2, o2)));
        }
      else {
        for (var h2 = Wi[t3 - 1], f2 = h2 >>> 13, p2 = 8191 & h2, g2 = (1 << n3) - 1, v2 = new _i(32768), _2 = new _i(g2 + 1), m2 = Math.ceil(n3 / 3), y2 = 2 * m2, b2 = function(t4) {
          return (e6[t4] ^ e6[t4 + 1] << m2 ^ e6[t4 + 2] << y2) & g2;
        }, w2 = new mi(25e3), k2 = new _i(288), S2 = new _i(32), F2 = 0, R2 = 0, x2 = (c2 = 0, 0), P2 = 0, E2 = 0; c2 < o2; ++c2) {
          var I2 = b2(c2), C2 = 32767 & c2, $2 = _2[I2];
          if (v2[C2] = $2, _2[I2] = C2, P2 <= c2) {
            var T2 = o2 - c2;
            if ((F2 > 7e3 || x2 > 24576) && T2 > 423) {
              l2 = Vi(e6, u2, 0, w2, k2, S2, R2, x2, E2, c2 - E2, l2), x2 = F2 = R2 = 0, E2 = c2;
              for (var O2 = 0; O2 < 286; ++O2)
                k2[O2] = 0;
              for (O2 = 0; O2 < 30; ++O2)
                S2[O2] = 0;
            }
            var A2 = 2, q2 = 0, M2 = p2, D2 = C2 - $2 & 32767;
            if (T2 > 2 && I2 == b2(c2 - D2))
              for (var L2 = Math.min(f2, T2) - 1, N2 = Math.min(32767, c2), B2 = Math.min(258, T2); D2 <= N2 && --M2 && C2 != $2; ) {
                if (e6[c2 + A2] == e6[c2 + A2 - D2]) {
                  for (var H2 = 0; H2 < B2 && e6[c2 + H2] == e6[c2 + H2 - D2]; ++H2)
                    ;
                  if (H2 > A2) {
                    if (A2 = H2, q2 = D2, H2 > L2)
                      break;
                    var j2 = Math.min(D2, H2 - 2), U2 = 0;
                    for (O2 = 0; O2 < j2; ++O2) {
                      var V2 = c2 - D2 + O2 + 32768 & 32767, W2 = V2 - v2[V2] + 32768 & 32767;
                      W2 > U2 && (U2 = W2, $2 = V2);
                    }
                  }
                }
                D2 += (C2 = $2) - ($2 = v2[C2]) + 32768 & 32767;
              }
            if (q2) {
              w2[x2++] = 268435456 | Ri[A2] << 18 | xi[q2];
              var z2 = 31 & Ri[A2], G2 = 31 & xi[q2];
              R2 += yi[z2] + bi[G2], ++k2[257 + z2], ++S2[G2], P2 = c2 + A2, ++F2;
            } else
              w2[x2++] = e6[c2], ++k2[e6[c2]];
          }
        }
        l2 = Vi(e6, u2, s2, w2, k2, S2, R2, x2, E2, c2 - E2, l2), s2 || (l2 = Ui(u2, l2, zi));
      }
      return Mi(a2, 0, i3 + qi(l2) + r3);
    }(e5, t2.level == null ? 6 : t2.level, t2.mem == null ? Math.ceil(1.5 * Math.max(8, Math.min(13, Math.log(e5.length)))) : 12 + t2.mem, n2, i2, !r2);
  };
  var Yi = function(e5, t2, n2) {
    for (; n2; ++t2)
      e5[t2] = n2, n2 >>>= 8;
  };
  function Ji(e5, t2) {
    t2 === void 0 && (t2 = {});
    var n2 = function() {
      var e6 = 4294967295;
      return { p: function(t3) {
        for (var n3 = e6, i3 = 0; i3 < t3.length; ++i3)
          n3 = Gi[255 & n3 ^ t3[i3]] ^ n3 >>> 8;
        e6 = n3;
      }, d: function() {
        return 4294967295 ^ e6;
      } };
    }(), i2 = e5.length;
    n2.p(e5);
    var r2, s2 = Qi(e5, t2, 10 + ((r2 = t2).filename && r2.filename.length + 1 || 0), 8), o2 = s2.length;
    return function(e6, t3) {
      var n3 = t3.filename;
      if (e6[0] = 31, e6[1] = 139, e6[2] = 8, e6[8] = t3.level < 2 ? 4 : t3.level == 9 ? 2 : 0, e6[9] = 3, t3.mtime != 0 && Yi(e6, 4, Math.floor(new Date(t3.mtime || Date.now()) / 1e3)), n3) {
        e6[3] = 8;
        for (var i3 = 0; i3 <= n3.length; ++i3)
          e6[i3 + 10] = n3.charCodeAt(i3);
      }
    }(s2, t2), Yi(s2, o2 - 8, n2.d()), Yi(s2, o2 - 4, i2), s2;
  }
  var Ki = !!D || !!M;
  var Xi = function(e5, n2) {
    var i2 = u(e5.split("?"), 2), r2 = i2[0], s2 = i2[1], o2 = t({}, n2);
    s2 == null || s2.split("&").forEach(function(e6) {
      var t2 = u(e6.split("="), 1)[0];
      delete o2[t2];
    });
    var a2 = Tt(o2);
    return a2 = a2 ? (s2 ? s2 + "&" : "") + a2 : s2, "".concat(r2, "?").concat(a2);
  };
  var Zi = function(e5) {
    return "data=" + encodeURIComponent(typeof e5 == "string" ? e5 : JSON.stringify(e5));
  };
  var er = function(e5) {
    var t2 = e5.data, n2 = e5.compression, i2 = e5.transport, r2 = e5.method;
    if (!t2)
      return null;
    if (n2 === et.GZipJS) {
      var s2 = Ji(function(e6, t3) {
        var n3 = e6.length;
        if (!t3 && typeof TextEncoder != "undefined")
          return new TextEncoder().encode(e6);
        for (var i3 = new vi(e6.length + (e6.length >>> 1)), r3 = 0, s3 = function(e7) {
          i3[r3++] = e7;
        }, o3 = 0; o3 < n3; ++o3) {
          if (r3 + 5 > i3.length) {
            var a3 = new vi(r3 + 8 + (n3 - o3 << 1));
            a3.set(i3), i3 = a3;
          }
          var u2 = e6.charCodeAt(o3);
          u2 < 128 || t3 ? s3(u2) : u2 < 2048 ? (s3(192 | u2 >>> 6), s3(128 | 63 & u2)) : u2 > 55295 && u2 < 57344 ? (s3(240 | (u2 = 65536 + (1047552 & u2) | 1023 & e6.charCodeAt(++o3)) >>> 18), s3(128 | u2 >>> 12 & 63), s3(128 | u2 >>> 6 & 63), s3(128 | 63 & u2)) : (s3(224 | u2 >>> 12), s3(128 | u2 >>> 6 & 63), s3(128 | 63 & u2));
        }
        return Mi(i3, 0, r3);
      }(JSON.stringify(t2)), { mtime: 0 });
      return new Blob([s2], { type: "text/plain" });
    }
    if (i2 === "sendBeacon") {
      var o2 = n2 === et.Base64 ? te(JSON.stringify(t2)) : t2;
      return new Blob([Zi(o2)], { type: "application/x-www-form-urlencoded" });
    }
    if (n2 === et.Base64) {
      var a2 = te(JSON.stringify(t2));
      return Zi(a2);
    }
    return r2 !== "POST" ? null : Zi(t2);
  };
  var tr = function(e5) {
    var t2 = new D();
    t2.open(e5.method || "GET", e5.url, true);
    var n2 = er(e5);
    z(e5.headers, function(e6, n3) {
      t2.setRequestHeader(n3, e6);
    }), e5.method === "POST" && typeof n2 == "string" && t2.setRequestHeader("Content-Type", "application/x-www-form-urlencoded"), e5.timeout && (t2.timeout = e5.timeout), t2.withCredentials = true, t2.onreadystatechange = function() {
      if (t2.readyState === 4) {
        var n3, i2 = { statusCode: t2.status, text: t2.responseText };
        if (t2.status === 200)
          try {
            i2.json = JSON.parse(t2.responseText);
          } catch (e6) {
          }
        (n3 = e5.callback) === null || n3 === void 0 || n3.call(e5, i2);
      }
    }, t2.send(n2);
  };
  var nr = function(e5) {
    var t2, n2 = er(e5), i2 = new Headers();
    z(i2, function(e6, t3) {
      i2.append(t3, e6);
    }), e5.method === "POST" && typeof n2 == "string" && i2.append("Content-Type", "application/x-www-form-urlencoded");
    var r2 = e5.url, s2 = null;
    if (L) {
      var o2 = new L();
      s2 = { signal: o2.signal, timeout: setTimeout(function() {
        return o2.abort();
      }, e5.timeout) };
    }
    M(r2, { method: (e5 == null ? void 0 : e5.method) || "GET", headers: i2, keepalive: e5.method === "POST", body: n2, signal: (t2 = s2) === null || t2 === void 0 ? void 0 : t2.signal }).then(function(t3) {
      return t3.text().then(function(n3) {
        var i3, r3 = { statusCode: t3.status, text: n3 };
        if (t3.status === 200)
          try {
            r3.json = JSON.parse(n3);
          } catch (e6) {
            j.error(e6);
          }
        (i3 = e5.callback) === null || i3 === void 0 || i3.call(e5, r3);
      });
    }).catch(function(t3) {
      var n3;
      j.error(t3), (n3 = e5.callback) === null || n3 === void 0 || n3.call(e5, { statusCode: 0, text: t3 });
    }).finally(function() {
      return s2 ? clearTimeout(s2.timeout) : null;
    });
  };
  var ir = function(e5) {
    var t2 = Xi(e5.url, { beacon: "1" });
    try {
      O.sendBeacon(t2, er(e5));
    } catch (e6) {
    }
  };
  var rr = function(e5) {
    var t2;
    if (A) {
      var n2 = A.createElement("script");
      n2.type = "text/javascript", n2.async = true, n2.defer = true, n2.src = e5.url;
      var i2 = A.getElementsByTagName("script")[0];
      (t2 = i2.parentNode) === null || t2 === void 0 || t2.insertBefore(n2, i2);
    }
  };
  var sr = ["retriesPerformedSoFar"];
  var or;
  var ar = function() {
    function e5(t2) {
      var n2 = this;
      i(this, e5), o(this, "isPolling", false), o(this, "pollIntervalMs", 3e3), o(this, "queue", []), this.instance = t2, this.queue = [], this.areWeOnline = true, !w(E) && "onLine" in E.navigator && (this.areWeOnline = E.navigator.onLine, E.addEventListener("online", function() {
        n2.areWeOnline = true, n2.flush();
      }), E.addEventListener("offline", function() {
        n2.areWeOnline = false;
      }));
    }
    return s(e5, [{ key: "retriableRequest", value: function(e6) {
      var n2 = this, i2 = e6.retriesPerformedSoFar, r2 = a(e6, sr);
      R(i2) && i2 > 0 && (r2.url = Xi(r2.url, { retry_count: i2 })), this.instance._send_request(t(t({}, r2), {}, { callback: function(e7) {
        var s2;
        e7.statusCode !== 200 && (e7.statusCode < 400 || e7.statusCode >= 500) && (i2 != null ? i2 : 0) < 10 ? n2.enqueue(t({}, r2)) : (s2 = r2.callback) === null || s2 === void 0 || s2.call(r2, e7);
      } }));
    } }, { key: "enqueue", value: function(e6) {
      var t2 = e6.retriesPerformedSoFar || 0;
      e6.retriesPerformedSoFar = t2 + 1;
      var n2 = function(e7) {
        var t3 = 3e3 * Math.pow(2, e7), n3 = t3 / 2, i3 = Math.min(18e5, t3), r3 = (Math.random() - 0.5) * (i3 - n3);
        return Math.ceil(i3 + r3);
      }(t2), i2 = Date.now() + n2;
      this.queue.push({ retryAt: i2, requestOptions: e6 });
      var r2 = "Enqueued failed request for retry in ".concat(n2);
      navigator.onLine || (r2 += " (Browser is offline)"), j.warn(r2), this.isPolling || (this.isPolling = true, this.poll());
    } }, { key: "poll", value: function() {
      var e6 = this;
      this.poller && clearTimeout(this.poller), this.poller = setTimeout(function() {
        e6.areWeOnline && e6.queue.length > 0 && e6.flush(), e6.poll();
      }, this.pollIntervalMs);
    } }, { key: "flush", value: function() {
      var e6 = Date.now(), t2 = [], n2 = this.queue.filter(function(n3) {
        return n3.retryAt < e6 || (t2.push(n3), false);
      });
      if (this.queue = t2, n2.length > 0) {
        var i2, r2 = h(n2);
        try {
          for (r2.s(); !(i2 = r2.n()).done; ) {
            var s2 = i2.value.requestOptions;
            this.retriableRequest(s2);
          }
        } catch (e7) {
          r2.e(e7);
        } finally {
          r2.f();
        }
      }
    } }, { key: "unload", value: function() {
      this.poller && (clearTimeout(this.poller), this.poller = void 0);
      var e6, n2 = h(this.queue);
      try {
        for (n2.s(); !(e6 = n2.n()).done; ) {
          var i2 = e6.value.requestOptions;
          try {
            this.instance._send_request(t(t({}, i2), {}, { transport: "sendBeacon" }));
          } catch (e7) {
            j.error(e7);
          }
        }
      } catch (e7) {
        n2.e(e7);
      } finally {
        n2.f();
      }
      this.queue = [];
    } }]), e5;
  }();
  var ur = 1800;
  var lr = function() {
    function e5(t2, n2, r2, s2) {
      i(this, e5), o(this, "_sessionIdChangedHandlers", []), this.config = t2, this.persistence = n2, this._windowId = void 0, this._sessionId = void 0, this._sessionStartTimestamp = null, this._sessionActivityTimestamp = null, this._sessionIdGenerator = r2 || ft, this._windowIdGenerator = s2 || ft;
      var a2 = t2.persistence_name || t2.token, u2 = t2.session_idle_timeout_seconds || ur;
      if (R(u2) ? u2 > ur ? j.warn("session_idle_timeout_seconds cannot be  greater than 30 minutes. Using 30 minutes instead.") : u2 < 60 && j.warn("session_idle_timeout_seconds cannot be less than 60 seconds. Using 60 seconds instead.") : (j.warn("session_idle_timeout_seconds must be a number. Defaulting to 30 minutes."), u2 = ur), this._sessionTimeoutMs = 1e3 * Math.min(Math.max(u2, 60), ur), this._window_id_storage_key = "ph_" + a2 + "_window_id", this._primary_window_exists_storage_key = "ph_" + a2 + "_primary_window_exists", this._canUseSessionStorage()) {
        var l2 = Et.parse(this._window_id_storage_key), c2 = Et.parse(this._primary_window_exists_storage_key);
        l2 && !c2 ? this._windowId = l2 : Et.remove(this._window_id_storage_key), Et.set(this._primary_window_exists_storage_key, true);
      }
      this._listenToReloadWindow();
    }
    return s(e5, [{ key: "onSessionId", value: function(e6) {
      var t2 = this;
      return w(this._sessionIdChangedHandlers) && (this._sessionIdChangedHandlers = []), this._sessionIdChangedHandlers.push(e6), this._sessionId && e6(this._sessionId, this._windowId), function() {
        t2._sessionIdChangedHandlers = t2._sessionIdChangedHandlers.filter(function(t3) {
          return t3 !== e6;
        });
      };
    } }, { key: "_canUseSessionStorage", value: function() {
      return this.config.persistence !== "memory" && !this.persistence.disabled && Et.is_supported();
    } }, { key: "_setWindowId", value: function(e6) {
      e6 !== this._windowId && (this._windowId = e6, this._canUseSessionStorage() && Et.set(this._window_id_storage_key, e6));
    } }, { key: "_getWindowId", value: function() {
      return this._windowId ? this._windowId : this._canUseSessionStorage() ? Et.parse(this._window_id_storage_key) : null;
    } }, { key: "_setSessionId", value: function(e6, t2, n2) {
      e6 === this._sessionId && t2 === this._sessionActivityTimestamp && n2 === this._sessionStartTimestamp || (this._sessionStartTimestamp = n2, this._sessionActivityTimestamp = t2, this._sessionId = e6, this.persistence.register(o({}, Be, [t2, e6, n2])));
    } }, { key: "_getSessionId", value: function() {
      if (this._sessionId && this._sessionActivityTimestamp && this._sessionStartTimestamp)
        return [this._sessionActivityTimestamp, this._sessionId, this._sessionStartTimestamp];
      var e6 = this.persistence.props[Be];
      return m(e6) && e6.length === 2 && e6.push(e6[0]), e6 || [0, null, 0];
    } }, { key: "resetSessionId", value: function() {
      this._setSessionId(null, null, null);
    } }, { key: "_listenToReloadWindow", value: function() {
      var e6 = this;
      E == null || E.addEventListener("beforeunload", function() {
        e6._canUseSessionStorage() && Et.remove(e6._primary_window_exists_storage_key);
      });
    } }, { key: "checkAndGetSessionAndWindowId", value: function() {
      var e6 = arguments.length > 0 && arguments[0] !== void 0 && arguments[0], t2 = (arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : null) || new Date().getTime(), n2 = u(this._getSessionId(), 3), i2 = n2[0], r2 = n2[1], s2 = n2[2], o2 = this._getWindowId(), a2 = s2 && s2 > 0 && Math.abs(t2 - s2) > 864e5, l2 = false, c2 = !r2, d2 = !e6 && Math.abs(t2 - i2) > this._sessionTimeoutMs;
      c2 || d2 || a2 ? (r2 = this._sessionIdGenerator(), o2 = this._windowIdGenerator(), j.info("[SessionId] new session ID generated", { sessionId: r2, windowId: o2, changeReason: { noSessionId: c2, activityTimeout: d2, sessionPastMaximumLength: a2 } }), s2 = t2, l2 = true) : o2 || (o2 = this._windowIdGenerator(), l2 = true);
      var h2 = i2 === 0 || !e6 || a2 ? t2 : i2, f2 = s2 === 0 ? new Date().getTime() : s2;
      return this._setWindowId(o2), this._setSessionId(r2, h2, f2), l2 && this._sessionIdChangedHandlers.forEach(function(e7) {
        return e7(r2, o2);
      }), { sessionId: r2, windowId: o2, sessionStartTimestamp: f2 };
    } }]), e5;
  }();
  !function(e5) {
    e5.US = "us", e5.EU = "eu", e5.CUSTOM = "custom";
  }(or || (or = {}));
  var cr = function() {
    function e5(t2) {
      i(this, e5), o(this, "_regionCache", {}), this.instance = t2;
    }
    return s(e5, [{ key: "apiHost", get: function() {
      return this.instance.config.api_host.trim().replace(/\/$/, "");
    } }, { key: "uiHost", get: function() {
      var e6;
      return (e6 = this.instance.config.ui_host) === null || e6 === void 0 ? void 0 : e6.replace(/\/$/, "");
    } }, { key: "region", get: function() {
      return this._regionCache[this.apiHost] || (/https:\/\/(app|us|us-assets)(\.i)?\.posthog\.com/i.test(this.apiHost) ? this._regionCache[this.apiHost] = or.US : /https:\/\/(eu|eu-assets)(\.i)?\.posthog\.com/i.test(this.apiHost) ? this._regionCache[this.apiHost] = or.EU : this._regionCache[this.apiHost] = or.CUSTOM), this._regionCache[this.apiHost];
    } }, { key: "endpointFor", value: function(e6) {
      var t2 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : "";
      if (t2 && (t2 = t2[0] === "/" ? t2 : "/".concat(t2)), e6 === "ui")
        return (this.uiHost || this.apiHost) + t2;
      if (this.region === or.CUSTOM)
        return this.apiHost + t2;
      var n2 = "i.posthog.com" + t2;
      switch (e6) {
        case "assets":
          return "https://".concat(this.region, "-assets.").concat(n2);
        case "api":
          return "https://".concat(this.region, ".").concat(n2);
      }
    } }]), e5;
  }();
  var dr = s(function e4(t2, n2, r2, s2) {
    i(this, e4), this.name = "posthog-js", this.setupOnce = function(e5) {
      e5(function(e6) {
        var i2, o2, a2, u2, l2;
        if (e6.level !== "error" || !t2.__loaded)
          return e6;
        e6.tags || (e6.tags = {});
        var c2 = t2.requestRouter.endpointFor("ui", "/person/" + t2.get_distinct_id());
        e6.tags["PostHog Person URL"] = c2, t2.sessionRecordingStarted() && (e6.tags["PostHog Recording URL"] = t2.get_session_replay_url({ withTimestamp: true }));
        var d2 = ((i2 = e6.exception) === null || i2 === void 0 ? void 0 : i2.values) || [], h2 = { $exception_message: (o2 = d2[0]) === null || o2 === void 0 ? void 0 : o2.value, $exception_type: (a2 = d2[0]) === null || a2 === void 0 ? void 0 : a2.type, $exception_personURL: c2, $sentry_event_id: e6.event_id, $sentry_exception: e6.exception, $sentry_exception_message: (u2 = d2[0]) === null || u2 === void 0 ? void 0 : u2.value, $sentry_exception_type: (l2 = d2[0]) === null || l2 === void 0 ? void 0 : l2.type, $sentry_tags: e6.tags };
        return n2 && r2 && (h2.$sentry_url = (s2 || "https://sentry.io/organizations/") + n2 + "/issues/?project=" + r2 + "&query=" + e6.event_id), t2.capture("$exception", h2), e6;
      });
    };
  });
  var hr = function() {
    function e5(t2) {
      var n2 = this;
      i(this, e5), o(this, "_hasSeenPageView", false), o(this, "_updateScrollData", function() {
        var e6, t3, i2, r2;
        n2._pageViewData || (n2._pageViewData = n2._createPageViewData());
        var s2 = n2._pageViewData, o2 = n2._scrollY(), a2 = n2._scrollHeight(), u2 = n2._contentY(), l2 = n2._contentHeight();
        s2.lastScrollY = o2, s2.maxScrollY = Math.max(o2, (e6 = s2.maxScrollY) !== null && e6 !== void 0 ? e6 : 0), s2.maxScrollHeight = Math.max(a2, (t3 = s2.maxScrollHeight) !== null && t3 !== void 0 ? t3 : 0), s2.lastContentY = u2, s2.maxContentY = Math.max(u2, (i2 = s2.maxContentY) !== null && i2 !== void 0 ? i2 : 0), s2.maxContentHeight = Math.max(l2, (r2 = s2.maxContentHeight) !== null && r2 !== void 0 ? r2 : 0);
      }), this._instance = t2;
    }
    return s(e5, [{ key: "_createPageViewData", value: function() {
      var e6;
      return { pathname: (e6 = E == null ? void 0 : E.location.pathname) !== null && e6 !== void 0 ? e6 : "" };
    } }, { key: "doPageView", value: function() {
      var e6, n2;
      return this._hasSeenPageView ? (n2 = this._pageViewData, this._pageViewData = this._createPageViewData()) : (this._hasSeenPageView = true, n2 = void 0, this._pageViewData || (this._pageViewData = this._createPageViewData())), setTimeout(this._updateScrollData, 0), t({ $prev_pageview_pathname: (e6 = n2) === null || e6 === void 0 ? void 0 : e6.pathname }, this._calculatePrevPageScrollProperties(n2));
    } }, { key: "doPageLeave", value: function() {
      var e6 = this._pageViewData;
      return t({ $prev_pageview_pathname: e6 == null ? void 0 : e6.pathname }, this._calculatePrevPageScrollProperties(e6));
    } }, { key: "_calculatePrevPageScrollProperties", value: function(e6) {
      if (!e6 || e6.maxScrollHeight == null || e6.lastScrollY == null || e6.maxScrollY == null || e6.maxContentHeight == null || e6.lastContentY == null || e6.maxContentY == null)
        return {};
      var t2 = e6.maxScrollHeight, n2 = e6.lastScrollY, i2 = e6.maxScrollY, r2 = e6.maxContentHeight, s2 = e6.lastContentY, o2 = e6.maxContentY;
      return t2 = Math.ceil(t2), n2 = Math.ceil(n2), i2 = Math.ceil(i2), r2 = Math.ceil(r2), s2 = Math.ceil(s2), o2 = Math.ceil(o2), { $prev_pageview_last_scroll: n2, $prev_pageview_last_scroll_percentage: t2 <= 1 ? 1 : fr(n2 / t2, 0, 1), $prev_pageview_max_scroll: i2, $prev_pageview_max_scroll_percentage: t2 <= 1 ? 1 : fr(i2 / t2, 0, 1), $prev_pageview_last_content: s2, $prev_pageview_last_content_percentage: r2 <= 1 ? 1 : fr(s2 / r2, 0, 1), $prev_pageview_max_content: o2, $prev_pageview_max_content_percentage: r2 <= 1 ? 1 : fr(o2 / r2, 0, 1) };
    } }, { key: "startMeasuringScrollPosition", value: function() {
      E == null || E.addEventListener("scroll", this._updateScrollData, true), E == null || E.addEventListener("scrollend", this._updateScrollData, true), E == null || E.addEventListener("resize", this._updateScrollData);
    } }, { key: "stopMeasuringScrollPosition", value: function() {
      E == null || E.removeEventListener("scroll", this._updateScrollData), E == null || E.removeEventListener("scrollend", this._updateScrollData), E == null || E.removeEventListener("resize", this._updateScrollData);
    } }, { key: "_scrollElement", value: function() {
      if (!this._instance.config.scroll_root_selector)
        return E == null ? void 0 : E.document.documentElement;
      var e6, t2 = h(m(this._instance.config.scroll_root_selector) ? this._instance.config.scroll_root_selector : [this._instance.config.scroll_root_selector]);
      try {
        for (t2.s(); !(e6 = t2.n()).done; ) {
          var n2 = e6.value, i2 = E == null ? void 0 : E.document.querySelector(n2);
          if (i2)
            return i2;
        }
      } catch (e7) {
        t2.e(e7);
      } finally {
        t2.f();
      }
    } }, { key: "_scrollHeight", value: function() {
      var e6 = this._scrollElement();
      return e6 ? Math.max(0, e6.scrollHeight - e6.clientHeight) : 0;
    } }, { key: "_scrollY", value: function() {
      if (this._instance.config.scroll_root_selector) {
        var e6 = this._scrollElement();
        return e6 && e6.scrollTop || 0;
      }
      return E && (E.scrollY || E.pageYOffset || E.document.documentElement.scrollTop) || 0;
    } }, { key: "_contentHeight", value: function() {
      var e6 = this._scrollElement();
      return (e6 == null ? void 0 : e6.scrollHeight) || 0;
    } }, { key: "_contentY", value: function() {
      var e6 = this._scrollElement(), t2 = (e6 == null ? void 0 : e6.clientHeight) || 0;
      return this._scrollY() + t2;
    } }]), e5;
  }();
  function fr(e5, t2, n2) {
    return Math.max(t2, Math.min(e5, n2));
  }
  var pr = { icontains: function(e5) {
    return !!E && E.location.href.toLowerCase().indexOf(e5.toLowerCase()) > -1;
  }, regex: function(e5) {
    return !!E && $t(E.location.href, e5);
  }, exact: function(e5) {
    return (E == null ? void 0 : E.location.href) === e5;
  } };
  var gr = function() {
    function e5(t2) {
      i(this, e5), this.instance = t2;
    }
    return s(e5, [{ key: "getSurveys", value: function(e6) {
      var t2 = this, n2 = arguments.length > 1 && arguments[1] !== void 0 && arguments[1], i2 = this.instance.get_property(ze);
      if (i2 && !n2)
        return e6(i2);
      this.instance._send_request({ url: this.instance.requestRouter.endpointFor("api", "/api/surveys/?token=".concat(this.instance.config.token)), method: "GET", transport: "XHR", callback: function(n3) {
        var i3;
        if (n3.statusCode !== 200 || !n3.json)
          return e6([]);
        var r2 = n3.json.surveys || [];
        return (i3 = t2.instance.persistence) === null || i3 === void 0 || i3.register(o({}, ze, r2)), e6(r2);
      } });
    } }, { key: "getActiveMatchingSurveys", value: function(e6) {
      var t2 = this, n2 = arguments.length > 1 && arguments[1] !== void 0 && arguments[1];
      this.getSurveys(function(n3) {
        var i2 = n3.filter(function(e7) {
          return !(!e7.start_date || e7.end_date);
        }).filter(function(e7) {
          var t3, n4, i3, r2;
          if (!e7.conditions)
            return true;
          var s2 = (t3 = e7.conditions) === null || t3 === void 0 || !t3.url || pr[(n4 = (i3 = e7.conditions) === null || i3 === void 0 ? void 0 : i3.urlMatchType) !== null && n4 !== void 0 ? n4 : "icontains"](e7.conditions.url), o2 = (r2 = e7.conditions) === null || r2 === void 0 || !r2.selector || (A == null ? void 0 : A.querySelector(e7.conditions.selector));
          return s2 && o2;
        }).filter(function(e7) {
          if (!e7.linked_flag_key && !e7.targeting_flag_key)
            return true;
          var n4 = !e7.linked_flag_key || t2.instance.featureFlags.isFeatureEnabled(e7.linked_flag_key), i3 = !e7.targeting_flag_key || t2.instance.featureFlags.isFeatureEnabled(e7.targeting_flag_key);
          return n4 && i3;
        });
        return e6(i2);
      }, n2);
    } }]), e5;
  }();
  var vr = function() {
    function e5() {
      var t2 = this;
      i(this, e5), o(this, "limits", {}), o(this, "checkForLimiting", function(e6) {
        var n2 = e6.text;
        if (n2 && n2.length)
          try {
            (JSON.parse(n2).quota_limited || []).forEach(function(e7) {
              j.info("[RateLimiter] ".concat(e7 || "events", " is quota limited.")), t2.limits[e7] = new Date().getTime() + 6e4;
            });
          } catch (e7) {
            return void j.warn('[RateLimiter] could not rate limit - continuing. Error: "'.concat(e7 == null ? void 0 : e7.message, '"'), { text: n2 });
          }
      });
    }
    return s(e5, [{ key: "isRateLimited", value: function(e6) {
      var t2 = this.limits[e6 || "events"] || false;
      return t2 !== false && new Date().getTime() < t2;
    } }]), e5;
  }();
  var _r = function() {
    return t({ initialPathName: (q == null ? void 0 : q.pathname) || "", referringDomain: Tn.referringDomain() }, Tn.campaignParams());
  };
  var mr = function() {
    function e5(t2, n2, r2) {
      var s2 = this;
      i(this, e5), o(this, "_onSessionIdCallback", function(e6) {
        var t3 = s2._getStoredProps();
        if (!t3 || t3.sessionId !== e6) {
          var n3 = { sessionId: e6, props: s2._sessionSourceParamGenerator() };
          s2._persistence.register(o({}, Je, n3));
        }
      }), this._sessionIdManager = t2, this._persistence = n2, this._sessionSourceParamGenerator = r2 || _r, this._sessionIdManager.onSessionId(this._onSessionIdCallback);
    }
    return s(e5, [{ key: "_getStoredProps", value: function() {
      return this._persistence.props[Je];
    } }, { key: "getSessionProps", value: function() {
      var e6, t2 = (e6 = this._getStoredProps()) === null || e6 === void 0 ? void 0 : e6.props;
      return t2 ? { $client_session_initial_referring_host: t2.referringDomain, $client_session_initial_pathname: t2.initialPathName, $client_session_initial_utm_source: t2.utm_source, $client_session_initial_utm_campaign: t2.utm_campaign, $client_session_initial_utm_medium: t2.utm_medium, $client_session_initial_utm_content: t2.utm_content, $client_session_initial_utm_term: t2.utm_term } : {};
    } }]), e5;
  }();
  var yr = ["ahrefsbot", "ahrefssiteaudit", "applebot", "baiduspider", "bingbot", "bingpreview", "bot.htm", "bot.php", "crawler", "duckduckbot", "facebookexternal", "facebookcatalog", "gptbot", "http://yandex.com/bots", "hubspot", "ia_archiver", "linkedinbot", "mj12bot", "msnbot", "nessus", "petalbot", "pinterest", "prerender", "rogerbot", "screaming frog", "semrushbot", "sitebulb", "slurp", "turnitin", "twitterbot", "vercelbot", "yahoo! slurp", "yandexbot", "adsbot-google", "apis-google", "duplexweb-google", "feedfetcher-google", "google favicon", "google web preview", "google-read-aloud", "googlebot", "googleweblight", "mediapartners-google", "storebot-google"];
  var br = function(e5, t2) {
    if (!e5)
      return false;
    var n2 = e5.toLowerCase();
    return yr.concat(t2 || []).some(function(e6) {
      var t3 = e6.toLowerCase();
      return n2.includes ? n2.includes(t3) : n2.indexOf(t3) !== -1;
    });
  };
  var wr = {};
  var kr = function() {
  };
  var Sr = "posthog";
  var Fr = !Ki && (N == null ? void 0 : N.indexOf("MSIE")) === -1 && (N == null ? void 0 : N.indexOf("Mozilla")) === -1;
  var Rr = function() {
    var e5, t2, n2;
    return { api_host: "https://app.posthog.com", api_transport: "XHR", ui_host: null, token: "", autocapture: true, rageclick: true, cross_subdomain_cookie: (t2 = A == null ? void 0 : A.location, n2 = t2 == null ? void 0 : t2.hostname, !!k(n2) && n2.split(".").slice(-2).join(".") !== "herokuapp.com"), persistence: "localStorage+cookie", persistence_name: "", cookie_name: "", loaded: kr, store_google: true, custom_campaign_params: [], custom_blocked_useragents: [], save_referrer: true, capture_pageview: true, capture_pageleave: true, debug: false, verbose: false, cookie_expiration: 365, upgrade: false, disable_session_recording: false, disable_persistence: false, disable_cookie: false, enable_recording_console_log: void 0, secure_cookie: (E == null || (e5 = E.location) === null || e5 === void 0 ? void 0 : e5.protocol) === "https:", ip: true, opt_out_capturing_by_default: false, opt_out_persistence_by_default: false, opt_out_useragent_filter: false, opt_out_capturing_persistence_type: "localStorage", opt_out_capturing_cookie_prefix: null, opt_in_site_apps: false, property_blacklist: [], property_denylist: [], respect_dnt: false, sanitize_properties: null, request_headers: {}, inapp_protocol: "//", inapp_link_new_window: false, request_batching: true, properties_string_max_length: 65535, session_recording: {}, mask_all_element_attributes: false, mask_all_text: false, advanced_disable_decide: false, advanced_disable_feature_flags: false, advanced_disable_feature_flags_on_first_load: false, advanced_disable_toolbar_metrics: false, feature_flag_request_timeout_ms: 3e3, on_request_error: function(e6) {
      var t3 = "Bad HTTP status: " + e6.statusCode + " " + e6.text;
      j.error(t3);
    }, get_device_id: function(e6) {
      return e6;
    }, _onCapture: kr, capture_performance: void 0, name: "posthog", bootstrap: {}, disable_compression: false, session_idle_timeout_seconds: 1800 };
  };
  var xr = function() {
    function e5() {
      i(this, e5), o(this, "__forceAllowLocalhost", false);
    }
    return s(e5, [{ key: "_forceAllowLocalhost", get: function() {
      return this.__forceAllowLocalhost;
    }, set: function(e6) {
      j.error("WebPerformanceObserver is deprecated and has no impact on network capture. Use `_forceAllowLocalhostNetworkCapture` on `posthog.sessionRecording`"), this.__forceAllowLocalhost = e6;
    } }]), e5;
  }();
  var Pr = function() {
    function e5() {
      var t2 = this;
      i(this, e5), o(this, "webPerformance", new xr()), o(this, "compression", et.Base64), this.config = Rr(), this.decideEndpointWasHit = false, this.SentryIntegration = dr, this.segmentIntegration = function() {
        return function(e6) {
          Promise && Promise.resolve || j.warn("This browser does not have Promise support, and can not use the segment integration");
          var t3 = function(t4, n2) {
            t4.event.userId || t4.event.anonymousId === e6.get_distinct_id() || e6.reset(), t4.event.userId && t4.event.userId !== e6.get_distinct_id() && (e6.register({ distinct_id: t4.event.userId }), e6.reloadFeatureFlags());
            var i2 = e6._calculate_event_properties(n2, t4.event.properties);
            return t4.event.properties = Object.assign({}, i2, t4.event.properties), t4;
          };
          return { name: "PostHog JS", type: "enrichment", version: "1.0.0", isLoaded: function() {
            return true;
          }, load: function() {
            return Promise.resolve();
          }, track: function(e7) {
            return t3(e7, e7.event.event);
          }, page: function(e7) {
            return t3(e7, "$pageview");
          }, identify: function(e7) {
            return t3(e7, "$identify");
          }, screen: function(e7) {
            return t3(e7, "$screen");
          } };
        }(t2);
      }, this.__captureHooks = [], this.__request_queue = [], this.__loaded = false, this.__loaded_recorder_version = void 0, this.__autocapture = void 0, this.analyticsDefaultEndpoint = "/e/", this.elementsChainAsString = false, this.featureFlags = new ot(this), this.toolbar = new pi(this), this.pageViewManager = new hr(this), this.surveys = new gr(this), this.rateLimiter = new vr(), this.requestRouter = new cr(this), this.people = { set: function(e6, n2, i2) {
        var r2 = k(e6) ? o({}, e6, n2) : e6;
        t2.setPersonProperties(r2), i2 == null || i2({});
      }, set_once: function(e6, n2, i2) {
        var r2 = k(e6) ? o({}, e6, n2) : e6;
        t2.setPersonProperties(void 0, r2), i2 == null || i2({});
      } };
    }
    return s(e5, [{ key: "init", value: function(t2, n2, i2) {
      if (i2 && i2 !== Sr) {
        var r2, s2 = (r2 = wr[i2]) !== null && r2 !== void 0 ? r2 : new e5();
        return s2._init(t2, n2, i2), wr[i2] = s2, wr[Sr][i2] = s2, s2;
      }
      return this._init(t2, n2, i2);
    } }, { key: "_init", value: function(e6) {
      var n2, i2, r2, s2 = this, o2 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {}, a2 = arguments.length > 2 ? arguments[2] : void 0;
      if (w(e6) || function(e7) {
        return k(e7) && e7.trim().length === 0;
      }(e6))
        j.critical("PostHog was initialized without a token. This likely indicates a misconfiguration. Please check the first argument passed to posthog.init()");
      else {
        if (!this.__loaded) {
          var u2;
          if (this.__loaded = true, this.config = {}, this._triggered_notifs = [], o2.request_headers = o2.request_headers || o2.xhr_headers, this.set_config(G({}, Rr(), o2, { name: a2, token: e6 })), E != null && (n2 = E.rrweb) !== null && n2 !== void 0 && n2.record || E != null && E.rrwebRecord)
            this.__loaded_recorder_version = E == null || (u2 = E.rrweb) === null || u2 === void 0 ? void 0 : u2.version;
          if (this.persistence = new An(this.config), this.sessionPersistence = this.config.persistence === "sessionStorage" ? this.persistence : new An(t(t({}, this.config), {}, { persistence: "sessionStorage" })), this._requestQueue = new gi(function(e7) {
            return s2._send_request(e7);
          }), this._retryQueue = new ar(this), this.__captureHooks = [], this.__request_queue = [], this.sessionManager = new lr(this.config, this.persistence), this.sessionPropsManager = new mr(this.sessionManager, this.persistence), this.sessionRecording = new ci(this), this.sessionRecording.startRecordingIfEnabled(), this.config.disable_scroll_properties || this.pageViewManager.startMeasuringScrollPosition(), this.__autocapture = this.config.autocapture, tt._setIsAutocaptureEnabled(this), tt._isAutocaptureEnabled) {
            this.__autocapture = this.config.autocapture;
            tt.enabledForProject(this.config.token, 100, 100) ? tt.isBrowserSupported() ? tt.init(this) : (this.__autocapture = false, j.info("Disabling Automatic Event Collection because this browser is not supported")) : (this.__autocapture = false, j.info("Not in active bucket: disabling Automatic Event Collection."));
          }
          if (f.DEBUG = f.DEBUG || this.config.debug, this._gdpr_init(), o2.segment && (this.config.get_device_id = function() {
            return o2.segment.user().anonymousId();
          }, o2.segment.user().id() && (this.register({ distinct_id: o2.segment.user().id() }), this.persistence.set_user_state("identified"))), ((i2 = o2.bootstrap) === null || i2 === void 0 ? void 0 : i2.distinctID) !== void 0) {
            var l2, c2, d2 = this.config.get_device_id(ft()), h2 = (l2 = o2.bootstrap) !== null && l2 !== void 0 && l2.isIdentifiedID ? d2 : o2.bootstrap.distinctID;
            this.persistence.set_user_state((c2 = o2.bootstrap) !== null && c2 !== void 0 && c2.isIdentifiedID ? "identified" : "anonymous"), this.register({ distinct_id: o2.bootstrap.distinctID, $device_id: h2 });
          }
          if (this._hasBootstrappedFeatureFlags()) {
            var p2, g2, v2 = Object.keys(((p2 = o2.bootstrap) === null || p2 === void 0 ? void 0 : p2.featureFlags) || {}).filter(function(e7) {
              var t2, n3;
              return !((t2 = o2.bootstrap) === null || t2 === void 0 || (n3 = t2.featureFlags) === null || n3 === void 0 || !n3[e7]);
            }).reduce(function(e7, t2) {
              var n3, i3;
              return e7[t2] = ((n3 = o2.bootstrap) === null || n3 === void 0 || (i3 = n3.featureFlags) === null || i3 === void 0 ? void 0 : i3[t2]) || false, e7;
            }, {}), _2 = Object.keys(((g2 = o2.bootstrap) === null || g2 === void 0 ? void 0 : g2.featureFlagPayloads) || {}).filter(function(e7) {
              return v2[e7];
            }).reduce(function(e7, t2) {
              var n3, i3, r3, s3;
              (n3 = o2.bootstrap) !== null && n3 !== void 0 && (i3 = n3.featureFlagPayloads) !== null && i3 !== void 0 && i3[t2] && (e7[t2] = (r3 = o2.bootstrap) === null || r3 === void 0 || (s3 = r3.featureFlagPayloads) === null || s3 === void 0 ? void 0 : s3[t2]);
              return e7;
            }, {});
            this.featureFlags.receivedFeatureFlags({ featureFlags: v2, featureFlagPayloads: _2 });
          }
          if (!this.get_distinct_id()) {
            var m2 = this.config.get_device_id(ft());
            this.register_once({ distinct_id: m2, $device_id: m2 }, ""), this.persistence.set_user_state("anonymous");
          }
          return E == null || (r2 = E.addEventListener) === null || r2 === void 0 || r2.call(E, "onpagehide" in self ? "pagehide" : "unload", this._handle_unload.bind(this)), this.toolbar.maybeLoadToolbar(), o2.segment ? o2.segment.register(this.segmentIntegration()).then(function() {
            s2._loaded();
          }) : this._loaded(), this;
        }
        j.warn("You have already initialized PostHog! Re-initialising is a no-op");
      }
    } }, { key: "_afterDecideResponse", value: function(e6) {
      var t2;
      this.compression = void 0, e6.supportedCompression && !this.config.disable_compression && (this.compression = Q(e6.supportedCompression, et.GZipJS) ? et.GZipJS : Q(e6.supportedCompression, et.Base64) ? et.Base64 : void 0), (t2 = e6.analytics) !== null && t2 !== void 0 && t2.endpoint && (this.analyticsDefaultEndpoint = e6.analytics.endpoint), e6.elementsChainAsString && (this.elementsChainAsString = e6.elementsChainAsString);
    } }, { key: "_loaded", value: function() {
      var e6 = this, t2 = this.config.advanced_disable_decide;
      t2 || this.featureFlags.setReloadingPaused(true);
      try {
        this.config.loaded(this);
      } catch (e7) {
        j.critical("`loaded` function failed", e7);
      }
      this._start_queue_if_opted_in(), this.config.capture_pageview && setTimeout(function() {
        A && e6.capture("$pageview", { title: A.title }, { send_instantly: true });
      }, 1), t2 || (new di(this).call(), this.featureFlags.resetRequestQueue());
    } }, { key: "_start_queue_if_opted_in", value: function() {
      var e6;
      this.has_opted_out_capturing() || this.config.request_batching && ((e6 = this._requestQueue) === null || e6 === void 0 || e6.enable());
    } }, { key: "_dom_loaded", value: function() {
      var e6 = this;
      this.has_opted_out_capturing() || W(this.__request_queue, function(t2) {
        return e6._send_retriable_request(t2);
      }), this.__request_queue = [], this._start_queue_if_opted_in();
    } }, { key: "_handle_unload", value: function() {
      var e6, t2;
      this.config.request_batching ? (this.config.capture_pageview && this.config.capture_pageleave && this.capture("$pageleave"), (e6 = this._requestQueue) === null || e6 === void 0 || e6.unload(), (t2 = this._retryQueue) === null || t2 === void 0 || t2.unload()) : this.config.capture_pageview && this.config.capture_pageleave && this.capture("$pageleave", null, { transport: "sendBeacon" });
    } }, { key: "_send_request", value: function(e6) {
      var n2 = this;
      this.__loaded && (Fr ? this.__request_queue.push(e6) : this.rateLimiter.isRateLimited(e6.batchKey) || (e6.transport = e6.transport || this.config.api_transport, e6.url = Xi(e6.url, { ip: this.config.ip ? 1 : 0 }), e6.headers = this.config.request_headers, e6.compression = e6.compression === "best-available" ? this.compression : e6.compression, function(e7) {
        var n3 = t({}, e7);
        n3.timeout = n3.timeout || 6e4, n3.url = Xi(n3.url, { _: new Date().getTime().toString(), ver: f.LIB_VERSION, compression: n3.compression }), n3.transport === "sendBeacon" && O != null && O.sendBeacon ? ir(n3) : n3.transport === "fetch" && M ? nr(n3) : D || !A ? tr(n3) : rr(n3);
      }(t(t({}, e6), {}, { callback: function(t2) {
        var i2, r2, s2;
        (n2.rateLimiter.checkForLimiting(t2), t2.statusCode >= 400) && ((r2 = (s2 = n2.config).on_request_error) === null || r2 === void 0 || r2.call(s2, t2));
        (i2 = e6.callback) === null || i2 === void 0 || i2.call(e6, t2);
      } }))));
    } }, { key: "_send_retriable_request", value: function(e6) {
      this._retryQueue ? this._retryQueue.retriableRequest(e6) : this._send_request(e6);
    } }, { key: "_execute_array", value: function(e6) {
      var t2, n2 = this, i2 = [], r2 = [], s2 = [];
      W(e6, function(e7) {
        e7 && (t2 = e7[0], m(t2) ? s2.push(e7) : y(e7) ? e7.call(n2) : m(e7) && t2 === "alias" ? i2.push(e7) : m(e7) && t2.indexOf("capture") !== -1 && y(n2[t2]) ? s2.push(e7) : r2.push(e7));
      });
      var o2 = function(e7, t3) {
        W(e7, function(e8) {
          if (m(e8[0])) {
            var n3 = t3;
            z(e8, function(e9) {
              n3 = n3[e9[0]].apply(n3, e9.slice(1));
            });
          } else
            this[e8[0]].apply(this, e8.slice(1));
        }, t3);
      };
      o2(i2, this), o2(r2, this), o2(s2, this);
    } }, { key: "_hasBootstrappedFeatureFlags", value: function() {
      var e6, t2;
      return ((e6 = this.config.bootstrap) === null || e6 === void 0 ? void 0 : e6.featureFlags) && Object.keys((t2 = this.config.bootstrap) === null || t2 === void 0 ? void 0 : t2.featureFlags).length > 0 || false;
    } }, { key: "push", value: function(e6) {
      this._execute_array([e6]);
    } }, { key: "capture", value: function(e6, n2, i2) {
      var r2;
      if (!this.__loaded || !this.sessionPersistence || !this._requestQueue)
        return j.uninitializedWarning("posthog.capture");
      if (!ii(this))
        if (!w(e6) && k(e6)) {
          if (!N || this.config.opt_out_useragent_filter || !br(N, this.config.custom_blocked_useragents)) {
            this.sessionPersistence.update_search_keyword(), this.config.store_google && this.sessionPersistence.update_campaign_params(), this.config.save_referrer && this.sessionPersistence.update_referrer_info();
            var s2 = { uuid: ft(), event: e6, properties: this._calculate_event_properties(e6, n2 || {}) };
            e6 === "$identify" && (s2.$set = i2 == null ? void 0 : i2.$set, s2.$set_once = i2 == null ? void 0 : i2.$set_once), (s2 = ee(s2, i2 != null && i2._noTruncate ? null : this.config.properties_string_max_length)).timestamp = (i2 == null ? void 0 : i2.timestamp) || new Date(), w(i2 == null ? void 0 : i2.timestamp) || (s2.properties.$event_time_override_provided = true, s2.properties.$event_time_override_system_time = new Date());
            var o2 = t(t({}, s2.properties.$set), s2.$set);
            (function(e7) {
              if (b(e7)) {
                for (var t2 in e7)
                  if (v.call(e7, t2))
                    return false;
                return true;
              }
              return false;
            })(o2) || this.setPersonPropertiesForFlags(o2), j.info("send", s2);
            var a2 = { method: "POST", url: (r2 = i2 == null ? void 0 : i2._url) !== null && r2 !== void 0 ? r2 : this.requestRouter.endpointFor("api", this.analyticsDefaultEndpoint), data: s2, compression: "best-available", batchKey: i2 == null ? void 0 : i2._batchKey };
            return !this.config.request_batching || i2 && (i2 == null || !i2._batchKey) || i2 != null && i2.send_instantly ? this._send_retriable_request(a2) : this._requestQueue.enqueue(a2), this._invokeCaptureHooks(e6, s2), s2;
          }
        } else
          j.error("No event name provided to posthog.capture");
    } }, { key: "_addCaptureHook", value: function(e6) {
      this.__captureHooks.push(e6);
    } }, { key: "_invokeCaptureHooks", value: function(e6, t2) {
      this.config._onCapture(e6, t2), z(this.__captureHooks, function(t3) {
        return t3(e6);
      });
    } }, { key: "_calculate_event_properties", value: function(e6, n2) {
      if (!this.persistence || !this.sessionPersistence)
        return n2;
      var i2 = this.persistence.remove_event_timer(e6), r2 = t({}, n2);
      if (r2.token = this.config.token, e6 === "$snapshot") {
        var s2 = t(t({}, this.persistence.properties()), this.sessionPersistence.properties());
        return r2.distinct_id = s2.distinct_id, r2;
      }
      var o2 = Tn.properties();
      if (this.sessionManager) {
        var a2 = this.sessionManager.checkAndGetSessionAndWindowId(), u2 = a2.sessionId, c2 = a2.windowId;
        r2.$session_id = u2, r2.$window_id = c2;
      }
      if (this.sessionPropsManager && this.config.__preview_send_client_session_params && (e6 === "$pageview" || e6 === "$pageleave" || e6 === "$autocapture")) {
        var d2 = this.sessionPropsManager.getSessionProps();
        r2 = G(r2, d2);
      }
      if (!this.config.disable_scroll_properties) {
        var h2 = {};
        e6 === "$pageview" ? h2 = this.pageViewManager.doPageView() : e6 === "$pageleave" && (h2 = this.pageViewManager.doPageLeave()), r2 = G(r2, h2);
      }
      if (e6 === "$pageview" && A && (r2.title = A.title), e6 === "$performance_event") {
        var f2 = this.persistence.properties();
        return r2.distinct_id = f2.distinct_id, r2.$current_url = o2.$current_url, r2;
      }
      if (!w(i2)) {
        var p2 = new Date().getTime() - i2;
        r2.$duration = parseFloat((p2 / 1e3).toFixed(3));
      }
      (N && this.config.opt_out_useragent_filter && (r2.$browser_type = br(N, this.config.custom_blocked_useragents) ? "bot" : "browser"), r2 = G({}, Tn.properties(), this.persistence.properties(), this.sessionPersistence.properties(), r2), m(this.config.property_denylist) && m(this.config.property_blacklist)) ? z([].concat(l(this.config.property_blacklist), l(this.config.property_denylist)), function(e7) {
        delete r2[e7];
      }) : j.error("Invalid value for property_denylist config: " + this.config.property_denylist + " or property_blacklist config: " + this.config.property_blacklist);
      var g2 = this.config.sanitize_properties;
      return g2 && (r2 = g2(r2, e6)), r2;
    } }, { key: "register", value: function(e6, t2) {
      var n2;
      (n2 = this.persistence) === null || n2 === void 0 || n2.register(e6, t2);
    } }, { key: "register_once", value: function(e6, t2, n2) {
      var i2;
      (i2 = this.persistence) === null || i2 === void 0 || i2.register_once(e6, t2, n2);
    } }, { key: "register_for_session", value: function(e6) {
      var t2;
      (t2 = this.sessionPersistence) === null || t2 === void 0 || t2.register(e6);
    } }, { key: "unregister", value: function(e6) {
      var t2;
      (t2 = this.persistence) === null || t2 === void 0 || t2.unregister(e6);
    } }, { key: "unregister_for_session", value: function(e6) {
      var t2;
      (t2 = this.sessionPersistence) === null || t2 === void 0 || t2.unregister(e6);
    } }, { key: "_register_single", value: function(e6, t2) {
      this.register(o({}, e6, t2));
    } }, { key: "getFeatureFlag", value: function(e6, t2) {
      return this.featureFlags.getFeatureFlag(e6, t2);
    } }, { key: "getFeatureFlagPayload", value: function(e6) {
      var t2 = this.featureFlags.getFeatureFlagPayload(e6);
      try {
        return JSON.parse(t2);
      } catch (e7) {
        return t2;
      }
    } }, { key: "isFeatureEnabled", value: function(e6, t2) {
      return this.featureFlags.isFeatureEnabled(e6, t2);
    } }, { key: "reloadFeatureFlags", value: function() {
      this.featureFlags.reloadFeatureFlags();
    } }, { key: "updateEarlyAccessFeatureEnrollment", value: function(e6, t2) {
      this.featureFlags.updateEarlyAccessFeatureEnrollment(e6, t2);
    } }, { key: "getEarlyAccessFeatures", value: function(e6) {
      var t2 = arguments.length > 1 && arguments[1] !== void 0 && arguments[1];
      return this.featureFlags.getEarlyAccessFeatures(e6, t2);
    } }, { key: "onFeatureFlags", value: function(e6) {
      return this.featureFlags.onFeatureFlags(e6);
    } }, { key: "onSessionId", value: function(e6) {
      var t2, n2;
      return (t2 = (n2 = this.sessionManager) === null || n2 === void 0 ? void 0 : n2.onSessionId(e6)) !== null && t2 !== void 0 ? t2 : function() {
      };
    } }, { key: "getSurveys", value: function(e6) {
      var t2 = arguments.length > 1 && arguments[1] !== void 0 && arguments[1];
      this.surveys.getSurveys(e6, t2);
    } }, { key: "getActiveMatchingSurveys", value: function(e6) {
      var t2 = arguments.length > 1 && arguments[1] !== void 0 && arguments[1];
      this.surveys.getActiveMatchingSurveys(e6, t2);
    } }, { key: "identify", value: function(e6, t2, n2) {
      if (!this.__loaded || !this.persistence)
        return j.uninitializedWarning("posthog.identify");
      if (R(e6) && (e6 = e6.toString(), j.warn("The first argument to posthog.identify was a number, but it should be a string. It has been converted to a string.")), e6)
        if (["distinct_id", "distinctid"].includes(e6.toLowerCase()))
          j.critical('The string "'.concat(e6, '" was set in posthog.identify which indicates an error. This ID should be unique to the user and not a hardcoded string.'));
        else {
          var i2 = this.get_distinct_id();
          if (this.register({ $user_id: e6 }), !this.get_property("$device_id")) {
            var r2 = i2;
            this.register_once({ $had_persisted_distinct_id: true, $device_id: r2 }, "");
          }
          e6 !== i2 && e6 !== this.get_property(Te) && (this.unregister(Te), this.register({ distinct_id: e6 }));
          var s2 = this.persistence.get_user_state() === "anonymous";
          e6 !== i2 && s2 ? (this.persistence.set_user_state("identified"), this.setPersonPropertiesForFlags(t2 || {}, false), this.capture("$identify", { distinct_id: e6, $anon_distinct_id: i2 }, { $set: t2 || {}, $set_once: n2 || {} }), this.featureFlags.setAnonymousDistinctId(i2)) : (t2 || n2) && this.setPersonProperties(t2, n2), e6 !== i2 && (this.reloadFeatureFlags(), this.unregister(Ge));
        }
      else
        j.error("Unique user id has not been set in posthog.identify");
    } }, { key: "setPersonProperties", value: function(e6, t2) {
      (e6 || t2) && (this.setPersonPropertiesForFlags(e6 || {}), this.capture("$set", { $set: e6 || {}, $set_once: t2 || {} }));
    } }, { key: "group", value: function(e6, n2, i2) {
      if (e6 && n2) {
        var r2 = this.getGroups();
        r2[e6] !== n2 && this.resetGroupPropertiesForFlags(e6), this.register({ $groups: t(t({}, r2), {}, o({}, e6, n2)) }), i2 && (this.capture("$groupidentify", { $group_type: e6, $group_key: n2, $group_set: i2 }), this.setGroupPropertiesForFlags(o({}, e6, i2))), r2[e6] === n2 || i2 || this.reloadFeatureFlags();
      } else
        j.error("posthog.group requires a group type and group key");
    } }, { key: "resetGroups", value: function() {
      this.register({ $groups: {} }), this.resetGroupPropertiesForFlags(), this.reloadFeatureFlags();
    } }, { key: "setPersonPropertiesForFlags", value: function(e6) {
      var t2 = !(arguments.length > 1 && arguments[1] !== void 0) || arguments[1];
      this.featureFlags.setPersonPropertiesForFlags(e6, t2);
    } }, { key: "resetPersonPropertiesForFlags", value: function() {
      this.featureFlags.resetPersonPropertiesForFlags();
    } }, { key: "setGroupPropertiesForFlags", value: function(e6) {
      var t2 = !(arguments.length > 1 && arguments[1] !== void 0) || arguments[1];
      this.featureFlags.setGroupPropertiesForFlags(e6, t2);
    } }, { key: "resetGroupPropertiesForFlags", value: function(e6) {
      this.featureFlags.resetGroupPropertiesForFlags(e6);
    } }, { key: "reset", value: function(e6) {
      var t2, n2, i2, r2;
      if (!this.__loaded)
        return j.uninitializedWarning("posthog.reset");
      var s2 = this.get_property("$device_id");
      (t2 = this.persistence) === null || t2 === void 0 || t2.clear(), (n2 = this.sessionPersistence) === null || n2 === void 0 || n2.clear(), (i2 = this.persistence) === null || i2 === void 0 || i2.set_user_state("anonymous"), (r2 = this.sessionManager) === null || r2 === void 0 || r2.resetSessionId();
      var o2 = this.config.get_device_id(ft());
      this.register_once({ distinct_id: o2, $device_id: e6 ? o2 : s2 }, "");
    } }, { key: "get_distinct_id", value: function() {
      return this.get_property("distinct_id");
    } }, { key: "getGroups", value: function() {
      return this.get_property("$groups") || {};
    } }, { key: "get_session_id", value: function() {
      var e6, t2;
      return (e6 = (t2 = this.sessionManager) === null || t2 === void 0 ? void 0 : t2.checkAndGetSessionAndWindowId(true).sessionId) !== null && e6 !== void 0 ? e6 : "";
    } }, { key: "get_session_replay_url", value: function(e6) {
      if (!this.sessionManager)
        return "";
      var t2 = this.sessionManager.checkAndGetSessionAndWindowId(true), n2 = t2.sessionId, i2 = t2.sessionStartTimestamp, r2 = this.requestRouter.endpointFor("ui", "/replay/" + n2);
      if (e6 != null && e6.withTimestamp && i2) {
        var s2, o2 = (s2 = e6.timestampLookBack) !== null && s2 !== void 0 ? s2 : 10;
        if (!i2)
          return r2;
        var a2 = Math.max(Math.floor((new Date().getTime() - i2) / 1e3) - o2, 0);
        r2 += "?t=".concat(a2);
      }
      return r2;
    } }, { key: "alias", value: function(e6, t2) {
      return e6 === this.get_property($e) ? (j.critical("Attempting to create alias for existing People user - aborting."), -2) : (w(t2) && (t2 = this.get_distinct_id()), e6 !== t2 ? (this._register_single(Te, e6), this.capture("$create_alias", { alias: e6, distinct_id: t2 })) : (j.warn("alias matches current distinct_id - skipping api call."), this.identify(e6), -1));
    } }, { key: "set_config", value: function(e6) {
      var n2, i2 = t({}, this.config);
      if (b(e6) && (G(this.config, e6), this.config.persistence_name || (this.config.persistence_name = this.config.cookie_name), this.config.disable_persistence || (this.config.disable_persistence = this.config.disable_cookie), (n2 = this.persistence) === null || n2 === void 0 || n2.update_config(this.config, i2), this.sessionPersistence = this.config.persistence === "sessionStorage" ? this.persistence : new An(t(t({}, this.config), {}, { persistence: "sessionStorage" })), kt.is_supported() && kt.get("ph_debug") === "true" && (this.config.debug = true), this.config.debug && (f.DEBUG = true), this.sessionRecording && !w(e6.disable_session_recording))) {
        var r2 = i2.disable_session_recording !== e6.disable_session_recording, s2 = !ii(this) && !e6.disable_session_recording && !this.sessionRecording.started;
        (r2 || s2) && (e6.disable_session_recording ? this.sessionRecording.stopRecording() : this.sessionRecording.startRecordingIfEnabled());
      }
    } }, { key: "startSessionRecording", value: function() {
      this.set_config({ disable_session_recording: false });
    } }, { key: "stopSessionRecording", value: function() {
      this.set_config({ disable_session_recording: true });
    } }, { key: "sessionRecordingStarted", value: function() {
      var e6;
      return !((e6 = this.sessionRecording) === null || e6 === void 0 || !e6.started);
    } }, { key: "loadToolbar", value: function(e6) {
      return this.toolbar.loadToolbar(e6);
    } }, { key: "get_property", value: function(e6) {
      var t2;
      return (t2 = this.persistence) === null || t2 === void 0 ? void 0 : t2.props[e6];
    } }, { key: "getSessionProperty", value: function(e6) {
      var t2;
      return (t2 = this.sessionPersistence) === null || t2 === void 0 ? void 0 : t2.props[e6];
    } }, { key: "toString", value: function() {
      var e6, t2 = (e6 = this.config.name) !== null && e6 !== void 0 ? e6 : Sr;
      return t2 !== Sr && (t2 = Sr + "." + t2), t2;
    } }, { key: "_gdpr_init", value: function() {
      this.config.opt_out_capturing_persistence_type === "localStorage" && kt.is_supported() && (!this.has_opted_in_capturing() && this.has_opted_in_capturing({ persistence_type: "cookie" }) && this.opt_in_capturing({ enable_persistence: false }), !this.has_opted_out_capturing() && this.has_opted_out_capturing({ persistence_type: "cookie" }) && this.opt_out_capturing({ clear_persistence: false }), this.clear_opt_in_out_capturing({ persistence_type: "cookie", enable_persistence: false })), this.has_opted_out_capturing() ? this._gdpr_update_persistence({ clear_persistence: true }) : this.has_opted_in_capturing() || !this.config.opt_out_capturing_by_default && !bt.get("ph_optout") || (bt.remove("ph_optout"), this.opt_out_capturing({ clear_persistence: this.config.opt_out_persistence_by_default }));
    } }, { key: "_gdpr_update_persistence", value: function(e6) {
      var t2, n2, i2, r2, s2;
      if (e6 && e6.clear_persistence)
        i2 = true;
      else {
        if (!e6 || !e6.enable_persistence)
          return;
        i2 = false;
      }
      this.config.disable_persistence || ((t2 = this.persistence) === null || t2 === void 0 ? void 0 : t2.disabled) === i2 || ((r2 = this.persistence) === null || r2 === void 0 || r2.set_disabled(i2));
      this.config.disable_persistence || ((n2 = this.sessionPersistence) === null || n2 === void 0 ? void 0 : n2.disabled) === i2 || ((s2 = this.sessionPersistence) === null || s2 === void 0 || s2.set_disabled(i2));
    } }, { key: "_gdpr_call_func", value: function(e6, t2) {
      return t2 = G({ capture: this.capture.bind(this), persistence_type: this.config.opt_out_capturing_persistence_type, cookie_prefix: this.config.opt_out_capturing_cookie_prefix, cookie_expiration: this.config.cookie_expiration, cross_subdomain_cookie: this.config.cross_subdomain_cookie, secure_cookie: this.config.secure_cookie }, t2 || {}), kt.is_supported() || t2.persistence_type !== "localStorage" || (t2.persistence_type = "cookie"), e6(this.config.token, { capture: t2.capture, captureEventName: t2.capture_event_name, captureProperties: t2.capture_properties, persistenceType: t2.persistence_type, persistencePrefix: t2.cookie_prefix, cookieExpiration: t2.cookie_expiration, crossSubdomainCookie: t2.cross_subdomain_cookie, secureCookie: t2.secure_cookie });
    } }, { key: "opt_in_capturing", value: function(e6) {
      e6 = G({ enable_persistence: true }, e6 || {}), this._gdpr_call_func(Qn, e6), this._gdpr_update_persistence(e6);
    } }, { key: "opt_out_capturing", value: function(e6) {
      var t2 = G({ clear_persistence: true }, e6 || {});
      this._gdpr_call_func(Yn, t2), this._gdpr_update_persistence(t2);
    } }, { key: "has_opted_in_capturing", value: function(e6) {
      return this._gdpr_call_func(Jn, e6);
    } }, { key: "has_opted_out_capturing", value: function(e6) {
      return this._gdpr_call_func(Kn, e6);
    } }, { key: "clear_opt_in_out_capturing", value: function(e6) {
      var t2 = G({ enable_persistence: true }, e6 != null ? e6 : {});
      this._gdpr_call_func(Xn, t2), this._gdpr_update_persistence(t2);
    } }, { key: "debug", value: function(e6) {
      e6 === false ? (E == null || E.console.log("You've disabled debug mode."), localStorage && localStorage.removeItem("ph_debug"), this.set_config({ debug: false })) : (E == null || E.console.log("You're now in debug mode. All calls to PostHog will be logged in your console.\nYou can disable this with `posthog.debug(false)`."), localStorage && localStorage.setItem("ph_debug", "true"), this.set_config({ debug: true }));
    } }]), e5;
  }();
  !function(e5, t2) {
    for (var n2 = 0; n2 < t2.length; n2++)
      e5.prototype[t2[n2]] = X(e5.prototype[t2[n2]]);
  }(Pr, ["identify"]);
  var Er;
  var Ir;
  !function(e5) {
    e5.Popover = "popover", e5.API = "api", e5.Widget = "widget";
  }(Er || (Er = {})), function(e5) {
    e5.Open = "open", e5.MultipleChoice = "multiple_choice", e5.SingleChoice = "single_choice", e5.Rating = "rating", e5.Link = "link";
  }(Ir || (Ir = {}));
  var Cr;
  var $r = (Cr = wr[Sr] = new Pr(), function() {
    function e5() {
      e5.done || (e5.done = true, Fr = false, z(wr, function(e6) {
        e6._dom_loaded();
      }));
    }
    A != null && A.addEventListener && (A.readyState === "complete" ? e5() : A.addEventListener("DOMContentLoaded", e5, false)), E && ie(E, "load", e5, true);
  }(), Cr);

  // ../deps/phoenix_html/priv/static/phoenix_html.js
  (function() {
    var PolyfillEvent = eventConstructor();
    function eventConstructor() {
      if (typeof window.CustomEvent === "function")
        return window.CustomEvent;
      function CustomEvent2(event, params) {
        params = params || { bubbles: false, cancelable: false, detail: void 0 };
        var evt = document.createEvent("CustomEvent");
        evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);
        return evt;
      }
      CustomEvent2.prototype = window.Event.prototype;
      return CustomEvent2;
    }
    function buildHiddenInput(name, value) {
      var input = document.createElement("input");
      input.type = "hidden";
      input.name = name;
      input.value = value;
      return input;
    }
    function handleClick(element, targetModifierKey) {
      var to = element.getAttribute("data-to"), method = buildHiddenInput("_method", element.getAttribute("data-method")), csrf = buildHiddenInput("_csrf_token", element.getAttribute("data-csrf")), form = document.createElement("form"), submit = document.createElement("input"), target = element.getAttribute("target");
      form.method = element.getAttribute("data-method") === "get" ? "get" : "post";
      form.action = to;
      form.style.display = "none";
      if (target)
        form.target = target;
      else if (targetModifierKey)
        form.target = "_blank";
      form.appendChild(csrf);
      form.appendChild(method);
      document.body.appendChild(form);
      submit.type = "submit";
      form.appendChild(submit);
      submit.click();
    }
    window.addEventListener("click", function(e5) {
      var element = e5.target;
      if (e5.defaultPrevented)
        return;
      while (element && element.getAttribute) {
        var phoenixLinkEvent = new PolyfillEvent("phoenix.link.click", {
          "bubbles": true,
          "cancelable": true
        });
        if (!element.dispatchEvent(phoenixLinkEvent)) {
          e5.preventDefault();
          e5.stopImmediatePropagation();
          return false;
        }
        if (element.getAttribute("data-method")) {
          handleClick(element, e5.metaKey || e5.shiftKey);
          e5.preventDefault();
          return false;
        } else {
          element = element.parentNode;
        }
      }
    }, false);
    window.addEventListener("phoenix.link.click", function(e5) {
      var message = e5.target.getAttribute("data-confirm");
      if (message && !window.confirm(message)) {
        e5.preventDefault();
      }
    }, false);
  })();

  // ../deps/phoenix/priv/static/phoenix.mjs
  var closure = (value) => {
    if (typeof value === "function") {
      return value;
    } else {
      let closure22 = function() {
        return value;
      };
      return closure22;
    }
  };
  var globalSelf = typeof self !== "undefined" ? self : null;
  var phxWindow = typeof window !== "undefined" ? window : null;
  var global = globalSelf || phxWindow || global;
  var DEFAULT_VSN = "2.0.0";
  var SOCKET_STATES = { connecting: 0, open: 1, closing: 2, closed: 3 };
  var DEFAULT_TIMEOUT = 1e4;
  var WS_CLOSE_NORMAL = 1e3;
  var CHANNEL_STATES = {
    closed: "closed",
    errored: "errored",
    joined: "joined",
    joining: "joining",
    leaving: "leaving"
  };
  var CHANNEL_EVENTS = {
    close: "phx_close",
    error: "phx_error",
    join: "phx_join",
    reply: "phx_reply",
    leave: "phx_leave"
  };
  var TRANSPORTS = {
    longpoll: "longpoll",
    websocket: "websocket"
  };
  var XHR_STATES = {
    complete: 4
  };
  var Push = class {
    constructor(channel, event, payload, timeout) {
      this.channel = channel;
      this.event = event;
      this.payload = payload || function() {
        return {};
      };
      this.receivedResp = null;
      this.timeout = timeout;
      this.timeoutTimer = null;
      this.recHooks = [];
      this.sent = false;
    }
    resend(timeout) {
      this.timeout = timeout;
      this.reset();
      this.send();
    }
    send() {
      if (this.hasReceived("timeout")) {
        return;
      }
      this.startTimeout();
      this.sent = true;
      this.channel.socket.push({
        topic: this.channel.topic,
        event: this.event,
        payload: this.payload(),
        ref: this.ref,
        join_ref: this.channel.joinRef()
      });
    }
    receive(status, callback) {
      if (this.hasReceived(status)) {
        callback(this.receivedResp.response);
      }
      this.recHooks.push({ status, callback });
      return this;
    }
    reset() {
      this.cancelRefEvent();
      this.ref = null;
      this.refEvent = null;
      this.receivedResp = null;
      this.sent = false;
    }
    matchReceive({ status, response, _ref }) {
      this.recHooks.filter((h2) => h2.status === status).forEach((h2) => h2.callback(response));
    }
    cancelRefEvent() {
      if (!this.refEvent) {
        return;
      }
      this.channel.off(this.refEvent);
    }
    cancelTimeout() {
      clearTimeout(this.timeoutTimer);
      this.timeoutTimer = null;
    }
    startTimeout() {
      if (this.timeoutTimer) {
        this.cancelTimeout();
      }
      this.ref = this.channel.socket.makeRef();
      this.refEvent = this.channel.replyEventName(this.ref);
      this.channel.on(this.refEvent, (payload) => {
        this.cancelRefEvent();
        this.cancelTimeout();
        this.receivedResp = payload;
        this.matchReceive(payload);
      });
      this.timeoutTimer = setTimeout(() => {
        this.trigger("timeout", {});
      }, this.timeout);
    }
    hasReceived(status) {
      return this.receivedResp && this.receivedResp.status === status;
    }
    trigger(status, response) {
      this.channel.trigger(this.refEvent, { status, response });
    }
  };
  var Timer = class {
    constructor(callback, timerCalc) {
      this.callback = callback;
      this.timerCalc = timerCalc;
      this.timer = null;
      this.tries = 0;
    }
    reset() {
      this.tries = 0;
      clearTimeout(this.timer);
    }
    scheduleTimeout() {
      clearTimeout(this.timer);
      this.timer = setTimeout(() => {
        this.tries = this.tries + 1;
        this.callback();
      }, this.timerCalc(this.tries + 1));
    }
  };
  var Channel = class {
    constructor(topic, params, socket) {
      this.state = CHANNEL_STATES.closed;
      this.topic = topic;
      this.params = closure(params || {});
      this.socket = socket;
      this.bindings = [];
      this.bindingRef = 0;
      this.timeout = this.socket.timeout;
      this.joinedOnce = false;
      this.joinPush = new Push(this, CHANNEL_EVENTS.join, this.params, this.timeout);
      this.pushBuffer = [];
      this.stateChangeRefs = [];
      this.rejoinTimer = new Timer(() => {
        if (this.socket.isConnected()) {
          this.rejoin();
        }
      }, this.socket.rejoinAfterMs);
      this.stateChangeRefs.push(this.socket.onError(() => this.rejoinTimer.reset()));
      this.stateChangeRefs.push(this.socket.onOpen(() => {
        this.rejoinTimer.reset();
        if (this.isErrored()) {
          this.rejoin();
        }
      }));
      this.joinPush.receive("ok", () => {
        this.state = CHANNEL_STATES.joined;
        this.rejoinTimer.reset();
        this.pushBuffer.forEach((pushEvent) => pushEvent.send());
        this.pushBuffer = [];
      });
      this.joinPush.receive("error", () => {
        this.state = CHANNEL_STATES.errored;
        if (this.socket.isConnected()) {
          this.rejoinTimer.scheduleTimeout();
        }
      });
      this.onClose(() => {
        this.rejoinTimer.reset();
        if (this.socket.hasLogger())
          this.socket.log("channel", `close ${this.topic} ${this.joinRef()}`);
        this.state = CHANNEL_STATES.closed;
        this.socket.remove(this);
      });
      this.onError((reason) => {
        if (this.socket.hasLogger())
          this.socket.log("channel", `error ${this.topic}`, reason);
        if (this.isJoining()) {
          this.joinPush.reset();
        }
        this.state = CHANNEL_STATES.errored;
        if (this.socket.isConnected()) {
          this.rejoinTimer.scheduleTimeout();
        }
      });
      this.joinPush.receive("timeout", () => {
        if (this.socket.hasLogger())
          this.socket.log("channel", `timeout ${this.topic} (${this.joinRef()})`, this.joinPush.timeout);
        let leavePush = new Push(this, CHANNEL_EVENTS.leave, closure({}), this.timeout);
        leavePush.send();
        this.state = CHANNEL_STATES.errored;
        this.joinPush.reset();
        if (this.socket.isConnected()) {
          this.rejoinTimer.scheduleTimeout();
        }
      });
      this.on(CHANNEL_EVENTS.reply, (payload, ref) => {
        this.trigger(this.replyEventName(ref), payload);
      });
    }
    join(timeout = this.timeout) {
      if (this.joinedOnce) {
        throw new Error("tried to join multiple times. 'join' can only be called a single time per channel instance");
      } else {
        this.timeout = timeout;
        this.joinedOnce = true;
        this.rejoin();
        return this.joinPush;
      }
    }
    onClose(callback) {
      this.on(CHANNEL_EVENTS.close, callback);
    }
    onError(callback) {
      return this.on(CHANNEL_EVENTS.error, (reason) => callback(reason));
    }
    on(event, callback) {
      let ref = this.bindingRef++;
      this.bindings.push({ event, ref, callback });
      return ref;
    }
    off(event, ref) {
      this.bindings = this.bindings.filter((bind) => {
        return !(bind.event === event && (typeof ref === "undefined" || ref === bind.ref));
      });
    }
    canPush() {
      return this.socket.isConnected() && this.isJoined();
    }
    push(event, payload, timeout = this.timeout) {
      payload = payload || {};
      if (!this.joinedOnce) {
        throw new Error(`tried to push '${event}' to '${this.topic}' before joining. Use channel.join() before pushing events`);
      }
      let pushEvent = new Push(this, event, function() {
        return payload;
      }, timeout);
      if (this.canPush()) {
        pushEvent.send();
      } else {
        pushEvent.startTimeout();
        this.pushBuffer.push(pushEvent);
      }
      return pushEvent;
    }
    leave(timeout = this.timeout) {
      this.rejoinTimer.reset();
      this.joinPush.cancelTimeout();
      this.state = CHANNEL_STATES.leaving;
      let onClose = () => {
        if (this.socket.hasLogger())
          this.socket.log("channel", `leave ${this.topic}`);
        this.trigger(CHANNEL_EVENTS.close, "leave");
      };
      let leavePush = new Push(this, CHANNEL_EVENTS.leave, closure({}), timeout);
      leavePush.receive("ok", () => onClose()).receive("timeout", () => onClose());
      leavePush.send();
      if (!this.canPush()) {
        leavePush.trigger("ok", {});
      }
      return leavePush;
    }
    onMessage(_event, payload, _ref) {
      return payload;
    }
    isMember(topic, event, payload, joinRef) {
      if (this.topic !== topic) {
        return false;
      }
      if (joinRef && joinRef !== this.joinRef()) {
        if (this.socket.hasLogger())
          this.socket.log("channel", "dropping outdated message", { topic, event, payload, joinRef });
        return false;
      } else {
        return true;
      }
    }
    joinRef() {
      return this.joinPush.ref;
    }
    rejoin(timeout = this.timeout) {
      if (this.isLeaving()) {
        return;
      }
      this.socket.leaveOpenTopic(this.topic);
      this.state = CHANNEL_STATES.joining;
      this.joinPush.resend(timeout);
    }
    trigger(event, payload, ref, joinRef) {
      let handledPayload = this.onMessage(event, payload, ref, joinRef);
      if (payload && !handledPayload) {
        throw new Error("channel onMessage callbacks must return the payload, modified or unmodified");
      }
      let eventBindings = this.bindings.filter((bind) => bind.event === event);
      for (let i2 = 0; i2 < eventBindings.length; i2++) {
        let bind = eventBindings[i2];
        bind.callback(handledPayload, ref, joinRef || this.joinRef());
      }
    }
    replyEventName(ref) {
      return `chan_reply_${ref}`;
    }
    isClosed() {
      return this.state === CHANNEL_STATES.closed;
    }
    isErrored() {
      return this.state === CHANNEL_STATES.errored;
    }
    isJoined() {
      return this.state === CHANNEL_STATES.joined;
    }
    isJoining() {
      return this.state === CHANNEL_STATES.joining;
    }
    isLeaving() {
      return this.state === CHANNEL_STATES.leaving;
    }
  };
  var Ajax = class {
    static request(method, endPoint, accept, body, timeout, ontimeout, callback) {
      if (global.XDomainRequest) {
        let req = new global.XDomainRequest();
        return this.xdomainRequest(req, method, endPoint, body, timeout, ontimeout, callback);
      } else {
        let req = new global.XMLHttpRequest();
        return this.xhrRequest(req, method, endPoint, accept, body, timeout, ontimeout, callback);
      }
    }
    static xdomainRequest(req, method, endPoint, body, timeout, ontimeout, callback) {
      req.timeout = timeout;
      req.open(method, endPoint);
      req.onload = () => {
        let response = this.parseJSON(req.responseText);
        callback && callback(response);
      };
      if (ontimeout) {
        req.ontimeout = ontimeout;
      }
      req.onprogress = () => {
      };
      req.send(body);
      return req;
    }
    static xhrRequest(req, method, endPoint, accept, body, timeout, ontimeout, callback) {
      req.open(method, endPoint, true);
      req.timeout = timeout;
      req.setRequestHeader("Content-Type", accept);
      req.onerror = () => callback && callback(null);
      req.onreadystatechange = () => {
        if (req.readyState === XHR_STATES.complete && callback) {
          let response = this.parseJSON(req.responseText);
          callback(response);
        }
      };
      if (ontimeout) {
        req.ontimeout = ontimeout;
      }
      req.send(body);
      return req;
    }
    static parseJSON(resp) {
      if (!resp || resp === "") {
        return null;
      }
      try {
        return JSON.parse(resp);
      } catch (e5) {
        console && console.log("failed to parse JSON response", resp);
        return null;
      }
    }
    static serialize(obj, parentKey) {
      let queryStr = [];
      for (var key in obj) {
        if (!Object.prototype.hasOwnProperty.call(obj, key)) {
          continue;
        }
        let paramKey = parentKey ? `${parentKey}[${key}]` : key;
        let paramVal = obj[key];
        if (typeof paramVal === "object") {
          queryStr.push(this.serialize(paramVal, paramKey));
        } else {
          queryStr.push(encodeURIComponent(paramKey) + "=" + encodeURIComponent(paramVal));
        }
      }
      return queryStr.join("&");
    }
    static appendParams(url, params) {
      if (Object.keys(params).length === 0) {
        return url;
      }
      let prefix = url.match(/\?/) ? "&" : "?";
      return `${url}${prefix}${this.serialize(params)}`;
    }
  };
  var LongPoll = class {
    constructor(endPoint) {
      this.endPoint = null;
      this.token = null;
      this.skipHeartbeat = true;
      this.reqs = /* @__PURE__ */ new Set();
      this.awaitingBatchAck = false;
      this.currentBatch = null;
      this.currentBatchTimer = null;
      this.batchBuffer = [];
      this.onopen = function() {
      };
      this.onerror = function() {
      };
      this.onmessage = function() {
      };
      this.onclose = function() {
      };
      this.pollEndpoint = this.normalizeEndpoint(endPoint);
      this.readyState = SOCKET_STATES.connecting;
      this.poll();
    }
    normalizeEndpoint(endPoint) {
      return endPoint.replace("ws://", "http://").replace("wss://", "https://").replace(new RegExp("(.*)/" + TRANSPORTS.websocket), "$1/" + TRANSPORTS.longpoll);
    }
    endpointURL() {
      return Ajax.appendParams(this.pollEndpoint, { token: this.token });
    }
    closeAndRetry(code, reason, wasClean) {
      this.close(code, reason, wasClean);
      this.readyState = SOCKET_STATES.connecting;
    }
    ontimeout() {
      this.onerror("timeout");
      this.closeAndRetry(1005, "timeout", false);
    }
    isActive() {
      return this.readyState === SOCKET_STATES.open || this.readyState === SOCKET_STATES.connecting;
    }
    poll() {
      this.ajax("GET", "application/json", null, () => this.ontimeout(), (resp) => {
        if (resp) {
          var { status, token, messages } = resp;
          this.token = token;
        } else {
          status = 0;
        }
        switch (status) {
          case 200:
            messages.forEach((msg) => {
              setTimeout(() => this.onmessage({ data: msg }), 0);
            });
            this.poll();
            break;
          case 204:
            this.poll();
            break;
          case 410:
            this.readyState = SOCKET_STATES.open;
            this.onopen({});
            this.poll();
            break;
          case 403:
            this.onerror(403);
            this.close(1008, "forbidden", false);
            break;
          case 0:
          case 500:
            this.onerror(500);
            this.closeAndRetry(1011, "internal server error", 500);
            break;
          default:
            throw new Error(`unhandled poll status ${status}`);
        }
      });
    }
    send(body) {
      if (this.currentBatch) {
        this.currentBatch.push(body);
      } else if (this.awaitingBatchAck) {
        this.batchBuffer.push(body);
      } else {
        this.currentBatch = [body];
        this.currentBatchTimer = setTimeout(() => {
          this.batchSend(this.currentBatch);
          this.currentBatch = null;
        }, 0);
      }
    }
    batchSend(messages) {
      this.awaitingBatchAck = true;
      this.ajax("POST", "application/x-ndjson", messages.join("\n"), () => this.onerror("timeout"), (resp) => {
        this.awaitingBatchAck = false;
        if (!resp || resp.status !== 200) {
          this.onerror(resp && resp.status);
          this.closeAndRetry(1011, "internal server error", false);
        } else if (this.batchBuffer.length > 0) {
          this.batchSend(this.batchBuffer);
          this.batchBuffer = [];
        }
      });
    }
    close(code, reason, wasClean) {
      for (let req of this.reqs) {
        req.abort();
      }
      this.readyState = SOCKET_STATES.closed;
      let opts = Object.assign({ code: 1e3, reason: void 0, wasClean: true }, { code, reason, wasClean });
      this.batchBuffer = [];
      clearTimeout(this.currentBatchTimer);
      this.currentBatchTimer = null;
      if (typeof CloseEvent !== "undefined") {
        this.onclose(new CloseEvent("close", opts));
      } else {
        this.onclose(opts);
      }
    }
    ajax(method, contentType, body, onCallerTimeout, callback) {
      let req;
      let ontimeout = () => {
        this.reqs.delete(req);
        onCallerTimeout();
      };
      req = Ajax.request(method, this.endpointURL(), contentType, body, this.timeout, ontimeout, (resp) => {
        this.reqs.delete(req);
        if (this.isActive()) {
          callback(resp);
        }
      });
      this.reqs.add(req);
    }
  };
  var serializer_default = {
    HEADER_LENGTH: 1,
    META_LENGTH: 4,
    KINDS: { push: 0, reply: 1, broadcast: 2 },
    encode(msg, callback) {
      if (msg.payload.constructor === ArrayBuffer) {
        return callback(this.binaryEncode(msg));
      } else {
        let payload = [msg.join_ref, msg.ref, msg.topic, msg.event, msg.payload];
        return callback(JSON.stringify(payload));
      }
    },
    decode(rawPayload, callback) {
      if (rawPayload.constructor === ArrayBuffer) {
        return callback(this.binaryDecode(rawPayload));
      } else {
        let [join_ref, ref, topic, event, payload] = JSON.parse(rawPayload);
        return callback({ join_ref, ref, topic, event, payload });
      }
    },
    binaryEncode(message) {
      let { join_ref, ref, event, topic, payload } = message;
      let metaLength = this.META_LENGTH + join_ref.length + ref.length + topic.length + event.length;
      let header = new ArrayBuffer(this.HEADER_LENGTH + metaLength);
      let view = new DataView(header);
      let offset = 0;
      view.setUint8(offset++, this.KINDS.push);
      view.setUint8(offset++, join_ref.length);
      view.setUint8(offset++, ref.length);
      view.setUint8(offset++, topic.length);
      view.setUint8(offset++, event.length);
      Array.from(join_ref, (char) => view.setUint8(offset++, char.charCodeAt(0)));
      Array.from(ref, (char) => view.setUint8(offset++, char.charCodeAt(0)));
      Array.from(topic, (char) => view.setUint8(offset++, char.charCodeAt(0)));
      Array.from(event, (char) => view.setUint8(offset++, char.charCodeAt(0)));
      var combined = new Uint8Array(header.byteLength + payload.byteLength);
      combined.set(new Uint8Array(header), 0);
      combined.set(new Uint8Array(payload), header.byteLength);
      return combined.buffer;
    },
    binaryDecode(buffer) {
      let view = new DataView(buffer);
      let kind = view.getUint8(0);
      let decoder = new TextDecoder();
      switch (kind) {
        case this.KINDS.push:
          return this.decodePush(buffer, view, decoder);
        case this.KINDS.reply:
          return this.decodeReply(buffer, view, decoder);
        case this.KINDS.broadcast:
          return this.decodeBroadcast(buffer, view, decoder);
      }
    },
    decodePush(buffer, view, decoder) {
      let joinRefSize = view.getUint8(1);
      let topicSize = view.getUint8(2);
      let eventSize = view.getUint8(3);
      let offset = this.HEADER_LENGTH + this.META_LENGTH - 1;
      let joinRef = decoder.decode(buffer.slice(offset, offset + joinRefSize));
      offset = offset + joinRefSize;
      let topic = decoder.decode(buffer.slice(offset, offset + topicSize));
      offset = offset + topicSize;
      let event = decoder.decode(buffer.slice(offset, offset + eventSize));
      offset = offset + eventSize;
      let data = buffer.slice(offset, buffer.byteLength);
      return { join_ref: joinRef, ref: null, topic, event, payload: data };
    },
    decodeReply(buffer, view, decoder) {
      let joinRefSize = view.getUint8(1);
      let refSize = view.getUint8(2);
      let topicSize = view.getUint8(3);
      let eventSize = view.getUint8(4);
      let offset = this.HEADER_LENGTH + this.META_LENGTH;
      let joinRef = decoder.decode(buffer.slice(offset, offset + joinRefSize));
      offset = offset + joinRefSize;
      let ref = decoder.decode(buffer.slice(offset, offset + refSize));
      offset = offset + refSize;
      let topic = decoder.decode(buffer.slice(offset, offset + topicSize));
      offset = offset + topicSize;
      let event = decoder.decode(buffer.slice(offset, offset + eventSize));
      offset = offset + eventSize;
      let data = buffer.slice(offset, buffer.byteLength);
      let payload = { status: event, response: data };
      return { join_ref: joinRef, ref, topic, event: CHANNEL_EVENTS.reply, payload };
    },
    decodeBroadcast(buffer, view, decoder) {
      let topicSize = view.getUint8(1);
      let eventSize = view.getUint8(2);
      let offset = this.HEADER_LENGTH + 2;
      let topic = decoder.decode(buffer.slice(offset, offset + topicSize));
      offset = offset + topicSize;
      let event = decoder.decode(buffer.slice(offset, offset + eventSize));
      offset = offset + eventSize;
      let data = buffer.slice(offset, buffer.byteLength);
      return { join_ref: null, ref: null, topic, event, payload: data };
    }
  };
  var Socket = class {
    constructor(endPoint, opts = {}) {
      this.stateChangeCallbacks = { open: [], close: [], error: [], message: [] };
      this.channels = [];
      this.sendBuffer = [];
      this.ref = 0;
      this.timeout = opts.timeout || DEFAULT_TIMEOUT;
      this.transport = opts.transport || global.WebSocket || LongPoll;
      this.establishedConnections = 0;
      this.defaultEncoder = serializer_default.encode.bind(serializer_default);
      this.defaultDecoder = serializer_default.decode.bind(serializer_default);
      this.closeWasClean = false;
      this.binaryType = opts.binaryType || "arraybuffer";
      this.connectClock = 1;
      if (this.transport !== LongPoll) {
        this.encode = opts.encode || this.defaultEncoder;
        this.decode = opts.decode || this.defaultDecoder;
      } else {
        this.encode = this.defaultEncoder;
        this.decode = this.defaultDecoder;
      }
      let awaitingConnectionOnPageShow = null;
      if (phxWindow && phxWindow.addEventListener) {
        phxWindow.addEventListener("pagehide", (_e2) => {
          if (this.conn) {
            this.disconnect();
            awaitingConnectionOnPageShow = this.connectClock;
          }
        });
        phxWindow.addEventListener("pageshow", (_e2) => {
          if (awaitingConnectionOnPageShow === this.connectClock) {
            awaitingConnectionOnPageShow = null;
            this.connect();
          }
        });
      }
      this.heartbeatIntervalMs = opts.heartbeatIntervalMs || 3e4;
      this.rejoinAfterMs = (tries) => {
        if (opts.rejoinAfterMs) {
          return opts.rejoinAfterMs(tries);
        } else {
          return [1e3, 2e3, 5e3][tries - 1] || 1e4;
        }
      };
      this.reconnectAfterMs = (tries) => {
        if (opts.reconnectAfterMs) {
          return opts.reconnectAfterMs(tries);
        } else {
          return [10, 50, 100, 150, 200, 250, 500, 1e3, 2e3][tries - 1] || 5e3;
        }
      };
      this.logger = opts.logger || null;
      this.longpollerTimeout = opts.longpollerTimeout || 2e4;
      this.params = closure(opts.params || {});
      this.endPoint = `${endPoint}/${TRANSPORTS.websocket}`;
      this.vsn = opts.vsn || DEFAULT_VSN;
      this.heartbeatTimeoutTimer = null;
      this.heartbeatTimer = null;
      this.pendingHeartbeatRef = null;
      this.reconnectTimer = new Timer(() => {
        this.teardown(() => this.connect());
      }, this.reconnectAfterMs);
    }
    getLongPollTransport() {
      return LongPoll;
    }
    replaceTransport(newTransport) {
      this.connectClock++;
      this.closeWasClean = true;
      this.reconnectTimer.reset();
      this.sendBuffer = [];
      if (this.conn) {
        this.conn.close();
        this.conn = null;
      }
      this.transport = newTransport;
    }
    protocol() {
      return location.protocol.match(/^https/) ? "wss" : "ws";
    }
    endPointURL() {
      let uri = Ajax.appendParams(Ajax.appendParams(this.endPoint, this.params()), { vsn: this.vsn });
      if (uri.charAt(0) !== "/") {
        return uri;
      }
      if (uri.charAt(1) === "/") {
        return `${this.protocol()}:${uri}`;
      }
      return `${this.protocol()}://${location.host}${uri}`;
    }
    disconnect(callback, code, reason) {
      this.connectClock++;
      this.closeWasClean = true;
      this.reconnectTimer.reset();
      this.teardown(callback, code, reason);
    }
    connect(params) {
      if (params) {
        console && console.log("passing params to connect is deprecated. Instead pass :params to the Socket constructor");
        this.params = closure(params);
      }
      if (this.conn) {
        return;
      }
      this.connectClock++;
      this.closeWasClean = false;
      this.conn = new this.transport(this.endPointURL());
      this.conn.binaryType = this.binaryType;
      this.conn.timeout = this.longpollerTimeout;
      this.conn.onopen = () => this.onConnOpen();
      this.conn.onerror = (error) => this.onConnError(error);
      this.conn.onmessage = (event) => this.onConnMessage(event);
      this.conn.onclose = (event) => this.onConnClose(event);
    }
    log(kind, msg, data) {
      this.logger(kind, msg, data);
    }
    hasLogger() {
      return this.logger !== null;
    }
    onOpen(callback) {
      let ref = this.makeRef();
      this.stateChangeCallbacks.open.push([ref, callback]);
      return ref;
    }
    onClose(callback) {
      let ref = this.makeRef();
      this.stateChangeCallbacks.close.push([ref, callback]);
      return ref;
    }
    onError(callback) {
      let ref = this.makeRef();
      this.stateChangeCallbacks.error.push([ref, callback]);
      return ref;
    }
    onMessage(callback) {
      let ref = this.makeRef();
      this.stateChangeCallbacks.message.push([ref, callback]);
      return ref;
    }
    ping(callback) {
      if (!this.isConnected()) {
        return false;
      }
      let ref = this.makeRef();
      let startTime = Date.now();
      this.push({ topic: "phoenix", event: "heartbeat", payload: {}, ref });
      let onMsgRef = this.onMessage((msg) => {
        if (msg.ref === ref) {
          this.off([onMsgRef]);
          callback(Date.now() - startTime);
        }
      });
      return true;
    }
    clearHeartbeats() {
      clearTimeout(this.heartbeatTimer);
      clearTimeout(this.heartbeatTimeoutTimer);
    }
    onConnOpen() {
      if (this.hasLogger())
        this.log("transport", `connected to ${this.endPointURL()}`);
      this.closeWasClean = false;
      this.establishedConnections++;
      this.flushSendBuffer();
      this.reconnectTimer.reset();
      this.resetHeartbeat();
      this.stateChangeCallbacks.open.forEach(([, callback]) => callback());
    }
    heartbeatTimeout() {
      if (this.pendingHeartbeatRef) {
        this.pendingHeartbeatRef = null;
        if (this.hasLogger()) {
          this.log("transport", "heartbeat timeout. Attempting to re-establish connection");
        }
        this.triggerChanError();
        this.closeWasClean = false;
        this.teardown(() => this.reconnectTimer.scheduleTimeout(), WS_CLOSE_NORMAL, "heartbeat timeout");
      }
    }
    resetHeartbeat() {
      if (this.conn && this.conn.skipHeartbeat) {
        return;
      }
      this.pendingHeartbeatRef = null;
      this.clearHeartbeats();
      this.heartbeatTimer = setTimeout(() => this.sendHeartbeat(), this.heartbeatIntervalMs);
    }
    teardown(callback, code, reason) {
      if (!this.conn) {
        return callback && callback();
      }
      this.waitForBufferDone(() => {
        if (this.conn) {
          if (code) {
            this.conn.close(code, reason || "");
          } else {
            this.conn.close();
          }
        }
        this.waitForSocketClosed(() => {
          if (this.conn) {
            this.conn.onopen = function() {
            };
            this.conn.onerror = function() {
            };
            this.conn.onmessage = function() {
            };
            this.conn.onclose = function() {
            };
            this.conn = null;
          }
          callback && callback();
        });
      });
    }
    waitForBufferDone(callback, tries = 1) {
      if (tries === 5 || !this.conn || !this.conn.bufferedAmount) {
        callback();
        return;
      }
      setTimeout(() => {
        this.waitForBufferDone(callback, tries + 1);
      }, 150 * tries);
    }
    waitForSocketClosed(callback, tries = 1) {
      if (tries === 5 || !this.conn || this.conn.readyState === SOCKET_STATES.closed) {
        callback();
        return;
      }
      setTimeout(() => {
        this.waitForSocketClosed(callback, tries + 1);
      }, 150 * tries);
    }
    onConnClose(event) {
      let closeCode = event && event.code;
      if (this.hasLogger())
        this.log("transport", "close", event);
      this.triggerChanError();
      this.clearHeartbeats();
      if (!this.closeWasClean && closeCode !== 1e3) {
        this.reconnectTimer.scheduleTimeout();
      }
      this.stateChangeCallbacks.close.forEach(([, callback]) => callback(event));
    }
    onConnError(error) {
      if (this.hasLogger())
        this.log("transport", error);
      let transportBefore = this.transport;
      let establishedBefore = this.establishedConnections;
      this.stateChangeCallbacks.error.forEach(([, callback]) => {
        callback(error, transportBefore, establishedBefore);
      });
      if (transportBefore === this.transport || establishedBefore > 0) {
        this.triggerChanError();
      }
    }
    triggerChanError() {
      this.channels.forEach((channel) => {
        if (!(channel.isErrored() || channel.isLeaving() || channel.isClosed())) {
          channel.trigger(CHANNEL_EVENTS.error);
        }
      });
    }
    connectionState() {
      switch (this.conn && this.conn.readyState) {
        case SOCKET_STATES.connecting:
          return "connecting";
        case SOCKET_STATES.open:
          return "open";
        case SOCKET_STATES.closing:
          return "closing";
        default:
          return "closed";
      }
    }
    isConnected() {
      return this.connectionState() === "open";
    }
    remove(channel) {
      this.off(channel.stateChangeRefs);
      this.channels = this.channels.filter((c2) => c2.joinRef() !== channel.joinRef());
    }
    off(refs) {
      for (let key in this.stateChangeCallbacks) {
        this.stateChangeCallbacks[key] = this.stateChangeCallbacks[key].filter(([ref]) => {
          return refs.indexOf(ref) === -1;
        });
      }
    }
    channel(topic, chanParams = {}) {
      let chan = new Channel(topic, chanParams, this);
      this.channels.push(chan);
      return chan;
    }
    push(data) {
      if (this.hasLogger()) {
        let { topic, event, payload, ref, join_ref } = data;
        this.log("push", `${topic} ${event} (${join_ref}, ${ref})`, payload);
      }
      if (this.isConnected()) {
        this.encode(data, (result) => this.conn.send(result));
      } else {
        this.sendBuffer.push(() => this.encode(data, (result) => this.conn.send(result)));
      }
    }
    makeRef() {
      let newRef = this.ref + 1;
      if (newRef === this.ref) {
        this.ref = 0;
      } else {
        this.ref = newRef;
      }
      return this.ref.toString();
    }
    sendHeartbeat() {
      if (this.pendingHeartbeatRef && !this.isConnected()) {
        return;
      }
      this.pendingHeartbeatRef = this.makeRef();
      this.push({ topic: "phoenix", event: "heartbeat", payload: {}, ref: this.pendingHeartbeatRef });
      this.heartbeatTimeoutTimer = setTimeout(() => this.heartbeatTimeout(), this.heartbeatIntervalMs);
    }
    flushSendBuffer() {
      if (this.isConnected() && this.sendBuffer.length > 0) {
        this.sendBuffer.forEach((callback) => callback());
        this.sendBuffer = [];
      }
    }
    onConnMessage(rawMessage) {
      this.decode(rawMessage.data, (msg) => {
        let { topic, event, payload, ref, join_ref } = msg;
        if (ref && ref === this.pendingHeartbeatRef) {
          this.clearHeartbeats();
          this.pendingHeartbeatRef = null;
          this.heartbeatTimer = setTimeout(() => this.sendHeartbeat(), this.heartbeatIntervalMs);
        }
        if (this.hasLogger())
          this.log("receive", `${payload.status || ""} ${topic} ${event} ${ref && "(" + ref + ")" || ""}`, payload);
        for (let i2 = 0; i2 < this.channels.length; i2++) {
          const channel = this.channels[i2];
          if (!channel.isMember(topic, event, payload, join_ref)) {
            continue;
          }
          channel.trigger(event, payload, ref, join_ref);
        }
        for (let i2 = 0; i2 < this.stateChangeCallbacks.message.length; i2++) {
          let [, callback] = this.stateChangeCallbacks.message[i2];
          callback(msg);
        }
      });
    }
    leaveOpenTopic(topic) {
      let dupChannel = this.channels.find((c2) => c2.topic === topic && (c2.isJoined() || c2.isJoining()));
      if (dupChannel) {
        if (this.hasLogger())
          this.log("transport", `leaving duplicate topic "${topic}"`);
        dupChannel.leave();
      }
    }
  };

  // ../deps/phoenix_live_view/priv/static/phoenix_live_view.esm.js
  var CONSECUTIVE_RELOADS = "consecutive-reloads";
  var MAX_RELOADS = 10;
  var RELOAD_JITTER_MIN = 5e3;
  var RELOAD_JITTER_MAX = 1e4;
  var FAILSAFE_JITTER = 3e4;
  var PHX_EVENT_CLASSES = [
    "phx-click-loading",
    "phx-change-loading",
    "phx-submit-loading",
    "phx-keydown-loading",
    "phx-keyup-loading",
    "phx-blur-loading",
    "phx-focus-loading"
  ];
  var PHX_COMPONENT = "data-phx-component";
  var PHX_LIVE_LINK = "data-phx-link";
  var PHX_TRACK_STATIC = "track-static";
  var PHX_LINK_STATE = "data-phx-link-state";
  var PHX_REF = "data-phx-ref";
  var PHX_REF_SRC = "data-phx-ref-src";
  var PHX_TRACK_UPLOADS = "track-uploads";
  var PHX_UPLOAD_REF = "data-phx-upload-ref";
  var PHX_PREFLIGHTED_REFS = "data-phx-preflighted-refs";
  var PHX_DONE_REFS = "data-phx-done-refs";
  var PHX_DROP_TARGET = "drop-target";
  var PHX_ACTIVE_ENTRY_REFS = "data-phx-active-refs";
  var PHX_LIVE_FILE_UPDATED = "phx:live-file:updated";
  var PHX_SKIP = "data-phx-skip";
  var PHX_PRUNE = "data-phx-prune";
  var PHX_PAGE_LOADING = "page-loading";
  var PHX_CONNECTED_CLASS = "phx-connected";
  var PHX_DISCONNECTED_CLASS = "phx-loading";
  var PHX_NO_FEEDBACK_CLASS = "phx-no-feedback";
  var PHX_ERROR_CLASS = "phx-error";
  var PHX_PARENT_ID = "data-phx-parent-id";
  var PHX_MAIN = "data-phx-main";
  var PHX_ROOT_ID = "data-phx-root-id";
  var PHX_TRIGGER_ACTION = "trigger-action";
  var PHX_FEEDBACK_FOR = "feedback-for";
  var PHX_HAS_FOCUSED = "phx-has-focused";
  var FOCUSABLE_INPUTS = ["text", "textarea", "number", "email", "password", "search", "tel", "url", "date", "time", "datetime-local", "color", "range"];
  var CHECKABLE_INPUTS = ["checkbox", "radio"];
  var PHX_HAS_SUBMITTED = "phx-has-submitted";
  var PHX_SESSION = "data-phx-session";
  var PHX_VIEW_SELECTOR = `[${PHX_SESSION}]`;
  var PHX_STICKY = "data-phx-sticky";
  var PHX_STATIC = "data-phx-static";
  var PHX_READONLY = "data-phx-readonly";
  var PHX_DISABLED = "data-phx-disabled";
  var PHX_DISABLE_WITH = "disable-with";
  var PHX_DISABLE_WITH_RESTORE = "data-phx-disable-with-restore";
  var PHX_HOOK = "hook";
  var PHX_DEBOUNCE = "debounce";
  var PHX_THROTTLE = "throttle";
  var PHX_UPDATE = "update";
  var PHX_STREAM = "stream";
  var PHX_KEY = "key";
  var PHX_PRIVATE = "phxPrivate";
  var PHX_AUTO_RECOVER = "auto-recover";
  var PHX_LV_DEBUG = "phx:live-socket:debug";
  var PHX_LV_PROFILE = "phx:live-socket:profiling";
  var PHX_LV_LATENCY_SIM = "phx:live-socket:latency-sim";
  var PHX_PROGRESS = "progress";
  var PHX_MOUNTED = "mounted";
  var LOADER_TIMEOUT = 1;
  var BEFORE_UNLOAD_LOADER_TIMEOUT = 200;
  var BINDING_PREFIX = "phx-";
  var PUSH_TIMEOUT = 3e4;
  var DEBOUNCE_TRIGGER = "debounce-trigger";
  var THROTTLED = "throttled";
  var DEBOUNCE_PREV_KEY = "debounce-prev-key";
  var DEFAULTS = {
    debounce: 300,
    throttle: 300
  };
  var DYNAMICS = "d";
  var STATIC = "s";
  var COMPONENTS = "c";
  var EVENTS = "e";
  var REPLY = "r";
  var TITLE = "t";
  var TEMPLATES = "p";
  var STREAM = "stream";
  var EntryUploader = class {
    constructor(entry, chunkSize, liveSocket2) {
      this.liveSocket = liveSocket2;
      this.entry = entry;
      this.offset = 0;
      this.chunkSize = chunkSize;
      this.chunkTimer = null;
      this.uploadChannel = liveSocket2.channel(`lvu:${entry.ref}`, { token: entry.metadata() });
    }
    error(reason) {
      clearTimeout(this.chunkTimer);
      this.uploadChannel.leave();
      this.entry.error(reason);
    }
    upload() {
      this.uploadChannel.onError((reason) => this.error(reason));
      this.uploadChannel.join().receive("ok", (_data) => this.readNextChunk()).receive("error", (reason) => this.error(reason));
    }
    isDone() {
      return this.offset >= this.entry.file.size;
    }
    readNextChunk() {
      let reader = new window.FileReader();
      let blob = this.entry.file.slice(this.offset, this.chunkSize + this.offset);
      reader.onload = (e5) => {
        if (e5.target.error === null) {
          this.offset += e5.target.result.byteLength;
          this.pushChunk(e5.target.result);
        } else {
          return logError("Read error: " + e5.target.error);
        }
      };
      reader.readAsArrayBuffer(blob);
    }
    pushChunk(chunk) {
      if (!this.uploadChannel.isJoined()) {
        return;
      }
      this.uploadChannel.push("chunk", chunk).receive("ok", () => {
        this.entry.progress(this.offset / this.entry.file.size * 100);
        if (!this.isDone()) {
          this.chunkTimer = setTimeout(() => this.readNextChunk(), this.liveSocket.getLatencySim() || 0);
        }
      });
    }
  };
  var logError = (msg, obj) => console.error && console.error(msg, obj);
  var isCid = (cid) => {
    let type = typeof cid;
    return type === "number" || type === "string" && /^(0|[1-9]\d*)$/.test(cid);
  };
  function detectDuplicateIds() {
    let ids = /* @__PURE__ */ new Set();
    let elems = document.querySelectorAll("*[id]");
    for (let i2 = 0, len = elems.length; i2 < len; i2++) {
      if (ids.has(elems[i2].id)) {
        console.error(`Multiple IDs detected: ${elems[i2].id}. Ensure unique element ids.`);
      } else {
        ids.add(elems[i2].id);
      }
    }
  }
  var debug = (view, kind, msg, obj) => {
    if (view.liveSocket.isDebugEnabled()) {
      console.log(`${view.id} ${kind}: ${msg} - `, obj);
    }
  };
  var closure2 = (val) => typeof val === "function" ? val : function() {
    return val;
  };
  var clone = (obj) => {
    return JSON.parse(JSON.stringify(obj));
  };
  var closestPhxBinding = (el, binding, borderEl) => {
    do {
      if (el.matches(`[${binding}]`) && !el.disabled) {
        return el;
      }
      el = el.parentElement || el.parentNode;
    } while (el !== null && el.nodeType === 1 && !(borderEl && borderEl.isSameNode(el) || el.matches(PHX_VIEW_SELECTOR)));
    return null;
  };
  var isObject = (obj) => {
    return obj !== null && typeof obj === "object" && !(obj instanceof Array);
  };
  var isEqualObj = (obj1, obj2) => JSON.stringify(obj1) === JSON.stringify(obj2);
  var isEmpty = (obj) => {
    for (let x2 in obj) {
      return false;
    }
    return true;
  };
  var maybe = (el, callback) => el && callback(el);
  var channelUploader = function(entries, onError, resp, liveSocket2) {
    entries.forEach((entry) => {
      let entryUploader = new EntryUploader(entry, resp.config.chunk_size, liveSocket2);
      entryUploader.upload();
    });
  };
  var Browser = {
    canPushState() {
      return typeof history.pushState !== "undefined";
    },
    dropLocal(localStorage2, namespace, subkey) {
      return localStorage2.removeItem(this.localKey(namespace, subkey));
    },
    updateLocal(localStorage2, namespace, subkey, initial, func) {
      let current = this.getLocal(localStorage2, namespace, subkey);
      let key = this.localKey(namespace, subkey);
      let newVal = current === null ? initial : func(current);
      localStorage2.setItem(key, JSON.stringify(newVal));
      return newVal;
    },
    getLocal(localStorage2, namespace, subkey) {
      return JSON.parse(localStorage2.getItem(this.localKey(namespace, subkey)));
    },
    updateCurrentState(callback) {
      if (!this.canPushState()) {
        return;
      }
      history.replaceState(callback(history.state || {}), "", window.location.href);
    },
    pushState(kind, meta, to) {
      if (this.canPushState()) {
        if (to !== window.location.href) {
          if (meta.type == "redirect" && meta.scroll) {
            let currentState = history.state || {};
            currentState.scroll = meta.scroll;
            history.replaceState(currentState, "", window.location.href);
          }
          delete meta.scroll;
          history[kind + "State"](meta, "", to || null);
          let hashEl = this.getHashTargetEl(window.location.hash);
          if (hashEl) {
            hashEl.scrollIntoView();
          } else if (meta.type === "redirect") {
            window.scroll(0, 0);
          }
        }
      } else {
        this.redirect(to);
      }
    },
    setCookie(name, value) {
      document.cookie = `${name}=${value}`;
    },
    getCookie(name) {
      return document.cookie.replace(new RegExp(`(?:(?:^|.*;s*)${name}s*=s*([^;]*).*$)|^.*$`), "$1");
    },
    redirect(toURL, flash) {
      if (flash) {
        Browser.setCookie("__phoenix_flash__", flash + "; max-age=60000; path=/");
      }
      window.location = toURL;
    },
    localKey(namespace, subkey) {
      return `${namespace}-${subkey}`;
    },
    getHashTargetEl(maybeHash) {
      let hash = maybeHash.toString().substring(1);
      if (hash === "") {
        return;
      }
      return document.getElementById(hash) || document.querySelector(`a[name="${hash}"]`);
    }
  };
  var browser_default = Browser;
  var DOM = {
    byId(id) {
      return document.getElementById(id) || logError(`no id found for ${id}`);
    },
    removeClass(el, className) {
      el.classList.remove(className);
      if (el.classList.length === 0) {
        el.removeAttribute("class");
      }
    },
    all(node, query, callback) {
      if (!node) {
        return [];
      }
      let array = Array.from(node.querySelectorAll(query));
      return callback ? array.forEach(callback) : array;
    },
    childNodeLength(html) {
      let template = document.createElement("template");
      template.innerHTML = html;
      return template.content.childElementCount;
    },
    isUploadInput(el) {
      return el.type === "file" && el.getAttribute(PHX_UPLOAD_REF) !== null;
    },
    findUploadInputs(node) {
      return this.all(node, `input[type="file"][${PHX_UPLOAD_REF}]`);
    },
    findComponentNodeList(node, cid) {
      return this.filterWithinSameLiveView(this.all(node, `[${PHX_COMPONENT}="${cid}"]`), node);
    },
    isPhxDestroyed(node) {
      return node.id && DOM.private(node, "destroyed") ? true : false;
    },
    wantsNewTab(e5) {
      let wantsNewTab = e5.ctrlKey || e5.shiftKey || e5.metaKey || e5.button && e5.button === 1;
      return wantsNewTab || e5.target.getAttribute("target") === "_blank";
    },
    isUnloadableFormSubmit(e5) {
      return !e5.defaultPrevented && !this.wantsNewTab(e5);
    },
    isNewPageHref(href, currentLocation) {
      let url;
      try {
        url = new URL(href);
      } catch (e5) {
        try {
          url = new URL(href, currentLocation);
        } catch (e22) {
          return true;
        }
      }
      if (url.host === currentLocation.host && url.protocol === currentLocation.protocol) {
        if (url.pathname === currentLocation.pathname && url.search === currentLocation.search) {
          return url.hash === "" && !url.href.endsWith("#");
        }
      }
      return true;
    },
    markPhxChildDestroyed(el) {
      if (this.isPhxChild(el)) {
        el.setAttribute(PHX_SESSION, "");
      }
      this.putPrivate(el, "destroyed", true);
    },
    findPhxChildrenInFragment(html, parentId) {
      let template = document.createElement("template");
      template.innerHTML = html;
      return this.findPhxChildren(template.content, parentId);
    },
    isIgnored(el, phxUpdate) {
      return (el.getAttribute(phxUpdate) || el.getAttribute("data-phx-update")) === "ignore";
    },
    isPhxUpdate(el, phxUpdate, updateTypes) {
      return el.getAttribute && updateTypes.indexOf(el.getAttribute(phxUpdate)) >= 0;
    },
    findPhxSticky(el) {
      return this.all(el, `[${PHX_STICKY}]`);
    },
    findPhxChildren(el, parentId) {
      return this.all(el, `${PHX_VIEW_SELECTOR}[${PHX_PARENT_ID}="${parentId}"]`);
    },
    findParentCIDs(node, cids) {
      let initial = new Set(cids);
      let parentCids = cids.reduce((acc, cid) => {
        let selector = `[${PHX_COMPONENT}="${cid}"] [${PHX_COMPONENT}]`;
        this.filterWithinSameLiveView(this.all(node, selector), node).map((el) => parseInt(el.getAttribute(PHX_COMPONENT))).forEach((childCID) => acc.delete(childCID));
        return acc;
      }, initial);
      return parentCids.size === 0 ? new Set(cids) : parentCids;
    },
    filterWithinSameLiveView(nodes, parent) {
      if (parent.querySelector(PHX_VIEW_SELECTOR)) {
        return nodes.filter((el) => this.withinSameLiveView(el, parent));
      } else {
        return nodes;
      }
    },
    withinSameLiveView(node, parent) {
      while (node = node.parentNode) {
        if (node.isSameNode(parent)) {
          return true;
        }
        if (node.getAttribute(PHX_SESSION) !== null) {
          return false;
        }
      }
    },
    private(el, key) {
      return el[PHX_PRIVATE] && el[PHX_PRIVATE][key];
    },
    deletePrivate(el, key) {
      el[PHX_PRIVATE] && delete el[PHX_PRIVATE][key];
    },
    putPrivate(el, key, value) {
      if (!el[PHX_PRIVATE]) {
        el[PHX_PRIVATE] = {};
      }
      el[PHX_PRIVATE][key] = value;
    },
    updatePrivate(el, key, defaultVal, updateFunc) {
      let existing = this.private(el, key);
      if (existing === void 0) {
        this.putPrivate(el, key, updateFunc(defaultVal));
      } else {
        this.putPrivate(el, key, updateFunc(existing));
      }
    },
    copyPrivates(target, source) {
      if (source[PHX_PRIVATE]) {
        target[PHX_PRIVATE] = source[PHX_PRIVATE];
      }
    },
    putTitle(str) {
      let titleEl = document.querySelector("title");
      if (titleEl) {
        let { prefix, suffix } = titleEl.dataset;
        document.title = `${prefix || ""}${str}${suffix || ""}`;
      } else {
        document.title = str;
      }
    },
    debounce(el, event, phxDebounce, defaultDebounce, phxThrottle, defaultThrottle, asyncFilter, callback) {
      let debounce = el.getAttribute(phxDebounce);
      let throttle = el.getAttribute(phxThrottle);
      if (debounce === "") {
        debounce = defaultDebounce;
      }
      if (throttle === "") {
        throttle = defaultThrottle;
      }
      let value = debounce || throttle;
      switch (value) {
        case null:
          return callback();
        case "blur":
          if (this.once(el, "debounce-blur")) {
            el.addEventListener("blur", () => callback());
          }
          return;
        default:
          let timeout = parseInt(value);
          let trigger = () => throttle ? this.deletePrivate(el, THROTTLED) : callback();
          let currentCycle = this.incCycle(el, DEBOUNCE_TRIGGER, trigger);
          if (isNaN(timeout)) {
            return logError(`invalid throttle/debounce value: ${value}`);
          }
          if (throttle) {
            let newKeyDown = false;
            if (event.type === "keydown") {
              let prevKey = this.private(el, DEBOUNCE_PREV_KEY);
              this.putPrivate(el, DEBOUNCE_PREV_KEY, event.key);
              newKeyDown = prevKey !== event.key;
            }
            if (!newKeyDown && this.private(el, THROTTLED)) {
              return false;
            } else {
              callback();
              this.putPrivate(el, THROTTLED, true);
              setTimeout(() => {
                if (asyncFilter()) {
                  this.triggerCycle(el, DEBOUNCE_TRIGGER);
                }
              }, timeout);
            }
          } else {
            setTimeout(() => {
              if (asyncFilter()) {
                this.triggerCycle(el, DEBOUNCE_TRIGGER, currentCycle);
              }
            }, timeout);
          }
          let form = el.form;
          if (form && this.once(form, "bind-debounce")) {
            form.addEventListener("submit", () => {
              Array.from(new FormData(form).entries(), ([name]) => {
                let input = form.querySelector(`[name="${name}"]`);
                this.incCycle(input, DEBOUNCE_TRIGGER);
                this.deletePrivate(input, THROTTLED);
              });
            });
          }
          if (this.once(el, "bind-debounce")) {
            el.addEventListener("blur", () => this.triggerCycle(el, DEBOUNCE_TRIGGER));
          }
      }
    },
    triggerCycle(el, key, currentCycle) {
      let [cycle, trigger] = this.private(el, key);
      if (!currentCycle) {
        currentCycle = cycle;
      }
      if (currentCycle === cycle) {
        this.incCycle(el, key);
        trigger();
      }
    },
    once(el, key) {
      if (this.private(el, key) === true) {
        return false;
      }
      this.putPrivate(el, key, true);
      return true;
    },
    incCycle(el, key, trigger = function() {
    }) {
      let [currentCycle] = this.private(el, key) || [0, trigger];
      currentCycle++;
      this.putPrivate(el, key, [currentCycle, trigger]);
      return currentCycle;
    },
    discardError(container, el, phxFeedbackFor) {
      let field = el.getAttribute && el.getAttribute(phxFeedbackFor);
      let input = field && container.querySelector(`[id="${field}"], [name="${field}"], [name="${field}[]"]`);
      if (!input) {
        return;
      }
      if (!(this.private(input, PHX_HAS_FOCUSED) || this.private(input, PHX_HAS_SUBMITTED))) {
        el.classList.add(PHX_NO_FEEDBACK_CLASS);
      }
    },
    resetForm(form, phxFeedbackFor) {
      Array.from(form.elements).forEach((input) => {
        let query = `[${phxFeedbackFor}="${input.id}"],
                   [${phxFeedbackFor}="${input.name}"],
                   [${phxFeedbackFor}="${input.name.replace(/\[\]$/, "")}"]`;
        this.deletePrivate(input, PHX_HAS_FOCUSED);
        this.deletePrivate(input, PHX_HAS_SUBMITTED);
        this.all(document, query, (feedbackEl) => {
          feedbackEl.classList.add(PHX_NO_FEEDBACK_CLASS);
        });
      });
    },
    showError(inputEl, phxFeedbackFor) {
      if (inputEl.id || inputEl.name) {
        this.all(inputEl.form, `[${phxFeedbackFor}="${inputEl.id}"], [${phxFeedbackFor}="${inputEl.name}"]`, (el) => {
          this.removeClass(el, PHX_NO_FEEDBACK_CLASS);
        });
      }
    },
    isPhxChild(node) {
      return node.getAttribute && node.getAttribute(PHX_PARENT_ID);
    },
    isPhxSticky(node) {
      return node.getAttribute && node.getAttribute(PHX_STICKY) !== null;
    },
    firstPhxChild(el) {
      return this.isPhxChild(el) ? el : this.all(el, `[${PHX_PARENT_ID}]`)[0];
    },
    dispatchEvent(target, name, opts = {}) {
      let bubbles = opts.bubbles === void 0 ? true : !!opts.bubbles;
      let eventOpts = { bubbles, cancelable: true, detail: opts.detail || {} };
      let event = name === "click" ? new MouseEvent("click", eventOpts) : new CustomEvent(name, eventOpts);
      target.dispatchEvent(event);
    },
    cloneNode(node, html) {
      if (typeof html === "undefined") {
        return node.cloneNode(true);
      } else {
        let cloned = node.cloneNode(false);
        cloned.innerHTML = html;
        return cloned;
      }
    },
    mergeAttrs(target, source, opts = {}) {
      let exclude = opts.exclude || [];
      let isIgnored = opts.isIgnored;
      let sourceAttrs = source.attributes;
      for (let i2 = sourceAttrs.length - 1; i2 >= 0; i2--) {
        let name = sourceAttrs[i2].name;
        if (exclude.indexOf(name) < 0) {
          target.setAttribute(name, source.getAttribute(name));
        }
      }
      let targetAttrs = target.attributes;
      for (let i2 = targetAttrs.length - 1; i2 >= 0; i2--) {
        let name = targetAttrs[i2].name;
        if (isIgnored) {
          if (name.startsWith("data-") && !source.hasAttribute(name)) {
            target.removeAttribute(name);
          }
        } else {
          if (!source.hasAttribute(name)) {
            target.removeAttribute(name);
          }
        }
      }
    },
    mergeFocusedInput(target, source) {
      if (!(target instanceof HTMLSelectElement)) {
        DOM.mergeAttrs(target, source, { exclude: ["value"] });
      }
      if (source.readOnly) {
        target.setAttribute("readonly", true);
      } else {
        target.removeAttribute("readonly");
      }
    },
    hasSelectionRange(el) {
      return el.setSelectionRange && (el.type === "text" || el.type === "textarea");
    },
    restoreFocus(focused, selectionStart, selectionEnd) {
      if (!DOM.isTextualInput(focused)) {
        return;
      }
      let wasFocused = focused.matches(":focus");
      if (focused.readOnly) {
        focused.blur();
      }
      if (!wasFocused) {
        focused.focus();
      }
      if (this.hasSelectionRange(focused)) {
        focused.setSelectionRange(selectionStart, selectionEnd);
      }
    },
    isFormInput(el) {
      return /^(?:input|select|textarea)$/i.test(el.tagName) && el.type !== "button";
    },
    syncAttrsToProps(el) {
      if (el instanceof HTMLInputElement && CHECKABLE_INPUTS.indexOf(el.type.toLocaleLowerCase()) >= 0) {
        el.checked = el.getAttribute("checked") !== null;
      }
    },
    isTextualInput(el) {
      return FOCUSABLE_INPUTS.indexOf(el.type) >= 0;
    },
    isNowTriggerFormExternal(el, phxTriggerExternal) {
      return el.getAttribute && el.getAttribute(phxTriggerExternal) !== null;
    },
    syncPendingRef(fromEl, toEl, disableWith) {
      let ref = fromEl.getAttribute(PHX_REF);
      if (ref === null) {
        return true;
      }
      let refSrc = fromEl.getAttribute(PHX_REF_SRC);
      if (DOM.isFormInput(fromEl) || fromEl.getAttribute(disableWith) !== null) {
        if (DOM.isUploadInput(fromEl)) {
          DOM.mergeAttrs(fromEl, toEl, { isIgnored: true });
        }
        DOM.putPrivate(fromEl, PHX_REF, toEl);
        return false;
      } else {
        PHX_EVENT_CLASSES.forEach((className) => {
          fromEl.classList.contains(className) && toEl.classList.add(className);
        });
        toEl.setAttribute(PHX_REF, ref);
        toEl.setAttribute(PHX_REF_SRC, refSrc);
        return true;
      }
    },
    cleanChildNodes(container, phxUpdate) {
      if (DOM.isPhxUpdate(container, phxUpdate, ["append", "prepend"])) {
        let toRemove = [];
        container.childNodes.forEach((childNode) => {
          if (!childNode.id) {
            let isEmptyTextNode = childNode.nodeType === Node.TEXT_NODE && childNode.nodeValue.trim() === "";
            if (!isEmptyTextNode) {
              logError(`only HTML element tags with an id are allowed inside containers with phx-update.

removing illegal node: "${(childNode.outerHTML || childNode.nodeValue).trim()}"

`);
            }
            toRemove.push(childNode);
          }
        });
        toRemove.forEach((childNode) => childNode.remove());
      }
    },
    replaceRootContainer(container, tagName, attrs) {
      let retainedAttrs = /* @__PURE__ */ new Set(["id", PHX_SESSION, PHX_STATIC, PHX_MAIN, PHX_ROOT_ID]);
      if (container.tagName.toLowerCase() === tagName.toLowerCase()) {
        Array.from(container.attributes).filter((attr) => !retainedAttrs.has(attr.name.toLowerCase())).forEach((attr) => container.removeAttribute(attr.name));
        Object.keys(attrs).filter((name) => !retainedAttrs.has(name.toLowerCase())).forEach((attr) => container.setAttribute(attr, attrs[attr]));
        return container;
      } else {
        let newContainer = document.createElement(tagName);
        Object.keys(attrs).forEach((attr) => newContainer.setAttribute(attr, attrs[attr]));
        retainedAttrs.forEach((attr) => newContainer.setAttribute(attr, container.getAttribute(attr)));
        newContainer.innerHTML = container.innerHTML;
        container.replaceWith(newContainer);
        return newContainer;
      }
    },
    getSticky(el, name, defaultVal) {
      let op = (DOM.private(el, "sticky") || []).find(([existingName]) => name === existingName);
      if (op) {
        let [_name, _op, stashedResult] = op;
        return stashedResult;
      } else {
        return typeof defaultVal === "function" ? defaultVal() : defaultVal;
      }
    },
    deleteSticky(el, name) {
      this.updatePrivate(el, "sticky", [], (ops) => {
        return ops.filter(([existingName, _2]) => existingName !== name);
      });
    },
    putSticky(el, name, op) {
      let stashedResult = op(el);
      this.updatePrivate(el, "sticky", [], (ops) => {
        let existingIndex = ops.findIndex(([existingName]) => name === existingName);
        if (existingIndex >= 0) {
          ops[existingIndex] = [name, op, stashedResult];
        } else {
          ops.push([name, op, stashedResult]);
        }
        return ops;
      });
    },
    applyStickyOperations(el) {
      let ops = DOM.private(el, "sticky");
      if (!ops) {
        return;
      }
      ops.forEach(([name, op, _stashed]) => this.putSticky(el, name, op));
    }
  };
  var dom_default = DOM;
  var UploadEntry = class {
    static isActive(fileEl, file) {
      let isNew = file._phxRef === void 0;
      let activeRefs = fileEl.getAttribute(PHX_ACTIVE_ENTRY_REFS).split(",");
      let isActive = activeRefs.indexOf(LiveUploader.genFileRef(file)) >= 0;
      return file.size > 0 && (isNew || isActive);
    }
    static isPreflighted(fileEl, file) {
      let preflightedRefs = fileEl.getAttribute(PHX_PREFLIGHTED_REFS).split(",");
      let isPreflighted = preflightedRefs.indexOf(LiveUploader.genFileRef(file)) >= 0;
      return isPreflighted && this.isActive(fileEl, file);
    }
    constructor(fileEl, file, view) {
      this.ref = LiveUploader.genFileRef(file);
      this.fileEl = fileEl;
      this.file = file;
      this.view = view;
      this.meta = null;
      this._isCancelled = false;
      this._isDone = false;
      this._progress = 0;
      this._lastProgressSent = -1;
      this._onDone = function() {
      };
      this._onElUpdated = this.onElUpdated.bind(this);
      this.fileEl.addEventListener(PHX_LIVE_FILE_UPDATED, this._onElUpdated);
    }
    metadata() {
      return this.meta;
    }
    progress(progress) {
      this._progress = Math.floor(progress);
      if (this._progress > this._lastProgressSent) {
        if (this._progress >= 100) {
          this._progress = 100;
          this._lastProgressSent = 100;
          this._isDone = true;
          this.view.pushFileProgress(this.fileEl, this.ref, 100, () => {
            LiveUploader.untrackFile(this.fileEl, this.file);
            this._onDone();
          });
        } else {
          this._lastProgressSent = this._progress;
          this.view.pushFileProgress(this.fileEl, this.ref, this._progress);
        }
      }
    }
    cancel() {
      this._isCancelled = true;
      this._isDone = true;
      this._onDone();
    }
    isDone() {
      return this._isDone;
    }
    error(reason = "failed") {
      this.fileEl.removeEventListener(PHX_LIVE_FILE_UPDATED, this._onElUpdated);
      this.view.pushFileProgress(this.fileEl, this.ref, { error: reason });
      LiveUploader.clearFiles(this.fileEl);
    }
    onDone(callback) {
      this._onDone = () => {
        this.fileEl.removeEventListener(PHX_LIVE_FILE_UPDATED, this._onElUpdated);
        callback();
      };
    }
    onElUpdated() {
      let activeRefs = this.fileEl.getAttribute(PHX_ACTIVE_ENTRY_REFS).split(",");
      if (activeRefs.indexOf(this.ref) === -1) {
        this.cancel();
      }
    }
    toPreflightPayload() {
      return {
        last_modified: this.file.lastModified,
        name: this.file.name,
        relative_path: this.file.webkitRelativePath,
        size: this.file.size,
        type: this.file.type,
        ref: this.ref
      };
    }
    uploader(uploaders) {
      if (this.meta.uploader) {
        let callback = uploaders[this.meta.uploader] || logError(`no uploader configured for ${this.meta.uploader}`);
        return { name: this.meta.uploader, callback };
      } else {
        return { name: "channel", callback: channelUploader };
      }
    }
    zipPostFlight(resp) {
      this.meta = resp.entries[this.ref];
      if (!this.meta) {
        logError(`no preflight upload response returned with ref ${this.ref}`, { input: this.fileEl, response: resp });
      }
    }
  };
  var liveUploaderFileRef = 0;
  var LiveUploader = class {
    static genFileRef(file) {
      let ref = file._phxRef;
      if (ref !== void 0) {
        return ref;
      } else {
        file._phxRef = (liveUploaderFileRef++).toString();
        return file._phxRef;
      }
    }
    static getEntryDataURL(inputEl, ref, callback) {
      let file = this.activeFiles(inputEl).find((file2) => this.genFileRef(file2) === ref);
      callback(URL.createObjectURL(file));
    }
    static hasUploadsInProgress(formEl) {
      let active = 0;
      dom_default.findUploadInputs(formEl).forEach((input) => {
        if (input.getAttribute(PHX_PREFLIGHTED_REFS) !== input.getAttribute(PHX_DONE_REFS)) {
          active++;
        }
      });
      return active > 0;
    }
    static serializeUploads(inputEl) {
      let files = this.activeFiles(inputEl);
      let fileData = {};
      files.forEach((file) => {
        let entry = { path: inputEl.name };
        let uploadRef = inputEl.getAttribute(PHX_UPLOAD_REF);
        fileData[uploadRef] = fileData[uploadRef] || [];
        entry.ref = this.genFileRef(file);
        entry.last_modified = file.lastModified;
        entry.name = file.name || entry.ref;
        entry.relative_path = file.webkitRelativePath;
        entry.type = file.type;
        entry.size = file.size;
        fileData[uploadRef].push(entry);
      });
      return fileData;
    }
    static clearFiles(inputEl) {
      inputEl.value = null;
      inputEl.removeAttribute(PHX_UPLOAD_REF);
      dom_default.putPrivate(inputEl, "files", []);
    }
    static untrackFile(inputEl, file) {
      dom_default.putPrivate(inputEl, "files", dom_default.private(inputEl, "files").filter((f2) => !Object.is(f2, file)));
    }
    static trackFiles(inputEl, files, dataTransfer) {
      if (inputEl.getAttribute("multiple") !== null) {
        let newFiles = files.filter((file) => !this.activeFiles(inputEl).find((f2) => Object.is(f2, file)));
        dom_default.putPrivate(inputEl, "files", this.activeFiles(inputEl).concat(newFiles));
        inputEl.value = null;
      } else {
        if (dataTransfer && dataTransfer.files.length > 0) {
          inputEl.files = dataTransfer.files;
        }
        dom_default.putPrivate(inputEl, "files", files);
      }
    }
    static activeFileInputs(formEl) {
      let fileInputs = dom_default.findUploadInputs(formEl);
      return Array.from(fileInputs).filter((el) => el.files && this.activeFiles(el).length > 0);
    }
    static activeFiles(input) {
      return (dom_default.private(input, "files") || []).filter((f2) => UploadEntry.isActive(input, f2));
    }
    static inputsAwaitingPreflight(formEl) {
      let fileInputs = dom_default.findUploadInputs(formEl);
      return Array.from(fileInputs).filter((input) => this.filesAwaitingPreflight(input).length > 0);
    }
    static filesAwaitingPreflight(input) {
      return this.activeFiles(input).filter((f2) => !UploadEntry.isPreflighted(input, f2));
    }
    constructor(inputEl, view, onComplete) {
      this.view = view;
      this.onComplete = onComplete;
      this._entries = Array.from(LiveUploader.filesAwaitingPreflight(inputEl) || []).map((file) => new UploadEntry(inputEl, file, view));
      this.numEntriesInProgress = this._entries.length;
    }
    entries() {
      return this._entries;
    }
    initAdapterUpload(resp, onError, liveSocket2) {
      this._entries = this._entries.map((entry) => {
        entry.zipPostFlight(resp);
        entry.onDone(() => {
          this.numEntriesInProgress--;
          if (this.numEntriesInProgress === 0) {
            this.onComplete();
          }
        });
        return entry;
      });
      let groupedEntries = this._entries.reduce((acc, entry) => {
        let { name, callback } = entry.uploader(liveSocket2.uploaders);
        acc[name] = acc[name] || { callback, entries: [] };
        acc[name].entries.push(entry);
        return acc;
      }, {});
      for (let name in groupedEntries) {
        let { callback, entries } = groupedEntries[name];
        callback(entries, onError, resp, liveSocket2);
      }
    }
  };
  var ARIA = {
    focusMain() {
      let target = document.querySelector("main h1, main, h1");
      if (target) {
        let origTabIndex = target.tabIndex;
        target.tabIndex = -1;
        target.focus();
        target.tabIndex = origTabIndex;
      }
    },
    anyOf(instance, classes) {
      return classes.find((name) => instance instanceof name);
    },
    isFocusable(el, interactiveOnly) {
      return el instanceof HTMLAnchorElement && el.rel !== "ignore" || el instanceof HTMLAreaElement && el.href !== void 0 || !el.disabled && this.anyOf(el, [HTMLInputElement, HTMLSelectElement, HTMLTextAreaElement, HTMLButtonElement]) || el instanceof HTMLIFrameElement || (el.tabIndex > 0 || !interactiveOnly && el.tabIndex === 0 && el.getAttribute("tabindex") !== null && el.getAttribute("aria-hidden") !== "true");
    },
    attemptFocus(el, interactiveOnly) {
      if (this.isFocusable(el, interactiveOnly)) {
        try {
          el.focus();
        } catch (e5) {
        }
      }
      return !!document.activeElement && document.activeElement.isSameNode(el);
    },
    focusFirstInteractive(el) {
      let child = el.firstElementChild;
      while (child) {
        if (this.attemptFocus(child, true) || this.focusFirstInteractive(child, true)) {
          return true;
        }
        child = child.nextElementSibling;
      }
    },
    focusFirst(el) {
      let child = el.firstElementChild;
      while (child) {
        if (this.attemptFocus(child) || this.focusFirst(child)) {
          return true;
        }
        child = child.nextElementSibling;
      }
    },
    focusLast(el) {
      let child = el.lastElementChild;
      while (child) {
        if (this.attemptFocus(child) || this.focusLast(child)) {
          return true;
        }
        child = child.previousElementSibling;
      }
    }
  };
  var aria_default = ARIA;
  var Hooks = {
    LiveFileUpload: {
      activeRefs() {
        return this.el.getAttribute(PHX_ACTIVE_ENTRY_REFS);
      },
      preflightedRefs() {
        return this.el.getAttribute(PHX_PREFLIGHTED_REFS);
      },
      mounted() {
        this.preflightedWas = this.preflightedRefs();
      },
      updated() {
        let newPreflights = this.preflightedRefs();
        if (this.preflightedWas !== newPreflights) {
          this.preflightedWas = newPreflights;
          if (newPreflights === "") {
            this.__view.cancelSubmit(this.el.form);
          }
        }
        if (this.activeRefs() === "") {
          this.el.value = null;
        }
        this.el.dispatchEvent(new CustomEvent(PHX_LIVE_FILE_UPDATED));
      }
    },
    LiveImgPreview: {
      mounted() {
        this.ref = this.el.getAttribute("data-phx-entry-ref");
        this.inputEl = document.getElementById(this.el.getAttribute(PHX_UPLOAD_REF));
        LiveUploader.getEntryDataURL(this.inputEl, this.ref, (url) => {
          this.url = url;
          this.el.src = url;
        });
      },
      destroyed() {
        URL.revokeObjectURL(this.url);
      }
    },
    FocusWrap: {
      mounted() {
        this.focusStart = this.el.firstElementChild;
        this.focusEnd = this.el.lastElementChild;
        this.focusStart.addEventListener("focus", () => aria_default.focusLast(this.el));
        this.focusEnd.addEventListener("focus", () => aria_default.focusFirst(this.el));
        this.el.addEventListener("phx:show-end", () => this.el.focus());
        if (window.getComputedStyle(this.el).display !== "none") {
          aria_default.focusFirst(this.el);
        }
      }
    }
  };
  var hooks_default = Hooks;
  var DOMPostMorphRestorer = class {
    constructor(containerBefore, containerAfter, updateType) {
      let idsBefore = /* @__PURE__ */ new Set();
      let idsAfter = new Set([...containerAfter.children].map((child) => child.id));
      let elementsToModify = [];
      Array.from(containerBefore.children).forEach((child) => {
        if (child.id) {
          idsBefore.add(child.id);
          if (idsAfter.has(child.id)) {
            let previousElementId = child.previousElementSibling && child.previousElementSibling.id;
            elementsToModify.push({ elementId: child.id, previousElementId });
          }
        }
      });
      this.containerId = containerAfter.id;
      this.updateType = updateType;
      this.elementsToModify = elementsToModify;
      this.elementIdsToAdd = [...idsAfter].filter((id) => !idsBefore.has(id));
    }
    perform() {
      let container = dom_default.byId(this.containerId);
      this.elementsToModify.forEach((elementToModify) => {
        if (elementToModify.previousElementId) {
          maybe(document.getElementById(elementToModify.previousElementId), (previousElem) => {
            maybe(document.getElementById(elementToModify.elementId), (elem) => {
              let isInRightPlace = elem.previousElementSibling && elem.previousElementSibling.id == previousElem.id;
              if (!isInRightPlace) {
                previousElem.insertAdjacentElement("afterend", elem);
              }
            });
          });
        } else {
          maybe(document.getElementById(elementToModify.elementId), (elem) => {
            let isInRightPlace = elem.previousElementSibling == null;
            if (!isInRightPlace) {
              container.insertAdjacentElement("afterbegin", elem);
            }
          });
        }
      });
      if (this.updateType == "prepend") {
        this.elementIdsToAdd.reverse().forEach((elemId) => {
          maybe(document.getElementById(elemId), (elem) => container.insertAdjacentElement("afterbegin", elem));
        });
      }
    }
  };
  var DOCUMENT_FRAGMENT_NODE = 11;
  function morphAttrs(fromNode, toNode) {
    var toNodeAttrs = toNode.attributes;
    var attr;
    var attrName;
    var attrNamespaceURI;
    var attrValue;
    var fromValue;
    if (toNode.nodeType === DOCUMENT_FRAGMENT_NODE || fromNode.nodeType === DOCUMENT_FRAGMENT_NODE) {
      return;
    }
    for (var i2 = toNodeAttrs.length - 1; i2 >= 0; i2--) {
      attr = toNodeAttrs[i2];
      attrName = attr.name;
      attrNamespaceURI = attr.namespaceURI;
      attrValue = attr.value;
      if (attrNamespaceURI) {
        attrName = attr.localName || attrName;
        fromValue = fromNode.getAttributeNS(attrNamespaceURI, attrName);
        if (fromValue !== attrValue) {
          if (attr.prefix === "xmlns") {
            attrName = attr.name;
          }
          fromNode.setAttributeNS(attrNamespaceURI, attrName, attrValue);
        }
      } else {
        fromValue = fromNode.getAttribute(attrName);
        if (fromValue !== attrValue) {
          fromNode.setAttribute(attrName, attrValue);
        }
      }
    }
    var fromNodeAttrs = fromNode.attributes;
    for (var d2 = fromNodeAttrs.length - 1; d2 >= 0; d2--) {
      attr = fromNodeAttrs[d2];
      attrName = attr.name;
      attrNamespaceURI = attr.namespaceURI;
      if (attrNamespaceURI) {
        attrName = attr.localName || attrName;
        if (!toNode.hasAttributeNS(attrNamespaceURI, attrName)) {
          fromNode.removeAttributeNS(attrNamespaceURI, attrName);
        }
      } else {
        if (!toNode.hasAttribute(attrName)) {
          fromNode.removeAttribute(attrName);
        }
      }
    }
  }
  var range;
  var NS_XHTML = "http://www.w3.org/1999/xhtml";
  var doc = typeof document === "undefined" ? void 0 : document;
  var HAS_TEMPLATE_SUPPORT = !!doc && "content" in doc.createElement("template");
  var HAS_RANGE_SUPPORT = !!doc && doc.createRange && "createContextualFragment" in doc.createRange();
  function createFragmentFromTemplate(str) {
    var template = doc.createElement("template");
    template.innerHTML = str;
    return template.content.childNodes[0];
  }
  function createFragmentFromRange(str) {
    if (!range) {
      range = doc.createRange();
      range.selectNode(doc.body);
    }
    var fragment = range.createContextualFragment(str);
    return fragment.childNodes[0];
  }
  function createFragmentFromWrap(str) {
    var fragment = doc.createElement("body");
    fragment.innerHTML = str;
    return fragment.childNodes[0];
  }
  function toElement(str) {
    str = str.trim();
    if (HAS_TEMPLATE_SUPPORT) {
      return createFragmentFromTemplate(str);
    } else if (HAS_RANGE_SUPPORT) {
      return createFragmentFromRange(str);
    }
    return createFragmentFromWrap(str);
  }
  function compareNodeNames(fromEl, toEl) {
    var fromNodeName = fromEl.nodeName;
    var toNodeName = toEl.nodeName;
    var fromCodeStart, toCodeStart;
    if (fromNodeName === toNodeName) {
      return true;
    }
    fromCodeStart = fromNodeName.charCodeAt(0);
    toCodeStart = toNodeName.charCodeAt(0);
    if (fromCodeStart <= 90 && toCodeStart >= 97) {
      return fromNodeName === toNodeName.toUpperCase();
    } else if (toCodeStart <= 90 && fromCodeStart >= 97) {
      return toNodeName === fromNodeName.toUpperCase();
    } else {
      return false;
    }
  }
  function createElementNS(name, namespaceURI) {
    return !namespaceURI || namespaceURI === NS_XHTML ? doc.createElement(name) : doc.createElementNS(namespaceURI, name);
  }
  function moveChildren(fromEl, toEl) {
    var curChild = fromEl.firstChild;
    while (curChild) {
      var nextChild = curChild.nextSibling;
      toEl.appendChild(curChild);
      curChild = nextChild;
    }
    return toEl;
  }
  function syncBooleanAttrProp(fromEl, toEl, name) {
    if (fromEl[name] !== toEl[name]) {
      fromEl[name] = toEl[name];
      if (fromEl[name]) {
        fromEl.setAttribute(name, "");
      } else {
        fromEl.removeAttribute(name);
      }
    }
  }
  var specialElHandlers = {
    OPTION: function(fromEl, toEl) {
      var parentNode = fromEl.parentNode;
      if (parentNode) {
        var parentName = parentNode.nodeName.toUpperCase();
        if (parentName === "OPTGROUP") {
          parentNode = parentNode.parentNode;
          parentName = parentNode && parentNode.nodeName.toUpperCase();
        }
        if (parentName === "SELECT" && !parentNode.hasAttribute("multiple")) {
          if (fromEl.hasAttribute("selected") && !toEl.selected) {
            fromEl.setAttribute("selected", "selected");
            fromEl.removeAttribute("selected");
          }
          parentNode.selectedIndex = -1;
        }
      }
      syncBooleanAttrProp(fromEl, toEl, "selected");
    },
    INPUT: function(fromEl, toEl) {
      syncBooleanAttrProp(fromEl, toEl, "checked");
      syncBooleanAttrProp(fromEl, toEl, "disabled");
      if (fromEl.value !== toEl.value) {
        fromEl.value = toEl.value;
      }
      if (!toEl.hasAttribute("value")) {
        fromEl.removeAttribute("value");
      }
    },
    TEXTAREA: function(fromEl, toEl) {
      var newValue = toEl.value;
      if (fromEl.value !== newValue) {
        fromEl.value = newValue;
      }
      var firstChild = fromEl.firstChild;
      if (firstChild) {
        var oldValue = firstChild.nodeValue;
        if (oldValue == newValue || !newValue && oldValue == fromEl.placeholder) {
          return;
        }
        firstChild.nodeValue = newValue;
      }
    },
    SELECT: function(fromEl, toEl) {
      if (!toEl.hasAttribute("multiple")) {
        var selectedIndex = -1;
        var i2 = 0;
        var curChild = fromEl.firstChild;
        var optgroup;
        var nodeName;
        while (curChild) {
          nodeName = curChild.nodeName && curChild.nodeName.toUpperCase();
          if (nodeName === "OPTGROUP") {
            optgroup = curChild;
            curChild = optgroup.firstChild;
          } else {
            if (nodeName === "OPTION") {
              if (curChild.hasAttribute("selected")) {
                selectedIndex = i2;
                break;
              }
              i2++;
            }
            curChild = curChild.nextSibling;
            if (!curChild && optgroup) {
              curChild = optgroup.nextSibling;
              optgroup = null;
            }
          }
        }
        fromEl.selectedIndex = selectedIndex;
      }
    }
  };
  var ELEMENT_NODE = 1;
  var DOCUMENT_FRAGMENT_NODE$1 = 11;
  var TEXT_NODE = 3;
  var COMMENT_NODE = 8;
  function noop() {
  }
  function defaultGetNodeKey(node) {
    if (node) {
      return node.getAttribute && node.getAttribute("id") || node.id;
    }
  }
  function morphdomFactory(morphAttrs2) {
    return function morphdom2(fromNode, toNode, options) {
      if (!options) {
        options = {};
      }
      if (typeof toNode === "string") {
        if (fromNode.nodeName === "#document" || fromNode.nodeName === "HTML" || fromNode.nodeName === "BODY") {
          var toNodeHtml = toNode;
          toNode = doc.createElement("html");
          toNode.innerHTML = toNodeHtml;
        } else {
          toNode = toElement(toNode);
        }
      } else if (toNode.nodeType === DOCUMENT_FRAGMENT_NODE$1) {
        toNode = toNode.firstElementChild;
      }
      var getNodeKey = options.getNodeKey || defaultGetNodeKey;
      var onBeforeNodeAdded = options.onBeforeNodeAdded || noop;
      var onNodeAdded = options.onNodeAdded || noop;
      var onBeforeElUpdated = options.onBeforeElUpdated || noop;
      var onElUpdated = options.onElUpdated || noop;
      var onBeforeNodeDiscarded = options.onBeforeNodeDiscarded || noop;
      var onNodeDiscarded = options.onNodeDiscarded || noop;
      var onBeforeElChildrenUpdated = options.onBeforeElChildrenUpdated || noop;
      var skipFromChildren = options.skipFromChildren || noop;
      var addChild = options.addChild || function(parent, child) {
        return parent.appendChild(child);
      };
      var childrenOnly = options.childrenOnly === true;
      var fromNodesLookup = /* @__PURE__ */ Object.create(null);
      var keyedRemovalList = [];
      function addKeyedRemoval(key) {
        keyedRemovalList.push(key);
      }
      function walkDiscardedChildNodes(node, skipKeyedNodes) {
        if (node.nodeType === ELEMENT_NODE) {
          var curChild = node.firstChild;
          while (curChild) {
            var key = void 0;
            if (skipKeyedNodes && (key = getNodeKey(curChild))) {
              addKeyedRemoval(key);
            } else {
              onNodeDiscarded(curChild);
              if (curChild.firstChild) {
                walkDiscardedChildNodes(curChild, skipKeyedNodes);
              }
            }
            curChild = curChild.nextSibling;
          }
        }
      }
      function removeNode(node, parentNode, skipKeyedNodes) {
        if (onBeforeNodeDiscarded(node) === false) {
          return;
        }
        if (parentNode) {
          parentNode.removeChild(node);
        }
        onNodeDiscarded(node);
        walkDiscardedChildNodes(node, skipKeyedNodes);
      }
      function indexTree(node) {
        if (node.nodeType === ELEMENT_NODE || node.nodeType === DOCUMENT_FRAGMENT_NODE$1) {
          var curChild = node.firstChild;
          while (curChild) {
            var key = getNodeKey(curChild);
            if (key) {
              fromNodesLookup[key] = curChild;
            }
            indexTree(curChild);
            curChild = curChild.nextSibling;
          }
        }
      }
      indexTree(fromNode);
      function handleNodeAdded(el) {
        onNodeAdded(el);
        var curChild = el.firstChild;
        while (curChild) {
          var nextSibling = curChild.nextSibling;
          var key = getNodeKey(curChild);
          if (key) {
            var unmatchedFromEl = fromNodesLookup[key];
            if (unmatchedFromEl && compareNodeNames(curChild, unmatchedFromEl)) {
              curChild.parentNode.replaceChild(unmatchedFromEl, curChild);
              morphEl(unmatchedFromEl, curChild);
            } else {
              handleNodeAdded(curChild);
            }
          } else {
            handleNodeAdded(curChild);
          }
          curChild = nextSibling;
        }
      }
      function cleanupFromEl(fromEl, curFromNodeChild, curFromNodeKey) {
        while (curFromNodeChild) {
          var fromNextSibling = curFromNodeChild.nextSibling;
          if (curFromNodeKey = getNodeKey(curFromNodeChild)) {
            addKeyedRemoval(curFromNodeKey);
          } else {
            removeNode(curFromNodeChild, fromEl, true);
          }
          curFromNodeChild = fromNextSibling;
        }
      }
      function morphEl(fromEl, toEl, childrenOnly2) {
        var toElKey = getNodeKey(toEl);
        if (toElKey) {
          delete fromNodesLookup[toElKey];
        }
        if (!childrenOnly2) {
          if (onBeforeElUpdated(fromEl, toEl) === false) {
            return;
          }
          morphAttrs2(fromEl, toEl);
          onElUpdated(fromEl);
          if (onBeforeElChildrenUpdated(fromEl, toEl) === false) {
            return;
          }
        }
        if (fromEl.nodeName !== "TEXTAREA") {
          morphChildren(fromEl, toEl);
        } else {
          specialElHandlers.TEXTAREA(fromEl, toEl);
        }
      }
      function morphChildren(fromEl, toEl) {
        var skipFrom = skipFromChildren(fromEl);
        var curToNodeChild = toEl.firstChild;
        var curFromNodeChild = fromEl.firstChild;
        var curToNodeKey;
        var curFromNodeKey;
        var fromNextSibling;
        var toNextSibling;
        var matchingFromEl;
        outer:
          while (curToNodeChild) {
            toNextSibling = curToNodeChild.nextSibling;
            curToNodeKey = getNodeKey(curToNodeChild);
            while (!skipFrom && curFromNodeChild) {
              fromNextSibling = curFromNodeChild.nextSibling;
              if (curToNodeChild.isSameNode && curToNodeChild.isSameNode(curFromNodeChild)) {
                curToNodeChild = toNextSibling;
                curFromNodeChild = fromNextSibling;
                continue outer;
              }
              curFromNodeKey = getNodeKey(curFromNodeChild);
              var curFromNodeType = curFromNodeChild.nodeType;
              var isCompatible = void 0;
              if (curFromNodeType === curToNodeChild.nodeType) {
                if (curFromNodeType === ELEMENT_NODE) {
                  if (curToNodeKey) {
                    if (curToNodeKey !== curFromNodeKey) {
                      if (matchingFromEl = fromNodesLookup[curToNodeKey]) {
                        if (fromNextSibling === matchingFromEl) {
                          isCompatible = false;
                        } else {
                          fromEl.insertBefore(matchingFromEl, curFromNodeChild);
                          if (curFromNodeKey) {
                            addKeyedRemoval(curFromNodeKey);
                          } else {
                            removeNode(curFromNodeChild, fromEl, true);
                          }
                          curFromNodeChild = matchingFromEl;
                        }
                      } else {
                        isCompatible = false;
                      }
                    }
                  } else if (curFromNodeKey) {
                    isCompatible = false;
                  }
                  isCompatible = isCompatible !== false && compareNodeNames(curFromNodeChild, curToNodeChild);
                  if (isCompatible) {
                    morphEl(curFromNodeChild, curToNodeChild);
                  }
                } else if (curFromNodeType === TEXT_NODE || curFromNodeType == COMMENT_NODE) {
                  isCompatible = true;
                  if (curFromNodeChild.nodeValue !== curToNodeChild.nodeValue) {
                    curFromNodeChild.nodeValue = curToNodeChild.nodeValue;
                  }
                }
              }
              if (isCompatible) {
                curToNodeChild = toNextSibling;
                curFromNodeChild = fromNextSibling;
                continue outer;
              }
              if (curFromNodeKey) {
                addKeyedRemoval(curFromNodeKey);
              } else {
                removeNode(curFromNodeChild, fromEl, true);
              }
              curFromNodeChild = fromNextSibling;
            }
            if (curToNodeKey && (matchingFromEl = fromNodesLookup[curToNodeKey]) && compareNodeNames(matchingFromEl, curToNodeChild)) {
              if (!skipFrom) {
                addChild(fromEl, matchingFromEl);
              }
              morphEl(matchingFromEl, curToNodeChild);
            } else {
              var onBeforeNodeAddedResult = onBeforeNodeAdded(curToNodeChild);
              if (onBeforeNodeAddedResult !== false) {
                if (onBeforeNodeAddedResult) {
                  curToNodeChild = onBeforeNodeAddedResult;
                }
                if (curToNodeChild.actualize) {
                  curToNodeChild = curToNodeChild.actualize(fromEl.ownerDocument || doc);
                }
                addChild(fromEl, curToNodeChild);
                handleNodeAdded(curToNodeChild);
              }
            }
            curToNodeChild = toNextSibling;
            curFromNodeChild = fromNextSibling;
          }
        cleanupFromEl(fromEl, curFromNodeChild, curFromNodeKey);
        var specialElHandler = specialElHandlers[fromEl.nodeName];
        if (specialElHandler) {
          specialElHandler(fromEl, toEl);
        }
      }
      var morphedNode = fromNode;
      var morphedNodeType = morphedNode.nodeType;
      var toNodeType = toNode.nodeType;
      if (!childrenOnly) {
        if (morphedNodeType === ELEMENT_NODE) {
          if (toNodeType === ELEMENT_NODE) {
            if (!compareNodeNames(fromNode, toNode)) {
              onNodeDiscarded(fromNode);
              morphedNode = moveChildren(fromNode, createElementNS(toNode.nodeName, toNode.namespaceURI));
            }
          } else {
            morphedNode = toNode;
          }
        } else if (morphedNodeType === TEXT_NODE || morphedNodeType === COMMENT_NODE) {
          if (toNodeType === morphedNodeType) {
            if (morphedNode.nodeValue !== toNode.nodeValue) {
              morphedNode.nodeValue = toNode.nodeValue;
            }
            return morphedNode;
          } else {
            morphedNode = toNode;
          }
        }
      }
      if (morphedNode === toNode) {
        onNodeDiscarded(fromNode);
      } else {
        if (toNode.isSameNode && toNode.isSameNode(morphedNode)) {
          return;
        }
        morphEl(morphedNode, toNode, childrenOnly);
        if (keyedRemovalList) {
          for (var i2 = 0, len = keyedRemovalList.length; i2 < len; i2++) {
            var elToRemove = fromNodesLookup[keyedRemovalList[i2]];
            if (elToRemove) {
              removeNode(elToRemove, elToRemove.parentNode, false);
            }
          }
        }
      }
      if (!childrenOnly && morphedNode !== fromNode && fromNode.parentNode) {
        if (morphedNode.actualize) {
          morphedNode = morphedNode.actualize(fromNode.ownerDocument || doc);
        }
        fromNode.parentNode.replaceChild(morphedNode, fromNode);
      }
      return morphedNode;
    };
  }
  var morphdom = morphdomFactory(morphAttrs);
  var morphdom_esm_default = morphdom;
  var DOMPatch = class {
    static patchEl(fromEl, toEl, activeElement) {
      morphdom_esm_default(fromEl, toEl, {
        childrenOnly: false,
        onBeforeElUpdated: (fromEl2, toEl2) => {
          if (activeElement && activeElement.isSameNode(fromEl2) && dom_default.isFormInput(fromEl2)) {
            dom_default.mergeFocusedInput(fromEl2, toEl2);
            return false;
          }
        }
      });
    }
    constructor(view, container, id, html, streams, targetCID) {
      this.view = view;
      this.liveSocket = view.liveSocket;
      this.container = container;
      this.id = id;
      this.rootID = view.root.id;
      this.html = html;
      this.streams = streams;
      this.streamInserts = {};
      this.targetCID = targetCID;
      this.cidPatch = isCid(this.targetCID);
      this.pendingRemoves = [];
      this.phxRemove = this.liveSocket.binding("remove");
      this.callbacks = {
        beforeadded: [],
        beforeupdated: [],
        beforephxChildAdded: [],
        afteradded: [],
        afterupdated: [],
        afterdiscarded: [],
        afterphxChildAdded: [],
        aftertransitionsDiscarded: []
      };
    }
    before(kind, callback) {
      this.callbacks[`before${kind}`].push(callback);
    }
    after(kind, callback) {
      this.callbacks[`after${kind}`].push(callback);
    }
    trackBefore(kind, ...args) {
      this.callbacks[`before${kind}`].forEach((callback) => callback(...args));
    }
    trackAfter(kind, ...args) {
      this.callbacks[`after${kind}`].forEach((callback) => callback(...args));
    }
    markPrunableContentForRemoval() {
      let phxUpdate = this.liveSocket.binding(PHX_UPDATE);
      dom_default.all(this.container, `[${phxUpdate}=${PHX_STREAM}]`, (el) => el.innerHTML = "");
      dom_default.all(this.container, `[${phxUpdate}=append] > *, [${phxUpdate}=prepend] > *`, (el) => {
        el.setAttribute(PHX_PRUNE, "");
      });
    }
    perform() {
      let { view, liveSocket: liveSocket2, container, html } = this;
      let targetContainer = this.isCIDPatch() ? this.targetCIDContainer(html) : container;
      if (this.isCIDPatch() && !targetContainer) {
        return;
      }
      let focused = liveSocket2.getActiveElement();
      let { selectionStart, selectionEnd } = focused && dom_default.hasSelectionRange(focused) ? focused : {};
      let phxUpdate = liveSocket2.binding(PHX_UPDATE);
      let phxFeedbackFor = liveSocket2.binding(PHX_FEEDBACK_FOR);
      let disableWith = liveSocket2.binding(PHX_DISABLE_WITH);
      let phxTriggerExternal = liveSocket2.binding(PHX_TRIGGER_ACTION);
      let added = [];
      let updates = [];
      let appendPrependUpdates = [];
      let externalFormTriggered = null;
      let diffHTML = liveSocket2.time("premorph container prep", () => {
        return this.buildDiffHTML(container, html, phxUpdate, targetContainer);
      });
      this.trackBefore("added", container);
      this.trackBefore("updated", container, container);
      liveSocket2.time("morphdom", () => {
        this.streams.forEach(([inserts, deleteIds]) => {
          this.streamInserts = Object.assign(this.streamInserts, inserts);
          deleteIds.forEach((id) => {
            let child = container.querySelector(`[id="${id}"]`);
            if (child) {
              if (!this.maybePendingRemove(child)) {
                child.remove();
                this.onNodeDiscarded(child);
              }
            }
          });
        });
        morphdom_esm_default(targetContainer, diffHTML, {
          childrenOnly: targetContainer.getAttribute(PHX_COMPONENT) === null,
          getNodeKey: (node) => {
            return dom_default.isPhxDestroyed(node) ? null : node.id;
          },
          skipFromChildren: (from) => {
            return from.getAttribute(phxUpdate) === PHX_STREAM;
          },
          addChild: (parent, child) => {
            let streamAt = child.id ? this.streamInserts[child.id] : void 0;
            if (streamAt === void 0) {
              return parent.appendChild(child);
            }
            if (streamAt === 0) {
              parent.insertAdjacentElement("afterbegin", child);
            } else if (streamAt === -1) {
              parent.appendChild(child);
            } else if (streamAt > 0) {
              let sibling = Array.from(parent.children)[streamAt];
              parent.insertBefore(child, sibling);
            }
          },
          onBeforeNodeAdded: (el) => {
            this.trackBefore("added", el);
            return el;
          },
          onNodeAdded: (el) => {
            if (el instanceof HTMLImageElement && el.srcset) {
              el.srcset = el.srcset;
            } else if (el instanceof HTMLVideoElement && el.autoplay) {
              el.play();
            }
            if (dom_default.isNowTriggerFormExternal(el, phxTriggerExternal)) {
              externalFormTriggered = el;
            }
            dom_default.discardError(targetContainer, el, phxFeedbackFor);
            if (dom_default.isPhxChild(el) && view.ownsElement(el) || dom_default.isPhxSticky(el) && view.ownsElement(el.parentNode)) {
              this.trackAfter("phxChildAdded", el);
            }
            added.push(el);
          },
          onNodeDiscarded: (el) => this.onNodeDiscarded(el),
          onBeforeNodeDiscarded: (el) => {
            if (el.getAttribute && el.getAttribute(PHX_PRUNE) !== null) {
              return true;
            }
            if (el.parentElement !== null && el.id && dom_default.isPhxUpdate(el.parentElement, phxUpdate, [PHX_STREAM, "append", "prepend"])) {
              return false;
            }
            if (this.maybePendingRemove(el)) {
              return false;
            }
            if (this.skipCIDSibling(el)) {
              return false;
            }
            return true;
          },
          onElUpdated: (el) => {
            if (dom_default.isNowTriggerFormExternal(el, phxTriggerExternal)) {
              externalFormTriggered = el;
            }
            updates.push(el);
            this.maybeReOrderStream(el);
          },
          onBeforeElUpdated: (fromEl, toEl) => {
            dom_default.cleanChildNodes(toEl, phxUpdate);
            if (this.skipCIDSibling(toEl)) {
              return false;
            }
            if (dom_default.isPhxSticky(fromEl)) {
              return false;
            }
            if (dom_default.isIgnored(fromEl, phxUpdate) || fromEl.form && fromEl.form.isSameNode(externalFormTriggered)) {
              this.trackBefore("updated", fromEl, toEl);
              dom_default.mergeAttrs(fromEl, toEl, { isIgnored: true });
              updates.push(fromEl);
              dom_default.applyStickyOperations(fromEl);
              return false;
            }
            if (fromEl.type === "number" && (fromEl.validity && fromEl.validity.badInput)) {
              return false;
            }
            if (!dom_default.syncPendingRef(fromEl, toEl, disableWith)) {
              if (dom_default.isUploadInput(fromEl)) {
                this.trackBefore("updated", fromEl, toEl);
                updates.push(fromEl);
              }
              dom_default.applyStickyOperations(fromEl);
              return false;
            }
            if (dom_default.isPhxChild(toEl)) {
              let prevSession = fromEl.getAttribute(PHX_SESSION);
              dom_default.mergeAttrs(fromEl, toEl, { exclude: [PHX_STATIC] });
              if (prevSession !== "") {
                fromEl.setAttribute(PHX_SESSION, prevSession);
              }
              fromEl.setAttribute(PHX_ROOT_ID, this.rootID);
              dom_default.applyStickyOperations(fromEl);
              return false;
            }
            dom_default.copyPrivates(toEl, fromEl);
            dom_default.discardError(targetContainer, toEl, phxFeedbackFor);
            let isFocusedFormEl = focused && fromEl.isSameNode(focused) && dom_default.isFormInput(fromEl);
            if (isFocusedFormEl && fromEl.type !== "hidden") {
              this.trackBefore("updated", fromEl, toEl);
              dom_default.mergeFocusedInput(fromEl, toEl);
              dom_default.syncAttrsToProps(fromEl);
              updates.push(fromEl);
              dom_default.applyStickyOperations(fromEl);
              return false;
            } else {
              if (dom_default.isPhxUpdate(toEl, phxUpdate, ["append", "prepend"])) {
                appendPrependUpdates.push(new DOMPostMorphRestorer(fromEl, toEl, toEl.getAttribute(phxUpdate)));
              }
              dom_default.syncAttrsToProps(toEl);
              dom_default.applyStickyOperations(toEl);
              this.trackBefore("updated", fromEl, toEl);
              return true;
            }
          }
        });
      });
      if (liveSocket2.isDebugEnabled()) {
        detectDuplicateIds();
      }
      if (appendPrependUpdates.length > 0) {
        liveSocket2.time("post-morph append/prepend restoration", () => {
          appendPrependUpdates.forEach((update) => update.perform());
        });
      }
      liveSocket2.silenceEvents(() => dom_default.restoreFocus(focused, selectionStart, selectionEnd));
      dom_default.dispatchEvent(document, "phx:update");
      added.forEach((el) => this.trackAfter("added", el));
      updates.forEach((el) => this.trackAfter("updated", el));
      this.transitionPendingRemoves();
      if (externalFormTriggered) {
        liveSocket2.unload();
        externalFormTriggered.submit();
      }
      return true;
    }
    onNodeDiscarded(el) {
      if (dom_default.isPhxChild(el) || dom_default.isPhxSticky(el)) {
        this.liveSocket.destroyViewByEl(el);
      }
      this.trackAfter("discarded", el);
    }
    maybePendingRemove(node) {
      if (node.getAttribute && node.getAttribute(this.phxRemove) !== null) {
        this.pendingRemoves.push(node);
        return true;
      } else {
        return false;
      }
    }
    maybeReOrderStream(el) {
      let streamAt = el.id ? this.streamInserts[el.id] : void 0;
      if (streamAt === void 0) {
        return;
      }
      if (streamAt === 0) {
        el.parentElement.insertBefore(el, el.parentElement.firstElementChild);
      } else if (streamAt > 0) {
        let children = Array.from(el.parentElement.children);
        let oldIndex = children.indexOf(el);
        if (streamAt >= children.length - 1) {
          el.parentElement.appendChild(el);
        } else {
          let sibling = children[streamAt];
          if (oldIndex > streamAt) {
            el.parentElement.insertBefore(el, sibling);
          } else {
            el.parentElement.insertBefore(el, sibling.nextElementSibling);
          }
        }
      }
    }
    transitionPendingRemoves() {
      let { pendingRemoves, liveSocket: liveSocket2 } = this;
      if (pendingRemoves.length > 0) {
        liveSocket2.transitionRemoves(pendingRemoves);
        liveSocket2.requestDOMUpdate(() => {
          pendingRemoves.forEach((el) => {
            let child = dom_default.firstPhxChild(el);
            if (child) {
              liveSocket2.destroyViewByEl(child);
            }
            el.remove();
          });
          this.trackAfter("transitionsDiscarded", pendingRemoves);
        });
      }
    }
    isCIDPatch() {
      return this.cidPatch;
    }
    skipCIDSibling(el) {
      return el.nodeType === Node.ELEMENT_NODE && el.getAttribute(PHX_SKIP) !== null;
    }
    targetCIDContainer(html) {
      if (!this.isCIDPatch()) {
        return;
      }
      let [first, ...rest] = dom_default.findComponentNodeList(this.container, this.targetCID);
      if (rest.length === 0 && dom_default.childNodeLength(html) === 1) {
        return first;
      } else {
        return first && first.parentNode;
      }
    }
    buildDiffHTML(container, html, phxUpdate, targetContainer) {
      let isCIDPatch = this.isCIDPatch();
      let isCIDWithSingleRoot = isCIDPatch && targetContainer.getAttribute(PHX_COMPONENT) === this.targetCID.toString();
      if (!isCIDPatch || isCIDWithSingleRoot) {
        return html;
      } else {
        let diffContainer = null;
        let template = document.createElement("template");
        diffContainer = dom_default.cloneNode(targetContainer);
        let [firstComponent, ...rest] = dom_default.findComponentNodeList(diffContainer, this.targetCID);
        template.innerHTML = html;
        rest.forEach((el) => el.remove());
        Array.from(diffContainer.childNodes).forEach((child) => {
          if (child.id && child.nodeType === Node.ELEMENT_NODE && child.getAttribute(PHX_COMPONENT) !== this.targetCID.toString()) {
            child.setAttribute(PHX_SKIP, "");
            child.innerHTML = "";
          }
        });
        Array.from(template.content.childNodes).forEach((el) => diffContainer.insertBefore(el, firstComponent));
        firstComponent.remove();
        return diffContainer.outerHTML;
      }
    }
    indexOf(parent, child) {
      return Array.from(parent.children).indexOf(child);
    }
  };
  var Rendered = class {
    static extract(diff) {
      let { [REPLY]: reply, [EVENTS]: events, [TITLE]: title } = diff;
      delete diff[REPLY];
      delete diff[EVENTS];
      delete diff[TITLE];
      return { diff, title, reply: reply || null, events: events || [] };
    }
    constructor(viewId, rendered) {
      this.viewId = viewId;
      this.rendered = {};
      this.mergeDiff(rendered);
    }
    parentViewId() {
      return this.viewId;
    }
    toString(onlyCids) {
      let [str, streams] = this.recursiveToString(this.rendered, this.rendered[COMPONENTS], onlyCids);
      return [str, streams];
    }
    recursiveToString(rendered, components = rendered[COMPONENTS], onlyCids) {
      onlyCids = onlyCids ? new Set(onlyCids) : null;
      let output = { buffer: "", components, onlyCids, streams: /* @__PURE__ */ new Set() };
      this.toOutputBuffer(rendered, null, output);
      return [output.buffer, output.streams];
    }
    componentCIDs(diff) {
      return Object.keys(diff[COMPONENTS] || {}).map((i2) => parseInt(i2));
    }
    isComponentOnlyDiff(diff) {
      if (!diff[COMPONENTS]) {
        return false;
      }
      return Object.keys(diff).length === 1;
    }
    getComponent(diff, cid) {
      return diff[COMPONENTS][cid];
    }
    mergeDiff(diff) {
      let newc = diff[COMPONENTS];
      let cache = {};
      delete diff[COMPONENTS];
      this.rendered = this.mutableMerge(this.rendered, diff);
      this.rendered[COMPONENTS] = this.rendered[COMPONENTS] || {};
      if (newc) {
        let oldc = this.rendered[COMPONENTS];
        for (let cid in newc) {
          newc[cid] = this.cachedFindComponent(cid, newc[cid], oldc, newc, cache);
        }
        for (let cid in newc) {
          oldc[cid] = newc[cid];
        }
        diff[COMPONENTS] = newc;
      }
    }
    cachedFindComponent(cid, cdiff, oldc, newc, cache) {
      if (cache[cid]) {
        return cache[cid];
      } else {
        let ndiff, stat, scid = cdiff[STATIC];
        if (isCid(scid)) {
          let tdiff;
          if (scid > 0) {
            tdiff = this.cachedFindComponent(scid, newc[scid], oldc, newc, cache);
          } else {
            tdiff = oldc[-scid];
          }
          stat = tdiff[STATIC];
          ndiff = this.cloneMerge(tdiff, cdiff);
          ndiff[STATIC] = stat;
        } else {
          ndiff = cdiff[STATIC] !== void 0 ? cdiff : this.cloneMerge(oldc[cid] || {}, cdiff);
        }
        cache[cid] = ndiff;
        return ndiff;
      }
    }
    mutableMerge(target, source) {
      if (source[STATIC] !== void 0) {
        return source;
      } else {
        this.doMutableMerge(target, source);
        return target;
      }
    }
    doMutableMerge(target, source) {
      for (let key in source) {
        let val = source[key];
        let targetVal = target[key];
        let isObjVal = isObject(val);
        if (isObjVal && val[STATIC] === void 0 && isObject(targetVal)) {
          this.doMutableMerge(targetVal, val);
        } else {
          target[key] = val;
        }
      }
    }
    cloneMerge(target, source) {
      let merged = __spreadValues(__spreadValues({}, target), source);
      for (let key in merged) {
        let val = source[key];
        let targetVal = target[key];
        if (isObject(val) && val[STATIC] === void 0 && isObject(targetVal)) {
          merged[key] = this.cloneMerge(targetVal, val);
        }
      }
      return merged;
    }
    componentToString(cid) {
      let [str, streams] = this.recursiveCIDToString(this.rendered[COMPONENTS], cid);
      return [str, streams];
    }
    pruneCIDs(cids) {
      cids.forEach((cid) => delete this.rendered[COMPONENTS][cid]);
    }
    get() {
      return this.rendered;
    }
    isNewFingerprint(diff = {}) {
      return !!diff[STATIC];
    }
    templateStatic(part, templates) {
      if (typeof part === "number") {
        return templates[part];
      } else {
        return part;
      }
    }
    toOutputBuffer(rendered, templates, output) {
      if (rendered[DYNAMICS]) {
        return this.comprehensionToBuffer(rendered, templates, output);
      }
      let { [STATIC]: statics } = rendered;
      statics = this.templateStatic(statics, templates);
      output.buffer += statics[0];
      for (let i2 = 1; i2 < statics.length; i2++) {
        this.dynamicToBuffer(rendered[i2 - 1], templates, output);
        output.buffer += statics[i2];
      }
    }
    comprehensionToBuffer(rendered, templates, output) {
      let { [DYNAMICS]: dynamics, [STATIC]: statics, [STREAM]: stream } = rendered;
      let [_inserts, deleteIds] = stream || [{}, []];
      statics = this.templateStatic(statics, templates);
      let compTemplates = templates || rendered[TEMPLATES];
      for (let d2 = 0; d2 < dynamics.length; d2++) {
        let dynamic = dynamics[d2];
        output.buffer += statics[0];
        for (let i2 = 1; i2 < statics.length; i2++) {
          this.dynamicToBuffer(dynamic[i2 - 1], compTemplates, output);
          output.buffer += statics[i2];
        }
      }
      if (stream !== void 0 && (rendered[DYNAMICS].length > 0 || deleteIds.length > 0)) {
        rendered[DYNAMICS] = [];
        output.streams.add(stream);
      }
    }
    dynamicToBuffer(rendered, templates, output) {
      if (typeof rendered === "number") {
        let [str, streams] = this.recursiveCIDToString(output.components, rendered, output.onlyCids);
        output.buffer += str;
        output.streams = /* @__PURE__ */ new Set([...output.streams, ...streams]);
      } else if (isObject(rendered)) {
        this.toOutputBuffer(rendered, templates, output);
      } else {
        output.buffer += rendered;
      }
    }
    recursiveCIDToString(components, cid, onlyCids) {
      let component = components[cid] || logError(`no component for CID ${cid}`, components);
      let template = document.createElement("template");
      let [html, streams] = this.recursiveToString(component, components, onlyCids);
      template.innerHTML = html;
      let container = template.content;
      let skip = onlyCids && !onlyCids.has(cid);
      let [hasChildNodes, hasChildComponents] = Array.from(container.childNodes).reduce(([hasNodes, hasComponents], child, i2) => {
        if (child.nodeType === Node.ELEMENT_NODE) {
          if (child.getAttribute(PHX_COMPONENT)) {
            return [hasNodes, true];
          }
          child.setAttribute(PHX_COMPONENT, cid);
          if (!child.id) {
            child.id = `${this.parentViewId()}-${cid}-${i2}`;
          }
          if (skip) {
            child.setAttribute(PHX_SKIP, "");
            child.innerHTML = "";
          }
          return [true, hasComponents];
        } else {
          if (child.nodeValue.trim() !== "") {
            logError(`only HTML element tags are allowed at the root of components.

got: "${child.nodeValue.trim()}"

within:
`, template.innerHTML.trim());
            child.replaceWith(this.createSpan(child.nodeValue, cid));
            return [true, hasComponents];
          } else {
            child.remove();
            return [hasNodes, hasComponents];
          }
        }
      }, [false, false]);
      if (!hasChildNodes && !hasChildComponents) {
        logError("expected at least one HTML element tag inside a component, but the component is empty:\n", template.innerHTML.trim());
        return [this.createSpan("", cid).outerHTML, streams];
      } else if (!hasChildNodes && hasChildComponents) {
        logError("expected at least one HTML element tag directly inside a component, but only subcomponents were found. A component must render at least one HTML tag directly inside itself.", template.innerHTML.trim());
        return [template.innerHTML, streams];
      } else {
        return [template.innerHTML, streams];
      }
    }
    createSpan(text, cid) {
      let span = document.createElement("span");
      span.innerText = text;
      span.setAttribute(PHX_COMPONENT, cid);
      return span;
    }
  };
  var viewHookID = 1;
  var ViewHook = class {
    static makeID() {
      return viewHookID++;
    }
    static elementID(el) {
      return el.phxHookId;
    }
    constructor(view, el, callbacks) {
      this.__view = view;
      this.liveSocket = view.liveSocket;
      this.__callbacks = callbacks;
      this.__listeners = /* @__PURE__ */ new Set();
      this.__isDisconnected = false;
      this.el = el;
      this.el.phxHookId = this.constructor.makeID();
      for (let key in this.__callbacks) {
        this[key] = this.__callbacks[key];
      }
    }
    __mounted() {
      this.mounted && this.mounted();
    }
    __updated() {
      this.updated && this.updated();
    }
    __beforeUpdate() {
      this.beforeUpdate && this.beforeUpdate();
    }
    __destroyed() {
      this.destroyed && this.destroyed();
    }
    __reconnected() {
      if (this.__isDisconnected) {
        this.__isDisconnected = false;
        this.reconnected && this.reconnected();
      }
    }
    __disconnected() {
      this.__isDisconnected = true;
      this.disconnected && this.disconnected();
    }
    pushEvent(event, payload = {}, onReply = function() {
    }) {
      return this.__view.pushHookEvent(null, event, payload, onReply);
    }
    pushEventTo(phxTarget, event, payload = {}, onReply = function() {
    }) {
      return this.__view.withinTargets(phxTarget, (view, targetCtx) => {
        return view.pushHookEvent(targetCtx, event, payload, onReply);
      });
    }
    handleEvent(event, callback) {
      let callbackRef = (customEvent, bypass) => bypass ? event : callback(customEvent.detail);
      window.addEventListener(`phx:${event}`, callbackRef);
      this.__listeners.add(callbackRef);
      return callbackRef;
    }
    removeHandleEvent(callbackRef) {
      let event = callbackRef(null, true);
      window.removeEventListener(`phx:${event}`, callbackRef);
      this.__listeners.delete(callbackRef);
    }
    upload(name, files) {
      return this.__view.dispatchUploads(name, files);
    }
    uploadTo(phxTarget, name, files) {
      return this.__view.withinTargets(phxTarget, (view) => view.dispatchUploads(name, files));
    }
    __cleanup__() {
      this.__listeners.forEach((callbackRef) => this.removeHandleEvent(callbackRef));
    }
  };
  var focusStack = null;
  var JS = {
    exec(eventType, phxEvent, view, sourceEl, defaults) {
      let [defaultKind, defaultArgs] = defaults || [null, {}];
      let commands = phxEvent.charAt(0) === "[" ? JSON.parse(phxEvent) : [[defaultKind, defaultArgs]];
      commands.forEach(([kind, args]) => {
        if (kind === defaultKind && defaultArgs.data) {
          args.data = Object.assign(args.data || {}, defaultArgs.data);
        }
        this.filterToEls(sourceEl, args).forEach((el) => {
          this[`exec_${kind}`](eventType, phxEvent, view, sourceEl, el, args);
        });
      });
    },
    isVisible(el) {
      return !!(el.offsetWidth || el.offsetHeight || el.getClientRects().length > 0);
    },
    exec_dispatch(eventType, phxEvent, view, sourceEl, el, { to, event, detail, bubbles }) {
      detail = detail || {};
      detail.dispatcher = sourceEl;
      dom_default.dispatchEvent(el, event, { detail, bubbles });
    },
    exec_push(eventType, phxEvent, view, sourceEl, el, args) {
      if (!view.isConnected()) {
        return;
      }
      let { event, data, target, page_loading, loading, value, dispatcher } = args;
      let pushOpts = { loading, value, target, page_loading: !!page_loading };
      let targetSrc = eventType === "change" && dispatcher ? dispatcher : sourceEl;
      let phxTarget = target || targetSrc.getAttribute(view.binding("target")) || targetSrc;
      view.withinTargets(phxTarget, (targetView, targetCtx) => {
        if (eventType === "change") {
          let { newCid, _target, callback } = args;
          _target = _target || (dom_default.isFormInput(sourceEl) ? sourceEl.name : void 0);
          if (_target) {
            pushOpts._target = _target;
          }
          targetView.pushInput(sourceEl, targetCtx, newCid, event || phxEvent, pushOpts, callback);
        } else if (eventType === "submit") {
          let { submitter } = args;
          targetView.submitForm(sourceEl, targetCtx, event || phxEvent, submitter, pushOpts);
        } else {
          targetView.pushEvent(eventType, sourceEl, targetCtx, event || phxEvent, data, pushOpts);
        }
      });
    },
    exec_navigate(eventType, phxEvent, view, sourceEl, el, { href, replace }) {
      view.liveSocket.historyRedirect(href, replace ? "replace" : "push");
    },
    exec_patch(eventType, phxEvent, view, sourceEl, el, { href, replace }) {
      view.liveSocket.pushHistoryPatch(href, replace ? "replace" : "push", sourceEl);
    },
    exec_focus(eventType, phxEvent, view, sourceEl, el) {
      window.requestAnimationFrame(() => aria_default.attemptFocus(el));
    },
    exec_focus_first(eventType, phxEvent, view, sourceEl, el) {
      window.requestAnimationFrame(() => aria_default.focusFirstInteractive(el) || aria_default.focusFirst(el));
    },
    exec_push_focus(eventType, phxEvent, view, sourceEl, el) {
      window.requestAnimationFrame(() => focusStack = el || sourceEl);
    },
    exec_pop_focus(eventType, phxEvent, view, sourceEl, el) {
      window.requestAnimationFrame(() => {
        if (focusStack) {
          focusStack.focus();
        }
        focusStack = null;
      });
    },
    exec_add_class(eventType, phxEvent, view, sourceEl, el, { names, transition, time }) {
      this.addOrRemoveClasses(el, names, [], transition, time, view);
    },
    exec_remove_class(eventType, phxEvent, view, sourceEl, el, { names, transition, time }) {
      this.addOrRemoveClasses(el, [], names, transition, time, view);
    },
    exec_transition(eventType, phxEvent, view, sourceEl, el, { time, transition }) {
      this.addOrRemoveClasses(el, [], [], transition, time, view);
    },
    exec_toggle(eventType, phxEvent, view, sourceEl, el, { display, ins, outs, time }) {
      this.toggle(eventType, view, el, display, ins, outs, time);
    },
    exec_show(eventType, phxEvent, view, sourceEl, el, { display, transition, time }) {
      this.show(eventType, view, el, display, transition, time);
    },
    exec_hide(eventType, phxEvent, view, sourceEl, el, { display, transition, time }) {
      this.hide(eventType, view, el, display, transition, time);
    },
    exec_set_attr(eventType, phxEvent, view, sourceEl, el, { attr: [attr, val] }) {
      this.setOrRemoveAttrs(el, [[attr, val]], []);
    },
    exec_remove_attr(eventType, phxEvent, view, sourceEl, el, { attr }) {
      this.setOrRemoveAttrs(el, [], [attr]);
    },
    show(eventType, view, el, display, transition, time) {
      if (!this.isVisible(el)) {
        this.toggle(eventType, view, el, display, transition, null, time);
      }
    },
    hide(eventType, view, el, display, transition, time) {
      if (this.isVisible(el)) {
        this.toggle(eventType, view, el, display, null, transition, time);
      }
    },
    toggle(eventType, view, el, display, ins, outs, time) {
      let [inClasses, inStartClasses, inEndClasses] = ins || [[], [], []];
      let [outClasses, outStartClasses, outEndClasses] = outs || [[], [], []];
      if (inClasses.length > 0 || outClasses.length > 0) {
        if (this.isVisible(el)) {
          let onStart = () => {
            this.addOrRemoveClasses(el, outStartClasses, inClasses.concat(inStartClasses).concat(inEndClasses));
            window.requestAnimationFrame(() => {
              this.addOrRemoveClasses(el, outClasses, []);
              window.requestAnimationFrame(() => this.addOrRemoveClasses(el, outEndClasses, outStartClasses));
            });
          };
          el.dispatchEvent(new Event("phx:hide-start"));
          view.transition(time, onStart, () => {
            this.addOrRemoveClasses(el, [], outClasses.concat(outEndClasses));
            dom_default.putSticky(el, "toggle", (currentEl) => currentEl.style.display = "none");
            el.dispatchEvent(new Event("phx:hide-end"));
          });
        } else {
          if (eventType === "remove") {
            return;
          }
          let onStart = () => {
            this.addOrRemoveClasses(el, inStartClasses, outClasses.concat(outStartClasses).concat(outEndClasses));
            let stickyDisplay = display || this.defaultDisplay(el);
            dom_default.putSticky(el, "toggle", (currentEl) => currentEl.style.display = stickyDisplay);
            window.requestAnimationFrame(() => {
              this.addOrRemoveClasses(el, inClasses, []);
              window.requestAnimationFrame(() => this.addOrRemoveClasses(el, inEndClasses, inStartClasses));
            });
          };
          el.dispatchEvent(new Event("phx:show-start"));
          view.transition(time, onStart, () => {
            this.addOrRemoveClasses(el, [], inClasses.concat(inEndClasses));
            el.dispatchEvent(new Event("phx:show-end"));
          });
        }
      } else {
        if (this.isVisible(el)) {
          window.requestAnimationFrame(() => {
            el.dispatchEvent(new Event("phx:hide-start"));
            dom_default.putSticky(el, "toggle", (currentEl) => currentEl.style.display = "none");
            el.dispatchEvent(new Event("phx:hide-end"));
          });
        } else {
          window.requestAnimationFrame(() => {
            el.dispatchEvent(new Event("phx:show-start"));
            let stickyDisplay = display || this.defaultDisplay(el);
            dom_default.putSticky(el, "toggle", (currentEl) => currentEl.style.display = stickyDisplay);
            el.dispatchEvent(new Event("phx:show-end"));
          });
        }
      }
    },
    addOrRemoveClasses(el, adds, removes, transition, time, view) {
      let [transition_run, transition_start, transition_end] = transition || [[], [], []];
      if (transition_run.length > 0) {
        let onStart = () => this.addOrRemoveClasses(el, transition_start.concat(transition_run), []);
        let onDone = () => this.addOrRemoveClasses(el, adds.concat(transition_end), removes.concat(transition_run).concat(transition_start));
        return view.transition(time, onStart, onDone);
      }
      window.requestAnimationFrame(() => {
        let [prevAdds, prevRemoves] = dom_default.getSticky(el, "classes", [[], []]);
        let keepAdds = adds.filter((name) => prevAdds.indexOf(name) < 0 && !el.classList.contains(name));
        let keepRemoves = removes.filter((name) => prevRemoves.indexOf(name) < 0 && el.classList.contains(name));
        let newAdds = prevAdds.filter((name) => removes.indexOf(name) < 0).concat(keepAdds);
        let newRemoves = prevRemoves.filter((name) => adds.indexOf(name) < 0).concat(keepRemoves);
        dom_default.putSticky(el, "classes", (currentEl) => {
          currentEl.classList.remove(...newRemoves);
          currentEl.classList.add(...newAdds);
          return [newAdds, newRemoves];
        });
      });
    },
    setOrRemoveAttrs(el, sets, removes) {
      let [prevSets, prevRemoves] = dom_default.getSticky(el, "attrs", [[], []]);
      let alteredAttrs = sets.map(([attr, _val]) => attr).concat(removes);
      let newSets = prevSets.filter(([attr, _val]) => !alteredAttrs.includes(attr)).concat(sets);
      let newRemoves = prevRemoves.filter((attr) => !alteredAttrs.includes(attr)).concat(removes);
      dom_default.putSticky(el, "attrs", (currentEl) => {
        newRemoves.forEach((attr) => currentEl.removeAttribute(attr));
        newSets.forEach(([attr, val]) => currentEl.setAttribute(attr, val));
        return [newSets, newRemoves];
      });
    },
    hasAllClasses(el, classes) {
      return classes.every((name) => el.classList.contains(name));
    },
    isToggledOut(el, outClasses) {
      return !this.isVisible(el) || this.hasAllClasses(el, outClasses);
    },
    filterToEls(sourceEl, { to }) {
      return to ? dom_default.all(document, to) : [sourceEl];
    },
    defaultDisplay(el) {
      return { tr: "table-row", td: "table-cell" }[el.tagName.toLowerCase()] || "block";
    }
  };
  var js_default = JS;
  var serializeForm = (form, metadata, onlyNames = []) => {
    let _a = metadata, { submitter } = _a, meta = __objRest(_a, ["submitter"]);
    let formData = new FormData(form);
    if (submitter && submitter.form && submitter.form === form) {
      formData.append(submitter.name, submitter.value);
    }
    let toRemove = [];
    formData.forEach((val, key, _index) => {
      if (val instanceof File) {
        toRemove.push(key);
      }
    });
    toRemove.forEach((key) => formData.delete(key));
    let params = new URLSearchParams();
    for (let [key, val] of formData.entries()) {
      if (onlyNames.length === 0 || onlyNames.indexOf(key) >= 0) {
        params.append(key, val);
      }
    }
    for (let metaKey in meta) {
      params.append(metaKey, meta[metaKey]);
    }
    return params.toString();
  };
  var View = class {
    constructor(el, liveSocket2, parentView, flash, liveReferer) {
      this.isDead = false;
      this.liveSocket = liveSocket2;
      this.flash = flash;
      this.parent = parentView;
      this.root = parentView ? parentView.root : this;
      this.el = el;
      this.id = this.el.id;
      this.ref = 0;
      this.childJoins = 0;
      this.loaderTimer = null;
      this.pendingDiffs = [];
      this.pruningCIDs = [];
      this.redirect = false;
      this.href = null;
      this.joinCount = this.parent ? this.parent.joinCount - 1 : 0;
      this.joinPending = true;
      this.destroyed = false;
      this.joinCallback = function(onDone) {
        onDone && onDone();
      };
      this.stopCallback = function() {
      };
      this.pendingJoinOps = this.parent ? null : [];
      this.viewHooks = {};
      this.uploaders = {};
      this.formSubmits = [];
      this.children = this.parent ? null : {};
      this.root.children[this.id] = {};
      this.channel = this.liveSocket.channel(`lv:${this.id}`, () => {
        return {
          redirect: this.redirect ? this.href : void 0,
          url: this.redirect ? void 0 : this.href || void 0,
          params: this.connectParams(liveReferer),
          session: this.getSession(),
          static: this.getStatic(),
          flash: this.flash
        };
      });
    }
    setHref(href) {
      this.href = href;
    }
    setRedirect(href) {
      this.redirect = true;
      this.href = href;
    }
    isMain() {
      return this.el.hasAttribute(PHX_MAIN);
    }
    connectParams(liveReferer) {
      let params = this.liveSocket.params(this.el);
      let manifest = dom_default.all(document, `[${this.binding(PHX_TRACK_STATIC)}]`).map((node) => node.src || node.href).filter((url) => typeof url === "string");
      if (manifest.length > 0) {
        params["_track_static"] = manifest;
      }
      params["_mounts"] = this.joinCount;
      params["_live_referer"] = liveReferer;
      return params;
    }
    isConnected() {
      return this.channel.canPush();
    }
    getSession() {
      return this.el.getAttribute(PHX_SESSION);
    }
    getStatic() {
      let val = this.el.getAttribute(PHX_STATIC);
      return val === "" ? null : val;
    }
    destroy(callback = function() {
    }) {
      this.destroyAllChildren();
      this.destroyed = true;
      delete this.root.children[this.id];
      if (this.parent) {
        delete this.root.children[this.parent.id][this.id];
      }
      clearTimeout(this.loaderTimer);
      let onFinished = () => {
        callback();
        for (let id in this.viewHooks) {
          this.destroyHook(this.viewHooks[id]);
        }
      };
      dom_default.markPhxChildDestroyed(this.el);
      this.log("destroyed", () => ["the child has been removed from the parent"]);
      this.channel.leave().receive("ok", onFinished).receive("error", onFinished).receive("timeout", onFinished);
    }
    setContainerClasses(...classes) {
      this.el.classList.remove(PHX_CONNECTED_CLASS, PHX_DISCONNECTED_CLASS, PHX_ERROR_CLASS);
      this.el.classList.add(...classes);
    }
    showLoader(timeout) {
      clearTimeout(this.loaderTimer);
      if (timeout) {
        this.loaderTimer = setTimeout(() => this.showLoader(), timeout);
      } else {
        for (let id in this.viewHooks) {
          this.viewHooks[id].__disconnected();
        }
        this.setContainerClasses(PHX_DISCONNECTED_CLASS);
      }
    }
    execAll(binding) {
      dom_default.all(this.el, `[${binding}]`, (el) => this.liveSocket.execJS(el, el.getAttribute(binding)));
    }
    hideLoader() {
      clearTimeout(this.loaderTimer);
      this.setContainerClasses(PHX_CONNECTED_CLASS);
      this.execAll(this.binding("connected"));
    }
    triggerReconnected() {
      for (let id in this.viewHooks) {
        this.viewHooks[id].__reconnected();
      }
    }
    log(kind, msgCallback) {
      this.liveSocket.log(this, kind, msgCallback);
    }
    transition(time, onStart, onDone = function() {
    }) {
      this.liveSocket.transition(time, onStart, onDone);
    }
    withinTargets(phxTarget, callback) {
      if (phxTarget instanceof HTMLElement || phxTarget instanceof SVGElement) {
        return this.liveSocket.owner(phxTarget, (view) => callback(view, phxTarget));
      }
      if (isCid(phxTarget)) {
        let targets = dom_default.findComponentNodeList(this.el, phxTarget);
        if (targets.length === 0) {
          logError(`no component found matching phx-target of ${phxTarget}`);
        } else {
          callback(this, parseInt(phxTarget));
        }
      } else {
        let targets = Array.from(document.querySelectorAll(phxTarget));
        if (targets.length === 0) {
          logError(`nothing found matching the phx-target selector "${phxTarget}"`);
        }
        targets.forEach((target) => this.liveSocket.owner(target, (view) => callback(view, target)));
      }
    }
    applyDiff(type, rawDiff, callback) {
      this.log(type, () => ["", clone(rawDiff)]);
      let { diff, reply, events, title } = Rendered.extract(rawDiff);
      callback({ diff, reply, events });
      if (title) {
        window.requestAnimationFrame(() => dom_default.putTitle(title));
      }
    }
    onJoin(resp) {
      let { rendered, container } = resp;
      if (container) {
        let [tag, attrs] = container;
        this.el = dom_default.replaceRootContainer(this.el, tag, attrs);
      }
      this.childJoins = 0;
      this.joinPending = true;
      this.flash = null;
      browser_default.dropLocal(this.liveSocket.localStorage, window.location.pathname, CONSECUTIVE_RELOADS);
      this.applyDiff("mount", rendered, ({ diff, events }) => {
        this.rendered = new Rendered(this.id, diff);
        let [html, streams] = this.renderContainer(null, "join");
        this.dropPendingRefs();
        let forms = this.formsForRecovery(html);
        this.joinCount++;
        if (forms.length > 0) {
          forms.forEach(([form, newForm, newCid], i2) => {
            this.pushFormRecovery(form, newCid, (resp2) => {
              if (i2 === forms.length - 1) {
                this.onJoinComplete(resp2, html, streams, events);
              }
            });
          });
        } else {
          this.onJoinComplete(resp, html, streams, events);
        }
      });
    }
    dropPendingRefs() {
      dom_default.all(document, `[${PHX_REF_SRC}="${this.id}"][${PHX_REF}]`, (el) => {
        el.removeAttribute(PHX_REF);
        el.removeAttribute(PHX_REF_SRC);
      });
    }
    onJoinComplete({ live_patch }, html, streams, events) {
      if (this.joinCount > 1 || this.parent && !this.parent.isJoinPending()) {
        return this.applyJoinPatch(live_patch, html, streams, events);
      }
      let newChildren = dom_default.findPhxChildrenInFragment(html, this.id).filter((toEl) => {
        let fromEl = toEl.id && this.el.querySelector(`[id="${toEl.id}"]`);
        let phxStatic = fromEl && fromEl.getAttribute(PHX_STATIC);
        if (phxStatic) {
          toEl.setAttribute(PHX_STATIC, phxStatic);
        }
        return this.joinChild(toEl);
      });
      if (newChildren.length === 0) {
        if (this.parent) {
          this.root.pendingJoinOps.push([this, () => this.applyJoinPatch(live_patch, html, streams, events)]);
          this.parent.ackJoin(this);
        } else {
          this.onAllChildJoinsComplete();
          this.applyJoinPatch(live_patch, html, streams, events);
        }
      } else {
        this.root.pendingJoinOps.push([this, () => this.applyJoinPatch(live_patch, html, streams, events)]);
      }
    }
    attachTrueDocEl() {
      this.el = dom_default.byId(this.id);
      this.el.setAttribute(PHX_ROOT_ID, this.root.id);
    }
    execNewMounted() {
      dom_default.all(this.el, `[${this.binding(PHX_HOOK)}], [data-phx-${PHX_HOOK}]`, (hookEl) => {
        this.maybeAddNewHook(hookEl);
      });
      dom_default.all(this.el, `[${this.binding(PHX_MOUNTED)}]`, (el) => this.maybeMounted(el));
    }
    applyJoinPatch(live_patch, html, streams, events) {
      this.attachTrueDocEl();
      let patch = new DOMPatch(this, this.el, this.id, html, streams, null);
      patch.markPrunableContentForRemoval();
      this.performPatch(patch, false);
      this.joinNewChildren();
      this.execNewMounted();
      this.joinPending = false;
      this.liveSocket.dispatchEvents(events);
      this.applyPendingUpdates();
      if (live_patch) {
        let { kind, to } = live_patch;
        this.liveSocket.historyPatch(to, kind);
      }
      this.hideLoader();
      if (this.joinCount > 1) {
        this.triggerReconnected();
      }
      this.stopCallback();
    }
    triggerBeforeUpdateHook(fromEl, toEl) {
      this.liveSocket.triggerDOM("onBeforeElUpdated", [fromEl, toEl]);
      let hook = this.getHook(fromEl);
      let isIgnored = hook && dom_default.isIgnored(fromEl, this.binding(PHX_UPDATE));
      if (hook && !fromEl.isEqualNode(toEl) && !(isIgnored && isEqualObj(fromEl.dataset, toEl.dataset))) {
        hook.__beforeUpdate();
        return hook;
      }
    }
    maybeMounted(el) {
      let phxMounted = el.getAttribute(this.binding(PHX_MOUNTED));
      let hasBeenInvoked = phxMounted && dom_default.private(el, "mounted");
      if (phxMounted && !hasBeenInvoked) {
        this.liveSocket.execJS(el, phxMounted);
        dom_default.putPrivate(el, "mounted", true);
      }
    }
    maybeAddNewHook(el, force) {
      let newHook = this.addHook(el);
      if (newHook) {
        newHook.__mounted();
      }
    }
    performPatch(patch, pruneCids) {
      let removedEls = [];
      let phxChildrenAdded = false;
      let updatedHookIds = /* @__PURE__ */ new Set();
      patch.after("added", (el) => {
        this.liveSocket.triggerDOM("onNodeAdded", [el]);
        this.maybeAddNewHook(el);
        if (el.getAttribute) {
          this.maybeMounted(el);
        }
      });
      patch.after("phxChildAdded", (el) => {
        if (dom_default.isPhxSticky(el)) {
          this.liveSocket.joinRootViews();
        } else {
          phxChildrenAdded = true;
        }
      });
      patch.before("updated", (fromEl, toEl) => {
        let hook = this.triggerBeforeUpdateHook(fromEl, toEl);
        if (hook) {
          updatedHookIds.add(fromEl.id);
        }
      });
      patch.after("updated", (el) => {
        if (updatedHookIds.has(el.id)) {
          this.getHook(el).__updated();
        }
      });
      patch.after("discarded", (el) => {
        if (el.nodeType === Node.ELEMENT_NODE) {
          removedEls.push(el);
        }
      });
      patch.after("transitionsDiscarded", (els) => this.afterElementsRemoved(els, pruneCids));
      patch.perform();
      this.afterElementsRemoved(removedEls, pruneCids);
      return phxChildrenAdded;
    }
    afterElementsRemoved(elements, pruneCids) {
      let destroyedCIDs = [];
      elements.forEach((parent) => {
        let components = dom_default.all(parent, `[${PHX_COMPONENT}]`);
        let hooks = dom_default.all(parent, `[${this.binding(PHX_HOOK)}]`);
        components.concat(parent).forEach((el) => {
          let cid = this.componentID(el);
          if (isCid(cid) && destroyedCIDs.indexOf(cid) === -1) {
            destroyedCIDs.push(cid);
          }
        });
        hooks.concat(parent).forEach((hookEl) => {
          let hook = this.getHook(hookEl);
          hook && this.destroyHook(hook);
        });
      });
      if (pruneCids) {
        this.maybePushComponentsDestroyed(destroyedCIDs);
      }
    }
    joinNewChildren() {
      dom_default.findPhxChildren(this.el, this.id).forEach((el) => this.joinChild(el));
    }
    getChildById(id) {
      return this.root.children[this.id][id];
    }
    getDescendentByEl(el) {
      if (el.id === this.id) {
        return this;
      } else {
        return this.children[el.getAttribute(PHX_PARENT_ID)][el.id];
      }
    }
    destroyDescendent(id) {
      for (let parentId in this.root.children) {
        for (let childId in this.root.children[parentId]) {
          if (childId === id) {
            return this.root.children[parentId][childId].destroy();
          }
        }
      }
    }
    joinChild(el) {
      let child = this.getChildById(el.id);
      if (!child) {
        let view = new View(el, this.liveSocket, this);
        this.root.children[this.id][view.id] = view;
        view.join();
        this.childJoins++;
        return true;
      }
    }
    isJoinPending() {
      return this.joinPending;
    }
    ackJoin(_child) {
      this.childJoins--;
      if (this.childJoins === 0) {
        if (this.parent) {
          this.parent.ackJoin(this);
        } else {
          this.onAllChildJoinsComplete();
        }
      }
    }
    onAllChildJoinsComplete() {
      this.joinCallback(() => {
        this.pendingJoinOps.forEach(([view, op]) => {
          if (!view.isDestroyed()) {
            op();
          }
        });
        this.pendingJoinOps = [];
      });
    }
    update(diff, events) {
      if (this.isJoinPending() || this.liveSocket.hasPendingLink() && this.root.isMain()) {
        return this.pendingDiffs.push({ diff, events });
      }
      this.rendered.mergeDiff(diff);
      let phxChildrenAdded = false;
      if (this.rendered.isComponentOnlyDiff(diff)) {
        this.liveSocket.time("component patch complete", () => {
          let parentCids = dom_default.findParentCIDs(this.el, this.rendered.componentCIDs(diff));
          parentCids.forEach((parentCID) => {
            if (this.componentPatch(this.rendered.getComponent(diff, parentCID), parentCID)) {
              phxChildrenAdded = true;
            }
          });
        });
      } else if (!isEmpty(diff)) {
        this.liveSocket.time("full patch complete", () => {
          let [html, streams] = this.renderContainer(diff, "update");
          let patch = new DOMPatch(this, this.el, this.id, html, streams, null);
          phxChildrenAdded = this.performPatch(patch, true);
        });
      }
      this.liveSocket.dispatchEvents(events);
      if (phxChildrenAdded) {
        this.joinNewChildren();
      }
    }
    renderContainer(diff, kind) {
      return this.liveSocket.time(`toString diff (${kind})`, () => {
        let tag = this.el.tagName;
        let cids = diff ? this.rendered.componentCIDs(diff).concat(this.pruningCIDs) : null;
        let [html, streams] = this.rendered.toString(cids);
        return [`<${tag}>${html}</${tag}>`, streams];
      });
    }
    componentPatch(diff, cid) {
      if (isEmpty(diff))
        return false;
      let [html, streams] = this.rendered.componentToString(cid);
      let patch = new DOMPatch(this, this.el, this.id, html, streams, cid);
      let childrenAdded = this.performPatch(patch, true);
      return childrenAdded;
    }
    getHook(el) {
      return this.viewHooks[ViewHook.elementID(el)];
    }
    addHook(el) {
      if (ViewHook.elementID(el) || !el.getAttribute) {
        return;
      }
      let hookName = el.getAttribute(`data-phx-${PHX_HOOK}`) || el.getAttribute(this.binding(PHX_HOOK));
      if (hookName && !this.ownsElement(el)) {
        return;
      }
      let callbacks = this.liveSocket.getHookCallbacks(hookName);
      if (callbacks) {
        if (!el.id) {
          logError(`no DOM ID for hook "${hookName}". Hooks require a unique ID on each element.`, el);
        }
        let hook = new ViewHook(this, el, callbacks);
        this.viewHooks[ViewHook.elementID(hook.el)] = hook;
        return hook;
      } else if (hookName !== null) {
        logError(`unknown hook found for "${hookName}"`, el);
      }
    }
    destroyHook(hook) {
      hook.__destroyed();
      hook.__cleanup__();
      delete this.viewHooks[ViewHook.elementID(hook.el)];
    }
    applyPendingUpdates() {
      this.pendingDiffs.forEach(({ diff, events }) => this.update(diff, events));
      this.pendingDiffs = [];
      this.eachChild((child) => child.applyPendingUpdates());
    }
    eachChild(callback) {
      let children = this.root.children[this.id] || {};
      for (let id in children) {
        callback(this.getChildById(id));
      }
    }
    onChannel(event, cb) {
      this.liveSocket.onChannel(this.channel, event, (resp) => {
        if (this.isJoinPending()) {
          this.root.pendingJoinOps.push([this, () => cb(resp)]);
        } else {
          this.liveSocket.requestDOMUpdate(() => cb(resp));
        }
      });
    }
    bindChannel() {
      this.liveSocket.onChannel(this.channel, "diff", (rawDiff) => {
        this.liveSocket.requestDOMUpdate(() => {
          this.applyDiff("update", rawDiff, ({ diff, events }) => this.update(diff, events));
        });
      });
      this.onChannel("redirect", ({ to, flash }) => this.onRedirect({ to, flash }));
      this.onChannel("live_patch", (redir) => this.onLivePatch(redir));
      this.onChannel("live_redirect", (redir) => this.onLiveRedirect(redir));
      this.channel.onError((reason) => this.onError(reason));
      this.channel.onClose((reason) => this.onClose(reason));
    }
    destroyAllChildren() {
      this.eachChild((child) => child.destroy());
    }
    onLiveRedirect(redir) {
      let { to, kind, flash } = redir;
      let url = this.expandURL(to);
      this.liveSocket.historyRedirect(url, kind, flash);
    }
    onLivePatch(redir) {
      let { to, kind } = redir;
      this.href = this.expandURL(to);
      this.liveSocket.historyPatch(to, kind);
    }
    expandURL(to) {
      return to.startsWith("/") ? `${window.location.protocol}//${window.location.host}${to}` : to;
    }
    onRedirect({ to, flash }) {
      this.liveSocket.redirect(to, flash);
    }
    isDestroyed() {
      return this.destroyed;
    }
    joinDead() {
      this.isDead = true;
    }
    join(callback) {
      this.showLoader(this.liveSocket.loaderTimeout);
      this.bindChannel();
      if (this.isMain()) {
        this.stopCallback = this.liveSocket.withPageLoading({ to: this.href, kind: "initial" });
      }
      this.joinCallback = (onDone) => {
        onDone = onDone || function() {
        };
        callback ? callback(this.joinCount, onDone) : onDone();
      };
      this.liveSocket.wrapPush(this, { timeout: false }, () => {
        return this.channel.join().receive("ok", (data) => {
          if (!this.isDestroyed()) {
            this.liveSocket.requestDOMUpdate(() => this.onJoin(data));
          }
        }).receive("error", (resp) => !this.isDestroyed() && this.onJoinError(resp)).receive("timeout", () => !this.isDestroyed() && this.onJoinError({ reason: "timeout" }));
      });
    }
    onJoinError(resp) {
      if (resp.reason === "reload") {
        this.log("error", () => [`failed mount with ${resp.status}. Falling back to page request`, resp]);
        return this.onRedirect({ to: this.href });
      } else if (resp.reason === "unauthorized" || resp.reason === "stale") {
        this.log("error", () => ["unauthorized live_redirect. Falling back to page request", resp]);
        return this.onRedirect({ to: this.href });
      }
      if (resp.redirect || resp.live_redirect) {
        this.joinPending = false;
        this.channel.leave();
      }
      if (resp.redirect) {
        return this.onRedirect(resp.redirect);
      }
      if (resp.live_redirect) {
        return this.onLiveRedirect(resp.live_redirect);
      }
      this.log("error", () => ["unable to join", resp]);
      if (this.liveSocket.isConnected()) {
        this.liveSocket.reloadWithJitter(this);
      }
    }
    onClose(reason) {
      if (this.isDestroyed()) {
        return;
      }
      if (this.liveSocket.hasPendingLink() && reason !== "leave") {
        return this.liveSocket.reloadWithJitter(this);
      }
      this.destroyAllChildren();
      this.liveSocket.dropActiveElement(this);
      if (document.activeElement) {
        document.activeElement.blur();
      }
      if (this.liveSocket.isUnloaded()) {
        this.showLoader(BEFORE_UNLOAD_LOADER_TIMEOUT);
      }
    }
    onError(reason) {
      this.onClose(reason);
      if (this.liveSocket.isConnected()) {
        this.log("error", () => ["view crashed", reason]);
      }
      if (!this.liveSocket.isUnloaded()) {
        this.displayError();
      }
    }
    displayError() {
      if (this.isMain()) {
        dom_default.dispatchEvent(window, "phx:page-loading-start", { detail: { to: this.href, kind: "error" } });
      }
      this.showLoader();
      this.setContainerClasses(PHX_DISCONNECTED_CLASS, PHX_ERROR_CLASS);
      this.execAll(this.binding("disconnected"));
    }
    pushWithReply(refGenerator, event, payload, onReply = function() {
    }) {
      if (!this.isConnected()) {
        return;
      }
      let [ref, [el], opts] = refGenerator ? refGenerator() : [null, [], {}];
      let onLoadingDone = function() {
      };
      if (opts.page_loading || el && el.getAttribute(this.binding(PHX_PAGE_LOADING)) !== null) {
        onLoadingDone = this.liveSocket.withPageLoading({ kind: "element", target: el });
      }
      if (typeof payload.cid !== "number") {
        delete payload.cid;
      }
      return this.liveSocket.wrapPush(this, { timeout: true }, () => {
        return this.channel.push(event, payload, PUSH_TIMEOUT).receive("ok", (resp) => {
          let finish = (hookReply) => {
            if (resp.redirect) {
              this.onRedirect(resp.redirect);
            }
            if (resp.live_patch) {
              this.onLivePatch(resp.live_patch);
            }
            if (resp.live_redirect) {
              this.onLiveRedirect(resp.live_redirect);
            }
            if (ref !== null) {
              this.undoRefs(ref);
            }
            onLoadingDone();
            onReply(resp, hookReply);
          };
          if (resp.diff) {
            this.liveSocket.requestDOMUpdate(() => {
              this.applyDiff("update", resp.diff, ({ diff, reply, events }) => {
                this.update(diff, events);
                finish(reply);
              });
            });
          } else {
            finish(null);
          }
        });
      });
    }
    undoRefs(ref) {
      if (!this.isConnected()) {
        return;
      }
      dom_default.all(document, `[${PHX_REF_SRC}="${this.id}"][${PHX_REF}="${ref}"]`, (el) => {
        let disabledVal = el.getAttribute(PHX_DISABLED);
        el.removeAttribute(PHX_REF);
        el.removeAttribute(PHX_REF_SRC);
        if (el.getAttribute(PHX_READONLY) !== null) {
          el.readOnly = false;
          el.removeAttribute(PHX_READONLY);
        }
        if (disabledVal !== null) {
          el.disabled = disabledVal === "true" ? true : false;
          el.removeAttribute(PHX_DISABLED);
        }
        PHX_EVENT_CLASSES.forEach((className) => dom_default.removeClass(el, className));
        let disableRestore = el.getAttribute(PHX_DISABLE_WITH_RESTORE);
        if (disableRestore !== null) {
          el.innerText = disableRestore;
          el.removeAttribute(PHX_DISABLE_WITH_RESTORE);
        }
        let toEl = dom_default.private(el, PHX_REF);
        if (toEl) {
          let hook = this.triggerBeforeUpdateHook(el, toEl);
          DOMPatch.patchEl(el, toEl, this.liveSocket.getActiveElement());
          if (hook) {
            hook.__updated();
          }
          dom_default.deletePrivate(el, PHX_REF);
        }
      });
    }
    putRef(elements, event, opts = {}) {
      let newRef = this.ref++;
      let disableWith = this.binding(PHX_DISABLE_WITH);
      if (opts.loading) {
        elements = elements.concat(dom_default.all(document, opts.loading));
      }
      elements.forEach((el) => {
        el.classList.add(`phx-${event}-loading`);
        el.setAttribute(PHX_REF, newRef);
        el.setAttribute(PHX_REF_SRC, this.el.id);
        let disableText = el.getAttribute(disableWith);
        if (disableText !== null) {
          if (!el.getAttribute(PHX_DISABLE_WITH_RESTORE)) {
            el.setAttribute(PHX_DISABLE_WITH_RESTORE, el.innerText);
          }
          if (disableText !== "") {
            el.innerText = disableText;
          }
          el.setAttribute("disabled", "");
        }
      });
      return [newRef, elements, opts];
    }
    componentID(el) {
      let cid = el.getAttribute && el.getAttribute(PHX_COMPONENT);
      return cid ? parseInt(cid) : null;
    }
    targetComponentID(target, targetCtx, opts = {}) {
      if (isCid(targetCtx)) {
        return targetCtx;
      }
      let cidOrSelector = target.getAttribute(this.binding("target"));
      if (isCid(cidOrSelector)) {
        return parseInt(cidOrSelector);
      } else if (targetCtx && (cidOrSelector !== null || opts.target)) {
        return this.closestComponentID(targetCtx);
      } else {
        return null;
      }
    }
    closestComponentID(targetCtx) {
      if (isCid(targetCtx)) {
        return targetCtx;
      } else if (targetCtx) {
        return maybe(targetCtx.closest(`[${PHX_COMPONENT}]`), (el) => this.ownsElement(el) && this.componentID(el));
      } else {
        return null;
      }
    }
    pushHookEvent(targetCtx, event, payload, onReply) {
      if (!this.isConnected()) {
        this.log("hook", () => ["unable to push hook event. LiveView not connected", event, payload]);
        return false;
      }
      let [ref, els, opts] = this.putRef([], "hook");
      this.pushWithReply(() => [ref, els, opts], "event", {
        type: "hook",
        event,
        value: payload,
        cid: this.closestComponentID(targetCtx)
      }, (resp, reply) => onReply(reply, ref));
      return ref;
    }
    extractMeta(el, meta, value) {
      let prefix = this.binding("value-");
      for (let i2 = 0; i2 < el.attributes.length; i2++) {
        if (!meta) {
          meta = {};
        }
        let name = el.attributes[i2].name;
        if (name.startsWith(prefix)) {
          meta[name.replace(prefix, "")] = el.getAttribute(name);
        }
      }
      if (el.value !== void 0) {
        if (!meta) {
          meta = {};
        }
        meta.value = el.value;
        if (el.tagName === "INPUT" && CHECKABLE_INPUTS.indexOf(el.type) >= 0 && !el.checked) {
          delete meta.value;
        }
      }
      if (value) {
        if (!meta) {
          meta = {};
        }
        for (let key in value) {
          meta[key] = value[key];
        }
      }
      return meta;
    }
    pushEvent(type, el, targetCtx, phxEvent, meta, opts = {}) {
      this.pushWithReply(() => this.putRef([el], type, opts), "event", {
        type,
        event: phxEvent,
        value: this.extractMeta(el, meta, opts.value),
        cid: this.targetComponentID(el, targetCtx, opts)
      });
    }
    pushFileProgress(fileEl, entryRef, progress, onReply = function() {
    }) {
      this.liveSocket.withinOwners(fileEl.form, (view, targetCtx) => {
        view.pushWithReply(null, "progress", {
          event: fileEl.getAttribute(view.binding(PHX_PROGRESS)),
          ref: fileEl.getAttribute(PHX_UPLOAD_REF),
          entry_ref: entryRef,
          progress,
          cid: view.targetComponentID(fileEl.form, targetCtx)
        }, onReply);
      });
    }
    pushInput(inputEl, targetCtx, forceCid, phxEvent, opts, callback) {
      let uploads;
      let cid = isCid(forceCid) ? forceCid : this.targetComponentID(inputEl.form, targetCtx);
      let refGenerator = () => this.putRef([inputEl, inputEl.form], "change", opts);
      let formData;
      if (inputEl.getAttribute(this.binding("change"))) {
        formData = serializeForm(inputEl.form, { _target: opts._target }, [inputEl.name]);
      } else {
        formData = serializeForm(inputEl.form, { _target: opts._target });
      }
      if (dom_default.isUploadInput(inputEl) && inputEl.files && inputEl.files.length > 0) {
        LiveUploader.trackFiles(inputEl, Array.from(inputEl.files));
      }
      uploads = LiveUploader.serializeUploads(inputEl);
      let event = {
        type: "form",
        event: phxEvent,
        value: formData,
        uploads,
        cid
      };
      this.pushWithReply(refGenerator, "event", event, (resp) => {
        dom_default.showError(inputEl, this.liveSocket.binding(PHX_FEEDBACK_FOR));
        if (dom_default.isUploadInput(inputEl) && inputEl.getAttribute("data-phx-auto-upload") !== null) {
          if (LiveUploader.filesAwaitingPreflight(inputEl).length > 0) {
            let [ref, _els] = refGenerator();
            this.uploadFiles(inputEl.form, targetCtx, ref, cid, (_uploads) => {
              callback && callback(resp);
              this.triggerAwaitingSubmit(inputEl.form);
            });
          }
        } else {
          callback && callback(resp);
        }
      });
    }
    triggerAwaitingSubmit(formEl) {
      let awaitingSubmit = this.getScheduledSubmit(formEl);
      if (awaitingSubmit) {
        let [_el, _ref, _opts, callback] = awaitingSubmit;
        this.cancelSubmit(formEl);
        callback();
      }
    }
    getScheduledSubmit(formEl) {
      return this.formSubmits.find(([el, _ref, _opts, _callback]) => el.isSameNode(formEl));
    }
    scheduleSubmit(formEl, ref, opts, callback) {
      if (this.getScheduledSubmit(formEl)) {
        return true;
      }
      this.formSubmits.push([formEl, ref, opts, callback]);
    }
    cancelSubmit(formEl) {
      this.formSubmits = this.formSubmits.filter(([el, ref, _callback]) => {
        if (el.isSameNode(formEl)) {
          this.undoRefs(ref);
          return false;
        } else {
          return true;
        }
      });
    }
    disableForm(formEl, opts = {}) {
      let filterIgnored = (el) => {
        let userIgnored = closestPhxBinding(el, `${this.binding(PHX_UPDATE)}=ignore`, el.form);
        return !(userIgnored || closestPhxBinding(el, "data-phx-update=ignore", el.form));
      };
      let filterDisables = (el) => {
        return el.hasAttribute(this.binding(PHX_DISABLE_WITH));
      };
      let filterButton = (el) => el.tagName == "BUTTON";
      let filterInput = (el) => ["INPUT", "TEXTAREA", "SELECT"].includes(el.tagName);
      let formElements = Array.from(formEl.elements);
      let disables = formElements.filter(filterDisables);
      let buttons = formElements.filter(filterButton).filter(filterIgnored);
      let inputs = formElements.filter(filterInput).filter(filterIgnored);
      buttons.forEach((button) => {
        button.setAttribute(PHX_DISABLED, button.disabled);
        button.disabled = true;
      });
      inputs.forEach((input) => {
        input.setAttribute(PHX_READONLY, input.readOnly);
        input.readOnly = true;
        if (input.files) {
          input.setAttribute(PHX_DISABLED, input.disabled);
          input.disabled = true;
        }
      });
      formEl.setAttribute(this.binding(PHX_PAGE_LOADING), "");
      return this.putRef([formEl].concat(disables).concat(buttons).concat(inputs), "submit", opts);
    }
    pushFormSubmit(formEl, targetCtx, phxEvent, submitter, opts, onReply) {
      let refGenerator = () => this.disableForm(formEl, opts);
      let cid = this.targetComponentID(formEl, targetCtx);
      if (LiveUploader.hasUploadsInProgress(formEl)) {
        let [ref, _els] = refGenerator();
        let push = () => this.pushFormSubmit(formEl, submitter, targetCtx, phxEvent, opts, onReply);
        return this.scheduleSubmit(formEl, ref, opts, push);
      } else if (LiveUploader.inputsAwaitingPreflight(formEl).length > 0) {
        let [ref, els] = refGenerator();
        let proxyRefGen = () => [ref, els, opts];
        this.uploadFiles(formEl, targetCtx, ref, cid, (_uploads) => {
          let formData = serializeForm(formEl, { submitter });
          this.pushWithReply(proxyRefGen, "event", {
            type: "form",
            event: phxEvent,
            value: formData,
            cid
          }, onReply);
        });
      } else {
        let formData = serializeForm(formEl, { submitter });
        this.pushWithReply(refGenerator, "event", {
          type: "form",
          event: phxEvent,
          value: formData,
          cid
        }, onReply);
      }
    }
    uploadFiles(formEl, targetCtx, ref, cid, onComplete) {
      let joinCountAtUpload = this.joinCount;
      let inputEls = LiveUploader.activeFileInputs(formEl);
      let numFileInputsInProgress = inputEls.length;
      inputEls.forEach((inputEl) => {
        let uploader = new LiveUploader(inputEl, this, () => {
          numFileInputsInProgress--;
          if (numFileInputsInProgress === 0) {
            onComplete();
          }
        });
        this.uploaders[inputEl] = uploader;
        let entries = uploader.entries().map((entry) => entry.toPreflightPayload());
        let payload = {
          ref: inputEl.getAttribute(PHX_UPLOAD_REF),
          entries,
          cid: this.targetComponentID(inputEl.form, targetCtx)
        };
        this.log("upload", () => ["sending preflight request", payload]);
        this.pushWithReply(null, "allow_upload", payload, (resp) => {
          this.log("upload", () => ["got preflight response", resp]);
          if (resp.error) {
            this.undoRefs(ref);
            let [entry_ref, reason] = resp.error;
            this.log("upload", () => [`error for entry ${entry_ref}`, reason]);
          } else {
            let onError = (callback) => {
              this.channel.onError(() => {
                if (this.joinCount === joinCountAtUpload) {
                  callback();
                }
              });
            };
            uploader.initAdapterUpload(resp, onError, this.liveSocket);
          }
        });
      });
    }
    dispatchUploads(name, filesOrBlobs) {
      let inputs = dom_default.findUploadInputs(this.el).filter((el) => el.name === name);
      if (inputs.length === 0) {
        logError(`no live file inputs found matching the name "${name}"`);
      } else if (inputs.length > 1) {
        logError(`duplicate live file inputs found matching the name "${name}"`);
      } else {
        dom_default.dispatchEvent(inputs[0], PHX_TRACK_UPLOADS, { detail: { files: filesOrBlobs } });
      }
    }
    pushFormRecovery(form, newCid, callback) {
      this.liveSocket.withinOwners(form, (view, targetCtx) => {
        let input = Array.from(form.elements).find((el) => {
          return dom_default.isFormInput(el) && el.type !== "hidden" && !el.hasAttribute(this.binding("change"));
        });
        let phxEvent = form.getAttribute(this.binding(PHX_AUTO_RECOVER)) || form.getAttribute(this.binding("change"));
        js_default.exec("change", phxEvent, view, input, ["push", { _target: input.name, newCid, callback }]);
      });
    }
    pushLinkPatch(href, targetEl, callback) {
      let linkRef = this.liveSocket.setPendingLink(href);
      let refGen = targetEl ? () => this.putRef([targetEl], "click") : null;
      let fallback = () => this.liveSocket.redirect(window.location.href);
      let push = this.pushWithReply(refGen, "live_patch", { url: href }, (resp) => {
        this.liveSocket.requestDOMUpdate(() => {
          if (resp.link_redirect) {
            this.liveSocket.replaceMain(href, null, callback, linkRef);
          } else {
            if (this.liveSocket.commitPendingLink(linkRef)) {
              this.href = href;
            }
            this.applyPendingUpdates();
            callback && callback(linkRef);
          }
        });
      });
      if (push) {
        push.receive("timeout", fallback);
      } else {
        fallback();
      }
    }
    formsForRecovery(html) {
      if (this.joinCount === 0) {
        return [];
      }
      let phxChange = this.binding("change");
      let template = document.createElement("template");
      template.innerHTML = html;
      return dom_default.all(this.el, `form[${phxChange}]`).filter((form) => form.id && this.ownsElement(form)).filter((form) => form.elements.length > 0).filter((form) => form.getAttribute(this.binding(PHX_AUTO_RECOVER)) !== "ignore").map((form) => {
        let newForm = template.content.querySelector(`form[id="${form.id}"][${phxChange}="${form.getAttribute(phxChange)}"]`);
        if (newForm) {
          return [form, newForm, this.targetComponentID(newForm)];
        } else {
          return [form, null, null];
        }
      }).filter(([form, newForm, newCid]) => newForm);
    }
    maybePushComponentsDestroyed(destroyedCIDs) {
      let willDestroyCIDs = destroyedCIDs.filter((cid) => {
        return dom_default.findComponentNodeList(this.el, cid).length === 0;
      });
      if (willDestroyCIDs.length > 0) {
        this.pruningCIDs.push(...willDestroyCIDs);
        this.pushWithReply(null, "cids_will_destroy", { cids: willDestroyCIDs }, () => {
          this.pruningCIDs = this.pruningCIDs.filter((cid) => willDestroyCIDs.indexOf(cid) !== -1);
          let completelyDestroyCIDs = willDestroyCIDs.filter((cid) => {
            return dom_default.findComponentNodeList(this.el, cid).length === 0;
          });
          if (completelyDestroyCIDs.length > 0) {
            this.pushWithReply(null, "cids_destroyed", { cids: completelyDestroyCIDs }, (resp) => {
              this.rendered.pruneCIDs(resp.cids);
            });
          }
        });
      }
    }
    ownsElement(el) {
      let parentViewEl = el.closest(PHX_VIEW_SELECTOR);
      return el.getAttribute(PHX_PARENT_ID) === this.id || parentViewEl && parentViewEl.id === this.id || !parentViewEl && this.isDead;
    }
    submitForm(form, targetCtx, phxEvent, submitter, opts = {}) {
      dom_default.putPrivate(form, PHX_HAS_SUBMITTED, true);
      let phxFeedback = this.liveSocket.binding(PHX_FEEDBACK_FOR);
      let inputs = Array.from(form.elements);
      inputs.forEach((input) => dom_default.putPrivate(input, PHX_HAS_SUBMITTED, true));
      this.liveSocket.blurActiveElement(this);
      this.pushFormSubmit(form, targetCtx, phxEvent, submitter, opts, () => {
        inputs.forEach((input) => dom_default.showError(input, phxFeedback));
        this.liveSocket.restorePreviouslyActiveFocus();
      });
    }
    binding(kind) {
      return this.liveSocket.binding(kind);
    }
  };
  var LiveSocket = class {
    constructor(url, phxSocket, opts = {}) {
      this.unloaded = false;
      if (!phxSocket || phxSocket.constructor.name === "Object") {
        throw new Error(`
      a phoenix Socket must be provided as the second argument to the LiveSocket constructor. For example:

          import {Socket} from "phoenix"
          import {LiveSocket} from "phoenix_live_view"
          let liveSocket = new LiveSocket("/live", Socket, {...})
      `);
      }
      this.socket = new phxSocket(url, opts);
      this.bindingPrefix = opts.bindingPrefix || BINDING_PREFIX;
      this.opts = opts;
      this.params = closure2(opts.params || {});
      this.viewLogger = opts.viewLogger;
      this.metadataCallbacks = opts.metadata || {};
      this.defaults = Object.assign(clone(DEFAULTS), opts.defaults || {});
      this.activeElement = null;
      this.prevActive = null;
      this.silenced = false;
      this.main = null;
      this.outgoingMainEl = null;
      this.clickStartedAtTarget = null;
      this.linkRef = 1;
      this.roots = {};
      this.href = window.location.href;
      this.pendingLink = null;
      this.currentLocation = clone(window.location);
      this.hooks = opts.hooks || {};
      this.uploaders = opts.uploaders || {};
      this.loaderTimeout = opts.loaderTimeout || LOADER_TIMEOUT;
      this.reloadWithJitterTimer = null;
      this.maxReloads = opts.maxReloads || MAX_RELOADS;
      this.reloadJitterMin = opts.reloadJitterMin || RELOAD_JITTER_MIN;
      this.reloadJitterMax = opts.reloadJitterMax || RELOAD_JITTER_MAX;
      this.failsafeJitter = opts.failsafeJitter || FAILSAFE_JITTER;
      this.localStorage = opts.localStorage || window.localStorage;
      this.sessionStorage = opts.sessionStorage || window.sessionStorage;
      this.boundTopLevelEvents = false;
      this.domCallbacks = Object.assign({ onNodeAdded: closure2(), onBeforeElUpdated: closure2() }, opts.dom || {});
      this.transitions = new TransitionSet();
      window.addEventListener("pagehide", (_e2) => {
        this.unloaded = true;
      });
      this.socket.onOpen(() => {
        if (this.isUnloaded()) {
          window.location.reload();
        }
      });
    }
    isProfileEnabled() {
      return this.sessionStorage.getItem(PHX_LV_PROFILE) === "true";
    }
    isDebugEnabled() {
      return this.sessionStorage.getItem(PHX_LV_DEBUG) === "true";
    }
    isDebugDisabled() {
      return this.sessionStorage.getItem(PHX_LV_DEBUG) === "false";
    }
    enableDebug() {
      this.sessionStorage.setItem(PHX_LV_DEBUG, "true");
    }
    enableProfiling() {
      this.sessionStorage.setItem(PHX_LV_PROFILE, "true");
    }
    disableDebug() {
      this.sessionStorage.setItem(PHX_LV_DEBUG, "false");
    }
    disableProfiling() {
      this.sessionStorage.removeItem(PHX_LV_PROFILE);
    }
    enableLatencySim(upperBoundMs) {
      this.enableDebug();
      console.log("latency simulator enabled for the duration of this browser session. Call disableLatencySim() to disable");
      this.sessionStorage.setItem(PHX_LV_LATENCY_SIM, upperBoundMs);
    }
    disableLatencySim() {
      this.sessionStorage.removeItem(PHX_LV_LATENCY_SIM);
    }
    getLatencySim() {
      let str = this.sessionStorage.getItem(PHX_LV_LATENCY_SIM);
      return str ? parseInt(str) : null;
    }
    getSocket() {
      return this.socket;
    }
    connect() {
      if (window.location.hostname === "localhost" && !this.isDebugDisabled()) {
        this.enableDebug();
      }
      let doConnect = () => {
        if (this.joinRootViews()) {
          this.bindTopLevelEvents();
          this.socket.connect();
        } else if (this.main) {
          this.socket.connect();
        } else {
          this.bindTopLevelEvents({ dead: true });
        }
        this.joinDeadView();
      };
      if (["complete", "loaded", "interactive"].indexOf(document.readyState) >= 0) {
        doConnect();
      } else {
        document.addEventListener("DOMContentLoaded", () => doConnect());
      }
    }
    disconnect(callback) {
      clearTimeout(this.reloadWithJitterTimer);
      this.socket.disconnect(callback);
    }
    replaceTransport(transport) {
      clearTimeout(this.reloadWithJitterTimer);
      this.socket.replaceTransport(transport);
      this.connect();
    }
    execJS(el, encodedJS, eventType = null) {
      this.owner(el, (view) => js_default.exec(eventType, encodedJS, view, el));
    }
    unload() {
      if (this.unloaded) {
        return;
      }
      if (this.main && this.isConnected()) {
        this.log(this.main, "socket", () => ["disconnect for page nav"]);
      }
      this.unloaded = true;
      this.destroyAllViews();
      this.disconnect();
    }
    triggerDOM(kind, args) {
      this.domCallbacks[kind](...args);
    }
    time(name, func) {
      if (!this.isProfileEnabled() || !console.time) {
        return func();
      }
      console.time(name);
      let result = func();
      console.timeEnd(name);
      return result;
    }
    log(view, kind, msgCallback) {
      if (this.viewLogger) {
        let [msg, obj] = msgCallback();
        this.viewLogger(view, kind, msg, obj);
      } else if (this.isDebugEnabled()) {
        let [msg, obj] = msgCallback();
        debug(view, kind, msg, obj);
      }
    }
    requestDOMUpdate(callback) {
      this.transitions.after(callback);
    }
    transition(time, onStart, onDone = function() {
    }) {
      this.transitions.addTransition(time, onStart, onDone);
    }
    onChannel(channel, event, cb) {
      channel.on(event, (data) => {
        let latency = this.getLatencySim();
        if (!latency) {
          cb(data);
        } else {
          setTimeout(() => cb(data), latency);
        }
      });
    }
    wrapPush(view, opts, push) {
      let latency = this.getLatencySim();
      let oldJoinCount = view.joinCount;
      if (!latency) {
        if (this.isConnected() && opts.timeout) {
          return push().receive("timeout", () => {
            if (view.joinCount === oldJoinCount && !view.isDestroyed()) {
              this.reloadWithJitter(view, () => {
                this.log(view, "timeout", () => ["received timeout while communicating with server. Falling back to hard refresh for recovery"]);
              });
            }
          });
        } else {
          return push();
        }
      }
      let fakePush = {
        receives: [],
        receive(kind, cb) {
          this.receives.push([kind, cb]);
        }
      };
      setTimeout(() => {
        if (view.isDestroyed()) {
          return;
        }
        fakePush.receives.reduce((acc, [kind, cb]) => acc.receive(kind, cb), push());
      }, latency);
      return fakePush;
    }
    reloadWithJitter(view, log) {
      clearTimeout(this.reloadWithJitterTimer);
      this.disconnect();
      let minMs = this.reloadJitterMin;
      let maxMs = this.reloadJitterMax;
      let afterMs = Math.floor(Math.random() * (maxMs - minMs + 1)) + minMs;
      let tries = browser_default.updateLocal(this.localStorage, window.location.pathname, CONSECUTIVE_RELOADS, 0, (count) => count + 1);
      if (tries > this.maxReloads) {
        afterMs = this.failsafeJitter;
      }
      this.reloadWithJitterTimer = setTimeout(() => {
        if (view.isDestroyed() || view.isConnected()) {
          return;
        }
        view.destroy();
        log ? log() : this.log(view, "join", () => [`encountered ${tries} consecutive reloads`]);
        if (tries > this.maxReloads) {
          this.log(view, "join", () => [`exceeded ${this.maxReloads} consecutive reloads. Entering failsafe mode`]);
        }
        if (this.hasPendingLink()) {
          window.location = this.pendingLink;
        } else {
          window.location.reload();
        }
      }, afterMs);
    }
    getHookCallbacks(name) {
      return name && name.startsWith("Phoenix.") ? hooks_default[name.split(".")[1]] : this.hooks[name];
    }
    isUnloaded() {
      return this.unloaded;
    }
    isConnected() {
      return this.socket.isConnected();
    }
    getBindingPrefix() {
      return this.bindingPrefix;
    }
    binding(kind) {
      return `${this.getBindingPrefix()}${kind}`;
    }
    channel(topic, params) {
      return this.socket.channel(topic, params);
    }
    joinDeadView() {
      let body = document.body;
      if (body && !this.isPhxView(body) && !this.isPhxView(document.firstElementChild)) {
        let view = this.newRootView(body);
        view.setHref(this.getHref());
        view.joinDead();
        if (!this.main) {
          this.main = view;
        }
        window.requestAnimationFrame(() => view.execNewMounted());
      }
    }
    joinRootViews() {
      let rootsFound = false;
      dom_default.all(document, `${PHX_VIEW_SELECTOR}:not([${PHX_PARENT_ID}])`, (rootEl) => {
        if (!this.getRootById(rootEl.id)) {
          let view = this.newRootView(rootEl);
          view.setHref(this.getHref());
          view.join();
          if (rootEl.hasAttribute(PHX_MAIN)) {
            this.main = view;
          }
        }
        rootsFound = true;
      });
      return rootsFound;
    }
    redirect(to, flash) {
      this.unload();
      browser_default.redirect(to, flash);
    }
    replaceMain(href, flash, callback = null, linkRef = this.setPendingLink(href)) {
      let liveReferer = this.currentLocation.href;
      this.outgoingMainEl = this.outgoingMainEl || this.main.el;
      let newMainEl = dom_default.cloneNode(this.outgoingMainEl, "");
      this.main.showLoader(this.loaderTimeout);
      this.main.destroy();
      this.main = this.newRootView(newMainEl, flash, liveReferer);
      this.main.setRedirect(href);
      this.transitionRemoves();
      this.main.join((joinCount, onDone) => {
        if (joinCount === 1 && this.commitPendingLink(linkRef)) {
          this.requestDOMUpdate(() => {
            dom_default.findPhxSticky(document).forEach((el) => newMainEl.appendChild(el));
            this.outgoingMainEl.replaceWith(newMainEl);
            this.outgoingMainEl = null;
            callback && requestAnimationFrame(callback);
            onDone();
          });
        }
      });
    }
    transitionRemoves(elements) {
      let removeAttr = this.binding("remove");
      elements = elements || dom_default.all(document, `[${removeAttr}]`);
      elements.forEach((el) => {
        if (document.body.contains(el)) {
          this.execJS(el, el.getAttribute(removeAttr), "remove");
        }
      });
    }
    isPhxView(el) {
      return el.getAttribute && el.getAttribute(PHX_SESSION) !== null;
    }
    newRootView(el, flash, liveReferer) {
      let view = new View(el, this, null, flash, liveReferer);
      this.roots[view.id] = view;
      return view;
    }
    owner(childEl, callback) {
      let view = maybe(childEl.closest(PHX_VIEW_SELECTOR), (el) => this.getViewByEl(el)) || this.main;
      if (view) {
        callback(view);
      }
    }
    withinOwners(childEl, callback) {
      this.owner(childEl, (view) => callback(view, childEl));
    }
    getViewByEl(el) {
      let rootId = el.getAttribute(PHX_ROOT_ID);
      return maybe(this.getRootById(rootId), (root) => root.getDescendentByEl(el));
    }
    getRootById(id) {
      return this.roots[id];
    }
    destroyAllViews() {
      for (let id in this.roots) {
        this.roots[id].destroy();
        delete this.roots[id];
      }
      this.main = null;
    }
    destroyViewByEl(el) {
      let root = this.getRootById(el.getAttribute(PHX_ROOT_ID));
      if (root && root.id === el.id) {
        root.destroy();
        delete this.roots[root.id];
      } else if (root) {
        root.destroyDescendent(el.id);
      }
    }
    setActiveElement(target) {
      if (this.activeElement === target) {
        return;
      }
      this.activeElement = target;
      let cancel = () => {
        if (target === this.activeElement) {
          this.activeElement = null;
        }
        target.removeEventListener("mouseup", this);
        target.removeEventListener("touchend", this);
      };
      target.addEventListener("mouseup", cancel);
      target.addEventListener("touchend", cancel);
    }
    getActiveElement() {
      if (document.activeElement === document.body) {
        return this.activeElement || document.activeElement;
      } else {
        return document.activeElement || document.body;
      }
    }
    dropActiveElement(view) {
      if (this.prevActive && view.ownsElement(this.prevActive)) {
        this.prevActive = null;
      }
    }
    restorePreviouslyActiveFocus() {
      if (this.prevActive && this.prevActive !== document.body) {
        this.prevActive.focus();
      }
    }
    blurActiveElement() {
      this.prevActive = this.getActiveElement();
      if (this.prevActive !== document.body) {
        this.prevActive.blur();
      }
    }
    bindTopLevelEvents({ dead } = {}) {
      if (this.boundTopLevelEvents) {
        return;
      }
      this.boundTopLevelEvents = true;
      this.socket.onClose((event) => {
        if (event && event.code === 1001) {
          return this.unload();
        }
        if (event && event.code === 1e3 && this.main) {
          return this.reloadWithJitter(this.main);
        }
      });
      document.body.addEventListener("click", function() {
      });
      window.addEventListener("pageshow", (e5) => {
        if (e5.persisted) {
          this.getSocket().disconnect();
          this.withPageLoading({ to: window.location.href, kind: "redirect" });
          window.location.reload();
        }
      }, true);
      if (!dead) {
        this.bindNav();
      }
      this.bindClicks();
      if (!dead) {
        this.bindForms();
      }
      this.bind({ keyup: "keyup", keydown: "keydown" }, (e5, type, view, targetEl, phxEvent, eventTarget) => {
        let matchKey = targetEl.getAttribute(this.binding(PHX_KEY));
        let pressedKey = e5.key && e5.key.toLowerCase();
        if (matchKey && matchKey.toLowerCase() !== pressedKey) {
          return;
        }
        let data = __spreadValues({ key: e5.key }, this.eventMeta(type, e5, targetEl));
        js_default.exec(type, phxEvent, view, targetEl, ["push", { data }]);
      });
      this.bind({ blur: "focusout", focus: "focusin" }, (e5, type, view, targetEl, phxEvent, eventTarget) => {
        if (!eventTarget) {
          let data = __spreadValues({ key: e5.key }, this.eventMeta(type, e5, targetEl));
          js_default.exec(type, phxEvent, view, targetEl, ["push", { data }]);
        }
      });
      this.bind({ blur: "blur", focus: "focus" }, (e5, type, view, targetEl, targetCtx, phxEvent, phxTarget) => {
        if (phxTarget === "window") {
          let data = this.eventMeta(type, e5, targetEl);
          js_default.exec(type, phxEvent, view, targetEl, ["push", { data }]);
        }
      });
      window.addEventListener("dragover", (e5) => e5.preventDefault());
      window.addEventListener("drop", (e5) => {
        e5.preventDefault();
        let dropTargetId = maybe(closestPhxBinding(e5.target, this.binding(PHX_DROP_TARGET)), (trueTarget) => {
          return trueTarget.getAttribute(this.binding(PHX_DROP_TARGET));
        });
        let dropTarget = dropTargetId && document.getElementById(dropTargetId);
        let files = Array.from(e5.dataTransfer.files || []);
        if (!dropTarget || dropTarget.disabled || files.length === 0 || !(dropTarget.files instanceof FileList)) {
          return;
        }
        LiveUploader.trackFiles(dropTarget, files, e5.dataTransfer);
        dropTarget.dispatchEvent(new Event("input", { bubbles: true }));
      });
      this.on(PHX_TRACK_UPLOADS, (e5) => {
        let uploadTarget = e5.target;
        if (!dom_default.isUploadInput(uploadTarget)) {
          return;
        }
        let files = Array.from(e5.detail.files || []).filter((f2) => f2 instanceof File || f2 instanceof Blob);
        LiveUploader.trackFiles(uploadTarget, files);
        uploadTarget.dispatchEvent(new Event("input", { bubbles: true }));
      });
    }
    eventMeta(eventName, e5, targetEl) {
      let callback = this.metadataCallbacks[eventName];
      return callback ? callback(e5, targetEl) : {};
    }
    setPendingLink(href) {
      this.linkRef++;
      this.pendingLink = href;
      return this.linkRef;
    }
    commitPendingLink(linkRef) {
      if (this.linkRef !== linkRef) {
        return false;
      } else {
        this.href = this.pendingLink;
        this.pendingLink = null;
        return true;
      }
    }
    getHref() {
      return this.href;
    }
    hasPendingLink() {
      return !!this.pendingLink;
    }
    bind(events, callback) {
      for (let event in events) {
        let browserEventName = events[event];
        this.on(browserEventName, (e5) => {
          let binding = this.binding(event);
          let windowBinding = this.binding(`window-${event}`);
          let targetPhxEvent = e5.target.getAttribute && e5.target.getAttribute(binding);
          if (targetPhxEvent) {
            this.debounce(e5.target, e5, browserEventName, () => {
              this.withinOwners(e5.target, (view) => {
                callback(e5, event, view, e5.target, targetPhxEvent, null);
              });
            });
          } else {
            dom_default.all(document, `[${windowBinding}]`, (el) => {
              let phxEvent = el.getAttribute(windowBinding);
              this.debounce(el, e5, browserEventName, () => {
                this.withinOwners(el, (view) => {
                  callback(e5, event, view, el, phxEvent, "window");
                });
              });
            });
          }
        });
      }
    }
    bindClicks() {
      window.addEventListener("click", (e5) => this.clickStartedAtTarget = e5.target);
      this.bindClick("click", "click", false);
      this.bindClick("mousedown", "capture-click", true);
    }
    bindClick(eventName, bindingName, capture) {
      let click = this.binding(bindingName);
      window.addEventListener(eventName, (e5) => {
        let target = null;
        if (capture) {
          target = e5.target.matches(`[${click}]`) ? e5.target : e5.target.querySelector(`[${click}]`);
        } else {
          let clickStartedAtTarget = this.clickStartedAtTarget || e5.target;
          target = closestPhxBinding(clickStartedAtTarget, click);
          this.dispatchClickAway(e5, clickStartedAtTarget);
          this.clickStartedAtTarget = null;
        }
        let phxEvent = target && target.getAttribute(click);
        if (!phxEvent) {
          let href = e5.target instanceof HTMLAnchorElement ? e5.target.getAttribute("href") : null;
          if (!capture && href !== null && !dom_default.wantsNewTab(e5) && dom_default.isNewPageHref(href, window.location)) {
            this.unload();
          }
          return;
        }
        if (target.getAttribute("href") === "#") {
          e5.preventDefault();
        }
        this.debounce(target, e5, "click", () => {
          this.withinOwners(target, (view) => {
            js_default.exec("click", phxEvent, view, target, ["push", { data: this.eventMeta("click", e5, target) }]);
          });
        });
      }, capture);
    }
    dispatchClickAway(e5, clickStartedAt) {
      let phxClickAway = this.binding("click-away");
      dom_default.all(document, `[${phxClickAway}]`, (el) => {
        if (!(el.isSameNode(clickStartedAt) || el.contains(clickStartedAt))) {
          this.withinOwners(e5.target, (view) => {
            let phxEvent = el.getAttribute(phxClickAway);
            if (js_default.isVisible(el)) {
              js_default.exec("click", phxEvent, view, el, ["push", { data: this.eventMeta("click", e5, e5.target) }]);
            }
          });
        }
      });
    }
    bindNav() {
      if (!browser_default.canPushState()) {
        return;
      }
      if (history.scrollRestoration) {
        history.scrollRestoration = "manual";
      }
      let scrollTimer = null;
      window.addEventListener("scroll", (_e2) => {
        clearTimeout(scrollTimer);
        scrollTimer = setTimeout(() => {
          browser_default.updateCurrentState((state) => Object.assign(state, { scroll: window.scrollY }));
        }, 100);
      });
      window.addEventListener("popstate", (event) => {
        if (!this.registerNewLocation(window.location)) {
          return;
        }
        let { type, id, root, scroll } = event.state || {};
        let href = window.location.href;
        this.requestDOMUpdate(() => {
          if (this.main.isConnected() && (type === "patch" && id === this.main.id)) {
            this.main.pushLinkPatch(href, null, () => {
              this.maybeScroll(scroll);
            });
          } else {
            this.replaceMain(href, null, () => {
              if (root) {
                this.replaceRootHistory();
              }
              this.maybeScroll(scroll);
            });
          }
        });
      }, false);
      window.addEventListener("click", (e5) => {
        let target = closestPhxBinding(e5.target, PHX_LIVE_LINK);
        let type = target && target.getAttribute(PHX_LIVE_LINK);
        if (!type || !this.isConnected() || !this.main || dom_default.wantsNewTab(e5)) {
          return;
        }
        let href = target.href;
        let linkState = target.getAttribute(PHX_LINK_STATE);
        e5.preventDefault();
        e5.stopImmediatePropagation();
        if (this.pendingLink === href) {
          return;
        }
        this.requestDOMUpdate(() => {
          if (type === "patch") {
            this.pushHistoryPatch(href, linkState, target);
          } else if (type === "redirect") {
            this.historyRedirect(href, linkState);
          } else {
            throw new Error(`expected ${PHX_LIVE_LINK} to be "patch" or "redirect", got: ${type}`);
          }
          let phxClick = target.getAttribute(this.binding("click"));
          if (phxClick) {
            this.requestDOMUpdate(() => this.execJS(target, phxClick, "click"));
          }
        });
      }, false);
    }
    maybeScroll(scroll) {
      if (typeof scroll === "number") {
        requestAnimationFrame(() => {
          window.scrollTo(0, scroll);
        });
      }
    }
    dispatchEvent(event, payload = {}) {
      dom_default.dispatchEvent(window, `phx:${event}`, { detail: payload });
    }
    dispatchEvents(events) {
      events.forEach(([event, payload]) => this.dispatchEvent(event, payload));
    }
    withPageLoading(info, callback) {
      dom_default.dispatchEvent(window, "phx:page-loading-start", { detail: info });
      let done = () => dom_default.dispatchEvent(window, "phx:page-loading-stop", { detail: info });
      return callback ? callback(done) : done;
    }
    pushHistoryPatch(href, linkState, targetEl) {
      if (!this.isConnected()) {
        return browser_default.redirect(href);
      }
      this.withPageLoading({ to: href, kind: "patch" }, (done) => {
        this.main.pushLinkPatch(href, targetEl, (linkRef) => {
          this.historyPatch(href, linkState, linkRef);
          done();
        });
      });
    }
    historyPatch(href, linkState, linkRef = this.setPendingLink(href)) {
      if (!this.commitPendingLink(linkRef)) {
        return;
      }
      browser_default.pushState(linkState, { type: "patch", id: this.main.id }, href);
      this.registerNewLocation(window.location);
    }
    historyRedirect(href, linkState, flash) {
      if (!this.isConnected()) {
        return browser_default.redirect(href, flash);
      }
      if (/^\/$|^\/[^\/]+.*$/.test(href)) {
        let { protocol, host } = window.location;
        href = `${protocol}//${host}${href}`;
      }
      let scroll = window.scrollY;
      this.withPageLoading({ to: href, kind: "redirect" }, (done) => {
        this.replaceMain(href, flash, () => {
          browser_default.pushState(linkState, { type: "redirect", id: this.main.id, scroll }, href);
          this.registerNewLocation(window.location);
          done();
        });
      });
    }
    replaceRootHistory() {
      browser_default.pushState("replace", { root: true, type: "patch", id: this.main.id });
    }
    registerNewLocation(newLocation) {
      let { pathname, search } = this.currentLocation;
      if (pathname + search === newLocation.pathname + newLocation.search) {
        return false;
      } else {
        this.currentLocation = clone(newLocation);
        return true;
      }
    }
    bindForms() {
      let iterations = 0;
      let externalFormSubmitted = false;
      this.on("submit", (e5) => {
        let phxSubmit = e5.target.getAttribute(this.binding("submit"));
        let phxChange = e5.target.getAttribute(this.binding("change"));
        if (!externalFormSubmitted && phxChange && !phxSubmit) {
          externalFormSubmitted = true;
          e5.preventDefault();
          this.withinOwners(e5.target, (view) => {
            view.disableForm(e5.target);
            window.requestAnimationFrame(() => {
              if (dom_default.isUnloadableFormSubmit(e5)) {
                this.unload();
              }
              e5.target.submit();
            });
          });
        }
      }, true);
      this.on("submit", (e5) => {
        let phxEvent = e5.target.getAttribute(this.binding("submit"));
        if (!phxEvent) {
          if (dom_default.isUnloadableFormSubmit(e5)) {
            this.unload();
          }
          return;
        }
        e5.preventDefault();
        e5.target.disabled = true;
        this.withinOwners(e5.target, (view) => {
          js_default.exec("submit", phxEvent, view, e5.target, ["push", { submitter: e5.submitter }]);
        });
      }, false);
      for (let type of ["change", "input"]) {
        this.on(type, (e5) => {
          let phxChange = this.binding("change");
          let input = e5.target;
          let inputEvent = input.getAttribute(phxChange);
          let formEvent = input.form && input.form.getAttribute(phxChange);
          let phxEvent = inputEvent || formEvent;
          if (!phxEvent) {
            return;
          }
          if (input.type === "number" && input.validity && input.validity.badInput) {
            return;
          }
          let dispatcher = inputEvent ? input : input.form;
          let currentIterations = iterations;
          iterations++;
          let { at: at2, type: lastType } = dom_default.private(input, "prev-iteration") || {};
          if (at2 === currentIterations - 1 && type !== lastType) {
            return;
          }
          dom_default.putPrivate(input, "prev-iteration", { at: currentIterations, type });
          this.debounce(input, e5, type, () => {
            this.withinOwners(dispatcher, (view) => {
              dom_default.putPrivate(input, PHX_HAS_FOCUSED, true);
              if (!dom_default.isTextualInput(input)) {
                this.setActiveElement(input);
              }
              js_default.exec("change", phxEvent, view, input, ["push", { _target: e5.target.name, dispatcher }]);
            });
          });
        }, false);
      }
      this.on("reset", (e5) => {
        let form = e5.target;
        dom_default.resetForm(form, this.binding(PHX_FEEDBACK_FOR));
        let input = Array.from(form.elements).find((el) => el.type === "reset");
        window.requestAnimationFrame(() => {
          input.dispatchEvent(new Event("input", { bubbles: true, cancelable: false }));
        });
      });
    }
    debounce(el, event, eventType, callback) {
      if (eventType === "blur" || eventType === "focusout") {
        return callback();
      }
      let phxDebounce = this.binding(PHX_DEBOUNCE);
      let phxThrottle = this.binding(PHX_THROTTLE);
      let defaultDebounce = this.defaults.debounce.toString();
      let defaultThrottle = this.defaults.throttle.toString();
      this.withinOwners(el, (view) => {
        let asyncFilter = () => !view.isDestroyed() && document.body.contains(el);
        dom_default.debounce(el, event, phxDebounce, defaultDebounce, phxThrottle, defaultThrottle, asyncFilter, () => {
          callback();
        });
      });
    }
    silenceEvents(callback) {
      this.silenced = true;
      callback();
      this.silenced = false;
    }
    on(event, callback) {
      window.addEventListener(event, (e5) => {
        if (!this.silenced) {
          callback(e5);
        }
      });
    }
  };
  var TransitionSet = class {
    constructor() {
      this.transitions = /* @__PURE__ */ new Set();
      this.pendingOps = [];
    }
    reset() {
      this.transitions.forEach((timer) => {
        clearTimeout(timer);
        this.transitions.delete(timer);
      });
      this.flushPendingOps();
    }
    after(callback) {
      if (this.size() === 0) {
        callback();
      } else {
        this.pushPendingOp(callback);
      }
    }
    addTransition(time, onStart, onDone) {
      onStart();
      let timer = setTimeout(() => {
        this.transitions.delete(timer);
        onDone();
        this.flushPendingOps();
      }, time);
      this.transitions.add(timer);
    }
    pushPendingOp(op) {
      this.pendingOps.push(op);
    }
    size() {
      return this.transitions.size;
    }
    flushPendingOps() {
      if (this.size() > 0) {
        return;
      }
      let op = this.pendingOps.shift();
      if (op) {
        op();
        this.flushPendingOps();
      }
    }
  };

  // js/app.js
  var import_topbar = __toESM(require_topbar());
  $r.init("phc_Byagoba6TS6UBZ4AAMOSY5NZpbaEUJltMKH9CsZkv4l", { api_host: "https://app.posthog.com" });
  var csrfToken = document.querySelector("meta[name='csrf-token']").getAttribute("content");
  var liveSocket = new LiveSocket("/live", Socket, { params: { _csrf_token: csrfToken } });
  var searchTimeout;
  document.addEventListener("input", function(event) {
    if (event.target.matches(".search-box-default")) {
      const searchQuery = event.target.value;
      clearTimeout(searchTimeout);
      searchTimeout = setTimeout(function() {
        $r.capture("used_search", { query: searchQuery });
      }, 5e3);
    }
  }, false);
  document.addEventListener("click", function(event) {
    if (event.target.matches(".monologue-pdflink")) {
      const linkElement = event.target.closest("a");
      if (linkElement) {
        const clicked_3rdPartyUrl = linkElement.getAttribute("href");
        $r.capture("clicked_3rdPartyUrl", {
          url: clicked_3rdPartyUrl
        });
      }
    }
  }, false);
  document.addEventListener("click", function(event) {
    if (event.target.matches(".tip_jar")) {
      $r.capture("clicked_tipjar");
    }
  }, false);
  document.addEventListener("DOMContentLoaded", function() {
    setTimeout(function() {
      const surveyH1 = document.querySelector(".survey-h1");
      if (surveyH1) {
        surveyH1.classList.add("delayed-survey");
      }
    }, 12e4);
  });
  import_topbar.default.config({ barColors: { 0: "#29d" }, shadowColor: "rgba(0, 0, 0, .3)" });
  var topBarScheduled = void 0;
  window.addEventListener("phx:page-loading-start", () => {
    if (!topBarScheduled) {
      topBarScheduled = setTimeout(() => import_topbar.default.show(), 500);
    }
  });
  window.addEventListener("phx:page-loading-stop", () => {
    clearTimeout(topBarScheduled);
    topBarScheduled = void 0;
    import_topbar.default.hide();
  });
  liveSocket.connect();
  liveSocket.enableDebug();
  window.liveSocket = liveSocket;
})();
/**
 * @license MIT
 * topbar 1.0.0, 2021-01-06
 * https://buunguyen.github.io/topbar
 * Copyright (c) 2021 Buu Nguyen
 */
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vLi4vYXNzZXRzL3ZlbmRvci90b3BiYXIuanMiLCAiLi4vLi4vLi4vYXNzZXRzL2pzL2RhcmtfbW9kZS5qcyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1qcy9zcmMvY29uZmlnLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9wb3N0aG9nLWpzL3NyYy91dGlscy90eXBlLXV0aWxzLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9wb3N0aG9nLWpzL3NyYy91dGlscy9nbG9iYWxzLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9wb3N0aG9nLWpzL3NyYy91dGlscy9sb2dnZXIudHMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Bvc3Rob2ctanMvc3JjL3V0aWxzL2luZGV4LnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9wb3N0aG9nLWpzL3NyYy9hdXRvY2FwdHVyZS11dGlscy50cyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1qcy9zcmMvZXh0ZW5zaW9ucy9yYWdlY2xpY2sudHMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Bvc3Rob2ctanMvc3JjL2NvbnN0YW50cy50cyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1qcy9zcmMvYXV0b2NhcHR1cmUudHMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Bvc3Rob2ctanMvc3JjL3R5cGVzLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9wb3N0aG9nLWpzL3NyYy9wb3N0aG9nLWZlYXR1cmVmbGFncy50cyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1qcy9zcmMvdXVpZHY3LnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9wb3N0aG9nLWpzL3NyYy9zdG9yYWdlLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9wb3N0aG9nLWpzL3NyYy91dGlscy9yZXF1ZXN0LXV0aWxzLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9wb3N0aG9nLWpzL3NyYy91dGlscy91c2VyLWFnZW50LXV0aWxzLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9wb3N0aG9nLWpzL3NyYy91dGlscy9ldmVudC11dGlscy50cyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1qcy9zcmMvcG9zdGhvZy1wZXJzaXN0ZW5jZS50cyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1qcy9zcmMvZXh0ZW5zaW9ucy9yZXBsYXkvc2Vzc2lvbnJlY29yZGluZy11dGlscy50cyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1qcy9ub2RlX21vZHVsZXMvLnBucG0vQHJyd2ViK3R5cGVzQDIuMC4wLWFscGhhLjExL25vZGVfbW9kdWxlcy9AcnJ3ZWIvdHlwZXMvZGlzdC90eXBlcy5qcyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1qcy9zcmMvZXh0ZW5zaW9ucy9yZXBsYXkvY29uZmlnLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9wb3N0aG9nLWpzL3NyYy9nZHByLXV0aWxzLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9wb3N0aG9nLWpzL3NyYy9leHRlbnNpb25zL3JlcGxheS9zZXNzaW9ucmVjb3JkaW5nLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9wb3N0aG9nLWpzL3NyYy9kZWNpZGUudHMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Bvc3Rob2ctanMvc3JjL2V4dGVuc2lvbnMvdG9vbGJhci50cyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1qcy9zcmMvcmVxdWVzdC1xdWV1ZS50cyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1qcy9ub2RlX21vZHVsZXMvLnBucG0vZmZsYXRlQDAuNC44L25vZGVfbW9kdWxlcy9mZmxhdGUvZXNtL2Jyb3dzZXIuanMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Bvc3Rob2ctanMvc3JjL3JlcXVlc3QudHMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Bvc3Rob2ctanMvc3JjL3JldHJ5LXF1ZXVlLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9wb3N0aG9nLWpzL3NyYy91dGlscy9yZXF1ZXN0LXJvdXRlci50cyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1qcy9zcmMvc2Vzc2lvbmlkLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9wb3N0aG9nLWpzL3NyYy9leHRlbnNpb25zL3NlbnRyeS1pbnRlZ3JhdGlvbi50cyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1qcy9zcmMvcGFnZS12aWV3LnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9wb3N0aG9nLWpzL3NyYy9wb3N0aG9nLXN1cnZleXMudHMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Bvc3Rob2ctanMvc3JjL3JhdGUtbGltaXRlci50cyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1qcy9zcmMvc2Vzc2lvbi1wcm9wcy50cyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1qcy9zcmMvdXRpbHMvYmxvY2tlZC11YXMudHMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Bvc3Rob2ctanMvc3JjL3Bvc3Rob2ctY29yZS50cyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1qcy9zcmMvZXh0ZW5zaW9ucy9zZWdtZW50LWludGVncmF0aW9uLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9wb3N0aG9nLWpzL3NyYy9wb3N0aG9nLXN1cnZleXMtdHlwZXMudHMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Bvc3Rob2ctanMvc3JjL2xvYWRlci1tb2R1bGUudHMiLCAiLi4vLi4vLi4vZGVwcy9waG9lbml4X2h0bWwvcHJpdi9zdGF0aWMvcGhvZW5peF9odG1sLmpzIiwgIi4uLy4uLy4uL2RlcHMvcGhvZW5peC9hc3NldHMvanMvcGhvZW5peC91dGlscy5qcyIsICIuLi8uLi8uLi9kZXBzL3Bob2VuaXgvYXNzZXRzL2pzL3Bob2VuaXgvY29uc3RhbnRzLmpzIiwgIi4uLy4uLy4uL2RlcHMvcGhvZW5peC9hc3NldHMvanMvcGhvZW5peC9wdXNoLmpzIiwgIi4uLy4uLy4uL2RlcHMvcGhvZW5peC9hc3NldHMvanMvcGhvZW5peC90aW1lci5qcyIsICIuLi8uLi8uLi9kZXBzL3Bob2VuaXgvYXNzZXRzL2pzL3Bob2VuaXgvY2hhbm5lbC5qcyIsICIuLi8uLi8uLi9kZXBzL3Bob2VuaXgvYXNzZXRzL2pzL3Bob2VuaXgvYWpheC5qcyIsICIuLi8uLi8uLi9kZXBzL3Bob2VuaXgvYXNzZXRzL2pzL3Bob2VuaXgvbG9uZ3BvbGwuanMiLCAiLi4vLi4vLi4vZGVwcy9waG9lbml4L2Fzc2V0cy9qcy9waG9lbml4L3ByZXNlbmNlLmpzIiwgIi4uLy4uLy4uL2RlcHMvcGhvZW5peC9hc3NldHMvanMvcGhvZW5peC9zZXJpYWxpemVyLmpzIiwgIi4uLy4uLy4uL2RlcHMvcGhvZW5peC9hc3NldHMvanMvcGhvZW5peC9zb2NrZXQuanMiLCAiLi4vLi4vLi4vZGVwcy9waG9lbml4X2xpdmVfdmlldy9hc3NldHMvanMvcGhvZW5peF9saXZlX3ZpZXcvY29uc3RhbnRzLmpzIiwgIi4uLy4uLy4uL2RlcHMvcGhvZW5peF9saXZlX3ZpZXcvYXNzZXRzL2pzL3Bob2VuaXhfbGl2ZV92aWV3L2VudHJ5X3VwbG9hZGVyLmpzIiwgIi4uLy4uLy4uL2RlcHMvcGhvZW5peF9saXZlX3ZpZXcvYXNzZXRzL2pzL3Bob2VuaXhfbGl2ZV92aWV3L3V0aWxzLmpzIiwgIi4uLy4uLy4uL2RlcHMvcGhvZW5peF9saXZlX3ZpZXcvYXNzZXRzL2pzL3Bob2VuaXhfbGl2ZV92aWV3L2Jyb3dzZXIuanMiLCAiLi4vLi4vLi4vZGVwcy9waG9lbml4X2xpdmVfdmlldy9hc3NldHMvanMvcGhvZW5peF9saXZlX3ZpZXcvZG9tLmpzIiwgIi4uLy4uLy4uL2RlcHMvcGhvZW5peF9saXZlX3ZpZXcvYXNzZXRzL2pzL3Bob2VuaXhfbGl2ZV92aWV3L3VwbG9hZF9lbnRyeS5qcyIsICIuLi8uLi8uLi9kZXBzL3Bob2VuaXhfbGl2ZV92aWV3L2Fzc2V0cy9qcy9waG9lbml4X2xpdmVfdmlldy9saXZlX3VwbG9hZGVyLmpzIiwgIi4uLy4uLy4uL2RlcHMvcGhvZW5peF9saXZlX3ZpZXcvYXNzZXRzL2pzL3Bob2VuaXhfbGl2ZV92aWV3L2FyaWEuanMiLCAiLi4vLi4vLi4vZGVwcy9waG9lbml4X2xpdmVfdmlldy9hc3NldHMvanMvcGhvZW5peF9saXZlX3ZpZXcvaG9va3MuanMiLCAiLi4vLi4vLi4vZGVwcy9waG9lbml4X2xpdmVfdmlldy9hc3NldHMvanMvcGhvZW5peF9saXZlX3ZpZXcvZG9tX3Bvc3RfbW9ycGhfcmVzdG9yZXIuanMiLCAiLi4vLi4vLi4vZGVwcy9waG9lbml4X2xpdmVfdmlldy9hc3NldHMvbm9kZV9tb2R1bGVzL21vcnBoZG9tL2Rpc3QvbW9ycGhkb20tZXNtLmpzIiwgIi4uLy4uLy4uL2RlcHMvcGhvZW5peF9saXZlX3ZpZXcvYXNzZXRzL2pzL3Bob2VuaXhfbGl2ZV92aWV3L2RvbV9wYXRjaC5qcyIsICIuLi8uLi8uLi9kZXBzL3Bob2VuaXhfbGl2ZV92aWV3L2Fzc2V0cy9qcy9waG9lbml4X2xpdmVfdmlldy9yZW5kZXJlZC5qcyIsICIuLi8uLi8uLi9kZXBzL3Bob2VuaXhfbGl2ZV92aWV3L2Fzc2V0cy9qcy9waG9lbml4X2xpdmVfdmlldy92aWV3X2hvb2suanMiLCAiLi4vLi4vLi4vZGVwcy9waG9lbml4X2xpdmVfdmlldy9hc3NldHMvanMvcGhvZW5peF9saXZlX3ZpZXcvanMuanMiLCAiLi4vLi4vLi4vZGVwcy9waG9lbml4X2xpdmVfdmlldy9hc3NldHMvanMvcGhvZW5peF9saXZlX3ZpZXcvdmlldy5qcyIsICIuLi8uLi8uLi9kZXBzL3Bob2VuaXhfbGl2ZV92aWV3L2Fzc2V0cy9qcy9waG9lbml4X2xpdmVfdmlldy9saXZlX3NvY2tldC5qcyIsICIuLi8uLi8uLi9hc3NldHMvanMvYXBwLmpzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyIvKipcbiAqIEBsaWNlbnNlIE1JVFxuICogdG9wYmFyIDEuMC4wLCAyMDIxLTAxLTA2XG4gKiBodHRwczovL2J1dW5ndXllbi5naXRodWIuaW8vdG9wYmFyXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjEgQnV1IE5ndXllblxuICovXG4oZnVuY3Rpb24gKHdpbmRvdywgZG9jdW1lbnQpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgLy8gaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vcGF1bGlyaXNoLzE1Nzk2NzFcbiAgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgbGFzdFRpbWUgPSAwO1xuICAgIHZhciB2ZW5kb3JzID0gW1wibXNcIiwgXCJtb3pcIiwgXCJ3ZWJraXRcIiwgXCJvXCJdO1xuICAgIGZvciAodmFyIHggPSAwOyB4IDwgdmVuZG9ycy5sZW5ndGggJiYgIXdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWU7ICsreCkge1xuICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSA9XG4gICAgICAgIHdpbmRvd1t2ZW5kb3JzW3hdICsgXCJSZXF1ZXN0QW5pbWF0aW9uRnJhbWVcIl07XG4gICAgICB3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUgPVxuICAgICAgICB3aW5kb3dbdmVuZG9yc1t4XSArIFwiQ2FuY2VsQW5pbWF0aW9uRnJhbWVcIl0gfHxcbiAgICAgICAgd2luZG93W3ZlbmRvcnNbeF0gKyBcIkNhbmNlbFJlcXVlc3RBbmltYXRpb25GcmFtZVwiXTtcbiAgICB9XG4gICAgaWYgKCF3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKVxuICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSA9IGZ1bmN0aW9uIChjYWxsYmFjaywgZWxlbWVudCkge1xuICAgICAgICB2YXIgY3VyclRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICAgICAgdmFyIHRpbWVUb0NhbGwgPSBNYXRoLm1heCgwLCAxNiAtIChjdXJyVGltZSAtIGxhc3RUaW1lKSk7XG4gICAgICAgIHZhciBpZCA9IHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBjYWxsYmFjayhjdXJyVGltZSArIHRpbWVUb0NhbGwpO1xuICAgICAgICB9LCB0aW1lVG9DYWxsKTtcbiAgICAgICAgbGFzdFRpbWUgPSBjdXJyVGltZSArIHRpbWVUb0NhbGw7XG4gICAgICAgIHJldHVybiBpZDtcbiAgICAgIH07XG4gICAgaWYgKCF3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUpXG4gICAgICB3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUgPSBmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KGlkKTtcbiAgICAgIH07XG4gIH0pKCk7XG5cbiAgdmFyIGNhbnZhcyxcbiAgICBwcm9ncmVzc1RpbWVySWQsXG4gICAgZmFkZVRpbWVySWQsXG4gICAgY3VycmVudFByb2dyZXNzLFxuICAgIHNob3dpbmcsXG4gICAgYWRkRXZlbnQgPSBmdW5jdGlvbiAoZWxlbSwgdHlwZSwgaGFuZGxlcikge1xuICAgICAgaWYgKGVsZW0uYWRkRXZlbnRMaXN0ZW5lcikgZWxlbS5hZGRFdmVudExpc3RlbmVyKHR5cGUsIGhhbmRsZXIsIGZhbHNlKTtcbiAgICAgIGVsc2UgaWYgKGVsZW0uYXR0YWNoRXZlbnQpIGVsZW0uYXR0YWNoRXZlbnQoXCJvblwiICsgdHlwZSwgaGFuZGxlcik7XG4gICAgICBlbHNlIGVsZW1bXCJvblwiICsgdHlwZV0gPSBoYW5kbGVyO1xuICAgIH0sXG4gICAgb3B0aW9ucyA9IHtcbiAgICAgIGF1dG9SdW46IHRydWUsXG4gICAgICBiYXJUaGlja25lc3M6IDMsXG4gICAgICBiYXJDb2xvcnM6IHtcbiAgICAgICAgMDogXCJyZ2JhKDI2LCAgMTg4LCAxNTYsIC45KVwiLFxuICAgICAgICBcIi4yNVwiOiBcInJnYmEoNTIsICAxNTIsIDIxOSwgLjkpXCIsXG4gICAgICAgIFwiLjUwXCI6IFwicmdiYSgyNDEsIDE5NiwgMTUsICAuOSlcIixcbiAgICAgICAgXCIuNzVcIjogXCJyZ2JhKDIzMCwgMTI2LCAzNCwgIC45KVwiLFxuICAgICAgICBcIjEuMFwiOiBcInJnYmEoMjExLCA4NCwgIDAsICAgLjkpXCIsXG4gICAgICB9LFxuICAgICAgc2hhZG93Qmx1cjogMTAsXG4gICAgICBzaGFkb3dDb2xvcjogXCJyZ2JhKDAsICAgMCwgICAwLCAgIC42KVwiLFxuICAgICAgY2xhc3NOYW1lOiBudWxsLFxuICAgIH0sXG4gICAgcmVwYWludCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGNhbnZhcy53aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xuICAgICAgY2FudmFzLmhlaWdodCA9IG9wdGlvbnMuYmFyVGhpY2tuZXNzICogNTsgLy8gbmVlZCBzcGFjZSBmb3Igc2hhZG93XG5cbiAgICAgIHZhciBjdHggPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuICAgICAgY3R4LnNoYWRvd0JsdXIgPSBvcHRpb25zLnNoYWRvd0JsdXI7XG4gICAgICBjdHguc2hhZG93Q29sb3IgPSBvcHRpb25zLnNoYWRvd0NvbG9yO1xuXG4gICAgICB2YXIgbGluZUdyYWRpZW50ID0gY3R4LmNyZWF0ZUxpbmVhckdyYWRpZW50KDAsIDAsIGNhbnZhcy53aWR0aCwgMCk7XG4gICAgICBmb3IgKHZhciBzdG9wIGluIG9wdGlvbnMuYmFyQ29sb3JzKVxuICAgICAgICBsaW5lR3JhZGllbnQuYWRkQ29sb3JTdG9wKHN0b3AsIG9wdGlvbnMuYmFyQ29sb3JzW3N0b3BdKTtcbiAgICAgIGN0eC5saW5lV2lkdGggPSBvcHRpb25zLmJhclRoaWNrbmVzcztcbiAgICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICAgIGN0eC5tb3ZlVG8oMCwgb3B0aW9ucy5iYXJUaGlja25lc3MgLyAyKTtcbiAgICAgIGN0eC5saW5lVG8oXG4gICAgICAgIE1hdGguY2VpbChjdXJyZW50UHJvZ3Jlc3MgKiBjYW52YXMud2lkdGgpLFxuICAgICAgICBvcHRpb25zLmJhclRoaWNrbmVzcyAvIDJcbiAgICAgICk7XG4gICAgICBjdHguc3Ryb2tlU3R5bGUgPSBsaW5lR3JhZGllbnQ7XG4gICAgICBjdHguc3Ryb2tlKCk7XG4gICAgfSxcbiAgICBjcmVhdGVDYW52YXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xuICAgICAgdmFyIHN0eWxlID0gY2FudmFzLnN0eWxlO1xuICAgICAgc3R5bGUucG9zaXRpb24gPSBcImZpeGVkXCI7XG4gICAgICBzdHlsZS50b3AgPSBzdHlsZS5sZWZ0ID0gc3R5bGUucmlnaHQgPSBzdHlsZS5tYXJnaW4gPSBzdHlsZS5wYWRkaW5nID0gMDtcbiAgICAgIHN0eWxlLnpJbmRleCA9IDEwMDAwMTtcbiAgICAgIHN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgIGlmIChvcHRpb25zLmNsYXNzTmFtZSkgY2FudmFzLmNsYXNzTGlzdC5hZGQob3B0aW9ucy5jbGFzc05hbWUpO1xuICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChjYW52YXMpO1xuICAgICAgYWRkRXZlbnQod2luZG93LCBcInJlc2l6ZVwiLCByZXBhaW50KTtcbiAgICB9LFxuICAgIHRvcGJhciA9IHtcbiAgICAgIGNvbmZpZzogZnVuY3Rpb24gKG9wdHMpIHtcbiAgICAgICAgZm9yICh2YXIga2V5IGluIG9wdHMpXG4gICAgICAgICAgaWYgKG9wdGlvbnMuaGFzT3duUHJvcGVydHkoa2V5KSkgb3B0aW9uc1trZXldID0gb3B0c1trZXldO1xuICAgICAgfSxcbiAgICAgIHNob3c6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHNob3dpbmcpIHJldHVybjtcbiAgICAgICAgc2hvd2luZyA9IHRydWU7XG4gICAgICAgIGlmIChmYWRlVGltZXJJZCAhPT0gbnVsbCkgd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lKGZhZGVUaW1lcklkKTtcbiAgICAgICAgaWYgKCFjYW52YXMpIGNyZWF0ZUNhbnZhcygpO1xuICAgICAgICBjYW52YXMuc3R5bGUub3BhY2l0eSA9IDE7XG4gICAgICAgIGNhbnZhcy5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICB0b3BiYXIucHJvZ3Jlc3MoMCk7XG4gICAgICAgIGlmIChvcHRpb25zLmF1dG9SdW4pIHtcbiAgICAgICAgICAoZnVuY3Rpb24gbG9vcCgpIHtcbiAgICAgICAgICAgIHByb2dyZXNzVGltZXJJZCA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUobG9vcCk7XG4gICAgICAgICAgICB0b3BiYXIucHJvZ3Jlc3MoXG4gICAgICAgICAgICAgIFwiK1wiICsgMC4wNSAqIE1hdGgucG93KDEgLSBNYXRoLnNxcnQoY3VycmVudFByb2dyZXNzKSwgMilcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSkoKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHByb2dyZXNzOiBmdW5jdGlvbiAodG8pIHtcbiAgICAgICAgaWYgKHR5cGVvZiB0byA9PT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuIGN1cnJlbnRQcm9ncmVzcztcbiAgICAgICAgaWYgKHR5cGVvZiB0byA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgIHRvID1cbiAgICAgICAgICAgICh0by5pbmRleE9mKFwiK1wiKSA+PSAwIHx8IHRvLmluZGV4T2YoXCItXCIpID49IDBcbiAgICAgICAgICAgICAgPyBjdXJyZW50UHJvZ3Jlc3NcbiAgICAgICAgICAgICAgOiAwKSArIHBhcnNlRmxvYXQodG8pO1xuICAgICAgICB9XG4gICAgICAgIGN1cnJlbnRQcm9ncmVzcyA9IHRvID4gMSA/IDEgOiB0bztcbiAgICAgICAgcmVwYWludCgpO1xuICAgICAgICByZXR1cm4gY3VycmVudFByb2dyZXNzO1xuICAgICAgfSxcbiAgICAgIGhpZGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCFzaG93aW5nKSByZXR1cm47XG4gICAgICAgIHNob3dpbmcgPSBmYWxzZTtcbiAgICAgICAgaWYgKHByb2dyZXNzVGltZXJJZCAhPSBudWxsKSB7XG4gICAgICAgICAgd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lKHByb2dyZXNzVGltZXJJZCk7XG4gICAgICAgICAgcHJvZ3Jlc3NUaW1lcklkID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICAoZnVuY3Rpb24gbG9vcCgpIHtcbiAgICAgICAgICBpZiAodG9wYmFyLnByb2dyZXNzKFwiKy4xXCIpID49IDEpIHtcbiAgICAgICAgICAgIGNhbnZhcy5zdHlsZS5vcGFjaXR5IC09IDAuMDU7XG4gICAgICAgICAgICBpZiAoY2FudmFzLnN0eWxlLm9wYWNpdHkgPD0gMC4wNSkge1xuICAgICAgICAgICAgICBjYW52YXMuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgICBmYWRlVGltZXJJZCA9IG51bGw7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgZmFkZVRpbWVySWQgPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGxvb3ApO1xuICAgICAgICB9KSgpO1xuICAgICAgfSxcbiAgICB9O1xuXG4gIGlmICh0eXBlb2YgbW9kdWxlID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJvYmplY3RcIikge1xuICAgIG1vZHVsZS5leHBvcnRzID0gdG9wYmFyO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09IFwiZnVuY3Rpb25cIiAmJiBkZWZpbmUuYW1kKSB7XG4gICAgZGVmaW5lKGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0b3BiYXI7XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgdGhpcy50b3BiYXIgPSB0b3BiYXI7XG4gIH1cbn0uY2FsbCh0aGlzLCB3aW5kb3csIGRvY3VtZW50KSk7XG4iLCAiLy8gRnVuY3Rpb24gdG8gcmVhZCB0aGUgdmFsdWUgb2YgYSBjb29raWUgYnkgaXRzIG5hbWVcbmZ1bmN0aW9uIGdldENvb2tpZShuYW1lKSB7XG4gIGNvbnN0IHZhbHVlID0gJzsgJyArIGRvY3VtZW50LmNvb2tpZTtcbiAgY29uc3QgcGFydHMgPSB2YWx1ZS5zcGxpdCgnOyAnICsgbmFtZSArICc9Jyk7XG4gIGlmIChwYXJ0cy5sZW5ndGggPT09IDIpIHJldHVybiBwYXJ0cy5wb3AoKS5zcGxpdCgnOycpLnNoaWZ0KCk7XG4gIHJldHVybiBudWxsO1xufVxuXG4vLyBGdW5jdGlvbiB0byBzZXQgZGFyayBtb2RlIGJhc2VkIG9uIHRoZSB1c2VyJ3MgcHJlZmVyZW5jZVxuZnVuY3Rpb24gc2V0RGFya01vZGVQcmVmZXJlbmNlKGlzRGFya01vZGUpIHtcbiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2RhcmtNb2RlJywgaXNEYXJrTW9kZSA/ICd0cnVlJyA6ICdmYWxzZScpO1xuICAvLyBTZXQgYSBjb29raWUgZm9yIHRoZSBkYXJrIG1vZGUgcHJlZmVyZW5jZVxuICBkb2N1bWVudC5jb29raWUgPSAnZGFya01vZGVQcmVmZXJlbmNlPScgKyAoaXNEYXJrTW9kZSA/ICd0cnVlJyA6ICdmYWxzZScpICsgJztwYXRoPS8nO1xuICB2YXIgYm9keUVsZW1lbnQgPSBkb2N1bWVudC5ib2R5OyAvLyBVc2UgJ2RvY3VtZW50LmJvZHknIGluc3RlYWQgb2YgJ2dldEVsZW1lbnRCeUlkJ1xuICB2YXIgbGlnaHRNb2RlVG9nZ2xlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xpZ2h0LW1vZGUtdG9nZ2xlJyk7XG4gIHZhciBkYXJrTW9kZVRvZ2dsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkYXJrLW1vZGUtdG9nZ2xlJyk7XG4gIGlmIChpc0RhcmtNb2RlKSB7XG4gICAgYm9keUVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZGFyay1tb2RlJyk7XG4gICAgbGlnaHRNb2RlVG9nZ2xlLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgZGFya01vZGVUb2dnbGUuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gIH0gZWxzZSB7XG4gICAgYm9keUVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnZGFyay1tb2RlJyk7XG4gICAgbGlnaHRNb2RlVG9nZ2xlLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgIGRhcmtNb2RlVG9nZ2xlLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gIH1cbn1cblxuLy8gRnVuY3Rpb24gdG8gdG9nZ2xlIGRhcmsgbW9kZVxuZnVuY3Rpb24gdG9nZ2xlRGFya01vZGUoKSB7XG4gIC8vIENoZWNrIGlmIGRhcmsgbW9kZSBpcyBjdXJyZW50bHkgZW5hYmxlZFxuICB2YXIgaXNEYXJrTW9kZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdkYXJrTW9kZScpID09PSAndHJ1ZSc7XG4gIC8vIFRvZ2dsZSB0aGUgZGFyayBtb2RlIHByZWZlcmVuY2UgYW5kIHVwZGF0ZSB0aGUgVUlcbiAgc2V0RGFya01vZGVQcmVmZXJlbmNlKCFpc0RhcmtNb2RlKTtcbn1cblxuLy8gQXR0YWNoIHRoZSB0b2dnbGVEYXJrTW9kZSBmdW5jdGlvbiB0byB0aGUgY2xpY2sgZXZlbnQgb2YgdGhlIGRhcmsgbW9kZSBpY29uXG52YXIgZGFya01vZGVJY29uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RhcmstbW9kZS1pY29uJyk7XG5pZiAoZGFya01vZGVJY29uKSB7XG4gIGRhcmtNb2RlSWNvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRvZ2dsZURhcmtNb2RlKTtcbn1cblxuLy8gU2V0IHRoZSBpbml0aWFsIGRhcmsgbW9kZSBwcmVmZXJlbmNlIGJhc2VkIG9uIGxvY2FsU3RvcmFnZVxudmFyIGluaXRpYWxEYXJrTW9kZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdkYXJrTW9kZScpID09PSAndHJ1ZSc7XG5zZXREYXJrTW9kZVByZWZlcmVuY2UoaW5pdGlhbERhcmtNb2RlKTtcblxud2luZG93LmdldENvb2tpZSA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgY29uc3QgdmFsdWUgPSAnOyAnICsgZG9jdW1lbnQuY29va2llO1xuICBjb25zdCBwYXJ0cyA9IHZhbHVlLnNwbGl0KCc7ICcgKyBuYW1lICsgJz0nKTtcbiAgaWYgKHBhcnRzLmxlbmd0aCA9PT0gMikgcmV0dXJuIHBhcnRzLnBvcCgpLnNwbGl0KCc7Jykuc2hpZnQoKTtcbiAgcmV0dXJuIG51bGw7XG59O1xuIiwgImltcG9ydCB7IHZlcnNpb24gfSBmcm9tICcuLi9wYWNrYWdlLmpzb24nXG5cbi8vIG92ZXJyaWRlbiBpbiBwb3N0aG9nLWNvcmUsXG4vLyBlLmcuICAgICBDb25maWcuREVCVUcgPSBDb25maWcuREVCVUcgfHwgaW5zdGFuY2UuY29uZmlnLmRlYnVnXG5jb25zdCBDb25maWcgPSB7XG4gICAgREVCVUc6IGZhbHNlLFxuICAgIExJQl9WRVJTSU9OOiB2ZXJzaW9uLFxufVxuXG5leHBvcnQgZGVmYXVsdCBDb25maWdcbiIsICIvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcG9zdGhvZy1qcy9uby1kaXJlY3QtYXJyYXktY2hlY2tcbmNvbnN0IG5hdGl2ZUlzQXJyYXkgPSBBcnJheS5pc0FycmF5XG5jb25zdCBPYmpQcm90byA9IE9iamVjdC5wcm90b3R5cGVcbmV4cG9ydCBjb25zdCBoYXNPd25Qcm9wZXJ0eSA9IE9ialByb3RvLmhhc093blByb3BlcnR5XG5jb25zdCB0b1N0cmluZyA9IE9ialByb3RvLnRvU3RyaW5nXG5cbmV4cG9ydCBjb25zdCBfaXNBcnJheSA9XG4gICAgbmF0aXZlSXNBcnJheSB8fFxuICAgIGZ1bmN0aW9uIChvYmo6IGFueSk6IG9iaiBpcyBhbnlbXSB7XG4gICAgICAgIHJldHVybiB0b1N0cmluZy5jYWxsKG9iaikgPT09ICdbb2JqZWN0IEFycmF5XSdcbiAgICB9XG5leHBvcnQgY29uc3QgX2lzVWludDhBcnJheSA9IGZ1bmN0aW9uICh4OiB1bmtub3duKTogeCBpcyBVaW50OEFycmF5IHtcbiAgICByZXR1cm4gdG9TdHJpbmcuY2FsbCh4KSA9PT0gJ1tvYmplY3QgVWludDhBcnJheV0nXG59XG4vLyBmcm9tIGEgY29tbWVudCBvbiBodHRwOi8vZGJqLm9yZy9kYmovP3A9Mjg2XG4vLyBmYWlscyBvbiBvbmx5IG9uZSB2ZXJ5IHJhcmUgYW5kIGRlbGliZXJhdGUgY3VzdG9tIG9iamVjdDpcbi8vIGxldCBib21iID0geyB0b1N0cmluZyA6IHVuZGVmaW5lZCwgdmFsdWVPZjogZnVuY3Rpb24obykgeyByZXR1cm4gXCJmdW5jdGlvbiBCT01CQSFcIjsgfX07XG5leHBvcnQgY29uc3QgX2lzRnVuY3Rpb24gPSBmdW5jdGlvbiAoZjogYW55KTogZiBpcyAoLi4uYXJnczogYW55W10pID0+IGFueSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHBvc3Rob2ctanMvbm8tZGlyZWN0LWZ1bmN0aW9uLWNoZWNrXG4gICAgcmV0dXJuIHR5cGVvZiBmID09PSAnZnVuY3Rpb24nXG59XG4vLyBVbmRlcnNjb3JlIEFkZG9uc1xuZXhwb3J0IGNvbnN0IF9pc09iamVjdCA9IGZ1bmN0aW9uICh4OiB1bmtub3duKTogeCBpcyBSZWNvcmQ8c3RyaW5nLCBhbnk+IHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcG9zdGhvZy1qcy9uby1kaXJlY3Qtb2JqZWN0LWNoZWNrXG4gICAgcmV0dXJuIHggPT09IE9iamVjdCh4KSAmJiAhX2lzQXJyYXkoeClcbn1cbmV4cG9ydCBjb25zdCBfaXNFbXB0eU9iamVjdCA9IGZ1bmN0aW9uICh4OiB1bmtub3duKTogeCBpcyBSZWNvcmQ8c3RyaW5nLCBhbnk+IHtcbiAgICBpZiAoX2lzT2JqZWN0KHgpKSB7XG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIHgpIHtcbiAgICAgICAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKHgsIGtleSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2Vcbn1cbmV4cG9ydCBjb25zdCBfaXNVbmRlZmluZWQgPSBmdW5jdGlvbiAoeDogdW5rbm93bik6IHggaXMgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4geCA9PT0gdm9pZCAwXG59XG5cbmV4cG9ydCBjb25zdCBfaXNTdHJpbmcgPSBmdW5jdGlvbiAoeDogdW5rbm93bik6IHggaXMgc3RyaW5nIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcG9zdGhvZy1qcy9uby1kaXJlY3Qtc3RyaW5nLWNoZWNrXG4gICAgcmV0dXJuIHRvU3RyaW5nLmNhbGwoeCkgPT0gJ1tvYmplY3QgU3RyaW5nXSdcbn1cblxuZXhwb3J0IGNvbnN0IF9pc0VtcHR5U3RyaW5nID0gZnVuY3Rpb24gKHg6IHVua25vd24pOiBib29sZWFuIHtcbiAgICByZXR1cm4gX2lzU3RyaW5nKHgpICYmIHgudHJpbSgpLmxlbmd0aCA9PT0gMFxufVxuXG5leHBvcnQgY29uc3QgX2lzTnVsbCA9IGZ1bmN0aW9uICh4OiB1bmtub3duKTogeCBpcyBudWxsIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcG9zdGhvZy1qcy9uby1kaXJlY3QtbnVsbC1jaGVja1xuICAgIHJldHVybiB4ID09PSBudWxsXG59XG5cbi8qXG4gICAgc29tZXRpbWVzIHlvdSB3YW50IHRvIGNoZWNrIGlmIHNvbWV0aGluZyBpcyBudWxsIG9yIHVuZGVmaW5lZFxuICAgIHRoYXQncyB3aGF0IHRoaXMgaXMgZm9yXG4gKi9cbmV4cG9ydCBjb25zdCBfaXNOdWxsaXNoID0gZnVuY3Rpb24gKHg6IHVua25vd24pOiB4IGlzIG51bGwgfCB1bmRlZmluZWQge1xuICAgIHJldHVybiBfaXNVbmRlZmluZWQoeCkgfHwgX2lzTnVsbCh4KVxufVxuXG5leHBvcnQgY29uc3QgX2lzRGF0ZSA9IGZ1bmN0aW9uICh4OiB1bmtub3duKTogeCBpcyBEYXRlIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcG9zdGhvZy1qcy9uby1kaXJlY3QtZGF0ZS1jaGVja1xuICAgIHJldHVybiB0b1N0cmluZy5jYWxsKHgpID09ICdbb2JqZWN0IERhdGVdJ1xufVxuZXhwb3J0IGNvbnN0IF9pc051bWJlciA9IGZ1bmN0aW9uICh4OiB1bmtub3duKTogeCBpcyBudW1iZXIge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwb3N0aG9nLWpzL25vLWRpcmVjdC1udW1iZXItY2hlY2tcbiAgICByZXR1cm4gdG9TdHJpbmcuY2FsbCh4KSA9PSAnW29iamVjdCBOdW1iZXJdJ1xufVxuZXhwb3J0IGNvbnN0IF9pc0Jvb2xlYW4gPSBmdW5jdGlvbiAoeDogdW5rbm93bik6IHggaXMgYm9vbGVhbiB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHBvc3Rob2ctanMvbm8tZGlyZWN0LWJvb2xlYW4tY2hlY2tcbiAgICByZXR1cm4gdG9TdHJpbmcuY2FsbCh4KSA9PT0gJ1tvYmplY3QgQm9vbGVhbl0nXG59XG5cbmV4cG9ydCBjb25zdCBfaXNEb2N1bWVudCA9ICh4OiB1bmtub3duKTogeCBpcyBEb2N1bWVudCA9PiB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHBvc3Rob2ctanMvbm8tZGlyZWN0LWRvY3VtZW50LWNoZWNrXG4gICAgcmV0dXJuIHggaW5zdGFuY2VvZiBEb2N1bWVudFxufVxuXG5leHBvcnQgY29uc3QgX2lzRm9ybURhdGEgPSAoeDogdW5rbm93bik6IHggaXMgRm9ybURhdGEgPT4ge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwb3N0aG9nLWpzL25vLWRpcmVjdC1mb3JtLWRhdGEtY2hlY2tcbiAgICByZXR1cm4geCBpbnN0YW5jZW9mIEZvcm1EYXRhXG59XG5cbmV4cG9ydCBjb25zdCBfaXNGaWxlID0gKHg6IHVua25vd24pOiB4IGlzIEZpbGUgPT4ge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwb3N0aG9nLWpzL25vLWRpcmVjdC1maWxlLWNoZWNrXG4gICAgcmV0dXJuIHggaW5zdGFuY2VvZiBGaWxlXG59XG4iLCAiLypcbiAqIEdsb2JhbCBoZWxwZXJzIHRvIHByb3RlY3QgYWNjZXNzIHRvIGJyb3dzZXIgZ2xvYmFscyBpbiBhIHdheSB0aGF0IGlzIHNhZmVyIGZvciBkaWZmZXJlbnQgdGFyZ2V0c1xuICogbGlrZSBET00sIFNTUiwgV2ViIHdvcmtlcnMgZXRjLlxuICpcbiAqIE5PVEU6IFR5cGljYWxseSB3ZSB3YW50IHRoZSBcIndpbmRvd1wiIGJ1dCBnbG9iYWxUaGlzIHdvcmtzIGZvciBib3RoIHRoZSB0eXBpY2FsIGJyb3dzZXIgY29udGV4dCBhc1xuICogd2VsbCBhcyBvdGhlciBjb250ZXh0cyBzdWNoIGFzIHRoZSB3ZWIgd29ya2VyIGNvbnRleHQuIFdpbmRvdyBpcyBzdGlsbCBleHBvcnRlZCBmb3IgYW55IGJpdHMgdGhhdCBleHBsaWNpdGx5IHJlcXVpcmUgaXQuXG4gKiBJZiBpbiBkb3VidCAtIGV4cG9ydCB0aGUgZ2xvYmFsIHlvdSBuZWVkIGZyb20gdGhpcyBmaWxlIGFuZCB1c2UgdGhhdCBhcyBhbiBvcHRpb25hbCB2YWx1ZS4gVGhpcyB3YXkgdGhlIGNvZGUgcGF0aCBpcyBmb3JjZWRcbiAqIHRvIGhhbmRsZSB0aGUgY2FzZSB3aGVyZSB0aGUgZ2xvYmFsIGlzIG5vdCBhdmFpbGFibGUuXG4gKi9cblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtZ2xvYmFsc1xuY29uc3Qgd2luOiAoV2luZG93ICYgdHlwZW9mIGdsb2JhbFRoaXMpIHwgdW5kZWZpbmVkID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cgOiB1bmRlZmluZWRcblxuY29uc3QgZ2xvYmFsOiB0eXBlb2YgZ2xvYmFsVGhpcyB8IHVuZGVmaW5lZCA9IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbFRoaXMgOiB3aW5cblxuZXhwb3J0IGNvbnN0IEFycmF5UHJvdG8gPSBBcnJheS5wcm90b3R5cGVcbmV4cG9ydCBjb25zdCBuYXRpdmVGb3JFYWNoID0gQXJyYXlQcm90by5mb3JFYWNoXG5leHBvcnQgY29uc3QgbmF0aXZlSW5kZXhPZiA9IEFycmF5UHJvdG8uaW5kZXhPZlxuXG5leHBvcnQgY29uc3QgbmF2aWdhdG9yID0gZ2xvYmFsPy5uYXZpZ2F0b3JcbmV4cG9ydCBjb25zdCBkb2N1bWVudCA9IGdsb2JhbD8uZG9jdW1lbnRcbmV4cG9ydCBjb25zdCBsb2NhdGlvbiA9IGdsb2JhbD8ubG9jYXRpb25cbmV4cG9ydCBjb25zdCBmZXRjaCA9IGdsb2JhbD8uZmV0Y2hcbmV4cG9ydCBjb25zdCBYTUxIdHRwUmVxdWVzdCA9XG4gICAgZ2xvYmFsPy5YTUxIdHRwUmVxdWVzdCAmJiAnd2l0aENyZWRlbnRpYWxzJyBpbiBuZXcgZ2xvYmFsLlhNTEh0dHBSZXF1ZXN0KCkgPyBnbG9iYWwuWE1MSHR0cFJlcXVlc3QgOiB1bmRlZmluZWRcbmV4cG9ydCBjb25zdCBBYm9ydENvbnRyb2xsZXIgPSBnbG9iYWw/LkFib3J0Q29udHJvbGxlclxuZXhwb3J0IGNvbnN0IHVzZXJBZ2VudCA9IG5hdmlnYXRvcj8udXNlckFnZW50XG5leHBvcnQgY29uc3QgYXNzaWduYWJsZVdpbmRvdzogV2luZG93ICYgdHlwZW9mIGdsb2JhbFRoaXMgJiBSZWNvcmQ8c3RyaW5nLCBhbnk+ID0gd2luID8/ICh7fSBhcyBhbnkpXG5cbmV4cG9ydCB7IHdpbiBhcyB3aW5kb3cgfVxuIiwgImltcG9ydCBDb25maWcgZnJvbSAnLi4vY29uZmlnJ1xuaW1wb3J0IHsgX2lzVW5kZWZpbmVkIH0gZnJvbSAnLi90eXBlLXV0aWxzJ1xuaW1wb3J0IHsgYXNzaWduYWJsZVdpbmRvdywgd2luZG93IH0gZnJvbSAnLi9nbG9iYWxzJ1xuXG5jb25zdCBMT0dHRVJfUFJFRklYID0gJ1tQb3N0SG9nLmpzXSdcbmV4cG9ydCBjb25zdCBsb2dnZXIgPSB7XG4gICAgX2xvZzogKGxldmVsOiAnbG9nJyB8ICd3YXJuJyB8ICdlcnJvcicsIC4uLmFyZ3M6IGFueVtdKSA9PiB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIHdpbmRvdyAmJlxuICAgICAgICAgICAgKENvbmZpZy5ERUJVRyB8fCBhc3NpZ25hYmxlV2luZG93LlBPU1RIT0dfREVCVUcpICYmXG4gICAgICAgICAgICAhX2lzVW5kZWZpbmVkKHdpbmRvdy5jb25zb2xlKSAmJlxuICAgICAgICAgICAgd2luZG93LmNvbnNvbGVcbiAgICAgICAgKSB7XG4gICAgICAgICAgICBjb25zdCBjb25zb2xlTG9nID1cbiAgICAgICAgICAgICAgICAnX19ycndlYl9vcmlnaW5hbF9fJyBpbiB3aW5kb3cuY29uc29sZVtsZXZlbF1cbiAgICAgICAgICAgICAgICAgICAgPyAod2luZG93LmNvbnNvbGVbbGV2ZWxdIGFzIGFueSlbJ19fcnJ3ZWJfb3JpZ2luYWxfXyddXG4gICAgICAgICAgICAgICAgICAgIDogd2luZG93LmNvbnNvbGVbbGV2ZWxdXG5cbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICAgICAgICBjb25zb2xlTG9nKExPR0dFUl9QUkVGSVgsIC4uLmFyZ3MpXG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgaW5mbzogKC4uLmFyZ3M6IGFueVtdKSA9PiB7XG4gICAgICAgIGxvZ2dlci5fbG9nKCdsb2cnLCAuLi5hcmdzKVxuICAgIH0sXG5cbiAgICB3YXJuOiAoLi4uYXJnczogYW55W10pID0+IHtcbiAgICAgICAgbG9nZ2VyLl9sb2coJ3dhcm4nLCAuLi5hcmdzKVxuICAgIH0sXG5cbiAgICBlcnJvcjogKC4uLmFyZ3M6IGFueVtdKSA9PiB7XG4gICAgICAgIGxvZ2dlci5fbG9nKCdlcnJvcicsIC4uLmFyZ3MpXG4gICAgfSxcblxuICAgIGNyaXRpY2FsOiAoLi4uYXJnczogYW55W10pID0+IHtcbiAgICAgICAgLy8gQ3JpdGljYWwgZXJyb3JzIGFyZSBhbHdheXMgbG9nZ2VkIHRvIHRoZSBjb25zb2xlXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoTE9HR0VSX1BSRUZJWCwgLi4uYXJncylcbiAgICB9LFxuXG4gICAgdW5pbml0aWFsaXplZFdhcm5pbmc6IChtZXRob2ROYW1lOiBzdHJpbmcpID0+IHtcbiAgICAgICAgbG9nZ2VyLmVycm9yKGBZb3UgbXVzdCBpbml0aWFsaXplIFBvc3RIb2cgYmVmb3JlIGNhbGxpbmcgJHttZXRob2ROYW1lfWApXG4gICAgfSxcbn1cbiIsICJpbXBvcnQgeyBCcmVha2VyLCBFdmVudEhhbmRsZXIsIFByb3BlcnRpZXMgfSBmcm9tICcuLi90eXBlcydcbmltcG9ydCB7XG4gICAgX2lzQXJyYXksXG4gICAgX2lzRGF0ZSxcbiAgICBfaXNGb3JtRGF0YSxcbiAgICBfaXNGdW5jdGlvbixcbiAgICBfaXNOdWxsLFxuICAgIF9pc051bGxpc2gsXG4gICAgX2lzT2JqZWN0LFxuICAgIF9pc1N0cmluZyxcbiAgICBoYXNPd25Qcm9wZXJ0eSxcbn0gZnJvbSAnLi90eXBlLXV0aWxzJ1xuaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSAnLi9sb2dnZXInXG5pbXBvcnQgeyB3aW5kb3csIGRvY3VtZW50LCBuYXRpdmVGb3JFYWNoLCBuYXRpdmVJbmRleE9mIH0gZnJvbSAnLi9nbG9iYWxzJ1xuXG5jb25zdCBicmVha2VyOiBCcmVha2VyID0ge31cblxuLy8gVU5ERVJTQ09SRVxuLy8gRW1iZWQgcGFydCBvZiB0aGUgVW5kZXJzY29yZSBMaWJyYXJ5XG5leHBvcnQgY29uc3QgX3RyaW0gPSBmdW5jdGlvbiAoc3RyOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIHJldHVybiBzdHIucmVwbGFjZSgvXltcXHNcXHVGRUZGXFx4QTBdK3xbXFxzXFx1RkVGRlxceEEwXSskL2csICcnKVxufVxuXG5leHBvcnQgY29uc3QgX2JpbmRfaW5zdGFuY2VfbWV0aG9kcyA9IGZ1bmN0aW9uIChvYmo6IFJlY29yZDxzdHJpbmcsIGFueT4pOiB2b2lkIHtcbiAgICBmb3IgKGNvbnN0IGZ1bmMgaW4gb2JqKSB7XG4gICAgICAgIGlmIChfaXNGdW5jdGlvbihvYmpbZnVuY10pKSB7XG4gICAgICAgICAgICBvYmpbZnVuY10gPSBvYmpbZnVuY10uYmluZChvYmopXG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBfZWFjaEFycmF5PEUgPSBhbnk+KFxuICAgIG9iajogRVtdIHwgbnVsbCB8IHVuZGVmaW5lZCxcbiAgICBpdGVyYXRvcjogKHZhbHVlOiBFLCBrZXk6IG51bWJlcikgPT4gdm9pZCB8IEJyZWFrZXIsXG4gICAgdGhpc0FyZz86IGFueVxuKTogdm9pZCB7XG4gICAgaWYgKF9pc0FycmF5KG9iaikpIHtcbiAgICAgICAgaWYgKG5hdGl2ZUZvckVhY2ggJiYgb2JqLmZvckVhY2ggPT09IG5hdGl2ZUZvckVhY2gpIHtcbiAgICAgICAgICAgIG9iai5mb3JFYWNoKGl0ZXJhdG9yLCB0aGlzQXJnKVxuICAgICAgICB9IGVsc2UgaWYgKCdsZW5ndGgnIGluIG9iaiAmJiBvYmoubGVuZ3RoID09PSArb2JqLmxlbmd0aCkge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAsIGwgPSBvYmoubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGkgaW4gb2JqICYmIGl0ZXJhdG9yLmNhbGwodGhpc0FyZywgb2JqW2ldLCBpKSA9PT0gYnJlYWtlcikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8qKlxuICogQHBhcmFtIHsqPX0gb2JqXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKC4uLiopPX0gaXRlcmF0b3JcbiAqIEBwYXJhbSB7T2JqZWN0PX0gdGhpc0FyZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gX2VhY2gob2JqOiBhbnksIGl0ZXJhdG9yOiAodmFsdWU6IGFueSwga2V5OiBhbnkpID0+IHZvaWQgfCBCcmVha2VyLCB0aGlzQXJnPzogYW55KTogdm9pZCB7XG4gICAgaWYgKF9pc051bGxpc2gob2JqKSkge1xuICAgICAgICByZXR1cm5cbiAgICB9XG4gICAgaWYgKF9pc0FycmF5KG9iaikpIHtcbiAgICAgICAgcmV0dXJuIF9lYWNoQXJyYXkob2JqLCBpdGVyYXRvciwgdGhpc0FyZylcbiAgICB9XG4gICAgaWYgKF9pc0Zvcm1EYXRhKG9iaikpIHtcbiAgICAgICAgZm9yIChjb25zdCBwYWlyIG9mIG9iai5lbnRyaWVzKCkpIHtcbiAgICAgICAgICAgIGlmIChpdGVyYXRvci5jYWxsKHRoaXNBcmcsIHBhaXJbMV0sIHBhaXJbMF0pID09PSBicmVha2VyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGZvciAoY29uc3Qga2V5IGluIG9iaikge1xuICAgICAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHtcbiAgICAgICAgICAgIGlmIChpdGVyYXRvci5jYWxsKHRoaXNBcmcsIG9ialtrZXldLCBrZXkpID09PSBicmVha2VyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCBjb25zdCBfZXh0ZW5kID0gZnVuY3Rpb24gKG9iajogUmVjb3JkPHN0cmluZywgYW55PiwgLi4uYXJnczogUmVjb3JkPHN0cmluZywgYW55PltdKTogUmVjb3JkPHN0cmluZywgYW55PiB7XG4gICAgX2VhY2hBcnJheShhcmdzLCBmdW5jdGlvbiAoc291cmNlKSB7XG4gICAgICAgIGZvciAoY29uc3QgcHJvcCBpbiBzb3VyY2UpIHtcbiAgICAgICAgICAgIGlmIChzb3VyY2VbcHJvcF0gIT09IHZvaWQgMCkge1xuICAgICAgICAgICAgICAgIG9ialtwcm9wXSA9IHNvdXJjZVtwcm9wXVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSlcbiAgICByZXR1cm4gb2JqXG59XG5cbmV4cG9ydCBjb25zdCBfaW5jbHVkZSA9IGZ1bmN0aW9uIChcbiAgICBvYmo6IG51bGwgfCBzdHJpbmcgfCBBcnJheTxhbnk+IHwgUmVjb3JkPHN0cmluZywgYW55PixcbiAgICB0YXJnZXQ6IGFueVxuKTogYm9vbGVhbiB8IEJyZWFrZXIge1xuICAgIGxldCBmb3VuZCA9IGZhbHNlXG4gICAgaWYgKF9pc051bGwob2JqKSkge1xuICAgICAgICByZXR1cm4gZm91bmRcbiAgICB9XG4gICAgaWYgKG5hdGl2ZUluZGV4T2YgJiYgb2JqLmluZGV4T2YgPT09IG5hdGl2ZUluZGV4T2YpIHtcbiAgICAgICAgcmV0dXJuIG9iai5pbmRleE9mKHRhcmdldCkgIT0gLTFcbiAgICB9XG4gICAgX2VhY2gob2JqLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgaWYgKGZvdW5kIHx8IChmb3VuZCA9IHZhbHVlID09PSB0YXJnZXQpKSB7XG4gICAgICAgICAgICByZXR1cm4gYnJlYWtlclxuICAgICAgICB9XG4gICAgICAgIHJldHVyblxuICAgIH0pXG4gICAgcmV0dXJuIGZvdW5kXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBfaW5jbHVkZXM8VCA9IGFueT4oc3RyOiBUW10gfCBzdHJpbmcsIG5lZWRsZTogVCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAoc3RyIGFzIGFueSkuaW5kZXhPZihuZWVkbGUpICE9PSAtMVxufVxuXG4vKipcbiAqIE9iamVjdC5lbnRyaWVzKCkgcG9seWZpbGxcbiAqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL09iamVjdC9lbnRyaWVzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBfZW50cmllczxUID0gYW55PihvYmo6IFJlY29yZDxzdHJpbmcsIFQ+KTogW3N0cmluZywgVF1bXSB7XG4gICAgY29uc3Qgb3duUHJvcHMgPSBPYmplY3Qua2V5cyhvYmopXG4gICAgbGV0IGkgPSBvd25Qcm9wcy5sZW5ndGhcbiAgICBjb25zdCByZXNBcnJheSA9IG5ldyBBcnJheShpKSAvLyBwcmVhbGxvY2F0ZSB0aGUgQXJyYXlcblxuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgcmVzQXJyYXlbaV0gPSBbb3duUHJvcHNbaV0sIG9ialtvd25Qcm9wc1tpXV1dXG4gICAgfVxuICAgIHJldHVybiByZXNBcnJheVxufVxuXG5leHBvcnQgY29uc3QgX2lzVmFsaWRSZWdleCA9IGZ1bmN0aW9uIChzdHI6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIHRyeSB7XG4gICAgICAgIG5ldyBSZWdFeHAoc3RyKVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZVxufVxuXG5leHBvcnQgY29uc3QgX2VuY29kZURhdGVzID0gZnVuY3Rpb24gKG9iajogUHJvcGVydGllcyk6IFByb3BlcnRpZXMge1xuICAgIF9lYWNoKG9iaiwgZnVuY3Rpb24gKHYsIGspIHtcbiAgICAgICAgaWYgKF9pc0RhdGUodikpIHtcbiAgICAgICAgICAgIG9ialtrXSA9IF9mb3JtYXREYXRlKHYpXG4gICAgICAgIH0gZWxzZSBpZiAoX2lzT2JqZWN0KHYpKSB7XG4gICAgICAgICAgICBvYmpba10gPSBfZW5jb2RlRGF0ZXModikgLy8gcmVjdXJzZVxuICAgICAgICB9XG4gICAgfSlcbiAgICByZXR1cm4gb2JqXG59XG5cbmV4cG9ydCBjb25zdCBfdGltZXN0YW1wID0gZnVuY3Rpb24gKCk6IG51bWJlciB7XG4gICAgRGF0ZS5ub3cgPVxuICAgICAgICBEYXRlLm5vdyB8fFxuICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gK25ldyBEYXRlKClcbiAgICAgICAgfVxuICAgIHJldHVybiBEYXRlLm5vdygpXG59XG5cbmV4cG9ydCBjb25zdCBfZm9ybWF0RGF0ZSA9IGZ1bmN0aW9uIChkOiBEYXRlKTogc3RyaW5nIHtcbiAgICAvLyBZWVlZLU1NLUREVEhIOk1NOlNTIGluIFVUQ1xuICAgIGZ1bmN0aW9uIHBhZChuOiBudW1iZXIpIHtcbiAgICAgICAgcmV0dXJuIG4gPCAxMCA/ICcwJyArIG4gOiBuXG4gICAgfVxuICAgIHJldHVybiAoXG4gICAgICAgIGQuZ2V0VVRDRnVsbFllYXIoKSArXG4gICAgICAgICctJyArXG4gICAgICAgIHBhZChkLmdldFVUQ01vbnRoKCkgKyAxKSArXG4gICAgICAgICctJyArXG4gICAgICAgIHBhZChkLmdldFVUQ0RhdGUoKSkgK1xuICAgICAgICAnVCcgK1xuICAgICAgICBwYWQoZC5nZXRVVENIb3VycygpKSArXG4gICAgICAgICc6JyArXG4gICAgICAgIHBhZChkLmdldFVUQ01pbnV0ZXMoKSkgK1xuICAgICAgICAnOicgK1xuICAgICAgICBwYWQoZC5nZXRVVENTZWNvbmRzKCkpXG4gICAgKVxufVxuXG5leHBvcnQgY29uc3QgX3RyeSA9IGZ1bmN0aW9uIDxUPihmbjogKCkgPT4gVCk6IFQgfCB1bmRlZmluZWQge1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBmbigpXG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkXG4gICAgfVxufVxuXG5leHBvcnQgY29uc3QgX3NhZmV3cmFwID0gZnVuY3Rpb24gPEYgZXh0ZW5kcyAoLi4uYXJnczogYW55W10pID0+IGFueSA9ICguLi5hcmdzOiBhbnlbXSkgPT4gYW55PihmOiBGKTogRiB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICguLi5hcmdzKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2Jhbi10cy1jb21tZW50XG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICByZXR1cm4gZi5hcHBseSh0aGlzLCBhcmdzKVxuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBsb2dnZXIuY3JpdGljYWwoXG4gICAgICAgICAgICAgICAgJ0ltcGxlbWVudGF0aW9uIGVycm9yLiBQbGVhc2UgdHVybiBvbiBkZWJ1ZyBtb2RlIGFuZCBvcGVuIGEgdGlja2V0IG9uIGh0dHBzOi8vYXBwLnBvc3Rob2cuY29tL2hvbWUjcGFuZWw9c3VwcG9ydCUzQXN1cHBvcnQlM0EuJ1xuICAgICAgICAgICAgKVxuICAgICAgICAgICAgbG9nZ2VyLmNyaXRpY2FsKGUpXG4gICAgICAgIH1cbiAgICB9IGFzIEZcbn1cblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9iYW4tdHlwZXNcbmV4cG9ydCBjb25zdCBfc2FmZXdyYXBfY2xhc3MgPSBmdW5jdGlvbiAoa2xhc3M6IEZ1bmN0aW9uLCBmdW5jdGlvbnM6IHN0cmluZ1tdKTogdm9pZCB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmdW5jdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAga2xhc3MucHJvdG90eXBlW2Z1bmN0aW9uc1tpXV0gPSBfc2FmZXdyYXAoa2xhc3MucHJvdG90eXBlW2Z1bmN0aW9uc1tpXV0pXG4gICAgfVxufVxuXG5leHBvcnQgY29uc3QgX3NhZmV3cmFwX2luc3RhbmNlX21ldGhvZHMgPSBmdW5jdGlvbiAob2JqOiBSZWNvcmQ8c3RyaW5nLCBhbnk+KTogdm9pZCB7XG4gICAgZm9yIChjb25zdCBmdW5jIGluIG9iaikge1xuICAgICAgICBpZiAoX2lzRnVuY3Rpb24ob2JqW2Z1bmNdKSkge1xuICAgICAgICAgICAgb2JqW2Z1bmNdID0gX3NhZmV3cmFwKG9ialtmdW5jXSlcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZXhwb3J0IGNvbnN0IF9zdHJpcF9lbXB0eV9wcm9wZXJ0aWVzID0gZnVuY3Rpb24gKHA6IFByb3BlcnRpZXMpOiBQcm9wZXJ0aWVzIHtcbiAgICBjb25zdCByZXQ6IFByb3BlcnRpZXMgPSB7fVxuICAgIF9lYWNoKHAsIGZ1bmN0aW9uICh2LCBrKSB7XG4gICAgICAgIGlmIChfaXNTdHJpbmcodikgJiYgdi5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICByZXRba10gPSB2XG4gICAgICAgIH1cbiAgICB9KVxuICAgIHJldHVybiByZXRcbn1cblxuLyoqXG4gKiBEZWVwIGNvcGllcyBhbiBvYmplY3QuXG4gKiBJdCBoYW5kbGVzIGN5Y2xlcyBieSByZXBsYWNpbmcgYWxsIHJlZmVyZW5jZXMgdG8gdGhlbSB3aXRoIGB1bmRlZmluZWRgXG4gKiBBbHNvIHN1cHBvcnRzIGN1c3RvbWl6aW5nIG5hdGl2ZSB2YWx1ZXNcbiAqXG4gKiBAcGFyYW0gdmFsdWVcbiAqIEBwYXJhbSBjdXN0b21pemVyXG4gKiBAcmV0dXJucyB7e318dW5kZWZpbmVkfCp9XG4gKi9cbmZ1bmN0aW9uIGRlZXBDaXJjdWxhckNvcHk8VCBleHRlbmRzIFJlY29yZDxzdHJpbmcsIGFueT4gPSBSZWNvcmQ8c3RyaW5nLCBhbnk+PihcbiAgICB2YWx1ZTogVCxcbiAgICBjdXN0b21pemVyPzogPEsgZXh0ZW5kcyBrZXlvZiBUID0ga2V5b2YgVD4odmFsdWU6IFRbS10sIGtleT86IEspID0+IFRbS11cbik6IFQgfCB1bmRlZmluZWQge1xuICAgIGNvbnN0IENPUFlfSU5fUFJPR1JFU1NfU0VUID0gbmV3IFNldCgpXG5cbiAgICBmdW5jdGlvbiBpbnRlcm5hbERlZXBDaXJjdWxhckNvcHkodmFsdWU6IFQsIGtleT86IHN0cmluZyk6IFQgfCB1bmRlZmluZWQge1xuICAgICAgICBpZiAodmFsdWUgIT09IE9iamVjdCh2YWx1ZSkpIHJldHVybiBjdXN0b21pemVyID8gY3VzdG9taXplcih2YWx1ZSBhcyBhbnksIGtleSkgOiB2YWx1ZSAvLyBwcmltaXRpdmUgdmFsdWVcblxuICAgICAgICBpZiAoQ09QWV9JTl9QUk9HUkVTU19TRVQuaGFzKHZhbHVlKSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgICAgICBDT1BZX0lOX1BST0dSRVNTX1NFVC5hZGQodmFsdWUpXG4gICAgICAgIGxldCByZXN1bHQ6IFRcblxuICAgICAgICBpZiAoX2lzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgICAgICByZXN1bHQgPSBbXSBhcyBhbnkgYXMgVFxuICAgICAgICAgICAgX2VhY2hBcnJheSh2YWx1ZSwgKGl0KSA9PiB7XG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goaW50ZXJuYWxEZWVwQ2lyY3VsYXJDb3B5KGl0KSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXN1bHQgPSB7fSBhcyBUXG4gICAgICAgICAgICBfZWFjaCh2YWx1ZSwgKHZhbCwga2V5KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFDT1BZX0lOX1BST0dSRVNTX1NFVC5oYXModmFsKSkge1xuICAgICAgICAgICAgICAgICAgICA7KHJlc3VsdCBhcyBhbnkpW2tleV0gPSBpbnRlcm5hbERlZXBDaXJjdWxhckNvcHkodmFsLCBrZXkpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0XG4gICAgfVxuICAgIHJldHVybiBpbnRlcm5hbERlZXBDaXJjdWxhckNvcHkodmFsdWUpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBfY29weUFuZFRydW5jYXRlU3RyaW5nczxUIGV4dGVuZHMgUmVjb3JkPHN0cmluZywgYW55PiA9IFJlY29yZDxzdHJpbmcsIGFueT4+KFxuICAgIG9iamVjdDogVCxcbiAgICBtYXhTdHJpbmdMZW5ndGg6IG51bWJlciB8IG51bGxcbik6IFQge1xuICAgIHJldHVybiBkZWVwQ2lyY3VsYXJDb3B5KG9iamVjdCwgKHZhbHVlOiBhbnkpID0+IHtcbiAgICAgICAgaWYgKF9pc1N0cmluZyh2YWx1ZSkgJiYgIV9pc051bGwobWF4U3RyaW5nTGVuZ3RoKSkge1xuICAgICAgICAgICAgcmV0dXJuICh2YWx1ZSBhcyBzdHJpbmcpLnNsaWNlKDAsIG1heFN0cmluZ0xlbmd0aClcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmFsdWVcbiAgICB9KSBhcyBUXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBfYmFzZTY0RW5jb2RlKGRhdGE6IG51bGwpOiBudWxsXG5leHBvcnQgZnVuY3Rpb24gX2Jhc2U2NEVuY29kZShkYXRhOiB1bmRlZmluZWQpOiB1bmRlZmluZWRcbmV4cG9ydCBmdW5jdGlvbiBfYmFzZTY0RW5jb2RlKGRhdGE6IHN0cmluZyk6IHN0cmluZ1xuZXhwb3J0IGZ1bmN0aW9uIF9iYXNlNjRFbmNvZGUoZGF0YTogc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZCk6IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQge1xuICAgIGNvbnN0IGI2NCA9ICdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvPSdcbiAgICBsZXQgbzEsXG4gICAgICAgIG8yLFxuICAgICAgICBvMyxcbiAgICAgICAgaDEsXG4gICAgICAgIGgyLFxuICAgICAgICBoMyxcbiAgICAgICAgaDQsXG4gICAgICAgIGJpdHMsXG4gICAgICAgIGkgPSAwLFxuICAgICAgICBhYyA9IDAsXG4gICAgICAgIGVuYyA9ICcnXG4gICAgY29uc3QgdG1wX2Fycjogc3RyaW5nW10gPSBbXVxuXG4gICAgaWYgKCFkYXRhKSB7XG4gICAgICAgIHJldHVybiBkYXRhXG4gICAgfVxuXG4gICAgZGF0YSA9IF91dGY4RW5jb2RlKGRhdGEpXG5cbiAgICBkbyB7XG4gICAgICAgIC8vIHBhY2sgdGhyZWUgb2N0ZXRzIGludG8gZm91ciBoZXhldHNcbiAgICAgICAgbzEgPSBkYXRhLmNoYXJDb2RlQXQoaSsrKVxuICAgICAgICBvMiA9IGRhdGEuY2hhckNvZGVBdChpKyspXG4gICAgICAgIG8zID0gZGF0YS5jaGFyQ29kZUF0KGkrKylcblxuICAgICAgICBiaXRzID0gKG8xIDw8IDE2KSB8IChvMiA8PCA4KSB8IG8zXG5cbiAgICAgICAgaDEgPSAoYml0cyA+PiAxOCkgJiAweDNmXG4gICAgICAgIGgyID0gKGJpdHMgPj4gMTIpICYgMHgzZlxuICAgICAgICBoMyA9IChiaXRzID4+IDYpICYgMHgzZlxuICAgICAgICBoNCA9IGJpdHMgJiAweDNmXG5cbiAgICAgICAgLy8gdXNlIGhleGV0cyB0byBpbmRleCBpbnRvIGI2NCwgYW5kIGFwcGVuZCByZXN1bHQgdG8gZW5jb2RlZCBzdHJpbmdcbiAgICAgICAgdG1wX2FyclthYysrXSA9IGI2NC5jaGFyQXQoaDEpICsgYjY0LmNoYXJBdChoMikgKyBiNjQuY2hhckF0KGgzKSArIGI2NC5jaGFyQXQoaDQpXG4gICAgfSB3aGlsZSAoaSA8IGRhdGEubGVuZ3RoKVxuXG4gICAgZW5jID0gdG1wX2Fyci5qb2luKCcnKVxuXG4gICAgc3dpdGNoIChkYXRhLmxlbmd0aCAlIDMpIHtcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgZW5jID0gZW5jLnNsaWNlKDAsIC0yKSArICc9PSdcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIGVuYyA9IGVuYy5zbGljZSgwLCAtMSkgKyAnPSdcbiAgICAgICAgICAgIGJyZWFrXG4gICAgfVxuXG4gICAgcmV0dXJuIGVuY1xufVxuXG5leHBvcnQgY29uc3QgX3V0ZjhFbmNvZGUgPSBmdW5jdGlvbiAoc3RyaW5nOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIHN0cmluZyA9IChzdHJpbmcgKyAnJykucmVwbGFjZSgvXFxyXFxuL2csICdcXG4nKS5yZXBsYWNlKC9cXHIvZywgJ1xcbicpXG5cbiAgICBsZXQgdXRmdGV4dCA9ICcnLFxuICAgICAgICBzdGFydCxcbiAgICAgICAgZW5kXG4gICAgbGV0IHN0cmluZ2wgPSAwLFxuICAgICAgICBuXG5cbiAgICBzdGFydCA9IGVuZCA9IDBcbiAgICBzdHJpbmdsID0gc3RyaW5nLmxlbmd0aFxuXG4gICAgZm9yIChuID0gMDsgbiA8IHN0cmluZ2w7IG4rKykge1xuICAgICAgICBjb25zdCBjMSA9IHN0cmluZy5jaGFyQ29kZUF0KG4pXG4gICAgICAgIGxldCBlbmMgPSBudWxsXG5cbiAgICAgICAgaWYgKGMxIDwgMTI4KSB7XG4gICAgICAgICAgICBlbmQrK1xuICAgICAgICB9IGVsc2UgaWYgKGMxID4gMTI3ICYmIGMxIDwgMjA0OCkge1xuICAgICAgICAgICAgZW5jID0gU3RyaW5nLmZyb21DaGFyQ29kZSgoYzEgPj4gNikgfCAxOTIsIChjMSAmIDYzKSB8IDEyOClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGVuYyA9IFN0cmluZy5mcm9tQ2hhckNvZGUoKGMxID4+IDEyKSB8IDIyNCwgKChjMSA+PiA2KSAmIDYzKSB8IDEyOCwgKGMxICYgNjMpIHwgMTI4KVxuICAgICAgICB9XG4gICAgICAgIGlmICghX2lzTnVsbChlbmMpKSB7XG4gICAgICAgICAgICBpZiAoZW5kID4gc3RhcnQpIHtcbiAgICAgICAgICAgICAgICB1dGZ0ZXh0ICs9IHN0cmluZy5zdWJzdHJpbmcoc3RhcnQsIGVuZClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHV0ZnRleHQgKz0gZW5jXG4gICAgICAgICAgICBzdGFydCA9IGVuZCA9IG4gKyAxXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoZW5kID4gc3RhcnQpIHtcbiAgICAgICAgdXRmdGV4dCArPSBzdHJpbmcuc3Vic3RyaW5nKHN0YXJ0LCBzdHJpbmcubGVuZ3RoKVxuICAgIH1cblxuICAgIHJldHVybiB1dGZ0ZXh0XG59XG5cbmV4cG9ydCBjb25zdCBfcmVnaXN0ZXJfZXZlbnQgPSAoZnVuY3Rpb24gKCkge1xuICAgIC8vIHdyaXR0ZW4gYnkgRGVhbiBFZHdhcmRzLCAyMDA1XG4gICAgLy8gd2l0aCBpbnB1dCBmcm9tIFRpbm8gWmlqZGVsIC0gY3Jpc3BAeHM0YWxsLm5sXG4gICAgLy8gd2l0aCBpbnB1dCBmcm9tIENhcmwgU3ZlcnJlIC0gbWFpbEBjYXJsc3ZlcnJlLmNvbVxuICAgIC8vIHdpdGggaW5wdXQgZnJvbSBQb3N0SG9nXG4gICAgLy8gaHR0cDovL2RlYW4uZWR3YXJkcy5uYW1lL3dlYmxvZy8yMDA1LzEwL2FkZC1ldmVudC9cbiAgICAvLyBodHRwczovL2dpc3QuZ2l0aHViLmNvbS8xOTMwNDQwXG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gZWxlbWVudFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbiguLi4qKX0gaGFuZGxlclxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbj19IG9sZFNjaG9vbFxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbj19IHVzZUNhcHR1cmVcbiAgICAgKi9cbiAgICBjb25zdCByZWdpc3Rlcl9ldmVudCA9IGZ1bmN0aW9uIChcbiAgICAgICAgZWxlbWVudDogRWxlbWVudCB8IFdpbmRvdyB8IERvY3VtZW50IHwgTm9kZSxcbiAgICAgICAgdHlwZTogc3RyaW5nLFxuICAgICAgICBoYW5kbGVyOiBFdmVudEhhbmRsZXIsXG4gICAgICAgIG9sZFNjaG9vbD86IGJvb2xlYW4sXG4gICAgICAgIHVzZUNhcHR1cmU/OiBib29sZWFuXG4gICAgKSB7XG4gICAgICAgIGlmICghZWxlbWVudCkge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdObyB2YWxpZCBlbGVtZW50IHByb3ZpZGVkIHRvIHJlZ2lzdGVyX2V2ZW50JylcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lciAmJiAhb2xkU2Nob29sKSB7XG4gICAgICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgaGFuZGxlciwgISF1c2VDYXB0dXJlKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3Qgb250eXBlID0gJ29uJyArIHR5cGVcbiAgICAgICAgICAgIGNvbnN0IG9sZF9oYW5kbGVyID0gKGVsZW1lbnQgYXMgYW55KVtvbnR5cGVdIC8vIGNhbiBiZSB1bmRlZmluZWRcbiAgICAgICAgICAgIDsoZWxlbWVudCBhcyBhbnkpW29udHlwZV0gPSBtYWtlSGFuZGxlcihlbGVtZW50LCBoYW5kbGVyLCBvbGRfaGFuZGxlcilcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIG1ha2VIYW5kbGVyKFxuICAgICAgICBlbGVtZW50OiBFbGVtZW50IHwgV2luZG93IHwgRG9jdW1lbnQgfCBOb2RlLFxuICAgICAgICBuZXdfaGFuZGxlcjogRXZlbnRIYW5kbGVyLFxuICAgICAgICBvbGRfaGFuZGxlcnM6IEV2ZW50SGFuZGxlclxuICAgICkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGV2ZW50OiBFdmVudCk6IGJvb2xlYW4gfCB2b2lkIHtcbiAgICAgICAgICAgIGV2ZW50ID0gZXZlbnQgfHwgZml4RXZlbnQod2luZG93Py5ldmVudClcblxuICAgICAgICAgICAgLy8gdGhpcyBiYXNpY2FsbHkgaGFwcGVucyBpbiBmaXJlZm94IHdoZW5ldmVyIGFub3RoZXIgc2NyaXB0XG4gICAgICAgICAgICAvLyBvdmVyd3JpdGVzIHRoZSBvbmxvYWQgY2FsbGJhY2sgYW5kIGRvZXNuJ3QgcGFzcyB0aGUgZXZlbnRcbiAgICAgICAgICAgIC8vIG9iamVjdCB0byBwcmV2aW91c2x5IGRlZmluZWQgY2FsbGJhY2tzLiAgQWxsIHRoZSBicm93c2Vyc1xuICAgICAgICAgICAgLy8gdGhhdCBkb24ndCBkZWZpbmUgd2luZG93LmV2ZW50IGltcGxlbWVudCBhZGRFdmVudExpc3RlbmVyXG4gICAgICAgICAgICAvLyBzbyB0aGUgZG9tX2xvYWRlZCBoYW5kbGVyIHdpbGwgc3RpbGwgYmUgZmlyZWQgYXMgdXN1YWwuXG4gICAgICAgICAgICBpZiAoIWV2ZW50KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsZXQgcmV0ID0gdHJ1ZVxuICAgICAgICAgICAgbGV0IG9sZF9yZXN1bHQ6IGFueVxuXG4gICAgICAgICAgICBpZiAoX2lzRnVuY3Rpb24ob2xkX2hhbmRsZXJzKSkge1xuICAgICAgICAgICAgICAgIG9sZF9yZXN1bHQgPSBvbGRfaGFuZGxlcnMoZXZlbnQpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBuZXdfcmVzdWx0ID0gbmV3X2hhbmRsZXIuY2FsbChlbGVtZW50LCBldmVudClcblxuICAgICAgICAgICAgaWYgKGZhbHNlID09PSBvbGRfcmVzdWx0IHx8IGZhbHNlID09PSBuZXdfcmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgcmV0ID0gZmFsc2VcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHJldFxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZml4RXZlbnQoZXZlbnQ6IEV2ZW50IHwgdW5kZWZpbmVkKTogRXZlbnQgfCB1bmRlZmluZWQge1xuICAgICAgICBpZiAoZXZlbnQpIHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0ID0gZml4RXZlbnQucHJldmVudERlZmF1bHRcbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbiA9IGZpeEV2ZW50LnN0b3BQcm9wYWdhdGlvblxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBldmVudFxuICAgIH1cbiAgICBmaXhFdmVudC5wcmV2ZW50RGVmYXVsdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgOyh0aGlzIGFzIGFueSBhcyBFdmVudCkucmV0dXJuVmFsdWUgPSBmYWxzZVxuICAgIH1cbiAgICBmaXhFdmVudC5zdG9wUHJvcGFnYXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIDsodGhpcyBhcyBhbnkgYXMgRXZlbnQpLmNhbmNlbEJ1YmJsZSA9IHRydWVcbiAgICB9XG5cbiAgICByZXR1cm4gcmVnaXN0ZXJfZXZlbnRcbn0pKClcblxuZXhwb3J0IGZ1bmN0aW9uIGxvYWRTY3JpcHQoc2NyaXB0VXJsVG9Mb2FkOiBzdHJpbmcsIGNhbGxiYWNrOiAoZXJyb3I/OiBzdHJpbmcgfCBFdmVudCwgZXZlbnQ/OiBFdmVudCkgPT4gdm9pZCk6IHZvaWQge1xuICAgIGNvbnN0IGFkZFNjcmlwdCA9ICgpID0+IHtcbiAgICAgICAgaWYgKCFkb2N1bWVudCkge1xuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCdkb2N1bWVudCBub3QgZm91bmQnKVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNjcmlwdFRhZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpXG4gICAgICAgIHNjcmlwdFRhZy50eXBlID0gJ3RleHQvamF2YXNjcmlwdCdcbiAgICAgICAgc2NyaXB0VGFnLnNyYyA9IHNjcmlwdFVybFRvTG9hZFxuICAgICAgICBzY3JpcHRUYWcub25sb2FkID0gKGV2ZW50KSA9PiBjYWxsYmFjayh1bmRlZmluZWQsIGV2ZW50KVxuICAgICAgICBzY3JpcHRUYWcub25lcnJvciA9IChlcnJvcikgPT4gY2FsbGJhY2soZXJyb3IpXG5cbiAgICAgICAgY29uc3Qgc2NyaXB0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2JvZHkgPiBzY3JpcHQnKVxuICAgICAgICBpZiAoc2NyaXB0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBzY3JpcHRzWzBdLnBhcmVudE5vZGU/Lmluc2VydEJlZm9yZShzY3JpcHRUYWcsIHNjcmlwdHNbMF0pXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBJbiBleGNlcHRpb25hbCBzaXR1YXRpb25zIHRoaXMgY2FsbCBtaWdodCBsb2FkIGJlZm9yZSB0aGUgRE9NIGlzIGZ1bGx5IHJlYWR5LlxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzY3JpcHRUYWcpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoZG9jdW1lbnQ/LmJvZHkpIHtcbiAgICAgICAgYWRkU2NyaXB0KClcbiAgICB9IGVsc2Uge1xuICAgICAgICBkb2N1bWVudD8uYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGFkZFNjcmlwdClcbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0Nyb3NzRG9tYWluQ29va2llKGRvY3VtZW50TG9jYXRpb246IExvY2F0aW9uIHwgdW5kZWZpbmVkKSB7XG4gICAgY29uc3QgaG9zdG5hbWUgPSBkb2N1bWVudExvY2F0aW9uPy5ob3N0bmFtZVxuXG4gICAgaWYgKCFfaXNTdHJpbmcoaG9zdG5hbWUpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICAvLyBzcGxpdCBhbmQgc2xpY2UgaXNuJ3QgYSBncmVhdCB3YXkgdG8gbWF0Y2ggYXJiaXRyYXJ5IGRvbWFpbnMsXG4gICAgLy8gYnV0IGl0J3MgZ29vZCBlbm91Z2ggZm9yIGVuc3VyaW5nIHdlIG9ubHkgbWF0Y2ggaGVyb2t1YXBwLmNvbSB3aGVuIGl0IGlzIHRoZSBUTERcbiAgICAvLyBmb3IgdGhlIGhvc3RuYW1lXG4gICAgcmV0dXJuIGhvc3RuYW1lLnNwbGl0KCcuJykuc2xpY2UoLTIpLmpvaW4oJy4nKSAhPT0gJ2hlcm9rdWFwcC5jb20nXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0Rpc3RpbmN0SWRTdHJpbmdMaWtlKHZhbHVlOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICByZXR1cm4gWydkaXN0aW5jdF9pZCcsICdkaXN0aW5jdGlkJ10uaW5jbHVkZXModmFsdWUudG9Mb3dlckNhc2UoKSlcbn1cbiIsICJpbXBvcnQgeyBBdXRvY2FwdHVyZUNvbmZpZywgUHJvcGVydGllcyB9IGZyb20gJy4vdHlwZXMnXG5pbXBvcnQgeyBfZWFjaCwgX2VudHJpZXMsIF9pbmNsdWRlcywgX3RyaW0gfSBmcm9tICcuL3V0aWxzJ1xuXG5pbXBvcnQgeyBfaXNBcnJheSwgX2lzTnVsbGlzaCwgX2lzU3RyaW5nLCBfaXNVbmRlZmluZWQgfSBmcm9tICcuL3V0aWxzL3R5cGUtdXRpbHMnXG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tICcuL3V0aWxzL2xvZ2dlcidcbmltcG9ydCB7IHdpbmRvdyB9IGZyb20gJy4vdXRpbHMvZ2xvYmFscydcblxuZXhwb3J0IGZ1bmN0aW9uIHNwbGl0Q2xhc3NTdHJpbmcoczogc3RyaW5nKTogc3RyaW5nW10ge1xuICAgIHJldHVybiBzID8gX3RyaW0ocykuc3BsaXQoL1xccysvKSA6IFtdXG59XG5cbi8qXG4gKiBHZXQgdGhlIGNsYXNzTmFtZSBvZiBhbiBlbGVtZW50LCBhY2NvdW50aW5nIGZvciBlZGdlIGNhc2VzIHdoZXJlIGVsZW1lbnQuY2xhc3NOYW1lIGlzIGFuIG9iamVjdFxuICpcbiAqIEJlY2F1c2UgdGhpcyBpcyBhIHN0cmluZyBpdCBjYW4gY29udGFpbiB1bmV4cGVjdGVkIGNoYXJhY3RlcnNcbiAqIFNvLCB0aGlzIG1ldGhvZCBzYWZlbHkgc3BsaXRzIHRoZSBjbGFzc05hbWUgYW5kIHJldHVybnMgdGhhdCBhcnJheS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldENsYXNzTmFtZXMoZWw6IEVsZW1lbnQpOiBzdHJpbmdbXSB7XG4gICAgbGV0IGNsYXNzTmFtZSA9ICcnXG4gICAgc3dpdGNoICh0eXBlb2YgZWwuY2xhc3NOYW1lKSB7XG4gICAgICAgIGNhc2UgJ3N0cmluZyc6XG4gICAgICAgICAgICBjbGFzc05hbWUgPSBlbC5jbGFzc05hbWVcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgIC8vIFRPRE86IHdoZW4gaXMgdGhpcyBldmVyIHVzZWQ/XG4gICAgICAgIGNhc2UgJ29iamVjdCc6IC8vIGhhbmRsZSBjYXNlcyB3aGVyZSBjbGFzc05hbWUgbWlnaHQgYmUgU1ZHQW5pbWF0ZWRTdHJpbmcgb3Igc29tZSBvdGhlciB0eXBlXG4gICAgICAgICAgICBjbGFzc05hbWUgPVxuICAgICAgICAgICAgICAgICgnYmFzZVZhbCcgaW4gZWwuY2xhc3NOYW1lID8gKGVsLmNsYXNzTmFtZSBhcyBhbnkpLmJhc2VWYWwgOiBudWxsKSB8fCBlbC5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykgfHwgJydcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBjbGFzc05hbWUgPSAnJ1xuICAgIH1cblxuICAgIHJldHVybiBzcGxpdENsYXNzU3RyaW5nKGNsYXNzTmFtZSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG1ha2VTYWZlVGV4dChzOiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgaWYgKF9pc051bGxpc2gocykpIHtcbiAgICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgICBfdHJpbShzKVxuICAgICAgICAgICAgLy8gc2NydWIgcG90ZW50aWFsbHkgc2Vuc2l0aXZlIHZhbHVlc1xuICAgICAgICAgICAgLnNwbGl0KC8oXFxzKykvKVxuICAgICAgICAgICAgLmZpbHRlcigocykgPT4gc2hvdWxkQ2FwdHVyZVZhbHVlKHMpKVxuICAgICAgICAgICAgLmpvaW4oJycpXG4gICAgICAgICAgICAvLyBub3JtYWxpemUgd2hpdGVzcGFjZVxuICAgICAgICAgICAgLnJlcGxhY2UoL1tcXHJcXG5dL2csICcgJylcbiAgICAgICAgICAgIC5yZXBsYWNlKC9bIF0rL2csICcgJylcbiAgICAgICAgICAgIC8vIHRydW5jYXRlXG4gICAgICAgICAgICAuc3Vic3RyaW5nKDAsIDI1NSlcbiAgICApXG59XG5cbi8qXG4gKiBHZXQgdGhlIGRpcmVjdCB0ZXh0IGNvbnRlbnQgb2YgYW4gZWxlbWVudCwgcHJvdGVjdGluZyBhZ2FpbnN0IHNlbnNpdGl2ZSBkYXRhIGNvbGxlY3Rpb24uXG4gKiBDb25jYXRzIHRleHRDb250ZW50IG9mIGVhY2ggb2YgdGhlIGVsZW1lbnQncyB0ZXh0IG5vZGUgY2hpbGRyZW47IHRoaXMgYXZvaWRzIHBvdGVudGlhbFxuICogY29sbGVjdGlvbiBvZiBzZW5zaXRpdmUgZGF0YSB0aGF0IGNvdWxkIGhhcHBlbiBpZiB3ZSB1c2VkIGVsZW1lbnQudGV4dENvbnRlbnQgYW5kIHRoZVxuICogZWxlbWVudCBoYWQgc2Vuc2l0aXZlIGNoaWxkIGVsZW1lbnRzLCBzaW5jZSBlbGVtZW50LnRleHRDb250ZW50IGluY2x1ZGVzIGNoaWxkIGNvbnRlbnQuXG4gKiBTY3J1YnMgdmFsdWVzIHRoYXQgbG9vayBsaWtlIHRoZXkgY291bGQgYmUgc2Vuc2l0aXZlIChpLmUuIGNjIG9yIHNzbiBudW1iZXIpLlxuICogQHBhcmFtIHtFbGVtZW50fSBlbCAtIGVsZW1lbnQgdG8gZ2V0IHRoZSB0ZXh0IG9mXG4gKiBAcmV0dXJucyB7c3RyaW5nfSB0aGUgZWxlbWVudCdzIGRpcmVjdCB0ZXh0IGNvbnRlbnRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFNhZmVUZXh0KGVsOiBFbGVtZW50KTogc3RyaW5nIHtcbiAgICBsZXQgZWxUZXh0ID0gJydcblxuICAgIGlmIChzaG91bGRDYXB0dXJlRWxlbWVudChlbCkgJiYgIWlzU2Vuc2l0aXZlRWxlbWVudChlbCkgJiYgZWwuY2hpbGROb2RlcyAmJiBlbC5jaGlsZE5vZGVzLmxlbmd0aCkge1xuICAgICAgICBfZWFjaChlbC5jaGlsZE5vZGVzLCBmdW5jdGlvbiAoY2hpbGQpIHtcbiAgICAgICAgICAgIGlmIChpc1RleHROb2RlKGNoaWxkKSAmJiBjaGlsZC50ZXh0Q29udGVudCkge1xuICAgICAgICAgICAgICAgIGVsVGV4dCArPSBtYWtlU2FmZVRleHQoY2hpbGQudGV4dENvbnRlbnQpID8/ICcnXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgcmV0dXJuIF90cmltKGVsVGV4dClcbn1cblxuLypcbiAqIENoZWNrIHdoZXRoZXIgYW4gZWxlbWVudCBoYXMgbm9kZVR5cGUgTm9kZS5FTEVNRU5UX05PREVcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWwgLSBlbGVtZW50IHRvIGNoZWNrXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gd2hldGhlciBlbCBpcyBvZiB0aGUgY29ycmVjdCBub2RlVHlwZVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNFbGVtZW50Tm9kZShlbDogTm9kZSB8IEVsZW1lbnQgfCB1bmRlZmluZWQgfCBudWxsKTogZWwgaXMgRWxlbWVudCB7XG4gICAgcmV0dXJuICEhZWwgJiYgZWwubm9kZVR5cGUgPT09IDEgLy8gTm9kZS5FTEVNRU5UX05PREUgLSB1c2UgaW50ZWdlciBjb25zdGFudCBmb3IgYnJvd3NlciBwb3J0YWJpbGl0eVxufVxuXG4vKlxuICogQ2hlY2sgd2hldGhlciBhbiBlbGVtZW50IGlzIG9mIGEgZ2l2ZW4gdGFnIHR5cGUuXG4gKiBEdWUgdG8gcG90ZW50aWFsIHJlZmVyZW5jZSBkaXNjcmVwYW5jaWVzIChzdWNoIGFzIHRoZSB3ZWJjb21wb25lbnRzLmpzIHBvbHlmaWxsKSxcbiAqIHdlIHdhbnQgdG8gbWF0Y2ggdGFnTmFtZXMgaW5zdGVhZCBvZiBzcGVjaWZpYyByZWZlcmVuY2VzIGJlY2F1c2Ugc29tZXRoaW5nIGxpa2VcbiAqIGVsZW1lbnQgPT09IGRvY3VtZW50LmJvZHkgd29uJ3QgYWx3YXlzIHdvcmsgYmVjYXVzZSBlbGVtZW50IG1pZ2h0IG5vdCBiZSBhIG5hdGl2ZVxuICogZWxlbWVudC5cbiAqIEBwYXJhbSB7RWxlbWVudH0gZWwgLSBlbGVtZW50IHRvIGNoZWNrXG4gKiBAcGFyYW0ge3N0cmluZ30gdGFnIC0gdGFnIG5hbWUgKGUuZy4sIFwiZGl2XCIpXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gd2hldGhlciBlbCBpcyBvZiB0aGUgZ2l2ZW4gdGFnIHR5cGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzVGFnKGVsOiBFbGVtZW50IHwgdW5kZWZpbmVkIHwgbnVsbCwgdGFnOiBzdHJpbmcpOiBlbCBpcyBIVE1MRWxlbWVudCB7XG4gICAgcmV0dXJuICEhZWwgJiYgISFlbC50YWdOYW1lICYmIGVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gdGFnLnRvTG93ZXJDYXNlKClcbn1cblxuLypcbiAqIENoZWNrIHdoZXRoZXIgYW4gZWxlbWVudCBoYXMgbm9kZVR5cGUgTm9kZS5URVhUX05PREVcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWwgLSBlbGVtZW50IHRvIGNoZWNrXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gd2hldGhlciBlbCBpcyBvZiB0aGUgY29ycmVjdCBub2RlVHlwZVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNUZXh0Tm9kZShlbDogRWxlbWVudCB8IHVuZGVmaW5lZCB8IG51bGwpOiBlbCBpcyBIVE1MRWxlbWVudCB7XG4gICAgcmV0dXJuICEhZWwgJiYgZWwubm9kZVR5cGUgPT09IDMgLy8gTm9kZS5URVhUX05PREUgLSB1c2UgaW50ZWdlciBjb25zdGFudCBmb3IgYnJvd3NlciBwb3J0YWJpbGl0eVxufVxuXG4vKlxuICogQ2hlY2sgd2hldGhlciBhbiBlbGVtZW50IGhhcyBub2RlVHlwZSBOb2RlLkRPQ1VNRU5UX0ZSQUdNRU5UX05PREVcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWwgLSBlbGVtZW50IHRvIGNoZWNrXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gd2hldGhlciBlbCBpcyBvZiB0aGUgY29ycmVjdCBub2RlVHlwZVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNEb2N1bWVudEZyYWdtZW50KGVsOiBFbGVtZW50IHwgUGFyZW50Tm9kZSB8IHVuZGVmaW5lZCB8IG51bGwpOiBlbCBpcyBEb2N1bWVudEZyYWdtZW50IHtcbiAgICByZXR1cm4gISFlbCAmJiBlbC5ub2RlVHlwZSA9PT0gMTEgLy8gTm9kZS5ET0NVTUVOVF9GUkFHTUVOVF9OT0RFIC0gdXNlIGludGVnZXIgY29uc3RhbnQgZm9yIGJyb3dzZXIgcG9ydGFiaWxpdHlcbn1cblxuZXhwb3J0IGNvbnN0IGF1dG9jYXB0dXJlQ29tcGF0aWJsZUVsZW1lbnRzID0gWydhJywgJ2J1dHRvbicsICdmb3JtJywgJ2lucHV0JywgJ3NlbGVjdCcsICd0ZXh0YXJlYScsICdsYWJlbCddXG5cbi8qXG4gaWYgdGhlcmUgaXMgbm8gY29uZmlnLCB0aGVuIGFsbCBlbGVtZW50cyBhcmUgYWxsb3dlZFxuIGlmIHRoZXJlIGlzIGEgY29uZmlnLCBhbmQgdGhlcmUgaXMgYW4gYWxsb3cgbGlzdCwgdGhlbiBvbmx5IGVsZW1lbnRzIGluIHRoZSBhbGxvdyBsaXN0IGFyZSBhbGxvd2VkXG4gYXNzdW1lcyB0aGF0IHNvbWUgb3RoZXIgY29kZSBpcyBjaGVja2luZyB0aGlzIGVsZW1lbnQncyBwYXJlbnRzXG4gKi9cbmZ1bmN0aW9uIGNoZWNrSWZFbGVtZW50VHJlZVBhc3Nlc0VsZW1lbnRBbGxvd0xpc3QoXG4gICAgZWxlbWVudHM6IEVsZW1lbnRbXSxcbiAgICBhdXRvY2FwdHVyZUNvbmZpZzogQXV0b2NhcHR1cmVDb25maWcgfCB1bmRlZmluZWRcbik6IGJvb2xlYW4ge1xuICAgIGNvbnN0IGFsbG93bGlzdCA9IGF1dG9jYXB0dXJlQ29uZmlnPy5lbGVtZW50X2FsbG93bGlzdFxuICAgIGlmIChfaXNVbmRlZmluZWQoYWxsb3dsaXN0KSkge1xuICAgICAgICAvLyBldmVyeXRoaW5nIGlzIGFsbG93ZWQsIHdoZW4gdGhlcmUgaXMgbm8gYWxsb3cgbGlzdFxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cblxuICAgIC8vIGNoZWNrIGVhY2ggZWxlbWVudCBpbiB0aGUgdHJlZVxuICAgIC8vIGlmIGFueSBvZiB0aGUgZWxlbWVudHMgYXJlIGluIHRoZSBhbGxvdyBsaXN0LCB0aGVuIHRoZSB0cmVlIGlzIGFsbG93ZWRcbiAgICBmb3IgKGNvbnN0IGVsIG9mIGVsZW1lbnRzKSB7XG4gICAgICAgIGlmIChhbGxvd2xpc3Quc29tZSgoZWxlbWVudFR5cGUpID0+IGVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gZWxlbWVudFR5cGUpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gb3RoZXJ3aXNlIHRoZXJlIGlzIGFuIGFsbG93IGxpc3QgYW5kIHRoaXMgZWxlbWVudCB0cmVlIGRpZG4ndCBtYXRjaCBpdFxuICAgIHJldHVybiBmYWxzZVxufVxuXG4vKlxuIGlmIHRoZXJlIGlzIG5vIGNvbmZpZywgdGhlbiBhbGwgZWxlbWVudHMgYXJlIGFsbG93ZWRcbiBpZiB0aGVyZSBpcyBhIGNvbmZpZywgYW5kIHRoZXJlIGlzIGFuIGFsbG93IGxpc3QsIHRoZW5cbiBvbmx5IGVsZW1lbnRzIHRoYXQgbWF0Y2ggdGhlIGNzcyBzZWxlY3RvciBpbiB0aGUgYWxsb3cgbGlzdCBhcmUgYWxsb3dlZFxuIGFzc3VtZXMgdGhhdCBzb21lIG90aGVyIGNvZGUgaXMgY2hlY2tpbmcgdGhpcyBlbGVtZW50J3MgcGFyZW50c1xuICovXG5mdW5jdGlvbiBjaGVja0lmRWxlbWVudFRyZWVQYXNzZXNDU1NTZWxlY3RvckFsbG93TGlzdChcbiAgICBlbGVtZW50czogRWxlbWVudFtdLFxuICAgIGF1dG9jYXB0dXJlQ29uZmlnOiBBdXRvY2FwdHVyZUNvbmZpZyB8IHVuZGVmaW5lZFxuKTogYm9vbGVhbiB7XG4gICAgY29uc3QgYWxsb3dsaXN0ID0gYXV0b2NhcHR1cmVDb25maWc/LmNzc19zZWxlY3Rvcl9hbGxvd2xpc3RcbiAgICBpZiAoX2lzVW5kZWZpbmVkKGFsbG93bGlzdCkpIHtcbiAgICAgICAgLy8gZXZlcnl0aGluZyBpcyBhbGxvd2VkLCB3aGVuIHRoZXJlIGlzIG5vIGFsbG93IGxpc3RcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG5cbiAgICAvLyBjaGVjayBlYWNoIGVsZW1lbnQgaW4gdGhlIHRyZWVcbiAgICAvLyBpZiBhbnkgb2YgdGhlIGVsZW1lbnRzIGFyZSBpbiB0aGUgYWxsb3cgbGlzdCwgdGhlbiB0aGUgdHJlZSBpcyBhbGxvd2VkXG4gICAgZm9yIChjb25zdCBlbCBvZiBlbGVtZW50cykge1xuICAgICAgICBpZiAoYWxsb3dsaXN0LnNvbWUoKHNlbGVjdG9yKSA9PiBlbC5tYXRjaGVzKHNlbGVjdG9yKSkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBvdGhlcndpc2UgdGhlcmUgaXMgYW4gYWxsb3cgbGlzdCBhbmQgdGhpcyBlbGVtZW50IHRyZWUgZGlkbid0IG1hdGNoIGl0XG4gICAgcmV0dXJuIGZhbHNlXG59XG5cbmZ1bmN0aW9uIGdldFBhcmVudEVsZW1lbnQoY3VyRWw6IEVsZW1lbnQpOiBFbGVtZW50IHwgZmFsc2Uge1xuICAgIGNvbnN0IHBhcmVudE5vZGUgPSBjdXJFbC5wYXJlbnROb2RlXG4gICAgaWYgKCFwYXJlbnROb2RlIHx8ICFpc0VsZW1lbnROb2RlKHBhcmVudE5vZGUpKSByZXR1cm4gZmFsc2VcbiAgICByZXR1cm4gcGFyZW50Tm9kZVxufVxuXG4vKlxuICogQ2hlY2sgd2hldGhlciBhIERPTSBldmVudCBzaG91bGQgYmUgXCJjYXB0dXJlZFwiIG9yIGlmIGl0IG1heSBjb250YWluIHNlbnRpdGl2ZSBkYXRhXG4gKiB1c2luZyBhIHZhcmlldHkgb2YgaGV1cmlzdGljcy5cbiAqIEBwYXJhbSB7RWxlbWVudH0gZWwgLSBlbGVtZW50IHRvIGNoZWNrXG4gKiBAcGFyYW0ge0V2ZW50fSBldmVudCAtIGV2ZW50IHRvIGNoZWNrXG4gKiBAcGFyYW0ge09iamVjdH0gYXV0b2NhcHR1cmVDb25maWcgLSBhdXRvY2FwdHVyZSBjb25maWdcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gY2FwdHVyZU9uQW55RWxlbWVudCAtIHdoZXRoZXIgdG8gY2FwdHVyZSBvbiBhbnkgZWxlbWVudCwgY2xpcGJvYXJkIGF1dG9jYXB0dXJlIGRvZXNuJ3QgcmVzdHJpY3QgdG8gXCJjbGlja2FibGVcIiBlbGVtZW50c1xuICogQHBhcmFtIHtzdHJpbmdbXX0gYWxsb3dlZEV2ZW50VHlwZXMgLSBldmVudCB0eXBlcyB0byBjYXB0dXJlLCBub3JtYWxseSBqdXN0ICdjbGljaycsIGJ1dCBzb21lIGF1dG9jYXB0dXJlIHR5cGVzIHJlYWN0IHRvIGRpZmZlcmVudCBldmVudHMsIHNvbWUgZWxlbWVudHMgaGF2ZSBmaXhlZCBldmVudHMgKGUuZy4sIGZvcm0gaGFzIFwic3VibWl0XCIpXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gd2hldGhlciB0aGUgZXZlbnQgc2hvdWxkIGJlIGNhcHR1cmVkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzaG91bGRDYXB0dXJlRG9tRXZlbnQoXG4gICAgZWw6IEVsZW1lbnQsXG4gICAgZXZlbnQ6IEV2ZW50LFxuICAgIGF1dG9jYXB0dXJlQ29uZmlnOiBBdXRvY2FwdHVyZUNvbmZpZyB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZCxcbiAgICBjYXB0dXJlT25BbnlFbGVtZW50PzogYm9vbGVhbixcbiAgICBhbGxvd2VkRXZlbnRUeXBlcz86IHN0cmluZ1tdXG4pOiBib29sZWFuIHtcbiAgICBpZiAoIXdpbmRvdyB8fCAhZWwgfHwgaXNUYWcoZWwsICdodG1sJykgfHwgIWlzRWxlbWVudE5vZGUoZWwpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cblxuICAgIGlmIChhdXRvY2FwdHVyZUNvbmZpZz8udXJsX2FsbG93bGlzdCkge1xuICAgICAgICBjb25zdCB1cmwgPSB3aW5kb3cubG9jYXRpb24uaHJlZlxuICAgICAgICBjb25zdCBhbGxvd2xpc3QgPSBhdXRvY2FwdHVyZUNvbmZpZy51cmxfYWxsb3dsaXN0XG4gICAgICAgIGlmIChhbGxvd2xpc3QgJiYgIWFsbG93bGlzdC5zb21lKChyZWdleCkgPT4gdXJsLm1hdGNoKHJlZ2V4KSkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGF1dG9jYXB0dXJlQ29uZmlnPy5kb21fZXZlbnRfYWxsb3dsaXN0KSB7XG4gICAgICAgIGNvbnN0IGFsbG93bGlzdCA9IGF1dG9jYXB0dXJlQ29uZmlnLmRvbV9ldmVudF9hbGxvd2xpc3RcbiAgICAgICAgaWYgKGFsbG93bGlzdCAmJiAhYWxsb3dsaXN0LnNvbWUoKGV2ZW50VHlwZSkgPT4gZXZlbnQudHlwZSA9PT0gZXZlbnRUeXBlKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgcGFyZW50SXNVc2VmdWxFbGVtZW50ID0gZmFsc2VcbiAgICBjb25zdCB0YXJnZXRFbGVtZW50TGlzdDogRWxlbWVudFtdID0gW2VsXVxuICAgIGxldCBwYXJlbnROb2RlOiBFbGVtZW50IHwgYm9vbGVhbiA9IHRydWVcbiAgICBsZXQgY3VyRWw6IEVsZW1lbnQgPSBlbFxuICAgIHdoaWxlIChjdXJFbC5wYXJlbnROb2RlICYmICFpc1RhZyhjdXJFbCwgJ2JvZHknKSkge1xuICAgICAgICAvLyBJZiBlbGVtZW50IGlzIGEgc2hhZG93IHJvb3QsIHdlIHNraXAgaXRcbiAgICAgICAgaWYgKGlzRG9jdW1lbnRGcmFnbWVudChjdXJFbC5wYXJlbnROb2RlKSkge1xuICAgICAgICAgICAgdGFyZ2V0RWxlbWVudExpc3QucHVzaCgoY3VyRWwucGFyZW50Tm9kZSBhcyBhbnkpLmhvc3QpXG4gICAgICAgICAgICBjdXJFbCA9IChjdXJFbC5wYXJlbnROb2RlIGFzIGFueSkuaG9zdFxuICAgICAgICAgICAgY29udGludWVcbiAgICAgICAgfVxuICAgICAgICBwYXJlbnROb2RlID0gZ2V0UGFyZW50RWxlbWVudChjdXJFbClcbiAgICAgICAgaWYgKCFwYXJlbnROb2RlKSBicmVha1xuICAgICAgICBpZiAoY2FwdHVyZU9uQW55RWxlbWVudCB8fCBhdXRvY2FwdHVyZUNvbXBhdGlibGVFbGVtZW50cy5pbmRleE9mKHBhcmVudE5vZGUudGFnTmFtZS50b0xvd2VyQ2FzZSgpKSA+IC0xKSB7XG4gICAgICAgICAgICBwYXJlbnRJc1VzZWZ1bEVsZW1lbnQgPSB0cnVlXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBjb21wU3R5bGVzID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUocGFyZW50Tm9kZSlcbiAgICAgICAgICAgIGlmIChjb21wU3R5bGVzICYmIGNvbXBTdHlsZXMuZ2V0UHJvcGVydHlWYWx1ZSgnY3Vyc29yJykgPT09ICdwb2ludGVyJykge1xuICAgICAgICAgICAgICAgIHBhcmVudElzVXNlZnVsRWxlbWVudCA9IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRhcmdldEVsZW1lbnRMaXN0LnB1c2gocGFyZW50Tm9kZSlcbiAgICAgICAgY3VyRWwgPSBwYXJlbnROb2RlXG4gICAgfVxuXG4gICAgaWYgKCFjaGVja0lmRWxlbWVudFRyZWVQYXNzZXNFbGVtZW50QWxsb3dMaXN0KHRhcmdldEVsZW1lbnRMaXN0LCBhdXRvY2FwdHVyZUNvbmZpZykpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuXG4gICAgaWYgKCFjaGVja0lmRWxlbWVudFRyZWVQYXNzZXNDU1NTZWxlY3RvckFsbG93TGlzdCh0YXJnZXRFbGVtZW50TGlzdCwgYXV0b2NhcHR1cmVDb25maWcpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cblxuICAgIGNvbnN0IGNvbXBTdHlsZXMgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbClcbiAgICBpZiAoY29tcFN0eWxlcyAmJiBjb21wU3R5bGVzLmdldFByb3BlcnR5VmFsdWUoJ2N1cnNvcicpID09PSAncG9pbnRlcicgJiYgZXZlbnQudHlwZSA9PT0gJ2NsaWNrJykge1xuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cblxuICAgIGNvbnN0IHRhZyA9IGVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKVxuICAgIHN3aXRjaCAodGFnKSB7XG4gICAgICAgIGNhc2UgJ2h0bWwnOlxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgIGNhc2UgJ2Zvcm0nOlxuICAgICAgICAgICAgcmV0dXJuIChhbGxvd2VkRXZlbnRUeXBlcyB8fCBbJ3N1Ym1pdCddKS5pbmRleE9mKGV2ZW50LnR5cGUpID49IDBcbiAgICAgICAgY2FzZSAnaW5wdXQnOlxuICAgICAgICBjYXNlICdzZWxlY3QnOlxuICAgICAgICBjYXNlICd0ZXh0YXJlYSc6XG4gICAgICAgICAgICByZXR1cm4gKGFsbG93ZWRFdmVudFR5cGVzIHx8IFsnY2hhbmdlJywgJ2NsaWNrJ10pLmluZGV4T2YoZXZlbnQudHlwZSkgPj0gMFxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgaWYgKHBhcmVudElzVXNlZnVsRWxlbWVudCkgcmV0dXJuIChhbGxvd2VkRXZlbnRUeXBlcyB8fCBbJ2NsaWNrJ10pLmluZGV4T2YoZXZlbnQudHlwZSkgPj0gMFxuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAoYWxsb3dlZEV2ZW50VHlwZXMgfHwgWydjbGljayddKS5pbmRleE9mKGV2ZW50LnR5cGUpID49IDAgJiZcbiAgICAgICAgICAgICAgICAoYXV0b2NhcHR1cmVDb21wYXRpYmxlRWxlbWVudHMuaW5kZXhPZih0YWcpID4gLTEgfHwgZWwuZ2V0QXR0cmlidXRlKCdjb250ZW50ZWRpdGFibGUnKSA9PT0gJ3RydWUnKVxuICAgICAgICAgICAgKVxuICAgIH1cbn1cblxuLypcbiAqIENoZWNrIHdoZXRoZXIgYSBET00gZWxlbWVudCBzaG91bGQgYmUgXCJjYXB0dXJlZFwiIG9yIGlmIGl0IG1heSBjb250YWluIHNlbnRpdGl2ZSBkYXRhXG4gKiB1c2luZyBhIHZhcmlldHkgb2YgaGV1cmlzdGljcy5cbiAqIEBwYXJhbSB7RWxlbWVudH0gZWwgLSBlbGVtZW50IHRvIGNoZWNrXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gd2hldGhlciB0aGUgZWxlbWVudCBzaG91bGQgYmUgY2FwdHVyZWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNob3VsZENhcHR1cmVFbGVtZW50KGVsOiBFbGVtZW50KTogYm9vbGVhbiB7XG4gICAgZm9yIChsZXQgY3VyRWwgPSBlbDsgY3VyRWwucGFyZW50Tm9kZSAmJiAhaXNUYWcoY3VyRWwsICdib2R5Jyk7IGN1ckVsID0gY3VyRWwucGFyZW50Tm9kZSBhcyBFbGVtZW50KSB7XG4gICAgICAgIGNvbnN0IGNsYXNzZXMgPSBnZXRDbGFzc05hbWVzKGN1ckVsKVxuICAgICAgICBpZiAoX2luY2x1ZGVzKGNsYXNzZXMsICdwaC1zZW5zaXRpdmUnKSB8fCBfaW5jbHVkZXMoY2xhc3NlcywgJ3BoLW5vLWNhcHR1cmUnKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoX2luY2x1ZGVzKGdldENsYXNzTmFtZXMoZWwpLCAncGgtaW5jbHVkZScpKSB7XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuXG4gICAgLy8gZG9uJ3QgaW5jbHVkZSBoaWRkZW4gb3IgcGFzc3dvcmQgZmllbGRzXG4gICAgY29uc3QgdHlwZSA9IChlbCBhcyBIVE1MSW5wdXRFbGVtZW50KS50eXBlIHx8ICcnXG4gICAgaWYgKF9pc1N0cmluZyh0eXBlKSkge1xuICAgICAgICAvLyBpdCdzIHBvc3NpYmxlIGZvciBlbC50eXBlIHRvIGJlIGEgRE9NIGVsZW1lbnQgaWYgZWwgaXMgYSBmb3JtIHdpdGggYSBjaGlsZCBpbnB1dFtuYW1lPVwidHlwZVwiXVxuICAgICAgICBzd2l0Y2ggKHR5cGUudG9Mb3dlckNhc2UoKSkge1xuICAgICAgICAgICAgY2FzZSAnaGlkZGVuJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICAgIGNhc2UgJ3Bhc3N3b3JkJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIGZpbHRlciBvdXQgZGF0YSBmcm9tIGZpZWxkcyB0aGF0IGxvb2sgbGlrZSBzZW5zaXRpdmUgZmllbGRzXG4gICAgY29uc3QgbmFtZSA9IChlbCBhcyBIVE1MSW5wdXRFbGVtZW50KS5uYW1lIHx8IGVsLmlkIHx8ICcnXG4gICAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9wb3N0aG9nL3Bvc3Rob2ctanMvaXNzdWVzLzE2NVxuICAgIC8vIFVuZGVyIHNwZWNpZmljIGNpcmN1bXN0YW5jZXMgYSBidWcgY2F1c2VkIC5yZXBsYWNlIHRvIGJlIGNhbGxlZCBvbiBhIERPTSBlbGVtZW50XG4gICAgLy8gaW5zdGVhZCBvZiBhIHN0cmluZywgcmVtb3ZpbmcgdGhlIGVsZW1lbnQgZnJvbSB0aGUgcGFnZS4gRW5zdXJlIHRoaXMgaXNzdWUgaXMgbWl0aWdhdGVkLlxuICAgIGlmIChfaXNTdHJpbmcobmFtZSkpIHtcbiAgICAgICAgLy8gaXQncyBwb3NzaWJsZSBmb3IgZWwubmFtZSBvciBlbC5pZCB0byBiZSBhIERPTSBlbGVtZW50IGlmIGVsIGlzIGEgZm9ybSB3aXRoIGEgY2hpbGQgaW5wdXRbbmFtZT1cIm5hbWVcIl1cbiAgICAgICAgY29uc3Qgc2Vuc2l0aXZlTmFtZVJlZ2V4ID1cbiAgICAgICAgICAgIC9eY2N8Y2FyZG51bXxjY251bXxjcmVkaXRjYXJkfGNzY3xjdmN8Y3Z2fGV4cHxwYXNzfHB3ZHxyb3V0aW5nfHNlY2NvZGV8c2VjdXJpdHljb2RlfHNlY3VyaXR5bnVtfHNvY2lhbHNlY3xzb2NzZWN8c3NuL2lcbiAgICAgICAgaWYgKHNlbnNpdGl2ZU5hbWVSZWdleC50ZXN0KG5hbWUucmVwbGFjZSgvW15hLXpBLVowLTldL2csICcnKSkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWVcbn1cblxuLypcbiAqIENoZWNrIHdoZXRoZXIgYSBET00gZWxlbWVudCBpcyAnc2Vuc2l0aXZlJyBhbmQgd2Ugc2hvdWxkIG9ubHkgY2FwdHVyZSBsaW1pdGVkIGRhdGFcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWwgLSBlbGVtZW50IHRvIGNoZWNrXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gd2hldGhlciB0aGUgZWxlbWVudCBzaG91bGQgYmUgY2FwdHVyZWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzU2Vuc2l0aXZlRWxlbWVudChlbDogRWxlbWVudCk6IGJvb2xlYW4ge1xuICAgIC8vIGRvbid0IHNlbmQgZGF0YSBmcm9tIGlucHV0cyBvciBzaW1pbGFyIGVsZW1lbnRzIHNpbmNlIHRoZXJlIHdpbGwgYWx3YXlzIGJlXG4gICAgLy8gYSByaXNrIG9mIGNsaWVudHNpZGUgamF2YXNjcmlwdCBwbGFjaW5nIHNlbnNpdGl2ZSBkYXRhIGluIGF0dHJpYnV0ZXNcbiAgICBjb25zdCBhbGxvd2VkSW5wdXRUeXBlcyA9IFsnYnV0dG9uJywgJ2NoZWNrYm94JywgJ3N1Ym1pdCcsICdyZXNldCddXG4gICAgaWYgKFxuICAgICAgICAoaXNUYWcoZWwsICdpbnB1dCcpICYmICFhbGxvd2VkSW5wdXRUeXBlcy5pbmNsdWRlcygoZWwgYXMgSFRNTElucHV0RWxlbWVudCkudHlwZSkpIHx8XG4gICAgICAgIGlzVGFnKGVsLCAnc2VsZWN0JykgfHxcbiAgICAgICAgaXNUYWcoZWwsICd0ZXh0YXJlYScpIHx8XG4gICAgICAgIGVsLmdldEF0dHJpYnV0ZSgnY29udGVudGVkaXRhYmxlJykgPT09ICd0cnVlJ1xuICAgICkge1xuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2Vcbn1cblxuLy8gRGVmaW5lIHRoZSBjb3JlIHBhdHRlcm4gZm9yIG1hdGNoaW5nIGNyZWRpdCBjYXJkIG51bWJlcnNcbmNvbnN0IGNvcmVDQ1BhdHRlcm4gPSBgKDRbMC05XXsxMn0oPzpbMC05XXszfSk/KXwoNVsxLTVdWzAtOV17MTR9KXwoNig/OjAxMXw1WzAtOV17Mn0pWzAtOV17MTJ9KXwoM1s0N11bMC05XXsxM30pfCgzKD86MFswLTVdfFs2OF1bMC05XSlbMC05XXsxMX0pfCgoPzoyMTMxfDE4MDB8MzVbMC05XXszfSlbMC05XXsxMX0pYFxuLy8gQ3JlYXRlIHRoZSBBbmNob3JlZCB2ZXJzaW9uIG9mIHRoZSByZWdleCBieSBhZGRpbmcgJ14nIGF0IHRoZSBzdGFydCBhbmQgJyQnIGF0IHRoZSBlbmRcbmNvbnN0IGFuY2hvcmVkQ0NSZWdleCA9IG5ldyBSZWdFeHAoYF4oPzoke2NvcmVDQ1BhdHRlcm59KSRgKVxuLy8gVGhlIFVuYW5jaG9yZWQgdmVyc2lvbiBpcyBlc3NlbnRpYWxseSB0aGUgY29yZSBwYXR0ZXJuLCB1c2FibGUgYXMgaXMgZm9yIHBhcnRpYWwgbWF0Y2hlc1xuY29uc3QgdW5hbmNob3JlZENDUmVnZXggPSBuZXcgUmVnRXhwKGNvcmVDQ1BhdHRlcm4pXG5cbi8vIERlZmluZSB0aGUgY29yZSBwYXR0ZXJuIGZvciBtYXRjaGluZyBTU05zIHdpdGggb3B0aW9uYWwgZGFzaGVzXG5jb25zdCBjb3JlU1NOUGF0dGVybiA9IGBcXFxcZHszfS0/XFxcXGR7Mn0tP1xcXFxkezR9YFxuLy8gQ3JlYXRlIHRoZSBBbmNob3JlZCB2ZXJzaW9uIG9mIHRoZSByZWdleCBieSBhZGRpbmcgJ14nIGF0IHRoZSBzdGFydCBhbmQgJyQnIGF0IHRoZSBlbmRcbmNvbnN0IGFuY2hvcmVkU1NOUmVnZXggPSBuZXcgUmVnRXhwKGBeKCR7Y29yZVNTTlBhdHRlcm59KSRgKVxuLy8gVGhlIFVuYW5jaG9yZWQgdmVyc2lvbiBpcyBlc3NlbnRpYWxseSB0aGUgY29yZSBwYXR0ZXJuIGl0c2VsZiwgdXNhYmxlIGZvciBwYXJ0aWFsIG1hdGNoZXNcbmNvbnN0IHVuYW5jaG9yZWRTU05SZWdleCA9IG5ldyBSZWdFeHAoYCgke2NvcmVTU05QYXR0ZXJufSlgKVxuXG4vKlxuICogQ2hlY2sgd2hldGhlciBhIHN0cmluZyB2YWx1ZSBzaG91bGQgYmUgXCJjYXB0dXJlZFwiIG9yIGlmIGl0IG1heSBjb250YWluIHNlbnNpdGl2ZSBkYXRhXG4gKiB1c2luZyBhIHZhcmlldHkgb2YgaGV1cmlzdGljcy5cbiAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZSAtIHN0cmluZyB2YWx1ZSB0byBjaGVja1xuICogQHBhcmFtIHtib29sZWFufSBhbmNob3JSZWdleGVzIC0gd2hldGhlciB0byBhbmNob3IgdGhlIHJlZ2V4ZXMgdG8gdGhlIHN0YXJ0IGFuZCBlbmQgb2YgdGhlIHN0cmluZ1xuICogQHJldHVybnMge2Jvb2xlYW59IHdoZXRoZXIgdGhlIGVsZW1lbnQgc2hvdWxkIGJlIGNhcHR1cmVkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzaG91bGRDYXB0dXJlVmFsdWUodmFsdWU6IHN0cmluZywgYW5jaG9yUmVnZXhlcyA9IHRydWUpOiBib29sZWFuIHtcbiAgICBpZiAoX2lzTnVsbGlzaCh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuXG4gICAgaWYgKF9pc1N0cmluZyh2YWx1ZSkpIHtcbiAgICAgICAgdmFsdWUgPSBfdHJpbSh2YWx1ZSlcblxuICAgICAgICAvLyBjaGVjayB0byBzZWUgaWYgaW5wdXQgdmFsdWUgbG9va3MgbGlrZSBhIGNyZWRpdCBjYXJkIG51bWJlclxuICAgICAgICAvLyBzZWU6IGh0dHBzOi8vd3d3LnNhZmFyaWJvb2tzb25saW5lLmNvbS9saWJyYXJ5L3ZpZXcvcmVndWxhci1leHByZXNzaW9ucy1jb29rYm9vay85NzgxNDQ5MzI3NDUzL2NoMDRzMjAuaHRtbFxuICAgICAgICBjb25zdCBjY1JlZ2V4ID0gYW5jaG9yUmVnZXhlcyA/IGFuY2hvcmVkQ0NSZWdleCA6IHVuYW5jaG9yZWRDQ1JlZ2V4XG4gICAgICAgIGlmIChjY1JlZ2V4LnRlc3QoKHZhbHVlIHx8ICcnKS5yZXBsYWNlKC9bLSBdL2csICcnKSkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gY2hlY2sgdG8gc2VlIGlmIGlucHV0IHZhbHVlIGxvb2tzIGxpa2UgYSBzb2NpYWwgc2VjdXJpdHkgbnVtYmVyXG4gICAgICAgIGNvbnN0IHNzblJlZ2V4ID0gYW5jaG9yUmVnZXhlcyA/IGFuY2hvcmVkU1NOUmVnZXggOiB1bmFuY2hvcmVkU1NOUmVnZXhcbiAgICAgICAgaWYgKHNzblJlZ2V4LnRlc3QodmFsdWUpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0cnVlXG59XG5cbi8qXG4gKiBDaGVjayB3aGV0aGVyIGFuIGF0dHJpYnV0ZSBuYW1lIGlzIGFuIEFuZ3VsYXIgc3R5bGUgYXR0ciAoZWl0aGVyIF9uZ2NvbnRlbnQgb3IgX25naG9zdClcbiAqIFRoZXNlIHVwZGF0ZSBvbiBlYWNoIGJ1aWxkIGFuZCBsZWFkIHRvIG5vaXNlIGluIHRoZSBlbGVtZW50IGNoYWluXG4gKiBNb3JlIGRldGFpbHMgb24gdGhlIGF0dHJpYnV0ZXMgaGVyZTogaHR0cHM6Ly9hbmd1bGFyLmlvL2d1aWRlL3ZpZXctZW5jYXBzdWxhdGlvblxuICogQHBhcmFtIHtzdHJpbmd9IGF0dHJpYnV0ZU5hbWUgLSBzdHJpbmcgdmFsdWUgdG8gY2hlY2tcbiAqIEByZXR1cm5zIHtib29sZWFufSB3aGV0aGVyIHRoZSBlbGVtZW50IGlzIGFuIGFuZ3VsYXIgdGFnXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0FuZ3VsYXJTdHlsZUF0dHIoYXR0cmlidXRlTmFtZTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgaWYgKF9pc1N0cmluZyhhdHRyaWJ1dGVOYW1lKSkge1xuICAgICAgICByZXR1cm4gYXR0cmlidXRlTmFtZS5zdWJzdHJpbmcoMCwgMTApID09PSAnX25nY29udGVudCcgfHwgYXR0cmlidXRlTmFtZS5zdWJzdHJpbmcoMCwgNykgPT09ICdfbmdob3N0J1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2Vcbn1cblxuLypcbiAqIEl0ZXJhdGUgdGhyb3VnaCBjaGlsZHJlbiBvZiBhIHRhcmdldCBlbGVtZW50IGxvb2tpbmcgZm9yIHNwYW4gdGFnc1xuICogYW5kIHJldHVybiB0aGUgdGV4dCBjb250ZW50IG9mIHRoZSBzcGFuIHRhZ3MsIHNlcGFyYXRlZCBieSBzcGFjZXMsXG4gKiBhbG9uZyB3aXRoIHRoZSBkaXJlY3QgdGV4dCBjb250ZW50IG9mIHRoZSB0YXJnZXQgZWxlbWVudFxuICogQHBhcmFtIHtFbGVtZW50fSB0YXJnZXQgLSBlbGVtZW50IHRvIGNoZWNrXG4gKiBAcmV0dXJucyB7c3RyaW5nfSB0ZXh0IGNvbnRlbnQgb2YgdGhlIHRhcmdldCBlbGVtZW50IGFuZCBpdHMgY2hpbGQgc3BhbiB0YWdzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXREaXJlY3RBbmROZXN0ZWRTcGFuVGV4dCh0YXJnZXQ6IEVsZW1lbnQpOiBzdHJpbmcge1xuICAgIGxldCB0ZXh0ID0gZ2V0U2FmZVRleHQodGFyZ2V0KVxuICAgIHRleHQgPSBgJHt0ZXh0fSAke2dldE5lc3RlZFNwYW5UZXh0KHRhcmdldCl9YC50cmltKClcbiAgICByZXR1cm4gc2hvdWxkQ2FwdHVyZVZhbHVlKHRleHQpID8gdGV4dCA6ICcnXG59XG5cbi8qXG4gKiBJdGVyYXRlIHRocm91Z2ggY2hpbGRyZW4gb2YgYSB0YXJnZXQgZWxlbWVudCBsb29raW5nIGZvciBzcGFuIHRhZ3NcbiAqIGFuZCByZXR1cm4gdGhlIHRleHQgY29udGVudCBvZiB0aGUgc3BhbiB0YWdzLCBzZXBhcmF0ZWQgYnkgc3BhY2VzXG4gKiBAcGFyYW0ge0VsZW1lbnR9IHRhcmdldCAtIGVsZW1lbnQgdG8gY2hlY2tcbiAqIEByZXR1cm5zIHtzdHJpbmd9IHRleHQgY29udGVudCBvZiBzcGFuIHRhZ3NcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldE5lc3RlZFNwYW5UZXh0KHRhcmdldDogRWxlbWVudCk6IHN0cmluZyB7XG4gICAgbGV0IHRleHQgPSAnJ1xuICAgIGlmICh0YXJnZXQgJiYgdGFyZ2V0LmNoaWxkTm9kZXMgJiYgdGFyZ2V0LmNoaWxkTm9kZXMubGVuZ3RoKSB7XG4gICAgICAgIF9lYWNoKHRhcmdldC5jaGlsZE5vZGVzLCBmdW5jdGlvbiAoY2hpbGQpIHtcbiAgICAgICAgICAgIGlmIChjaGlsZCAmJiBjaGlsZC50YWdOYW1lPy50b0xvd2VyQ2FzZSgpID09PSAnc3BhbicpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzcGFuVGV4dCA9IGdldFNhZmVUZXh0KGNoaWxkKVxuICAgICAgICAgICAgICAgICAgICB0ZXh0ID0gYCR7dGV4dH0gJHtzcGFuVGV4dH1gLnRyaW0oKVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGlsZC5jaGlsZE5vZGVzICYmIGNoaWxkLmNoaWxkTm9kZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0ID0gYCR7dGV4dH0gJHtnZXROZXN0ZWRTcGFuVGV4dChjaGlsZCl9YC50cmltKClcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKGUpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH1cbiAgICByZXR1cm4gdGV4dFxufVxuXG4vKlxuQmFjayBpbiB0aGUgZGF5IHN0b3JpbmcgZXZlbnRzIGluIFBvc3RncmVzIHdlIHVzZSBFbGVtZW50cyBmb3IgYXV0b2NhcHR1cmUgZXZlbnRzLlxuTm93IHdlJ3JlIHVzaW5nIGVsZW1lbnRzX2NoYWluLiBXZSB1c2VkIHRvIGRvIHRoaXMgcGFyc2luZy9wcm9jZXNzaW5nIGR1cmluZyBpbmdlc3Rpb24uXG5UaGlzIGNvZGUgaXMganVzdCBjb3BpZWQgb3ZlciBmcm9tIGluZ2VzdGlvbiwgYnV0IHdlIHNob3VsZCBvcHRpbWl6ZSBpdFxudG8gY3JlYXRlIGVsZW1lbnRzX2NoYWluIHN0cmluZyBkaXJlY3RseS5cbiovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RWxlbWVudHNDaGFpblN0cmluZyhlbGVtZW50czogUHJvcGVydGllc1tdKTogc3RyaW5nIHtcbiAgICByZXR1cm4gZWxlbWVudHNUb1N0cmluZyhleHRyYWN0RWxlbWVudHMoZWxlbWVudHMpKVxufVxuXG4vLyBUaGlzIGludGVyZmFjZSBpcyBjYWxsZWQgJ0VsZW1lbnQnIGluIHBsdWdpbi1zY2FmZm9sZCBodHRwczovL2dpdGh1Yi5jb20vUG9zdEhvZy9wbHVnaW4tc2NhZmZvbGQvYmxvYi9iMDdkM2I4Nzk3OTZlY2M3ZTIyZGViNzFiZjYyNzY5NGJhMDUzODZiL3NyYy90eXBlcy50cyNMMjAwXG4vLyBIb3dldmVyICdFbGVtZW50JyBpcyBhIERPTSBFbGVtZW50IHdoZW4gcnVuIGluIHRoZSBicm93c2VyLCBzbyB3ZSBoYXZlIHRvIHJlbmFtZSBpdFxuaW50ZXJmYWNlIFBIRWxlbWVudCB7XG4gICAgdGV4dD86IHN0cmluZ1xuICAgIHRhZ19uYW1lPzogc3RyaW5nXG4gICAgaHJlZj86IHN0cmluZ1xuICAgIGF0dHJfaWQ/OiBzdHJpbmdcbiAgICBhdHRyX2NsYXNzPzogc3RyaW5nW11cbiAgICBudGhfY2hpbGQ/OiBudW1iZXJcbiAgICBudGhfb2ZfdHlwZT86IG51bWJlclxuICAgIGF0dHJpYnV0ZXM/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+XG4gICAgZXZlbnRfaWQ/OiBudW1iZXJcbiAgICBvcmRlcj86IG51bWJlclxuICAgIGdyb3VwX2lkPzogbnVtYmVyXG59XG5cbmZ1bmN0aW9uIGVzY2FwZVF1b3RlcyhpbnB1dDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gaW5wdXQucmVwbGFjZSgvXCJ8XFxcXFwiL2csICdcXFxcXCInKVxufVxuXG5mdW5jdGlvbiBlbGVtZW50c1RvU3RyaW5nKGVsZW1lbnRzOiBQSEVsZW1lbnRbXSk6IHN0cmluZyB7XG4gICAgY29uc3QgcmV0ID0gZWxlbWVudHMubWFwKChlbGVtZW50KSA9PiB7XG4gICAgICAgIGxldCBlbF9zdHJpbmcgPSAnJ1xuICAgICAgICBpZiAoZWxlbWVudC50YWdfbmFtZSkge1xuICAgICAgICAgICAgZWxfc3RyaW5nICs9IGVsZW1lbnQudGFnX25hbWVcbiAgICAgICAgfVxuICAgICAgICBpZiAoZWxlbWVudC5hdHRyX2NsYXNzKSB7XG4gICAgICAgICAgICBlbGVtZW50LmF0dHJfY2xhc3Muc29ydCgpXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHNpbmdsZV9jbGFzcyBvZiBlbGVtZW50LmF0dHJfY2xhc3MpIHtcbiAgICAgICAgICAgICAgICBlbF9zdHJpbmcgKz0gYC4ke3NpbmdsZV9jbGFzcy5yZXBsYWNlKC9cIi9nLCAnJyl9YFxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGF0dHJpYnV0ZXM6IFJlY29yZDxzdHJpbmcsIGFueT4gPSB7XG4gICAgICAgICAgICAuLi4oZWxlbWVudC50ZXh0ID8geyB0ZXh0OiBlbGVtZW50LnRleHQgfSA6IHt9KSxcbiAgICAgICAgICAgICdudGgtY2hpbGQnOiBlbGVtZW50Lm50aF9jaGlsZCA/PyAwLFxuICAgICAgICAgICAgJ250aC1vZi10eXBlJzogZWxlbWVudC5udGhfb2ZfdHlwZSA/PyAwLFxuICAgICAgICAgICAgLi4uKGVsZW1lbnQuaHJlZiA/IHsgaHJlZjogZWxlbWVudC5ocmVmIH0gOiB7fSksXG4gICAgICAgICAgICAuLi4oZWxlbWVudC5hdHRyX2lkID8geyBhdHRyX2lkOiBlbGVtZW50LmF0dHJfaWQgfSA6IHt9KSxcbiAgICAgICAgICAgIC4uLmVsZW1lbnQuYXR0cmlidXRlcyxcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzb3J0ZWRBdHRyaWJ1dGVzOiBSZWNvcmQ8c3RyaW5nLCBhbnk+ID0ge31cbiAgICAgICAgX2VudHJpZXMoYXR0cmlidXRlcylcbiAgICAgICAgICAgIC5zb3J0KChbYV0sIFtiXSkgPT4gYS5sb2NhbGVDb21wYXJlKGIpKVxuICAgICAgICAgICAgLmZvckVhY2goXG4gICAgICAgICAgICAgICAgKFtrZXksIHZhbHVlXSkgPT4gKHNvcnRlZEF0dHJpYnV0ZXNbZXNjYXBlUXVvdGVzKGtleS50b1N0cmluZygpKV0gPSBlc2NhcGVRdW90ZXModmFsdWUudG9TdHJpbmcoKSkpXG4gICAgICAgICAgICApXG4gICAgICAgIGVsX3N0cmluZyArPSAnOidcbiAgICAgICAgZWxfc3RyaW5nICs9IF9lbnRyaWVzKGF0dHJpYnV0ZXMpXG4gICAgICAgICAgICAubWFwKChba2V5LCB2YWx1ZV0pID0+IGAke2tleX09XCIke3ZhbHVlfVwiYClcbiAgICAgICAgICAgIC5qb2luKCcnKVxuICAgICAgICByZXR1cm4gZWxfc3RyaW5nXG4gICAgfSlcbiAgICByZXR1cm4gcmV0LmpvaW4oJzsnKVxufVxuXG5mdW5jdGlvbiBleHRyYWN0RWxlbWVudHMoZWxlbWVudHM6IFByb3BlcnRpZXNbXSk6IFBIRWxlbWVudFtdIHtcbiAgICByZXR1cm4gZWxlbWVudHMubWFwKChlbCkgPT4ge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IHtcbiAgICAgICAgICAgIHRleHQ6IGVsWyckZWxfdGV4dCddPy5zbGljZSgwLCA0MDApLFxuICAgICAgICAgICAgdGFnX25hbWU6IGVsWyd0YWdfbmFtZSddLFxuICAgICAgICAgICAgaHJlZjogZWxbJ2F0dHJfX2hyZWYnXT8uc2xpY2UoMCwgMjA0OCksXG4gICAgICAgICAgICBhdHRyX2NsYXNzOiBleHRyYWN0QXR0ckNsYXNzKGVsKSxcbiAgICAgICAgICAgIGF0dHJfaWQ6IGVsWydhdHRyX19pZCddLFxuICAgICAgICAgICAgbnRoX2NoaWxkOiBlbFsnbnRoX2NoaWxkJ10sXG4gICAgICAgICAgICBudGhfb2ZfdHlwZTogZWxbJ250aF9vZl90eXBlJ10sXG4gICAgICAgICAgICBhdHRyaWJ1dGVzOiB7fSBhcyB7IFtpZDogc3RyaW5nXTogYW55IH0sXG4gICAgICAgIH1cbiAgICAgICAgX2VudHJpZXMoZWwpXG4gICAgICAgICAgICAuZmlsdGVyKChba2V5XSkgPT4ga2V5LmluZGV4T2YoJ2F0dHJfXycpID09PSAwKVxuICAgICAgICAgICAgLmZvckVhY2goKFtrZXksIHZhbHVlXSkgPT4gKHJlc3BvbnNlLmF0dHJpYnV0ZXNba2V5XSA9IHZhbHVlKSlcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlXG4gICAgfSlcbn1cblxuZnVuY3Rpb24gZXh0cmFjdEF0dHJDbGFzcyhlbDogUHJvcGVydGllcyk6IFBIRWxlbWVudFsnYXR0cl9jbGFzcyddIHtcbiAgICBjb25zdCBhdHRyX2NsYXNzID0gZWxbJ2F0dHJfX2NsYXNzJ11cbiAgICBpZiAoIWF0dHJfY2xhc3MpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgIH0gZWxzZSBpZiAoX2lzQXJyYXkoYXR0cl9jbGFzcykpIHtcbiAgICAgICAgcmV0dXJuIGF0dHJfY2xhc3NcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gc3BsaXRDbGFzc1N0cmluZyhhdHRyX2NsYXNzKVxuICAgIH1cbn1cbiIsICIvLyBOYWl2ZSByYWdlIGNsaWNrIGltcGxlbWVudGF0aW9uOiBJZiBtb3VzZSBoYXMgbm90IG1vdmVkIHRoYW4gUkFHRV9DTElDS19USFJFU0hPTERfUFhcbi8vIG92ZXIgUkFHRV9DTElDS19DTElDS19DT1VOVCBjbGlja3Mgd2l0aCBtYXggUkFHRV9DTElDS19USU1FT1VUX01TIGJldHdlZW4gY2xpY2tzLCBpdCdzXG4vLyBjb3VudGVkIGFzIGEgcmFnZSBjbGlja1xuXG5jb25zdCBSQUdFX0NMSUNLX1RIUkVTSE9MRF9QWCA9IDMwXG5jb25zdCBSQUdFX0NMSUNLX1RJTUVPVVRfTVMgPSAxMDAwXG5jb25zdCBSQUdFX0NMSUNLX0NMSUNLX0NPVU5UID0gM1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSYWdlQ2xpY2sge1xuICAgIGNsaWNrczogeyB4OiBudW1iZXI7IHk6IG51bWJlcjsgdGltZXN0YW1wOiBudW1iZXIgfVtdXG4gICAgZW5hYmxlZDogYm9vbGVhblxuXG4gICAgY29uc3RydWN0b3IoZW5hYmxlZDogYm9vbGVhbikge1xuICAgICAgICB0aGlzLmNsaWNrcyA9IFtdXG4gICAgICAgIHRoaXMuZW5hYmxlZCA9IGVuYWJsZWRcbiAgICB9XG5cbiAgICBpc1JhZ2VDbGljayh4OiBudW1iZXIsIHk6IG51bWJlciwgdGltZXN0YW1wOiBudW1iZXIpOiBib29sZWFuIHtcbiAgICAgICAgaWYgKCF0aGlzLmVuYWJsZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbGFzdENsaWNrID0gdGhpcy5jbGlja3NbdGhpcy5jbGlja3MubGVuZ3RoIC0gMV1cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgbGFzdENsaWNrICYmXG4gICAgICAgICAgICBNYXRoLmFicyh4IC0gbGFzdENsaWNrLngpICsgTWF0aC5hYnMoeSAtIGxhc3RDbGljay55KSA8IFJBR0VfQ0xJQ0tfVEhSRVNIT0xEX1BYICYmXG4gICAgICAgICAgICB0aW1lc3RhbXAgLSBsYXN0Q2xpY2sudGltZXN0YW1wIDwgUkFHRV9DTElDS19USU1FT1VUX01TXG4gICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy5jbGlja3MucHVzaCh7IHgsIHksIHRpbWVzdGFtcCB9KVxuXG4gICAgICAgICAgICBpZiAodGhpcy5jbGlja3MubGVuZ3RoID09PSBSQUdFX0NMSUNLX0NMSUNLX0NPVU5UKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuY2xpY2tzID0gW3sgeCwgeSwgdGltZXN0YW1wIH1dXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG59XG4iLCAiLypcbiAqIENvbnN0YW50c1xuICovXG5cbi8qIFBST1BFUlRZIEtFWVMgKi9cblxuLy8gVGhpcyBrZXkgaXMgZGVwcmVjYXRlZCwgYnV0IHdlIHdhbnQgdG8gY2hlY2sgZm9yIGl0IHRvIHNlZSB3aGV0aGVyIGFsaWFzaW5nIGlzIGFsbG93ZWQuXG5leHBvcnQgY29uc3QgUEVPUExFX0RJU1RJTkNUX0lEX0tFWSA9ICckcGVvcGxlX2Rpc3RpbmN0X2lkJ1xuZXhwb3J0IGNvbnN0IERJU1RJTkNUX0lEID0gJ2Rpc3RpbmN0X2lkJ1xuZXhwb3J0IGNvbnN0IEFMSUFTX0lEX0tFWSA9ICdfX2FsaWFzJ1xuZXhwb3J0IGNvbnN0IENBTVBBSUdOX0lEU19LRVkgPSAnX19jbXBucydcbmV4cG9ydCBjb25zdCBFVkVOVF9USU1FUlNfS0VZID0gJ19fdGltZXJzJ1xuZXhwb3J0IGNvbnN0IEFVVE9DQVBUVVJFX0RJU0FCTEVEX1NFUlZFUl9TSURFID0gJyRhdXRvY2FwdHVyZV9kaXNhYmxlZF9zZXJ2ZXJfc2lkZSdcbmV4cG9ydCBjb25zdCBTRVNTSU9OX1JFQ09SRElOR19FTkFCTEVEX1NFUlZFUl9TSURFID0gJyRzZXNzaW9uX3JlY29yZGluZ19lbmFibGVkX3NlcnZlcl9zaWRlJ1xuZXhwb3J0IGNvbnN0IENPTlNPTEVfTE9HX1JFQ09SRElOR19FTkFCTEVEX1NFUlZFUl9TSURFID0gJyRjb25zb2xlX2xvZ19yZWNvcmRpbmdfZW5hYmxlZF9zZXJ2ZXJfc2lkZSdcbmV4cG9ydCBjb25zdCBTRVNTSU9OX1JFQ09SRElOR19SRUNPUkRFUl9WRVJTSU9OX1NFUlZFUl9TSURFID0gJyRzZXNzaW9uX3JlY29yZGluZ19yZWNvcmRlcl92ZXJzaW9uX3NlcnZlcl9zaWRlJyAvLyBmb2xsb3dzIHJyd2ViIHZlcnNpb25pbmdcbmV4cG9ydCBjb25zdCBTRVNTSU9OX1JFQ09SRElOR19ORVRXT1JLX1BBWUxPQURfQ0FQVFVSRSA9ICckc2Vzc2lvbl9yZWNvcmRpbmdfbmV0d29ya19wYXlsb2FkX2NhcHR1cmUnXG5leHBvcnQgY29uc3QgU0VTU0lPTl9SRUNPUkRJTkdfQ0FOVkFTX1JFQ09SRElORyA9ICckc2Vzc2lvbl9yZWNvcmRpbmdfY2FudmFzX3JlY29yZGluZydcbmV4cG9ydCBjb25zdCBTRVNTSU9OX0lEID0gJyRzZXNpZCdcbmV4cG9ydCBjb25zdCBTRVNTSU9OX1JFQ09SRElOR19JU19TQU1QTEVEID0gJyRzZXNzaW9uX2lzX3NhbXBsZWQnXG5leHBvcnQgY29uc3QgRU5BQkxFRF9GRUFUVVJFX0ZMQUdTID0gJyRlbmFibGVkX2ZlYXR1cmVfZmxhZ3MnXG5leHBvcnQgY29uc3QgUEVSU0lTVEVOQ0VfRUFSTFlfQUNDRVNTX0ZFQVRVUkVTID0gJyRlYXJseV9hY2Nlc3NfZmVhdHVyZXMnXG5leHBvcnQgY29uc3QgU1RPUkVEX1BFUlNPTl9QUk9QRVJUSUVTX0tFWSA9ICckc3RvcmVkX3BlcnNvbl9wcm9wZXJ0aWVzJ1xuZXhwb3J0IGNvbnN0IFNUT1JFRF9HUk9VUF9QUk9QRVJUSUVTX0tFWSA9ICckc3RvcmVkX2dyb3VwX3Byb3BlcnRpZXMnXG5leHBvcnQgY29uc3QgU1VSVkVZUyA9ICckc3VydmV5cydcbmV4cG9ydCBjb25zdCBGTEFHX0NBTExfUkVQT1JURUQgPSAnJGZsYWdfY2FsbF9yZXBvcnRlZCdcbmV4cG9ydCBjb25zdCBVU0VSX1NUQVRFID0gJyR1c2VyX3N0YXRlJ1xuZXhwb3J0IGNvbnN0IFBPU1RIT0dfUVVPVEFfTElNSVRFRCA9ICckcG9zdGhvZ19xdW90YV9saW1pdGVkJ1xuZXhwb3J0IGNvbnN0IENMSUVOVF9TRVNTSU9OX1BST1BTID0gJyRjbGllbnRfc2Vzc2lvbl9wcm9wcydcblxuLy8gVGhlc2UgYXJlIHByb3BlcnRpZXMgdGhhdCBhcmUgcmVzZXJ2ZWQgYW5kIHdpbGwgbm90IGJlIGF1dG9tYXRpY2FsbHkgaW5jbHVkZWQgaW4gZXZlbnRzXG5leHBvcnQgY29uc3QgUEVSU0lTVEVOQ0VfUkVTRVJWRURfUFJPUEVSVElFUyA9IFtcbiAgICBQRU9QTEVfRElTVElOQ1RfSURfS0VZLFxuICAgIEFMSUFTX0lEX0tFWSxcbiAgICBDQU1QQUlHTl9JRFNfS0VZLFxuICAgIEVWRU5UX1RJTUVSU19LRVksXG4gICAgU0VTU0lPTl9SRUNPUkRJTkdfRU5BQkxFRF9TRVJWRVJfU0lERSxcbiAgICBTRVNTSU9OX0lELFxuICAgIEVOQUJMRURfRkVBVFVSRV9GTEFHUyxcbiAgICBVU0VSX1NUQVRFLFxuICAgIFBPU1RIT0dfUVVPVEFfTElNSVRFRCxcbiAgICBQRVJTSVNURU5DRV9FQVJMWV9BQ0NFU1NfRkVBVFVSRVMsXG4gICAgU1RPUkVEX0dST1VQX1BST1BFUlRJRVNfS0VZLFxuICAgIFNUT1JFRF9QRVJTT05fUFJPUEVSVElFU19LRVksXG4gICAgU1VSVkVZUyxcbiAgICBGTEFHX0NBTExfUkVQT1JURUQsXG4gICAgQ0xJRU5UX1NFU1NJT05fUFJPUFMsXG5dXG4iLCAiaW1wb3J0IHsgX2JpbmRfaW5zdGFuY2VfbWV0aG9kcywgX2VhY2gsIF9leHRlbmQsIF9pbmNsdWRlcywgX3JlZ2lzdGVyX2V2ZW50LCBfc2FmZXdyYXBfaW5zdGFuY2VfbWV0aG9kcyB9IGZyb20gJy4vdXRpbHMnXG5pbXBvcnQge1xuICAgIGF1dG9jYXB0dXJlQ29tcGF0aWJsZUVsZW1lbnRzLFxuICAgIGdldENsYXNzTmFtZXMsXG4gICAgZ2V0RGlyZWN0QW5kTmVzdGVkU3BhblRleHQsXG4gICAgZ2V0RWxlbWVudHNDaGFpblN0cmluZyxcbiAgICBnZXRTYWZlVGV4dCxcbiAgICBpc0FuZ3VsYXJTdHlsZUF0dHIsXG4gICAgaXNEb2N1bWVudEZyYWdtZW50LFxuICAgIGlzRWxlbWVudE5vZGUsXG4gICAgaXNTZW5zaXRpdmVFbGVtZW50LFxuICAgIGlzVGFnLFxuICAgIGlzVGV4dE5vZGUsXG4gICAgbWFrZVNhZmVUZXh0LFxuICAgIHNob3VsZENhcHR1cmVEb21FdmVudCxcbiAgICBzaG91bGRDYXB0dXJlRWxlbWVudCxcbiAgICBzaG91bGRDYXB0dXJlVmFsdWUsXG4gICAgc3BsaXRDbGFzc1N0cmluZyxcbn0gZnJvbSAnLi9hdXRvY2FwdHVyZS11dGlscydcbmltcG9ydCBSYWdlQ2xpY2sgZnJvbSAnLi9leHRlbnNpb25zL3JhZ2VjbGljaydcbmltcG9ydCB7IEF1dG9jYXB0dXJlQ29uZmlnLCBBdXRvQ2FwdHVyZUN1c3RvbVByb3BlcnR5LCBEZWNpZGVSZXNwb25zZSwgUHJvcGVydGllcyB9IGZyb20gJy4vdHlwZXMnXG5pbXBvcnQgeyBQb3N0SG9nIH0gZnJvbSAnLi9wb3N0aG9nLWNvcmUnXG5pbXBvcnQgeyBBVVRPQ0FQVFVSRV9ESVNBQkxFRF9TRVJWRVJfU0lERSB9IGZyb20gJy4vY29uc3RhbnRzJ1xuXG5pbXBvcnQgeyBfaXNCb29sZWFuLCBfaXNGdW5jdGlvbiwgX2lzTnVsbCwgX2lzT2JqZWN0LCBfaXNVbmRlZmluZWQgfSBmcm9tICcuL3V0aWxzL3R5cGUtdXRpbHMnXG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tICcuL3V0aWxzL2xvZ2dlcidcbmltcG9ydCB7IGRvY3VtZW50LCB3aW5kb3cgfSBmcm9tICcuL3V0aWxzL2dsb2JhbHMnXG5cbmNvbnN0IENPUFlfQVVUT0NBUFRVUkVfRVZFTlQgPSAnJGNvcHlfYXV0b2NhcHR1cmUnXG5cbmZ1bmN0aW9uIGxpbWl0VGV4dChsZW5ndGg6IG51bWJlciwgdGV4dDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBpZiAodGV4dC5sZW5ndGggPiBsZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIHRleHQuc2xpY2UoMCwgbGVuZ3RoKSArICcuLi4nXG4gICAgfVxuICAgIHJldHVybiB0ZXh0XG59XG5cbmNvbnN0IGF1dG9jYXB0dXJlID0ge1xuICAgIF9pbml0aWFsaXplZFRva2VuczogW10gYXMgc3RyaW5nW10sXG4gICAgX2lzRGlzYWJsZWRTZXJ2ZXJTaWRlOiBudWxsIGFzIGJvb2xlYW4gfCBudWxsLFxuICAgIF9pc0F1dG9jYXB0dXJlRW5hYmxlZDogZmFsc2UgYXMgYm9vbGVhbixcblxuICAgIF9zZXRJc0F1dG9jYXB0dXJlRW5hYmxlZDogZnVuY3Rpb24gKGluc3RhbmNlOiBQb3N0SG9nKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGRpc2FibGVkX3NlcnZlcl9zaWRlID0gX2lzTnVsbCh0aGlzLl9pc0Rpc2FibGVkU2VydmVyU2lkZSlcbiAgICAgICAgICAgID8gISFpbnN0YW5jZS5wZXJzaXN0ZW5jZT8ucHJvcHNbQVVUT0NBUFRVUkVfRElTQUJMRURfU0VSVkVSX1NJREVdXG4gICAgICAgICAgICA6IHRoaXMuX2lzRGlzYWJsZWRTZXJ2ZXJTaWRlXG4gICAgICAgIGNvbnN0IGVuYWJsZWRfY2xpZW50X3NpZGUgPSAhIWluc3RhbmNlLmNvbmZpZy5hdXRvY2FwdHVyZVxuICAgICAgICB0aGlzLl9pc0F1dG9jYXB0dXJlRW5hYmxlZCA9IGVuYWJsZWRfY2xpZW50X3NpZGUgJiYgIWRpc2FibGVkX3NlcnZlcl9zaWRlXG4gICAgfSxcblxuICAgIF9wcmV2aW91c0VsZW1lbnRTaWJsaW5nOiBmdW5jdGlvbiAoZWw6IEVsZW1lbnQpOiBFbGVtZW50IHwgbnVsbCB7XG4gICAgICAgIGlmIChlbC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nKSB7XG4gICAgICAgICAgICByZXR1cm4gZWwucHJldmlvdXNFbGVtZW50U2libGluZ1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGV0IF9lbDogRWxlbWVudCB8IG51bGwgPSBlbFxuICAgICAgICAgICAgZG8ge1xuICAgICAgICAgICAgICAgIF9lbCA9IF9lbC5wcmV2aW91c1NpYmxpbmcgYXMgRWxlbWVudCB8IG51bGwgLy8gcmVzb2x2ZXMgdG8gQ2hpbGROb2RlLT5Ob2RlLCB3aGljaCBpcyBFbGVtZW50J3MgcGFyZW50IGNsYXNzXG4gICAgICAgICAgICB9IHdoaWxlIChfZWwgJiYgIWlzRWxlbWVudE5vZGUoX2VsKSlcbiAgICAgICAgICAgIHJldHVybiBfZWxcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBfZ2V0QXVnbWVudFByb3BlcnRpZXNGcm9tRWxlbWVudDogZnVuY3Rpb24gKGVsZW06IEVsZW1lbnQpOiBQcm9wZXJ0aWVzIHtcbiAgICAgICAgY29uc3Qgc2hvdWxkQ2FwdHVyZUVsID0gc2hvdWxkQ2FwdHVyZUVsZW1lbnQoZWxlbSlcbiAgICAgICAgaWYgKCFzaG91bGRDYXB0dXJlRWwpIHtcbiAgICAgICAgICAgIHJldHVybiB7fVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcHJvcHM6IFByb3BlcnRpZXMgPSB7fVxuXG4gICAgICAgIF9lYWNoKGVsZW0uYXR0cmlidXRlcywgZnVuY3Rpb24gKGF0dHI6IEF0dHIpIHtcbiAgICAgICAgICAgIGlmIChhdHRyLm5hbWUuaW5kZXhPZignZGF0YS1waC1jYXB0dXJlLWF0dHJpYnV0ZScpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcHJvcGVydHlLZXkgPSBhdHRyLm5hbWUucmVwbGFjZSgnZGF0YS1waC1jYXB0dXJlLWF0dHJpYnV0ZS0nLCAnJylcbiAgICAgICAgICAgICAgICBjb25zdCBwcm9wZXJ0eVZhbHVlID0gYXR0ci52YWx1ZVxuICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0eUtleSAmJiBwcm9wZXJ0eVZhbHVlICYmIHNob3VsZENhcHR1cmVWYWx1ZShwcm9wZXJ0eVZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICBwcm9wc1twcm9wZXJ0eUtleV0gPSBwcm9wZXJ0eVZhbHVlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gcHJvcHNcbiAgICB9LFxuXG4gICAgX2dldFByb3BlcnRpZXNGcm9tRWxlbWVudDogZnVuY3Rpb24gKGVsZW06IEVsZW1lbnQsIG1hc2tJbnB1dHM6IGJvb2xlYW4sIG1hc2tUZXh0OiBib29sZWFuKTogUHJvcGVydGllcyB7XG4gICAgICAgIGNvbnN0IHRhZ19uYW1lID0gZWxlbS50YWdOYW1lLnRvTG93ZXJDYXNlKClcbiAgICAgICAgY29uc3QgcHJvcHM6IFByb3BlcnRpZXMgPSB7XG4gICAgICAgICAgICB0YWdfbmFtZTogdGFnX25hbWUsXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGF1dG9jYXB0dXJlQ29tcGF0aWJsZUVsZW1lbnRzLmluZGV4T2YodGFnX25hbWUpID4gLTEgJiYgIW1hc2tUZXh0KSB7XG4gICAgICAgICAgICBpZiAodGFnX25hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ2EnIHx8IHRhZ19uYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdidXR0b24nKSB7XG4gICAgICAgICAgICAgICAgcHJvcHNbJyRlbF90ZXh0J10gPSBsaW1pdFRleHQoMTAyNCwgZ2V0RGlyZWN0QW5kTmVzdGVkU3BhblRleHQoZWxlbSkpXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHByb3BzWyckZWxfdGV4dCddID0gbGltaXRUZXh0KDEwMjQsIGdldFNhZmVUZXh0KGVsZW0pKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY2xhc3NlcyA9IGdldENsYXNzTmFtZXMoZWxlbSlcbiAgICAgICAgaWYgKGNsYXNzZXMubGVuZ3RoID4gMClcbiAgICAgICAgICAgIHByb3BzWydjbGFzc2VzJ10gPSBjbGFzc2VzLmZpbHRlcihmdW5jdGlvbiAoYykge1xuICAgICAgICAgICAgICAgIHJldHVybiBjICE9PSAnJ1xuICAgICAgICAgICAgfSlcblxuICAgICAgICAvLyBjYXB0dXJlIHRoZSBkZW55IGxpc3QgaGVyZSBiZWNhdXNlIHRoaXMgbm90LWEtY2xhc3MgY2xhc3MgbWFrZXMgaXQgdHJpY2t5IHRvIHVzZSB0aGlzLmNvbmZpZyBpbiB0aGUgZnVuY3Rpb24gYmVsb3dcbiAgICAgICAgY29uc3QgZWxlbWVudEF0dHJpYnV0ZUlnbm9yZWxpc3QgPSB0aGlzLmNvbmZpZz8uZWxlbWVudF9hdHRyaWJ1dGVfaWdub3JlbGlzdFxuICAgICAgICBfZWFjaChlbGVtLmF0dHJpYnV0ZXMsIGZ1bmN0aW9uIChhdHRyOiBBdHRyKSB7XG4gICAgICAgICAgICAvLyBPbmx5IGNhcHR1cmUgYXR0cmlidXRlcyB3ZSBrbm93IGFyZSBzYWZlXG4gICAgICAgICAgICBpZiAoaXNTZW5zaXRpdmVFbGVtZW50KGVsZW0pICYmIFsnbmFtZScsICdpZCcsICdjbGFzcyddLmluZGV4T2YoYXR0ci5uYW1lKSA9PT0gLTEpIHJldHVyblxuXG4gICAgICAgICAgICBpZiAoZWxlbWVudEF0dHJpYnV0ZUlnbm9yZWxpc3Q/LmluY2x1ZGVzKGF0dHIubmFtZSkpIHJldHVyblxuXG4gICAgICAgICAgICBpZiAoIW1hc2tJbnB1dHMgJiYgc2hvdWxkQ2FwdHVyZVZhbHVlKGF0dHIudmFsdWUpICYmICFpc0FuZ3VsYXJTdHlsZUF0dHIoYXR0ci5uYW1lKSkge1xuICAgICAgICAgICAgICAgIGxldCB2YWx1ZSA9IGF0dHIudmFsdWVcbiAgICAgICAgICAgICAgICBpZiAoYXR0ci5uYW1lID09PSAnY2xhc3MnKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGh0bWwgYXR0cmlidXRlcyBjYW4gX3RlY2huaWNhbGx5XyBjb250YWluIGxpbmVicmVha3MsXG4gICAgICAgICAgICAgICAgICAgIC8vIGJ1dCB3ZSdyZSB2ZXJ5IGludG9sZXJhbnQgb2YgdGhlbSBpbiB0aGUgY2xhc3Mgc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAvLyBzbyB3ZSBzdHJpcCB0aGVtLlxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHNwbGl0Q2xhc3NTdHJpbmcodmFsdWUpLmpvaW4oJyAnKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwcm9wc1snYXR0cl9fJyArIGF0dHIubmFtZV0gPSBsaW1pdFRleHQoMTAyNCwgdmFsdWUpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG5cbiAgICAgICAgbGV0IG50aENoaWxkID0gMVxuICAgICAgICBsZXQgbnRoT2ZUeXBlID0gMVxuICAgICAgICBsZXQgY3VycmVudEVsZW06IEVsZW1lbnQgfCBudWxsID0gZWxlbVxuICAgICAgICB3aGlsZSAoKGN1cnJlbnRFbGVtID0gdGhpcy5fcHJldmlvdXNFbGVtZW50U2libGluZyhjdXJyZW50RWxlbSkpKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbmQtYXNzaWduXG4gICAgICAgICAgICBudGhDaGlsZCsrXG4gICAgICAgICAgICBpZiAoY3VycmVudEVsZW0udGFnTmFtZSA9PT0gZWxlbS50YWdOYW1lKSB7XG4gICAgICAgICAgICAgICAgbnRoT2ZUeXBlKytcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBwcm9wc1snbnRoX2NoaWxkJ10gPSBudGhDaGlsZFxuICAgICAgICBwcm9wc1snbnRoX29mX3R5cGUnXSA9IG50aE9mVHlwZVxuXG4gICAgICAgIHJldHVybiBwcm9wc1xuICAgIH0sXG5cbiAgICBfZ2V0RGVmYXVsdFByb3BlcnRpZXM6IGZ1bmN0aW9uIChldmVudFR5cGU6IHN0cmluZyk6IFByb3BlcnRpZXMge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgJGV2ZW50X3R5cGU6IGV2ZW50VHlwZSxcbiAgICAgICAgICAgICRjZV92ZXJzaW9uOiAxLFxuICAgICAgICB9XG4gICAgfSxcblxuICAgIF9leHRyYWN0Q3VzdG9tUHJvcGVydHlWYWx1ZTogZnVuY3Rpb24gKGN1c3RvbVByb3BlcnR5OiBBdXRvQ2FwdHVyZUN1c3RvbVByb3BlcnR5KTogc3RyaW5nIHtcbiAgICAgICAgY29uc3QgcHJvcFZhbHVlczogc3RyaW5nW10gPSBbXVxuICAgICAgICBfZWFjaChkb2N1bWVudD8ucXVlcnlTZWxlY3RvckFsbChjdXN0b21Qcm9wZXJ0eVsnY3NzX3NlbGVjdG9yJ10pLCBmdW5jdGlvbiAobWF0Y2hlZEVsZW0pIHtcbiAgICAgICAgICAgIGxldCB2YWx1ZVxuXG4gICAgICAgICAgICBpZiAoWydpbnB1dCcsICdzZWxlY3QnXS5pbmRleE9mKG1hdGNoZWRFbGVtLnRhZ05hbWUudG9Mb3dlckNhc2UoKSkgPiAtMSkge1xuICAgICAgICAgICAgICAgIHZhbHVlID0gbWF0Y2hlZEVsZW1bJ3ZhbHVlJ11cbiAgICAgICAgICAgIH0gZWxzZSBpZiAobWF0Y2hlZEVsZW1bJ3RleHRDb250ZW50J10pIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IG1hdGNoZWRFbGVtWyd0ZXh0Q29udGVudCddXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChzaG91bGRDYXB0dXJlVmFsdWUodmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgcHJvcFZhbHVlcy5wdXNoKHZhbHVlKVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gcHJvcFZhbHVlcy5qb2luKCcsICcpXG4gICAgfSxcblxuICAgIC8vIFRPRE86IGRlbGV0ZSBjdXN0b21fcHJvcGVydGllcyBhZnRlciBjaGFuZ2VsZXNzIHR5cGVzY3JpcHQgcmVmYWN0b3JcbiAgICBfZ2V0Q3VzdG9tUHJvcGVydGllczogZnVuY3Rpb24gKHRhcmdldEVsZW1lbnRMaXN0OiBFbGVtZW50W10pOiBQcm9wZXJ0aWVzIHtcbiAgICAgICAgY29uc3QgcHJvcHM6IFByb3BlcnRpZXMgPSB7fSAvLyB3aWxsIGJlIGRlbGV0ZWRcbiAgICAgICAgX2VhY2godGhpcy5fY3VzdG9tUHJvcGVydGllcywgKGN1c3RvbVByb3BlcnR5KSA9PiB7XG4gICAgICAgICAgICBfZWFjaChjdXN0b21Qcm9wZXJ0eVsnZXZlbnRfc2VsZWN0b3JzJ10sIChldmVudFNlbGVjdG9yKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXZlbnRFbGVtZW50cyA9IGRvY3VtZW50Py5xdWVyeVNlbGVjdG9yQWxsKGV2ZW50U2VsZWN0b3IpXG4gICAgICAgICAgICAgICAgX2VhY2goZXZlbnRFbGVtZW50cywgKGV2ZW50RWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoX2luY2x1ZGVzKHRhcmdldEVsZW1lbnRMaXN0LCBldmVudEVsZW1lbnQpICYmIHNob3VsZENhcHR1cmVFbGVtZW50KGV2ZW50RWxlbWVudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3BzW2N1c3RvbVByb3BlcnR5WyduYW1lJ11dID0gdGhpcy5fZXh0cmFjdEN1c3RvbVByb3BlcnR5VmFsdWUoY3VzdG9tUHJvcGVydHkpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIHByb3BzXG4gICAgfSxcblxuICAgIF9nZXRFdmVudFRhcmdldDogZnVuY3Rpb24gKGU6IEV2ZW50KTogRWxlbWVudCB8IG51bGwge1xuICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvRXZlbnQvdGFyZ2V0I0NvbXBhdGliaWxpdHlfbm90ZXNcbiAgICAgICAgaWYgKF9pc1VuZGVmaW5lZChlLnRhcmdldCkpIHtcbiAgICAgICAgICAgIHJldHVybiAoZS5zcmNFbGVtZW50IGFzIEVsZW1lbnQpIHx8IG51bGxcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmICgoZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQpPy5zaGFkb3dSb290KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChlLmNvbXBvc2VkUGF0aCgpWzBdIGFzIEVsZW1lbnQpIHx8IG51bGxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAoZS50YXJnZXQgYXMgRWxlbWVudCkgfHwgbnVsbFxuICAgICAgICB9XG4gICAgfSxcblxuICAgIF9jYXB0dXJlRXZlbnQ6IGZ1bmN0aW9uIChcbiAgICAgICAgZTogRXZlbnQsXG4gICAgICAgIGluc3RhbmNlOiBQb3N0SG9nLFxuICAgICAgICBldmVudE5hbWUgPSAnJGF1dG9jYXB0dXJlJyxcbiAgICAgICAgZXh0cmFQcm9wcz86IFByb3BlcnRpZXNcbiAgICApOiBib29sZWFuIHwgdm9pZCB7XG4gICAgICAgIC8qKiogRG9uJ3QgbWVzcyB3aXRoIHRoaXMgY29kZSB3aXRob3V0IHJ1bm5pbmcgSUU4IHRlc3RzIG9uIGl0ICoqKi9cbiAgICAgICAgbGV0IHRhcmdldCA9IHRoaXMuX2dldEV2ZW50VGFyZ2V0KGUpXG4gICAgICAgIGlmIChpc1RleHROb2RlKHRhcmdldCkpIHtcbiAgICAgICAgICAgIC8vIGRlZmVhdCBTYWZhcmkgYnVnIChzZWU6IGh0dHA6Ly93d3cucXVpcmtzbW9kZS5vcmcvanMvZXZlbnRzX3Byb3BlcnRpZXMuaHRtbClcbiAgICAgICAgICAgIHRhcmdldCA9ICh0YXJnZXQucGFyZW50Tm9kZSB8fCBudWxsKSBhcyBFbGVtZW50IHwgbnVsbFxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGV2ZW50TmFtZSA9PT0gJyRhdXRvY2FwdHVyZScgJiYgZS50eXBlID09PSAnY2xpY2snICYmIGUgaW5zdGFuY2VvZiBNb3VzZUV2ZW50KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5yYWdlY2xpY2tzPy5pc1JhZ2VDbGljayhlLmNsaWVudFgsIGUuY2xpZW50WSwgbmV3IERhdGUoKS5nZXRUaW1lKCkpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fY2FwdHVyZUV2ZW50KGUsIGluc3RhbmNlLCAnJHJhZ2VjbGljaycpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBpc0NvcHlBdXRvY2FwdHVyZSA9IGV2ZW50TmFtZSA9PT0gQ09QWV9BVVRPQ0FQVFVSRV9FVkVOVFxuICAgICAgICBpZiAoXG4gICAgICAgICAgICB0YXJnZXQgJiZcbiAgICAgICAgICAgIHNob3VsZENhcHR1cmVEb21FdmVudChcbiAgICAgICAgICAgICAgICB0YXJnZXQsXG4gICAgICAgICAgICAgICAgZSxcbiAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZyxcbiAgICAgICAgICAgICAgICAvLyBtb3N0bHkgdGhpcyBtZXRob2QgY2FyZXMgYWJvdXQgdGhlIHRhcmdldCBlbGVtZW50LCBidXQgaW4gdGhlIGNhc2Ugb2YgY29weSBldmVudHMsXG4gICAgICAgICAgICAgICAgLy8gd2Ugd2FudCBzb21lIG9mIHRoZSB3b3JrIHRoaXMgY2hlY2sgZG9lcyB3aXRob3V0IGluc2lzdGluZyBvbiB0aGUgdGFyZ2V0IGVsZW1lbnQncyB0eXBlXG4gICAgICAgICAgICAgICAgaXNDb3B5QXV0b2NhcHR1cmUsXG4gICAgICAgICAgICAgICAgLy8gd2UgYWxzbyBkb24ndCB3YW50IHRvIHJlc3RyaWN0IGNvcHkgY2hlY2tzIHRvIGNsaWNrcyxcbiAgICAgICAgICAgICAgICAvLyBzbyB3ZSBwYXNzIHRoYXQga25vd2xlZGdlIGluIGhlcmUsIHJhdGhlciB0aGFuIGFkZCB0aGUgbG9naWMgaW5zaWRlIHRoZSBjaGVja1xuICAgICAgICAgICAgICAgIGlzQ29weUF1dG9jYXB0dXJlID8gWydjb3B5JywgJ2N1dCddIDogdW5kZWZpbmVkXG4gICAgICAgICAgICApXG4gICAgICAgICkge1xuICAgICAgICAgICAgY29uc3QgdGFyZ2V0RWxlbWVudExpc3QgPSBbdGFyZ2V0XVxuICAgICAgICAgICAgbGV0IGN1ckVsID0gdGFyZ2V0XG4gICAgICAgICAgICB3aGlsZSAoY3VyRWwucGFyZW50Tm9kZSAmJiAhaXNUYWcoY3VyRWwsICdib2R5JykpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNEb2N1bWVudEZyYWdtZW50KGN1ckVsLnBhcmVudE5vZGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldEVsZW1lbnRMaXN0LnB1c2goKGN1ckVsLnBhcmVudE5vZGUgYXMgYW55KS5ob3N0KVxuICAgICAgICAgICAgICAgICAgICBjdXJFbCA9IChjdXJFbC5wYXJlbnROb2RlIGFzIGFueSkuaG9zdFxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0YXJnZXRFbGVtZW50TGlzdC5wdXNoKGN1ckVsLnBhcmVudE5vZGUgYXMgRWxlbWVudClcbiAgICAgICAgICAgICAgICBjdXJFbCA9IGN1ckVsLnBhcmVudE5vZGUgYXMgRWxlbWVudFxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBlbGVtZW50c0pzb246IFByb3BlcnRpZXNbXSA9IFtdXG4gICAgICAgICAgICBjb25zdCBhdXRvY2FwdHVyZUF1Z21lbnRQcm9wZXJ0aWVzOiBQcm9wZXJ0aWVzID0ge31cbiAgICAgICAgICAgIGxldCBocmVmLFxuICAgICAgICAgICAgICAgIGV4cGxpY2l0Tm9DYXB0dXJlID0gZmFsc2VcbiAgICAgICAgICAgIF9lYWNoKHRhcmdldEVsZW1lbnRMaXN0LCAoZWwpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzaG91bGRDYXB0dXJlRWwgPSBzaG91bGRDYXB0dXJlRWxlbWVudChlbClcblxuICAgICAgICAgICAgICAgIC8vIGlmIHRoZSBlbGVtZW50IG9yIGEgcGFyZW50IGVsZW1lbnQgaXMgYW4gYW5jaG9yIHRhZ1xuICAgICAgICAgICAgICAgIC8vIGluY2x1ZGUgdGhlIGhyZWYgYXMgYSBwcm9wZXJ0eVxuICAgICAgICAgICAgICAgIGlmIChlbC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdhJykge1xuICAgICAgICAgICAgICAgICAgICBocmVmID0gZWwuZ2V0QXR0cmlidXRlKCdocmVmJylcbiAgICAgICAgICAgICAgICAgICAgaHJlZiA9IHNob3VsZENhcHR1cmVFbCAmJiBzaG91bGRDYXB0dXJlVmFsdWUoaHJlZikgJiYgaHJlZlxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIGFsbG93IHVzZXJzIHRvIHByb2dyYW1tYXRpY2FsbHkgcHJldmVudCBjYXB0dXJpbmcgb2YgZWxlbWVudHMgYnkgYWRkaW5nIGNsYXNzICdwaC1uby1jYXB0dXJlJ1xuICAgICAgICAgICAgICAgIGNvbnN0IGNsYXNzZXMgPSBnZXRDbGFzc05hbWVzKGVsKVxuICAgICAgICAgICAgICAgIGlmIChfaW5jbHVkZXMoY2xhc3NlcywgJ3BoLW5vLWNhcHR1cmUnKSkge1xuICAgICAgICAgICAgICAgICAgICBleHBsaWNpdE5vQ2FwdHVyZSA9IHRydWVcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBlbGVtZW50c0pzb24ucHVzaChcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZ2V0UHJvcGVydGllc0Zyb21FbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgZWwsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZS5jb25maWcubWFza19hbGxfZWxlbWVudF9hdHRyaWJ1dGVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2UuY29uZmlnLm1hc2tfYWxsX3RleHRcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIClcblxuICAgICAgICAgICAgICAgIGNvbnN0IGF1Z21lbnRQcm9wZXJ0aWVzID0gdGhpcy5fZ2V0QXVnbWVudFByb3BlcnRpZXNGcm9tRWxlbWVudChlbClcbiAgICAgICAgICAgICAgICBfZXh0ZW5kKGF1dG9jYXB0dXJlQXVnbWVudFByb3BlcnRpZXMsIGF1Z21lbnRQcm9wZXJ0aWVzKVxuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgaWYgKCFpbnN0YW5jZS5jb25maWcubWFza19hbGxfdGV4dCkge1xuICAgICAgICAgICAgICAgIC8vIGlmIHRoZSBlbGVtZW50IGlzIGEgYnV0dG9uIG9yIGFuY2hvciB0YWcgZ2V0IHRoZSBzcGFuIHRleHQgZnJvbSBhbnlcbiAgICAgICAgICAgICAgICAvLyBjaGlsZHJlbiBhbmQgaW5jbHVkZSBpdCBhcy93aXRoIHRoZSB0ZXh0IHByb3BlcnR5IG9uIHRoZSBwYXJlbnQgZWxlbWVudFxuICAgICAgICAgICAgICAgIGlmICh0YXJnZXQudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnYScgfHwgdGFyZ2V0LnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ2J1dHRvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudHNKc29uWzBdWyckZWxfdGV4dCddID0gZ2V0RGlyZWN0QW5kTmVzdGVkU3BhblRleHQodGFyZ2V0KVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzSnNvblswXVsnJGVsX3RleHQnXSA9IGdldFNhZmVUZXh0KHRhcmdldClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChocmVmKSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudHNKc29uWzBdWydhdHRyX19ocmVmJ10gPSBocmVmXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChleHBsaWNpdE5vQ2FwdHVyZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBwcm9wcyA9IF9leHRlbmQoXG4gICAgICAgICAgICAgICAgdGhpcy5fZ2V0RGVmYXVsdFByb3BlcnRpZXMoZS50eXBlKSxcbiAgICAgICAgICAgICAgICBpbnN0YW5jZS5lbGVtZW50c0NoYWluQXNTdHJpbmdcbiAgICAgICAgICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICRlbGVtZW50c19jaGFpbjogZ2V0RWxlbWVudHNDaGFpblN0cmluZyhlbGVtZW50c0pzb24pLFxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICRlbGVtZW50czogZWxlbWVudHNKc29uLFxuICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZWxlbWVudHNKc29uWzBdPy5bJyRlbF90ZXh0J10gPyB7ICRlbF90ZXh0OiBlbGVtZW50c0pzb25bMF0/LlsnJGVsX3RleHQnXSB9IDoge30sXG4gICAgICAgICAgICAgICAgdGhpcy5fZ2V0Q3VzdG9tUHJvcGVydGllcyh0YXJnZXRFbGVtZW50TGlzdCksXG4gICAgICAgICAgICAgICAgYXV0b2NhcHR1cmVBdWdtZW50UHJvcGVydGllcyxcbiAgICAgICAgICAgICAgICBleHRyYVByb3BzIHx8IHt9XG4gICAgICAgICAgICApXG5cbiAgICAgICAgICAgIGlmIChldmVudE5hbWUgPT09IENPUFlfQVVUT0NBUFRVUkVfRVZFTlQpIHtcbiAgICAgICAgICAgICAgICAvLyB5b3UgY2FuJ3QgcmVhZCB0aGUgZGF0YSBmcm9tIHRoZSBjbGlwYm9hcmQgZXZlbnQsXG4gICAgICAgICAgICAgICAgLy8gYnV0IHlvdSBjYW4gZ3Vlc3MgdGhhdCB5b3UgY2FuIHJlYWQgaXQgZnJvbSB0aGUgd2luZG93J3MgY3VycmVudCBzZWxlY3Rpb25cbiAgICAgICAgICAgICAgICBjb25zdCBzZWxlY3RlZENvbnRlbnQgPSBtYWtlU2FmZVRleHQod2luZG93Py5nZXRTZWxlY3Rpb24oKT8udG9TdHJpbmcoKSlcbiAgICAgICAgICAgICAgICBjb25zdCBjbGlwVHlwZSA9IChlIGFzIENsaXBib2FyZEV2ZW50KS50eXBlIHx8ICdjbGlwYm9hcmQnXG4gICAgICAgICAgICAgICAgaWYgKCFzZWxlY3RlZENvbnRlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHByb3BzWyckc2VsZWN0ZWRfY29udGVudCddID0gc2VsZWN0ZWRDb250ZW50XG4gICAgICAgICAgICAgICAgcHJvcHNbJyRjb3B5X3R5cGUnXSA9IGNsaXBUeXBlXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGluc3RhbmNlLmNhcHR1cmUoZXZlbnROYW1lLCBwcm9wcylcbiAgICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLy8gb25seSByZWFzb24gaXMgdG8gc3R1YiBmb3IgdW5pdCB0ZXN0c1xuICAgIC8vIHNpbmNlIHlvdSBjYW4ndCBvdmVycmlkZSB3aW5kb3cubG9jYXRpb24gcHJvcHNcbiAgICBfbmF2aWdhdGU6IGZ1bmN0aW9uIChocmVmOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgaWYgKCF3aW5kb3cpIHtcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gaHJlZlxuICAgIH0sXG5cbiAgICBfYWRkRG9tRXZlbnRIYW5kbGVyczogZnVuY3Rpb24gKGluc3RhbmNlOiBQb3N0SG9nKTogdm9pZCB7XG4gICAgICAgIGlmICghd2luZG93IHx8ICFkb2N1bWVudCkge1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaGFuZGxlciA9IChlOiBFdmVudCkgPT4ge1xuICAgICAgICAgICAgZSA9IGUgfHwgd2luZG93Py5ldmVudFxuICAgICAgICAgICAgdGhpcy5fY2FwdHVyZUV2ZW50KGUsIGluc3RhbmNlKVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY29waWVkVGV4dEhhbmRsZXIgPSAoZTogRXZlbnQpID0+IHtcbiAgICAgICAgICAgIGUgPSBlIHx8IHdpbmRvdz8uZXZlbnRcbiAgICAgICAgICAgIHRoaXMuX2NhcHR1cmVFdmVudChlLCBpbnN0YW5jZSwgQ09QWV9BVVRPQ0FQVFVSRV9FVkVOVClcbiAgICAgICAgfVxuXG4gICAgICAgIF9yZWdpc3Rlcl9ldmVudChkb2N1bWVudCwgJ3N1Ym1pdCcsIGhhbmRsZXIsIGZhbHNlLCB0cnVlKVxuICAgICAgICBfcmVnaXN0ZXJfZXZlbnQoZG9jdW1lbnQsICdjaGFuZ2UnLCBoYW5kbGVyLCBmYWxzZSwgdHJ1ZSlcbiAgICAgICAgX3JlZ2lzdGVyX2V2ZW50KGRvY3VtZW50LCAnY2xpY2snLCBoYW5kbGVyLCBmYWxzZSwgdHJ1ZSlcblxuICAgICAgICBpZiAoX2lzT2JqZWN0KGluc3RhbmNlLmNvbmZpZy5hdXRvY2FwdHVyZSkgJiYgaW5zdGFuY2UuY29uZmlnLmF1dG9jYXB0dXJlLmNhcHR1cmVfY29waWVkX3RleHQpIHtcbiAgICAgICAgICAgIF9yZWdpc3Rlcl9ldmVudChkb2N1bWVudCwgJ2NvcHknLCBjb3BpZWRUZXh0SGFuZGxlciwgZmFsc2UsIHRydWUpXG4gICAgICAgICAgICBfcmVnaXN0ZXJfZXZlbnQoZG9jdW1lbnQsICdjdXQnLCBjb3BpZWRUZXh0SGFuZGxlciwgZmFsc2UsIHRydWUpXG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgX2N1c3RvbVByb3BlcnRpZXM6IFtdIGFzIEF1dG9DYXB0dXJlQ3VzdG9tUHJvcGVydHlbXSxcbiAgICByYWdlY2xpY2tzOiBudWxsIGFzIFJhZ2VDbGljayB8IG51bGwsXG4gICAgY29uZmlnOiB1bmRlZmluZWQgYXMgQXV0b2NhcHR1cmVDb25maWcgfCB1bmRlZmluZWQsXG5cbiAgICBpbml0OiBmdW5jdGlvbiAoaW5zdGFuY2U6IFBvc3RIb2cpOiB2b2lkIHtcbiAgICAgICAgaWYgKCFfaXNCb29sZWFuKGluc3RhbmNlLl9fYXV0b2NhcHR1cmUpKSB7XG4gICAgICAgICAgICB0aGlzLmNvbmZpZyA9IGluc3RhbmNlLl9fYXV0b2NhcHR1cmVcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHByZWNvbXBpbGUgdGhlIHJlZ2V4XG4gICAgICAgIGlmICh0aGlzLmNvbmZpZz8udXJsX2FsbG93bGlzdCkge1xuICAgICAgICAgICAgdGhpcy5jb25maWcudXJsX2FsbG93bGlzdCA9IHRoaXMuY29uZmlnLnVybF9hbGxvd2xpc3QubWFwKCh1cmwpID0+IG5ldyBSZWdFeHAodXJsKSlcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucmFnZWNsaWNrcyA9IG5ldyBSYWdlQ2xpY2soaW5zdGFuY2UuY29uZmlnLnJhZ2VjbGljaylcbiAgICB9LFxuXG4gICAgYWZ0ZXJEZWNpZGVSZXNwb25zZTogZnVuY3Rpb24gKHJlc3BvbnNlOiBEZWNpZGVSZXNwb25zZSwgaW5zdGFuY2U6IFBvc3RIb2cpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgdG9rZW4gPSBpbnN0YW5jZS5jb25maWcudG9rZW5cbiAgICAgICAgaWYgKHRoaXMuX2luaXRpYWxpemVkVG9rZW5zLmluZGV4T2YodG9rZW4pID4gLTEpIHtcbiAgICAgICAgICAgIGxvZ2dlci5pbmZvKCdhdXRvY2FwdHVyZSBhbHJlYWR5IGluaXRpYWxpemVkIGZvciB0b2tlbiBcIicgKyB0b2tlbiArICdcIicpXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpbnN0YW5jZS5wZXJzaXN0ZW5jZSkge1xuICAgICAgICAgICAgaW5zdGFuY2UucGVyc2lzdGVuY2UucmVnaXN0ZXIoe1xuICAgICAgICAgICAgICAgIFtBVVRPQ0FQVFVSRV9ESVNBQkxFRF9TRVJWRVJfU0lERV06ICEhcmVzcG9uc2VbJ2F1dG9jYXB0dXJlX29wdF9vdXQnXSxcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgLy8gc3RvcmUgdGhpcyBpbi1tZW1vcnkgaW5jYXNlIHBlcnNpc3RlbmNlIGlzIGRpc2FibGVkXG4gICAgICAgIHRoaXMuX2lzRGlzYWJsZWRTZXJ2ZXJTaWRlID0gISFyZXNwb25zZVsnYXV0b2NhcHR1cmVfb3B0X291dCddXG5cbiAgICAgICAgdGhpcy5fc2V0SXNBdXRvY2FwdHVyZUVuYWJsZWQoaW5zdGFuY2UpXG5cbiAgICAgICAgdGhpcy5faW5pdGlhbGl6ZWRUb2tlbnMucHVzaCh0b2tlbilcblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICByZXNwb25zZSAmJlxuICAgICAgICAgICAgcmVzcG9uc2VbJ2NvbmZpZyddICYmXG4gICAgICAgICAgICByZXNwb25zZVsnY29uZmlnJ11bJ2VuYWJsZV9jb2xsZWN0X2V2ZXJ5dGhpbmcnXSAmJlxuICAgICAgICAgICAgdGhpcy5faXNBdXRvY2FwdHVyZUVuYWJsZWRcbiAgICAgICAgKSB7XG4gICAgICAgICAgICAvLyBUT0RPOiBkZWxldGUgY3VzdG9tX3Byb3BlcnRpZXMgYWZ0ZXIgY2hhbmdlbGVzcyB0eXBlc2NyaXB0IHJlZmFjdG9yXG4gICAgICAgICAgICBpZiAocmVzcG9uc2VbJ2N1c3RvbV9wcm9wZXJ0aWVzJ10pIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9jdXN0b21Qcm9wZXJ0aWVzID0gcmVzcG9uc2VbJ2N1c3RvbV9wcm9wZXJ0aWVzJ11cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX2FkZERvbUV2ZW50SGFuZGxlcnMoaW5zdGFuY2UpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpbnN0YW5jZVsnX19hdXRvY2FwdHVyZSddID0gZmFsc2VcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICAvLyB0aGlzIGlzIGEgbWVjaGFuaXNtIHRvIHJhbXAgdXAgQ0Ugd2l0aCBubyBzZXJ2ZXItc2lkZSBpbnRlcmFjdGlvbi5cbiAgICAvLyB3aGVuIENFIGlzIGFjdGl2ZSwgZXZlcnkgcGFnZSBsb2FkIHJlc3VsdHMgaW4gYSBkZWNpZGUgcmVxdWVzdC4gd2VcbiAgICAvLyBuZWVkIHRvIGdlbnRseSByYW1wIHRoaXMgdXAsIHNvIHdlIGRvbid0IG92ZXJsb2FkIGRlY2lkZS4gdGhpcyBkZWNpZGVzXG4gICAgLy8gZGV0ZXJtaW5pc3RpY2FsbHkgaWYgQ0UgaXMgZW5hYmxlZCBmb3IgdGhpcyBwcm9qZWN0IGJ5IG1vZGRpbmcgdGhlIGNoYXJcbiAgICAvLyB2YWx1ZSBvZiB0aGUgcHJvamVjdCB0b2tlbi5cbiAgICBlbmFibGVkRm9yUHJvamVjdDogZnVuY3Rpb24gKFxuICAgICAgICB0b2tlbjogc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZCxcbiAgICAgICAgbnVtQnVja2V0czogbnVtYmVyLFxuICAgICAgICBudW1FbmFibGVkQnVja2V0czogbnVtYmVyXG4gICAgKTogYm9vbGVhbiB7XG4gICAgICAgIGlmICghdG9rZW4pIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgbnVtQnVja2V0cyA9ICFfaXNVbmRlZmluZWQobnVtQnVja2V0cykgPyBudW1CdWNrZXRzIDogMTBcbiAgICAgICAgbnVtRW5hYmxlZEJ1Y2tldHMgPSAhX2lzVW5kZWZpbmVkKG51bUVuYWJsZWRCdWNrZXRzKSA/IG51bUVuYWJsZWRCdWNrZXRzIDogMTBcbiAgICAgICAgbGV0IGNoYXJDb2RlU3VtID0gMFxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRva2VuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjaGFyQ29kZVN1bSArPSB0b2tlbi5jaGFyQ29kZUF0KGkpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNoYXJDb2RlU3VtICUgbnVtQnVja2V0cyA8IG51bUVuYWJsZWRCdWNrZXRzXG4gICAgfSxcblxuICAgIGlzQnJvd3NlclN1cHBvcnRlZDogZnVuY3Rpb24gKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gX2lzRnVuY3Rpb24oZG9jdW1lbnQ/LnF1ZXJ5U2VsZWN0b3JBbGwpXG4gICAgfSxcbn1cblxuX2JpbmRfaW5zdGFuY2VfbWV0aG9kcyhhdXRvY2FwdHVyZSlcbl9zYWZld3JhcF9pbnN0YW5jZV9tZXRob2RzKGF1dG9jYXB0dXJlKVxuXG5leHBvcnQgeyBhdXRvY2FwdHVyZSB9XG4iLCAiaW1wb3J0IHR5cGUgeyBNYXNrSW5wdXRPcHRpb25zLCBTbGltRE9NT3B0aW9ucyB9IGZyb20gJ3Jyd2ViLXNuYXBzaG90J1xuaW1wb3J0IHsgUG9zdEhvZyB9IGZyb20gJy4vcG9zdGhvZy1jb3JlJ1xuXG5leHBvcnQgdHlwZSBQcm9wZXJ0eSA9IGFueVxuZXhwb3J0IHR5cGUgUHJvcGVydGllcyA9IFJlY29yZDxzdHJpbmcsIFByb3BlcnR5PlxuXG5leHBvcnQgaW50ZXJmYWNlIENhcHR1cmVSZXN1bHQge1xuICAgIHV1aWQ6IHN0cmluZ1xuICAgIGV2ZW50OiBzdHJpbmdcbiAgICBwcm9wZXJ0aWVzOiBQcm9wZXJ0aWVzXG4gICAgJHNldD86IFByb3BlcnRpZXNcbiAgICAkc2V0X29uY2U/OiBQcm9wZXJ0aWVzXG4gICAgdGltZXN0YW1wPzogRGF0ZVxufVxuXG5leHBvcnQgdHlwZSBBdXRvY2FwdHVyZUNvbXBhdGlibGVFbGVtZW50ID0gJ2EnIHwgJ2J1dHRvbicgfCAnZm9ybScgfCAnaW5wdXQnIHwgJ3NlbGVjdCcgfCAndGV4dGFyZWEnIHwgJ2xhYmVsJ1xuZXhwb3J0IHR5cGUgRG9tQXV0b2NhcHR1cmVFdmVudHMgPSAnY2xpY2snIHwgJ2NoYW5nZScgfCAnc3VibWl0J1xuXG4vKipcbiAqIElmIGFuIGFycmF5IGlzIHBhc3NlZCBmb3IgYW4gYWxsb3dsaXN0LCBhdXRvY2FwdHVyZSBldmVudHMgd2lsbCBvbmx5IGJlIHNlbnQgZm9yIGVsZW1lbnRzIG1hdGNoaW5nXG4gKiBhdCBsZWFzdCBvbmUgb2YgdGhlIGVsZW1lbnRzIGluIHRoZSBhcnJheS4gTXVsdGlwbGUgYWxsb3dsaXN0cyBjYW4gYmUgdXNlZFxuICovXG5leHBvcnQgaW50ZXJmYWNlIEF1dG9jYXB0dXJlQ29uZmlnIHtcbiAgICAvKipcbiAgICAgKiBMaXN0IG9mIFVSTHMgdG8gYWxsb3cgYXV0b2NhcHR1cmUgb24sIGNhbiBiZSBzdHJpbmdzIHRvIG1hdGNoXG4gICAgICogb3IgcmVnZXhlcyBlLmcuIFsnaHR0cHM6Ly9leGFtcGxlLmNvbScsICd0ZXN0LmNvbS8uKiddXG4gICAgICovXG4gICAgdXJsX2FsbG93bGlzdD86IChzdHJpbmcgfCBSZWdFeHApW11cblxuICAgIC8qKlxuICAgICAqIExpc3Qgb2YgRE9NIGV2ZW50cyB0byBhbGxvdyBhdXRvY2FwdHVyZSBvbiAgZS5nLiBbJ2NsaWNrJywgJ2NoYW5nZScsICdzdWJtaXQnXVxuICAgICAqL1xuICAgIGRvbV9ldmVudF9hbGxvd2xpc3Q/OiBEb21BdXRvY2FwdHVyZUV2ZW50c1tdXG5cbiAgICAvKipcbiAgICAgKiBMaXN0IG9mIERPTSBlbGVtZW50cyB0byBhbGxvdyBhdXRvY2FwdHVyZSBvblxuICAgICAqIGUuZy4gWydhJywgJ2J1dHRvbicsICdmb3JtJywgJ2lucHV0JywgJ3NlbGVjdCcsICd0ZXh0YXJlYScsICdsYWJlbCddXG4gICAgICogd2UgY29uc2lkZXIgdGhlIHRyZWUgb2YgZWxlbWVudHMgZnJvbSB0aGUgcm9vdCB0byB0aGUgdGFyZ2V0IGVsZW1lbnQgb2YgdGhlIGNsaWNrIGV2ZW50XG4gICAgICogc28gZm9yIHRoZSB0cmVlIGRpdiA+IGRpdiA+IGJ1dHRvbiA+IHN2Z1xuICAgICAqIGlmIHRoZSBhbGxvd2xpc3QgaGFzIGJ1dHRvbiB0aGVuIHdlIGFsbG93IHRoZSBjYXB0dXJlIHdoZW4gdGhlIGJ1dHRvbiBvciB0aGUgc3ZnIGlzIHRoZSBjbGljayB0YXJnZXRcbiAgICAgKiBidXQgbm90IGlmIGVpdGhlciBvZiB0aGUgZGl2cyBhcmUgZGV0ZWN0ZWQgYXMgdGhlIGNsaWNrIHRhcmdldFxuICAgICAqL1xuICAgIGVsZW1lbnRfYWxsb3dsaXN0PzogQXV0b2NhcHR1cmVDb21wYXRpYmxlRWxlbWVudFtdXG5cbiAgICAvKipcbiAgICAgKiBMaXN0IG9mIENTUyBzZWxlY3RvcnMgdG8gYWxsb3cgYXV0b2NhcHR1cmUgb25cbiAgICAgKiBlLmcuIFsnW3BoLWNhcHR1cmVdJ11cbiAgICAgKiB3ZSBjb25zaWRlciB0aGUgdHJlZSBvZiBlbGVtZW50cyBmcm9tIHRoZSByb290IHRvIHRoZSB0YXJnZXQgZWxlbWVudCBvZiB0aGUgY2xpY2sgZXZlbnRcbiAgICAgKiBzbyBmb3IgdGhlIHRyZWUgZGl2ID4gZGl2ID4gYnV0dG9uID4gc3ZnXG4gICAgICogYW5kIGFsbG93IGxpc3QgY29uZmlnIGBbJ1tpZF0nXWBcbiAgICAgKiB3ZSB3aWxsIGNhcHR1cmUgdGhlIGNsaWNrIGlmIHRoZSBjbGljay10YXJnZXQgb3IgaXRzIHBhcmVudHMgaGFzIGFueSBpZFxuICAgICAqL1xuICAgIGNzc19zZWxlY3Rvcl9hbGxvd2xpc3Q/OiBzdHJpbmdbXVxuXG4gICAgLyoqXG4gICAgICogRXhjbHVkZSBjZXJ0YWluIGVsZW1lbnQgYXR0cmlidXRlcyBmcm9tIGF1dG9jYXB0dXJlXG4gICAgICogRS5nLiBbJ2FyaWEtbGFiZWwnXSBvciBbZGF0YS1hdHRyLXBpaV1cbiAgICAgKi9cbiAgICBlbGVtZW50X2F0dHJpYnV0ZV9pZ25vcmVsaXN0Pzogc3RyaW5nW11cblxuICAgIGNhcHR1cmVfY29waWVkX3RleHQ/OiBib29sZWFuXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUG9zdEhvZ0NvbmZpZyB7XG4gICAgYXBpX2hvc3Q6IHN0cmluZ1xuICAgIC8qKiBAZGVwcmVjYXRlZCAtIFRoaXMgcHJvcGVydHkgaXMgbm8gbG9uZ2VyIHN1cHBvcnRlZCAqL1xuICAgIGFwaV9tZXRob2Q/OiBzdHJpbmdcbiAgICBhcGlfdHJhbnNwb3J0PzogJ1hIUicgfCAnZmV0Y2gnXG4gICAgdWlfaG9zdDogc3RyaW5nIHwgbnVsbFxuICAgIHRva2VuOiBzdHJpbmdcbiAgICBhdXRvY2FwdHVyZTogYm9vbGVhbiB8IEF1dG9jYXB0dXJlQ29uZmlnXG4gICAgcmFnZWNsaWNrOiBib29sZWFuXG4gICAgY3Jvc3Nfc3ViZG9tYWluX2Nvb2tpZTogYm9vbGVhblxuICAgIHBlcnNpc3RlbmNlOiAnbG9jYWxTdG9yYWdlJyB8ICdjb29raWUnIHwgJ21lbW9yeScgfCAnbG9jYWxTdG9yYWdlK2Nvb2tpZScgfCAnc2Vzc2lvblN0b3JhZ2UnXG4gICAgcGVyc2lzdGVuY2VfbmFtZTogc3RyaW5nXG4gICAgY29va2llX25hbWU6IHN0cmluZ1xuICAgIGxvYWRlZDogKHBvc3Rob2dfaW5zdGFuY2U6IFBvc3RIb2cpID0+IHZvaWRcbiAgICBzdG9yZV9nb29nbGU6IGJvb2xlYW5cbiAgICBjdXN0b21fY2FtcGFpZ25fcGFyYW1zOiBzdHJpbmdbXVxuICAgIC8vIGEgbGlzdCBvZiBzdHJpbmdzIHRvIGJlIHRlc3RlZCBhZ2FpbnN0IG5hdmlnYXRvci51c2VyQWdlbnQgdG8gZGV0ZXJtaW5lIGlmIHRoZSBzb3VyY2UgaXMgYSBib3RcbiAgICAvLyB0aGlzIGlzICoqYWRkZWQgdG8qKiB0aGUgZGVmYXVsdCBsaXN0IG9mIGJvdHMgdGhhdCB3ZSBjaGVja1xuICAgIC8vIGRlZmF1bHRzIHRvIHRoZSBlbXB0eSBhcnJheVxuICAgIGN1c3RvbV9ibG9ja2VkX3VzZXJhZ2VudHM6IHN0cmluZ1tdXG4gICAgc2F2ZV9yZWZlcnJlcjogYm9vbGVhblxuICAgIHZlcmJvc2U6IGJvb2xlYW5cbiAgICBjYXB0dXJlX3BhZ2V2aWV3OiBib29sZWFuXG4gICAgY2FwdHVyZV9wYWdlbGVhdmU6IGJvb2xlYW5cbiAgICBkZWJ1ZzogYm9vbGVhblxuICAgIGNvb2tpZV9leHBpcmF0aW9uOiBudW1iZXJcbiAgICB1cGdyYWRlOiBib29sZWFuXG4gICAgZGlzYWJsZV9zZXNzaW9uX3JlY29yZGluZzogYm9vbGVhblxuICAgIGRpc2FibGVfcGVyc2lzdGVuY2U6IGJvb2xlYW5cbiAgICAvKiogQGRlcHJlY2F0ZWQgLSB1c2UgYGRpc2FibGVfcGVyc2lzdGVuY2VgIGluc3RlYWQgICovXG4gICAgZGlzYWJsZV9jb29raWU6IGJvb2xlYW5cbiAgICBlbmFibGVfcmVjb3JkaW5nX2NvbnNvbGVfbG9nPzogYm9vbGVhblxuICAgIHNlY3VyZV9jb29raWU6IGJvb2xlYW5cbiAgICBpcDogYm9vbGVhblxuICAgIG9wdF9vdXRfY2FwdHVyaW5nX2J5X2RlZmF1bHQ6IGJvb2xlYW5cbiAgICBvcHRfb3V0X3BlcnNpc3RlbmNlX2J5X2RlZmF1bHQ6IGJvb2xlYW5cbiAgICAvKiogT3B0IG91dCBvZiB1c2VyIGFnZW50IGZpbHRlcmluZyBzdWNoIGFzIGdvb2dsZWJvdCBvciBvdGhlciBib3RzLiBEZWZhdWx0cyB0byBgZmFsc2VgICovXG4gICAgb3B0X291dF91c2VyYWdlbnRfZmlsdGVyOiBib29sZWFuXG4gICAgb3B0X291dF9jYXB0dXJpbmdfcGVyc2lzdGVuY2VfdHlwZTogJ2xvY2FsU3RvcmFnZScgfCAnY29va2llJ1xuICAgIG9wdF9vdXRfY2FwdHVyaW5nX2Nvb2tpZV9wcmVmaXg6IHN0cmluZyB8IG51bGxcbiAgICBvcHRfaW5fc2l0ZV9hcHBzOiBib29sZWFuXG4gICAgcmVzcGVjdF9kbnQ6IGJvb2xlYW5cbiAgICAvKiogQGRlcHJlY2F0ZWQgLSB1c2UgYHByb3BlcnR5X2RlbnlsaXN0YCBpbnN0ZWFkICAqL1xuICAgIHByb3BlcnR5X2JsYWNrbGlzdDogc3RyaW5nW11cbiAgICBwcm9wZXJ0eV9kZW55bGlzdDogc3RyaW5nW11cbiAgICByZXF1ZXN0X2hlYWRlcnM6IHsgW2hlYWRlcl9uYW1lOiBzdHJpbmddOiBzdHJpbmcgfVxuICAgIG9uX3JlcXVlc3RfZXJyb3I/OiAoZXJyb3I6IFJlcXVlc3RSZXNwb25zZSkgPT4gdm9pZFxuICAgIC8qKiBAZGVwcmVjYXRlZCAtIHVzZSBgcmVxdWVzdF9oZWFkZXJzYCBpbnN0ZWFkICAqL1xuICAgIHhocl9oZWFkZXJzPzogeyBbaGVhZGVyX25hbWU6IHN0cmluZ106IHN0cmluZyB9XG4gICAgLyoqIEBkZXByZWNhdGVkIC0gdXNlIGBvbl9yZXF1ZXN0X2Vycm9yYCBpbnN0ZWFkICAqL1xuICAgIG9uX3hocl9lcnJvcj86IChmYWlsZWRSZXF1ZXN0OiBYTUxIdHRwUmVxdWVzdCkgPT4gdm9pZFxuICAgIGluYXBwX3Byb3RvY29sOiBzdHJpbmdcbiAgICBpbmFwcF9saW5rX25ld193aW5kb3c6IGJvb2xlYW5cbiAgICByZXF1ZXN0X2JhdGNoaW5nOiBib29sZWFuXG4gICAgc2FuaXRpemVfcHJvcGVydGllczogKChwcm9wZXJ0aWVzOiBQcm9wZXJ0aWVzLCBldmVudF9uYW1lOiBzdHJpbmcpID0+IFByb3BlcnRpZXMpIHwgbnVsbFxuICAgIHByb3BlcnRpZXNfc3RyaW5nX21heF9sZW5ndGg6IG51bWJlclxuICAgIHNlc3Npb25fcmVjb3JkaW5nOiBTZXNzaW9uUmVjb3JkaW5nT3B0aW9uc1xuICAgIHNlc3Npb25faWRsZV90aW1lb3V0X3NlY29uZHM6IG51bWJlclxuICAgIG1hc2tfYWxsX2VsZW1lbnRfYXR0cmlidXRlczogYm9vbGVhblxuICAgIG1hc2tfYWxsX3RleHQ6IGJvb2xlYW5cbiAgICBhZHZhbmNlZF9kaXNhYmxlX2RlY2lkZTogYm9vbGVhblxuICAgIGFkdmFuY2VkX2Rpc2FibGVfZmVhdHVyZV9mbGFnczogYm9vbGVhblxuICAgIGFkdmFuY2VkX2Rpc2FibGVfZmVhdHVyZV9mbGFnc19vbl9maXJzdF9sb2FkOiBib29sZWFuXG4gICAgYWR2YW5jZWRfZGlzYWJsZV90b29sYmFyX21ldHJpY3M6IGJvb2xlYW5cbiAgICBmZWF0dXJlX2ZsYWdfcmVxdWVzdF90aW1lb3V0X21zOiBudW1iZXJcbiAgICBnZXRfZGV2aWNlX2lkOiAodXVpZDogc3RyaW5nKSA9PiBzdHJpbmdcbiAgICBuYW1lOiBzdHJpbmdcbiAgICBfb25DYXB0dXJlOiAoZXZlbnROYW1lOiBzdHJpbmcsIGV2ZW50RGF0YTogQ2FwdHVyZVJlc3VsdCkgPT4gdm9pZFxuICAgIGNhcHR1cmVfcGVyZm9ybWFuY2U/OiBib29sZWFuXG4gICAgLy8gU2hvdWxkIG9ubHkgYmUgdXNlZCBmb3IgdGVzdGluZy4gQ291bGQgbmVnYXRpdmVseSBpbXBhY3QgcGVyZm9ybWFuY2UuXG4gICAgZGlzYWJsZV9jb21wcmVzc2lvbjogYm9vbGVhblxuICAgIGJvb3RzdHJhcDoge1xuICAgICAgICBkaXN0aW5jdElEPzogc3RyaW5nXG4gICAgICAgIGlzSWRlbnRpZmllZElEPzogYm9vbGVhblxuICAgICAgICBmZWF0dXJlRmxhZ3M/OiBSZWNvcmQ8c3RyaW5nLCBib29sZWFuIHwgc3RyaW5nPlxuICAgICAgICBmZWF0dXJlRmxhZ1BheWxvYWRzPzogUmVjb3JkPHN0cmluZywgSnNvblR5cGU+XG4gICAgfVxuICAgIHNlZ21lbnQ/OiBhbnlcbiAgICBfX3ByZXZpZXdfc2VuZF9jbGllbnRfc2Vzc2lvbl9wYXJhbXM/OiBib29sZWFuXG4gICAgZGlzYWJsZV9zY3JvbGxfcHJvcGVydGllcz86IGJvb2xlYW5cbiAgICAvLyBMZXQgdGhlIHBhZ2V2aWV3IHNjcm9sbCBzdGF0cyB1c2UgYSBjdXN0b20gY3NzIHNlbGVjdG9yIGZvciB0aGUgcm9vdCBlbGVtZW50LCBlLmcuIGBtYWluYFxuICAgIHNjcm9sbF9yb290X3NlbGVjdG9yPzogc3RyaW5nIHwgc3RyaW5nW11cbn1cblxuZXhwb3J0IGludGVyZmFjZSBPcHRJbk91dENhcHR1cmluZ09wdGlvbnMge1xuICAgIGNhcHR1cmU6IChldmVudDogc3RyaW5nLCBwcm9wZXJ0aWVzOiBQcm9wZXJ0aWVzLCBvcHRpb25zOiBDYXB0dXJlT3B0aW9ucykgPT4gdm9pZFxuICAgIGNhcHR1cmVfZXZlbnRfbmFtZTogc3RyaW5nXG4gICAgY2FwdHVyZV9wcm9wZXJ0aWVzOiBQcm9wZXJ0aWVzXG4gICAgZW5hYmxlX3BlcnNpc3RlbmNlOiBib29sZWFuXG4gICAgY2xlYXJfcGVyc2lzdGVuY2U6IGJvb2xlYW5cbiAgICBwZXJzaXN0ZW5jZV90eXBlOiAnY29va2llJyB8ICdsb2NhbFN0b3JhZ2UnIHwgJ2xvY2FsU3RvcmFnZStjb29raWUnXG4gICAgY29va2llX3ByZWZpeDogc3RyaW5nXG4gICAgY29va2llX2V4cGlyYXRpb246IG51bWJlclxuICAgIGNyb3NzX3N1YmRvbWFpbl9jb29raWU6IGJvb2xlYW5cbiAgICBzZWN1cmVfY29va2llOiBib29sZWFuXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSXNGZWF0dXJlRW5hYmxlZE9wdGlvbnMge1xuICAgIHNlbmRfZXZlbnQ6IGJvb2xlYW5cbn1cblxuZXhwb3J0IGludGVyZmFjZSBTZXNzaW9uUmVjb3JkaW5nT3B0aW9ucyB7XG4gICAgYmxvY2tDbGFzcz86IHN0cmluZyB8IFJlZ0V4cFxuICAgIGJsb2NrU2VsZWN0b3I/OiBzdHJpbmcgfCBudWxsXG4gICAgaWdub3JlQ2xhc3M/OiBzdHJpbmdcbiAgICBtYXNrVGV4dENsYXNzPzogc3RyaW5nIHwgUmVnRXhwXG4gICAgbWFza1RleHRTZWxlY3Rvcj86IHN0cmluZyB8IG51bGxcbiAgICBtYXNrVGV4dEZuPzogKCh0ZXh0OiBzdHJpbmcpID0+IHN0cmluZykgfCBudWxsXG4gICAgbWFza0FsbElucHV0cz86IGJvb2xlYW5cbiAgICBtYXNrSW5wdXRPcHRpb25zPzogTWFza0lucHV0T3B0aW9uc1xuICAgIG1hc2tJbnB1dEZuPzogKCh0ZXh0OiBzdHJpbmcsIGVsZW1lbnQ/OiBIVE1MRWxlbWVudCkgPT4gc3RyaW5nKSB8IG51bGxcbiAgICBzbGltRE9NT3B0aW9ucz86IFNsaW1ET01PcHRpb25zIHwgJ2FsbCcgfCB0cnVlXG4gICAgY29sbGVjdEZvbnRzPzogYm9vbGVhblxuICAgIGlubGluZVN0eWxlc2hlZXQ/OiBib29sZWFuXG4gICAgcmVjb3JkZXJWZXJzaW9uPzogJ3YxJyB8ICd2MidcbiAgICByZWNvcmRDcm9zc09yaWdpbklmcmFtZXM/OiBib29sZWFuXG4gICAgLyoqIEBkZXByZWNhdGVkIC0gdXNlIG1hc2tDYXB0dXJlZE5ldHdvcmtSZXF1ZXN0Rm4gaW5zdGVhZCAgKi9cbiAgICBtYXNrTmV0d29ya1JlcXVlc3RGbj86ICgoZGF0YTogTmV0d29ya1JlcXVlc3QpID0+IE5ldHdvcmtSZXF1ZXN0IHwgbnVsbCB8IHVuZGVmaW5lZCkgfCBudWxsXG4gICAgLyoqIE1vZGlmeSB0aGUgbmV0d29yayByZXF1ZXN0IGJlZm9yZSBpdCBpcyBjYXB0dXJlZC4gUmV0dXJuaW5nIG51bGwgb3IgdW5kZWZpbmVkIHN0b3BzIGl0IGJlaW5nIGNhcHR1cmVkICovXG4gICAgbWFza0NhcHR1cmVkTmV0d29ya1JlcXVlc3RGbj86ICgoZGF0YTogQ2FwdHVyZWROZXR3b3JrUmVxdWVzdCkgPT4gQ2FwdHVyZWROZXR3b3JrUmVxdWVzdCB8IG51bGwgfCB1bmRlZmluZWQpIHwgbnVsbFxuICAgIC8vIG91ciBzZXR0aW5ncyBoZXJlIG9ubHkgc3VwcG9ydCBhIHN1YnNldCBvZiB0aG9zZSBwcm9wb3NlZCBmb3IgcnJ3ZWIncyBuZXR3b3JrIGNhcHR1cmUgcGx1Z2luXG4gICAgcmVjb3JkSGVhZGVycz86IGJvb2xlYW5cbiAgICByZWNvcmRCb2R5PzogYm9vbGVhblxufVxuXG5leHBvcnQgdHlwZSBTZXNzaW9uSWRDaGFuZ2VkQ2FsbGJhY2sgPSAoc2Vzc2lvbklkOiBzdHJpbmcsIHdpbmRvd0lkOiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkKSA9PiB2b2lkXG5cbmV4cG9ydCBlbnVtIENvbXByZXNzaW9uIHtcbiAgICBHWmlwSlMgPSAnZ3ppcC1qcycsXG4gICAgQmFzZTY0ID0gJ2Jhc2U2NCcsXG59XG5cbi8vIFJlcXVlc3QgdHlwZXMgLSB0aGVzZSBzaG91bGQgYmUga2VwdCBtaW5pbWFsIHRvIHdoYXQgcmVxdWVzdC50cyBuZWVkc1xuXG4vLyBNaW5pbWFsIGNsYXNzIHRvIGFsbG93IGludGVyb3AgYmV0d2VlbiBkaWZmZXJlbnQgcmVxdWVzdCBtZXRob2RzICh4aHIgLyBmZXRjaClcbmV4cG9ydCBpbnRlcmZhY2UgUmVxdWVzdFJlc3BvbnNlIHtcbiAgICBzdGF0dXNDb2RlOiBudW1iZXJcbiAgICB0ZXh0Pzogc3RyaW5nXG4gICAganNvbj86IGFueVxufVxuXG5leHBvcnQgdHlwZSBSZXF1ZXN0Q2FsbGJhY2sgPSAocmVzcG9uc2U6IFJlcXVlc3RSZXNwb25zZSkgPT4gdm9pZFxuXG5leHBvcnQgaW50ZXJmYWNlIFJlcXVlc3RPcHRpb25zIHtcbiAgICB1cmw6IHN0cmluZ1xuICAgIC8vIERhdGEgY2FuIGJlIGEgc2luZ2xlIG9iamVjdCBvciBhbiBhcnJheSBvZiBvYmplY3RzIHdoZW4gYmF0Y2hlZFxuICAgIGRhdGE/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+IHwgUmVjb3JkPHN0cmluZywgYW55PltdXG4gICAgaGVhZGVycz86IFJlY29yZDxzdHJpbmcsIGFueT5cbiAgICB0cmFuc3BvcnQ/OiAnWEhSJyB8ICdmZXRjaCcgfCAnc2VuZEJlYWNvbidcbiAgICBtZXRob2Q/OiAnUE9TVCcgfCAnR0VUJ1xuICAgIHVybFF1ZXJ5QXJncz86IHsgY29tcHJlc3Npb246IENvbXByZXNzaW9uIH1cbiAgICBjYWxsYmFjaz86IFJlcXVlc3RDYWxsYmFja1xuICAgIHRpbWVvdXQ/OiBudW1iZXJcbiAgICBub1JldHJpZXM/OiBib29sZWFuXG4gICAgY29tcHJlc3Npb24/OiBDb21wcmVzc2lvbiB8ICdiZXN0LWF2YWlsYWJsZSdcbn1cblxuLy8gUXVldWVkIHJlcXVlc3QgdHlwZXMgLSB0aGUgc2FtZSBhcyBhIHJlcXVlc3QgYnV0IHdpdGggYWRkaXRpb25hbCBxdWV1ZWluZyBpbmZvcm1hdGlvblxuXG5leHBvcnQgaW50ZXJmYWNlIFF1ZXVlZFJlcXVlc3RPcHRpb25zIGV4dGVuZHMgUmVxdWVzdE9wdGlvbnMge1xuICAgIGJhdGNoS2V5Pzogc3RyaW5nIC8qKiBrZXkgb2YgcXVldWUsIGUuZy4gJ3Nlc3Npb25SZWNvcmRpbmcnIHZzICdldmVudCcgKi9cbn1cblxuLy8gVXNlZCBleHBsaWNpdGx5IGZvciByZXRyaWFibGUgcmVxdWVzdHNcbmV4cG9ydCBpbnRlcmZhY2UgUmV0cmlhYmxlUmVxdWVzdE9wdGlvbnMgZXh0ZW5kcyBRdWV1ZWRSZXF1ZXN0T3B0aW9ucyB7XG4gICAgcmV0cmllc1BlcmZvcm1lZFNvRmFyPzogbnVtYmVyXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2FwdHVyZU9wdGlvbnMge1xuICAgICRzZXQ/OiBQcm9wZXJ0aWVzIC8qKiB1c2VkIHdpdGggJGlkZW50aWZ5ICovXG4gICAgJHNldF9vbmNlPzogUHJvcGVydGllcyAvKiogdXNlZCB3aXRoICRpZGVudGlmeSAqL1xuICAgIF91cmw/OiBzdHJpbmcgLyoqIFVzZWQgdG8gb3ZlcnJpZGUgdGhlIGRlc2lyZWQgZW5kcG9pbnQgZm9yIHRoZSBjYXB0dXJlZCBldmVudCAqL1xuICAgIF9iYXRjaEtleT86IHN0cmluZyAvKioga2V5IG9mIHF1ZXVlLCBlLmcuICdzZXNzaW9uUmVjb3JkaW5nJyB2cyAnZXZlbnQnICovXG4gICAgX25vVHJ1bmNhdGU/OiBib29sZWFuIC8qKiBpZiBzZXQsIG92ZXJyaWRlcyBhbmQgZGlzYWJsZXMgY29uZmlnLnByb3BlcnRpZXNfc3RyaW5nX21heF9sZW5ndGggKi9cbiAgICBzZW5kX2luc3RhbnRseT86IGJvb2xlYW4gLyoqIGlmIHNldCBza2lwcyB0aGUgYmF0Y2hlZCBxdWV1ZSAqL1xuICAgIHRyYW5zcG9ydD86IFJlcXVlc3RPcHRpb25zWyd0cmFuc3BvcnQnXSAvKiogaWYgc2V0LCBvdmVycmlkZXMgdGhlIGRlc2lyZWQgdHJhbnNwb3J0IG1ldGhvZCAqL1xuICAgIHRpbWVzdGFtcD86IERhdGVcbn1cblxuZXhwb3J0IHR5cGUgRmxhZ1ZhcmlhbnQgPSB7IGZsYWc6IHN0cmluZzsgdmFyaWFudDogc3RyaW5nIH1cblxuZXhwb3J0IGludGVyZmFjZSBEZWNpZGVSZXNwb25zZSB7XG4gICAgc3VwcG9ydGVkQ29tcHJlc3Npb246IENvbXByZXNzaW9uW11cbiAgICBjb25maWc6IHtcbiAgICAgICAgZW5hYmxlX2NvbGxlY3RfZXZlcnl0aGluZzogYm9vbGVhblxuICAgIH1cbiAgICBjdXN0b21fcHJvcGVydGllczogQXV0b0NhcHR1cmVDdXN0b21Qcm9wZXJ0eVtdIC8vIFRPRE86IGRlbGV0ZSwgbm90IHNlbnRcbiAgICBmZWF0dXJlRmxhZ3M6IFJlY29yZDxzdHJpbmcsIHN0cmluZyB8IGJvb2xlYW4+XG4gICAgZmVhdHVyZUZsYWdQYXlsb2FkczogUmVjb3JkPHN0cmluZywgSnNvblR5cGU+XG4gICAgZXJyb3JzV2hpbGVDb21wdXRpbmdGbGFnczogYm9vbGVhblxuICAgIGF1dG9jYXB0dXJlX29wdF9vdXQ/OiBib29sZWFuXG4gICAgY2FwdHVyZVBlcmZvcm1hbmNlPzogYm9vbGVhblxuICAgIGFuYWx5dGljcz86IHtcbiAgICAgICAgZW5kcG9pbnQ/OiBzdHJpbmdcbiAgICB9XG4gICAgZWxlbWVudHNDaGFpbkFzU3RyaW5nPzogYm9vbGVhblxuICAgIC8vIHRoaXMgaXMgY3VycmVudGx5IGluIGRldmVsb3BtZW50IGFuZCBtYXkgaGF2ZSBicmVha2luZyBjaGFuZ2VzIHdpdGhvdXQgYSBtYWpvciB2ZXJzaW9uIGJ1bXBcbiAgICBhdXRvY2FwdHVyZUV4Y2VwdGlvbnM/OlxuICAgICAgICB8IGJvb2xlYW5cbiAgICAgICAgfCB7XG4gICAgICAgICAgICAgIGVuZHBvaW50Pzogc3RyaW5nXG4gICAgICAgICAgICAgIGVycm9yc190b19pZ25vcmU6IHN0cmluZ1tdXG4gICAgICAgICAgfVxuICAgIHNlc3Npb25SZWNvcmRpbmc/OiB7XG4gICAgICAgIGVuZHBvaW50Pzogc3RyaW5nXG4gICAgICAgIGNvbnNvbGVMb2dSZWNvcmRpbmdFbmFibGVkPzogYm9vbGVhblxuICAgICAgICByZWNvcmRlclZlcnNpb24/OiAndjEnIHwgJ3YyJ1xuICAgICAgICAvLyB0aGUgQVBJIHJldHVybnMgYSBkZWNpbWFsIGJldHdlZW4gMCBhbmQgMSBhcyBhIHN0cmluZ1xuICAgICAgICBzYW1wbGVSYXRlPzogc3RyaW5nIHwgbnVsbFxuICAgICAgICBtaW5pbXVtRHVyYXRpb25NaWxsaXNlY29uZHM/OiBudW1iZXJcbiAgICAgICAgcmVjb3JkQ2FudmFzPzogYm9vbGVhbiB8IG51bGxcbiAgICAgICAgY2FudmFzRnBzPzogbnVtYmVyIHwgbnVsbFxuICAgICAgICAvLyB0aGUgQVBJIHJldHVybnMgYSBkZWNpbWFsIGJldHdlZW4gMCBhbmQgMSBhcyBhIHN0cmluZ1xuICAgICAgICBjYW52YXNRdWFsaXR5Pzogc3RyaW5nIHwgbnVsbFxuICAgICAgICBsaW5rZWRGbGFnPzogc3RyaW5nIHwgRmxhZ1ZhcmlhbnQgfCBudWxsXG4gICAgICAgIG5ldHdvcmtQYXlsb2FkQ2FwdHVyZT86IFBpY2s8TmV0d29ya1JlY29yZE9wdGlvbnMsICdyZWNvcmRCb2R5JyB8ICdyZWNvcmRIZWFkZXJzJz5cbiAgICB9XG4gICAgc3VydmV5cz86IGJvb2xlYW5cbiAgICB0b29sYmFyUGFyYW1zOiBUb29sYmFyUGFyYW1zXG4gICAgZWRpdG9yUGFyYW1zPzogVG9vbGJhclBhcmFtcyAvKiogQGRlcHJlY2F0ZWQsIHJlbmFtZWQgdG8gdG9vbGJhclBhcmFtcywgc3RpbGwgcHJlc2VudCBvbiBvbGRlciBBUEkgcmVzcG9uc2VzICovXG4gICAgdG9vbGJhclZlcnNpb246ICd0b29sYmFyJyAvKiogQGRlcHJlY2F0ZWQsIG1vdmVkIHRvIHRvb2xiYXJQYXJhbXMgKi9cbiAgICBpc0F1dGhlbnRpY2F0ZWQ6IGJvb2xlYW5cbiAgICBzaXRlQXBwczogeyBpZDogbnVtYmVyOyB1cmw6IHN0cmluZyB9W11cbn1cblxuZXhwb3J0IHR5cGUgRmVhdHVyZUZsYWdzQ2FsbGJhY2sgPSAoXG4gICAgZmxhZ3M6IHN0cmluZ1tdLFxuICAgIHZhcmlhbnRzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmcgfCBib29sZWFuPixcbiAgICBjb250ZXh0Pzoge1xuICAgICAgICBlcnJvcnNMb2FkaW5nPzogYm9vbGVhblxuICAgIH1cbikgPT4gdm9pZFxuXG4vLyBUT0RPOiBkZWxldGUgY3VzdG9tX3Byb3BlcnRpZXMgYWZ0ZXIgY2hhbmdlbGVzcyB0eXBlc2NyaXB0IHJlZmFjdG9yXG5leHBvcnQgaW50ZXJmYWNlIEF1dG9DYXB0dXJlQ3VzdG9tUHJvcGVydHkge1xuICAgIG5hbWU6IHN0cmluZ1xuICAgIGNzc19zZWxlY3Rvcjogc3RyaW5nXG4gICAgZXZlbnRfc2VsZWN0b3JzOiBzdHJpbmdbXVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEdEUFJPcHRpb25zIHtcbiAgICBjYXB0dXJlPzogKFxuICAgICAgICBldmVudDogc3RyaW5nLFxuICAgICAgICBwcm9wZXJ0aWVzOiBQcm9wZXJ0aWVzLFxuICAgICAgICBvcHRpb25zOiBDYXB0dXJlT3B0aW9uc1xuICAgICkgPT4gdm9pZCAvKiogZnVuY3Rpb24gdXNlZCBmb3IgY2FwdHVyaW5nIGEgUG9zdEhvZyBldmVudCB0byByZWNvcmQgdGhlIG9wdC1pbiBhY3Rpb24gKi9cbiAgICBjYXB0dXJlRXZlbnROYW1lPzogc3RyaW5nIC8qKiBldmVudCBuYW1lIHRvIGJlIHVzZWQgZm9yIGNhcHR1cmluZyB0aGUgb3B0LWluIGFjdGlvbiAqL1xuICAgIGNhcHR1cmVQcm9wZXJ0aWVzPzogUHJvcGVydGllcyAvKiogc2V0IG9mIHByb3BlcnRpZXMgdG8gYmUgY2FwdHVyZWQgYWxvbmcgd2l0aCB0aGUgb3B0LWluIGFjdGlvbiAqL1xuICAgIC8qKiBwZXJzaXN0ZW5jZSBtZWNoYW5pc20gdXNlZCAqL1xuICAgIHBlcnNpc3RlbmNlVHlwZT86ICdjb29raWUnIHwgJ2xvY2FsU3RvcmFnZScgfCAnbG9jYWxTdG9yYWdlK2Nvb2tpZSdcbiAgICBwZXJzaXN0ZW5jZVByZWZpeD86IHN0cmluZyAvKiogW19fcGhfb3B0X2luX291dF0gLSBjdXN0b20gcHJlZml4IHRvIGJlIHVzZWQgaW4gdGhlIGNvb2tpZS9sb2NhbHN0b3JhZ2UgbmFtZSAqL1xuICAgIGNvb2tpZUV4cGlyYXRpb24/OiBudW1iZXIgLyoqIG51bWJlciBvZiBkYXlzIHVudGlsIHRoZSBvcHQtaW4gY29va2llIGV4cGlyZXMgKi9cbiAgICBjcm9zc1N1YmRvbWFpbkNvb2tpZT86IGJvb2xlYW4gLyoqIHdoZXRoZXIgdGhlIG9wdC1pbiBjb29raWUgaXMgc2V0IGFzIGNyb3NzLXN1YmRvbWFpbiBvciBub3QgKi9cbiAgICBzZWN1cmVDb29raWU/OiBib29sZWFuIC8qKiB3aGV0aGVyIHRoZSBvcHQtaW4gY29va2llIGlzIHNldCBhcyBzZWN1cmUgb3Igbm90ICovXG4gICAgcmVzcGVjdERudD86IGJvb2xlYW5cbiAgICB3aW5kb3c/OiBXaW5kb3dcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQZXJzaXN0ZW50U3RvcmUge1xuICAgIGlzX3N1cHBvcnRlZDogKCkgPT4gYm9vbGVhblxuICAgIGVycm9yOiAoZXJyb3I6IGFueSkgPT4gdm9pZFxuICAgIHBhcnNlOiAobmFtZTogc3RyaW5nKSA9PiBhbnlcbiAgICBnZXQ6IChuYW1lOiBzdHJpbmcpID0+IGFueVxuICAgIHNldDogKG5hbWU6IHN0cmluZywgdmFsdWU6IGFueSwgZXhwaXJlX2RheXM/OiBudW1iZXIgfCBudWxsLCBjcm9zc19zdWJkb21haW4/OiBib29sZWFuLCBzZWN1cmU/OiBib29sZWFuKSA9PiB2b2lkXG4gICAgcmVtb3ZlOiAobmFtZTogc3RyaW5nLCBjcm9zc19zdWJkb21haW4/OiBib29sZWFuKSA9PiB2b2lkXG59XG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvYmFuLXR5cGVzXG5leHBvcnQgdHlwZSBCcmVha2VyID0ge31cbmV4cG9ydCB0eXBlIEV2ZW50SGFuZGxlciA9IChldmVudDogRXZlbnQpID0+IGJvb2xlYW4gfCB2b2lkXG5cbmV4cG9ydCB0eXBlIFRvb2xiYXJVc2VySW50ZW50ID0gJ2FkZC1hY3Rpb24nIHwgJ2VkaXQtYWN0aW9uJ1xuZXhwb3J0IHR5cGUgVG9vbGJhclNvdXJjZSA9ICd1cmwnIHwgJ2xvY2Fsc3RvcmFnZSdcbmV4cG9ydCB0eXBlIFRvb2xiYXJWZXJzaW9uID0gJ3Rvb2xiYXInXG5cbi8qIHN5bmMgd2l0aCBwb3N0aG9nICovXG5leHBvcnQgaW50ZXJmYWNlIFRvb2xiYXJQYXJhbXMge1xuICAgIHRva2VuPzogc3RyaW5nIC8qKiBwdWJsaWMgcG9zdGhvZy1qcyB0b2tlbiAqL1xuICAgIHRlbXBvcmFyeVRva2VuPzogc3RyaW5nIC8qKiBwcml2YXRlIHRlbXBvcmFyeSB1c2VyIHRva2VuICovXG4gICAgYWN0aW9uSWQ/OiBudW1iZXJcbiAgICB1c2VySW50ZW50PzogVG9vbGJhclVzZXJJbnRlbnRcbiAgICBzb3VyY2U/OiBUb29sYmFyU291cmNlXG4gICAgdG9vbGJhclZlcnNpb24/OiBUb29sYmFyVmVyc2lvblxuICAgIGluc3RydW1lbnQ/OiBib29sZWFuXG4gICAgZGlzdGluY3RJZD86IHN0cmluZ1xuICAgIHVzZXJFbWFpbD86IHN0cmluZ1xuICAgIGRhdGFBdHRyaWJ1dGVzPzogc3RyaW5nW11cbiAgICBmZWF0dXJlRmxhZ3M/OiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmcgfCBib29sZWFuPlxufVxuXG5leHBvcnQgdHlwZSBTbmlwcGV0QXJyYXlJdGVtID0gW21ldGhvZDogc3RyaW5nLCAuLi5hcmdzOiBhbnlbXV1cblxuZXhwb3J0IHR5cGUgSnNvblR5cGUgPSBzdHJpbmcgfCBudW1iZXIgfCBib29sZWFuIHwgbnVsbCB8IHsgW2tleTogc3RyaW5nXTogSnNvblR5cGUgfSB8IEFycmF5PEpzb25UeXBlPlxuXG4vKiogQSBmZWF0dXJlIHRoYXQgaXNuJ3QgcHVibGljbHkgYXZhaWxhYmxlIHlldC4qL1xuZXhwb3J0IGludGVyZmFjZSBFYXJseUFjY2Vzc0ZlYXR1cmUge1xuICAgIC8vIFN5bmMgdGhpcyB3aXRoIHRoZSBiYWNrZW5kJ3MgRWFybHlBY2Nlc3NGZWF0dXJlU2VyaWFsaXplciFcbiAgICBuYW1lOiBzdHJpbmdcbiAgICBkZXNjcmlwdGlvbjogc3RyaW5nXG4gICAgc3RhZ2U6ICdjb25jZXB0JyB8ICdhbHBoYScgfCAnYmV0YSdcbiAgICBkb2N1bWVudGF0aW9uVXJsOiBzdHJpbmcgfCBudWxsXG4gICAgZmxhZ0tleTogc3RyaW5nIHwgbnVsbFxufVxuXG5leHBvcnQgdHlwZSBFYXJseUFjY2Vzc0ZlYXR1cmVDYWxsYmFjayA9IChlYXJseUFjY2Vzc0ZlYXR1cmVzOiBFYXJseUFjY2Vzc0ZlYXR1cmVbXSkgPT4gdm9pZFxuXG5leHBvcnQgaW50ZXJmYWNlIEVhcmx5QWNjZXNzRmVhdHVyZVJlc3BvbnNlIHtcbiAgICBlYXJseUFjY2Vzc0ZlYXR1cmVzOiBFYXJseUFjY2Vzc0ZlYXR1cmVbXVxufVxuXG5leHBvcnQgdHlwZSBIZWFkZXJzID0gUmVjb3JkPHN0cmluZywgc3RyaW5nPlxuXG4vKiBmb3IgcnJ3ZWIvbmV0d29ya0AxXG4gKiogd2hlbiB0aGF0IGlzIHJlbGVhc2VkIGFzIHBhcnQgb2YgcnJ3ZWIgdGhpcyBjYW4gYmUgcmVtb3ZlZFxuICoqIGRvbid0IHJlbHkgb24gdGhpcyB0eXBlLCBpdCBtYXkgY2hhbmdlIHdpdGhvdXQgbm90aWNlXG4gKi9cbmV4cG9ydCB0eXBlIEluaXRpYXRvclR5cGUgPVxuICAgIHwgJ2F1ZGlvJ1xuICAgIHwgJ2JlYWNvbidcbiAgICB8ICdib2R5J1xuICAgIHwgJ2NzcydcbiAgICB8ICdlYXJseS1oaW50J1xuICAgIHwgJ2VtYmVkJ1xuICAgIHwgJ2ZldGNoJ1xuICAgIHwgJ2ZyYW1lJ1xuICAgIHwgJ2lmcmFtZSdcbiAgICB8ICdpY29uJ1xuICAgIHwgJ2ltYWdlJ1xuICAgIHwgJ2ltZydcbiAgICB8ICdpbnB1dCdcbiAgICB8ICdsaW5rJ1xuICAgIHwgJ25hdmlnYXRpb24nXG4gICAgfCAnb2JqZWN0J1xuICAgIHwgJ3BpbmcnXG4gICAgfCAnc2NyaXB0J1xuICAgIHwgJ3RyYWNrJ1xuICAgIHwgJ3ZpZGVvJ1xuICAgIHwgJ3htbGh0dHByZXF1ZXN0J1xuXG5leHBvcnQgdHlwZSBOZXR3b3JrUmVjb3JkT3B0aW9ucyA9IHtcbiAgICBpbml0aWF0b3JUeXBlcz86IEluaXRpYXRvclR5cGVbXVxuICAgIG1hc2tSZXF1ZXN0Rm4/OiAoZGF0YTogQ2FwdHVyZWROZXR3b3JrUmVxdWVzdCkgPT4gQ2FwdHVyZWROZXR3b3JrUmVxdWVzdCB8IHVuZGVmaW5lZFxuICAgIHJlY29yZEhlYWRlcnM/OiBib29sZWFuIHwgeyByZXF1ZXN0OiBib29sZWFuOyByZXNwb25zZTogYm9vbGVhbiB9XG4gICAgcmVjb3JkQm9keT86IGJvb2xlYW4gfCBzdHJpbmdbXSB8IHsgcmVxdWVzdDogYm9vbGVhbiB8IHN0cmluZ1tdOyByZXNwb25zZTogYm9vbGVhbiB8IHN0cmluZ1tdIH1cbiAgICByZWNvcmRJbml0aWFsUmVxdWVzdHM/OiBib29sZWFuXG4gICAgLy8gd2hldGhlciB0byByZWNvcmQgUGVyZm9ybWFuY2VFbnRyeSBldmVudHMgZm9yIG5ldHdvcmsgcmVxdWVzdHNcbiAgICByZWNvcmRQZXJmb3JtYW5jZT86IGJvb2xlYW5cbiAgICAvLyB0aGUgUGVyZm9ybWFuY2VPYnNlcnZlciB3aWxsIG9ubHkgb2JzZXJ2ZSB0aGVzZSBlbnRyeSB0eXBlc1xuICAgIHBlcmZvcm1hbmNlRW50cnlUeXBlVG9PYnNlcnZlOiBzdHJpbmdbXVxuICAgIC8vIHRoZSBtYXhpbXVtIHNpemUgb2YgdGhlIHJlcXVlc3QvcmVzcG9uc2UgYm9keSB0byByZWNvcmRcbiAgICAvLyBOQiB0aGlzIHdpbGwgYmUgYXQgbW9zdCAxTUIgZXZlbiBpZiBzZXQgbGFyZ2VyXG4gICAgcGF5bG9hZFNpemVMaW1pdEJ5dGVzOiBudW1iZXJcbn1cblxuLyoqIEBkZXByZWNhdGVkIC0gdXNlIENhcHR1cmVkTmV0d29ya1JlcXVlc3QgaW5zdGVhZCAgKi9cbmV4cG9ydCB0eXBlIE5ldHdvcmtSZXF1ZXN0ID0ge1xuICAgIHVybDogc3RyaW5nXG59XG5cbi8vIEluIHJyd2ViIHRoaXMgaXMgY2FsbGVkIE5ldHdvcmtSZXF1ZXN0LCBidXQgd2UgYWxyZWFkeSBleHBvc2VkIHRoYXQgYXMgaGF2aW5nIG9ubHkgVVJMXG4vLyB3ZSBhbHNvIHdhbnQgdG8gdmFyeSBmcm9tIHRoZSBycndlYiBOZXR3b3JrUmVxdWVzdCBiZWNhdXNlIHdlIHdhbnQgdG8gaW5jbHVkZVxuLy8gYWxsIFBlcmZvcm1hbmNlRW50cnkgcHJvcGVydGllcyB0b28uXG4vLyB0aGF0IGhhcyA0IHJlcXVpcmVkIHByb3BlcnRpZXNcbi8vICAgICByZWFkb25seSBkdXJhdGlvbjogRE9NSGlnaFJlc1RpbWVTdGFtcDtcbi8vICAgICByZWFkb25seSBlbnRyeVR5cGU6IHN0cmluZztcbi8vICAgICByZWFkb25seSBuYW1lOiBzdHJpbmc7XG4vLyAgICAgcmVhZG9ubHkgc3RhcnRUaW1lOiBET01IaWdoUmVzVGltZVN0YW1wO1xuLy8gTkI6IHByb3BlcnRpZXMgYmVsb3cgaGVyZSBhcmUgQUxQSEEsIGRvbid0IHJlbHkgb24gdGhlbSwgdGhleSBtYXkgY2hhbmdlIHdpdGhvdXQgbm90aWNlXG5leHBvcnQgdHlwZSBDYXB0dXJlZE5ldHdvcmtSZXF1ZXN0ID0gT21pdDxQZXJmb3JtYW5jZUVudHJ5LCAndG9KU09OJz4gJiB7XG4gICAgLy8gcHJvcGVydGllcyBiZWxvdyBoZXJlIGFyZSBBTFBIQSwgZG9uJ3QgcmVseSBvbiB0aGVtLCB0aGV5IG1heSBjaGFuZ2Ugd2l0aG91dCBub3RpY2VcbiAgICBtZXRob2Q/OiBzdHJpbmdcbiAgICBpbml0aWF0b3JUeXBlPzogSW5pdGlhdG9yVHlwZVxuICAgIHN0YXR1cz86IG51bWJlclxuICAgIHRpbWVPcmlnaW4/OiBudW1iZXJcbiAgICB0aW1lc3RhbXA/OiBudW1iZXJcbiAgICBzdGFydFRpbWU/OiBudW1iZXJcbiAgICBlbmRUaW1lPzogbnVtYmVyXG4gICAgcmVxdWVzdEhlYWRlcnM/OiBIZWFkZXJzXG4gICAgcmVxdWVzdEJvZHk/OiBzdHJpbmcgfCBudWxsXG4gICAgcmVzcG9uc2VIZWFkZXJzPzogSGVhZGVyc1xuICAgIHJlc3BvbnNlQm9keT86IHN0cmluZyB8IG51bGxcbiAgICAvLyB3YXMgdGhpcyBjYXB0dXJlZCBiZWZvcmUgZmV0Y2gveGhyIGNvdWxkIGhhdmUgYmVlbiB3cmFwcGVkXG4gICAgaXNJbml0aWFsPzogYm9vbGVhblxufVxuIiwgImltcG9ydCB7IF9lbnRyaWVzLCBfZXh0ZW5kIH0gZnJvbSAnLi91dGlscydcbmltcG9ydCB7IFBvc3RIb2cgfSBmcm9tICcuL3Bvc3Rob2ctY29yZSdcbmltcG9ydCB7XG4gICAgRGVjaWRlUmVzcG9uc2UsXG4gICAgRmVhdHVyZUZsYWdzQ2FsbGJhY2ssXG4gICAgRWFybHlBY2Nlc3NGZWF0dXJlQ2FsbGJhY2ssXG4gICAgRWFybHlBY2Nlc3NGZWF0dXJlUmVzcG9uc2UsXG4gICAgUHJvcGVydGllcyxcbiAgICBKc29uVHlwZSxcbiAgICBDb21wcmVzc2lvbixcbn0gZnJvbSAnLi90eXBlcydcbmltcG9ydCB7IFBvc3RIb2dQZXJzaXN0ZW5jZSB9IGZyb20gJy4vcG9zdGhvZy1wZXJzaXN0ZW5jZSdcblxuaW1wb3J0IHtcbiAgICBQRVJTSVNURU5DRV9FQVJMWV9BQ0NFU1NfRkVBVFVSRVMsXG4gICAgRU5BQkxFRF9GRUFUVVJFX0ZMQUdTLFxuICAgIFNUT1JFRF9HUk9VUF9QUk9QRVJUSUVTX0tFWSxcbiAgICBTVE9SRURfUEVSU09OX1BST1BFUlRJRVNfS0VZLFxuICAgIEZMQUdfQ0FMTF9SRVBPUlRFRCxcbn0gZnJvbSAnLi9jb25zdGFudHMnXG5cbmltcG9ydCB7IF9pc0FycmF5IH0gZnJvbSAnLi91dGlscy90eXBlLXV0aWxzJ1xuaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSAnLi91dGlscy9sb2dnZXInXG5cbmNvbnN0IFBFUlNJU1RFTkNFX0FDVElWRV9GRUFUVVJFX0ZMQUdTID0gJyRhY3RpdmVfZmVhdHVyZV9mbGFncydcbmNvbnN0IFBFUlNJU1RFTkNFX09WRVJSSURFX0ZFQVRVUkVfRkxBR1MgPSAnJG92ZXJyaWRlX2ZlYXR1cmVfZmxhZ3MnXG5jb25zdCBQRVJTSVNURU5DRV9GRUFUVVJFX0ZMQUdfUEFZTE9BRFMgPSAnJGZlYXR1cmVfZmxhZ19wYXlsb2FkcydcblxuZXhwb3J0IGNvbnN0IGZpbHRlckFjdGl2ZUZlYXR1cmVGbGFncyA9IChmZWF0dXJlRmxhZ3M/OiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmcgfCBib29sZWFuPikgPT4ge1xuICAgIGNvbnN0IGFjdGl2ZUZlYXR1cmVGbGFnczogUmVjb3JkPHN0cmluZywgc3RyaW5nIHwgYm9vbGVhbj4gPSB7fVxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIF9lbnRyaWVzKGZlYXR1cmVGbGFncyB8fCB7fSkpIHtcbiAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICBhY3RpdmVGZWF0dXJlRmxhZ3Nba2V5XSA9IHZhbHVlXG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGFjdGl2ZUZlYXR1cmVGbGFnc1xufVxuXG5leHBvcnQgY29uc3QgcGFyc2VGZWF0dXJlRmxhZ0RlY2lkZVJlc3BvbnNlID0gKFxuICAgIHJlc3BvbnNlOiBQYXJ0aWFsPERlY2lkZVJlc3BvbnNlPixcbiAgICBwZXJzaXN0ZW5jZTogUG9zdEhvZ1BlcnNpc3RlbmNlLFxuICAgIGN1cnJlbnRGbGFnczogUmVjb3JkPHN0cmluZywgc3RyaW5nIHwgYm9vbGVhbj4gPSB7fSxcbiAgICBjdXJyZW50RmxhZ1BheWxvYWRzOiBSZWNvcmQ8c3RyaW5nLCBKc29uVHlwZT4gPSB7fVxuKSA9PiB7XG4gICAgY29uc3QgZmxhZ3MgPSByZXNwb25zZVsnZmVhdHVyZUZsYWdzJ11cbiAgICBjb25zdCBmbGFnUGF5bG9hZHMgPSByZXNwb25zZVsnZmVhdHVyZUZsYWdQYXlsb2FkcyddXG4gICAgaWYgKCFmbGFncykge1xuICAgICAgICByZXR1cm5cbiAgICB9XG4gICAgLy8gdXNpbmcgdGhlIHYxIGFwaVxuICAgIGlmIChfaXNBcnJheShmbGFncykpIHtcbiAgICAgICAgY29uc3QgJGVuYWJsZWRfZmVhdHVyZV9mbGFnczogUmVjb3JkPHN0cmluZywgYm9vbGVhbj4gPSB7fVxuICAgICAgICBpZiAoZmxhZ3MpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZmxhZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAkZW5hYmxlZF9mZWF0dXJlX2ZsYWdzW2ZsYWdzW2ldXSA9IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBwZXJzaXN0ZW5jZSAmJlxuICAgICAgICAgICAgcGVyc2lzdGVuY2UucmVnaXN0ZXIoe1xuICAgICAgICAgICAgICAgIFtQRVJTSVNURU5DRV9BQ1RJVkVfRkVBVFVSRV9GTEFHU106IGZsYWdzLFxuICAgICAgICAgICAgICAgIFtFTkFCTEVEX0ZFQVRVUkVfRkxBR1NdOiAkZW5hYmxlZF9mZWF0dXJlX2ZsYWdzLFxuICAgICAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8gdXNpbmcgdGhlIHYyKyBhcGlcbiAgICBsZXQgbmV3RmVhdHVyZUZsYWdzID0gZmxhZ3NcbiAgICBsZXQgbmV3RmVhdHVyZUZsYWdQYXlsb2FkcyA9IGZsYWdQYXlsb2Fkc1xuICAgIGlmIChyZXNwb25zZS5lcnJvcnNXaGlsZUNvbXB1dGluZ0ZsYWdzKSB7XG4gICAgICAgIC8vIGlmIG5vdCBhbGwgZmxhZ3Mgd2VyZSBjb21wdXRlZCwgd2UgdXBzZXJ0IGZsYWdzIGluc3RlYWQgb2YgcmVwbGFjaW5nIHRoZW1cbiAgICAgICAgbmV3RmVhdHVyZUZsYWdzID0geyAuLi5jdXJyZW50RmxhZ3MsIC4uLm5ld0ZlYXR1cmVGbGFncyB9XG4gICAgICAgIG5ld0ZlYXR1cmVGbGFnUGF5bG9hZHMgPSB7IC4uLmN1cnJlbnRGbGFnUGF5bG9hZHMsIC4uLm5ld0ZlYXR1cmVGbGFnUGF5bG9hZHMgfVxuICAgIH1cbiAgICBwZXJzaXN0ZW5jZSAmJlxuICAgICAgICBwZXJzaXN0ZW5jZS5yZWdpc3Rlcih7XG4gICAgICAgICAgICBbUEVSU0lTVEVOQ0VfQUNUSVZFX0ZFQVRVUkVfRkxBR1NdOiBPYmplY3Qua2V5cyhmaWx0ZXJBY3RpdmVGZWF0dXJlRmxhZ3MobmV3RmVhdHVyZUZsYWdzKSksXG4gICAgICAgICAgICBbRU5BQkxFRF9GRUFUVVJFX0ZMQUdTXTogbmV3RmVhdHVyZUZsYWdzIHx8IHt9LFxuICAgICAgICAgICAgW1BFUlNJU1RFTkNFX0ZFQVRVUkVfRkxBR19QQVlMT0FEU106IG5ld0ZlYXR1cmVGbGFnUGF5bG9hZHMgfHwge30sXG4gICAgICAgIH0pXG59XG5cbmV4cG9ydCBjbGFzcyBQb3N0SG9nRmVhdHVyZUZsYWdzIHtcbiAgICBpbnN0YW5jZTogUG9zdEhvZ1xuICAgIF9vdmVycmlkZV93YXJuaW5nOiBib29sZWFuXG4gICAgZmVhdHVyZUZsYWdFdmVudEhhbmRsZXJzOiBGZWF0dXJlRmxhZ3NDYWxsYmFja1tdXG4gICAgcmVsb2FkRmVhdHVyZUZsYWdzUXVldWVkOiBib29sZWFuXG4gICAgcmVsb2FkRmVhdHVyZUZsYWdzSW5BY3Rpb246IGJvb2xlYW5cbiAgICAkYW5vbl9kaXN0aW5jdF9pZDogc3RyaW5nIHwgdW5kZWZpbmVkXG5cbiAgICBjb25zdHJ1Y3RvcihpbnN0YW5jZTogUG9zdEhvZykge1xuICAgICAgICB0aGlzLmluc3RhbmNlID0gaW5zdGFuY2VcbiAgICAgICAgdGhpcy5fb3ZlcnJpZGVfd2FybmluZyA9IGZhbHNlXG4gICAgICAgIHRoaXMuZmVhdHVyZUZsYWdFdmVudEhhbmRsZXJzID0gW11cblxuICAgICAgICB0aGlzLnJlbG9hZEZlYXR1cmVGbGFnc1F1ZXVlZCA9IGZhbHNlXG4gICAgICAgIHRoaXMucmVsb2FkRmVhdHVyZUZsYWdzSW5BY3Rpb24gPSBmYWxzZVxuICAgIH1cblxuICAgIGdldEZsYWdzKCk6IHN0cmluZ1tdIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHRoaXMuZ2V0RmxhZ1ZhcmlhbnRzKCkpXG4gICAgfVxuXG4gICAgZ2V0RmxhZ1ZhcmlhbnRzKCk6IFJlY29yZDxzdHJpbmcsIHN0cmluZyB8IGJvb2xlYW4+IHtcbiAgICAgICAgY29uc3QgZW5hYmxlZEZsYWdzID0gdGhpcy5pbnN0YW5jZS5nZXRfcHJvcGVydHkoRU5BQkxFRF9GRUFUVVJFX0ZMQUdTKVxuICAgICAgICBjb25zdCBvdmVycmlkZGVuRmxhZ3MgPSB0aGlzLmluc3RhbmNlLmdldF9wcm9wZXJ0eShQRVJTSVNURU5DRV9PVkVSUklERV9GRUFUVVJFX0ZMQUdTKVxuICAgICAgICBpZiAoIW92ZXJyaWRkZW5GbGFncykge1xuICAgICAgICAgICAgcmV0dXJuIGVuYWJsZWRGbGFncyB8fCB7fVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZmluYWxGbGFncyA9IF9leHRlbmQoe30sIGVuYWJsZWRGbGFncylcbiAgICAgICAgY29uc3Qgb3ZlcnJpZGRlbktleXMgPSBPYmplY3Qua2V5cyhvdmVycmlkZGVuRmxhZ3MpXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb3ZlcnJpZGRlbktleXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChvdmVycmlkZGVuRmxhZ3Nbb3ZlcnJpZGRlbktleXNbaV1dID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBmaW5hbEZsYWdzW292ZXJyaWRkZW5LZXlzW2ldXVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBmaW5hbEZsYWdzW292ZXJyaWRkZW5LZXlzW2ldXSA9IG92ZXJyaWRkZW5GbGFnc1tvdmVycmlkZGVuS2V5c1tpXV1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuX292ZXJyaWRlX3dhcm5pbmcpIHtcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKCcgT3ZlcnJpZGluZyBmZWF0dXJlIGZsYWdzIScsIHtcbiAgICAgICAgICAgICAgICBlbmFibGVkRmxhZ3MsXG4gICAgICAgICAgICAgICAgb3ZlcnJpZGRlbkZsYWdzLFxuICAgICAgICAgICAgICAgIGZpbmFsRmxhZ3MsXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgdGhpcy5fb3ZlcnJpZGVfd2FybmluZyA9IHRydWVcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmluYWxGbGFnc1xuICAgIH1cblxuICAgIGdldEZsYWdQYXlsb2FkcygpOiBSZWNvcmQ8c3RyaW5nLCBKc29uVHlwZT4ge1xuICAgICAgICBjb25zdCBmbGFnUGF5bG9hZHMgPSB0aGlzLmluc3RhbmNlLmdldF9wcm9wZXJ0eShQRVJTSVNURU5DRV9GRUFUVVJFX0ZMQUdfUEFZTE9BRFMpXG4gICAgICAgIHJldHVybiBmbGFnUGF5bG9hZHMgfHwge31cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZWxvYWRzIGZlYXR1cmUgZmxhZ3MgYXN5bmNocm9ub3VzbHkuXG4gICAgICpcbiAgICAgKiBDb25zdHJhaW50czpcbiAgICAgKlxuICAgICAqIDEuIEF2b2lkIHBhcmFsbGVsIHJlcXVlc3RzXG4gICAgICogMi4gRGVsYXkgYSBmZXcgbWlsbGlzZWNvbmRzIGFmdGVyIGVhY2ggcmVsb2FkRmVhdHVyZUZsYWdzIGNhbGwgdG8gYmF0Y2ggc3Vic2VxdWVudCBjaGFuZ2VzIHRvZ2V0aGVyXG4gICAgICogMy4gRG9uJ3QgY2FsbCB0aGlzIGR1cmluZyBpbml0aWFsIGxvYWQgKGFzIC9kZWNpZGUgd2lsbCBiZSBjYWxsZWQgaW5zdGVhZCksIHNlZSBwb3N0aG9nLWNvcmUuanNcbiAgICAgKi9cbiAgICByZWxvYWRGZWF0dXJlRmxhZ3MoKTogdm9pZCB7XG4gICAgICAgIGlmICghdGhpcy5yZWxvYWRGZWF0dXJlRmxhZ3NRdWV1ZWQpIHtcbiAgICAgICAgICAgIHRoaXMucmVsb2FkRmVhdHVyZUZsYWdzUXVldWVkID0gdHJ1ZVxuICAgICAgICAgICAgdGhpcy5fc3RhcnRSZWxvYWRUaW1lcigpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzZXRBbm9ueW1vdXNEaXN0aW5jdElkKGFub25fZGlzdGluY3RfaWQ6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICB0aGlzLiRhbm9uX2Rpc3RpbmN0X2lkID0gYW5vbl9kaXN0aW5jdF9pZFxuICAgIH1cblxuICAgIHNldFJlbG9hZGluZ1BhdXNlZChpc1BhdXNlZDogYm9vbGVhbik6IHZvaWQge1xuICAgICAgICB0aGlzLnJlbG9hZEZlYXR1cmVGbGFnc0luQWN0aW9uID0gaXNQYXVzZWRcbiAgICB9XG5cbiAgICByZXNldFJlcXVlc3RRdWV1ZSgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5yZWxvYWRGZWF0dXJlRmxhZ3NRdWV1ZWQgPSBmYWxzZVxuICAgIH1cblxuICAgIF9zdGFydFJlbG9hZFRpbWVyKCk6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy5yZWxvYWRGZWF0dXJlRmxhZ3NRdWV1ZWQgJiYgIXRoaXMucmVsb2FkRmVhdHVyZUZsYWdzSW5BY3Rpb24pIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5yZWxvYWRGZWF0dXJlRmxhZ3NJbkFjdGlvbiAmJiB0aGlzLnJlbG9hZEZlYXR1cmVGbGFnc1F1ZXVlZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbG9hZEZlYXR1cmVGbGFnc1F1ZXVlZCA9IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3JlbG9hZEZlYXR1cmVGbGFnc1JlcXVlc3QoKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIDUpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBfcmVsb2FkRmVhdHVyZUZsYWdzUmVxdWVzdCgpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMuaW5zdGFuY2UuY29uZmlnLmFkdmFuY2VkX2Rpc2FibGVfZmVhdHVyZV9mbGFncykge1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnNldFJlbG9hZGluZ1BhdXNlZCh0cnVlKVxuICAgICAgICBjb25zdCB0b2tlbiA9IHRoaXMuaW5zdGFuY2UuY29uZmlnLnRva2VuXG4gICAgICAgIGNvbnN0IHBlcnNvblByb3BlcnRpZXMgPSB0aGlzLmluc3RhbmNlLmdldF9wcm9wZXJ0eShTVE9SRURfUEVSU09OX1BST1BFUlRJRVNfS0VZKVxuICAgICAgICBjb25zdCBncm91cFByb3BlcnRpZXMgPSB0aGlzLmluc3RhbmNlLmdldF9wcm9wZXJ0eShTVE9SRURfR1JPVVBfUFJPUEVSVElFU19LRVkpXG4gICAgICAgIGNvbnN0IGpzb25fZGF0YSA9IHtcbiAgICAgICAgICAgIHRva2VuOiB0b2tlbixcbiAgICAgICAgICAgIGRpc3RpbmN0X2lkOiB0aGlzLmluc3RhbmNlLmdldF9kaXN0aW5jdF9pZCgpLFxuICAgICAgICAgICAgZ3JvdXBzOiB0aGlzLmluc3RhbmNlLmdldEdyb3VwcygpLFxuICAgICAgICAgICAgJGFub25fZGlzdGluY3RfaWQ6IHRoaXMuJGFub25fZGlzdGluY3RfaWQsXG4gICAgICAgICAgICBwZXJzb25fcHJvcGVydGllczogcGVyc29uUHJvcGVydGllcyxcbiAgICAgICAgICAgIGdyb3VwX3Byb3BlcnRpZXM6IGdyb3VwUHJvcGVydGllcyxcbiAgICAgICAgICAgIGRpc2FibGVfZmxhZ3M6IHRoaXMuaW5zdGFuY2UuY29uZmlnLmFkdmFuY2VkX2Rpc2FibGVfZmVhdHVyZV9mbGFncyB8fCB1bmRlZmluZWQsXG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmluc3RhbmNlLl9zZW5kX3JlcXVlc3Qoe1xuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICB1cmw6IHRoaXMuaW5zdGFuY2UucmVxdWVzdFJvdXRlci5lbmRwb2ludEZvcignYXBpJywgJy9kZWNpZGUvP3Y9MycpLFxuICAgICAgICAgICAgZGF0YToganNvbl9kYXRhLFxuICAgICAgICAgICAgY29tcHJlc3Npb246IENvbXByZXNzaW9uLkJhc2U2NCxcbiAgICAgICAgICAgIHRpbWVvdXQ6IHRoaXMuaW5zdGFuY2UuY29uZmlnLmZlYXR1cmVfZmxhZ19yZXF1ZXN0X3RpbWVvdXRfbXMsXG4gICAgICAgICAgICBjYWxsYmFjazogKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRSZWxvYWRpbmdQYXVzZWQoZmFsc2UpXG5cbiAgICAgICAgICAgICAgICBsZXQgZXJyb3JzTG9hZGluZyA9IHRydWVcblxuICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXNDb2RlID09PSAyMDApIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gc3VjY2Vzc2Z1bCByZXF1ZXN0XG4gICAgICAgICAgICAgICAgICAgIC8vIHJlc2V0IGFub25fZGlzdGluY3RfaWQgYWZ0ZXIgYXQgbGVhc3QgYSBzaW5nbGUgcmVxdWVzdCB3aXRoIGl0XG4gICAgICAgICAgICAgICAgICAgIC8vIG1ha2VzIGl0IHRocm91Z2hcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4kYW5vbl9kaXN0aW5jdF9pZCA9IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICBlcnJvcnNMb2FkaW5nID0gZmFsc2VcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gOlRSSUNLWTogV2Ugd2FudCB0byBmaXJlIHRoZSBjYWxsYmFjayBldmVuIGlmIHRoZSByZXF1ZXN0IGZhaWxzXG4gICAgICAgICAgICAgICAgLy8gYW5kIHJldHVybiBleGlzdGluZyBmbGFncyBpZiB0aGV5IGV4aXN0XG4gICAgICAgICAgICAgICAgLy8gVGhpcyBpcyBiZWNhdXNlIHdlIGRvbid0IHdhbnQgdG8gYmxvY2sgY2xpZW50cyB3YWl0aW5nIGZvciBmbGFncyB0byBsb2FkLlxuICAgICAgICAgICAgICAgIC8vIEl0J3MgcG9zc2libGUgdGhleSdyZSB3YWl0aW5nIGZvciB0aGUgY2FsbGJhY2sgdG8gcmVuZGVyIHRoZSBVSSwgYnV0IGl0IG5ldmVyIG9jY3Vycy5cbiAgICAgICAgICAgICAgICB0aGlzLnJlY2VpdmVkRmVhdHVyZUZsYWdzKHJlc3BvbnNlLmpzb24gPz8ge30sIGVycm9yc0xvYWRpbmcpXG5cbiAgICAgICAgICAgICAgICAvLyA6VFJJQ0tZOiBSZWxvYWQgLSBzdGFydCBhbm90aGVyIHJlcXVlc3QgaWYgcXVldWVkIVxuICAgICAgICAgICAgICAgIHRoaXMuX3N0YXJ0UmVsb2FkVGltZXIoKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICAvKlxuICAgICAqIEdldCBmZWF0dXJlIGZsYWcncyB2YWx1ZSBmb3IgdXNlci5cbiAgICAgKlxuICAgICAqICMjIyBVc2FnZTpcbiAgICAgKlxuICAgICAqICAgICBpZihwb3N0aG9nLmdldEZlYXR1cmVGbGFnKCdteS1mbGFnJykgPT09ICdzb21lLXZhcmlhbnQnKSB7IC8vIGRvIHNvbWV0aGluZyB9XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdHxTdHJpbmd9IGtleSBLZXkgb2YgdGhlIGZlYXR1cmUgZmxhZy5cbiAgICAgKiBAcGFyYW0ge09iamVjdHxTdHJpbmd9IG9wdGlvbnMgKG9wdGlvbmFsKSBJZiB7c2VuZF9ldmVudDogZmFsc2V9LCB3ZSB3b24ndCBzZW5kIGFuICRmZWF0dXJlX2ZsYWdfY2FsbCBldmVudCB0byBQb3N0SG9nLlxuICAgICAqL1xuICAgIGdldEZlYXR1cmVGbGFnKGtleTogc3RyaW5nLCBvcHRpb25zOiB7IHNlbmRfZXZlbnQ/OiBib29sZWFuIH0gPSB7fSk6IGJvb2xlYW4gfCBzdHJpbmcgfCB1bmRlZmluZWQge1xuICAgICAgICBpZiAoIXRoaXMuaW5zdGFuY2UuZGVjaWRlRW5kcG9pbnRXYXNIaXQgJiYgISh0aGlzLmdldEZsYWdzKCkgJiYgdGhpcy5nZXRGbGFncygpLmxlbmd0aCA+IDApKSB7XG4gICAgICAgICAgICBsb2dnZXIud2FybignZ2V0RmVhdHVyZUZsYWcgZm9yIGtleSBcIicgKyBrZXkgKyAnXCIgZmFpbGVkLiBGZWF0dXJlIGZsYWdzIGRpZG5cXCd0IGxvYWQgaW4gdGltZS4nKVxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGZsYWdWYWx1ZSA9IHRoaXMuZ2V0RmxhZ1ZhcmlhbnRzKClba2V5XVxuICAgICAgICBjb25zdCBmbGFnUmVwb3J0VmFsdWUgPSBgJHtmbGFnVmFsdWV9YFxuICAgICAgICBjb25zdCBmbGFnQ2FsbFJlcG9ydGVkOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmdbXT4gPSB0aGlzLmluc3RhbmNlLmdldF9wcm9wZXJ0eShGTEFHX0NBTExfUkVQT1JURUQpIHx8IHt9XG5cbiAgICAgICAgaWYgKG9wdGlvbnMuc2VuZF9ldmVudCB8fCAhKCdzZW5kX2V2ZW50JyBpbiBvcHRpb25zKSkge1xuICAgICAgICAgICAgaWYgKCEoa2V5IGluIGZsYWdDYWxsUmVwb3J0ZWQpIHx8ICFmbGFnQ2FsbFJlcG9ydGVkW2tleV0uaW5jbHVkZXMoZmxhZ1JlcG9ydFZhbHVlKSkge1xuICAgICAgICAgICAgICAgIGlmIChfaXNBcnJheShmbGFnQ2FsbFJlcG9ydGVkW2tleV0pKSB7XG4gICAgICAgICAgICAgICAgICAgIGZsYWdDYWxsUmVwb3J0ZWRba2V5XS5wdXNoKGZsYWdSZXBvcnRWYWx1ZSlcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBmbGFnQ2FsbFJlcG9ydGVkW2tleV0gPSBbZmxhZ1JlcG9ydFZhbHVlXVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmluc3RhbmNlLnBlcnNpc3RlbmNlPy5yZWdpc3Rlcih7IFtGTEFHX0NBTExfUkVQT1JURURdOiBmbGFnQ2FsbFJlcG9ydGVkIH0pXG5cbiAgICAgICAgICAgICAgICB0aGlzLmluc3RhbmNlLmNhcHR1cmUoJyRmZWF0dXJlX2ZsYWdfY2FsbGVkJywgeyAkZmVhdHVyZV9mbGFnOiBrZXksICRmZWF0dXJlX2ZsYWdfcmVzcG9uc2U6IGZsYWdWYWx1ZSB9KVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmbGFnVmFsdWVcbiAgICB9XG5cbiAgICBnZXRGZWF0dXJlRmxhZ1BheWxvYWQoa2V5OiBzdHJpbmcpOiBKc29uVHlwZSB7XG4gICAgICAgIGNvbnN0IHBheWxvYWRzID0gdGhpcy5nZXRGbGFnUGF5bG9hZHMoKVxuICAgICAgICByZXR1cm4gcGF5bG9hZHNba2V5XVxuICAgIH1cblxuICAgIC8qXG4gICAgICogU2VlIGlmIGZlYXR1cmUgZmxhZyBpcyBlbmFibGVkIGZvciB1c2VyLlxuICAgICAqXG4gICAgICogIyMjIFVzYWdlOlxuICAgICAqXG4gICAgICogICAgIGlmKHBvc3Rob2cuaXNGZWF0dXJlRW5hYmxlZCgnYmV0YS1mZWF0dXJlJykpIHsgLy8gZG8gc29tZXRoaW5nIH1cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fFN0cmluZ30ga2V5IEtleSBvZiB0aGUgZmVhdHVyZSBmbGFnLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fFN0cmluZ30gb3B0aW9ucyAob3B0aW9uYWwpIElmIHtzZW5kX2V2ZW50OiBmYWxzZX0sIHdlIHdvbid0IHNlbmQgYW4gJGZlYXR1cmVfZmxhZ19jYWxsIGV2ZW50IHRvIFBvc3RIb2cuXG4gICAgICovXG4gICAgaXNGZWF0dXJlRW5hYmxlZChrZXk6IHN0cmluZywgb3B0aW9uczogeyBzZW5kX2V2ZW50PzogYm9vbGVhbiB9ID0ge30pOiBib29sZWFuIHwgdW5kZWZpbmVkIHtcbiAgICAgICAgaWYgKCF0aGlzLmluc3RhbmNlLmRlY2lkZUVuZHBvaW50V2FzSGl0ICYmICEodGhpcy5nZXRGbGFncygpICYmIHRoaXMuZ2V0RmxhZ3MoKS5sZW5ndGggPiAwKSkge1xuICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ2lzRmVhdHVyZUVuYWJsZWQgZm9yIGtleSBcIicgKyBrZXkgKyAnXCIgZmFpbGVkLiBGZWF0dXJlIGZsYWdzIGRpZG5cXCd0IGxvYWQgaW4gdGltZS4nKVxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgICAgICB9XG4gICAgICAgIHJldHVybiAhIXRoaXMuZ2V0RmVhdHVyZUZsYWcoa2V5LCBvcHRpb25zKVxuICAgIH1cblxuICAgIGFkZEZlYXR1cmVGbGFnc0hhbmRsZXIoaGFuZGxlcjogRmVhdHVyZUZsYWdzQ2FsbGJhY2spOiB2b2lkIHtcbiAgICAgICAgdGhpcy5mZWF0dXJlRmxhZ0V2ZW50SGFuZGxlcnMucHVzaChoYW5kbGVyKVxuICAgIH1cblxuICAgIHJlbW92ZUZlYXR1cmVGbGFnc0hhbmRsZXIoaGFuZGxlcjogRmVhdHVyZUZsYWdzQ2FsbGJhY2spOiB2b2lkIHtcbiAgICAgICAgdGhpcy5mZWF0dXJlRmxhZ0V2ZW50SGFuZGxlcnMgPSB0aGlzLmZlYXR1cmVGbGFnRXZlbnRIYW5kbGVycy5maWx0ZXIoKGgpID0+IGggIT09IGhhbmRsZXIpXG4gICAgfVxuXG4gICAgcmVjZWl2ZWRGZWF0dXJlRmxhZ3MocmVzcG9uc2U6IFBhcnRpYWw8RGVjaWRlUmVzcG9uc2U+LCBlcnJvcnNMb2FkaW5nPzogYm9vbGVhbik6IHZvaWQge1xuICAgICAgICBpZiAoIXRoaXMuaW5zdGFuY2UucGVyc2lzdGVuY2UpIHtcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICAgIHRoaXMuaW5zdGFuY2UuZGVjaWRlRW5kcG9pbnRXYXNIaXQgPSB0cnVlXG4gICAgICAgIGNvbnN0IGN1cnJlbnRGbGFncyA9IHRoaXMuZ2V0RmxhZ1ZhcmlhbnRzKClcbiAgICAgICAgY29uc3QgY3VycmVudEZsYWdQYXlsb2FkcyA9IHRoaXMuZ2V0RmxhZ1BheWxvYWRzKClcbiAgICAgICAgcGFyc2VGZWF0dXJlRmxhZ0RlY2lkZVJlc3BvbnNlKHJlc3BvbnNlLCB0aGlzLmluc3RhbmNlLnBlcnNpc3RlbmNlLCBjdXJyZW50RmxhZ3MsIGN1cnJlbnRGbGFnUGF5bG9hZHMpXG4gICAgICAgIHRoaXMuX2ZpcmVGZWF0dXJlRmxhZ3NDYWxsYmFja3MoZXJyb3JzTG9hZGluZylcbiAgICB9XG5cbiAgICAvKlxuICAgICAqIE92ZXJyaWRlIGZlYXR1cmUgZmxhZ3MgZm9yIGRlYnVnZ2luZy5cbiAgICAgKlxuICAgICAqICMjIyBVc2FnZTpcbiAgICAgKlxuICAgICAqICAgICAtIHBvc3Rob2cuZmVhdHVyZV9mbGFncy5vdmVycmlkZShmYWxzZSlcbiAgICAgKiAgICAgLSBwb3N0aG9nLmZlYXR1cmVfZmxhZ3Mub3ZlcnJpZGUoWydiZXRhLWZlYXR1cmUnXSlcbiAgICAgKiAgICAgLSBwb3N0aG9nLmZlYXR1cmVfZmxhZ3Mub3ZlcnJpZGUoeydiZXRhLWZlYXR1cmUnOiAndmFyaWFudCcsICdvdGhlci1mZWF0dXJlJzogVHJ1ZX0pXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdHxBcnJheXxTdHJpbmd9IGZsYWdzIEZsYWdzIHRvIG92ZXJyaWRlIHdpdGguXG4gICAgICovXG4gICAgb3ZlcnJpZGUoZmxhZ3M6IGJvb2xlYW4gfCBzdHJpbmdbXSB8IFJlY29yZDxzdHJpbmcsIHN0cmluZyB8IGJvb2xlYW4+KTogdm9pZCB7XG4gICAgICAgIGlmICghdGhpcy5pbnN0YW5jZS5fX2xvYWRlZCB8fCAhdGhpcy5pbnN0YW5jZS5wZXJzaXN0ZW5jZSkge1xuICAgICAgICAgICAgcmV0dXJuIGxvZ2dlci51bmluaXRpYWxpemVkV2FybmluZygncG9zdGhvZy5mZWF0dXJlX2ZsYWdzLm92ZXJyaWRlJylcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX292ZXJyaWRlX3dhcm5pbmcgPSBmYWxzZVxuXG4gICAgICAgIGlmIChmbGFncyA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2UucGVyc2lzdGVuY2UudW5yZWdpc3RlcihQRVJTSVNURU5DRV9PVkVSUklERV9GRUFUVVJFX0ZMQUdTKVxuICAgICAgICB9IGVsc2UgaWYgKF9pc0FycmF5KGZsYWdzKSkge1xuICAgICAgICAgICAgY29uc3QgZmxhZ3NPYmo6IFJlY29yZDxzdHJpbmcsIHN0cmluZyB8IGJvb2xlYW4+ID0ge31cbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZmxhZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBmbGFnc09ialtmbGFnc1tpXV0gPSB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmluc3RhbmNlLnBlcnNpc3RlbmNlLnJlZ2lzdGVyKHsgW1BFUlNJU1RFTkNFX09WRVJSSURFX0ZFQVRVUkVfRkxBR1NdOiBmbGFnc09iaiB9KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZS5wZXJzaXN0ZW5jZS5yZWdpc3Rlcih7IFtQRVJTSVNURU5DRV9PVkVSUklERV9GRUFUVVJFX0ZMQUdTXTogZmxhZ3MgfSlcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKlxuICAgICAqIFJlZ2lzdGVyIGFuIGV2ZW50IGxpc3RlbmVyIHRoYXQgcnVucyB3aGVuIGZlYXR1cmUgZmxhZ3MgYmVjb21lIGF2YWlsYWJsZSBvciB3aGVuIHRoZXkgY2hhbmdlLlxuICAgICAqIElmIHRoZXJlIGFyZSBmbGFncywgdGhlIGxpc3RlbmVyIGlzIGNhbGxlZCBpbW1lZGlhdGVseSBpbiBhZGRpdGlvbiB0byBiZWluZyBjYWxsZWQgb24gZnV0dXJlIGNoYW5nZXMuXG4gICAgICpcbiAgICAgKiAjIyMgVXNhZ2U6XG4gICAgICpcbiAgICAgKiAgICAgcG9zdGhvZy5vbkZlYXR1cmVGbGFncyhmdW5jdGlvbihmZWF0dXJlRmxhZ3MpIHsgLy8gZG8gc29tZXRoaW5nIH0pXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2FsbGJhY2tdIFRoZSBjYWxsYmFjayBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZCBvbmNlIHRoZSBmZWF0dXJlIGZsYWdzIGFyZSByZWFkeSBvciB3aGVuIHRoZXkgYXJlIHVwZGF0ZWQuXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJdCdsbCByZXR1cm4gYSBsaXN0IG9mIGZlYXR1cmUgZmxhZ3MgZW5hYmxlZCBmb3IgdGhlIHVzZXIuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBBIGZ1bmN0aW9uIHRoYXQgY2FuIGJlIGNhbGxlZCB0byB1bnN1YnNjcmliZSB0aGUgbGlzdGVuZXIuIFVzZWQgYnkgdXNlRWZmZWN0IHdoZW4gdGhlIGNvbXBvbmVudCB1bm1vdW50cy5cbiAgICAgKi9cbiAgICBvbkZlYXR1cmVGbGFncyhjYWxsYmFjazogRmVhdHVyZUZsYWdzQ2FsbGJhY2spOiAoKSA9PiB2b2lkIHtcbiAgICAgICAgdGhpcy5hZGRGZWF0dXJlRmxhZ3NIYW5kbGVyKGNhbGxiYWNrKVxuICAgICAgICBpZiAodGhpcy5pbnN0YW5jZS5kZWNpZGVFbmRwb2ludFdhc0hpdCkge1xuICAgICAgICAgICAgY29uc3QgeyBmbGFncywgZmxhZ1ZhcmlhbnRzIH0gPSB0aGlzLl9wcmVwYXJlRmVhdHVyZUZsYWdzRm9yQ2FsbGJhY2tzKClcbiAgICAgICAgICAgIGNhbGxiYWNrKGZsYWdzLCBmbGFnVmFyaWFudHMpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICgpID0+IHRoaXMucmVtb3ZlRmVhdHVyZUZsYWdzSGFuZGxlcihjYWxsYmFjaylcbiAgICB9XG5cbiAgICB1cGRhdGVFYXJseUFjY2Vzc0ZlYXR1cmVFbnJvbGxtZW50KGtleTogc3RyaW5nLCBpc0Vucm9sbGVkOiBib29sZWFuKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGVucm9sbG1lbnRQZXJzb25Qcm9wID0ge1xuICAgICAgICAgICAgW2AkZmVhdHVyZV9lbnJvbGxtZW50LyR7a2V5fWBdOiBpc0Vucm9sbGVkLFxuICAgICAgICB9XG4gICAgICAgIHRoaXMuaW5zdGFuY2UuY2FwdHVyZSgnJGZlYXR1cmVfZW5yb2xsbWVudF91cGRhdGUnLCB7XG4gICAgICAgICAgICAkZmVhdHVyZV9mbGFnOiBrZXksXG4gICAgICAgICAgICAkZmVhdHVyZV9lbnJvbGxtZW50OiBpc0Vucm9sbGVkLFxuICAgICAgICAgICAgJHNldDogZW5yb2xsbWVudFBlcnNvblByb3AsXG4gICAgICAgIH0pXG4gICAgICAgIHRoaXMuc2V0UGVyc29uUHJvcGVydGllc0ZvckZsYWdzKGVucm9sbG1lbnRQZXJzb25Qcm9wLCBmYWxzZSlcblxuICAgICAgICBjb25zdCBuZXdGbGFncyA9IHsgLi4udGhpcy5nZXRGbGFnVmFyaWFudHMoKSwgW2tleV06IGlzRW5yb2xsZWQgfVxuICAgICAgICB0aGlzLmluc3RhbmNlLnBlcnNpc3RlbmNlPy5yZWdpc3Rlcih7XG4gICAgICAgICAgICBbUEVSU0lTVEVOQ0VfQUNUSVZFX0ZFQVRVUkVfRkxBR1NdOiBPYmplY3Qua2V5cyhmaWx0ZXJBY3RpdmVGZWF0dXJlRmxhZ3MobmV3RmxhZ3MpKSxcbiAgICAgICAgICAgIFtFTkFCTEVEX0ZFQVRVUkVfRkxBR1NdOiBuZXdGbGFncyxcbiAgICAgICAgfSlcbiAgICAgICAgdGhpcy5fZmlyZUZlYXR1cmVGbGFnc0NhbGxiYWNrcygpXG4gICAgfVxuXG4gICAgZ2V0RWFybHlBY2Nlc3NGZWF0dXJlcyhjYWxsYmFjazogRWFybHlBY2Nlc3NGZWF0dXJlQ2FsbGJhY2ssIGZvcmNlX3JlbG9hZCA9IGZhbHNlKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nX2Vhcmx5X2FjY2Vzc19mZWF0dXJlcyA9IHRoaXMuaW5zdGFuY2UuZ2V0X3Byb3BlcnR5KFBFUlNJU1RFTkNFX0VBUkxZX0FDQ0VTU19GRUFUVVJFUylcblxuICAgICAgICBpZiAoIWV4aXN0aW5nX2Vhcmx5X2FjY2Vzc19mZWF0dXJlcyB8fCBmb3JjZV9yZWxvYWQpIHtcbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2UuX3NlbmRfcmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgdHJhbnNwb3J0OiAnWEhSJyxcbiAgICAgICAgICAgICAgICB1cmw6IHRoaXMuaW5zdGFuY2UucmVxdWVzdFJvdXRlci5lbmRwb2ludEZvcihcbiAgICAgICAgICAgICAgICAgICAgJ2FwaScsXG4gICAgICAgICAgICAgICAgICAgIGAvYXBpL2Vhcmx5X2FjY2Vzc19mZWF0dXJlcy8/dG9rZW49JHt0aGlzLmluc3RhbmNlLmNvbmZpZy50b2tlbn1gXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgICAgIGNhbGxiYWNrOiAocmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5qc29uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBlYXJseUFjY2Vzc0ZlYXR1cmVzID0gKHJlc3BvbnNlLmpzb24gYXMgRWFybHlBY2Nlc3NGZWF0dXJlUmVzcG9uc2UpLmVhcmx5QWNjZXNzRmVhdHVyZXNcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnN0YW5jZS5wZXJzaXN0ZW5jZT8ucmVnaXN0ZXIoeyBbUEVSU0lTVEVOQ0VfRUFSTFlfQUNDRVNTX0ZFQVRVUkVTXTogZWFybHlBY2Nlc3NGZWF0dXJlcyB9KVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soZWFybHlBY2Nlc3NGZWF0dXJlcylcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhleGlzdGluZ19lYXJseV9hY2Nlc3NfZmVhdHVyZXMpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBfcHJlcGFyZUZlYXR1cmVGbGFnc0ZvckNhbGxiYWNrcygpOiB7IGZsYWdzOiBzdHJpbmdbXTsgZmxhZ1ZhcmlhbnRzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmcgfCBib29sZWFuPiB9IHtcbiAgICAgICAgY29uc3QgZmxhZ3MgPSB0aGlzLmdldEZsYWdzKClcbiAgICAgICAgY29uc3QgZmxhZ1ZhcmlhbnRzID0gdGhpcy5nZXRGbGFnVmFyaWFudHMoKVxuXG4gICAgICAgIC8vIFJldHVybiB0cnV0aHlcbiAgICAgICAgY29uc3QgdHJ1dGh5RmxhZ3MgPSBmbGFncy5maWx0ZXIoKGZsYWcpID0+IGZsYWdWYXJpYW50c1tmbGFnXSlcbiAgICAgICAgY29uc3QgdHJ1dGh5RmxhZ1ZhcmlhbnRzID0gT2JqZWN0LmtleXMoZmxhZ1ZhcmlhbnRzKVxuICAgICAgICAgICAgLmZpbHRlcigodmFyaWFudEtleSkgPT4gZmxhZ1ZhcmlhbnRzW3ZhcmlhbnRLZXldKVxuICAgICAgICAgICAgLnJlZHVjZSgocmVzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmcgfCBib29sZWFuPiwga2V5KSA9PiB7XG4gICAgICAgICAgICAgICAgcmVzW2tleV0gPSBmbGFnVmFyaWFudHNba2V5XVxuICAgICAgICAgICAgICAgIHJldHVybiByZXNcbiAgICAgICAgICAgIH0sIHt9KVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBmbGFnczogdHJ1dGh5RmxhZ3MsXG4gICAgICAgICAgICBmbGFnVmFyaWFudHM6IHRydXRoeUZsYWdWYXJpYW50cyxcbiAgICAgICAgfVxuICAgIH1cblxuICAgIF9maXJlRmVhdHVyZUZsYWdzQ2FsbGJhY2tzKGVycm9yc0xvYWRpbmc/OiBib29sZWFuKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHsgZmxhZ3MsIGZsYWdWYXJpYW50cyB9ID0gdGhpcy5fcHJlcGFyZUZlYXR1cmVGbGFnc0ZvckNhbGxiYWNrcygpXG4gICAgICAgIHRoaXMuZmVhdHVyZUZsYWdFdmVudEhhbmRsZXJzLmZvckVhY2goKGhhbmRsZXIpID0+IGhhbmRsZXIoZmxhZ3MsIGZsYWdWYXJpYW50cywgeyBlcnJvcnNMb2FkaW5nIH0pKVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCBvdmVycmlkZSBwZXJzb24gcHJvcGVydGllcyBmb3IgZmVhdHVyZSBmbGFncy5cbiAgICAgKiBUaGlzIGlzIHVzZWQgd2hlbiBkZWFsaW5nIHdpdGggbmV3IHBlcnNvbnMgLyB3aGVyZSB5b3UgZG9uJ3Qgd2FudCB0byB3YWl0IGZvciBpbmdlc3Rpb25cbiAgICAgKiB0byB1cGRhdGUgdXNlciBwcm9wZXJ0aWVzLlxuICAgICAqL1xuICAgIHNldFBlcnNvblByb3BlcnRpZXNGb3JGbGFncyhwcm9wZXJ0aWVzOiBQcm9wZXJ0aWVzLCByZWxvYWRGZWF0dXJlRmxhZ3MgPSB0cnVlKTogdm9pZCB7XG4gICAgICAgIC8vIEdldCBwZXJzaXN0ZWQgcGVyc29uIHByb3BlcnRpZXNcbiAgICAgICAgY29uc3QgZXhpc3RpbmdQcm9wZXJ0aWVzID0gdGhpcy5pbnN0YW5jZS5nZXRfcHJvcGVydHkoU1RPUkVEX1BFUlNPTl9QUk9QRVJUSUVTX0tFWSkgfHwge31cblxuICAgICAgICB0aGlzLmluc3RhbmNlLnJlZ2lzdGVyKHtcbiAgICAgICAgICAgIFtTVE9SRURfUEVSU09OX1BST1BFUlRJRVNfS0VZXToge1xuICAgICAgICAgICAgICAgIC4uLmV4aXN0aW5nUHJvcGVydGllcyxcbiAgICAgICAgICAgICAgICAuLi5wcm9wZXJ0aWVzLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSlcblxuICAgICAgICBpZiAocmVsb2FkRmVhdHVyZUZsYWdzKSB7XG4gICAgICAgICAgICB0aGlzLmluc3RhbmNlLnJlbG9hZEZlYXR1cmVGbGFncygpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXNldFBlcnNvblByb3BlcnRpZXNGb3JGbGFncygpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5pbnN0YW5jZS51bnJlZ2lzdGVyKFNUT1JFRF9QRVJTT05fUFJPUEVSVElFU19LRVkpXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IG92ZXJyaWRlIGdyb3VwIHByb3BlcnRpZXMgZm9yIGZlYXR1cmUgZmxhZ3MuXG4gICAgICogVGhpcyBpcyB1c2VkIHdoZW4gZGVhbGluZyB3aXRoIG5ldyBncm91cHMgLyB3aGVyZSB5b3UgZG9uJ3Qgd2FudCB0byB3YWl0IGZvciBpbmdlc3Rpb25cbiAgICAgKiB0byB1cGRhdGUgcHJvcGVydGllcy5cbiAgICAgKiBUYWtlcyBpbiBhbiBvYmplY3QsIHRoZSBrZXkgb2Ygd2hpY2ggaXMgdGhlIGdyb3VwIHR5cGUuXG4gICAgICogRm9yIGV4YW1wbGU6XG4gICAgICogICAgIHNldEdyb3VwUHJvcGVydGllc0ZvckZsYWdzKHsnb3JnYW5pemF0aW9uJzogeyBuYW1lOiAnQ1laJywgZW1wbG95ZWVzOiAnMTEnIH0gfSlcbiAgICAgKi9cbiAgICBzZXRHcm91cFByb3BlcnRpZXNGb3JGbGFncyhwcm9wZXJ0aWVzOiB7IFt0eXBlOiBzdHJpbmddOiBQcm9wZXJ0aWVzIH0sIHJlbG9hZEZlYXR1cmVGbGFncyA9IHRydWUpOiB2b2lkIHtcbiAgICAgICAgLy8gR2V0IHBlcnNpc3RlZCBncm91cCBwcm9wZXJ0aWVzXG4gICAgICAgIGNvbnN0IGV4aXN0aW5nUHJvcGVydGllcyA9IHRoaXMuaW5zdGFuY2UuZ2V0X3Byb3BlcnR5KFNUT1JFRF9HUk9VUF9QUk9QRVJUSUVTX0tFWSkgfHwge31cblxuICAgICAgICBpZiAoT2JqZWN0LmtleXMoZXhpc3RpbmdQcm9wZXJ0aWVzKS5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKGV4aXN0aW5nUHJvcGVydGllcykuZm9yRWFjaCgoZ3JvdXBUeXBlKSA9PiB7XG4gICAgICAgICAgICAgICAgZXhpc3RpbmdQcm9wZXJ0aWVzW2dyb3VwVHlwZV0gPSB7XG4gICAgICAgICAgICAgICAgICAgIC4uLmV4aXN0aW5nUHJvcGVydGllc1tncm91cFR5cGVdLFxuICAgICAgICAgICAgICAgICAgICAuLi5wcm9wZXJ0aWVzW2dyb3VwVHlwZV0sXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGRlbGV0ZSBwcm9wZXJ0aWVzW2dyb3VwVHlwZV1cbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmluc3RhbmNlLnJlZ2lzdGVyKHtcbiAgICAgICAgICAgIFtTVE9SRURfR1JPVVBfUFJPUEVSVElFU19LRVldOiB7XG4gICAgICAgICAgICAgICAgLi4uZXhpc3RpbmdQcm9wZXJ0aWVzLFxuICAgICAgICAgICAgICAgIC4uLnByb3BlcnRpZXMsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KVxuXG4gICAgICAgIGlmIChyZWxvYWRGZWF0dXJlRmxhZ3MpIHtcbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2UucmVsb2FkRmVhdHVyZUZsYWdzKClcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlc2V0R3JvdXBQcm9wZXJ0aWVzRm9yRmxhZ3MoZ3JvdXBfdHlwZT86IHN0cmluZyk6IHZvaWQge1xuICAgICAgICBpZiAoZ3JvdXBfdHlwZSkge1xuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdQcm9wZXJ0aWVzID0gdGhpcy5pbnN0YW5jZS5nZXRfcHJvcGVydHkoU1RPUkVEX0dST1VQX1BST1BFUlRJRVNfS0VZKSB8fCB7fVxuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZS5yZWdpc3Rlcih7XG4gICAgICAgICAgICAgICAgW1NUT1JFRF9HUk9VUF9QUk9QRVJUSUVTX0tFWV06IHsgLi4uZXhpc3RpbmdQcm9wZXJ0aWVzLCBbZ3JvdXBfdHlwZV06IHt9IH0sXG4gICAgICAgICAgICB9KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZS51bnJlZ2lzdGVyKFNUT1JFRF9HUk9VUF9QUk9QRVJUSUVTX0tFWSlcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsICIvKipcbiAqIHV1aWR2NzogQW4gZXhwZXJpbWVudGFsIGltcGxlbWVudGF0aW9uIG9mIHRoZSBwcm9wb3NlZCBVVUlEIFZlcnNpb24gN1xuICpcbiAqIEBsaWNlbnNlIEFwYWNoZS0yLjBcbiAqIEBjb3B5cmlnaHQgMjAyMS0yMDIzIExpb3NLXG4gKiBAcGFja2FnZURvY3VtZW50YXRpb25cbiAqXG4gKiBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9MaW9zSy91dWlkdjcvYmxvYi9lNTAxNDYyZWEzZDIzMjQxZGUxMzE5MmNlYWU3MjY5NTZmOWIzYjdkL3NyYy9pbmRleC50c1xuICovXG5cbi8vIHBvbHlmaWxsIGZvciBJRTExXG5pbXBvcnQgeyB3aW5kb3cgfSBmcm9tICcuL3V0aWxzL2dsb2JhbHMnXG5cbmltcG9ydCB7IF9pc051bWJlciwgX2lzVW5kZWZpbmVkIH0gZnJvbSAnLi91dGlscy90eXBlLXV0aWxzJ1xuXG5pZiAoIU1hdGgudHJ1bmMpIHtcbiAgICBNYXRoLnRydW5jID0gZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgcmV0dXJuIHYgPCAwID8gTWF0aC5jZWlsKHYpIDogTWF0aC5mbG9vcih2KVxuICAgIH1cbn1cblxuLy8gcG9seWZpbGwgZm9yIElFMTFcbmlmICghTnVtYmVyLmlzSW50ZWdlcikge1xuICAgIE51bWJlci5pc0ludGVnZXIgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIF9pc051bWJlcih2YWx1ZSkgJiYgaXNGaW5pdGUodmFsdWUpICYmIE1hdGguZmxvb3IodmFsdWUpID09PSB2YWx1ZVxuICAgIH1cbn1cblxuY29uc3QgRElHSVRTID0gJzAxMjM0NTY3ODlhYmNkZWYnXG5cbi8qKiBSZXByZXNlbnRzIGEgVVVJRCBhcyBhIDE2LWJ5dGUgYnl0ZSBhcnJheS4gKi9cbmV4cG9ydCBjbGFzcyBVVUlEIHtcbiAgICAvKiogQHBhcmFtIGJ5dGVzIC0gVGhlIDE2LWJ5dGUgYnl0ZSBhcnJheSByZXByZXNlbnRhdGlvbi4gKi9cbiAgICBjb25zdHJ1Y3RvcihyZWFkb25seSBieXRlczogUmVhZG9ubHk8VWludDhBcnJheT4pIHtcbiAgICAgICAgaWYgKGJ5dGVzLmxlbmd0aCAhPT0gMTYpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ25vdCAxMjgtYml0IGxlbmd0aCcpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBCdWlsZHMgYSBieXRlIGFycmF5IGZyb20gVVVJRHY3IGZpZWxkIHZhbHVlcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB1bml4VHNNcyAtIEEgNDgtYml0IGB1bml4X3RzX21zYCBmaWVsZCB2YWx1ZS5cbiAgICAgKiBAcGFyYW0gcmFuZEEgLSBBIDEyLWJpdCBgcmFuZF9hYCBmaWVsZCB2YWx1ZS5cbiAgICAgKiBAcGFyYW0gcmFuZEJIaSAtIFRoZSBoaWdoZXIgMzAgYml0cyBvZiA2Mi1iaXQgYHJhbmRfYmAgZmllbGQgdmFsdWUuXG4gICAgICogQHBhcmFtIHJhbmRCTG8gLSBUaGUgbG93ZXIgMzIgYml0cyBvZiA2Mi1iaXQgYHJhbmRfYmAgZmllbGQgdmFsdWUuXG4gICAgICovXG4gICAgc3RhdGljIGZyb21GaWVsZHNWNyh1bml4VHNNczogbnVtYmVyLCByYW5kQTogbnVtYmVyLCByYW5kQkhpOiBudW1iZXIsIHJhbmRCTG86IG51bWJlcik6IFVVSUQge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgICAhTnVtYmVyLmlzSW50ZWdlcih1bml4VHNNcykgfHxcbiAgICAgICAgICAgICFOdW1iZXIuaXNJbnRlZ2VyKHJhbmRBKSB8fFxuICAgICAgICAgICAgIU51bWJlci5pc0ludGVnZXIocmFuZEJIaSkgfHxcbiAgICAgICAgICAgICFOdW1iZXIuaXNJbnRlZ2VyKHJhbmRCTG8pIHx8XG4gICAgICAgICAgICB1bml4VHNNcyA8IDAgfHxcbiAgICAgICAgICAgIHJhbmRBIDwgMCB8fFxuICAgICAgICAgICAgcmFuZEJIaSA8IDAgfHxcbiAgICAgICAgICAgIHJhbmRCTG8gPCAwIHx8XG4gICAgICAgICAgICB1bml4VHNNcyA+IDB4ZmZmZl9mZmZmX2ZmZmYgfHxcbiAgICAgICAgICAgIHJhbmRBID4gMHhmZmYgfHxcbiAgICAgICAgICAgIHJhbmRCSGkgPiAweDNmZmZfZmZmZiB8fFxuICAgICAgICAgICAgcmFuZEJMbyA+IDB4ZmZmZl9mZmZmXG4gICAgICAgICkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ2ludmFsaWQgZmllbGQgdmFsdWUnKVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgYnl0ZXMgPSBuZXcgVWludDhBcnJheSgxNilcbiAgICAgICAgYnl0ZXNbMF0gPSB1bml4VHNNcyAvIDIgKiogNDBcbiAgICAgICAgYnl0ZXNbMV0gPSB1bml4VHNNcyAvIDIgKiogMzJcbiAgICAgICAgYnl0ZXNbMl0gPSB1bml4VHNNcyAvIDIgKiogMjRcbiAgICAgICAgYnl0ZXNbM10gPSB1bml4VHNNcyAvIDIgKiogMTZcbiAgICAgICAgYnl0ZXNbNF0gPSB1bml4VHNNcyAvIDIgKiogOFxuICAgICAgICBieXRlc1s1XSA9IHVuaXhUc01zXG4gICAgICAgIGJ5dGVzWzZdID0gMHg3MCB8IChyYW5kQSA+Pj4gOClcbiAgICAgICAgYnl0ZXNbN10gPSByYW5kQVxuICAgICAgICBieXRlc1s4XSA9IDB4ODAgfCAocmFuZEJIaSA+Pj4gMjQpXG4gICAgICAgIGJ5dGVzWzldID0gcmFuZEJIaSA+Pj4gMTZcbiAgICAgICAgYnl0ZXNbMTBdID0gcmFuZEJIaSA+Pj4gOFxuICAgICAgICBieXRlc1sxMV0gPSByYW5kQkhpXG4gICAgICAgIGJ5dGVzWzEyXSA9IHJhbmRCTG8gPj4+IDI0XG4gICAgICAgIGJ5dGVzWzEzXSA9IHJhbmRCTG8gPj4+IDE2XG4gICAgICAgIGJ5dGVzWzE0XSA9IHJhbmRCTG8gPj4+IDhcbiAgICAgICAgYnl0ZXNbMTVdID0gcmFuZEJMb1xuICAgICAgICByZXR1cm4gbmV3IFVVSUQoYnl0ZXMpXG4gICAgfVxuXG4gICAgLyoqIEByZXR1cm5zIFRoZSA4LTQtNC00LTEyIGNhbm9uaWNhbCBoZXhhZGVjaW1hbCBzdHJpbmcgcmVwcmVzZW50YXRpb24uICovXG4gICAgdG9TdHJpbmcoKTogc3RyaW5nIHtcbiAgICAgICAgbGV0IHRleHQgPSAnJ1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuYnl0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRleHQgPSB0ZXh0ICsgRElHSVRTLmNoYXJBdCh0aGlzLmJ5dGVzW2ldID4+PiA0KSArIERJR0lUUy5jaGFyQXQodGhpcy5ieXRlc1tpXSAmIDB4ZilcbiAgICAgICAgICAgIGlmIChpID09PSAzIHx8IGkgPT09IDUgfHwgaSA9PT0gNyB8fCBpID09PSA5KSB7XG4gICAgICAgICAgICAgICAgdGV4dCArPSAnLSdcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0ZXh0Lmxlbmd0aCAhPT0gMzYpIHtcbiAgICAgICAgICAgIC8vIFdlIHNhdyBvbmUgY3VzdG9tZXIgd2hvc2UgYnVuZGxpbmcgY29kZSB3YXMgbWFuZ2xpbmcgdGhlIFVVSUQgZ2VuZXJhdGlvblxuICAgICAgICAgICAgLy8gcmF0aGVyIHRoYW4gYWNjZXB0IGEgYmFkIFVVSUQsIHdlIHRocm93IGFuIGVycm9yIGhlcmUuXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgVVVJRHY3IHdhcyBnZW5lcmF0ZWQnKVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0ZXh0XG4gICAgfVxuXG4gICAgLyoqIENyZWF0ZXMgYW4gb2JqZWN0IGZyb20gYHRoaXNgLiAqL1xuICAgIGNsb25lKCk6IFVVSUQge1xuICAgICAgICByZXR1cm4gbmV3IFVVSUQodGhpcy5ieXRlcy5zbGljZSgwKSlcbiAgICB9XG5cbiAgICAvKiogUmV0dXJucyB0cnVlIGlmIGB0aGlzYCBpcyBlcXVpdmFsZW50IHRvIGBvdGhlcmAuICovXG4gICAgZXF1YWxzKG90aGVyOiBVVUlEKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbXBhcmVUbyhvdGhlcikgPT09IDBcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgbmVnYXRpdmUgaW50ZWdlciwgemVybywgb3IgcG9zaXRpdmUgaW50ZWdlciBpZiBgdGhpc2AgaXMgbGVzc1xuICAgICAqIHRoYW4sIGVxdWFsIHRvLCBvciBncmVhdGVyIHRoYW4gYG90aGVyYCwgcmVzcGVjdGl2ZWx5LlxuICAgICAqL1xuICAgIGNvbXBhcmVUbyhvdGhlcjogVVVJRCk6IG51bWJlciB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTY7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgZGlmZiA9IHRoaXMuYnl0ZXNbaV0gLSBvdGhlci5ieXRlc1tpXVxuICAgICAgICAgICAgaWYgKGRpZmYgIT09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gTWF0aC5zaWduKGRpZmYpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIDBcbiAgICB9XG59XG5cbi8qKiBFbmNhcHN1bGF0ZXMgdGhlIG1vbm90b25pYyBjb3VudGVyIHN0YXRlLiAqL1xuY2xhc3MgVjdHZW5lcmF0b3Ige1xuICAgIHByaXZhdGUgdGltZXN0YW1wID0gMFxuICAgIHByaXZhdGUgY291bnRlciA9IDBcbiAgICBwcml2YXRlIHJlYWRvbmx5IHJhbmRvbSA9IG5ldyBEZWZhdWx0UmFuZG9tKClcblxuICAgIC8qKlxuICAgICAqIEdlbmVyYXRlcyBhIG5ldyBVVUlEdjcgb2JqZWN0IGZyb20gdGhlIGN1cnJlbnQgdGltZXN0YW1wLCBvciByZXNldHMgdGhlXG4gICAgICogZ2VuZXJhdG9yIHVwb24gc2lnbmlmaWNhbnQgdGltZXN0YW1wIHJvbGxiYWNrLlxuICAgICAqXG4gICAgICogVGhpcyBtZXRob2QgcmV0dXJucyBtb25vdG9uaWNhbGx5IGluY3JlYXNpbmcgVVVJRHMgdW5sZXNzIHRoZSB1cC10by1kYXRlXG4gICAgICogdGltZXN0YW1wIGlzIHNpZ25pZmljYW50bHkgKGJ5IHRlbiBzZWNvbmRzIG9yIG1vcmUpIHNtYWxsZXIgdGhhbiB0aGUgb25lXG4gICAgICogZW1iZWRkZWQgaW4gdGhlIGltbWVkaWF0ZWx5IHByZWNlZGluZyBVVUlELiBJZiBzdWNoIGEgc2lnbmlmaWNhbnQgY2xvY2tcbiAgICAgKiByb2xsYmFjayBpcyBkZXRlY3RlZCwgdGhpcyBtZXRob2QgcmVzZXRzIHRoZSBnZW5lcmF0b3IgYW5kIHJldHVybnMgYSBuZXdcbiAgICAgKiBVVUlEIGJhc2VkIG9uIHRoZSBjdXJyZW50IHRpbWVzdGFtcC5cbiAgICAgKi9cbiAgICBnZW5lcmF0ZSgpOiBVVUlEIHtcbiAgICAgICAgY29uc3QgdmFsdWUgPSB0aGlzLmdlbmVyYXRlT3JBYm9ydCgpXG4gICAgICAgIGlmICghX2lzVW5kZWZpbmVkKHZhbHVlKSkge1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyByZXNldCBzdGF0ZSBhbmQgcmVzdW1lXG4gICAgICAgICAgICB0aGlzLnRpbWVzdGFtcCA9IDBcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlQWZ0ZXJSZXNldCA9IHRoaXMuZ2VuZXJhdGVPckFib3J0KClcbiAgICAgICAgICAgIGlmIChfaXNVbmRlZmluZWQodmFsdWVBZnRlclJlc2V0KSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ291bGQgbm90IGdlbmVyYXRlIFVVSUQgYWZ0ZXIgdGltZXN0YW1wIHJlc2V0JylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB2YWx1ZUFmdGVyUmVzZXRcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdlbmVyYXRlcyBhIG5ldyBVVUlEdjcgb2JqZWN0IGZyb20gdGhlIGN1cnJlbnQgdGltZXN0YW1wLCBvciByZXR1cm5zXG4gICAgICogYHVuZGVmaW5lZGAgdXBvbiBzaWduaWZpY2FudCB0aW1lc3RhbXAgcm9sbGJhY2suXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCByZXR1cm5zIG1vbm90b25pY2FsbHkgaW5jcmVhc2luZyBVVUlEcyB1bmxlc3MgdGhlIHVwLXRvLWRhdGVcbiAgICAgKiB0aW1lc3RhbXAgaXMgc2lnbmlmaWNhbnRseSAoYnkgdGVuIHNlY29uZHMgb3IgbW9yZSkgc21hbGxlciB0aGFuIHRoZSBvbmVcbiAgICAgKiBlbWJlZGRlZCBpbiB0aGUgaW1tZWRpYXRlbHkgcHJlY2VkaW5nIFVVSUQuIElmIHN1Y2ggYSBzaWduaWZpY2FudCBjbG9ja1xuICAgICAqIHJvbGxiYWNrIGlzIGRldGVjdGVkLCB0aGlzIG1ldGhvZCBhYm9ydHMgYW5kIHJldHVybnMgYHVuZGVmaW5lZGAuXG4gICAgICovXG4gICAgZ2VuZXJhdGVPckFib3J0KCk6IFVVSUQgfCB1bmRlZmluZWQge1xuICAgICAgICBjb25zdCBNQVhfQ09VTlRFUiA9IDB4M2ZmX2ZmZmZfZmZmZlxuICAgICAgICBjb25zdCBST0xMQkFDS19BTExPV0FOQ0UgPSAxMF8wMDAgLy8gMTAgc2Vjb25kc1xuXG4gICAgICAgIGNvbnN0IHRzID0gRGF0ZS5ub3coKVxuICAgICAgICBpZiAodHMgPiB0aGlzLnRpbWVzdGFtcCkge1xuICAgICAgICAgICAgdGhpcy50aW1lc3RhbXAgPSB0c1xuICAgICAgICAgICAgdGhpcy5yZXNldENvdW50ZXIoKVxuICAgICAgICB9IGVsc2UgaWYgKHRzICsgUk9MTEJBQ0tfQUxMT1dBTkNFID4gdGhpcy50aW1lc3RhbXApIHtcbiAgICAgICAgICAgIC8vIGdvIG9uIHdpdGggcHJldmlvdXMgdGltZXN0YW1wIGlmIG5ldyBvbmUgaXMgbm90IG11Y2ggc21hbGxlclxuICAgICAgICAgICAgdGhpcy5jb3VudGVyKytcbiAgICAgICAgICAgIGlmICh0aGlzLmNvdW50ZXIgPiBNQVhfQ09VTlRFUikge1xuICAgICAgICAgICAgICAgIC8vIGluY3JlbWVudCB0aW1lc3RhbXAgYXQgY291bnRlciBvdmVyZmxvd1xuICAgICAgICAgICAgICAgIHRoaXMudGltZXN0YW1wKytcbiAgICAgICAgICAgICAgICB0aGlzLnJlc2V0Q291bnRlcigpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBhYm9ydCBpZiBjbG9jayB3ZW50IGJhY2t3YXJkcyB0byB1bmJlYXJhYmxlIGV4dGVudFxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFVVSUQuZnJvbUZpZWxkc1Y3KFxuICAgICAgICAgICAgdGhpcy50aW1lc3RhbXAsXG4gICAgICAgICAgICBNYXRoLnRydW5jKHRoaXMuY291bnRlciAvIDIgKiogMzApLFxuICAgICAgICAgICAgdGhpcy5jb3VudGVyICYgKDIgKiogMzAgLSAxKSxcbiAgICAgICAgICAgIHRoaXMucmFuZG9tLm5leHRVaW50MzIoKVxuICAgICAgICApXG4gICAgfVxuXG4gICAgLyoqIEluaXRpYWxpemVzIHRoZSBjb3VudGVyIGF0IGEgNDItYml0IHJhbmRvbSBpbnRlZ2VyLiAqL1xuICAgIHByaXZhdGUgcmVzZXRDb3VudGVyKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmNvdW50ZXIgPSB0aGlzLnJhbmRvbS5uZXh0VWludDMyKCkgKiAweDQwMCArICh0aGlzLnJhbmRvbS5uZXh0VWludDMyKCkgJiAweDNmZilcbiAgICB9XG59XG5cbi8qKiBBIGdsb2JhbCBmbGFnIHRvIGZvcmNlIHVzZSBvZiBjcnlwdG9ncmFwaGljYWxseSBzdHJvbmcgUk5HLiAqL1xuZGVjbGFyZSBjb25zdCBVVUlEVjdfREVOWV9XRUFLX1JORzogYm9vbGVhblxuXG4vKiogU3RvcmVzIGBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKClgIGF2YWlsYWJsZSBpbiB0aGUgZW52aXJvbm1lbnQuICovXG5sZXQgZ2V0UmFuZG9tVmFsdWVzOiA8VCBleHRlbmRzIFVpbnQ4QXJyYXkgfCBVaW50MzJBcnJheT4oYnVmZmVyOiBUKSA9PiBUID0gKGJ1ZmZlcikgPT4ge1xuICAgIC8vIGZhbGwgYmFjayBvbiBNYXRoLnJhbmRvbSgpIHVubGVzcyB0aGUgZmxhZyBpcyBzZXQgdG8gdHJ1ZVxuICAgIC8vIFRSSUNLWTogZG9uJ3QgdXNlIHRoZSBfaXNVbmRlZmluZWQgbWV0aG9kIGhlcmUgYXMgY2FuJ3QgcGFzcyB0aGUgcmVmZXJlbmNlXG4gICAgaWYgKHR5cGVvZiBVVUlEVjdfREVOWV9XRUFLX1JORyAhPT0gJ3VuZGVmaW5lZCcgJiYgVVVJRFY3X0RFTllfV0VBS19STkcpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdubyBjcnlwdG9ncmFwaGljYWxseSBzdHJvbmcgUk5HIGF2YWlsYWJsZScpXG4gICAgfVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBidWZmZXIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgYnVmZmVyW2ldID0gTWF0aC50cnVuYyhNYXRoLnJhbmRvbSgpICogMHgxXzAwMDApICogMHgxXzAwMDAgKyBNYXRoLnRydW5jKE1hdGgucmFuZG9tKCkgKiAweDFfMDAwMClcbiAgICB9XG4gICAgcmV0dXJuIGJ1ZmZlclxufVxuXG4vLyBkZXRlY3QgV2ViIENyeXB0byBBUElcbmlmICh3aW5kb3cgJiYgIV9pc1VuZGVmaW5lZCh3aW5kb3cuY3J5cHRvKSAmJiBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKSB7XG4gICAgZ2V0UmFuZG9tVmFsdWVzID0gKGJ1ZmZlcikgPT4gY3J5cHRvLmdldFJhbmRvbVZhbHVlcyhidWZmZXIpXG59XG5cbi8qKlxuICogV3JhcHMgYGNyeXB0by5nZXRSYW5kb21WYWx1ZXMoKWAgYW5kIGNvbXBhdGlibGVzIHRvIGVuYWJsZSBidWZmZXJpbmc7IHRoaXNcbiAqIHVzZXMgYSBzbWFsbCBidWZmZXIgYnkgZGVmYXVsdCB0byBhdm9pZCB1bmJlYXJhYmxlIHRocm91Z2hwdXQgZGVjbGluZSBpbiBzb21lXG4gKiBlbnZpcm9ubWVudHMgYXMgd2VsbCBhcyB0aGUgd2FzdGUgb2YgdGltZSBhbmQgc3BhY2UgZm9yIHVudXNlZCB2YWx1ZXMuXG4gKi9cbmNsYXNzIERlZmF1bHRSYW5kb20ge1xuICAgIHByaXZhdGUgcmVhZG9ubHkgYnVmZmVyID0gbmV3IFVpbnQzMkFycmF5KDgpXG4gICAgcHJpdmF0ZSBjdXJzb3IgPSBJbmZpbml0eVxuICAgIG5leHRVaW50MzIoKTogbnVtYmVyIHtcbiAgICAgICAgaWYgKHRoaXMuY3Vyc29yID49IHRoaXMuYnVmZmVyLmxlbmd0aCkge1xuICAgICAgICAgICAgZ2V0UmFuZG9tVmFsdWVzKHRoaXMuYnVmZmVyKVxuICAgICAgICAgICAgdGhpcy5jdXJzb3IgPSAwXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuYnVmZmVyW3RoaXMuY3Vyc29yKytdXG4gICAgfVxufVxuXG5sZXQgZGVmYXVsdEdlbmVyYXRvcjogVjdHZW5lcmF0b3IgfCB1bmRlZmluZWRcblxuLyoqXG4gKiBHZW5lcmF0ZXMgYSBVVUlEdjcgc3RyaW5nLlxuICpcbiAqIEByZXR1cm5zIFRoZSA4LTQtNC00LTEyIGNhbm9uaWNhbCBoZXhhZGVjaW1hbCBzdHJpbmcgcmVwcmVzZW50YXRpb25cbiAqIChcInh4eHh4eHh4LXh4eHgteHh4eC14eHh4LXh4eHh4eHh4eHh4eFwiKS5cbiAqL1xuZXhwb3J0IGNvbnN0IHV1aWR2NyA9ICgpOiBzdHJpbmcgPT4gdXVpZHY3b2JqKCkudG9TdHJpbmcoKVxuXG4vKiogR2VuZXJhdGVzIGEgVVVJRHY3IG9iamVjdC4gKi9cbmNvbnN0IHV1aWR2N29iaiA9ICgpOiBVVUlEID0+IChkZWZhdWx0R2VuZXJhdG9yIHx8IChkZWZhdWx0R2VuZXJhdG9yID0gbmV3IFY3R2VuZXJhdG9yKCkpKS5nZW5lcmF0ZSgpXG4iLCAiaW1wb3J0IHsgX2V4dGVuZCB9IGZyb20gJy4vdXRpbHMnXG5pbXBvcnQgeyBQZXJzaXN0ZW50U3RvcmUsIFByb3BlcnRpZXMgfSBmcm9tICcuL3R5cGVzJ1xuaW1wb3J0IHsgRElTVElOQ1RfSUQsIFNFU1NJT05fSUQsIFNFU1NJT05fUkVDT1JESU5HX0lTX1NBTVBMRUQgfSBmcm9tICcuL2NvbnN0YW50cydcblxuaW1wb3J0IHsgX2lzTnVsbCwgX2lzVW5kZWZpbmVkIH0gZnJvbSAnLi91dGlscy90eXBlLXV0aWxzJ1xuaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSAnLi91dGlscy9sb2dnZXInXG5pbXBvcnQgeyB3aW5kb3csIGRvY3VtZW50IH0gZnJvbSAnLi91dGlscy9nbG9iYWxzJ1xuaW1wb3J0IHsgdXVpZHY3IH0gZnJvbSAnLi91dWlkdjcnXG5cbmNvbnN0IFkxOTcwID0gJ1RodSwgMDEgSmFuIDE5NzAgMDA6MDA6MDAgR01UJ1xuLy8gd2Ugc3RvcmUgdGhlIGRpc2NvdmVyZWQgc3ViZG9tYWluIGluIG1lbW9yeSBiZWNhdXNlIGl0IG1pZ2h0IGJlIHJlYWQgbXVsdGlwbGUgdGltZXNcbmxldCBmaXJzdE5vblB1YmxpY1N1YkRvbWFpbiA9ICcnXG5cbi8vIGhlbHBlciB0byBhbGxvdyB0ZXN0cyB0byBjbGVhciB0aGlzIFwiY2FjaGVcIlxuZXhwb3J0IGNvbnN0IHJlc2V0U3ViRG9tYWluQ2FjaGUgPSAoKSA9PiB7XG4gICAgZmlyc3ROb25QdWJsaWNTdWJEb21haW4gPSAnJ1xufVxuXG4vKipcbiAqIEJyb3dzZXJzIGRvbid0IG9mZmVyIGEgd2F5IHRvIGNoZWNrIGlmIHNvbWV0aGluZyBpcyBhIHB1YmxpYyBzdWZmaXhcbiAqIGUuZy4gYC5jb20uYXVgLCBgLmlvYCwgYC5vcmcudWtgXG4gKlxuICogQnV0IHRoZXkgZG8gcmVqZWN0IGNvb2tpZXMgc2V0IG9uIHB1YmxpYyBzdWZmaXhlc1xuICogU2V0dGluZyBhIGNvb2tpZSBvbiBgLmNvLnVrYCB3b3VsZCBtZWFuIGl0IHdhcyBzZW50IGZvciBldmVyeSBgLmNvLnVrYCBzaXRlIHZpc2l0ZWRcbiAqXG4gKiBTbywgd2UgY2FuIHVzZSB0aGlzIHRvIGNoZWNrIGlmIGEgZG9tYWluIGlzIGEgcHVibGljIHN1ZmZpeFxuICogYnkgdHJ5aW5nIHRvIHNldCBhIGNvb2tpZSBvbiBhIHN1YmRvbWFpbiBvZiB0aGUgcHJvdmlkZWQgaG9zdG5hbWVcbiAqIHVudGlsIHRoZSBicm93c2VyIGFjY2VwdHMgaXRcbiAqXG4gKiBpbnNwaXJlZCBieSBodHRwczovL2dpdGh1Yi5jb20vQW5ndXNGdS9icm93c2VyLXJvb3QtZG9tYWluXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZWVrRmlyc3ROb25QdWJsaWNTdWJEb21haW4oaG9zdG5hbWU6IHN0cmluZywgY29va2llSmFyID0gZG9jdW1lbnQpOiBzdHJpbmcge1xuICAgIGlmIChmaXJzdE5vblB1YmxpY1N1YkRvbWFpbikge1xuICAgICAgICByZXR1cm4gZmlyc3ROb25QdWJsaWNTdWJEb21haW5cbiAgICB9XG5cbiAgICBpZiAoIWNvb2tpZUphcikge1xuICAgICAgICByZXR1cm4gJydcbiAgICB9XG4gICAgaWYgKFsnbG9jYWxob3N0JywgJzEyNy4wLjAuMSddLmluY2x1ZGVzKGhvc3RuYW1lKSkgcmV0dXJuICcnXG5cbiAgICBjb25zdCBsaXN0ID0gaG9zdG5hbWUuc3BsaXQoJy4nKVxuICAgIGxldCBsZW4gPSBNYXRoLm1pbihsaXN0Lmxlbmd0aCwgOCkgLy8gcGFyYW5vaWEgLSB3ZSBrbm93IHRoaXMgbnVtYmVyIHNob3VsZCBiZSBzbWFsbFxuICAgIGNvbnN0IGtleSA9ICdkbW5fY2hrXycgKyB1dWlkdjcoKVxuICAgIGNvbnN0IFIgPSBuZXcgUmVnRXhwKCcoXnw7KVxcXFxzKicgKyBrZXkgKyAnPTEnKVxuXG4gICAgd2hpbGUgKCFmaXJzdE5vblB1YmxpY1N1YkRvbWFpbiAmJiBsZW4tLSkge1xuICAgICAgICBjb25zdCBjYW5kaWRhdGUgPSBsaXN0LnNsaWNlKGxlbikuam9pbignLicpXG4gICAgICAgIGNvbnN0IGNhbmRpZGF0ZUNvb2tpZVZhbHVlID0ga2V5ICsgJz0xO2RvbWFpbj0uJyArIGNhbmRpZGF0ZVxuXG4gICAgICAgIC8vIHRyeSB0byBzZXQgY29va2llXG4gICAgICAgIGNvb2tpZUphci5jb29raWUgPSBjYW5kaWRhdGVDb29raWVWYWx1ZVxuXG4gICAgICAgIGlmIChSLnRlc3QoY29va2llSmFyLmNvb2tpZSkpIHtcbiAgICAgICAgICAgIC8vIHRoZSBjb29raWUgd2FzIGFjY2VwdGVkIGJ5IHRoZSBicm93c2VyLCByZW1vdmUgdGhlIHRlc3QgY29va2llXG4gICAgICAgICAgICBjb29raWVKYXIuY29va2llID0gY2FuZGlkYXRlQ29va2llVmFsdWUgKyAnO2V4cGlyZXM9JyArIFkxOTcwXG4gICAgICAgICAgICBmaXJzdE5vblB1YmxpY1N1YkRvbWFpbiA9IGNhbmRpZGF0ZVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGZpcnN0Tm9uUHVibGljU3ViRG9tYWluXG59XG5cbmNvbnN0IERPTUFJTl9NQVRDSF9SRUdFWCA9IC9bYS16MC05XVthLXowLTktXStcXC5bYS16XXsyLH0kL2lcbmNvbnN0IG9yaWdpbmFsQ29va2llRG9tYWluRm4gPSAoaG9zdG5hbWU6IHN0cmluZyk6IHN0cmluZyA9PiB7XG4gICAgY29uc3QgbWF0Y2hlcyA9IGhvc3RuYW1lLm1hdGNoKERPTUFJTl9NQVRDSF9SRUdFWClcbiAgICByZXR1cm4gbWF0Y2hlcyA/IG1hdGNoZXNbMF0gOiAnJ1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY2hvb3NlQ29va2llRG9tYWluKGhvc3RuYW1lOiBzdHJpbmcsIGNyb3NzX3N1YmRvbWFpbjogYm9vbGVhbiB8IHVuZGVmaW5lZCk6IHN0cmluZyB7XG4gICAgaWYgKGNyb3NzX3N1YmRvbWFpbikge1xuICAgICAgICAvLyBOT1RFOiBDb3VsZCB3ZSB1c2UgdGhpcyBmb3IgY3Jvc3MgZG9tYWluIHRyYWNraW5nP1xuICAgICAgICBsZXQgbWF0Y2hlZFN1YkRvbWFpbiA9IHNlZWtGaXJzdE5vblB1YmxpY1N1YkRvbWFpbihob3N0bmFtZSlcblxuICAgICAgICBpZiAoIW1hdGNoZWRTdWJEb21haW4pIHtcbiAgICAgICAgICAgIGNvbnN0IG9yaWdpbmFsTWF0Y2ggPSBvcmlnaW5hbENvb2tpZURvbWFpbkZuKGhvc3RuYW1lKVxuICAgICAgICAgICAgaWYgKG9yaWdpbmFsTWF0Y2ggIT09IG1hdGNoZWRTdWJEb21haW4pIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuaW5mbygnV2FybmluZzogY29va2llIHN1YmRvbWFpbiBkaXNjb3ZlcnkgbWlzbWF0Y2gnLCBvcmlnaW5hbE1hdGNoLCBtYXRjaGVkU3ViRG9tYWluKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbWF0Y2hlZFN1YkRvbWFpbiA9IG9yaWdpbmFsTWF0Y2hcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBtYXRjaGVkU3ViRG9tYWluID8gJzsgZG9tYWluPS4nICsgbWF0Y2hlZFN1YkRvbWFpbiA6ICcnXG4gICAgfVxuICAgIHJldHVybiAnJ1xufVxuXG4vLyBNZXRob2RzIHBhcnRpYWxseSBib3Jyb3dlZCBmcm9tIHF1aXJrc21vZGUub3JnL2pzL2Nvb2tpZXMuaHRtbFxuZXhwb3J0IGNvbnN0IGNvb2tpZVN0b3JlOiBQZXJzaXN0ZW50U3RvcmUgPSB7XG4gICAgaXNfc3VwcG9ydGVkOiAoKSA9PiAhIWRvY3VtZW50LFxuXG4gICAgZXJyb3I6IGZ1bmN0aW9uIChtc2cpIHtcbiAgICAgICAgbG9nZ2VyLmVycm9yKCdjb29raWVTdG9yZSBlcnJvcjogJyArIG1zZylcbiAgICB9LFxuXG4gICAgZ2V0OiBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICBpZiAoIWRvY3VtZW50KSB7XG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBuYW1lRVEgPSBuYW1lICsgJz0nXG4gICAgICAgICAgICBjb25zdCBjYSA9IGRvY3VtZW50LmNvb2tpZS5zcGxpdCgnOycpLmZpbHRlcigoeCkgPT4geC5sZW5ndGgpXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbGV0IGMgPSBjYVtpXVxuICAgICAgICAgICAgICAgIHdoaWxlIChjLmNoYXJBdCgwKSA9PSAnICcpIHtcbiAgICAgICAgICAgICAgICAgICAgYyA9IGMuc3Vic3RyaW5nKDEsIGMubGVuZ3RoKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoYy5pbmRleE9mKG5hbWVFUSkgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChjLnN1YnN0cmluZyhuYW1lRVEubGVuZ3RoLCBjLmxlbmd0aCkpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnIpIHt9XG4gICAgICAgIHJldHVybiBudWxsXG4gICAgfSxcblxuICAgIHBhcnNlOiBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICBsZXQgY29va2llXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb29raWUgPSBKU09OLnBhcnNlKGNvb2tpZVN0b3JlLmdldChuYW1lKSkgfHwge31cbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAvLyBub29wXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvb2tpZVxuICAgIH0sXG5cbiAgICBzZXQ6IGZ1bmN0aW9uIChuYW1lLCB2YWx1ZSwgZGF5cywgY3Jvc3Nfc3ViZG9tYWluLCBpc19zZWN1cmUpIHtcbiAgICAgICAgaWYgKCFkb2N1bWVudCkge1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGxldCBleHBpcmVzID0gJycsXG4gICAgICAgICAgICAgICAgc2VjdXJlID0gJydcblxuICAgICAgICAgICAgY29uc3QgY2RvbWFpbiA9IGNob29zZUNvb2tpZURvbWFpbihkb2N1bWVudC5sb2NhdGlvbi5ob3N0bmFtZSwgY3Jvc3Nfc3ViZG9tYWluKVxuXG4gICAgICAgICAgICBpZiAoZGF5cykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZSgpXG4gICAgICAgICAgICAgICAgZGF0ZS5zZXRUaW1lKGRhdGUuZ2V0VGltZSgpICsgZGF5cyAqIDI0ICogNjAgKiA2MCAqIDEwMDApXG4gICAgICAgICAgICAgICAgZXhwaXJlcyA9ICc7IGV4cGlyZXM9JyArIGRhdGUudG9VVENTdHJpbmcoKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoaXNfc2VjdXJlKSB7XG4gICAgICAgICAgICAgICAgc2VjdXJlID0gJzsgc2VjdXJlJ1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBuZXdfY29va2llX3ZhbCA9XG4gICAgICAgICAgICAgICAgbmFtZSArXG4gICAgICAgICAgICAgICAgJz0nICtcbiAgICAgICAgICAgICAgICBlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkodmFsdWUpKSArXG4gICAgICAgICAgICAgICAgZXhwaXJlcyArXG4gICAgICAgICAgICAgICAgJzsgU2FtZVNpdGU9TGF4OyBwYXRoPS8nICtcbiAgICAgICAgICAgICAgICBjZG9tYWluICtcbiAgICAgICAgICAgICAgICBzZWN1cmVcblxuICAgICAgICAgICAgLy8gNDA5NiBieXRlcyBpcyB0aGUgc2l6ZSBhdCB3aGljaCBzb21lIGJyb3dzZXJzIChlLmcuIGZpcmVmb3gpIHdpbGwgbm90IHN0b3JlIGEgY29va2llLCB3YXJuIHNsaWdodGx5IGJlZm9yZSB0aGF0XG4gICAgICAgICAgICBpZiAobmV3X2Nvb2tpZV92YWwubGVuZ3RoID4gNDA5NiAqIDAuOSkge1xuICAgICAgICAgICAgICAgIGxvZ2dlci53YXJuKCdjb29raWVTdG9yZSB3YXJuaW5nOiBsYXJnZSBjb29raWUsIGxlbj0nICsgbmV3X2Nvb2tpZV92YWwubGVuZ3RoKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBkb2N1bWVudC5jb29raWUgPSBuZXdfY29va2llX3ZhbFxuICAgICAgICAgICAgcmV0dXJuIG5ld19jb29raWVfdmFsXG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgcmVtb3ZlOiBmdW5jdGlvbiAobmFtZSwgY3Jvc3Nfc3ViZG9tYWluKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb29raWVTdG9yZS5zZXQobmFtZSwgJycsIC0xLCBjcm9zc19zdWJkb21haW4pXG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICB9LFxufVxuXG5sZXQgX2xvY2FsU3RvcmFnZV9zdXBwb3J0ZWQ6IGJvb2xlYW4gfCBudWxsID0gbnVsbFxuXG5leHBvcnQgY29uc3QgbG9jYWxTdG9yZTogUGVyc2lzdGVudFN0b3JlID0ge1xuICAgIGlzX3N1cHBvcnRlZDogZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIV9pc051bGwoX2xvY2FsU3RvcmFnZV9zdXBwb3J0ZWQpKSB7XG4gICAgICAgICAgICByZXR1cm4gX2xvY2FsU3RvcmFnZV9zdXBwb3J0ZWRcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBzdXBwb3J0ZWQgPSB0cnVlXG4gICAgICAgIGlmICghX2lzVW5kZWZpbmVkKHdpbmRvdykpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gJ19fbXBsc3N1cHBvcnRfXycsXG4gICAgICAgICAgICAgICAgICAgIHZhbCA9ICd4eXonXG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yZS5zZXQoa2V5LCB2YWwpXG4gICAgICAgICAgICAgICAgaWYgKGxvY2FsU3RvcmUuZ2V0KGtleSkgIT09ICdcInh5elwiJykge1xuICAgICAgICAgICAgICAgICAgICBzdXBwb3J0ZWQgPSBmYWxzZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsb2NhbFN0b3JlLnJlbW92ZShrZXkpXG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBzdXBwb3J0ZWQgPSBmYWxzZVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3VwcG9ydGVkID0gZmFsc2VcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXN1cHBvcnRlZCkge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdsb2NhbFN0b3JhZ2UgdW5zdXBwb3J0ZWQ7IGZhbGxpbmcgYmFjayB0byBjb29raWUgc3RvcmUnKVxuICAgICAgICB9XG5cbiAgICAgICAgX2xvY2FsU3RvcmFnZV9zdXBwb3J0ZWQgPSBzdXBwb3J0ZWRcbiAgICAgICAgcmV0dXJuIHN1cHBvcnRlZFxuICAgIH0sXG5cbiAgICBlcnJvcjogZnVuY3Rpb24gKG1zZykge1xuICAgICAgICBsb2dnZXIuZXJyb3IoJ2xvY2FsU3RvcmFnZSBlcnJvcjogJyArIG1zZylcbiAgICB9LFxuXG4gICAgZ2V0OiBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIHdpbmRvdz8ubG9jYWxTdG9yYWdlLmdldEl0ZW0obmFtZSlcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBsb2NhbFN0b3JlLmVycm9yKGVycilcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbFxuICAgIH0sXG5cbiAgICBwYXJzZTogZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKGxvY2FsU3RvcmUuZ2V0KG5hbWUpKSB8fCB7fVxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIC8vIG5vb3BcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbFxuICAgIH0sXG5cbiAgICBzZXQ6IGZ1bmN0aW9uIChuYW1lLCB2YWx1ZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgd2luZG93Py5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShuYW1lLCBKU09OLnN0cmluZ2lmeSh2YWx1ZSkpXG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgbG9jYWxTdG9yZS5lcnJvcihlcnIpXG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgcmVtb3ZlOiBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgd2luZG93Py5sb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShuYW1lKVxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIGxvY2FsU3RvcmUuZXJyb3IoZXJyKVxuICAgICAgICB9XG4gICAgfSxcbn1cblxuLy8gVXNlIGxvY2Fsc3RvcmFnZSBmb3IgbW9zdCBkYXRhIGJ1dCBzdGlsbCB1c2UgY29va2llIGZvciBDT09LSUVfUEVSU0lTVEVEX1BST1BFUlRJRVNcbi8vIFRoaXMgc29sdmVzIGlzc3VlcyB3aXRoIGNvb2tpZXMgaGF2aW5nIHRvbyBtdWNoIGRhdGEgaW4gdGhlbSBjYXVzaW5nIGhlYWRlcnMgdG9vIGxhcmdlXG4vLyBBbHNvIG1ha2VzIHN1cmUgd2UgZG9uJ3QgaGF2ZSB0byBzZW5kIGEgdG9uIG9mIGRhdGEgdG8gdGhlIHNlcnZlclxuY29uc3QgQ09PS0lFX1BFUlNJU1RFRF9QUk9QRVJUSUVTID0gW0RJU1RJTkNUX0lELCBTRVNTSU9OX0lELCBTRVNTSU9OX1JFQ09SRElOR19JU19TQU1QTEVEXVxuXG5leHBvcnQgY29uc3QgbG9jYWxQbHVzQ29va2llU3RvcmU6IFBlcnNpc3RlbnRTdG9yZSA9IHtcbiAgICAuLi5sb2NhbFN0b3JlLFxuICAgIHBhcnNlOiBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgbGV0IGV4dGVuZDogUHJvcGVydGllcyA9IHt9XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIC8vIFNlZSBpZiB0aGVyZSdzIGEgY29va2llIHN0b3JlZCB3aXRoIGRhdGEuXG4gICAgICAgICAgICAgICAgZXh0ZW5kID0gY29va2llU3RvcmUucGFyc2UobmFtZSkgfHwge31cbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge31cbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gX2V4dGVuZChleHRlbmQsIEpTT04ucGFyc2UobG9jYWxTdG9yZS5nZXQobmFtZSkgfHwgJ3t9JykpXG4gICAgICAgICAgICBsb2NhbFN0b3JlLnNldChuYW1lLCB2YWx1ZSlcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZVxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIC8vIG5vb3BcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbFxuICAgIH0sXG5cbiAgICBzZXQ6IGZ1bmN0aW9uIChuYW1lLCB2YWx1ZSwgZGF5cywgY3Jvc3Nfc3ViZG9tYWluLCBpc19zZWN1cmUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGxvY2FsU3RvcmUuc2V0KG5hbWUsIHZhbHVlKVxuICAgICAgICAgICAgY29uc3QgY29va2llUGVyc2lzdGVkUHJvcGVydGllczogUmVjb3JkPHN0cmluZywgYW55PiA9IHt9XG4gICAgICAgICAgICBDT09LSUVfUEVSU0lTVEVEX1BST1BFUlRJRVMuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlW2tleV0pIHtcbiAgICAgICAgICAgICAgICAgICAgY29va2llUGVyc2lzdGVkUHJvcGVydGllc1trZXldID0gdmFsdWVba2V5XVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhjb29raWVQZXJzaXN0ZWRQcm9wZXJ0aWVzKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBjb29raWVTdG9yZS5zZXQobmFtZSwgY29va2llUGVyc2lzdGVkUHJvcGVydGllcywgZGF5cywgY3Jvc3Nfc3ViZG9tYWluLCBpc19zZWN1cmUpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgbG9jYWxTdG9yZS5lcnJvcihlcnIpXG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgcmVtb3ZlOiBmdW5jdGlvbiAobmFtZSwgY3Jvc3Nfc3ViZG9tYWluKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB3aW5kb3c/LmxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKG5hbWUpXG4gICAgICAgICAgICBjb29raWVTdG9yZS5yZW1vdmUobmFtZSwgY3Jvc3Nfc3ViZG9tYWluKVxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIGxvY2FsU3RvcmUuZXJyb3IoZXJyKVxuICAgICAgICB9XG4gICAgfSxcbn1cblxuY29uc3QgbWVtb3J5U3RvcmFnZTogUHJvcGVydGllcyA9IHt9XG5cbi8vIFN0b3JhZ2UgdGhhdCBvbmx5IGxhc3RzIHRoZSBsZW5ndGggb2YgdGhlIHBhZ2V2aWV3IGlmIHdlIGRvbid0IHdhbnQgdG8gdXNlIGNvb2tpZXNcbmV4cG9ydCBjb25zdCBtZW1vcnlTdG9yZTogUGVyc2lzdGVudFN0b3JlID0ge1xuICAgIGlzX3N1cHBvcnRlZDogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgIH0sXG5cbiAgICBlcnJvcjogZnVuY3Rpb24gKG1zZykge1xuICAgICAgICBsb2dnZXIuZXJyb3IoJ21lbW9yeVN0b3JhZ2UgZXJyb3I6ICcgKyBtc2cpXG4gICAgfSxcblxuICAgIGdldDogZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIG1lbW9yeVN0b3JhZ2VbbmFtZV0gfHwgbnVsbFxuICAgIH0sXG5cbiAgICBwYXJzZTogZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIG1lbW9yeVN0b3JhZ2VbbmFtZV0gfHwgbnVsbFxuICAgIH0sXG5cbiAgICBzZXQ6IGZ1bmN0aW9uIChuYW1lLCB2YWx1ZSkge1xuICAgICAgICBtZW1vcnlTdG9yYWdlW25hbWVdID0gdmFsdWVcbiAgICB9LFxuXG4gICAgcmVtb3ZlOiBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICBkZWxldGUgbWVtb3J5U3RvcmFnZVtuYW1lXVxuICAgIH0sXG59XG5cbmxldCBzZXNzaW9uU3RvcmFnZVN1cHBvcnRlZDogYm9vbGVhbiB8IG51bGwgPSBudWxsXG5leHBvcnQgY29uc3QgcmVzZXRTZXNzaW9uU3RvcmFnZVN1cHBvcnRlZCA9ICgpID0+IHtcbiAgICBzZXNzaW9uU3RvcmFnZVN1cHBvcnRlZCA9IG51bGxcbn1cbi8vIFN0b3JhZ2UgdGhhdCBvbmx5IGxhc3RzIHRoZSBsZW5ndGggb2YgYSB0YWIvd2luZG93LiBTdXJ2aXZlcyBwYWdlIHJlZnJlc2hlc1xuZXhwb3J0IGNvbnN0IHNlc3Npb25TdG9yZTogUGVyc2lzdGVudFN0b3JlID0ge1xuICAgIGlzX3N1cHBvcnRlZDogZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIV9pc051bGwoc2Vzc2lvblN0b3JhZ2VTdXBwb3J0ZWQpKSB7XG4gICAgICAgICAgICByZXR1cm4gc2Vzc2lvblN0b3JhZ2VTdXBwb3J0ZWRcbiAgICAgICAgfVxuICAgICAgICBzZXNzaW9uU3RvcmFnZVN1cHBvcnRlZCA9IHRydWVcbiAgICAgICAgaWYgKCFfaXNVbmRlZmluZWQod2luZG93KSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSAnX19zdXBwb3J0X18nLFxuICAgICAgICAgICAgICAgICAgICB2YWwgPSAneHl6J1xuICAgICAgICAgICAgICAgIHNlc3Npb25TdG9yZS5zZXQoa2V5LCB2YWwpXG4gICAgICAgICAgICAgICAgaWYgKHNlc3Npb25TdG9yZS5nZXQoa2V5KSAhPT0gJ1wieHl6XCInKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlU3VwcG9ydGVkID0gZmFsc2VcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc2Vzc2lvblN0b3JlLnJlbW92ZShrZXkpXG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBzZXNzaW9uU3RvcmFnZVN1cHBvcnRlZCA9IGZhbHNlXG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZXNzaW9uU3RvcmFnZVN1cHBvcnRlZCA9IGZhbHNlXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNlc3Npb25TdG9yYWdlU3VwcG9ydGVkXG4gICAgfSxcblxuICAgIGVycm9yOiBmdW5jdGlvbiAobXNnKSB7XG4gICAgICAgIGxvZ2dlci5lcnJvcignc2Vzc2lvblN0b3JhZ2UgZXJyb3I6ICcsIG1zZylcbiAgICB9LFxuXG4gICAgZ2V0OiBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIHdpbmRvdz8uc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShuYW1lKVxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHNlc3Npb25TdG9yZS5lcnJvcihlcnIpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGxcbiAgICB9LFxuXG4gICAgcGFyc2U6IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShzZXNzaW9uU3RvcmUuZ2V0KG5hbWUpKSB8fCBudWxsXG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgLy8gbm9vcFxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsXG4gICAgfSxcblxuICAgIHNldDogZnVuY3Rpb24gKG5hbWUsIHZhbHVlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB3aW5kb3c/LnNlc3Npb25TdG9yYWdlLnNldEl0ZW0obmFtZSwgSlNPTi5zdHJpbmdpZnkodmFsdWUpKVxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHNlc3Npb25TdG9yZS5lcnJvcihlcnIpXG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgcmVtb3ZlOiBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgd2luZG93Py5zZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKG5hbWUpXG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgc2Vzc2lvblN0b3JlLmVycm9yKGVycilcbiAgICAgICAgfVxuICAgIH0sXG59XG4iLCAiaW1wb3J0IHsgX2VhY2gsIF9pc1ZhbGlkUmVnZXggfSBmcm9tICcuLydcblxuaW1wb3J0IHsgX2lzQXJyYXksIF9pc0ZpbGUsIF9pc1VuZGVmaW5lZCB9IGZyb20gJy4vdHlwZS11dGlscydcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJy4vbG9nZ2VyJ1xuaW1wb3J0IHsgZG9jdW1lbnQgfSBmcm9tICcuL2dsb2JhbHMnXG5cbmNvbnN0IGxvY2FsRG9tYWlucyA9IFsnbG9jYWxob3N0JywgJzEyNy4wLjAuMSddXG5cbi8qKlxuICogSUUxMSBkb2Vzbid0IHN1cHBvcnQgYG5ldyBVUkxgXG4gKiBzbyB3ZSBjYW4gY3JlYXRlIGFuIGFuY2hvciBlbGVtZW50IGFuZCB1c2UgdGhhdCB0byBwYXJzZSB0aGUgVVJMXG4gKiB0aGVyZSdzIGEgbG90IG9mIG92ZXJsYXAgYmV0d2VlbiBIVE1MSHlwZXJsaW5rRWxlbWVudFV0aWxzIGFuZCBVUkxcbiAqIG1lYW5pbmcgdXNlZnVsIHByb3BlcnRpZXMgbGlrZSBgcGF0aG5hbWVgIGFyZSBhdmFpbGFibGUgb24gYm90aFxuICovXG5leHBvcnQgY29uc3QgY29udmVydFRvVVJMID0gKHVybDogc3RyaW5nKTogSFRNTEFuY2hvckVsZW1lbnQgfCBudWxsID0+IHtcbiAgICBjb25zdCBsb2NhdGlvbiA9IGRvY3VtZW50Py5jcmVhdGVFbGVtZW50KCdhJylcbiAgICBpZiAoX2lzVW5kZWZpbmVkKGxvY2F0aW9uKSkge1xuICAgICAgICByZXR1cm4gbnVsbFxuICAgIH1cblxuICAgIGxvY2F0aW9uLmhyZWYgPSB1cmxcbiAgICByZXR1cm4gbG9jYXRpb25cbn1cblxuZXhwb3J0IGNvbnN0IF9pc1VybE1hdGNoaW5nUmVnZXggPSBmdW5jdGlvbiAodXJsOiBzdHJpbmcsIHBhdHRlcm46IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIGlmICghX2lzVmFsaWRSZWdleChwYXR0ZXJuKSkgcmV0dXJuIGZhbHNlXG4gICAgcmV0dXJuIG5ldyBSZWdFeHAocGF0dGVybikudGVzdCh1cmwpXG59XG5cbmV4cG9ydCBjb25zdCBfZm9ybURhdGFUb1F1ZXJ5ID0gZnVuY3Rpb24gKGZvcm1kYXRhOiBSZWNvcmQ8c3RyaW5nLCBhbnk+IHwgRm9ybURhdGEsIGFyZ19zZXBhcmF0b3IgPSAnJicpOiBzdHJpbmcge1xuICAgIGxldCB1c2VfdmFsOiBzdHJpbmdcbiAgICBsZXQgdXNlX2tleTogc3RyaW5nXG4gICAgY29uc3QgdHBoX2Fycjogc3RyaW5nW10gPSBbXVxuXG4gICAgX2VhY2goZm9ybWRhdGEsIGZ1bmN0aW9uICh2YWw6IEZpbGUgfCBzdHJpbmcgfCB1bmRlZmluZWQsIGtleTogc3RyaW5nIHwgdW5kZWZpbmVkKSB7XG4gICAgICAgIC8vIHRoZSBrZXkgbWlnaHQgYmUgbGl0ZXJhbGx5IHRoZSBzdHJpbmcgdW5kZWZpbmVkIGZvciBlLmcuIGlmIHt1bmRlZmluZWQ6ICdzb21ldGhpbmcnfVxuICAgICAgICBpZiAoX2lzVW5kZWZpbmVkKHZhbCkgfHwgX2lzVW5kZWZpbmVkKGtleSkgfHwga2V5ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cblxuICAgICAgICB1c2VfdmFsID0gZW5jb2RlVVJJQ29tcG9uZW50KF9pc0ZpbGUodmFsKSA/IHZhbC5uYW1lIDogdmFsLnRvU3RyaW5nKCkpXG4gICAgICAgIHVzZV9rZXkgPSBlbmNvZGVVUklDb21wb25lbnQoa2V5KVxuICAgICAgICB0cGhfYXJyW3RwaF9hcnIubGVuZ3RoXSA9IHVzZV9rZXkgKyAnPScgKyB1c2VfdmFsXG4gICAgfSlcblxuICAgIHJldHVybiB0cGhfYXJyLmpvaW4oYXJnX3NlcGFyYXRvcilcbn1cblxuZXhwb3J0IGNvbnN0IF9nZXRRdWVyeVBhcmFtID0gZnVuY3Rpb24gKHVybDogc3RyaW5nLCBwYXJhbTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCB3aXRob3V0SGFzaDogc3RyaW5nID0gdXJsLnNwbGl0KCcjJylbMF0gfHwgJydcbiAgICBjb25zdCBxdWVyeVBhcmFtczogc3RyaW5nID0gd2l0aG91dEhhc2guc3BsaXQoJz8nKVsxXSB8fCAnJ1xuXG4gICAgY29uc3QgcXVlcnlQYXJ0cyA9IHF1ZXJ5UGFyYW1zLnNwbGl0KCcmJylcbiAgICBsZXQga2V5VmFsdWVQYWlyXG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHF1ZXJ5UGFydHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgcGFydHMgPSBxdWVyeVBhcnRzW2ldLnNwbGl0KCc9JylcbiAgICAgICAgaWYgKHBhcnRzWzBdID09PSBwYXJhbSkge1xuICAgICAgICAgICAga2V5VmFsdWVQYWlyID0gcGFydHNcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIV9pc0FycmF5KGtleVZhbHVlUGFpcikgfHwga2V5VmFsdWVQYWlyLmxlbmd0aCA8IDIpIHtcbiAgICAgICAgcmV0dXJuICcnXG4gICAgfSBlbHNlIHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IGtleVZhbHVlUGFpclsxXVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmVzdWx0ID0gZGVjb2RlVVJJQ29tcG9uZW50KHJlc3VsdClcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ1NraXBwaW5nIGRlY29kaW5nIGZvciBtYWxmb3JtZWQgcXVlcnkgcGFyYW06ICcgKyByZXN1bHQpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdC5yZXBsYWNlKC9cXCsvZywgJyAnKVxuICAgIH1cbn1cblxuZXhwb3J0IGNvbnN0IF9nZXRIYXNoUGFyYW0gPSBmdW5jdGlvbiAoaGFzaDogc3RyaW5nLCBwYXJhbTogc3RyaW5nKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgY29uc3QgbWF0Y2hlcyA9IGhhc2gubWF0Y2gobmV3IFJlZ0V4cChwYXJhbSArICc9KFteJl0qKScpKVxuICAgIHJldHVybiBtYXRjaGVzID8gbWF0Y2hlc1sxXSA6IG51bGxcbn1cblxuZXhwb3J0IGNvbnN0IGlzTG9jYWxob3N0ID0gKCk6IGJvb2xlYW4gPT4ge1xuICAgIHJldHVybiBsb2NhbERvbWFpbnMuaW5jbHVkZXMobG9jYXRpb24uaG9zdG5hbWUpXG59XG4iLCAiaW1wb3J0IHsgX2luY2x1ZGVzIH0gZnJvbSAnLi9pbmRleCdcbmltcG9ydCB7IF9pc0Z1bmN0aW9uLCBfaXNVbmRlZmluZWQgfSBmcm9tICcuL3R5cGUtdXRpbHMnXG5cbi8qKlxuICogdGhpcyBkZXZpY2UgZGV0ZWN0aW9uIGNvZGUgaXMgKGF0IHRpbWUgb2Ygd3JpdGluZykgYWJvdXQgMyUgb2YgdGhlIHNpemUgb2YgdGhlIGVudGlyZSBsaWJyYXJ5XG4gKiB0aGlzIGlzIG1vc3RseSBiZWNhdXNlIHRoZSBpZGVudGlmaWVycyB1c2VyIGluIHJlZ2V4ZXMgYW5kIHJlc3VsdHMgY2FuJ3QgYmUgbWluaWZpZWQgYXdheSBzaW5jZVxuICogdGhleSBoYXZlIG1lYW5pbmdcbiAqXG4gKiBzbywgdGhlcmUgYXJlIHNvbWUgcHJlLXVnbGlmeWluZyBjaG9pY2VzIGluIHRoZSBjb2RlIHRvIGhlbHAgcmVkdWNlIHRoZSBzaXplXG4gKiBlLmcuIG1hbnkgcmVwZWF0ZWQgc3RyaW5ncyBhcmUgc3RvcmVkIGFzIHZhcmlhYmxlcyBhbmQgdGhlbiBvbGQtZmFzaGlvbmVkIGNvbmNhdGVuYXRlZCB0b2dldGhlclxuICpcbiAqIFRMO0RSIGhlcmUgYmUgZHJhZ29uc1xuICovXG5jb25zdCBGQUNFQk9PSyA9ICdGYWNlYm9vaydcbmNvbnN0IE1PQklMRSA9ICdNb2JpbGUnXG5jb25zdCBJT1MgPSAnaU9TJ1xuY29uc3QgQU5EUk9JRCA9ICdBbmRyb2lkJ1xuY29uc3QgVEFCTEVUID0gJ1RhYmxldCdcbmNvbnN0IEFORFJPSURfVEFCTEVUID0gQU5EUk9JRCArICcgJyArIFRBQkxFVFxuY29uc3QgSVBBRCA9ICdpUGFkJ1xuY29uc3QgQVBQTEUgPSAnQXBwbGUnXG5jb25zdCBBUFBMRV9XQVRDSCA9IEFQUExFICsgJyBXYXRjaCdcbmNvbnN0IFNBRkFSSSA9ICdTYWZhcmknXG5jb25zdCBCTEFDS0JFUlJZID0gJ0JsYWNrQmVycnknXG5jb25zdCBTQU1TVU5HID0gJ1NhbXN1bmcnXG5jb25zdCBTQU1TVU5HX0JST1dTRVIgPSBTQU1TVU5HICsgJ0Jyb3dzZXInXG5jb25zdCBTQU1TVU5HX0lOVEVSTkVUID0gU0FNU1VORyArICcgSW50ZXJuZXQnXG5jb25zdCBDSFJPTUUgPSAnQ2hyb21lJ1xuY29uc3QgQ0hST01FX09TID0gQ0hST01FICsgJyBPUydcbmNvbnN0IENIUk9NRV9JT1MgPSBDSFJPTUUgKyAnICcgKyBJT1NcbmNvbnN0IElOVEVSTkVUX0VYUExPUkVSID0gJ0ludGVybmV0IEV4cGxvcmVyJ1xuY29uc3QgSU5URVJORVRfRVhQTE9SRVJfTU9CSUxFID0gSU5URVJORVRfRVhQTE9SRVIgKyAnICcgKyBNT0JJTEVcbmNvbnN0IE9QRVJBID0gJ09wZXJhJ1xuY29uc3QgT1BFUkFfTUlOSSA9IE9QRVJBICsgJyBNaW5pJ1xuY29uc3QgRURHRSA9ICdFZGdlJ1xuY29uc3QgTUlDUk9TT0ZUX0VER0UgPSAnTWljcm9zb2Z0ICcgKyBFREdFXG5jb25zdCBGSVJFRk9YID0gJ0ZpcmVmb3gnXG5jb25zdCBGSVJFRk9YX0lPUyA9IEZJUkVGT1ggKyAnICcgKyBJT1NcbmNvbnN0IE5JTlRFTkRPID0gJ05pbnRlbmRvJ1xuY29uc3QgUExBWVNUQVRJT04gPSAnUGxheVN0YXRpb24nXG5jb25zdCBYQk9YID0gJ1hib3gnXG5jb25zdCBBTkRST0lEX01PQklMRSA9IEFORFJPSUQgKyAnICcgKyBNT0JJTEVcbmNvbnN0IE1PQklMRV9TQUZBUkkgPSBNT0JJTEUgKyAnICcgKyBTQUZBUklcbmNvbnN0IFdJTkRPV1MgPSAnV2luZG93cydcbmNvbnN0IFdJTkRPV1NfUEhPTkUgPSBXSU5ET1dTICsgJyBQaG9uZSdcbmNvbnN0IE5PS0lBID0gJ05va2lhJ1xuY29uc3QgT1VZQSA9ICdPdXlhJ1xuY29uc3QgR0VORVJJQyA9ICdHZW5lcmljJ1xuY29uc3QgR0VORVJJQ19NT0JJTEUgPSBHRU5FUklDICsgJyAnICsgTU9CSUxFLnRvTG93ZXJDYXNlKClcbmNvbnN0IEdFTkVSSUNfVEFCTEVUID0gR0VORVJJQyArICcgJyArIFRBQkxFVC50b0xvd2VyQ2FzZSgpXG5jb25zdCBLT05RVUVST1IgPSAnS29ucXVlcm9yJ1xuXG5jb25zdCBCUk9XU0VSX1ZFUlNJT05fUkVHRVhfU1VGRklYID0gJyhcXFxcZCsoXFxcXC5cXFxcZCspPyknXG5jb25zdCBERUZBVUxUX0JST1dTRVJfVkVSU0lPTl9SRUdFWCA9IG5ldyBSZWdFeHAoJ1ZlcnNpb24vJyArIEJST1dTRVJfVkVSU0lPTl9SRUdFWF9TVUZGSVgpXG5cbmNvbnN0IFhCT1hfUkVHRVggPSBuZXcgUmVnRXhwKFhCT1gsICdpJylcbmNvbnN0IFBMQVlTVEFUSU9OX1JFR0VYID0gbmV3IFJlZ0V4cChQTEFZU1RBVElPTiArICcgXFxcXHcrJywgJ2knKVxuY29uc3QgTklOVEVORE9fUkVHRVggPSBuZXcgUmVnRXhwKE5JTlRFTkRPICsgJyBcXFxcdysnLCAnaScpXG5jb25zdCBCTEFDS0JFUlJZX1JFR0VYID0gbmV3IFJlZ0V4cChCTEFDS0JFUlJZICsgJ3xQbGF5Qm9va3xCQjEwJywgJ2knKVxuXG5jb25zdCB3aW5kb3dzVmVyc2lvbk1hcDogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgICAnTlQzLjUxJzogJ05UIDMuMTEnLFxuICAgICdOVDQuMCc6ICdOVCA0LjAnLFxuICAgICc1LjAnOiAnMjAwMCcsXG4gICAgJzUuMSc6ICdYUCcsXG4gICAgJzUuMic6ICdYUCcsXG4gICAgJzYuMCc6ICdWaXN0YScsXG4gICAgJzYuMSc6ICc3JyxcbiAgICAnNi4yJzogJzgnLFxuICAgICc2LjMnOiAnOC4xJyxcbiAgICAnNi40JzogJzEwJyxcbiAgICAnMTAuMCc6ICcxMCcsXG59XG5cbi8qKlxuICogU2FmYXJpIGRldGVjdGlvbiB0dXJucyBvdXQgdG8gYmUgY29tcGxpY2F0ZWQuIEZvciBlLmcuIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yOTY5NjUwOVxuICogV2UgY2FuIGJlIHNsaWdodGx5IGxvb3NlIGJlY2F1c2Ugc29tZSBvcHRpb25zIGhhdmUgYmVlbiBydWxlZCBvdXQgKGUuZy4gZmlyZWZveCBvbiBpT1MpXG4gKiBiZWZvcmUgdGhpcyBjaGVjayBpcyBtYWRlXG4gKi9cbmZ1bmN0aW9uIGlzU2FmYXJpKHVzZXJBZ2VudDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIF9pbmNsdWRlcyh1c2VyQWdlbnQsIFNBRkFSSSkgJiYgIV9pbmNsdWRlcyh1c2VyQWdlbnQsIENIUk9NRSkgJiYgIV9pbmNsdWRlcyh1c2VyQWdlbnQsIEFORFJPSUQpXG59XG5cbmNvbnN0IHNhZmFyaUNoZWNrID0gKHVhOiBzdHJpbmcsIHZlbmRvcj86IHN0cmluZykgPT4gKHZlbmRvciAmJiBfaW5jbHVkZXModmVuZG9yLCBBUFBMRSkpIHx8IGlzU2FmYXJpKHVhKVxuXG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gZGV0ZWN0cyB3aGljaCBicm93c2VyIGlzIHJ1bm5pbmcgdGhpcyBzY3JpcHQuXG4gKiBUaGUgb3JkZXIgb2YgdGhlIGNoZWNrcyBhcmUgaW1wb3J0YW50IHNpbmNlIG1hbnkgdXNlciBhZ2VudHNcbiAqIGluY2x1ZGUga2V5d29yZHMgdXNlZCBpbiBsYXRlciBjaGVja3MuXG4gKi9cbmV4cG9ydCBjb25zdCBkZXRlY3RCcm93c2VyID0gZnVuY3Rpb24gKHVzZXJfYWdlbnQ6IHN0cmluZywgdmVuZG9yOiBzdHJpbmcgfCB1bmRlZmluZWQpOiBzdHJpbmcge1xuICAgIHZlbmRvciA9IHZlbmRvciB8fCAnJyAvLyB2ZW5kb3IgaXMgdW5kZWZpbmVkIGZvciBhdCBsZWFzdCBJRTlcblxuICAgIGlmIChfaW5jbHVkZXModXNlcl9hZ2VudCwgJyBPUFIvJykgJiYgX2luY2x1ZGVzKHVzZXJfYWdlbnQsICdNaW5pJykpIHtcbiAgICAgICAgcmV0dXJuIE9QRVJBX01JTklcbiAgICB9IGVsc2UgaWYgKF9pbmNsdWRlcyh1c2VyX2FnZW50LCAnIE9QUi8nKSkge1xuICAgICAgICByZXR1cm4gT1BFUkFcbiAgICB9IGVsc2UgaWYgKEJMQUNLQkVSUllfUkVHRVgudGVzdCh1c2VyX2FnZW50KSkge1xuICAgICAgICByZXR1cm4gQkxBQ0tCRVJSWVxuICAgIH0gZWxzZSBpZiAoX2luY2x1ZGVzKHVzZXJfYWdlbnQsICdJRScgKyBNT0JJTEUpIHx8IF9pbmNsdWRlcyh1c2VyX2FnZW50LCAnV1BEZXNrdG9wJykpIHtcbiAgICAgICAgcmV0dXJuIElOVEVSTkVUX0VYUExPUkVSX01PQklMRVxuICAgIH1cbiAgICAvLyBodHRwczovL2RldmVsb3Blci5zYW1zdW5nLmNvbS9pbnRlcm5ldC91c2VyLWFnZW50LXN0cmluZy1mb3JtYXRcbiAgICBlbHNlIGlmIChfaW5jbHVkZXModXNlcl9hZ2VudCwgU0FNU1VOR19CUk9XU0VSKSkge1xuICAgICAgICByZXR1cm4gU0FNU1VOR19JTlRFUk5FVFxuICAgIH0gZWxzZSBpZiAoX2luY2x1ZGVzKHVzZXJfYWdlbnQsIEVER0UpIHx8IF9pbmNsdWRlcyh1c2VyX2FnZW50LCAnRWRnLycpKSB7XG4gICAgICAgIHJldHVybiBNSUNST1NPRlRfRURHRVxuICAgIH0gZWxzZSBpZiAoX2luY2x1ZGVzKHVzZXJfYWdlbnQsICdGQklPUycpKSB7XG4gICAgICAgIHJldHVybiBGQUNFQk9PSyArICcgJyArIE1PQklMRVxuICAgIH0gZWxzZSBpZiAoX2luY2x1ZGVzKHVzZXJfYWdlbnQsIENIUk9NRSkpIHtcbiAgICAgICAgcmV0dXJuIENIUk9NRVxuICAgIH0gZWxzZSBpZiAoX2luY2x1ZGVzKHVzZXJfYWdlbnQsICdDcmlPUycpKSB7XG4gICAgICAgIHJldHVybiBDSFJPTUVfSU9TXG4gICAgfSBlbHNlIGlmIChfaW5jbHVkZXModXNlcl9hZ2VudCwgJ1VDV0VCJykgfHwgX2luY2x1ZGVzKHVzZXJfYWdlbnQsICdVQ0Jyb3dzZXInKSkge1xuICAgICAgICByZXR1cm4gJ1VDIEJyb3dzZXInXG4gICAgfSBlbHNlIGlmIChfaW5jbHVkZXModXNlcl9hZ2VudCwgJ0Z4aU9TJykpIHtcbiAgICAgICAgcmV0dXJuIEZJUkVGT1hfSU9TXG4gICAgfSBlbHNlIGlmIChfaW5jbHVkZXModXNlcl9hZ2VudCwgQU5EUk9JRCkpIHtcbiAgICAgICAgcmV0dXJuIEFORFJPSURfTU9CSUxFXG4gICAgfSBlbHNlIGlmIChfaW5jbHVkZXModXNlcl9hZ2VudC50b0xvd2VyQ2FzZSgpLCBLT05RVUVST1IudG9Mb3dlckNhc2UoKSkpIHtcbiAgICAgICAgcmV0dXJuIEtPTlFVRVJPUlxuICAgIH0gZWxzZSBpZiAoc2FmYXJpQ2hlY2sodXNlcl9hZ2VudCwgdmVuZG9yKSkge1xuICAgICAgICByZXR1cm4gX2luY2x1ZGVzKHVzZXJfYWdlbnQsIE1PQklMRSkgPyBNT0JJTEVfU0FGQVJJIDogU0FGQVJJXG4gICAgfSBlbHNlIGlmIChfaW5jbHVkZXModXNlcl9hZ2VudCwgRklSRUZPWCkpIHtcbiAgICAgICAgcmV0dXJuIEZJUkVGT1hcbiAgICB9IGVsc2UgaWYgKF9pbmNsdWRlcyh1c2VyX2FnZW50LCAnTVNJRScpIHx8IF9pbmNsdWRlcyh1c2VyX2FnZW50LCAnVHJpZGVudC8nKSkge1xuICAgICAgICByZXR1cm4gSU5URVJORVRfRVhQTE9SRVJcbiAgICB9IGVsc2UgaWYgKF9pbmNsdWRlcyh1c2VyX2FnZW50LCAnR2Vja28nKSkge1xuICAgICAgICByZXR1cm4gRklSRUZPWFxuICAgIH1cblxuICAgIHJldHVybiAnJ1xufVxuXG5jb25zdCB2ZXJzaW9uUmVnZXhlczogUmVjb3JkPHN0cmluZywgUmVnRXhwW10+ID0ge1xuICAgIFtJTlRFUk5FVF9FWFBMT1JFUl9NT0JJTEVdOiBbbmV3IFJlZ0V4cCgncnY6JyArIEJST1dTRVJfVkVSU0lPTl9SRUdFWF9TVUZGSVgpXSxcbiAgICBbTUlDUk9TT0ZUX0VER0VdOiBbbmV3IFJlZ0V4cChFREdFICsgJz9cXFxcLycgKyBCUk9XU0VSX1ZFUlNJT05fUkVHRVhfU1VGRklYKV0sXG4gICAgW0NIUk9NRV06IFtuZXcgUmVnRXhwKENIUk9NRSArICcvJyArIEJST1dTRVJfVkVSU0lPTl9SRUdFWF9TVUZGSVgpXSxcbiAgICBbQ0hST01FX0lPU106IFtuZXcgUmVnRXhwKCdDcmlPU1xcXFwvJyArIEJST1dTRVJfVkVSU0lPTl9SRUdFWF9TVUZGSVgpXSxcbiAgICAnVUMgQnJvd3Nlcic6IFtuZXcgUmVnRXhwKCcoVUNCcm93c2VyfFVDV0VCKVxcXFwvJyArIEJST1dTRVJfVkVSU0lPTl9SRUdFWF9TVUZGSVgpXSxcbiAgICBbU0FGQVJJXTogW0RFRkFVTFRfQlJPV1NFUl9WRVJTSU9OX1JFR0VYXSxcbiAgICBbTU9CSUxFX1NBRkFSSV06IFtERUZBVUxUX0JST1dTRVJfVkVSU0lPTl9SRUdFWF0sXG4gICAgW09QRVJBXTogW25ldyBSZWdFeHAoJygnICsgT1BFUkEgKyAnfE9QUilcXFxcLycgKyBCUk9XU0VSX1ZFUlNJT05fUkVHRVhfU1VGRklYKV0sXG4gICAgW0ZJUkVGT1hdOiBbbmV3IFJlZ0V4cChGSVJFRk9YICsgJ1xcXFwvJyArIEJST1dTRVJfVkVSU0lPTl9SRUdFWF9TVUZGSVgpXSxcbiAgICBbRklSRUZPWF9JT1NdOiBbbmV3IFJlZ0V4cCgnRnhpT1NcXFxcLycgKyBCUk9XU0VSX1ZFUlNJT05fUkVHRVhfU1VGRklYKV0sXG4gICAgW0tPTlFVRVJPUl06IFtuZXcgUmVnRXhwKCdLb25xdWVyb3JbOi9dPycgKyBCUk9XU0VSX1ZFUlNJT05fUkVHRVhfU1VGRklYLCAnaScpXSxcbiAgICAvLyBub3QgZXZlcnkgYmxhY2tiZXJyeSB1c2VyIGFnZW50IGhhcyB0aGUgdmVyc2lvbiBhZnRlciB0aGUgbmFtZVxuICAgIFtCTEFDS0JFUlJZXTogW25ldyBSZWdFeHAoQkxBQ0tCRVJSWSArICcgJyArIEJST1dTRVJfVkVSU0lPTl9SRUdFWF9TVUZGSVgpLCBERUZBVUxUX0JST1dTRVJfVkVSU0lPTl9SRUdFWF0sXG4gICAgW0FORFJPSURfTU9CSUxFXTogW25ldyBSZWdFeHAoJ2FuZHJvaWRcXFxccycgKyBCUk9XU0VSX1ZFUlNJT05fUkVHRVhfU1VGRklYKV0sXG4gICAgW1NBTVNVTkdfSU5URVJORVRdOiBbbmV3IFJlZ0V4cChTQU1TVU5HX0JST1dTRVIgKyAnXFxcXC8nICsgQlJPV1NFUl9WRVJTSU9OX1JFR0VYX1NVRkZJWCldLFxuICAgIFtJTlRFUk5FVF9FWFBMT1JFUl06IFtuZXcgUmVnRXhwKCcocnY6fE1TSUUgKScgKyBCUk9XU0VSX1ZFUlNJT05fUkVHRVhfU1VGRklYKV0sXG4gICAgTW96aWxsYTogW25ldyBSZWdFeHAoJ3J2OicgKyBCUk9XU0VSX1ZFUlNJT05fUkVHRVhfU1VGRklYKV0sXG59XG5cbi8qKlxuICogVGhpcyBmdW5jdGlvbiBkZXRlY3RzIHdoaWNoIGJyb3dzZXIgdmVyc2lvbiBpcyBydW5uaW5nIHRoaXMgc2NyaXB0LFxuICogcGFyc2luZyBtYWpvciBhbmQgbWlub3IgdmVyc2lvbiAoZS5nLiwgNDIuMSkuIFVzZXIgYWdlbnQgc3RyaW5ncyBmcm9tOlxuICogaHR0cDovL3d3dy51c2VyYWdlbnRzdHJpbmcuY29tL3BhZ2VzL3VzZXJhZ2VudHN0cmluZy5waHBcbiAqXG4gKiBgbmF2aWdhdG9yLnZlbmRvcmAgaXMgcGFzc2VkIGluIGFuZCB1c2VkIHRvIGhlbHAgd2l0aCBkZXRlY3RpbmcgY2VydGFpbiBicm93c2Vyc1xuICogTkIgYG5hdmlnYXRvci52ZW5kb3JgIGlzIGRlcHJlY2F0ZWQgYW5kIG5vdCBwcmVzZW50IGluIGV2ZXJ5IGJyb3dzZXJcbiAqL1xuZXhwb3J0IGNvbnN0IGRldGVjdEJyb3dzZXJWZXJzaW9uID0gZnVuY3Rpb24gKHVzZXJBZ2VudDogc3RyaW5nLCB2ZW5kb3I6IHN0cmluZyB8IHVuZGVmaW5lZCk6IG51bWJlciB8IG51bGwge1xuICAgIGNvbnN0IGJyb3dzZXIgPSBkZXRlY3RCcm93c2VyKHVzZXJBZ2VudCwgdmVuZG9yKVxuICAgIGNvbnN0IHJlZ2V4ZXM6IFJlZ0V4cFtdIHwgdW5kZWZpbmVkID0gdmVyc2lvblJlZ2V4ZXNbYnJvd3NlciBhcyBrZXlvZiB0eXBlb2YgdmVyc2lvblJlZ2V4ZXNdXG4gICAgaWYgKF9pc1VuZGVmaW5lZChyZWdleGVzKSkge1xuICAgICAgICByZXR1cm4gbnVsbFxuICAgIH1cblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVnZXhlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCByZWdleCA9IHJlZ2V4ZXNbaV1cbiAgICAgICAgY29uc3QgbWF0Y2hlcyA9IHVzZXJBZ2VudC5tYXRjaChyZWdleClcbiAgICAgICAgaWYgKG1hdGNoZXMpIHtcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUZsb2F0KG1hdGNoZXNbbWF0Y2hlcy5sZW5ndGggLSAyXSlcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbFxufVxuXG4vLyB0byBhdm9pZCByZXBlYXRpbmcgcmVnZXhlcyBvciBjYWxsaW5nIHRoZW0gdHdpY2UsIHdlIGhhdmUgYW4gYXJyYXkgb2YgbWF0Y2hlc1xuLy8gdGhlIGZpcnN0IHJlZ2V4IHRoYXQgbWF0Y2hlcyB1c2VzIGl0cyBtYXRjaGVyIGZ1bmN0aW9uIHRvIHJldHVybiB0aGUgcmVzdWx0XG5jb25zdCBvc01hdGNoZXJzOiBbXG4gICAgUmVnRXhwLFxuICAgIFtzdHJpbmcsIHN0cmluZ10gfCAoKG1hdGNoOiBSZWdFeHBNYXRjaEFycmF5IHwgbnVsbCwgdXNlcl9hZ2VudDogc3RyaW5nKSA9PiBbc3RyaW5nLCBzdHJpbmddKVxuXVtdID0gW1xuICAgIFtcbiAgICAgICAgbmV3IFJlZ0V4cChYQk9YICsgJzsgJyArIFhCT1ggKyAnICguKj8pWyk7XScsICdpJyksXG4gICAgICAgIChtYXRjaCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIFtYQk9YLCAobWF0Y2ggJiYgbWF0Y2hbMV0pIHx8ICcnXVxuICAgICAgICB9LFxuICAgIF0sXG4gICAgW25ldyBSZWdFeHAoTklOVEVORE8sICdpJyksIFtOSU5URU5ETywgJyddXSxcbiAgICBbbmV3IFJlZ0V4cChQTEFZU1RBVElPTiwgJ2knKSwgW1BMQVlTVEFUSU9OLCAnJ11dLFxuICAgIFtCTEFDS0JFUlJZX1JFR0VYLCBbQkxBQ0tCRVJSWSwgJyddXSxcbiAgICBbXG4gICAgICAgIG5ldyBSZWdFeHAoV0lORE9XUywgJ2knKSxcbiAgICAgICAgKF8sIHVzZXJfYWdlbnQpID0+IHtcbiAgICAgICAgICAgIGlmICgvUGhvbmUvLnRlc3QodXNlcl9hZ2VudCkgfHwgL1dQRGVza3RvcC8udGVzdCh1c2VyX2FnZW50KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBbV0lORE9XU19QSE9ORSwgJyddXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBub3QgYWxsIEpTIHZlcnNpb25zIHN1cHBvcnQgbmVnYXRpdmUgbG9va2JlaGluZCwgc28gd2UgbmVlZCB0d28gY2hlY2tzIGhlcmVcbiAgICAgICAgICAgIGlmIChuZXcgUmVnRXhwKE1PQklMRSkudGVzdCh1c2VyX2FnZW50KSAmJiAhL0lFTW9iaWxlXFxiLy50ZXN0KHVzZXJfYWdlbnQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtXSU5ET1dTICsgJyAnICsgTU9CSUxFLCAnJ11cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG1hdGNoID0gL1dpbmRvd3MgTlQgKFswLTkuXSspL2kuZXhlYyh1c2VyX2FnZW50KVxuICAgICAgICAgICAgaWYgKG1hdGNoICYmIG1hdGNoWzFdKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdmVyc2lvbiA9IG1hdGNoWzFdXG4gICAgICAgICAgICAgICAgbGV0IG9zVmVyc2lvbiA9IHdpbmRvd3NWZXJzaW9uTWFwW3ZlcnNpb25dIHx8ICcnXG4gICAgICAgICAgICAgICAgaWYgKC9hcm0vaS50ZXN0KHVzZXJfYWdlbnQpKSB7XG4gICAgICAgICAgICAgICAgICAgIG9zVmVyc2lvbiA9ICdSVCdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtXSU5ET1dTLCBvc1ZlcnNpb25dXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gW1dJTkRPV1MsICcnXVxuICAgICAgICB9LFxuICAgIF0sXG4gICAgW1xuICAgICAgICAvKChpUGhvbmV8aVBhZHxpUG9kKS4qP09TIChcXGQrKV8oXFxkKylfPyhcXGQrKT98aVBob25lKS8sXG4gICAgICAgIChtYXRjaCkgPT4ge1xuICAgICAgICAgICAgaWYgKG1hdGNoICYmIG1hdGNoWzNdKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdmVyc2lvblBhcnRzID0gW21hdGNoWzNdLCBtYXRjaFs0XSwgbWF0Y2hbNV0gfHwgJzAnXVxuICAgICAgICAgICAgICAgIHJldHVybiBbSU9TLCB2ZXJzaW9uUGFydHMuam9pbignLicpXVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFtJT1MsICcnXVxuICAgICAgICB9LFxuICAgIF0sXG4gICAgW1xuICAgICAgICAvKHdhdGNoLipcXC8oXFxkK1xcLlxcZCtcXC5cXGQrKXx3YXRjaCBvcywoXFxkK1xcLlxcZCspLCkvaSxcbiAgICAgICAgKG1hdGNoKSA9PiB7XG4gICAgICAgICAgICAvLyBlLmcuIFdhdGNoNCwzLzUuMy44ICgxNlU2ODApXG4gICAgICAgICAgICBsZXQgdmVyc2lvbiA9ICcnXG4gICAgICAgICAgICBpZiAobWF0Y2ggJiYgbWF0Y2gubGVuZ3RoID49IDMpIHtcbiAgICAgICAgICAgICAgICB2ZXJzaW9uID0gX2lzVW5kZWZpbmVkKG1hdGNoWzJdKSA/IG1hdGNoWzNdIDogbWF0Y2hbMl1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBbJ3dhdGNoT1MnLCB2ZXJzaW9uXVxuICAgICAgICB9LFxuICAgIF0sXG4gICAgW1xuICAgICAgICBuZXcgUmVnRXhwKCcoJyArIEFORFJPSUQgKyAnIChcXFxcZCspXFxcXC4oXFxcXGQrKVxcXFwuPyhcXFxcZCspP3wnICsgQU5EUk9JRCArICcpJywgJ2knKSxcbiAgICAgICAgKG1hdGNoKSA9PiB7XG4gICAgICAgICAgICBpZiAobWF0Y2ggJiYgbWF0Y2hbMl0pIHtcbiAgICAgICAgICAgICAgICBjb25zdCB2ZXJzaW9uUGFydHMgPSBbbWF0Y2hbMl0sIG1hdGNoWzNdLCBtYXRjaFs0XSB8fCAnMCddXG4gICAgICAgICAgICAgICAgcmV0dXJuIFtBTkRST0lELCB2ZXJzaW9uUGFydHMuam9pbignLicpXVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFtBTkRST0lELCAnJ11cbiAgICAgICAgfSxcbiAgICBdLFxuICAgIFtcbiAgICAgICAgL01hYyBPUyBYIChcXGQrKVtfLl0oXFxkKylbXy5dPyhcXGQrKT8vaSxcbiAgICAgICAgKG1hdGNoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQ6IFtzdHJpbmcsIHN0cmluZ10gPSBbJ01hYyBPUyBYJywgJyddXG4gICAgICAgICAgICBpZiAobWF0Y2ggJiYgbWF0Y2hbMV0pIHtcbiAgICAgICAgICAgICAgICBjb25zdCB2ZXJzaW9uUGFydHMgPSBbbWF0Y2hbMV0sIG1hdGNoWzJdLCBtYXRjaFszXSB8fCAnMCddXG4gICAgICAgICAgICAgICAgcmVzdWx0WzFdID0gdmVyc2lvblBhcnRzLmpvaW4oJy4nKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgICAgICB9LFxuICAgIF0sXG4gICAgW1xuICAgICAgICAvTWFjL2ksXG4gICAgICAgIC8vIG1vcCB1cCBhIGZldyBub24tc3RhbmRhcmQgVUFzIHRoYXQgc2hvdWxkIG1hdGNoIG1hY1xuICAgICAgICBbJ01hYyBPUyBYJywgJyddLFxuICAgIF0sXG4gICAgWy9Dck9TLywgW0NIUk9NRV9PUywgJyddXSxcbiAgICBbL0xpbnV4fGRlYmlhbi9pLCBbJ0xpbnV4JywgJyddXSxcbl1cblxuZXhwb3J0IGNvbnN0IGRldGVjdE9TID0gZnVuY3Rpb24gKHVzZXJfYWdlbnQ6IHN0cmluZyk6IFtzdHJpbmcsIHN0cmluZ10ge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb3NNYXRjaGVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBbcmdleCwgcmVzdWx0T3JGbl0gPSBvc01hdGNoZXJzW2ldXG4gICAgICAgIGNvbnN0IG1hdGNoID0gcmdleC5leGVjKHVzZXJfYWdlbnQpXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IG1hdGNoICYmIChfaXNGdW5jdGlvbihyZXN1bHRPckZuKSA/IHJlc3VsdE9yRm4obWF0Y2gsIHVzZXJfYWdlbnQpIDogcmVzdWx0T3JGbilcbiAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBbJycsICcnXVxufVxuXG5leHBvcnQgY29uc3QgZGV0ZWN0RGV2aWNlID0gZnVuY3Rpb24gKHVzZXJfYWdlbnQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgaWYgKE5JTlRFTkRPX1JFR0VYLnRlc3QodXNlcl9hZ2VudCkpIHtcbiAgICAgICAgcmV0dXJuIE5JTlRFTkRPXG4gICAgfSBlbHNlIGlmIChQTEFZU1RBVElPTl9SRUdFWC50ZXN0KHVzZXJfYWdlbnQpKSB7XG4gICAgICAgIHJldHVybiBQTEFZU1RBVElPTlxuICAgIH0gZWxzZSBpZiAoWEJPWF9SRUdFWC50ZXN0KHVzZXJfYWdlbnQpKSB7XG4gICAgICAgIHJldHVybiBYQk9YXG4gICAgfSBlbHNlIGlmIChuZXcgUmVnRXhwKE9VWUEsICdpJykudGVzdCh1c2VyX2FnZW50KSkge1xuICAgICAgICByZXR1cm4gT1VZQVxuICAgIH0gZWxzZSBpZiAobmV3IFJlZ0V4cCgnKCcgKyBXSU5ET1dTX1BIT05FICsgJ3xXUERlc2t0b3ApJywgJ2knKS50ZXN0KHVzZXJfYWdlbnQpKSB7XG4gICAgICAgIHJldHVybiBXSU5ET1dTX1BIT05FXG4gICAgfSBlbHNlIGlmICgvaVBhZC8udGVzdCh1c2VyX2FnZW50KSkge1xuICAgICAgICByZXR1cm4gSVBBRFxuICAgIH0gZWxzZSBpZiAoL2lQb2QvLnRlc3QodXNlcl9hZ2VudCkpIHtcbiAgICAgICAgcmV0dXJuICdpUG9kIFRvdWNoJ1xuICAgIH0gZWxzZSBpZiAoL2lQaG9uZS8udGVzdCh1c2VyX2FnZW50KSkge1xuICAgICAgICByZXR1cm4gJ2lQaG9uZSdcbiAgICB9IGVsc2UgaWYgKC8od2F0Y2gpKD86ID9vc1ssL118XFxkLFxcZFxcLylbXFxkLl0rL2kudGVzdCh1c2VyX2FnZW50KSkge1xuICAgICAgICByZXR1cm4gQVBQTEVfV0FUQ0hcbiAgICB9IGVsc2UgaWYgKEJMQUNLQkVSUllfUkVHRVgudGVzdCh1c2VyX2FnZW50KSkge1xuICAgICAgICByZXR1cm4gQkxBQ0tCRVJSWVxuICAgIH0gZWxzZSBpZiAoLyhrb2JvKVxccyhlcmVhZGVyfHRvdWNoKS9pLnRlc3QodXNlcl9hZ2VudCkpIHtcbiAgICAgICAgcmV0dXJuICdLb2JvJ1xuICAgIH0gZWxzZSBpZiAobmV3IFJlZ0V4cChOT0tJQSwgJ2knKS50ZXN0KHVzZXJfYWdlbnQpKSB7XG4gICAgICAgIHJldHVybiBOT0tJQVxuICAgIH0gZWxzZSBpZiAoXG4gICAgICAgIC8vIEtpbmRsZSBGaXJlIHdpdGhvdXQgU2lsayAvIEVjaG8gU2hvd1xuICAgICAgICAvKGtmW2Etel17Mn13aXxhZW9bYy1yXXsyfSkoIGJ1aXxcXCkpL2kudGVzdCh1c2VyX2FnZW50KSB8fFxuICAgICAgICAvLyBLaW5kbGUgRmlyZSBIRFxuICAgICAgICAvKGtmW2Etel0rKSggYnVpfFxcKSkuK3NpbGtcXC8vaS50ZXN0KHVzZXJfYWdlbnQpXG4gICAgKSB7XG4gICAgICAgIHJldHVybiAnS2luZGxlIEZpcmUnXG4gICAgfSBlbHNlIGlmICgvKEFuZHJvaWR8WlRFKS9pLnRlc3QodXNlcl9hZ2VudCkpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgIW5ldyBSZWdFeHAoTU9CSUxFKS50ZXN0KHVzZXJfYWdlbnQpIHx8XG4gICAgICAgICAgICAvKDkxMzhCfFRCNzgyQnxOZXh1cyBbOTddfHBpeGVsIGN8SFVBV0VJU0hUfEJUVnxub2JsZSBub29rfHNtYXJ0IHVsdHJhIDYpL2kudGVzdCh1c2VyX2FnZW50KVxuICAgICAgICApIHtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAoL3BpeGVsW1xcZGF4bCBdezEsNn0vaS50ZXN0KHVzZXJfYWdlbnQpICYmICEvcGl4ZWwgYy9pLnRlc3QodXNlcl9hZ2VudCkpIHx8XG4gICAgICAgICAgICAgICAgLyhodWF3ZWltZWQtYWwwMHx0YWgtfEFQQXxTTS1HOTJ8aTk4MHx6dGV8VTMwNEFBKS9pLnRlc3QodXNlcl9hZ2VudCkgfHxcbiAgICAgICAgICAgICAgICAoL2xteTQ3di9pLnRlc3QodXNlcl9hZ2VudCkgJiYgIS9RVEFRWjMvaS50ZXN0KHVzZXJfYWdlbnQpKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIEFORFJPSURcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBBTkRST0lEX1RBQkxFVFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIEFORFJPSURcbiAgICAgICAgfVxuICAgIH0gZWxzZSBpZiAobmV3IFJlZ0V4cCgnKHBkYXwnICsgTU9CSUxFICsgJyknLCAnaScpLnRlc3QodXNlcl9hZ2VudCkpIHtcbiAgICAgICAgcmV0dXJuIEdFTkVSSUNfTU9CSUxFXG4gICAgfSBlbHNlIGlmIChuZXcgUmVnRXhwKFRBQkxFVCwgJ2knKS50ZXN0KHVzZXJfYWdlbnQpICYmICFuZXcgUmVnRXhwKFRBQkxFVCArICcgcGMnLCAnaScpLnRlc3QodXNlcl9hZ2VudCkpIHtcbiAgICAgICAgcmV0dXJuIEdFTkVSSUNfVEFCTEVUXG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuICcnXG4gICAgfVxufVxuXG5leHBvcnQgY29uc3QgZGV0ZWN0RGV2aWNlVHlwZSA9IGZ1bmN0aW9uICh1c2VyX2FnZW50OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IGRldmljZSA9IGRldGVjdERldmljZSh1c2VyX2FnZW50KVxuICAgIGlmIChcbiAgICAgICAgZGV2aWNlID09PSBJUEFEIHx8XG4gICAgICAgIGRldmljZSA9PT0gQU5EUk9JRF9UQUJMRVQgfHxcbiAgICAgICAgZGV2aWNlID09PSAnS29ibycgfHxcbiAgICAgICAgZGV2aWNlID09PSAnS2luZGxlIEZpcmUnIHx8XG4gICAgICAgIGRldmljZSA9PT0gR0VORVJJQ19UQUJMRVRcbiAgICApIHtcbiAgICAgICAgcmV0dXJuIFRBQkxFVFxuICAgIH0gZWxzZSBpZiAoZGV2aWNlID09PSBOSU5URU5ETyB8fCBkZXZpY2UgPT09IFhCT1ggfHwgZGV2aWNlID09PSBQTEFZU1RBVElPTiB8fCBkZXZpY2UgPT09IE9VWUEpIHtcbiAgICAgICAgcmV0dXJuICdDb25zb2xlJ1xuICAgIH0gZWxzZSBpZiAoZGV2aWNlID09PSBBUFBMRV9XQVRDSCkge1xuICAgICAgICByZXR1cm4gJ1dlYXJhYmxlJ1xuICAgIH0gZWxzZSBpZiAoZGV2aWNlKSB7XG4gICAgICAgIHJldHVybiBNT0JJTEVcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gJ0Rlc2t0b3AnXG4gICAgfVxufVxuIiwgImltcG9ydCB7IF9nZXRRdWVyeVBhcmFtLCBjb252ZXJ0VG9VUkwgfSBmcm9tICcuL3JlcXVlc3QtdXRpbHMnXG5pbXBvcnQgeyBfaXNOdWxsIH0gZnJvbSAnLi90eXBlLXV0aWxzJ1xuaW1wb3J0IHsgUHJvcGVydGllcyB9IGZyb20gJy4uL3R5cGVzJ1xuaW1wb3J0IENvbmZpZyBmcm9tICcuLi9jb25maWcnXG5pbXBvcnQgeyBfZWFjaCwgX2V4dGVuZCwgX3N0cmlwX2VtcHR5X3Byb3BlcnRpZXMsIF90aW1lc3RhbXAgfSBmcm9tICcuL2luZGV4J1xuaW1wb3J0IHsgZG9jdW1lbnQsIGxvY2F0aW9uLCB1c2VyQWdlbnQsIHdpbmRvdyB9IGZyb20gJy4vZ2xvYmFscydcbmltcG9ydCB7IGRldGVjdEJyb3dzZXIsIGRldGVjdEJyb3dzZXJWZXJzaW9uLCBkZXRlY3REZXZpY2UsIGRldGVjdERldmljZVR5cGUsIGRldGVjdE9TIH0gZnJvbSAnLi91c2VyLWFnZW50LXV0aWxzJ1xuXG5jb25zdCBVUkxfUkVHRVhfUFJFRklYID0gJ2h0dHBzPzovLyguKiknXG5cbmV4cG9ydCBjb25zdCBfaW5mbyA9IHtcbiAgICBjYW1wYWlnblBhcmFtczogZnVuY3Rpb24gKGN1c3RvbVBhcmFtcz86IHN0cmluZ1tdKTogUmVjb3JkPHN0cmluZywgYW55PiB7XG4gICAgICAgIC8vIFNob3VsZCBiZSBrZXB0IGluIHN5bmMgd2l0aCBodHRwczovL2dpdGh1Yi5jb20vUG9zdEhvZy9wb3N0aG9nL2Jsb2IvbWFzdGVyL3BsdWdpbi1zZXJ2ZXIvc3JjL3V0aWxzL2RiL3V0aWxzLnRzI0w2MFxuICAgICAgICBjb25zdCBjYW1wYWlnbl9rZXl3b3JkcyA9IFtcbiAgICAgICAgICAgICd1dG1fc291cmNlJyxcbiAgICAgICAgICAgICd1dG1fbWVkaXVtJyxcbiAgICAgICAgICAgICd1dG1fY2FtcGFpZ24nLFxuICAgICAgICAgICAgJ3V0bV9jb250ZW50JyxcbiAgICAgICAgICAgICd1dG1fdGVybScsXG4gICAgICAgICAgICAnZ2NsaWQnLCAvLyBnb29nbGUgYWRzXG4gICAgICAgICAgICAnZ2FkX3NvdXJjZScsIC8vIGdvb2dsZSBhZHNcbiAgICAgICAgICAgICdnY2xzcmMnLCAvLyBnb29nbGUgYWRzIDM2MFxuICAgICAgICAgICAgJ2RjbGlkJywgLy8gZ29vZ2xlIGRpc3BsYXkgYWRzXG4gICAgICAgICAgICAnZ2JyYWlkJywgLy8gZ29vZ2xlIGFkcywgd2ViIHRvIGFwcFxuICAgICAgICAgICAgJ3dicmFpZCcsIC8vIGdvb2dsZSBhZHMsIGFwcCB0byB3ZWJcbiAgICAgICAgICAgICdmYmNsaWQnLCAvLyBmYWNlYm9va1xuICAgICAgICAgICAgJ21zY2xraWQnLCAvLyBtaWNyb3NvZnRcbiAgICAgICAgICAgICd0d2NsaWQnLCAvLyB0d2l0dGVyXG4gICAgICAgICAgICAnbGlfZmF0X2lkJywgLy8gbGlua2VkaW5cbiAgICAgICAgICAgICdtY19jaWQnLCAvLyBtYWlsY2hpbXAgY2FtcGFpZ24gaWRcbiAgICAgICAgICAgICdpZ3NoaWQnLCAvLyBpbnN0YWdyYW1cbiAgICAgICAgICAgICd0dGNsaWQnLCAvLyB0aWt0b2tcbiAgICAgICAgXS5jb25jYXQoY3VzdG9tUGFyYW1zIHx8IFtdKVxuXG4gICAgICAgIGNvbnN0IHBhcmFtczogUmVjb3JkPHN0cmluZywgYW55PiA9IHt9XG4gICAgICAgIF9lYWNoKGNhbXBhaWduX2tleXdvcmRzLCBmdW5jdGlvbiAoa3drZXkpIHtcbiAgICAgICAgICAgIGNvbnN0IGt3ID0gZG9jdW1lbnQgPyBfZ2V0UXVlcnlQYXJhbShkb2N1bWVudC5VUkwsIGt3a2V5KSA6ICcnXG4gICAgICAgICAgICBpZiAoa3cubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgcGFyYW1zW2t3a2V5XSA9IGt3XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG5cbiAgICAgICAgcmV0dXJuIHBhcmFtc1xuICAgIH0sXG5cbiAgICBzZWFyY2hFbmdpbmU6IGZ1bmN0aW9uICgpOiBzdHJpbmcgfCBudWxsIHtcbiAgICAgICAgY29uc3QgcmVmZXJyZXIgPSBkb2N1bWVudD8ucmVmZXJyZXJcbiAgICAgICAgaWYgKCFyZWZlcnJlcikge1xuICAgICAgICAgICAgcmV0dXJuIG51bGxcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChyZWZlcnJlci5zZWFyY2goVVJMX1JFR0VYX1BSRUZJWCArICdnb29nbGUuKFteLz9dKiknKSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAnZ29vZ2xlJ1xuICAgICAgICAgICAgfSBlbHNlIGlmIChyZWZlcnJlci5zZWFyY2goVVJMX1JFR0VYX1BSRUZJWCArICdiaW5nLmNvbScpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICdiaW5nJ1xuICAgICAgICAgICAgfSBlbHNlIGlmIChyZWZlcnJlci5zZWFyY2goVVJMX1JFR0VYX1BSRUZJWCArICd5YWhvby5jb20nKSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAneWFob28nXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHJlZmVycmVyLnNlYXJjaChVUkxfUkVHRVhfUFJFRklYICsgJ2R1Y2tkdWNrZ28uY29tJykgPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gJ2R1Y2tkdWNrZ28nXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgc2VhcmNoSW5mbzogZnVuY3Rpb24gKCk6IFJlY29yZDxzdHJpbmcsIGFueT4ge1xuICAgICAgICBjb25zdCBzZWFyY2ggPSBfaW5mby5zZWFyY2hFbmdpbmUoKSxcbiAgICAgICAgICAgIHBhcmFtID0gc2VhcmNoICE9ICd5YWhvbycgPyAncScgOiAncCcsXG4gICAgICAgICAgICByZXQ6IFJlY29yZDxzdHJpbmcsIGFueT4gPSB7fVxuXG4gICAgICAgIGlmICghX2lzTnVsbChzZWFyY2gpKSB7XG4gICAgICAgICAgICByZXRbJyRzZWFyY2hfZW5naW5lJ10gPSBzZWFyY2hcblxuICAgICAgICAgICAgY29uc3Qga2V5d29yZCA9IGRvY3VtZW50ID8gX2dldFF1ZXJ5UGFyYW0oZG9jdW1lbnQucmVmZXJyZXIsIHBhcmFtKSA6ICcnXG4gICAgICAgICAgICBpZiAoa2V5d29yZC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICByZXRbJ3BoX2tleXdvcmQnXSA9IGtleXdvcmRcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXRcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogVGhpcyBmdW5jdGlvbiBkZXRlY3RzIHdoaWNoIGJyb3dzZXIgaXMgcnVubmluZyB0aGlzIHNjcmlwdC5cbiAgICAgKiBUaGUgb3JkZXIgb2YgdGhlIGNoZWNrcyBhcmUgaW1wb3J0YW50IHNpbmNlIG1hbnkgdXNlciBhZ2VudHNcbiAgICAgKiBpbmNsdWRlIGtleXdvcmRzIHVzZWQgaW4gbGF0ZXIgY2hlY2tzLlxuICAgICAqL1xuICAgIGJyb3dzZXI6IGRldGVjdEJyb3dzZXIsXG5cbiAgICAvKipcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIGRldGVjdHMgd2hpY2ggYnJvd3NlciB2ZXJzaW9uIGlzIHJ1bm5pbmcgdGhpcyBzY3JpcHQsXG4gICAgICogcGFyc2luZyBtYWpvciBhbmQgbWlub3IgdmVyc2lvbiAoZS5nLiwgNDIuMSkuIFVzZXIgYWdlbnQgc3RyaW5ncyBmcm9tOlxuICAgICAqIGh0dHA6Ly93d3cudXNlcmFnZW50c3RyaW5nLmNvbS9wYWdlcy91c2VyYWdlbnRzdHJpbmcucGhwXG4gICAgICpcbiAgICAgKiBgbmF2aWdhdG9yLnZlbmRvcmAgaXMgcGFzc2VkIGluIGFuZCB1c2VkIHRvIGhlbHAgd2l0aCBkZXRlY3RpbmcgY2VydGFpbiBicm93c2Vyc1xuICAgICAqIE5CIGBuYXZpZ2F0b3IudmVuZG9yYCBpcyBkZXByZWNhdGVkIGFuZCBub3QgcHJlc2VudCBpbiBldmVyeSBicm93c2VyXG4gICAgICovXG4gICAgYnJvd3NlclZlcnNpb246IGRldGVjdEJyb3dzZXJWZXJzaW9uLFxuXG4gICAgYnJvd3Nlckxhbmd1YWdlOiBmdW5jdGlvbiAoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIG5hdmlnYXRvci5sYW5ndWFnZSB8fCAvLyBBbnkgbW9kZXJuIGJyb3dzZXJcbiAgICAgICAgICAgIChuYXZpZ2F0b3IgYXMgUmVjb3JkPHN0cmluZywgYW55PikudXNlckxhbmd1YWdlIC8vIElFMTFcbiAgICAgICAgKVxuICAgIH0sXG5cbiAgICBvczogZGV0ZWN0T1MsXG5cbiAgICBkZXZpY2U6IGRldGVjdERldmljZSxcblxuICAgIGRldmljZVR5cGU6IGRldGVjdERldmljZVR5cGUsXG5cbiAgICByZWZlcnJlcjogZnVuY3Rpb24gKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBkb2N1bWVudD8ucmVmZXJyZXIgfHwgJyRkaXJlY3QnXG4gICAgfSxcblxuICAgIHJlZmVycmluZ0RvbWFpbjogZnVuY3Rpb24gKCk6IHN0cmluZyB7XG4gICAgICAgIGlmICghZG9jdW1lbnQ/LnJlZmVycmVyKSB7XG4gICAgICAgICAgICByZXR1cm4gJyRkaXJlY3QnXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbnZlcnRUb1VSTChkb2N1bWVudC5yZWZlcnJlcik/Lmhvc3QgfHwgJyRkaXJlY3QnXG4gICAgfSxcblxuICAgIHByb3BlcnRpZXM6IGZ1bmN0aW9uICgpOiBQcm9wZXJ0aWVzIHtcbiAgICAgICAgaWYgKCF1c2VyQWdlbnQpIHtcbiAgICAgICAgICAgIHJldHVybiB7fVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IFtvc19uYW1lLCBvc192ZXJzaW9uXSA9IF9pbmZvLm9zKHVzZXJBZ2VudClcbiAgICAgICAgcmV0dXJuIF9leHRlbmQoXG4gICAgICAgICAgICBfc3RyaXBfZW1wdHlfcHJvcGVydGllcyh7XG4gICAgICAgICAgICAgICAgJG9zOiBvc19uYW1lLFxuICAgICAgICAgICAgICAgICRvc192ZXJzaW9uOiBvc192ZXJzaW9uLFxuICAgICAgICAgICAgICAgICRicm93c2VyOiBfaW5mby5icm93c2VyKHVzZXJBZ2VudCwgbmF2aWdhdG9yLnZlbmRvciksXG4gICAgICAgICAgICAgICAgJGRldmljZTogX2luZm8uZGV2aWNlKHVzZXJBZ2VudCksXG4gICAgICAgICAgICAgICAgJGRldmljZV90eXBlOiBfaW5mby5kZXZpY2VUeXBlKHVzZXJBZ2VudCksXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAkY3VycmVudF91cmw6IGxvY2F0aW9uPy5ocmVmLFxuICAgICAgICAgICAgICAgICRob3N0OiBsb2NhdGlvbj8uaG9zdCxcbiAgICAgICAgICAgICAgICAkcGF0aG5hbWU6IGxvY2F0aW9uPy5wYXRobmFtZSxcbiAgICAgICAgICAgICAgICAkcmF3X3VzZXJfYWdlbnQ6IHVzZXJBZ2VudC5sZW5ndGggPiAxMDAwID8gdXNlckFnZW50LnN1YnN0cmluZygwLCA5OTcpICsgJy4uLicgOiB1c2VyQWdlbnQsXG4gICAgICAgICAgICAgICAgJGJyb3dzZXJfdmVyc2lvbjogX2luZm8uYnJvd3NlclZlcnNpb24odXNlckFnZW50LCBuYXZpZ2F0b3IudmVuZG9yKSxcbiAgICAgICAgICAgICAgICAkYnJvd3Nlcl9sYW5ndWFnZTogX2luZm8uYnJvd3Nlckxhbmd1YWdlKCksXG4gICAgICAgICAgICAgICAgJHNjcmVlbl9oZWlnaHQ6IHdpbmRvdz8uc2NyZWVuLmhlaWdodCxcbiAgICAgICAgICAgICAgICAkc2NyZWVuX3dpZHRoOiB3aW5kb3c/LnNjcmVlbi53aWR0aCxcbiAgICAgICAgICAgICAgICAkdmlld3BvcnRfaGVpZ2h0OiB3aW5kb3c/LmlubmVySGVpZ2h0LFxuICAgICAgICAgICAgICAgICR2aWV3cG9ydF93aWR0aDogd2luZG93Py5pbm5lcldpZHRoLFxuICAgICAgICAgICAgICAgICRsaWI6ICd3ZWInLFxuICAgICAgICAgICAgICAgICRsaWJfdmVyc2lvbjogQ29uZmlnLkxJQl9WRVJTSU9OLFxuICAgICAgICAgICAgICAgICRpbnNlcnRfaWQ6IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZygyLCAxMCkgKyBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMiwgMTApLFxuICAgICAgICAgICAgICAgICR0aW1lOiBfdGltZXN0YW1wKCkgLyAxMDAwLCAvLyBlcG9jaCB0aW1lIGluIHNlY29uZHNcbiAgICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgIH0sXG5cbiAgICBwZW9wbGVfcHJvcGVydGllczogZnVuY3Rpb24gKCk6IFByb3BlcnRpZXMge1xuICAgICAgICBpZiAoIXVzZXJBZ2VudCkge1xuICAgICAgICAgICAgcmV0dXJuIHt9XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBbb3NfbmFtZSwgb3NfdmVyc2lvbl0gPSBfaW5mby5vcyh1c2VyQWdlbnQpXG4gICAgICAgIHJldHVybiBfZXh0ZW5kKFxuICAgICAgICAgICAgX3N0cmlwX2VtcHR5X3Byb3BlcnRpZXMoe1xuICAgICAgICAgICAgICAgICRvczogb3NfbmFtZSxcbiAgICAgICAgICAgICAgICAkb3NfdmVyc2lvbjogb3NfdmVyc2lvbixcbiAgICAgICAgICAgICAgICAkYnJvd3NlcjogX2luZm8uYnJvd3Nlcih1c2VyQWdlbnQsIG5hdmlnYXRvci52ZW5kb3IpLFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgJGJyb3dzZXJfdmVyc2lvbjogX2luZm8uYnJvd3NlclZlcnNpb24odXNlckFnZW50LCBuYXZpZ2F0b3IudmVuZG9yKSxcbiAgICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgIH0sXG59XG4iLCAiLyogZXNsaW50IGNhbWVsY2FzZTogXCJvZmZcIiAqL1xuXG5pbXBvcnQgeyBfZWFjaCwgX2V4dGVuZCwgX2luY2x1ZGUsIF9zdHJpcF9lbXB0eV9wcm9wZXJ0aWVzIH0gZnJvbSAnLi91dGlscydcbmltcG9ydCB7IGNvb2tpZVN0b3JlLCBsb2NhbFN0b3JlLCBsb2NhbFBsdXNDb29raWVTdG9yZSwgbWVtb3J5U3RvcmUsIHNlc3Npb25TdG9yZSB9IGZyb20gJy4vc3RvcmFnZSdcbmltcG9ydCB7IFBlcnNpc3RlbnRTdG9yZSwgUG9zdEhvZ0NvbmZpZywgUHJvcGVydGllcyB9IGZyb20gJy4vdHlwZXMnXG5pbXBvcnQge1xuICAgIFBFUlNJU1RFTkNFX1JFU0VSVkVEX1BST1BFUlRJRVMsXG4gICAgRVZFTlRfVElNRVJTX0tFWSxcbiAgICBFTkFCTEVEX0ZFQVRVUkVfRkxBR1MsXG4gICAgUE9TVEhPR19RVU9UQV9MSU1JVEVELFxuICAgIFVTRVJfU1RBVEUsXG59IGZyb20gJy4vY29uc3RhbnRzJ1xuXG5pbXBvcnQgeyBfaXNPYmplY3QsIF9pc1VuZGVmaW5lZCB9IGZyb20gJy4vdXRpbHMvdHlwZS11dGlscydcbmltcG9ydCB7IF9pbmZvIH0gZnJvbSAnLi91dGlscy9ldmVudC11dGlscydcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJy4vdXRpbHMvbG9nZ2VyJ1xuXG5jb25zdCBDQVNFX0lOU0VOU0lUSVZFX1BFUlNJU1RFTkNFX1RZUEVTOiByZWFkb25seSBMb3dlcmNhc2U8UG9zdEhvZ0NvbmZpZ1sncGVyc2lzdGVuY2UnXT5bXSA9IFtcbiAgICAnY29va2llJyxcbiAgICAnbG9jYWxzdG9yYWdlJyxcbiAgICAnbG9jYWxzdG9yYWdlK2Nvb2tpZScsXG4gICAgJ3Nlc3Npb25zdG9yYWdlJyxcbiAgICAnbWVtb3J5Jyxcbl1cblxuY29uc3QgcGFyc2VOYW1lID0gKGNvbmZpZzogUG9zdEhvZ0NvbmZpZyk6IHN0cmluZyA9PiB7XG4gICAgbGV0IHRva2VuID0gJydcbiAgICBpZiAoY29uZmlnWyd0b2tlbiddKSB7XG4gICAgICAgIHRva2VuID0gY29uZmlnWyd0b2tlbiddLnJlcGxhY2UoL1xcKy9nLCAnUEwnKS5yZXBsYWNlKC9cXC8vZywgJ1NMJykucmVwbGFjZSgvPS9nLCAnRVEnKVxuICAgIH1cblxuICAgIGlmIChjb25maWdbJ3BlcnNpc3RlbmNlX25hbWUnXSkge1xuICAgICAgICByZXR1cm4gJ3BoXycgKyBjb25maWdbJ3BlcnNpc3RlbmNlX25hbWUnXVxuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAncGhfJyArIHRva2VuICsgJ19wb3N0aG9nJ1xuICAgIH1cbn1cblxuLyoqXG4gKiBQb3N0SG9nIFBlcnNpc3RlbmNlIE9iamVjdFxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmV4cG9ydCBjbGFzcyBQb3N0SG9nUGVyc2lzdGVuY2Uge1xuICAgIHByaXZhdGUgY29uZmlnOiBQb3N0SG9nQ29uZmlnXG4gICAgcHJvcHM6IFByb3BlcnRpZXNcbiAgICBzdG9yYWdlOiBQZXJzaXN0ZW50U3RvcmVcbiAgICBjYW1wYWlnbl9wYXJhbXNfc2F2ZWQ6IGJvb2xlYW5cbiAgICBuYW1lOiBzdHJpbmdcbiAgICBkaXNhYmxlZDogYm9vbGVhbiB8IHVuZGVmaW5lZFxuICAgIHNlY3VyZTogYm9vbGVhbiB8IHVuZGVmaW5lZFxuICAgIGV4cGlyZV9kYXlzOiBudW1iZXIgfCB1bmRlZmluZWRcbiAgICBkZWZhdWx0X2V4cGlyeTogbnVtYmVyIHwgdW5kZWZpbmVkXG4gICAgY3Jvc3Nfc3ViZG9tYWluOiBib29sZWFuIHwgdW5kZWZpbmVkXG5cbiAgICBjb25zdHJ1Y3Rvcihjb25maWc6IFBvc3RIb2dDb25maWcpIHtcbiAgICAgICAgdGhpcy5jb25maWcgPSBjb25maWdcbiAgICAgICAgdGhpcy5wcm9wcyA9IHt9XG4gICAgICAgIHRoaXMuY2FtcGFpZ25fcGFyYW1zX3NhdmVkID0gZmFsc2VcbiAgICAgICAgdGhpcy5uYW1lID0gcGFyc2VOYW1lKGNvbmZpZylcbiAgICAgICAgdGhpcy5zdG9yYWdlID0gdGhpcy5idWlsZFN0b3JhZ2UoY29uZmlnKVxuICAgICAgICB0aGlzLmxvYWQoKVxuICAgICAgICB0aGlzLnVwZGF0ZV9jb25maWcoY29uZmlnLCBjb25maWcpXG4gICAgICAgIHRoaXMuc2F2ZSgpXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBidWlsZFN0b3JhZ2UoY29uZmlnOiBQb3N0SG9nQ29uZmlnKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIENBU0VfSU5TRU5TSVRJVkVfUEVSU0lTVEVOQ0VfVFlQRVMuaW5kZXhPZihcbiAgICAgICAgICAgICAgICBjb25maWdbJ3BlcnNpc3RlbmNlJ10udG9Mb3dlckNhc2UoKSBhcyBMb3dlcmNhc2U8UG9zdEhvZ0NvbmZpZ1sncGVyc2lzdGVuY2UnXT5cbiAgICAgICAgICAgICkgPT09IC0xXG4gICAgICAgICkge1xuICAgICAgICAgICAgbG9nZ2VyLmNyaXRpY2FsKFxuICAgICAgICAgICAgICAgICdVbmtub3duIHBlcnNpc3RlbmNlIHR5cGUgJyArIGNvbmZpZ1sncGVyc2lzdGVuY2UnXSArICc7IGZhbGxpbmcgYmFjayB0byBsb2NhbFN0b3JhZ2UrY29va2llJ1xuICAgICAgICAgICAgKVxuICAgICAgICAgICAgY29uZmlnWydwZXJzaXN0ZW5jZSddID0gJ2xvY2FsU3RvcmFnZStjb29raWUnXG4gICAgICAgIH1cblxuICAgICAgICBsZXQgc3RvcmU6IFBlcnNpc3RlbnRTdG9yZVxuICAgICAgICAvLyBXZSBoYW5kbGUgc3RvcmFnZSB0eXBlIGluIGEgY2FzZS1pbnNlbnNpdGl2ZSB3YXkgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5XG4gICAgICAgIGNvbnN0IHN0b3JhZ2VfdHlwZSA9IGNvbmZpZ1sncGVyc2lzdGVuY2UnXS50b0xvd2VyQ2FzZSgpIGFzIExvd2VyY2FzZTxQb3N0SG9nQ29uZmlnWydwZXJzaXN0ZW5jZSddPlxuICAgICAgICBpZiAoc3RvcmFnZV90eXBlID09PSAnbG9jYWxzdG9yYWdlJyAmJiBsb2NhbFN0b3JlLmlzX3N1cHBvcnRlZCgpKSB7XG4gICAgICAgICAgICBzdG9yZSA9IGxvY2FsU3RvcmVcbiAgICAgICAgfSBlbHNlIGlmIChzdG9yYWdlX3R5cGUgPT09ICdsb2NhbHN0b3JhZ2UrY29va2llJyAmJiBsb2NhbFBsdXNDb29raWVTdG9yZS5pc19zdXBwb3J0ZWQoKSkge1xuICAgICAgICAgICAgc3RvcmUgPSBsb2NhbFBsdXNDb29raWVTdG9yZVxuICAgICAgICB9IGVsc2UgaWYgKHN0b3JhZ2VfdHlwZSA9PT0gJ3Nlc3Npb25zdG9yYWdlJyAmJiBzZXNzaW9uU3RvcmUuaXNfc3VwcG9ydGVkKCkpIHtcbiAgICAgICAgICAgIHN0b3JlID0gc2Vzc2lvblN0b3JlXG4gICAgICAgIH0gZWxzZSBpZiAoc3RvcmFnZV90eXBlID09PSAnbWVtb3J5Jykge1xuICAgICAgICAgICAgc3RvcmUgPSBtZW1vcnlTdG9yZVxuICAgICAgICB9IGVsc2UgaWYgKHN0b3JhZ2VfdHlwZSA9PT0gJ2Nvb2tpZScpIHtcbiAgICAgICAgICAgIHN0b3JlID0gY29va2llU3RvcmVcbiAgICAgICAgfSBlbHNlIGlmIChsb2NhbFBsdXNDb29raWVTdG9yZS5pc19zdXBwb3J0ZWQoKSkge1xuICAgICAgICAgICAgLy8gc2VsZWN0ZWQgc3RvcmFnZSB0eXBlIHdhc24ndCBzdXBwb3J0ZWQsIGZhbGxiYWNrIHRvICdsb2NhbHN0b3JhZ2UrY29va2llJyBpZiBwb3NzaWJsZVxuICAgICAgICAgICAgc3RvcmUgPSBsb2NhbFBsdXNDb29raWVTdG9yZVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3RvcmUgPSBjb29raWVTdG9yZVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHN0b3JlXG4gICAgfVxuXG4gICAgcHJvcGVydGllcygpOiBQcm9wZXJ0aWVzIHtcbiAgICAgICAgY29uc3QgcDogUHJvcGVydGllcyA9IHt9XG4gICAgICAgIC8vIEZpbHRlciBvdXQgcmVzZXJ2ZWQgcHJvcGVydGllc1xuICAgICAgICBfZWFjaCh0aGlzLnByb3BzLCBmdW5jdGlvbiAodiwgaykge1xuICAgICAgICAgICAgaWYgKGsgPT09IEVOQUJMRURfRkVBVFVSRV9GTEFHUyAmJiBfaXNPYmplY3QodikpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXModilcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgcFtgJGZlYXR1cmUvJHtrZXlzW2ldfWBdID0gdltrZXlzW2ldXVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIV9pbmNsdWRlKFBFUlNJU1RFTkNFX1JFU0VSVkVEX1BST1BFUlRJRVMsIGspKSB7XG4gICAgICAgICAgICAgICAgcFtrXSA9IHZcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIHBcbiAgICB9XG5cbiAgICBsb2FkKCk6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy5kaXNhYmxlZCkge1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBlbnRyeSA9IHRoaXMuc3RvcmFnZS5wYXJzZSh0aGlzLm5hbWUpXG5cbiAgICAgICAgaWYgKGVudHJ5KSB7XG4gICAgICAgICAgICB0aGlzLnByb3BzID0gX2V4dGVuZCh7fSwgZW50cnkpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBOT1RFOiBTYXZpbmcgZnJlcXVlbnRseSBjYXVzZXMgaXNzdWVzIHdpdGggUmVjb3JkaW5ncyBhbmQgQ29uc2VudCBNYW5hZ2VtZW50IFBsYXRmb3JtIChDTVApIHRvb2xzIHdoaWNoXG4gICAgICogb2JzZXJ2ZSBjb29raWUgY2hhbmdlcywgYW5kIG1vZGlmeSB0aGVpciBVSSwgb2Z0ZW4gY2F1c2luZyBpbmZpbml0ZSBsb29wcy5cbiAgICAgKiBBcyBzdWNoIGNhbGxlcnMgb2YgdGhpcyBzaG91bGQgaWRlYWxseSBjaGVjayB0aGF0IHRoZSBkYXRhIGhhcyBjaGFuZ2VkIGJlZm9yZWhhbmRcbiAgICAgKi9cbiAgICBzYXZlKCk6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy5kaXNhYmxlZCkge1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zdG9yYWdlLnNldCh0aGlzLm5hbWUsIHRoaXMucHJvcHMsIHRoaXMuZXhwaXJlX2RheXMsIHRoaXMuY3Jvc3Nfc3ViZG9tYWluLCB0aGlzLnNlY3VyZSlcbiAgICB9XG5cbiAgICByZW1vdmUoKTogdm9pZCB7XG4gICAgICAgIC8vIHJlbW92ZSBib3RoIGRvbWFpbiBhbmQgc3ViZG9tYWluIGNvb2tpZXNcbiAgICAgICAgdGhpcy5zdG9yYWdlLnJlbW92ZSh0aGlzLm5hbWUsIGZhbHNlKVxuICAgICAgICB0aGlzLnN0b3JhZ2UucmVtb3ZlKHRoaXMubmFtZSwgdHJ1ZSlcbiAgICB9XG5cbiAgICAvLyByZW1vdmVzIHRoZSBzdG9yYWdlIGVudHJ5IGFuZCBkZWxldGVzIGFsbCBsb2FkZWQgZGF0YVxuICAgIC8vIGZvcmNlZCBuYW1lIGZvciB0ZXN0c1xuXG4gICAgY2xlYXIoKTogdm9pZCB7XG4gICAgICAgIHRoaXMucmVtb3ZlKClcbiAgICAgICAgdGhpcy5wcm9wcyA9IHt9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHByb3BzXG4gICAgICogQHBhcmFtIHsqPX0gZGVmYXVsdF92YWx1ZVxuICAgICAqIEBwYXJhbSB7bnVtYmVyPX0gZGF5c1xuICAgICAqL1xuXG4gICAgcmVnaXN0ZXJfb25jZShwcm9wczogUHJvcGVydGllcywgZGVmYXVsdF92YWx1ZTogYW55LCBkYXlzPzogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgICAgIGlmIChfaXNPYmplY3QocHJvcHMpKSB7XG4gICAgICAgICAgICBpZiAoX2lzVW5kZWZpbmVkKGRlZmF1bHRfdmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgZGVmYXVsdF92YWx1ZSA9ICdOb25lJ1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5leHBpcmVfZGF5cyA9IF9pc1VuZGVmaW5lZChkYXlzKSA/IHRoaXMuZGVmYXVsdF9leHBpcnkgOiBkYXlzXG5cbiAgICAgICAgICAgIGxldCBoYXNDaGFuZ2VzID0gZmFsc2VcblxuICAgICAgICAgICAgX2VhY2gocHJvcHMsICh2YWwsIHByb3ApID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMucHJvcHMuaGFzT3duUHJvcGVydHkocHJvcCkgfHwgdGhpcy5wcm9wc1twcm9wXSA9PT0gZGVmYXVsdF92YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzW3Byb3BdID0gdmFsXG4gICAgICAgICAgICAgICAgICAgIGhhc0NoYW5nZXMgPSB0cnVlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgaWYgKGhhc0NoYW5nZXMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNhdmUoKVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHByb3BzXG4gICAgICogQHBhcmFtIHtudW1iZXI9fSBkYXlzXG4gICAgICovXG5cbiAgICByZWdpc3Rlcihwcm9wczogUHJvcGVydGllcywgZGF5cz86IG51bWJlcik6IGJvb2xlYW4ge1xuICAgICAgICBpZiAoX2lzT2JqZWN0KHByb3BzKSkge1xuICAgICAgICAgICAgdGhpcy5leHBpcmVfZGF5cyA9IF9pc1VuZGVmaW5lZChkYXlzKSA/IHRoaXMuZGVmYXVsdF9leHBpcnkgOiBkYXlzXG5cbiAgICAgICAgICAgIGxldCBoYXNDaGFuZ2VzID0gZmFsc2VcblxuICAgICAgICAgICAgX2VhY2gocHJvcHMsICh2YWwsIHByb3ApID0+IHtcbiAgICAgICAgICAgICAgICBpZiAocHJvcHMuaGFzT3duUHJvcGVydHkocHJvcCkgJiYgdGhpcy5wcm9wc1twcm9wXSAhPT0gdmFsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHNbcHJvcF0gPSB2YWxcbiAgICAgICAgICAgICAgICAgICAgaGFzQ2hhbmdlcyA9IHRydWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICBpZiAoaGFzQ2hhbmdlcykge1xuICAgICAgICAgICAgICAgIHRoaXMuc2F2ZSgpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG5cbiAgICB1bnJlZ2lzdGVyKHByb3A6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICBpZiAocHJvcCBpbiB0aGlzLnByb3BzKSB7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy5wcm9wc1twcm9wXVxuICAgICAgICAgICAgdGhpcy5zYXZlKClcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHVwZGF0ZV9jYW1wYWlnbl9wYXJhbXMoKTogdm9pZCB7XG4gICAgICAgIGlmICghdGhpcy5jYW1wYWlnbl9wYXJhbXNfc2F2ZWQpIHtcbiAgICAgICAgICAgIHRoaXMucmVnaXN0ZXIoX2luZm8uY2FtcGFpZ25QYXJhbXModGhpcy5jb25maWcuY3VzdG9tX2NhbXBhaWduX3BhcmFtcykpXG4gICAgICAgICAgICB0aGlzLmNhbXBhaWduX3BhcmFtc19zYXZlZCA9IHRydWVcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHVwZGF0ZV9zZWFyY2hfa2V5d29yZCgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5yZWdpc3RlcihfaW5mby5zZWFyY2hJbmZvKCkpXG4gICAgfVxuXG4gICAgdXBkYXRlX3JlZmVycmVyX2luZm8oKTogdm9pZCB7XG4gICAgICAgIHRoaXMucmVnaXN0ZXIoe1xuICAgICAgICAgICAgJHJlZmVycmVyOiB0aGlzLnByb3BzWyckcmVmZXJyZXInXSB8fCBfaW5mby5yZWZlcnJlcigpLFxuICAgICAgICAgICAgJHJlZmVycmluZ19kb21haW46IHRoaXMucHJvcHNbJyRyZWZlcnJpbmdfZG9tYWluJ10gfHwgX2luZm8ucmVmZXJyaW5nRG9tYWluKCksXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgZ2V0X3JlZmVycmVyX2luZm8oKTogUHJvcGVydGllcyB7XG4gICAgICAgIHJldHVybiBfc3RyaXBfZW1wdHlfcHJvcGVydGllcyh7XG4gICAgICAgICAgICAkcmVmZXJyZXI6IHRoaXNbJ3Byb3BzJ11bJyRyZWZlcnJlciddLFxuICAgICAgICAgICAgJHJlZmVycmluZ19kb21haW46IHRoaXNbJ3Byb3BzJ11bJyRyZWZlcnJpbmdfZG9tYWluJ10sXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgLy8gc2FmZWx5IGZpbGxzIHRoZSBwYXNzZWQgaW4gb2JqZWN0IHdpdGggc3RvcmVkIHByb3BlcnRpZXMsXG4gICAgLy8gZG9lcyBub3Qgb3ZlcnJpZGUgYW55IHByb3BlcnRpZXMgZGVmaW5lZCBpbiBib3RoXG4gICAgLy8gcmV0dXJucyB0aGUgcGFzc2VkIGluIG9iamVjdFxuXG4gICAgc2FmZV9tZXJnZShwcm9wczogUHJvcGVydGllcyk6IFByb3BlcnRpZXMge1xuICAgICAgICBfZWFjaCh0aGlzLnByb3BzLCBmdW5jdGlvbiAodmFsLCBwcm9wKSB7XG4gICAgICAgICAgICBpZiAoIShwcm9wIGluIHByb3BzKSkge1xuICAgICAgICAgICAgICAgIHByb3BzW3Byb3BdID0gdmFsXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG5cbiAgICAgICAgcmV0dXJuIHByb3BzXG4gICAgfVxuXG4gICAgdXBkYXRlX2NvbmZpZyhjb25maWc6IFBvc3RIb2dDb25maWcsIG9sZENvbmZpZzogUG9zdEhvZ0NvbmZpZyk6IHZvaWQge1xuICAgICAgICB0aGlzLmRlZmF1bHRfZXhwaXJ5ID0gdGhpcy5leHBpcmVfZGF5cyA9IGNvbmZpZ1snY29va2llX2V4cGlyYXRpb24nXVxuICAgICAgICB0aGlzLnNldF9kaXNhYmxlZChjb25maWdbJ2Rpc2FibGVfcGVyc2lzdGVuY2UnXSlcbiAgICAgICAgdGhpcy5zZXRfY3Jvc3Nfc3ViZG9tYWluKGNvbmZpZ1snY3Jvc3Nfc3ViZG9tYWluX2Nvb2tpZSddKVxuICAgICAgICB0aGlzLnNldF9zZWN1cmUoY29uZmlnWydzZWN1cmVfY29va2llJ10pXG5cbiAgICAgICAgaWYgKGNvbmZpZy5wZXJzaXN0ZW5jZSAhPT0gb2xkQ29uZmlnLnBlcnNpc3RlbmNlKSB7XG4gICAgICAgICAgICAvLyBJZiB0aGUgcGVyc2lzdGVuY2UgdHlwZSBoYXMgY2hhbmdlZCwgd2UgbmVlZCB0byBtaWdyYXRlIHRoZSBkYXRhLlxuICAgICAgICAgICAgY29uc3QgbmV3U3RvcmUgPSB0aGlzLmJ1aWxkU3RvcmFnZShjb25maWcpXG4gICAgICAgICAgICBjb25zdCBwcm9wcyA9IHRoaXMucHJvcHNcblxuICAgICAgICAgICAgLy8gY2xlYXIgdGhlIG9sZCBzdG9yZVxuICAgICAgICAgICAgdGhpcy5jbGVhcigpXG4gICAgICAgICAgICB0aGlzLnN0b3JhZ2UgPSBuZXdTdG9yZVxuICAgICAgICAgICAgdGhpcy5wcm9wcyA9IHByb3BzXG5cbiAgICAgICAgICAgIHRoaXMuc2F2ZSgpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzZXRfZGlzYWJsZWQoZGlzYWJsZWQ6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICAgICAgdGhpcy5kaXNhYmxlZCA9IGRpc2FibGVkXG4gICAgICAgIGlmICh0aGlzLmRpc2FibGVkKSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZSgpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnNhdmUoKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2V0X2Nyb3NzX3N1YmRvbWFpbihjcm9zc19zdWJkb21haW46IGJvb2xlYW4pOiB2b2lkIHtcbiAgICAgICAgaWYgKGNyb3NzX3N1YmRvbWFpbiAhPT0gdGhpcy5jcm9zc19zdWJkb21haW4pIHtcbiAgICAgICAgICAgIHRoaXMuY3Jvc3Nfc3ViZG9tYWluID0gY3Jvc3Nfc3ViZG9tYWluXG4gICAgICAgICAgICB0aGlzLnJlbW92ZSgpXG4gICAgICAgICAgICB0aGlzLnNhdmUoKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0X2Nyb3NzX3N1YmRvbWFpbigpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5jcm9zc19zdWJkb21haW5cbiAgICB9XG5cbiAgICBzZXRfc2VjdXJlKHNlY3VyZTogYm9vbGVhbik6IHZvaWQge1xuICAgICAgICBpZiAoc2VjdXJlICE9PSB0aGlzLnNlY3VyZSkge1xuICAgICAgICAgICAgdGhpcy5zZWN1cmUgPSBzZWN1cmVcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlKClcbiAgICAgICAgICAgIHRoaXMuc2F2ZSgpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzZXRfZXZlbnRfdGltZXIoZXZlbnRfbmFtZTogc3RyaW5nLCB0aW1lc3RhbXA6IG51bWJlcik6IHZvaWQge1xuICAgICAgICBjb25zdCB0aW1lcnMgPSB0aGlzLnByb3BzW0VWRU5UX1RJTUVSU19LRVldIHx8IHt9XG4gICAgICAgIHRpbWVyc1tldmVudF9uYW1lXSA9IHRpbWVzdGFtcFxuICAgICAgICB0aGlzLnByb3BzW0VWRU5UX1RJTUVSU19LRVldID0gdGltZXJzXG4gICAgICAgIHRoaXMuc2F2ZSgpXG4gICAgfVxuXG4gICAgcmVtb3ZlX2V2ZW50X3RpbWVyKGV2ZW50X25hbWU6IHN0cmluZyk6IG51bWJlciB7XG4gICAgICAgIGNvbnN0IHRpbWVycyA9IHRoaXMucHJvcHNbRVZFTlRfVElNRVJTX0tFWV0gfHwge31cbiAgICAgICAgY29uc3QgdGltZXN0YW1wID0gdGltZXJzW2V2ZW50X25hbWVdXG4gICAgICAgIGlmICghX2lzVW5kZWZpbmVkKHRpbWVzdGFtcCkpIHtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnByb3BzW0VWRU5UX1RJTUVSU19LRVldW2V2ZW50X25hbWVdXG4gICAgICAgICAgICB0aGlzLnNhdmUoKVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aW1lc3RhbXBcbiAgICB9XG5cbiAgICBnZXRfdXNlcl9zdGF0ZSgpOiAnYW5vbnltb3VzJyB8ICdpZGVudGlmaWVkJyB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb3BzW1VTRVJfU1RBVEVdIHx8ICdhbm9ueW1vdXMnXG4gICAgfVxuXG4gICAgc2V0X3VzZXJfc3RhdGUoc3RhdGU6ICdhbm9ueW1vdXMnIHwgJ2lkZW50aWZpZWQnKTogdm9pZCB7XG4gICAgICAgIHRoaXMucHJvcHNbVVNFUl9TVEFURV0gPSBzdGF0ZVxuICAgICAgICB0aGlzLnNhdmUoKVxuICAgIH1cblxuICAgIGdldF9xdW90YV9saW1pdHMoKTogUmVjb3JkPHN0cmluZywgbnVtYmVyPiB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb3BzW1BPU1RIT0dfUVVPVEFfTElNSVRFRF0gfHwge31cbiAgICB9XG5cbiAgICBzZXRfcXVvdGFfbGltaXRzKHN0YXRlOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+KTogdm9pZCB7XG4gICAgICAgIHRoaXMucHJvcHNbUE9TVEhPR19RVU9UQV9MSU1JVEVEXSA9IHN0YXRlXG4gICAgICAgIHRoaXMuc2F2ZSgpXG4gICAgfVxufVxuIiwgImltcG9ydCB0eXBlIHtcbiAgICBLZWVwSWZyYW1lU3JjRm4sXG4gICAgUmVjb3JkUGx1Z2luLFxuICAgIFNhbXBsaW5nU3RyYXRlZ3ksXG4gICAgYmxvY2tDbGFzcyxcbiAgICBldmVudFdpdGhUaW1lLFxuICAgIGhvb2tzUGFyYW0sXG4gICAgbGlzdGVuZXJIYW5kbGVyLFxuICAgIG1hc2tUZXh0Q2xhc3MsXG4gICAgcGx1Z2luRXZlbnQsXG4gICAgbXV0YXRpb25DYWxsYmFja1BhcmFtLFxufSBmcm9tICdAcnJ3ZWIvdHlwZXMnXG5pbXBvcnQgdHlwZSB7IE1pcnJvciwgTWFza0lucHV0T3B0aW9ucywgTWFza0lucHV0Rm4sIE1hc2tUZXh0Rm4sIFNsaW1ET01PcHRpb25zLCBEYXRhVVJMT3B0aW9ucyB9IGZyb20gJ3Jyd2ViLXNuYXBzaG90J1xuXG5pbXBvcnQgeyBfaXNPYmplY3QgfSBmcm9tICcuLi8uLi91dGlscy90eXBlLXV0aWxzJ1xuXG5leHBvcnQgY29uc3QgcmVwbGFjZW1lbnRJbWFnZVVSSSA9XG4gICAgJ2RhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEhOMlp5QjNhV1IwYUQwaU1UWWlJR2hsYVdkb2REMGlNVFlpSUhacFpYZENiM2c5SWpBZ01DQXhOaUF4TmlJZ1ptbHNiRDBpYm05dVpTSWdlRzFzYm5NOUltaDBkSEE2THk5M2QzY3Vkek11YjNKbkx6SXdNREF2YzNabklqNEtQSEpsWTNRZ2QybGtkR2c5SWpFMklpQm9aV2xuYUhROUlqRTJJaUJtYVd4c1BTSmliR0ZqYXlJdlBnbzhjR0YwYUNCa1BTSk5PQ0F3U0RFMlREQWdNVFpXT0V3NElEQmFJaUJtYVd4c1BTSWpNa1F5UkRKRUlpOCtDanh3WVhSb0lHUTlJazB4TmlBNFZqRTJTRGhNTVRZZ09Gb2lJR1pwYkd3OUlpTXlSREpFTWtRaUx6NEtQQzl6ZG1jK0NnPT0nXG5cbmV4cG9ydCBjb25zdCBGVUxMX1NOQVBTSE9UX0VWRU5UX1RZUEUgPSAyXG5leHBvcnQgY29uc3QgTUVUQV9FVkVOVF9UWVBFID0gNFxuZXhwb3J0IGNvbnN0IElOQ1JFTUVOVEFMX1NOQVBTSE9UX0VWRU5UX1RZUEUgPSAzXG5leHBvcnQgY29uc3QgUExVR0lOX0VWRU5UX1RZUEUgPSA2XG5leHBvcnQgY29uc3QgTVVUQVRJT05fU09VUkNFX1RZUEUgPSAwXG5cbmV4cG9ydCBjb25zdCBNQVhfTUVTU0FHRV9TSVpFID0gNTAwMDAwMCAvLyB+NW1iXG5cbmV4cG9ydCB0eXBlIHJyd2ViUmVjb3JkID0ge1xuICAgIChvcHRpb25zOiByZWNvcmRPcHRpb25zPGV2ZW50V2l0aFRpbWU+KTogbGlzdGVuZXJIYW5kbGVyXG4gICAgYWRkQ3VzdG9tRXZlbnQ6ICh0YWc6IHN0cmluZywgcGF5bG9hZDogYW55KSA9PiB2b2lkXG4gICAgdGFrZUZ1bGxTbmFwc2hvdDogKCkgPT4gdm9pZFxuICAgIG1pcnJvcjogTWlycm9yXG59XG5cbmV4cG9ydCBkZWNsYXJlIHR5cGUgcmVjb3JkT3B0aW9uczxUPiA9IHtcbiAgICBlbWl0PzogKGU6IFQsIGlzQ2hlY2tvdXQ/OiBib29sZWFuKSA9PiB2b2lkXG4gICAgY2hlY2tvdXRFdmVyeU50aD86IG51bWJlclxuICAgIGNoZWNrb3V0RXZlcnlObXM/OiBudW1iZXJcbiAgICBibG9ja0NsYXNzPzogYmxvY2tDbGFzc1xuICAgIGJsb2NrU2VsZWN0b3I/OiBzdHJpbmdcbiAgICBpZ25vcmVDbGFzcz86IHN0cmluZ1xuICAgIG1hc2tUZXh0Q2xhc3M/OiBtYXNrVGV4dENsYXNzXG4gICAgbWFza1RleHRTZWxlY3Rvcj86IHN0cmluZ1xuICAgIG1hc2tBbGxJbnB1dHM/OiBib29sZWFuXG4gICAgbWFza0lucHV0T3B0aW9ucz86IE1hc2tJbnB1dE9wdGlvbnNcbiAgICBtYXNrSW5wdXRGbj86IE1hc2tJbnB1dEZuXG4gICAgbWFza1RleHRGbj86IE1hc2tUZXh0Rm5cbiAgICBzbGltRE9NT3B0aW9ucz86IFNsaW1ET01PcHRpb25zIHwgJ2FsbCcgfCB0cnVlXG4gICAgaWdub3JlQ1NTQXR0cmlidXRlcz86IFNldDxzdHJpbmc+XG4gICAgaW5saW5lU3R5bGVzaGVldD86IGJvb2xlYW5cbiAgICBob29rcz86IGhvb2tzUGFyYW1cbiAgICAvLyBwYWNrRm4/OiBQYWNrRm5cbiAgICBzYW1wbGluZz86IFNhbXBsaW5nU3RyYXRlZ3lcbiAgICBkYXRhVVJMT3B0aW9ucz86IERhdGFVUkxPcHRpb25zXG4gICAgcmVjb3JkQ2FudmFzPzogYm9vbGVhblxuICAgIHJlY29yZENyb3NzT3JpZ2luSWZyYW1lcz86IGJvb2xlYW5cbiAgICByZWNvcmRBZnRlcj86ICdET01Db250ZW50TG9hZGVkJyB8ICdsb2FkJ1xuICAgIHVzZXJUcmlnZ2VyZWRPbklucHV0PzogYm9vbGVhblxuICAgIGNvbGxlY3RGb250cz86IGJvb2xlYW5cbiAgICBpbmxpbmVJbWFnZXM/OiBib29sZWFuXG4gICAgcGx1Z2lucz86IFJlY29yZFBsdWdpbltdXG4gICAgbW91c2Vtb3ZlV2FpdD86IG51bWJlclxuICAgIGtlZXBJZnJhbWVTcmNGbj86IEtlZXBJZnJhbWVTcmNGblxuICAgIC8vIGVycm9ySGFuZGxlcj86IEVycm9ySGFuZGxlclxufVxuXG4vKlxuICogQ2hlY2sgd2hldGhlciBhIGRhdGEgcGF5bG9hZCBpcyBuZWFyaW5nIDVtYi4gSWYgaXQgaXMsIGl0IGNoZWNrcyB0aGUgZGF0YSBmb3JcbiAqIGRhdGEgVVJJcyAodGhlIGxpa2VseSBjdWxwcml0IGZvciBsYXJnZSBwYXlsb2FkcykuIElmIGl0IGZpbmRzIGRhdGEgVVJJcywgaXQgZWl0aGVyIHJlcGxhY2VzXG4gKiBpdCB3aXRoIGEgZ2VuZXJpYyBpbWFnZSAoaWYgaXQncyBhbiBpbWFnZSkgb3IgcmVtb3ZlcyBpdC5cbiAqIEBkYXRhIHtvYmplY3R9IHRoZSByci13ZWIgZGF0YSBvYmplY3RcbiAqIEByZXR1cm5zIHtvYmplY3R9IHRoZSByci13ZWIgZGF0YSBvYmplY3Qgd2l0aCBkYXRhIHVyaXMgZmlsdGVyZWQgb3V0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBlbnN1cmVNYXhNZXNzYWdlU2l6ZShkYXRhOiBldmVudFdpdGhUaW1lKTogeyBldmVudDogZXZlbnRXaXRoVGltZTsgc2l6ZTogbnVtYmVyIH0ge1xuICAgIGxldCBzdHJpbmdpZmllZERhdGEgPSBKU09OLnN0cmluZ2lmeShkYXRhKVxuICAgIC8vIE5vdGU6IHdpdGggY29tcHJlc3Npb24sIHRoaXMgbGltaXQgbWF5IGJlIGFibGUgdG8gYmUgaW5jcmVhc2VkXG4gICAgLy8gYnV0IHdlJ3JlIGFzc3VtaW5nIG1vc3Qgb2YgdGhlIHNpemUgaXMgZnJvbSBhIGRhdGEgdXJpIHdoaWNoXG4gICAgLy8gaXMgdW5saWtlbHkgdG8gYmUgY29tcHJlc3NlZCBmdXJ0aGVyXG5cbiAgICBpZiAoc3RyaW5naWZpZWREYXRhLmxlbmd0aCA+IE1BWF9NRVNTQUdFX1NJWkUpIHtcbiAgICAgICAgLy8gUmVnZXggdGhhdCBtYXRjaGVzIHRoZSBwYXR0ZXJuIGZvciBhIGRhdGFVUkkgd2l0aCB0aGUgc2hhcGUgJ2RhdGE6e21pbWUgdHlwZX07e2VuY29kaW5nfSx7ZGF0YX0nLiBJdDpcbiAgICAgICAgLy8gMSkgQ2hlY2tzIGlmIHRoZSBwYXR0ZXJuIHN0YXJ0cyB3aXRoICdkYXRhOicgKHBvdGVudGlhbGx5LCBub3QgYXQgdGhlIHN0YXJ0IG9mIHRoZSBzdHJpbmcpXG4gICAgICAgIC8vIDIpIEV4dHJhY3RzIHRoZSBtaW1lIHR5cGUgb2YgdGhlIGRhdGEgdXJpIGluIHRoZSBmaXJzdCBncm91cFxuICAgICAgICAvLyAzKSBEZXRlcm1pbmVzIHdoZW4gdGhlIGRhdGEgVVJJIGVuZHMuRGVwZW5kaW5nIG9uIGlmIGl0J3MgdXNlZCBpbiB0aGUgc3JjIHRhZyBvciBjc3MsIGl0IGNhbiBlbmQgd2l0aCBhICkgb3IgXCJcbiAgICAgICAgY29uc3QgZGF0YVVSSVJlZ2V4ID0gL2RhdGE6KFtcXHcvXFwtLl0rKTsoXFx3KyksKFteKVwiXSopL2dpbVxuICAgICAgICBjb25zdCBtYXRjaGVzID0gc3RyaW5naWZpZWREYXRhLm1hdGNoQWxsKGRhdGFVUklSZWdleClcbiAgICAgICAgZm9yIChjb25zdCBtYXRjaCBvZiBtYXRjaGVzKSB7XG4gICAgICAgICAgICBpZiAobWF0Y2hbMV0udG9Mb2NhbGVMb3dlckNhc2UoKS5zbGljZSgwLCA2KSA9PT0gJ2ltYWdlLycpIHtcbiAgICAgICAgICAgICAgICBzdHJpbmdpZmllZERhdGEgPSBzdHJpbmdpZmllZERhdGEucmVwbGFjZShtYXRjaFswXSwgcmVwbGFjZW1lbnRJbWFnZVVSSSlcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc3RyaW5naWZpZWREYXRhID0gc3RyaW5naWZpZWREYXRhLnJlcGxhY2UobWF0Y2hbMF0sICcnKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7IGV2ZW50OiBKU09OLnBhcnNlKHN0cmluZ2lmaWVkRGF0YSksIHNpemU6IHN0cmluZ2lmaWVkRGF0YS5sZW5ndGggfVxufVxuXG5leHBvcnQgY29uc3QgQ09OU09MRV9MT0dfUExVR0lOX05BTUUgPSAncnJ3ZWIvY29uc29sZUAxJyAvLyBUaGUgbmFtZSBvZiB0aGUgcnItd2ViIHBsdWdpbiB0aGF0IGVtaXRzIGNvbnNvbGUgbG9nc1xuXG4vLyBDb25zb2xlIGxvZ3MgY2FuIGJlIHJlYWxseSBsYXJnZS4gVGhpcyBmdW5jdGlvbiB0cnVuY2F0ZXMgbGFyZ2UgbG9nc1xuLy8gSXQncyBhIHNpbXBsZSBmdW5jdGlvbiB0aGF0IGp1c3QgdHJ1bmNhdGVzIGxvbmcgc3RyaW5ncy5cbi8vIFRPRE86IElkZWFsbHkgdGhpcyBmdW5jdGlvbiB3b3VsZCBoYXZlIGJldHRlciBoYW5kbGluZyBvZiBvYmplY3RzICsgbGlzdHMsXG4vLyBzbyB0aGV5IGNvdWxkIHN0aWxsIGJlIHJlbmRlcmVkIGluIGEgcHJldHR5IHdheSBhZnRlciB0cnVuY2F0aW9uLlxuZXhwb3J0IGZ1bmN0aW9uIHRydW5jYXRlTGFyZ2VDb25zb2xlTG9ncyhfZXZlbnQ6IGV2ZW50V2l0aFRpbWUpIHtcbiAgICBjb25zdCBldmVudCA9IF9ldmVudCBhcyBwbHVnaW5FdmVudDx7IHBheWxvYWQ6IHN0cmluZ1tdIH0+XG5cbiAgICBjb25zdCBNQVhfU1RSSU5HX1NJWkUgPSAyMDAwIC8vIE1heGltdW0gbnVtYmVyIG9mIGNoYXJhY3RlcnMgYWxsb3dlZCBpbiBhIHN0cmluZ1xuICAgIGNvbnN0IE1BWF9TVFJJTkdTX1BFUl9MT0cgPSAxMCAvLyBBIGxvZyBjYW4gY29uc2lzdCBvZiBtdWx0aXBsZSBzdHJpbmdzIChlLmcuIGNvbnNvbC5sb2coJ3N0cmluZzEnLCAnc3RyaW5nMicpKVxuXG4gICAgaWYgKFxuICAgICAgICBldmVudCAmJlxuICAgICAgICBfaXNPYmplY3QoZXZlbnQpICYmXG4gICAgICAgIGV2ZW50LnR5cGUgPT09IFBMVUdJTl9FVkVOVF9UWVBFICYmXG4gICAgICAgIF9pc09iamVjdChldmVudC5kYXRhKSAmJlxuICAgICAgICBldmVudC5kYXRhLnBsdWdpbiA9PT0gQ09OU09MRV9MT0dfUExVR0lOX05BTUVcbiAgICApIHtcbiAgICAgICAgLy8gTm90ZTogZXZlbnQuZGF0YS5wYXlsb2FkLnBheWxvYWQgY29tZXMgZnJvbSByci13ZWIsIGFuZCBpcyBhbiBhcnJheSBvZiBzdHJpbmdzXG4gICAgICAgIGlmIChldmVudC5kYXRhLnBheWxvYWQucGF5bG9hZC5sZW5ndGggPiBNQVhfU1RSSU5HU19QRVJfTE9HKSB7XG4gICAgICAgICAgICBldmVudC5kYXRhLnBheWxvYWQucGF5bG9hZCA9IGV2ZW50LmRhdGEucGF5bG9hZC5wYXlsb2FkLnNsaWNlKDAsIE1BWF9TVFJJTkdTX1BFUl9MT0cpXG4gICAgICAgICAgICBldmVudC5kYXRhLnBheWxvYWQucGF5bG9hZC5wdXNoKCcuLi5bdHJ1bmNhdGVkXScpXG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdXBkYXRlZFBheWxvYWQgPSBbXVxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGV2ZW50LmRhdGEucGF5bG9hZC5wYXlsb2FkLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgZXZlbnQuZGF0YS5wYXlsb2FkLnBheWxvYWRbaV0gJiYgLy8gVmFsdWUgY2FuIGJlIG51bGxcbiAgICAgICAgICAgICAgICBldmVudC5kYXRhLnBheWxvYWQucGF5bG9hZFtpXS5sZW5ndGggPiBNQVhfU1RSSU5HX1NJWkVcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHVwZGF0ZWRQYXlsb2FkLnB1c2goZXZlbnQuZGF0YS5wYXlsb2FkLnBheWxvYWRbaV0uc2xpY2UoMCwgTUFYX1NUUklOR19TSVpFKSArICcuLi5bdHJ1bmNhdGVkXScpXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHVwZGF0ZWRQYXlsb2FkLnB1c2goZXZlbnQuZGF0YS5wYXlsb2FkLnBheWxvYWRbaV0pXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZXZlbnQuZGF0YS5wYXlsb2FkLnBheWxvYWQgPSB1cGRhdGVkUGF5bG9hZFxuICAgICAgICAvLyBSZXR1cm4gb3JpZ2luYWwgdHlwZVxuICAgICAgICByZXR1cm4gX2V2ZW50XG4gICAgfVxuICAgIHJldHVybiBfZXZlbnRcbn1cblxuZXhwb3J0IGNsYXNzIE11dGF0aW9uUmF0ZUxpbWl0ZXIge1xuICAgIHByaXZhdGUgYnVja2V0U2l6ZSA9IDEwMFxuICAgIHByaXZhdGUgcmVmaWxsUmF0ZSA9IDEwXG4gICAgcHJpdmF0ZSBtdXRhdGlvbkJ1Y2tldHM6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gPSB7fVxuICAgIHByaXZhdGUgbG9nZ2VkVHJhY2tlcjogUmVjb3JkPHN0cmluZywgYm9vbGVhbj4gPSB7fVxuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkgcnJ3ZWI6IHJyd2ViUmVjb3JkLFxuICAgICAgICBwcml2YXRlIHJlYWRvbmx5IG9wdGlvbnM6IHtcbiAgICAgICAgICAgIGJ1Y2tldFNpemU/OiBudW1iZXJcbiAgICAgICAgICAgIHJlZmlsbFJhdGU/OiBudW1iZXJcbiAgICAgICAgICAgIG9uQmxvY2tlZE5vZGU/OiAoaWQ6IG51bWJlciwgbm9kZTogTm9kZSB8IG51bGwpID0+IHZvaWRcbiAgICAgICAgfSA9IHt9XG4gICAgKSB7XG4gICAgICAgIHRoaXMucmVmaWxsUmF0ZSA9IHRoaXMub3B0aW9ucy5yZWZpbGxSYXRlID8/IHRoaXMucmVmaWxsUmF0ZVxuICAgICAgICB0aGlzLmJ1Y2tldFNpemUgPSB0aGlzLm9wdGlvbnMuYnVja2V0U2l6ZSA/PyB0aGlzLmJ1Y2tldFNpemVcbiAgICAgICAgc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5yZWZpbGxCdWNrZXRzKClcbiAgICAgICAgfSwgMTAwMClcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlZmlsbEJ1Y2tldHMgPSAoKSA9PiB7XG4gICAgICAgIE9iamVjdC5rZXlzKHRoaXMubXV0YXRpb25CdWNrZXRzKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgICAgICAgIHRoaXMubXV0YXRpb25CdWNrZXRzW2tleV0gPSB0aGlzLm11dGF0aW9uQnVja2V0c1trZXldICsgdGhpcy5yZWZpbGxSYXRlXG5cbiAgICAgICAgICAgIGlmICh0aGlzLm11dGF0aW9uQnVja2V0c1trZXldID49IHRoaXMuYnVja2V0U2l6ZSkge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLm11dGF0aW9uQnVja2V0c1trZXldXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXROb2RlT3JSZWxldmFudFBhcmVudCA9IChpZDogbnVtYmVyKTogW251bWJlciwgTm9kZSB8IG51bGxdID0+IHtcbiAgICAgICAgLy8gRm9yIHNvbWUgbm9kZXMgd2Uga25vdyB0aGV5IGFyZSBwYXJ0IG9mIGEgbGFyZ2VyIHRyZWUgc3VjaCBhcyBhbiBTVkcuXG4gICAgICAgIC8vIEZvciB0aG9zZSB3ZSB3YW50IHRvIGJsb2NrIHRoZSBlbnRpcmUgbm9kZSwgbm90IGp1c3QgdGhlIHNwZWNpZmljIGF0dHJpYnV0ZVxuXG4gICAgICAgIGNvbnN0IG5vZGUgPSB0aGlzLnJyd2ViLm1pcnJvci5nZXROb2RlKGlkKVxuXG4gICAgICAgIC8vIENoZWNrIGlmIHRoZSBub2RlIGlzIGFuIEVsZW1lbnQgYW5kIHRoZW4gZmluZCB0aGUgY2xvc2VzdCBwYXJlbnQgdGhhdCBpcyBhbiBTVkdcbiAgICAgICAgaWYgKG5vZGU/Lm5vZGVOYW1lICE9PSAnc3ZnJyAmJiBub2RlIGluc3RhbmNlb2YgRWxlbWVudCkge1xuICAgICAgICAgICAgY29uc3QgY2xvc2VzdFNWRyA9IG5vZGUuY2xvc2VzdCgnc3ZnJylcblxuICAgICAgICAgICAgaWYgKGNsb3Nlc3RTVkcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gW3RoaXMucnJ3ZWIubWlycm9yLmdldElkKGNsb3Nlc3RTVkcpLCBjbG9zZXN0U1ZHXVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFtpZCwgbm9kZV1cbiAgICB9XG5cbiAgICBwcml2YXRlIG51bWJlck9mQ2hhbmdlcyA9IChkYXRhOiBQYXJ0aWFsPG11dGF0aW9uQ2FsbGJhY2tQYXJhbT4pID0+IHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIChkYXRhLnJlbW92ZXM/Lmxlbmd0aCA/PyAwKSArXG4gICAgICAgICAgICAoZGF0YS5hdHRyaWJ1dGVzPy5sZW5ndGggPz8gMCkgK1xuICAgICAgICAgICAgKGRhdGEudGV4dHM/Lmxlbmd0aCA/PyAwKSArXG4gICAgICAgICAgICAoZGF0YS5hZGRzPy5sZW5ndGggPz8gMClcbiAgICAgICAgKVxuICAgIH1cblxuICAgIHB1YmxpYyB0aHJvdHRsZU11dGF0aW9ucyA9IChldmVudDogZXZlbnRXaXRoVGltZSkgPT4ge1xuICAgICAgICBpZiAoZXZlbnQudHlwZSAhPT0gSU5DUkVNRU5UQUxfU05BUFNIT1RfRVZFTlRfVFlQRSB8fCBldmVudC5kYXRhLnNvdXJjZSAhPT0gTVVUQVRJT05fU09VUkNFX1RZUEUpIHtcbiAgICAgICAgICAgIHJldHVybiBldmVudFxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZGF0YSA9IGV2ZW50LmRhdGEgYXMgUGFydGlhbDxtdXRhdGlvbkNhbGxiYWNrUGFyYW0+XG4gICAgICAgIGNvbnN0IGluaXRpYWxNdXRhdGlvbkNvdW50ID0gdGhpcy5udW1iZXJPZkNoYW5nZXMoZGF0YSlcblxuICAgICAgICBpZiAoZGF0YS5hdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICAvLyBNb3N0IHByb2JsZW1hdGljIG11dGF0aW9ucyBjb21lIGZyb20gYXR0cnMgd2hlcmUgdGhlIHN0eWxlIG9yIG1pbm9yIHByb3BlcnRpZXMgYXJlIGNoYW5nZWQgcmFwaWRseVxuICAgICAgICAgICAgZGF0YS5hdHRyaWJ1dGVzID0gZGF0YS5hdHRyaWJ1dGVzLmZpbHRlcigoYXR0cikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IFtub2RlSWQsIG5vZGVdID0gdGhpcy5nZXROb2RlT3JSZWxldmFudFBhcmVudChhdHRyLmlkKVxuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubXV0YXRpb25CdWNrZXRzW25vZGVJZF0gPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdGhpcy5tdXRhdGlvbkJ1Y2tldHNbbm9kZUlkXSA9IHRoaXMubXV0YXRpb25CdWNrZXRzW25vZGVJZF0gPz8gdGhpcy5idWNrZXRTaXplXG4gICAgICAgICAgICAgICAgdGhpcy5tdXRhdGlvbkJ1Y2tldHNbbm9kZUlkXSA9IE1hdGgubWF4KHRoaXMubXV0YXRpb25CdWNrZXRzW25vZGVJZF0gLSAxLCAwKVxuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubXV0YXRpb25CdWNrZXRzW25vZGVJZF0gPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmxvZ2dlZFRyYWNrZXJbbm9kZUlkXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZWRUcmFja2VyW25vZGVJZF0gPSB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMub25CbG9ja2VkTm9kZT8uKG5vZGVJZCwgbm9kZSlcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiBhdHRyXG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2hlY2sgaWYgZXZlcnkgcGFydCBvZiB0aGUgbXV0YXRpb24gaXMgZW1wdHkgaW4gd2hpY2ggY2FzZSB0aGVyZSBpcyBub3RoaW5nIHRvIGRvXG4gICAgICAgIGNvbnN0IG11dGF0aW9uQ291bnQgPSB0aGlzLm51bWJlck9mQ2hhbmdlcyhkYXRhKVxuXG4gICAgICAgIGlmIChtdXRhdGlvbkNvdW50ID09PSAwICYmIGluaXRpYWxNdXRhdGlvbkNvdW50ICE9PSBtdXRhdGlvbkNvdW50KSB7XG4gICAgICAgICAgICAvLyBJZiB3ZSBoYXZlIG1vZGlmaWVkIHRoZSBtdXRhdGlvbiBjb3VudCBhbmQgdGhlIHJlbWFpbmluZyBjb3VudCBpcyAwLCB0aGVuIHdlIGRvbid0IG5lZWQgdGhlIGV2ZW50LlxuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGV2ZW50XG4gICAgfVxufVxuIiwgInZhciBFdmVudFR5cGUgPSAvKiBAX19QVVJFX18gKi8gKChFdmVudFR5cGUyKSA9PiB7XG4gIEV2ZW50VHlwZTJbRXZlbnRUeXBlMltcIkRvbUNvbnRlbnRMb2FkZWRcIl0gPSAwXSA9IFwiRG9tQ29udGVudExvYWRlZFwiO1xuICBFdmVudFR5cGUyW0V2ZW50VHlwZTJbXCJMb2FkXCJdID0gMV0gPSBcIkxvYWRcIjtcbiAgRXZlbnRUeXBlMltFdmVudFR5cGUyW1wiRnVsbFNuYXBzaG90XCJdID0gMl0gPSBcIkZ1bGxTbmFwc2hvdFwiO1xuICBFdmVudFR5cGUyW0V2ZW50VHlwZTJbXCJJbmNyZW1lbnRhbFNuYXBzaG90XCJdID0gM10gPSBcIkluY3JlbWVudGFsU25hcHNob3RcIjtcbiAgRXZlbnRUeXBlMltFdmVudFR5cGUyW1wiTWV0YVwiXSA9IDRdID0gXCJNZXRhXCI7XG4gIEV2ZW50VHlwZTJbRXZlbnRUeXBlMltcIkN1c3RvbVwiXSA9IDVdID0gXCJDdXN0b21cIjtcbiAgRXZlbnRUeXBlMltFdmVudFR5cGUyW1wiUGx1Z2luXCJdID0gNl0gPSBcIlBsdWdpblwiO1xuICByZXR1cm4gRXZlbnRUeXBlMjtcbn0pKEV2ZW50VHlwZSB8fCB7fSk7XG52YXIgSW5jcmVtZW50YWxTb3VyY2UgPSAvKiBAX19QVVJFX18gKi8gKChJbmNyZW1lbnRhbFNvdXJjZTIpID0+IHtcbiAgSW5jcmVtZW50YWxTb3VyY2UyW0luY3JlbWVudGFsU291cmNlMltcIk11dGF0aW9uXCJdID0gMF0gPSBcIk11dGF0aW9uXCI7XG4gIEluY3JlbWVudGFsU291cmNlMltJbmNyZW1lbnRhbFNvdXJjZTJbXCJNb3VzZU1vdmVcIl0gPSAxXSA9IFwiTW91c2VNb3ZlXCI7XG4gIEluY3JlbWVudGFsU291cmNlMltJbmNyZW1lbnRhbFNvdXJjZTJbXCJNb3VzZUludGVyYWN0aW9uXCJdID0gMl0gPSBcIk1vdXNlSW50ZXJhY3Rpb25cIjtcbiAgSW5jcmVtZW50YWxTb3VyY2UyW0luY3JlbWVudGFsU291cmNlMltcIlNjcm9sbFwiXSA9IDNdID0gXCJTY3JvbGxcIjtcbiAgSW5jcmVtZW50YWxTb3VyY2UyW0luY3JlbWVudGFsU291cmNlMltcIlZpZXdwb3J0UmVzaXplXCJdID0gNF0gPSBcIlZpZXdwb3J0UmVzaXplXCI7XG4gIEluY3JlbWVudGFsU291cmNlMltJbmNyZW1lbnRhbFNvdXJjZTJbXCJJbnB1dFwiXSA9IDVdID0gXCJJbnB1dFwiO1xuICBJbmNyZW1lbnRhbFNvdXJjZTJbSW5jcmVtZW50YWxTb3VyY2UyW1wiVG91Y2hNb3ZlXCJdID0gNl0gPSBcIlRvdWNoTW92ZVwiO1xuICBJbmNyZW1lbnRhbFNvdXJjZTJbSW5jcmVtZW50YWxTb3VyY2UyW1wiTWVkaWFJbnRlcmFjdGlvblwiXSA9IDddID0gXCJNZWRpYUludGVyYWN0aW9uXCI7XG4gIEluY3JlbWVudGFsU291cmNlMltJbmNyZW1lbnRhbFNvdXJjZTJbXCJTdHlsZVNoZWV0UnVsZVwiXSA9IDhdID0gXCJTdHlsZVNoZWV0UnVsZVwiO1xuICBJbmNyZW1lbnRhbFNvdXJjZTJbSW5jcmVtZW50YWxTb3VyY2UyW1wiQ2FudmFzTXV0YXRpb25cIl0gPSA5XSA9IFwiQ2FudmFzTXV0YXRpb25cIjtcbiAgSW5jcmVtZW50YWxTb3VyY2UyW0luY3JlbWVudGFsU291cmNlMltcIkZvbnRcIl0gPSAxMF0gPSBcIkZvbnRcIjtcbiAgSW5jcmVtZW50YWxTb3VyY2UyW0luY3JlbWVudGFsU291cmNlMltcIkxvZ1wiXSA9IDExXSA9IFwiTG9nXCI7XG4gIEluY3JlbWVudGFsU291cmNlMltJbmNyZW1lbnRhbFNvdXJjZTJbXCJEcmFnXCJdID0gMTJdID0gXCJEcmFnXCI7XG4gIEluY3JlbWVudGFsU291cmNlMltJbmNyZW1lbnRhbFNvdXJjZTJbXCJTdHlsZURlY2xhcmF0aW9uXCJdID0gMTNdID0gXCJTdHlsZURlY2xhcmF0aW9uXCI7XG4gIEluY3JlbWVudGFsU291cmNlMltJbmNyZW1lbnRhbFNvdXJjZTJbXCJTZWxlY3Rpb25cIl0gPSAxNF0gPSBcIlNlbGVjdGlvblwiO1xuICBJbmNyZW1lbnRhbFNvdXJjZTJbSW5jcmVtZW50YWxTb3VyY2UyW1wiQWRvcHRlZFN0eWxlU2hlZXRcIl0gPSAxNV0gPSBcIkFkb3B0ZWRTdHlsZVNoZWV0XCI7XG4gIHJldHVybiBJbmNyZW1lbnRhbFNvdXJjZTI7XG59KShJbmNyZW1lbnRhbFNvdXJjZSB8fCB7fSk7XG52YXIgTW91c2VJbnRlcmFjdGlvbnMgPSAvKiBAX19QVVJFX18gKi8gKChNb3VzZUludGVyYWN0aW9uczIpID0+IHtcbiAgTW91c2VJbnRlcmFjdGlvbnMyW01vdXNlSW50ZXJhY3Rpb25zMltcIk1vdXNlVXBcIl0gPSAwXSA9IFwiTW91c2VVcFwiO1xuICBNb3VzZUludGVyYWN0aW9uczJbTW91c2VJbnRlcmFjdGlvbnMyW1wiTW91c2VEb3duXCJdID0gMV0gPSBcIk1vdXNlRG93blwiO1xuICBNb3VzZUludGVyYWN0aW9uczJbTW91c2VJbnRlcmFjdGlvbnMyW1wiQ2xpY2tcIl0gPSAyXSA9IFwiQ2xpY2tcIjtcbiAgTW91c2VJbnRlcmFjdGlvbnMyW01vdXNlSW50ZXJhY3Rpb25zMltcIkNvbnRleHRNZW51XCJdID0gM10gPSBcIkNvbnRleHRNZW51XCI7XG4gIE1vdXNlSW50ZXJhY3Rpb25zMltNb3VzZUludGVyYWN0aW9uczJbXCJEYmxDbGlja1wiXSA9IDRdID0gXCJEYmxDbGlja1wiO1xuICBNb3VzZUludGVyYWN0aW9uczJbTW91c2VJbnRlcmFjdGlvbnMyW1wiRm9jdXNcIl0gPSA1XSA9IFwiRm9jdXNcIjtcbiAgTW91c2VJbnRlcmFjdGlvbnMyW01vdXNlSW50ZXJhY3Rpb25zMltcIkJsdXJcIl0gPSA2XSA9IFwiQmx1clwiO1xuICBNb3VzZUludGVyYWN0aW9uczJbTW91c2VJbnRlcmFjdGlvbnMyW1wiVG91Y2hTdGFydFwiXSA9IDddID0gXCJUb3VjaFN0YXJ0XCI7XG4gIE1vdXNlSW50ZXJhY3Rpb25zMltNb3VzZUludGVyYWN0aW9uczJbXCJUb3VjaE1vdmVfRGVwYXJ0ZWRcIl0gPSA4XSA9IFwiVG91Y2hNb3ZlX0RlcGFydGVkXCI7XG4gIE1vdXNlSW50ZXJhY3Rpb25zMltNb3VzZUludGVyYWN0aW9uczJbXCJUb3VjaEVuZFwiXSA9IDldID0gXCJUb3VjaEVuZFwiO1xuICBNb3VzZUludGVyYWN0aW9uczJbTW91c2VJbnRlcmFjdGlvbnMyW1wiVG91Y2hDYW5jZWxcIl0gPSAxMF0gPSBcIlRvdWNoQ2FuY2VsXCI7XG4gIHJldHVybiBNb3VzZUludGVyYWN0aW9uczI7XG59KShNb3VzZUludGVyYWN0aW9ucyB8fCB7fSk7XG52YXIgUG9pbnRlclR5cGVzID0gLyogQF9fUFVSRV9fICovICgoUG9pbnRlclR5cGVzMikgPT4ge1xuICBQb2ludGVyVHlwZXMyW1BvaW50ZXJUeXBlczJbXCJNb3VzZVwiXSA9IDBdID0gXCJNb3VzZVwiO1xuICBQb2ludGVyVHlwZXMyW1BvaW50ZXJUeXBlczJbXCJQZW5cIl0gPSAxXSA9IFwiUGVuXCI7XG4gIFBvaW50ZXJUeXBlczJbUG9pbnRlclR5cGVzMltcIlRvdWNoXCJdID0gMl0gPSBcIlRvdWNoXCI7XG4gIHJldHVybiBQb2ludGVyVHlwZXMyO1xufSkoUG9pbnRlclR5cGVzIHx8IHt9KTtcbnZhciBDYW52YXNDb250ZXh0ID0gLyogQF9fUFVSRV9fICovICgoQ2FudmFzQ29udGV4dDIpID0+IHtcbiAgQ2FudmFzQ29udGV4dDJbQ2FudmFzQ29udGV4dDJbXCIyRFwiXSA9IDBdID0gXCIyRFwiO1xuICBDYW52YXNDb250ZXh0MltDYW52YXNDb250ZXh0MltcIldlYkdMXCJdID0gMV0gPSBcIldlYkdMXCI7XG4gIENhbnZhc0NvbnRleHQyW0NhbnZhc0NvbnRleHQyW1wiV2ViR0wyXCJdID0gMl0gPSBcIldlYkdMMlwiO1xuICByZXR1cm4gQ2FudmFzQ29udGV4dDI7XG59KShDYW52YXNDb250ZXh0IHx8IHt9KTtcbnZhciBNZWRpYUludGVyYWN0aW9ucyA9IC8qIEBfX1BVUkVfXyAqLyAoKE1lZGlhSW50ZXJhY3Rpb25zMikgPT4ge1xuICBNZWRpYUludGVyYWN0aW9uczJbTWVkaWFJbnRlcmFjdGlvbnMyW1wiUGxheVwiXSA9IDBdID0gXCJQbGF5XCI7XG4gIE1lZGlhSW50ZXJhY3Rpb25zMltNZWRpYUludGVyYWN0aW9uczJbXCJQYXVzZVwiXSA9IDFdID0gXCJQYXVzZVwiO1xuICBNZWRpYUludGVyYWN0aW9uczJbTWVkaWFJbnRlcmFjdGlvbnMyW1wiU2Vla2VkXCJdID0gMl0gPSBcIlNlZWtlZFwiO1xuICBNZWRpYUludGVyYWN0aW9uczJbTWVkaWFJbnRlcmFjdGlvbnMyW1wiVm9sdW1lQ2hhbmdlXCJdID0gM10gPSBcIlZvbHVtZUNoYW5nZVwiO1xuICBNZWRpYUludGVyYWN0aW9uczJbTWVkaWFJbnRlcmFjdGlvbnMyW1wiUmF0ZUNoYW5nZVwiXSA9IDRdID0gXCJSYXRlQ2hhbmdlXCI7XG4gIHJldHVybiBNZWRpYUludGVyYWN0aW9uczI7XG59KShNZWRpYUludGVyYWN0aW9ucyB8fCB7fSk7XG52YXIgUmVwbGF5ZXJFdmVudHMgPSAvKiBAX19QVVJFX18gKi8gKChSZXBsYXllckV2ZW50czIpID0+IHtcbiAgUmVwbGF5ZXJFdmVudHMyW1wiU3RhcnRcIl0gPSBcInN0YXJ0XCI7XG4gIFJlcGxheWVyRXZlbnRzMltcIlBhdXNlXCJdID0gXCJwYXVzZVwiO1xuICBSZXBsYXllckV2ZW50czJbXCJSZXN1bWVcIl0gPSBcInJlc3VtZVwiO1xuICBSZXBsYXllckV2ZW50czJbXCJSZXNpemVcIl0gPSBcInJlc2l6ZVwiO1xuICBSZXBsYXllckV2ZW50czJbXCJGaW5pc2hcIl0gPSBcImZpbmlzaFwiO1xuICBSZXBsYXllckV2ZW50czJbXCJGdWxsc25hcHNob3RSZWJ1aWxkZWRcIl0gPSBcImZ1bGxzbmFwc2hvdC1yZWJ1aWxkZWRcIjtcbiAgUmVwbGF5ZXJFdmVudHMyW1wiTG9hZFN0eWxlc2hlZXRTdGFydFwiXSA9IFwibG9hZC1zdHlsZXNoZWV0LXN0YXJ0XCI7XG4gIFJlcGxheWVyRXZlbnRzMltcIkxvYWRTdHlsZXNoZWV0RW5kXCJdID0gXCJsb2FkLXN0eWxlc2hlZXQtZW5kXCI7XG4gIFJlcGxheWVyRXZlbnRzMltcIlNraXBTdGFydFwiXSA9IFwic2tpcC1zdGFydFwiO1xuICBSZXBsYXllckV2ZW50czJbXCJTa2lwRW5kXCJdID0gXCJza2lwLWVuZFwiO1xuICBSZXBsYXllckV2ZW50czJbXCJNb3VzZUludGVyYWN0aW9uXCJdID0gXCJtb3VzZS1pbnRlcmFjdGlvblwiO1xuICBSZXBsYXllckV2ZW50czJbXCJFdmVudENhc3RcIl0gPSBcImV2ZW50LWNhc3RcIjtcbiAgUmVwbGF5ZXJFdmVudHMyW1wiQ3VzdG9tRXZlbnRcIl0gPSBcImN1c3RvbS1ldmVudFwiO1xuICBSZXBsYXllckV2ZW50czJbXCJGbHVzaFwiXSA9IFwiZmx1c2hcIjtcbiAgUmVwbGF5ZXJFdmVudHMyW1wiU3RhdGVDaGFuZ2VcIl0gPSBcInN0YXRlLWNoYW5nZVwiO1xuICBSZXBsYXllckV2ZW50czJbXCJQbGF5QmFja1wiXSA9IFwicGxheS1iYWNrXCI7XG4gIFJlcGxheWVyRXZlbnRzMltcIkRlc3Ryb3lcIl0gPSBcImRlc3Ryb3lcIjtcbiAgcmV0dXJuIFJlcGxheWVyRXZlbnRzMjtcbn0pKFJlcGxheWVyRXZlbnRzIHx8IHt9KTtcbmV4cG9ydCB7XG4gIENhbnZhc0NvbnRleHQsXG4gIEV2ZW50VHlwZSxcbiAgSW5jcmVtZW50YWxTb3VyY2UsXG4gIE1lZGlhSW50ZXJhY3Rpb25zLFxuICBNb3VzZUludGVyYWN0aW9ucyxcbiAgUG9pbnRlclR5cGVzLFxuICBSZXBsYXllckV2ZW50c1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXR5cGVzLmpzLm1hcFxuIiwgImltcG9ydCB7IENhcHR1cmVkTmV0d29ya1JlcXVlc3QsIE5ldHdvcmtSZWNvcmRPcHRpb25zLCBQb3N0SG9nQ29uZmlnIH0gZnJvbSAnLi4vLi4vdHlwZXMnXG5pbXBvcnQgeyBfaXNGdW5jdGlvbiwgX2lzTnVsbGlzaCwgX2lzU3RyaW5nLCBfaXNVbmRlZmluZWQgfSBmcm9tICcuLi8uLi91dGlscy90eXBlLXV0aWxzJ1xuaW1wb3J0IHsgY29udmVydFRvVVJMIH0gZnJvbSAnLi4vLi4vdXRpbHMvcmVxdWVzdC11dGlscydcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJy4uLy4uL3V0aWxzL2xvZ2dlcidcbmltcG9ydCB7IHNob3VsZENhcHR1cmVWYWx1ZSB9IGZyb20gJy4uLy4uL2F1dG9jYXB0dXJlLXV0aWxzJ1xuaW1wb3J0IHsgX2VhY2ggfSBmcm9tICcuLi8uLi91dGlscydcblxuY29uc3QgTE9HR0VSX1BSRUZJWCA9ICdbU2Vzc2lvblJlY29yZGluZ10nXG5cbmV4cG9ydCBjb25zdCBkZWZhdWx0TmV0d29ya09wdGlvbnM6IE5ldHdvcmtSZWNvcmRPcHRpb25zID0ge1xuICAgIGluaXRpYXRvclR5cGVzOiBbXG4gICAgICAgICdhdWRpbycsXG4gICAgICAgICdiZWFjb24nLFxuICAgICAgICAnYm9keScsXG4gICAgICAgICdjc3MnLFxuICAgICAgICAnZWFybHktaGludCcsXG4gICAgICAgICdlbWJlZCcsXG4gICAgICAgICdmZXRjaCcsXG4gICAgICAgICdmcmFtZScsXG4gICAgICAgICdpZnJhbWUnLFxuICAgICAgICAnaWNvbicsXG4gICAgICAgICdpbWFnZScsXG4gICAgICAgICdpbWcnLFxuICAgICAgICAnaW5wdXQnLFxuICAgICAgICAnbGluaycsXG4gICAgICAgICduYXZpZ2F0aW9uJyxcbiAgICAgICAgJ29iamVjdCcsXG4gICAgICAgICdwaW5nJyxcbiAgICAgICAgJ3NjcmlwdCcsXG4gICAgICAgICd0cmFjaycsXG4gICAgICAgICd2aWRlbycsXG4gICAgICAgICd4bWxodHRwcmVxdWVzdCcsXG4gICAgXSxcbiAgICBtYXNrUmVxdWVzdEZuOiAoZGF0YTogQ2FwdHVyZWROZXR3b3JrUmVxdWVzdCkgPT4gZGF0YSxcbiAgICByZWNvcmRIZWFkZXJzOiBmYWxzZSxcbiAgICByZWNvcmRCb2R5OiBmYWxzZSxcbiAgICByZWNvcmRJbml0aWFsUmVxdWVzdHM6IGZhbHNlLFxuICAgIHJlY29yZFBlcmZvcm1hbmNlOiBmYWxzZSxcbiAgICBwZXJmb3JtYW5jZUVudHJ5VHlwZVRvT2JzZXJ2ZTogW1xuICAgICAgICAvLyAnZXZlbnQnLCAvLyBUaGlzIGlzIHRvbyBub2lzeSBhcyBpdCBjb3ZlcnMgYWxsIGJyb3dzZXIgZXZlbnRzXG4gICAgICAgICdmaXJzdC1pbnB1dCcsXG4gICAgICAgIC8vICdtYXJrJywgLy8gTWFyayBpcyB1c2VkIHRvbyBsaWJlcmFsbHkuIFdlIHdvdWxkIG5lZWQgdG8gZmlsdGVyIGZvciBzcGVjaWZpYyBtYXJrc1xuICAgICAgICAvLyAnbWVhc3VyZScsIC8vIE1lYXN1cmUgaXMgdXNlZCB0b28gbGliZXJhbGx5LiBXZSB3b3VsZCBuZWVkIHRvIGZpbHRlciBmb3Igc3BlY2lmaWMgbWVhc3VyZXNcbiAgICAgICAgJ25hdmlnYXRpb24nLFxuICAgICAgICAncGFpbnQnLFxuICAgICAgICAncmVzb3VyY2UnLFxuICAgIF0sXG4gICAgcGF5bG9hZFNpemVMaW1pdEJ5dGVzOiAxMDAwMDAwLFxufVxuXG5jb25zdCBIRUFERVJfREVOWV9MSVNUID0gW1xuICAgICdhdXRob3JpemF0aW9uJyxcbiAgICAneC1mb3J3YXJkZWQtZm9yJyxcbiAgICAnYXV0aG9yaXphdGlvbicsXG4gICAgJ2Nvb2tpZScsXG4gICAgJ3NldC1jb29raWUnLFxuICAgICd4LWFwaS1rZXknLFxuICAgICd4LXJlYWwtaXAnLFxuICAgICdyZW1vdGUtYWRkcicsXG4gICAgJ2ZvcndhcmRlZCcsXG4gICAgJ3Byb3h5LWF1dGhvcml6YXRpb24nLFxuICAgICd4LWNzcmYtdG9rZW4nLFxuICAgICd4LWNzcmZ0b2tlbicsXG4gICAgJ3gteHNyZi10b2tlbicsXG5dXG5cbmNvbnN0IFBBWUxPQURfQ09OVEVOVF9ERU5ZX0xJU1QgPSBbXG4gICAgJ3Bhc3N3b3JkJyxcbiAgICAnc2VjcmV0JyxcbiAgICAncGFzc3dkJyxcbiAgICAnYXBpX2tleScsXG4gICAgJ2FwaWtleScsXG4gICAgJ2F1dGgnLFxuICAgICdjcmVkZW50aWFscycsXG4gICAgJ215c3FsX3B3ZCcsXG4gICAgJ3ByaXZhdGVrZXknLFxuICAgICdwcml2YXRlX2tleScsXG4gICAgJ3Rva2VuY29uc3QnLFxuXVxuXG4vLyB3ZSBhbHdheXMgcmVtb3ZlIGhlYWRlcnMgb24gdGhlIGRlbnkgbGlzdCBiZWNhdXNlIHdlIG5ldmVyIHdhbnQgdG8gY2FwdHVyZSB0aGlzIHNlbnNpdGl2ZSBkYXRhXG5jb25zdCByZW1vdmVBdXRob3JpemF0aW9uSGVhZGVyID0gKGRhdGE6IENhcHR1cmVkTmV0d29ya1JlcXVlc3QpOiBDYXB0dXJlZE5ldHdvcmtSZXF1ZXN0ID0+IHtcbiAgICBfZWFjaChPYmplY3Qua2V5cyhkYXRhLnJlcXVlc3RIZWFkZXJzID8/IHt9KSwgKGhlYWRlcikgPT4ge1xuICAgICAgICBpZiAoSEVBREVSX0RFTllfTElTVC5pbmNsdWRlcyhoZWFkZXIudG9Mb3dlckNhc2UoKSkpIGRlbGV0ZSBkYXRhLnJlcXVlc3RIZWFkZXJzPy5baGVhZGVyXVxuICAgIH0pXG4gICAgcmV0dXJuIGRhdGFcbn1cblxuY29uc3QgUE9TVEhPR19QQVRIU19UT19JR05PUkUgPSBbJy9zLycsICcvZS8nLCAnL2kvJ11cbi8vIHdhbnQgdG8gaWdub3JlIHBvc3Rob2cgcGF0aHMgd2hlbiBjYXB0dXJpbmcgcmVxdWVzdHMsIG9yIHdlIGNhbiBnZXQgdHJhcHBlZCBpbiBhIGxvb3Bcbi8vIGJlY2F1c2UgY2FsbHMgdG8gUG9zdEhvZyB3b3VsZCBiZSByZXBvcnRlZCB1c2luZyBhIGNhbGwgdG8gUG9zdEhvZyB3aGljaCB3b3VsZCBiZSByZXBvcnRlZC4uLi5cbmNvbnN0IGlnbm9yZVBvc3RIb2dQYXRocyA9IChkYXRhOiBDYXB0dXJlZE5ldHdvcmtSZXF1ZXN0KTogQ2FwdHVyZWROZXR3b3JrUmVxdWVzdCB8IHVuZGVmaW5lZCA9PiB7XG4gICAgY29uc3QgdXJsID0gY29udmVydFRvVVJMKGRhdGEubmFtZSlcbiAgICBpZiAodXJsICYmIHVybC5wYXRobmFtZSAmJiBQT1NUSE9HX1BBVEhTX1RPX0lHTk9SRS5zb21lKChwYXRoKSA9PiB1cmwucGF0aG5hbWUuaW5kZXhPZihwYXRoKSA9PT0gMCkpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgIH1cbiAgICByZXR1cm4gZGF0YVxufVxuXG5mdW5jdGlvbiBlc3RpbWF0ZUJ5dGVzKHBheWxvYWQ6IHN0cmluZyk6IG51bWJlciB7XG4gICAgcmV0dXJuIG5ldyBCbG9iKFtwYXlsb2FkXSkuc2l6ZVxufVxuXG5mdW5jdGlvbiBlbmZvcmNlUGF5bG9hZFNpemVMaW1pdChcbiAgICBwYXlsb2FkOiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkLFxuICAgIGhlYWRlcnM6IFJlY29yZDxzdHJpbmcsIGFueT4gfCB1bmRlZmluZWQsXG4gICAgbGltaXQ6IG51bWJlcixcbiAgICBkZXNjcmlwdGlvbjogc3RyaW5nXG4pOiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkIHtcbiAgICBpZiAoX2lzTnVsbGlzaChwYXlsb2FkKSkge1xuICAgICAgICByZXR1cm4gcGF5bG9hZFxuICAgIH1cblxuICAgIGxldCByZXF1ZXN0Q29udGVudExlbmd0aDogc3RyaW5nIHwgbnVtYmVyID0gaGVhZGVycz8uWydjb250ZW50LWxlbmd0aCddIHx8IGVzdGltYXRlQnl0ZXMocGF5bG9hZClcbiAgICBpZiAoX2lzU3RyaW5nKHJlcXVlc3RDb250ZW50TGVuZ3RoKSkge1xuICAgICAgICByZXF1ZXN0Q29udGVudExlbmd0aCA9IHBhcnNlSW50KHJlcXVlc3RDb250ZW50TGVuZ3RoKVxuICAgIH1cblxuICAgIGlmIChyZXF1ZXN0Q29udGVudExlbmd0aCA+IGxpbWl0KSB7XG4gICAgICAgIHJldHVybiBMT0dHRVJfUFJFRklYICsgYCAke2Rlc2NyaXB0aW9ufSBib2R5IHRvbyBsYXJnZSB0byByZWNvcmQgKCR7cmVxdWVzdENvbnRlbnRMZW5ndGh9IGJ5dGVzKWBcbiAgICB9XG5cbiAgICByZXR1cm4gcGF5bG9hZFxufVxuXG4vLyBwZW9wbGUgY2FuIGhhdmUgYXJiaXRyYXJpbHkgbGFyZ2UgcGF5bG9hZHMgb24gdGhlaXIgc2l0ZSwgYnV0IHdlIGRvbid0IHdhbnQgdG8gaW5nZXN0IHRoZW1cbmNvbnN0IGxpbWl0UGF5bG9hZFNpemUgPSAoXG4gICAgb3B0aW9uczogTmV0d29ya1JlY29yZE9wdGlvbnNcbik6ICgoZGF0YTogQ2FwdHVyZWROZXR3b3JrUmVxdWVzdCB8IHVuZGVmaW5lZCkgPT4gQ2FwdHVyZWROZXR3b3JrUmVxdWVzdCB8IHVuZGVmaW5lZCkgPT4ge1xuICAgIC8vIHRoZSBzbWFsbGVzdCBvZiAxTUIgb3IgdGhlIHNwZWNpZmllZCBsaW1pdCBpZiB0aGVyZSBpcyBvbmVcbiAgICBjb25zdCBsaW1pdCA9IE1hdGgubWluKDEwMDAwMDAsIG9wdGlvbnMucGF5bG9hZFNpemVMaW1pdEJ5dGVzID8/IDEwMDAwMDApXG5cbiAgICByZXR1cm4gKGRhdGEpID0+IHtcbiAgICAgICAgaWYgKGRhdGE/LnJlcXVlc3RCb2R5KSB7XG4gICAgICAgICAgICBkYXRhLnJlcXVlc3RCb2R5ID0gZW5mb3JjZVBheWxvYWRTaXplTGltaXQoZGF0YS5yZXF1ZXN0Qm9keSwgZGF0YS5yZXF1ZXN0SGVhZGVycywgbGltaXQsICdSZXF1ZXN0JylcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkYXRhPy5yZXNwb25zZUJvZHkpIHtcbiAgICAgICAgICAgIGRhdGEucmVzcG9uc2VCb2R5ID0gZW5mb3JjZVBheWxvYWRTaXplTGltaXQoZGF0YS5yZXNwb25zZUJvZHksIGRhdGEucmVzcG9uc2VIZWFkZXJzLCBsaW1pdCwgJ1Jlc3BvbnNlJylcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBkYXRhXG4gICAgfVxufVxuXG5mdW5jdGlvbiBzY3J1YlBheWxvYWQocGF5bG9hZDogc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZCwgbGFiZWw6ICdSZXF1ZXN0JyB8ICdSZXNwb25zZScpOiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkIHtcbiAgICBpZiAoX2lzTnVsbGlzaChwYXlsb2FkKSkge1xuICAgICAgICByZXR1cm4gcGF5bG9hZFxuICAgIH1cbiAgICBsZXQgc2NydWJiZWQgPSBwYXlsb2FkXG5cbiAgICBpZiAoIXNob3VsZENhcHR1cmVWYWx1ZShzY3J1YmJlZCwgZmFsc2UpKSB7XG4gICAgICAgIHNjcnViYmVkID0gTE9HR0VSX1BSRUZJWCArICcgJyArIGxhYmVsICsgJyBib2R5IHJlZGFjdGVkJ1xuICAgIH1cbiAgICBfZWFjaChQQVlMT0FEX0NPTlRFTlRfREVOWV9MSVNULCAodGV4dCkgPT4ge1xuICAgICAgICBpZiAoc2NydWJiZWQ/Lmxlbmd0aCAmJiBzY3J1YmJlZD8uaW5kZXhPZih0ZXh0KSAhPT0gLTEpIHtcbiAgICAgICAgICAgIHNjcnViYmVkID0gTE9HR0VSX1BSRUZJWCArICcgJyArIGxhYmVsICsgJyBib2R5IHJlZGFjdGVkIGFzIG1pZ2h0IGNvbnRhaW46ICcgKyB0ZXh0XG4gICAgICAgIH1cbiAgICB9KVxuXG4gICAgcmV0dXJuIHNjcnViYmVkXG59XG5cbmZ1bmN0aW9uIHNjcnViUGF5bG9hZHMoY2FwdHVyZWRSZXF1ZXN0OiBDYXB0dXJlZE5ldHdvcmtSZXF1ZXN0IHwgdW5kZWZpbmVkKTogQ2FwdHVyZWROZXR3b3JrUmVxdWVzdCB8IHVuZGVmaW5lZCB7XG4gICAgaWYgKF9pc1VuZGVmaW5lZChjYXB0dXJlZFJlcXVlc3QpKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWRcbiAgICB9XG5cbiAgICBjYXB0dXJlZFJlcXVlc3QucmVxdWVzdEJvZHkgPSBzY3J1YlBheWxvYWQoY2FwdHVyZWRSZXF1ZXN0LnJlcXVlc3RCb2R5LCAnUmVxdWVzdCcpXG4gICAgY2FwdHVyZWRSZXF1ZXN0LnJlc3BvbnNlQm9keSA9IHNjcnViUGF5bG9hZChjYXB0dXJlZFJlcXVlc3QucmVzcG9uc2VCb2R5LCAnUmVzcG9uc2UnKVxuXG4gICAgcmV0dXJuIGNhcHR1cmVkUmVxdWVzdFxufVxuXG4vKipcbiAqICB3aGV0aGVyIGEgbWFza1JlcXVlc3RGbiBpcyBwcm92aWRlZCBvciBub3QsXG4gKiAgd2UgZW5zdXJlIHRoYXQgd2UgcmVtb3ZlIHRoZSBkZW5pZWQgaGVhZGVyIGZyb20gcmVxdWVzdHNcbiAqICB3ZSBfbmV2ZXJfIHdhbnQgdG8gcmVjb3JkIHRoYXQgaGVhZGVyIGJ5IGFjY2lkZW50XG4gKiAgaWYgc29tZW9uZSBjb21wbGFpbnMgdGhlbiB3ZSdsbCBhZGQgYW4gb3B0LWluIHRvIGxldCB0aGVtIG92ZXJyaWRlIGl0XG4gKi9cbmV4cG9ydCBjb25zdCBidWlsZE5ldHdvcmtSZXF1ZXN0T3B0aW9ucyA9IChcbiAgICBpbnN0YW5jZUNvbmZpZzogUG9zdEhvZ0NvbmZpZyxcbiAgICByZW1vdGVOZXR3b3JrT3B0aW9uczogUGljazxOZXR3b3JrUmVjb3JkT3B0aW9ucywgJ3JlY29yZEhlYWRlcnMnIHwgJ3JlY29yZEJvZHknIHwgJ3JlY29yZFBlcmZvcm1hbmNlJz5cbik6IE5ldHdvcmtSZWNvcmRPcHRpb25zID0+IHtcbiAgICBjb25zdCBjb25maWcgPSBpbnN0YW5jZUNvbmZpZy5zZXNzaW9uX3JlY29yZGluZyBhcyBOZXR3b3JrUmVjb3JkT3B0aW9uc1xuICAgIC8vIGNsaWVudCBjYW4gYWx3YXlzIGRpc2FibGUgZGVzcGl0ZSByZW1vdGUgb3B0aW9uc1xuICAgIGNvbnN0IGNhblJlY29yZEhlYWRlcnMgPSBjb25maWcucmVjb3JkSGVhZGVycyA9PT0gZmFsc2UgPyBmYWxzZSA6IHJlbW90ZU5ldHdvcmtPcHRpb25zLnJlY29yZEhlYWRlcnNcbiAgICBjb25zdCBjYW5SZWNvcmRCb2R5ID0gY29uZmlnLnJlY29yZEJvZHkgPT09IGZhbHNlID8gZmFsc2UgOiByZW1vdGVOZXR3b3JrT3B0aW9ucy5yZWNvcmRCb2R5XG4gICAgY29uc3QgY2FuUmVjb3JkUGVyZm9ybWFuY2UgPSBjb25maWcucmVjb3JkUGVyZm9ybWFuY2UgPT09IGZhbHNlID8gZmFsc2UgOiByZW1vdGVOZXR3b3JrT3B0aW9ucy5yZWNvcmRQZXJmb3JtYW5jZVxuXG4gICAgY29uc3QgcGF5bG9hZExpbWl0ZXIgPSBsaW1pdFBheWxvYWRTaXplKGNvbmZpZylcblxuICAgIGNvbnN0IGVuZm9yY2VkQ2xlYW5pbmdGbjogTmV0d29ya1JlY29yZE9wdGlvbnNbJ21hc2tSZXF1ZXN0Rm4nXSA9IChkOiBDYXB0dXJlZE5ldHdvcmtSZXF1ZXN0KSA9PlxuICAgICAgICBzY3J1YlBheWxvYWRzKHBheWxvYWRMaW1pdGVyKGlnbm9yZVBvc3RIb2dQYXRocyhyZW1vdmVBdXRob3JpemF0aW9uSGVhZGVyKGQpKSkpXG5cbiAgICBjb25zdCBoYXNEZXByZWNhdGVkTWFza0Z1bmN0aW9uID0gX2lzRnVuY3Rpb24oaW5zdGFuY2VDb25maWcuc2Vzc2lvbl9yZWNvcmRpbmcubWFza05ldHdvcmtSZXF1ZXN0Rm4pXG5cbiAgICBpZiAoaGFzRGVwcmVjYXRlZE1hc2tGdW5jdGlvbiAmJiBfaXNGdW5jdGlvbihpbnN0YW5jZUNvbmZpZy5zZXNzaW9uX3JlY29yZGluZy5tYXNrQ2FwdHVyZWROZXR3b3JrUmVxdWVzdEZuKSkge1xuICAgICAgICBsb2dnZXIud2FybihcbiAgICAgICAgICAgICdCb3RoIGBtYXNrTmV0d29ya1JlcXVlc3RGbmAgYW5kIGBtYXNrQ2FwdHVyZWROZXR3b3JrUmVxdWVzdEZuYCBhcmUgZGVmaW5lZC4gYG1hc2tOZXR3b3JrUmVxdWVzdEZuYCB3aWxsIGJlIGlnbm9yZWQuJ1xuICAgICAgICApXG4gICAgfVxuXG4gICAgaWYgKGhhc0RlcHJlY2F0ZWRNYXNrRnVuY3Rpb24pIHtcbiAgICAgICAgaW5zdGFuY2VDb25maWcuc2Vzc2lvbl9yZWNvcmRpbmcubWFza0NhcHR1cmVkTmV0d29ya1JlcXVlc3RGbiA9IChkYXRhOiBDYXB0dXJlZE5ldHdvcmtSZXF1ZXN0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjbGVhbmVkVVJMID0gaW5zdGFuY2VDb25maWcuc2Vzc2lvbl9yZWNvcmRpbmcubWFza05ldHdvcmtSZXF1ZXN0Rm4hKHsgdXJsOiBkYXRhLm5hbWUgfSlcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgLi4uZGF0YSxcbiAgICAgICAgICAgICAgICBuYW1lOiBjbGVhbmVkVVJMPy51cmwsXG4gICAgICAgICAgICB9IGFzIENhcHR1cmVkTmV0d29ya1JlcXVlc3RcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbmZpZy5tYXNrUmVxdWVzdEZuID0gX2lzRnVuY3Rpb24oaW5zdGFuY2VDb25maWcuc2Vzc2lvbl9yZWNvcmRpbmcubWFza0NhcHR1cmVkTmV0d29ya1JlcXVlc3RGbilcbiAgICAgICAgPyAoZGF0YSkgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBjbGVhbmVkUmVxdWVzdCA9IGVuZm9yY2VkQ2xlYW5pbmdGbihkYXRhKVxuICAgICAgICAgICAgICByZXR1cm4gY2xlYW5lZFJlcXVlc3RcbiAgICAgICAgICAgICAgICAgID8gaW5zdGFuY2VDb25maWcuc2Vzc2lvbl9yZWNvcmRpbmcubWFza0NhcHR1cmVkTmV0d29ya1JlcXVlc3RGbj8uKGNsZWFuZWRSZXF1ZXN0KSA/PyB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkXG4gICAgICAgICAgfVxuICAgICAgICA6IHVuZGVmaW5lZFxuXG4gICAgaWYgKCFjb25maWcubWFza1JlcXVlc3RGbikge1xuICAgICAgICBjb25maWcubWFza1JlcXVlc3RGbiA9IGVuZm9yY2VkQ2xlYW5pbmdGblxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIC4uLmRlZmF1bHROZXR3b3JrT3B0aW9ucyxcbiAgICAgICAgLi4uY29uZmlnLFxuICAgICAgICByZWNvcmRIZWFkZXJzOiBjYW5SZWNvcmRIZWFkZXJzLFxuICAgICAgICByZWNvcmRCb2R5OiBjYW5SZWNvcmRCb2R5LFxuICAgICAgICByZWNvcmRQZXJmb3JtYW5jZTogY2FuUmVjb3JkUGVyZm9ybWFuY2UsXG4gICAgICAgIHJlY29yZEluaXRpYWxSZXF1ZXN0czogY2FuUmVjb3JkUGVyZm9ybWFuY2UsXG4gICAgfVxufVxuIiwgIi8qKlxuICogR0RQUiB1dGlsc1xuICpcbiAqIFRoZSBHZW5lcmFsIERhdGEgUHJvdGVjdGlvbiBSZWd1bGF0aW9uIChHRFBSKSBpcyBhIHJlZ3VsYXRpb24gaW4gRVUgbGF3IG9uIGRhdGEgcHJvdGVjdGlvblxuICogYW5kIHByaXZhY3kgZm9yIGFsbCBpbmRpdmlkdWFscyB3aXRoaW4gdGhlIEV1cm9wZWFuIFVuaW9uLiBJdCBhZGRyZXNzZXMgdGhlIGV4cG9ydCBvZiBwZXJzb25hbFxuICogZGF0YSBvdXRzaWRlIHRoZSBFVS4gVGhlIEdEUFIgYWltcyBwcmltYXJpbHkgdG8gZ2l2ZSBjb250cm9sIGJhY2sgdG8gY2l0aXplbnMgYW5kIHJlc2lkZW50c1xuICogb3ZlciB0aGVpciBwZXJzb25hbCBkYXRhIGFuZCB0byBzaW1wbGlmeSB0aGUgcmVndWxhdG9yeSBlbnZpcm9ubWVudCBmb3IgaW50ZXJuYXRpb25hbCBidXNpbmVzc1xuICogYnkgdW5pZnlpbmcgdGhlIHJlZ3VsYXRpb24gd2l0aGluIHRoZSBFVS5cbiAqXG4gKiBUaGlzIHNldCBvZiB1dGlsaXRpZXMgaXMgaW50ZW5kZWQgdG8gZW5hYmxlIG9wdCBpbi9vdXQgZnVuY3Rpb25hbGl0eSBpbiB0aGUgUG9zdEhvZyBKUyBTREsuXG4gKiBUaGVzZSBmdW5jdGlvbnMgYXJlIHVzZWQgaW50ZXJuYWxseSBieSB0aGUgU0RLIGFuZCBhcmUgbm90IGludGVuZGVkIHRvIGJlIHB1YmxpY2x5IGV4cG9zZWQuXG4gKi9cblxuaW1wb3J0IHsgX2VhY2gsIF9pbmNsdWRlcyB9IGZyb20gJy4vdXRpbHMnXG5pbXBvcnQgeyB3aW5kb3cgfSBmcm9tICcuL3V0aWxzL2dsb2JhbHMnXG5pbXBvcnQgeyBjb29raWVTdG9yZSwgbG9jYWxTdG9yZSwgbG9jYWxQbHVzQ29va2llU3RvcmUgfSBmcm9tICcuL3N0b3JhZ2UnXG5pbXBvcnQgeyBHRFBST3B0aW9ucywgUGVyc2lzdGVudFN0b3JlIH0gZnJvbSAnLi90eXBlcydcbmltcG9ydCB7IFBvc3RIb2cgfSBmcm9tICcuL3Bvc3Rob2ctY29yZSdcblxuaW1wb3J0IHsgX2lzTnVtYmVyLCBfaXNTdHJpbmcgfSBmcm9tICcuL3V0aWxzL3R5cGUtdXRpbHMnXG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tICcuL3V0aWxzL2xvZ2dlcidcblxuLyoqXG4gKiBBIGZ1bmN0aW9uIHVzZWQgdG8gY2FwdHVyZSBhIFBvc3RIb2cgZXZlbnQgKGUuZy4gUG9zdEhvZ0xpYi5jYXB0dXJlKVxuICogQGNhbGxiYWNrIGNhcHR1cmVGdW5jdGlvblxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50X25hbWUgVGhlIG5hbWUgb2YgdGhlIGV2ZW50LiBUaGlzIGNhbiBiZSBhbnl0aGluZyB0aGUgdXNlciBkb2VzIC0gJ0J1dHRvbiBDbGljaycsICdTaWduIFVwJywgJ0l0ZW0gUHVyY2hhc2VkJywgZXRjLlxuICogQHBhcmFtIHtPYmplY3R9IFtwcm9wZXJ0aWVzXSBBIHNldCBvZiBwcm9wZXJ0aWVzIHRvIGluY2x1ZGUgd2l0aCB0aGUgZXZlbnQgeW91J3JlIHNlbmRpbmcuIFRoZXNlIGRlc2NyaWJlIHRoZSB1c2VyIHdobyBkaWQgdGhlIGV2ZW50IG9yIGRldGFpbHMgYWJvdXQgdGhlIGV2ZW50IGl0c2VsZi5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYWxsYmFja10gSWYgcHJvdmlkZWQsIHRoZSBjYWxsYmFjayBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZCBhZnRlciBjYXB0dXJpbmcgdGhlIGV2ZW50LlxuICovXG5cbi8qKiBQdWJsaWMgKiovXG5cbmNvbnN0IEdEUFJfREVGQVVMVF9QRVJTSVNURU5DRV9QUkVGSVggPSAnX19waF9vcHRfaW5fb3V0XydcblxuLyoqXG4gKiBPcHQgdGhlIHVzZXIgaW4gdG8gZGF0YSBjYXB0dXJpbmcgYW5kIGNvb2tpZXMvbG9jYWxzdG9yYWdlIGZvciB0aGUgZ2l2ZW4gdG9rZW5cbiAqIEBwYXJhbSB7c3RyaW5nfSB0b2tlbiAtIFBvc3RIb2cgcHJvamVjdCBjYXB0dXJpbmcgdG9rZW5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAqIEBwYXJhbSB7Y2FwdHVyZUZ1bmN0aW9ufSBbb3B0aW9ucy5jYXB0dXJlXSAtIGZ1bmN0aW9uIHVzZWQgZm9yIGNhcHR1cmluZyBhIFBvc3RIb2cgZXZlbnQgdG8gcmVjb3JkIHRoZSBvcHQtaW4gYWN0aW9uXG4gKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMuY2FwdHVyZUV2ZW50TmFtZV0gLSBldmVudCBuYW1lIHRvIGJlIHVzZWQgZm9yIGNhcHR1cmluZyB0aGUgb3B0LWluIGFjdGlvblxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zLmNhcHR1cmVQcm9wZXJ0aWVzXSAtIHNldCBvZiBwcm9wZXJ0aWVzIHRvIGJlIGNhcHR1cmVkIGFsb25nIHdpdGggdGhlIG9wdC1pbiBhY3Rpb25cbiAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5wZXJzaXN0ZW5jZVR5cGVdIFBlcnNpc3RlbmNlIG1lY2hhbmlzbSB1c2VkIC0gY29va2llIG9yIGxvY2FsU3RvcmFnZVxuICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLnBlcnNpc3RlbmNlUHJlZml4PV9fcGhfb3B0X2luX291dF0gLSBjdXN0b20gcHJlZml4IHRvIGJlIHVzZWQgaW4gdGhlIGNvb2tpZS9sb2NhbHN0b3JhZ2UgbmFtZVxuICogQHBhcmFtIHtOdW1iZXJ9IFtvcHRpb25zLmNvb2tpZUV4cGlyYXRpb25dIC0gbnVtYmVyIG9mIGRheXMgdW50aWwgdGhlIG9wdC1pbiBjb29raWUgZXhwaXJlc1xuICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5jcm9zc1N1YmRvbWFpbkNvb2tpZV0gLSB3aGV0aGVyIHRoZSBvcHQtaW4gY29va2llIGlzIHNldCBhcyBjcm9zcy1zdWJkb21haW4gb3Igbm90XG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLnNlY3VyZUNvb2tpZV0gLSB3aGV0aGVyIHRoZSBvcHQtaW4gY29va2llIGlzIHNldCBhcyBzZWN1cmUgb3Igbm90XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBvcHRJbih0b2tlbjogc3RyaW5nLCBvcHRpb25zOiBHRFBST3B0aW9ucyk6IHZvaWQge1xuICAgIF9vcHRJbk91dCh0cnVlLCB0b2tlbiwgb3B0aW9ucylcbn1cblxuLyoqXG4gKiBPcHQgdGhlIHVzZXIgb3V0IG9mIGRhdGEgY2FwdHVyaW5nIGFuZCBjb29raWVzL2xvY2Fsc3RvcmFnZSBmb3IgdGhlIGdpdmVuIHRva2VuXG4gKiBAcGFyYW0ge3N0cmluZ30gdG9rZW4gLSBQb3N0SG9nIHByb2plY3QgY2FwdHVyaW5nIHRva2VuXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG4gKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMucGVyc2lzdGVuY2VUeXBlXSBQZXJzaXN0ZW5jZSBtZWNoYW5pc20gdXNlZCAtIGNvb2tpZSBvciBsb2NhbFN0b3JhZ2VcbiAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5wZXJzaXN0ZW5jZVByZWZpeD1fX3BoX29wdF9pbl9vdXRdIC0gY3VzdG9tIHByZWZpeCB0byBiZSB1c2VkIGluIHRoZSBjb29raWUvbG9jYWxzdG9yYWdlIG5hbWVcbiAqIEBwYXJhbSB7TnVtYmVyfSBbb3B0aW9ucy5jb29raWVFeHBpcmF0aW9uXSAtIG51bWJlciBvZiBkYXlzIHVudGlsIHRoZSBvcHQtb3V0IGNvb2tpZSBleHBpcmVzXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmNyb3NzU3ViZG9tYWluQ29va2llXSAtIHdoZXRoZXIgdGhlIG9wdC1vdXQgY29va2llIGlzIHNldCBhcyBjcm9zcy1zdWJkb21haW4gb3Igbm90XG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLnNlY3VyZUNvb2tpZV0gLSB3aGV0aGVyIHRoZSBvcHQtb3V0IGNvb2tpZSBpcyBzZXQgYXMgc2VjdXJlIG9yIG5vdFxuICovXG5leHBvcnQgZnVuY3Rpb24gb3B0T3V0KHRva2VuOiBzdHJpbmcsIG9wdGlvbnM6IEdEUFJPcHRpb25zKTogdm9pZCB7XG4gICAgX29wdEluT3V0KGZhbHNlLCB0b2tlbiwgb3B0aW9ucylcbn1cblxuLyoqXG4gKiBDaGVjayB3aGV0aGVyIHRoZSB1c2VyIGhhcyBvcHRlZCBpbiB0byBkYXRhIGNhcHR1cmluZyBhbmQgY29va2llcy9sb2NhbHN0b3JhZ2UgZm9yIHRoZSBnaXZlbiB0b2tlblxuICogQHBhcmFtIHtzdHJpbmd9IHRva2VuIC0gUG9zdEhvZyBwcm9qZWN0IGNhcHR1cmluZyB0b2tlblxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLnBlcnNpc3RlbmNlVHlwZV0gUGVyc2lzdGVuY2UgbWVjaGFuaXNtIHVzZWQgLSBjb29raWUgb3IgbG9jYWxTdG9yYWdlXG4gKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMucGVyc2lzdGVuY2VQcmVmaXg9X19waF9vcHRfaW5fb3V0XSAtIGN1c3RvbSBwcmVmaXggdG8gYmUgdXNlZCBpbiB0aGUgY29va2llL2xvY2Fsc3RvcmFnZSBuYW1lXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gd2hldGhlciB0aGUgdXNlciBoYXMgb3B0ZWQgaW4gdG8gdGhlIGdpdmVuIG9wdCB0eXBlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBoYXNPcHRlZEluKHRva2VuOiBzdHJpbmcsIG9wdGlvbnM6IEdEUFJPcHRpb25zKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIF9nZXRTdG9yYWdlVmFsdWUodG9rZW4sIG9wdGlvbnMpID09PSAnMSdcbn1cblxuLyoqXG4gKiBDaGVjayB3aGV0aGVyIHRoZSB1c2VyIGhhcyBvcHRlZCBvdXQgb2YgZGF0YSBjYXB0dXJpbmcgYW5kIGNvb2tpZXMvbG9jYWxzdG9yYWdlIGZvciB0aGUgZ2l2ZW4gdG9rZW5cbiAqIEBwYXJhbSB7c3RyaW5nfSB0b2tlbiAtIFBvc3RIb2cgcHJvamVjdCBjYXB0dXJpbmcgdG9rZW5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5wZXJzaXN0ZW5jZVR5cGVdIFBlcnNpc3RlbmNlIG1lY2hhbmlzbSB1c2VkIC0gY29va2llIG9yIGxvY2FsU3RvcmFnZVxuICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLnBlcnNpc3RlbmNlUHJlZml4PV9fcGhfb3B0X2luX291dF0gLSBjdXN0b20gcHJlZml4IHRvIGJlIHVzZWQgaW4gdGhlIGNvb2tpZS9sb2NhbHN0b3JhZ2UgbmFtZVxuICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5yZXNwZWN0RG50XSAtIGZsYWcgdG8gdGFrZSBicm93c2VyIEROVCBzZXR0aW5nIGludG8gYWNjb3VudFxuICogQHJldHVybnMge2Jvb2xlYW59IHdoZXRoZXIgdGhlIHVzZXIgaGFzIG9wdGVkIG91dCBvZiB0aGUgZ2l2ZW4gb3B0IHR5cGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGhhc09wdGVkT3V0KHRva2VuOiBzdHJpbmcsIG9wdGlvbnM6IFBhcnRpYWw8R0RQUk9wdGlvbnM+KTogYm9vbGVhbiB7XG4gICAgaWYgKF9oYXNEb05vdFRyYWNrRmxhZ09uKG9wdGlvbnMpKSB7XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICAgIHJldHVybiBfZ2V0U3RvcmFnZVZhbHVlKHRva2VuLCBvcHRpb25zKSA9PT0gJzAnXG59XG5cbi8qKlxuICogQ2xlYXIgdGhlIHVzZXIncyBvcHQgaW4vb3V0IHN0YXR1cyBvZiBkYXRhIGNhcHR1cmluZyBhbmQgY29va2llcy9sb2NhbHN0b3JhZ2UgZm9yIHRoZSBnaXZlbiB0b2tlblxuICogQHBhcmFtIHtzdHJpbmd9IHRva2VuIC0gUG9zdEhvZyBwcm9qZWN0IGNhcHR1cmluZyB0b2tlblxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLnBlcnNpc3RlbmNlVHlwZV0gUGVyc2lzdGVuY2UgbWVjaGFuaXNtIHVzZWQgLSBjb29raWUgb3IgbG9jYWxTdG9yYWdlXG4gKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMucGVyc2lzdGVuY2VQcmVmaXg9X19waF9vcHRfaW5fb3V0XSAtIGN1c3RvbSBwcmVmaXggdG8gYmUgdXNlZCBpbiB0aGUgY29va2llL2xvY2Fsc3RvcmFnZSBuYW1lXG4gKiBAcGFyYW0ge051bWJlcn0gW29wdGlvbnMuY29va2llRXhwaXJhdGlvbl0gLSBudW1iZXIgb2YgZGF5cyB1bnRpbCB0aGUgb3B0LWluIGNvb2tpZSBleHBpcmVzXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmNyb3NzU3ViZG9tYWluQ29va2llXSAtIHdoZXRoZXIgdGhlIG9wdC1pbiBjb29raWUgaXMgc2V0IGFzIGNyb3NzLXN1YmRvbWFpbiBvciBub3RcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuc2VjdXJlQ29va2llXSAtIHdoZXRoZXIgdGhlIG9wdC1pbiBjb29raWUgaXMgc2V0IGFzIHNlY3VyZSBvciBub3RcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyT3B0SW5PdXQodG9rZW46IHN0cmluZywgb3B0aW9uczogR0RQUk9wdGlvbnMpIHtcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fVxuICAgIF9nZXRTdG9yYWdlKG9wdGlvbnMpLnJlbW92ZShfZ2V0U3RvcmFnZUtleSh0b2tlbiwgb3B0aW9ucyksICEhb3B0aW9ucy5jcm9zc1N1YmRvbWFpbkNvb2tpZSlcbn1cblxuLyoqIFByaXZhdGUgKiovXG5cbi8qKlxuICogR2V0IHN0b3JhZ2UgdXRpbFxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLnBlcnNpc3RlbmNlVHlwZV1cbiAqIEByZXR1cm5zIHtvYmplY3R9IGVpdGhlciBjb29raWVTdG9yZSBvciBsb2NhbFN0b3JlXG4gKi9cbmZ1bmN0aW9uIF9nZXRTdG9yYWdlKG9wdGlvbnM6IEdEUFJPcHRpb25zKTogUGVyc2lzdGVudFN0b3JlIHtcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fVxuICAgIGlmIChvcHRpb25zLnBlcnNpc3RlbmNlVHlwZSA9PT0gJ2xvY2FsU3RvcmFnZScpIHtcbiAgICAgICAgcmV0dXJuIGxvY2FsU3RvcmVcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMucGVyc2lzdGVuY2VUeXBlID09PSAnbG9jYWxTdG9yYWdlK2Nvb2tpZScpIHtcbiAgICAgICAgcmV0dXJuIGxvY2FsUGx1c0Nvb2tpZVN0b3JlXG4gICAgfVxuICAgIHJldHVybiBjb29raWVTdG9yZVxufVxuXG4vKipcbiAqIEdldCB0aGUgbmFtZSBvZiB0aGUgY29va2llIHRoYXQgaXMgdXNlZCBmb3IgdGhlIGdpdmVuIG9wdCB0eXBlIChjYXB0dXJpbmcsIGNvb2tpZSwgZXRjLilcbiAqIEBwYXJhbSB7c3RyaW5nfSB0b2tlbiAtIFBvc3RIb2cgcHJvamVjdCBjYXB0dXJpbmcgdG9rZW5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5wZXJzaXN0ZW5jZVByZWZpeD1fX3BoX29wdF9pbl9vdXRdIC0gY3VzdG9tIHByZWZpeCB0byBiZSB1c2VkIGluIHRoZSBjb29raWUvbG9jYWxzdG9yYWdlIG5hbWVcbiAqIEByZXR1cm5zIHtzdHJpbmd9IHRoZSBuYW1lIG9mIHRoZSBjb29raWUgZm9yIHRoZSBnaXZlbiBvcHQgdHlwZVxuICovXG5mdW5jdGlvbiBfZ2V0U3RvcmFnZUtleSh0b2tlbjogc3RyaW5nLCBvcHRpb25zOiBHRFBST3B0aW9ucykge1xuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9XG4gICAgcmV0dXJuIChvcHRpb25zLnBlcnNpc3RlbmNlUHJlZml4IHx8IEdEUFJfREVGQVVMVF9QRVJTSVNURU5DRV9QUkVGSVgpICsgdG9rZW5cbn1cblxuLyoqXG4gKiBHZXQgdGhlIHZhbHVlIG9mIHRoZSBjb29raWUgdGhhdCBpcyB1c2VkIGZvciB0aGUgZ2l2ZW4gb3B0IHR5cGUgKGNhcHR1cmluZywgY29va2llLCBldGMuKVxuICogQHBhcmFtIHtzdHJpbmd9IHRva2VuIC0gUG9zdEhvZyBwcm9qZWN0IGNhcHR1cmluZyB0b2tlblxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLnBlcnNpc3RlbmNlUHJlZml4PV9fcGhfb3B0X2luX291dF0gLSBjdXN0b20gcHJlZml4IHRvIGJlIHVzZWQgaW4gdGhlIGNvb2tpZS9sb2NhbHN0b3JhZ2UgbmFtZVxuICogQHJldHVybnMge3N0cmluZ30gdGhlIHZhbHVlIG9mIHRoZSBjb29raWUgZm9yIHRoZSBnaXZlbiBvcHQgdHlwZVxuICovXG5mdW5jdGlvbiBfZ2V0U3RvcmFnZVZhbHVlKHRva2VuOiBzdHJpbmcsIG9wdGlvbnM6IEdEUFJPcHRpb25zKSB7XG4gICAgcmV0dXJuIF9nZXRTdG9yYWdlKG9wdGlvbnMpLmdldChfZ2V0U3RvcmFnZUtleSh0b2tlbiwgb3B0aW9ucykpXG59XG5cbi8qKlxuICogQ2hlY2sgd2hldGhlciB0aGUgdXNlciBoYXMgc2V0IHRoZSBETlQvZG9Ob3RUcmFjayBzZXR0aW5nIHRvIHRydWUgaW4gdGhlaXIgYnJvd3NlclxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLndpbmRvd10gLSBhbHRlcm5hdGUgd2luZG93IG9iamVjdCB0byBjaGVjazsgdXNlZCB0byBmb3JjZSB2YXJpb3VzIEROVCBzZXR0aW5ncyBpbiBicm93c2VyIHRlc3RzXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLnJlc3BlY3REbnRdIC0gZmxhZyB0byB0YWtlIGJyb3dzZXIgRE5UIHNldHRpbmcgaW50byBhY2NvdW50XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gd2hldGhlciB0aGUgRE5UIHNldHRpbmcgaXMgdHJ1ZVxuICovXG5mdW5jdGlvbiBfaGFzRG9Ob3RUcmFja0ZsYWdPbihvcHRpb25zOiBHRFBST3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMucmVzcGVjdERudCkge1xuICAgICAgICBjb25zdCB3aW4gPSAob3B0aW9ucyAmJiBvcHRpb25zLndpbmRvdykgfHwgd2luZG93XG4gICAgICAgIGNvbnN0IG5hdiA9IHdpbj8ubmF2aWdhdG9yXG4gICAgICAgIGxldCBoYXNEbnRPbiA9IGZhbHNlXG4gICAgICAgIF9lYWNoKFxuICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgIG5hdj8uZG9Ob3RUcmFjaywgLy8gc3RhbmRhcmRcbiAgICAgICAgICAgICAgICAobmF2IGFzIGFueSlbJ21zRG9Ob3RUcmFjayddLFxuICAgICAgICAgICAgICAgICh3aW4gYXMgYW55KVsnZG9Ob3RUcmFjayddLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkbnRWYWx1ZSkge1xuICAgICAgICAgICAgICAgIGlmIChfaW5jbHVkZXMoW3RydWUsIDEsICcxJywgJ3llcyddLCBkbnRWYWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaGFzRG50T24gPSB0cnVlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICApXG4gICAgICAgIHJldHVybiBoYXNEbnRPblxuICAgIH1cbiAgICByZXR1cm4gZmFsc2Vcbn1cblxuLyoqXG4gKiBTZXQgY29va2llL2xvY2Fsc3RvcmFnZSBmb3IgdGhlIHVzZXIgaW5kaWNhdGluZyB0aGF0IHRoZXkgYXJlIG9wdGVkIGluIG9yIG91dCBmb3IgdGhlIGdpdmVuIG9wdCB0eXBlXG4gKiBAcGFyYW0ge2Jvb2xlYW59IG9wdFZhbHVlIC0gd2hldGhlciB0byBvcHQgdGhlIHVzZXIgaW4gb3Igb3V0IGZvciB0aGUgZ2l2ZW4gb3B0IHR5cGVcbiAqIEBwYXJhbSB7c3RyaW5nfSB0b2tlbiAtIFBvc3RIb2cgcHJvamVjdCBjYXB0dXJpbmcgdG9rZW5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAqIEBwYXJhbSB7Y2FwdHVyZUZ1bmN0aW9ufSBbb3B0aW9ucy5jYXB0dXJlXSAtIGZ1bmN0aW9uIHVzZWQgZm9yIGNhcHR1cmluZyBhIFBvc3RIb2cgZXZlbnQgdG8gcmVjb3JkIHRoZSBvcHQtaW4gYWN0aW9uXG4gKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMuY2FwdHVyZUV2ZW50TmFtZV0gLSBldmVudCBuYW1lIHRvIGJlIHVzZWQgZm9yIGNhcHR1cmluZyB0aGUgb3B0LWluIGFjdGlvblxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zLmNhcHR1cmVQcm9wZXJ0aWVzXSAtIHNldCBvZiBwcm9wZXJ0aWVzIHRvIGJlIGNhcHR1cmVkIGFsb25nIHdpdGggdGhlIG9wdC1pbiBhY3Rpb25cbiAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5wZXJzaXN0ZW5jZVByZWZpeD1fX3BoX29wdF9pbl9vdXRdIC0gY3VzdG9tIHByZWZpeCB0byBiZSB1c2VkIGluIHRoZSBjb29raWUvbG9jYWxzdG9yYWdlIG5hbWVcbiAqIEBwYXJhbSB7TnVtYmVyfSBbb3B0aW9ucy5jb29raWVFeHBpcmF0aW9uXSAtIG51bWJlciBvZiBkYXlzIHVudGlsIHRoZSBvcHQtaW4gY29va2llIGV4cGlyZXNcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuY3Jvc3NTdWJkb21haW5Db29raWVdIC0gd2hldGhlciB0aGUgb3B0LWluIGNvb2tpZSBpcyBzZXQgYXMgY3Jvc3Mtc3ViZG9tYWluIG9yIG5vdFxuICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5zZWN1cmVDb29raWVdIC0gd2hldGhlciB0aGUgb3B0LWluIGNvb2tpZSBpcyBzZXQgYXMgc2VjdXJlIG9yIG5vdFxuICovXG5mdW5jdGlvbiBfb3B0SW5PdXQob3B0VmFsdWU6IGJvb2xlYW4sIHRva2VuOiBzdHJpbmcsIG9wdGlvbnM6IEdEUFJPcHRpb25zKSB7XG4gICAgaWYgKCFfaXNTdHJpbmcodG9rZW4pIHx8ICF0b2tlbi5sZW5ndGgpIHtcbiAgICAgICAgbG9nZ2VyLmVycm9yKCdnZHByLicgKyAob3B0VmFsdWUgPyAnb3B0SW4nIDogJ29wdE91dCcpICsgJyBjYWxsZWQgd2l0aCBhbiBpbnZhbGlkIHRva2VuJylcbiAgICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge31cblxuICAgIF9nZXRTdG9yYWdlKG9wdGlvbnMpLnNldChcbiAgICAgICAgX2dldFN0b3JhZ2VLZXkodG9rZW4sIG9wdGlvbnMpLFxuICAgICAgICBvcHRWYWx1ZSA/IDEgOiAwLFxuICAgICAgICBfaXNOdW1iZXIob3B0aW9ucy5jb29raWVFeHBpcmF0aW9uKSA/IG9wdGlvbnMuY29va2llRXhwaXJhdGlvbiA6IG51bGwsXG4gICAgICAgIG9wdGlvbnMuY3Jvc3NTdWJkb21haW5Db29raWUsXG4gICAgICAgIG9wdGlvbnMuc2VjdXJlQ29va2llXG4gICAgKVxuXG4gICAgaWYgKG9wdGlvbnMuY2FwdHVyZSAmJiBvcHRWYWx1ZSkge1xuICAgICAgICAvLyBvbmx5IGNhcHR1cmUgZXZlbnQgaWYgb3B0aW5nIGluIChvcHRWYWx1ZT10cnVlKVxuICAgICAgICBvcHRpb25zLmNhcHR1cmUob3B0aW9ucy5jYXB0dXJlRXZlbnROYW1lIHx8ICckb3B0X2luJywgb3B0aW9ucy5jYXB0dXJlUHJvcGVydGllcyB8fCB7fSwge1xuICAgICAgICAgICAgc2VuZF9pbnN0YW50bHk6IHRydWUsXG4gICAgICAgIH0pXG4gICAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdXNlck9wdGVkT3V0KHBvc3Rob2c6IFBvc3RIb2cpIHtcbiAgICBsZXQgb3B0ZWRPdXQgPSBmYWxzZVxuXG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdG9rZW4gPSBwb3N0aG9nLmNvbmZpZy50b2tlblxuICAgICAgICBjb25zdCByZXNwZWN0RG50ID0gcG9zdGhvZy5jb25maWcucmVzcGVjdF9kbnRcbiAgICAgICAgY29uc3QgcGVyc2lzdGVuY2VUeXBlID0gcG9zdGhvZy5jb25maWcub3B0X291dF9jYXB0dXJpbmdfcGVyc2lzdGVuY2VfdHlwZVxuICAgICAgICBjb25zdCBwZXJzaXN0ZW5jZVByZWZpeCA9IHBvc3Rob2cuY29uZmlnLm9wdF9vdXRfY2FwdHVyaW5nX2Nvb2tpZV9wcmVmaXggfHwgdW5kZWZpbmVkXG4gICAgICAgIGNvbnN0IHdpbiA9IChwb3N0aG9nLmNvbmZpZyBhcyBhbnkpLndpbmRvdyBhcyBXaW5kb3cgfCB1bmRlZmluZWQgLy8gdXNlZCB0byBvdmVycmlkZSB3aW5kb3cgZHVyaW5nIGJyb3dzZXIgdGVzdHNcblxuICAgICAgICBpZiAodG9rZW4pIHtcbiAgICAgICAgICAgIC8vIGlmIHRoZXJlIHdhcyBhbiBpc3N1ZSBnZXR0aW5nIHRoZSB0b2tlbiwgY29udGludWUgbWV0aG9kIGV4ZWN1dGlvbiBhcyBub3JtYWxcbiAgICAgICAgICAgIG9wdGVkT3V0ID0gaGFzT3B0ZWRPdXQodG9rZW4sIHtcbiAgICAgICAgICAgICAgICByZXNwZWN0RG50LFxuICAgICAgICAgICAgICAgIHBlcnNpc3RlbmNlVHlwZSxcbiAgICAgICAgICAgICAgICBwZXJzaXN0ZW5jZVByZWZpeCxcbiAgICAgICAgICAgICAgICB3aW5kb3c6IHdpbixcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgbG9nZ2VyLmVycm9yKCdVbmV4cGVjdGVkIGVycm9yIHdoZW4gY2hlY2tpbmcgY2FwdHVyaW5nIG9wdC1vdXQgc3RhdHVzOiAnICsgZXJyKVxuICAgIH1cbiAgICByZXR1cm4gb3B0ZWRPdXRcbn1cbiIsICJpbXBvcnQge1xuICAgIENPTlNPTEVfTE9HX1JFQ09SRElOR19FTkFCTEVEX1NFUlZFUl9TSURFLFxuICAgIFNFU1NJT05fUkVDT1JESU5HX0NBTlZBU19SRUNPUkRJTkcsXG4gICAgU0VTU0lPTl9SRUNPUkRJTkdfRU5BQkxFRF9TRVJWRVJfU0lERSxcbiAgICBTRVNTSU9OX1JFQ09SRElOR19JU19TQU1QTEVELFxuICAgIFNFU1NJT05fUkVDT1JESU5HX05FVFdPUktfUEFZTE9BRF9DQVBUVVJFLFxuICAgIFNFU1NJT05fUkVDT1JESU5HX1JFQ09SREVSX1ZFUlNJT05fU0VSVkVSX1NJREUsXG59IGZyb20gJy4uLy4uL2NvbnN0YW50cydcbmltcG9ydCB7XG4gICAgRlVMTF9TTkFQU0hPVF9FVkVOVF9UWVBFLFxuICAgIElOQ1JFTUVOVEFMX1NOQVBTSE9UX0VWRU5UX1RZUEUsXG4gICAgTUVUQV9FVkVOVF9UWVBFLFxuICAgIE11dGF0aW9uUmF0ZUxpbWl0ZXIsXG4gICAgcmVjb3JkT3B0aW9ucyxcbiAgICBycndlYlJlY29yZCxcbiAgICB0cnVuY2F0ZUxhcmdlQ29uc29sZUxvZ3MsXG59IGZyb20gJy4vc2Vzc2lvbnJlY29yZGluZy11dGlscydcbmltcG9ydCB7IFBvc3RIb2cgfSBmcm9tICcuLi8uLi9wb3N0aG9nLWNvcmUnXG5pbXBvcnQgeyBEZWNpZGVSZXNwb25zZSwgRmxhZ1ZhcmlhbnQsIE5ldHdvcmtSZWNvcmRPcHRpb25zLCBOZXR3b3JrUmVxdWVzdCwgUHJvcGVydGllcyB9IGZyb20gJy4uLy4uL3R5cGVzJ1xuaW1wb3J0IHsgRXZlbnRUeXBlLCB0eXBlIGV2ZW50V2l0aFRpbWUsIHR5cGUgbGlzdGVuZXJIYW5kbGVyLCBSZWNvcmRQbHVnaW4gfSBmcm9tICdAcnJ3ZWIvdHlwZXMnXG5pbXBvcnQgQ29uZmlnIGZyb20gJy4uLy4uL2NvbmZpZydcbmltcG9ydCB7IF90aW1lc3RhbXAsIGxvYWRTY3JpcHQgfSBmcm9tICcuLi8uLi91dGlscydcblxuaW1wb3J0IHtcbiAgICBfaXNCb29sZWFuLFxuICAgIF9pc0Z1bmN0aW9uLFxuICAgIF9pc051bGwsXG4gICAgX2lzTnVsbGlzaCxcbiAgICBfaXNOdW1iZXIsXG4gICAgX2lzT2JqZWN0LFxuICAgIF9pc1N0cmluZyxcbiAgICBfaXNVbmRlZmluZWQsXG59IGZyb20gJy4uLy4uL3V0aWxzL3R5cGUtdXRpbHMnXG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tICcuLi8uLi91dGlscy9sb2dnZXInXG5pbXBvcnQgeyBhc3NpZ25hYmxlV2luZG93LCB3aW5kb3cgfSBmcm9tICcuLi8uLi91dGlscy9nbG9iYWxzJ1xuaW1wb3J0IHsgYnVpbGROZXR3b3JrUmVxdWVzdE9wdGlvbnMgfSBmcm9tICcuL2NvbmZpZydcbmltcG9ydCB7IGlzTG9jYWxob3N0IH0gZnJvbSAnLi4vLi4vdXRpbHMvcmVxdWVzdC11dGlscydcbmltcG9ydCB7IHVzZXJPcHRlZE91dCB9IGZyb20gJy4uLy4uL2dkcHItdXRpbHMnXG5cbmNvbnN0IEJBU0VfRU5EUE9JTlQgPSAnL3MvJ1xuXG5jb25zdCBGSVZFX01JTlVURVMgPSAxMDAwICogNjAgKiA1XG5jb25zdCBUV09fU0VDT05EUyA9IDIwMDBcbmV4cG9ydCBjb25zdCBSRUNPUkRJTkdfSURMRV9BQ1RJVklUWV9USU1FT1VUX01TID0gRklWRV9NSU5VVEVTXG5leHBvcnQgY29uc3QgUkVDT1JESU5HX01BWF9FVkVOVF9TSVpFID0gMTAyNCAqIDEwMjQgKiAwLjkgLy8gfjFtYiAod2l0aCBzb21lIHdpZ2dsZSByb29tKVxuZXhwb3J0IGNvbnN0IFJFQ09SRElOR19CVUZGRVJfVElNRU9VVCA9IDIwMDAgLy8gMiBzZWNvbmRzXG5leHBvcnQgY29uc3QgU0VTU0lPTl9SRUNPUkRJTkdfQkFUQ0hfS0VZID0gJ3JlY29yZGluZ3MnXG5cbi8vIE5PVEU6IEltcG9ydGluZyB0aGlzIHR5cGUgaXMgcHJvYmxlbWF0aWMgYXMgd2UgY2FuJ3Qgc2FmZWx5IGJ1bmRsZSBpdCB0byBhIFRTIGRlZmluaXRpb24gc28sIGluc3RlYWQgd2UgcmVkZWZpbmUuXG4vLyBpbXBvcnQgdHlwZSB7IHJlY29yZCB9IGZyb20gJ3Jyd2ViMi90eXBpbmdzJ1xuLy8gaW1wb3J0IHR5cGUgeyByZWNvcmRPcHRpb25zIH0gZnJvbSAncnJ3ZWIvdHlwaW5ncy90eXBlcydcblxuLy8gQ29waWVkIGZyb20gcnJ3ZWIgdHlwaW5ncyB0byBhdm9pZCBpbXBvcnRcbmVudW0gSW5jcmVtZW50YWxTb3VyY2Uge1xuICAgIE11dGF0aW9uID0gMCxcbiAgICBNb3VzZU1vdmUgPSAxLFxuICAgIE1vdXNlSW50ZXJhY3Rpb24gPSAyLFxuICAgIFNjcm9sbCA9IDMsXG4gICAgVmlld3BvcnRSZXNpemUgPSA0LFxuICAgIElucHV0ID0gNSxcbiAgICBUb3VjaE1vdmUgPSA2LFxuICAgIE1lZGlhSW50ZXJhY3Rpb24gPSA3LFxuICAgIFN0eWxlU2hlZXRSdWxlID0gOCxcbiAgICBDYW52YXNNdXRhdGlvbiA9IDksXG4gICAgRm9udCA9IDEwLFxuICAgIExvZyA9IDExLFxuICAgIERyYWcgPSAxMixcbiAgICBTdHlsZURlY2xhcmF0aW9uID0gMTMsXG4gICAgU2VsZWN0aW9uID0gMTQsXG4gICAgQWRvcHRlZFN0eWxlU2hlZXQgPSAxNSxcbn1cblxuY29uc3QgQUNUSVZFX1NPVVJDRVMgPSBbXG4gICAgSW5jcmVtZW50YWxTb3VyY2UuTW91c2VNb3ZlLFxuICAgIEluY3JlbWVudGFsU291cmNlLk1vdXNlSW50ZXJhY3Rpb24sXG4gICAgSW5jcmVtZW50YWxTb3VyY2UuU2Nyb2xsLFxuICAgIEluY3JlbWVudGFsU291cmNlLlZpZXdwb3J0UmVzaXplLFxuICAgIEluY3JlbWVudGFsU291cmNlLklucHV0LFxuICAgIEluY3JlbWVudGFsU291cmNlLlRvdWNoTW92ZSxcbiAgICBJbmNyZW1lbnRhbFNvdXJjZS5NZWRpYUludGVyYWN0aW9uLFxuICAgIEluY3JlbWVudGFsU291cmNlLkRyYWcsXG5dXG5cbi8qKlxuICogU2Vzc2lvbiByZWNvcmRpbmcgc3RhcnRzIGluIGJ1ZmZlcmluZyBtb2RlIHdoaWxlIHdhaXRpbmcgZm9yIGRlY2lkZSByZXNwb25zZVxuICogT25jZSB0aGUgcmVzcG9uc2UgaXMgcmVjZWl2ZWQgaXQgbWlnaHQgYmUgZGlzYWJsZWQsIGFjdGl2ZSBvciBzYW1wbGVkXG4gKiBXaGVuIHNhbXBsZWQgdGhhdCBtZWFucyBhIHNhbXBsZSByYXRlIGlzIHNldCBhbmQgdGhlIGxhc3QgdGltZSB0aGUgc2Vzc2lvbiBpZCB3YXMgcm90YXRlZFxuICogdGhlIHNhbXBsZSByYXRlIGRldGVybWluZWQgdGhpcyBzZXNzaW9uIHNob3VsZCBiZSBzZW50IHRvIHRoZSBzZXJ2ZXIuXG4gKi9cbnR5cGUgU2Vzc2lvblJlY29yZGluZ1N0YXR1cyA9ICdkaXNhYmxlZCcgfCAnc2FtcGxlZCcgfCAnYWN0aXZlJyB8ICdidWZmZXJpbmcnXG5cbmludGVyZmFjZSBTbmFwc2hvdEJ1ZmZlciB7XG4gICAgc2l6ZTogbnVtYmVyXG4gICAgZGF0YTogYW55W11cbiAgICBzZXNzaW9uSWQ6IHN0cmluZyB8IG51bGxcbiAgICB3aW5kb3dJZDogc3RyaW5nIHwgbnVsbFxufVxuXG5pbnRlcmZhY2UgUXVldWVkUlJXZWJFdmVudCB7XG4gICAgcnJ3ZWJNZXRob2Q6ICgpID0+IHZvaWRcbiAgICBhdHRlbXB0OiBudW1iZXJcbiAgICAvLyB0aGUgdGltZXN0YW1wIHRoaXMgd2FzIGZpcnN0IHB1dCBpbnRvIHRoaXMgcXVldWVcbiAgICBlbnF1ZXVlZEF0OiBudW1iZXJcbn1cblxuY29uc3QgbmV3UXVldWVkRXZlbnQgPSAocnJ3ZWJNZXRob2Q6ICgpID0+IHZvaWQpOiBRdWV1ZWRSUldlYkV2ZW50ID0+ICh7XG4gICAgcnJ3ZWJNZXRob2QsXG4gICAgZW5xdWV1ZWRBdDogRGF0ZS5ub3coKSxcbiAgICBhdHRlbXB0OiAxLFxufSlcblxuY29uc3QgTE9HR0VSX1BSRUZJWCA9ICdbU2Vzc2lvblJlY29yZGluZ10nXG5cbmV4cG9ydCBjbGFzcyBTZXNzaW9uUmVjb3JkaW5nIHtcbiAgICBwcml2YXRlIGluc3RhbmNlOiBQb3N0SG9nXG4gICAgcHJpdmF0ZSBfZW5kcG9pbnQ6IHN0cmluZ1xuICAgIHByaXZhdGUgZmx1c2hCdWZmZXJUaW1lcj86IGFueVxuXG4gICAgLy8gd2UgaGF2ZSBhIGJ1ZmZlciAtIHRoYXQgY29udGFpbnMgUG9zdEhvZyBzbmFwc2hvdCBldmVudHMgcmVhZHkgdG8gYmUgc2VudCB0byB0aGUgc2VydmVyXG4gICAgcHJpdmF0ZSBidWZmZXI/OiBTbmFwc2hvdEJ1ZmZlclxuICAgIC8vIGFuZCBhIHF1ZXVlIC0gdGhhdCBjb250YWlucyBycndlYiBldmVudHMgdGhhdCB3ZSB3YW50IHRvIHNlbmQgdG8gcnJ3ZWIsIGJ1dCBycndlYiB3YXNuJ3QgYWJsZSB0byBhY2NlcHQgdGhlbSB5ZXRcbiAgICBwcml2YXRlIHF1ZXVlZFJSV2ViRXZlbnRzOiBRdWV1ZWRSUldlYkV2ZW50W10gPSBbXVxuXG4gICAgcHJpdmF0ZSBtdXRhdGlvblJhdGVMaW1pdGVyPzogTXV0YXRpb25SYXRlTGltaXRlclxuICAgIHByaXZhdGUgX2NhcHR1cmVTdGFydGVkOiBib29sZWFuXG4gICAgcHJpdmF0ZSBzdG9wUnJ3ZWI6IGxpc3RlbmVySGFuZGxlciB8IHVuZGVmaW5lZFxuICAgIHByaXZhdGUgcmVjZWl2ZWREZWNpZGU6IGJvb2xlYW5cbiAgICBwcml2YXRlIHJyd2ViUmVjb3JkOiBycndlYlJlY29yZCB8IHVuZGVmaW5lZFxuICAgIHByaXZhdGUgaXNJZGxlID0gZmFsc2VcblxuICAgIHByaXZhdGUgX2xpbmtlZEZsYWdTZWVuOiBib29sZWFuID0gZmFsc2VcbiAgICBwcml2YXRlIF9sYXN0QWN0aXZpdHlUaW1lc3RhbXA6IG51bWJlciA9IERhdGUubm93KClcbiAgICBwcml2YXRlIHdpbmRvd0lkOiBzdHJpbmcgfCBudWxsID0gbnVsbFxuICAgIHByaXZhdGUgc2Vzc2lvbklkOiBzdHJpbmcgfCBudWxsID0gbnVsbFxuICAgIHByaXZhdGUgX2xpbmtlZEZsYWc6IHN0cmluZyB8IEZsYWdWYXJpYW50IHwgbnVsbCA9IG51bGxcbiAgICBwcml2YXRlIF9zYW1wbGVSYXRlOiBudW1iZXIgfCBudWxsID0gbnVsbFxuICAgIHByaXZhdGUgX21pbmltdW1EdXJhdGlvbjogbnVtYmVyIHwgbnVsbCA9IG51bGxcblxuICAgIHByaXZhdGUgX2Z1bGxTbmFwc2hvdFRpbWVyPzogbnVtYmVyXG5cbiAgICAvLyBVdGlsIHRvIGhlbHAgZGV2ZWxvcGVycyB3b3JraW5nIG9uIHRoaXMgZmVhdHVyZSBtYW51YWxseSBvdmVycmlkZVxuICAgIF9mb3JjZUFsbG93TG9jYWxob3N0TmV0d29ya0NhcHR1cmUgPSBmYWxzZVxuXG4gICAgcHVibGljIGdldCBzdGFydGVkKCk6IGJvb2xlYW4ge1xuICAgICAgICAvLyBUT0RPIGNvdWxkIHdlIHVzZSBzdGF0dXMgaW5zdGVhZCBvZiBfY2FwdHVyZVN0YXJ0ZWQ/XG4gICAgICAgIHJldHVybiB0aGlzLl9jYXB0dXJlU3RhcnRlZFxuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0IHNlc3Npb25NYW5hZ2VyKCkge1xuICAgICAgICBpZiAoIXRoaXMuaW5zdGFuY2Uuc2Vzc2lvbk1hbmFnZXIpIHtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcihMT0dHRVJfUFJFRklYICsgJyBzdGFydGVkIHdpdGhvdXQgdmFsaWQgc2Vzc2lvbk1hbmFnZXInKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKExPR0dFUl9QUkVGSVggKyAnIHN0YXJ0ZWQgd2l0aG91dCB2YWxpZCBzZXNzaW9uTWFuYWdlci4gVGhpcyBpcyBhIGJ1Zy4nKVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaW5zdGFuY2Uuc2Vzc2lvbk1hbmFnZXJcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldCBpc1NhbXBsZWQoKTogYm9vbGVhbiB8IG51bGwge1xuICAgICAgICBpZiAoX2lzTnVtYmVyKHRoaXMuX3NhbXBsZVJhdGUpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pbnN0YW5jZS5nZXRfcHJvcGVydHkoU0VTU0lPTl9SRUNPUkRJTkdfSVNfU0FNUExFRClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGdldCBzZXNzaW9uRHVyYXRpb24oKTogbnVtYmVyIHwgbnVsbCB7XG4gICAgICAgIGNvbnN0IG1vc3RSZWNlbnRTbmFwc2hvdCA9IHRoaXMuYnVmZmVyPy5kYXRhW3RoaXMuYnVmZmVyPy5kYXRhLmxlbmd0aCAtIDFdXG4gICAgICAgIGNvbnN0IHsgc2Vzc2lvblN0YXJ0VGltZXN0YW1wIH0gPSB0aGlzLnNlc3Npb25NYW5hZ2VyLmNoZWNrQW5kR2V0U2Vzc2lvbkFuZFdpbmRvd0lkKHRydWUpXG4gICAgICAgIHJldHVybiBtb3N0UmVjZW50U25hcHNob3QgPyBtb3N0UmVjZW50U25hcHNob3QudGltZXN0YW1wIC0gc2Vzc2lvblN0YXJ0VGltZXN0YW1wIDogbnVsbFxuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0IGlzUmVjb3JkaW5nRW5hYmxlZCgpIHtcbiAgICAgICAgY29uc3QgZW5hYmxlZF9zZXJ2ZXJfc2lkZSA9ICEhdGhpcy5pbnN0YW5jZS5nZXRfcHJvcGVydHkoU0VTU0lPTl9SRUNPUkRJTkdfRU5BQkxFRF9TRVJWRVJfU0lERSlcbiAgICAgICAgY29uc3QgZW5hYmxlZF9jbGllbnRfc2lkZSA9ICF0aGlzLmluc3RhbmNlLmNvbmZpZy5kaXNhYmxlX3Nlc3Npb25fcmVjb3JkaW5nXG4gICAgICAgIHJldHVybiB3aW5kb3cgJiYgZW5hYmxlZF9zZXJ2ZXJfc2lkZSAmJiBlbmFibGVkX2NsaWVudF9zaWRlXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXQgaXNDb25zb2xlTG9nQ2FwdHVyZUVuYWJsZWQoKSB7XG4gICAgICAgIGNvbnN0IGVuYWJsZWRfc2VydmVyX3NpZGUgPSAhIXRoaXMuaW5zdGFuY2UuZ2V0X3Byb3BlcnR5KENPTlNPTEVfTE9HX1JFQ09SRElOR19FTkFCTEVEX1NFUlZFUl9TSURFKVxuICAgICAgICBjb25zdCBlbmFibGVkX2NsaWVudF9zaWRlID0gdGhpcy5pbnN0YW5jZS5jb25maWcuZW5hYmxlX3JlY29yZGluZ19jb25zb2xlX2xvZ1xuICAgICAgICByZXR1cm4gZW5hYmxlZF9jbGllbnRfc2lkZSA/PyBlbmFibGVkX3NlcnZlcl9zaWRlXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXQgY2FudmFzUmVjb3JkaW5nKCk6IHsgZW5hYmxlZDogYm9vbGVhbjsgZnBzOiBudW1iZXI7IHF1YWxpdHk6IG51bWJlciB9IHwgdW5kZWZpbmVkIHtcbiAgICAgICAgY29uc3QgY2FudmFzUmVjb3JkaW5nX3NlcnZlcl9zaWRlID0gdGhpcy5pbnN0YW5jZS5nZXRfcHJvcGVydHkoU0VTU0lPTl9SRUNPUkRJTkdfQ0FOVkFTX1JFQ09SRElORylcbiAgICAgICAgcmV0dXJuIGNhbnZhc1JlY29yZGluZ19zZXJ2ZXJfc2lkZSAmJiBjYW52YXNSZWNvcmRpbmdfc2VydmVyX3NpZGUuZnBzICYmIGNhbnZhc1JlY29yZGluZ19zZXJ2ZXJfc2lkZS5xdWFsaXR5XG4gICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAgIGVuYWJsZWQ6IGNhbnZhc1JlY29yZGluZ19zZXJ2ZXJfc2lkZS5lbmFibGVkLFxuICAgICAgICAgICAgICAgICAgZnBzOiBjYW52YXNSZWNvcmRpbmdfc2VydmVyX3NpZGUuZnBzLFxuICAgICAgICAgICAgICAgICAgcXVhbGl0eTogY2FudmFzUmVjb3JkaW5nX3NlcnZlcl9zaWRlLnF1YWxpdHksXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDogdW5kZWZpbmVkXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXQgcmVjb3JkaW5nVmVyc2lvbigpIHtcbiAgICAgICAgY29uc3QgcmVjb3JkaW5nVmVyc2lvbl9zZXJ2ZXJfc2lkZSA9IHRoaXMuaW5zdGFuY2UuZ2V0X3Byb3BlcnR5KFNFU1NJT05fUkVDT1JESU5HX1JFQ09SREVSX1ZFUlNJT05fU0VSVkVSX1NJREUpXG4gICAgICAgIGNvbnN0IHJlY29yZGluZ1ZlcnNpb25fY2xpZW50X3NpZGUgPSB0aGlzLmluc3RhbmNlLmNvbmZpZy5zZXNzaW9uX3JlY29yZGluZz8ucmVjb3JkZXJWZXJzaW9uXG4gICAgICAgIHJldHVybiByZWNvcmRpbmdWZXJzaW9uX2NsaWVudF9zaWRlIHx8IHJlY29yZGluZ1ZlcnNpb25fc2VydmVyX3NpZGUgfHwgJ3YxJ1xuICAgIH1cblxuICAgIC8vIG5ldHdvcmsgcGF5bG9hZCBjYXB0dXJlIGNvbmZpZyBoYXMgdGhyZWUgcGFydHNcbiAgICAvLyBlYWNoIGNhbiBiZSBjb25maWd1cmVkIHNlcnZlciBzaWRlIG9yIGNsaWVudCBzaWRlXG4gICAgcHJpdmF0ZSBnZXQgbmV0d29ya1BheWxvYWRDYXB0dXJlKCk6XG4gICAgICAgIHwgUGljazxOZXR3b3JrUmVjb3JkT3B0aW9ucywgJ3JlY29yZEhlYWRlcnMnIHwgJ3JlY29yZEJvZHknIHwgJ3JlY29yZFBlcmZvcm1hbmNlJz5cbiAgICAgICAgfCB1bmRlZmluZWQge1xuICAgICAgICBjb25zdCBuZXR3b3JrUGF5bG9hZENhcHR1cmVfc2VydmVyX3NpZGUgPSB0aGlzLmluc3RhbmNlLmdldF9wcm9wZXJ0eShTRVNTSU9OX1JFQ09SRElOR19ORVRXT1JLX1BBWUxPQURfQ0FQVFVSRSlcbiAgICAgICAgY29uc3QgbmV0d29ya1BheWxvYWRDYXB0dXJlX2NsaWVudF9zaWRlID0ge1xuICAgICAgICAgICAgcmVjb3JkSGVhZGVyczogdGhpcy5pbnN0YW5jZS5jb25maWcuc2Vzc2lvbl9yZWNvcmRpbmc/LnJlY29yZEhlYWRlcnMsXG4gICAgICAgICAgICByZWNvcmRCb2R5OiB0aGlzLmluc3RhbmNlLmNvbmZpZy5zZXNzaW9uX3JlY29yZGluZz8ucmVjb3JkQm9keSxcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBoZWFkZXJzRW5hYmxlZCA9XG4gICAgICAgICAgICBuZXR3b3JrUGF5bG9hZENhcHR1cmVfY2xpZW50X3NpZGU/LnJlY29yZEhlYWRlcnMgfHwgbmV0d29ya1BheWxvYWRDYXB0dXJlX3NlcnZlcl9zaWRlPy5yZWNvcmRIZWFkZXJzXG4gICAgICAgIGNvbnN0IGJvZHlFbmFibGVkID1cbiAgICAgICAgICAgIG5ldHdvcmtQYXlsb2FkQ2FwdHVyZV9jbGllbnRfc2lkZT8ucmVjb3JkQm9keSB8fCBuZXR3b3JrUGF5bG9hZENhcHR1cmVfc2VydmVyX3NpZGU/LnJlY29yZEJvZHlcbiAgICAgICAgY29uc3QgcGVyZm9ybWFuY2VFbmFibGVkID1cbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2UuY29uZmlnLmNhcHR1cmVfcGVyZm9ybWFuY2UgfHwgbmV0d29ya1BheWxvYWRDYXB0dXJlX3NlcnZlcl9zaWRlPy5jYXB0dXJlUGVyZm9ybWFuY2VcblxuICAgICAgICByZXR1cm4gaGVhZGVyc0VuYWJsZWQgfHwgYm9keUVuYWJsZWQgfHwgcGVyZm9ybWFuY2VFbmFibGVkXG4gICAgICAgICAgICA/IHsgcmVjb3JkSGVhZGVyczogaGVhZGVyc0VuYWJsZWQsIHJlY29yZEJvZHk6IGJvZHlFbmFibGVkLCByZWNvcmRQZXJmb3JtYW5jZTogcGVyZm9ybWFuY2VFbmFibGVkIH1cbiAgICAgICAgICAgIDogdW5kZWZpbmVkXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogZGVmYXVsdHMgdG8gYnVmZmVyaW5nIG1vZGUgdW50aWwgYSBkZWNpZGUgcmVzcG9uc2UgaXMgcmVjZWl2ZWRcbiAgICAgKiBvbmNlIGEgZGVjaWRlIHJlc3BvbnNlIGlzIHJlY2VpdmVkIHN0YXR1cyBjYW4gYmUgZGlzYWJsZWQsIGFjdGl2ZSBvciBzYW1wbGVkXG4gICAgICovXG4gICAgcHJpdmF0ZSBnZXQgc3RhdHVzKCk6IFNlc3Npb25SZWNvcmRpbmdTdGF0dXMge1xuICAgICAgICBpZiAoIXRoaXMucmVjZWl2ZWREZWNpZGUpIHtcbiAgICAgICAgICAgIHJldHVybiAnYnVmZmVyaW5nJ1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aGlzLmlzUmVjb3JkaW5nRW5hYmxlZCkge1xuICAgICAgICAgICAgcmV0dXJuICdkaXNhYmxlZCdcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghX2lzTnVsbGlzaCh0aGlzLl9saW5rZWRGbGFnKSAmJiAhdGhpcy5fbGlua2VkRmxhZ1NlZW4pIHtcbiAgICAgICAgICAgIHJldHVybiAnYnVmZmVyaW5nJ1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKF9pc0Jvb2xlYW4odGhpcy5pc1NhbXBsZWQpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pc1NhbXBsZWQgPyAnc2FtcGxlZCcgOiAnZGlzYWJsZWQnXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gJ2FjdGl2ZSdcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0cnVjdG9yKGluc3RhbmNlOiBQb3N0SG9nKSB7XG4gICAgICAgIHRoaXMuaW5zdGFuY2UgPSBpbnN0YW5jZVxuICAgICAgICB0aGlzLl9jYXB0dXJlU3RhcnRlZCA9IGZhbHNlXG4gICAgICAgIHRoaXMuX2VuZHBvaW50ID0gQkFTRV9FTkRQT0lOVFxuICAgICAgICB0aGlzLnN0b3BScndlYiA9IHVuZGVmaW5lZFxuICAgICAgICB0aGlzLnJlY2VpdmVkRGVjaWRlID0gZmFsc2VcblxuICAgICAgICB3aW5kb3c/LmFkZEV2ZW50TGlzdGVuZXIoJ2JlZm9yZXVubG9hZCcsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX2ZsdXNoQnVmZmVyKClcbiAgICAgICAgfSlcblxuICAgICAgICB3aW5kb3c/LmFkZEV2ZW50TGlzdGVuZXIoJ29mZmxpbmUnLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl90cnlBZGRDdXN0b21FdmVudCgnYnJvd3NlciBvZmZsaW5lJywge30pXG4gICAgICAgIH0pXG5cbiAgICAgICAgd2luZG93Py5hZGRFdmVudExpc3RlbmVyKCdvbmxpbmUnLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl90cnlBZGRDdXN0b21FdmVudCgnYnJvd3NlciBvbmxpbmUnLCB7fSlcbiAgICAgICAgfSlcblxuICAgICAgICBpZiAoIXRoaXMuaW5zdGFuY2Uuc2Vzc2lvbk1hbmFnZXIpIHtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcihMT0dHRVJfUFJFRklYICsgJyBzdGFydGVkIHdpdGhvdXQgdmFsaWQgc2Vzc2lvbk1hbmFnZXInKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKExPR0dFUl9QUkVGSVggKyAnIHN0YXJ0ZWQgd2l0aG91dCB2YWxpZCBzZXNzaW9uTWFuYWdlci4gVGhpcyBpcyBhIGJ1Zy4nKVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5idWZmZXIgPSB0aGlzLmNsZWFyQnVmZmVyKClcbiAgICB9XG5cbiAgICBzdGFydFJlY29yZGluZ0lmRW5hYmxlZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNSZWNvcmRpbmdFbmFibGVkKSB7XG4gICAgICAgICAgICB0aGlzLl9zdGFydENhcHR1cmUoKVxuICAgICAgICAgICAgbG9nZ2VyLmluZm8oTE9HR0VSX1BSRUZJWCArICcgc3RhcnRlZCcpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnN0b3BSZWNvcmRpbmcoKVxuICAgICAgICAgICAgdGhpcy5jbGVhckJ1ZmZlcigpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzdG9wUmVjb3JkaW5nKCkge1xuICAgICAgICBpZiAodGhpcy5fY2FwdHVyZVN0YXJ0ZWQgJiYgdGhpcy5zdG9wUnJ3ZWIpIHtcbiAgICAgICAgICAgIHRoaXMuc3RvcFJyd2ViKClcbiAgICAgICAgICAgIHRoaXMuc3RvcFJyd2ViID0gdW5kZWZpbmVkXG4gICAgICAgICAgICB0aGlzLl9jYXB0dXJlU3RhcnRlZCA9IGZhbHNlXG4gICAgICAgICAgICBsb2dnZXIuaW5mbyhMT0dHRVJfUFJFRklYICsgJyBzdG9wcGVkJylcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgbWFrZVNhbXBsaW5nRGVjaXNpb24oc2Vzc2lvbklkOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgY29uc3Qgc2Vzc2lvbklkQ2hhbmdlZCA9IHRoaXMuc2Vzc2lvbklkICE9PSBzZXNzaW9uSWRcblxuICAgICAgICBpZiAoIV9pc051bWJlcih0aGlzLl9zYW1wbGVSYXRlKSkge1xuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZS5wZXJzaXN0ZW5jZT8ucmVnaXN0ZXIoe1xuICAgICAgICAgICAgICAgIFtTRVNTSU9OX1JFQ09SRElOR19JU19TQU1QTEVEXTogbnVsbCxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHN0b3JlZElzU2FtcGxlZCA9IHRoaXMuaXNTYW1wbGVkXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGlmIHdlIGdldCB0aGlzIGZhciB0aGVuIHdlIHNob3VsZCBtYWtlIGEgc2FtcGxpbmcgZGVjaXNpb24uXG4gICAgICAgICAqIFdoZW4gdGhlIHNlc3Npb24gaWQgY2hhbmdlcyBvciB0aGVyZSBpcyBubyBzdG9yZWQgc2FtcGxpbmcgZGVjaXNpb24gZm9yIHRoaXMgc2Vzc2lvbiBpZFxuICAgICAgICAgKiB0aGVuIHdlIHNob3VsZCBtYWtlIGEgbmV3IGRlY2lzaW9uLlxuICAgICAgICAgKlxuICAgICAgICAgKiBPdGhlcndpc2UsIHdlIHNob3VsZCB1c2UgdGhlIHN0b3JlZCBkZWNpc2lvbi5cbiAgICAgICAgICovXG4gICAgICAgIGxldCBzaG91bGRTYW1wbGU6IGJvb2xlYW5cbiAgICAgICAgaWYgKHNlc3Npb25JZENoYW5nZWQgfHwgIV9pc0Jvb2xlYW4oc3RvcmVkSXNTYW1wbGVkKSkge1xuICAgICAgICAgICAgY29uc3QgcmFuZG9tTnVtYmVyID0gTWF0aC5yYW5kb20oKVxuICAgICAgICAgICAgc2hvdWxkU2FtcGxlID0gcmFuZG9tTnVtYmVyIDwgdGhpcy5fc2FtcGxlUmF0ZVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2hvdWxkU2FtcGxlID0gc3RvcmVkSXNTYW1wbGVkXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXNob3VsZFNhbXBsZSkge1xuICAgICAgICAgICAgbG9nZ2VyLndhcm4oXG4gICAgICAgICAgICAgICAgTE9HR0VSX1BSRUZJWCArXG4gICAgICAgICAgICAgICAgICAgIGAgU2FtcGxlIHJhdGUgKCR7dGhpcy5fc2FtcGxlUmF0ZX0pIGhhcyBkZXRlcm1pbmVkIHRoYXQgdGhpcyBzZXNzaW9uSWQgKCR7c2Vzc2lvbklkfSkgd2lsbCBub3QgYmUgc2VudCB0byB0aGUgc2VydmVyLmBcbiAgICAgICAgICAgIClcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuaW5zdGFuY2UucGVyc2lzdGVuY2U/LnJlZ2lzdGVyKHtcbiAgICAgICAgICAgIFtTRVNTSU9OX1JFQ09SRElOR19JU19TQU1QTEVEXTogc2hvdWxkU2FtcGxlLFxuICAgICAgICB9KVxuICAgIH1cblxuICAgIGFmdGVyRGVjaWRlUmVzcG9uc2UocmVzcG9uc2U6IERlY2lkZVJlc3BvbnNlKSB7XG4gICAgICAgIGlmICh0aGlzLmluc3RhbmNlLnBlcnNpc3RlbmNlKSB7XG4gICAgICAgICAgICB0aGlzLmluc3RhbmNlLnBlcnNpc3RlbmNlLnJlZ2lzdGVyKHtcbiAgICAgICAgICAgICAgICBbU0VTU0lPTl9SRUNPUkRJTkdfRU5BQkxFRF9TRVJWRVJfU0lERV06ICEhcmVzcG9uc2VbJ3Nlc3Npb25SZWNvcmRpbmcnXSxcbiAgICAgICAgICAgICAgICBbQ09OU09MRV9MT0dfUkVDT1JESU5HX0VOQUJMRURfU0VSVkVSX1NJREVdOiByZXNwb25zZS5zZXNzaW9uUmVjb3JkaW5nPy5jb25zb2xlTG9nUmVjb3JkaW5nRW5hYmxlZCxcbiAgICAgICAgICAgICAgICBbU0VTU0lPTl9SRUNPUkRJTkdfUkVDT1JERVJfVkVSU0lPTl9TRVJWRVJfU0lERV06IHJlc3BvbnNlLnNlc3Npb25SZWNvcmRpbmc/LnJlY29yZGVyVmVyc2lvbixcbiAgICAgICAgICAgICAgICBbU0VTU0lPTl9SRUNPUkRJTkdfTkVUV09SS19QQVlMT0FEX0NBUFRVUkVdOiB7XG4gICAgICAgICAgICAgICAgICAgIGNhcHR1cmVQZXJmb3JtYW5jZTogcmVzcG9uc2UuY2FwdHVyZVBlcmZvcm1hbmNlLFxuICAgICAgICAgICAgICAgICAgICAuLi5yZXNwb25zZS5zZXNzaW9uUmVjb3JkaW5nPy5uZXR3b3JrUGF5bG9hZENhcHR1cmUsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBbU0VTU0lPTl9SRUNPUkRJTkdfQ0FOVkFTX1JFQ09SRElOR106IHtcbiAgICAgICAgICAgICAgICAgICAgZW5hYmxlZDogcmVzcG9uc2Uuc2Vzc2lvblJlY29yZGluZz8ucmVjb3JkQ2FudmFzLFxuICAgICAgICAgICAgICAgICAgICBmcHM6IHJlc3BvbnNlLnNlc3Npb25SZWNvcmRpbmc/LmNhbnZhc0ZwcyxcbiAgICAgICAgICAgICAgICAgICAgcXVhbGl0eTogcmVzcG9uc2Uuc2Vzc2lvblJlY29yZGluZz8uY2FudmFzUXVhbGl0eSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHJlY2VpdmVkU2FtcGxlUmF0ZSA9IHJlc3BvbnNlLnNlc3Npb25SZWNvcmRpbmc/LnNhbXBsZVJhdGVcbiAgICAgICAgdGhpcy5fc2FtcGxlUmF0ZSA9IF9pc051bGxpc2gocmVjZWl2ZWRTYW1wbGVSYXRlKSA/IG51bGwgOiBwYXJzZUZsb2F0KHJlY2VpdmVkU2FtcGxlUmF0ZSlcblxuICAgICAgICBjb25zdCByZWNlaXZlZE1pbmltdW1EdXJhdGlvbiA9IHJlc3BvbnNlLnNlc3Npb25SZWNvcmRpbmc/Lm1pbmltdW1EdXJhdGlvbk1pbGxpc2Vjb25kc1xuICAgICAgICB0aGlzLl9taW5pbXVtRHVyYXRpb24gPSBfaXNVbmRlZmluZWQocmVjZWl2ZWRNaW5pbXVtRHVyYXRpb24pID8gbnVsbCA6IHJlY2VpdmVkTWluaW11bUR1cmF0aW9uXG5cbiAgICAgICAgdGhpcy5fbGlua2VkRmxhZyA9IHJlc3BvbnNlLnNlc3Npb25SZWNvcmRpbmc/LmxpbmtlZEZsYWcgfHwgbnVsbFxuXG4gICAgICAgIGlmIChyZXNwb25zZS5zZXNzaW9uUmVjb3JkaW5nPy5lbmRwb2ludCkge1xuICAgICAgICAgICAgdGhpcy5fZW5kcG9pbnQgPSByZXNwb25zZS5zZXNzaW9uUmVjb3JkaW5nPy5lbmRwb2ludFxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKF9pc051bWJlcih0aGlzLl9zYW1wbGVSYXRlKSkge1xuICAgICAgICAgICAgdGhpcy5zZXNzaW9uTWFuYWdlci5vblNlc3Npb25JZCgoc2Vzc2lvbklkKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5tYWtlU2FtcGxpbmdEZWNpc2lvbihzZXNzaW9uSWQpXG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFfaXNOdWxsaXNoKHRoaXMuX2xpbmtlZEZsYWcpKSB7XG4gICAgICAgICAgICBjb25zdCBsaW5rZWRGbGFnID0gX2lzU3RyaW5nKHRoaXMuX2xpbmtlZEZsYWcpID8gdGhpcy5fbGlua2VkRmxhZyA6IHRoaXMuX2xpbmtlZEZsYWc/LmZsYWdcbiAgICAgICAgICAgIGNvbnN0IGxpbmtlZFZhcmlhbnQgPSBfaXNTdHJpbmcodGhpcy5fbGlua2VkRmxhZykgPyBudWxsIDogdGhpcy5fbGlua2VkRmxhZz8udmFyaWFudFxuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZS5vbkZlYXR1cmVGbGFncygoX2ZsYWdzLCB2YXJpYW50cykgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZsYWdJc1ByZXNlbnQgPSBfaXNPYmplY3QodmFyaWFudHMpICYmIGxpbmtlZEZsYWcgaW4gdmFyaWFudHNcbiAgICAgICAgICAgICAgICBjb25zdCBsaW5rZWRGbGFnTWF0Y2hlcyA9IGxpbmtlZFZhcmlhbnQgPyB2YXJpYW50c1tsaW5rZWRGbGFnXSA9PT0gbGlua2VkVmFyaWFudCA6IGZsYWdJc1ByZXNlbnRcbiAgICAgICAgICAgICAgICBpZiAobGlua2VkRmxhZ01hdGNoZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmluZm8oTE9HR0VSX1BSRUZJWCArICcgbGlua2VkIGZsYWcgbWF0Y2hlZCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmtlZEZsYWcsXG4gICAgICAgICAgICAgICAgICAgICAgICBsaW5rZWRWYXJpYW50LFxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLl9saW5rZWRGbGFnU2VlbiA9IGxpbmtlZEZsYWdNYXRjaGVzXG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5yZWNlaXZlZERlY2lkZSA9IHRydWVcbiAgICAgICAgdGhpcy5zdGFydFJlY29yZGluZ0lmRW5hYmxlZCgpXG4gICAgfVxuXG4gICAgbG9nKG1lc3NhZ2U6IHN0cmluZywgbGV2ZWw6ICdsb2cnIHwgJ3dhcm4nIHwgJ2Vycm9yJyA9ICdsb2cnKSB7XG4gICAgICAgIHRoaXMuaW5zdGFuY2Uuc2Vzc2lvblJlY29yZGluZz8ub25SUndlYkVtaXQoe1xuICAgICAgICAgICAgdHlwZTogNixcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICBwbHVnaW46ICdycndlYi9jb25zb2xlQDEnLFxuICAgICAgICAgICAgICAgIHBheWxvYWQ6IHtcbiAgICAgICAgICAgICAgICAgICAgbGV2ZWwsXG4gICAgICAgICAgICAgICAgICAgIHRyYWNlOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgLy8gRXZlbiB0aG91Z2ggaXQgaXMgYSBzdHJpbmcgd2Ugc3RyaW5naWZ5IGl0IGFzIHRoYXQncyB3aGF0IHJyd2ViIGV4cGVjdHNcbiAgICAgICAgICAgICAgICAgICAgcGF5bG9hZDogW0pTT04uc3RyaW5naWZ5KG1lc3NhZ2UpXSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogX3RpbWVzdGFtcCgpLFxuICAgICAgICB9KVxuICAgIH1cbiAgICBwcml2YXRlIF9zdGFydENhcHR1cmUoKSB7XG4gICAgICAgIGlmIChfaXNVbmRlZmluZWQoT2JqZWN0LmFzc2lnbikpIHtcbiAgICAgICAgICAgIC8vIEFjY29yZGluZyB0byB0aGUgcnJ3ZWIgZG9jcywgcnJ3ZWIgaXMgbm90IHN1cHBvcnRlZCBvbiBJRTExIGFuZCBiZWxvdzpcbiAgICAgICAgICAgIC8vIFwicnJ3ZWIgZG9lcyBub3Qgc3VwcG9ydCBJRTExIGFuZCBiZWxvdyBiZWNhdXNlIGl0IHVzZXMgdGhlIE11dGF0aW9uT2JzZXJ2ZXIgQVBJIHdoaWNoIHdhcyBzdXBwb3J0ZWQgYnkgdGhlc2UgYnJvd3NlcnMuXCJcbiAgICAgICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9ycndlYi1pby9ycndlYi9ibG9iL21hc3Rlci9ndWlkZS5tZCNjb21wYXRpYmlsaXR5LW5vdGVcbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAvLyBIb3dldmVyLCBNdXRhdGlvbk9ic2VydmVyIGRvZXMgZXhpc3Qgb24gSUUxMSwgaXQganVzdCBkb2Vzbid0IHdvcmsgd2VsbCBhbmQgZG9lcyBub3QgZGV0ZWN0IGFsbCBjaGFuZ2VzLlxuICAgICAgICAgICAgLy8gSW5zdGVhZCwgd2hlbiB3ZSBsb2FkIFwicmVjb3JkZXIuanNcIiwgdGhlIGZpcnN0IEpTIGVycm9yIGlzIGFib3V0IFwiT2JqZWN0LmFzc2lnblwiIGJlaW5nIHVuZGVmaW5lZC5cbiAgICAgICAgICAgIC8vIFRodXMgaW5zdGVhZCBvZiBNdXRhdGlvbk9ic2VydmVyLCB3ZSBsb29rIGZvciB0aGlzIGZ1bmN0aW9uIGFuZCBibG9jayByZWNvcmRpbmcgaWYgaXQncyB1bmRlZmluZWQuXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFdlIGRvIG5vdCBzd2l0Y2ggcmVjb3JkZXIgdmVyc2lvbnMgbWlkd2F5IHRocm91Z2ggYSByZWNvcmRpbmcuXG4gICAgICAgIC8vIGRvIG5vdCBzdGFydCBpZiBleHBsaWNpdGx5IGRpc2FibGVkIG9yIGlmIHRoZSB1c2VyIGhhcyBvcHRlZCBvdXRcbiAgICAgICAgaWYgKHRoaXMuX2NhcHR1cmVTdGFydGVkIHx8IHRoaXMuaW5zdGFuY2UuY29uZmlnLmRpc2FibGVfc2Vzc2lvbl9yZWNvcmRpbmcgfHwgdXNlck9wdGVkT3V0KHRoaXMuaW5zdGFuY2UpKSB7XG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX2NhcHR1cmVTdGFydGVkID0gdHJ1ZVxuICAgICAgICAvLyBXZSB3YW50IHRvIGVuc3VyZSB0aGUgc2Vzc2lvbk1hbmFnZXIgaXMgcmVzZXQgaWYgbmVjZXNzYXJ5IG9uIGxvYWQgb2YgdGhlIHJlY29yZGVyXG4gICAgICAgIHRoaXMuc2Vzc2lvbk1hbmFnZXIuY2hlY2tBbmRHZXRTZXNzaW9uQW5kV2luZG93SWQoKVxuXG4gICAgICAgIGNvbnN0IHJlY29yZGVySlMgPSB0aGlzLnJlY29yZGluZ1ZlcnNpb24gPT09ICd2MicgPyAncmVjb3JkZXItdjIuanMnIDogJ3JlY29yZGVyLmpzJ1xuXG4gICAgICAgIC8vIElmIHJlY29yZGVyLmpzIGlzIGFscmVhZHkgbG9hZGVkIChpZiBhcnJheS5mdWxsLmpzIHNuaXBwZXQgaXMgdXNlZCBvciBwb3N0aG9nLWpzL2Rpc3QvcmVjb3JkZXIgaXNcbiAgICAgICAgLy8gaW1wb3J0ZWQpIG9yIG1hdGNoZXMgdGhlIHJlcXVlc3RlZCByZWNvcmRlciB2ZXJzaW9uLCBkb24ndCBsb2FkIHNjcmlwdC4gT3RoZXJ3aXNlLCByZW1vdGVseSBpbXBvcnRcbiAgICAgICAgLy8gcmVjb3JkZXIuanMgZnJvbSBjZG4gc2luY2UgaXQgaGFzbid0IGJlZW4gbG9hZGVkLlxuICAgICAgICBpZiAodGhpcy5pbnN0YW5jZS5fX2xvYWRlZF9yZWNvcmRlcl92ZXJzaW9uICE9PSB0aGlzLnJlY29yZGluZ1ZlcnNpb24pIHtcbiAgICAgICAgICAgIGxvYWRTY3JpcHQoXG4gICAgICAgICAgICAgICAgdGhpcy5pbnN0YW5jZS5yZXF1ZXN0Um91dGVyLmVuZHBvaW50Rm9yKCdhc3NldHMnLCBgL3N0YXRpYy8ke3JlY29yZGVySlN9P3Y9JHtDb25maWcuTElCX1ZFUlNJT059YCksXG4gICAgICAgICAgICAgICAgKGVycikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbG9nZ2VyLmVycm9yKExPR0dFUl9QUkVGSVggKyBgIGNvdWxkIG5vdCBsb2FkICR7cmVjb3JkZXJKU31gLCBlcnIpXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9vblNjcmlwdExvYWRlZCgpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fb25TY3JpcHRMb2FkZWQoKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfaXNJbnRlcmFjdGl2ZUV2ZW50KGV2ZW50OiBldmVudFdpdGhUaW1lKSB7XG4gICAgICAgIHJldHVybiBldmVudC50eXBlID09PSBJTkNSRU1FTlRBTF9TTkFQU0hPVF9FVkVOVF9UWVBFICYmIEFDVElWRV9TT1VSQ0VTLmluZGV4T2YoZXZlbnQuZGF0YT8uc291cmNlKSAhPT0gLTFcbiAgICB9XG5cbiAgICBwcml2YXRlIF91cGRhdGVXaW5kb3dBbmRTZXNzaW9uSWRzKGV2ZW50OiBldmVudFdpdGhUaW1lKSB7XG4gICAgICAgIC8vIFNvbWUgcmVjb3JkaW5nIGV2ZW50cyBhcmUgdHJpZ2dlcmVkIGJ5IG5vbi11c2VyIGV2ZW50cyAoZS5nLiBcIlggbWludXRlcyBhZ29cIiB0ZXh0IHVwZGF0aW5nIG9uIHRoZSBzY3JlZW4pLlxuICAgICAgICAvLyBXZSBkb24ndCB3YW50IHRvIGV4dGVuZCB0aGUgc2Vzc2lvbiBvciB0cmlnZ2VyIGEgbmV3IHNlc3Npb24gaW4gdGhlc2UgY2FzZXMuIFRoZXNlIGV2ZW50cyBhcmUgZGVzaWduYXRlZCBieSBldmVudFxuICAgICAgICAvLyB0eXBlIC0+IGluY3JlbWVudGFsIHVwZGF0ZSwgYW5kIHNvdXJjZSAtPiBtdXRhdGlvbi5cblxuICAgICAgICBjb25zdCBpc1VzZXJJbnRlcmFjdGlvbiA9IHRoaXMuX2lzSW50ZXJhY3RpdmVFdmVudChldmVudClcblxuICAgICAgICBpZiAoIWlzVXNlckludGVyYWN0aW9uICYmICF0aGlzLmlzSWRsZSkge1xuICAgICAgICAgICAgLy8gV2UgY2hlY2sgaWYgdGhlIGxhc3RBY3Rpdml0eVRpbWVzdGFtcCBpcyBvbGQgZW5vdWdoIHRvIGdvIGlkbGVcbiAgICAgICAgICAgIGlmIChldmVudC50aW1lc3RhbXAgLSB0aGlzLl9sYXN0QWN0aXZpdHlUaW1lc3RhbXAgPiBSRUNPUkRJTkdfSURMRV9BQ1RJVklUWV9USU1FT1VUX01TKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pc0lkbGUgPSB0cnVlXG4gICAgICAgICAgICAgICAgdGhpcy5fdHJ5QWRkQ3VzdG9tRXZlbnQoJ3Nlc3Npb25JZGxlJywge1xuICAgICAgICAgICAgICAgICAgICByZWFzb246ICd1c2VyIGluYWN0aXZpdHknLFxuICAgICAgICAgICAgICAgICAgICB0aW1lU2luY2VMYXN0QWN0aXZlOiBldmVudC50aW1lc3RhbXAgLSB0aGlzLl9sYXN0QWN0aXZpdHlUaW1lc3RhbXAsXG4gICAgICAgICAgICAgICAgICAgIHRocmVzaG9sZDogUkVDT1JESU5HX0lETEVfQUNUSVZJVFlfVElNRU9VVF9NUyxcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHJldHVybmluZ0Zyb21JZGxlID0gZmFsc2VcbiAgICAgICAgaWYgKGlzVXNlckludGVyYWN0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLl9sYXN0QWN0aXZpdHlUaW1lc3RhbXAgPSBldmVudC50aW1lc3RhbXBcbiAgICAgICAgICAgIGlmICh0aGlzLmlzSWRsZSkge1xuICAgICAgICAgICAgICAgIC8vIFJlbW92ZSB0aGUgaWRsZSBzdGF0ZSBpZiBzZXQgYW5kIHRyaWdnZXIgYSBmdWxsIHNuYXBzaG90IGFzIHdlIHdpbGwgaGF2ZSBpZ25vcmVkIHByZXZpb3VzIG11dGF0aW9uc1xuICAgICAgICAgICAgICAgIHRoaXMuaXNJZGxlID0gZmFsc2VcbiAgICAgICAgICAgICAgICB0aGlzLl90cnlBZGRDdXN0b21FdmVudCgnc2Vzc2lvbk5vTG9uZ2VySWRsZScsIHtcbiAgICAgICAgICAgICAgICAgICAgcmVhc29uOiAndXNlciBhY3Rpdml0eScsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IGV2ZW50LnR5cGUsXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICByZXR1cm5pbmdGcm9tSWRsZSA9IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmlzSWRsZSkge1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cblxuICAgICAgICAvLyBXZSBvbmx5IHdhbnQgdG8gZXh0ZW5kIHRoZSBzZXNzaW9uIGlmIGl0IGlzIGFuIGludGVyYWN0aXZlIGV2ZW50LlxuICAgICAgICBjb25zdCB7IHdpbmRvd0lkLCBzZXNzaW9uSWQgfSA9IHRoaXMuc2Vzc2lvbk1hbmFnZXIuY2hlY2tBbmRHZXRTZXNzaW9uQW5kV2luZG93SWQoXG4gICAgICAgICAgICAhaXNVc2VySW50ZXJhY3Rpb24sXG4gICAgICAgICAgICBldmVudC50aW1lc3RhbXBcbiAgICAgICAgKVxuXG4gICAgICAgIGNvbnN0IHNlc3Npb25JZENoYW5nZWQgPSB0aGlzLnNlc3Npb25JZCAhPT0gc2Vzc2lvbklkXG4gICAgICAgIGNvbnN0IHdpbmRvd0lkQ2hhbmdlZCA9IHRoaXMud2luZG93SWQgIT09IHdpbmRvd0lkXG5cbiAgICAgICAgdGhpcy53aW5kb3dJZCA9IHdpbmRvd0lkXG4gICAgICAgIHRoaXMuc2Vzc2lvbklkID0gc2Vzc2lvbklkXG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgcmV0dXJuaW5nRnJvbUlkbGUgfHxcbiAgICAgICAgICAgIChbRlVMTF9TTkFQU0hPVF9FVkVOVF9UWVBFLCBNRVRBX0VWRU5UX1RZUEVdLmluZGV4T2YoZXZlbnQudHlwZSkgPT09IC0xICYmXG4gICAgICAgICAgICAgICAgKHdpbmRvd0lkQ2hhbmdlZCB8fCBzZXNzaW9uSWRDaGFuZ2VkKSlcbiAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzLl90cnlUYWtlRnVsbFNuYXBzaG90KClcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgX3RyeVJSV2ViTWV0aG9kKHF1ZXVlZFJSV2ViRXZlbnQ6IFF1ZXVlZFJSV2ViRXZlbnQpOiBib29sZWFuIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHF1ZXVlZFJSV2ViRXZlbnQucnJ3ZWJNZXRob2QoKVxuICAgICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgLy8gU29tZXRpbWVzIGEgcmFjZSBjYW4gb2NjdXIgd2hlcmUgdGhlIHJlY29yZGVyIGlzIG5vdCBmdWxseSBzdGFydGVkIHlldFxuICAgICAgICAgICAgbG9nZ2VyLndhcm4oTE9HR0VSX1BSRUZJWCArICcgY291bGQgbm90IGVtaXQgcXVldWVkIHJyd2ViIGV2ZW50LicsIGUpXG4gICAgICAgICAgICB0aGlzLnF1ZXVlZFJSV2ViRXZlbnRzLmxlbmd0aCA8IDEwICYmXG4gICAgICAgICAgICAgICAgdGhpcy5xdWV1ZWRSUldlYkV2ZW50cy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgZW5xdWV1ZWRBdDogcXVldWVkUlJXZWJFdmVudC5lbnF1ZXVlZEF0IHx8IERhdGUubm93KCksXG4gICAgICAgICAgICAgICAgICAgIGF0dGVtcHQ6IHF1ZXVlZFJSV2ViRXZlbnQuYXR0ZW1wdCsrLFxuICAgICAgICAgICAgICAgICAgICBycndlYk1ldGhvZDogcXVldWVkUlJXZWJFdmVudC5ycndlYk1ldGhvZCxcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIF90cnlBZGRDdXN0b21FdmVudCh0YWc6IHN0cmluZywgcGF5bG9hZDogYW55KTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLl90cnlSUldlYk1ldGhvZChuZXdRdWV1ZWRFdmVudCgoKSA9PiB0aGlzLnJyd2ViUmVjb3JkIS5hZGRDdXN0b21FdmVudCh0YWcsIHBheWxvYWQpKSlcbiAgICB9XG5cbiAgICBwcml2YXRlIF90cnlUYWtlRnVsbFNuYXBzaG90KCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fdHJ5UlJXZWJNZXRob2QobmV3UXVldWVkRXZlbnQoKCkgPT4gdGhpcy5ycndlYlJlY29yZCEudGFrZUZ1bGxTbmFwc2hvdCgpKSlcbiAgICB9XG5cbiAgICBwcml2YXRlIF9vblNjcmlwdExvYWRlZCgpIHtcbiAgICAgICAgLy8gcnJ3ZWIgY29uZmlnIGluZm86IGh0dHBzOi8vZ2l0aHViLmNvbS9ycndlYi1pby9ycndlYi9ibG9iLzdkNWQwMDMzMjU4ZDZjMjk1OTlmYjA4NDEyMjAyZDlhMmM3Yjk0MTMvc3JjL3JlY29yZC9pbmRleC50cyNMMjhcbiAgICAgICAgY29uc3Qgc2Vzc2lvblJlY29yZGluZ09wdGlvbnM6IHJlY29yZE9wdGlvbnM8ZXZlbnRXaXRoVGltZT4gPSB7XG4gICAgICAgICAgICAvLyBzZWxlY3Qgc2V0IG9mIHJyd2ViIGNvbmZpZyBvcHRpb25zIHdlIGV4cG9zZSB0byBvdXIgdXNlcnNcbiAgICAgICAgICAgIC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vcnJ3ZWItaW8vcnJ3ZWIvYmxvYi9tYXN0ZXIvZ3VpZGUubWRcbiAgICAgICAgICAgIGJsb2NrQ2xhc3M6ICdwaC1uby1jYXB0dXJlJyxcbiAgICAgICAgICAgIGJsb2NrU2VsZWN0b3I6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGlnbm9yZUNsYXNzOiAncGgtaWdub3JlLWlucHV0JyxcbiAgICAgICAgICAgIG1hc2tUZXh0Q2xhc3M6ICdwaC1tYXNrJyxcbiAgICAgICAgICAgIG1hc2tUZXh0U2VsZWN0b3I6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIG1hc2tUZXh0Rm46IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIG1hc2tBbGxJbnB1dHM6IHRydWUsXG4gICAgICAgICAgICBtYXNrSW5wdXRPcHRpb25zOiB7fSxcbiAgICAgICAgICAgIG1hc2tJbnB1dEZuOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBzbGltRE9NT3B0aW9uczoge30sXG4gICAgICAgICAgICBjb2xsZWN0Rm9udHM6IGZhbHNlLFxuICAgICAgICAgICAgaW5saW5lU3R5bGVzaGVldDogdHJ1ZSxcbiAgICAgICAgICAgIHJlY29yZENyb3NzT3JpZ2luSWZyYW1lczogZmFsc2UsXG4gICAgICAgIH1cbiAgICAgICAgLy8gV2Ugc3dpdGNoZWQgZnJvbSBsb2FkaW5nIGFsbCBvZiBycndlYiB0byBqdXN0IHRoZSByZWNvcmQgcGFydCwgYnV0XG4gICAgICAgIC8vIGtlZXAgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkgaWYgc29tZW9uZSBoYXNuJ3QgdXBncmFkZWQgUG9zdEhvZ1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2Jhbi10cy1jb21tZW50XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgdGhpcy5ycndlYlJlY29yZCA9IHdpbmRvdy5ycndlYiA/IHdpbmRvdy5ycndlYi5yZWNvcmQgOiB3aW5kb3cucnJ3ZWJSZWNvcmRcblxuICAgICAgICAvLyBvbmx5IGFsbG93cyB1c2VyIHRvIHNldCBvdXIgYWxsb3ctbGlzdGVkIG9wdGlvbnNcbiAgICAgICAgY29uc3QgdXNlclNlc3Npb25SZWNvcmRpbmdPcHRpb25zID0gdGhpcy5pbnN0YW5jZS5jb25maWcuc2Vzc2lvbl9yZWNvcmRpbmdcbiAgICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXModXNlclNlc3Npb25SZWNvcmRpbmdPcHRpb25zIHx8IHt9KSkge1xuICAgICAgICAgICAgaWYgKGtleSBpbiBzZXNzaW9uUmVjb3JkaW5nT3B0aW9ucykge1xuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvYmFuLXRzLWNvbW1lbnRcbiAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICAgICAgc2Vzc2lvblJlY29yZGluZ09wdGlvbnNba2V5XSA9IHZhbHVlXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5jYW52YXNSZWNvcmRpbmcgJiYgdGhpcy5jYW52YXNSZWNvcmRpbmcuZW5hYmxlZCkge1xuICAgICAgICAgICAgc2Vzc2lvblJlY29yZGluZ09wdGlvbnMucmVjb3JkQ2FudmFzID0gdHJ1ZVxuICAgICAgICAgICAgc2Vzc2lvblJlY29yZGluZ09wdGlvbnMuc2FtcGxpbmcgPSB7IGNhbnZhczogdGhpcy5jYW52YXNSZWNvcmRpbmcuZnBzIH1cbiAgICAgICAgICAgIHNlc3Npb25SZWNvcmRpbmdPcHRpb25zLmRhdGFVUkxPcHRpb25zID0geyB0eXBlOiAnaW1hZ2Uvd2VicCcsIHF1YWxpdHk6IHRoaXMuY2FudmFzUmVjb3JkaW5nLnF1YWxpdHkgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aGlzLnJyd2ViUmVjb3JkKSB7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoXG4gICAgICAgICAgICAgICAgTE9HR0VSX1BSRUZJWCArXG4gICAgICAgICAgICAgICAgICAgICdvblNjcmlwdExvYWRlZCB3YXMgY2FsbGVkIGJ1dCBycndlYlJlY29yZCBpcyBub3QgYXZhaWxhYmxlLiBUaGlzIGluZGljYXRlcyBzb21ldGhpbmcgaGFzIGdvbmUgd3JvbmcuJ1xuICAgICAgICAgICAgKVxuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLm11dGF0aW9uUmF0ZUxpbWl0ZXIgPVxuICAgICAgICAgICAgdGhpcy5tdXRhdGlvblJhdGVMaW1pdGVyID8/XG4gICAgICAgICAgICBuZXcgTXV0YXRpb25SYXRlTGltaXRlcih0aGlzLnJyd2ViUmVjb3JkLCB7XG4gICAgICAgICAgICAgICAgb25CbG9ja2VkTm9kZTogKGlkLCBub2RlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBgVG9vIG1hbnkgbXV0YXRpb25zIG9uIG5vZGUgJyR7aWR9Jy4gUmF0ZSBsaW1pdGluZy4gVGhpcyBjb3VsZCBiZSBkdWUgdG8gU1ZHIGFuaW1hdGlvbnMgb3Igc29tZXRoaW5nIHNpbWlsYXJgXG4gICAgICAgICAgICAgICAgICAgIGxvZ2dlci5pbmZvKG1lc3NhZ2UsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGU6IG5vZGUsXG4gICAgICAgICAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2coTE9HR0VSX1BSRUZJWCArICcgJyArIG1lc3NhZ2UsICd3YXJuJylcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSlcblxuICAgICAgICAvLyBycndlYiB0YWtlcyBhIHNuYXBzaG90IG9uIGluaXRpYWxpemF0aW9uLFxuICAgICAgICAvLyB3ZSB3YW50IHRvIHRha2Ugb25lIGluIGZpdmUgbWludXRlc1xuICAgICAgICAvLyBpZiBub3RoaW5nIGVsc2UgaGFwcGVucyB0byByZXNldCB0aGUgdGltZXJcbiAgICAgICAgdGhpcy5fc2NoZWR1bGVGdWxsU25hcHNob3QoKVxuXG4gICAgICAgIGNvbnN0IGFjdGl2ZVBsdWdpbnMgPSB0aGlzLl9nYXRoZXJSUldlYlBsdWdpbnMoKVxuICAgICAgICB0aGlzLnN0b3BScndlYiA9IHRoaXMucnJ3ZWJSZWNvcmQoe1xuICAgICAgICAgICAgZW1pdDogKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5vblJSd2ViRW1pdChldmVudClcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwbHVnaW5zOiBhY3RpdmVQbHVnaW5zLFxuICAgICAgICAgICAgLi4uc2Vzc2lvblJlY29yZGluZ09wdGlvbnMsXG4gICAgICAgIH0pXG5cbiAgICAgICAgLy8gOlRSSUNLWTogcnJ3ZWIgZG9lcyBub3QgY2FwdHVyZSBuYXZpZ2F0aW9uIHdpdGhpbiBTUEEtcywgc28gaG9vayBpbnRvIG91ciAkcGFnZXZpZXcgZXZlbnRzIHRvIGdldCBhY2Nlc3MgdG8gYWxsIGV2ZW50cy5cbiAgICAgICAgLy8gICBEcm9wcGluZyB0aGUgaW5pdGlhbCBldmVudCBpcyBmaW5lIChpdCdzIGFsd2F5cyBjYXB0dXJlZCBieSBycndlYikuXG4gICAgICAgIHRoaXMuaW5zdGFuY2UuX2FkZENhcHR1cmVIb29rKChldmVudE5hbWUpID0+IHtcbiAgICAgICAgICAgIC8vIElmIGFueXRoaW5nIGNvdWxkIGdvIHdyb25nIGhlcmUgaXQgaGFzIHRoZSBwb3RlbnRpYWwgdG8gYmxvY2sgdGhlIG1haW4gbG9vcCxcbiAgICAgICAgICAgIC8vIHNvIHdlIGNhdGNoIGFsbCBlcnJvcnMuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmIChldmVudE5hbWUgPT09ICckcGFnZXZpZXcnKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGhyZWYgPSB3aW5kb3cgPyB0aGlzLl9tYXNrVXJsKHdpbmRvdy5sb2NhdGlvbi5ocmVmKSA6ICcnXG4gICAgICAgICAgICAgICAgICAgIGlmICghaHJlZikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fdHJ5QWRkQ3VzdG9tRXZlbnQoJyRwYWdldmlldycsIHsgaHJlZiB9KVxuICAgICAgICAgICAgICAgICAgICB0aGlzLl90cnlUYWtlRnVsbFNuYXBzaG90KClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdDb3VsZCBub3QgYWRkICRwYWdldmlldyB0byBycndlYiBzZXNzaW9uJywgZSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcblxuICAgICAgICAvLyBXZSByZXNldCB0aGUgbGFzdCBhY3Rpdml0eSB0aW1lc3RhbXAsIHJlc2V0dGluZyB0aGUgaWRsZSB0aW1lclxuICAgICAgICB0aGlzLl9sYXN0QWN0aXZpdHlUaW1lc3RhbXAgPSBEYXRlLm5vdygpXG4gICAgICAgIHRoaXMuaXNJZGxlID0gZmFsc2VcblxuICAgICAgICB0aGlzLl90cnlBZGRDdXN0b21FdmVudCgnJHNlc3Npb25fb3B0aW9ucycsIHtcbiAgICAgICAgICAgIHNlc3Npb25SZWNvcmRpbmdPcHRpb25zLFxuICAgICAgICAgICAgYWN0aXZlUGx1Z2luczogYWN0aXZlUGx1Z2lucy5tYXAoKHApID0+IHA/Lm5hbWUpLFxuICAgICAgICB9KVxuXG4gICAgICAgIHRoaXMuX3RyeUFkZEN1c3RvbUV2ZW50KCckcG9zdGhvZ19jb25maWcnLCB7XG4gICAgICAgICAgICBjb25maWc6IHRoaXMuaW5zdGFuY2UuY29uZmlnLFxuICAgICAgICB9KVxuICAgIH1cblxuICAgIHByaXZhdGUgX3NjaGVkdWxlRnVsbFNuYXBzaG90KCk6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy5fZnVsbFNuYXBzaG90VGltZXIpIHtcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5fZnVsbFNuYXBzaG90VGltZXIpXG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9mdWxsU25hcHNob3RUaW1lciA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX3RyeVRha2VGdWxsU25hcHNob3QoKVxuICAgICAgICB9LCBGSVZFX01JTlVURVMpIC8vIDUgbWludXRlc1xuICAgIH1cblxuICAgIHByaXZhdGUgX2dhdGhlclJSV2ViUGx1Z2lucygpIHtcbiAgICAgICAgY29uc3QgcGx1Z2luczogUmVjb3JkUGx1Z2luPHVua25vd24+W10gPSBbXVxuXG4gICAgICAgIGlmIChhc3NpZ25hYmxlV2luZG93LnJyd2ViQ29uc29sZVJlY29yZCAmJiB0aGlzLmlzQ29uc29sZUxvZ0NhcHR1cmVFbmFibGVkKSB7XG4gICAgICAgICAgICBwbHVnaW5zLnB1c2goYXNzaWduYWJsZVdpbmRvdy5ycndlYkNvbnNvbGVSZWNvcmQuZ2V0UmVjb3JkQ29uc29sZVBsdWdpbigpKVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMubmV0d29ya1BheWxvYWRDYXB0dXJlICYmIF9pc0Z1bmN0aW9uKGFzc2lnbmFibGVXaW5kb3cuZ2V0UmVjb3JkTmV0d29ya1BsdWdpbikpIHtcbiAgICAgICAgICAgIGNvbnN0IGNhblJlY29yZE5ldHdvcmsgPSAhaXNMb2NhbGhvc3QoKSB8fCB0aGlzLl9mb3JjZUFsbG93TG9jYWxob3N0TmV0d29ya0NhcHR1cmVcblxuICAgICAgICAgICAgaWYgKGNhblJlY29yZE5ldHdvcmspIHtcbiAgICAgICAgICAgICAgICBwbHVnaW5zLnB1c2goXG4gICAgICAgICAgICAgICAgICAgIGFzc2lnbmFibGVXaW5kb3cuZ2V0UmVjb3JkTmV0d29ya1BsdWdpbihcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1aWxkTmV0d29ya1JlcXVlc3RPcHRpb25zKHRoaXMuaW5zdGFuY2UuY29uZmlnLCB0aGlzLm5ldHdvcmtQYXlsb2FkQ2FwdHVyZSlcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmluZm8oTE9HR0VSX1BSRUZJWCArICcgTmV0d29ya0NhcHR1cmUgbm90IHN0YXJ0ZWQgYmVjYXVzZSB3ZSBhcmUgb24gbG9jYWxob3N0LicpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcGx1Z2luc1xuICAgIH1cblxuICAgIG9uUlJ3ZWJFbWl0KHJhd0V2ZW50OiBldmVudFdpdGhUaW1lKSB7XG4gICAgICAgIHRoaXMuX3Byb2Nlc3NRdWV1ZWRFdmVudHMoKVxuXG4gICAgICAgIGlmICghcmF3RXZlbnQgfHwgIV9pc09iamVjdChyYXdFdmVudCkpIHtcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHJhd0V2ZW50LnR5cGUgPT09IEV2ZW50VHlwZS5NZXRhKSB7XG4gICAgICAgICAgICBjb25zdCBocmVmID0gdGhpcy5fbWFza1VybChyYXdFdmVudC5kYXRhLmhyZWYpXG4gICAgICAgICAgICBpZiAoIWhyZWYpIHtcbiAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJhd0V2ZW50LmRhdGEuaHJlZiA9IGhyZWZcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChyYXdFdmVudC50eXBlID09PSBFdmVudFR5cGUuRnVsbFNuYXBzaG90KSB7XG4gICAgICAgICAgICAvLyB3ZSdyZSBwcm9jZXNzaW5nIGEgZnVsbCBzbmFwc2hvdCwgc28gd2Ugc2hvdWxkIHJlc2V0IHRoZSB0aW1lclxuICAgICAgICAgICAgdGhpcy5fc2NoZWR1bGVGdWxsU25hcHNob3QoKVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdGhyb3R0bGVkRXZlbnQgPSB0aGlzLm11dGF0aW9uUmF0ZUxpbWl0ZXJcbiAgICAgICAgICAgID8gdGhpcy5tdXRhdGlvblJhdGVMaW1pdGVyLnRocm90dGxlTXV0YXRpb25zKHJhd0V2ZW50KVxuICAgICAgICAgICAgOiByYXdFdmVudFxuXG4gICAgICAgIGlmICghdGhyb3R0bGVkRXZlbnQpIHtcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG5cbiAgICAgICAgLy8gVE9ETzogUmUtYWRkIGVuc3VyZU1heE1lc3NhZ2VTaXplIG9uY2Ugd2UgYXJlIGNvbmZpZGVudCBpbiBpdFxuICAgICAgICBjb25zdCBldmVudCA9IHRydW5jYXRlTGFyZ2VDb25zb2xlTG9ncyh0aHJvdHRsZWRFdmVudClcbiAgICAgICAgY29uc3Qgc2l6ZSA9IEpTT04uc3RyaW5naWZ5KGV2ZW50KS5sZW5ndGhcblxuICAgICAgICB0aGlzLl91cGRhdGVXaW5kb3dBbmRTZXNzaW9uSWRzKGV2ZW50KVxuXG4gICAgICAgIC8vIGFsbG93IGN1c3RvbSBldmVudHMgZXZlbiB3aGVuIGlkbGVcbiAgICAgICAgaWYgKHRoaXMuaXNJZGxlICYmIGV2ZW50LnR5cGUgIT09IEV2ZW50VHlwZS5DdXN0b20pIHtcbiAgICAgICAgICAgIC8vIFdoZW4gaW4gYW4gaWRsZSBzdGF0ZSB3ZSBrZWVwIHJlY29yZGluZywgYnV0IGRvbid0IGNhcHR1cmUgdGhlIGV2ZW50c1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBwcm9wZXJ0aWVzID0ge1xuICAgICAgICAgICAgJHNuYXBzaG90X2J5dGVzOiBzaXplLFxuICAgICAgICAgICAgJHNuYXBzaG90X2RhdGE6IGV2ZW50LFxuICAgICAgICAgICAgJHNlc3Npb25faWQ6IHRoaXMuc2Vzc2lvbklkLFxuICAgICAgICAgICAgJHdpbmRvd19pZDogdGhpcy53aW5kb3dJZCxcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnN0YXR1cyAhPT0gJ2Rpc2FibGVkJykge1xuICAgICAgICAgICAgdGhpcy5fY2FwdHVyZVNuYXBzaG90QnVmZmVyZWQocHJvcGVydGllcylcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuY2xlYXJCdWZmZXIoKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfcHJvY2Vzc1F1ZXVlZEV2ZW50cygpIHtcbiAgICAgICAgaWYgKHRoaXMucXVldWVkUlJXZWJFdmVudHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAvLyBpZiBycndlYiBpc24ndCByZWFkeSB0byBhY2NlcHQgZXZlbnRzIGVhcmxpZXIgdGhlbiB3ZSBxdWV1ZWQgdGhlbSB1cFxuICAgICAgICAgICAgLy8gbm93IHRoYXQgZW1pdCBoYXMgYmVlbiBjYWxsZWQgcnJ3ZWIgc2hvdWxkIGJlIHJlYWR5IHRvIGFjY2VwdCB0aGVtXG4gICAgICAgICAgICAvLyBzbywgYmVmb3JlIHdlIHByb2Nlc3MgdGhpcyBldmVudCwgd2UgdHJ5IG91ciBxdWV1ZWQgZXZlbnRzIF9vbmNlXyBlYWNoXG4gICAgICAgICAgICAvLyB3ZSBkb24ndCB3YW50IHRvIHJpc2sgcXVldWluZyBtb3JlIHRoaW5ncyBhbmQgbmV2ZXIgZXhpdGluZyB0aGlzIGxvb3AhXG4gICAgICAgICAgICAvLyBpZiB0aGV5IGZhaWwgaGVyZSwgdGhleSdsbCBiZSBwdXNoZWQgaW50byBhIG5ldyBxdWV1ZSxcbiAgICAgICAgICAgIC8vIGFuZCB0cmllZCBvbiB0aGUgbmV4dCBsb29wLlxuICAgICAgICAgICAgLy8gdGhlcmUgaXMgYSByaXNrIG9mIHRoaXMgcXVldWUgZ3Jvd2luZyBpbiBhbiB1bmNvbnRyb2xsZWQgbWFubmVyLFxuICAgICAgICAgICAgLy8gc28gaXRzIGxlbmd0aCBpcyBsaW1pdGVkIGVsc2V3aGVyZVxuICAgICAgICAgICAgLy8gZm9yIG5vdyB0aGlzIGlzIHRvIGhlbHAgdXMgZW5zdXJlIHdlIGNhbiBjYXB0dXJlIGV2ZW50cyB0aGF0IGhhcHBlblxuICAgICAgICAgICAgLy8gYW5kIHRyeSB0byBpZGVudGlmeSBtb3JlIGFib3V0IHdoZW4gaXQgaXMgZmFpbGluZ1xuICAgICAgICAgICAgY29uc3QgaXRlbXNUb1Byb2Nlc3MgPSBbLi4udGhpcy5xdWV1ZWRSUldlYkV2ZW50c11cbiAgICAgICAgICAgIHRoaXMucXVldWVkUlJXZWJFdmVudHMgPSBbXVxuICAgICAgICAgICAgaXRlbXNUb1Byb2Nlc3MuZm9yRWFjaCgocXVldWVkUlJXZWJFdmVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChEYXRlLm5vdygpIC0gcXVldWVkUlJXZWJFdmVudC5lbnF1ZXVlZEF0ID4gVFdPX1NFQ09ORFMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fdHJ5QWRkQ3VzdG9tRXZlbnQoJ3Jyd2ViUXVldWVUaW1lb3V0Jywge1xuICAgICAgICAgICAgICAgICAgICAgICAgZW5xdWV1ZWRBdDogcXVldWVkUlJXZWJFdmVudC5lbnF1ZXVlZEF0LFxuICAgICAgICAgICAgICAgICAgICAgICAgYXR0ZW1wdDogcXVldWVkUlJXZWJFdmVudC5hdHRlbXB0LFxuICAgICAgICAgICAgICAgICAgICAgICAgcXVldWVMZW5ndGg6IGl0ZW1zVG9Qcm9jZXNzLmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fdHJ5UlJXZWJNZXRob2QocXVldWVkUlJXZWJFdmVudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3RyeUFkZEN1c3RvbUV2ZW50KCdycndlYlF1ZXVlU3VjY2VzcycsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbnF1ZXVlZEF0OiBxdWV1ZWRSUldlYkV2ZW50LmVucXVldWVkQXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0ZW1wdDogcXVldWVkUlJXZWJFdmVudC5hdHRlbXB0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXVlTGVuZ3RoOiBpdGVtc1RvUHJvY2Vzcy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgX21hc2tVcmwodXJsOiBzdHJpbmcpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICAgICAgICBjb25zdCB1c2VyU2Vzc2lvblJlY29yZGluZ09wdGlvbnMgPSB0aGlzLmluc3RhbmNlLmNvbmZpZy5zZXNzaW9uX3JlY29yZGluZ1xuXG4gICAgICAgIGlmICh1c2VyU2Vzc2lvblJlY29yZGluZ09wdGlvbnMubWFza05ldHdvcmtSZXF1ZXN0Rm4pIHtcbiAgICAgICAgICAgIGxldCBuZXR3b3JrUmVxdWVzdDogTmV0d29ya1JlcXVlc3QgfCBudWxsIHwgdW5kZWZpbmVkID0ge1xuICAgICAgICAgICAgICAgIHVybCxcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gVE9ETyB3ZSBzaG91bGQgZGVwcmVjYXRlIHRoaXMgYW5kIHVzZSB0aGUgc2FtZSBmdW5jdGlvbiBmb3IgdGhpcyBtYXNraW5nIGFuZCB0aGUgcnJ3ZWIvbmV0d29yayBwbHVnaW5cbiAgICAgICAgICAgIC8vIFRPRE8gb3IgZGVwcmVjYXRlIHRoaXMgYW5kIHByb3ZpZGUgYSBuZXcgY2xlYXJlciBuYW1lIHNvIHRoaXMgd291bGQgYmUgYG1hc2tVUkxQZXJmb3JtYW5jZUZuYCBvciBzaW1pbGFyXG4gICAgICAgICAgICBuZXR3b3JrUmVxdWVzdCA9IHVzZXJTZXNzaW9uUmVjb3JkaW5nT3B0aW9ucy5tYXNrTmV0d29ya1JlcXVlc3RGbihuZXR3b3JrUmVxdWVzdClcblxuICAgICAgICAgICAgcmV0dXJuIG5ldHdvcmtSZXF1ZXN0Py51cmxcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB1cmxcbiAgICB9XG5cbiAgICBwcml2YXRlIGNsZWFyQnVmZmVyKCk6IFNuYXBzaG90QnVmZmVyIHtcbiAgICAgICAgdGhpcy5idWZmZXIgPSB1bmRlZmluZWRcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc2l6ZTogMCxcbiAgICAgICAgICAgIGRhdGE6IFtdLFxuICAgICAgICAgICAgc2Vzc2lvbklkOiB0aGlzLnNlc3Npb25JZCxcbiAgICAgICAgICAgIHdpbmRvd0lkOiB0aGlzLndpbmRvd0lkLFxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gdGhlIGludGVudGlvbiBpcyBhIGJ1ZmZlciB0aGF0IChjdXJyZW50bHkpIGlzIHVzZWQgb25seSBhZnRlciBhIGRlY2lkZSByZXNwb25zZSBlbmFibGVzIHNlc3Npb24gcmVjb3JkaW5nXG4gICAgLy8gaXQgaXMgY2FsbGVkIGV2ZXIgWCBzZWNvbmRzIHVzaW5nIHRoZSBmbHVzaEJ1ZmZlclRpbWVyIHNvIHRoYXQgd2UgZG9uJ3QgaGF2ZSB0byB3YWl0IGZvciB0aGUgYnVmZmVyIHRvIGZpbGwgdXBcbiAgICAvLyB3aGVuIGl0IGlzIGNhbGxlZCBvbiBhIHRpbWVyIGl0IGFzc3VtZXMgdGhhdCBpdCBjYW4gZGVmaW5pdGVseSBmbHVzaFxuICAgIC8vIGl0IGlzIGZsdXNoZWQgd2hlbiB0aGUgc2Vzc2lvbiBpZCBjaGFuZ2VzIG9yIHRoZSBzaXplIG9mIHRoZSBidWZmZXJlZCBkYXRhIGdldHMgdG9vIGdyZWF0ICgxbWIgYnkgZGVmYXVsdClcbiAgICAvLyBmaXJzdCBjaGFuZ2U6IGlmIHRoZSByZWNvcmRpbmcgaXMgaW4gYnVmZmVyaW5nIG1vZGUsXG4gICAgLy8gIGZsdXNoIGJ1ZmZlciBzaW1wbHkgcmVzZXRzIHRoZSB0aW1lciBhbmQgcmV0dXJucyB0aGUgZXhpc3RpbmcgZmx1c2ggYnVmZmVyXG4gICAgcHJpdmF0ZSBfZmx1c2hCdWZmZXIoKSB7XG4gICAgICAgIGlmICh0aGlzLmZsdXNoQnVmZmVyVGltZXIpIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmZsdXNoQnVmZmVyVGltZXIpXG4gICAgICAgICAgICB0aGlzLmZsdXNoQnVmZmVyVGltZXIgPSB1bmRlZmluZWRcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IG1pbmltdW1EdXJhdGlvbiA9IHRoaXMuX21pbmltdW1EdXJhdGlvblxuICAgICAgICBjb25zdCBzZXNzaW9uRHVyYXRpb24gPSB0aGlzLnNlc3Npb25EdXJhdGlvblxuICAgICAgICAvLyBpZiB3ZSBoYXZlIG9sZCBkYXRhIGluIHRoZSBidWZmZXIgYnV0IHRoZSBzZXNzaW9uIGhhcyByb3RhdGVkIHRoZW4gdGhlXG4gICAgICAgIC8vIHNlc3Npb24gZHVyYXRpb24gbWlnaHQgYmUgbmVnYXRpdmUsIGluIHRoYXQgY2FzZSB3ZSB3YW50IHRvIGZsdXNoIHRoZSBidWZmZXJcbiAgICAgICAgY29uc3QgaXNQb3NpdGl2ZVNlc3Npb25EdXJhdGlvbiA9IF9pc051bWJlcihzZXNzaW9uRHVyYXRpb24pICYmIHNlc3Npb25EdXJhdGlvbiA+PSAwXG4gICAgICAgIGNvbnN0IGlzQmVsb3dNaW5pbXVtRHVyYXRpb24gPVxuICAgICAgICAgICAgX2lzTnVtYmVyKG1pbmltdW1EdXJhdGlvbikgJiYgaXNQb3NpdGl2ZVNlc3Npb25EdXJhdGlvbiAmJiBzZXNzaW9uRHVyYXRpb24gPCBtaW5pbXVtRHVyYXRpb25cblxuICAgICAgICBpZiAodGhpcy5zdGF0dXMgPT09ICdidWZmZXJpbmcnIHx8IGlzQmVsb3dNaW5pbXVtRHVyYXRpb24pIHtcbiAgICAgICAgICAgIHRoaXMuZmx1c2hCdWZmZXJUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuX2ZsdXNoQnVmZmVyKClcbiAgICAgICAgICAgIH0sIFJFQ09SRElOR19CVUZGRVJfVElNRU9VVClcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmJ1ZmZlciB8fCB0aGlzLmNsZWFyQnVmZmVyKClcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmJ1ZmZlciAmJiB0aGlzLmJ1ZmZlci5kYXRhLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgdGhpcy5fY2FwdHVyZVNuYXBzaG90KHtcbiAgICAgICAgICAgICAgICAkc25hcHNob3RfYnl0ZXM6IHRoaXMuYnVmZmVyLnNpemUsXG4gICAgICAgICAgICAgICAgJHNuYXBzaG90X2RhdGE6IHRoaXMuYnVmZmVyLmRhdGEsXG4gICAgICAgICAgICAgICAgJHNlc3Npb25faWQ6IHRoaXMuYnVmZmVyLnNlc3Npb25JZCxcbiAgICAgICAgICAgICAgICAkd2luZG93X2lkOiB0aGlzLmJ1ZmZlci53aW5kb3dJZCxcbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNsZWFyQnVmZmVyKClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmJ1ZmZlciB8fCB0aGlzLmNsZWFyQnVmZmVyKClcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgX2NhcHR1cmVTbmFwc2hvdEJ1ZmZlcmVkKHByb3BlcnRpZXM6IFByb3BlcnRpZXMpIHtcbiAgICAgICAgY29uc3QgYWRkaXRpb25hbEJ5dGVzID0gMiArICh0aGlzLmJ1ZmZlcj8uZGF0YS5sZW5ndGggfHwgMCkgLy8gMiBieXRlcyBmb3IgdGhlIGFycmF5IGJyYWNrZXRzIGFuZCAxIGJ5dGUgZm9yIGVhY2ggY29tbWFcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgIXRoaXMuYnVmZmVyIHx8XG4gICAgICAgICAgICB0aGlzLmJ1ZmZlci5zaXplICsgcHJvcGVydGllcy4kc25hcHNob3RfYnl0ZXMgKyBhZGRpdGlvbmFsQnl0ZXMgPiBSRUNPUkRJTkdfTUFYX0VWRU5UX1NJWkUgfHxcbiAgICAgICAgICAgICghIXRoaXMuYnVmZmVyLnNlc3Npb25JZCAmJiB0aGlzLmJ1ZmZlci5zZXNzaW9uSWQgIT09IHRoaXMuc2Vzc2lvbklkKVxuICAgICAgICApIHtcbiAgICAgICAgICAgIHRoaXMuYnVmZmVyID0gdGhpcy5fZmx1c2hCdWZmZXIoKVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKF9pc051bGwodGhpcy5idWZmZXIuc2Vzc2lvbklkKSAmJiAhX2lzTnVsbCh0aGlzLnNlc3Npb25JZCkpIHtcbiAgICAgICAgICAgIC8vIHNlc3Npb24gaWQgc3RhcnRzIG51bGwgYnV0IGhhcyBub3cgYmVlbiBhc3NpZ25lZCwgdXBkYXRlIHRoZSBidWZmZXJcbiAgICAgICAgICAgIHRoaXMuYnVmZmVyLnNlc3Npb25JZCA9IHRoaXMuc2Vzc2lvbklkXG4gICAgICAgICAgICB0aGlzLmJ1ZmZlci53aW5kb3dJZCA9IHRoaXMud2luZG93SWRcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuYnVmZmVyLnNpemUgKz0gcHJvcGVydGllcy4kc25hcHNob3RfYnl0ZXNcbiAgICAgICAgdGhpcy5idWZmZXIuZGF0YS5wdXNoKHByb3BlcnRpZXMuJHNuYXBzaG90X2RhdGEpXG5cbiAgICAgICAgaWYgKCF0aGlzLmZsdXNoQnVmZmVyVGltZXIpIHtcbiAgICAgICAgICAgIHRoaXMuZmx1c2hCdWZmZXJUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuX2ZsdXNoQnVmZmVyKClcbiAgICAgICAgICAgIH0sIFJFQ09SRElOR19CVUZGRVJfVElNRU9VVClcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgX2NhcHR1cmVTbmFwc2hvdChwcm9wZXJ0aWVzOiBQcm9wZXJ0aWVzKSB7XG4gICAgICAgIC8vIDpUUklDS1k6IE1ha2Ugc3VyZSB3ZSBiYXRjaCB0aGVzZSByZXF1ZXN0cywgdXNlIGEgY3VzdG9tIGVuZHBvaW50IGFuZCBkb24ndCB0cnVuY2F0ZSB0aGUgc3RyaW5ncy5cbiAgICAgICAgdGhpcy5pbnN0YW5jZS5jYXB0dXJlKCckc25hcHNob3QnLCBwcm9wZXJ0aWVzLCB7XG4gICAgICAgICAgICBfdXJsOiB0aGlzLmluc3RhbmNlLnJlcXVlc3RSb3V0ZXIuZW5kcG9pbnRGb3IoJ2FwaScsIHRoaXMuX2VuZHBvaW50KSxcbiAgICAgICAgICAgIF9ub1RydW5jYXRlOiB0cnVlLFxuICAgICAgICAgICAgX2JhdGNoS2V5OiBTRVNTSU9OX1JFQ09SRElOR19CQVRDSF9LRVksXG4gICAgICAgIH0pXG4gICAgfVxufVxuIiwgImltcG9ydCB7IGF1dG9jYXB0dXJlIH0gZnJvbSAnLi9hdXRvY2FwdHVyZSdcbmltcG9ydCB7IGxvYWRTY3JpcHQgfSBmcm9tICcuL3V0aWxzJ1xuaW1wb3J0IHsgUG9zdEhvZyB9IGZyb20gJy4vcG9zdGhvZy1jb3JlJ1xuaW1wb3J0IHsgQ29tcHJlc3Npb24sIERlY2lkZVJlc3BvbnNlIH0gZnJvbSAnLi90eXBlcydcbmltcG9ydCB7IFNUT1JFRF9HUk9VUF9QUk9QRVJUSUVTX0tFWSwgU1RPUkVEX1BFUlNPTl9QUk9QRVJUSUVTX0tFWSB9IGZyb20gJy4vY29uc3RhbnRzJ1xuXG5pbXBvcnQgeyBfaXNVbmRlZmluZWQgfSBmcm9tICcuL3V0aWxzL3R5cGUtdXRpbHMnXG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tICcuL3V0aWxzL2xvZ2dlcidcbmltcG9ydCB7IHdpbmRvdywgZG9jdW1lbnQsIGFzc2lnbmFibGVXaW5kb3cgfSBmcm9tICcuL3V0aWxzL2dsb2JhbHMnXG5cbmV4cG9ydCBjbGFzcyBEZWNpZGUge1xuICAgIGluc3RhbmNlOiBQb3N0SG9nXG5cbiAgICBjb25zdHJ1Y3RvcihpbnN0YW5jZTogUG9zdEhvZykge1xuICAgICAgICB0aGlzLmluc3RhbmNlID0gaW5zdGFuY2VcbiAgICAgICAgLy8gZG9uJ3QgbmVlZCB0byB3YWl0IGZvciBgZGVjaWRlYCB0byByZXR1cm4gaWYgZmxhZ3Mgd2VyZSBwcm92aWRlZCBvbiBpbml0aWFsaXNhdGlvblxuICAgICAgICB0aGlzLmluc3RhbmNlLmRlY2lkZUVuZHBvaW50V2FzSGl0ID0gdGhpcy5pbnN0YW5jZS5faGFzQm9vdHN0cmFwcGVkRmVhdHVyZUZsYWdzKClcbiAgICB9XG5cbiAgICBjYWxsKCk6IHZvaWQge1xuICAgICAgICAvKlxuICAgICAgICBDYWxscyAvZGVjaWRlIGVuZHBvaW50IHRvIGZldGNoIG9wdGlvbnMgZm9yIGF1dG9jYXB0dXJlLCBzZXNzaW9uIHJlY29yZGluZywgZmVhdHVyZSBmbGFncyAmIGNvbXByZXNzaW9uLlxuICAgICAgICAqL1xuICAgICAgICBjb25zdCBkYXRhID0ge1xuICAgICAgICAgICAgdG9rZW46IHRoaXMuaW5zdGFuY2UuY29uZmlnLnRva2VuLFxuICAgICAgICAgICAgZGlzdGluY3RfaWQ6IHRoaXMuaW5zdGFuY2UuZ2V0X2Rpc3RpbmN0X2lkKCksXG4gICAgICAgICAgICBncm91cHM6IHRoaXMuaW5zdGFuY2UuZ2V0R3JvdXBzKCksXG4gICAgICAgICAgICBwZXJzb25fcHJvcGVydGllczogdGhpcy5pbnN0YW5jZS5nZXRfcHJvcGVydHkoU1RPUkVEX1BFUlNPTl9QUk9QRVJUSUVTX0tFWSksXG4gICAgICAgICAgICBncm91cF9wcm9wZXJ0aWVzOiB0aGlzLmluc3RhbmNlLmdldF9wcm9wZXJ0eShTVE9SRURfR1JPVVBfUFJPUEVSVElFU19LRVkpLFxuICAgICAgICAgICAgZGlzYWJsZV9mbGFnczpcbiAgICAgICAgICAgICAgICB0aGlzLmluc3RhbmNlLmNvbmZpZy5hZHZhbmNlZF9kaXNhYmxlX2ZlYXR1cmVfZmxhZ3MgfHxcbiAgICAgICAgICAgICAgICB0aGlzLmluc3RhbmNlLmNvbmZpZy5hZHZhbmNlZF9kaXNhYmxlX2ZlYXR1cmVfZmxhZ3Nfb25fZmlyc3RfbG9hZCB8fFxuICAgICAgICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuaW5zdGFuY2UuX3NlbmRfcmVxdWVzdCh7XG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgIHVybDogdGhpcy5pbnN0YW5jZS5yZXF1ZXN0Um91dGVyLmVuZHBvaW50Rm9yKCdhcGknLCAnL2RlY2lkZS8/dj0zJyksXG4gICAgICAgICAgICBkYXRhLFxuICAgICAgICAgICAgY29tcHJlc3Npb246IENvbXByZXNzaW9uLkJhc2U2NCxcbiAgICAgICAgICAgIHRpbWVvdXQ6IHRoaXMuaW5zdGFuY2UuY29uZmlnLmZlYXR1cmVfZmxhZ19yZXF1ZXN0X3RpbWVvdXRfbXMsXG4gICAgICAgICAgICBjYWxsYmFjazogKHJlc3BvbnNlKSA9PiB0aGlzLnBhcnNlRGVjaWRlUmVzcG9uc2UocmVzcG9uc2UuanNvbiBhcyBEZWNpZGVSZXNwb25zZSB8IHVuZGVmaW5lZCksXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgcGFyc2VEZWNpZGVSZXNwb25zZShyZXNwb25zZT86IERlY2lkZVJlc3BvbnNlKTogdm9pZCB7XG4gICAgICAgIHRoaXMuaW5zdGFuY2UuZmVhdHVyZUZsYWdzLnNldFJlbG9hZGluZ1BhdXNlZChmYWxzZSlcbiAgICAgICAgLy8gOlRSSUNLWTogUmVsb2FkIC0gc3RhcnQgYW5vdGhlciByZXF1ZXN0IGlmIHF1ZXVlZCFcbiAgICAgICAgdGhpcy5pbnN0YW5jZS5mZWF0dXJlRmxhZ3MuX3N0YXJ0UmVsb2FkVGltZXIoKVxuXG4gICAgICAgIGNvbnN0IGVycm9yc0xvYWRpbmcgPSAhcmVzcG9uc2VcblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICAhdGhpcy5pbnN0YW5jZS5jb25maWcuYWR2YW5jZWRfZGlzYWJsZV9mZWF0dXJlX2ZsYWdzX29uX2ZpcnN0X2xvYWQgJiZcbiAgICAgICAgICAgICF0aGlzLmluc3RhbmNlLmNvbmZpZy5hZHZhbmNlZF9kaXNhYmxlX2ZlYXR1cmVfZmxhZ3NcbiAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzLmluc3RhbmNlLmZlYXR1cmVGbGFncy5yZWNlaXZlZEZlYXR1cmVGbGFncyhyZXNwb25zZSA/PyB7fSwgZXJyb3JzTG9hZGluZylcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChlcnJvcnNMb2FkaW5nKSB7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ0ZhaWxlZCB0byBmZXRjaCBmZWF0dXJlIGZsYWdzIGZyb20gUG9zdEhvZy4nKVxuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgaWYgKCEoZG9jdW1lbnQgJiYgZG9jdW1lbnQuYm9keSkpIHtcbiAgICAgICAgICAgIGxvZ2dlci5pbmZvKCdkb2N1bWVudCBub3QgcmVhZHkgeWV0LCB0cnlpbmcgYWdhaW4gaW4gNTAwIG1pbGxpc2Vjb25kcy4uLicpXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcnNlRGVjaWRlUmVzcG9uc2UocmVzcG9uc2UpXG4gICAgICAgICAgICB9LCA1MDApXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuaW5zdGFuY2UudG9vbGJhci5hZnRlckRlY2lkZVJlc3BvbnNlKHJlc3BvbnNlKVxuICAgICAgICB0aGlzLmluc3RhbmNlLnNlc3Npb25SZWNvcmRpbmc/LmFmdGVyRGVjaWRlUmVzcG9uc2UocmVzcG9uc2UpXG4gICAgICAgIGF1dG9jYXB0dXJlLmFmdGVyRGVjaWRlUmVzcG9uc2UocmVzcG9uc2UsIHRoaXMuaW5zdGFuY2UpXG4gICAgICAgIHRoaXMuaW5zdGFuY2UuX2FmdGVyRGVjaWRlUmVzcG9uc2UocmVzcG9uc2UpXG5cbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9iYW4tdHMtY29tbWVudFxuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIGNvbnN0IHN1cnZleXNHZW5lcmF0b3IgPSB3aW5kb3c/LmV4dGVuZFBvc3RIb2dXaXRoU3VydmV5c1xuXG4gICAgICAgIGlmIChyZXNwb25zZVsnc3VydmV5cyddICYmICFzdXJ2ZXlzR2VuZXJhdG9yKSB7XG4gICAgICAgICAgICBsb2FkU2NyaXB0KHRoaXMuaW5zdGFuY2UucmVxdWVzdFJvdXRlci5lbmRwb2ludEZvcignYXNzZXRzJywgJy9zdGF0aWMvc3VydmV5cy5qcycpLCAoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbG9nZ2VyLmVycm9yKGBDb3VsZCBub3QgbG9hZCBzdXJ2ZXlzIHNjcmlwdGAsIGVycilcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2Jhbi10cy1jb21tZW50XG4gICAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgICAgIHdpbmRvdy5leHRlbmRQb3N0SG9nV2l0aFN1cnZleXModGhpcy5pbnN0YW5jZSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cblxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2Jhbi10cy1jb21tZW50XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgY29uc3QgZXhjZXB0aW9uQXV0b0NhcHR1cmVBZGRlZFRvV2luZG93ID0gd2luZG93Py5leHRlbmRQb3N0SG9nV2l0aEV4Y2VwdGlvbkF1dG9DYXB0dXJlXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIHJlc3BvbnNlWydhdXRvY2FwdHVyZUV4Y2VwdGlvbnMnXSAmJlxuICAgICAgICAgICAgISFyZXNwb25zZVsnYXV0b2NhcHR1cmVFeGNlcHRpb25zJ10gJiZcbiAgICAgICAgICAgIF9pc1VuZGVmaW5lZChleGNlcHRpb25BdXRvQ2FwdHVyZUFkZGVkVG9XaW5kb3cpXG4gICAgICAgICkge1xuICAgICAgICAgICAgbG9hZFNjcmlwdCh0aGlzLmluc3RhbmNlLnJlcXVlc3RSb3V0ZXIuZW5kcG9pbnRGb3IoJ2Fzc2V0cycsICcvc3RhdGljL2V4Y2VwdGlvbi1hdXRvY2FwdHVyZS5qcycpLCAoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbG9nZ2VyLmVycm9yKGBDb3VsZCBub3QgbG9hZCBleGNlcHRpb24gYXV0b2NhcHR1cmUgc2NyaXB0YCwgZXJyKVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvYmFuLXRzLWNvbW1lbnRcbiAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICAgICAgd2luZG93LmV4dGVuZFBvc3RIb2dXaXRoRXhjZXB0aW9uQXV0b2NhcHR1cmUodGhpcy5pbnN0YW5jZSwgcmVzcG9uc2UpXG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHJlc3BvbnNlWydzaXRlQXBwcyddKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pbnN0YW5jZS5jb25maWcub3B0X2luX3NpdGVfYXBwcykge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgeyBpZCwgdXJsIH0gb2YgcmVzcG9uc2VbJ3NpdGVBcHBzJ10pIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2NyaXB0VXJsID0gdGhpcy5pbnN0YW5jZS5yZXF1ZXN0Um91dGVyLmVuZHBvaW50Rm9yKCdhcGknLCB1cmwpXG5cbiAgICAgICAgICAgICAgICAgICAgYXNzaWduYWJsZVdpbmRvd1tgX18kJHBoX3NpdGVfYXBwXyR7aWR9YF0gPSB0aGlzLmluc3RhbmNlXG5cbiAgICAgICAgICAgICAgICAgICAgbG9hZFNjcmlwdChzY3JpcHRVcmwsIChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoYEVycm9yIHdoaWxlIGluaXRpYWxpemluZyBQb3N0SG9nIGFwcCB3aXRoIGNvbmZpZyBpZCAke2lkfWAsIGVycilcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlWydzaXRlQXBwcyddLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ1Bvc3RIb2cgc2l0ZSBhcHBzIGFyZSBkaXNhYmxlZC4gRW5hYmxlIHRoZSBcIm9wdF9pbl9zaXRlX2FwcHNcIiBjb25maWcgdG8gcHJvY2VlZC4nKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuIiwgImltcG9ydCB7IF9yZWdpc3Rlcl9ldmVudCwgX3RyeSwgbG9hZFNjcmlwdCB9IGZyb20gJy4uL3V0aWxzJ1xuaW1wb3J0IHsgUG9zdEhvZyB9IGZyb20gJy4uL3Bvc3Rob2ctY29yZSdcbmltcG9ydCB7IERlY2lkZVJlc3BvbnNlLCBUb29sYmFyUGFyYW1zIH0gZnJvbSAnLi4vdHlwZXMnXG5pbXBvcnQgeyBfZ2V0SGFzaFBhcmFtIH0gZnJvbSAnLi4vdXRpbHMvcmVxdWVzdC11dGlscydcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJy4uL3V0aWxzL2xvZ2dlcidcbmltcG9ydCB7IHdpbmRvdywgZG9jdW1lbnQsIGFzc2lnbmFibGVXaW5kb3cgfSBmcm9tICcuLi91dGlscy9nbG9iYWxzJ1xuXG4vLyBUUklDS1k6IE1hbnkgd2ViIGZyYW1ld29ya3Mgd2lsbCBtb2RpZnkgdGhlIHJvdXRlIG9uIGxvYWQsIHBvdGVudGlhbGx5IGJlZm9yZSBwb3N0aG9nIGlzIGluaXRpYWxpemVkLlxuLy8gVG8gZ2V0IGFoZWFkIG9mIHRoaXMgd2UgZ3JhYiBpdCBhcyBzb29uIGFzIHRoZSBwb3N0aG9nLWpzIGlzIHBhcnNlZFxuY29uc3QgU1RBVEVfRlJPTV9XSU5ET1cgPSB3aW5kb3c/LmxvY2F0aW9uXG4gICAgPyBfZ2V0SGFzaFBhcmFtKHdpbmRvdy5sb2NhdGlvbi5oYXNoLCAnX19wb3N0aG9nJykgfHwgX2dldEhhc2hQYXJhbShsb2NhdGlvbi5oYXNoLCAnc3RhdGUnKVxuICAgIDogbnVsbFxuXG5leHBvcnQgY2xhc3MgVG9vbGJhciB7XG4gICAgaW5zdGFuY2U6IFBvc3RIb2dcbiAgICBjb25zdHJ1Y3RvcihpbnN0YW5jZTogUG9zdEhvZykge1xuICAgICAgICB0aGlzLmluc3RhbmNlID0gaW5zdGFuY2VcbiAgICB9XG5cbiAgICBhZnRlckRlY2lkZVJlc3BvbnNlKHJlc3BvbnNlOiBEZWNpZGVSZXNwb25zZSkge1xuICAgICAgICBjb25zdCB0b29sYmFyUGFyYW1zOiBUb29sYmFyUGFyYW1zID1cbiAgICAgICAgICAgIHJlc3BvbnNlWyd0b29sYmFyUGFyYW1zJ10gfHxcbiAgICAgICAgICAgIHJlc3BvbnNlWydlZGl0b3JQYXJhbXMnXSB8fFxuICAgICAgICAgICAgKHJlc3BvbnNlWyd0b29sYmFyVmVyc2lvbiddID8geyB0b29sYmFyVmVyc2lvbjogcmVzcG9uc2VbJ3Rvb2xiYXJWZXJzaW9uJ10gfSA6IHt9KVxuICAgICAgICBpZiAoXG4gICAgICAgICAgICByZXNwb25zZVsnaXNBdXRoZW50aWNhdGVkJ10gJiZcbiAgICAgICAgICAgIHRvb2xiYXJQYXJhbXNbJ3Rvb2xiYXJWZXJzaW9uJ10gJiZcbiAgICAgICAgICAgIHRvb2xiYXJQYXJhbXNbJ3Rvb2xiYXJWZXJzaW9uJ10uaW5kZXhPZigndG9vbGJhcicpID09PSAwXG4gICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy5sb2FkVG9vbGJhcih7XG4gICAgICAgICAgICAgICAgLi4udG9vbGJhclBhcmFtcyxcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUbyBsb2FkIHRoZSB0b29sYmFyLCB3ZSBuZWVkIGFuIGFjY2VzcyB0b2tlbiBhbmQgb3RoZXIgc3RhdGUuIFRoYXQgc3RhdGUgY29tZXMgZnJvbSBvbmUgb2YgdGhyZWUgcGxhY2VzOlxuICAgICAqIDEuIEluIHRoZSBVUkwgaGFzaCBwYXJhbXNcbiAgICAgKiAyLiBGcm9tIHNlc3Npb24gc3RvcmFnZSB1bmRlciB0aGUga2V5IGB0b29sYmFyUGFyYW1zYCBpZiB0aGUgdG9vbGJhciB3YXMgaW5pdGlhbGl6ZWQgb24gYSBwcmV2aW91cyBwYWdlXG4gICAgICovXG4gICAgbWF5YmVMb2FkVG9vbGJhcihcbiAgICAgICAgbG9jYXRpb246IExvY2F0aW9uIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkLFxuICAgICAgICBsb2NhbFN0b3JhZ2U6IFN0b3JhZ2UgfCB1bmRlZmluZWQgPSB1bmRlZmluZWQsXG4gICAgICAgIGhpc3Rvcnk6IEhpc3RvcnkgfCB1bmRlZmluZWQgPSB1bmRlZmluZWRcbiAgICApOiBib29sZWFuIHtcbiAgICAgICAgaWYgKCF3aW5kb3cgfHwgIWRvY3VtZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgfVxuICAgICAgICBsb2NhdGlvbiA9IGxvY2F0aW9uID8/IHdpbmRvdy5sb2NhdGlvblxuICAgICAgICBoaXN0b3J5ID0gaGlzdG9yeSA/PyB3aW5kb3cuaGlzdG9yeVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBCZWZvcmUgcnVubmluZyB0aGUgY29kZSB3ZSBjaGVjayBpZiB3ZSBjYW4gYWNjZXNzIGxvY2FsU3RvcmFnZSwgaWYgbm90IHdlIG9wdC1vdXRcbiAgICAgICAgICAgIGlmICghbG9jYWxTdG9yYWdlKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0ZXN0JywgJ3Rlc3QnKVxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3Rlc3QnKVxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIElmIGxvY2FsU3RvcmFnZSB3YXMgdW5kZWZpbmVkLCBhbmQgbG9jYWxTdG9yYWdlIGlzIHN1cHBvcnRlZCB3ZSBzZXQgdGhlIGRlZmF1bHQgdmFsdWVcbiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UgPSB3aW5kb3c/LmxvY2FsU3RvcmFnZVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEluZm8gYWJvdXQgdGhlIHN0YXRlXG4gICAgICAgICAgICAgKiBUaGUgc3RhdGUgaXMgYSBqc29uIG9iamVjdFxuICAgICAgICAgICAgICogMS4gKExlZ2FjeSkgVGhlIHN0YXRlIGNhbiBiZSBgc3RhdGU9e31gIGFzIGEgdXJsZW5jb2RlZCBvYmplY3Qgb2YgaW5mby4gSW4gdGhpcyBjYXNlXG4gICAgICAgICAgICAgKiAyLiBUaGUgc3RhdGUgc2hvdWxkIG5vdyBiZSBmb3VuZCBpbiBgX19wb3N0aG9nPXt9YCBhbmQgY2FuIGJlIGJhc2U2NCBlbmNvZGVkIG9yIHVybGVuY29kZWQuXG4gICAgICAgICAgICAgKiAzLiBCYXNlNjQgZW5jb2RpbmcgaXMgcHJlZmVycmVkIGFuZCB3aWxsIGdyYWR1YWxseSBiZSByb2xsZWQgb3V0IGV2ZXJ5d2hlcmVcbiAgICAgICAgICAgICAqL1xuXG4gICAgICAgICAgICBjb25zdCBzdGF0ZUhhc2ggPVxuICAgICAgICAgICAgICAgIFNUQVRFX0ZST01fV0lORE9XIHx8IF9nZXRIYXNoUGFyYW0obG9jYXRpb24uaGFzaCwgJ19fcG9zdGhvZycpIHx8IF9nZXRIYXNoUGFyYW0obG9jYXRpb24uaGFzaCwgJ3N0YXRlJylcblxuICAgICAgICAgICAgbGV0IHRvb2xiYXJQYXJhbXM6IFRvb2xiYXJQYXJhbXNcbiAgICAgICAgICAgIGNvbnN0IHN0YXRlID0gc3RhdGVIYXNoXG4gICAgICAgICAgICAgICAgPyBfdHJ5KCgpID0+IEpTT04ucGFyc2UoYXRvYihkZWNvZGVVUklDb21wb25lbnQoc3RhdGVIYXNoKSkpKSB8fFxuICAgICAgICAgICAgICAgICAgX3RyeSgoKSA9PiBKU09OLnBhcnNlKGRlY29kZVVSSUNvbXBvbmVudChzdGF0ZUhhc2gpKSlcbiAgICAgICAgICAgICAgICA6IG51bGxcblxuICAgICAgICAgICAgY29uc3QgcGFyc2VGcm9tVXJsID0gc3RhdGUgJiYgc3RhdGVbJ2FjdGlvbiddID09PSAncGhfYXV0aG9yaXplJ1xuXG4gICAgICAgICAgICBpZiAocGFyc2VGcm9tVXJsKSB7XG4gICAgICAgICAgICAgICAgLy8gaGFwcGVucyBpZiB0aGV5IGFyZSBpbml0aWFsaXppbmcgdGhlIHRvb2xiYXIgdXNpbmcgYW4gb2xkIHNuaXBwZXRcbiAgICAgICAgICAgICAgICB0b29sYmFyUGFyYW1zID0gc3RhdGVcbiAgICAgICAgICAgICAgICB0b29sYmFyUGFyYW1zLnNvdXJjZSA9ICd1cmwnXG5cbiAgICAgICAgICAgICAgICBpZiAodG9vbGJhclBhcmFtcyAmJiBPYmplY3Qua2V5cyh0b29sYmFyUGFyYW1zKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZVsnZGVzaXJlZEhhc2gnXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaGFzaCB0aGF0IHdhcyBpbiB0aGUgdXJsIGJlZm9yZSB0aGUgcmVkaXJlY3RcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLmhhc2ggPSBzdGF0ZVsnZGVzaXJlZEhhc2gnXVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGhpc3RvcnkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhpc3RvcnkucmVwbGFjZVN0YXRlKCcnLCBkb2N1bWVudC50aXRsZSwgbG9jYXRpb24ucGF0aG5hbWUgKyBsb2NhdGlvbi5zZWFyY2gpIC8vIGNvbXBsZXRlbHkgcmVtb3ZlIGhhc2hcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLmhhc2ggPSAnJyAvLyBjbGVhciBoYXNoIChidXQgbGVhdmVzICMgdW5mb3J0dW5hdGVseSlcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gZ2V0IGNyZWRlbnRpYWxzIGZyb20gbG9jYWxTdG9yYWdlIGZyb20gYSBwcmV2aW91cyBpbml0aWFsemF0aW9uXG4gICAgICAgICAgICAgICAgdG9vbGJhclBhcmFtcyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ19wb3N0SG9nVG9vbGJhclBhcmFtcycpIHx8ICd7fScpXG4gICAgICAgICAgICAgICAgdG9vbGJhclBhcmFtcy5zb3VyY2UgPSAnbG9jYWxzdG9yYWdlJ1xuXG4gICAgICAgICAgICAgICAgLy8gZGVsZXRlIFwiYWRkLWFjdGlvblwiIG9yIG90aGVyIGludGVudCBmcm9tIHRvb2xiYXJQYXJhbXMsIG90aGVyd2lzZSB3ZSdsbCBoYXZlIHRoZSBzYW1lIGludGVudFxuICAgICAgICAgICAgICAgIC8vIGV2ZXJ5IHRpbWUgd2Ugb3BlbiB0aGUgcGFnZSAoZS5nLiB5b3UganVzdCB2aXNpdGluZyB5b3VyIG93biBzaXRlIGFuIGhvdXIgbGF0ZXIpXG4gICAgICAgICAgICAgICAgZGVsZXRlIHRvb2xiYXJQYXJhbXMudXNlckludGVudFxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodG9vbGJhclBhcmFtc1sndG9rZW4nXSAmJiB0aGlzLmluc3RhbmNlLmNvbmZpZy50b2tlbiA9PT0gdG9vbGJhclBhcmFtc1sndG9rZW4nXSkge1xuICAgICAgICAgICAgICAgIHRoaXMubG9hZFRvb2xiYXIodG9vbGJhclBhcmFtcylcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBsb2FkVG9vbGJhcihwYXJhbXM/OiBUb29sYmFyUGFyYW1zKTogYm9vbGVhbiB7XG4gICAgICAgIGlmICghd2luZG93IHx8IGFzc2lnbmFibGVXaW5kb3dbJ19wb3N0SG9nVG9vbGJhckxvYWRlZCddKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgfVxuICAgICAgICAvLyBvbmx5IGxvYWQgdGhlIHRvb2xiYXIgb25jZSwgZXZlbiBpZiB0aGVyZSBhcmUgbXVsdGlwbGUgaW5zdGFuY2VzIG9mIFBvc3RIb2dMaWJcbiAgICAgICAgYXNzaWduYWJsZVdpbmRvd1snX3Bvc3RIb2dUb29sYmFyTG9hZGVkJ10gPSB0cnVlXG5cbiAgICAgICAgLy8gdG9vbGJhci5qcyBpcyBzZXJ2ZWQgZnJvbSB0aGUgUG9zdEhvZyBDRE4sIHRoaXMgaGFzIGEgVFRMIG9mIDI0IGhvdXJzLlxuICAgICAgICAvLyB0aGUgdG9vbGJhciBhc3NldCBpbmNsdWRlcyBhIHJvdGF0aW5nIFwidG9rZW5cIiB0aGF0IGlzIHZhbGlkIGZvciA1IG1pbnV0ZXMuXG4gICAgICAgIGNvbnN0IGZpdmVNaW51dGVzSW5NaWxsaXMgPSA1ICogNjAgKiAxMDAwXG4gICAgICAgIC8vIHRoaXMgZW5zdXJlcyB0aGF0IHdlIGJ1c3QgdGhlIGNhY2hlIHBlcmlvZGljYWxseVxuICAgICAgICBjb25zdCB0aW1lc3RhbXBUb05lYXJlc3RGaXZlTWludXRlcyA9IE1hdGguZmxvb3IoRGF0ZS5ub3coKSAvIGZpdmVNaW51dGVzSW5NaWxsaXMpICogZml2ZU1pbnV0ZXNJbk1pbGxpc1xuICAgICAgICBjb25zdCB0b29sYmFyVXJsID0gdGhpcy5pbnN0YW5jZS5yZXF1ZXN0Um91dGVyLmVuZHBvaW50Rm9yKFxuICAgICAgICAgICAgJ2Fzc2V0cycsXG4gICAgICAgICAgICBgL3N0YXRpYy90b29sYmFyLmpzP3Q9JHt0aW1lc3RhbXBUb05lYXJlc3RGaXZlTWludXRlc31gXG4gICAgICAgIClcbiAgICAgICAgY29uc3QgZGlzYWJsZVRvb2xiYXJNZXRyaWNzID1cbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2UucmVxdWVzdFJvdXRlci5yZWdpb24gPT09ICdjdXN0b20nICYmIHRoaXMuaW5zdGFuY2UuY29uZmlnLmFkdmFuY2VkX2Rpc2FibGVfdG9vbGJhcl9tZXRyaWNzXG5cbiAgICAgICAgY29uc3QgdG9vbGJhclBhcmFtcyA9IHtcbiAgICAgICAgICAgIHRva2VuOiB0aGlzLmluc3RhbmNlLmNvbmZpZy50b2tlbixcbiAgICAgICAgICAgIC4uLnBhcmFtcyxcbiAgICAgICAgICAgIGFwaVVSTDogdGhpcy5pbnN0YW5jZS5yZXF1ZXN0Um91dGVyLmVuZHBvaW50Rm9yKCd1aScpLFxuICAgICAgICAgICAgLi4uKGRpc2FibGVUb29sYmFyTWV0cmljcyA/IHsgaW5zdHJ1bWVudDogZmFsc2UgfSA6IHt9KSxcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHsgc291cmNlOiBfZGlzY2FyZCwgLi4ucGFyYW1zVG9QZXJzaXN0IH0gPSB0b29sYmFyUGFyYW1zIC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCdfcG9zdEhvZ1Rvb2xiYXJQYXJhbXMnLCBKU09OLnN0cmluZ2lmeShwYXJhbXNUb1BlcnNpc3QpKVxuXG4gICAgICAgIGxvYWRTY3JpcHQodG9vbGJhclVybCwgKGVycikgPT4ge1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcignRmFpbGVkIHRvIGxvYWQgdG9vbGJhcicsIGVycilcbiAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDsoYXNzaWduYWJsZVdpbmRvd1sncGhfbG9hZF90b29sYmFyJ10gfHwgYXNzaWduYWJsZVdpbmRvd1sncGhfbG9hZF9lZGl0b3InXSkodG9vbGJhclBhcmFtcywgdGhpcy5pbnN0YW5jZSlcbiAgICAgICAgfSlcbiAgICAgICAgLy8gVHVyYm9saW5rcyBkb2Vzbid0IGZpcmUgYW4gb25sb2FkIGV2ZW50IGJ1dCBkb2VzIHJlcGxhY2UgdGhlIGVudGlyZSBib2R5LCBpbmNsdWRpbmcgdGhlIHRvb2xiYXIuXG4gICAgICAgIC8vIFRodXMsIHdlIGVuc3VyZSB0aGUgdG9vbGJhciBpcyBvbmx5IGxvYWRlZCBpbnNpZGUgdGhlIGJvZHksIGFuZCB0aGVuIHJlbG9hZGVkIG9uIHR1cmJvbGlua3M6bG9hZC5cbiAgICAgICAgX3JlZ2lzdGVyX2V2ZW50KHdpbmRvdywgJ3R1cmJvbGlua3M6bG9hZCcsICgpID0+IHtcbiAgICAgICAgICAgIGFzc2lnbmFibGVXaW5kb3dbJ19wb3N0SG9nVG9vbGJhckxvYWRlZCddID0gZmFsc2VcbiAgICAgICAgICAgIHRoaXMubG9hZFRvb2xiYXIodG9vbGJhclBhcmFtcylcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG5cbiAgICAvKiogQGRlcHJlY2F0ZWQgVXNlIFwibG9hZFRvb2xiYXJcIiBpbnN0ZWFkLiAqL1xuICAgIF9sb2FkRWRpdG9yKHBhcmFtczogVG9vbGJhclBhcmFtcyk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5sb2FkVG9vbGJhcihwYXJhbXMpXG4gICAgfVxuXG4gICAgLyoqIEBkZXByZWNhdGVkIFVzZSBcIm1heWJlTG9hZFRvb2xiYXJcIiBpbnN0ZWFkLiAqL1xuICAgIG1heWJlTG9hZEVkaXRvcihcbiAgICAgICAgbG9jYXRpb246IExvY2F0aW9uIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkLFxuICAgICAgICBsb2NhbFN0b3JhZ2U6IFN0b3JhZ2UgfCB1bmRlZmluZWQgPSB1bmRlZmluZWQsXG4gICAgICAgIGhpc3Rvcnk6IEhpc3RvcnkgfCB1bmRlZmluZWQgPSB1bmRlZmluZWRcbiAgICApOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWF5YmVMb2FkVG9vbGJhcihsb2NhdGlvbiwgbG9jYWxTdG9yYWdlLCBoaXN0b3J5KVxuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBRdWV1ZWRSZXF1ZXN0T3B0aW9ucyB9IGZyb20gJy4vdHlwZXMnXG5pbXBvcnQgeyBfZWFjaCB9IGZyb20gJy4vdXRpbHMnXG5cbmltcG9ydCB7IF9pc0FycmF5LCBfaXNVbmRlZmluZWQgfSBmcm9tICcuL3V0aWxzL3R5cGUtdXRpbHMnXG5cbmV4cG9ydCBjbGFzcyBSZXF1ZXN0UXVldWUge1xuICAgIC8vIFdlIHN0YXJ0IGluIGEgcGF1c2VkIHN0YXRlIGFuZCBvbmx5IHN0YXJ0IGZsdXNoaW5nIHdoZW4gZW5hYmxlZCBieSB0aGUgcGFyZW50XG4gICAgcHJpdmF0ZSBpc1BhdXNlZDogYm9vbGVhbiA9IHRydWVcbiAgICBwcml2YXRlIHF1ZXVlOiBRdWV1ZWRSZXF1ZXN0T3B0aW9uc1tdID0gW11cbiAgICBwcml2YXRlIGZsdXNoVGltZW91dD86IG51bWJlciAvLyB0byBiZWNvbWUgaW50ZXJ2YWwgZm9yIHJlZmVyZW5jZSB0byBjbGVhciBsYXRlclxuICAgIHByaXZhdGUgZmx1c2hUaW1lb3V0TXMgPSAzMDAwXG4gICAgcHJpdmF0ZSBzZW5kUmVxdWVzdDogKHJlcTogUXVldWVkUmVxdWVzdE9wdGlvbnMpID0+IHZvaWRcblxuICAgIGNvbnN0cnVjdG9yKHNlbmRSZXF1ZXN0OiAocmVxOiBRdWV1ZWRSZXF1ZXN0T3B0aW9ucykgPT4gdm9pZCkge1xuICAgICAgICB0aGlzLnNlbmRSZXF1ZXN0ID0gc2VuZFJlcXVlc3RcbiAgICB9XG5cbiAgICBlbnF1ZXVlKHJlcTogUXVldWVkUmVxdWVzdE9wdGlvbnMpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5xdWV1ZS5wdXNoKHJlcSlcblxuICAgICAgICBpZiAoIXRoaXMuZmx1c2hUaW1lb3V0KSB7XG4gICAgICAgICAgICB0aGlzLnNldEZsdXNoVGltZW91dCgpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB1bmxvYWQoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuY2xlYXJGbHVzaFRpbWVvdXQoKVxuICAgICAgICBjb25zdCByZXF1ZXN0cyA9IHRoaXMucXVldWUubGVuZ3RoID4gMCA/IHRoaXMuZm9ybWF0UXVldWUoKSA6IHt9XG4gICAgICAgIGNvbnN0IHJlcXVlc3RWYWx1ZXMgPSBPYmplY3QudmFsdWVzKHJlcXVlc3RzKVxuXG4gICAgICAgIC8vIEFsd2F5cyBmb3JjZSBldmVudHMgdG8gYmUgc2VudCBiZWZvcmUgcmVjb3JkaW5ncywgYXMgZXZlbnRzIGFyZSBtb3JlIGltcG9ydGFudCwgYW5kIHJlY29yZGluZ3MgYXJlIGJpZ2dlciBhbmQgdGh1cyBsZXNzIGxpa2VseSB0byBhcnJpdmVcbiAgICAgICAgY29uc3Qgc29ydGVkUmVxdWVzdHMgPSBbXG4gICAgICAgICAgICAuLi5yZXF1ZXN0VmFsdWVzLmZpbHRlcigocikgPT4gci51cmwuaW5kZXhPZignL2UnKSA9PT0gMCksXG4gICAgICAgICAgICAuLi5yZXF1ZXN0VmFsdWVzLmZpbHRlcigocikgPT4gci51cmwuaW5kZXhPZignL2UnKSAhPT0gMCksXG4gICAgICAgIF1cbiAgICAgICAgc29ydGVkUmVxdWVzdHMubWFwKChyZXEpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc2VuZFJlcXVlc3QoeyAuLi5yZXEsIHRyYW5zcG9ydDogJ3NlbmRCZWFjb24nIH0pXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgZW5hYmxlKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmlzUGF1c2VkID0gZmFsc2VcbiAgICAgICAgdGhpcy5zZXRGbHVzaFRpbWVvdXQoKVxuICAgIH1cblxuICAgIHByaXZhdGUgc2V0Rmx1c2hUaW1lb3V0KCk6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy5pc1BhdXNlZCkge1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5mbHVzaFRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY2xlYXJGbHVzaFRpbWVvdXQoKVxuICAgICAgICAgICAgaWYgKHRoaXMucXVldWUubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlcXVlc3RzID0gdGhpcy5mb3JtYXRRdWV1ZSgpXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gcmVxdWVzdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVxID0gcmVxdWVzdHNba2V5XVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXEuZGF0YSAmJiBfaXNBcnJheShyZXEuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9lYWNoKHJlcS5kYXRhLCAoZGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFbJ29mZnNldCddID0gTWF0aC5hYnMoZGF0YVsndGltZXN0YW1wJ10gLSBub3cpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGRhdGFbJ3RpbWVzdGFtcCddXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VuZFJlcXVlc3QocmVxKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgdGhpcy5mbHVzaFRpbWVvdXRNcylcbiAgICB9XG5cbiAgICBwcml2YXRlIGNsZWFyRmx1c2hUaW1lb3V0KCk6IHZvaWQge1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5mbHVzaFRpbWVvdXQpXG4gICAgICAgIHRoaXMuZmx1c2hUaW1lb3V0ID0gdW5kZWZpbmVkXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBmb3JtYXRRdWV1ZSgpOiBSZWNvcmQ8c3RyaW5nLCBRdWV1ZWRSZXF1ZXN0T3B0aW9ucz4ge1xuICAgICAgICBjb25zdCByZXF1ZXN0czogUmVjb3JkPHN0cmluZywgUXVldWVkUmVxdWVzdE9wdGlvbnM+ID0ge31cbiAgICAgICAgX2VhY2godGhpcy5xdWV1ZSwgKHJlcXVlc3Q6IFF1ZXVlZFJlcXVlc3RPcHRpb25zKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXEgPSByZXF1ZXN0XG4gICAgICAgICAgICBjb25zdCBrZXkgPSAocmVxID8gcmVxLmJhdGNoS2V5IDogbnVsbCkgfHwgcmVxLnVybFxuICAgICAgICAgICAgaWYgKF9pc1VuZGVmaW5lZChyZXF1ZXN0c1trZXldKSkge1xuICAgICAgICAgICAgICAgIC8vIFRPRE86IFdoYXQgYWJvdXQgdGhpcyAtaXQgc2VlbXMgdG8gYmF0Y2ggZGF0YSBpbnRvIGFuIGFycmF5IC0gZG8gd2UgYWx3YXlzIHdhbnQgdGhhdD9cbiAgICAgICAgICAgICAgICByZXF1ZXN0c1trZXldID0geyAuLi5yZXEsIGRhdGE6IFtdIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmVxdWVzdHNba2V5XS5kYXRhPy5wdXNoKHJlcS5kYXRhKVxuICAgICAgICB9KVxuXG4gICAgICAgIHRoaXMucXVldWUgPSBbXVxuICAgICAgICByZXR1cm4gcmVxdWVzdHNcbiAgICB9XG59XG4iLCAiLy8gREVGTEFURSBpcyBhIGNvbXBsZXggZm9ybWF0OyB0byByZWFkIHRoaXMgY29kZSwgeW91IHNob3VsZCBwcm9iYWJseSBjaGVjayB0aGUgUkZDIGZpcnN0OlxuLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzE5NTFcbi8vIFlvdSBtYXkgYWxzbyB3aXNoIHRvIHRha2UgYSBsb29rIGF0IHRoZSBndWlkZSBJIG1hZGUgYWJvdXQgdGhpcyBwcm9ncmFtOlxuLy8gaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vMTAxYXJyb3d6LzI1M2YzMWViNWFiYzNkOTI3NWFiOTQzMDAzZmZlY2FkXG4vLyBNdWNoIG9mIHRoZSBmb2xsb3dpbmcgY29kZSBpcyBzaW1pbGFyIHRvIHRoYXQgb2YgVVpJUC5qczpcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9waG90b3BlYS9VWklQLmpzXG4vLyBNYW55IG9wdGltaXphdGlvbnMgaGF2ZSBiZWVuIG1hZGUsIHNvIHRoZSBidW5kbGUgc2l6ZSBpcyB1bHRpbWF0ZWx5IHNtYWxsZXIgYnV0IHBlcmZvcm1hbmNlIGlzIHNpbWlsYXIuXG4vLyBTb21ldGltZXMgMCB3aWxsIGFwcGVhciB3aGVyZSAtMSB3b3VsZCBiZSBtb3JlIGFwcHJvcHJpYXRlLiBUaGlzIGlzIGJlY2F1c2UgdXNpbmcgYSB1aW50XG4vLyBpcyBiZXR0ZXIgZm9yIG1lbW9yeSBpbiBtb3N0IGVuZ2luZXMgKEkgKnRoaW5rKikuXG52YXIgY2gyID0ge307XG52YXIgd2sgPSAoZnVuY3Rpb24gKGMsIGlkLCBtc2csIHRyYW5zZmVyLCBjYikge1xuICAgIHZhciB1ID0gY2gyW2lkXSB8fCAoY2gyW2lkXSA9IFVSTC5jcmVhdGVPYmplY3RVUkwobmV3IEJsb2IoW2NdLCB7IHR5cGU6ICd0ZXh0L2phdmFzY3JpcHQnIH0pKSk7XG4gICAgdmFyIHcgPSBuZXcgV29ya2VyKHUpO1xuICAgIHcub25lcnJvciA9IGZ1bmN0aW9uIChlKSB7IHJldHVybiBjYihlLmVycm9yLCBudWxsKTsgfTtcbiAgICB3Lm9ubWVzc2FnZSA9IGZ1bmN0aW9uIChlKSB7IHJldHVybiBjYihudWxsLCBlLmRhdGEpOyB9O1xuICAgIHcucG9zdE1lc3NhZ2UobXNnLCB0cmFuc2Zlcik7XG4gICAgcmV0dXJuIHc7XG59KTtcblxuLy8gYWxpYXNlcyBmb3Igc2hvcnRlciBjb21wcmVzc2VkIGNvZGUgKG1vc3QgbWluaWZlcnMgZG9uJ3QgZG8gdGhpcylcbnZhciB1OCA9IFVpbnQ4QXJyYXksIHUxNiA9IFVpbnQxNkFycmF5LCB1MzIgPSBVaW50MzJBcnJheTtcbi8vIGZpeGVkIGxlbmd0aCBleHRyYSBiaXRzXG52YXIgZmxlYiA9IG5ldyB1OChbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMSwgMSwgMSwgMSwgMiwgMiwgMiwgMiwgMywgMywgMywgMywgNCwgNCwgNCwgNCwgNSwgNSwgNSwgNSwgMCwgLyogdW51c2VkICovIDAsIDAsIC8qIGltcG9zc2libGUgKi8gMF0pO1xuLy8gZml4ZWQgZGlzdGFuY2UgZXh0cmEgYml0c1xuLy8gc2VlIGZsZWIgbm90ZVxudmFyIGZkZWIgPSBuZXcgdTgoWzAsIDAsIDAsIDAsIDEsIDEsIDIsIDIsIDMsIDMsIDQsIDQsIDUsIDUsIDYsIDYsIDcsIDcsIDgsIDgsIDksIDksIDEwLCAxMCwgMTEsIDExLCAxMiwgMTIsIDEzLCAxMywgLyogdW51c2VkICovIDAsIDBdKTtcbi8vIGNvZGUgbGVuZ3RoIGluZGV4IG1hcFxudmFyIGNsaW0gPSBuZXcgdTgoWzE2LCAxNywgMTgsIDAsIDgsIDcsIDksIDYsIDEwLCA1LCAxMSwgNCwgMTIsIDMsIDEzLCAyLCAxNCwgMSwgMTVdKTtcbi8vIGdldCBiYXNlLCByZXZlcnNlIGluZGV4IG1hcCBmcm9tIGV4dHJhIGJpdHNcbnZhciBmcmViID0gZnVuY3Rpb24gKGViLCBzdGFydCkge1xuICAgIHZhciBiID0gbmV3IHUxNigzMSk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzMTsgKytpKSB7XG4gICAgICAgIGJbaV0gPSBzdGFydCArPSAxIDw8IGViW2kgLSAxXTtcbiAgICB9XG4gICAgLy8gbnVtYmVycyBoZXJlIGFyZSBhdCBtYXggMTggYml0c1xuICAgIHZhciByID0gbmV3IHUzMihiWzMwXSk7XG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCAzMDsgKytpKSB7XG4gICAgICAgIGZvciAodmFyIGogPSBiW2ldOyBqIDwgYltpICsgMV07ICsraikge1xuICAgICAgICAgICAgcltqXSA9ICgoaiAtIGJbaV0pIDw8IDUpIHwgaTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gW2IsIHJdO1xufTtcbnZhciBfYSA9IGZyZWIoZmxlYiwgMiksIGZsID0gX2FbMF0sIHJldmZsID0gX2FbMV07XG4vLyB3ZSBjYW4gaWdub3JlIHRoZSBmYWN0IHRoYXQgdGhlIG90aGVyIG51bWJlcnMgYXJlIHdyb25nOyB0aGV5IG5ldmVyIGhhcHBlbiBhbnl3YXlcbmZsWzI4XSA9IDI1OCwgcmV2ZmxbMjU4XSA9IDI4O1xudmFyIF9iID0gZnJlYihmZGViLCAwKSwgZmQgPSBfYlswXSwgcmV2ZmQgPSBfYlsxXTtcbi8vIG1hcCBvZiB2YWx1ZSB0byByZXZlcnNlIChhc3N1bWluZyAxNiBiaXRzKVxudmFyIHJldiA9IG5ldyB1MTYoMzI3NjgpO1xuZm9yICh2YXIgaSA9IDA7IGkgPCAzMjc2ODsgKytpKSB7XG4gICAgLy8gcmV2ZXJzZSB0YWJsZSBhbGdvcml0aG0gZnJvbSBTT1xuICAgIHZhciB4ID0gKChpICYgMHhBQUFBKSA+Pj4gMSkgfCAoKGkgJiAweDU1NTUpIDw8IDEpO1xuICAgIHggPSAoKHggJiAweENDQ0MpID4+PiAyKSB8ICgoeCAmIDB4MzMzMykgPDwgMik7XG4gICAgeCA9ICgoeCAmIDB4RjBGMCkgPj4+IDQpIHwgKCh4ICYgMHgwRjBGKSA8PCA0KTtcbiAgICByZXZbaV0gPSAoKCh4ICYgMHhGRjAwKSA+Pj4gOCkgfCAoKHggJiAweDAwRkYpIDw8IDgpKSA+Pj4gMTtcbn1cbi8vIGNyZWF0ZSBodWZmbWFuIHRyZWUgZnJvbSB1OCBcIm1hcFwiOiBpbmRleCAtPiBjb2RlIGxlbmd0aCBmb3IgY29kZSBpbmRleFxuLy8gbWIgKG1heCBiaXRzKSBtdXN0IGJlIGF0IG1vc3QgMTVcbi8vIFRPRE86IG9wdGltaXplL3NwbGl0IHVwP1xudmFyIGhNYXAgPSAoZnVuY3Rpb24gKGNkLCBtYiwgcikge1xuICAgIHZhciBzID0gY2QubGVuZ3RoO1xuICAgIC8vIGluZGV4XG4gICAgdmFyIGkgPSAwO1xuICAgIC8vIHUxNiBcIm1hcFwiOiBpbmRleCAtPiAjIG9mIGNvZGVzIHdpdGggYml0IGxlbmd0aCA9IGluZGV4XG4gICAgdmFyIGwgPSBuZXcgdTE2KG1iKTtcbiAgICAvLyBsZW5ndGggb2YgY2QgbXVzdCBiZSAyODggKHRvdGFsICMgb2YgY29kZXMpXG4gICAgZm9yICg7IGkgPCBzOyArK2kpXG4gICAgICAgICsrbFtjZFtpXSAtIDFdO1xuICAgIC8vIHUxNiBcIm1hcFwiOiBpbmRleCAtPiBtaW5pbXVtIGNvZGUgZm9yIGJpdCBsZW5ndGggPSBpbmRleFxuICAgIHZhciBsZSA9IG5ldyB1MTYobWIpO1xuICAgIGZvciAoaSA9IDA7IGkgPCBtYjsgKytpKSB7XG4gICAgICAgIGxlW2ldID0gKGxlW2kgLSAxXSArIGxbaSAtIDFdKSA8PCAxO1xuICAgIH1cbiAgICB2YXIgY287XG4gICAgaWYgKHIpIHtcbiAgICAgICAgLy8gdTE2IFwibWFwXCI6IGluZGV4IC0+IG51bWJlciBvZiBhY3R1YWwgYml0cywgc3ltYm9sIGZvciBjb2RlXG4gICAgICAgIGNvID0gbmV3IHUxNigxIDw8IG1iKTtcbiAgICAgICAgLy8gYml0cyB0byByZW1vdmUgZm9yIHJldmVyc2VyXG4gICAgICAgIHZhciBydmIgPSAxNSAtIG1iO1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgczsgKytpKSB7XG4gICAgICAgICAgICAvLyBpZ25vcmUgMCBsZW5ndGhzXG4gICAgICAgICAgICBpZiAoY2RbaV0pIHtcbiAgICAgICAgICAgICAgICAvLyBudW0gZW5jb2RpbmcgYm90aCBzeW1ib2wgYW5kIGJpdHMgcmVhZFxuICAgICAgICAgICAgICAgIHZhciBzdiA9IChpIDw8IDQpIHwgY2RbaV07XG4gICAgICAgICAgICAgICAgLy8gZnJlZSBiaXRzXG4gICAgICAgICAgICAgICAgdmFyIHJfMSA9IG1iIC0gY2RbaV07XG4gICAgICAgICAgICAgICAgLy8gc3RhcnQgdmFsdWVcbiAgICAgICAgICAgICAgICB2YXIgdiA9IGxlW2NkW2ldIC0gMV0rKyA8PCByXzE7XG4gICAgICAgICAgICAgICAgLy8gbSBpcyBlbmQgdmFsdWVcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBtID0gdiB8ICgoMSA8PCByXzEpIC0gMSk7IHYgPD0gbTsgKyt2KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGV2ZXJ5IDE2IGJpdCB2YWx1ZSBzdGFydGluZyB3aXRoIHRoZSBjb2RlIHlpZWxkcyB0aGUgc2FtZSByZXN1bHRcbiAgICAgICAgICAgICAgICAgICAgY29bcmV2W3ZdID4+PiBydmJdID0gc3Y7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjbyA9IG5ldyB1MTYocyk7XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBzOyArK2kpXG4gICAgICAgICAgICBjb1tpXSA9IHJldltsZVtjZFtpXSAtIDFdKytdID4+PiAoMTUgLSBjZFtpXSk7XG4gICAgfVxuICAgIHJldHVybiBjbztcbn0pO1xuLy8gZml4ZWQgbGVuZ3RoIHRyZWVcbnZhciBmbHQgPSBuZXcgdTgoMjg4KTtcbmZvciAodmFyIGkgPSAwOyBpIDwgMTQ0OyArK2kpXG4gICAgZmx0W2ldID0gODtcbmZvciAodmFyIGkgPSAxNDQ7IGkgPCAyNTY7ICsraSlcbiAgICBmbHRbaV0gPSA5O1xuZm9yICh2YXIgaSA9IDI1NjsgaSA8IDI4MDsgKytpKVxuICAgIGZsdFtpXSA9IDc7XG5mb3IgKHZhciBpID0gMjgwOyBpIDwgMjg4OyArK2kpXG4gICAgZmx0W2ldID0gODtcbi8vIGZpeGVkIGRpc3RhbmNlIHRyZWVcbnZhciBmZHQgPSBuZXcgdTgoMzIpO1xuZm9yICh2YXIgaSA9IDA7IGkgPCAzMjsgKytpKVxuICAgIGZkdFtpXSA9IDU7XG4vLyBmaXhlZCBsZW5ndGggbWFwXG52YXIgZmxtID0gLyojX19QVVJFX18qLyBoTWFwKGZsdCwgOSwgMCksIGZscm0gPSAvKiNfX1BVUkVfXyovIGhNYXAoZmx0LCA5LCAxKTtcbi8vIGZpeGVkIGRpc3RhbmNlIG1hcFxudmFyIGZkbSA9IC8qI19fUFVSRV9fKi8gaE1hcChmZHQsIDUsIDApLCBmZHJtID0gLyojX19QVVJFX18qLyBoTWFwKGZkdCwgNSwgMSk7XG4vLyBmaW5kIG1heCBvZiBhcnJheVxudmFyIG1heCA9IGZ1bmN0aW9uIChhKSB7XG4gICAgdmFyIG0gPSBhWzBdO1xuICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYS5sZW5ndGg7ICsraSkge1xuICAgICAgICBpZiAoYVtpXSA+IG0pXG4gICAgICAgICAgICBtID0gYVtpXTtcbiAgICB9XG4gICAgcmV0dXJuIG07XG59O1xuLy8gcmVhZCBkLCBzdGFydGluZyBhdCBiaXQgcCBhbmQgbWFzayB3aXRoIG1cbnZhciBiaXRzID0gZnVuY3Rpb24gKGQsIHAsIG0pIHtcbiAgICB2YXIgbyA9IChwIC8gOCkgPj4gMDtcbiAgICByZXR1cm4gKChkW29dIHwgKGRbbyArIDFdIDw8IDgpKSA+Pj4gKHAgJiA3KSkgJiBtO1xufTtcbi8vIHJlYWQgZCwgc3RhcnRpbmcgYXQgYml0IHAgY29udGludWluZyBmb3IgYXQgbGVhc3QgMTYgYml0c1xudmFyIGJpdHMxNiA9IGZ1bmN0aW9uIChkLCBwKSB7XG4gICAgdmFyIG8gPSAocCAvIDgpID4+IDA7XG4gICAgcmV0dXJuICgoZFtvXSB8IChkW28gKyAxXSA8PCA4KSB8IChkW28gKyAyXSA8PCAxNikpID4+PiAocCAmIDcpKTtcbn07XG4vLyBnZXQgZW5kIG9mIGJ5dGVcbnZhciBzaGZ0ID0gZnVuY3Rpb24gKHApIHsgcmV0dXJuICgocCAvIDgpID4+IDApICsgKHAgJiA3ICYmIDEpOyB9O1xuLy8gdHlwZWQgYXJyYXkgc2xpY2UgLSBhbGxvd3MgZ2FyYmFnZSBjb2xsZWN0b3IgdG8gZnJlZSBvcmlnaW5hbCByZWZlcmVuY2UsXG4vLyB3aGlsZSBiZWluZyBtb3JlIGNvbXBhdGlibGUgdGhhbiAuc2xpY2VcbnZhciBzbGMgPSBmdW5jdGlvbiAodiwgcywgZSkge1xuICAgIGlmIChzID09IG51bGwgfHwgcyA8IDApXG4gICAgICAgIHMgPSAwO1xuICAgIGlmIChlID09IG51bGwgfHwgZSA+IHYubGVuZ3RoKVxuICAgICAgICBlID0gdi5sZW5ndGg7XG4gICAgLy8gY2FuJ3QgdXNlIC5jb25zdHJ1Y3RvciBpbiBjYXNlIHVzZXItc3VwcGxpZWRcbiAgICB2YXIgbiA9IG5ldyAodiBpbnN0YW5jZW9mIHUxNiA/IHUxNiA6IHYgaW5zdGFuY2VvZiB1MzIgPyB1MzIgOiB1OCkoZSAtIHMpO1xuICAgIG4uc2V0KHYuc3ViYXJyYXkocywgZSkpO1xuICAgIHJldHVybiBuO1xufTtcbi8vIGV4cGFuZHMgcmF3IERFRkxBVEUgZGF0YVxudmFyIGluZmx0ID0gZnVuY3Rpb24gKGRhdCwgYnVmLCBzdCkge1xuICAgIC8vIHNvdXJjZSBsZW5ndGhcbiAgICB2YXIgc2wgPSBkYXQubGVuZ3RoO1xuICAgIC8vIGhhdmUgdG8gZXN0aW1hdGUgc2l6ZVxuICAgIHZhciBub0J1ZiA9ICFidWYgfHwgc3Q7XG4gICAgLy8gbm8gc3RhdGVcbiAgICB2YXIgbm9TdCA9ICFzdCB8fCBzdC5pO1xuICAgIGlmICghc3QpXG4gICAgICAgIHN0ID0ge307XG4gICAgLy8gQXNzdW1lcyByb3VnaGx5IDMzJSBjb21wcmVzc2lvbiByYXRpbyBhdmVyYWdlXG4gICAgaWYgKCFidWYpXG4gICAgICAgIGJ1ZiA9IG5ldyB1OChzbCAqIDMpO1xuICAgIC8vIGVuc3VyZSBidWZmZXIgY2FuIGZpdCBhdCBsZWFzdCBsIGVsZW1lbnRzXG4gICAgdmFyIGNidWYgPSBmdW5jdGlvbiAobCkge1xuICAgICAgICB2YXIgYmwgPSBidWYubGVuZ3RoO1xuICAgICAgICAvLyBuZWVkIHRvIGluY3JlYXNlIHNpemUgdG8gZml0XG4gICAgICAgIGlmIChsID4gYmwpIHtcbiAgICAgICAgICAgIC8vIERvdWJsZSBvciBzZXQgdG8gbmVjZXNzYXJ5LCB3aGljaGV2ZXIgaXMgZ3JlYXRlclxuICAgICAgICAgICAgdmFyIG5idWYgPSBuZXcgdTgoTWF0aC5tYXgoYmwgKiAyLCBsKSk7XG4gICAgICAgICAgICBuYnVmLnNldChidWYpO1xuICAgICAgICAgICAgYnVmID0gbmJ1ZjtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLy8gIGxhc3QgY2h1bmsgICAgICAgICBiaXRwb3MgICAgICAgICAgIGJ5dGVzXG4gICAgdmFyIGZpbmFsID0gc3QuZiB8fCAwLCBwb3MgPSBzdC5wIHx8IDAsIGJ0ID0gc3QuYiB8fCAwLCBsbSA9IHN0LmwsIGRtID0gc3QuZCwgbGJ0ID0gc3QubSwgZGJ0ID0gc3QubjtcbiAgICAvLyB0b3RhbCBiaXRzXG4gICAgdmFyIHRidHMgPSBzbCAqIDg7XG4gICAgZG8ge1xuICAgICAgICBpZiAoIWxtKSB7XG4gICAgICAgICAgICAvLyBCRklOQUwgLSB0aGlzIGlzIG9ubHkgMSB3aGVuIGxhc3QgY2h1bmsgaXMgbmV4dFxuICAgICAgICAgICAgc3QuZiA9IGZpbmFsID0gYml0cyhkYXQsIHBvcywgMSk7XG4gICAgICAgICAgICAvLyB0eXBlOiAwID0gbm8gY29tcHJlc3Npb24sIDEgPSBmaXhlZCBodWZmbWFuLCAyID0gZHluYW1pYyBodWZmbWFuXG4gICAgICAgICAgICB2YXIgdHlwZSA9IGJpdHMoZGF0LCBwb3MgKyAxLCAzKTtcbiAgICAgICAgICAgIHBvcyArPSAzO1xuICAgICAgICAgICAgaWYgKCF0eXBlKSB7XG4gICAgICAgICAgICAgICAgLy8gZ28gdG8gZW5kIG9mIGJ5dGUgYm91bmRhcnlcbiAgICAgICAgICAgICAgICB2YXIgcyA9IHNoZnQocG9zKSArIDQsIGwgPSBkYXRbcyAtIDRdIHwgKGRhdFtzIC0gM10gPDwgOCksIHQgPSBzICsgbDtcbiAgICAgICAgICAgICAgICBpZiAodCA+IHNsKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChub1N0KVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgJ3VuZXhwZWN0ZWQgRU9GJztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIGVuc3VyZSBzaXplXG4gICAgICAgICAgICAgICAgaWYgKG5vQnVmKVxuICAgICAgICAgICAgICAgICAgICBjYnVmKGJ0ICsgbCk7XG4gICAgICAgICAgICAgICAgLy8gQ29weSBvdmVyIHVuY29tcHJlc3NlZCBkYXRhXG4gICAgICAgICAgICAgICAgYnVmLnNldChkYXQuc3ViYXJyYXkocywgdCksIGJ0KTtcbiAgICAgICAgICAgICAgICAvLyBHZXQgbmV3IGJpdHBvcywgdXBkYXRlIGJ5dGUgY291bnRcbiAgICAgICAgICAgICAgICBzdC5iID0gYnQgKz0gbCwgc3QucCA9IHBvcyA9IHQgKiA4O1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZSA9PSAxKVxuICAgICAgICAgICAgICAgIGxtID0gZmxybSwgZG0gPSBmZHJtLCBsYnQgPSA5LCBkYnQgPSA1O1xuICAgICAgICAgICAgZWxzZSBpZiAodHlwZSA9PSAyKSB7XG4gICAgICAgICAgICAgICAgLy8gIGxpdGVyYWwgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVuZ3Roc1xuICAgICAgICAgICAgICAgIHZhciBoTGl0ID0gYml0cyhkYXQsIHBvcywgMzEpICsgMjU3LCBoY0xlbiA9IGJpdHMoZGF0LCBwb3MgKyAxMCwgMTUpICsgNDtcbiAgICAgICAgICAgICAgICB2YXIgdGwgPSBoTGl0ICsgYml0cyhkYXQsIHBvcyArIDUsIDMxKSArIDE7XG4gICAgICAgICAgICAgICAgcG9zICs9IDE0O1xuICAgICAgICAgICAgICAgIC8vIGxlbmd0aCtkaXN0YW5jZSB0cmVlXG4gICAgICAgICAgICAgICAgdmFyIGxkdCA9IG5ldyB1OCh0bCk7XG4gICAgICAgICAgICAgICAgLy8gY29kZSBsZW5ndGggdHJlZVxuICAgICAgICAgICAgICAgIHZhciBjbHQgPSBuZXcgdTgoMTkpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaGNMZW47ICsraSkge1xuICAgICAgICAgICAgICAgICAgICAvLyB1c2UgaW5kZXggbWFwIHRvIGdldCByZWFsIGNvZGVcbiAgICAgICAgICAgICAgICAgICAgY2x0W2NsaW1baV1dID0gYml0cyhkYXQsIHBvcyArIGkgKiAzLCA3KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcG9zICs9IGhjTGVuICogMztcbiAgICAgICAgICAgICAgICAvLyBjb2RlIGxlbmd0aHMgYml0c1xuICAgICAgICAgICAgICAgIHZhciBjbGIgPSBtYXgoY2x0KSwgY2xibXNrID0gKDEgPDwgY2xiKSAtIDE7XG4gICAgICAgICAgICAgICAgaWYgKCFub1N0ICYmIHBvcyArIHRsICogKGNsYiArIDcpID4gdGJ0cylcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgLy8gY29kZSBsZW5ndGhzIG1hcFxuICAgICAgICAgICAgICAgIHZhciBjbG0gPSBoTWFwKGNsdCwgY2xiLCAxKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRsOykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgciA9IGNsbVtiaXRzKGRhdCwgcG9zLCBjbGJtc2spXTtcbiAgICAgICAgICAgICAgICAgICAgLy8gYml0cyByZWFkXG4gICAgICAgICAgICAgICAgICAgIHBvcyArPSByICYgMTU7XG4gICAgICAgICAgICAgICAgICAgIC8vIHN5bWJvbFxuICAgICAgICAgICAgICAgICAgICB2YXIgcyA9IHIgPj4+IDQ7XG4gICAgICAgICAgICAgICAgICAgIC8vIGNvZGUgbGVuZ3RoIHRvIGNvcHlcbiAgICAgICAgICAgICAgICAgICAgaWYgKHMgPCAxNikge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGR0W2krK10gPSBzO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gIGNvcHkgICBjb3VudFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSAwLCBuID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzID09IDE2KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSAzICsgYml0cyhkYXQsIHBvcywgMyksIHBvcyArPSAyLCBjID0gbGR0W2kgLSAxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHMgPT0gMTcpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IDMgKyBiaXRzKGRhdCwgcG9zLCA3KSwgcG9zICs9IDM7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChzID09IDE4KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSAxMSArIGJpdHMoZGF0LCBwb3MsIDEyNyksIHBvcyArPSA3O1xuICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKG4tLSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZHRbaSsrXSA9IGM7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gICAgbGVuZ3RoIHRyZWUgICAgICAgICAgICAgICAgIGRpc3RhbmNlIHRyZWVcbiAgICAgICAgICAgICAgICB2YXIgbHQgPSBsZHQuc3ViYXJyYXkoMCwgaExpdCksIGR0ID0gbGR0LnN1YmFycmF5KGhMaXQpO1xuICAgICAgICAgICAgICAgIC8vIG1heCBsZW5ndGggYml0c1xuICAgICAgICAgICAgICAgIGxidCA9IG1heChsdCk7XG4gICAgICAgICAgICAgICAgLy8gbWF4IGRpc3QgYml0c1xuICAgICAgICAgICAgICAgIGRidCA9IG1heChkdCk7XG4gICAgICAgICAgICAgICAgbG0gPSBoTWFwKGx0LCBsYnQsIDEpO1xuICAgICAgICAgICAgICAgIGRtID0gaE1hcChkdCwgZGJ0LCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICB0aHJvdyAnaW52YWxpZCBibG9jayB0eXBlJztcbiAgICAgICAgICAgIGlmIChwb3MgPiB0YnRzKVxuICAgICAgICAgICAgICAgIHRocm93ICd1bmV4cGVjdGVkIEVPRic7XG4gICAgICAgIH1cbiAgICAgICAgLy8gTWFrZSBzdXJlIHRoZSBidWZmZXIgY2FuIGhvbGQgdGhpcyArIHRoZSBsYXJnZXN0IHBvc3NpYmxlIGFkZGl0aW9uXG4gICAgICAgIC8vIE1heGltdW0gY2h1bmsgc2l6ZSAocHJhY3RpY2FsbHksIHRoZW9yZXRpY2FsbHkgaW5maW5pdGUpIGlzIDJeMTc7XG4gICAgICAgIGlmIChub0J1ZilcbiAgICAgICAgICAgIGNidWYoYnQgKyAxMzEwNzIpO1xuICAgICAgICB2YXIgbG1zID0gKDEgPDwgbGJ0KSAtIDEsIGRtcyA9ICgxIDw8IGRidCkgLSAxO1xuICAgICAgICB2YXIgbXhhID0gbGJ0ICsgZGJ0ICsgMTg7XG4gICAgICAgIHdoaWxlIChub1N0IHx8IHBvcyArIG14YSA8IHRidHMpIHtcbiAgICAgICAgICAgIC8vIGJpdHMgcmVhZCwgY29kZVxuICAgICAgICAgICAgdmFyIGMgPSBsbVtiaXRzMTYoZGF0LCBwb3MpICYgbG1zXSwgc3ltID0gYyA+Pj4gNDtcbiAgICAgICAgICAgIHBvcyArPSBjICYgMTU7XG4gICAgICAgICAgICBpZiAocG9zID4gdGJ0cylcbiAgICAgICAgICAgICAgICB0aHJvdyAndW5leHBlY3RlZCBFT0YnO1xuICAgICAgICAgICAgaWYgKCFjKVxuICAgICAgICAgICAgICAgIHRocm93ICdpbnZhbGlkIGxlbmd0aC9saXRlcmFsJztcbiAgICAgICAgICAgIGlmIChzeW0gPCAyNTYpXG4gICAgICAgICAgICAgICAgYnVmW2J0KytdID0gc3ltO1xuICAgICAgICAgICAgZWxzZSBpZiAoc3ltID09IDI1Nikge1xuICAgICAgICAgICAgICAgIGxtID0gbnVsbDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBhZGQgPSBzeW0gLSAyNTQ7XG4gICAgICAgICAgICAgICAgLy8gbm8gZXh0cmEgYml0cyBuZWVkZWQgaWYgbGVzc1xuICAgICAgICAgICAgICAgIGlmIChzeW0gPiAyNjQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gaW5kZXhcbiAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSBzeW0gLSAyNTcsIGIgPSBmbGViW2ldO1xuICAgICAgICAgICAgICAgICAgICBhZGQgPSBiaXRzKGRhdCwgcG9zLCAoMSA8PCBiKSAtIDEpICsgZmxbaV07XG4gICAgICAgICAgICAgICAgICAgIHBvcyArPSBiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBkaXN0XG4gICAgICAgICAgICAgICAgdmFyIGQgPSBkbVtiaXRzMTYoZGF0LCBwb3MpICYgZG1zXSwgZHN5bSA9IGQgPj4+IDQ7XG4gICAgICAgICAgICAgICAgaWYgKCFkKVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyAnaW52YWxpZCBkaXN0YW5jZSc7XG4gICAgICAgICAgICAgICAgcG9zICs9IGQgJiAxNTtcbiAgICAgICAgICAgICAgICB2YXIgZHQgPSBmZFtkc3ltXTtcbiAgICAgICAgICAgICAgICBpZiAoZHN5bSA+IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGIgPSBmZGViW2RzeW1dO1xuICAgICAgICAgICAgICAgICAgICBkdCArPSBiaXRzMTYoZGF0LCBwb3MpICYgKCgxIDw8IGIpIC0gMSksIHBvcyArPSBiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocG9zID4gdGJ0cylcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgJ3VuZXhwZWN0ZWQgRU9GJztcbiAgICAgICAgICAgICAgICBpZiAobm9CdWYpXG4gICAgICAgICAgICAgICAgICAgIGNidWYoYnQgKyAxMzEwNzIpO1xuICAgICAgICAgICAgICAgIHZhciBlbmQgPSBidCArIGFkZDtcbiAgICAgICAgICAgICAgICBmb3IgKDsgYnQgPCBlbmQ7IGJ0ICs9IDQpIHtcbiAgICAgICAgICAgICAgICAgICAgYnVmW2J0XSA9IGJ1ZltidCAtIGR0XTtcbiAgICAgICAgICAgICAgICAgICAgYnVmW2J0ICsgMV0gPSBidWZbYnQgKyAxIC0gZHRdO1xuICAgICAgICAgICAgICAgICAgICBidWZbYnQgKyAyXSA9IGJ1ZltidCArIDIgLSBkdF07XG4gICAgICAgICAgICAgICAgICAgIGJ1ZltidCArIDNdID0gYnVmW2J0ICsgMyAtIGR0XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnQgPSBlbmQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc3QubCA9IGxtLCBzdC5wID0gcG9zLCBzdC5iID0gYnQ7XG4gICAgICAgIGlmIChsbSlcbiAgICAgICAgICAgIGZpbmFsID0gMSwgc3QubSA9IGxidCwgc3QuZCA9IGRtLCBzdC5uID0gZGJ0O1xuICAgIH0gd2hpbGUgKCFmaW5hbCk7XG4gICAgcmV0dXJuIGJ0ID09IGJ1Zi5sZW5ndGggPyBidWYgOiBzbGMoYnVmLCAwLCBidCk7XG59O1xuLy8gc3RhcnRpbmcgYXQgcCwgd3JpdGUgdGhlIG1pbmltdW0gbnVtYmVyIG9mIGJpdHMgdGhhdCBjYW4gaG9sZCB2IHRvIGRcbnZhciB3Yml0cyA9IGZ1bmN0aW9uIChkLCBwLCB2KSB7XG4gICAgdiA8PD0gcCAmIDc7XG4gICAgdmFyIG8gPSAocCAvIDgpID4+IDA7XG4gICAgZFtvXSB8PSB2O1xuICAgIGRbbyArIDFdIHw9IHYgPj4+IDg7XG59O1xuLy8gc3RhcnRpbmcgYXQgcCwgd3JpdGUgdGhlIG1pbmltdW0gbnVtYmVyIG9mIGJpdHMgKD44KSB0aGF0IGNhbiBob2xkIHYgdG8gZFxudmFyIHdiaXRzMTYgPSBmdW5jdGlvbiAoZCwgcCwgdikge1xuICAgIHYgPDw9IHAgJiA3O1xuICAgIHZhciBvID0gKHAgLyA4KSA+PiAwO1xuICAgIGRbb10gfD0gdjtcbiAgICBkW28gKyAxXSB8PSB2ID4+PiA4O1xuICAgIGRbbyArIDJdIHw9IHYgPj4+IDE2O1xufTtcbi8vIGNyZWF0ZXMgY29kZSBsZW5ndGhzIGZyb20gYSBmcmVxdWVuY3kgdGFibGVcbnZhciBoVHJlZSA9IGZ1bmN0aW9uIChkLCBtYikge1xuICAgIC8vIE5lZWQgZXh0cmEgaW5mbyB0byBtYWtlIGEgdHJlZVxuICAgIHZhciB0ID0gW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIGlmIChkW2ldKVxuICAgICAgICAgICAgdC5wdXNoKHsgczogaSwgZjogZFtpXSB9KTtcbiAgICB9XG4gICAgdmFyIHMgPSB0Lmxlbmd0aDtcbiAgICB2YXIgdDIgPSB0LnNsaWNlKCk7XG4gICAgaWYgKCFzKVxuICAgICAgICByZXR1cm4gW25ldyB1OCgwKSwgMF07XG4gICAgaWYgKHMgPT0gMSkge1xuICAgICAgICB2YXIgdiA9IG5ldyB1OCh0WzBdLnMgKyAxKTtcbiAgICAgICAgdlt0WzBdLnNdID0gMTtcbiAgICAgICAgcmV0dXJuIFt2LCAxXTtcbiAgICB9XG4gICAgdC5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7IHJldHVybiBhLmYgLSBiLmY7IH0pO1xuICAgIC8vIGFmdGVyIGkyIHJlYWNoZXMgbGFzdCBpbmQsIHdpbGwgYmUgc3RvcHBlZFxuICAgIC8vIGZyZXEgbXVzdCBiZSBncmVhdGVyIHRoYW4gbGFyZ2VzdCBwb3NzaWJsZSBudW1iZXIgb2Ygc3ltYm9sc1xuICAgIHQucHVzaCh7IHM6IC0xLCBmOiAyNTAwMSB9KTtcbiAgICB2YXIgbCA9IHRbMF0sIHIgPSB0WzFdLCBpMCA9IDAsIGkxID0gMSwgaTIgPSAyO1xuICAgIHRbMF0gPSB7IHM6IC0xLCBmOiBsLmYgKyByLmYsIGw6IGwsIHI6IHIgfTtcbiAgICAvLyBlZmZpY2llbnQgYWxnb3JpdGhtIGZyb20gVVpJUC5qc1xuICAgIC8vIGkwIGlzIGxvb2tiZWhpbmQsIGkyIGlzIGxvb2thaGVhZCAtIGFmdGVyIHByb2Nlc3NpbmcgdHdvIGxvdy1mcmVxXG4gICAgLy8gc3ltYm9scyB0aGF0IGNvbWJpbmVkIGhhdmUgaGlnaCBmcmVxLCB3aWxsIHN0YXJ0IHByb2Nlc3NpbmcgaTIgKGhpZ2gtZnJlcSxcbiAgICAvLyBub24tY29tcG9zaXRlKSBzeW1ib2xzIGluc3RlYWRcbiAgICAvLyBzZWUgaHR0cHM6Ly9yZWRkaXQuY29tL3IvcGhvdG9wZWEvY29tbWVudHMvaWtla2h0L3V6aXBqc19xdWVzdGlvbnMvXG4gICAgd2hpbGUgKGkxICE9IHMgLSAxKSB7XG4gICAgICAgIGwgPSB0W3RbaTBdLmYgPCB0W2kyXS5mID8gaTArKyA6IGkyKytdO1xuICAgICAgICByID0gdFtpMCAhPSBpMSAmJiB0W2kwXS5mIDwgdFtpMl0uZiA/IGkwKysgOiBpMisrXTtcbiAgICAgICAgdFtpMSsrXSA9IHsgczogLTEsIGY6IGwuZiArIHIuZiwgbDogbCwgcjogciB9O1xuICAgIH1cbiAgICB2YXIgbWF4U3ltID0gdDJbMF0ucztcbiAgICBmb3IgKHZhciBpID0gMTsgaSA8IHM7ICsraSkge1xuICAgICAgICBpZiAodDJbaV0ucyA+IG1heFN5bSlcbiAgICAgICAgICAgIG1heFN5bSA9IHQyW2ldLnM7XG4gICAgfVxuICAgIC8vIGNvZGUgbGVuZ3Roc1xuICAgIHZhciB0ciA9IG5ldyB1MTYobWF4U3ltICsgMSk7XG4gICAgLy8gbWF4IGJpdHMgaW4gdHJlZVxuICAgIHZhciBtYnQgPSBsbih0W2kxIC0gMV0sIHRyLCAwKTtcbiAgICBpZiAobWJ0ID4gbWIpIHtcbiAgICAgICAgLy8gbW9yZSBhbGdvcml0aG1zIGZyb20gVVpJUC5qc1xuICAgICAgICAvLyBUT0RPOiBmaW5kIG91dCBob3cgdGhpcyBjb2RlIHdvcmtzIChkZWJ0KVxuICAgICAgICAvLyAgaW5kICAgIGRlYnRcbiAgICAgICAgdmFyIGkgPSAwLCBkdCA9IDA7XG4gICAgICAgIC8vICAgIGxlZnQgICAgICAgICAgICBjb3N0XG4gICAgICAgIHZhciBsZnQgPSBtYnQgLSBtYiwgY3N0ID0gMSA8PCBsZnQ7XG4gICAgICAgIHQyLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsgcmV0dXJuIHRyW2Iuc10gLSB0clthLnNdIHx8IGEuZiAtIGIuZjsgfSk7XG4gICAgICAgIGZvciAoOyBpIDwgczsgKytpKSB7XG4gICAgICAgICAgICB2YXIgaTJfMSA9IHQyW2ldLnM7XG4gICAgICAgICAgICBpZiAodHJbaTJfMV0gPiBtYikge1xuICAgICAgICAgICAgICAgIGR0ICs9IGNzdCAtICgxIDw8IChtYnQgLSB0cltpMl8xXSkpO1xuICAgICAgICAgICAgICAgIHRyW2kyXzFdID0gbWI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgZHQgPj4+PSBsZnQ7XG4gICAgICAgIHdoaWxlIChkdCA+IDApIHtcbiAgICAgICAgICAgIHZhciBpMl8yID0gdDJbaV0ucztcbiAgICAgICAgICAgIGlmICh0cltpMl8yXSA8IG1iKVxuICAgICAgICAgICAgICAgIGR0IC09IDEgPDwgKG1iIC0gdHJbaTJfMl0rKyAtIDEpO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICsraTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKDsgaSA+PSAwICYmIGR0OyAtLWkpIHtcbiAgICAgICAgICAgIHZhciBpMl8zID0gdDJbaV0ucztcbiAgICAgICAgICAgIGlmICh0cltpMl8zXSA9PSBtYikge1xuICAgICAgICAgICAgICAgIC0tdHJbaTJfM107XG4gICAgICAgICAgICAgICAgKytkdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBtYnQgPSBtYjtcbiAgICB9XG4gICAgcmV0dXJuIFtuZXcgdTgodHIpLCBtYnRdO1xufTtcbi8vIGdldCB0aGUgbWF4IGxlbmd0aCBhbmQgYXNzaWduIGxlbmd0aCBjb2Rlc1xudmFyIGxuID0gZnVuY3Rpb24gKG4sIGwsIGQpIHtcbiAgICByZXR1cm4gbi5zID09IC0xXG4gICAgICAgID8gTWF0aC5tYXgobG4obi5sLCBsLCBkICsgMSksIGxuKG4uciwgbCwgZCArIDEpKVxuICAgICAgICA6IChsW24uc10gPSBkKTtcbn07XG4vLyBsZW5ndGggY29kZXMgZ2VuZXJhdGlvblxudmFyIGxjID0gZnVuY3Rpb24gKGMpIHtcbiAgICB2YXIgcyA9IGMubGVuZ3RoO1xuICAgIC8vIE5vdGUgdGhhdCB0aGUgc2VtaWNvbG9uIHdhcyBpbnRlbnRpb25hbFxuICAgIHdoaWxlIChzICYmICFjWy0tc10pXG4gICAgICAgIDtcbiAgICB2YXIgY2wgPSBuZXcgdTE2KCsrcyk7XG4gICAgLy8gIGluZCAgICAgIG51bSAgICAgICAgIHN0cmVha1xuICAgIHZhciBjbGkgPSAwLCBjbG4gPSBjWzBdLCBjbHMgPSAxO1xuICAgIHZhciB3ID0gZnVuY3Rpb24gKHYpIHsgY2xbY2xpKytdID0gdjsgfTtcbiAgICBmb3IgKHZhciBpID0gMTsgaSA8PSBzOyArK2kpIHtcbiAgICAgICAgaWYgKGNbaV0gPT0gY2xuICYmIGkgIT0gcylcbiAgICAgICAgICAgICsrY2xzO1xuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmICghY2xuICYmIGNscyA+IDIpIHtcbiAgICAgICAgICAgICAgICBmb3IgKDsgY2xzID4gMTM4OyBjbHMgLT0gMTM4KVxuICAgICAgICAgICAgICAgICAgICB3KDMyNzU0KTtcbiAgICAgICAgICAgICAgICBpZiAoY2xzID4gMikge1xuICAgICAgICAgICAgICAgICAgICB3KGNscyA+IDEwID8gKChjbHMgLSAxMSkgPDwgNSkgfCAyODY5MCA6ICgoY2xzIC0gMykgPDwgNSkgfCAxMjMwNSk7XG4gICAgICAgICAgICAgICAgICAgIGNscyA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2xzID4gMykge1xuICAgICAgICAgICAgICAgIHcoY2xuKSwgLS1jbHM7XG4gICAgICAgICAgICAgICAgZm9yICg7IGNscyA+IDY7IGNscyAtPSA2KVxuICAgICAgICAgICAgICAgICAgICB3KDgzMDQpO1xuICAgICAgICAgICAgICAgIGlmIChjbHMgPiAyKVxuICAgICAgICAgICAgICAgICAgICB3KCgoY2xzIC0gMykgPDwgNSkgfCA4MjA4KSwgY2xzID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHdoaWxlIChjbHMtLSlcbiAgICAgICAgICAgICAgICB3KGNsbik7XG4gICAgICAgICAgICBjbHMgPSAxO1xuICAgICAgICAgICAgY2xuID0gY1tpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gW2NsLnN1YmFycmF5KDAsIGNsaSksIHNdO1xufTtcbi8vIGNhbGN1bGF0ZSB0aGUgbGVuZ3RoIG9mIG91dHB1dCBmcm9tIHRyZWUsIGNvZGUgbGVuZ3Roc1xudmFyIGNsZW4gPSBmdW5jdGlvbiAoY2YsIGNsKSB7XG4gICAgdmFyIGwgPSAwO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2wubGVuZ3RoOyArK2kpXG4gICAgICAgIGwgKz0gY2ZbaV0gKiBjbFtpXTtcbiAgICByZXR1cm4gbDtcbn07XG4vLyB3cml0ZXMgYSBmaXhlZCBibG9ja1xuLy8gcmV0dXJucyB0aGUgbmV3IGJpdCBwb3NcbnZhciB3ZmJsayA9IGZ1bmN0aW9uIChvdXQsIHBvcywgZGF0KSB7XG4gICAgLy8gbm8gbmVlZCB0byB3cml0ZSAwMCBhcyB0eXBlOiBUeXBlZEFycmF5IGRlZmF1bHRzIHRvIDBcbiAgICB2YXIgcyA9IGRhdC5sZW5ndGg7XG4gICAgdmFyIG8gPSBzaGZ0KHBvcyArIDIpO1xuICAgIG91dFtvXSA9IHMgJiAyNTU7XG4gICAgb3V0W28gKyAxXSA9IHMgPj4+IDg7XG4gICAgb3V0W28gKyAyXSA9IG91dFtvXSBeIDI1NTtcbiAgICBvdXRbbyArIDNdID0gb3V0W28gKyAxXSBeIDI1NTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHM7ICsraSlcbiAgICAgICAgb3V0W28gKyBpICsgNF0gPSBkYXRbaV07XG4gICAgcmV0dXJuIChvICsgNCArIHMpICogODtcbn07XG4vLyB3cml0ZXMgYSBibG9ja1xudmFyIHdibGsgPSBmdW5jdGlvbiAoZGF0LCBvdXQsIGZpbmFsLCBzeW1zLCBsZiwgZGYsIGViLCBsaSwgYnMsIGJsLCBwKSB7XG4gICAgd2JpdHMob3V0LCBwKyssIGZpbmFsKTtcbiAgICArK2xmWzI1Nl07XG4gICAgdmFyIF9hID0gaFRyZWUobGYsIDE1KSwgZGx0ID0gX2FbMF0sIG1sYiA9IF9hWzFdO1xuICAgIHZhciBfYiA9IGhUcmVlKGRmLCAxNSksIGRkdCA9IF9iWzBdLCBtZGIgPSBfYlsxXTtcbiAgICB2YXIgX2MgPSBsYyhkbHQpLCBsY2x0ID0gX2NbMF0sIG5sYyA9IF9jWzFdO1xuICAgIHZhciBfZCA9IGxjKGRkdCksIGxjZHQgPSBfZFswXSwgbmRjID0gX2RbMV07XG4gICAgdmFyIGxjZnJlcSA9IG5ldyB1MTYoMTkpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGNsdC5sZW5ndGg7ICsraSlcbiAgICAgICAgbGNmcmVxW2xjbHRbaV0gJiAzMV0rKztcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxjZHQubGVuZ3RoOyArK2kpXG4gICAgICAgIGxjZnJlcVtsY2R0W2ldICYgMzFdKys7XG4gICAgdmFyIF9lID0gaFRyZWUobGNmcmVxLCA3KSwgbGN0ID0gX2VbMF0sIG1sY2IgPSBfZVsxXTtcbiAgICB2YXIgbmxjYyA9IDE5O1xuICAgIGZvciAoOyBubGNjID4gNCAmJiAhbGN0W2NsaW1bbmxjYyAtIDFdXTsgLS1ubGNjKVxuICAgICAgICA7XG4gICAgdmFyIGZsZW4gPSAoYmwgKyA1KSA8PCAzO1xuICAgIHZhciBmdGxlbiA9IGNsZW4obGYsIGZsdCkgKyBjbGVuKGRmLCBmZHQpICsgZWI7XG4gICAgdmFyIGR0bGVuID0gY2xlbihsZiwgZGx0KSArIGNsZW4oZGYsIGRkdCkgKyBlYiArIDE0ICsgMyAqIG5sY2MgKyBjbGVuKGxjZnJlcSwgbGN0KSArICgyICogbGNmcmVxWzE2XSArIDMgKiBsY2ZyZXFbMTddICsgNyAqIGxjZnJlcVsxOF0pO1xuICAgIGlmIChmbGVuIDw9IGZ0bGVuICYmIGZsZW4gPD0gZHRsZW4pXG4gICAgICAgIHJldHVybiB3ZmJsayhvdXQsIHAsIGRhdC5zdWJhcnJheShicywgYnMgKyBibCkpO1xuICAgIHZhciBsbSwgbGwsIGRtLCBkbDtcbiAgICB3Yml0cyhvdXQsIHAsIDEgKyAoZHRsZW4gPCBmdGxlbikpLCBwICs9IDI7XG4gICAgaWYgKGR0bGVuIDwgZnRsZW4pIHtcbiAgICAgICAgbG0gPSBoTWFwKGRsdCwgbWxiLCAwKSwgbGwgPSBkbHQsIGRtID0gaE1hcChkZHQsIG1kYiwgMCksIGRsID0gZGR0O1xuICAgICAgICB2YXIgbGxtID0gaE1hcChsY3QsIG1sY2IsIDApO1xuICAgICAgICB3Yml0cyhvdXQsIHAsIG5sYyAtIDI1Nyk7XG4gICAgICAgIHdiaXRzKG91dCwgcCArIDUsIG5kYyAtIDEpO1xuICAgICAgICB3Yml0cyhvdXQsIHAgKyAxMCwgbmxjYyAtIDQpO1xuICAgICAgICBwICs9IDE0O1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5sY2M7ICsraSlcbiAgICAgICAgICAgIHdiaXRzKG91dCwgcCArIDMgKiBpLCBsY3RbY2xpbVtpXV0pO1xuICAgICAgICBwICs9IDMgKiBubGNjO1xuICAgICAgICB2YXIgbGN0cyA9IFtsY2x0LCBsY2R0XTtcbiAgICAgICAgZm9yICh2YXIgaXQgPSAwOyBpdCA8IDI7ICsraXQpIHtcbiAgICAgICAgICAgIHZhciBjbGN0ID0gbGN0c1tpdF07XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNsY3QubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICB2YXIgbGVuID0gY2xjdFtpXSAmIDMxO1xuICAgICAgICAgICAgICAgIHdiaXRzKG91dCwgcCwgbGxtW2xlbl0pLCBwICs9IGxjdFtsZW5dO1xuICAgICAgICAgICAgICAgIGlmIChsZW4gPiAxNSlcbiAgICAgICAgICAgICAgICAgICAgd2JpdHMob3V0LCBwLCAoY2xjdFtpXSA+Pj4gNSkgJiAxMjcpLCBwICs9IGNsY3RbaV0gPj4+IDEyO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBsbSA9IGZsbSwgbGwgPSBmbHQsIGRtID0gZmRtLCBkbCA9IGZkdDtcbiAgICB9XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaTsgKytpKSB7XG4gICAgICAgIGlmIChzeW1zW2ldID4gMjU1KSB7XG4gICAgICAgICAgICB2YXIgbGVuID0gKHN5bXNbaV0gPj4+IDE4KSAmIDMxO1xuICAgICAgICAgICAgd2JpdHMxNihvdXQsIHAsIGxtW2xlbiArIDI1N10pLCBwICs9IGxsW2xlbiArIDI1N107XG4gICAgICAgICAgICBpZiAobGVuID4gNylcbiAgICAgICAgICAgICAgICB3Yml0cyhvdXQsIHAsIChzeW1zW2ldID4+PiAyMykgJiAzMSksIHAgKz0gZmxlYltsZW5dO1xuICAgICAgICAgICAgdmFyIGRzdCA9IHN5bXNbaV0gJiAzMTtcbiAgICAgICAgICAgIHdiaXRzMTYob3V0LCBwLCBkbVtkc3RdKSwgcCArPSBkbFtkc3RdO1xuICAgICAgICAgICAgaWYgKGRzdCA+IDMpXG4gICAgICAgICAgICAgICAgd2JpdHMxNihvdXQsIHAsIChzeW1zW2ldID4+PiA1KSAmIDgxOTEpLCBwICs9IGZkZWJbZHN0XTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHdiaXRzMTYob3V0LCBwLCBsbVtzeW1zW2ldXSksIHAgKz0gbGxbc3ltc1tpXV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgd2JpdHMxNihvdXQsIHAsIGxtWzI1Nl0pO1xuICAgIHJldHVybiBwICsgbGxbMjU2XTtcbn07XG4vLyBkZWZsYXRlIG9wdGlvbnMgKG5pY2UgPDwgMTMpIHwgY2hhaW5cbnZhciBkZW8gPSAvKiNfX1BVUkVfXyovIG5ldyB1MzIoWzY1NTQwLCAxMzEwODAsIDEzMTA4OCwgMTMxMTA0LCAyNjIxNzYsIDEwNDg3MDQsIDEwNDg4MzIsIDIxMTQ1NjAsIDIxMTc2MzJdKTtcbi8vIGVtcHR5XG52YXIgZXQgPSAvKiNfX1BVUkVfXyovIG5ldyB1OCgwKTtcbi8vIGNvbXByZXNzZXMgZGF0YSBpbnRvIGEgcmF3IERFRkxBVEUgYnVmZmVyXG52YXIgZGZsdCA9IGZ1bmN0aW9uIChkYXQsIGx2bCwgcGx2bCwgcHJlLCBwb3N0LCBsc3QpIHtcbiAgICB2YXIgcyA9IGRhdC5sZW5ndGg7XG4gICAgdmFyIG8gPSBuZXcgdTgocHJlICsgcyArIDUgKiAoMSArIE1hdGguZmxvb3IocyAvIDcwMDApKSArIHBvc3QpO1xuICAgIC8vIHdyaXRpbmcgdG8gdGhpcyB3cml0ZXMgdG8gdGhlIG91dHB1dCBidWZmZXJcbiAgICB2YXIgdyA9IG8uc3ViYXJyYXkocHJlLCBvLmxlbmd0aCAtIHBvc3QpO1xuICAgIHZhciBwb3MgPSAwO1xuICAgIGlmICghbHZsIHx8IHMgPCA4KSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDw9IHM7IGkgKz0gNjU1MzUpIHtcbiAgICAgICAgICAgIC8vIGVuZFxuICAgICAgICAgICAgdmFyIGUgPSBpICsgNjU1MzU7XG4gICAgICAgICAgICBpZiAoZSA8IHMpIHtcbiAgICAgICAgICAgICAgICAvLyB3cml0ZSBmdWxsIGJsb2NrXG4gICAgICAgICAgICAgICAgcG9zID0gd2ZibGsodywgcG9zLCBkYXQuc3ViYXJyYXkoaSwgZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gd3JpdGUgZmluYWwgYmxvY2tcbiAgICAgICAgICAgICAgICB3W2ldID0gbHN0O1xuICAgICAgICAgICAgICAgIHBvcyA9IHdmYmxrKHcsIHBvcywgZGF0LnN1YmFycmF5KGksIHMpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdmFyIG9wdCA9IGRlb1tsdmwgLSAxXTtcbiAgICAgICAgdmFyIG4gPSBvcHQgPj4+IDEzLCBjID0gb3B0ICYgODE5MTtcbiAgICAgICAgdmFyIG1za18xID0gKDEgPDwgcGx2bCkgLSAxO1xuICAgICAgICAvLyAgICBwcmV2IDItYnl0ZSB2YWwgbWFwICAgIGN1cnIgMi1ieXRlIHZhbCBtYXBcbiAgICAgICAgdmFyIHByZXYgPSBuZXcgdTE2KDMyNzY4KSwgaGVhZCA9IG5ldyB1MTYobXNrXzEgKyAxKTtcbiAgICAgICAgdmFyIGJzMV8xID0gTWF0aC5jZWlsKHBsdmwgLyAzKSwgYnMyXzEgPSAyICogYnMxXzE7XG4gICAgICAgIHZhciBoc2ggPSBmdW5jdGlvbiAoaSkgeyByZXR1cm4gKGRhdFtpXSBeIChkYXRbaSArIDFdIDw8IGJzMV8xKSBeIChkYXRbaSArIDJdIDw8IGJzMl8xKSkgJiBtc2tfMTsgfTtcbiAgICAgICAgLy8gMjQ1NzYgaXMgYW4gYXJiaXRyYXJ5IG51bWJlciBvZiBtYXhpbXVtIHN5bWJvbHMgcGVyIGJsb2NrXG4gICAgICAgIC8vIDQyNCBidWZmZXIgZm9yIGxhc3QgYmxvY2tcbiAgICAgICAgdmFyIHN5bXMgPSBuZXcgdTMyKDI1MDAwKTtcbiAgICAgICAgLy8gbGVuZ3RoL2xpdGVyYWwgZnJlcSAgIGRpc3RhbmNlIGZyZXFcbiAgICAgICAgdmFyIGxmID0gbmV3IHUxNigyODgpLCBkZiA9IG5ldyB1MTYoMzIpO1xuICAgICAgICAvLyAgbC9sY250ICBleGJpdHMgIGluZGV4ICBsL2xpbmQgIHdhaXRkeCAgYml0cG9zXG4gICAgICAgIHZhciBsY18xID0gMCwgZWIgPSAwLCBpID0gMCwgbGkgPSAwLCB3aSA9IDAsIGJzID0gMDtcbiAgICAgICAgZm9yICg7IGkgPCBzOyArK2kpIHtcbiAgICAgICAgICAgIC8vIGhhc2ggdmFsdWVcbiAgICAgICAgICAgIHZhciBodiA9IGhzaChpKTtcbiAgICAgICAgICAgIC8vIGluZGV4IG1vZCAzMjc2OFxuICAgICAgICAgICAgdmFyIGltb2QgPSBpICYgMzI3Njc7XG4gICAgICAgICAgICAvLyBwcmV2aW91cyBpbmRleCB3aXRoIHRoaXMgdmFsdWVcbiAgICAgICAgICAgIHZhciBwaW1vZCA9IGhlYWRbaHZdO1xuICAgICAgICAgICAgcHJldltpbW9kXSA9IHBpbW9kO1xuICAgICAgICAgICAgaGVhZFtodl0gPSBpbW9kO1xuICAgICAgICAgICAgLy8gV2UgYWx3YXlzIHNob3VsZCBtb2RpZnkgaGVhZCBhbmQgcHJldiwgYnV0IG9ubHkgYWRkIHN5bWJvbHMgaWZcbiAgICAgICAgICAgIC8vIHRoaXMgZGF0YSBpcyBub3QgeWV0IHByb2Nlc3NlZCAoXCJ3YWl0XCIgZm9yIHdhaXQgaW5kZXgpXG4gICAgICAgICAgICBpZiAod2kgPD0gaSkge1xuICAgICAgICAgICAgICAgIC8vIGJ5dGVzIHJlbWFpbmluZ1xuICAgICAgICAgICAgICAgIHZhciByZW0gPSBzIC0gaTtcbiAgICAgICAgICAgICAgICBpZiAoKGxjXzEgPiA3MDAwIHx8IGxpID4gMjQ1NzYpICYmIHJlbSA+IDQyMykge1xuICAgICAgICAgICAgICAgICAgICBwb3MgPSB3YmxrKGRhdCwgdywgMCwgc3ltcywgbGYsIGRmLCBlYiwgbGksIGJzLCBpIC0gYnMsIHBvcyk7XG4gICAgICAgICAgICAgICAgICAgIGxpID0gbGNfMSA9IGViID0gMCwgYnMgPSBpO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IDI4NjsgKytqKVxuICAgICAgICAgICAgICAgICAgICAgICAgbGZbal0gPSAwO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IDMwOyArK2opXG4gICAgICAgICAgICAgICAgICAgICAgICBkZltqXSA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vICBsZW4gICAgZGlzdCAgIGNoYWluXG4gICAgICAgICAgICAgICAgdmFyIGwgPSAyLCBkID0gMCwgY2hfMSA9IGMsIGRpZiA9IChpbW9kIC0gcGltb2QpICYgMzI3Njc7XG4gICAgICAgICAgICAgICAgaWYgKHJlbSA+IDIgJiYgaHYgPT0gaHNoKGkgLSBkaWYpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtYXhuID0gTWF0aC5taW4obiwgcmVtKSAtIDE7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtYXhkID0gTWF0aC5taW4oMzI3NjcsIGkpO1xuICAgICAgICAgICAgICAgICAgICAvLyBtYXggcG9zc2libGUgbGVuZ3RoXG4gICAgICAgICAgICAgICAgICAgIC8vIG5vdCBjYXBwZWQgYXQgZGlmIGJlY2F1c2UgZGVjb21wcmVzc29ycyBpbXBsZW1lbnQgXCJyb2xsaW5nXCIgaW5kZXggcG9wdWxhdGlvblxuICAgICAgICAgICAgICAgICAgICB2YXIgbWwgPSBNYXRoLm1pbigyNTgsIHJlbSk7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChkaWYgPD0gbWF4ZCAmJiAtLWNoXzEgJiYgaW1vZCAhPSBwaW1vZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdFtpICsgbF0gPT0gZGF0W2kgKyBsIC0gZGlmXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBubCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICg7IG5sIDwgbWwgJiYgZGF0W2kgKyBubF0gPT0gZGF0W2kgKyBubCAtIGRpZl07ICsrbmwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobmwgPiBsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSBubCwgZCA9IGRpZjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYnJlYWsgb3V0IGVhcmx5IHdoZW4gd2UgcmVhY2ggXCJuaWNlXCIgKHdlIGFyZSBzYXRpc2ZpZWQgZW5vdWdoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobmwgPiBtYXhuKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG5vdywgZmluZCB0aGUgcmFyZXN0IDItYnl0ZSBzZXF1ZW5jZSB3aXRoaW4gdGhpc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBsZW5ndGggb2YgbGl0ZXJhbHMgYW5kIHNlYXJjaCBmb3IgdGhhdCBpbnN0ZWFkLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBNdWNoIGZhc3RlciB0aGFuIGp1c3QgdXNpbmcgdGhlIHN0YXJ0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtbWQgPSBNYXRoLm1pbihkaWYsIG5sIC0gMik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtZCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbW1kOyArK2opIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0aSA9IChpIC0gZGlmICsgaiArIDMyNzY4KSAmIDMyNzY3O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHB0aSA9IHByZXZbdGldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNkID0gKHRpIC0gcHRpICsgMzI3NjgpICYgMzI3Njc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2QgPiBtZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZCA9IGNkLCBwaW1vZCA9IHRpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2hlY2sgdGhlIHByZXZpb3VzIG1hdGNoXG4gICAgICAgICAgICAgICAgICAgICAgICBpbW9kID0gcGltb2QsIHBpbW9kID0gcHJldltpbW9kXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpZiArPSAoaW1vZCAtIHBpbW9kICsgMzI3NjgpICYgMzI3Njc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gZCB3aWxsIGJlIG5vbnplcm8gb25seSB3aGVuIGEgbWF0Y2ggd2FzIGZvdW5kXG4gICAgICAgICAgICAgICAgaWYgKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gc3RvcmUgYm90aCBkaXN0IGFuZCBsZW4gZGF0YSBpbiBvbmUgVWludDMyXG4gICAgICAgICAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSB0aGlzIGlzIHJlY29nbml6ZWQgYXMgYSBsZW4vZGlzdCB3aXRoIDI4dGggYml0ICgyXjI4KVxuICAgICAgICAgICAgICAgICAgICBzeW1zW2xpKytdID0gMjY4NDM1NDU2IHwgKHJldmZsW2xdIDw8IDE4KSB8IHJldmZkW2RdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbGluID0gcmV2ZmxbbF0gJiAzMSwgZGluID0gcmV2ZmRbZF0gJiAzMTtcbiAgICAgICAgICAgICAgICAgICAgZWIgKz0gZmxlYltsaW5dICsgZmRlYltkaW5dO1xuICAgICAgICAgICAgICAgICAgICArK2xmWzI1NyArIGxpbl07XG4gICAgICAgICAgICAgICAgICAgICsrZGZbZGluXTtcbiAgICAgICAgICAgICAgICAgICAgd2kgPSBpICsgbDtcbiAgICAgICAgICAgICAgICAgICAgKytsY18xO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc3ltc1tsaSsrXSA9IGRhdFtpXTtcbiAgICAgICAgICAgICAgICAgICAgKytsZltkYXRbaV1dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBwb3MgPSB3YmxrKGRhdCwgdywgbHN0LCBzeW1zLCBsZiwgZGYsIGViLCBsaSwgYnMsIGkgLSBicywgcG9zKTtcbiAgICAgICAgLy8gdGhpcyBpcyB0aGUgZWFzaWVzdCB3YXkgdG8gYXZvaWQgbmVlZGluZyB0byBtYWludGFpbiBzdGF0ZVxuICAgICAgICBpZiAoIWxzdClcbiAgICAgICAgICAgIHBvcyA9IHdmYmxrKHcsIHBvcywgZXQpO1xuICAgIH1cbiAgICByZXR1cm4gc2xjKG8sIDAsIHByZSArIHNoZnQocG9zKSArIHBvc3QpO1xufTtcbi8vIENSQzMyIHRhYmxlXG52YXIgY3JjdCA9IC8qI19fUFVSRV9fKi8gKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgdCA9IG5ldyB1MzIoMjU2KTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IDI1NjsgKytpKSB7XG4gICAgICAgIHZhciBjID0gaSwgayA9IDk7XG4gICAgICAgIHdoaWxlICgtLWspXG4gICAgICAgICAgICBjID0gKChjICYgMSkgJiYgMHhFREI4ODMyMCkgXiAoYyA+Pj4gMSk7XG4gICAgICAgIHRbaV0gPSBjO1xuICAgIH1cbiAgICByZXR1cm4gdDtcbn0pKCk7XG4vLyBDUkMzMlxudmFyIGNyYyA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgYyA9IDB4RkZGRkZGRkY7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcDogZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgIC8vIGNsb3N1cmVzIGhhdmUgYXdmdWwgcGVyZm9ybWFuY2VcbiAgICAgICAgICAgIHZhciBjciA9IGM7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGQubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgY3IgPSBjcmN0WyhjciAmIDI1NSkgXiBkW2ldXSBeIChjciA+Pj4gOCk7XG4gICAgICAgICAgICBjID0gY3I7XG4gICAgICAgIH0sXG4gICAgICAgIGQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGMgXiAweEZGRkZGRkZGOyB9XG4gICAgfTtcbn07XG4vLyBBbGRlcjMyXG52YXIgYWRsZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGEgPSAxLCBiID0gMDtcbiAgICByZXR1cm4ge1xuICAgICAgICBwOiBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgLy8gY2xvc3VyZXMgaGF2ZSBhd2Z1bCBwZXJmb3JtYW5jZVxuICAgICAgICAgICAgdmFyIG4gPSBhLCBtID0gYjtcbiAgICAgICAgICAgIHZhciBsID0gZC5sZW5ndGg7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSAhPSBsOykge1xuICAgICAgICAgICAgICAgIHZhciBlID0gTWF0aC5taW4oaSArIDU1NTIsIGwpO1xuICAgICAgICAgICAgICAgIGZvciAoOyBpIDwgZTsgKytpKVxuICAgICAgICAgICAgICAgICAgICBuICs9IGRbaV0sIG0gKz0gbjtcbiAgICAgICAgICAgICAgICBuICU9IDY1NTIxLCBtICU9IDY1NTIxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYSA9IG4sIGIgPSBtO1xuICAgICAgICB9LFxuICAgICAgICBkOiBmdW5jdGlvbiAoKSB7IHJldHVybiAoKGEgPj4+IDgpIDw8IDE2IHwgKGIgJiAyNTUpIDw8IDggfCAoYiA+Pj4gOCkpICsgKChhICYgMjU1KSA8PCAyMykgKiAyOyB9XG4gICAgfTtcbn07XG47XG4vLyBkZWZsYXRlIHdpdGggb3B0c1xudmFyIGRvcHQgPSBmdW5jdGlvbiAoZGF0LCBvcHQsIHByZSwgcG9zdCwgc3QpIHtcbiAgICByZXR1cm4gZGZsdChkYXQsIG9wdC5sZXZlbCA9PSBudWxsID8gNiA6IG9wdC5sZXZlbCwgb3B0Lm1lbSA9PSBudWxsID8gTWF0aC5jZWlsKE1hdGgubWF4KDgsIE1hdGgubWluKDEzLCBNYXRoLmxvZyhkYXQubGVuZ3RoKSkpICogMS41KSA6ICgxMiArIG9wdC5tZW0pLCBwcmUsIHBvc3QsICFzdCk7XG59O1xuLy8gV2FsbWFydCBvYmplY3Qgc3ByZWFkXG52YXIgbXJnID0gZnVuY3Rpb24gKGEsIGIpIHtcbiAgICB2YXIgbyA9IHt9O1xuICAgIGZvciAodmFyIGsgaW4gYSlcbiAgICAgICAgb1trXSA9IGFba107XG4gICAgZm9yICh2YXIgayBpbiBiKVxuICAgICAgICBvW2tdID0gYltrXTtcbiAgICByZXR1cm4gbztcbn07XG4vLyB3b3JrZXIgY2xvbmVcbi8vIFRoaXMgaXMgcG9zc2libHkgdGhlIGNyYXppZXN0IHBhcnQgb2YgdGhlIGVudGlyZSBjb2RlYmFzZSwgZGVzcGl0ZSBob3cgc2ltcGxlIGl0IG1heSBzZWVtLlxuLy8gVGhlIG9ubHkgcGFyYW1ldGVyIHRvIHRoaXMgZnVuY3Rpb24gaXMgYSBjbG9zdXJlIHRoYXQgcmV0dXJucyBhbiBhcnJheSBvZiB2YXJpYWJsZXMgb3V0c2lkZSBvZiB0aGUgZnVuY3Rpb24gc2NvcGUuXG4vLyBXZSdyZSBnb2luZyB0byB0cnkgdG8gZmlndXJlIG91dCB0aGUgdmFyaWFibGUgbmFtZXMgdXNlZCBpbiB0aGUgY2xvc3VyZSBhcyBzdHJpbmdzIGJlY2F1c2UgdGhhdCBpcyBjcnVjaWFsIGZvciB3b3JrZXJpemF0aW9uLlxuLy8gV2Ugd2lsbCByZXR1cm4gYW4gb2JqZWN0IG1hcHBpbmcgb2YgdHJ1ZSB2YXJpYWJsZSBuYW1lIHRvIHZhbHVlIChiYXNpY2FsbHksIHRoZSBjdXJyZW50IHNjb3BlIGFzIGEgSlMgb2JqZWN0KS5cbi8vIFRoZSByZWFzb24gd2UgY2FuJ3QganVzdCB1c2UgdGhlIG9yaWdpbmFsIHZhcmlhYmxlIG5hbWVzIGlzIG1pbmlmaWVycyBtYW5nbGluZyB0aGUgdG9wbGV2ZWwgc2NvcGUuXG4vLyBUaGlzIHRvb2sgbWUgdGhyZWUgd2Vla3MgdG8gZmlndXJlIG91dCBob3cgdG8gZG8uXG52YXIgd2NsbiA9IGZ1bmN0aW9uIChmbiwgZm5TdHIsIHRkKSB7XG4gICAgdmFyIGR0ID0gZm4oKTtcbiAgICB2YXIgc3QgPSBmbi50b1N0cmluZygpO1xuICAgIHZhciBrcyA9IHN0LnNsaWNlKHN0LmluZGV4T2YoJ1snKSArIDEsIHN0Lmxhc3RJbmRleE9mKCddJykpLnJlcGxhY2UoLyAvZywgJycpLnNwbGl0KCcsJyk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkdC5sZW5ndGg7ICsraSkge1xuICAgICAgICB2YXIgdiA9IGR0W2ldLCBrID0ga3NbaV07XG4gICAgICAgIGlmICh0eXBlb2YgdiA9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBmblN0ciArPSAnOycgKyBrICsgJz0nO1xuICAgICAgICAgICAgdmFyIHN0XzEgPSB2LnRvU3RyaW5nKCk7XG4gICAgICAgICAgICBpZiAodi5wcm90b3R5cGUpIHtcbiAgICAgICAgICAgICAgICAvLyBmb3IgZ2xvYmFsIG9iamVjdHNcbiAgICAgICAgICAgICAgICBpZiAoc3RfMS5pbmRleE9mKCdbbmF0aXZlIGNvZGVdJykgIT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNwSW5kID0gc3RfMS5pbmRleE9mKCcgJywgOCkgKyAxO1xuICAgICAgICAgICAgICAgICAgICBmblN0ciArPSBzdF8xLnNsaWNlKHNwSW5kLCBzdF8xLmluZGV4T2YoJygnLCBzcEluZCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZm5TdHIgKz0gc3RfMTtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgdCBpbiB2LnByb3RvdHlwZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGZuU3RyICs9ICc7JyArIGsgKyAnLnByb3RvdHlwZS4nICsgdCArICc9JyArIHYucHJvdG90eXBlW3RdLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIGZuU3RyICs9IHN0XzE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgdGRba10gPSB2O1xuICAgIH1cbiAgICByZXR1cm4gW2ZuU3RyLCB0ZF07XG59O1xudmFyIGNoID0gW107XG4vLyBjbG9uZSBidWZzXG52YXIgY2JmcyA9IGZ1bmN0aW9uICh2KSB7XG4gICAgdmFyIHRsID0gW107XG4gICAgZm9yICh2YXIgayBpbiB2KSB7XG4gICAgICAgIGlmICh2W2tdIGluc3RhbmNlb2YgdTggfHwgdltrXSBpbnN0YW5jZW9mIHUxNiB8fCB2W2tdIGluc3RhbmNlb2YgdTMyKVxuICAgICAgICAgICAgdGwucHVzaCgodltrXSA9IG5ldyB2W2tdLmNvbnN0cnVjdG9yKHZba10pKS5idWZmZXIpO1xuICAgIH1cbiAgICByZXR1cm4gdGw7XG59O1xuLy8gdXNlIGEgd29ya2VyIHRvIGV4ZWN1dGUgY29kZVxudmFyIHdya3IgPSBmdW5jdGlvbiAoZm5zLCBpbml0LCBpZCwgY2IpIHtcbiAgICB2YXIgX2E7XG4gICAgaWYgKCFjaFtpZF0pIHtcbiAgICAgICAgdmFyIGZuU3RyID0gJycsIHRkXzEgPSB7fSwgbSA9IGZucy5sZW5ndGggLSAxO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG07ICsraSlcbiAgICAgICAgICAgIF9hID0gd2NsbihmbnNbaV0sIGZuU3RyLCB0ZF8xKSwgZm5TdHIgPSBfYVswXSwgdGRfMSA9IF9hWzFdO1xuICAgICAgICBjaFtpZF0gPSB3Y2xuKGZuc1ttXSwgZm5TdHIsIHRkXzEpO1xuICAgIH1cbiAgICB2YXIgdGQgPSBtcmcoe30sIGNoW2lkXVsxXSk7XG4gICAgcmV0dXJuIHdrKGNoW2lkXVswXSArICc7b25tZXNzYWdlPWZ1bmN0aW9uKGUpe2Zvcih2YXIgayBpbiBlLmRhdGEpc2VsZltrXT1lLmRhdGFba107b25tZXNzYWdlPScgKyBpbml0LnRvU3RyaW5nKCkgKyAnfScsIGlkLCB0ZCwgY2Jmcyh0ZCksIGNiKTtcbn07XG4vLyBiYXNlIGFzeW5jIGluZmxhdGUgZm5cbnZhciBiSW5mbHQgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBbdTgsIHUxNiwgdTMyLCBmbGViLCBmZGViLCBjbGltLCBmbCwgZmQsIGZscm0sIGZkcm0sIHJldiwgaE1hcCwgbWF4LCBiaXRzLCBiaXRzMTYsIHNoZnQsIHNsYywgaW5mbHQsIGluZmxhdGVTeW5jLCBwYmYsIGd1OF07IH07XG52YXIgYkRmbHQgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBbdTgsIHUxNiwgdTMyLCBmbGViLCBmZGViLCBjbGltLCByZXZmbCwgcmV2ZmQsIGZsbSwgZmx0LCBmZG0sIGZkdCwgcmV2LCBkZW8sIGV0LCBoTWFwLCB3Yml0cywgd2JpdHMxNiwgaFRyZWUsIGxuLCBsYywgY2xlbiwgd2ZibGssIHdibGssIHNoZnQsIHNsYywgZGZsdCwgZG9wdCwgZGVmbGF0ZVN5bmMsIHBiZl07IH07XG4vLyBnemlwIGV4dHJhXG52YXIgZ3plID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gW2d6aCwgZ3pobCwgd2J5dGVzLCBjcmMsIGNyY3RdOyB9O1xuLy8gZ3VuemlwIGV4dHJhXG52YXIgZ3V6ZSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIFtnenMsIGd6bF07IH07XG4vLyB6bGliIGV4dHJhXG52YXIgemxlID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gW3psaCwgd2J5dGVzLCBhZGxlcl07IH07XG4vLyB1bnpsaWIgZXh0cmFcbnZhciB6dWxlID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gW3psdl07IH07XG4vLyBwb3N0IGJ1ZlxudmFyIHBiZiA9IGZ1bmN0aW9uIChtc2cpIHsgcmV0dXJuIHBvc3RNZXNzYWdlKG1zZywgW21zZy5idWZmZXJdKTsgfTtcbi8vIGdldCB1OFxudmFyIGd1OCA9IGZ1bmN0aW9uIChvKSB7IHJldHVybiBvICYmIG8uc2l6ZSAmJiBuZXcgdTgoby5zaXplKTsgfTtcbi8vIGFzeW5jIGhlbHBlclxudmFyIGNiaWZ5ID0gZnVuY3Rpb24gKGRhdCwgb3B0cywgZm5zLCBpbml0LCBpZCwgY2IpIHtcbiAgICB2YXIgdyA9IHdya3IoZm5zLCBpbml0LCBpZCwgZnVuY3Rpb24gKGVyciwgZGF0KSB7XG4gICAgICAgIHcudGVybWluYXRlKCk7XG4gICAgICAgIGNiKGVyciwgZGF0KTtcbiAgICB9KTtcbiAgICBpZiAoIW9wdHMuY29uc3VtZSlcbiAgICAgICAgZGF0ID0gbmV3IHU4KGRhdCk7XG4gICAgdy5wb3N0TWVzc2FnZShbZGF0LCBvcHRzXSwgW2RhdC5idWZmZXJdKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkgeyB3LnRlcm1pbmF0ZSgpOyB9O1xufTtcbi8vIGF1dG8gc3RyZWFtXG52YXIgYXN0cm0gPSBmdW5jdGlvbiAoc3RybSkge1xuICAgIHN0cm0ub25kYXRhID0gZnVuY3Rpb24gKGRhdCwgZmluYWwpIHsgcmV0dXJuIHBvc3RNZXNzYWdlKFtkYXQsIGZpbmFsXSwgW2RhdC5idWZmZXJdKTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGV2KSB7IHJldHVybiBzdHJtLnB1c2goZXYuZGF0YVswXSwgZXYuZGF0YVsxXSk7IH07XG59O1xuLy8gYXN5bmMgc3RyZWFtIGF0dGFjaFxudmFyIGFzdHJtaWZ5ID0gZnVuY3Rpb24gKGZucywgc3RybSwgb3B0cywgaW5pdCwgaWQpIHtcbiAgICB2YXIgdDtcbiAgICB2YXIgdyA9IHdya3IoZm5zLCBpbml0LCBpZCwgZnVuY3Rpb24gKGVyciwgZGF0KSB7XG4gICAgICAgIGlmIChlcnIpXG4gICAgICAgICAgICB3LnRlcm1pbmF0ZSgpLCBzdHJtLm9uZGF0YS5jYWxsKHN0cm0sIGVycik7XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKGRhdFsxXSlcbiAgICAgICAgICAgICAgICB3LnRlcm1pbmF0ZSgpO1xuICAgICAgICAgICAgc3RybS5vbmRhdGEuY2FsbChzdHJtLCBlcnIsIGRhdFswXSwgZGF0WzFdKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHcucG9zdE1lc3NhZ2Uob3B0cyk7XG4gICAgc3RybS5wdXNoID0gZnVuY3Rpb24gKGQsIGYpIHtcbiAgICAgICAgaWYgKHQpXG4gICAgICAgICAgICB0aHJvdyAnc3RyZWFtIGZpbmlzaGVkJztcbiAgICAgICAgaWYgKCFzdHJtLm9uZGF0YSlcbiAgICAgICAgICAgIHRocm93ICdubyBzdHJlYW0gaGFuZGxlcic7XG4gICAgICAgIHcucG9zdE1lc3NhZ2UoW2QsIHQgPSBmXSwgW2QuYnVmZmVyXSk7XG4gICAgfTtcbiAgICBzdHJtLnRlcm1pbmF0ZSA9IGZ1bmN0aW9uICgpIHsgdy50ZXJtaW5hdGUoKTsgfTtcbn07XG4vLyByZWFkIDIgYnl0ZXNcbnZhciBiMiA9IGZ1bmN0aW9uIChkLCBiKSB7IHJldHVybiBkW2JdIHwgKGRbYiArIDFdIDw8IDgpOyB9O1xuLy8gcmVhZCA0IGJ5dGVzXG52YXIgYjQgPSBmdW5jdGlvbiAoZCwgYikgeyByZXR1cm4gKGRbYl0gfCAoZFtiICsgMV0gPDwgOCkgfCAoZFtiICsgMl0gPDwgMTYpKSArIChkW2IgKyAzXSA8PCAyMykgKiAyOyB9O1xuLy8gd3JpdGUgYnl0ZXNcbnZhciB3Ynl0ZXMgPSBmdW5jdGlvbiAoZCwgYiwgdikge1xuICAgIGZvciAoOyB2OyArK2IpXG4gICAgICAgIGRbYl0gPSB2LCB2ID4+Pj0gODtcbn07XG4vLyBnemlwIGhlYWRlclxudmFyIGd6aCA9IGZ1bmN0aW9uIChjLCBvKSB7XG4gICAgdmFyIGZuID0gby5maWxlbmFtZTtcbiAgICBjWzBdID0gMzEsIGNbMV0gPSAxMzksIGNbMl0gPSA4LCBjWzhdID0gby5sZXZlbCA8IDIgPyA0IDogby5sZXZlbCA9PSA5ID8gMiA6IDAsIGNbOV0gPSAzOyAvLyBhc3N1bWUgVW5peFxuICAgIGlmIChvLm10aW1lICE9IDApXG4gICAgICAgIHdieXRlcyhjLCA0LCBNYXRoLmZsb29yKG5ldyBEYXRlKG8ubXRpbWUgfHwgRGF0ZS5ub3coKSkgLyAxMDAwKSk7XG4gICAgaWYgKGZuKSB7XG4gICAgICAgIGNbM10gPSA4O1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8PSBmbi5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgIGNbaSArIDEwXSA9IGZuLmNoYXJDb2RlQXQoaSk7XG4gICAgfVxufTtcbi8vIGd6aXAgZm9vdGVyOiAtOCB0byAtNCA9IENSQywgLTQgdG8gLTAgaXMgbGVuZ3RoXG4vLyBnemlwIHN0YXJ0XG52YXIgZ3pzID0gZnVuY3Rpb24gKGQpIHtcbiAgICBpZiAoZFswXSAhPSAzMSB8fCBkWzFdICE9IDEzOSB8fCBkWzJdICE9IDgpXG4gICAgICAgIHRocm93ICdpbnZhbGlkIGd6aXAgZGF0YSc7XG4gICAgdmFyIGZsZyA9IGRbM107XG4gICAgdmFyIHN0ID0gMTA7XG4gICAgaWYgKGZsZyAmIDQpXG4gICAgICAgIHN0ICs9IGRbMTBdIHwgKGRbMTFdIDw8IDgpICsgMjtcbiAgICBmb3IgKHZhciB6cyA9IChmbGcgPj4gMyAmIDEpICsgKGZsZyA+PiA0ICYgMSk7IHpzID4gMDsgenMgLT0gIWRbc3QrK10pXG4gICAgICAgIDtcbiAgICByZXR1cm4gc3QgKyAoZmxnICYgMik7XG59O1xuLy8gZ3ppcCBsZW5ndGhcbnZhciBnemwgPSBmdW5jdGlvbiAoZCkge1xuICAgIHZhciBsID0gZC5sZW5ndGg7XG4gICAgcmV0dXJuIChkW2wgLSA0XSB8IGRbbCAtIDNdIDw8IDggfCBkW2wgLSAyXSA8PCAxNikgKyAoMiAqIChkW2wgLSAxXSA8PCAyMykpO1xufTtcbi8vIGd6aXAgaGVhZGVyIGxlbmd0aFxudmFyIGd6aGwgPSBmdW5jdGlvbiAobykgeyByZXR1cm4gMTAgKyAoKG8uZmlsZW5hbWUgJiYgKG8uZmlsZW5hbWUubGVuZ3RoICsgMSkpIHx8IDApOyB9O1xuLy8gemxpYiBoZWFkZXJcbnZhciB6bGggPSBmdW5jdGlvbiAoYywgbykge1xuICAgIHZhciBsdiA9IG8ubGV2ZWwsIGZsID0gbHYgPT0gMCA/IDAgOiBsdiA8IDYgPyAxIDogbHYgPT0gOSA/IDMgOiAyO1xuICAgIGNbMF0gPSAxMjAsIGNbMV0gPSAoZmwgPDwgNikgfCAoZmwgPyAoMzIgLSAyICogZmwpIDogMSk7XG59O1xuLy8gemxpYiB2YWxpZFxudmFyIHpsdiA9IGZ1bmN0aW9uIChkKSB7XG4gICAgaWYgKChkWzBdICYgMTUpICE9IDggfHwgKGRbMF0gPj4+IDQpID4gNyB8fCAoKGRbMF0gPDwgOCB8IGRbMV0pICUgMzEpKVxuICAgICAgICB0aHJvdyAnaW52YWxpZCB6bGliIGRhdGEnO1xuICAgIGlmIChkWzFdICYgMzIpXG4gICAgICAgIHRocm93ICdpbnZhbGlkIHpsaWIgZGF0YTogcHJlc2V0IGRpY3Rpb25hcmllcyBub3Qgc3VwcG9ydGVkJztcbn07XG5mdW5jdGlvbiBBc3luY0NtcFN0cm0ob3B0cywgY2IpIHtcbiAgICBpZiAoIWNiICYmIHR5cGVvZiBvcHRzID09ICdmdW5jdGlvbicpXG4gICAgICAgIGNiID0gb3B0cywgb3B0cyA9IHt9O1xuICAgIHRoaXMub25kYXRhID0gY2I7XG4gICAgcmV0dXJuIG9wdHM7XG59XG4vLyB6bGliIGZvb3RlcjogLTQgdG8gLTAgaXMgQWRsZXIzMlxuLyoqXG4gKiBTdHJlYW1pbmcgREVGTEFURSBjb21wcmVzc2lvblxuICovXG52YXIgRGVmbGF0ZSA9IC8qI19fUFVSRV9fKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBEZWZsYXRlKG9wdHMsIGNiKSB7XG4gICAgICAgIGlmICghY2IgJiYgdHlwZW9mIG9wdHMgPT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgICAgIGNiID0gb3B0cywgb3B0cyA9IHt9O1xuICAgICAgICB0aGlzLm9uZGF0YSA9IGNiO1xuICAgICAgICB0aGlzLm8gPSBvcHRzIHx8IHt9O1xuICAgIH1cbiAgICBEZWZsYXRlLnByb3RvdHlwZS5wID0gZnVuY3Rpb24gKGMsIGYpIHtcbiAgICAgICAgdGhpcy5vbmRhdGEoZG9wdChjLCB0aGlzLm8sIDAsIDAsICFmKSwgZik7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBQdXNoZXMgYSBjaHVuayB0byBiZSBkZWZsYXRlZFxuICAgICAqIEBwYXJhbSBjaHVuayBUaGUgY2h1bmsgdG8gcHVzaFxuICAgICAqIEBwYXJhbSBmaW5hbCBXaGV0aGVyIHRoaXMgaXMgdGhlIGxhc3QgY2h1bmtcbiAgICAgKi9cbiAgICBEZWZsYXRlLnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24gKGNodW5rLCBmaW5hbCkge1xuICAgICAgICBpZiAodGhpcy5kKVxuICAgICAgICAgICAgdGhyb3cgJ3N0cmVhbSBmaW5pc2hlZCc7XG4gICAgICAgIGlmICghdGhpcy5vbmRhdGEpXG4gICAgICAgICAgICB0aHJvdyAnbm8gc3RyZWFtIGhhbmRsZXInO1xuICAgICAgICB0aGlzLmQgPSBmaW5hbDtcbiAgICAgICAgdGhpcy5wKGNodW5rLCBmaW5hbCB8fCBmYWxzZSk7XG4gICAgfTtcbiAgICByZXR1cm4gRGVmbGF0ZTtcbn0oKSk7XG5leHBvcnQgeyBEZWZsYXRlIH07XG4vKipcbiAqIEFzeW5jaHJvbm91cyBzdHJlYW1pbmcgREVGTEFURSBjb21wcmVzc2lvblxuICovXG52YXIgQXN5bmNEZWZsYXRlID0gLyojX19QVVJFX18qLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEFzeW5jRGVmbGF0ZShvcHRzLCBjYikge1xuICAgICAgICBhc3RybWlmeShbXG4gICAgICAgICAgICBiRGZsdCxcbiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHsgcmV0dXJuIFthc3RybSwgRGVmbGF0ZV07IH1cbiAgICAgICAgXSwgdGhpcywgQXN5bmNDbXBTdHJtLmNhbGwodGhpcywgb3B0cywgY2IpLCBmdW5jdGlvbiAoZXYpIHtcbiAgICAgICAgICAgIHZhciBzdHJtID0gbmV3IERlZmxhdGUoZXYuZGF0YSk7XG4gICAgICAgICAgICBvbm1lc3NhZ2UgPSBhc3RybShzdHJtKTtcbiAgICAgICAgfSwgNik7XG4gICAgfVxuICAgIHJldHVybiBBc3luY0RlZmxhdGU7XG59KCkpO1xuZXhwb3J0IHsgQXN5bmNEZWZsYXRlIH07XG5leHBvcnQgZnVuY3Rpb24gZGVmbGF0ZShkYXRhLCBvcHRzLCBjYikge1xuICAgIGlmICghY2IpXG4gICAgICAgIGNiID0gb3B0cywgb3B0cyA9IHt9O1xuICAgIGlmICh0eXBlb2YgY2IgIT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgdGhyb3cgJ25vIGNhbGxiYWNrJztcbiAgICByZXR1cm4gY2JpZnkoZGF0YSwgb3B0cywgW1xuICAgICAgICBiRGZsdCxcbiAgICBdLCBmdW5jdGlvbiAoZXYpIHsgcmV0dXJuIHBiZihkZWZsYXRlU3luYyhldi5kYXRhWzBdLCBldi5kYXRhWzFdKSk7IH0sIDAsIGNiKTtcbn1cbi8qKlxuICogQ29tcHJlc3NlcyBkYXRhIHdpdGggREVGTEFURSB3aXRob3V0IGFueSB3cmFwcGVyXG4gKiBAcGFyYW0gZGF0YSBUaGUgZGF0YSB0byBjb21wcmVzc1xuICogQHBhcmFtIG9wdHMgVGhlIGNvbXByZXNzaW9uIG9wdGlvbnNcbiAqIEByZXR1cm5zIFRoZSBkZWZsYXRlZCB2ZXJzaW9uIG9mIHRoZSBkYXRhXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWZsYXRlU3luYyhkYXRhLCBvcHRzKSB7XG4gICAgaWYgKG9wdHMgPT09IHZvaWQgMCkgeyBvcHRzID0ge307IH1cbiAgICByZXR1cm4gZG9wdChkYXRhLCBvcHRzLCAwLCAwKTtcbn1cbi8qKlxuICogU3RyZWFtaW5nIERFRkxBVEUgZGVjb21wcmVzc2lvblxuICovXG52YXIgSW5mbGF0ZSA9IC8qI19fUFVSRV9fKi8gKGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGluZmxhdGlvbiBzdHJlYW1cbiAgICAgKiBAcGFyYW0gY2IgVGhlIGNhbGxiYWNrIHRvIGNhbGwgd2hlbmV2ZXIgZGF0YSBpcyBpbmZsYXRlZFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEluZmxhdGUoY2IpIHtcbiAgICAgICAgdGhpcy5zID0ge307XG4gICAgICAgIHRoaXMucCA9IG5ldyB1OCgwKTtcbiAgICAgICAgdGhpcy5vbmRhdGEgPSBjYjtcbiAgICB9XG4gICAgSW5mbGF0ZS5wcm90b3R5cGUuZSA9IGZ1bmN0aW9uIChjKSB7XG4gICAgICAgIGlmICh0aGlzLmQpXG4gICAgICAgICAgICB0aHJvdyAnc3RyZWFtIGZpbmlzaGVkJztcbiAgICAgICAgaWYgKCF0aGlzLm9uZGF0YSlcbiAgICAgICAgICAgIHRocm93ICdubyBzdHJlYW0gaGFuZGxlcic7XG4gICAgICAgIHZhciBsID0gdGhpcy5wLmxlbmd0aDtcbiAgICAgICAgdmFyIG4gPSBuZXcgdTgobCArIGMubGVuZ3RoKTtcbiAgICAgICAgbi5zZXQodGhpcy5wKSwgbi5zZXQoYywgbCksIHRoaXMucCA9IG47XG4gICAgfTtcbiAgICBJbmZsYXRlLnByb3RvdHlwZS5jID0gZnVuY3Rpb24gKGZpbmFsKSB7XG4gICAgICAgIHRoaXMuZCA9IHRoaXMucy5pID0gZmluYWwgfHwgZmFsc2U7XG4gICAgICAgIHZhciBidHMgPSB0aGlzLnMuYjtcbiAgICAgICAgdmFyIGR0ID0gaW5mbHQodGhpcy5wLCB0aGlzLm8sIHRoaXMucyk7XG4gICAgICAgIHRoaXMub25kYXRhKHNsYyhkdCwgYnRzLCB0aGlzLnMuYiksIHRoaXMuZCk7XG4gICAgICAgIHRoaXMubyA9IHNsYyhkdCwgdGhpcy5zLmIgLSAzMjc2OCksIHRoaXMucy5iID0gdGhpcy5vLmxlbmd0aDtcbiAgICAgICAgdGhpcy5wID0gc2xjKHRoaXMucCwgKHRoaXMucy5wIC8gOCkgPj4gMCksIHRoaXMucy5wICY9IDc7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBQdXNoZXMgYSBjaHVuayB0byBiZSBpbmZsYXRlZFxuICAgICAqIEBwYXJhbSBjaHVuayBUaGUgY2h1bmsgdG8gcHVzaFxuICAgICAqIEBwYXJhbSBmaW5hbCBXaGV0aGVyIHRoaXMgaXMgdGhlIGZpbmFsIGNodW5rXG4gICAgICovXG4gICAgSW5mbGF0ZS5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uIChjaHVuaywgZmluYWwpIHtcbiAgICAgICAgdGhpcy5lKGNodW5rKSwgdGhpcy5jKGZpbmFsKTtcbiAgICB9O1xuICAgIHJldHVybiBJbmZsYXRlO1xufSgpKTtcbmV4cG9ydCB7IEluZmxhdGUgfTtcbi8qKlxuICogQXN5bmNocm9ub3VzIHN0cmVhbWluZyBERUZMQVRFIGRlY29tcHJlc3Npb25cbiAqL1xudmFyIEFzeW5jSW5mbGF0ZSA9IC8qI19fUFVSRV9fKi8gKGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGFzeW5jaHJvbm91cyBpbmZsYXRpb24gc3RyZWFtXG4gICAgICogQHBhcmFtIGNiIFRoZSBjYWxsYmFjayB0byBjYWxsIHdoZW5ldmVyIGRhdGEgaXMgZGVmbGF0ZWRcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBBc3luY0luZmxhdGUoY2IpIHtcbiAgICAgICAgdGhpcy5vbmRhdGEgPSBjYjtcbiAgICAgICAgYXN0cm1pZnkoW1xuICAgICAgICAgICAgYkluZmx0LFxuICAgICAgICAgICAgZnVuY3Rpb24gKCkgeyByZXR1cm4gW2FzdHJtLCBJbmZsYXRlXTsgfVxuICAgICAgICBdLCB0aGlzLCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgc3RybSA9IG5ldyBJbmZsYXRlKCk7XG4gICAgICAgICAgICBvbm1lc3NhZ2UgPSBhc3RybShzdHJtKTtcbiAgICAgICAgfSwgNyk7XG4gICAgfVxuICAgIHJldHVybiBBc3luY0luZmxhdGU7XG59KCkpO1xuZXhwb3J0IHsgQXN5bmNJbmZsYXRlIH07XG5leHBvcnQgZnVuY3Rpb24gaW5mbGF0ZShkYXRhLCBvcHRzLCBjYikge1xuICAgIGlmICghY2IpXG4gICAgICAgIGNiID0gb3B0cywgb3B0cyA9IHt9O1xuICAgIGlmICh0eXBlb2YgY2IgIT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgdGhyb3cgJ25vIGNhbGxiYWNrJztcbiAgICByZXR1cm4gY2JpZnkoZGF0YSwgb3B0cywgW1xuICAgICAgICBiSW5mbHRcbiAgICBdLCBmdW5jdGlvbiAoZXYpIHsgcmV0dXJuIHBiZihpbmZsYXRlU3luYyhldi5kYXRhWzBdLCBndTgoZXYuZGF0YVsxXSkpKTsgfSwgMSwgY2IpO1xufVxuLyoqXG4gKiBFeHBhbmRzIERFRkxBVEUgZGF0YSB3aXRoIG5vIHdyYXBwZXJcbiAqIEBwYXJhbSBkYXRhIFRoZSBkYXRhIHRvIGRlY29tcHJlc3NcbiAqIEBwYXJhbSBvdXQgV2hlcmUgdG8gd3JpdGUgdGhlIGRhdGEuIFNhdmVzIG1lbW9yeSBpZiB5b3Uga25vdyB0aGUgZGVjb21wcmVzc2VkIHNpemUgYW5kIHByb3ZpZGUgYW4gb3V0cHV0IGJ1ZmZlciBvZiB0aGF0IGxlbmd0aC5cbiAqIEByZXR1cm5zIFRoZSBkZWNvbXByZXNzZWQgdmVyc2lvbiBvZiB0aGUgZGF0YVxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5mbGF0ZVN5bmMoZGF0YSwgb3V0KSB7XG4gICAgcmV0dXJuIGluZmx0KGRhdGEsIG91dCk7XG59XG4vLyBiZWZvcmUgeW91IHllbGwgYXQgbWUgZm9yIG5vdCBqdXN0IHVzaW5nIGV4dGVuZHMsIG15IHJlYXNvbiBpcyB0aGF0IFRTIGluaGVyaXRhbmNlIGlzIGhhcmQgdG8gd29ya2VyaXplLlxuLyoqXG4gKiBTdHJlYW1pbmcgR1pJUCBjb21wcmVzc2lvblxuICovXG52YXIgR3ppcCA9IC8qI19fUFVSRV9fKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBHemlwKG9wdHMsIGNiKSB7XG4gICAgICAgIHRoaXMuYyA9IGNyYygpO1xuICAgICAgICB0aGlzLmwgPSAwO1xuICAgICAgICB0aGlzLnYgPSAxO1xuICAgICAgICBEZWZsYXRlLmNhbGwodGhpcywgb3B0cywgY2IpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQdXNoZXMgYSBjaHVuayB0byBiZSBHWklQcGVkXG4gICAgICogQHBhcmFtIGNodW5rIFRoZSBjaHVuayB0byBwdXNoXG4gICAgICogQHBhcmFtIGZpbmFsIFdoZXRoZXIgdGhpcyBpcyB0aGUgbGFzdCBjaHVua1xuICAgICAqL1xuICAgIEd6aXAucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbiAoY2h1bmssIGZpbmFsKSB7XG4gICAgICAgIERlZmxhdGUucHJvdG90eXBlLnB1c2guY2FsbCh0aGlzLCBjaHVuaywgZmluYWwpO1xuICAgIH07XG4gICAgR3ppcC5wcm90b3R5cGUucCA9IGZ1bmN0aW9uIChjLCBmKSB7XG4gICAgICAgIHRoaXMuYy5wKGMpO1xuICAgICAgICB0aGlzLmwgKz0gYy5sZW5ndGg7XG4gICAgICAgIHZhciByYXcgPSBkb3B0KGMsIHRoaXMubywgdGhpcy52ICYmIGd6aGwodGhpcy5vKSwgZiAmJiA4LCAhZik7XG4gICAgICAgIGlmICh0aGlzLnYpXG4gICAgICAgICAgICBnemgocmF3LCB0aGlzLm8pLCB0aGlzLnYgPSAwO1xuICAgICAgICBpZiAoZilcbiAgICAgICAgICAgIHdieXRlcyhyYXcsIHJhdy5sZW5ndGggLSA4LCB0aGlzLmMuZCgpKSwgd2J5dGVzKHJhdywgcmF3Lmxlbmd0aCAtIDQsIHRoaXMubCk7XG4gICAgICAgIHRoaXMub25kYXRhKHJhdywgZik7XG4gICAgfTtcbiAgICByZXR1cm4gR3ppcDtcbn0oKSk7XG5leHBvcnQgeyBHemlwIH07XG4vKipcbiAqIEFzeW5jaHJvbm91cyBzdHJlYW1pbmcgR1pJUCBjb21wcmVzc2lvblxuICovXG52YXIgQXN5bmNHemlwID0gLyojX19QVVJFX18qLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEFzeW5jR3ppcChvcHRzLCBjYikge1xuICAgICAgICBhc3RybWlmeShbXG4gICAgICAgICAgICBiRGZsdCxcbiAgICAgICAgICAgIGd6ZSxcbiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHsgcmV0dXJuIFthc3RybSwgRGVmbGF0ZSwgR3ppcF07IH1cbiAgICAgICAgXSwgdGhpcywgQXN5bmNDbXBTdHJtLmNhbGwodGhpcywgb3B0cywgY2IpLCBmdW5jdGlvbiAoZXYpIHtcbiAgICAgICAgICAgIHZhciBzdHJtID0gbmV3IEd6aXAoZXYuZGF0YSk7XG4gICAgICAgICAgICBvbm1lc3NhZ2UgPSBhc3RybShzdHJtKTtcbiAgICAgICAgfSwgOCk7XG4gICAgfVxuICAgIHJldHVybiBBc3luY0d6aXA7XG59KCkpO1xuZXhwb3J0IHsgQXN5bmNHemlwIH07XG5leHBvcnQgZnVuY3Rpb24gZ3ppcChkYXRhLCBvcHRzLCBjYikge1xuICAgIGlmICghY2IpXG4gICAgICAgIGNiID0gb3B0cywgb3B0cyA9IHt9O1xuICAgIGlmICh0eXBlb2YgY2IgIT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgdGhyb3cgJ25vIGNhbGxiYWNrJztcbiAgICByZXR1cm4gY2JpZnkoZGF0YSwgb3B0cywgW1xuICAgICAgICBiRGZsdCxcbiAgICAgICAgZ3plLFxuICAgICAgICBmdW5jdGlvbiAoKSB7IHJldHVybiBbZ3ppcFN5bmNdOyB9XG4gICAgXSwgZnVuY3Rpb24gKGV2KSB7IHJldHVybiBwYmYoZ3ppcFN5bmMoZXYuZGF0YVswXSwgZXYuZGF0YVsxXSkpOyB9LCAyLCBjYik7XG59XG4vKipcbiAqIENvbXByZXNzZXMgZGF0YSB3aXRoIEdaSVBcbiAqIEBwYXJhbSBkYXRhIFRoZSBkYXRhIHRvIGNvbXByZXNzXG4gKiBAcGFyYW0gb3B0cyBUaGUgY29tcHJlc3Npb24gb3B0aW9uc1xuICogQHJldHVybnMgVGhlIGd6aXBwZWQgdmVyc2lvbiBvZiB0aGUgZGF0YVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ3ppcFN5bmMoZGF0YSwgb3B0cykge1xuICAgIGlmIChvcHRzID09PSB2b2lkIDApIHsgb3B0cyA9IHt9OyB9XG4gICAgdmFyIGMgPSBjcmMoKSwgbCA9IGRhdGEubGVuZ3RoO1xuICAgIGMucChkYXRhKTtcbiAgICB2YXIgZCA9IGRvcHQoZGF0YSwgb3B0cywgZ3pobChvcHRzKSwgOCksIHMgPSBkLmxlbmd0aDtcbiAgICByZXR1cm4gZ3poKGQsIG9wdHMpLCB3Ynl0ZXMoZCwgcyAtIDgsIGMuZCgpKSwgd2J5dGVzKGQsIHMgLSA0LCBsKSwgZDtcbn1cbi8qKlxuICogU3RyZWFtaW5nIEdaSVAgZGVjb21wcmVzc2lvblxuICovXG52YXIgR3VuemlwID0gLyojX19QVVJFX18qLyAoZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBHVU5aSVAgc3RyZWFtXG4gICAgICogQHBhcmFtIGNiIFRoZSBjYWxsYmFjayB0byBjYWxsIHdoZW5ldmVyIGRhdGEgaXMgaW5mbGF0ZWRcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBHdW56aXAoY2IpIHtcbiAgICAgICAgdGhpcy52ID0gMTtcbiAgICAgICAgSW5mbGF0ZS5jYWxsKHRoaXMsIGNiKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHVzaGVzIGEgY2h1bmsgdG8gYmUgR1VOWklQcGVkXG4gICAgICogQHBhcmFtIGNodW5rIFRoZSBjaHVuayB0byBwdXNoXG4gICAgICogQHBhcmFtIGZpbmFsIFdoZXRoZXIgdGhpcyBpcyB0aGUgbGFzdCBjaHVua1xuICAgICAqL1xuICAgIEd1bnppcC5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uIChjaHVuaywgZmluYWwpIHtcbiAgICAgICAgSW5mbGF0ZS5wcm90b3R5cGUuZS5jYWxsKHRoaXMsIGNodW5rKTtcbiAgICAgICAgaWYgKHRoaXMudikge1xuICAgICAgICAgICAgdmFyIHMgPSBnenModGhpcy5wKTtcbiAgICAgICAgICAgIGlmIChzID49IHRoaXMucC5sZW5ndGggJiYgIWZpbmFsKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIHRoaXMucCA9IHRoaXMucC5zdWJhcnJheShzKSwgdGhpcy52ID0gMDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZmluYWwpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnAubGVuZ3RoIDwgOClcbiAgICAgICAgICAgICAgICB0aHJvdyAnaW52YWxpZCBnemlwIHN0cmVhbSc7XG4gICAgICAgICAgICB0aGlzLnAgPSB0aGlzLnAuc3ViYXJyYXkoMCwgLTgpO1xuICAgICAgICB9XG4gICAgICAgIC8vIG5lY2Vzc2FyeSB0byBwcmV2ZW50IFRTIGZyb20gdXNpbmcgdGhlIGNsb3N1cmUgdmFsdWVcbiAgICAgICAgLy8gVGhpcyBhbGxvd3MgZm9yIHdvcmtlcml6YXRpb24gdG8gZnVuY3Rpb24gY29ycmVjdGx5XG4gICAgICAgIEluZmxhdGUucHJvdG90eXBlLmMuY2FsbCh0aGlzLCBmaW5hbCk7XG4gICAgfTtcbiAgICByZXR1cm4gR3VuemlwO1xufSgpKTtcbmV4cG9ydCB7IEd1bnppcCB9O1xuLyoqXG4gKiBBc3luY2hyb25vdXMgc3RyZWFtaW5nIEdaSVAgZGVjb21wcmVzc2lvblxuICovXG52YXIgQXN5bmNHdW56aXAgPSAvKiNfX1BVUkVfXyovIChmdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBhc3luY2hyb25vdXMgR1VOWklQIHN0cmVhbVxuICAgICAqIEBwYXJhbSBjYiBUaGUgY2FsbGJhY2sgdG8gY2FsbCB3aGVuZXZlciBkYXRhIGlzIGRlZmxhdGVkXG4gICAgICovXG4gICAgZnVuY3Rpb24gQXN5bmNHdW56aXAoY2IpIHtcbiAgICAgICAgdGhpcy5vbmRhdGEgPSBjYjtcbiAgICAgICAgYXN0cm1pZnkoW1xuICAgICAgICAgICAgYkluZmx0LFxuICAgICAgICAgICAgZ3V6ZSxcbiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHsgcmV0dXJuIFthc3RybSwgSW5mbGF0ZSwgR3VuemlwXTsgfVxuICAgICAgICBdLCB0aGlzLCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgc3RybSA9IG5ldyBHdW56aXAoKTtcbiAgICAgICAgICAgIG9ubWVzc2FnZSA9IGFzdHJtKHN0cm0pO1xuICAgICAgICB9LCA5KTtcbiAgICB9XG4gICAgcmV0dXJuIEFzeW5jR3VuemlwO1xufSgpKTtcbmV4cG9ydCB7IEFzeW5jR3VuemlwIH07XG5leHBvcnQgZnVuY3Rpb24gZ3VuemlwKGRhdGEsIG9wdHMsIGNiKSB7XG4gICAgaWYgKCFjYilcbiAgICAgICAgY2IgPSBvcHRzLCBvcHRzID0ge307XG4gICAgaWYgKHR5cGVvZiBjYiAhPSAnZnVuY3Rpb24nKVxuICAgICAgICB0aHJvdyAnbm8gY2FsbGJhY2snO1xuICAgIHJldHVybiBjYmlmeShkYXRhLCBvcHRzLCBbXG4gICAgICAgIGJJbmZsdCxcbiAgICAgICAgZ3V6ZSxcbiAgICAgICAgZnVuY3Rpb24gKCkgeyByZXR1cm4gW2d1bnppcFN5bmNdOyB9XG4gICAgXSwgZnVuY3Rpb24gKGV2KSB7IHJldHVybiBwYmYoZ3VuemlwU3luYyhldi5kYXRhWzBdKSk7IH0sIDMsIGNiKTtcbn1cbi8qKlxuICogRXhwYW5kcyBHWklQIGRhdGFcbiAqIEBwYXJhbSBkYXRhIFRoZSBkYXRhIHRvIGRlY29tcHJlc3NcbiAqIEBwYXJhbSBvdXQgV2hlcmUgdG8gd3JpdGUgdGhlIGRhdGEuIEdaSVAgYWxyZWFkeSBlbmNvZGVzIHRoZSBvdXRwdXQgc2l6ZSwgc28gcHJvdmlkaW5nIHRoaXMgZG9lc24ndCBzYXZlIG1lbW9yeS5cbiAqIEByZXR1cm5zIFRoZSBkZWNvbXByZXNzZWQgdmVyc2lvbiBvZiB0aGUgZGF0YVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ3VuemlwU3luYyhkYXRhLCBvdXQpIHtcbiAgICByZXR1cm4gaW5mbHQoZGF0YS5zdWJhcnJheShnenMoZGF0YSksIC04KSwgb3V0IHx8IG5ldyB1OChnemwoZGF0YSkpKTtcbn1cbi8qKlxuICogU3RyZWFtaW5nIFpsaWIgY29tcHJlc3Npb25cbiAqL1xudmFyIFpsaWIgPSAvKiNfX1BVUkVfXyovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gWmxpYihvcHRzLCBjYikge1xuICAgICAgICB0aGlzLmMgPSBhZGxlcigpO1xuICAgICAgICB0aGlzLnYgPSAxO1xuICAgICAgICBEZWZsYXRlLmNhbGwodGhpcywgb3B0cywgY2IpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQdXNoZXMgYSBjaHVuayB0byBiZSB6bGliYmVkXG4gICAgICogQHBhcmFtIGNodW5rIFRoZSBjaHVuayB0byBwdXNoXG4gICAgICogQHBhcmFtIGZpbmFsIFdoZXRoZXIgdGhpcyBpcyB0aGUgbGFzdCBjaHVua1xuICAgICAqL1xuICAgIFpsaWIucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbiAoY2h1bmssIGZpbmFsKSB7XG4gICAgICAgIERlZmxhdGUucHJvdG90eXBlLnB1c2guY2FsbCh0aGlzLCBjaHVuaywgZmluYWwpO1xuICAgIH07XG4gICAgWmxpYi5wcm90b3R5cGUucCA9IGZ1bmN0aW9uIChjLCBmKSB7XG4gICAgICAgIHRoaXMuYy5wKGMpO1xuICAgICAgICB2YXIgcmF3ID0gZG9wdChjLCB0aGlzLm8sIHRoaXMudiAmJiAyLCBmICYmIDQsICFmKTtcbiAgICAgICAgaWYgKHRoaXMudilcbiAgICAgICAgICAgIHpsaChyYXcsIHRoaXMubyksIHRoaXMudiA9IDA7XG4gICAgICAgIGlmIChmKVxuICAgICAgICAgICAgd2J5dGVzKHJhdywgcmF3Lmxlbmd0aCAtIDQsIHRoaXMuYy5kKCkpO1xuICAgICAgICB0aGlzLm9uZGF0YShyYXcsIGYpO1xuICAgIH07XG4gICAgcmV0dXJuIFpsaWI7XG59KCkpO1xuZXhwb3J0IHsgWmxpYiB9O1xuLyoqXG4gKiBBc3luY2hyb25vdXMgc3RyZWFtaW5nIFpsaWIgY29tcHJlc3Npb25cbiAqL1xudmFyIEFzeW5jWmxpYiA9IC8qI19fUFVSRV9fKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBBc3luY1psaWIob3B0cywgY2IpIHtcbiAgICAgICAgYXN0cm1pZnkoW1xuICAgICAgICAgICAgYkRmbHQsXG4gICAgICAgICAgICB6bGUsXG4gICAgICAgICAgICBmdW5jdGlvbiAoKSB7IHJldHVybiBbYXN0cm0sIERlZmxhdGUsIFpsaWJdOyB9XG4gICAgICAgIF0sIHRoaXMsIEFzeW5jQ21wU3RybS5jYWxsKHRoaXMsIG9wdHMsIGNiKSwgZnVuY3Rpb24gKGV2KSB7XG4gICAgICAgICAgICB2YXIgc3RybSA9IG5ldyBabGliKGV2LmRhdGEpO1xuICAgICAgICAgICAgb25tZXNzYWdlID0gYXN0cm0oc3RybSk7XG4gICAgICAgIH0sIDEwKTtcbiAgICB9XG4gICAgcmV0dXJuIEFzeW5jWmxpYjtcbn0oKSk7XG5leHBvcnQgeyBBc3luY1psaWIgfTtcbmV4cG9ydCBmdW5jdGlvbiB6bGliKGRhdGEsIG9wdHMsIGNiKSB7XG4gICAgaWYgKCFjYilcbiAgICAgICAgY2IgPSBvcHRzLCBvcHRzID0ge307XG4gICAgaWYgKHR5cGVvZiBjYiAhPSAnZnVuY3Rpb24nKVxuICAgICAgICB0aHJvdyAnbm8gY2FsbGJhY2snO1xuICAgIHJldHVybiBjYmlmeShkYXRhLCBvcHRzLCBbXG4gICAgICAgIGJEZmx0LFxuICAgICAgICB6bGUsXG4gICAgICAgIGZ1bmN0aW9uICgpIHsgcmV0dXJuIFt6bGliU3luY107IH1cbiAgICBdLCBmdW5jdGlvbiAoZXYpIHsgcmV0dXJuIHBiZih6bGliU3luYyhldi5kYXRhWzBdLCBldi5kYXRhWzFdKSk7IH0sIDQsIGNiKTtcbn1cbi8qKlxuICogQ29tcHJlc3MgZGF0YSB3aXRoIFpsaWJcbiAqIEBwYXJhbSBkYXRhIFRoZSBkYXRhIHRvIGNvbXByZXNzXG4gKiBAcGFyYW0gb3B0cyBUaGUgY29tcHJlc3Npb24gb3B0aW9uc1xuICogQHJldHVybnMgVGhlIHpsaWItY29tcHJlc3NlZCB2ZXJzaW9uIG9mIHRoZSBkYXRhXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB6bGliU3luYyhkYXRhLCBvcHRzKSB7XG4gICAgaWYgKG9wdHMgPT09IHZvaWQgMCkgeyBvcHRzID0ge307IH1cbiAgICB2YXIgYSA9IGFkbGVyKCk7XG4gICAgYS5wKGRhdGEpO1xuICAgIHZhciBkID0gZG9wdChkYXRhLCBvcHRzLCAyLCA0KTtcbiAgICByZXR1cm4gemxoKGQsIG9wdHMpLCB3Ynl0ZXMoZCwgZC5sZW5ndGggLSA0LCBhLmQoKSksIGQ7XG59XG4vKipcbiAqIFN0cmVhbWluZyBabGliIGRlY29tcHJlc3Npb25cbiAqL1xudmFyIFVuemxpYiA9IC8qI19fUFVSRV9fKi8gKGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgWmxpYiBkZWNvbXByZXNzaW9uIHN0cmVhbVxuICAgICAqIEBwYXJhbSBjYiBUaGUgY2FsbGJhY2sgdG8gY2FsbCB3aGVuZXZlciBkYXRhIGlzIGluZmxhdGVkXG4gICAgICovXG4gICAgZnVuY3Rpb24gVW56bGliKGNiKSB7XG4gICAgICAgIHRoaXMudiA9IDE7XG4gICAgICAgIEluZmxhdGUuY2FsbCh0aGlzLCBjYik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFB1c2hlcyBhIGNodW5rIHRvIGJlIHVuemxpYmJlZFxuICAgICAqIEBwYXJhbSBjaHVuayBUaGUgY2h1bmsgdG8gcHVzaFxuICAgICAqIEBwYXJhbSBmaW5hbCBXaGV0aGVyIHRoaXMgaXMgdGhlIGxhc3QgY2h1bmtcbiAgICAgKi9cbiAgICBVbnpsaWIucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbiAoY2h1bmssIGZpbmFsKSB7XG4gICAgICAgIEluZmxhdGUucHJvdG90eXBlLmUuY2FsbCh0aGlzLCBjaHVuayk7XG4gICAgICAgIGlmICh0aGlzLnYpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnAubGVuZ3RoIDwgMiAmJiAhZmluYWwpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgdGhpcy5wID0gdGhpcy5wLnN1YmFycmF5KDIpLCB0aGlzLnYgPSAwO1xuICAgICAgICB9XG4gICAgICAgIGlmIChmaW5hbCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucC5sZW5ndGggPCA0KVxuICAgICAgICAgICAgICAgIHRocm93ICdpbnZhbGlkIHpsaWIgc3RyZWFtJztcbiAgICAgICAgICAgIHRoaXMucCA9IHRoaXMucC5zdWJhcnJheSgwLCAtNCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gbmVjZXNzYXJ5IHRvIHByZXZlbnQgVFMgZnJvbSB1c2luZyB0aGUgY2xvc3VyZSB2YWx1ZVxuICAgICAgICAvLyBUaGlzIGFsbG93cyBmb3Igd29ya2VyaXphdGlvbiB0byBmdW5jdGlvbiBjb3JyZWN0bHlcbiAgICAgICAgSW5mbGF0ZS5wcm90b3R5cGUuYy5jYWxsKHRoaXMsIGZpbmFsKTtcbiAgICB9O1xuICAgIHJldHVybiBVbnpsaWI7XG59KCkpO1xuZXhwb3J0IHsgVW56bGliIH07XG4vKipcbiAqIEFzeW5jaHJvbm91cyBzdHJlYW1pbmcgWmxpYiBkZWNvbXByZXNzaW9uXG4gKi9cbnZhciBBc3luY1VuemxpYiA9IC8qI19fUFVSRV9fKi8gKGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGFzeW5jaHJvbm91cyBabGliIGRlY29tcHJlc3Npb24gc3RyZWFtXG4gICAgICogQHBhcmFtIGNiIFRoZSBjYWxsYmFjayB0byBjYWxsIHdoZW5ldmVyIGRhdGEgaXMgZGVmbGF0ZWRcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBBc3luY1VuemxpYihjYikge1xuICAgICAgICB0aGlzLm9uZGF0YSA9IGNiO1xuICAgICAgICBhc3RybWlmeShbXG4gICAgICAgICAgICBiSW5mbHQsXG4gICAgICAgICAgICB6dWxlLFxuICAgICAgICAgICAgZnVuY3Rpb24gKCkgeyByZXR1cm4gW2FzdHJtLCBJbmZsYXRlLCBVbnpsaWJdOyB9XG4gICAgICAgIF0sIHRoaXMsIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBzdHJtID0gbmV3IFVuemxpYigpO1xuICAgICAgICAgICAgb25tZXNzYWdlID0gYXN0cm0oc3RybSk7XG4gICAgICAgIH0sIDExKTtcbiAgICB9XG4gICAgcmV0dXJuIEFzeW5jVW56bGliO1xufSgpKTtcbmV4cG9ydCB7IEFzeW5jVW56bGliIH07XG5leHBvcnQgZnVuY3Rpb24gdW56bGliKGRhdGEsIG9wdHMsIGNiKSB7XG4gICAgaWYgKCFjYilcbiAgICAgICAgY2IgPSBvcHRzLCBvcHRzID0ge307XG4gICAgaWYgKHR5cGVvZiBjYiAhPSAnZnVuY3Rpb24nKVxuICAgICAgICB0aHJvdyAnbm8gY2FsbGJhY2snO1xuICAgIHJldHVybiBjYmlmeShkYXRhLCBvcHRzLCBbXG4gICAgICAgIGJJbmZsdCxcbiAgICAgICAgenVsZSxcbiAgICAgICAgZnVuY3Rpb24gKCkgeyByZXR1cm4gW3VuemxpYlN5bmNdOyB9XG4gICAgXSwgZnVuY3Rpb24gKGV2KSB7IHJldHVybiBwYmYodW56bGliU3luYyhldi5kYXRhWzBdLCBndTgoZXYuZGF0YVsxXSkpKTsgfSwgNSwgY2IpO1xufVxuLyoqXG4gKiBFeHBhbmRzIFpsaWIgZGF0YVxuICogQHBhcmFtIGRhdGEgVGhlIGRhdGEgdG8gZGVjb21wcmVzc1xuICogQHBhcmFtIG91dCBXaGVyZSB0byB3cml0ZSB0aGUgZGF0YS4gU2F2ZXMgbWVtb3J5IGlmIHlvdSBrbm93IHRoZSBkZWNvbXByZXNzZWQgc2l6ZSBhbmQgcHJvdmlkZSBhbiBvdXRwdXQgYnVmZmVyIG9mIHRoYXQgbGVuZ3RoLlxuICogQHJldHVybnMgVGhlIGRlY29tcHJlc3NlZCB2ZXJzaW9uIG9mIHRoZSBkYXRhXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1bnpsaWJTeW5jKGRhdGEsIG91dCkge1xuICAgIHJldHVybiBpbmZsdCgoemx2KGRhdGEpLCBkYXRhLnN1YmFycmF5KDIsIC00KSksIG91dCk7XG59XG4vLyBEZWZhdWx0IGFsZ29yaXRobSBmb3IgY29tcHJlc3Npb24gKHVzZWQgYmVjYXVzZSBoYXZpbmcgYSBrbm93biBvdXRwdXQgc2l6ZSBhbGxvd3MgZmFzdGVyIGRlY29tcHJlc3Npb24pXG5leHBvcnQgeyBnemlwIGFzIGNvbXByZXNzLCBBc3luY0d6aXAgYXMgQXN5bmNDb21wcmVzcyB9O1xuLy8gRGVmYXVsdCBhbGdvcml0aG0gZm9yIGNvbXByZXNzaW9uICh1c2VkIGJlY2F1c2UgaGF2aW5nIGEga25vd24gb3V0cHV0IHNpemUgYWxsb3dzIGZhc3RlciBkZWNvbXByZXNzaW9uKVxuZXhwb3J0IHsgZ3ppcFN5bmMgYXMgY29tcHJlc3NTeW5jLCBHemlwIGFzIENvbXByZXNzIH07XG4vKipcbiAqIFN0cmVhbWluZyBHWklQLCBabGliLCBvciByYXcgREVGTEFURSBkZWNvbXByZXNzaW9uXG4gKi9cbnZhciBEZWNvbXByZXNzID0gLyojX19QVVJFX18qLyAoZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBkZWNvbXByZXNzaW9uIHN0cmVhbVxuICAgICAqIEBwYXJhbSBjYiBUaGUgY2FsbGJhY2sgdG8gY2FsbCB3aGVuZXZlciBkYXRhIGlzIGRlY29tcHJlc3NlZFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIERlY29tcHJlc3MoY2IpIHtcbiAgICAgICAgdGhpcy5HID0gR3VuemlwO1xuICAgICAgICB0aGlzLkkgPSBJbmZsYXRlO1xuICAgICAgICB0aGlzLlogPSBVbnpsaWI7XG4gICAgICAgIHRoaXMub25kYXRhID0gY2I7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFB1c2hlcyBhIGNodW5rIHRvIGJlIGRlY29tcHJlc3NlZFxuICAgICAqIEBwYXJhbSBjaHVuayBUaGUgY2h1bmsgdG8gcHVzaFxuICAgICAqIEBwYXJhbSBmaW5hbCBXaGV0aGVyIHRoaXMgaXMgdGhlIGxhc3QgY2h1bmtcbiAgICAgKi9cbiAgICBEZWNvbXByZXNzLnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24gKGNodW5rLCBmaW5hbCkge1xuICAgICAgICBpZiAoIXRoaXMub25kYXRhKVxuICAgICAgICAgICAgdGhyb3cgJ25vIHN0cmVhbSBoYW5kbGVyJztcbiAgICAgICAgaWYgKCF0aGlzLnMpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnAgJiYgdGhpcy5wLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHZhciBuID0gbmV3IHU4KHRoaXMucC5sZW5ndGggKyBjaHVuay5sZW5ndGgpO1xuICAgICAgICAgICAgICAgIG4uc2V0KHRoaXMucCksIG4uc2V0KGNodW5rLCB0aGlzLnAubGVuZ3RoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICB0aGlzLnAgPSBjaHVuaztcbiAgICAgICAgICAgIGlmICh0aGlzLnAubGVuZ3RoID4gMikge1xuICAgICAgICAgICAgICAgIHZhciBfdGhpc18xID0gdGhpcztcbiAgICAgICAgICAgICAgICB2YXIgY2IgPSBmdW5jdGlvbiAoKSB7IF90aGlzXzEub25kYXRhLmFwcGx5KF90aGlzXzEsIGFyZ3VtZW50cyk7IH07XG4gICAgICAgICAgICAgICAgdGhpcy5zID0gKHRoaXMucFswXSA9PSAzMSAmJiB0aGlzLnBbMV0gPT0gMTM5ICYmIHRoaXMucFsyXSA9PSA4KVxuICAgICAgICAgICAgICAgICAgICA/IG5ldyB0aGlzLkcoY2IpXG4gICAgICAgICAgICAgICAgICAgIDogKCh0aGlzLnBbMF0gJiAxNSkgIT0gOCB8fCAodGhpcy5wWzBdID4+IDQpID4gNyB8fCAoKHRoaXMucFswXSA8PCA4IHwgdGhpcy5wWzFdKSAlIDMxKSlcbiAgICAgICAgICAgICAgICAgICAgICAgID8gbmV3IHRoaXMuSShjYilcbiAgICAgICAgICAgICAgICAgICAgICAgIDogbmV3IHRoaXMuWihjYik7XG4gICAgICAgICAgICAgICAgdGhpcy5zLnB1c2godGhpcy5wLCBmaW5hbCk7XG4gICAgICAgICAgICAgICAgdGhpcy5wID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlXG4gICAgICAgICAgICB0aGlzLnMucHVzaChjaHVuaywgZmluYWwpO1xuICAgIH07XG4gICAgcmV0dXJuIERlY29tcHJlc3M7XG59KCkpO1xuZXhwb3J0IHsgRGVjb21wcmVzcyB9O1xuLyoqXG4gKiBBc3luY2hyb25vdXMgc3RyZWFtaW5nIEdaSVAsIFpsaWIsIG9yIHJhdyBERUZMQVRFIGRlY29tcHJlc3Npb25cbiAqL1xudmFyIEFzeW5jRGVjb21wcmVzcyA9IC8qI19fUFVSRV9fKi8gKGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICogQ3JlYXRlcyBhbiBhc3luY2hyb25vdXMgZGVjb21wcmVzc2lvbiBzdHJlYW1cbiAgICogQHBhcmFtIGNiIFRoZSBjYWxsYmFjayB0byBjYWxsIHdoZW5ldmVyIGRhdGEgaXMgZGVjb21wcmVzc2VkXG4gICAqL1xuICAgIGZ1bmN0aW9uIEFzeW5jRGVjb21wcmVzcyhjYikge1xuICAgICAgICB0aGlzLkcgPSBBc3luY0d1bnppcDtcbiAgICAgICAgdGhpcy5JID0gQXN5bmNJbmZsYXRlO1xuICAgICAgICB0aGlzLlogPSBBc3luY1VuemxpYjtcbiAgICAgICAgdGhpcy5vbmRhdGEgPSBjYjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHVzaGVzIGEgY2h1bmsgdG8gYmUgZGVjb21wcmVzc2VkXG4gICAgICogQHBhcmFtIGNodW5rIFRoZSBjaHVuayB0byBwdXNoXG4gICAgICogQHBhcmFtIGZpbmFsIFdoZXRoZXIgdGhpcyBpcyB0aGUgbGFzdCBjaHVua1xuICAgICAqL1xuICAgIEFzeW5jRGVjb21wcmVzcy5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uIChjaHVuaywgZmluYWwpIHtcbiAgICAgICAgRGVjb21wcmVzcy5wcm90b3R5cGUucHVzaC5jYWxsKHRoaXMsIGNodW5rLCBmaW5hbCk7XG4gICAgfTtcbiAgICByZXR1cm4gQXN5bmNEZWNvbXByZXNzO1xufSgpKTtcbmV4cG9ydCB7IEFzeW5jRGVjb21wcmVzcyB9O1xuZXhwb3J0IGZ1bmN0aW9uIGRlY29tcHJlc3MoZGF0YSwgb3B0cywgY2IpIHtcbiAgICBpZiAoIWNiKVxuICAgICAgICBjYiA9IG9wdHMsIG9wdHMgPSB7fTtcbiAgICBpZiAodHlwZW9mIGNiICE9ICdmdW5jdGlvbicpXG4gICAgICAgIHRocm93ICdubyBjYWxsYmFjayc7XG4gICAgcmV0dXJuIChkYXRhWzBdID09IDMxICYmIGRhdGFbMV0gPT0gMTM5ICYmIGRhdGFbMl0gPT0gOClcbiAgICAgICAgPyBndW56aXAoZGF0YSwgb3B0cywgY2IpXG4gICAgICAgIDogKChkYXRhWzBdICYgMTUpICE9IDggfHwgKGRhdGFbMF0gPj4gNCkgPiA3IHx8ICgoZGF0YVswXSA8PCA4IHwgZGF0YVsxXSkgJSAzMSkpXG4gICAgICAgICAgICA/IGluZmxhdGUoZGF0YSwgb3B0cywgY2IpXG4gICAgICAgICAgICA6IHVuemxpYihkYXRhLCBvcHRzLCBjYik7XG59XG4vKipcbiAqIEV4cGFuZHMgY29tcHJlc3NlZCBHWklQLCBabGliLCBvciByYXcgREVGTEFURSBkYXRhLCBhdXRvbWF0aWNhbGx5IGRldGVjdGluZyB0aGUgZm9ybWF0XG4gKiBAcGFyYW0gZGF0YSBUaGUgZGF0YSB0byBkZWNvbXByZXNzXG4gKiBAcGFyYW0gb3V0IFdoZXJlIHRvIHdyaXRlIHRoZSBkYXRhLiBTYXZlcyBtZW1vcnkgaWYgeW91IGtub3cgdGhlIGRlY29tcHJlc3NlZCBzaXplIGFuZCBwcm92aWRlIGFuIG91dHB1dCBidWZmZXIgb2YgdGhhdCBsZW5ndGguXG4gKiBAcmV0dXJucyBUaGUgZGVjb21wcmVzc2VkIHZlcnNpb24gb2YgdGhlIGRhdGFcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlY29tcHJlc3NTeW5jKGRhdGEsIG91dCkge1xuICAgIHJldHVybiAoZGF0YVswXSA9PSAzMSAmJiBkYXRhWzFdID09IDEzOSAmJiBkYXRhWzJdID09IDgpXG4gICAgICAgID8gZ3VuemlwU3luYyhkYXRhLCBvdXQpXG4gICAgICAgIDogKChkYXRhWzBdICYgMTUpICE9IDggfHwgKGRhdGFbMF0gPj4gNCkgPiA3IHx8ICgoZGF0YVswXSA8PCA4IHwgZGF0YVsxXSkgJSAzMSkpXG4gICAgICAgICAgICA/IGluZmxhdGVTeW5jKGRhdGEsIG91dClcbiAgICAgICAgICAgIDogdW56bGliU3luYyhkYXRhLCBvdXQpO1xufVxuLy8gZmxhdHRlbiBhIGRpcmVjdG9yeSBzdHJ1Y3R1cmVcbnZhciBmbHRuID0gZnVuY3Rpb24gKGQsIHAsIHQsIG8pIHtcbiAgICBmb3IgKHZhciBrIGluIGQpIHtcbiAgICAgICAgdmFyIHZhbCA9IGRba10sIG4gPSBwICsgaztcbiAgICAgICAgaWYgKHZhbCBpbnN0YW5jZW9mIHU4KVxuICAgICAgICAgICAgdFtuXSA9IFt2YWwsIG9dO1xuICAgICAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KHZhbCkpXG4gICAgICAgICAgICB0W25dID0gW3ZhbFswXSwgbXJnKG8sIHZhbFsxXSldO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICBmbHRuKHZhbCwgbiArICcvJywgdCwgbyk7XG4gICAgfVxufTtcbi8qKlxuICogQ29udmVydHMgYSBzdHJpbmcgaW50byBhIFVpbnQ4QXJyYXkgZm9yIHVzZSB3aXRoIGNvbXByZXNzaW9uL2RlY29tcHJlc3Npb24gbWV0aG9kc1xuICogQHBhcmFtIHN0ciBUaGUgc3RyaW5nIHRvIGVuY29kZVxuICogQHBhcmFtIGxhdGluMSBXaGV0aGVyIG9yIG5vdCB0byBpbnRlcnByZXQgdGhlIGRhdGEgYXMgTGF0aW4tMS4gVGhpcyBzaG91bGRcbiAqICAgICAgICAgICAgICAgbm90IG5lZWQgdG8gYmUgdHJ1ZSB1bmxlc3MgZGVjb2RpbmcgYSBiaW5hcnkgc3RyaW5nLlxuICogQHJldHVybnMgVGhlIHN0cmluZyBlbmNvZGVkIGluIFVURi04L0xhdGluLTEgYmluYXJ5XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzdHJUb1U4KHN0ciwgbGF0aW4xKSB7XG4gICAgdmFyIGwgPSBzdHIubGVuZ3RoO1xuICAgIGlmICghbGF0aW4xICYmIHR5cGVvZiBUZXh0RW5jb2RlciAhPSAndW5kZWZpbmVkJylcbiAgICAgICAgcmV0dXJuIG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShzdHIpO1xuICAgIHZhciBhciA9IG5ldyB1OChzdHIubGVuZ3RoICsgKHN0ci5sZW5ndGggPj4+IDEpKTtcbiAgICB2YXIgYWkgPSAwO1xuICAgIHZhciB3ID0gZnVuY3Rpb24gKHYpIHsgYXJbYWkrK10gPSB2OyB9O1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbDsgKytpKSB7XG4gICAgICAgIGlmIChhaSArIDUgPiBhci5sZW5ndGgpIHtcbiAgICAgICAgICAgIHZhciBuID0gbmV3IHU4KGFpICsgOCArICgobCAtIGkpIDw8IDEpKTtcbiAgICAgICAgICAgIG4uc2V0KGFyKTtcbiAgICAgICAgICAgIGFyID0gbjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgYyA9IHN0ci5jaGFyQ29kZUF0KGkpO1xuICAgICAgICBpZiAoYyA8IDEyOCB8fCBsYXRpbjEpXG4gICAgICAgICAgICB3KGMpO1xuICAgICAgICBlbHNlIGlmIChjIDwgMjA0OClcbiAgICAgICAgICAgIHcoMTkyIHwgKGMgPj4+IDYpKSwgdygxMjggfCAoYyAmIDYzKSk7XG4gICAgICAgIGVsc2UgaWYgKGMgPiA1NTI5NSAmJiBjIDwgNTczNDQpXG4gICAgICAgICAgICBjID0gNjU1MzYgKyAoYyAmIDEwMjMgPDwgMTApIHwgKHN0ci5jaGFyQ29kZUF0KCsraSkgJiAxMDIzKSxcbiAgICAgICAgICAgICAgICB3KDI0MCB8IChjID4+PiAxOCkpLCB3KDEyOCB8ICgoYyA+Pj4gMTIpICYgNjMpKSwgdygxMjggfCAoKGMgPj4+IDYpICYgNjMpKSwgdygxMjggfCAoYyAmIDYzKSk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHcoMjI0IHwgKGMgPj4+IDEyKSksIHcoMTI4IHwgKChjID4+PiA2KSAmIDYzKSksIHcoMTI4IHwgKGMgJiA2MykpO1xuICAgIH1cbiAgICByZXR1cm4gc2xjKGFyLCAwLCBhaSk7XG59XG4vKipcbiAqIENvbnZlcnRzIGEgVWludDhBcnJheSB0byBhIHN0cmluZ1xuICogQHBhcmFtIGRhdCBUaGUgZGF0YSB0byBkZWNvZGUgdG8gc3RyaW5nXG4gKiBAcGFyYW0gbGF0aW4xIFdoZXRoZXIgb3Igbm90IHRvIGludGVycHJldCB0aGUgZGF0YSBhcyBMYXRpbi0xLiBUaGlzIHNob3VsZFxuICogICAgICAgICAgICAgICBub3QgbmVlZCB0byBiZSB0cnVlIHVubGVzcyBlbmNvZGluZyB0byBiaW5hcnkgc3RyaW5nLlxuICogQHJldHVybnMgVGhlIG9yaWdpbmFsIFVURi04L0xhdGluLTEgc3RyaW5nXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzdHJGcm9tVTgoZGF0LCBsYXRpbjEpIHtcbiAgICB2YXIgciA9ICcnO1xuICAgIGlmICghbGF0aW4xICYmIHR5cGVvZiBUZXh0RGVjb2RlciAhPSAndW5kZWZpbmVkJylcbiAgICAgICAgcmV0dXJuIG5ldyBUZXh0RGVjb2RlcigpLmRlY29kZShkYXQpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGF0Lmxlbmd0aDspIHtcbiAgICAgICAgdmFyIGMgPSBkYXRbaSsrXTtcbiAgICAgICAgaWYgKGMgPCAxMjggfHwgbGF0aW4xKVxuICAgICAgICAgICAgciArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGMpO1xuICAgICAgICBlbHNlIGlmIChjIDwgMjI0KVxuICAgICAgICAgICAgciArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKChjICYgMzEpIDw8IDYgfCAoZGF0W2krK10gJiA2MykpO1xuICAgICAgICBlbHNlIGlmIChjIDwgMjQwKVxuICAgICAgICAgICAgciArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKChjICYgMTUpIDw8IDEyIHwgKGRhdFtpKytdICYgNjMpIDw8IDYgfCAoZGF0W2krK10gJiA2MykpO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICBjID0gKChjICYgMTUpIDw8IDE4IHwgKGRhdFtpKytdICYgNjMpIDw8IDEyIHwgKGRhdFtpKytdICYgNjMpIDw8IDYgfCAoZGF0W2krK10gJiA2MykpIC0gNjU1MzYsXG4gICAgICAgICAgICAgICAgciArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKDU1Mjk2IHwgKGMgPj4gMTApLCA1NjMyMCB8IChjICYgMTAyMykpO1xuICAgIH1cbiAgICByZXR1cm4gcjtcbn1cbjtcbi8vIHNraXAgbG9jYWwgemlwIGhlYWRlclxudmFyIHNsemggPSBmdW5jdGlvbiAoZCwgYikgeyByZXR1cm4gYiArIDMwICsgYjIoZCwgYiArIDI2KSArIGIyKGQsIGIgKyAyOCk7IH07XG4vLyByZWFkIHppcCBoZWFkZXJcbnZhciB6aCA9IGZ1bmN0aW9uIChkLCBiLCB6KSB7XG4gICAgdmFyIGZubCA9IGIyKGQsIGIgKyAyOCksIGZuID0gc3RyRnJvbVU4KGQuc3ViYXJyYXkoYiArIDQ2LCBiICsgNDYgKyBmbmwpLCAhKGIyKGQsIGIgKyA4KSAmIDIwNDgpKSwgZXMgPSBiICsgNDYgKyBmbmw7XG4gICAgdmFyIF9hID0geiA/IHo2NGUoZCwgZXMpIDogW2I0KGQsIGIgKyAyMCksIGI0KGQsIGIgKyAyNCksIGI0KGQsIGIgKyA0MildLCBzYyA9IF9hWzBdLCBzdSA9IF9hWzFdLCBvZmYgPSBfYVsyXTtcbiAgICByZXR1cm4gW2IyKGQsIGIgKyAxMCksIHNjLCBzdSwgZm4sIGVzICsgYjIoZCwgYiArIDMwKSArIGIyKGQsIGIgKyAzMiksIG9mZl07XG59O1xuLy8gcmVhZCB6aXA2NCBleHRyYSBmaWVsZFxudmFyIHo2NGUgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAoOyBiMihkLCBiKSAhPSAxOyBiICs9IDQgKyBiMihkLCBiICsgMikpXG4gICAgICAgIDtcbiAgICByZXR1cm4gW2I0KGQsIGIgKyAxMiksIGI0KGQsIGIgKyA0KSwgYjQoZCwgYiArIDIwKV07XG59O1xuLy8gd3JpdGUgemlwIGhlYWRlclxudmFyIHd6aCA9IGZ1bmN0aW9uIChkLCBiLCBjLCBjbXAsIHN1LCBmbiwgdSwgbywgY2UsIHQpIHtcbiAgICB2YXIgZmwgPSBmbi5sZW5ndGgsIGwgPSBjbXAubGVuZ3RoO1xuICAgIHdieXRlcyhkLCBiLCBjZSAhPSBudWxsID8gMHgyMDE0QjUwIDogMHg0MDM0QjUwKSwgYiArPSA0O1xuICAgIGlmIChjZSAhPSBudWxsKVxuICAgICAgICBkW2JdID0gMjAsIGIgKz0gMjtcbiAgICBkW2JdID0gMjAsIGIgKz0gMjsgLy8gc3BlYyBjb21wbGlhbmNlPyB3aGF0J3MgdGhhdD9cbiAgICBkW2IrK10gPSAodCA9PSA4ICYmIChvLmxldmVsID09IDEgPyA2IDogby5sZXZlbCA8IDYgPyA0IDogby5sZXZlbCA9PSA5ID8gMiA6IDApKSwgZFtiKytdID0gdSAmJiA4O1xuICAgIGRbYl0gPSB0LCBiICs9IDI7XG4gICAgdmFyIGR0ID0gbmV3IERhdGUoby5tdGltZSB8fCBEYXRlLm5vdygpKSwgeSA9IGR0LmdldEZ1bGxZZWFyKCkgLSAxOTgwO1xuICAgIGlmICh5IDwgMCB8fCB5ID4gMTE5KVxuICAgICAgICB0aHJvdyAnZGF0ZSBub3QgaW4gcmFuZ2UgMTk4MC0yMDk5JztcbiAgICB3Ynl0ZXMoZCwgYiwgKCh5IDw8IDI0KSAqIDIpIHwgKChkdC5nZXRNb250aCgpICsgMSkgPDwgMjEpIHwgKGR0LmdldERhdGUoKSA8PCAxNikgfCAoZHQuZ2V0SG91cnMoKSA8PCAxMSkgfCAoZHQuZ2V0TWludXRlcygpIDw8IDUpIHwgKGR0LmdldFNlY29uZHMoKSA+Pj4gMSkpO1xuICAgIGIgKz0gNDtcbiAgICB3Ynl0ZXMoZCwgYiwgYyk7XG4gICAgd2J5dGVzKGQsIGIgKyA0LCBsKTtcbiAgICB3Ynl0ZXMoZCwgYiArIDgsIHN1KTtcbiAgICB3Ynl0ZXMoZCwgYiArIDEyLCBmbCksIGIgKz0gMTY7IC8vIHNraXAgZXh0cmEgZmllbGQsIGNvbW1lbnRcbiAgICBpZiAoY2UgIT0gbnVsbClcbiAgICAgICAgd2J5dGVzKGQsIGIgKz0gMTAsIGNlKSwgYiArPSA0O1xuICAgIGQuc2V0KGZuLCBiKTtcbiAgICBiICs9IGZsO1xuICAgIGlmIChjZSA9PSBudWxsKVxuICAgICAgICBkLnNldChjbXAsIGIpO1xufTtcbi8vIHdyaXRlIHppcCBmb290ZXIgKGVuZCBvZiBjZW50cmFsIGRpcmVjdG9yeSlcbnZhciB3emYgPSBmdW5jdGlvbiAobywgYiwgYywgZCwgZSkge1xuICAgIHdieXRlcyhvLCBiLCAweDYwNTRCNTApOyAvLyBza2lwIGRpc2tcbiAgICB3Ynl0ZXMobywgYiArIDgsIGMpO1xuICAgIHdieXRlcyhvLCBiICsgMTAsIGMpO1xuICAgIHdieXRlcyhvLCBiICsgMTIsIGQpO1xuICAgIHdieXRlcyhvLCBiICsgMTYsIGUpO1xufTtcbmV4cG9ydCBmdW5jdGlvbiB6aXAoZGF0YSwgb3B0cywgY2IpIHtcbiAgICBpZiAoIWNiKVxuICAgICAgICBjYiA9IG9wdHMsIG9wdHMgPSB7fTtcbiAgICBpZiAodHlwZW9mIGNiICE9ICdmdW5jdGlvbicpXG4gICAgICAgIHRocm93ICdubyBjYWxsYmFjayc7XG4gICAgdmFyIHIgPSB7fTtcbiAgICBmbHRuKGRhdGEsICcnLCByLCBvcHRzKTtcbiAgICB2YXIgayA9IE9iamVjdC5rZXlzKHIpO1xuICAgIHZhciBsZnQgPSBrLmxlbmd0aCwgbyA9IDAsIHRvdCA9IDA7XG4gICAgdmFyIHNsZnQgPSBsZnQsIGZpbGVzID0gbmV3IEFycmF5KGxmdCk7XG4gICAgdmFyIHRlcm0gPSBbXTtcbiAgICB2YXIgdEFsbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0ZXJtLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgdGVybVtpXSgpO1xuICAgIH07XG4gICAgdmFyIGNiZiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG91dCA9IG5ldyB1OCh0b3QgKyAyMiksIG9lID0gbywgY2RsID0gdG90IC0gbztcbiAgICAgICAgdG90ID0gMDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzbGZ0OyArK2kpIHtcbiAgICAgICAgICAgIHZhciBmID0gZmlsZXNbaV07XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHd6aChvdXQsIHRvdCwgZi5jLCBmLmQsIGYubSwgZi5uLCBmLnUsIGYucCwgbnVsbCwgZi50KTtcbiAgICAgICAgICAgICAgICB3emgob3V0LCBvLCBmLmMsIGYuZCwgZi5tLCBmLm4sIGYudSwgZi5wLCB0b3QsIGYudCksIG8gKz0gNDYgKyBmLm4ubGVuZ3RoLCB0b3QgKz0gMzAgKyBmLm4ubGVuZ3RoICsgZi5kLmxlbmd0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNiKGUsIG51bGwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHd6ZihvdXQsIG8sIGZpbGVzLmxlbmd0aCwgY2RsLCBvZSk7XG4gICAgICAgIGNiKG51bGwsIG91dCk7XG4gICAgfTtcbiAgICBpZiAoIWxmdClcbiAgICAgICAgY2JmKCk7XG4gICAgdmFyIF9sb29wXzEgPSBmdW5jdGlvbiAoaSkge1xuICAgICAgICB2YXIgZm4gPSBrW2ldO1xuICAgICAgICB2YXIgX2EgPSByW2ZuXSwgZmlsZSA9IF9hWzBdLCBwID0gX2FbMV07XG4gICAgICAgIHZhciBjID0gY3JjKCksIG0gPSBmaWxlLmxlbmd0aDtcbiAgICAgICAgYy5wKGZpbGUpO1xuICAgICAgICB2YXIgbiA9IHN0clRvVTgoZm4pLCBzID0gbi5sZW5ndGg7XG4gICAgICAgIHZhciB0ID0gcC5sZXZlbCA9PSAwID8gMCA6IDg7XG4gICAgICAgIHZhciBjYmwgPSBmdW5jdGlvbiAoZSwgZCkge1xuICAgICAgICAgICAgaWYgKGUpIHtcbiAgICAgICAgICAgICAgICB0QWxsKCk7XG4gICAgICAgICAgICAgICAgY2IoZSwgbnVsbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgbCA9IGQubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGZpbGVzW2ldID0ge1xuICAgICAgICAgICAgICAgICAgICB0OiB0LFxuICAgICAgICAgICAgICAgICAgICBkOiBkLFxuICAgICAgICAgICAgICAgICAgICBtOiBtLFxuICAgICAgICAgICAgICAgICAgICBjOiBjLmQoKSxcbiAgICAgICAgICAgICAgICAgICAgdTogZm4ubGVuZ3RoICE9IGwsXG4gICAgICAgICAgICAgICAgICAgIG46IG4sXG4gICAgICAgICAgICAgICAgICAgIHA6IHBcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIG8gKz0gMzAgKyBzICsgbDtcbiAgICAgICAgICAgICAgICB0b3QgKz0gNzYgKyAyICogcyArIGw7XG4gICAgICAgICAgICAgICAgaWYgKCEtLWxmdClcbiAgICAgICAgICAgICAgICAgICAgY2JmKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGlmIChuLmxlbmd0aCA+IDY1NTM1KVxuICAgICAgICAgICAgY2JsKCdmaWxlbmFtZSB0b28gbG9uZycsIG51bGwpO1xuICAgICAgICBpZiAoIXQpXG4gICAgICAgICAgICBjYmwobnVsbCwgZmlsZSk7XG4gICAgICAgIGVsc2UgaWYgKG0gPCAxNjAwMDApIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY2JsKG51bGwsIGRlZmxhdGVTeW5jKGZpbGUsIHApKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgY2JsKGUsIG51bGwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHRlcm0ucHVzaChkZWZsYXRlKGZpbGUsIHAsIGNibCkpO1xuICAgIH07XG4gICAgLy8gQ2Fubm90IHVzZSBsZnQgYmVjYXVzZSBpdCBjYW4gZGVjcmVhc2VcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNsZnQ7ICsraSkge1xuICAgICAgICBfbG9vcF8xKGkpO1xuICAgIH1cbiAgICByZXR1cm4gdEFsbDtcbn1cbi8qKlxuICogU3luY2hyb25vdXNseSBjcmVhdGVzIGEgWklQIGZpbGUuIFByZWZlciB1c2luZyBgemlwYCBmb3IgYmV0dGVyIHBlcmZvcm1hbmNlXG4gKiB3aXRoIG1vcmUgdGhhbiBvbmUgZmlsZS5cbiAqIEBwYXJhbSBkYXRhIFRoZSBkaXJlY3Rvcnkgc3RydWN0dXJlIGZvciB0aGUgWklQIGFyY2hpdmVcbiAqIEBwYXJhbSBvcHRzIFRoZSBtYWluIG9wdGlvbnMsIG1lcmdlZCB3aXRoIHBlci1maWxlIG9wdGlvbnNcbiAqIEByZXR1cm5zIFRoZSBnZW5lcmF0ZWQgWklQIGFyY2hpdmVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHppcFN5bmMoZGF0YSwgb3B0cykge1xuICAgIGlmIChvcHRzID09PSB2b2lkIDApIHsgb3B0cyA9IHt9OyB9XG4gICAgdmFyIHIgPSB7fTtcbiAgICB2YXIgZmlsZXMgPSBbXTtcbiAgICBmbHRuKGRhdGEsICcnLCByLCBvcHRzKTtcbiAgICB2YXIgbyA9IDA7XG4gICAgdmFyIHRvdCA9IDA7XG4gICAgZm9yICh2YXIgZm4gaW4gcikge1xuICAgICAgICB2YXIgX2EgPSByW2ZuXSwgZmlsZSA9IF9hWzBdLCBwID0gX2FbMV07XG4gICAgICAgIHZhciB0ID0gcC5sZXZlbCA9PSAwID8gMCA6IDg7XG4gICAgICAgIHZhciBuID0gc3RyVG9VOChmbiksIHMgPSBuLmxlbmd0aDtcbiAgICAgICAgaWYgKG4ubGVuZ3RoID4gNjU1MzUpXG4gICAgICAgICAgICB0aHJvdyAnZmlsZW5hbWUgdG9vIGxvbmcnO1xuICAgICAgICB2YXIgZCA9IHQgPyBkZWZsYXRlU3luYyhmaWxlLCBwKSA6IGZpbGUsIGwgPSBkLmxlbmd0aDtcbiAgICAgICAgdmFyIGMgPSBjcmMoKTtcbiAgICAgICAgYy5wKGZpbGUpO1xuICAgICAgICBmaWxlcy5wdXNoKHtcbiAgICAgICAgICAgIHQ6IHQsXG4gICAgICAgICAgICBkOiBkLFxuICAgICAgICAgICAgbTogZmlsZS5sZW5ndGgsXG4gICAgICAgICAgICBjOiBjLmQoKSxcbiAgICAgICAgICAgIHU6IGZuLmxlbmd0aCAhPSBzLFxuICAgICAgICAgICAgbjogbixcbiAgICAgICAgICAgIG86IG8sXG4gICAgICAgICAgICBwOiBwXG4gICAgICAgIH0pO1xuICAgICAgICBvICs9IDMwICsgcyArIGw7XG4gICAgICAgIHRvdCArPSA3NiArIDIgKiBzICsgbDtcbiAgICB9XG4gICAgdmFyIG91dCA9IG5ldyB1OCh0b3QgKyAyMiksIG9lID0gbywgY2RsID0gdG90IC0gbztcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGZpbGVzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHZhciBmID0gZmlsZXNbaV07XG4gICAgICAgIHd6aChvdXQsIGYubywgZi5jLCBmLmQsIGYubSwgZi5uLCBmLnUsIGYucCwgbnVsbCwgZi50KTtcbiAgICAgICAgd3poKG91dCwgbywgZi5jLCBmLmQsIGYubSwgZi5uLCBmLnUsIGYucCwgZi5vLCBmLnQpLCBvICs9IDQ2ICsgZi5uLmxlbmd0aDtcbiAgICB9XG4gICAgd3pmKG91dCwgbywgZmlsZXMubGVuZ3RoLCBjZGwsIG9lKTtcbiAgICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBBc3luY2hyb25vdXNseSBkZWNvbXByZXNzZXMgYSBaSVAgYXJjaGl2ZVxuICogQHBhcmFtIGRhdGEgVGhlIHJhdyBjb21wcmVzc2VkIFpJUCBmaWxlXG4gKiBAcGFyYW0gY2IgVGhlIGNhbGxiYWNrIHRvIGNhbGwgd2l0aCB0aGUgZGVjb21wcmVzc2VkIGZpbGVzXG4gKiBAcmV0dXJucyBBIGZ1bmN0aW9uIHRoYXQgY2FuIGJlIHVzZWQgdG8gaW1tZWRpYXRlbHkgdGVybWluYXRlIHRoZSB1bnppcHBpbmdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVuemlwKGRhdGEsIGNiKSB7XG4gICAgaWYgKHR5cGVvZiBjYiAhPSAnZnVuY3Rpb24nKVxuICAgICAgICB0aHJvdyAnbm8gY2FsbGJhY2snO1xuICAgIHZhciB0ZXJtID0gW107XG4gICAgdmFyIHRBbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGVybS5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgIHRlcm1baV0oKTtcbiAgICB9O1xuICAgIHZhciBmaWxlcyA9IHt9O1xuICAgIHZhciBlID0gZGF0YS5sZW5ndGggLSAyMjtcbiAgICBmb3IgKDsgYjQoZGF0YSwgZSkgIT0gMHg2MDU0QjUwOyAtLWUpIHtcbiAgICAgICAgaWYgKCFlIHx8IGRhdGEubGVuZ3RoIC0gZSA+IDY1NTU4KSB7XG4gICAgICAgICAgICBjYignaW52YWxpZCB6aXAgZmlsZScsIG51bGwpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfVxuICAgIDtcbiAgICB2YXIgbGZ0ID0gYjIoZGF0YSwgZSArIDgpO1xuICAgIGlmICghbGZ0KVxuICAgICAgICBjYihudWxsLCB7fSk7XG4gICAgdmFyIGMgPSBsZnQ7XG4gICAgdmFyIG8gPSBiNChkYXRhLCBlICsgMTYpO1xuICAgIHZhciB6ID0gbyA9PSA0Mjk0OTY3Mjk1O1xuICAgIGlmICh6KSB7XG4gICAgICAgIGUgPSBiNChkYXRhLCBlIC0gMTIpO1xuICAgICAgICBpZiAoYjQoZGF0YSwgZSkgIT0gMHg2MDY0QjUwKVxuICAgICAgICAgICAgdGhyb3cgJ2ludmFsaWQgemlwIGZpbGUnO1xuICAgICAgICBjID0gbGZ0ID0gYjQoZGF0YSwgZSArIDMyKTtcbiAgICAgICAgbyA9IGI0KGRhdGEsIGUgKyA0OCk7XG4gICAgfVxuICAgIHZhciBfbG9vcF8yID0gZnVuY3Rpb24gKGkpIHtcbiAgICAgICAgdmFyIF9hID0gemgoZGF0YSwgbywgeiksIGNfMSA9IF9hWzBdLCBzYyA9IF9hWzFdLCBzdSA9IF9hWzJdLCBmbiA9IF9hWzNdLCBubyA9IF9hWzRdLCBvZmYgPSBfYVs1XSwgYiA9IHNsemgoZGF0YSwgb2ZmKTtcbiAgICAgICAgbyA9IG5vO1xuICAgICAgICB2YXIgY2JsID0gZnVuY3Rpb24gKGUsIGQpIHtcbiAgICAgICAgICAgIGlmIChlKSB7XG4gICAgICAgICAgICAgICAgdEFsbCgpO1xuICAgICAgICAgICAgICAgIGNiKGUsIG51bGwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZmlsZXNbZm5dID0gZDtcbiAgICAgICAgICAgICAgICBpZiAoIS0tbGZ0KVxuICAgICAgICAgICAgICAgICAgICBjYihudWxsLCBmaWxlcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGlmICghY18xKVxuICAgICAgICAgICAgY2JsKG51bGwsIHNsYyhkYXRhLCBiLCBiICsgc2MpKTtcbiAgICAgICAgZWxzZSBpZiAoY18xID09IDgpIHtcbiAgICAgICAgICAgIHZhciBpbmZsID0gZGF0YS5zdWJhcnJheShiLCBiICsgc2MpO1xuICAgICAgICAgICAgaWYgKHNjIDwgMzIwMDAwKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgY2JsKG51bGwsIGluZmxhdGVTeW5jKGluZmwsIG5ldyB1OChzdSkpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY2JsKGUsIG51bGwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICB0ZXJtLnB1c2goaW5mbGF0ZShpbmZsLCB7IHNpemU6IHN1IH0sIGNibCkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGNibCgndW5rbm93biBjb21wcmVzc2lvbiB0eXBlICcgKyBjXzEsIG51bGwpO1xuICAgIH07XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjOyArK2kpIHtcbiAgICAgICAgX2xvb3BfMihpKTtcbiAgICB9XG4gICAgcmV0dXJuIHRBbGw7XG59XG4vKipcbiAqIFN5bmNocm9ub3VzbHkgZGVjb21wcmVzc2VzIGEgWklQIGFyY2hpdmUuIFByZWZlciB1c2luZyBgdW56aXBgIGZvciBiZXR0ZXJcbiAqIHBlcmZvcm1hbmNlIHdpdGggbW9yZSB0aGFuIG9uZSBmaWxlLlxuICogQHBhcmFtIGRhdGEgVGhlIHJhdyBjb21wcmVzc2VkIFpJUCBmaWxlXG4gKiBAcmV0dXJucyBUaGUgZGVjb21wcmVzc2VkIGZpbGVzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1bnppcFN5bmMoZGF0YSkge1xuICAgIHZhciBmaWxlcyA9IHt9O1xuICAgIHZhciBlID0gZGF0YS5sZW5ndGggLSAyMjtcbiAgICBmb3IgKDsgYjQoZGF0YSwgZSkgIT0gMHg2MDU0QjUwOyAtLWUpIHtcbiAgICAgICAgaWYgKCFlIHx8IGRhdGEubGVuZ3RoIC0gZSA+IDY1NTU4KVxuICAgICAgICAgICAgdGhyb3cgJ2ludmFsaWQgemlwIGZpbGUnO1xuICAgIH1cbiAgICA7XG4gICAgdmFyIGMgPSBiMihkYXRhLCBlICsgOCk7XG4gICAgaWYgKCFjKVxuICAgICAgICByZXR1cm4ge307XG4gICAgdmFyIG8gPSBiNChkYXRhLCBlICsgMTYpO1xuICAgIHZhciB6ID0gbyA9PSA0Mjk0OTY3Mjk1O1xuICAgIGlmICh6KSB7XG4gICAgICAgIGUgPSBiNChkYXRhLCBlIC0gMTIpO1xuICAgICAgICBpZiAoYjQoZGF0YSwgZSkgIT0gMHg2MDY0QjUwKVxuICAgICAgICAgICAgdGhyb3cgJ2ludmFsaWQgemlwIGZpbGUnO1xuICAgICAgICBjID0gYjQoZGF0YSwgZSArIDMyKTtcbiAgICAgICAgbyA9IGI0KGRhdGEsIGUgKyA0OCk7XG4gICAgfVxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYzsgKytpKSB7XG4gICAgICAgIHZhciBfYSA9IHpoKGRhdGEsIG8sIHopLCBjXzIgPSBfYVswXSwgc2MgPSBfYVsxXSwgc3UgPSBfYVsyXSwgZm4gPSBfYVszXSwgbm8gPSBfYVs0XSwgb2ZmID0gX2FbNV0sIGIgPSBzbHpoKGRhdGEsIG9mZik7XG4gICAgICAgIG8gPSBubztcbiAgICAgICAgaWYgKCFjXzIpXG4gICAgICAgICAgICBmaWxlc1tmbl0gPSBzbGMoZGF0YSwgYiwgYiArIHNjKTtcbiAgICAgICAgZWxzZSBpZiAoY18yID09IDgpXG4gICAgICAgICAgICBmaWxlc1tmbl0gPSBpbmZsYXRlU3luYyhkYXRhLnN1YmFycmF5KGIsIGIgKyBzYyksIG5ldyB1OChzdSkpO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICB0aHJvdyAndW5rbm93biBjb21wcmVzc2lvbiB0eXBlICcgKyBjXzI7XG4gICAgfVxuICAgIHJldHVybiBmaWxlcztcbn1cbiIsICJpbXBvcnQgeyBfYmFzZTY0RW5jb2RlLCBfZWFjaCB9IGZyb20gJy4vdXRpbHMnXG5pbXBvcnQgQ29uZmlnIGZyb20gJy4vY29uZmlnJ1xuaW1wb3J0IHsgQ29tcHJlc3Npb24sIFJlcXVlc3RPcHRpb25zLCBSZXF1ZXN0UmVzcG9uc2UgfSBmcm9tICcuL3R5cGVzJ1xuaW1wb3J0IHsgX2Zvcm1EYXRhVG9RdWVyeSB9IGZyb20gJy4vdXRpbHMvcmVxdWVzdC11dGlscydcblxuaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSAnLi91dGlscy9sb2dnZXInXG5pbXBvcnQgeyBmZXRjaCwgZG9jdW1lbnQsIFhNTEh0dHBSZXF1ZXN0LCBBYm9ydENvbnRyb2xsZXIsIG5hdmlnYXRvciB9IGZyb20gJy4vdXRpbHMvZ2xvYmFscydcbmltcG9ydCB7IGd6aXBTeW5jLCBzdHJUb1U4IH0gZnJvbSAnZmZsYXRlJ1xuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY29tcGF0L2NvbXBhdFxuZXhwb3J0IGNvbnN0IFNVUFBPUlRTX1JFUVVFU1QgPSAhIVhNTEh0dHBSZXF1ZXN0IHx8ICEhZmV0Y2hcblxuLy8gVGhpcyBpcyB0aGUgZW50cnlwb2ludC4gSXQgdGFrZXMgY2FyZSBvZiBzYW5pdGl6aW5nIHRoZSBvcHRpb25zIGFuZCB0aGVuIGNhbGxzIHRoZSBhcHByb3ByaWF0ZSByZXF1ZXN0IG1ldGhvZC5cbmV4cG9ydCBjb25zdCByZXF1ZXN0ID0gKF9vcHRpb25zOiBSZXF1ZXN0T3B0aW9ucykgPT4ge1xuICAgIC8vIENsb25lIHRoZSBvcHRpb25zIHNvIHdlIGRvbid0IG1vZGlmeSB0aGUgb3JpZ2luYWwgb2JqZWN0XG4gICAgY29uc3Qgb3B0aW9ucyA9IHsgLi4uX29wdGlvbnMgfVxuICAgIG9wdGlvbnMudGltZW91dCA9IG9wdGlvbnMudGltZW91dCB8fCA2MDAwMFxuXG4gICAgb3B0aW9ucy51cmwgPSBleHRlbmRVUkxQYXJhbXMob3B0aW9ucy51cmwsIHtcbiAgICAgICAgXzogbmV3IERhdGUoKS5nZXRUaW1lKCkudG9TdHJpbmcoKSxcbiAgICAgICAgdmVyOiBDb25maWcuTElCX1ZFUlNJT04sXG4gICAgICAgIGNvbXByZXNzaW9uOiBvcHRpb25zLmNvbXByZXNzaW9uLFxuICAgIH0pXG5cbiAgICBpZiAob3B0aW9ucy50cmFuc3BvcnQgPT09ICdzZW5kQmVhY29uJyAmJiBuYXZpZ2F0b3I/LnNlbmRCZWFjb24pIHtcbiAgICAgICAgcmV0dXJuIF9zZW5kQmVhY29uKG9wdGlvbnMpXG4gICAgfVxuXG4gICAgLy8gTk9URTogVW50aWwgd2UgYXJlIGNvbmZpZGVudCB3aXRoIGl0LCB3ZSBvbmx5IHVzZSBmZXRjaCBpZiBleHBsaWNpdGx5IHRvbGQgc29cbiAgICAvLyBBdCBzb21lIHBvaW50IHdlIHdpbGwgbWFrZSBpdCB0aGUgZGVmYXVsdCBvdmVyIHhoclxuICAgIGlmIChvcHRpb25zLnRyYW5zcG9ydCA9PT0gJ2ZldGNoJyAmJiBmZXRjaCkge1xuICAgICAgICByZXR1cm4gX2ZldGNoKG9wdGlvbnMpXG4gICAgfVxuXG4gICAgaWYgKFhNTEh0dHBSZXF1ZXN0IHx8ICFkb2N1bWVudCkge1xuICAgICAgICByZXR1cm4geGhyKG9wdGlvbnMpXG4gICAgfVxuXG4gICAgLy8gRmluYWwgZmFsbGJhY2sgaWYgZXZlcnl0aGluZyBlbHNlIGZhaWxzLi4uXG4gICAgc2NyaXB0UmVxdWVzdChvcHRpb25zKVxufVxuXG5leHBvcnQgY29uc3QgZXh0ZW5kVVJMUGFyYW1zID0gKHVybDogc3RyaW5nLCBwYXJhbXM6IFJlY29yZDxzdHJpbmcsIGFueT4pOiBzdHJpbmcgPT4ge1xuICAgIGNvbnN0IFtiYXNlVXJsLCBzZWFyY2hdID0gdXJsLnNwbGl0KCc/JylcbiAgICBjb25zdCBuZXdQYXJhbXMgPSB7IC4uLnBhcmFtcyB9XG5cbiAgICBzZWFyY2g/LnNwbGl0KCcmJykuZm9yRWFjaCgocGFpcikgPT4ge1xuICAgICAgICBjb25zdCBba2V5XSA9IHBhaXIuc3BsaXQoJz0nKVxuICAgICAgICBkZWxldGUgbmV3UGFyYW1zW2tleV1cbiAgICB9KVxuXG4gICAgbGV0IG5ld1NlYXJjaCA9IF9mb3JtRGF0YVRvUXVlcnkobmV3UGFyYW1zKVxuICAgIG5ld1NlYXJjaCA9IG5ld1NlYXJjaCA/IChzZWFyY2ggPyBzZWFyY2ggKyAnJicgOiAnJykgKyBuZXdTZWFyY2ggOiBzZWFyY2hcblxuICAgIHJldHVybiBgJHtiYXNlVXJsfT8ke25ld1NlYXJjaH1gXG59XG5cbmNvbnN0IGVuY29kZVRvRGF0YVN0cmluZyA9IChkYXRhOiBzdHJpbmcgfCBSZWNvcmQ8c3RyaW5nLCBhbnk+KTogc3RyaW5nID0+IHtcbiAgICByZXR1cm4gJ2RhdGE9JyArIGVuY29kZVVSSUNvbXBvbmVudCh0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycgPyBkYXRhIDogSlNPTi5zdHJpbmdpZnkoZGF0YSkpXG59XG5cbmNvbnN0IGVuY29kZVBvc3REYXRhID0gKHsgZGF0YSwgY29tcHJlc3Npb24sIHRyYW5zcG9ydCwgbWV0aG9kIH06IFJlcXVlc3RPcHRpb25zKTogc3RyaW5nIHwgQmxvYlBhcnQgfCBudWxsID0+IHtcbiAgICBpZiAoIWRhdGEpIHtcbiAgICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG5cbiAgICAvLyBHemlwIGlzIGFsd2F5cyBhIGJsb2JcbiAgICBpZiAoY29tcHJlc3Npb24gPT09IENvbXByZXNzaW9uLkdaaXBKUykge1xuICAgICAgICBjb25zdCBnemlwRGF0YSA9IGd6aXBTeW5jKHN0clRvVTgoSlNPTi5zdHJpbmdpZnkoZGF0YSkpLCB7IG10aW1lOiAwIH0pXG4gICAgICAgIHJldHVybiBuZXcgQmxvYihbZ3ppcERhdGFdLCB7IHR5cGU6ICd0ZXh0L3BsYWluJyB9KVxuICAgIH1cblxuICAgIC8vIHNlbmRCZWFjb24gaXMgYWx3YXlzIGEgYmxvYiBidXQgY2FuIGJlIGJhc2U2NCBlbmNvZGVkIGludGVybmFsbHlcbiAgICBpZiAodHJhbnNwb3J0ID09PSAnc2VuZEJlYWNvbicpIHtcbiAgICAgICAgY29uc3QgYm9keSA9IGNvbXByZXNzaW9uID09PSBDb21wcmVzc2lvbi5CYXNlNjQgPyBfYmFzZTY0RW5jb2RlKEpTT04uc3RyaW5naWZ5KGRhdGEpKSA6IGRhdGFcbiAgICAgICAgcmV0dXJuIG5ldyBCbG9iKFtlbmNvZGVUb0RhdGFTdHJpbmcoYm9keSldLCB7IHR5cGU6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnIH0pXG4gICAgfVxuXG4gICAgaWYgKGNvbXByZXNzaW9uID09PSBDb21wcmVzc2lvbi5CYXNlNjQpIHtcbiAgICAgICAgY29uc3QgYjY0ZGF0YSA9IF9iYXNlNjRFbmNvZGUoSlNPTi5zdHJpbmdpZnkoZGF0YSkpXG4gICAgICAgIHJldHVybiBlbmNvZGVUb0RhdGFTdHJpbmcoYjY0ZGF0YSlcbiAgICB9XG5cbiAgICBpZiAobWV0aG9kICE9PSAnUE9TVCcpIHtcbiAgICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG5cbiAgICByZXR1cm4gZW5jb2RlVG9EYXRhU3RyaW5nKGRhdGEpXG59XG5cbmNvbnN0IHhociA9IChvcHRpb25zOiBSZXF1ZXN0T3B0aW9ucykgPT4ge1xuICAgIGNvbnN0IHJlcSA9IG5ldyBYTUxIdHRwUmVxdWVzdCEoKVxuICAgIHJlcS5vcGVuKG9wdGlvbnMubWV0aG9kIHx8ICdHRVQnLCBvcHRpb25zLnVybCwgdHJ1ZSlcbiAgICBjb25zdCBib2R5ID0gZW5jb2RlUG9zdERhdGEob3B0aW9ucylcblxuICAgIF9lYWNoKG9wdGlvbnMuaGVhZGVycywgZnVuY3Rpb24gKGhlYWRlclZhbHVlLCBoZWFkZXJOYW1lKSB7XG4gICAgICAgIHJlcS5zZXRSZXF1ZXN0SGVhZGVyKGhlYWRlck5hbWUsIGhlYWRlclZhbHVlKVxuICAgIH0pXG5cbiAgICBpZiAob3B0aW9ucy5tZXRob2QgPT09ICdQT1NUJyAmJiB0eXBlb2YgYm9keSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmVxLnNldFJlcXVlc3RIZWFkZXIoJ0NvbnRlbnQtVHlwZScsICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnKVxuICAgIH1cblxuICAgIGlmIChvcHRpb25zLnRpbWVvdXQpIHtcbiAgICAgICAgcmVxLnRpbWVvdXQgPSBvcHRpb25zLnRpbWVvdXRcbiAgICB9XG4gICAgLy8gc2VuZCB0aGUgcGhfb3B0b3V0IGNvb2tpZVxuICAgIC8vIHdpdGhDcmVkZW50aWFscyBjYW5ub3QgYmUgbW9kaWZpZWQgdW50aWwgYWZ0ZXIgY2FsbGluZyAub3BlbiBvbiBBbmRyb2lkIGFuZCBNb2JpbGUgU2FmYXJpXG4gICAgcmVxLndpdGhDcmVkZW50aWFscyA9IHRydWVcbiAgICByZXEub25yZWFkeXN0YXRlY2hhbmdlID0gKCkgPT4ge1xuICAgICAgICAvLyBYTUxIdHRwUmVxdWVzdC5ET05FID09IDQsIGV4Y2VwdCBpbiBzYWZhcmkgNFxuICAgICAgICBpZiAocmVxLnJlYWR5U3RhdGUgPT09IDQpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlOiBSZXF1ZXN0UmVzcG9uc2UgPSB7XG4gICAgICAgICAgICAgICAgc3RhdHVzQ29kZTogcmVxLnN0YXR1cyxcbiAgICAgICAgICAgICAgICB0ZXh0OiByZXEucmVzcG9uc2VUZXh0LFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlcS5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmpzb24gPSBKU09OLnBhcnNlKHJlcS5yZXNwb25zZVRleHQpXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBsb2dnZXIuZXJyb3IoZSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIG9wdGlvbnMuY2FsbGJhY2s/LihyZXNwb25zZSlcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXEuc2VuZChib2R5KVxufVxuXG5jb25zdCBfZmV0Y2ggPSAob3B0aW9uczogUmVxdWVzdE9wdGlvbnMpID0+IHtcbiAgICBjb25zdCBib2R5ID0gZW5jb2RlUG9zdERhdGEob3B0aW9ucylcblxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjb21wYXQvY29tcGF0XG4gICAgY29uc3QgaGVhZGVycyA9IG5ldyBIZWFkZXJzKClcbiAgICBfZWFjaChoZWFkZXJzLCBmdW5jdGlvbiAoaGVhZGVyVmFsdWUsIGhlYWRlck5hbWUpIHtcbiAgICAgICAgaGVhZGVycy5hcHBlbmQoaGVhZGVyTmFtZSwgaGVhZGVyVmFsdWUpXG4gICAgfSlcblxuICAgIGlmIChvcHRpb25zLm1ldGhvZCA9PT0gJ1BPU1QnICYmIHR5cGVvZiBib2R5ID09PSAnc3RyaW5nJykge1xuICAgICAgICBoZWFkZXJzLmFwcGVuZCgnQ29udGVudC1UeXBlJywgJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcpXG4gICAgfVxuXG4gICAgY29uc3QgdXJsID0gb3B0aW9ucy51cmxcbiAgICBsZXQgYWJvcnRlcjogeyBzaWduYWw6IGFueTsgdGltZW91dDogbnVtYmVyIH0gfCBudWxsID0gbnVsbFxuXG4gICAgaWYgKEFib3J0Q29udHJvbGxlcikge1xuICAgICAgICBjb25zdCBjb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpXG4gICAgICAgIGFib3J0ZXIgPSB7XG4gICAgICAgICAgICBzaWduYWw6IGNvbnRyb2xsZXIuc2lnbmFsLFxuICAgICAgICAgICAgdGltZW91dDogc2V0VGltZW91dCgoKSA9PiBjb250cm9sbGVyLmFib3J0KCksIG9wdGlvbnMudGltZW91dCksXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmZXRjaCEodXJsLCB7XG4gICAgICAgIG1ldGhvZDogb3B0aW9ucz8ubWV0aG9kIHx8ICdHRVQnLFxuICAgICAgICBoZWFkZXJzLFxuICAgICAgICBrZWVwYWxpdmU6IG9wdGlvbnMubWV0aG9kID09PSAnUE9TVCcsXG4gICAgICAgIGJvZHksXG4gICAgICAgIHNpZ25hbDogYWJvcnRlcj8uc2lnbmFsLFxuICAgIH0pXG4gICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLnRleHQoKS50aGVuKChyZXNwb25zZVRleHQpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXM6IFJlcXVlc3RSZXNwb25zZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzQ29kZTogcmVzcG9uc2Uuc3RhdHVzLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiByZXNwb25zZVRleHQsXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXMuanNvbiA9IEpTT04ucGFyc2UocmVzcG9uc2VUZXh0KVxuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoZSlcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIG9wdGlvbnMuY2FsbGJhY2s/LihyZXMpXG4gICAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoZXJyb3IpXG4gICAgICAgICAgICBvcHRpb25zLmNhbGxiYWNrPy4oeyBzdGF0dXNDb2RlOiAwLCB0ZXh0OiBlcnJvciB9KVxuICAgICAgICB9KVxuICAgICAgICAuZmluYWxseSgoKSA9PiAoYWJvcnRlciA/IGNsZWFyVGltZW91dChhYm9ydGVyLnRpbWVvdXQpIDogbnVsbCkpXG5cbiAgICByZXR1cm5cbn1cblxuY29uc3QgX3NlbmRCZWFjb24gPSAob3B0aW9uczogUmVxdWVzdE9wdGlvbnMpID0+IHtcbiAgICAvLyBiZWFjb24gZG9jdW1lbnRhdGlvbiBodHRwczovL3czYy5naXRodWIuaW8vYmVhY29uL1xuICAgIC8vIGJlYWNvbnMgZm9ybWF0IHRoZSBtZXNzYWdlIGFuZCB1c2UgdGhlIHR5cGUgcHJvcGVydHlcblxuICAgIGNvbnN0IHVybCA9IGV4dGVuZFVSTFBhcmFtcyhvcHRpb25zLnVybCwge1xuICAgICAgICBiZWFjb246ICcxJyxcbiAgICB9KVxuXG4gICAgdHJ5IHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNvbXBhdC9jb21wYXRcbiAgICAgICAgbmF2aWdhdG9yIS5zZW5kQmVhY29uISh1cmwsIGVuY29kZVBvc3REYXRhKG9wdGlvbnMpKVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gc2VuZCBiZWFjb24gaXMgYSBiZXN0LWVmZm9ydCwgZmlyZS1hbmQtZm9yZ2V0IG1lY2hhbmlzbSBvbiBwYWdlIHVubG9hZCxcbiAgICAgICAgLy8gd2UgZG9uJ3Qgd2FudCB0byB0aHJvdyBlcnJvcnMgaGVyZVxuICAgIH1cbn1cblxuY29uc3Qgc2NyaXB0UmVxdWVzdCA9IChvcHRpb25zOiBSZXF1ZXN0T3B0aW9ucykgPT4ge1xuICAgIGlmICghZG9jdW1lbnQpIHtcbiAgICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGNvbnN0IHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpXG4gICAgc2NyaXB0LnR5cGUgPSAndGV4dC9qYXZhc2NyaXB0J1xuICAgIHNjcmlwdC5hc3luYyA9IHRydWVcbiAgICBzY3JpcHQuZGVmZXIgPSB0cnVlXG4gICAgc2NyaXB0LnNyYyA9IG9wdGlvbnMudXJsXG4gICAgY29uc3QgcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdzY3JpcHQnKVswXVxuICAgIHMucGFyZW50Tm9kZT8uaW5zZXJ0QmVmb3JlKHNjcmlwdCwgcylcbn1cbiIsICJpbXBvcnQgeyBSZXRyaWFibGVSZXF1ZXN0T3B0aW9ucyB9IGZyb20gJy4vdHlwZXMnXG5cbmltcG9ydCB7IF9pc051bWJlciwgX2lzVW5kZWZpbmVkIH0gZnJvbSAnLi91dGlscy90eXBlLXV0aWxzJ1xuaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSAnLi91dGlscy9sb2dnZXInXG5pbXBvcnQgeyB3aW5kb3cgfSBmcm9tICcuL3V0aWxzL2dsb2JhbHMnXG5pbXBvcnQgeyBQb3N0SG9nIH0gZnJvbSAnLi9wb3N0aG9nLWNvcmUnXG5pbXBvcnQgeyBleHRlbmRVUkxQYXJhbXMgfSBmcm9tICcuL3JlcXVlc3QnXG5cbmNvbnN0IHRoaXJ0eU1pbnV0ZXMgPSAzMCAqIDYwICogMTAwMFxuXG4vKipcbiAqIEdlbmVyYXRlcyBhIGppdHRlci1lZCBleHBvbmVudGlhbCBiYWNrb2ZmIGRlbGF5IGluIG1pbGxpc2Vjb25kc1xuICpcbiAqIFRoZSBiYXNlIHZhbHVlIGlzIDYgc2Vjb25kcywgd2hpY2ggaXMgZG91YmxlZCB3aXRoIGVhY2ggcmV0cnlcbiAqIHVwIHRvIHRoZSBtYXhpbXVtIG9mIDMwIG1pbnV0ZXNcbiAqXG4gKiBFYWNoIHZhbHVlIHRoZW4gaGFzICsvLSA1MCUgaml0dGVyXG4gKlxuICogR2l2aW5nIGEgcmFuZ2Ugb2YgNiBzZWNvbmRzIHVwIHRvIDQ1IG1pbnV0ZXNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBpY2tOZXh0UmV0cnlEZWxheShyZXRyaWVzUGVyZm9ybWVkU29GYXI6IG51bWJlcik6IG51bWJlciB7XG4gICAgY29uc3QgcmF3QmFja29mZlRpbWUgPSAzMDAwICogMiAqKiByZXRyaWVzUGVyZm9ybWVkU29GYXJcbiAgICBjb25zdCBtaW5CYWNrb2ZmID0gcmF3QmFja29mZlRpbWUgLyAyXG4gICAgY29uc3QgY2FwcGVkQmFja29mZlRpbWUgPSBNYXRoLm1pbih0aGlydHlNaW51dGVzLCByYXdCYWNrb2ZmVGltZSlcbiAgICBjb25zdCBqaXR0ZXJGcmFjdGlvbiA9IE1hdGgucmFuZG9tKCkgLSAwLjUgLy8gQSByYW5kb20gbnVtYmVyIGJldHdlZW4gLTAuNSBhbmQgMC41XG4gICAgY29uc3Qgaml0dGVyID0gaml0dGVyRnJhY3Rpb24gKiAoY2FwcGVkQmFja29mZlRpbWUgLSBtaW5CYWNrb2ZmKVxuICAgIHJldHVybiBNYXRoLmNlaWwoY2FwcGVkQmFja29mZlRpbWUgKyBqaXR0ZXIpXG59XG5cbmludGVyZmFjZSBSZXRyeVF1ZXVlRWxlbWVudCB7XG4gICAgcmV0cnlBdDogbnVtYmVyXG4gICAgcmVxdWVzdE9wdGlvbnM6IFJldHJpYWJsZVJlcXVlc3RPcHRpb25zXG59XG5cbmV4cG9ydCBjbGFzcyBSZXRyeVF1ZXVlIHtcbiAgICBwcml2YXRlIGlzUG9sbGluZzogYm9vbGVhbiA9IGZhbHNlIC8vIGZsYWcgdG8gY29udGludWUgdG8gcmVjdXJzaXZlbHkgcG9sbCBvciBub3RcbiAgICBwcml2YXRlIHBvbGxlcjogbnVtYmVyIHwgdW5kZWZpbmVkIC8vIHRvIGJlY29tZSBpbnRlcnZhbCBmb3IgcmVmZXJlbmNlIHRvIGNsZWFyIGxhdGVyXG4gICAgcHJpdmF0ZSBwb2xsSW50ZXJ2YWxNczogbnVtYmVyID0gMzAwMFxuICAgIHByaXZhdGUgcXVldWU6IFJldHJ5UXVldWVFbGVtZW50W10gPSBbXVxuICAgIHByaXZhdGUgYXJlV2VPbmxpbmU6IGJvb2xlYW5cblxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgaW5zdGFuY2U6IFBvc3RIb2cpIHtcbiAgICAgICAgdGhpcy5xdWV1ZSA9IFtdXG4gICAgICAgIHRoaXMuYXJlV2VPbmxpbmUgPSB0cnVlXG5cbiAgICAgICAgaWYgKCFfaXNVbmRlZmluZWQod2luZG93KSAmJiAnb25MaW5lJyBpbiB3aW5kb3cubmF2aWdhdG9yKSB7XG4gICAgICAgICAgICB0aGlzLmFyZVdlT25saW5lID0gd2luZG93Lm5hdmlnYXRvci5vbkxpbmVcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdvbmxpbmUnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5hcmVXZU9ubGluZSA9IHRydWVcbiAgICAgICAgICAgICAgICB0aGlzLmZsdXNoKClcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignb2ZmbGluZScsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmFyZVdlT25saW5lID0gZmFsc2VcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXRyaWFibGVSZXF1ZXN0KHsgcmV0cmllc1BlcmZvcm1lZFNvRmFyLCAuLi5vcHRpb25zIH06IFJldHJpYWJsZVJlcXVlc3RPcHRpb25zKTogdm9pZCB7XG4gICAgICAgIGlmIChfaXNOdW1iZXIocmV0cmllc1BlcmZvcm1lZFNvRmFyKSAmJiByZXRyaWVzUGVyZm9ybWVkU29GYXIgPiAwKSB7XG4gICAgICAgICAgICBvcHRpb25zLnVybCA9IGV4dGVuZFVSTFBhcmFtcyhvcHRpb25zLnVybCwgeyByZXRyeV9jb3VudDogcmV0cmllc1BlcmZvcm1lZFNvRmFyIH0pXG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmluc3RhbmNlLl9zZW5kX3JlcXVlc3Qoe1xuICAgICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgICAgIGNhbGxiYWNrOiAocmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzQ29kZSAhPT0gMjAwICYmIChyZXNwb25zZS5zdGF0dXNDb2RlIDwgNDAwIHx8IHJlc3BvbnNlLnN0YXR1c0NvZGUgPj0gNTAwKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoKHJldHJpZXNQZXJmb3JtZWRTb0ZhciA/PyAwKSA8IDEwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVucXVldWUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBvcHRpb25zLmNhbGxiYWNrPy4ocmVzcG9uc2UpXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KVxuICAgIH1cblxuICAgIHByaXZhdGUgZW5xdWV1ZShyZXF1ZXN0T3B0aW9uczogUmV0cmlhYmxlUmVxdWVzdE9wdGlvbnMpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgcmV0cmllc1BlcmZvcm1lZFNvRmFyID0gcmVxdWVzdE9wdGlvbnMucmV0cmllc1BlcmZvcm1lZFNvRmFyIHx8IDBcbiAgICAgICAgcmVxdWVzdE9wdGlvbnMucmV0cmllc1BlcmZvcm1lZFNvRmFyID0gcmV0cmllc1BlcmZvcm1lZFNvRmFyICsgMVxuXG4gICAgICAgIGNvbnN0IG1zVG9OZXh0UmV0cnkgPSBwaWNrTmV4dFJldHJ5RGVsYXkocmV0cmllc1BlcmZvcm1lZFNvRmFyKVxuICAgICAgICBjb25zdCByZXRyeUF0ID0gRGF0ZS5ub3coKSArIG1zVG9OZXh0UmV0cnlcblxuICAgICAgICB0aGlzLnF1ZXVlLnB1c2goeyByZXRyeUF0LCByZXF1ZXN0T3B0aW9ucyB9KVxuXG4gICAgICAgIGxldCBsb2dNZXNzYWdlID0gYEVucXVldWVkIGZhaWxlZCByZXF1ZXN0IGZvciByZXRyeSBpbiAke21zVG9OZXh0UmV0cnl9YFxuICAgICAgICBpZiAoIW5hdmlnYXRvci5vbkxpbmUpIHtcbiAgICAgICAgICAgIGxvZ01lc3NhZ2UgKz0gJyAoQnJvd3NlciBpcyBvZmZsaW5lKSdcbiAgICAgICAgfVxuICAgICAgICBsb2dnZXIud2Fybihsb2dNZXNzYWdlKVxuXG4gICAgICAgIGlmICghdGhpcy5pc1BvbGxpbmcpIHtcbiAgICAgICAgICAgIHRoaXMuaXNQb2xsaW5nID0gdHJ1ZVxuICAgICAgICAgICAgdGhpcy5wb2xsKClcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgcG9sbCgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5wb2xsZXIgJiYgY2xlYXJUaW1lb3V0KHRoaXMucG9sbGVyKVxuICAgICAgICB0aGlzLnBvbGxlciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuYXJlV2VPbmxpbmUgJiYgdGhpcy5xdWV1ZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5mbHVzaCgpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBvbGwoKVxuICAgICAgICB9LCB0aGlzLnBvbGxJbnRlcnZhbE1zKSBhcyBhbnkgYXMgbnVtYmVyXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBmbHVzaCgpOiB2b2lkIHtcbiAgICAgICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKVxuICAgICAgICBjb25zdCBub3RUb0ZsdXNoOiBSZXRyeVF1ZXVlRWxlbWVudFtdID0gW11cbiAgICAgICAgY29uc3QgdG9GbHVzaCA9IHRoaXMucXVldWUuZmlsdGVyKChpdGVtKSA9PiB7XG4gICAgICAgICAgICBpZiAoaXRlbS5yZXRyeUF0IDwgbm93KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5vdFRvRmx1c2gucHVzaChpdGVtKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgIH0pXG5cbiAgICAgICAgdGhpcy5xdWV1ZSA9IG5vdFRvRmx1c2hcblxuICAgICAgICBpZiAodG9GbHVzaC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHsgcmVxdWVzdE9wdGlvbnMgfSBvZiB0b0ZsdXNoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZXRyaWFibGVSZXF1ZXN0KHJlcXVlc3RPcHRpb25zKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgdW5sb2FkKCk6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy5wb2xsZXIpIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnBvbGxlcilcbiAgICAgICAgICAgIHRoaXMucG9sbGVyID0gdW5kZWZpbmVkXG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKGNvbnN0IHsgcmVxdWVzdE9wdGlvbnMgfSBvZiB0aGlzLnF1ZXVlKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIC8vIHdlJ3ZlIGhhZCBzZW5kIGJlYWNvbiBpbiBwbGFjZSBmb3IgYXQgbGVhc3QgMiB5ZWFyc1xuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjb21wYXQvY29tcGF0XG4gICAgICAgICAgICAgICAgdGhpcy5pbnN0YW5jZS5fc2VuZF9yZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICAgICAgLi4ucmVxdWVzdE9wdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zcG9ydDogJ3NlbmRCZWFjb24nLFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgLy8gTm90ZSBzZW5kQmVhY29uIGF1dG9tYXRpY2FsbHkgcmV0cmllcywgYW5kIGFmdGVyIHRoZSBmaXJzdCByZXRyeSBpdCB3aWxsIGxvc2UgcmVmZXJlbmNlIHRvIGNvbnRleHR1YWwgYHRoaXNgLlxuICAgICAgICAgICAgICAgIC8vIFRoaXMgbWVhbnMgaW4gc29tZSBjYXNlcyBgdGhpcy5nZXRDb25maWdgIHdpbGwgYmUgdW5kZWZpbmVkLlxuICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcihlKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMucXVldWUgPSBbXVxuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBQb3N0SG9nIH0gZnJvbSAnLi4vcG9zdGhvZy1jb3JlJ1xuXG4vKipcbiAqIFRoZSByZXF1ZXN0IHJvdXRlciBoZWxwcyBzaW1wbGlmeSB0aGUgbG9naWMgdG8gZGV0ZXJtaW5lIHdoaWNoIGVuZHBvaW50cyBzaG91bGQgYmUgY2FsbGVkIGZvciB3aGljaCB0aGluZ3NcbiAqIFRoZSBiYXNpYyBpZGVhIGlzIHRoYXQgZm9yIGEgZ2l2ZW4gcmVnaW9uIChVUyBvciBFVSksIHdlIGhhdmUgYSBzZXQgb2YgZW5kcG9pbnRzIHRoYXQgd2Ugc2hvdWxkIGNhbGwgZGVwZW5kaW5nXG4gKiBvbiB0aGUgdHlwZSBvZiByZXF1ZXN0IChldmVudHMsIHJlcGxheXMsIGRlY2lkZSwgZXRjLikgYW5kIGhhbmRsZSBvdmVycmlkZXMgdGhhdCBtYXkgY29tZSBmcm9tIGNvbmZpZ3Mgb3IgdGhlIGRlY2lkZSBlbmRwb2ludFxuICovXG5cbmV4cG9ydCBlbnVtIFJlcXVlc3RSb3V0ZXJSZWdpb24ge1xuICAgIFVTID0gJ3VzJyxcbiAgICBFVSA9ICdldScsXG4gICAgQ1VTVE9NID0gJ2N1c3RvbScsXG59XG5cbmV4cG9ydCB0eXBlIFJlcXVlc3RSb3V0ZXJUYXJnZXQgPSAnYXBpJyB8ICd1aScgfCAnYXNzZXRzJ1xuXG5leHBvcnQgY2xhc3MgUmVxdWVzdFJvdXRlciB7XG4gICAgaW5zdGFuY2U6IFBvc3RIb2dcbiAgICBwcml2YXRlIF9yZWdpb25DYWNoZTogUmVjb3JkPHN0cmluZywgUmVxdWVzdFJvdXRlclJlZ2lvbj4gPSB7fVxuXG4gICAgY29uc3RydWN0b3IoaW5zdGFuY2U6IFBvc3RIb2cpIHtcbiAgICAgICAgdGhpcy5pbnN0YW5jZSA9IGluc3RhbmNlXG4gICAgfVxuXG4gICAgZ2V0IGFwaUhvc3QoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5zdGFuY2UuY29uZmlnLmFwaV9ob3N0LnRyaW0oKS5yZXBsYWNlKC9cXC8kLywgJycpXG4gICAgfVxuICAgIGdldCB1aUhvc3QoKTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5zdGFuY2UuY29uZmlnLnVpX2hvc3Q/LnJlcGxhY2UoL1xcLyQvLCAnJylcbiAgICB9XG5cbiAgICBnZXQgcmVnaW9uKCk6IFJlcXVlc3RSb3V0ZXJSZWdpb24ge1xuICAgICAgICAvLyBXZSBkb24ndCBuZWVkIHRvIGNvbXB1dGUgdGhpcyBldmVyeSB0aW1lIHNvIHdlIGNhY2hlIHRoZSByZXN1bHRcbiAgICAgICAgaWYgKCF0aGlzLl9yZWdpb25DYWNoZVt0aGlzLmFwaUhvc3RdKSB7XG4gICAgICAgICAgICBpZiAoL2h0dHBzOlxcL1xcLyhhcHB8dXN8dXMtYXNzZXRzKShcXC5pKT9cXC5wb3N0aG9nXFwuY29tL2kudGVzdCh0aGlzLmFwaUhvc3QpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fcmVnaW9uQ2FjaGVbdGhpcy5hcGlIb3N0XSA9IFJlcXVlc3RSb3V0ZXJSZWdpb24uVVNcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoL2h0dHBzOlxcL1xcLyhldXxldS1hc3NldHMpKFxcLmkpP1xcLnBvc3Rob2dcXC5jb20vaS50ZXN0KHRoaXMuYXBpSG9zdCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9yZWdpb25DYWNoZVt0aGlzLmFwaUhvc3RdID0gUmVxdWVzdFJvdXRlclJlZ2lvbi5FVVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9yZWdpb25DYWNoZVt0aGlzLmFwaUhvc3RdID0gUmVxdWVzdFJvdXRlclJlZ2lvbi5DVVNUT01cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fcmVnaW9uQ2FjaGVbdGhpcy5hcGlIb3N0XVxuICAgIH1cblxuICAgIGVuZHBvaW50Rm9yKHRhcmdldDogUmVxdWVzdFJvdXRlclRhcmdldCwgcGF0aDogc3RyaW5nID0gJycpOiBzdHJpbmcge1xuICAgICAgICBpZiAocGF0aCkge1xuICAgICAgICAgICAgcGF0aCA9IHBhdGhbMF0gPT09ICcvJyA/IHBhdGggOiBgLyR7cGF0aH1gXG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGFyZ2V0ID09PSAndWknKSB7XG4gICAgICAgICAgICByZXR1cm4gKHRoaXMudWlIb3N0IHx8IHRoaXMuYXBpSG9zdCkgKyBwYXRoXG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5yZWdpb24gPT09IFJlcXVlc3RSb3V0ZXJSZWdpb24uQ1VTVE9NKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hcGlIb3N0ICsgcGF0aFxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc3VmZml4ID0gJ2kucG9zdGhvZy5jb20nICsgcGF0aFxuXG4gICAgICAgIHN3aXRjaCAodGFyZ2V0KSB7XG4gICAgICAgICAgICBjYXNlICdhc3NldHMnOlxuICAgICAgICAgICAgICAgIHJldHVybiBgaHR0cHM6Ly8ke3RoaXMucmVnaW9ufS1hc3NldHMuJHtzdWZmaXh9YFxuICAgICAgICAgICAgY2FzZSAnYXBpJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gYGh0dHBzOi8vJHt0aGlzLnJlZ2lvbn0uJHtzdWZmaXh9YFxuICAgICAgICB9XG4gICAgfVxufVxuIiwgImltcG9ydCB7IFBvc3RIb2dQZXJzaXN0ZW5jZSB9IGZyb20gJy4vcG9zdGhvZy1wZXJzaXN0ZW5jZSdcbmltcG9ydCB7IFNFU1NJT05fSUQgfSBmcm9tICcuL2NvbnN0YW50cydcbmltcG9ydCB7IHNlc3Npb25TdG9yZSB9IGZyb20gJy4vc3RvcmFnZSdcbmltcG9ydCB7IFBvc3RIb2dDb25maWcsIFNlc3Npb25JZENoYW5nZWRDYWxsYmFjayB9IGZyb20gJy4vdHlwZXMnXG5pbXBvcnQgeyB1dWlkdjcgfSBmcm9tICcuL3V1aWR2NydcbmltcG9ydCB7IHdpbmRvdyB9IGZyb20gJy4vdXRpbHMvZ2xvYmFscydcblxuaW1wb3J0IHsgX2lzQXJyYXksIF9pc051bWJlciwgX2lzVW5kZWZpbmVkIH0gZnJvbSAnLi91dGlscy90eXBlLXV0aWxzJ1xuaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSAnLi91dGlscy9sb2dnZXInXG5cbmNvbnN0IE1BWF9TRVNTSU9OX0lETEVfVElNRU9VVCA9IDMwICogNjAgLy8gMzAgbWludXRlc1xuY29uc3QgTUlOX1NFU1NJT05fSURMRV9USU1FT1VUID0gNjAgLy8gMSBtaW51dGVcbmNvbnN0IFNFU1NJT05fTEVOR1RIX0xJTUlUID0gMjQgKiAzNjAwICogMTAwMCAvLyAyNCBob3Vyc1xuXG5leHBvcnQgY2xhc3MgU2Vzc2lvbklkTWFuYWdlciB7XG4gICAgcHJpdmF0ZSByZWFkb25seSBfc2Vzc2lvbklkR2VuZXJhdG9yOiAoKSA9PiBzdHJpbmdcbiAgICBwcml2YXRlIHJlYWRvbmx5IF93aW5kb3dJZEdlbmVyYXRvcjogKCkgPT4gc3RyaW5nXG4gICAgcHJpdmF0ZSBjb25maWc6IFBhcnRpYWw8UG9zdEhvZ0NvbmZpZz5cbiAgICBwcml2YXRlIHBlcnNpc3RlbmNlOiBQb3N0SG9nUGVyc2lzdGVuY2VcbiAgICBwcml2YXRlIF93aW5kb3dJZDogc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZFxuICAgIHByaXZhdGUgX3Nlc3Npb25JZDogc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZFxuICAgIHByaXZhdGUgcmVhZG9ubHkgX3dpbmRvd19pZF9zdG9yYWdlX2tleTogc3RyaW5nXG4gICAgcHJpdmF0ZSByZWFkb25seSBfcHJpbWFyeV93aW5kb3dfZXhpc3RzX3N0b3JhZ2Vfa2V5OiBzdHJpbmdcbiAgICBwcml2YXRlIF9zZXNzaW9uU3RhcnRUaW1lc3RhbXA6IG51bWJlciB8IG51bGxcblxuICAgIHByaXZhdGUgX3Nlc3Npb25BY3Rpdml0eVRpbWVzdGFtcDogbnVtYmVyIHwgbnVsbFxuICAgIHByaXZhdGUgcmVhZG9ubHkgX3Nlc3Npb25UaW1lb3V0TXM6IG51bWJlclxuICAgIHByaXZhdGUgX3Nlc3Npb25JZENoYW5nZWRIYW5kbGVyczogU2Vzc2lvbklkQ2hhbmdlZENhbGxiYWNrW10gPSBbXVxuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIGNvbmZpZzogUGFydGlhbDxQb3N0SG9nQ29uZmlnPixcbiAgICAgICAgcGVyc2lzdGVuY2U6IFBvc3RIb2dQZXJzaXN0ZW5jZSxcbiAgICAgICAgc2Vzc2lvbklkR2VuZXJhdG9yPzogKCkgPT4gc3RyaW5nLFxuICAgICAgICB3aW5kb3dJZEdlbmVyYXRvcj86ICgpID0+IHN0cmluZ1xuICAgICkge1xuICAgICAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZ1xuICAgICAgICB0aGlzLnBlcnNpc3RlbmNlID0gcGVyc2lzdGVuY2VcbiAgICAgICAgdGhpcy5fd2luZG93SWQgPSB1bmRlZmluZWRcbiAgICAgICAgdGhpcy5fc2Vzc2lvbklkID0gdW5kZWZpbmVkXG4gICAgICAgIHRoaXMuX3Nlc3Npb25TdGFydFRpbWVzdGFtcCA9IG51bGxcbiAgICAgICAgdGhpcy5fc2Vzc2lvbkFjdGl2aXR5VGltZXN0YW1wID0gbnVsbFxuICAgICAgICB0aGlzLl9zZXNzaW9uSWRHZW5lcmF0b3IgPSBzZXNzaW9uSWRHZW5lcmF0b3IgfHwgdXVpZHY3XG4gICAgICAgIHRoaXMuX3dpbmRvd0lkR2VuZXJhdG9yID0gd2luZG93SWRHZW5lcmF0b3IgfHwgdXVpZHY3XG5cbiAgICAgICAgY29uc3QgcGVyc2lzdGVuY2VOYW1lID0gY29uZmlnWydwZXJzaXN0ZW5jZV9uYW1lJ10gfHwgY29uZmlnWyd0b2tlbiddXG4gICAgICAgIGxldCBkZXNpcmVkVGltZW91dCA9IGNvbmZpZ1snc2Vzc2lvbl9pZGxlX3RpbWVvdXRfc2Vjb25kcyddIHx8IE1BWF9TRVNTSU9OX0lETEVfVElNRU9VVFxuXG4gICAgICAgIGlmICghX2lzTnVtYmVyKGRlc2lyZWRUaW1lb3V0KSkge1xuICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ3Nlc3Npb25faWRsZV90aW1lb3V0X3NlY29uZHMgbXVzdCBiZSBhIG51bWJlci4gRGVmYXVsdGluZyB0byAzMCBtaW51dGVzLicpXG4gICAgICAgICAgICBkZXNpcmVkVGltZW91dCA9IE1BWF9TRVNTSU9OX0lETEVfVElNRU9VVFxuICAgICAgICB9IGVsc2UgaWYgKGRlc2lyZWRUaW1lb3V0ID4gTUFYX1NFU1NJT05fSURMRV9USU1FT1VUKSB7XG4gICAgICAgICAgICBsb2dnZXIud2Fybignc2Vzc2lvbl9pZGxlX3RpbWVvdXRfc2Vjb25kcyBjYW5ub3QgYmUgIGdyZWF0ZXIgdGhhbiAzMCBtaW51dGVzLiBVc2luZyAzMCBtaW51dGVzIGluc3RlYWQuJylcbiAgICAgICAgfSBlbHNlIGlmIChkZXNpcmVkVGltZW91dCA8IE1JTl9TRVNTSU9OX0lETEVfVElNRU9VVCkge1xuICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ3Nlc3Npb25faWRsZV90aW1lb3V0X3NlY29uZHMgY2Fubm90IGJlIGxlc3MgdGhhbiA2MCBzZWNvbmRzLiBVc2luZyA2MCBzZWNvbmRzIGluc3RlYWQuJylcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX3Nlc3Npb25UaW1lb3V0TXMgPVxuICAgICAgICAgICAgTWF0aC5taW4oTWF0aC5tYXgoZGVzaXJlZFRpbWVvdXQsIE1JTl9TRVNTSU9OX0lETEVfVElNRU9VVCksIE1BWF9TRVNTSU9OX0lETEVfVElNRU9VVCkgKiAxMDAwXG4gICAgICAgIHRoaXMuX3dpbmRvd19pZF9zdG9yYWdlX2tleSA9ICdwaF8nICsgcGVyc2lzdGVuY2VOYW1lICsgJ193aW5kb3dfaWQnXG4gICAgICAgIHRoaXMuX3ByaW1hcnlfd2luZG93X2V4aXN0c19zdG9yYWdlX2tleSA9ICdwaF8nICsgcGVyc2lzdGVuY2VOYW1lICsgJ19wcmltYXJ5X3dpbmRvd19leGlzdHMnXG5cbiAgICAgICAgLy8gcHJpbWFyeV93aW5kb3dfZXhpc3RzIGlzIHNldCB3aGVuIHRoZSBET00gaGFzIGJlZW4gbG9hZGVkIGFuZCBpcyBjbGVhcmVkIG9uIHVubG9hZFxuICAgICAgICAvLyBpZiBpdCBleGlzdHMgaGVyZSBpdCBtZWFucyB0aGVyZSB3YXMgbm8gdW5sb2FkIHdoaWNoIHN1Z2dlc3RzIHRoaXMgd2luZG93IGlzIG9wZW5lZCBhcyBhIHRhYiBkdXBsaWNhdGlvbiwgd2luZG93Lm9wZW4sIGV0Yy5cbiAgICAgICAgaWYgKHRoaXMuX2NhblVzZVNlc3Npb25TdG9yYWdlKCkpIHtcbiAgICAgICAgICAgIGNvbnN0IGxhc3RXaW5kb3dJZCA9IHNlc3Npb25TdG9yZS5wYXJzZSh0aGlzLl93aW5kb3dfaWRfc3RvcmFnZV9rZXkpXG5cbiAgICAgICAgICAgIGNvbnN0IHByaW1hcnlXaW5kb3dFeGlzdHMgPSBzZXNzaW9uU3RvcmUucGFyc2UodGhpcy5fcHJpbWFyeV93aW5kb3dfZXhpc3RzX3N0b3JhZ2Vfa2V5KVxuICAgICAgICAgICAgaWYgKGxhc3RXaW5kb3dJZCAmJiAhcHJpbWFyeVdpbmRvd0V4aXN0cykge1xuICAgICAgICAgICAgICAgIC8vIFBlcnNpc3Qgd2luZG93IGZyb20gcHJldmlvdXMgc3RvcmFnZSBzdGF0ZVxuICAgICAgICAgICAgICAgIHRoaXMuX3dpbmRvd0lkID0gbGFzdFdpbmRvd0lkXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIFdpcGUgYW55IHJlZmVyZW5jZSB0byBwcmV2aW91cyB3aW5kb3cgaWRcbiAgICAgICAgICAgICAgICBzZXNzaW9uU3RvcmUucmVtb3ZlKHRoaXMuX3dpbmRvd19pZF9zdG9yYWdlX2tleSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIEZsYWcgdGhpcyBzZXNzaW9uIGFzIGhhdmluZyBhIHByaW1hcnkgd2luZG93XG4gICAgICAgICAgICBzZXNzaW9uU3RvcmUuc2V0KHRoaXMuX3ByaW1hcnlfd2luZG93X2V4aXN0c19zdG9yYWdlX2tleSwgdHJ1ZSlcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX2xpc3RlblRvUmVsb2FkV2luZG93KClcbiAgICB9XG5cbiAgICBvblNlc3Npb25JZChjYWxsYmFjazogU2Vzc2lvbklkQ2hhbmdlZENhbGxiYWNrKTogKCkgPT4gdm9pZCB7XG4gICAgICAgIC8vIEtMVURHRTogd2hlbiBydW5uaW5nIGluIHRlc3RzIHRoZSBoYW5kbGVycyBhcnJheSB3YXMgYWx3YXlzIHVuZGVmaW5lZFxuICAgICAgICAvLyBpdCdzIHl1Y2t5IGJ1dCBzYWZlIHRvIHNldCBpdCBoZXJlIHNvIHRoYXQgaXQncyBhbHdheXMgZGVmaW5pdGVseSBhdmFpbGFibGVcbiAgICAgICAgaWYgKF9pc1VuZGVmaW5lZCh0aGlzLl9zZXNzaW9uSWRDaGFuZ2VkSGFuZGxlcnMpKSB7XG4gICAgICAgICAgICB0aGlzLl9zZXNzaW9uSWRDaGFuZ2VkSGFuZGxlcnMgPSBbXVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fc2Vzc2lvbklkQ2hhbmdlZEhhbmRsZXJzLnB1c2goY2FsbGJhY2spXG4gICAgICAgIGlmICh0aGlzLl9zZXNzaW9uSWQpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKHRoaXMuX3Nlc3Npb25JZCwgdGhpcy5fd2luZG93SWQpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX3Nlc3Npb25JZENoYW5nZWRIYW5kbGVycyA9IHRoaXMuX3Nlc3Npb25JZENoYW5nZWRIYW5kbGVycy5maWx0ZXIoKGgpID0+IGggIT09IGNhbGxiYWNrKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfY2FuVXNlU2Vzc2lvblN0b3JhZ2UoKTogYm9vbGVhbiB7XG4gICAgICAgIC8vIFdlIG9ubHkgd2FudCB0byB1c2Ugc2Vzc2lvblN0b3JhZ2UgaWYgcGVyc2lzdGVuY2UgaXMgZW5hYmxlZCBhbmQgbm90IG1lbW9yeSBzdG9yYWdlXG4gICAgICAgIHJldHVybiB0aGlzLmNvbmZpZy5wZXJzaXN0ZW5jZSAhPT0gJ21lbW9yeScgJiYgIXRoaXMucGVyc2lzdGVuY2UuZGlzYWJsZWQgJiYgc2Vzc2lvblN0b3JlLmlzX3N1cHBvcnRlZCgpXG4gICAgfVxuXG4gICAgLy8gTm90ZTogdGhpcyB0cmllcyB0byBzdG9yZSB0aGUgd2luZG93SWQgaW4gc2Vzc2lvblN0b3JhZ2UuIFNlc3Npb25TdG9yYWdlIGlzIHVuaXF1ZSB0byB0aGUgY3VycmVudCB3aW5kb3cvdGFiLFxuICAgIC8vIGFuZCBwZXJzaXN0cyBwYWdlIGxvYWRzL3JlbG9hZHMuIFNvIGl0J3MgdW5pcXVlbHkgc3VpdGVkIGZvciBzdG9yaW5nIHRoZSB3aW5kb3dJZC4gVGhpcyBmdW5jdGlvbiBhbHNvIHJlc3BlY3RzXG4gICAgLy8gd2hlbiBwZXJzaXN0ZW5jZSBpcyBkaXNhYmxlZCAoYnkgdXNlciBjb25maWcpIGFuZCB3aGVuIHNlc3Npb25TdG9yYWdlIGlzIG5vdCBzdXBwb3J0ZWQgKGl0ICpzaG91bGQqIGJlIHN1cHBvcnRlZCBvbiBhbGwgYnJvd3NlcnMpLFxuICAgIC8vIGFuZCBpbiB0aGF0IGNhc2UsIGl0IGZhbGxzIGJhY2sgdG8gbWVtb3J5ICh3aGljaCBzYWRseSwgd29uJ3QgcGVyc2lzdCBwYWdlIGxvYWRzKVxuICAgIHByaXZhdGUgX3NldFdpbmRvd0lkKHdpbmRvd0lkOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgaWYgKHdpbmRvd0lkICE9PSB0aGlzLl93aW5kb3dJZCkge1xuICAgICAgICAgICAgdGhpcy5fd2luZG93SWQgPSB3aW5kb3dJZFxuICAgICAgICAgICAgaWYgKHRoaXMuX2NhblVzZVNlc3Npb25TdG9yYWdlKCkpIHtcbiAgICAgICAgICAgICAgICBzZXNzaW9uU3RvcmUuc2V0KHRoaXMuX3dpbmRvd19pZF9zdG9yYWdlX2tleSwgd2luZG93SWQpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIF9nZXRXaW5kb3dJZCgpOiBzdHJpbmcgfCBudWxsIHtcbiAgICAgICAgaWYgKHRoaXMuX3dpbmRvd0lkKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fd2luZG93SWRcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5fY2FuVXNlU2Vzc2lvblN0b3JhZ2UoKSkge1xuICAgICAgICAgICAgcmV0dXJuIHNlc3Npb25TdG9yZS5wYXJzZSh0aGlzLl93aW5kb3dfaWRfc3RvcmFnZV9rZXkpXG4gICAgICAgIH1cbiAgICAgICAgLy8gTmV3IHdpbmRvdyBpZCB3aWxsIGJlIGdlbmVyYXRlZFxuICAgICAgICByZXR1cm4gbnVsbFxuICAgIH1cblxuICAgIC8vIE5vdGU6ICd0aGlzLnBlcnNpc3RlbmNlLnJlZ2lzdGVyJyBjYW4gYmUgZGlzYWJsZWQgaW4gdGhlIGNvbmZpZy5cbiAgICAvLyBJbiB0aGF0IGNhc2UsIHRoaXMgd29ya3MgYnkgc3RvcmluZyBzZXNzaW9uSWQgYW5kIHRoZSB0aW1lc3RhbXAgaW4gbWVtb3J5LlxuICAgIHByaXZhdGUgX3NldFNlc3Npb25JZChcbiAgICAgICAgc2Vzc2lvbklkOiBzdHJpbmcgfCBudWxsLFxuICAgICAgICBzZXNzaW9uQWN0aXZpdHlUaW1lc3RhbXA6IG51bWJlciB8IG51bGwsXG4gICAgICAgIHNlc3Npb25TdGFydFRpbWVzdGFtcDogbnVtYmVyIHwgbnVsbFxuICAgICk6IHZvaWQge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgICBzZXNzaW9uSWQgIT09IHRoaXMuX3Nlc3Npb25JZCB8fFxuICAgICAgICAgICAgc2Vzc2lvbkFjdGl2aXR5VGltZXN0YW1wICE9PSB0aGlzLl9zZXNzaW9uQWN0aXZpdHlUaW1lc3RhbXAgfHxcbiAgICAgICAgICAgIHNlc3Npb25TdGFydFRpbWVzdGFtcCAhPT0gdGhpcy5fc2Vzc2lvblN0YXJ0VGltZXN0YW1wXG4gICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy5fc2Vzc2lvblN0YXJ0VGltZXN0YW1wID0gc2Vzc2lvblN0YXJ0VGltZXN0YW1wXG4gICAgICAgICAgICB0aGlzLl9zZXNzaW9uQWN0aXZpdHlUaW1lc3RhbXAgPSBzZXNzaW9uQWN0aXZpdHlUaW1lc3RhbXBcbiAgICAgICAgICAgIHRoaXMuX3Nlc3Npb25JZCA9IHNlc3Npb25JZFxuXG4gICAgICAgICAgICB0aGlzLnBlcnNpc3RlbmNlLnJlZ2lzdGVyKHtcbiAgICAgICAgICAgICAgICBbU0VTU0lPTl9JRF06IFtzZXNzaW9uQWN0aXZpdHlUaW1lc3RhbXAsIHNlc3Npb25JZCwgc2Vzc2lvblN0YXJ0VGltZXN0YW1wXSxcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIF9nZXRTZXNzaW9uSWQoKTogW251bWJlciwgc3RyaW5nLCBudW1iZXJdIHtcbiAgICAgICAgaWYgKHRoaXMuX3Nlc3Npb25JZCAmJiB0aGlzLl9zZXNzaW9uQWN0aXZpdHlUaW1lc3RhbXAgJiYgdGhpcy5fc2Vzc2lvblN0YXJ0VGltZXN0YW1wKSB7XG4gICAgICAgICAgICByZXR1cm4gW3RoaXMuX3Nlc3Npb25BY3Rpdml0eVRpbWVzdGFtcCwgdGhpcy5fc2Vzc2lvbklkLCB0aGlzLl9zZXNzaW9uU3RhcnRUaW1lc3RhbXBdXG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc2Vzc2lvbklkID0gdGhpcy5wZXJzaXN0ZW5jZS5wcm9wc1tTRVNTSU9OX0lEXVxuXG4gICAgICAgIGlmIChfaXNBcnJheShzZXNzaW9uSWQpICYmIHNlc3Npb25JZC5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgICAgIC8vIFN0b3JhZ2UgZG9lcyBub3QgeWV0IGhhdmUgYSBzZXNzaW9uIHN0YXJ0IHRpbWUuIEFkZCB0aGUgbGFzdCBhY3Rpdml0eSB0aW1lc3RhbXAgYXMgdGhlIHN0YXJ0IHRpbWVcbiAgICAgICAgICAgIHNlc3Npb25JZC5wdXNoKHNlc3Npb25JZFswXSlcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBzZXNzaW9uSWQgfHwgWzAsIG51bGwsIDBdXG4gICAgfVxuXG4gICAgLy8gUmVzZXRzIHRoZSBzZXNzaW9uIGlkIGJ5IHNldHRpbmcgaXQgdG8gbnVsbC4gT24gdGhlIHN1YnNlcXVlbnQgY2FsbCB0byBjaGVja0FuZEdldFNlc3Npb25BbmRXaW5kb3dJZCxcbiAgICAvLyBuZXcgaWRzIHdpbGwgYmUgZ2VuZXJhdGVkLlxuICAgIHJlc2V0U2Vzc2lvbklkKCk6IHZvaWQge1xuICAgICAgICB0aGlzLl9zZXRTZXNzaW9uSWQobnVsbCwgbnVsbCwgbnVsbClcbiAgICB9XG5cbiAgICAvKlxuICAgICAqIExpc3RlbnMgdG8gd2luZG93IHVubG9hZHMgYW5kIHJlbW92ZXMgdGhlIHByaW1hcnlXaW5kb3dFeGlzdHMga2V5IGZyb20gc2Vzc2lvblN0b3JhZ2UuXG4gICAgICogUmVsb2FkZWQgb3IgZnJlc2ggdGFicyBjcmVhdGVkIGFmdGVyIGEgRE9NIHVubG9hZHMgKHJlbG9hZGluZyB0aGUgc2FtZSB0YWIpIFdJTEwgTk9UIGhhdmUgdGhpcyBwcmltYXJ5V2luZG93RXhpc3RzIGZsYWcgaW4gc2Vzc2lvbiBzdG9yYWdlLlxuICAgICAqIENsb25lZCBzZXNzaW9ucyAobmV3IHRhYiwgdGFiIGR1cGxpY2F0aW9uLCB3aW5kb3cub3BlbigpLCAuLi4pIFdJTEwgaGF2ZSB0aGlzIHByaW1hcnlXaW5kb3dFeGlzdHMgZmxhZyBpbiB0aGVpciBjb3BpZWQgc2Vzc2lvbiBzdG9yYWdlLlxuICAgICAqIFdlIGNvbmRpdGlvbmFsbHkgY2hlY2sgdGhlIHByaW1hcnlXaW5kb3dFeGlzdHMgdmFsdWUgaW4gdGhlIGNvbnN0cnVjdG9yIHRvIGRlY2lkZSBpZiB0aGUgd2luZG93IGlkIGluIHRoZSBsYXN0IHNlc3Npb24gc3RvcmFnZSBzaG91bGQgYmUgY2FycmllZCBvdmVyLlxuICAgICAqL1xuICAgIHByaXZhdGUgX2xpc3RlblRvUmVsb2FkV2luZG93KCk6IHZvaWQge1xuICAgICAgICB3aW5kb3c/LmFkZEV2ZW50TGlzdGVuZXIoJ2JlZm9yZXVubG9hZCcsICgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9jYW5Vc2VTZXNzaW9uU3RvcmFnZSgpKSB7XG4gICAgICAgICAgICAgICAgc2Vzc2lvblN0b3JlLnJlbW92ZSh0aGlzLl9wcmltYXJ5X3dpbmRvd19leGlzdHNfc3RvcmFnZV9rZXkpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgLypcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIHJldHVybnMgdGhlIGN1cnJlbnQgc2Vzc2lvbklkIGFuZCB3aW5kb3dJZC4gSXQgc2hvdWxkIGJlIHVzZWQgdG9cbiAgICAgKiBhY2Nlc3MgdGhlc2UgdmFsdWVzIG92ZXIgZGlyZWN0bHkgY2FsbGluZyBgLl9zZXNzaW9uSWRgIG9yIGAuX3dpbmRvd0lkYC5cbiAgICAgKiBJbiBhZGRpdGlvbiB0byByZXR1cm5pbmcgdGhlIHNlc3Npb25JZCBhbmQgd2luZG93SWQsIHRoaXMgZnVuY3Rpb24gYWxzbyBtYW5hZ2VzIGN5Y2xpbmcgdGhlXG4gICAgICogc2Vzc2lvbklkIGFuZCB3aW5kb3dJZCB3aGVuIGFwcHJvcHJpYXRlIGJ5IGRvaW5nIHRoZSBmb2xsb3dpbmc6XG4gICAgICpcbiAgICAgKiAxLiBJZiB0aGUgc2Vzc2lvbklkIG9yIHdpbmRvd0lkIGlzIG5vdCBzZXQsIGl0IHdpbGwgZ2VuZXJhdGUgYSBuZXcgb25lIGFuZCBzdG9yZSBpdC5cbiAgICAgKiAyLiBJZiB0aGUgcmVhZE9ubHkgcGFyYW0gaXMgc2V0IHRvIGZhbHNlLCBpdCB3aWxsOlxuICAgICAqICAgIGEuIENoZWNrIGlmIGl0IGhhcyBiZWVuID4gU0VTU0lPTl9DSEFOR0VfVEhSRVNIT0xEIHNpbmNlIHRoZSBsYXN0IGNhbGwgd2l0aCB0aGlzIGZsYWcgc2V0LlxuICAgICAqICAgICAgIElmIHNvLCBpdCB3aWxsIGdlbmVyYXRlIGEgbmV3IHNlc3Npb25JZCBhbmQgc3RvcmUgaXQuXG4gICAgICogICAgYi4gVXBkYXRlIHRoZSB0aW1lc3RhbXAgc3RvcmVkIHdpdGggdGhlIHNlc3Npb25JZCB0byBlbnN1cmUgdGhlIGN1cnJlbnQgc2Vzc2lvbiBpcyBleHRlbmRlZFxuICAgICAqICAgICAgIGZvciB0aGUgYXBwcm9wcmlhdGUgYW1vdW50IG9mIHRpbWUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHJlYWRPbmx5IChvcHRpb25hbCkgRGVmYXVsdHMgdG8gRmFsc2UuIFNob3VsZCBiZSBzZXQgdG8gVHJ1ZSB3aGVuIHRoZSBjYWxsIHRvIHRoZSBmdW5jdGlvbiBzaG91bGQgbm90IGV4dGVuZCBvciBjeWNsZSB0aGUgc2Vzc2lvbiAoZS5nLiBiZWluZyBjYWxsZWQgZm9yIG5vbi11c2VyIGdlbmVyYXRlZCBldmVudHMpXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHRpbWVzdGFtcCAob3B0aW9uYWwpIERlZmF1bHRzIHRvIHRoZSBjdXJyZW50IHRpbWUuIFRoZSB0aW1lc3RhbXAgdG8gYmUgc3RvcmVkIHdpdGggdGhlIHNlc3Npb25JZCAodXNlZCB3aGVuIGRldGVybWluaW5nIGlmIGEgbmV3IHNlc3Npb25JZCBzaG91bGQgYmUgZ2VuZXJhdGVkKVxuICAgICAqL1xuICAgIGNoZWNrQW5kR2V0U2Vzc2lvbkFuZFdpbmRvd0lkKHJlYWRPbmx5ID0gZmFsc2UsIF90aW1lc3RhbXA6IG51bWJlciB8IG51bGwgPSBudWxsKSB7XG4gICAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IF90aW1lc3RhbXAgfHwgbmV3IERhdGUoKS5nZXRUaW1lKClcblxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcHJlZmVyLWNvbnN0XG4gICAgICAgIGxldCBbbGFzdFRpbWVzdGFtcCwgc2Vzc2lvbklkLCBzdGFydFRpbWVzdGFtcF0gPSB0aGlzLl9nZXRTZXNzaW9uSWQoKVxuICAgICAgICBsZXQgd2luZG93SWQgPSB0aGlzLl9nZXRXaW5kb3dJZCgpXG5cbiAgICAgICAgY29uc3Qgc2Vzc2lvblBhc3RNYXhpbXVtTGVuZ3RoID1cbiAgICAgICAgICAgIHN0YXJ0VGltZXN0YW1wICYmIHN0YXJ0VGltZXN0YW1wID4gMCAmJiBNYXRoLmFicyh0aW1lc3RhbXAgLSBzdGFydFRpbWVzdGFtcCkgPiBTRVNTSU9OX0xFTkdUSF9MSU1JVFxuXG4gICAgICAgIGxldCB2YWx1ZXNDaGFuZ2VkID0gZmFsc2VcbiAgICAgICAgY29uc3Qgbm9TZXNzaW9uSWQgPSAhc2Vzc2lvbklkXG4gICAgICAgIGNvbnN0IGFjdGl2aXR5VGltZW91dCA9ICFyZWFkT25seSAmJiBNYXRoLmFicyh0aW1lc3RhbXAgLSBsYXN0VGltZXN0YW1wKSA+IHRoaXMuX3Nlc3Npb25UaW1lb3V0TXNcbiAgICAgICAgaWYgKG5vU2Vzc2lvbklkIHx8IGFjdGl2aXR5VGltZW91dCB8fCBzZXNzaW9uUGFzdE1heGltdW1MZW5ndGgpIHtcbiAgICAgICAgICAgIHNlc3Npb25JZCA9IHRoaXMuX3Nlc3Npb25JZEdlbmVyYXRvcigpXG4gICAgICAgICAgICB3aW5kb3dJZCA9IHRoaXMuX3dpbmRvd0lkR2VuZXJhdG9yKClcbiAgICAgICAgICAgIGxvZ2dlci5pbmZvKCdbU2Vzc2lvbklkXSBuZXcgc2Vzc2lvbiBJRCBnZW5lcmF0ZWQnLCB7XG4gICAgICAgICAgICAgICAgc2Vzc2lvbklkLFxuICAgICAgICAgICAgICAgIHdpbmRvd0lkLFxuICAgICAgICAgICAgICAgIGNoYW5nZVJlYXNvbjogeyBub1Nlc3Npb25JZCwgYWN0aXZpdHlUaW1lb3V0LCBzZXNzaW9uUGFzdE1heGltdW1MZW5ndGggfSxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBzdGFydFRpbWVzdGFtcCA9IHRpbWVzdGFtcFxuICAgICAgICAgICAgdmFsdWVzQ2hhbmdlZCA9IHRydWVcbiAgICAgICAgfSBlbHNlIGlmICghd2luZG93SWQpIHtcbiAgICAgICAgICAgIHdpbmRvd0lkID0gdGhpcy5fd2luZG93SWRHZW5lcmF0b3IoKVxuICAgICAgICAgICAgdmFsdWVzQ2hhbmdlZCA9IHRydWVcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IG5ld1RpbWVzdGFtcCA9IGxhc3RUaW1lc3RhbXAgPT09IDAgfHwgIXJlYWRPbmx5IHx8IHNlc3Npb25QYXN0TWF4aW11bUxlbmd0aCA/IHRpbWVzdGFtcCA6IGxhc3RUaW1lc3RhbXBcbiAgICAgICAgY29uc3Qgc2Vzc2lvblN0YXJ0VGltZXN0YW1wID0gc3RhcnRUaW1lc3RhbXAgPT09IDAgPyBuZXcgRGF0ZSgpLmdldFRpbWUoKSA6IHN0YXJ0VGltZXN0YW1wXG5cbiAgICAgICAgdGhpcy5fc2V0V2luZG93SWQod2luZG93SWQpXG4gICAgICAgIHRoaXMuX3NldFNlc3Npb25JZChzZXNzaW9uSWQsIG5ld1RpbWVzdGFtcCwgc2Vzc2lvblN0YXJ0VGltZXN0YW1wKVxuXG4gICAgICAgIGlmICh2YWx1ZXNDaGFuZ2VkKSB7XG4gICAgICAgICAgICB0aGlzLl9zZXNzaW9uSWRDaGFuZ2VkSGFuZGxlcnMuZm9yRWFjaCgoaGFuZGxlcikgPT4gaGFuZGxlcihzZXNzaW9uSWQsIHdpbmRvd0lkKSlcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzZXNzaW9uSWQsXG4gICAgICAgICAgICB3aW5kb3dJZCxcbiAgICAgICAgICAgIHNlc3Npb25TdGFydFRpbWVzdGFtcCxcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsICIvKipcbiAqIEludGVncmF0ZSBTZW50cnkgd2l0aCBQb3N0SG9nLiBUaGlzIHdpbGwgYWRkIGEgZGlyZWN0IGxpbmsgdG8gdGhlIHBlcnNvbiBpbiBTZW50cnksIGFuZCBhbiAkZXhjZXB0aW9uIGV2ZW50IGluIFBvc3RIb2dcbiAqXG4gKiAjIyMgVXNhZ2VcbiAqXG4gKiAgICAgU2VudHJ5LmluaXQoe1xuICogICAgICAgICAgZHNuOiAnaHR0cHM6Ly9leGFtcGxlJyxcbiAqICAgICAgICAgIGludGVncmF0aW9uczogW1xuICogICAgICAgICAgICAgIG5ldyBwb3N0aG9nLlNlbnRyeUludGVncmF0aW9uKHBvc3Rob2cpXG4gKiAgICAgICAgICBdXG4gKiAgICAgfSlcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gW3Bvc3Rob2ddIFRoZSBwb3N0aG9nIG9iamVjdFxuICogQHBhcmFtIHtzdHJpbmd9IFtvcmdhbml6YXRpb25dIE9wdGlvbmFsOiBUaGUgU2VudHJ5IG9yZ2FuaXphdGlvbiwgdXNlZCB0byBzZW5kIGEgZGlyZWN0IGxpbmsgZnJvbSBQb3N0SG9nIHRvIFNlbnRyeVxuICogQHBhcmFtIHtOdW1iZXJ9IFtwcm9qZWN0SWRdIE9wdGlvbmFsOiBUaGUgU2VudHJ5IHByb2plY3QgaWQsIHVzZWQgdG8gc2VuZCBhIGRpcmVjdCBsaW5rIGZyb20gUG9zdEhvZyB0byBTZW50cnlcbiAqIEBwYXJhbSB7c3RyaW5nfSBbcHJlZml4XSBPcHRpb25hbDogVXJsIG9mIGEgc2VsZi1ob3N0ZWQgc2VudHJ5IGluc3RhbmNlIChkZWZhdWx0OiBodHRwczovL3NlbnRyeS5pby9vcmdhbml6YXRpb25zLylcbiAqL1xuXG5pbXBvcnQgeyBQb3N0SG9nIH0gZnJvbSAnLi4vcG9zdGhvZy1jb3JlJ1xuXG4vLyBOT1RFIC0gd2UgY2FuJ3QgaW1wb3J0IGZyb20gQHNlbnRyeS90eXBlcyBiZWNhdXNlIGl0IGNoYW5nZXMgZnJlcXVlbnRseSBhbmQgY2F1c2VzIGNsYXNoZXNcbi8vIFdlIG9ubHkgdXNlIGEgc21hbGwgc3Vic2V0IG9mIHRoZSB0eXBlcywgc28gd2UgY2FuIGp1c3QgZGVmaW5lIHRoZSBpbnRlZ3JhdGlvbiBvdmVyYWxsIGFuZCB1c2UgYW55IGZvciB0aGUgcmVzdFxuXG4vLyBpbXBvcnQge1xuLy8gICAgIEV2ZW50IGFzIF9TZW50cnlFdmVudCxcbi8vICAgICBFdmVudFByb2Nlc3NvciBhcyBfU2VudHJ5RXZlbnRQcm9jZXNzb3IsXG4vLyAgICAgSHViIGFzIF9TZW50cnlIdWIsXG4vLyAgICAgSW50ZWdyYXRpb24gYXMgX1NlbnRyeUludGVncmF0aW9uLFxuLy8gfSBmcm9tICdAc2VudHJ5L3R5cGVzJ1xuXG4vLyBVbmNvbW1lbnQgdGhlIGFib3ZlIGFuZCBjb21tZW50IHRoZSBiZWxvdyB0byBnZXQgdHlwZSBjaGVja2luZyBmb3IgZGV2ZWxvcG1lbnRcblxudHlwZSBfU2VudHJ5RXZlbnQgPSBhbnlcbnR5cGUgX1NlbnRyeUV2ZW50UHJvY2Vzc29yID0gYW55XG50eXBlIF9TZW50cnlIdWIgPSBhbnlcblxuaW50ZXJmYWNlIF9TZW50cnlJbnRlZ3JhdGlvbiB7XG4gICAgbmFtZTogc3RyaW5nXG4gICAgc2V0dXBPbmNlKGFkZEdsb2JhbEV2ZW50UHJvY2Vzc29yOiAoY2FsbGJhY2s6IF9TZW50cnlFdmVudFByb2Nlc3NvcikgPT4gdm9pZCwgZ2V0Q3VycmVudEh1YjogKCkgPT4gX1NlbnRyeUh1Yik6IHZvaWRcbn1cblxuaW50ZXJmYWNlIFNlbnRyeUV4Y2VwdGlvblByb3BlcnRpZXMge1xuICAgICRzZW50cnlfZXZlbnRfaWQ6IGFueVxuICAgICRzZW50cnlfZXhjZXB0aW9uOiBhbnlcbiAgICAkc2VudHJ5X2V4Y2VwdGlvbl9tZXNzYWdlOiBhbnlcbiAgICAkc2VudHJ5X2V4Y2VwdGlvbl90eXBlOiBhbnlcbiAgICAkc2VudHJ5X3RhZ3M6IGFueVxuICAgICRzZW50cnlfdXJsPzogc3RyaW5nXG59XG5cbmV4cG9ydCBjbGFzcyBTZW50cnlJbnRlZ3JhdGlvbiBpbXBsZW1lbnRzIF9TZW50cnlJbnRlZ3JhdGlvbiB7XG4gICAgbmFtZTogc3RyaW5nXG5cbiAgICBzZXR1cE9uY2U6IChcbiAgICAgICAgYWRkR2xvYmFsRXZlbnRQcm9jZXNzb3I6IChjYWxsYmFjazogX1NlbnRyeUV2ZW50UHJvY2Vzc29yKSA9PiB2b2lkLFxuICAgICAgICBnZXRDdXJyZW50SHViOiAoKSA9PiBfU2VudHJ5SHViXG4gICAgKSA9PiB2b2lkXG5cbiAgICBjb25zdHJ1Y3RvcihfcG9zdGhvZzogUG9zdEhvZywgb3JnYW5pemF0aW9uPzogc3RyaW5nLCBwcm9qZWN0SWQ/OiBudW1iZXIsIHByZWZpeD86IHN0cmluZykge1xuICAgICAgICAvLyBzZXR1cE9uY2UgZ2V0cyBjYWxsZWQgYnkgU2VudHJ5IHdoZW4gaXQgaW50aWFsaXplcyB0aGUgcGx1Z2luXG4gICAgICAgIHRoaXMubmFtZSA9ICdwb3N0aG9nLWpzJ1xuICAgICAgICB0aGlzLnNldHVwT25jZSA9IGZ1bmN0aW9uIChhZGRHbG9iYWxFdmVudFByb2Nlc3NvcjogKGNhbGxiYWNrOiBfU2VudHJ5RXZlbnRQcm9jZXNzb3IpID0+IHZvaWQpIHtcbiAgICAgICAgICAgIGFkZEdsb2JhbEV2ZW50UHJvY2Vzc29yKChldmVudDogX1NlbnRyeUV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50LmxldmVsICE9PSAnZXJyb3InIHx8ICFfcG9zdGhvZy5fX2xvYWRlZCkgcmV0dXJuIGV2ZW50XG4gICAgICAgICAgICAgICAgaWYgKCFldmVudC50YWdzKSBldmVudC50YWdzID0ge31cblxuICAgICAgICAgICAgICAgIGNvbnN0IHBlcnNvblVybCA9IF9wb3N0aG9nLnJlcXVlc3RSb3V0ZXIuZW5kcG9pbnRGb3IoJ3VpJywgJy9wZXJzb24vJyArIF9wb3N0aG9nLmdldF9kaXN0aW5jdF9pZCgpKVxuICAgICAgICAgICAgICAgIGV2ZW50LnRhZ3NbJ1Bvc3RIb2cgUGVyc29uIFVSTCddID0gcGVyc29uVXJsXG4gICAgICAgICAgICAgICAgaWYgKF9wb3N0aG9nLnNlc3Npb25SZWNvcmRpbmdTdGFydGVkKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQudGFnc1snUG9zdEhvZyBSZWNvcmRpbmcgVVJMJ10gPSBfcG9zdGhvZy5nZXRfc2Vzc2lvbl9yZXBsYXlfdXJsKHsgd2l0aFRpbWVzdGFtcDogdHJ1ZSB9KVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnN0IGV4Y2VwdGlvbnMgPSBldmVudC5leGNlcHRpb24/LnZhbHVlcyB8fCBbXVxuXG4gICAgICAgICAgICAgICAgY29uc3QgZGF0YTogU2VudHJ5RXhjZXB0aW9uUHJvcGVydGllcyAmIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gdHdvIHByb3BlcnRpZXMgYWRkZWQgdG8gbWF0Y2ggYW55IGV4Y2VwdGlvbiBhdXRvLWNhcHR1cmVcbiAgICAgICAgICAgICAgICAgICAgLy8gYWRkZWQgbWFudWFsbHkgdG8gYXZvaWQgYW55IGRlcGVuZGVuY3kgb24gdGhlIGxhemlseSBsb2FkZWQgY29udGVudFxuICAgICAgICAgICAgICAgICAgICAkZXhjZXB0aW9uX21lc3NhZ2U6IGFueVxuICAgICAgICAgICAgICAgICAgICAkZXhjZXB0aW9uX3R5cGU6IGFueVxuICAgICAgICAgICAgICAgICAgICAkZXhjZXB0aW9uX3BlcnNvblVSTDogc3RyaW5nXG4gICAgICAgICAgICAgICAgfSA9IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gUG9zdEhvZyBFeGNlcHRpb24gUHJvcGVydGllcyxcbiAgICAgICAgICAgICAgICAgICAgJGV4Y2VwdGlvbl9tZXNzYWdlOiBleGNlcHRpb25zWzBdPy52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgJGV4Y2VwdGlvbl90eXBlOiBleGNlcHRpb25zWzBdPy50eXBlLFxuICAgICAgICAgICAgICAgICAgICAkZXhjZXB0aW9uX3BlcnNvblVSTDogcGVyc29uVXJsLFxuICAgICAgICAgICAgICAgICAgICAvLyBTZW50cnkgRXhjZXB0aW9uIFByb3BlcnRpZXNcbiAgICAgICAgICAgICAgICAgICAgJHNlbnRyeV9ldmVudF9pZDogZXZlbnQuZXZlbnRfaWQsXG4gICAgICAgICAgICAgICAgICAgICRzZW50cnlfZXhjZXB0aW9uOiBldmVudC5leGNlcHRpb24sXG4gICAgICAgICAgICAgICAgICAgICRzZW50cnlfZXhjZXB0aW9uX21lc3NhZ2U6IGV4Y2VwdGlvbnNbMF0/LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAkc2VudHJ5X2V4Y2VwdGlvbl90eXBlOiBleGNlcHRpb25zWzBdPy50eXBlLFxuICAgICAgICAgICAgICAgICAgICAkc2VudHJ5X3RhZ3M6IGV2ZW50LnRhZ3MsXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKG9yZ2FuaXphdGlvbiAmJiBwcm9qZWN0SWQpXG4gICAgICAgICAgICAgICAgICAgIGRhdGFbJyRzZW50cnlfdXJsJ10gPVxuICAgICAgICAgICAgICAgICAgICAgICAgKHByZWZpeCB8fCAnaHR0cHM6Ly9zZW50cnkuaW8vb3JnYW5pemF0aW9ucy8nKSArXG4gICAgICAgICAgICAgICAgICAgICAgICBvcmdhbml6YXRpb24gK1xuICAgICAgICAgICAgICAgICAgICAgICAgJy9pc3N1ZXMvP3Byb2plY3Q9JyArXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9qZWN0SWQgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJyZxdWVyeT0nICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LmV2ZW50X2lkXG4gICAgICAgICAgICAgICAgX3Bvc3Rob2cuY2FwdHVyZSgnJGV4Y2VwdGlvbicsIGRhdGEpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGV2ZW50XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgfVxufVxuIiwgImltcG9ydCB7IHdpbmRvdyB9IGZyb20gJy4vdXRpbHMvZ2xvYmFscydcbmltcG9ydCB7IFBvc3RIb2cgfSBmcm9tICcuL3Bvc3Rob2ctY29yZSdcbmltcG9ydCB7IF9pc0FycmF5IH0gZnJvbSAnLi91dGlscy90eXBlLXV0aWxzJ1xuXG5pbnRlcmZhY2UgUGFnZVZpZXdEYXRhIHtcbiAgICBwYXRobmFtZTogc3RyaW5nXG4gICAgLy8gc2Nyb2xsIGlzIGhvdyBmYXIgZG93biB0aGUgcGFnZSB0aGUgdXNlciBoYXMgc2Nyb2xsZWQsXG4gICAgLy8gY29udGVudCBpcyBob3cgZmFyIGRvd24gdGhlIHBhZ2UgdGhlIHVzZXIgY2FuIHZpZXcgY29udGVudFxuICAgIC8vIChlLmcuIGlmIHRoZSBwYWdlIGlzIDEwMDAgdGFsbCwgYnV0IHRoZSB1c2VyJ3Mgc2NyZWVuIGlzIG9ubHkgNTAwIHRhbGwsXG4gICAgLy8gYW5kIHRoZXkgZG9uJ3Qgc2Nyb2xsIGF0IGFsbCwgdGhlbiBzY3JvbGwgaXMgMCBhbmQgY29udGVudCBpcyA1MDApXG4gICAgbWF4U2Nyb2xsSGVpZ2h0PzogbnVtYmVyXG4gICAgbWF4U2Nyb2xsWT86IG51bWJlclxuICAgIGxhc3RTY3JvbGxZPzogbnVtYmVyXG4gICAgbWF4Q29udGVudEhlaWdodD86IG51bWJlclxuICAgIG1heENvbnRlbnRZPzogbnVtYmVyXG4gICAgbGFzdENvbnRlbnRZPzogbnVtYmVyXG59XG5cbmludGVyZmFjZSBTY3JvbGxQcm9wZXJ0aWVzIHtcbiAgICAkcHJldl9wYWdldmlld19sYXN0X3Njcm9sbD86IG51bWJlclxuICAgICRwcmV2X3BhZ2V2aWV3X2xhc3Rfc2Nyb2xsX3BlcmNlbnRhZ2U/OiBudW1iZXJcbiAgICAkcHJldl9wYWdldmlld19tYXhfc2Nyb2xsPzogbnVtYmVyXG4gICAgJHByZXZfcGFnZXZpZXdfbWF4X3Njcm9sbF9wZXJjZW50YWdlPzogbnVtYmVyXG4gICAgJHByZXZfcGFnZXZpZXdfbGFzdF9jb250ZW50PzogbnVtYmVyXG4gICAgJHByZXZfcGFnZXZpZXdfbGFzdF9jb250ZW50X3BlcmNlbnRhZ2U/OiBudW1iZXJcbiAgICAkcHJldl9wYWdldmlld19tYXhfY29udGVudD86IG51bWJlclxuICAgICRwcmV2X3BhZ2V2aWV3X21heF9jb250ZW50X3BlcmNlbnRhZ2U/OiBudW1iZXJcbn1cblxuaW50ZXJmYWNlIFBhZ2VWaWV3RXZlbnRQcm9wZXJ0aWVzIGV4dGVuZHMgU2Nyb2xsUHJvcGVydGllcyB7XG4gICAgJHByZXZfcGFnZXZpZXdfcGF0aG5hbWU/OiBzdHJpbmdcbn1cblxuZXhwb3J0IGNsYXNzIFBhZ2VWaWV3TWFuYWdlciB7XG4gICAgX3BhZ2VWaWV3RGF0YTogUGFnZVZpZXdEYXRhIHwgdW5kZWZpbmVkXG4gICAgX2hhc1NlZW5QYWdlVmlldyA9IGZhbHNlXG4gICAgX2luc3RhbmNlOiBQb3N0SG9nXG5cbiAgICBjb25zdHJ1Y3RvcihpbnN0YW5jZTogUG9zdEhvZykge1xuICAgICAgICB0aGlzLl9pbnN0YW5jZSA9IGluc3RhbmNlXG4gICAgfVxuXG4gICAgX2NyZWF0ZVBhZ2VWaWV3RGF0YSgpOiBQYWdlVmlld0RhdGEge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcGF0aG5hbWU6IHdpbmRvdz8ubG9jYXRpb24ucGF0aG5hbWUgPz8gJycsXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBkb1BhZ2VWaWV3KCk6IFBhZ2VWaWV3RXZlbnRQcm9wZXJ0aWVzIHtcbiAgICAgICAgbGV0IHByZXZQYWdlVmlld0RhdGE6IFBhZ2VWaWV3RGF0YSB8IHVuZGVmaW5lZFxuICAgICAgICAvLyBpZiB0aGVyZSB3ZXJlIGV2ZW50cyBjcmVhdGVkIGJlZm9yZSB0aGUgZmlyc3QgUGFnZVZpZXcsIHdlIHdvdWxkIGhhdmUgY3JlYXRlZCBhXG4gICAgICAgIC8vIHBhZ2VWaWV3RGF0YSBmb3IgdGhlbS4gSWYgdGhpcyBoYXBwZW5lZCwgd2UgZG9uJ3Qgd2FudCB0byBjcmVhdGUgYSBuZXcgcGFnZVZpZXdEYXRhXG4gICAgICAgIGlmICghdGhpcy5faGFzU2VlblBhZ2VWaWV3KSB7XG4gICAgICAgICAgICB0aGlzLl9oYXNTZWVuUGFnZVZpZXcgPSB0cnVlXG4gICAgICAgICAgICBwcmV2UGFnZVZpZXdEYXRhID0gdW5kZWZpbmVkXG4gICAgICAgICAgICBpZiAoIXRoaXMuX3BhZ2VWaWV3RGF0YSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3BhZ2VWaWV3RGF0YSA9IHRoaXMuX2NyZWF0ZVBhZ2VWaWV3RGF0YSgpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwcmV2UGFnZVZpZXdEYXRhID0gdGhpcy5fcGFnZVZpZXdEYXRhXG4gICAgICAgICAgICB0aGlzLl9wYWdlVmlld0RhdGEgPSB0aGlzLl9jcmVhdGVQYWdlVmlld0RhdGEoKVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gdXBkYXRlIHRoZSBzY3JvbGwgcHJvcGVydGllcyBmb3IgdGhlIG5ldyBwYWdlLCBidXQgd2FpdCB1bnRpbCB0aGUgbmV4dCB0aWNrXG4gICAgICAgIC8vIG9mIHRoZSBldmVudCBsb29wXG4gICAgICAgIHNldFRpbWVvdXQodGhpcy5fdXBkYXRlU2Nyb2xsRGF0YSwgMClcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgJHByZXZfcGFnZXZpZXdfcGF0aG5hbWU6IHByZXZQYWdlVmlld0RhdGE/LnBhdGhuYW1lLFxuICAgICAgICAgICAgLi4udGhpcy5fY2FsY3VsYXRlUHJldlBhZ2VTY3JvbGxQcm9wZXJ0aWVzKHByZXZQYWdlVmlld0RhdGEpLFxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZG9QYWdlTGVhdmUoKTogUGFnZVZpZXdFdmVudFByb3BlcnRpZXMge1xuICAgICAgICBjb25zdCBwcmV2UGFnZVZpZXdEYXRhID0gdGhpcy5fcGFnZVZpZXdEYXRhXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAkcHJldl9wYWdldmlld19wYXRobmFtZTogcHJldlBhZ2VWaWV3RGF0YT8ucGF0aG5hbWUsXG4gICAgICAgICAgICAuLi50aGlzLl9jYWxjdWxhdGVQcmV2UGFnZVNjcm9sbFByb3BlcnRpZXMocHJldlBhZ2VWaWV3RGF0YSksXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBfY2FsY3VsYXRlUHJldlBhZ2VTY3JvbGxQcm9wZXJ0aWVzKHByZXZQYWdlVmlld0RhdGE6IFBhZ2VWaWV3RGF0YSB8IHVuZGVmaW5lZCk6IFNjcm9sbFByb3BlcnRpZXMge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgICAhcHJldlBhZ2VWaWV3RGF0YSB8fFxuICAgICAgICAgICAgcHJldlBhZ2VWaWV3RGF0YS5tYXhTY3JvbGxIZWlnaHQgPT0gbnVsbCB8fFxuICAgICAgICAgICAgcHJldlBhZ2VWaWV3RGF0YS5sYXN0U2Nyb2xsWSA9PSBudWxsIHx8XG4gICAgICAgICAgICBwcmV2UGFnZVZpZXdEYXRhLm1heFNjcm9sbFkgPT0gbnVsbCB8fFxuICAgICAgICAgICAgcHJldlBhZ2VWaWV3RGF0YS5tYXhDb250ZW50SGVpZ2h0ID09IG51bGwgfHxcbiAgICAgICAgICAgIHByZXZQYWdlVmlld0RhdGEubGFzdENvbnRlbnRZID09IG51bGwgfHxcbiAgICAgICAgICAgIHByZXZQYWdlVmlld0RhdGEubWF4Q29udGVudFkgPT0gbnVsbFxuICAgICAgICApIHtcbiAgICAgICAgICAgIHJldHVybiB7fVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHsgbWF4U2Nyb2xsSGVpZ2h0LCBsYXN0U2Nyb2xsWSwgbWF4U2Nyb2xsWSwgbWF4Q29udGVudEhlaWdodCwgbGFzdENvbnRlbnRZLCBtYXhDb250ZW50WSB9ID0gcHJldlBhZ2VWaWV3RGF0YVxuXG4gICAgICAgIC8vIFVzZSBjZWlsLCBzbyB0aGF0IGUuZy4gc2Nyb2xsaW5nIDk5OS41cHggb2YgYSAxMDAwcHggcGFnZSBpcyBjb25zaWRlcmVkIDEwMCUgc2Nyb2xsZWRcbiAgICAgICAgbWF4U2Nyb2xsSGVpZ2h0ID0gTWF0aC5jZWlsKG1heFNjcm9sbEhlaWdodClcbiAgICAgICAgbGFzdFNjcm9sbFkgPSBNYXRoLmNlaWwobGFzdFNjcm9sbFkpXG4gICAgICAgIG1heFNjcm9sbFkgPSBNYXRoLmNlaWwobWF4U2Nyb2xsWSlcbiAgICAgICAgbWF4Q29udGVudEhlaWdodCA9IE1hdGguY2VpbChtYXhDb250ZW50SGVpZ2h0KVxuICAgICAgICBsYXN0Q29udGVudFkgPSBNYXRoLmNlaWwobGFzdENvbnRlbnRZKVxuICAgICAgICBtYXhDb250ZW50WSA9IE1hdGguY2VpbChtYXhDb250ZW50WSlcblxuICAgICAgICAvLyBpZiB0aGUgbWF4aW11bSBzY3JvbGwgaGVpZ2h0IGlzIG5lYXIgMCwgdGhlbiB0aGUgcGVyY2VudGFnZSBpcyAxXG4gICAgICAgIGNvbnN0IGxhc3RTY3JvbGxQZXJjZW50YWdlID0gbWF4U2Nyb2xsSGVpZ2h0IDw9IDEgPyAxIDogY2xhbXAobGFzdFNjcm9sbFkgLyBtYXhTY3JvbGxIZWlnaHQsIDAsIDEpXG4gICAgICAgIGNvbnN0IG1heFNjcm9sbFBlcmNlbnRhZ2UgPSBtYXhTY3JvbGxIZWlnaHQgPD0gMSA/IDEgOiBjbGFtcChtYXhTY3JvbGxZIC8gbWF4U2Nyb2xsSGVpZ2h0LCAwLCAxKVxuICAgICAgICBjb25zdCBsYXN0Q29udGVudFBlcmNlbnRhZ2UgPSBtYXhDb250ZW50SGVpZ2h0IDw9IDEgPyAxIDogY2xhbXAobGFzdENvbnRlbnRZIC8gbWF4Q29udGVudEhlaWdodCwgMCwgMSlcbiAgICAgICAgY29uc3QgbWF4Q29udGVudFBlcmNlbnRhZ2UgPSBtYXhDb250ZW50SGVpZ2h0IDw9IDEgPyAxIDogY2xhbXAobWF4Q29udGVudFkgLyBtYXhDb250ZW50SGVpZ2h0LCAwLCAxKVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAkcHJldl9wYWdldmlld19sYXN0X3Njcm9sbDogbGFzdFNjcm9sbFksXG4gICAgICAgICAgICAkcHJldl9wYWdldmlld19sYXN0X3Njcm9sbF9wZXJjZW50YWdlOiBsYXN0U2Nyb2xsUGVyY2VudGFnZSxcbiAgICAgICAgICAgICRwcmV2X3BhZ2V2aWV3X21heF9zY3JvbGw6IG1heFNjcm9sbFksXG4gICAgICAgICAgICAkcHJldl9wYWdldmlld19tYXhfc2Nyb2xsX3BlcmNlbnRhZ2U6IG1heFNjcm9sbFBlcmNlbnRhZ2UsXG4gICAgICAgICAgICAkcHJldl9wYWdldmlld19sYXN0X2NvbnRlbnQ6IGxhc3RDb250ZW50WSxcbiAgICAgICAgICAgICRwcmV2X3BhZ2V2aWV3X2xhc3RfY29udGVudF9wZXJjZW50YWdlOiBsYXN0Q29udGVudFBlcmNlbnRhZ2UsXG4gICAgICAgICAgICAkcHJldl9wYWdldmlld19tYXhfY29udGVudDogbWF4Q29udGVudFksXG4gICAgICAgICAgICAkcHJldl9wYWdldmlld19tYXhfY29udGVudF9wZXJjZW50YWdlOiBtYXhDb250ZW50UGVyY2VudGFnZSxcbiAgICAgICAgfVxuICAgIH1cblxuICAgIF91cGRhdGVTY3JvbGxEYXRhID0gKCkgPT4ge1xuICAgICAgICBpZiAoIXRoaXMuX3BhZ2VWaWV3RGF0YSkge1xuICAgICAgICAgICAgdGhpcy5fcGFnZVZpZXdEYXRhID0gdGhpcy5fY3JlYXRlUGFnZVZpZXdEYXRhKClcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYWdlVmlld0RhdGEgPSB0aGlzLl9wYWdlVmlld0RhdGFcblxuICAgICAgICBjb25zdCBzY3JvbGxZID0gdGhpcy5fc2Nyb2xsWSgpXG4gICAgICAgIGNvbnN0IHNjcm9sbEhlaWdodCA9IHRoaXMuX3Njcm9sbEhlaWdodCgpXG4gICAgICAgIGNvbnN0IGNvbnRlbnRZID0gdGhpcy5fY29udGVudFkoKVxuICAgICAgICBjb25zdCBjb250ZW50SGVpZ2h0ID0gdGhpcy5fY29udGVudEhlaWdodCgpXG5cbiAgICAgICAgcGFnZVZpZXdEYXRhLmxhc3RTY3JvbGxZID0gc2Nyb2xsWVxuICAgICAgICBwYWdlVmlld0RhdGEubWF4U2Nyb2xsWSA9IE1hdGgubWF4KHNjcm9sbFksIHBhZ2VWaWV3RGF0YS5tYXhTY3JvbGxZID8/IDApXG4gICAgICAgIHBhZ2VWaWV3RGF0YS5tYXhTY3JvbGxIZWlnaHQgPSBNYXRoLm1heChzY3JvbGxIZWlnaHQsIHBhZ2VWaWV3RGF0YS5tYXhTY3JvbGxIZWlnaHQgPz8gMClcblxuICAgICAgICBwYWdlVmlld0RhdGEubGFzdENvbnRlbnRZID0gY29udGVudFlcbiAgICAgICAgcGFnZVZpZXdEYXRhLm1heENvbnRlbnRZID0gTWF0aC5tYXgoY29udGVudFksIHBhZ2VWaWV3RGF0YS5tYXhDb250ZW50WSA/PyAwKVxuICAgICAgICBwYWdlVmlld0RhdGEubWF4Q29udGVudEhlaWdodCA9IE1hdGgubWF4KGNvbnRlbnRIZWlnaHQsIHBhZ2VWaWV3RGF0YS5tYXhDb250ZW50SGVpZ2h0ID8/IDApXG4gICAgfVxuXG4gICAgc3RhcnRNZWFzdXJpbmdTY3JvbGxQb3NpdGlvbigpIHtcbiAgICAgICAgLy8gc2V0dGluZyB0aGUgdGhpcmQgYXJndW1lbnQgdG8gYHRydWVgIG1lYW5zIHRoYXQgd2Ugd2lsbCByZWNlaXZlIHNjcm9sbCBldmVudHMgZm9yIG90aGVyIHNjcm9sbGFibGUgZWxlbWVudHNcbiAgICAgICAgLy8gb24gdGhlIHBhZ2UsIG5vdCBqdXN0IHRoZSB3aW5kb3dcbiAgICAgICAgLy8gc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9FdmVudFRhcmdldC9hZGRFdmVudExpc3RlbmVyI3VzZWNhcHR1cmVcbiAgICAgICAgd2luZG93Py5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCB0aGlzLl91cGRhdGVTY3JvbGxEYXRhLCB0cnVlKVxuICAgICAgICB3aW5kb3c/LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbGVuZCcsIHRoaXMuX3VwZGF0ZVNjcm9sbERhdGEsIHRydWUpXG4gICAgICAgIHdpbmRvdz8uYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5fdXBkYXRlU2Nyb2xsRGF0YSlcbiAgICB9XG5cbiAgICBzdG9wTWVhc3VyaW5nU2Nyb2xsUG9zaXRpb24oKSB7XG4gICAgICAgIHdpbmRvdz8ucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhpcy5fdXBkYXRlU2Nyb2xsRGF0YSlcbiAgICAgICAgd2luZG93Py5yZW1vdmVFdmVudExpc3RlbmVyKCdzY3JvbGxlbmQnLCB0aGlzLl91cGRhdGVTY3JvbGxEYXRhKVxuICAgICAgICB3aW5kb3c/LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMuX3VwZGF0ZVNjcm9sbERhdGEpXG4gICAgfVxuXG4gICAgX3Njcm9sbEVsZW1lbnQoKTogRWxlbWVudCB8IG51bGwgfCB1bmRlZmluZWQge1xuICAgICAgICBpZiAodGhpcy5faW5zdGFuY2UuY29uZmlnLnNjcm9sbF9yb290X3NlbGVjdG9yKSB7XG4gICAgICAgICAgICBjb25zdCBzZWxlY3RvcnMgPSBfaXNBcnJheSh0aGlzLl9pbnN0YW5jZS5jb25maWcuc2Nyb2xsX3Jvb3Rfc2VsZWN0b3IpXG4gICAgICAgICAgICAgICAgPyB0aGlzLl9pbnN0YW5jZS5jb25maWcuc2Nyb2xsX3Jvb3Rfc2VsZWN0b3JcbiAgICAgICAgICAgICAgICA6IFt0aGlzLl9pbnN0YW5jZS5jb25maWcuc2Nyb2xsX3Jvb3Rfc2VsZWN0b3JdXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHNlbGVjdG9yIG9mIHNlbGVjdG9ycykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSB3aW5kb3c/LmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpXG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gd2luZG93Py5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnRcbiAgICAgICAgfVxuICAgIH1cblxuICAgIF9zY3JvbGxIZWlnaHQoKTogbnVtYmVyIHtcbiAgICAgICAgY29uc3QgZWxlbWVudCA9IHRoaXMuX3Njcm9sbEVsZW1lbnQoKVxuICAgICAgICByZXR1cm4gZWxlbWVudCA/IE1hdGgubWF4KDAsIGVsZW1lbnQuc2Nyb2xsSGVpZ2h0IC0gZWxlbWVudC5jbGllbnRIZWlnaHQpIDogMFxuICAgIH1cblxuICAgIF9zY3JvbGxZKCk6IG51bWJlciB7XG4gICAgICAgIGlmICh0aGlzLl9pbnN0YW5jZS5jb25maWcuc2Nyb2xsX3Jvb3Rfc2VsZWN0b3IpIHtcbiAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLl9zY3JvbGxFbGVtZW50KClcbiAgICAgICAgICAgIHJldHVybiAoZWxlbWVudCAmJiBlbGVtZW50LnNjcm9sbFRvcCkgfHwgMFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHdpbmRvdyA/IHdpbmRvdy5zY3JvbGxZIHx8IHdpbmRvdy5wYWdlWU9mZnNldCB8fCB3aW5kb3cuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCB8fCAwIDogMFxuICAgICAgICB9XG4gICAgfVxuXG4gICAgX2NvbnRlbnRIZWlnaHQoKTogbnVtYmVyIHtcbiAgICAgICAgY29uc3QgZWxlbWVudCA9IHRoaXMuX3Njcm9sbEVsZW1lbnQoKVxuICAgICAgICByZXR1cm4gZWxlbWVudD8uc2Nyb2xsSGVpZ2h0IHx8IDBcbiAgICB9XG5cbiAgICBfY29udGVudFkoKTogbnVtYmVyIHtcbiAgICAgICAgY29uc3QgZWxlbWVudCA9IHRoaXMuX3Njcm9sbEVsZW1lbnQoKVxuICAgICAgICBjb25zdCBjbGllbnRIZWlnaHQgPSBlbGVtZW50Py5jbGllbnRIZWlnaHQgfHwgMFxuICAgICAgICByZXR1cm4gdGhpcy5fc2Nyb2xsWSgpICsgY2xpZW50SGVpZ2h0XG4gICAgfVxufVxuXG5mdW5jdGlvbiBjbGFtcCh4OiBudW1iZXIsIG1pbjogbnVtYmVyLCBtYXg6IG51bWJlcikge1xuICAgIHJldHVybiBNYXRoLm1heChtaW4sIE1hdGgubWluKHgsIG1heCkpXG59XG4iLCAiaW1wb3J0IHsgUG9zdEhvZyB9IGZyb20gJy4vcG9zdGhvZy1jb3JlJ1xuaW1wb3J0IHsgU1VSVkVZUyB9IGZyb20gJy4vY29uc3RhbnRzJ1xuaW1wb3J0IHsgU3VydmV5Q2FsbGJhY2ssIFN1cnZleVVybE1hdGNoVHlwZSB9IGZyb20gJy4vcG9zdGhvZy1zdXJ2ZXlzLXR5cGVzJ1xuaW1wb3J0IHsgX2lzVXJsTWF0Y2hpbmdSZWdleCB9IGZyb20gJy4vdXRpbHMvcmVxdWVzdC11dGlscydcbmltcG9ydCB7IHdpbmRvdywgZG9jdW1lbnQgfSBmcm9tICcuL3V0aWxzL2dsb2JhbHMnXG5cbmV4cG9ydCBjb25zdCBzdXJ2ZXlVcmxWYWxpZGF0aW9uTWFwOiBSZWNvcmQ8U3VydmV5VXJsTWF0Y2hUeXBlLCAoY29uZGl0aW9uc1VybDogc3RyaW5nKSA9PiBib29sZWFuPiA9IHtcbiAgICBpY29udGFpbnM6IChjb25kaXRpb25zVXJsKSA9PlxuICAgICAgICAhIXdpbmRvdyAmJiB3aW5kb3cubG9jYXRpb24uaHJlZi50b0xvd2VyQ2FzZSgpLmluZGV4T2YoY29uZGl0aW9uc1VybC50b0xvd2VyQ2FzZSgpKSA+IC0xLFxuICAgIHJlZ2V4OiAoY29uZGl0aW9uc1VybCkgPT4gISF3aW5kb3cgJiYgX2lzVXJsTWF0Y2hpbmdSZWdleCh3aW5kb3cubG9jYXRpb24uaHJlZiwgY29uZGl0aW9uc1VybCksXG4gICAgZXhhY3Q6IChjb25kaXRpb25zVXJsKSA9PiB3aW5kb3c/LmxvY2F0aW9uLmhyZWYgPT09IGNvbmRpdGlvbnNVcmwsXG59XG5cbmV4cG9ydCBjbGFzcyBQb3N0SG9nU3VydmV5cyB7XG4gICAgaW5zdGFuY2U6IFBvc3RIb2dcblxuICAgIGNvbnN0cnVjdG9yKGluc3RhbmNlOiBQb3N0SG9nKSB7XG4gICAgICAgIHRoaXMuaW5zdGFuY2UgPSBpbnN0YW5jZVxuICAgIH1cblxuICAgIGdldFN1cnZleXMoY2FsbGJhY2s6IFN1cnZleUNhbGxiYWNrLCBmb3JjZVJlbG9hZCA9IGZhbHNlKSB7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nU3VydmV5cyA9IHRoaXMuaW5zdGFuY2UuZ2V0X3Byb3BlcnR5KFNVUlZFWVMpXG4gICAgICAgIGlmICghZXhpc3RpbmdTdXJ2ZXlzIHx8IGZvcmNlUmVsb2FkKSB7XG4gICAgICAgICAgICB0aGlzLmluc3RhbmNlLl9zZW5kX3JlcXVlc3Qoe1xuICAgICAgICAgICAgICAgIHVybDogdGhpcy5pbnN0YW5jZS5yZXF1ZXN0Um91dGVyLmVuZHBvaW50Rm9yKFxuICAgICAgICAgICAgICAgICAgICAnYXBpJyxcbiAgICAgICAgICAgICAgICAgICAgYC9hcGkvc3VydmV5cy8/dG9rZW49JHt0aGlzLmluc3RhbmNlLmNvbmZpZy50b2tlbn1gXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgICAgIHRyYW5zcG9ydDogJ1hIUicsXG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6IChyZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzQ29kZSAhPT0gMjAwIHx8ICFyZXNwb25zZS5qc29uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soW10pXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3VydmV5cyA9IHJlc3BvbnNlLmpzb24uc3VydmV5cyB8fCBbXVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmluc3RhbmNlLnBlcnNpc3RlbmNlPy5yZWdpc3Rlcih7IFtTVVJWRVlTXTogc3VydmV5cyB9KVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soc3VydmV5cylcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhleGlzdGluZ1N1cnZleXMpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXRBY3RpdmVNYXRjaGluZ1N1cnZleXMoY2FsbGJhY2s6IFN1cnZleUNhbGxiYWNrLCBmb3JjZVJlbG9hZCA9IGZhbHNlKSB7XG4gICAgICAgIHRoaXMuZ2V0U3VydmV5cygoc3VydmV5cykgPT4ge1xuICAgICAgICAgICAgY29uc3QgYWN0aXZlU3VydmV5cyA9IHN1cnZleXMuZmlsdGVyKChzdXJ2ZXkpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gISEoc3VydmV5LnN0YXJ0X2RhdGUgJiYgIXN1cnZleS5lbmRfZGF0ZSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBjb25zdCBjb25kaXRpb25NYXRjaGVkU3VydmV5cyA9IGFjdGl2ZVN1cnZleXMuZmlsdGVyKChzdXJ2ZXkpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIXN1cnZleS5jb25kaXRpb25zKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gdXNlIHVybE1hdGNoVHlwZSB0byB2YWxpZGF0ZSB1cmwgY29uZGl0aW9uLCBmYWxsYmFjayB0byBjb250YWlucyBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHlcbiAgICAgICAgICAgICAgICBjb25zdCB1cmxDaGVjayA9IHN1cnZleS5jb25kaXRpb25zPy51cmxcbiAgICAgICAgICAgICAgICAgICAgPyBzdXJ2ZXlVcmxWYWxpZGF0aW9uTWFwW3N1cnZleS5jb25kaXRpb25zPy51cmxNYXRjaFR5cGUgPz8gJ2ljb250YWlucyddKHN1cnZleS5jb25kaXRpb25zLnVybClcbiAgICAgICAgICAgICAgICAgICAgOiB0cnVlXG4gICAgICAgICAgICAgICAgY29uc3Qgc2VsZWN0b3JDaGVjayA9IHN1cnZleS5jb25kaXRpb25zPy5zZWxlY3RvclxuICAgICAgICAgICAgICAgICAgICA/IGRvY3VtZW50Py5xdWVyeVNlbGVjdG9yKHN1cnZleS5jb25kaXRpb25zLnNlbGVjdG9yKVxuICAgICAgICAgICAgICAgICAgICA6IHRydWVcbiAgICAgICAgICAgICAgICByZXR1cm4gdXJsQ2hlY2sgJiYgc2VsZWN0b3JDaGVja1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldGluZ01hdGNoZWRTdXJ2ZXlzID0gY29uZGl0aW9uTWF0Y2hlZFN1cnZleXMuZmlsdGVyKChzdXJ2ZXkpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIXN1cnZleS5saW5rZWRfZmxhZ19rZXkgJiYgIXN1cnZleS50YXJnZXRpbmdfZmxhZ19rZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgbGlua2VkRmxhZ0NoZWNrID0gc3VydmV5LmxpbmtlZF9mbGFnX2tleVxuICAgICAgICAgICAgICAgICAgICA/IHRoaXMuaW5zdGFuY2UuZmVhdHVyZUZsYWdzLmlzRmVhdHVyZUVuYWJsZWQoc3VydmV5LmxpbmtlZF9mbGFnX2tleSlcbiAgICAgICAgICAgICAgICAgICAgOiB0cnVlXG4gICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0aW5nRmxhZ0NoZWNrID0gc3VydmV5LnRhcmdldGluZ19mbGFnX2tleVxuICAgICAgICAgICAgICAgICAgICA/IHRoaXMuaW5zdGFuY2UuZmVhdHVyZUZsYWdzLmlzRmVhdHVyZUVuYWJsZWQoc3VydmV5LnRhcmdldGluZ19mbGFnX2tleSlcbiAgICAgICAgICAgICAgICAgICAgOiB0cnVlXG4gICAgICAgICAgICAgICAgcmV0dXJuIGxpbmtlZEZsYWdDaGVjayAmJiB0YXJnZXRpbmdGbGFnQ2hlY2tcbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayh0YXJnZXRpbmdNYXRjaGVkU3VydmV5cylcbiAgICAgICAgfSwgZm9yY2VSZWxvYWQpXG4gICAgfVxufVxuIiwgImltcG9ydCB7IFJlcXVlc3RSZXNwb25zZSB9IGZyb20gJy4vdHlwZXMnXG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tICcuL3V0aWxzL2xvZ2dlcidcblxuY29uc3Qgb25lTWludXRlSW5NaWxsaXNlY29uZHMgPSA2MCAqIDEwMDBcblxuaW50ZXJmYWNlIENhcHR1cmVSZXNwb25zZSB7XG4gICAgcXVvdGFfbGltaXRlZD86IHN0cmluZ1tdXG59XG5cbmV4cG9ydCBjbGFzcyBSYXRlTGltaXRlciB7XG4gICAgbGltaXRzOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+ID0ge31cblxuICAgIHB1YmxpYyBpc1JhdGVMaW1pdGVkKGJhdGNoS2V5OiBzdHJpbmcgfCB1bmRlZmluZWQpOiBib29sZWFuIHtcbiAgICAgICAgY29uc3QgcmV0cnlBZnRlciA9IHRoaXMubGltaXRzW2JhdGNoS2V5IHx8ICdldmVudHMnXSB8fCBmYWxzZVxuXG4gICAgICAgIGlmIChyZXRyeUFmdGVyID09PSBmYWxzZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKCkuZ2V0VGltZSgpIDwgcmV0cnlBZnRlclxuICAgIH1cblxuICAgIHB1YmxpYyBjaGVja0ZvckxpbWl0aW5nID0gKGh0dHBSZXNwb25zZTogUmVxdWVzdFJlc3BvbnNlKTogdm9pZCA9PiB7XG4gICAgICAgIGNvbnN0IHRleHQgPSBodHRwUmVzcG9uc2UudGV4dFxuXG4gICAgICAgIGlmICghdGV4dCB8fCAhdGV4dC5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlOiBDYXB0dXJlUmVzcG9uc2UgPSBKU09OLnBhcnNlKHRleHQpXG4gICAgICAgICAgICBjb25zdCBxdW90YUxpbWl0ZWRQcm9kdWN0cyA9IHJlc3BvbnNlLnF1b3RhX2xpbWl0ZWQgfHwgW11cbiAgICAgICAgICAgIHF1b3RhTGltaXRlZFByb2R1Y3RzLmZvckVhY2goKGJhdGNoS2V5KSA9PiB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmluZm8oYFtSYXRlTGltaXRlcl0gJHtiYXRjaEtleSB8fCAnZXZlbnRzJ30gaXMgcXVvdGEgbGltaXRlZC5gKVxuICAgICAgICAgICAgICAgIHRoaXMubGltaXRzW2JhdGNoS2V5XSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpICsgb25lTWludXRlSW5NaWxsaXNlY29uZHNcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0gY2F0Y2ggKGU6IGFueSkge1xuICAgICAgICAgICAgbG9nZ2VyLndhcm4oYFtSYXRlTGltaXRlcl0gY291bGQgbm90IHJhdGUgbGltaXQgLSBjb250aW51aW5nLiBFcnJvcjogXCIke2U/Lm1lc3NhZ2V9XCJgLCB7IHRleHQgfSlcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgfVxufVxuIiwgIi8qIENsaWVudC1zaWRlIHNlc3Npb24gcGFyYW1ldGVycy4gVGhlc2UgYXJlIHByaW1hcmlseSB1c2VkIGJ5IHdlYiBhbmFseXRpY3MsXG4gKiB3aGljaCByZWxpZXMgb24gdGhlc2UgZm9yIHNlc3Npb24gYW5hbHl0aWNzIHdpdGhvdXQgdGhlIHBsdWdpbiBzZXJ2ZXIgYmVpbmdcbiAqIGF2YWlsYWJsZSBmb3IgdGhlIHBlcnNvbiBsZXZlbCBzZXQtb25jZSBwcm9wZXJ0aWVzLiBPYnZpb3VzbHkgbm90IGNvbnNpc3RlbnRcbiAqIGJldHdlZW4gY2xpZW50LXNpZGUgZXZlbnRzIGFuZCBzZXJ2ZXItc2lkZSBldmVudHMgYnV0IHRoaXMgaXMgYWNjZXB0YWJsZVxuICogYXMgd2ViIGFuYWx5dGljcyBvbmx5IHVzZXMgY2xpZW50LXNpZGUuXG4gKlxuICogVGhlc2UgaGF2ZSB0aGUgc2FtZSBsaWZlc3BhbiBhcyBhIHNlc3Npb25faWRcbiAqL1xuaW1wb3J0IHsgbG9jYXRpb24gfSBmcm9tICcuL3V0aWxzL2dsb2JhbHMnXG5pbXBvcnQgeyBfaW5mbyB9IGZyb20gJy4vdXRpbHMvZXZlbnQtdXRpbHMnXG5pbXBvcnQgeyBTZXNzaW9uSWRNYW5hZ2VyIH0gZnJvbSAnLi9zZXNzaW9uaWQnXG5pbXBvcnQgeyBQb3N0SG9nUGVyc2lzdGVuY2UgfSBmcm9tICcuL3Bvc3Rob2ctcGVyc2lzdGVuY2UnXG5pbXBvcnQgeyBDTElFTlRfU0VTU0lPTl9QUk9QUyB9IGZyb20gJy4vY29uc3RhbnRzJ1xuXG5pbnRlcmZhY2UgU2Vzc2lvblNvdXJjZVByb3BzIHtcbiAgICBpbml0aWFsUGF0aE5hbWU6IHN0cmluZ1xuICAgIHJlZmVycmluZ0RvbWFpbjogc3RyaW5nIC8vIElzIGFjdHVhbGx5IGhvc3QsIGJ1dCBuYW1lZCBkb21haW4gZm9yIGludGVybmFsIGNvbnNpc3RlbmN5LiBTaG91bGQgY29udGFpbiBhIHBvcnQgaWYgdGhlcmUgaXMgb25lLlxuICAgIHV0bV9tZWRpdW0/OiBzdHJpbmdcbiAgICB1dG1fc291cmNlPzogc3RyaW5nXG4gICAgdXRtX2NhbXBhaWduPzogc3RyaW5nXG4gICAgdXRtX2NvbnRlbnQ/OiBzdHJpbmdcbiAgICB1dG1fdGVybT86IHN0cmluZ1xufVxuXG5pbnRlcmZhY2UgU3RvcmVkU2Vzc2lvblNvdXJjZVByb3BzIHtcbiAgICBzZXNzaW9uSWQ6IHN0cmluZ1xuICAgIHByb3BzOiBTZXNzaW9uU291cmNlUHJvcHNcbn1cblxuY29uc3QgZ2VuZXJhdGVTZXNzaW9uU291cmNlUGFyYW1zID0gKCk6IFNlc3Npb25Tb3VyY2VQcm9wcyA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgaW5pdGlhbFBhdGhOYW1lOiBsb2NhdGlvbj8ucGF0aG5hbWUgfHwgJycsXG4gICAgICAgIHJlZmVycmluZ0RvbWFpbjogX2luZm8ucmVmZXJyaW5nRG9tYWluKCksXG4gICAgICAgIC4uLl9pbmZvLmNhbXBhaWduUGFyYW1zKCksXG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgU2Vzc2lvblByb3BzTWFuYWdlciB7XG4gICAgcHJpdmF0ZSByZWFkb25seSBfc2Vzc2lvbklkTWFuYWdlcjogU2Vzc2lvbklkTWFuYWdlclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX3BlcnNpc3RlbmNlOiBQb3N0SG9nUGVyc2lzdGVuY2VcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9zZXNzaW9uU291cmNlUGFyYW1HZW5lcmF0b3I6ICgpID0+IFNlc3Npb25Tb3VyY2VQcm9wc1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHNlc3Npb25JZE1hbmFnZXI6IFNlc3Npb25JZE1hbmFnZXIsXG4gICAgICAgIHBlcnNpc3RlbmNlOiBQb3N0SG9nUGVyc2lzdGVuY2UsXG4gICAgICAgIHNlc3Npb25Tb3VyY2VQYXJhbUdlbmVyYXRvcj86ICgpID0+IFNlc3Npb25Tb3VyY2VQcm9wc1xuICAgICkge1xuICAgICAgICB0aGlzLl9zZXNzaW9uSWRNYW5hZ2VyID0gc2Vzc2lvbklkTWFuYWdlclxuICAgICAgICB0aGlzLl9wZXJzaXN0ZW5jZSA9IHBlcnNpc3RlbmNlXG4gICAgICAgIHRoaXMuX3Nlc3Npb25Tb3VyY2VQYXJhbUdlbmVyYXRvciA9IHNlc3Npb25Tb3VyY2VQYXJhbUdlbmVyYXRvciB8fCBnZW5lcmF0ZVNlc3Npb25Tb3VyY2VQYXJhbXNcblxuICAgICAgICB0aGlzLl9zZXNzaW9uSWRNYW5hZ2VyLm9uU2Vzc2lvbklkKHRoaXMuX29uU2Vzc2lvbklkQ2FsbGJhY2spXG4gICAgfVxuXG4gICAgX2dldFN0b3JlZFByb3BzKCk6IFN0b3JlZFNlc3Npb25Tb3VyY2VQcm9wcyB8IHVuZGVmaW5lZCB7XG4gICAgICAgIHJldHVybiB0aGlzLl9wZXJzaXN0ZW5jZS5wcm9wc1tDTElFTlRfU0VTU0lPTl9QUk9QU11cbiAgICB9XG5cbiAgICBfb25TZXNzaW9uSWRDYWxsYmFjayA9IChzZXNzaW9uSWQ6IHN0cmluZykgPT4ge1xuICAgICAgICBjb25zdCBzdG9yZWQgPSB0aGlzLl9nZXRTdG9yZWRQcm9wcygpXG4gICAgICAgIGlmIChzdG9yZWQgJiYgc3RvcmVkLnNlc3Npb25JZCA9PT0gc2Vzc2lvbklkKSB7XG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IG5ld1Byb3BzOiBTdG9yZWRTZXNzaW9uU291cmNlUHJvcHMgPSB7XG4gICAgICAgICAgICBzZXNzaW9uSWQsXG4gICAgICAgICAgICBwcm9wczogdGhpcy5fc2Vzc2lvblNvdXJjZVBhcmFtR2VuZXJhdG9yKCksXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fcGVyc2lzdGVuY2UucmVnaXN0ZXIoeyBbQ0xJRU5UX1NFU1NJT05fUFJPUFNdOiBuZXdQcm9wcyB9KVxuICAgIH1cblxuICAgIGdldFNlc3Npb25Qcm9wcygpIHtcbiAgICAgICAgY29uc3QgcCA9IHRoaXMuX2dldFN0b3JlZFByb3BzKCk/LnByb3BzXG4gICAgICAgIGlmICghcCkge1xuICAgICAgICAgICAgcmV0dXJuIHt9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgJGNsaWVudF9zZXNzaW9uX2luaXRpYWxfcmVmZXJyaW5nX2hvc3Q6IHAucmVmZXJyaW5nRG9tYWluLFxuICAgICAgICAgICAgJGNsaWVudF9zZXNzaW9uX2luaXRpYWxfcGF0aG5hbWU6IHAuaW5pdGlhbFBhdGhOYW1lLFxuICAgICAgICAgICAgJGNsaWVudF9zZXNzaW9uX2luaXRpYWxfdXRtX3NvdXJjZTogcC51dG1fc291cmNlLFxuICAgICAgICAgICAgJGNsaWVudF9zZXNzaW9uX2luaXRpYWxfdXRtX2NhbXBhaWduOiBwLnV0bV9jYW1wYWlnbixcbiAgICAgICAgICAgICRjbGllbnRfc2Vzc2lvbl9pbml0aWFsX3V0bV9tZWRpdW06IHAudXRtX21lZGl1bSxcbiAgICAgICAgICAgICRjbGllbnRfc2Vzc2lvbl9pbml0aWFsX3V0bV9jb250ZW50OiBwLnV0bV9jb250ZW50LFxuICAgICAgICAgICAgJGNsaWVudF9zZXNzaW9uX2luaXRpYWxfdXRtX3Rlcm06IHAudXRtX3Rlcm0sXG4gICAgICAgIH1cbiAgICB9XG59XG4iLCAiZXhwb3J0IGNvbnN0IERFRkFVTFRfQkxPQ0tFRF9VQV9TVFJTID0gW1xuICAgICdhaHJlZnNib3QnLFxuICAgICdhaHJlZnNzaXRlYXVkaXQnLFxuICAgICdhcHBsZWJvdCcsXG4gICAgJ2JhaWR1c3BpZGVyJyxcbiAgICAnYmluZ2JvdCcsXG4gICAgJ2JpbmdwcmV2aWV3JyxcbiAgICAnYm90Lmh0bScsXG4gICAgJ2JvdC5waHAnLFxuICAgICdjcmF3bGVyJyxcbiAgICAnZHVja2R1Y2tib3QnLFxuICAgICdmYWNlYm9va2V4dGVybmFsJyxcbiAgICAnZmFjZWJvb2tjYXRhbG9nJyxcbiAgICAnZ3B0Ym90JyxcbiAgICAnaHR0cDovL3lhbmRleC5jb20vYm90cycsXG4gICAgJ2h1YnNwb3QnLFxuICAgICdpYV9hcmNoaXZlcicsXG4gICAgJ2xpbmtlZGluYm90JyxcbiAgICAnbWoxMmJvdCcsXG4gICAgJ21zbmJvdCcsXG4gICAgJ25lc3N1cycsXG4gICAgJ3BldGFsYm90JyxcbiAgICAncGludGVyZXN0JyxcbiAgICAncHJlcmVuZGVyJyxcbiAgICAncm9nZXJib3QnLFxuICAgICdzY3JlYW1pbmcgZnJvZycsXG4gICAgJ3NlbXJ1c2hib3QnLFxuICAgICdzaXRlYnVsYicsXG4gICAgJ3NsdXJwJyxcbiAgICAndHVybml0aW4nLFxuICAgICd0d2l0dGVyYm90JyxcbiAgICAndmVyY2VsYm90JyxcbiAgICAneWFob28hIHNsdXJwJyxcbiAgICAneWFuZGV4Ym90JyxcblxuICAgIC8vIGEgd2hvbGUgYnVuY2ggb2YgZ29vZy1zcGVjaWZpYyBjcmF3bGVyc1xuICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL3NlYXJjaC9kb2NzL2FkdmFuY2VkL2NyYXdsaW5nL292ZXJ2aWV3LWdvb2dsZS1jcmF3bGVyc1xuICAgICdhZHNib3QtZ29vZ2xlJyxcbiAgICAnYXBpcy1nb29nbGUnLFxuICAgICdkdXBsZXh3ZWItZ29vZ2xlJyxcbiAgICAnZmVlZGZldGNoZXItZ29vZ2xlJyxcbiAgICAnZ29vZ2xlIGZhdmljb24nLFxuICAgICdnb29nbGUgd2ViIHByZXZpZXcnLFxuICAgICdnb29nbGUtcmVhZC1hbG91ZCcsXG4gICAgJ2dvb2dsZWJvdCcsXG4gICAgJ2dvb2dsZXdlYmxpZ2h0JyxcbiAgICAnbWVkaWFwYXJ0bmVycy1nb29nbGUnLFxuICAgICdzdG9yZWJvdC1nb29nbGUnLFxuXVxuXG4vKipcbiAqIEJsb2NrIHZhcmlvdXMgd2ViIHNwaWRlcnMgZnJvbSBleGVjdXRpbmcgb3VyIEpTIGFuZCBzZW5kaW5nIGZhbHNlIGNhcHR1cmluZyBkYXRhXG4gKi9cbmV4cG9ydCBjb25zdCBfaXNCbG9ja2VkVUEgPSBmdW5jdGlvbiAodWE6IHN0cmluZywgY3VzdG9tQmxvY2tlZFVzZXJBZ2VudHM6IHN0cmluZ1tdKTogYm9vbGVhbiB7XG4gICAgaWYgKCF1YSkge1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gICAgY29uc3QgdWFMb3dlciA9IHVhLnRvTG93ZXJDYXNlKClcbiAgICByZXR1cm4gREVGQVVMVF9CTE9DS0VEX1VBX1NUUlMuY29uY2F0KGN1c3RvbUJsb2NrZWRVc2VyQWdlbnRzIHx8IFtdKS5zb21lKChibG9ja2VkVUEpID0+IHtcbiAgICAgICAgY29uc3QgYmxvY2tlZFVhTG93ZXIgPSBibG9ja2VkVUEudG9Mb3dlckNhc2UoKVxuICAgICAgICBpZiAodWFMb3dlci5pbmNsdWRlcykge1xuICAgICAgICAgICAgcmV0dXJuIHVhTG93ZXIuaW5jbHVkZXMoYmxvY2tlZFVhTG93ZXIpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBJRSAxMSA6L1xuICAgICAgICAgICAgcmV0dXJuIHVhTG93ZXIuaW5kZXhPZihibG9ja2VkVWFMb3dlcikgIT09IC0xXG4gICAgICAgIH1cbiAgICB9KVxufVxuIiwgImltcG9ydCBDb25maWcgZnJvbSAnLi9jb25maWcnXG5pbXBvcnQge1xuICAgIF9jb3B5QW5kVHJ1bmNhdGVTdHJpbmdzLFxuICAgIF9lYWNoLFxuICAgIF9lYWNoQXJyYXksXG4gICAgX2V4dGVuZCxcbiAgICBfaW5jbHVkZXMsXG4gICAgX3JlZ2lzdGVyX2V2ZW50LFxuICAgIF9zYWZld3JhcF9jbGFzcyxcbiAgICBpc0Nyb3NzRG9tYWluQ29va2llLFxuICAgIGlzRGlzdGluY3RJZFN0cmluZ0xpa2UsXG59IGZyb20gJy4vdXRpbHMnXG5pbXBvcnQgeyB3aW5kb3csIGFzc2lnbmFibGVXaW5kb3cgfSBmcm9tICcuL3V0aWxzL2dsb2JhbHMnXG5pbXBvcnQgeyBhdXRvY2FwdHVyZSB9IGZyb20gJy4vYXV0b2NhcHR1cmUnXG5pbXBvcnQgeyBQb3N0SG9nRmVhdHVyZUZsYWdzIH0gZnJvbSAnLi9wb3N0aG9nLWZlYXR1cmVmbGFncydcbmltcG9ydCB7IFBvc3RIb2dQZXJzaXN0ZW5jZSB9IGZyb20gJy4vcG9zdGhvZy1wZXJzaXN0ZW5jZSdcbmltcG9ydCB7IEFMSUFTX0lEX0tFWSwgRkxBR19DQUxMX1JFUE9SVEVELCBQRU9QTEVfRElTVElOQ1RfSURfS0VZIH0gZnJvbSAnLi9jb25zdGFudHMnXG5pbXBvcnQgeyBTZXNzaW9uUmVjb3JkaW5nIH0gZnJvbSAnLi9leHRlbnNpb25zL3JlcGxheS9zZXNzaW9ucmVjb3JkaW5nJ1xuaW1wb3J0IHsgRGVjaWRlIH0gZnJvbSAnLi9kZWNpZGUnXG5pbXBvcnQgeyBUb29sYmFyIH0gZnJvbSAnLi9leHRlbnNpb25zL3Rvb2xiYXInXG5pbXBvcnQgeyBjbGVhck9wdEluT3V0LCBoYXNPcHRlZEluLCBoYXNPcHRlZE91dCwgb3B0SW4sIG9wdE91dCwgdXNlck9wdGVkT3V0IH0gZnJvbSAnLi9nZHByLXV0aWxzJ1xuaW1wb3J0IHsgY29va2llU3RvcmUsIGxvY2FsU3RvcmUgfSBmcm9tICcuL3N0b3JhZ2UnXG5pbXBvcnQgeyBSZXF1ZXN0UXVldWUgfSBmcm9tICcuL3JlcXVlc3QtcXVldWUnXG5pbXBvcnQgeyBSZXRyeVF1ZXVlIH0gZnJvbSAnLi9yZXRyeS1xdWV1ZSdcbmltcG9ydCB7IFNlc3Npb25JZE1hbmFnZXIgfSBmcm9tICcuL3Nlc3Npb25pZCdcbmltcG9ydCB7IFJlcXVlc3RSb3V0ZXIgfSBmcm9tICcuL3V0aWxzL3JlcXVlc3Qtcm91dGVyJ1xuaW1wb3J0IHtcbiAgICBBdXRvY2FwdHVyZUNvbmZpZyxcbiAgICBDYXB0dXJlT3B0aW9ucyxcbiAgICBDYXB0dXJlUmVzdWx0LFxuICAgIENvbXByZXNzaW9uLFxuICAgIERlY2lkZVJlc3BvbnNlLFxuICAgIEVhcmx5QWNjZXNzRmVhdHVyZUNhbGxiYWNrLFxuICAgIEdEUFJPcHRpb25zLFxuICAgIElzRmVhdHVyZUVuYWJsZWRPcHRpb25zLFxuICAgIEpzb25UeXBlLFxuICAgIE9wdEluT3V0Q2FwdHVyaW5nT3B0aW9ucyxcbiAgICBQb3N0SG9nQ29uZmlnLFxuICAgIFByb3BlcnRpZXMsXG4gICAgUHJvcGVydHksXG4gICAgUXVldWVkUmVxdWVzdE9wdGlvbnMsXG4gICAgUmVxdWVzdENhbGxiYWNrLFxuICAgIFNlc3Npb25JZENoYW5nZWRDYWxsYmFjayxcbiAgICBTbmlwcGV0QXJyYXlJdGVtLFxuICAgIFRvb2xiYXJQYXJhbXMsXG59IGZyb20gJy4vdHlwZXMnXG5pbXBvcnQgeyBTZW50cnlJbnRlZ3JhdGlvbiB9IGZyb20gJy4vZXh0ZW5zaW9ucy9zZW50cnktaW50ZWdyYXRpb24nXG5pbXBvcnQgeyBjcmVhdGVTZWdtZW50SW50ZWdyYXRpb24gfSBmcm9tICcuL2V4dGVuc2lvbnMvc2VnbWVudC1pbnRlZ3JhdGlvbidcbmltcG9ydCB7IFBhZ2VWaWV3TWFuYWdlciB9IGZyb20gJy4vcGFnZS12aWV3J1xuaW1wb3J0IHsgUG9zdEhvZ1N1cnZleXMgfSBmcm9tICcuL3Bvc3Rob2ctc3VydmV5cydcbmltcG9ydCB7IFJhdGVMaW1pdGVyIH0gZnJvbSAnLi9yYXRlLWxpbWl0ZXInXG5pbXBvcnQgeyB1dWlkdjcgfSBmcm9tICcuL3V1aWR2NydcbmltcG9ydCB7IFN1cnZleUNhbGxiYWNrIH0gZnJvbSAnLi9wb3N0aG9nLXN1cnZleXMtdHlwZXMnXG5pbXBvcnQge1xuICAgIF9pc0FycmF5LFxuICAgIF9pc0VtcHR5T2JqZWN0LFxuICAgIF9pc0VtcHR5U3RyaW5nLFxuICAgIF9pc0Z1bmN0aW9uLFxuICAgIF9pc051bWJlcixcbiAgICBfaXNPYmplY3QsXG4gICAgX2lzU3RyaW5nLFxuICAgIF9pc1VuZGVmaW5lZCxcbn0gZnJvbSAnLi91dGlscy90eXBlLXV0aWxzJ1xuaW1wb3J0IHsgX2luZm8gfSBmcm9tICcuL3V0aWxzL2V2ZW50LXV0aWxzJ1xuaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSAnLi91dGlscy9sb2dnZXInXG5pbXBvcnQgeyBkb2N1bWVudCwgdXNlckFnZW50IH0gZnJvbSAnLi91dGlscy9nbG9iYWxzJ1xuaW1wb3J0IHsgU2Vzc2lvblByb3BzTWFuYWdlciB9IGZyb20gJy4vc2Vzc2lvbi1wcm9wcydcbmltcG9ydCB7IF9pc0Jsb2NrZWRVQSB9IGZyb20gJy4vdXRpbHMvYmxvY2tlZC11YXMnXG5pbXBvcnQgeyBleHRlbmRVUkxQYXJhbXMsIHJlcXVlc3QsIFNVUFBPUlRTX1JFUVVFU1QgfSBmcm9tICcuL3JlcXVlc3QnXG5cbi8qXG5TSU1QTEUgU1RZTEUgR1VJREU6XG5cbnRoaXMueCA9PT0gcHVibGljIGZ1bmN0aW9uXG50aGlzLl94ID09PSBpbnRlcm5hbCAtIG9ubHkgdXNlIHdpdGhpbiB0aGlzIGZpbGVcbnRoaXMuX194ID09PSBwcml2YXRlIC0gb25seSB1c2Ugd2l0aGluIHRoZSBjbGFzc1xuXG5HbG9iYWxzIHNob3VsZCBiZSBhbGwgY2Fwc1xuKi9cblxuY29uc3QgaW5zdGFuY2VzOiBSZWNvcmQ8c3RyaW5nLCBQb3N0SG9nPiA9IHt9XG5cbi8vIHNvbWUgZ2xvYmFscyBmb3IgY29tcGFyaXNvbnNcbmNvbnN0IF9fTk9PUCA9ICgpID0+IHt9XG5cbmNvbnN0IFBSSU1BUllfSU5TVEFOQ0VfTkFNRSA9ICdwb3N0aG9nJ1xuXG4vKlxuICogRHluYW1pYy4uLiBjb25zdGFudHM/IElzIHRoYXQgYW4gb3h5bW9yb24/XG4gKi9cbi8vIGh0dHA6Ly9oYWNrcy5tb3ppbGxhLm9yZy8yMDA5LzA3L2Nyb3NzLXNpdGUteG1saHR0cHJlcXVlc3Qtd2l0aC1jb3JzL1xuLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9ET00vWE1MSHR0cFJlcXVlc3Qjd2l0aENyZWRlbnRpYWxzXG5cbi8vIElFPDEwIGRvZXMgbm90IHN1cHBvcnQgY3Jvc3Mtb3JpZ2luIFhIUidzIGJ1dCBzY3JpcHQgdGFnc1xuLy8gd2l0aCBkZWZlciB3b24ndCBibG9jayB3aW5kb3cub25sb2FkOyBFTlFVRVVFX1JFUVVFU1RTXG4vLyBzaG91bGQgb25seSBiZSB0cnVlIGZvciBPcGVyYTwxMlxubGV0IEVOUVVFVUVfUkVRVUVTVFMgPSAhU1VQUE9SVFNfUkVRVUVTVCAmJiB1c2VyQWdlbnQ/LmluZGV4T2YoJ01TSUUnKSA9PT0gLTEgJiYgdXNlckFnZW50Py5pbmRleE9mKCdNb3ppbGxhJykgPT09IC0xXG5cbmV4cG9ydCBjb25zdCBkZWZhdWx0Q29uZmlnID0gKCk6IFBvc3RIb2dDb25maWcgPT4gKHtcbiAgICBhcGlfaG9zdDogJ2h0dHBzOi8vYXBwLnBvc3Rob2cuY29tJyxcbiAgICBhcGlfdHJhbnNwb3J0OiAnWEhSJyxcbiAgICB1aV9ob3N0OiBudWxsLFxuICAgIHRva2VuOiAnJyxcbiAgICBhdXRvY2FwdHVyZTogdHJ1ZSxcbiAgICByYWdlY2xpY2s6IHRydWUsXG4gICAgY3Jvc3Nfc3ViZG9tYWluX2Nvb2tpZTogaXNDcm9zc0RvbWFpbkNvb2tpZShkb2N1bWVudD8ubG9jYXRpb24pLFxuICAgIHBlcnNpc3RlbmNlOiAnbG9jYWxTdG9yYWdlK2Nvb2tpZScsIC8vIHVwIHRvIDEuOTIuMCB0aGlzIHdhcyAnY29va2llJy4gSXQncyBlYXN5IHRvIG1pZ3JhdGUgYXMgJ2xvY2FsU3RvcmFnZStjb29raWUnIHdpbGwgbWlncmF0ZSBkYXRhIGZyb20gY29va2llIHN0b3JhZ2VcbiAgICBwZXJzaXN0ZW5jZV9uYW1lOiAnJyxcbiAgICBjb29raWVfbmFtZTogJycsXG4gICAgbG9hZGVkOiBfX05PT1AsXG4gICAgc3RvcmVfZ29vZ2xlOiB0cnVlLFxuICAgIGN1c3RvbV9jYW1wYWlnbl9wYXJhbXM6IFtdLFxuICAgIGN1c3RvbV9ibG9ja2VkX3VzZXJhZ2VudHM6IFtdLFxuICAgIHNhdmVfcmVmZXJyZXI6IHRydWUsXG4gICAgY2FwdHVyZV9wYWdldmlldzogdHJ1ZSxcbiAgICBjYXB0dXJlX3BhZ2VsZWF2ZTogdHJ1ZSwgLy8gV2UnbGwgb25seSBjYXB0dXJlIHBhZ2VsZWF2ZSBldmVudHMgaWYgY2FwdHVyZV9wYWdldmlldyBpcyBhbHNvIHRydWVcbiAgICBkZWJ1ZzogZmFsc2UsXG4gICAgdmVyYm9zZTogZmFsc2UsXG4gICAgY29va2llX2V4cGlyYXRpb246IDM2NSxcbiAgICB1cGdyYWRlOiBmYWxzZSxcbiAgICBkaXNhYmxlX3Nlc3Npb25fcmVjb3JkaW5nOiBmYWxzZSxcbiAgICBkaXNhYmxlX3BlcnNpc3RlbmNlOiBmYWxzZSxcbiAgICBkaXNhYmxlX2Nvb2tpZTogZmFsc2UsXG4gICAgZW5hYmxlX3JlY29yZGluZ19jb25zb2xlX2xvZzogdW5kZWZpbmVkLCAvLyBXaGVuIHVuZGVmaW5lZCwgaXQgZmFsbHMgYmFjayB0byB0aGUgc2VydmVyLXNpZGUgc2V0dGluZ1xuICAgIHNlY3VyZV9jb29raWU6IHdpbmRvdz8ubG9jYXRpb24/LnByb3RvY29sID09PSAnaHR0cHM6JyxcbiAgICBpcDogdHJ1ZSxcbiAgICBvcHRfb3V0X2NhcHR1cmluZ19ieV9kZWZhdWx0OiBmYWxzZSxcbiAgICBvcHRfb3V0X3BlcnNpc3RlbmNlX2J5X2RlZmF1bHQ6IGZhbHNlLFxuICAgIG9wdF9vdXRfdXNlcmFnZW50X2ZpbHRlcjogZmFsc2UsXG4gICAgb3B0X291dF9jYXB0dXJpbmdfcGVyc2lzdGVuY2VfdHlwZTogJ2xvY2FsU3RvcmFnZScsXG4gICAgb3B0X291dF9jYXB0dXJpbmdfY29va2llX3ByZWZpeDogbnVsbCxcbiAgICBvcHRfaW5fc2l0ZV9hcHBzOiBmYWxzZSxcbiAgICAvLyBEZXByZWNhdGVkLCB1c2UgcHJvcGVydHlfZGVueWxpc3QgaW5zdGVhZC5cbiAgICBwcm9wZXJ0eV9ibGFja2xpc3Q6IFtdLFxuICAgIHByb3BlcnR5X2RlbnlsaXN0OiBbXSxcbiAgICByZXNwZWN0X2RudDogZmFsc2UsXG4gICAgc2FuaXRpemVfcHJvcGVydGllczogbnVsbCxcbiAgICByZXF1ZXN0X2hlYWRlcnM6IHt9LCAvLyB7IGhlYWRlcjogdmFsdWUsIGhlYWRlcjI6IHZhbHVlIH1cbiAgICBpbmFwcF9wcm90b2NvbDogJy8vJyxcbiAgICBpbmFwcF9saW5rX25ld193aW5kb3c6IGZhbHNlLFxuICAgIHJlcXVlc3RfYmF0Y2hpbmc6IHRydWUsXG4gICAgcHJvcGVydGllc19zdHJpbmdfbWF4X2xlbmd0aDogNjU1MzUsXG4gICAgc2Vzc2lvbl9yZWNvcmRpbmc6IHt9LFxuICAgIG1hc2tfYWxsX2VsZW1lbnRfYXR0cmlidXRlczogZmFsc2UsXG4gICAgbWFza19hbGxfdGV4dDogZmFsc2UsXG4gICAgYWR2YW5jZWRfZGlzYWJsZV9kZWNpZGU6IGZhbHNlLFxuICAgIGFkdmFuY2VkX2Rpc2FibGVfZmVhdHVyZV9mbGFnczogZmFsc2UsXG4gICAgYWR2YW5jZWRfZGlzYWJsZV9mZWF0dXJlX2ZsYWdzX29uX2ZpcnN0X2xvYWQ6IGZhbHNlLFxuICAgIGFkdmFuY2VkX2Rpc2FibGVfdG9vbGJhcl9tZXRyaWNzOiBmYWxzZSxcbiAgICBmZWF0dXJlX2ZsYWdfcmVxdWVzdF90aW1lb3V0X21zOiAzMDAwLFxuICAgIG9uX3JlcXVlc3RfZXJyb3I6IChyZXMpID0+IHtcbiAgICAgICAgY29uc3QgZXJyb3IgPSAnQmFkIEhUVFAgc3RhdHVzOiAnICsgcmVzLnN0YXR1c0NvZGUgKyAnICcgKyByZXMudGV4dFxuICAgICAgICBsb2dnZXIuZXJyb3IoZXJyb3IpXG4gICAgfSxcbiAgICBnZXRfZGV2aWNlX2lkOiAodXVpZCkgPT4gdXVpZCxcbiAgICAvLyBVc2VkIGZvciBpbnRlcm5hbCB0ZXN0aW5nXG4gICAgX29uQ2FwdHVyZTogX19OT09QLFxuICAgIGNhcHR1cmVfcGVyZm9ybWFuY2U6IHVuZGVmaW5lZCxcbiAgICBuYW1lOiAncG9zdGhvZycsXG4gICAgYm9vdHN0cmFwOiB7fSxcbiAgICBkaXNhYmxlX2NvbXByZXNzaW9uOiBmYWxzZSxcbiAgICBzZXNzaW9uX2lkbGVfdGltZW91dF9zZWNvbmRzOiAzMCAqIDYwLCAvLyAzMCBtaW51dGVzXG59KVxuXG5jbGFzcyBEZXByZWNhdGVkV2ViUGVyZm9ybWFuY2VPYnNlcnZlciB7XG4gICAgZ2V0IF9mb3JjZUFsbG93TG9jYWxob3N0KCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fX2ZvcmNlQWxsb3dMb2NhbGhvc3RcbiAgICB9XG4gICAgc2V0IF9mb3JjZUFsbG93TG9jYWxob3N0KHZhbHVlOiBib29sZWFuKSB7XG4gICAgICAgIGxvZ2dlci5lcnJvcihcbiAgICAgICAgICAgICdXZWJQZXJmb3JtYW5jZU9ic2VydmVyIGlzIGRlcHJlY2F0ZWQgYW5kIGhhcyBubyBpbXBhY3Qgb24gbmV0d29yayBjYXB0dXJlLiBVc2UgYF9mb3JjZUFsbG93TG9jYWxob3N0TmV0d29ya0NhcHR1cmVgIG9uIGBwb3N0aG9nLnNlc3Npb25SZWNvcmRpbmdgJ1xuICAgICAgICApXG4gICAgICAgIHRoaXMuX19mb3JjZUFsbG93TG9jYWxob3N0ID0gdmFsdWVcbiAgICB9XG4gICAgcHJpdmF0ZSBfX2ZvcmNlQWxsb3dMb2NhbGhvc3Q6IGJvb2xlYW4gPSBmYWxzZVxufVxuXG4vKipcbiAqIFBvc3RIb2cgTGlicmFyeSBPYmplY3RcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5leHBvcnQgY2xhc3MgUG9zdEhvZyB7XG4gICAgX19sb2FkZWQ6IGJvb2xlYW5cbiAgICBfX2xvYWRlZF9yZWNvcmRlcl92ZXJzaW9uOiAndjEnIHwgJ3YyJyB8IHVuZGVmaW5lZCAvLyBmbGFnIHRoYXQga2VlcHMgdHJhY2sgb2Ygd2hpY2ggdmVyc2lvbiBvZiByZWNvcmRlciBpcyBsb2FkZWRcbiAgICBjb25maWc6IFBvc3RIb2dDb25maWdcblxuICAgIHJhdGVMaW1pdGVyOiBSYXRlTGltaXRlclxuICAgIHBhZ2VWaWV3TWFuYWdlcjogUGFnZVZpZXdNYW5hZ2VyXG4gICAgZmVhdHVyZUZsYWdzOiBQb3N0SG9nRmVhdHVyZUZsYWdzXG4gICAgc3VydmV5czogUG9zdEhvZ1N1cnZleXNcbiAgICB0b29sYmFyOiBUb29sYmFyXG5cbiAgICAvLyBUaGVzZSBhcmUgaW5zdGFuY2Utc3BlY2lmaWMgc3RhdGUgY3JlYXRlZCBhZnRlciBpbml0aWFsaXNhdGlvblxuICAgIHBlcnNpc3RlbmNlPzogUG9zdEhvZ1BlcnNpc3RlbmNlXG4gICAgc2Vzc2lvblBlcnNpc3RlbmNlPzogUG9zdEhvZ1BlcnNpc3RlbmNlXG4gICAgc2Vzc2lvbk1hbmFnZXI/OiBTZXNzaW9uSWRNYW5hZ2VyXG4gICAgc2Vzc2lvblByb3BzTWFuYWdlcj86IFNlc3Npb25Qcm9wc01hbmFnZXJcbiAgICByZXF1ZXN0Um91dGVyOiBSZXF1ZXN0Um91dGVyXG5cbiAgICBfcmVxdWVzdFF1ZXVlPzogUmVxdWVzdFF1ZXVlXG4gICAgX3JldHJ5UXVldWU/OiBSZXRyeVF1ZXVlXG4gICAgc2Vzc2lvblJlY29yZGluZz86IFNlc3Npb25SZWNvcmRpbmdcbiAgICB3ZWJQZXJmb3JtYW5jZSA9IG5ldyBEZXByZWNhdGVkV2ViUGVyZm9ybWFuY2VPYnNlcnZlcigpXG5cbiAgICBfdHJpZ2dlcmVkX25vdGlmczogYW55XG4gICAgY29tcHJlc3Npb24/OiBDb21wcmVzc2lvbiA9IENvbXByZXNzaW9uLkJhc2U2NCAvLyBVcGdyYWRlcyB0byBnemlwIGlmIGRlY2lkZSByZXNwb25zZSBzdXBwb3J0cyBpdFxuICAgIF9fY2FwdHVyZUhvb2tzOiAoKGV2ZW50TmFtZTogc3RyaW5nKSA9PiB2b2lkKVtdXG4gICAgX19yZXF1ZXN0X3F1ZXVlOiBRdWV1ZWRSZXF1ZXN0T3B0aW9uc1tdXG4gICAgX19hdXRvY2FwdHVyZTogYm9vbGVhbiB8IEF1dG9jYXB0dXJlQ29uZmlnIHwgdW5kZWZpbmVkXG4gICAgZGVjaWRlRW5kcG9pbnRXYXNIaXQ6IGJvb2xlYW5cbiAgICBhbmFseXRpY3NEZWZhdWx0RW5kcG9pbnQ6IHN0cmluZ1xuICAgIGVsZW1lbnRzQ2hhaW5Bc1N0cmluZzogYm9vbGVhblxuXG4gICAgU2VudHJ5SW50ZWdyYXRpb246IHR5cGVvZiBTZW50cnlJbnRlZ3JhdGlvblxuICAgIHNlZ21lbnRJbnRlZ3JhdGlvbjogKCkgPT4gYW55XG5cbiAgICAvKiogREVQUkVDQVRFRDogV2Uga2VlcCB0aGlzIHRvIHN1cHBvcnQgZXhpc3RpbmcgdXNhZ2UgYnV0IG5vdyBvbmUgc2hvdWxkIGp1c3QgY2FsbCAuc2V0UGVyc29uUHJvcGVydGllcyAqL1xuICAgIHBlb3BsZToge1xuICAgICAgICBzZXQ6IChwcm9wOiBzdHJpbmcgfCBQcm9wZXJ0aWVzLCB0bz86IHN0cmluZywgY2FsbGJhY2s/OiBSZXF1ZXN0Q2FsbGJhY2spID0+IHZvaWRcbiAgICAgICAgc2V0X29uY2U6IChwcm9wOiBzdHJpbmcgfCBQcm9wZXJ0aWVzLCB0bz86IHN0cmluZywgY2FsbGJhY2s/OiBSZXF1ZXN0Q2FsbGJhY2spID0+IHZvaWRcbiAgICB9XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5jb25maWcgPSBkZWZhdWx0Q29uZmlnKClcbiAgICAgICAgdGhpcy5kZWNpZGVFbmRwb2ludFdhc0hpdCA9IGZhbHNlXG4gICAgICAgIHRoaXMuU2VudHJ5SW50ZWdyYXRpb24gPSBTZW50cnlJbnRlZ3JhdGlvblxuICAgICAgICB0aGlzLnNlZ21lbnRJbnRlZ3JhdGlvbiA9ICgpID0+IGNyZWF0ZVNlZ21lbnRJbnRlZ3JhdGlvbih0aGlzKVxuICAgICAgICB0aGlzLl9fY2FwdHVyZUhvb2tzID0gW11cbiAgICAgICAgdGhpcy5fX3JlcXVlc3RfcXVldWUgPSBbXVxuICAgICAgICB0aGlzLl9fbG9hZGVkID0gZmFsc2VcbiAgICAgICAgdGhpcy5fX2xvYWRlZF9yZWNvcmRlcl92ZXJzaW9uID0gdW5kZWZpbmVkXG4gICAgICAgIHRoaXMuX19hdXRvY2FwdHVyZSA9IHVuZGVmaW5lZFxuICAgICAgICB0aGlzLmFuYWx5dGljc0RlZmF1bHRFbmRwb2ludCA9ICcvZS8nXG4gICAgICAgIHRoaXMuZWxlbWVudHNDaGFpbkFzU3RyaW5nID0gZmFsc2VcblxuICAgICAgICB0aGlzLmZlYXR1cmVGbGFncyA9IG5ldyBQb3N0SG9nRmVhdHVyZUZsYWdzKHRoaXMpXG4gICAgICAgIHRoaXMudG9vbGJhciA9IG5ldyBUb29sYmFyKHRoaXMpXG4gICAgICAgIHRoaXMucGFnZVZpZXdNYW5hZ2VyID0gbmV3IFBhZ2VWaWV3TWFuYWdlcih0aGlzKVxuICAgICAgICB0aGlzLnN1cnZleXMgPSBuZXcgUG9zdEhvZ1N1cnZleXModGhpcylcbiAgICAgICAgdGhpcy5yYXRlTGltaXRlciA9IG5ldyBSYXRlTGltaXRlcigpXG4gICAgICAgIHRoaXMucmVxdWVzdFJvdXRlciA9IG5ldyBSZXF1ZXN0Um91dGVyKHRoaXMpXG5cbiAgICAgICAgLy8gTk9URTogU2VlIHRoZSBwcm9wZXJ0eSBkZWZpbml0aW9uIGZvciBkZXByZWNhdGlvbiBub3RpY2VcbiAgICAgICAgdGhpcy5wZW9wbGUgPSB7XG4gICAgICAgICAgICBzZXQ6IChwcm9wOiBzdHJpbmcgfCBQcm9wZXJ0aWVzLCB0bz86IHN0cmluZywgY2FsbGJhY2s/OiBSZXF1ZXN0Q2FsbGJhY2spID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzZXRQcm9wcyA9IF9pc1N0cmluZyhwcm9wKSA/IHsgW3Byb3BdOiB0byB9IDogcHJvcFxuICAgICAgICAgICAgICAgIHRoaXMuc2V0UGVyc29uUHJvcGVydGllcyhzZXRQcm9wcylcbiAgICAgICAgICAgICAgICBjYWxsYmFjaz8uKHt9IGFzIGFueSlcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXRfb25jZTogKHByb3A6IHN0cmluZyB8IFByb3BlcnRpZXMsIHRvPzogc3RyaW5nLCBjYWxsYmFjaz86IFJlcXVlc3RDYWxsYmFjaykgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNldFByb3BzID0gX2lzU3RyaW5nKHByb3ApID8geyBbcHJvcF06IHRvIH0gOiBwcm9wXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRQZXJzb25Qcm9wZXJ0aWVzKHVuZGVmaW5lZCwgc2V0UHJvcHMpXG4gICAgICAgICAgICAgICAgY2FsbGJhY2s/Lih7fSBhcyBhbnkpXG4gICAgICAgICAgICB9LFxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gSW5pdGlhbGl6YXRpb24gbWV0aG9kc1xuXG4gICAgLyoqXG4gICAgICogVGhpcyBmdW5jdGlvbiBpbml0aWFsaXplcyBhIG5ldyBpbnN0YW5jZSBvZiB0aGUgUG9zdEhvZyBjYXB0dXJpbmcgb2JqZWN0LlxuICAgICAqIEFsbCBuZXcgaW5zdGFuY2VzIGFyZSBhZGRlZCB0byB0aGUgbWFpbiBwb3N0aG9nIG9iamVjdCBhcyBzdWIgcHJvcGVydGllcyAoc3VjaCBhc1xuICAgICAqIHBvc3Rob2cubGlicmFyeV9uYW1lKSBhbmQgYWxzbyByZXR1cm5lZCBieSB0aGlzIGZ1bmN0aW9uLiBUbyBkZWZpbmUgYVxuICAgICAqIHNlY29uZCBpbnN0YW5jZSBvbiB0aGUgcGFnZSwgeW91IHdvdWxkIGNhbGw6XG4gICAgICpcbiAgICAgKiAgICAgcG9zdGhvZy5pbml0KCduZXcgdG9rZW4nLCB7IHlvdXI6ICdjb25maWcnIH0sICdsaWJyYXJ5X25hbWUnKTtcbiAgICAgKlxuICAgICAqIGFuZCB1c2UgaXQgbGlrZSBzbzpcbiAgICAgKlxuICAgICAqICAgICBwb3N0aG9nLmxpYnJhcnlfbmFtZS5jYXB0dXJlKC4uLik7XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdG9rZW4gICBZb3VyIFBvc3RIb2cgQVBJIHRva2VuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtjb25maWddICBBIGRpY3Rpb25hcnkgb2YgY29uZmlnIG9wdGlvbnMgdG8gb3ZlcnJpZGUuIDxhIGhyZWY9XCJodHRwczovL2dpdGh1Yi5jb20vcG9zdGhvZy9wb3N0aG9nLWpzL2Jsb2IvNmUwZTg3My9zcmMvcG9zdGhvZy1jb3JlLmpzI0w1Ny1MOTFcIj5TZWUgYSBsaXN0IG9mIGRlZmF1bHQgY29uZmlnIG9wdGlvbnM8L2E+LlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBbbmFtZV0gICAgVGhlIG5hbWUgZm9yIHRoZSBuZXcgcG9zdGhvZyBpbnN0YW5jZSB0aGF0IHlvdSB3YW50IGNyZWF0ZWRcbiAgICAgKi9cbiAgICBpbml0KHRva2VuOiBzdHJpbmcsIGNvbmZpZz86IFBhcnRpYWw8UG9zdEhvZ0NvbmZpZz4sIG5hbWU/OiBzdHJpbmcpOiBQb3N0SG9nIHwgdm9pZCB7XG4gICAgICAgIGlmICghbmFtZSB8fCBuYW1lID09PSBQUklNQVJZX0lOU1RBTkNFX05BTUUpIHtcbiAgICAgICAgICAgIC8vIFRoaXMgbWVhbnMgd2UgYXJlIGluaXRpYWxpc2luZyB0aGUgcHJpbWFyeSBpbnN0YW5jZSAoaS5lLiB0aGlzKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2luaXQodG9rZW4sIGNvbmZpZywgbmFtZSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IG5hbWVkUG9zdGhvZyA9IGluc3RhbmNlc1tuYW1lXSA/PyBuZXcgUG9zdEhvZygpXG4gICAgICAgICAgICBuYW1lZFBvc3Rob2cuX2luaXQodG9rZW4sIGNvbmZpZywgbmFtZSlcbiAgICAgICAgICAgIGluc3RhbmNlc1tuYW1lXSA9IG5hbWVkUG9zdGhvZ1xuICAgICAgICAgICAgLy8gQWRkIGFzIGEgcHJvcGVydHkgdG8gdGhlIHByaW1hcnkgaW5zdGFuY2UgKHRoaXMgaXNuJ3QgdHlwZS1zYWZlIGJ1dCBpdHMgaG93IGl0IHdhcyBhbHdheXMgZG9uZSlcbiAgICAgICAgICAgIDsoaW5zdGFuY2VzW1BSSU1BUllfSU5TVEFOQ0VfTkFNRV0gYXMgYW55KVtuYW1lXSA9IG5hbWVkUG9zdGhvZ1xuXG4gICAgICAgICAgICByZXR1cm4gbmFtZWRQb3N0aG9nXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBwb3N0aG9nLl9pbml0KHRva2VuOnN0cmluZywgY29uZmlnOm9iamVjdCwgbmFtZTpzdHJpbmcpXG4gICAgLy9cbiAgICAvLyBUaGlzIGZ1bmN0aW9uIHNldHMgdXAgdGhlIGN1cnJlbnQgaW5zdGFuY2Ugb2YgdGhlIHBvc3Rob2dcbiAgICAvLyBsaWJyYXJ5LiAgVGhlIGRpZmZlcmVuY2UgYmV0d2VlbiB0aGlzIG1ldGhvZCBhbmQgdGhlIGluaXQoLi4uKVxuICAgIC8vIG1ldGhvZCBpcyB0aGlzIG9uZSBpbml0aWFsaXplcyB0aGUgYWN0dWFsIGluc3RhbmNlLCB3aGVyZWFzIHRoZVxuICAgIC8vIGluaXQoLi4uKSBtZXRob2Qgc2V0cyB1cCBhIG5ldyBsaWJyYXJ5IGFuZCBjYWxscyBfaW5pdCBvbiBpdC5cbiAgICAvL1xuICAgIC8vIE5vdGUgdGhhdCB0aGVyZSBhcmUgb3BlcmF0aW9ucyB0aGF0IGNhbiBiZSBhc3luY2hyb25vdXMsIHNvIHdlXG4gICAgLy8gYWNjZXB0IGEgY2FsbGJhY2sgdGhhdCBpcyBjYWxsZWQgd2hlbiBhbGwgdGhlIGFzeW5jaHJvbm91cyB3b3JrXG4gICAgLy8gaXMgZG9uZS4gTm90ZSB0aGF0IHdlIGRvIG5vdCB1c2UgcHJvbWlzZXMgYmVjYXVzZSB3ZSB3YW50IHRvIGJlXG4gICAgLy8gSUUxMSBjb21wYXRpYmxlLiBXZSBjb3VsZCB1c2UgcG9seWZpbGxzLCB3aGljaCB3b3VsZCBtYWtlIHRoZVxuICAgIC8vIGNvZGUgYSBiaXQgY2xlYW5lciwgYnV0IHdpbGwgYWRkIHNvbWUgb3ZlcmhlYWQuXG4gICAgLy9cbiAgICBfaW5pdCh0b2tlbjogc3RyaW5nLCBjb25maWc6IFBhcnRpYWw8UG9zdEhvZ0NvbmZpZz4gPSB7fSwgbmFtZT86IHN0cmluZyk6IFBvc3RIb2cgfCB2b2lkIHtcbiAgICAgICAgaWYgKF9pc1VuZGVmaW5lZCh0b2tlbikgfHwgX2lzRW1wdHlTdHJpbmcodG9rZW4pKSB7XG4gICAgICAgICAgICBsb2dnZXIuY3JpdGljYWwoXG4gICAgICAgICAgICAgICAgJ1Bvc3RIb2cgd2FzIGluaXRpYWxpemVkIHdpdGhvdXQgYSB0b2tlbi4gVGhpcyBsaWtlbHkgaW5kaWNhdGVzIGEgbWlzY29uZmlndXJhdGlvbi4gUGxlYXNlIGNoZWNrIHRoZSBmaXJzdCBhcmd1bWVudCBwYXNzZWQgdG8gcG9zdGhvZy5pbml0KCknXG4gICAgICAgICAgICApXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLl9fbG9hZGVkKSB7XG4gICAgICAgICAgICBsb2dnZXIud2FybignWW91IGhhdmUgYWxyZWFkeSBpbml0aWFsaXplZCBQb3N0SG9nISBSZS1pbml0aWFsaXNpbmcgaXMgYSBuby1vcCcpXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX19sb2FkZWQgPSB0cnVlXG4gICAgICAgIHRoaXMuY29uZmlnID0ge30gYXMgUG9zdEhvZ0NvbmZpZyAvLyB3aWxsIGJlIHNldCByaWdodCBiZWxvd1xuICAgICAgICB0aGlzLl90cmlnZ2VyZWRfbm90aWZzID0gW11cblxuICAgICAgICBjb25maWcucmVxdWVzdF9oZWFkZXJzID0gY29uZmlnLnJlcXVlc3RfaGVhZGVycyB8fCBjb25maWcueGhyX2hlYWRlcnNcblxuICAgICAgICB0aGlzLnNldF9jb25maWcoXG4gICAgICAgICAgICBfZXh0ZW5kKHt9LCBkZWZhdWx0Q29uZmlnKCksIGNvbmZpZywge1xuICAgICAgICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgICAgICAgdG9rZW46IHRva2VuLFxuICAgICAgICAgICAgfSlcbiAgICAgICAgKVxuXG4gICAgICAgIC8vIENoZWNrIGlmIHJlY29yZGVyLmpzIGlzIGFscmVhZHkgbG9hZGVkXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvYmFuLXRzLWNvbW1lbnRcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICBpZiAod2luZG93Py5ycndlYj8ucmVjb3JkIHx8IHdpbmRvdz8ucnJ3ZWJSZWNvcmQpIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvYmFuLXRzLWNvbW1lbnRcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgIHRoaXMuX19sb2FkZWRfcmVjb3JkZXJfdmVyc2lvbiA9IHdpbmRvdz8ucnJ3ZWI/LnZlcnNpb25cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucGVyc2lzdGVuY2UgPSBuZXcgUG9zdEhvZ1BlcnNpc3RlbmNlKHRoaXMuY29uZmlnKVxuICAgICAgICB0aGlzLnNlc3Npb25QZXJzaXN0ZW5jZSA9XG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5wZXJzaXN0ZW5jZSA9PT0gJ3Nlc3Npb25TdG9yYWdlJ1xuICAgICAgICAgICAgICAgID8gdGhpcy5wZXJzaXN0ZW5jZVxuICAgICAgICAgICAgICAgIDogbmV3IFBvc3RIb2dQZXJzaXN0ZW5jZSh7IC4uLnRoaXMuY29uZmlnLCBwZXJzaXN0ZW5jZTogJ3Nlc3Npb25TdG9yYWdlJyB9KVxuXG4gICAgICAgIHRoaXMuX3JlcXVlc3RRdWV1ZSA9IG5ldyBSZXF1ZXN0UXVldWUoKHJlcSkgPT4gdGhpcy5fc2VuZF9yZXF1ZXN0KHJlcSkpXG4gICAgICAgIHRoaXMuX3JldHJ5UXVldWUgPSBuZXcgUmV0cnlRdWV1ZSh0aGlzKVxuICAgICAgICB0aGlzLl9fY2FwdHVyZUhvb2tzID0gW11cbiAgICAgICAgdGhpcy5fX3JlcXVlc3RfcXVldWUgPSBbXVxuXG4gICAgICAgIHRoaXMuc2Vzc2lvbk1hbmFnZXIgPSBuZXcgU2Vzc2lvbklkTWFuYWdlcih0aGlzLmNvbmZpZywgdGhpcy5wZXJzaXN0ZW5jZSlcbiAgICAgICAgdGhpcy5zZXNzaW9uUHJvcHNNYW5hZ2VyID0gbmV3IFNlc3Npb25Qcm9wc01hbmFnZXIodGhpcy5zZXNzaW9uTWFuYWdlciwgdGhpcy5wZXJzaXN0ZW5jZSlcblxuICAgICAgICB0aGlzLnNlc3Npb25SZWNvcmRpbmcgPSBuZXcgU2Vzc2lvblJlY29yZGluZyh0aGlzKVxuICAgICAgICB0aGlzLnNlc3Npb25SZWNvcmRpbmcuc3RhcnRSZWNvcmRpbmdJZkVuYWJsZWQoKVxuXG4gICAgICAgIGlmICghdGhpcy5jb25maWcuZGlzYWJsZV9zY3JvbGxfcHJvcGVydGllcykge1xuICAgICAgICAgICAgdGhpcy5wYWdlVmlld01hbmFnZXIuc3RhcnRNZWFzdXJpbmdTY3JvbGxQb3NpdGlvbigpXG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9fYXV0b2NhcHR1cmUgPSB0aGlzLmNvbmZpZy5hdXRvY2FwdHVyZVxuICAgICAgICBhdXRvY2FwdHVyZS5fc2V0SXNBdXRvY2FwdHVyZUVuYWJsZWQodGhpcylcbiAgICAgICAgaWYgKGF1dG9jYXB0dXJlLl9pc0F1dG9jYXB0dXJlRW5hYmxlZCkge1xuICAgICAgICAgICAgdGhpcy5fX2F1dG9jYXB0dXJlID0gdGhpcy5jb25maWcuYXV0b2NhcHR1cmVcbiAgICAgICAgICAgIGNvbnN0IG51bV9idWNrZXRzID0gMTAwXG4gICAgICAgICAgICBjb25zdCBudW1fZW5hYmxlZF9idWNrZXRzID0gMTAwXG4gICAgICAgICAgICBpZiAoIWF1dG9jYXB0dXJlLmVuYWJsZWRGb3JQcm9qZWN0KHRoaXMuY29uZmlnLnRva2VuLCBudW1fYnVja2V0cywgbnVtX2VuYWJsZWRfYnVja2V0cykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9fYXV0b2NhcHR1cmUgPSBmYWxzZVxuICAgICAgICAgICAgICAgIGxvZ2dlci5pbmZvKCdOb3QgaW4gYWN0aXZlIGJ1Y2tldDogZGlzYWJsaW5nIEF1dG9tYXRpYyBFdmVudCBDb2xsZWN0aW9uLicpXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCFhdXRvY2FwdHVyZS5pc0Jyb3dzZXJTdXBwb3J0ZWQoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX19hdXRvY2FwdHVyZSA9IGZhbHNlXG4gICAgICAgICAgICAgICAgbG9nZ2VyLmluZm8oJ0Rpc2FibGluZyBBdXRvbWF0aWMgRXZlbnQgQ29sbGVjdGlvbiBiZWNhdXNlIHRoaXMgYnJvd3NlciBpcyBub3Qgc3VwcG9ydGVkJylcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgYXV0b2NhcHR1cmUuaW5pdCh0aGlzKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gaWYgYW55IGluc3RhbmNlIG9uIHRoZSBwYWdlIGhhcyBkZWJ1ZyA9IHRydWUsIHdlIHNldCB0aGVcbiAgICAgICAgLy8gZ2xvYmFsIGRlYnVnIHRvIGJlIHRydWVcbiAgICAgICAgQ29uZmlnLkRFQlVHID0gQ29uZmlnLkRFQlVHIHx8IHRoaXMuY29uZmlnLmRlYnVnXG5cbiAgICAgICAgdGhpcy5fZ2Rwcl9pbml0KClcblxuICAgICAgICBpZiAoY29uZmlnLnNlZ21lbnQpIHtcbiAgICAgICAgICAgIC8vIFVzZSBzZWdtZW50cyBhbm9ueW1vdXNJZCBpbnN0ZWFkXG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5nZXRfZGV2aWNlX2lkID0gKCkgPT4gY29uZmlnLnNlZ21lbnQudXNlcigpLmFub255bW91c0lkKClcblxuICAgICAgICAgICAgLy8gSWYgYSBzZWdtZW50IHVzZXIgSUQgZXhpc3RzLCBzZXQgaXQgYXMgdGhlIGRpc3RpbmN0X2lkXG4gICAgICAgICAgICBpZiAoY29uZmlnLnNlZ21lbnQudXNlcigpLmlkKCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlZ2lzdGVyKHtcbiAgICAgICAgICAgICAgICAgICAgZGlzdGluY3RfaWQ6IGNvbmZpZy5zZWdtZW50LnVzZXIoKS5pZCgpLFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgdGhpcy5wZXJzaXN0ZW5jZS5zZXRfdXNlcl9zdGF0ZSgnaWRlbnRpZmllZCcpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBpc1VuZGVmaW5lZCBkb2Vzbid0IHByb3ZpZGUgdHlwZWhpbnQgaGVyZSBzbyB3b3VsZG4ndCByZWR1Y2UgYnVuZGxlIGFzIHdlJ2QgbmVlZCB0byBhc3NpZ25cbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHBvc3Rob2ctanMvbm8tZGlyZWN0LXVuZGVmaW5lZC1jaGVja1xuICAgICAgICBpZiAoY29uZmlnLmJvb3RzdHJhcD8uZGlzdGluY3RJRCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb25zdCB1dWlkID0gdGhpcy5jb25maWcuZ2V0X2RldmljZV9pZCh1dWlkdjcoKSlcbiAgICAgICAgICAgIGNvbnN0IGRldmljZUlEID0gY29uZmlnLmJvb3RzdHJhcD8uaXNJZGVudGlmaWVkSUQgPyB1dWlkIDogY29uZmlnLmJvb3RzdHJhcC5kaXN0aW5jdElEXG4gICAgICAgICAgICB0aGlzLnBlcnNpc3RlbmNlLnNldF91c2VyX3N0YXRlKGNvbmZpZy5ib290c3RyYXA/LmlzSWRlbnRpZmllZElEID8gJ2lkZW50aWZpZWQnIDogJ2Fub255bW91cycpXG4gICAgICAgICAgICB0aGlzLnJlZ2lzdGVyKHtcbiAgICAgICAgICAgICAgICBkaXN0aW5jdF9pZDogY29uZmlnLmJvb3RzdHJhcC5kaXN0aW5jdElELFxuICAgICAgICAgICAgICAgICRkZXZpY2VfaWQ6IGRldmljZUlELFxuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLl9oYXNCb290c3RyYXBwZWRGZWF0dXJlRmxhZ3MoKSkge1xuICAgICAgICAgICAgY29uc3QgYWN0aXZlRmxhZ3MgPSBPYmplY3Qua2V5cyhjb25maWcuYm9vdHN0cmFwPy5mZWF0dXJlRmxhZ3MgfHwge30pXG4gICAgICAgICAgICAgICAgLmZpbHRlcigoZmxhZykgPT4gISFjb25maWcuYm9vdHN0cmFwPy5mZWF0dXJlRmxhZ3M/LltmbGFnXSlcbiAgICAgICAgICAgICAgICAucmVkdWNlKFxuICAgICAgICAgICAgICAgICAgICAocmVzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmcgfCBib29sZWFuPiwga2V5KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAocmVzW2tleV0gPSBjb25maWcuYm9vdHN0cmFwPy5mZWF0dXJlRmxhZ3M/LltrZXldIHx8IGZhbHNlKSwgcmVzXG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgIHt9XG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgY29uc3QgZmVhdHVyZUZsYWdQYXlsb2FkcyA9IE9iamVjdC5rZXlzKGNvbmZpZy5ib290c3RyYXA/LmZlYXR1cmVGbGFnUGF5bG9hZHMgfHwge30pXG4gICAgICAgICAgICAgICAgLmZpbHRlcigoa2V5KSA9PiBhY3RpdmVGbGFnc1trZXldKVxuICAgICAgICAgICAgICAgIC5yZWR1Y2UoKHJlczogUmVjb3JkPHN0cmluZywgSnNvblR5cGU+LCBrZXkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpZy5ib290c3RyYXA/LmZlYXR1cmVGbGFnUGF5bG9hZHM/LltrZXldKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNba2V5XSA9IGNvbmZpZy5ib290c3RyYXA/LmZlYXR1cmVGbGFnUGF5bG9hZHM/LltrZXldXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc1xuICAgICAgICAgICAgICAgIH0sIHt9KVxuXG4gICAgICAgICAgICB0aGlzLmZlYXR1cmVGbGFncy5yZWNlaXZlZEZlYXR1cmVGbGFncyh7IGZlYXR1cmVGbGFnczogYWN0aXZlRmxhZ3MsIGZlYXR1cmVGbGFnUGF5bG9hZHMgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdGhpcy5nZXRfZGlzdGluY3RfaWQoKSkge1xuICAgICAgICAgICAgLy8gVGhlcmUgaXMgbm8gbmVlZCB0byBzZXQgdGhlIGRpc3RpbmN0IGlkXG4gICAgICAgICAgICAvLyBvciB0aGUgZGV2aWNlIGlkIGlmIHNvbWV0aGluZyB3YXMgYWxyZWFkeSBzdG9yZWRcbiAgICAgICAgICAgIC8vIGluIHRoZSBwZXJzaXRlbmNlXG4gICAgICAgICAgICBjb25zdCB1dWlkID0gdGhpcy5jb25maWcuZ2V0X2RldmljZV9pZCh1dWlkdjcoKSlcblxuICAgICAgICAgICAgdGhpcy5yZWdpc3Rlcl9vbmNlKFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgZGlzdGluY3RfaWQ6IHV1aWQsXG4gICAgICAgICAgICAgICAgICAgICRkZXZpY2VfaWQ6IHV1aWQsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAnJ1xuICAgICAgICAgICAgKVxuICAgICAgICAgICAgLy8gZGlzdGluY3QgaWQgPT0gJGRldmljZV9pZCBpcyBhIHByb3h5IGZvciBhbm9ueW1vdXMgdXNlclxuICAgICAgICAgICAgdGhpcy5wZXJzaXN0ZW5jZS5zZXRfdXNlcl9zdGF0ZSgnYW5vbnltb3VzJylcbiAgICAgICAgfVxuICAgICAgICAvLyBTZXQgdXAgZXZlbnQgaGFuZGxlciBmb3IgcGFnZWxlYXZlXG4gICAgICAgIC8vIFVzZSBgb25wYWdlaGlkZWAgaWYgYXZhaWxhYmxlLCBzZWUgaHR0cHM6Ly9jYWxlbmRhci5wZXJmcGxhbmV0LmNvbS8yMDIwL2JlYWNvbmluZy1pbi1wcmFjdGljZS8jYmVhY29uaW5nLXJlbGlhYmlsaXR5LWF2b2lkaW5nLWFiYW5kb25zXG4gICAgICAgIHdpbmRvdz8uYWRkRXZlbnRMaXN0ZW5lcj8uKCdvbnBhZ2VoaWRlJyBpbiBzZWxmID8gJ3BhZ2VoaWRlJyA6ICd1bmxvYWQnLCB0aGlzLl9oYW5kbGVfdW5sb2FkLmJpbmQodGhpcykpXG5cbiAgICAgICAgdGhpcy50b29sYmFyLm1heWJlTG9hZFRvb2xiYXIoKVxuXG4gICAgICAgIC8vIFdlIHdhbid0IHRvIGF2b2lkIHByb21pc2VzIGZvciBJRTExIGNvbXBhdGliaWxpdHksIHNvIHdlIHVzZSBjYWxsYmFja3MgaGVyZVxuICAgICAgICBpZiAoY29uZmlnLnNlZ21lbnQpIHtcbiAgICAgICAgICAgIGNvbmZpZy5zZWdtZW50LnJlZ2lzdGVyKHRoaXMuc2VnbWVudEludGVncmF0aW9uKCkpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuX2xvYWRlZCgpXG4gICAgICAgICAgICB9KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fbG9hZGVkKClcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzXG4gICAgfVxuXG4gICAgLy8gUHJpdmF0ZSBtZXRob2RzXG4gICAgX2FmdGVyRGVjaWRlUmVzcG9uc2UocmVzcG9uc2U6IERlY2lkZVJlc3BvbnNlKSB7XG4gICAgICAgIHRoaXMuY29tcHJlc3Npb24gPSB1bmRlZmluZWRcbiAgICAgICAgaWYgKHJlc3BvbnNlLnN1cHBvcnRlZENvbXByZXNzaW9uICYmICF0aGlzLmNvbmZpZy5kaXNhYmxlX2NvbXByZXNzaW9uKSB7XG4gICAgICAgICAgICB0aGlzLmNvbXByZXNzaW9uID0gX2luY2x1ZGVzKHJlc3BvbnNlWydzdXBwb3J0ZWRDb21wcmVzc2lvbiddLCBDb21wcmVzc2lvbi5HWmlwSlMpXG4gICAgICAgICAgICAgICAgPyBDb21wcmVzc2lvbi5HWmlwSlNcbiAgICAgICAgICAgICAgICA6IF9pbmNsdWRlcyhyZXNwb25zZVsnc3VwcG9ydGVkQ29tcHJlc3Npb24nXSwgQ29tcHJlc3Npb24uQmFzZTY0KVxuICAgICAgICAgICAgICAgID8gQ29tcHJlc3Npb24uQmFzZTY0XG4gICAgICAgICAgICAgICAgOiB1bmRlZmluZWRcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChyZXNwb25zZS5hbmFseXRpY3M/LmVuZHBvaW50KSB7XG4gICAgICAgICAgICB0aGlzLmFuYWx5dGljc0RlZmF1bHRFbmRwb2ludCA9IHJlc3BvbnNlLmFuYWx5dGljcy5lbmRwb2ludFxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHJlc3BvbnNlLmVsZW1lbnRzQ2hhaW5Bc1N0cmluZykge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50c0NoYWluQXNTdHJpbmcgPSByZXNwb25zZS5lbGVtZW50c0NoYWluQXNTdHJpbmdcbiAgICAgICAgfVxuICAgIH1cblxuICAgIF9sb2FkZWQoKTogdm9pZCB7XG4gICAgICAgIC8vIFBhdXNlIGByZWxvYWRGZWF0dXJlRmxhZ3NgIGNhbGxzIGluIGNvbmZpZy5sb2FkZWQgY2FsbGJhY2suXG4gICAgICAgIC8vIFRoZXNlIGZlYXR1cmUgZmxhZ3MgYXJlIGxvYWRlZCBpbiB0aGUgZGVjaWRlIGNhbGwgbWFkZSByaWdodFxuICAgICAgICAvLyBhZnRlcndhcmRzXG4gICAgICAgIGNvbnN0IGRpc2FibGVEZWNpZGUgPSB0aGlzLmNvbmZpZy5hZHZhbmNlZF9kaXNhYmxlX2RlY2lkZVxuICAgICAgICBpZiAoIWRpc2FibGVEZWNpZGUpIHtcbiAgICAgICAgICAgIHRoaXMuZmVhdHVyZUZsYWdzLnNldFJlbG9hZGluZ1BhdXNlZCh0cnVlKVxuICAgICAgICB9XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMuY29uZmlnLmxvYWRlZCh0aGlzKVxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIGxvZ2dlci5jcml0aWNhbCgnYGxvYWRlZGAgZnVuY3Rpb24gZmFpbGVkJywgZXJyKVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fc3RhcnRfcXVldWVfaWZfb3B0ZWRfaW4oKVxuXG4gICAgICAgIC8vIHRoaXMgaGFwcGVucyBhZnRlciBcImxvYWRlZFwiIHNvIGEgdXNlciBjYW4gY2FsbCBpZGVudGlmeSBvciBhbnkgb3RoZXIgdGhpbmdzIGJlZm9yZSB0aGUgcGFnZXZpZXcgZmlyZXNcbiAgICAgICAgaWYgKHRoaXMuY29uZmlnLmNhcHR1cmVfcGFnZXZpZXcpIHtcbiAgICAgICAgICAgIC8vIE5PVEU6IFdlIHdhbnQgdG8gZmlyZSB0aGlzIG9uIHRoZSBuZXh0IHRpY2sgYXMgdGhlIHByZXZpb3VzIGltcGxlbWVudGF0aW9uIGhhZCB0aGlzIHNpZGUgZWZmZWN0XG4gICAgICAgICAgICAvLyBhbmQgc29tZSBjbGllbnRzIG1heSByZWx5IG9uIGl0XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYXB0dXJlKCckcGFnZXZpZXcnLCB7IHRpdGxlOiBkb2N1bWVudC50aXRsZSB9LCB7IHNlbmRfaW5zdGFudGx5OiB0cnVlIH0pXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgMSlcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENhbGwgZGVjaWRlIHRvIGdldCB3aGF0IGZlYXR1cmVzIGFyZSBlbmFibGVkIGFuZCBvdGhlciBzZXR0aW5ncy5cbiAgICAgICAgLy8gQXMgYSByZW1pbmRlciwgaWYgdGhlIC9kZWNpZGUgZW5kcG9pbnQgaXMgZGlzYWJsZWQsIGZlYXR1cmUgZmxhZ3MsIHRvb2xiYXIsIHNlc3Npb24gcmVjb3JkaW5nLCBhdXRvY2FwdHVyZSxcbiAgICAgICAgLy8gYW5kIGNvbXByZXNzaW9uIHdpbGwgbm90IGJlIGF2YWlsYWJsZS5cbiAgICAgICAgaWYgKCFkaXNhYmxlRGVjaWRlKSB7XG4gICAgICAgICAgICBuZXcgRGVjaWRlKHRoaXMpLmNhbGwoKVxuXG4gICAgICAgICAgICAvLyBUUklDS1k6IFJlc2V0IGFueSBkZWNpZGUgcmVsb2FkcyBxdWV1ZWQgZHVyaW5nIGNvbmZpZy5sb2FkZWQgYmVjYXVzZSB0aGV5J2xsIGJlXG4gICAgICAgICAgICAvLyBjb3ZlcmVkIGJ5IHRoZSBkZWNpZGUgY2FsbCByaWdodCBhYm92ZS5cbiAgICAgICAgICAgIHRoaXMuZmVhdHVyZUZsYWdzLnJlc2V0UmVxdWVzdFF1ZXVlKClcbiAgICAgICAgfVxuICAgIH1cblxuICAgIF9zdGFydF9xdWV1ZV9pZl9vcHRlZF9pbigpOiB2b2lkIHtcbiAgICAgICAgaWYgKCF0aGlzLmhhc19vcHRlZF9vdXRfY2FwdHVyaW5nKCkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZy5yZXF1ZXN0X2JhdGNoaW5nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fcmVxdWVzdFF1ZXVlPy5lbmFibGUoKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgX2RvbV9sb2FkZWQoKTogdm9pZCB7XG4gICAgICAgIGlmICghdGhpcy5oYXNfb3B0ZWRfb3V0X2NhcHR1cmluZygpKSB7XG4gICAgICAgICAgICBfZWFjaEFycmF5KHRoaXMuX19yZXF1ZXN0X3F1ZXVlLCAoaXRlbSkgPT4gdGhpcy5fc2VuZF9yZXRyaWFibGVfcmVxdWVzdChpdGVtKSlcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX19yZXF1ZXN0X3F1ZXVlID0gW11cbiAgICAgICAgdGhpcy5fc3RhcnRfcXVldWVfaWZfb3B0ZWRfaW4oKVxuICAgIH1cblxuICAgIF9oYW5kbGVfdW5sb2FkKCk6IHZvaWQge1xuICAgICAgICBpZiAoIXRoaXMuY29uZmlnLnJlcXVlc3RfYmF0Y2hpbmcpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZy5jYXB0dXJlX3BhZ2V2aWV3ICYmIHRoaXMuY29uZmlnLmNhcHR1cmVfcGFnZWxlYXZlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jYXB0dXJlKCckcGFnZWxlYXZlJywgbnVsbCwgeyB0cmFuc3BvcnQ6ICdzZW5kQmVhY29uJyB9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5jb25maWcuY2FwdHVyZV9wYWdldmlldyAmJiB0aGlzLmNvbmZpZy5jYXB0dXJlX3BhZ2VsZWF2ZSkge1xuICAgICAgICAgICAgdGhpcy5jYXB0dXJlKCckcGFnZWxlYXZlJylcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX3JlcXVlc3RRdWV1ZT8udW5sb2FkKClcbiAgICAgICAgdGhpcy5fcmV0cnlRdWV1ZT8udW5sb2FkKClcbiAgICB9XG5cbiAgICBfc2VuZF9yZXF1ZXN0KG9wdGlvbnM6IFF1ZXVlZFJlcXVlc3RPcHRpb25zKTogdm9pZCB7XG4gICAgICAgIGlmICghdGhpcy5fX2xvYWRlZCkge1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoRU5RVUVVRV9SRVFVRVNUUykge1xuICAgICAgICAgICAgdGhpcy5fX3JlcXVlc3RfcXVldWUucHVzaChvcHRpb25zKVxuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5yYXRlTGltaXRlci5pc1JhdGVMaW1pdGVkKG9wdGlvbnMuYmF0Y2hLZXkpKSB7XG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIG9wdGlvbnMudHJhbnNwb3J0ID0gb3B0aW9ucy50cmFuc3BvcnQgfHwgdGhpcy5jb25maWcuYXBpX3RyYW5zcG9ydFxuICAgICAgICBvcHRpb25zLnVybCA9IGV4dGVuZFVSTFBhcmFtcyhvcHRpb25zLnVybCwge1xuICAgICAgICAgICAgLy8gV2hldGhlciB0byBkZXRlY3QgaXAgaW5mbyBvciBub3RcbiAgICAgICAgICAgIGlwOiB0aGlzLmNvbmZpZy5pcCA/IDEgOiAwLFxuICAgICAgICB9KVxuICAgICAgICBvcHRpb25zLmhlYWRlcnMgPSB0aGlzLmNvbmZpZy5yZXF1ZXN0X2hlYWRlcnNcbiAgICAgICAgb3B0aW9ucy5jb21wcmVzc2lvbiA9IG9wdGlvbnMuY29tcHJlc3Npb24gPT09ICdiZXN0LWF2YWlsYWJsZScgPyB0aGlzLmNvbXByZXNzaW9uIDogb3B0aW9ucy5jb21wcmVzc2lvblxuXG4gICAgICAgIHJlcXVlc3Qoe1xuICAgICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgICAgIGNhbGxiYWNrOiAocmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnJhdGVMaW1pdGVyLmNoZWNrRm9yTGltaXRpbmcocmVzcG9uc2UpXG5cbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzQ29kZSA+PSA0MDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25maWcub25fcmVxdWVzdF9lcnJvcj8uKHJlc3BvbnNlKVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIG9wdGlvbnMuY2FsbGJhY2s/LihyZXNwb25zZSlcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgX3NlbmRfcmV0cmlhYmxlX3JlcXVlc3Qob3B0aW9uczogUXVldWVkUmVxdWVzdE9wdGlvbnMpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMuX3JldHJ5UXVldWUpIHtcbiAgICAgICAgICAgIHRoaXMuX3JldHJ5UXVldWUucmV0cmlhYmxlUmVxdWVzdChvcHRpb25zKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fc2VuZF9yZXF1ZXN0KG9wdGlvbnMpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBfZXhlY3V0ZV9hcnJheSgpIGRlYWxzIHdpdGggcHJvY2Vzc2luZyBhbnkgcG9zdGhvZyBmdW5jdGlvblxuICAgICAqIGNhbGxzIHRoYXQgd2VyZSBjYWxsZWQgYmVmb3JlIHRoZSBQb3N0SG9nIGxpYnJhcnkgd2VyZSBsb2FkZWRcbiAgICAgKiAoYW5kIGFyZSB0aHVzIHN0b3JlZCBpbiBhbiBhcnJheSBzbyB0aGV5IGNhbiBiZSBjYWxsZWQgbGF0ZXIpXG4gICAgICpcbiAgICAgKiBOb3RlOiB3ZSBmaXJlIG9mZiBhbGwgdGhlIHBvc3Rob2cgZnVuY3Rpb24gY2FsbHMgJiYgdXNlciBkZWZpbmVkXG4gICAgICogZnVuY3Rpb25zIEJFRk9SRSB3ZSBmaXJlIG9mZiBwb3N0aG9nIGNhcHR1cmluZyBjYWxscy4gVGhpcyBpcyBzb1xuICAgICAqIGlkZW50aWZ5L3JlZ2lzdGVyL3NldF9jb25maWcgY2FsbHMgY2FuIHByb3Blcmx5IG1vZGlmeSBlYXJseVxuICAgICAqIGNhcHR1cmluZyBjYWxscy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5XG4gICAgICovXG4gICAgX2V4ZWN1dGVfYXJyYXkoYXJyYXk6IFNuaXBwZXRBcnJheUl0ZW1bXSk6IHZvaWQge1xuICAgICAgICBsZXQgZm5fbmFtZVxuICAgICAgICBjb25zdCBhbGlhc19jYWxsczogU25pcHBldEFycmF5SXRlbVtdID0gW11cbiAgICAgICAgY29uc3Qgb3RoZXJfY2FsbHM6IFNuaXBwZXRBcnJheUl0ZW1bXSA9IFtdXG4gICAgICAgIGNvbnN0IGNhcHR1cmluZ19jYWxsczogU25pcHBldEFycmF5SXRlbVtdID0gW11cbiAgICAgICAgX2VhY2hBcnJheShhcnJheSwgKGl0ZW0pID0+IHtcbiAgICAgICAgICAgIGlmIChpdGVtKSB7XG4gICAgICAgICAgICAgICAgZm5fbmFtZSA9IGl0ZW1bMF1cbiAgICAgICAgICAgICAgICBpZiAoX2lzQXJyYXkoZm5fbmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FwdHVyaW5nX2NhbGxzLnB1c2goaXRlbSkgLy8gY2hhaW5lZCBjYWxsIGUuZy4gcG9zdGhvZy5nZXRfZ3JvdXAoKS5zZXQoKVxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoX2lzRnVuY3Rpb24oaXRlbSkpIHtcbiAgICAgICAgICAgICAgICAgICAgOyhpdGVtIGFzIGFueSkuY2FsbCh0aGlzKVxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoX2lzQXJyYXkoaXRlbSkgJiYgZm5fbmFtZSA9PT0gJ2FsaWFzJykge1xuICAgICAgICAgICAgICAgICAgICBhbGlhc19jYWxscy5wdXNoKGl0ZW0pXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChfaXNBcnJheShpdGVtKSAmJiBmbl9uYW1lLmluZGV4T2YoJ2NhcHR1cmUnKSAhPT0gLTEgJiYgX2lzRnVuY3Rpb24oKHRoaXMgYXMgYW55KVtmbl9uYW1lXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FwdHVyaW5nX2NhbGxzLnB1c2goaXRlbSlcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBvdGhlcl9jYWxscy5wdXNoKGl0ZW0pXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuXG4gICAgICAgIGNvbnN0IGV4ZWN1dGUgPSBmdW5jdGlvbiAoY2FsbHM6IFNuaXBwZXRBcnJheUl0ZW1bXSwgdGhpc0FyZzogYW55KSB7XG4gICAgICAgICAgICBfZWFjaEFycmF5KFxuICAgICAgICAgICAgICAgIGNhbGxzLFxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChfaXNBcnJheShpdGVtWzBdKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2hhaW5lZCBjYWxsXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgY2FsbGVyID0gdGhpc0FyZ1xuICAgICAgICAgICAgICAgICAgICAgICAgX2VhY2goaXRlbSwgZnVuY3Rpb24gKGNhbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsZXIgPSBjYWxsZXJbY2FsbFswXV0uYXBwbHkoY2FsbGVyLCBjYWxsLnNsaWNlKDEpKVxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvYmFuLXRzLWNvbW1lbnRcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNbaXRlbVswXV0uYXBwbHkodGhpcywgaXRlbS5zbGljZSgxKSlcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgdGhpc0FyZ1xuICAgICAgICAgICAgKVxuICAgICAgICB9XG5cbiAgICAgICAgZXhlY3V0ZShhbGlhc19jYWxscywgdGhpcylcbiAgICAgICAgZXhlY3V0ZShvdGhlcl9jYWxscywgdGhpcylcbiAgICAgICAgZXhlY3V0ZShjYXB0dXJpbmdfY2FsbHMsIHRoaXMpXG4gICAgfVxuXG4gICAgX2hhc0Jvb3RzdHJhcHBlZEZlYXR1cmVGbGFncygpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICh0aGlzLmNvbmZpZy5ib290c3RyYXA/LmZlYXR1cmVGbGFncyAmJiBPYmplY3Qua2V5cyh0aGlzLmNvbmZpZy5ib290c3RyYXA/LmZlYXR1cmVGbGFncykubGVuZ3RoID4gMCkgfHxcbiAgICAgICAgICAgIGZhbHNlXG4gICAgICAgIClcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBwdXNoKCkga2VlcHMgdGhlIHN0YW5kYXJkIGFzeW5jLWFycmF5LXB1c2hcbiAgICAgKiBiZWhhdmlvciBhcm91bmQgYWZ0ZXIgdGhlIGxpYiBpcyBsb2FkZWQuXG4gICAgICogVGhpcyBpcyBvbmx5IHVzZWZ1bCBmb3IgZXh0ZXJuYWwgaW50ZWdyYXRpb25zIHRoYXRcbiAgICAgKiBkbyBub3Qgd2lzaCB0byByZWx5IG9uIG91ciBjb252ZW5pZW5jZSBtZXRob2RzXG4gICAgICogKGNyZWF0ZWQgaW4gdGhlIHNuaXBwZXQpLlxuICAgICAqXG4gICAgICogIyMjIFVzYWdlOlxuICAgICAqICAgICBwb3N0aG9nLnB1c2goWydyZWdpc3RlcicsIHsgYTogJ2InIH1dKTtcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGl0ZW0gQSBbZnVuY3Rpb25fbmFtZSwgYXJncy4uLl0gYXJyYXkgdG8gYmUgZXhlY3V0ZWRcbiAgICAgKi9cbiAgICBwdXNoKGl0ZW06IFNuaXBwZXRBcnJheUl0ZW0pOiB2b2lkIHtcbiAgICAgICAgdGhpcy5fZXhlY3V0ZV9hcnJheShbaXRlbV0pXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2FwdHVyZSBhbiBldmVudC4gVGhpcyBpcyB0aGUgbW9zdCBpbXBvcnRhbnQgYW5kXG4gICAgICogZnJlcXVlbnRseSB1c2VkIFBvc3RIb2cgZnVuY3Rpb24uXG4gICAgICpcbiAgICAgKiAjIyMgVXNhZ2U6XG4gICAgICpcbiAgICAgKiAgICAgLy8gY2FwdHVyZSBhbiBldmVudCBuYW1lZCAnUmVnaXN0ZXJlZCdcbiAgICAgKiAgICAgcG9zdGhvZy5jYXB0dXJlKCdSZWdpc3RlcmVkJywgeydHZW5kZXInOiAnTWFsZScsICdBZ2UnOiAyMX0pO1xuICAgICAqXG4gICAgICogICAgIC8vIGNhcHR1cmUgYW4gZXZlbnQgdXNpbmcgbmF2aWdhdG9yLnNlbmRCZWFjb25cbiAgICAgKiAgICAgcG9zdGhvZy5jYXB0dXJlKCdMZWZ0IHBhZ2UnLCB7J2R1cmF0aW9uX3NlY29uZHMnOiAzNX0sIHt0cmFuc3BvcnQ6ICdzZW5kQmVhY29uJ30pO1xuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50X25hbWUgVGhlIG5hbWUgb2YgdGhlIGV2ZW50LiBUaGlzIGNhbiBiZSBhbnl0aGluZyB0aGUgdXNlciBkb2VzIC0gJ0J1dHRvbiBDbGljaycsICdTaWduIFVwJywgJ0l0ZW0gUHVyY2hhc2VkJywgZXRjLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbcHJvcGVydGllc10gQSBzZXQgb2YgcHJvcGVydGllcyB0byBpbmNsdWRlIHdpdGggdGhlIGV2ZW50IHlvdSdyZSBzZW5kaW5nLiBUaGVzZSBkZXNjcmliZSB0aGUgdXNlciB3aG8gZGlkIHRoZSBldmVudCBvciBkZXRhaWxzIGFib3V0IHRoZSBldmVudCBpdHNlbGYuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSBPcHRpb25hbCBjb25maWd1cmF0aW9uIGZvciB0aGlzIGNhcHR1cmUgcmVxdWVzdC5cbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gW29wdGlvbnMudHJhbnNwb3J0XSBUcmFuc3BvcnQgbWV0aG9kIGZvciBuZXR3b3JrIHJlcXVlc3QgKCdYSFInIG9yICdzZW5kQmVhY29uJykuXG4gICAgICogQHBhcmFtIHtEYXRlfSBbb3B0aW9ucy50aW1lc3RhbXBdIFRpbWVzdGFtcCBpcyBhIERhdGUgb2JqZWN0LiBJZiBub3Qgc2V0LCBpdCdsbCBhdXRvbWF0aWNhbGx5IGJlIHNldCB0byB0aGUgY3VycmVudCB0aW1lLlxuICAgICAqL1xuICAgIGNhcHR1cmUoZXZlbnRfbmFtZTogc3RyaW5nLCBwcm9wZXJ0aWVzPzogUHJvcGVydGllcyB8IG51bGwsIG9wdGlvbnM/OiBDYXB0dXJlT3B0aW9ucyk6IENhcHR1cmVSZXN1bHQgfCB2b2lkIHtcbiAgICAgICAgLy8gV2hpbGUgZGV2ZWxvcGluZywgYSBkZXZlbG9wZXIgbWlnaHQgcHVycG9zZWZ1bGx5IF9ub3RfIGNhbGwgaW5pdCgpLFxuICAgICAgICAvLyBpbiB0aGlzIGNhc2UsIHdlIHdvdWxkIGxpa2UgY2FwdHVyZSB0byBiZSBhIG5vb3AuXG4gICAgICAgIGlmICghdGhpcy5fX2xvYWRlZCB8fCAhdGhpcy5zZXNzaW9uUGVyc2lzdGVuY2UgfHwgIXRoaXMuX3JlcXVlc3RRdWV1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIGxvZ2dlci51bmluaXRpYWxpemVkV2FybmluZygncG9zdGhvZy5jYXB0dXJlJylcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh1c2VyT3B0ZWRPdXQodGhpcykpIHtcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG5cbiAgICAgICAgLy8gdHlwaW5nIGRvZXNuJ3QgcHJldmVudCBpbnRlcmVzdGluZyBkYXRhXG4gICAgICAgIGlmIChfaXNVbmRlZmluZWQoZXZlbnRfbmFtZSkgfHwgIV9pc1N0cmluZyhldmVudF9uYW1lKSkge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdObyBldmVudCBuYW1lIHByb3ZpZGVkIHRvIHBvc3Rob2cuY2FwdHVyZScpXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIHVzZXJBZ2VudCAmJlxuICAgICAgICAgICAgIXRoaXMuY29uZmlnLm9wdF9vdXRfdXNlcmFnZW50X2ZpbHRlciAmJlxuICAgICAgICAgICAgX2lzQmxvY2tlZFVBKHVzZXJBZ2VudCwgdGhpcy5jb25maWcuY3VzdG9tX2Jsb2NrZWRfdXNlcmFnZW50cylcbiAgICAgICAgKSB7XG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHVwZGF0ZSBwZXJzaXN0ZW5jZVxuICAgICAgICB0aGlzLnNlc3Npb25QZXJzaXN0ZW5jZS51cGRhdGVfc2VhcmNoX2tleXdvcmQoKVxuXG4gICAgICAgIGlmICh0aGlzLmNvbmZpZy5zdG9yZV9nb29nbGUpIHtcbiAgICAgICAgICAgIHRoaXMuc2Vzc2lvblBlcnNpc3RlbmNlLnVwZGF0ZV9jYW1wYWlnbl9wYXJhbXMoKVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmNvbmZpZy5zYXZlX3JlZmVycmVyKSB7XG4gICAgICAgICAgICB0aGlzLnNlc3Npb25QZXJzaXN0ZW5jZS51cGRhdGVfcmVmZXJyZXJfaW5mbygpXG4gICAgICAgIH1cblxuICAgICAgICBsZXQgZGF0YTogQ2FwdHVyZVJlc3VsdCA9IHtcbiAgICAgICAgICAgIHV1aWQ6IHV1aWR2NygpLFxuICAgICAgICAgICAgZXZlbnQ6IGV2ZW50X25hbWUsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiB0aGlzLl9jYWxjdWxhdGVfZXZlbnRfcHJvcGVydGllcyhldmVudF9uYW1lLCBwcm9wZXJ0aWVzIHx8IHt9KSxcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChldmVudF9uYW1lID09PSAnJGlkZW50aWZ5Jykge1xuICAgICAgICAgICAgZGF0YVsnJHNldCddID0gb3B0aW9ucz8uWyckc2V0J11cbiAgICAgICAgICAgIGRhdGFbJyRzZXRfb25jZSddID0gb3B0aW9ucz8uWyckc2V0X29uY2UnXVxuICAgICAgICB9XG5cbiAgICAgICAgZGF0YSA9IF9jb3B5QW5kVHJ1bmNhdGVTdHJpbmdzKGRhdGEsIG9wdGlvbnM/Ll9ub1RydW5jYXRlID8gbnVsbCA6IHRoaXMuY29uZmlnLnByb3BlcnRpZXNfc3RyaW5nX21heF9sZW5ndGgpXG4gICAgICAgIGRhdGEudGltZXN0YW1wID0gb3B0aW9ucz8udGltZXN0YW1wIHx8IG5ldyBEYXRlKClcbiAgICAgICAgaWYgKCFfaXNVbmRlZmluZWQob3B0aW9ucz8udGltZXN0YW1wKSkge1xuICAgICAgICAgICAgZGF0YS5wcm9wZXJ0aWVzWyckZXZlbnRfdGltZV9vdmVycmlkZV9wcm92aWRlZCddID0gdHJ1ZVxuICAgICAgICAgICAgZGF0YS5wcm9wZXJ0aWVzWyckZXZlbnRfdGltZV9vdmVycmlkZV9zeXN0ZW1fdGltZSddID0gbmV3IERhdGUoKVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gVG9wLWxldmVsICRzZXQgb3ZlcnJpZGluZyB2YWx1ZXMgZnJvbSB0aGUgb25lIGZyb20gcHJvcGVydGllcyBpcyB0YWtlbiBmcm9tIHRoZSBwbHVnaW4tc2VydmVyIG5vcm1hbGl6ZUV2ZW50XG4gICAgICAgIC8vIFRoaXMgZG9lc24ndCBoYW5kbGUgJHNldF9vbmNlLCBiZWNhdXNlIHBvc3Rob2ctcGVvcGxlIGRvZXNuJ3QgZWl0aGVyXG4gICAgICAgIGNvbnN0IGZpbmFsU2V0ID0geyAuLi5kYXRhLnByb3BlcnRpZXNbJyRzZXQnXSwgLi4uZGF0YVsnJHNldCddIH1cbiAgICAgICAgaWYgKCFfaXNFbXB0eU9iamVjdChmaW5hbFNldCkpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0UGVyc29uUHJvcGVydGllc0ZvckZsYWdzKGZpbmFsU2V0KVxuICAgICAgICB9XG5cbiAgICAgICAgbG9nZ2VyLmluZm8oJ3NlbmQnLCBkYXRhKVxuXG4gICAgICAgIGNvbnN0IHJlcXVlc3RPcHRpb25zOiBRdWV1ZWRSZXF1ZXN0T3B0aW9ucyA9IHtcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgdXJsOiBvcHRpb25zPy5fdXJsID8/IHRoaXMucmVxdWVzdFJvdXRlci5lbmRwb2ludEZvcignYXBpJywgdGhpcy5hbmFseXRpY3NEZWZhdWx0RW5kcG9pbnQpLFxuICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgIGNvbXByZXNzaW9uOiAnYmVzdC1hdmFpbGFibGUnLFxuICAgICAgICAgICAgYmF0Y2hLZXk6IG9wdGlvbnM/Ll9iYXRjaEtleSxcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmNvbmZpZy5yZXF1ZXN0X2JhdGNoaW5nICYmICghb3B0aW9ucyB8fCBvcHRpb25zPy5fYmF0Y2hLZXkpICYmICFvcHRpb25zPy5zZW5kX2luc3RhbnRseSkge1xuICAgICAgICAgICAgdGhpcy5fcmVxdWVzdFF1ZXVlLmVucXVldWUocmVxdWVzdE9wdGlvbnMpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9zZW5kX3JldHJpYWJsZV9yZXF1ZXN0KHJlcXVlc3RPcHRpb25zKVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5faW52b2tlQ2FwdHVyZUhvb2tzKGV2ZW50X25hbWUsIGRhdGEpXG5cbiAgICAgICAgcmV0dXJuIGRhdGFcbiAgICB9XG5cbiAgICBfYWRkQ2FwdHVyZUhvb2soY2FsbGJhY2s6IChldmVudE5hbWU6IHN0cmluZykgPT4gdm9pZCk6IHZvaWQge1xuICAgICAgICB0aGlzLl9fY2FwdHVyZUhvb2tzLnB1c2goY2FsbGJhY2spXG4gICAgfVxuXG4gICAgX2ludm9rZUNhcHR1cmVIb29rcyhldmVudE5hbWU6IHN0cmluZywgZXZlbnREYXRhOiBDYXB0dXJlUmVzdWx0KTogdm9pZCB7XG4gICAgICAgIHRoaXMuY29uZmlnLl9vbkNhcHR1cmUoZXZlbnROYW1lLCBldmVudERhdGEpXG4gICAgICAgIF9lYWNoKHRoaXMuX19jYXB0dXJlSG9va3MsIChjYWxsYmFjaykgPT4gY2FsbGJhY2soZXZlbnROYW1lKSlcbiAgICB9XG5cbiAgICBfY2FsY3VsYXRlX2V2ZW50X3Byb3BlcnRpZXMoZXZlbnRfbmFtZTogc3RyaW5nLCBldmVudF9wcm9wZXJ0aWVzOiBQcm9wZXJ0aWVzKTogUHJvcGVydGllcyB7XG4gICAgICAgIGlmICghdGhpcy5wZXJzaXN0ZW5jZSB8fCAhdGhpcy5zZXNzaW9uUGVyc2lzdGVuY2UpIHtcbiAgICAgICAgICAgIHJldHVybiBldmVudF9wcm9wZXJ0aWVzXG4gICAgICAgIH1cblxuICAgICAgICAvLyBzZXQgZGVmYXVsdHNcbiAgICAgICAgY29uc3Qgc3RhcnRfdGltZXN0YW1wID0gdGhpcy5wZXJzaXN0ZW5jZS5yZW1vdmVfZXZlbnRfdGltZXIoZXZlbnRfbmFtZSlcbiAgICAgICAgbGV0IHByb3BlcnRpZXMgPSB7IC4uLmV2ZW50X3Byb3BlcnRpZXMgfVxuICAgICAgICBwcm9wZXJ0aWVzWyd0b2tlbiddID0gdGhpcy5jb25maWcudG9rZW5cblxuICAgICAgICBpZiAoZXZlbnRfbmFtZSA9PT0gJyRzbmFwc2hvdCcpIHtcbiAgICAgICAgICAgIGNvbnN0IHBlcnNpc3RlbmNlUHJvcHMgPSB7IC4uLnRoaXMucGVyc2lzdGVuY2UucHJvcGVydGllcygpLCAuLi50aGlzLnNlc3Npb25QZXJzaXN0ZW5jZS5wcm9wZXJ0aWVzKCkgfVxuICAgICAgICAgICAgcHJvcGVydGllc1snZGlzdGluY3RfaWQnXSA9IHBlcnNpc3RlbmNlUHJvcHMuZGlzdGluY3RfaWRcbiAgICAgICAgICAgIHJldHVybiBwcm9wZXJ0aWVzXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBpbmZvUHJvcGVydGllcyA9IF9pbmZvLnByb3BlcnRpZXMoKVxuXG4gICAgICAgIGlmICh0aGlzLnNlc3Npb25NYW5hZ2VyKSB7XG4gICAgICAgICAgICBjb25zdCB7IHNlc3Npb25JZCwgd2luZG93SWQgfSA9IHRoaXMuc2Vzc2lvbk1hbmFnZXIuY2hlY2tBbmRHZXRTZXNzaW9uQW5kV2luZG93SWQoKVxuICAgICAgICAgICAgcHJvcGVydGllc1snJHNlc3Npb25faWQnXSA9IHNlc3Npb25JZFxuICAgICAgICAgICAgcHJvcGVydGllc1snJHdpbmRvd19pZCddID0gd2luZG93SWRcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIHRoaXMuc2Vzc2lvblByb3BzTWFuYWdlciAmJlxuICAgICAgICAgICAgdGhpcy5jb25maWcuX19wcmV2aWV3X3NlbmRfY2xpZW50X3Nlc3Npb25fcGFyYW1zICYmXG4gICAgICAgICAgICAoZXZlbnRfbmFtZSA9PT0gJyRwYWdldmlldycgfHwgZXZlbnRfbmFtZSA9PT0gJyRwYWdlbGVhdmUnIHx8IGV2ZW50X25hbWUgPT09ICckYXV0b2NhcHR1cmUnKVxuICAgICAgICApIHtcbiAgICAgICAgICAgIGNvbnN0IHNlc3Npb25Qcm9wcyA9IHRoaXMuc2Vzc2lvblByb3BzTWFuYWdlci5nZXRTZXNzaW9uUHJvcHMoKVxuICAgICAgICAgICAgcHJvcGVydGllcyA9IF9leHRlbmQocHJvcGVydGllcywgc2Vzc2lvblByb3BzKVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aGlzLmNvbmZpZy5kaXNhYmxlX3Njcm9sbF9wcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICBsZXQgcGVyZm9ybWFuY2VQcm9wZXJ0aWVzOiBSZWNvcmQ8c3RyaW5nLCBhbnk+ID0ge31cbiAgICAgICAgICAgIGlmIChldmVudF9uYW1lID09PSAnJHBhZ2V2aWV3Jykge1xuICAgICAgICAgICAgICAgIHBlcmZvcm1hbmNlUHJvcGVydGllcyA9IHRoaXMucGFnZVZpZXdNYW5hZ2VyLmRvUGFnZVZpZXcoKVxuICAgICAgICAgICAgfSBlbHNlIGlmIChldmVudF9uYW1lID09PSAnJHBhZ2VsZWF2ZScpIHtcbiAgICAgICAgICAgICAgICBwZXJmb3JtYW5jZVByb3BlcnRpZXMgPSB0aGlzLnBhZ2VWaWV3TWFuYWdlci5kb1BhZ2VMZWF2ZSgpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwcm9wZXJ0aWVzID0gX2V4dGVuZChwcm9wZXJ0aWVzLCBwZXJmb3JtYW5jZVByb3BlcnRpZXMpXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZXZlbnRfbmFtZSA9PT0gJyRwYWdldmlldycgJiYgZG9jdW1lbnQpIHtcbiAgICAgICAgICAgIHByb3BlcnRpZXNbJ3RpdGxlJ10gPSBkb2N1bWVudC50aXRsZVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGV2ZW50X25hbWUgPT09ICckcGVyZm9ybWFuY2VfZXZlbnQnKSB7XG4gICAgICAgICAgICBjb25zdCBwZXJzaXN0ZW5jZVByb3BzID0gdGhpcy5wZXJzaXN0ZW5jZS5wcm9wZXJ0aWVzKClcbiAgICAgICAgICAgIC8vIEVhcmx5IGV4aXQgZm9yICRwZXJmb3JtYW5jZV9ldmVudCBhcyB3ZSBvbmx5IG5lZWQgc2Vzc2lvbiBhbmQgJGN1cnJlbnRfdXJsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzWydkaXN0aW5jdF9pZCddID0gcGVyc2lzdGVuY2VQcm9wcy5kaXN0aW5jdF9pZFxuICAgICAgICAgICAgcHJvcGVydGllc1snJGN1cnJlbnRfdXJsJ10gPSBpbmZvUHJvcGVydGllcy4kY3VycmVudF91cmxcbiAgICAgICAgICAgIHJldHVybiBwcm9wZXJ0aWVzXG4gICAgICAgIH1cblxuICAgICAgICAvLyBzZXQgJGR1cmF0aW9uIGlmIHRpbWVfZXZlbnQgd2FzIHByZXZpb3VzbHkgY2FsbGVkIGZvciB0aGlzIGV2ZW50XG4gICAgICAgIGlmICghX2lzVW5kZWZpbmVkKHN0YXJ0X3RpbWVzdGFtcCkpIHtcbiAgICAgICAgICAgIGNvbnN0IGR1cmF0aW9uX2luX21zID0gbmV3IERhdGUoKS5nZXRUaW1lKCkgLSBzdGFydF90aW1lc3RhbXBcbiAgICAgICAgICAgIHByb3BlcnRpZXNbJyRkdXJhdGlvbiddID0gcGFyc2VGbG9hdCgoZHVyYXRpb25faW5fbXMgLyAxMDAwKS50b0ZpeGVkKDMpKVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gdGhpcyBpcyBvbmx5IGFkZGVkIHdoZW4gdGhpcy5jb25maWcub3B0X291dF91c2VyYWdlbnRfZmlsdGVyIGlzIHRydWUsXG4gICAgICAgIC8vIG9yIGl0IHdvdWxkIGFsd2F5cyBhZGQgXCJicm93c2VyXCJcbiAgICAgICAgaWYgKHVzZXJBZ2VudCAmJiB0aGlzLmNvbmZpZy5vcHRfb3V0X3VzZXJhZ2VudF9maWx0ZXIpIHtcbiAgICAgICAgICAgIHByb3BlcnRpZXNbJyRicm93c2VyX3R5cGUnXSA9IF9pc0Jsb2NrZWRVQSh1c2VyQWdlbnQsIHRoaXMuY29uZmlnLmN1c3RvbV9ibG9ja2VkX3VzZXJhZ2VudHMpXG4gICAgICAgICAgICAgICAgPyAnYm90J1xuICAgICAgICAgICAgICAgIDogJ2Jyb3dzZXInXG4gICAgICAgIH1cblxuICAgICAgICAvLyBub3RlOiBleHRlbmQgd3JpdGVzIHRvIHRoZSBmaXJzdCBvYmplY3QsIHNvIGxldHMgbWFrZSBzdXJlIHdlXG4gICAgICAgIC8vIGRvbid0IHdyaXRlIHRvIHRoZSBwZXJzaXN0ZW5jZSBwcm9wZXJ0aWVzIG9iamVjdCBhbmQgaW5mb1xuICAgICAgICAvLyBwcm9wZXJ0aWVzIG9iamVjdCBieSBwYXNzaW5nIGluIGEgbmV3IG9iamVjdFxuXG4gICAgICAgIC8vIHVwZGF0ZSBwcm9wZXJ0aWVzIHdpdGggcGFnZXZpZXcgaW5mbyBhbmQgc3VwZXItcHJvcGVydGllc1xuICAgICAgICBwcm9wZXJ0aWVzID0gX2V4dGVuZChcbiAgICAgICAgICAgIHt9LFxuICAgICAgICAgICAgX2luZm8ucHJvcGVydGllcygpLFxuICAgICAgICAgICAgdGhpcy5wZXJzaXN0ZW5jZS5wcm9wZXJ0aWVzKCksXG4gICAgICAgICAgICB0aGlzLnNlc3Npb25QZXJzaXN0ZW5jZS5wcm9wZXJ0aWVzKCksXG4gICAgICAgICAgICBwcm9wZXJ0aWVzXG4gICAgICAgIClcblxuICAgICAgICBpZiAoX2lzQXJyYXkodGhpcy5jb25maWcucHJvcGVydHlfZGVueWxpc3QpICYmIF9pc0FycmF5KHRoaXMuY29uZmlnLnByb3BlcnR5X2JsYWNrbGlzdCkpIHtcbiAgICAgICAgICAgIC8vIHNpbmNlIHByb3BlcnR5X2JsYWNrbGlzdCBpcyBkZXByZWNhdGVkIGluIGZhdm9yIG9mIHByb3BlcnR5X2RlbnlsaXN0LCB3ZSBtZXJnZSBib3RoIG9mIHRoZW0gaGVyZVxuICAgICAgICAgICAgLy8gVE9ETzogbWVyZ2UgdGhpcyBvbmx5IG9uY2UsIHJlcXVpcmVzIHJlZmFjdG9yaW5nIHRlc3RzXG4gICAgICAgICAgICBjb25zdCBwcm9wZXJ0eV9kZW55bGlzdCA9IFsuLi50aGlzLmNvbmZpZy5wcm9wZXJ0eV9ibGFja2xpc3QsIC4uLnRoaXMuY29uZmlnLnByb3BlcnR5X2RlbnlsaXN0XVxuICAgICAgICAgICAgX2VhY2gocHJvcGVydHlfZGVueWxpc3QsIGZ1bmN0aW9uIChkZW55bGlzdGVkX3Byb3ApIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgcHJvcGVydGllc1tkZW55bGlzdGVkX3Byb3BdXG4gICAgICAgICAgICB9KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKFxuICAgICAgICAgICAgICAgICdJbnZhbGlkIHZhbHVlIGZvciBwcm9wZXJ0eV9kZW55bGlzdCBjb25maWc6ICcgK1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5wcm9wZXJ0eV9kZW55bGlzdCArXG4gICAgICAgICAgICAgICAgICAgICcgb3IgcHJvcGVydHlfYmxhY2tsaXN0IGNvbmZpZzogJyArXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLnByb3BlcnR5X2JsYWNrbGlzdFxuICAgICAgICAgICAgKVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc2FuaXRpemVfcHJvcGVydGllcyA9IHRoaXMuY29uZmlnLnNhbml0aXplX3Byb3BlcnRpZXNcbiAgICAgICAgaWYgKHNhbml0aXplX3Byb3BlcnRpZXMpIHtcbiAgICAgICAgICAgIHByb3BlcnRpZXMgPSBzYW5pdGl6ZV9wcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGV2ZW50X25hbWUpXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcHJvcGVydGllc1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVyIGEgc2V0IG9mIHN1cGVyIHByb3BlcnRpZXMsIHdoaWNoIGFyZSBpbmNsdWRlZCB3aXRoIGFsbFxuICAgICAqIGV2ZW50cy4gVGhpcyB3aWxsIG92ZXJ3cml0ZSBwcmV2aW91cyBzdXBlciBwcm9wZXJ0eSB2YWx1ZXMsIGV4Y2VwdFxuICAgICAqIGZvciBzZXNzaW9uIHByb3BlcnRpZXMgKHNlZSBgcmVnaXN0ZXJfZm9yX3Nlc3Npb24ocHJvcGVydGllcylgKS5cbiAgICAgKlxuICAgICAqICMjIyBVc2FnZTpcbiAgICAgKlxuICAgICAqICAgICAvLyByZWdpc3RlciAnR2VuZGVyJyBhcyBhIHN1cGVyIHByb3BlcnR5XG4gICAgICogICAgIHBvc3Rob2cucmVnaXN0ZXIoeydHZW5kZXInOiAnRmVtYWxlJ30pO1xuICAgICAqXG4gICAgICogICAgIC8vIHJlZ2lzdGVyIHNldmVyYWwgc3VwZXIgcHJvcGVydGllcyB3aGVuIGEgdXNlciBzaWducyB1cFxuICAgICAqICAgICBwb3N0aG9nLnJlZ2lzdGVyKHtcbiAgICAgKiAgICAgICAgICdFbWFpbCc6ICdqZG9lQGV4YW1wbGUuY29tJyxcbiAgICAgKiAgICAgICAgICdBY2NvdW50IFR5cGUnOiAnRnJlZSdcbiAgICAgKiAgICAgfSk7XG4gICAgICpcbiAgICAgKiAgICAgLy8gRGlzcGxheSB0aGUgcHJvcGVydGllc1xuICAgICAqICAgICBjb25zb2xlLmxvZyhwb3N0aG9nLnBlcnNpc3RlbmNlLnByb3BlcnRpZXMoKSlcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wZXJ0aWVzIEFuIGFzc29jaWF0aXZlIGFycmF5IG9mIHByb3BlcnRpZXMgdG8gc3RvcmUgYWJvdXQgdGhlIHVzZXJcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gW2RheXNdIEhvdyBtYW55IGRheXMgc2luY2UgdGhlIHVzZXIncyBsYXN0IHZpc2l0IHRvIHN0b3JlIHRoZSBzdXBlciBwcm9wZXJ0aWVzXG4gICAgICovXG4gICAgcmVnaXN0ZXIocHJvcGVydGllczogUHJvcGVydGllcywgZGF5cz86IG51bWJlcik6IHZvaWQge1xuICAgICAgICB0aGlzLnBlcnNpc3RlbmNlPy5yZWdpc3Rlcihwcm9wZXJ0aWVzLCBkYXlzKVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVyIGEgc2V0IG9mIHN1cGVyIHByb3BlcnRpZXMgb25seSBvbmNlLiBUaGVzZSB3aWxsIG5vdFxuICAgICAqIG92ZXJ3cml0ZSBwcmV2aW91cyBzdXBlciBwcm9wZXJ0eSB2YWx1ZXMsIHVubGlrZSByZWdpc3RlcigpLlxuICAgICAqXG4gICAgICogIyMjIFVzYWdlOlxuICAgICAqXG4gICAgICogICAgIC8vIHJlZ2lzdGVyIGEgc3VwZXIgcHJvcGVydHkgZm9yIHRoZSBmaXJzdCB0aW1lIG9ubHlcbiAgICAgKiAgICAgcG9zdGhvZy5yZWdpc3Rlcl9vbmNlKHtcbiAgICAgKiAgICAgICAgICdGaXJzdCBMb2dpbiBEYXRlJzogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICogICAgIH0pO1xuICAgICAqXG4gICAgICogICAgIC8vIERpc3BsYXkgdGhlIHByb3BlcnRpZXNcbiAgICAgKiAgICAgY29uc29sZS5sb2cocG9zdGhvZy5wZXJzaXN0ZW5jZS5wcm9wZXJ0aWVzKCkpXG4gICAgICpcbiAgICAgKiAjIyMgTm90ZXM6XG4gICAgICpcbiAgICAgKiBJZiBkZWZhdWx0X3ZhbHVlIGlzIHNwZWNpZmllZCwgY3VycmVudCBzdXBlciBwcm9wZXJ0aWVzXG4gICAgICogd2l0aCB0aGF0IHZhbHVlIHdpbGwgYmUgb3ZlcndyaXR0ZW4uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcHJvcGVydGllcyBBbiBhc3NvY2lhdGl2ZSBhcnJheSBvZiBwcm9wZXJ0aWVzIHRvIHN0b3JlIGFib3V0IHRoZSB1c2VyXG4gICAgICogQHBhcmFtIHsqfSBbZGVmYXVsdF92YWx1ZV0gVmFsdWUgdG8gb3ZlcnJpZGUgaWYgYWxyZWFkeSBzZXQgaW4gc3VwZXIgcHJvcGVydGllcyAoZXg6ICdGYWxzZScpIERlZmF1bHQ6ICdOb25lJ1xuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBbZGF5c10gSG93IG1hbnkgZGF5cyBzaW5jZSB0aGUgdXNlcnMgbGFzdCB2aXNpdCB0byBzdG9yZSB0aGUgc3VwZXIgcHJvcGVydGllc1xuICAgICAqL1xuICAgIHJlZ2lzdGVyX29uY2UocHJvcGVydGllczogUHJvcGVydGllcywgZGVmYXVsdF92YWx1ZT86IFByb3BlcnR5LCBkYXlzPzogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIHRoaXMucGVyc2lzdGVuY2U/LnJlZ2lzdGVyX29uY2UocHJvcGVydGllcywgZGVmYXVsdF92YWx1ZSwgZGF5cylcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZWdpc3RlciBhIHNldCBvZiBzdXBlciBwcm9wZXJ0aWVzLCB3aGljaCBhcmUgaW5jbHVkZWQgd2l0aCBhbGwgZXZlbnRzLCBidXQgb25seVxuICAgICAqIGZvciBUSElTIFNFU1NJT04uIFRoZXNlIHdpbGwgb3ZlcndyaXRlIGFsbCBvdGhlciBzdXBlciBwcm9wZXJ0eSB2YWx1ZXMuXG4gICAgICpcbiAgICAgKiBVbmxpa2UgcmVndWxhciBzdXBlciBwcm9wZXJ0aWVzLCB3aGljaCBsYXN0IGluIExvY2FsU3RvcmFnZSBmb3IgYSBsb25nIHRpbWUsXG4gICAgICogc2Vzc2lvbiBzdXBlciBwcm9wZXJ0aWVzIGdldCBjbGVhcmVkIGFmdGVyIGEgc2Vzc2lvbiBlbmRzLlxuICAgICAqXG4gICAgICogIyMjIFVzYWdlOlxuICAgICAqXG4gICAgICogICAgIC8vIHJlZ2lzdGVyIG9uIGFsbCBldmVudHMgdGhpcyBzZXNzaW9uXG4gICAgICogICAgIHBvc3Rob2cucmVnaXN0ZXJfZm9yX3Nlc3Npb24oeydyZWZlcmVyJzogY3VzdG9tR2V0UmVmZXJlcigpfSk7XG4gICAgICpcbiAgICAgKiAgICAgLy8gcmVnaXN0ZXIgc2V2ZXJhbCBzZXNzaW9uIHN1cGVyIHByb3BlcnRpZXMgd2hlbiBhIHVzZXIgc2lnbnMgdXBcbiAgICAgKiAgICAgcG9zdGhvZy5yZWdpc3Rlcl9mb3Jfc2Vzc2lvbih7XG4gICAgICogICAgICAgICAnc2VsZWN0ZWRQbGFuJzogJ3BybycsXG4gICAgICogICAgICAgICAnY29tcGxldGVkU3RlcHMnOiA0LFxuICAgICAqICAgICB9KTtcbiAgICAgKlxuICAgICAqICAgICAvLyBEaXNwbGF5IHRoZSBwcm9wZXJ0aWVzXG4gICAgICogICAgIGNvbnNvbGUubG9nKHBvc3Rob2cuc2Vzc2lvblBlcnNpc3RlbmNlLnByb3BlcnRpZXMoKSlcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wZXJ0aWVzIEFuIGFzc29jaWF0aXZlIGFycmF5IG9mIHByb3BlcnRpZXMgdG8gc3RvcmUgYWJvdXQgdGhlIHVzZXJcbiAgICAgKi9cbiAgICByZWdpc3Rlcl9mb3Jfc2Vzc2lvbihwcm9wZXJ0aWVzOiBQcm9wZXJ0aWVzKTogdm9pZCB7XG4gICAgICAgIHRoaXMuc2Vzc2lvblBlcnNpc3RlbmNlPy5yZWdpc3Rlcihwcm9wZXJ0aWVzKVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERlbGV0ZSBhIHN1cGVyIHByb3BlcnR5IHN0b3JlZCB3aXRoIHRoZSBjdXJyZW50IHVzZXIuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gcHJvcGVydHkgVGhlIG5hbWUgb2YgdGhlIHN1cGVyIHByb3BlcnR5IHRvIHJlbW92ZVxuICAgICAqL1xuICAgIHVucmVnaXN0ZXIocHJvcGVydHk6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICB0aGlzLnBlcnNpc3RlbmNlPy51bnJlZ2lzdGVyKHByb3BlcnR5KVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERlbGV0ZSBhIHNlc3Npb24gc3VwZXIgcHJvcGVydHkgc3RvcmVkIHdpdGggdGhlIGN1cnJlbnQgdXNlci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0eSBUaGUgbmFtZSBvZiB0aGUgc2Vzc2lvbiBzdXBlciBwcm9wZXJ0eSB0byByZW1vdmVcbiAgICAgKi9cbiAgICB1bnJlZ2lzdGVyX2Zvcl9zZXNzaW9uKHByb3BlcnR5OiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5zZXNzaW9uUGVyc2lzdGVuY2U/LnVucmVnaXN0ZXIocHJvcGVydHkpXG4gICAgfVxuXG4gICAgX3JlZ2lzdGVyX3NpbmdsZShwcm9wOiBzdHJpbmcsIHZhbHVlOiBQcm9wZXJ0eSkge1xuICAgICAgICB0aGlzLnJlZ2lzdGVyKHsgW3Byb3BdOiB2YWx1ZSB9KVxuICAgIH1cblxuICAgIC8qXG4gICAgICogR2V0IGZlYXR1cmUgZmxhZyB2YWx1ZSBmb3IgdXNlciAoc3VwcG9ydHMgbXVsdGl2YXJpYXRlIGZsYWdzKS5cbiAgICAgKlxuICAgICAqICMjIyBVc2FnZTpcbiAgICAgKlxuICAgICAqICAgICBpZihwb3N0aG9nLmdldEZlYXR1cmVGbGFnKCdiZXRhLWZlYXR1cmUnKSA9PT0gJ3NvbWUtdmFsdWUnKSB7IC8vIGRvIHNvbWV0aGluZyB9XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdHxTdHJpbmd9IHByb3AgS2V5IG9mIHRoZSBmZWF0dXJlIGZsYWcuXG4gICAgICogQHBhcmFtIHtPYmplY3R8U3RyaW5nfSBvcHRpb25zIChvcHRpb25hbCkgSWYge3NlbmRfZXZlbnQ6IGZhbHNlfSwgd2Ugd29uJ3Qgc2VuZCBhbiAkZmVhdHVyZV9mbGFnX2NhbGwgZXZlbnQgdG8gUG9zdEhvZy5cbiAgICAgKi9cbiAgICBnZXRGZWF0dXJlRmxhZyhrZXk6IHN0cmluZywgb3B0aW9ucz86IHsgc2VuZF9ldmVudD86IGJvb2xlYW4gfSk6IGJvb2xlYW4gfCBzdHJpbmcgfCB1bmRlZmluZWQge1xuICAgICAgICByZXR1cm4gdGhpcy5mZWF0dXJlRmxhZ3MuZ2V0RmVhdHVyZUZsYWcoa2V5LCBvcHRpb25zKVxuICAgIH1cblxuICAgIC8qXG4gICAgICogR2V0IGZlYXR1cmUgZmxhZyBwYXlsb2FkIHZhbHVlIG1hdGNoaW5nIGtleSBmb3IgdXNlciAoc3VwcG9ydHMgbXVsdGl2YXJpYXRlIGZsYWdzKS5cbiAgICAgKlxuICAgICAqICMjIyBVc2FnZTpcbiAgICAgKlxuICAgICAqICAgICBpZihwb3N0aG9nLmdldEZlYXR1cmVGbGFnKCdiZXRhLWZlYXR1cmUnKSA9PT0gJ3NvbWUtdmFsdWUnKSB7XG4gICAgICogICAgICAgICAgY29uc3Qgc29tZVZhbHVlID0gcG9zdGhvZy5nZXRGZWF0dXJlRmxhZ1BheWxvYWQoJ2JldGEtZmVhdHVyZScpXG4gICAgICogICAgICAgICAgLy8gZG8gc29tZXRoaW5nXG4gICAgICogICAgIH1cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fFN0cmluZ30gcHJvcCBLZXkgb2YgdGhlIGZlYXR1cmUgZmxhZy5cbiAgICAgKi9cbiAgICBnZXRGZWF0dXJlRmxhZ1BheWxvYWQoa2V5OiBzdHJpbmcpOiBKc29uVHlwZSB7XG4gICAgICAgIGNvbnN0IHBheWxvYWQgPSB0aGlzLmZlYXR1cmVGbGFncy5nZXRGZWF0dXJlRmxhZ1BheWxvYWQoa2V5KVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UocGF5bG9hZCBhcyBhbnkpXG4gICAgICAgIH0gY2F0Y2gge1xuICAgICAgICAgICAgcmV0dXJuIHBheWxvYWRcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qXG4gICAgICogU2VlIGlmIGZlYXR1cmUgZmxhZyBpcyBlbmFibGVkIGZvciB1c2VyLlxuICAgICAqXG4gICAgICogIyMjIFVzYWdlOlxuICAgICAqXG4gICAgICogICAgIGlmKHBvc3Rob2cuaXNGZWF0dXJlRW5hYmxlZCgnYmV0YS1mZWF0dXJlJykpIHsgLy8gZG8gc29tZXRoaW5nIH1cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fFN0cmluZ30gcHJvcCBLZXkgb2YgdGhlIGZlYXR1cmUgZmxhZy5cbiAgICAgKiBAcGFyYW0ge09iamVjdHxTdHJpbmd9IG9wdGlvbnMgKG9wdGlvbmFsKSBJZiB7c2VuZF9ldmVudDogZmFsc2V9LCB3ZSB3b24ndCBzZW5kIGFuICRmZWF0dXJlX2ZsYWdfY2FsbCBldmVudCB0byBQb3N0SG9nLlxuICAgICAqL1xuICAgIGlzRmVhdHVyZUVuYWJsZWQoa2V5OiBzdHJpbmcsIG9wdGlvbnM/OiBJc0ZlYXR1cmVFbmFibGVkT3B0aW9ucyk6IGJvb2xlYW4gfCB1bmRlZmluZWQge1xuICAgICAgICByZXR1cm4gdGhpcy5mZWF0dXJlRmxhZ3MuaXNGZWF0dXJlRW5hYmxlZChrZXksIG9wdGlvbnMpXG4gICAgfVxuXG4gICAgcmVsb2FkRmVhdHVyZUZsYWdzKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmZlYXR1cmVGbGFncy5yZWxvYWRGZWF0dXJlRmxhZ3MoKVxuICAgIH1cblxuICAgIC8qKiBPcHQgdGhlIHVzZXIgaW4gb3Igb3V0IG9mIGFuIGVhcmx5IGFjY2VzcyBmZWF0dXJlLiAqL1xuICAgIHVwZGF0ZUVhcmx5QWNjZXNzRmVhdHVyZUVucm9sbG1lbnQoa2V5OiBzdHJpbmcsIGlzRW5yb2xsZWQ6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICAgICAgdGhpcy5mZWF0dXJlRmxhZ3MudXBkYXRlRWFybHlBY2Nlc3NGZWF0dXJlRW5yb2xsbWVudChrZXksIGlzRW5yb2xsZWQpXG4gICAgfVxuXG4gICAgLyoqIEdldCB0aGUgbGlzdCBvZiBlYXJseSBhY2Nlc3MgZmVhdHVyZXMuIFRvIGNoZWNrIGVucm9sbG1lbnQgc3RhdHVzLCB1c2UgYGlzRmVhdHVyZUVuYWJsZWRgLiAqL1xuICAgIGdldEVhcmx5QWNjZXNzRmVhdHVyZXMoY2FsbGJhY2s6IEVhcmx5QWNjZXNzRmVhdHVyZUNhbGxiYWNrLCBmb3JjZV9yZWxvYWQgPSBmYWxzZSk6IHZvaWQge1xuICAgICAgICByZXR1cm4gdGhpcy5mZWF0dXJlRmxhZ3MuZ2V0RWFybHlBY2Nlc3NGZWF0dXJlcyhjYWxsYmFjaywgZm9yY2VfcmVsb2FkKVxuICAgIH1cblxuICAgIC8qXG4gICAgICogUmVnaXN0ZXIgYW4gZXZlbnQgbGlzdGVuZXIgdGhhdCBydW5zIHdoZW4gZmVhdHVyZSBmbGFncyBiZWNvbWUgYXZhaWxhYmxlIG9yIHdoZW4gdGhleSBjaGFuZ2UuXG4gICAgICogSWYgdGhlcmUgYXJlIGZsYWdzLCB0aGUgbGlzdGVuZXIgaXMgY2FsbGVkIGltbWVkaWF0ZWx5IGluIGFkZGl0aW9uIHRvIGJlaW5nIGNhbGxlZCBvbiBmdXR1cmUgY2hhbmdlcy5cbiAgICAgKlxuICAgICAqICMjIyBVc2FnZTpcbiAgICAgKlxuICAgICAqICAgICBwb3N0aG9nLm9uRmVhdHVyZUZsYWdzKGZ1bmN0aW9uKGZlYXR1cmVGbGFncykgeyAvLyBkbyBzb21ldGhpbmcgfSlcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYWxsYmFja10gVGhlIGNhbGxiYWNrIGZ1bmN0aW9uIHdpbGwgYmUgY2FsbGVkIG9uY2UgdGhlIGZlYXR1cmUgZmxhZ3MgYXJlIHJlYWR5IG9yIHdoZW4gdGhleSBhcmUgdXBkYXRlZC5cbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEl0J2xsIHJldHVybiBhIGxpc3Qgb2YgZmVhdHVyZSBmbGFncyBlbmFibGVkIGZvciB0aGUgdXNlci5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IEEgZnVuY3Rpb24gdGhhdCBjYW4gYmUgY2FsbGVkIHRvIHVuc3Vic2NyaWJlIHRoZSBsaXN0ZW5lci4gVXNlZCBieSB1c2VFZmZlY3Qgd2hlbiB0aGUgY29tcG9uZW50IHVubW91bnRzLlxuICAgICAqL1xuICAgIG9uRmVhdHVyZUZsYWdzKGNhbGxiYWNrOiAoZmxhZ3M6IHN0cmluZ1tdLCB2YXJpYW50czogUmVjb3JkPHN0cmluZywgc3RyaW5nIHwgYm9vbGVhbj4pID0+IHZvaWQpOiAoKSA9PiB2b2lkIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmVhdHVyZUZsYWdzLm9uRmVhdHVyZUZsYWdzKGNhbGxiYWNrKVxuICAgIH1cblxuICAgIC8qXG4gICAgICogUmVnaXN0ZXIgYW4gZXZlbnQgbGlzdGVuZXIgdGhhdCBydW5zIHdoZW5ldmVyIHRoZSBzZXNzaW9uIGlkIG9yIHdpbmRvdyBpZCBjaGFuZ2UuXG4gICAgICogSWYgdGhlcmUgaXMgYWxyZWFkeSBhIHNlc3Npb24gaWQsIHRoZSBsaXN0ZW5lciBpcyBjYWxsZWQgaW1tZWRpYXRlbHkgaW4gYWRkaXRpb24gdG8gYmVpbmcgY2FsbGVkIG9uIGZ1dHVyZSBjaGFuZ2VzLlxuICAgICAqXG4gICAgICogQ2FuIGJlIHVzZWQsIGZvciBleGFtcGxlLCB0byBzeW5jIHRoZSBQb3N0SG9nIHNlc3Npb24gaWQgd2l0aCBhIGJhY2tlbmQgc2Vzc2lvbi5cbiAgICAgKlxuICAgICAqICMjIyBVc2FnZTpcbiAgICAgKlxuICAgICAqICAgICBwb3N0aG9nLm9uU2Vzc2lvbklkKGZ1bmN0aW9uKHNlc3Npb25JZCwgd2luZG93SWQpIHsgLy8gZG8gc29tZXRoaW5nIH0pXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2FsbGJhY2tdIFRoZSBjYWxsYmFjayBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZCBvbmNlIGEgc2Vzc2lvbiBpZCBpcyBwcmVzZW50IG9yIHdoZW4gaXQgb3IgdGhlIHdpbmRvdyBpZCBhcmUgdXBkYXRlZC5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IEEgZnVuY3Rpb24gdGhhdCBjYW4gYmUgY2FsbGVkIHRvIHVuc3Vic2NyaWJlIHRoZSBsaXN0ZW5lci4gRS5nLiBVc2VkIGJ5IHVzZUVmZmVjdCB3aGVuIHRoZSBjb21wb25lbnQgdW5tb3VudHMuXG4gICAgICovXG4gICAgb25TZXNzaW9uSWQoY2FsbGJhY2s6IFNlc3Npb25JZENoYW5nZWRDYWxsYmFjayk6ICgpID0+IHZvaWQge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXNzaW9uTWFuYWdlcj8ub25TZXNzaW9uSWQoY2FsbGJhY2spID8/ICgoKSA9PiB7fSlcbiAgICB9XG5cbiAgICAvKiogR2V0IGxpc3Qgb2YgYWxsIHN1cnZleXMuICovXG4gICAgZ2V0U3VydmV5cyhjYWxsYmFjazogU3VydmV5Q2FsbGJhY2ssIGZvcmNlUmVsb2FkID0gZmFsc2UpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5zdXJ2ZXlzLmdldFN1cnZleXMoY2FsbGJhY2ssIGZvcmNlUmVsb2FkKVxuICAgIH1cblxuICAgIC8qKiBHZXQgc3VydmV5cyB0aGF0IHNob3VsZCBiZSBlbmFibGVkIGZvciB0aGUgY3VycmVudCB1c2VyLiAqL1xuICAgIGdldEFjdGl2ZU1hdGNoaW5nU3VydmV5cyhjYWxsYmFjazogU3VydmV5Q2FsbGJhY2ssIGZvcmNlUmVsb2FkID0gZmFsc2UpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5zdXJ2ZXlzLmdldEFjdGl2ZU1hdGNoaW5nU3VydmV5cyhjYWxsYmFjaywgZm9yY2VSZWxvYWQpXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSWRlbnRpZnkgYSB1c2VyIHdpdGggYSB1bmlxdWUgSUQgaW5zdGVhZCBvZiBhIFBvc3RIb2dcbiAgICAgKiByYW5kb21seSBnZW5lcmF0ZWQgZGlzdGluY3RfaWQuIElmIHRoZSBtZXRob2QgaXMgbmV2ZXIgY2FsbGVkLFxuICAgICAqIHRoZW4gdW5pcXVlIHZpc2l0b3JzIHdpbGwgYmUgaWRlbnRpZmllZCBieSBhIFVVSUQgdGhhdCBpcyBnZW5lcmF0ZWRcbiAgICAgKiB0aGUgZmlyc3QgdGltZSB0aGV5IHZpc2l0IHRoZSBzaXRlLlxuICAgICAqXG4gICAgICogSWYgdXNlciBwcm9wZXJ0aWVzIGFyZSBwYXNzZWQsIHRoZXkgYXJlIGFsc28gc2VudCB0byBwb3N0aG9nLlxuICAgICAqXG4gICAgICogIyMjIFVzYWdlOlxuICAgICAqXG4gICAgICogICAgICBwb3N0aG9nLmlkZW50aWZ5KCdbdXNlciB1bmlxdWUgaWRdJylcbiAgICAgKiAgICAgIHBvc3Rob2cuaWRlbnRpZnkoJ1t1c2VyIHVuaXF1ZSBpZF0nLCB7IGVtYWlsOiAnam9obkBleGFtcGxlLmNvbScgfSlcbiAgICAgKiAgICAgIHBvc3Rob2cuaWRlbnRpZnkoJ1t1c2VyIHVuaXF1ZSBpZF0nLCB7fSwgeyByZWZlcnJhbF9jb2RlOiAnMTIzNDUnIH0pXG4gICAgICpcbiAgICAgKiAjIyMgTm90ZXM6XG4gICAgICpcbiAgICAgKiBZb3UgY2FuIGNhbGwgdGhpcyBmdW5jdGlvbiB0byBvdmVyd3JpdGUgYSBwcmV2aW91c2x5IHNldFxuICAgICAqIHVuaXF1ZSBJRCBmb3IgdGhlIGN1cnJlbnQgdXNlci5cbiAgICAgKlxuICAgICAqIElmIHRoZSB1c2VyIGhhcyBiZWVuIGlkZW50aWZpZWQgKCR1c2VyX3N0YXRlIGluIHBlcnNpc3RlbmNlIGlzIHNldCB0byAnaWRlbnRpZmllZCcpLFxuICAgICAqIHRoZW4gY2FwdHVyZSBvZiAkaWRlbnRpZnkgaXMgc2tpcHBlZCB0byBhdm9pZCBtZXJnaW5nIHVzZXJzLiBGb3IgZXhhbXBsZSxcbiAgICAgKiBpZiB5b3VyIHN5c3RlbSBhbGxvd3MgYW4gYWRtaW4gdXNlciB0byBpbXBlcnNvbmF0ZSBhbm90aGVyIHVzZXIuXG4gICAgICpcbiAgICAgKiBUaGVuIGEgc2luZ2xlIGJyb3dzZXIgaW5zdGFuY2UgY2FuIGhhdmU6XG4gICAgICpcbiAgICAgKiAgYGlkZW50aWZ5KCdhJykgLT4gY2FwdHVyZSgxKSAtPiBpZGVudGlmeSgnYicpIC0+IGNhcHR1cmUoMilgXG4gICAgICpcbiAgICAgKiBhbmQgY2FwdHVyZSAxIGFuZCBjYXB0dXJlIDIgd2lsbCBoYXZlIHRoZSBjb3JyZWN0IGRpc3RpbmN0X2lkLlxuICAgICAqIGJ1dCB1c2VycyBhIGFuZCBiIHdpbGwgTk9UIGJlIG1lcmdlZCBpbiBwb3N0aG9nLlxuICAgICAqXG4gICAgICogSG93ZXZlciwgaWYgcmVzZXQgaXMgY2FsbGVkIHRoZW46XG4gICAgICpcbiAgICAgKiAgYGlkZW50aWZ5KCdhJykgLT4gY2FwdHVyZSgxKSAtPiByZXNldCgpIC0+IGNhcHR1cmUoMikgLT4gaWRlbnRpZnkoJ2InKSAtPiBjYXB0dXJlKDMpYFxuICAgICAqXG4gICAgICogdXNlcnMgYSBhbmQgYiBhcmUgbm90IG1lcmdlZC5cbiAgICAgKiBDYXB0dXJlIDEgaXMgYXNzb2NpYXRlZCB3aXRoIHVzZXIgYS5cbiAgICAgKiBBIG5ldyBkaXN0aW5jdCBpZCBpcyBnZW5lcmF0ZWQgZm9yIGNhcHR1cmUgMi5cbiAgICAgKiB3aGljaCBpcyBtZXJnZWQgd2l0aCB1c2VyIGIuXG4gICAgICogU28sIGNhcHR1cmUgMiBhbmQgMyBhcmUgYXNzb2NpYXRlZCB3aXRoIHVzZXIgYi5cbiAgICAgKlxuICAgICAqIElmIHlvdSB3YW50IHRvIG1lcmdlIHR3byBpZGVudGlmaWVkIHVzZXJzLCB5b3UgY2FuIGNhbGwgcG9zdGhvZy5hbGlhc1xuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IFtuZXdfZGlzdGluY3RfaWRdIEEgc3RyaW5nIHRoYXQgdW5pcXVlbHkgaWRlbnRpZmllcyBhIHVzZXIuIElmIG5vdCBwcm92aWRlZCwgdGhlIGRpc3RpbmN0X2lkIGN1cnJlbnRseSBpbiB0aGUgcGVyc2lzdGVudCBzdG9yZSAoY29va2llIG9yIGxvY2FsU3RvcmFnZSkgd2lsbCBiZSB1c2VkLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbdXNlclByb3BlcnRpZXNUb1NldF0gT3B0aW9uYWw6IEFuIGFzc29jaWF0aXZlIGFycmF5IG9mIHByb3BlcnRpZXMgdG8gc3RvcmUgYWJvdXQgdGhlIHVzZXJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW3VzZXJQcm9wZXJ0aWVzVG9TZXRPbmNlXSBPcHRpb25hbDogQW4gYXNzb2NpYXRpdmUgYXJyYXkgb2YgcHJvcGVydGllcyB0byBzdG9yZSBhYm91dCB0aGUgdXNlci4gSWYgcHJvcGVydHkgaXMgcHJldmlvdXNseSBzZXQsIHRoaXMgZG9lcyBub3Qgb3ZlcnJpZGUgdGhhdCB2YWx1ZS5cbiAgICAgKi9cbiAgICBpZGVudGlmeShuZXdfZGlzdGluY3RfaWQ/OiBzdHJpbmcsIHVzZXJQcm9wZXJ0aWVzVG9TZXQ/OiBQcm9wZXJ0aWVzLCB1c2VyUHJvcGVydGllc1RvU2V0T25jZT86IFByb3BlcnRpZXMpOiB2b2lkIHtcbiAgICAgICAgaWYgKCF0aGlzLl9fbG9hZGVkIHx8ICF0aGlzLnBlcnNpc3RlbmNlKSB7XG4gICAgICAgICAgICByZXR1cm4gbG9nZ2VyLnVuaW5pdGlhbGl6ZWRXYXJuaW5nKCdwb3N0aG9nLmlkZW50aWZ5JylcbiAgICAgICAgfVxuICAgICAgICBpZiAoX2lzTnVtYmVyKG5ld19kaXN0aW5jdF9pZCkpIHtcbiAgICAgICAgICAgIG5ld19kaXN0aW5jdF9pZCA9IChuZXdfZGlzdGluY3RfaWQgYXMgbnVtYmVyKS50b1N0cmluZygpXG4gICAgICAgICAgICBsb2dnZXIud2FybihcbiAgICAgICAgICAgICAgICAnVGhlIGZpcnN0IGFyZ3VtZW50IHRvIHBvc3Rob2cuaWRlbnRpZnkgd2FzIGEgbnVtYmVyLCBidXQgaXQgc2hvdWxkIGJlIGEgc3RyaW5nLiBJdCBoYXMgYmVlbiBjb252ZXJ0ZWQgdG8gYSBzdHJpbmcuJ1xuICAgICAgICAgICAgKVxuICAgICAgICB9XG5cbiAgICAgICAgLy9pZiB0aGUgbmV3X2Rpc3RpbmN0X2lkIGhhcyBub3QgYmVlbiBzZXQgaWdub3JlIHRoZSBpZGVudGlmeSBldmVudFxuICAgICAgICBpZiAoIW5ld19kaXN0aW5jdF9pZCkge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdVbmlxdWUgdXNlciBpZCBoYXMgbm90IGJlZW4gc2V0IGluIHBvc3Rob2cuaWRlbnRpZnknKVxuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNEaXN0aW5jdElkU3RyaW5nTGlrZShuZXdfZGlzdGluY3RfaWQpKSB7XG4gICAgICAgICAgICBsb2dnZXIuY3JpdGljYWwoXG4gICAgICAgICAgICAgICAgYFRoZSBzdHJpbmcgXCIke25ld19kaXN0aW5jdF9pZH1cIiB3YXMgc2V0IGluIHBvc3Rob2cuaWRlbnRpZnkgd2hpY2ggaW5kaWNhdGVzIGFuIGVycm9yLiBUaGlzIElEIHNob3VsZCBiZSB1bmlxdWUgdG8gdGhlIHVzZXIgYW5kIG5vdCBhIGhhcmRjb2RlZCBzdHJpbmcuYFxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBwcmV2aW91c19kaXN0aW5jdF9pZCA9IHRoaXMuZ2V0X2Rpc3RpbmN0X2lkKClcbiAgICAgICAgdGhpcy5yZWdpc3Rlcih7ICR1c2VyX2lkOiBuZXdfZGlzdGluY3RfaWQgfSlcblxuICAgICAgICBpZiAoIXRoaXMuZ2V0X3Byb3BlcnR5KCckZGV2aWNlX2lkJykpIHtcbiAgICAgICAgICAgIC8vIFRoZSBwZXJzaXN0ZWQgZGlzdGluY3QgaWQgbWlnaHQgbm90IGFjdHVhbGx5IGJlIGEgZGV2aWNlIGlkIGF0IGFsbFxuICAgICAgICAgICAgLy8gaXQgbWlnaHQgYmUgYSBkaXN0aW5jdCBpZCBvZiB0aGUgdXNlciBmcm9tIGJlZm9yZVxuICAgICAgICAgICAgY29uc3QgZGV2aWNlX2lkID0gcHJldmlvdXNfZGlzdGluY3RfaWRcbiAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJfb25jZShcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICRoYWRfcGVyc2lzdGVkX2Rpc3RpbmN0X2lkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAkZGV2aWNlX2lkOiBkZXZpY2VfaWQsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAnJ1xuICAgICAgICAgICAgKVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gaWYgdGhlIHByZXZpb3VzIGRpc3RpbmN0IGlkIGhhZCBhbiBhbGlhcyBzdG9yZWQsIHRoZW4gd2UgY2xlYXIgaXRcbiAgICAgICAgaWYgKG5ld19kaXN0aW5jdF9pZCAhPT0gcHJldmlvdXNfZGlzdGluY3RfaWQgJiYgbmV3X2Rpc3RpbmN0X2lkICE9PSB0aGlzLmdldF9wcm9wZXJ0eShBTElBU19JRF9LRVkpKSB7XG4gICAgICAgICAgICB0aGlzLnVucmVnaXN0ZXIoQUxJQVNfSURfS0VZKVxuICAgICAgICAgICAgdGhpcy5yZWdpc3Rlcih7IGRpc3RpbmN0X2lkOiBuZXdfZGlzdGluY3RfaWQgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGlzS25vd25Bbm9ueW1vdXMgPSB0aGlzLnBlcnNpc3RlbmNlLmdldF91c2VyX3N0YXRlKCkgPT09ICdhbm9ueW1vdXMnXG5cbiAgICAgICAgLy8gc2VuZCBhbiAkaWRlbnRpZnkgZXZlbnQgYW55IHRpbWUgdGhlIGRpc3RpbmN0X2lkIGlzIGNoYW5naW5nIGFuZCB0aGUgb2xkIElEIGlzIGFuIGFub3ltb3VzIElEXG4gICAgICAgIC8vIC0gbG9naWMgb24gdGhlIHNlcnZlciB3aWxsIGRldGVybWluZSB3aGV0aGVyIG9yIG5vdCB0byBkbyBhbnl0aGluZyB3aXRoIGl0LlxuICAgICAgICBpZiAobmV3X2Rpc3RpbmN0X2lkICE9PSBwcmV2aW91c19kaXN0aW5jdF9pZCAmJiBpc0tub3duQW5vbnltb3VzKSB7XG4gICAgICAgICAgICB0aGlzLnBlcnNpc3RlbmNlLnNldF91c2VyX3N0YXRlKCdpZGVudGlmaWVkJylcblxuICAgICAgICAgICAgLy8gVXBkYXRlIGN1cnJlbnQgdXNlciBwcm9wZXJ0aWVzXG4gICAgICAgICAgICB0aGlzLnNldFBlcnNvblByb3BlcnRpZXNGb3JGbGFncyh1c2VyUHJvcGVydGllc1RvU2V0IHx8IHt9LCBmYWxzZSlcblxuICAgICAgICAgICAgdGhpcy5jYXB0dXJlKFxuICAgICAgICAgICAgICAgICckaWRlbnRpZnknLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgZGlzdGluY3RfaWQ6IG5ld19kaXN0aW5jdF9pZCxcbiAgICAgICAgICAgICAgICAgICAgJGFub25fZGlzdGluY3RfaWQ6IHByZXZpb3VzX2Rpc3RpbmN0X2lkLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgeyAkc2V0OiB1c2VyUHJvcGVydGllc1RvU2V0IHx8IHt9LCAkc2V0X29uY2U6IHVzZXJQcm9wZXJ0aWVzVG9TZXRPbmNlIHx8IHt9IH1cbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIC8vIGxldCB0aGUgcmVsb2FkIGZlYXR1cmUgZmxhZyByZXF1ZXN0IGtub3cgdG8gc2VuZCB0aGlzIHByZXZpb3VzIGRpc3RpbmN0IGlkXG4gICAgICAgICAgICAvLyBmb3IgZmxhZyBjb25zaXN0ZW5jeVxuICAgICAgICAgICAgdGhpcy5mZWF0dXJlRmxhZ3Muc2V0QW5vbnltb3VzRGlzdGluY3RJZChwcmV2aW91c19kaXN0aW5jdF9pZClcbiAgICAgICAgfSBlbHNlIGlmICh1c2VyUHJvcGVydGllc1RvU2V0IHx8IHVzZXJQcm9wZXJ0aWVzVG9TZXRPbmNlKSB7XG4gICAgICAgICAgICAvLyBJZiB0aGUgZGlzdGluY3RfaWQgaXMgbm90IGNoYW5naW5nLCBidXQgd2UgaGF2ZSB1c2VyIHByb3BlcnRpZXMgdG8gc2V0LCB3ZSBjYW4gZ28gZm9yIGEgJHNldCBldmVudFxuICAgICAgICAgICAgdGhpcy5zZXRQZXJzb25Qcm9wZXJ0aWVzKHVzZXJQcm9wZXJ0aWVzVG9TZXQsIHVzZXJQcm9wZXJ0aWVzVG9TZXRPbmNlKVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gUmVsb2FkIGFjdGl2ZSBmZWF0dXJlIGZsYWdzIGlmIHRoZSB1c2VyIGlkZW50aXR5IGNoYW5nZXMuXG4gICAgICAgIC8vIE5vdGUgd2UgZG9uJ3QgcmVsb2FkIHRoaXMgb24gcHJvcGVydHkgY2hhbmdlcyBhcyB0aGVzZSBnZXQgcHJvY2Vzc2VkIGFzeW5jXG4gICAgICAgIGlmIChuZXdfZGlzdGluY3RfaWQgIT09IHByZXZpb3VzX2Rpc3RpbmN0X2lkKSB7XG4gICAgICAgICAgICB0aGlzLnJlbG9hZEZlYXR1cmVGbGFncygpXG4gICAgICAgICAgICAvLyBhbHNvIGNsZWFyIGFueSBzdG9yZWQgZmxhZyBjYWxsc1xuICAgICAgICAgICAgdGhpcy51bnJlZ2lzdGVyKEZMQUdfQ0FMTF9SRVBPUlRFRClcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMgcHJvcGVydGllcyBmb3IgdGhlIFBlcnNvbiBhc3NvY2lhdGVkIHdpdGggdGhlIGN1cnJlbnQgZGlzdGluY3RfaWQuXG4gICAgICpcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbdXNlclByb3BlcnRpZXNUb1NldF0gT3B0aW9uYWw6IEFuIGFzc29jaWF0aXZlIGFycmF5IG9mIHByb3BlcnRpZXMgdG8gc3RvcmUgYWJvdXQgdGhlIHVzZXJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW3VzZXJQcm9wZXJ0aWVzVG9TZXRPbmNlXSBPcHRpb25hbDogQW4gYXNzb2NpYXRpdmUgYXJyYXkgb2YgcHJvcGVydGllcyB0byBzdG9yZSBhYm91dCB0aGUgdXNlci4gSWYgcHJvcGVydHkgaXMgcHJldmlvdXNseSBzZXQsIHRoaXMgZG9lcyBub3Qgb3ZlcnJpZGUgdGhhdCB2YWx1ZS5cbiAgICAgKi9cbiAgICBzZXRQZXJzb25Qcm9wZXJ0aWVzKHVzZXJQcm9wZXJ0aWVzVG9TZXQ/OiBQcm9wZXJ0aWVzLCB1c2VyUHJvcGVydGllc1RvU2V0T25jZT86IFByb3BlcnRpZXMpOiB2b2lkIHtcbiAgICAgICAgaWYgKCF1c2VyUHJvcGVydGllc1RvU2V0ICYmICF1c2VyUHJvcGVydGllc1RvU2V0T25jZSkge1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cblxuICAgICAgICAvLyBVcGRhdGUgY3VycmVudCB1c2VyIHByb3BlcnRpZXNcbiAgICAgICAgdGhpcy5zZXRQZXJzb25Qcm9wZXJ0aWVzRm9yRmxhZ3ModXNlclByb3BlcnRpZXNUb1NldCB8fCB7fSlcblxuICAgICAgICB0aGlzLmNhcHR1cmUoJyRzZXQnLCB7ICRzZXQ6IHVzZXJQcm9wZXJ0aWVzVG9TZXQgfHwge30sICRzZXRfb25jZTogdXNlclByb3BlcnRpZXNUb1NldE9uY2UgfHwge30gfSlcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBbHBoYSBmZWF0dXJlOiBkb24ndCB1c2UgdW5sZXNzIHlvdSBrbm93IHdoYXQgeW91J3JlIGRvaW5nIVxuICAgICAqXG4gICAgICogU2V0cyBncm91cCBhbmFseXRpY3MgaW5mb3JtYXRpb24gZm9yIHN1YnNlcXVlbnQgZXZlbnRzIGFuZCByZWxvYWRzIGZlYXR1cmUgZmxhZ3MuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZ3JvdXBUeXBlIEdyb3VwIHR5cGUgKGV4YW1wbGU6ICdvcmdhbml6YXRpb24nKVxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBncm91cEtleSBHcm91cCBrZXkgKGV4YW1wbGU6ICdvcmc6OjUnKVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBncm91cFByb3BlcnRpZXNUb1NldCBPcHRpb25hbCBwcm9wZXJ0aWVzIHRvIHNldCBmb3IgZ3JvdXBcbiAgICAgKi9cbiAgICBncm91cChncm91cFR5cGU6IHN0cmluZywgZ3JvdXBLZXk6IHN0cmluZywgZ3JvdXBQcm9wZXJ0aWVzVG9TZXQ/OiBQcm9wZXJ0aWVzKTogdm9pZCB7XG4gICAgICAgIGlmICghZ3JvdXBUeXBlIHx8ICFncm91cEtleSkge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdwb3N0aG9nLmdyb3VwIHJlcXVpcmVzIGEgZ3JvdXAgdHlwZSBhbmQgZ3JvdXAga2V5JylcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZXhpc3RpbmdHcm91cHMgPSB0aGlzLmdldEdyb3VwcygpXG5cbiAgICAgICAgLy8gaWYgZ3JvdXAga2V5IGNoYW5nZXMsIHJlbW92ZSBzdG9yZWQgZ3JvdXAgcHJvcGVydGllc1xuICAgICAgICBpZiAoZXhpc3RpbmdHcm91cHNbZ3JvdXBUeXBlXSAhPT0gZ3JvdXBLZXkpIHtcbiAgICAgICAgICAgIHRoaXMucmVzZXRHcm91cFByb3BlcnRpZXNGb3JGbGFncyhncm91cFR5cGUpXG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnJlZ2lzdGVyKHsgJGdyb3VwczogeyAuLi5leGlzdGluZ0dyb3VwcywgW2dyb3VwVHlwZV06IGdyb3VwS2V5IH0gfSlcblxuICAgICAgICBpZiAoZ3JvdXBQcm9wZXJ0aWVzVG9TZXQpIHtcbiAgICAgICAgICAgIHRoaXMuY2FwdHVyZSgnJGdyb3VwaWRlbnRpZnknLCB7XG4gICAgICAgICAgICAgICAgJGdyb3VwX3R5cGU6IGdyb3VwVHlwZSxcbiAgICAgICAgICAgICAgICAkZ3JvdXBfa2V5OiBncm91cEtleSxcbiAgICAgICAgICAgICAgICAkZ3JvdXBfc2V0OiBncm91cFByb3BlcnRpZXNUb1NldCxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB0aGlzLnNldEdyb3VwUHJvcGVydGllc0ZvckZsYWdzKHsgW2dyb3VwVHlwZV06IGdyb3VwUHJvcGVydGllc1RvU2V0IH0pXG4gICAgICAgIH1cblxuICAgICAgICAvLyBJZiBncm91cHMgY2hhbmdlIGFuZCBubyBwcm9wZXJ0aWVzIGNoYW5nZSwgcmVsb2FkIGZlYXR1cmUgZmxhZ3MuXG4gICAgICAgIC8vIFRoZSBwcm9wZXJ0eSBjaGFuZ2UgcmVsb2FkIGNhc2UgaXMgaGFuZGxlZCBpbiBzZXRHcm91cFByb3BlcnRpZXNGb3JGbGFncy5cbiAgICAgICAgaWYgKGV4aXN0aW5nR3JvdXBzW2dyb3VwVHlwZV0gIT09IGdyb3VwS2V5ICYmICFncm91cFByb3BlcnRpZXNUb1NldCkge1xuICAgICAgICAgICAgdGhpcy5yZWxvYWRGZWF0dXJlRmxhZ3MoKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVzZXRzIG9ubHkgdGhlIGdyb3VwIHByb3BlcnRpZXMgb2YgdGhlIHVzZXIgY3VycmVudGx5IGxvZ2dlZCBpbi5cbiAgICAgKi9cbiAgICByZXNldEdyb3VwcygpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5yZWdpc3Rlcih7ICRncm91cHM6IHt9IH0pXG4gICAgICAgIHRoaXMucmVzZXRHcm91cFByb3BlcnRpZXNGb3JGbGFncygpXG5cbiAgICAgICAgLy8gSWYgZ3JvdXBzIGNoYW5nZWQsIHJlbG9hZCBmZWF0dXJlIGZsYWdzLlxuICAgICAgICB0aGlzLnJlbG9hZEZlYXR1cmVGbGFncygpXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IG92ZXJyaWRlIHBlcnNvbiBwcm9wZXJ0aWVzIGZvciBmZWF0dXJlIGZsYWdzLlxuICAgICAqIFRoaXMgaXMgdXNlZCB3aGVuIGRlYWxpbmcgd2l0aCBuZXcgcGVyc29ucyAvIHdoZXJlIHlvdSBkb24ndCB3YW50IHRvIHdhaXQgZm9yIGluZ2VzdGlvblxuICAgICAqIHRvIHVwZGF0ZSB1c2VyIHByb3BlcnRpZXMuXG4gICAgICovXG4gICAgc2V0UGVyc29uUHJvcGVydGllc0ZvckZsYWdzKHByb3BlcnRpZXM6IFByb3BlcnRpZXMsIHJlbG9hZEZlYXR1cmVGbGFncyA9IHRydWUpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5mZWF0dXJlRmxhZ3Muc2V0UGVyc29uUHJvcGVydGllc0ZvckZsYWdzKHByb3BlcnRpZXMsIHJlbG9hZEZlYXR1cmVGbGFncylcbiAgICB9XG5cbiAgICByZXNldFBlcnNvblByb3BlcnRpZXNGb3JGbGFncygpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5mZWF0dXJlRmxhZ3MucmVzZXRQZXJzb25Qcm9wZXJ0aWVzRm9yRmxhZ3MoKVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCBvdmVycmlkZSBncm91cCBwcm9wZXJ0aWVzIGZvciBmZWF0dXJlIGZsYWdzLlxuICAgICAqIFRoaXMgaXMgdXNlZCB3aGVuIGRlYWxpbmcgd2l0aCBuZXcgZ3JvdXBzIC8gd2hlcmUgeW91IGRvbid0IHdhbnQgdG8gd2FpdCBmb3IgaW5nZXN0aW9uXG4gICAgICogdG8gdXBkYXRlIHByb3BlcnRpZXMuXG4gICAgICogVGFrZXMgaW4gYW4gb2JqZWN0LCB0aGUga2V5IG9mIHdoaWNoIGlzIHRoZSBncm91cCB0eXBlLlxuICAgICAqIEZvciBleGFtcGxlOlxuICAgICAqICAgICBzZXRHcm91cFByb3BlcnRpZXNGb3JGbGFncyh7J29yZ2FuaXphdGlvbic6IHsgbmFtZTogJ0NZWicsIGVtcGxveWVlczogJzExJyB9IH0pXG4gICAgICovXG4gICAgc2V0R3JvdXBQcm9wZXJ0aWVzRm9yRmxhZ3MocHJvcGVydGllczogeyBbdHlwZTogc3RyaW5nXTogUHJvcGVydGllcyB9LCByZWxvYWRGZWF0dXJlRmxhZ3MgPSB0cnVlKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZmVhdHVyZUZsYWdzLnNldEdyb3VwUHJvcGVydGllc0ZvckZsYWdzKHByb3BlcnRpZXMsIHJlbG9hZEZlYXR1cmVGbGFncylcbiAgICB9XG5cbiAgICByZXNldEdyb3VwUHJvcGVydGllc0ZvckZsYWdzKGdyb3VwX3R5cGU/OiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5mZWF0dXJlRmxhZ3MucmVzZXRHcm91cFByb3BlcnRpZXNGb3JGbGFncyhncm91cF90eXBlKVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENsZWFycyBzdXBlciBwcm9wZXJ0aWVzIGFuZCBnZW5lcmF0ZXMgYSBuZXcgcmFuZG9tIGRpc3RpbmN0X2lkIGZvciB0aGlzIGluc3RhbmNlLlxuICAgICAqIFVzZWZ1bCBmb3IgY2xlYXJpbmcgZGF0YSB3aGVuIGEgdXNlciBsb2dzIG91dC5cbiAgICAgKi9cbiAgICByZXNldChyZXNldF9kZXZpY2VfaWQ/OiBib29sZWFuKTogdm9pZCB7XG4gICAgICAgIGlmICghdGhpcy5fX2xvYWRlZCkge1xuICAgICAgICAgICAgcmV0dXJuIGxvZ2dlci51bmluaXRpYWxpemVkV2FybmluZygncG9zdGhvZy5yZXNldCcpXG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZGV2aWNlX2lkID0gdGhpcy5nZXRfcHJvcGVydHkoJyRkZXZpY2VfaWQnKVxuICAgICAgICB0aGlzLnBlcnNpc3RlbmNlPy5jbGVhcigpXG4gICAgICAgIHRoaXMuc2Vzc2lvblBlcnNpc3RlbmNlPy5jbGVhcigpXG4gICAgICAgIHRoaXMucGVyc2lzdGVuY2U/LnNldF91c2VyX3N0YXRlKCdhbm9ueW1vdXMnKVxuICAgICAgICB0aGlzLnNlc3Npb25NYW5hZ2VyPy5yZXNldFNlc3Npb25JZCgpXG4gICAgICAgIGNvbnN0IHV1aWQgPSB0aGlzLmNvbmZpZy5nZXRfZGV2aWNlX2lkKHV1aWR2NygpKVxuICAgICAgICB0aGlzLnJlZ2lzdGVyX29uY2UoXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZGlzdGluY3RfaWQ6IHV1aWQsXG4gICAgICAgICAgICAgICAgJGRldmljZV9pZDogcmVzZXRfZGV2aWNlX2lkID8gdXVpZCA6IGRldmljZV9pZCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnJ1xuICAgICAgICApXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgY3VycmVudCBkaXN0aW5jdCBpZCBvZiB0aGUgdXNlci4gVGhpcyBpcyBlaXRoZXIgdGhlIGlkIGF1dG9tYXRpY2FsbHlcbiAgICAgKiBnZW5lcmF0ZWQgYnkgdGhlIGxpYnJhcnkgb3IgdGhlIGlkIHRoYXQgaGFzIGJlZW4gcGFzc2VkIGJ5IGEgY2FsbCB0byBpZGVudGlmeSgpLlxuICAgICAqXG4gICAgICogIyMjIE5vdGVzOlxuICAgICAqXG4gICAgICogZ2V0X2Rpc3RpbmN0X2lkKCkgY2FuIG9ubHkgYmUgY2FsbGVkIGFmdGVyIHRoZSBQb3N0SG9nIGxpYnJhcnkgaGFzIGZpbmlzaGVkIGxvYWRpbmcuXG4gICAgICogaW5pdCgpIGhhcyBhIGxvYWRlZCBmdW5jdGlvbiBhdmFpbGFibGUgdG8gaGFuZGxlIHRoaXMgYXV0b21hdGljYWxseS4gRm9yIGV4YW1wbGU6XG4gICAgICpcbiAgICAgKiAgICAgLy8gc2V0IGRpc3RpbmN0X2lkIGFmdGVyIHRoZSBwb3N0aG9nIGxpYnJhcnkgaGFzIGxvYWRlZFxuICAgICAqICAgICBwb3N0aG9nLmluaXQoJ1lPVVIgUFJPSkVDVCBUT0tFTicsIHtcbiAgICAgKiAgICAgICAgIGxvYWRlZDogZnVuY3Rpb24ocG9zdGhvZykge1xuICAgICAqICAgICAgICAgICAgIGRpc3RpbmN0X2lkID0gcG9zdGhvZy5nZXRfZGlzdGluY3RfaWQoKTtcbiAgICAgKiAgICAgICAgIH1cbiAgICAgKiAgICAgfSk7XG4gICAgICovXG4gICAgZ2V0X2Rpc3RpbmN0X2lkKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldF9wcm9wZXJ0eSgnZGlzdGluY3RfaWQnKVxuICAgIH1cblxuICAgIGdldEdyb3VwcygpOiBSZWNvcmQ8c3RyaW5nLCBhbnk+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0X3Byb3BlcnR5KCckZ3JvdXBzJykgfHwge31cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBjdXJyZW50IHNlc3Npb25faWQuXG4gICAgICpcbiAgICAgKiBOT1RFOiBUaGlzIHNob3VsZCBvbmx5IGJlIHVzZWQgZm9yIGluZm9ybWF0aXZlIHB1cnBvc2VzLlxuICAgICAqIEFueSBhY3R1YWwgaW50ZXJuYWwgdXNlIGNhc2UgZm9yIHRoZSBzZXNzaW9uX2lkIHNob3VsZCBiZSBoYW5kbGVkIGJ5IHRoZSBzZXNzaW9uTWFuYWdlci5cbiAgICAgKi9cblxuICAgIGdldF9zZXNzaW9uX2lkKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlc3Npb25NYW5hZ2VyPy5jaGVja0FuZEdldFNlc3Npb25BbmRXaW5kb3dJZCh0cnVlKS5zZXNzaW9uSWQgPz8gJydcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBSZXBsYXkgdXJsIGZvciB0aGUgY3VycmVudCBzZXNzaW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIG9wdGlvbnMgT3B0aW9ucyBmb3IgdGhlIHVybFxuICAgICAqIEBwYXJhbSBvcHRpb25zLndpdGhUaW1lc3RhbXAgV2hldGhlciB0byBpbmNsdWRlIHRoZSB0aW1lc3RhbXAgaW4gdGhlIHVybCAoZGVmYXVsdHMgdG8gZmFsc2UpXG4gICAgICogQHBhcmFtIG9wdGlvbnMudGltZXN0YW1wTG9va0JhY2sgSG93IG1hbnkgc2Vjb25kcyB0byBsb29rIGJhY2sgZm9yIHRoZSB0aW1lc3RhbXAgKGRlZmF1bHRzIHRvIDEwKVxuICAgICAqL1xuICAgIGdldF9zZXNzaW9uX3JlcGxheV91cmwob3B0aW9ucz86IHsgd2l0aFRpbWVzdGFtcD86IGJvb2xlYW47IHRpbWVzdGFtcExvb2tCYWNrPzogbnVtYmVyIH0pOiBzdHJpbmcge1xuICAgICAgICBpZiAoIXRoaXMuc2Vzc2lvbk1hbmFnZXIpIHtcbiAgICAgICAgICAgIHJldHVybiAnJ1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsgc2Vzc2lvbklkLCBzZXNzaW9uU3RhcnRUaW1lc3RhbXAgfSA9IHRoaXMuc2Vzc2lvbk1hbmFnZXIuY2hlY2tBbmRHZXRTZXNzaW9uQW5kV2luZG93SWQodHJ1ZSlcbiAgICAgICAgbGV0IHVybCA9IHRoaXMucmVxdWVzdFJvdXRlci5lbmRwb2ludEZvcigndWknLCAnL3JlcGxheS8nICsgc2Vzc2lvbklkKVxuICAgICAgICBpZiAob3B0aW9ucz8ud2l0aFRpbWVzdGFtcCAmJiBzZXNzaW9uU3RhcnRUaW1lc3RhbXApIHtcbiAgICAgICAgICAgIGNvbnN0IExPT0tfQkFDSyA9IG9wdGlvbnMudGltZXN0YW1wTG9va0JhY2sgPz8gMTBcbiAgICAgICAgICAgIGlmICghc2Vzc2lvblN0YXJ0VGltZXN0YW1wKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVybFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmVjb3JkaW5nU3RhcnRUaW1lID0gTWF0aC5tYXgoXG4gICAgICAgICAgICAgICAgTWF0aC5mbG9vcigobmV3IERhdGUoKS5nZXRUaW1lKCkgLSBzZXNzaW9uU3RhcnRUaW1lc3RhbXApIC8gMTAwMCkgLSBMT09LX0JBQ0ssXG4gICAgICAgICAgICAgICAgMFxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgdXJsICs9IGA/dD0ke3JlY29yZGluZ1N0YXJ0VGltZX1gXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdXJsXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGFuIGFsaWFzLCB3aGljaCBQb3N0SG9nIHdpbGwgdXNlIHRvIGxpbmsgdHdvIGRpc3RpbmN0X2lkcyBnb2luZyBmb3J3YXJkIChub3QgcmV0cm9hY3RpdmVseSkuXG4gICAgICogTXVsdGlwbGUgYWxpYXNlcyBjYW4gbWFwIHRvIHRoZSBzYW1lIG9yaWdpbmFsIElELCBidXQgbm90IHZpY2UtdmVyc2EuIEFsaWFzZXMgY2FuIGFsc28gYmUgY2hhaW5lZCAtIHRoZVxuICAgICAqIGZvbGxvd2luZyBpcyBhIHZhbGlkIHNjZW5hcmlvOlxuICAgICAqXG4gICAgICogICAgIHBvc3Rob2cuYWxpYXMoJ25ld19pZCcsICdleGlzdGluZ19pZCcpO1xuICAgICAqICAgICAuLi5cbiAgICAgKiAgICAgcG9zdGhvZy5hbGlhcygnbmV3ZXJfaWQnLCAnbmV3X2lkJyk7XG4gICAgICpcbiAgICAgKiBJZiB0aGUgb3JpZ2luYWwgSUQgaXMgbm90IHBhc3NlZCBpbiwgd2Ugd2lsbCB1c2UgdGhlIGN1cnJlbnQgZGlzdGluY3RfaWQgLSBwcm9iYWJseSB0aGUgYXV0by1nZW5lcmF0ZWQgR1VJRC5cbiAgICAgKlxuICAgICAqICMjIyBOb3RlczpcbiAgICAgKlxuICAgICAqIFRoZSBiZXN0IHByYWN0aWNlIGlzIHRvIGNhbGwgYWxpYXMoKSB3aGVuIGEgdW5pcXVlIElEIGlzIGZpcnN0IGNyZWF0ZWQgZm9yIGEgdXNlclxuICAgICAqIChlLmcuLCB3aGVuIGEgdXNlciBmaXJzdCByZWdpc3RlcnMgZm9yIGFuIGFjY291bnQgYW5kIHByb3ZpZGVzIGFuIGVtYWlsIGFkZHJlc3MpLlxuICAgICAqIGFsaWFzKCkgc2hvdWxkIG5ldmVyIGJlIGNhbGxlZCBtb3JlIHRoYW4gb25jZSBmb3IgYSBnaXZlbiB1c2VyLCBleGNlcHQgdG9cbiAgICAgKiBjaGFpbiBhIG5ld2VyIElEIHRvIGEgcHJldmlvdXNseSBuZXcgSUQsIGFzIGRlc2NyaWJlZCBhYm92ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBhbGlhcyBBIHVuaXF1ZSBpZGVudGlmaWVyIHRoYXQgeW91IHdhbnQgdG8gdXNlIGZvciB0aGlzIHVzZXIgaW4gdGhlIGZ1dHVyZS5cbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gW29yaWdpbmFsXSBUaGUgY3VycmVudCBpZGVudGlmaWVyIGJlaW5nIHVzZWQgZm9yIHRoaXMgdXNlci5cbiAgICAgKi9cbiAgICBhbGlhcyhhbGlhczogc3RyaW5nLCBvcmlnaW5hbD86IHN0cmluZyk6IENhcHR1cmVSZXN1bHQgfCB2b2lkIHwgbnVtYmVyIHtcbiAgICAgICAgLy8gSWYgdGhlICRwZW9wbGVfZGlzdGluY3RfaWQga2V5IGV4aXN0cyBpbiBwZXJzaXN0ZW5jZSwgdGhlcmUgaGFzIGJlZW4gYSBwcmV2aW91c1xuICAgICAgICAvLyBwb3N0aG9nLnBlb3BsZS5pZGVudGlmeSgpIGNhbGwgbWFkZSBmb3IgdGhpcyB1c2VyLiBJdCBpcyBWRVJZIEJBRCB0byBtYWtlIGFuIGFsaWFzIHdpdGhcbiAgICAgICAgLy8gdGhpcyBJRCwgYXMgaXQgd2lsbCBkdXBsaWNhdGUgdXNlcnMuXG4gICAgICAgIGlmIChhbGlhcyA9PT0gdGhpcy5nZXRfcHJvcGVydHkoUEVPUExFX0RJU1RJTkNUX0lEX0tFWSkpIHtcbiAgICAgICAgICAgIGxvZ2dlci5jcml0aWNhbCgnQXR0ZW1wdGluZyB0byBjcmVhdGUgYWxpYXMgZm9yIGV4aXN0aW5nIFBlb3BsZSB1c2VyIC0gYWJvcnRpbmcuJylcbiAgICAgICAgICAgIHJldHVybiAtMlxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKF9pc1VuZGVmaW5lZChvcmlnaW5hbCkpIHtcbiAgICAgICAgICAgIG9yaWdpbmFsID0gdGhpcy5nZXRfZGlzdGluY3RfaWQoKVxuICAgICAgICB9XG4gICAgICAgIGlmIChhbGlhcyAhPT0gb3JpZ2luYWwpIHtcbiAgICAgICAgICAgIHRoaXMuX3JlZ2lzdGVyX3NpbmdsZShBTElBU19JRF9LRVksIGFsaWFzKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2FwdHVyZSgnJGNyZWF0ZV9hbGlhcycsIHsgYWxpYXM6IGFsaWFzLCBkaXN0aW5jdF9pZDogb3JpZ2luYWwgfSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKCdhbGlhcyBtYXRjaGVzIGN1cnJlbnQgZGlzdGluY3RfaWQgLSBza2lwcGluZyBhcGkgY2FsbC4nKVxuICAgICAgICAgICAgdGhpcy5pZGVudGlmeShhbGlhcylcbiAgICAgICAgICAgIHJldHVybiAtMVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlIHRoZSBjb25maWd1cmF0aW9uIG9mIGEgcG9zdGhvZyBsaWJyYXJ5IGluc3RhbmNlLlxuICAgICAqXG4gICAgICogVGhlIGRlZmF1bHQgY29uZmlnIGlzOlxuICAgICAqXG4gICAgICogICAgIHtcbiAgICAgKiAgICAgICAvLyBQb3N0SG9nIEFQSSBob3N0XG4gICAgICogICAgICAgYXBpX2hvc3Q6ICdodHRwczovL2FwcC5wb3N0aG9nLmNvbScsXG4gICAgICogICAgICpcbiAgICAgKiAgICAgICAvLyBQb3N0SG9nIHdlYiBhcHAgaG9zdCwgY3VycmVudGx5IG9ubHkgdXNlZCBieSB0aGUgU2VudHJ5IGludGVncmF0aW9uLlxuICAgICAqICAgICAgIC8vIFRoaXMgd2lsbCBvbmx5IGJlIGRpZmZlcmVudCBmcm9tIGFwaV9ob3N0IHdoZW4gdXNpbmcgYSByZXZlcnNlLXByb3hpZWQgQVBJIGhvc3QgXHUyMDEzIGluIHRoYXQgY2FzZVxuICAgICAqICAgICAgIC8vIHRoZSBvcmlnaW5hbCB3ZWIgYXBwIGhvc3QgbmVlZHMgdG8gYmUgcGFzc2VkIGhlcmUgc28gdGhhdCBsaW5rcyB0byB0aGUgd2ViIGFwcCBhcmUgc3RpbGwgY29udmVuaWVudC5cbiAgICAgKiAgICAgICB1aV9ob3N0OiAnaHR0cHM6Ly9hcHAucG9zdGhvZy5jb20nLFxuICAgICAqXG4gICAgICogICAgICAgLy8gQXV0b21hdGljYWxseSBjYXB0dXJlIGNsaWNrcywgZm9ybSBzdWJtaXNzaW9ucyBhbmQgY2hhbmdlIGV2ZW50c1xuICAgICAqICAgICAgIGF1dG9jYXB0dXJlOiB0cnVlXG4gICAgICpcbiAgICAgKiAgICAgICAvLyBDYXB0dXJlIHJhZ2UgY2xpY2tzXG4gICAgICogICAgICAgcmFnZWNsaWNrOiB0cnVlXG4gICAgICpcbiAgICAgKiAgICAgICAvLyB0cmFuc3BvcnQgZm9yIHNlbmRpbmcgcmVxdWVzdHMgKCdYSFInIG9yICdzZW5kQmVhY29uJylcbiAgICAgKiAgICAgICAvLyBOQjogc2VuZEJlYWNvbiBzaG91bGQgb25seSBiZSB1c2VkIGZvciBzY2VuYXJpb3Mgc3VjaCBhc1xuICAgICAqICAgICAgIC8vIHBhZ2UgdW5sb2FkIHdoZXJlIGEgXCJiZXN0LWVmZm9ydFwiIGF0dGVtcHQgdG8gc2VuZCBpc1xuICAgICAqICAgICAgIC8vIGFjY2VwdGFibGU7IHRoZSBzZW5kQmVhY29uIEFQSSBkb2VzIG5vdCBzdXBwb3J0IGNhbGxiYWNrc1xuICAgICAqICAgICAgIC8vIG9yIGFueSB3YXkgdG8ga25vdyB0aGUgcmVzdWx0IG9mIHRoZSByZXF1ZXN0LiBQb3N0SG9nXG4gICAgICogICAgICAgLy8gY2FwdHVyaW5nIHZpYSBzZW5kQmVhY29uIHdpbGwgbm90IHN1cHBvcnQgYW55IGV2ZW50LVxuICAgICAqICAgICAgIC8vIGJhdGNoaW5nIG9yIHJldHJ5IG1lY2hhbmlzbXMuXG4gICAgICogICAgICAgYXBpX3RyYW5zcG9ydDogJ1hIUidcbiAgICAgKlxuICAgICAqICAgICAgIC8vIHN1cGVyIHByb3BlcnRpZXMgY29va2llIGV4cGlyYXRpb24gKGluIGRheXMpXG4gICAgICogICAgICAgY29va2llX2V4cGlyYXRpb246IDM2NVxuICAgICAqXG4gICAgICogICAgICAgLy8gc3VwZXIgcHJvcGVydGllcyBzcGFuIHN1YmRvbWFpbnNcbiAgICAgKiAgICAgICBjcm9zc19zdWJkb21haW5fY29va2llOiB0cnVlXG4gICAgICpcbiAgICAgKiAgICAgICAvLyBkZWJ1ZyBtb2RlXG4gICAgICogICAgICAgZGVidWc6IGZhbHNlXG4gICAgICpcbiAgICAgKiAgICAgICAvLyBpZiB0aGlzIGlzIHRydWUsIHRoZSBwb3N0aG9nIGNvb2tpZSBvciBsb2NhbFN0b3JhZ2UgZW50cnlcbiAgICAgKiAgICAgICAvLyB3aWxsIGJlIGRlbGV0ZWQsIGFuZCBubyB1c2VyIHBlcnNpc3RlbmNlIHdpbGwgdGFrZSBwbGFjZVxuICAgICAqICAgICAgIGRpc2FibGVfcGVyc2lzdGVuY2U6IGZhbHNlXG4gICAgICpcbiAgICAgKiAgICAgICAvLyBpZiB0aGlzIGlzIHRydWUsIFBvc3RIb2cgd2lsbCBhdXRvbWF0aWNhbGx5IGRldGVybWluZVxuICAgICAqICAgICAgIC8vIENpdHksIFJlZ2lvbiBhbmQgQ291bnRyeSBkYXRhIHVzaW5nIHRoZSBJUCBhZGRyZXNzIG9mXG4gICAgICogICAgICAgLy90aGUgY2xpZW50XG4gICAgICogICAgICAgaXA6IHRydWVcbiAgICAgKlxuICAgICAqICAgICAgIC8vIG9wdCB1c2VycyBvdXQgb2YgY2FwdHVyaW5nIGJ5IHRoaXMgUG9zdEhvZyBpbnN0YW5jZSBieSBkZWZhdWx0XG4gICAgICogICAgICAgb3B0X291dF9jYXB0dXJpbmdfYnlfZGVmYXVsdDogZmFsc2VcbiAgICAgKlxuICAgICAqICAgICAgIC8vIG9wdCB1c2VycyBvdXQgb2YgYnJvd3NlciBkYXRhIHN0b3JhZ2UgYnkgdGhpcyBQb3N0SG9nIGluc3RhbmNlIGJ5IGRlZmF1bHRcbiAgICAgKiAgICAgICBvcHRfb3V0X3BlcnNpc3RlbmNlX2J5X2RlZmF1bHQ6IGZhbHNlXG4gICAgICpcbiAgICAgKiAgICAgICAvLyBvcHQgb3V0IG9mIHVzZXIgYWdlbnQgZmlsdGVyaW5nIHN1Y2ggYXMgZ29vZ2xlYm90IG9yIG90aGVyIGJvdHNcbiAgICAgKiAgICAgICBvcHRfb3V0X3VzZXJhZ2VudF9maWx0ZXI6IGZhbHNlXG4gICAgICpcbiAgICAgKiAgICAgICAvLyBwZXJzaXN0ZW5jZSBtZWNoYW5pc20gdXNlZCBieSBvcHQtaW4vb3B0LW91dCBtZXRob2RzIC0gY29va2llXG4gICAgICogICAgICAgLy8gb3IgbG9jYWxTdG9yYWdlIC0gZmFsbHMgYmFjayB0byBjb29raWUgaWYgbG9jYWxTdG9yYWdlIGlzIHVuYXZhaWxhYmxlXG4gICAgICogICAgICAgb3B0X291dF9jYXB0dXJpbmdfcGVyc2lzdGVuY2VfdHlwZTogJ2xvY2FsU3RvcmFnZSdcbiAgICAgKlxuICAgICAqICAgICAgIC8vIGN1c3RvbWl6ZSB0aGUgbmFtZSBvZiBjb29raWUvbG9jYWxTdG9yYWdlIHNldCBieSBvcHQtaW4vb3B0LW91dCBtZXRob2RzXG4gICAgICogICAgICAgb3B0X291dF9jYXB0dXJpbmdfY29va2llX3ByZWZpeDogbnVsbFxuICAgICAqXG4gICAgICogICAgICAgLy8gdHlwZSBvZiBwZXJzaXN0ZW50IHN0b3JlIGZvciBzdXBlciBwcm9wZXJ0aWVzIChjb29raWUvXG4gICAgICogICAgICAgLy8gbG9jYWxTdG9yYWdlKSBpZiBzZXQgdG8gJ2xvY2FsU3RvcmFnZScsIGFueSBleGlzdGluZ1xuICAgICAqICAgICAgIC8vIHBvc3Rob2cgY29va2llIHZhbHVlIHdpdGggdGhlIHNhbWUgcGVyc2lzdGVuY2VfbmFtZVxuICAgICAqICAgICAgIC8vIHdpbGwgYmUgdHJhbnNmZXJyZWQgdG8gbG9jYWxTdG9yYWdlIGFuZCBkZWxldGVkXG4gICAgICogICAgICAgcGVyc2lzdGVuY2U6ICdjb29raWUnXG4gICAgICpcbiAgICAgKiAgICAgICAvLyBuYW1lIGZvciBzdXBlciBwcm9wZXJ0aWVzIHBlcnNpc3RlbnQgc3RvcmVcbiAgICAgKiAgICAgICBwZXJzaXN0ZW5jZV9uYW1lOiAnJ1xuICAgICAqXG4gICAgICogICAgICAgLy8gZGVwcmVjYXRlZCwgdXNlIHByb3BlcnR5X2RlbnlsaXN0IGluc3RlYWQuXG4gICAgICogICAgICAgLy8gbmFtZXMgb2YgcHJvcGVydGllcy9zdXBlcnByb3BlcnRpZXMgd2hpY2ggc2hvdWxkIG5ldmVyXG4gICAgICogICAgICAgLy8gYmUgc2VudCB3aXRoIGNhcHR1cmUoKSBjYWxscy5cbiAgICAgKiAgICAgICBwcm9wZXJ0eV9ibGFja2xpc3Q6IFtdXG4gICAgICpcbiAgICAgKiAgICAgICAvLyBuYW1lcyBvZiBwcm9wZXJ0aWVzL3N1cGVycHJvcGVydGllcyB3aGljaCBzaG91bGQgbmV2ZXJcbiAgICAgKiAgICAgICAvLyBiZSBzZW50IHdpdGggY2FwdHVyZSgpIGNhbGxzLlxuICAgICAqICAgICAgIHByb3BlcnR5X2RlbnlsaXN0OiBbXVxuICAgICAqXG4gICAgICogICAgICAgLy8gaWYgdGhpcyBpcyB0cnVlLCBwb3N0aG9nIGNvb2tpZXMgd2lsbCBiZSBtYXJrZWQgYXNcbiAgICAgKiAgICAgICAvLyBzZWN1cmUsIG1lYW5pbmcgdGhleSB3aWxsIG9ubHkgYmUgdHJhbnNtaXR0ZWQgb3ZlciBodHRwc1xuICAgICAqICAgICAgIHNlY3VyZV9jb29raWU6IGZhbHNlXG4gICAgICpcbiAgICAgKiAgICAgICAvLyBzaG91bGQgd2UgY2FwdHVyZSBhIHBhZ2UgdmlldyBvbiBwYWdlIGxvYWRcbiAgICAgKiAgICAgICBjYXB0dXJlX3BhZ2V2aWV3OiB0cnVlXG4gICAgICpcbiAgICAgKiAgICAgICAvLyBpZiB5b3Ugc2V0IHVwZ3JhZGUgdG8gYmUgdHJ1ZSwgdGhlIGxpYnJhcnkgd2lsbCBjaGVjayBmb3JcbiAgICAgKiAgICAgICAvLyBhIGNvb2tpZSBmcm9tIG91ciBvbGQganMgbGlicmFyeSBhbmQgaW1wb3J0IHN1cGVyXG4gICAgICogICAgICAgLy8gcHJvcGVydGllcyBmcm9tIGl0LCB0aGVuIHRoZSBvbGQgY29va2llIGlzIGRlbGV0ZWRcbiAgICAgKiAgICAgICAvLyBUaGUgdXBncmFkZSBjb25maWcgb3B0aW9uIG9ubHkgd29ya3MgaW4gdGhlIGluaXRpYWxpemF0aW9uLFxuICAgICAqICAgICAgIC8vIHNvIG1ha2Ugc3VyZSB5b3Ugc2V0IGl0IHdoZW4geW91IGNyZWF0ZSB0aGUgbGlicmFyeS5cbiAgICAgKiAgICAgICB1cGdyYWRlOiBmYWxzZVxuICAgICAqXG4gICAgICogICAgICAgLy8gaWYgdGhpcyBpcyB0cnVlLCBzZXNzaW9uIHJlY29yZGluZyBpcyBhbHdheXMgZGlzYWJsZWQuXG4gICAgICogICAgICAgZGlzYWJsZV9zZXNzaW9uX3JlY29yZGluZzogZmFsc2UsXG4gICAgICpcbiAgICAgKiAgICAgICAvLyBleHRyYSBIVFRQIHJlcXVlc3QgaGVhZGVycyB0byBzZXQgZm9yIGVhY2ggQVBJIHJlcXVlc3QsIGluXG4gICAgICogICAgICAgLy8gdGhlIGZvcm1hdCB7J0hlYWRlci1OYW1lJzogdmFsdWV9XG4gICAgICogICAgICAgcmVzcG9uc2VfaGVhZGVyczoge31cbiAgICAgKlxuICAgICAqICAgICAgIC8vIHByb3RvY29sIGZvciBmZXRjaGluZyBpbi1hcHAgbWVzc2FnZSByZXNvdXJjZXMsIGUuZy5cbiAgICAgKiAgICAgICAvLyAnaHR0cHM6Ly8nIG9yICdodHRwOi8vJzsgZGVmYXVsdHMgdG8gJy8vJyAod2hpY2ggZGVmZXJzIHRvIHRoZVxuICAgICAqICAgICAgIC8vIGN1cnJlbnQgcGFnZSdzIHByb3RvY29sKVxuICAgICAqICAgICAgIGluYXBwX3Byb3RvY29sOiAnLy8nXG4gICAgICpcbiAgICAgKiAgICAgICAvLyB3aGV0aGVyIHRvIG9wZW4gaW4tYXBwIG1lc3NhZ2UgbGluayBpbiBuZXcgdGFiL3dpbmRvd1xuICAgICAqICAgICAgIGluYXBwX2xpbmtfbmV3X3dpbmRvdzogZmFsc2VcbiAgICAgKlxuICAgICAqICAgICAgLy8gYSBzZXQgb2YgcnJ3ZWIgY29uZmlnIG9wdGlvbnMgdGhhdCBQb3N0SG9nIHVzZXJzIGNhbiBjb25maWd1cmVcbiAgICAgKiAgICAgIC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vcnJ3ZWItaW8vcnJ3ZWIvYmxvYi9tYXN0ZXIvZ3VpZGUubWRcbiAgICAgKiAgICAgIHNlc3Npb25fcmVjb3JkaW5nOiB7XG4gICAgICogICAgICAgICBibG9ja0NsYXNzOiAncGgtbm8tY2FwdHVyZScsXG4gICAgICogICAgICAgICBibG9ja1NlbGVjdG9yOiBudWxsLFxuICAgICAqICAgICAgICAgaWdub3JlQ2xhc3M6ICdwaC1pZ25vcmUtaW5wdXQnLFxuICAgICAqICAgICAgICAgbWFza0FsbElucHV0czogdHJ1ZSxcbiAgICAgKiAgICAgICAgIG1hc2tJbnB1dE9wdGlvbnM6IHt9LFxuICAgICAqICAgICAgICAgbWFza0lucHV0Rm46IG51bGwsXG4gICAgICogICAgICAgICBzbGltRE9NT3B0aW9uczoge30sXG4gICAgICogICAgICAgICBjb2xsZWN0Rm9udHM6IGZhbHNlXG4gICAgICogICAgICB9XG4gICAgICpcbiAgICAgKiAgICAgIC8vIHByZXZlbnQgYXV0b2NhcHR1cmUgZnJvbSBjYXB0dXJpbmcgYW55IGF0dHJpYnV0ZSBuYW1lcyBvbiBlbGVtZW50c1xuICAgICAqICAgICAgbWFza19hbGxfZWxlbWVudF9hdHRyaWJ1dGVzOiBmYWxzZVxuICAgICAqXG4gICAgICogICAgICAvLyBwcmV2ZW50IGF1dG9jYXB0dXJlIGZyb20gY2FwdHVyaW5nIHRleHRDb250ZW50IG9uIGFsbCBlbGVtZW50c1xuICAgICAqICAgICAgbWFza19hbGxfdGV4dDogZmFsc2VcbiAgICAgKlxuICAgICAqICAgICAgLy8gQW5vbnltb3VzIHVzZXJzIGdldCBhIHJhbmRvbSBVVUlEIGFzIHRoZWlyIGRldmljZSBieSBkZWZhdWx0LlxuICAgICAqICAgICAgLy8gVGhpcyBvcHRpb24gYWxsb3dzIG92ZXJyaWRpbmcgdGhhdCBvcHRpb24uXG4gICAgICogICAgICBnZXRfZGV2aWNlX2lkOiAodXVpZCkgPT4gdXVpZFxuICAgICAqICAgICB9XG4gICAgICpcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWcgQSBkaWN0aW9uYXJ5IG9mIG5ldyBjb25maWd1cmF0aW9uIHZhbHVlcyB0byB1cGRhdGVcbiAgICAgKi9cblxuICAgIHNldF9jb25maWcoY29uZmlnOiBQYXJ0aWFsPFBvc3RIb2dDb25maWc+KTogdm9pZCB7XG4gICAgICAgIGNvbnN0IG9sZENvbmZpZyA9IHsgLi4udGhpcy5jb25maWcgfVxuICAgICAgICBpZiAoX2lzT2JqZWN0KGNvbmZpZykpIHtcbiAgICAgICAgICAgIF9leHRlbmQodGhpcy5jb25maWcsIGNvbmZpZylcblxuICAgICAgICAgICAgaWYgKCF0aGlzLmNvbmZpZy5wZXJzaXN0ZW5jZV9uYW1lKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb25maWcucGVyc2lzdGVuY2VfbmFtZSA9IHRoaXMuY29uZmlnLmNvb2tpZV9uYW1lXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXRoaXMuY29uZmlnLmRpc2FibGVfcGVyc2lzdGVuY2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5kaXNhYmxlX3BlcnNpc3RlbmNlID0gdGhpcy5jb25maWcuZGlzYWJsZV9jb29raWVcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5wZXJzaXN0ZW5jZT8udXBkYXRlX2NvbmZpZyh0aGlzLmNvbmZpZywgb2xkQ29uZmlnKVxuICAgICAgICAgICAgdGhpcy5zZXNzaW9uUGVyc2lzdGVuY2UgPVxuICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLnBlcnNpc3RlbmNlID09PSAnc2Vzc2lvblN0b3JhZ2UnXG4gICAgICAgICAgICAgICAgICAgID8gdGhpcy5wZXJzaXN0ZW5jZVxuICAgICAgICAgICAgICAgICAgICA6IG5ldyBQb3N0SG9nUGVyc2lzdGVuY2UoeyAuLi50aGlzLmNvbmZpZywgcGVyc2lzdGVuY2U6ICdzZXNzaW9uU3RvcmFnZScgfSlcblxuICAgICAgICAgICAgaWYgKGxvY2FsU3RvcmUuaXNfc3VwcG9ydGVkKCkgJiYgbG9jYWxTdG9yZS5nZXQoJ3BoX2RlYnVnJykgPT09ICd0cnVlJykge1xuICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLmRlYnVnID0gdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlnLmRlYnVnKSB7XG4gICAgICAgICAgICAgICAgQ29uZmlnLkRFQlVHID0gdHJ1ZVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodGhpcy5zZXNzaW9uUmVjb3JkaW5nICYmICFfaXNVbmRlZmluZWQoY29uZmlnLmRpc2FibGVfc2Vzc2lvbl9yZWNvcmRpbmcpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGlzYWJsZV9zZXNzaW9uX3JlY29yZGluZ19oYXNfY2hhbmdlZCA9XG4gICAgICAgICAgICAgICAgICAgIG9sZENvbmZpZy5kaXNhYmxlX3Nlc3Npb25fcmVjb3JkaW5nICE9PSBjb25maWcuZGlzYWJsZV9zZXNzaW9uX3JlY29yZGluZ1xuICAgICAgICAgICAgICAgIC8vIGlmIG9wdGluZyBiYWNrIGluLCB0aGlzIGNvbmZpZyBtaWdodCBub3QgaGF2ZSBjaGFuZ2VkXG4gICAgICAgICAgICAgICAgY29uc3QgdHJ5X2VuYWJsZV9hZnRlcl9vcHRfaW4gPVxuICAgICAgICAgICAgICAgICAgICAhdXNlck9wdGVkT3V0KHRoaXMpICYmICFjb25maWcuZGlzYWJsZV9zZXNzaW9uX3JlY29yZGluZyAmJiAhdGhpcy5zZXNzaW9uUmVjb3JkaW5nLnN0YXJ0ZWRcblxuICAgICAgICAgICAgICAgIGlmIChkaXNhYmxlX3Nlc3Npb25fcmVjb3JkaW5nX2hhc19jaGFuZ2VkIHx8IHRyeV9lbmFibGVfYWZ0ZXJfb3B0X2luKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb25maWcuZGlzYWJsZV9zZXNzaW9uX3JlY29yZGluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXNzaW9uUmVjb3JkaW5nLnN0b3BSZWNvcmRpbmcoKVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXNzaW9uUmVjb3JkaW5nLnN0YXJ0UmVjb3JkaW5nSWZFbmFibGVkKClcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHR1cm5zIHNlc3Npb24gcmVjb3JkaW5nIG9uLCBhbmQgdXBkYXRlcyB0aGUgY29uZmlnIG9wdGlvblxuICAgICAqIGRpc2FibGVfc2Vzc2lvbl9yZWNvcmRpbmcgdG8gZmFsc2VcbiAgICAgKi9cbiAgICBzdGFydFNlc3Npb25SZWNvcmRpbmcoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuc2V0X2NvbmZpZyh7IGRpc2FibGVfc2Vzc2lvbl9yZWNvcmRpbmc6IGZhbHNlIH0pXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogdHVybnMgc2Vzc2lvbiByZWNvcmRpbmcgb2ZmLCBhbmQgdXBkYXRlcyB0aGUgY29uZmlnIG9wdGlvblxuICAgICAqIGRpc2FibGVfc2Vzc2lvbl9yZWNvcmRpbmcgdG8gdHJ1ZVxuICAgICAqL1xuICAgIHN0b3BTZXNzaW9uUmVjb3JkaW5nKCk6IHZvaWQge1xuICAgICAgICB0aGlzLnNldF9jb25maWcoeyBkaXNhYmxlX3Nlc3Npb25fcmVjb3JkaW5nOiB0cnVlIH0pXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogcmV0dXJucyBhIGJvb2xlYW4gaW5kaWNhdGluZyB3aGV0aGVyIHNlc3Npb24gcmVjb3JkaW5nXG4gICAgICogaXMgY3VycmVudGx5IHJ1bm5pbmdcbiAgICAgKi9cbiAgICBzZXNzaW9uUmVjb3JkaW5nU3RhcnRlZCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5zZXNzaW9uUmVjb3JkaW5nPy5zdGFydGVkXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogcmV0dXJucyBhIGJvb2xlYW4gaW5kaWNhdGluZyB3aGV0aGVyIHRoZSB0b29sYmFyIGxvYWRlZFxuICAgICAqIEBwYXJhbSB0b29sYmFyUGFyYW1zXG4gICAgICovXG5cbiAgICBsb2FkVG9vbGJhcihwYXJhbXM6IFRvb2xiYXJQYXJhbXMpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudG9vbGJhci5sb2FkVG9vbGJhcihwYXJhbXMpXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgdmFsdWUgb2YgdGhlIHN1cGVyIHByb3BlcnR5IG5hbWVkIHByb3BlcnR5X25hbWUuIElmIG5vIHN1Y2hcbiAgICAgKiBwcm9wZXJ0eSBpcyBzZXQsIGdldF9wcm9wZXJ0eSgpIHdpbGwgcmV0dXJuIHRoZSB1bmRlZmluZWQgdmFsdWUuXG4gICAgICpcbiAgICAgKiAjIyMgTm90ZXM6XG4gICAgICpcbiAgICAgKiBnZXRfcHJvcGVydHkoKSBjYW4gb25seSBiZSBjYWxsZWQgYWZ0ZXIgdGhlIFBvc3RIb2cgbGlicmFyeSBoYXMgZmluaXNoZWQgbG9hZGluZy5cbiAgICAgKiBpbml0KCkgaGFzIGEgbG9hZGVkIGZ1bmN0aW9uIGF2YWlsYWJsZSB0byBoYW5kbGUgdGhpcyBhdXRvbWF0aWNhbGx5LiBGb3IgZXhhbXBsZTpcbiAgICAgKlxuICAgICAqICAgICAvLyBncmFiIHZhbHVlIGZvciAnJHVzZXJfaWQnIGFmdGVyIHRoZSBwb3N0aG9nIGxpYnJhcnkgaGFzIGxvYWRlZFxuICAgICAqICAgICBwb3N0aG9nLmluaXQoJ1lPVVIgUFJPSkVDVCBUT0tFTicsIHtcbiAgICAgKiAgICAgICAgIGxvYWRlZDogZnVuY3Rpb24ocG9zdGhvZykge1xuICAgICAqICAgICAgICAgICAgIHVzZXJfaWQgPSBwb3N0aG9nLmdldF9wcm9wZXJ0eSgnJHVzZXJfaWQnKTtcbiAgICAgKiAgICAgICAgIH1cbiAgICAgKiAgICAgfSk7XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gcHJvcGVydHlfbmFtZSBUaGUgbmFtZSBvZiB0aGUgc3VwZXIgcHJvcGVydHkgeW91IHdhbnQgdG8gcmV0cmlldmVcbiAgICAgKi9cbiAgICBnZXRfcHJvcGVydHkocHJvcGVydHlfbmFtZTogc3RyaW5nKTogUHJvcGVydHkgfCB1bmRlZmluZWQge1xuICAgICAgICByZXR1cm4gdGhpcy5wZXJzaXN0ZW5jZT8ucHJvcHNbcHJvcGVydHlfbmFtZV1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSB2YWx1ZSBvZiB0aGUgc2Vzc2lvbiBzdXBlciBwcm9wZXJ0eSBuYW1lZCBwcm9wZXJ0eV9uYW1lLiBJZiBubyBzdWNoXG4gICAgICogcHJvcGVydHkgaXMgc2V0LCBnZXRTZXNzaW9uUHJvcGVydHkoKSB3aWxsIHJldHVybiB0aGUgdW5kZWZpbmVkIHZhbHVlLlxuICAgICAqXG4gICAgICogIyMjIE5vdGVzOlxuICAgICAqXG4gICAgICogVGhpcyBpcyBiYXNlZCBvbiBicm93c2VyLWxldmVsIGBzZXNzaW9uU3RvcmFnZWAsIE5PVCB0aGUgUG9zdEhvZyBzZXNzaW9uLlxuICAgICAqIGdldFNlc3Npb25Qcm9wZXJ0eSgpIGNhbiBvbmx5IGJlIGNhbGxlZCBhZnRlciB0aGUgUG9zdEhvZyBsaWJyYXJ5IGhhcyBmaW5pc2hlZCBsb2FkaW5nLlxuICAgICAqIGluaXQoKSBoYXMgYSBsb2FkZWQgZnVuY3Rpb24gYXZhaWxhYmxlIHRvIGhhbmRsZSB0aGlzIGF1dG9tYXRpY2FsbHkuIEZvciBleGFtcGxlOlxuICAgICAqXG4gICAgICogICAgIC8vIGdyYWIgdmFsdWUgZm9yICd1c2VyX2lkJyBhZnRlciB0aGUgcG9zdGhvZyBsaWJyYXJ5IGhhcyBsb2FkZWRcbiAgICAgKiAgICAgcG9zdGhvZy5pbml0KCdZT1VSIFBST0pFQ1QgVE9LRU4nLCB7XG4gICAgICogICAgICAgICBsb2FkZWQ6IGZ1bmN0aW9uKHBvc3Rob2cpIHtcbiAgICAgKiAgICAgICAgICAgICB1c2VyX2lkID0gcG9zdGhvZy5nZXRTZXNzaW9uUHJvcGVydHkoJ3VzZXJfaWQnKTtcbiAgICAgKiAgICAgICAgIH1cbiAgICAgKiAgICAgfSk7XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gcHJvcGVydHlfbmFtZSBUaGUgbmFtZSBvZiB0aGUgc2Vzc2lvbiBzdXBlciBwcm9wZXJ0eSB5b3Ugd2FudCB0byByZXRyaWV2ZVxuICAgICAqL1xuICAgIGdldFNlc3Npb25Qcm9wZXJ0eShwcm9wZXJ0eV9uYW1lOiBzdHJpbmcpOiBQcm9wZXJ0eSB8IHVuZGVmaW5lZCB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlc3Npb25QZXJzaXN0ZW5jZT8ucHJvcHNbcHJvcGVydHlfbmFtZV1cbiAgICB9XG5cbiAgICB0b1N0cmluZygpOiBzdHJpbmcge1xuICAgICAgICBsZXQgbmFtZSA9IHRoaXMuY29uZmlnLm5hbWUgPz8gUFJJTUFSWV9JTlNUQU5DRV9OQU1FXG4gICAgICAgIGlmIChuYW1lICE9PSBQUklNQVJZX0lOU1RBTkNFX05BTUUpIHtcbiAgICAgICAgICAgIG5hbWUgPSBQUklNQVJZX0lOU1RBTkNFX05BTUUgKyAnLicgKyBuYW1lXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5hbWVcbiAgICB9XG5cbiAgICAvLyBwZXJmb3JtIHNvbWUgaG91c2VrZWVwaW5nIGFyb3VuZCBHRFBSIG9wdC1pbi9vdXQgc3RhdGVcbiAgICBfZ2Rwcl9pbml0KCk6IHZvaWQge1xuICAgICAgICBjb25zdCBpc19sb2NhbFN0b3JhZ2VfcmVxdWVzdGVkID0gdGhpcy5jb25maWcub3B0X291dF9jYXB0dXJpbmdfcGVyc2lzdGVuY2VfdHlwZSA9PT0gJ2xvY2FsU3RvcmFnZSdcblxuICAgICAgICAvLyB0cnkgdG8gY29udmVydCBvcHQtaW4vb3V0IGNvb2tpZXMgdG8gbG9jYWxTdG9yYWdlIGlmIHBvc3NpYmxlXG4gICAgICAgIGlmIChpc19sb2NhbFN0b3JhZ2VfcmVxdWVzdGVkICYmIGxvY2FsU3RvcmUuaXNfc3VwcG9ydGVkKCkpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5oYXNfb3B0ZWRfaW5fY2FwdHVyaW5nKCkgJiYgdGhpcy5oYXNfb3B0ZWRfaW5fY2FwdHVyaW5nKHsgcGVyc2lzdGVuY2VfdHlwZTogJ2Nvb2tpZScgfSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9wdF9pbl9jYXB0dXJpbmcoeyBlbmFibGVfcGVyc2lzdGVuY2U6IGZhbHNlIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXRoaXMuaGFzX29wdGVkX291dF9jYXB0dXJpbmcoKSAmJiB0aGlzLmhhc19vcHRlZF9vdXRfY2FwdHVyaW5nKHsgcGVyc2lzdGVuY2VfdHlwZTogJ2Nvb2tpZScgfSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9wdF9vdXRfY2FwdHVyaW5nKHsgY2xlYXJfcGVyc2lzdGVuY2U6IGZhbHNlIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNsZWFyX29wdF9pbl9vdXRfY2FwdHVyaW5nKHtcbiAgICAgICAgICAgICAgICBwZXJzaXN0ZW5jZV90eXBlOiAnY29va2llJyxcbiAgICAgICAgICAgICAgICBlbmFibGVfcGVyc2lzdGVuY2U6IGZhbHNlLFxuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGNoZWNrIHdoZXRoZXIgdGhlIHVzZXIgaGFzIGFscmVhZHkgb3B0ZWQgb3V0IC0gaWYgc28sIGNsZWFyICYgZGlzYWJsZSBwZXJzaXN0ZW5jZVxuICAgICAgICBpZiAodGhpcy5oYXNfb3B0ZWRfb3V0X2NhcHR1cmluZygpKSB7XG4gICAgICAgICAgICB0aGlzLl9nZHByX3VwZGF0ZV9wZXJzaXN0ZW5jZSh7IGNsZWFyX3BlcnNpc3RlbmNlOiB0cnVlIH0pXG5cbiAgICAgICAgICAgIC8vIGNoZWNrIHdoZXRoZXIgd2Ugc2hvdWxkIG9wdCBvdXQgYnkgZGVmYXVsdFxuICAgICAgICAgICAgLy8gbm90ZTogd2UgZG9uJ3QgY2xlYXIgcGVyc2lzdGVuY2UgaGVyZSBieSBkZWZhdWx0IHNpbmNlIG9wdC1vdXQgZGVmYXVsdCBzdGF0ZSBpcyBvZnRlblxuICAgICAgICAgICAgLy8gICAgICAgdXNlZCBhcyBhbiBpbml0aWFsIHN0YXRlIHdoaWxlIEdEUFIgaW5mb3JtYXRpb24gaXMgYmVpbmcgY29sbGVjdGVkXG4gICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAhdGhpcy5oYXNfb3B0ZWRfaW5fY2FwdHVyaW5nKCkgJiZcbiAgICAgICAgICAgICh0aGlzLmNvbmZpZy5vcHRfb3V0X2NhcHR1cmluZ19ieV9kZWZhdWx0IHx8IGNvb2tpZVN0b3JlLmdldCgncGhfb3B0b3V0JykpXG4gICAgICAgICkge1xuICAgICAgICAgICAgY29va2llU3RvcmUucmVtb3ZlKCdwaF9vcHRvdXQnKVxuICAgICAgICAgICAgdGhpcy5vcHRfb3V0X2NhcHR1cmluZyh7XG4gICAgICAgICAgICAgICAgY2xlYXJfcGVyc2lzdGVuY2U6IHRoaXMuY29uZmlnLm9wdF9vdXRfcGVyc2lzdGVuY2VfYnlfZGVmYXVsdCxcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFbmFibGUgb3IgZGlzYWJsZSBwZXJzaXN0ZW5jZSBiYXNlZCBvbiBvcHRpb25zXG4gICAgICogb25seSBlbmFibGUvZGlzYWJsZSBpZiBwZXJzaXN0ZW5jZSBpcyBub3QgYWxyZWFkeSBpbiB0aGlzIHN0YXRlXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5jbGVhcl9wZXJzaXN0ZW5jZV0gSWYgdHJ1ZSwgd2lsbCBkZWxldGUgYWxsIGRhdGEgc3RvcmVkIGJ5IHRoZSBzZGsgaW4gcGVyc2lzdGVuY2UgYW5kIGRpc2FibGUgaXRcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmVuYWJsZV9wZXJzaXN0ZW5jZV0gSWYgdHJ1ZSwgd2lsbCByZS1lbmFibGUgc2RrIHBlcnNpc3RlbmNlXG4gICAgICovXG4gICAgX2dkcHJfdXBkYXRlX3BlcnNpc3RlbmNlKG9wdGlvbnM6IFBhcnRpYWw8T3B0SW5PdXRDYXB0dXJpbmdPcHRpb25zPik6IHZvaWQge1xuICAgICAgICBsZXQgZGlzYWJsZWRcbiAgICAgICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9uc1snY2xlYXJfcGVyc2lzdGVuY2UnXSkge1xuICAgICAgICAgICAgZGlzYWJsZWQgPSB0cnVlXG4gICAgICAgIH0gZWxzZSBpZiAob3B0aW9ucyAmJiBvcHRpb25zWydlbmFibGVfcGVyc2lzdGVuY2UnXSkge1xuICAgICAgICAgICAgZGlzYWJsZWQgPSBmYWxzZVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXRoaXMuY29uZmlnLmRpc2FibGVfcGVyc2lzdGVuY2UgJiYgdGhpcy5wZXJzaXN0ZW5jZT8uZGlzYWJsZWQgIT09IGRpc2FibGVkKSB7XG4gICAgICAgICAgICB0aGlzLnBlcnNpc3RlbmNlPy5zZXRfZGlzYWJsZWQoZGlzYWJsZWQpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLmNvbmZpZy5kaXNhYmxlX3BlcnNpc3RlbmNlICYmIHRoaXMuc2Vzc2lvblBlcnNpc3RlbmNlPy5kaXNhYmxlZCAhPT0gZGlzYWJsZWQpIHtcbiAgICAgICAgICAgIHRoaXMuc2Vzc2lvblBlcnNpc3RlbmNlPy5zZXRfZGlzYWJsZWQoZGlzYWJsZWQpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBjYWxsIGEgYmFzZSBnZHByIGZ1bmN0aW9uIGFmdGVyIGNvbnN0cnVjdGluZyB0aGUgYXBwcm9wcmlhdGUgdG9rZW4gYW5kIG9wdGlvbnMgYXJnc1xuICAgIF9nZHByX2NhbGxfZnVuYzxSID0gYW55PihcbiAgICAgICAgZnVuYzogKHRva2VuOiBzdHJpbmcsIG9wdGlvbnM6IEdEUFJPcHRpb25zKSA9PiBSLFxuICAgICAgICBvcHRpb25zPzogUGFydGlhbDxPcHRJbk91dENhcHR1cmluZ09wdGlvbnM+XG4gICAgKTogUiB7XG4gICAgICAgIG9wdGlvbnMgPSBfZXh0ZW5kKFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNhcHR1cmU6IHRoaXMuY2FwdHVyZS5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgICAgIHBlcnNpc3RlbmNlX3R5cGU6IHRoaXMuY29uZmlnLm9wdF9vdXRfY2FwdHVyaW5nX3BlcnNpc3RlbmNlX3R5cGUsXG4gICAgICAgICAgICAgICAgY29va2llX3ByZWZpeDogdGhpcy5jb25maWcub3B0X291dF9jYXB0dXJpbmdfY29va2llX3ByZWZpeCxcbiAgICAgICAgICAgICAgICBjb29raWVfZXhwaXJhdGlvbjogdGhpcy5jb25maWcuY29va2llX2V4cGlyYXRpb24sXG4gICAgICAgICAgICAgICAgY3Jvc3Nfc3ViZG9tYWluX2Nvb2tpZTogdGhpcy5jb25maWcuY3Jvc3Nfc3ViZG9tYWluX2Nvb2tpZSxcbiAgICAgICAgICAgICAgICBzZWN1cmVfY29va2llOiB0aGlzLmNvbmZpZy5zZWN1cmVfY29va2llLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9wdGlvbnMgfHwge31cbiAgICAgICAgKVxuXG4gICAgICAgIC8vIGNoZWNrIGlmIGxvY2FsU3RvcmFnZSBjYW4gYmUgdXNlZCBmb3IgcmVjb3JkaW5nIG9wdCBvdXQgc3RhdHVzLCBmYWxsIGJhY2sgdG8gY29va2llIGlmIG5vdFxuICAgICAgICBpZiAoIWxvY2FsU3RvcmUuaXNfc3VwcG9ydGVkKCkgJiYgb3B0aW9uc1sncGVyc2lzdGVuY2VfdHlwZSddID09PSAnbG9jYWxTdG9yYWdlJykge1xuICAgICAgICAgICAgb3B0aW9uc1sncGVyc2lzdGVuY2VfdHlwZSddID0gJ2Nvb2tpZSdcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmdW5jKHRoaXMuY29uZmlnLnRva2VuLCB7XG4gICAgICAgICAgICBjYXB0dXJlOiBvcHRpb25zWydjYXB0dXJlJ10sXG4gICAgICAgICAgICBjYXB0dXJlRXZlbnROYW1lOiBvcHRpb25zWydjYXB0dXJlX2V2ZW50X25hbWUnXSxcbiAgICAgICAgICAgIGNhcHR1cmVQcm9wZXJ0aWVzOiBvcHRpb25zWydjYXB0dXJlX3Byb3BlcnRpZXMnXSxcbiAgICAgICAgICAgIHBlcnNpc3RlbmNlVHlwZTogb3B0aW9uc1sncGVyc2lzdGVuY2VfdHlwZSddLFxuICAgICAgICAgICAgcGVyc2lzdGVuY2VQcmVmaXg6IG9wdGlvbnNbJ2Nvb2tpZV9wcmVmaXgnXSxcbiAgICAgICAgICAgIGNvb2tpZUV4cGlyYXRpb246IG9wdGlvbnNbJ2Nvb2tpZV9leHBpcmF0aW9uJ10sXG4gICAgICAgICAgICBjcm9zc1N1YmRvbWFpbkNvb2tpZTogb3B0aW9uc1snY3Jvc3Nfc3ViZG9tYWluX2Nvb2tpZSddLFxuICAgICAgICAgICAgc2VjdXJlQ29va2llOiBvcHRpb25zWydzZWN1cmVfY29va2llJ10sXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogT3B0IHRoZSB1c2VyIGluIHRvIGRhdGEgY2FwdHVyaW5nIGFuZCBjb29raWVzL2xvY2Fsc3RvcmFnZSBmb3IgdGhpcyBQb3N0SG9nIGluc3RhbmNlXG4gICAgICpcbiAgICAgKiAjIyMgVXNhZ2VcbiAgICAgKlxuICAgICAqICAgICAvLyBvcHQgdXNlciBpblxuICAgICAqICAgICBwb3N0aG9nLm9wdF9pbl9jYXB0dXJpbmcoKTtcbiAgICAgKlxuICAgICAqICAgICAvLyBvcHQgdXNlciBpbiB3aXRoIHNwZWNpZmljIGV2ZW50IG5hbWUsIHByb3BlcnRpZXMsIGNvb2tpZSBjb25maWd1cmF0aW9uXG4gICAgICogICAgIHBvc3Rob2cub3B0X2luX2NhcHR1cmluZyh7XG4gICAgICogICAgICAgICBjYXB0dXJlX2V2ZW50X25hbWU6ICdVc2VyIG9wdGVkIGluJyxcbiAgICAgKiAgICAgICAgIGNhcHR1cmVfZXZlbnRfcHJvcGVydGllczoge1xuICAgICAqICAgICAgICAgICAgICdFbWFpbCc6ICdqZG9lQGV4YW1wbGUuY29tJ1xuICAgICAqICAgICAgICAgfSxcbiAgICAgKiAgICAgICAgIGNvb2tpZV9leHBpcmF0aW9uOiAzMCxcbiAgICAgKiAgICAgICAgIHNlY3VyZV9jb29raWU6IHRydWVcbiAgICAgKiAgICAgfSk7XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIEEgZGljdGlvbmFyeSBvZiBjb25maWcgb3B0aW9ucyB0byBvdmVycmlkZVxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IFtvcHRpb25zLmNhcHR1cmVdIEZ1bmN0aW9uIHVzZWQgZm9yIGNhcHR1cmluZyBhIFBvc3RIb2cgZXZlbnQgdG8gcmVjb3JkIHRoZSBvcHQtaW4gYWN0aW9uIChkZWZhdWx0IGlzIHRoaXMgUG9zdEhvZyBpbnN0YW5jZSdzIGNhcHR1cmUgbWV0aG9kKVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5jYXB0dXJlX2V2ZW50X25hbWU9JG9wdF9pbl0gRXZlbnQgbmFtZSB0byBiZSB1c2VkIGZvciBjYXB0dXJpbmcgdGhlIG9wdC1pbiBhY3Rpb25cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnMuY2FwdHVyZV9wcm9wZXJ0aWVzXSBTZXQgb2YgcHJvcGVydGllcyB0byBiZSBjYXB0dXJlZCBhbG9uZyB3aXRoIHRoZSBvcHQtaW4gYWN0aW9uXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5lbmFibGVfcGVyc2lzdGVuY2U9dHJ1ZV0gSWYgdHJ1ZSwgd2lsbCByZS1lbmFibGUgc2RrIHBlcnNpc3RlbmNlXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLnBlcnNpc3RlbmNlX3R5cGU9bG9jYWxTdG9yYWdlXSBQZXJzaXN0ZW5jZSBtZWNoYW5pc20gdXNlZCAtIGNvb2tpZSBvciBsb2NhbFN0b3JhZ2UgLSBmYWxscyBiYWNrIHRvIGNvb2tpZSBpZiBsb2NhbFN0b3JhZ2UgaXMgdW5hdmFpbGFibGVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMuY29va2llX3ByZWZpeD1fX3BoX29wdF9pbl9vdXRdIEN1c3RvbSBwcmVmaXggdG8gYmUgdXNlZCBpbiB0aGUgY29va2llL2xvY2Fsc3RvcmFnZSBuYW1lXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IFtvcHRpb25zLmNvb2tpZV9leHBpcmF0aW9uXSBOdW1iZXIgb2YgZGF5cyB1bnRpbCB0aGUgb3B0LWluIGNvb2tpZSBleHBpcmVzIChvdmVycmlkZXMgdmFsdWUgc3BlY2lmaWVkIGluIHRoaXMgUG9zdEhvZyBpbnN0YW5jZSdzIGNvbmZpZylcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmNyb3NzX3N1YmRvbWFpbl9jb29raWVdIFdoZXRoZXIgdGhlIG9wdC1pbiBjb29raWUgaXMgc2V0IGFzIGNyb3NzLXN1YmRvbWFpbiBvciBub3QgKG92ZXJyaWRlcyB2YWx1ZSBzcGVjaWZpZWQgaW4gdGhpcyBQb3N0SG9nIGluc3RhbmNlJ3MgY29uZmlnKVxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuc2VjdXJlX2Nvb2tpZV0gV2hldGhlciB0aGUgb3B0LWluIGNvb2tpZSBpcyBzZXQgYXMgc2VjdXJlIG9yIG5vdCAob3ZlcnJpZGVzIHZhbHVlIHNwZWNpZmllZCBpbiB0aGlzIFBvc3RIb2cgaW5zdGFuY2UncyBjb25maWcpXG4gICAgICovXG4gICAgb3B0X2luX2NhcHR1cmluZyhvcHRpb25zPzogUGFydGlhbDxPcHRJbk91dENhcHR1cmluZ09wdGlvbnM+KTogdm9pZCB7XG4gICAgICAgIG9wdGlvbnMgPSBfZXh0ZW5kKFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGVuYWJsZV9wZXJzaXN0ZW5jZTogdHJ1ZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvcHRpb25zIHx8IHt9XG4gICAgICAgIClcblxuICAgICAgICB0aGlzLl9nZHByX2NhbGxfZnVuYyhvcHRJbiwgb3B0aW9ucylcbiAgICAgICAgdGhpcy5fZ2Rwcl91cGRhdGVfcGVyc2lzdGVuY2Uob3B0aW9ucylcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBPcHQgdGhlIHVzZXIgb3V0IG9mIGRhdGEgY2FwdHVyaW5nIGFuZCBjb29raWVzL2xvY2Fsc3RvcmFnZSBmb3IgdGhpcyBQb3N0SG9nIGluc3RhbmNlXG4gICAgICpcbiAgICAgKiAjIyMgVXNhZ2VcbiAgICAgKlxuICAgICAqICAgICAvLyBvcHQgdXNlciBvdXRcbiAgICAgKiAgICAgcG9zdGhvZy5vcHRfb3V0X2NhcHR1cmluZygpO1xuICAgICAqXG4gICAgICogICAgIC8vIG9wdCB1c2VyIG91dCB3aXRoIGRpZmZlcmVudCBjb29raWUgY29uZmlndXJhdGlvbiBmcm9tIFBvc3RIb2cgaW5zdGFuY2VcbiAgICAgKiAgICAgcG9zdGhvZy5vcHRfb3V0X2NhcHR1cmluZyh7XG4gICAgICogICAgICAgICBjb29raWVfZXhwaXJhdGlvbjogMzAsXG4gICAgICogICAgICAgICBzZWN1cmVfY29va2llOiB0cnVlXG4gICAgICogICAgIH0pO1xuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSBBIGRpY3Rpb25hcnkgb2YgY29uZmlnIG9wdGlvbnMgdG8gb3ZlcnJpZGVcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmNsZWFyX3BlcnNpc3RlbmNlPXRydWVdIElmIHRydWUsIHdpbGwgZGVsZXRlIGFsbCBkYXRhIHN0b3JlZCBieSB0aGUgc2RrIGluIHBlcnNpc3RlbmNlXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLnBlcnNpc3RlbmNlX3R5cGU9bG9jYWxTdG9yYWdlXSBQZXJzaXN0ZW5jZSBtZWNoYW5pc20gdXNlZCAtIGNvb2tpZSBvciBsb2NhbFN0b3JhZ2UgLSBmYWxscyBiYWNrIHRvIGNvb2tpZSBpZiBsb2NhbFN0b3JhZ2UgaXMgdW5hdmFpbGFibGVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMuY29va2llX3ByZWZpeD1fX3BoX29wdF9pbl9vdXRdIEN1c3RvbSBwcmVmaXggdG8gYmUgdXNlZCBpbiB0aGUgY29va2llL2xvY2Fsc3RvcmFnZSBuYW1lXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IFtvcHRpb25zLmNvb2tpZV9leHBpcmF0aW9uXSBOdW1iZXIgb2YgZGF5cyB1bnRpbCB0aGUgb3B0LWluIGNvb2tpZSBleHBpcmVzIChvdmVycmlkZXMgdmFsdWUgc3BlY2lmaWVkIGluIHRoaXMgUG9zdEhvZyBpbnN0YW5jZSdzIGNvbmZpZylcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmNyb3NzX3N1YmRvbWFpbl9jb29raWVdIFdoZXRoZXIgdGhlIG9wdC1pbiBjb29raWUgaXMgc2V0IGFzIGNyb3NzLXN1YmRvbWFpbiBvciBub3QgKG92ZXJyaWRlcyB2YWx1ZSBzcGVjaWZpZWQgaW4gdGhpcyBQb3N0SG9nIGluc3RhbmNlJ3MgY29uZmlnKVxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuc2VjdXJlX2Nvb2tpZV0gV2hldGhlciB0aGUgb3B0LWluIGNvb2tpZSBpcyBzZXQgYXMgc2VjdXJlIG9yIG5vdCAob3ZlcnJpZGVzIHZhbHVlIHNwZWNpZmllZCBpbiB0aGlzIFBvc3RIb2cgaW5zdGFuY2UncyBjb25maWcpXG4gICAgICovXG4gICAgb3B0X291dF9jYXB0dXJpbmcob3B0aW9ucz86IFBhcnRpYWw8T3B0SW5PdXRDYXB0dXJpbmdPcHRpb25zPik6IHZvaWQge1xuICAgICAgICBjb25zdCBfb3B0aW9ucyA9IF9leHRlbmQoXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY2xlYXJfcGVyc2lzdGVuY2U6IHRydWUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb3B0aW9ucyB8fCB7fVxuICAgICAgICApXG5cbiAgICAgICAgdGhpcy5fZ2Rwcl9jYWxsX2Z1bmMob3B0T3V0LCBfb3B0aW9ucylcbiAgICAgICAgdGhpcy5fZ2Rwcl91cGRhdGVfcGVyc2lzdGVuY2UoX29wdGlvbnMpXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2sgd2hldGhlciB0aGUgdXNlciBoYXMgb3B0ZWQgaW4gdG8gZGF0YSBjYXB0dXJpbmcgYW5kIGNvb2tpZXMvbG9jYWxzdG9yYWdlIGZvciB0aGlzIFBvc3RIb2cgaW5zdGFuY2VcbiAgICAgKlxuICAgICAqICMjIyBVc2FnZVxuICAgICAqXG4gICAgICogICAgIGNvbnN0IGhhc19vcHRlZF9pbiA9IHBvc3Rob2cuaGFzX29wdGVkX2luX2NhcHR1cmluZygpO1xuICAgICAqICAgICAvLyB1c2UgaGFzX29wdGVkX2luIHZhbHVlXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIEEgZGljdGlvbmFyeSBvZiBjb25maWcgb3B0aW9ucyB0byBvdmVycmlkZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5wZXJzaXN0ZW5jZV90eXBlPWxvY2FsU3RvcmFnZV0gUGVyc2lzdGVuY2UgbWVjaGFuaXNtIHVzZWQgLSBjb29raWUgb3IgbG9jYWxTdG9yYWdlIC0gZmFsbHMgYmFjayB0byBjb29raWUgaWYgbG9jYWxTdG9yYWdlIGlzIHVuYXZhaWxhYmxlXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLmNvb2tpZV9wcmVmaXg9X19waF9vcHRfaW5fb3V0XSBDdXN0b20gcHJlZml4IHRvIGJlIHVzZWQgaW4gdGhlIGNvb2tpZS9sb2NhbHN0b3JhZ2UgbmFtZVxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBjdXJyZW50IG9wdC1pbiBzdGF0dXNcbiAgICAgKi9cbiAgICBoYXNfb3B0ZWRfaW5fY2FwdHVyaW5nKG9wdGlvbnM/OiBQYXJ0aWFsPE9wdEluT3V0Q2FwdHVyaW5nT3B0aW9ucz4pOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2dkcHJfY2FsbF9mdW5jKGhhc09wdGVkSW4sIG9wdGlvbnMpXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2sgd2hldGhlciB0aGUgdXNlciBoYXMgb3B0ZWQgb3V0IG9mIGRhdGEgY2FwdHVyaW5nIGFuZCBjb29raWVzL2xvY2Fsc3RvcmFnZSBmb3IgdGhpcyBQb3N0SG9nIGluc3RhbmNlXG4gICAgICpcbiAgICAgKiAjIyMgVXNhZ2VcbiAgICAgKlxuICAgICAqICAgICBjb25zdCBoYXNfb3B0ZWRfb3V0ID0gcG9zdGhvZy5oYXNfb3B0ZWRfb3V0X2NhcHR1cmluZygpO1xuICAgICAqICAgICAvLyB1c2UgaGFzX29wdGVkX291dCB2YWx1ZVxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSBBIGRpY3Rpb25hcnkgb2YgY29uZmlnIG9wdGlvbnMgdG8gb3ZlcnJpZGVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMucGVyc2lzdGVuY2VfdHlwZT1sb2NhbFN0b3JhZ2VdIFBlcnNpc3RlbmNlIG1lY2hhbmlzbSB1c2VkIC0gY29va2llIG9yIGxvY2FsU3RvcmFnZSAtIGZhbGxzIGJhY2sgdG8gY29va2llIGlmIGxvY2FsU3RvcmFnZSBpcyB1bmF2YWlsYWJsZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5jb29raWVfcHJlZml4PV9fcGhfb3B0X2luX291dF0gQ3VzdG9tIHByZWZpeCB0byBiZSB1c2VkIGluIHRoZSBjb29raWUvbG9jYWxzdG9yYWdlIG5hbWVcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gY3VycmVudCBvcHQtb3V0IHN0YXR1c1xuICAgICAqL1xuICAgIGhhc19vcHRlZF9vdXRfY2FwdHVyaW5nKG9wdGlvbnM/OiBQYXJ0aWFsPE9wdEluT3V0Q2FwdHVyaW5nT3B0aW9ucz4pOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2dkcHJfY2FsbF9mdW5jKGhhc09wdGVkT3V0LCBvcHRpb25zKVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENsZWFyIHRoZSB1c2VyJ3Mgb3B0IGluL291dCBzdGF0dXMgb2YgZGF0YSBjYXB0dXJpbmcgYW5kIGNvb2tpZXMvbG9jYWxzdG9yYWdlIGZvciB0aGlzIFBvc3RIb2cgaW5zdGFuY2VcbiAgICAgKlxuICAgICAqICMjIyBVc2FnZVxuICAgICAqXG4gICAgICogICAgIC8vIGNsZWFyIHVzZXIncyBvcHQtaW4vb3V0IHN0YXR1c1xuICAgICAqICAgICBwb3N0aG9nLmNsZWFyX29wdF9pbl9vdXRfY2FwdHVyaW5nKCk7XG4gICAgICpcbiAgICAgKiAgICAgLy8gY2xlYXIgdXNlcidzIG9wdC1pbi9vdXQgc3RhdHVzIHdpdGggc3BlY2lmaWMgY29va2llIGNvbmZpZ3VyYXRpb24gLSBzaG91bGQgbWF0Y2hcbiAgICAgKiAgICAgLy8gY29uZmlndXJhdGlvbiB1c2VkIHdoZW4gb3B0X2luX2NhcHR1cmluZy9vcHRfb3V0X2NhcHR1cmluZyBtZXRob2RzIHdlcmUgY2FsbGVkLlxuICAgICAqICAgICBwb3N0aG9nLmNsZWFyX29wdF9pbl9vdXRfY2FwdHVyaW5nKHtcbiAgICAgKiAgICAgICAgIGNvb2tpZV9leHBpcmF0aW9uOiAzMCxcbiAgICAgKiAgICAgICAgIHNlY3VyZV9jb29raWU6IHRydWVcbiAgICAgKiAgICAgfSk7XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIEEgZGljdGlvbmFyeSBvZiBjb25maWcgb3B0aW9ucyB0byBvdmVycmlkZVxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuZW5hYmxlX3BlcnNpc3RlbmNlPXRydWVdIElmIHRydWUsIHdpbGwgcmUtZW5hYmxlIHNkayBwZXJzaXN0ZW5jZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5wZXJzaXN0ZW5jZV90eXBlPWxvY2FsU3RvcmFnZV0gUGVyc2lzdGVuY2UgbWVjaGFuaXNtIHVzZWQgLSBjb29raWUgb3IgbG9jYWxTdG9yYWdlIC0gZmFsbHMgYmFjayB0byBjb29raWUgaWYgbG9jYWxTdG9yYWdlIGlzIHVuYXZhaWxhYmxlXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLmNvb2tpZV9wcmVmaXg9X19waF9vcHRfaW5fb3V0XSBDdXN0b20gcHJlZml4IHRvIGJlIHVzZWQgaW4gdGhlIGNvb2tpZS9sb2NhbHN0b3JhZ2UgbmFtZVxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBbb3B0aW9ucy5jb29raWVfZXhwaXJhdGlvbl0gTnVtYmVyIG9mIGRheXMgdW50aWwgdGhlIG9wdC1pbiBjb29raWUgZXhwaXJlcyAob3ZlcnJpZGVzIHZhbHVlIHNwZWNpZmllZCBpbiB0aGlzIFBvc3RIb2cgaW5zdGFuY2UncyBjb25maWcpXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5jcm9zc19zdWJkb21haW5fY29va2llXSBXaGV0aGVyIHRoZSBvcHQtaW4gY29va2llIGlzIHNldCBhcyBjcm9zcy1zdWJkb21haW4gb3Igbm90IChvdmVycmlkZXMgdmFsdWUgc3BlY2lmaWVkIGluIHRoaXMgUG9zdEhvZyBpbnN0YW5jZSdzIGNvbmZpZylcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLnNlY3VyZV9jb29raWVdIFdoZXRoZXIgdGhlIG9wdC1pbiBjb29raWUgaXMgc2V0IGFzIHNlY3VyZSBvciBub3QgKG92ZXJyaWRlcyB2YWx1ZSBzcGVjaWZpZWQgaW4gdGhpcyBQb3N0SG9nIGluc3RhbmNlJ3MgY29uZmlnKVxuICAgICAqL1xuICAgIGNsZWFyX29wdF9pbl9vdXRfY2FwdHVyaW5nKG9wdGlvbnM/OiBQYXJ0aWFsPE9wdEluT3V0Q2FwdHVyaW5nT3B0aW9ucz4pOiB2b2lkIHtcbiAgICAgICAgY29uc3QgX29wdGlvbnM6IFBhcnRpYWw8T3B0SW5PdXRDYXB0dXJpbmdPcHRpb25zPiA9IF9leHRlbmQoXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZW5hYmxlX3BlcnNpc3RlbmNlOiB0cnVlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9wdGlvbnMgPz8ge31cbiAgICAgICAgKVxuICAgICAgICB0aGlzLl9nZHByX2NhbGxfZnVuYyhjbGVhck9wdEluT3V0LCBfb3B0aW9ucylcbiAgICAgICAgdGhpcy5fZ2Rwcl91cGRhdGVfcGVyc2lzdGVuY2UoX29wdGlvbnMpXG4gICAgfVxuXG4gICAgZGVidWcoZGVidWc/OiBib29sZWFuKTogdm9pZCB7XG4gICAgICAgIGlmIChkZWJ1ZyA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHdpbmRvdz8uY29uc29sZS5sb2coXCJZb3UndmUgZGlzYWJsZWQgZGVidWcgbW9kZS5cIilcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZSAmJiBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgncGhfZGVidWcnKVxuICAgICAgICAgICAgdGhpcy5zZXRfY29uZmlnKHsgZGVidWc6IGZhbHNlIH0pXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB3aW5kb3c/LmNvbnNvbGUubG9nKFxuICAgICAgICAgICAgICAgIFwiWW91J3JlIG5vdyBpbiBkZWJ1ZyBtb2RlLiBBbGwgY2FsbHMgdG8gUG9zdEhvZyB3aWxsIGJlIGxvZ2dlZCBpbiB5b3VyIGNvbnNvbGUuXFxuWW91IGNhbiBkaXNhYmxlIHRoaXMgd2l0aCBgcG9zdGhvZy5kZWJ1ZyhmYWxzZSlgLlwiXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2UgJiYgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3BoX2RlYnVnJywgJ3RydWUnKVxuICAgICAgICAgICAgdGhpcy5zZXRfY29uZmlnKHsgZGVidWc6IHRydWUgfSlcbiAgICAgICAgfVxuICAgIH1cbn1cblxuX3NhZmV3cmFwX2NsYXNzKFBvc3RIb2csIFsnaWRlbnRpZnknXSlcblxuY29uc3QgYWRkX2RvbV9sb2FkZWRfaGFuZGxlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAvLyBDcm9zcyBicm93c2VyIERPTSBMb2FkZWQgc3VwcG9ydFxuICAgIGZ1bmN0aW9uIGRvbV9sb2FkZWRfaGFuZGxlcigpIHtcbiAgICAgICAgLy8gZnVuY3Rpb24gZmxhZyBzaW5jZSB3ZSBvbmx5IHdhbnQgdG8gZXhlY3V0ZSB0aGlzIG9uY2VcbiAgICAgICAgaWYgKChkb21fbG9hZGVkX2hhbmRsZXIgYXMgYW55KS5kb25lKSB7XG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgICA7KGRvbV9sb2FkZWRfaGFuZGxlciBhcyBhbnkpLmRvbmUgPSB0cnVlXG5cbiAgICAgICAgRU5RVUVVRV9SRVFVRVNUUyA9IGZhbHNlXG5cbiAgICAgICAgX2VhY2goaW5zdGFuY2VzLCBmdW5jdGlvbiAoaW5zdDogUG9zdEhvZykge1xuICAgICAgICAgICAgaW5zdC5fZG9tX2xvYWRlZCgpXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgaWYgKGRvY3VtZW50Py5hZGRFdmVudExpc3RlbmVyKSB7XG4gICAgICAgIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlID09PSAnY29tcGxldGUnKSB7XG4gICAgICAgICAgICAvLyBzYWZhcmkgNCBjYW4gZmlyZSB0aGUgRE9NQ29udGVudExvYWRlZCBldmVudCBiZWZvcmUgbG9hZGluZyBhbGxcbiAgICAgICAgICAgIC8vIGV4dGVybmFsIEpTIChpbmNsdWRpbmcgdGhpcyBmaWxlKS4geW91IHdpbGwgc2VlIHNvbWUgY29weXBhc3RhXG4gICAgICAgICAgICAvLyBvbiB0aGUgaW50ZXJuZXQgdGhhdCBjaGVja3MgZm9yICdjb21wbGV0ZScgYW5kICdsb2FkZWQnLCBidXRcbiAgICAgICAgICAgIC8vICdsb2FkZWQnIGlzIGFuIElFIHRoaW5nXG4gICAgICAgICAgICBkb21fbG9hZGVkX2hhbmRsZXIoKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGRvbV9sb2FkZWRfaGFuZGxlciwgZmFsc2UpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBmYWxsYmFjayBoYW5kbGVyLCBhbHdheXMgd2lsbCB3b3JrXG4gICAgaWYgKHdpbmRvdykge1xuICAgICAgICBfcmVnaXN0ZXJfZXZlbnQod2luZG93LCAnbG9hZCcsIGRvbV9sb2FkZWRfaGFuZGxlciwgdHJ1ZSlcbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpbml0X2Zyb21fc25pcHBldCgpOiB2b2lkIHtcbiAgICBjb25zdCBwb3N0aG9nTWFpbiA9IChpbnN0YW5jZXNbUFJJTUFSWV9JTlNUQU5DRV9OQU1FXSA9IG5ldyBQb3N0SG9nKCkpXG5cbiAgICBjb25zdCBzbmlwcGV0UG9zdEhvZyA9IGFzc2lnbmFibGVXaW5kb3dbJ3Bvc3Rob2cnXVxuXG4gICAgaWYgKHNuaXBwZXRQb3N0SG9nKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgc25pcHBldCB1c2VzIHNvbWUgY2xldmVyIHRyaWNrcyB0byBhbGxvdyBkZWZlcnJlZCBsb2FkaW5nIG9mIGFycmF5LmpzICh0aGlzIGNvZGUpXG4gICAgICAgICAqXG4gICAgICAgICAqIHdpbmRvdy5wb3N0aG9nIGlzIGFuIGFycmF5IHdoaWNoIHRoZSBxdWV1ZSBvZiBjYWxscyBtYWRlIGJlZm9yZSB0aGUgbGliIGlzIGxvYWRlZFxuICAgICAgICAgKiBJdCBoYXMgbWV0aG9kcyBhdHRhY2hlZCB0byBpdCB0byBzaW11bGF0ZSB0aGUgcG9zdGhvZyBvYmplY3Qgc28gZm9yIGluc3RhbmNlXG4gICAgICAgICAqXG4gICAgICAgICAqIHdpbmRvdy5wb3N0aG9nLmluaXQoXCJUT0tFTlwiLCB7YXBpX2hvc3Q6IFwiZm9vXCIgfSlcbiAgICAgICAgICogd2luZG93LnBvc3Rob2cuY2FwdHVyZShcIm15LWV2ZW50XCIsIHtmb286IFwiYmFyXCIgfSlcbiAgICAgICAgICpcbiAgICAgICAgICogLi4uIHdpbGwgbWVhbiB0aGF0IHdpbmRvdy5wb3N0aG9nIHdpbGwgbG9vayBsaWtlIHRoaXM6XG4gICAgICAgICAqIHdpbmRvdy5wb3N0aG9nID09IFtcbiAgICAgICAgICogIFtcIm15LWV2ZW50XCIsIHtmb286IFwiYmFyXCJ9XVxuICAgICAgICAgKiBdXG4gICAgICAgICAqXG4gICAgICAgICAqIHdpbmRvdy5wb3N0aG9nW19pXSA9PSBbXG4gICAgICAgICAqICAgW1wiVE9LRU5cIiwge2FwaV9ob3N0OiBcImZvb1wiIH0sIFwicG9zdGhvZ1wiXVxuICAgICAgICAgKiBdXG4gICAgICAgICAqXG4gICAgICAgICAqIElmIGEgbmFtZSBpcyBnaXZlbiB0byB0aGUgaW5pdCBmdW5jdGlvbiB0aGVuIHRoZSBzYW1lIGFzIGFib3ZlIGlzIHRydWUgYnV0IGFzIGEgc3ViLXByb3BlcnR5IG9uIHRoZSBvYmplY3Q6XG4gICAgICAgICAqXG4gICAgICAgICAqIHdpbmRvdy5wb3N0aG9nLmluaXQoXCJUT0tFTlwiLCB7fSwgXCJwaDJcIilcbiAgICAgICAgICogd2luZG93LnBvc3Rob2cucGgyLnBlb3BsZS5zZXQoe2ZvbzogXCJiYXJcIn0pXG4gICAgICAgICAqXG4gICAgICAgICAqIHdpbmRvdy5wb3N0aG9nLnBoMiA9PSBbXVxuICAgICAgICAgKiB3aW5kb3cucG9zdGhvZy5wZW9wbGUgPT0gW1xuICAgICAgICAgKiAgW1wic2V0XCIsIHtmb286IFwiYmFyXCJ9XVxuICAgICAgICAgKiBdXG4gICAgICAgICAqXG4gICAgICAgICAqL1xuXG4gICAgICAgIC8vIENhbGwgYWxsIHByZS1sb2FkZWQgaW5pdCBjYWxscyBwcm9wZXJseVxuXG4gICAgICAgIF9lYWNoKHNuaXBwZXRQb3N0SG9nWydfaSddLCBmdW5jdGlvbiAoaXRlbTogW3Rva2VuOiBzdHJpbmcsIGNvbmZpZzogUGFydGlhbDxQb3N0SG9nQ29uZmlnPiwgbmFtZTogc3RyaW5nXSkge1xuICAgICAgICAgICAgaWYgKGl0ZW0gJiYgX2lzQXJyYXkoaXRlbSkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpbnN0YW5jZSA9IHBvc3Rob2dNYWluLmluaXQoaXRlbVswXSwgaXRlbVsxXSwgaXRlbVsyXSlcblxuICAgICAgICAgICAgICAgIGNvbnN0IGluc3RhbmNlU25pcHBldCA9IHNuaXBwZXRQb3N0SG9nW2l0ZW1bMl1dIHx8IHNuaXBwZXRQb3N0SG9nXG5cbiAgICAgICAgICAgICAgICBpZiAoaW5zdGFuY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQ3J1bmNoIHRocm91Z2ggdGhlIHBlb3BsZSBxdWV1ZSBmaXJzdCAtIHdlIHF1ZXVlIHRoaXMgZGF0YSB1cCAmXG4gICAgICAgICAgICAgICAgICAgIC8vIGZsdXNoIG9uIGlkZW50aWZ5LCBzbyBpdCdzIGJldHRlciB0byBkbyBhbGwgdGhlc2Ugb3BlcmF0aW9ucyBmaXJzdFxuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZS5fZXhlY3V0ZV9hcnJheS5jYWxsKGluc3RhbmNlLnBlb3BsZSwgaW5zdGFuY2VTbmlwcGV0LnBlb3BsZSlcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2UuX2V4ZWN1dGVfYXJyYXkoaW5zdGFuY2VTbmlwcGV0KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBhc3NpZ25hYmxlV2luZG93Wydwb3N0aG9nJ10gPSBwb3N0aG9nTWFpblxuXG4gICAgYWRkX2RvbV9sb2FkZWRfaGFuZGxlcigpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpbml0X2FzX21vZHVsZSgpOiBQb3N0SG9nIHtcbiAgICBjb25zdCBwb3N0aG9nTWFpbiA9IChpbnN0YW5jZXNbUFJJTUFSWV9JTlNUQU5DRV9OQU1FXSA9IG5ldyBQb3N0SG9nKCkpXG5cbiAgICBhZGRfZG9tX2xvYWRlZF9oYW5kbGVyKClcblxuICAgIHJldHVybiBwb3N0aG9nTWFpblxufVxuIiwgIi8qKlxuICogRXh0ZW5kIFNlZ21lbnQgd2l0aCBleHRyYSBQb3N0SG9nIEpTIGZ1bmN0aW9uYWxpdHkuIFJlcXVpcmVkIGZvciB0aGluZ3MgbGlrZSBSZWNvcmRpbmdzIGFuZCBmZWF0dXJlIGZsYWdzIHRvIHdvcmsgY29ycmVjdGx5LlxuICpcbiAqICMjIyBVc2FnZVxuICpcbiAqICBgYGBqc1xuICogIC8vIEFmdGVyIHlvdXIgc3RhbmRhcmQgc2VnbWVudCBhbnlhbHl0aWNzIGluc3RhbGxcbiAqICBhbmFseXRpY3MubG9hZChcIkdPRURmQTIxelpUdFI3Y2xzQnVEdm1CS0F0QWRaNk5wXCIpO1xuICpcbiAqICBhbmFseXRpY3MucmVhZHkoKCkgPT4ge1xuICogICAgcG9zdGhvZy5pbml0KCc8cG9zdGhvZy1hcGkta2V5PicsIHtcbiAqICAgICAgY2FwdHVyZV9wYWdldmlldzogZmFsc2UsXG4gKiAgICAgIHNlZ21lbnQ6IHdpbmRvdy5hbmFseXRpY3MsIC8vIE5PVEU6IEJlIHN1cmUgdG8gdXNlIHdpbmRvdy5hbmFseXRpY3MgaGVyZSFcbiAqICAgIH0pO1xuICogICAgd2luZG93LmFuYWx5dGljcy5wYWdlKCk7XG4gKiAgfSlcbiAqICBgYGBcbiAqL1xuaW1wb3J0IHsgUG9zdEhvZyB9IGZyb20gJy4uL3Bvc3Rob2ctY29yZSdcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJy4uL3V0aWxzL2xvZ2dlcidcblxuLy8gTG9vc2VseSBiYXNlZCBvbiBodHRwczovL2dpdGh1Yi5jb20vc2VnbWVudGlvL2FuYWx5dGljcy1uZXh0L2Jsb2IvbWFzdGVyL3BhY2thZ2VzL2NvcmUvc3JjL3BsdWdpbnMvaW5kZXgudHNcbmludGVyZmFjZSBTZWdtZW50UGx1Z2luQ29udGV4dCB7XG4gICAgZXZlbnQ6IHtcbiAgICAgICAgZXZlbnQ6IHN0cmluZ1xuICAgICAgICB1c2VySWQ/OiBzdHJpbmdcbiAgICAgICAgYW5vbnltb3VzSWQ/OiBzdHJpbmdcbiAgICAgICAgcHJvcGVydGllczogYW55XG4gICAgfVxufVxuXG5pbnRlcmZhY2UgU2VnbWVudFBsdWdpbiB7XG4gICAgbmFtZTogc3RyaW5nXG4gICAgdmVyc2lvbjogc3RyaW5nXG4gICAgdHlwZTogJ2VucmljaG1lbnQnXG4gICAgaXNMb2FkZWQ6ICgpID0+IGJvb2xlYW5cbiAgICBsb2FkOiAoY3R4OiBTZWdtZW50UGx1Z2luQ29udGV4dCwgaW5zdGFuY2U6IGFueSwgY29uZmlnPzogYW55KSA9PiBQcm9taXNlPHVua25vd24+XG4gICAgdW5sb2FkPzogKGN0eDogU2VnbWVudFBsdWdpbkNvbnRleHQsIGluc3RhbmNlOiBhbnkpID0+IFByb21pc2U8dW5rbm93bj4gfCB1bmtub3duXG4gICAgcmVhZHk/OiAoKSA9PiBQcm9taXNlPHVua25vd24+XG4gICAgdHJhY2s/OiAoY3R4OiBTZWdtZW50UGx1Z2luQ29udGV4dCkgPT4gUHJvbWlzZTxTZWdtZW50UGx1Z2luQ29udGV4dD4gfCBTZWdtZW50UGx1Z2luQ29udGV4dFxuICAgIGlkZW50aWZ5PzogKGN0eDogU2VnbWVudFBsdWdpbkNvbnRleHQpID0+IFByb21pc2U8U2VnbWVudFBsdWdpbkNvbnRleHQ+IHwgU2VnbWVudFBsdWdpbkNvbnRleHRcbiAgICBwYWdlPzogKGN0eDogU2VnbWVudFBsdWdpbkNvbnRleHQpID0+IFByb21pc2U8U2VnbWVudFBsdWdpbkNvbnRleHQ+IHwgU2VnbWVudFBsdWdpbkNvbnRleHRcbiAgICBncm91cD86IChjdHg6IFNlZ21lbnRQbHVnaW5Db250ZXh0KSA9PiBQcm9taXNlPFNlZ21lbnRQbHVnaW5Db250ZXh0PiB8IFNlZ21lbnRQbHVnaW5Db250ZXh0XG4gICAgYWxpYXM/OiAoY3R4OiBTZWdtZW50UGx1Z2luQ29udGV4dCkgPT4gUHJvbWlzZTxTZWdtZW50UGx1Z2luQ29udGV4dD4gfCBTZWdtZW50UGx1Z2luQ29udGV4dFxuICAgIHNjcmVlbj86IChjdHg6IFNlZ21lbnRQbHVnaW5Db250ZXh0KSA9PiBQcm9taXNlPFNlZ21lbnRQbHVnaW5Db250ZXh0PiB8IFNlZ21lbnRQbHVnaW5Db250ZXh0XG59XG5cbmV4cG9ydCBjb25zdCBjcmVhdGVTZWdtZW50SW50ZWdyYXRpb24gPSAocG9zdGhvZzogUG9zdEhvZyk6IFNlZ21lbnRQbHVnaW4gPT4ge1xuICAgIGlmICghUHJvbWlzZSB8fCAhUHJvbWlzZS5yZXNvbHZlKSB7XG4gICAgICAgIGxvZ2dlci53YXJuKCdUaGlzIGJyb3dzZXIgZG9lcyBub3QgaGF2ZSBQcm9taXNlIHN1cHBvcnQsIGFuZCBjYW4gbm90IHVzZSB0aGUgc2VnbWVudCBpbnRlZ3JhdGlvbicpXG4gICAgfVxuXG4gICAgY29uc3QgZW5yaWNoRXZlbnQgPSAoY3R4OiBTZWdtZW50UGx1Z2luQ29udGV4dCwgZXZlbnROYW1lOiBzdHJpbmcpID0+IHtcbiAgICAgICAgaWYgKCFjdHguZXZlbnQudXNlcklkICYmIGN0eC5ldmVudC5hbm9ueW1vdXNJZCAhPT0gcG9zdGhvZy5nZXRfZGlzdGluY3RfaWQoKSkge1xuICAgICAgICAgICAgLy8gVGhpcyBpcyBvdXIgb25seSB3YXkgb2YgZGV0ZWN0aW5nIHRoYXQgc2VnbWVudCdzIGFuYWx5dGljcy5yZXNldCgpIGhhcyBiZWVuIGNhbGxlZCBzbyB3ZSBhbHNvIGNhbGwgaXRcbiAgICAgICAgICAgIHBvc3Rob2cucmVzZXQoKVxuICAgICAgICB9XG4gICAgICAgIGlmIChjdHguZXZlbnQudXNlcklkICYmIGN0eC5ldmVudC51c2VySWQgIT09IHBvc3Rob2cuZ2V0X2Rpc3RpbmN0X2lkKCkpIHtcbiAgICAgICAgICAgIHBvc3Rob2cucmVnaXN0ZXIoe1xuICAgICAgICAgICAgICAgIGRpc3RpbmN0X2lkOiBjdHguZXZlbnQudXNlcklkLFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIHBvc3Rob2cucmVsb2FkRmVhdHVyZUZsYWdzKClcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGFkZGl0aW9uYWxQcm9wZXJ0aWVzID0gcG9zdGhvZy5fY2FsY3VsYXRlX2V2ZW50X3Byb3BlcnRpZXMoZXZlbnROYW1lLCBjdHguZXZlbnQucHJvcGVydGllcylcbiAgICAgICAgY3R4LmV2ZW50LnByb3BlcnRpZXMgPSBPYmplY3QuYXNzaWduKHt9LCBhZGRpdGlvbmFsUHJvcGVydGllcywgY3R4LmV2ZW50LnByb3BlcnRpZXMpXG4gICAgICAgIHJldHVybiBjdHhcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBuYW1lOiAnUG9zdEhvZyBKUycsXG4gICAgICAgIHR5cGU6ICdlbnJpY2htZW50JyxcbiAgICAgICAgdmVyc2lvbjogJzEuMC4wJyxcbiAgICAgICAgaXNMb2FkZWQ6ICgpID0+IHRydWUsXG4gICAgICAgIC8vIGNoZWNrIGFuZCBlYXJseSByZXR1cm4gYWJvdmVcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNvbXBhdC9jb21wYXRcbiAgICAgICAgbG9hZDogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKCksXG4gICAgICAgIHRyYWNrOiAoY3R4KSA9PiBlbnJpY2hFdmVudChjdHgsIGN0eC5ldmVudC5ldmVudCksXG4gICAgICAgIHBhZ2U6IChjdHgpID0+IGVucmljaEV2ZW50KGN0eCwgJyRwYWdldmlldycpLFxuICAgICAgICBpZGVudGlmeTogKGN0eCkgPT4gZW5yaWNoRXZlbnQoY3R4LCAnJGlkZW50aWZ5JyksXG4gICAgICAgIHNjcmVlbjogKGN0eCkgPT4gZW5yaWNoRXZlbnQoY3R4LCAnJHNjcmVlbicpLFxuICAgIH1cbn1cbiIsICIvKipcbiAqIEhhdmluZyBTdXJ2ZXkgdHlwZXMgaW4gdHlwZXMudHMgd2FzIGNvbmZ1c2luZyB0c2NcbiAqIGFuZCBnZW5lcmF0aW5nIGFuIGludmFsaWQgbW9kdWxlLmQudHNcbiAqIFNlZSBodHRwczovL2dpdGh1Yi5jb20vUG9zdEhvZy9wb3N0aG9nLWpzL2lzc3Vlcy82OThcbiAqL1xuXG5leHBvcnQgaW50ZXJmYWNlIFN1cnZleUFwcGVhcmFuY2Uge1xuICAgIC8vIGtlZXAgaW4gc3luYyB3aXRoIGZyb250ZW5kL3NyYy90eXBlcy50cyAtPiBTdXJ2ZXlBcHBlYXJhbmNlXG4gICAgYmFja2dyb3VuZENvbG9yPzogc3RyaW5nXG4gICAgc3VibWl0QnV0dG9uQ29sb3I/OiBzdHJpbmdcbiAgICAvLyB0ZXh0IGNvbG9yIGlzIGRlcHJlY2F0ZWQsIHVzZSBhdXRvIGNvbnRyYXN0IHRleHQgY29sb3IgaW5zdGVhZFxuICAgIHRleHRDb2xvcj86IHN0cmluZ1xuICAgIC8vIGRlcHJlY2F0ZSBzdWJtaXQgYnV0dG9uIHRleHQgZXZlbnR1YWxseVxuICAgIHN1Ym1pdEJ1dHRvblRleHQ/OiBzdHJpbmdcbiAgICBkZXNjcmlwdGlvblRleHRDb2xvcj86IHN0cmluZ1xuICAgIHJhdGluZ0J1dHRvbkNvbG9yPzogc3RyaW5nXG4gICAgcmF0aW5nQnV0dG9uQWN0aXZlQ29sb3I/OiBzdHJpbmdcbiAgICByYXRpbmdCdXR0b25Ib3ZlckNvbG9yPzogc3RyaW5nXG4gICAgd2hpdGVMYWJlbD86IGJvb2xlYW5cbiAgICBhdXRvRGlzYXBwZWFyPzogYm9vbGVhblxuICAgIGRpc3BsYXlUaGFua1lvdU1lc3NhZ2U/OiBib29sZWFuXG4gICAgdGhhbmtZb3VNZXNzYWdlSGVhZGVyPzogc3RyaW5nXG4gICAgdGhhbmtZb3VNZXNzYWdlRGVzY3JpcHRpb24/OiBzdHJpbmdcbiAgICBib3JkZXJDb2xvcj86IHN0cmluZ1xuICAgIHBvc2l0aW9uPzogJ2xlZnQnIHwgJ3JpZ2h0JyB8ICdjZW50ZXInXG4gICAgcGxhY2Vob2xkZXI/OiBzdHJpbmdcbiAgICAvLyB3aWRnZXQgb3B0aW9uc1xuICAgIHdpZGdldFR5cGU/OiAnYnV0dG9uJyB8ICd0YWInIHwgJ3NlbGVjdG9yJ1xuICAgIHdpZGdldFNlbGVjdG9yPzogc3RyaW5nXG4gICAgd2lkZ2V0TGFiZWw/OiBzdHJpbmdcbiAgICB3aWRnZXRDb2xvcj86IHN0cmluZ1xuICAgIC8vIHF1ZXN0aW9uYWJsZTogTm90IGluIGZyb250ZW5kL3NyYy90eXBlcy50cyAtPiBTdXJ2ZXlBcHBlYXJhbmNlLCBidXQgdXNlZCBpbiBzaXRlIGFwcFxuICAgIG1heFdpZHRoPzogc3RyaW5nXG4gICAgekluZGV4Pzogc3RyaW5nXG59XG5cbmV4cG9ydCBlbnVtIFN1cnZleVR5cGUge1xuICAgIFBvcG92ZXIgPSAncG9wb3ZlcicsXG4gICAgQVBJID0gJ2FwaScsXG4gICAgV2lkZ2V0ID0gJ3dpZGdldCcsXG59XG5cbmV4cG9ydCB0eXBlIFN1cnZleVF1ZXN0aW9uID0gQmFzaWNTdXJ2ZXlRdWVzdGlvbiB8IExpbmtTdXJ2ZXlRdWVzdGlvbiB8IFJhdGluZ1N1cnZleVF1ZXN0aW9uIHwgTXVsdGlwbGVTdXJ2ZXlRdWVzdGlvblxuXG5pbnRlcmZhY2UgU3VydmV5UXVlc3Rpb25CYXNlIHtcbiAgICBxdWVzdGlvbjogc3RyaW5nXG4gICAgZGVzY3JpcHRpb24/OiBzdHJpbmcgfCBudWxsXG4gICAgb3B0aW9uYWw/OiBib29sZWFuXG4gICAgYnV0dG9uVGV4dD86IHN0cmluZ1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJhc2ljU3VydmV5UXVlc3Rpb24gZXh0ZW5kcyBTdXJ2ZXlRdWVzdGlvbkJhc2Uge1xuICAgIHR5cGU6IFN1cnZleVF1ZXN0aW9uVHlwZS5PcGVuXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTGlua1N1cnZleVF1ZXN0aW9uIGV4dGVuZHMgU3VydmV5UXVlc3Rpb25CYXNlIHtcbiAgICB0eXBlOiBTdXJ2ZXlRdWVzdGlvblR5cGUuTGlua1xuICAgIGxpbms/OiBzdHJpbmcgfCBudWxsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmF0aW5nU3VydmV5UXVlc3Rpb24gZXh0ZW5kcyBTdXJ2ZXlRdWVzdGlvbkJhc2Uge1xuICAgIHR5cGU6IFN1cnZleVF1ZXN0aW9uVHlwZS5SYXRpbmdcbiAgICBkaXNwbGF5OiAnbnVtYmVyJyB8ICdlbW9qaSdcbiAgICBzY2FsZTogbnVtYmVyXG4gICAgbG93ZXJCb3VuZExhYmVsOiBzdHJpbmdcbiAgICB1cHBlckJvdW5kTGFiZWw6IHN0cmluZ1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE11bHRpcGxlU3VydmV5UXVlc3Rpb24gZXh0ZW5kcyBTdXJ2ZXlRdWVzdGlvbkJhc2Uge1xuICAgIHR5cGU6IFN1cnZleVF1ZXN0aW9uVHlwZS5TaW5nbGVDaG9pY2UgfCBTdXJ2ZXlRdWVzdGlvblR5cGUuTXVsdGlwbGVDaG9pY2VcbiAgICBjaG9pY2VzOiBzdHJpbmdbXVxuICAgIGhhc09wZW5DaG9pY2U/OiBib29sZWFuXG59XG5cbmV4cG9ydCBlbnVtIFN1cnZleVF1ZXN0aW9uVHlwZSB7XG4gICAgT3BlbiA9ICdvcGVuJyxcbiAgICBNdWx0aXBsZUNob2ljZSA9ICdtdWx0aXBsZV9jaG9pY2UnLFxuICAgIFNpbmdsZUNob2ljZSA9ICdzaW5nbGVfY2hvaWNlJyxcbiAgICBSYXRpbmcgPSAncmF0aW5nJyxcbiAgICBMaW5rID0gJ2xpbmsnLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFN1cnZleVJlc3BvbnNlIHtcbiAgICBzdXJ2ZXlzOiBTdXJ2ZXlbXVxufVxuXG5leHBvcnQgdHlwZSBTdXJ2ZXlDYWxsYmFjayA9IChzdXJ2ZXlzOiBTdXJ2ZXlbXSkgPT4gdm9pZFxuXG5leHBvcnQgdHlwZSBTdXJ2ZXlVcmxNYXRjaFR5cGUgPSAncmVnZXgnIHwgJ2V4YWN0JyB8ICdpY29udGFpbnMnXG5cbmV4cG9ydCBpbnRlcmZhY2UgU3VydmV5IHtcbiAgICAvLyBTeW5jIHRoaXMgd2l0aCB0aGUgYmFja2VuZCdzIFN1cnZleUFQSVNlcmlhbGl6ZXIhXG4gICAgaWQ6IHN0cmluZ1xuICAgIG5hbWU6IHN0cmluZ1xuICAgIGRlc2NyaXB0aW9uOiBzdHJpbmdcbiAgICB0eXBlOiBTdXJ2ZXlUeXBlXG4gICAgbGlua2VkX2ZsYWdfa2V5OiBzdHJpbmcgfCBudWxsXG4gICAgdGFyZ2V0aW5nX2ZsYWdfa2V5OiBzdHJpbmcgfCBudWxsXG4gICAgcXVlc3Rpb25zOiBTdXJ2ZXlRdWVzdGlvbltdXG4gICAgYXBwZWFyYW5jZTogU3VydmV5QXBwZWFyYW5jZSB8IG51bGxcbiAgICBjb25kaXRpb25zOiB7XG4gICAgICAgIHVybD86IHN0cmluZ1xuICAgICAgICBzZWxlY3Rvcj86IHN0cmluZ1xuICAgICAgICBzZWVuU3VydmV5V2FpdFBlcmlvZEluRGF5cz86IG51bWJlclxuICAgICAgICB1cmxNYXRjaFR5cGU/OiBTdXJ2ZXlVcmxNYXRjaFR5cGVcbiAgICB9IHwgbnVsbFxuICAgIHN0YXJ0X2RhdGU6IHN0cmluZyB8IG51bGxcbiAgICBlbmRfZGF0ZTogc3RyaW5nIHwgbnVsbFxufVxuIiwgImltcG9ydCB7IGluaXRfYXNfbW9kdWxlIH0gZnJvbSAnLi9wb3N0aG9nLWNvcmUnXG5leHBvcnQgeyBQb3N0SG9nIH0gZnJvbSAnLi9wb3N0aG9nLWNvcmUnXG5leHBvcnQgKiBmcm9tICcuL3R5cGVzJ1xuZXhwb3J0ICogZnJvbSAnLi9wb3N0aG9nLXN1cnZleXMtdHlwZXMnXG5leHBvcnQgY29uc3QgcG9zdGhvZyA9IGluaXRfYXNfbW9kdWxlKClcbmV4cG9ydCBkZWZhdWx0IHBvc3Rob2dcbiIsICJcInVzZSBzdHJpY3RcIjtcblxuKGZ1bmN0aW9uKCkge1xuICB2YXIgUG9seWZpbGxFdmVudCA9IGV2ZW50Q29uc3RydWN0b3IoKTtcblxuICBmdW5jdGlvbiBldmVudENvbnN0cnVjdG9yKCkge1xuICAgIGlmICh0eXBlb2Ygd2luZG93LkN1c3RvbUV2ZW50ID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiB3aW5kb3cuQ3VzdG9tRXZlbnQ7XG4gICAgLy8gSUU8PTkgU3VwcG9ydFxuICAgIGZ1bmN0aW9uIEN1c3RvbUV2ZW50KGV2ZW50LCBwYXJhbXMpIHtcbiAgICAgIHBhcmFtcyA9IHBhcmFtcyB8fCB7YnViYmxlczogZmFsc2UsIGNhbmNlbGFibGU6IGZhbHNlLCBkZXRhaWw6IHVuZGVmaW5lZH07XG4gICAgICB2YXIgZXZ0ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0N1c3RvbUV2ZW50Jyk7XG4gICAgICBldnQuaW5pdEN1c3RvbUV2ZW50KGV2ZW50LCBwYXJhbXMuYnViYmxlcywgcGFyYW1zLmNhbmNlbGFibGUsIHBhcmFtcy5kZXRhaWwpO1xuICAgICAgcmV0dXJuIGV2dDtcbiAgICB9XG4gICAgQ3VzdG9tRXZlbnQucHJvdG90eXBlID0gd2luZG93LkV2ZW50LnByb3RvdHlwZTtcbiAgICByZXR1cm4gQ3VzdG9tRXZlbnQ7XG4gIH1cblxuICBmdW5jdGlvbiBidWlsZEhpZGRlbklucHV0KG5hbWUsIHZhbHVlKSB7XG4gICAgdmFyIGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICAgIGlucHV0LnR5cGUgPSBcImhpZGRlblwiO1xuICAgIGlucHV0Lm5hbWUgPSBuYW1lO1xuICAgIGlucHV0LnZhbHVlID0gdmFsdWU7XG4gICAgcmV0dXJuIGlucHV0O1xuICB9XG5cbiAgZnVuY3Rpb24gaGFuZGxlQ2xpY2soZWxlbWVudCwgdGFyZ2V0TW9kaWZpZXJLZXkpIHtcbiAgICB2YXIgdG8gPSBlbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtdG9cIiksXG4gICAgICAgIG1ldGhvZCA9IGJ1aWxkSGlkZGVuSW5wdXQoXCJfbWV0aG9kXCIsIGVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS1tZXRob2RcIikpLFxuICAgICAgICBjc3JmID0gYnVpbGRIaWRkZW5JbnB1dChcIl9jc3JmX3Rva2VuXCIsIGVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS1jc3JmXCIpKSxcbiAgICAgICAgZm9ybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJmb3JtXCIpLFxuICAgICAgICBzdWJtaXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiksXG4gICAgICAgIHRhcmdldCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKFwidGFyZ2V0XCIpO1xuXG4gICAgZm9ybS5tZXRob2QgPSAoZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLW1ldGhvZFwiKSA9PT0gXCJnZXRcIikgPyBcImdldFwiIDogXCJwb3N0XCI7XG4gICAgZm9ybS5hY3Rpb24gPSB0bztcbiAgICBmb3JtLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcblxuICAgIGlmICh0YXJnZXQpIGZvcm0udGFyZ2V0ID0gdGFyZ2V0O1xuICAgIGVsc2UgaWYgKHRhcmdldE1vZGlmaWVyS2V5KSBmb3JtLnRhcmdldCA9IFwiX2JsYW5rXCI7XG5cbiAgICBmb3JtLmFwcGVuZENoaWxkKGNzcmYpO1xuICAgIGZvcm0uYXBwZW5kQ2hpbGQobWV0aG9kKTtcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGZvcm0pO1xuXG4gICAgLy8gSW5zZXJ0IGEgYnV0dG9uIGFuZCBjbGljayBpdCBpbnN0ZWFkIG9mIHVzaW5nIGBmb3JtLnN1Ym1pdGBcbiAgICAvLyBiZWNhdXNlIHRoZSBgc3VibWl0YCBmdW5jdGlvbiBkb2VzIG5vdCBlbWl0IGEgYHN1Ym1pdGAgZXZlbnQuXG4gICAgc3VibWl0LnR5cGUgPSBcInN1Ym1pdFwiO1xuICAgIGZvcm0uYXBwZW5kQ2hpbGQoc3VibWl0KTtcbiAgICBzdWJtaXQuY2xpY2soKTtcbiAgfVxuXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oZSkge1xuICAgIHZhciBlbGVtZW50ID0gZS50YXJnZXQ7XG4gICAgaWYgKGUuZGVmYXVsdFByZXZlbnRlZCkgcmV0dXJuO1xuXG4gICAgd2hpbGUgKGVsZW1lbnQgJiYgZWxlbWVudC5nZXRBdHRyaWJ1dGUpIHtcbiAgICAgIHZhciBwaG9lbml4TGlua0V2ZW50ID0gbmV3IFBvbHlmaWxsRXZlbnQoJ3Bob2VuaXgubGluay5jbGljaycsIHtcbiAgICAgICAgXCJidWJibGVzXCI6IHRydWUsIFwiY2FuY2VsYWJsZVwiOiB0cnVlXG4gICAgICB9KTtcblxuICAgICAgaWYgKCFlbGVtZW50LmRpc3BhdGNoRXZlbnQocGhvZW5peExpbmtFdmVudCkpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGlmIChlbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtbWV0aG9kXCIpKSB7XG4gICAgICAgIGhhbmRsZUNsaWNrKGVsZW1lbnQsIGUubWV0YUtleSB8fCBlLnNoaWZ0S2V5KTtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbGVtZW50ID0gZWxlbWVudC5wYXJlbnROb2RlO1xuICAgICAgfVxuICAgIH1cbiAgfSwgZmFsc2UpO1xuXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdwaG9lbml4LmxpbmsuY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgIHZhciBtZXNzYWdlID0gZS50YXJnZXQuZ2V0QXR0cmlidXRlKFwiZGF0YS1jb25maXJtXCIpO1xuICAgIGlmKG1lc3NhZ2UgJiYgIXdpbmRvdy5jb25maXJtKG1lc3NhZ2UpKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuICB9LCBmYWxzZSk7XG59KSgpO1xuIiwgIi8vIHdyYXBzIHZhbHVlIGluIGNsb3N1cmUgb3IgcmV0dXJucyBjbG9zdXJlXG5leHBvcnQgbGV0IGNsb3N1cmUgPSAodmFsdWUpID0+IHtcbiAgaWYodHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCIpe1xuICAgIHJldHVybiB2YWx1ZVxuICB9IGVsc2Uge1xuICAgIGxldCBjbG9zdXJlID0gZnVuY3Rpb24gKCl7IHJldHVybiB2YWx1ZSB9XG4gICAgcmV0dXJuIGNsb3N1cmVcbiAgfVxufVxuIiwgImV4cG9ydCBjb25zdCBnbG9iYWxTZWxmID0gdHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgPyBzZWxmIDogbnVsbFxuZXhwb3J0IGNvbnN0IHBoeFdpbmRvdyA9IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgPyB3aW5kb3cgOiBudWxsXG5leHBvcnQgY29uc3QgZ2xvYmFsID0gZ2xvYmFsU2VsZiB8fCBwaHhXaW5kb3cgfHwgZ2xvYmFsXG5leHBvcnQgY29uc3QgREVGQVVMVF9WU04gPSBcIjIuMC4wXCJcbmV4cG9ydCBjb25zdCBTT0NLRVRfU1RBVEVTID0ge2Nvbm5lY3Rpbmc6IDAsIG9wZW46IDEsIGNsb3Npbmc6IDIsIGNsb3NlZDogM31cbmV4cG9ydCBjb25zdCBERUZBVUxUX1RJTUVPVVQgPSAxMDAwMFxuZXhwb3J0IGNvbnN0IFdTX0NMT1NFX05PUk1BTCA9IDEwMDBcbmV4cG9ydCBjb25zdCBDSEFOTkVMX1NUQVRFUyA9IHtcbiAgY2xvc2VkOiBcImNsb3NlZFwiLFxuICBlcnJvcmVkOiBcImVycm9yZWRcIixcbiAgam9pbmVkOiBcImpvaW5lZFwiLFxuICBqb2luaW5nOiBcImpvaW5pbmdcIixcbiAgbGVhdmluZzogXCJsZWF2aW5nXCIsXG59XG5leHBvcnQgY29uc3QgQ0hBTk5FTF9FVkVOVFMgPSB7XG4gIGNsb3NlOiBcInBoeF9jbG9zZVwiLFxuICBlcnJvcjogXCJwaHhfZXJyb3JcIixcbiAgam9pbjogXCJwaHhfam9pblwiLFxuICByZXBseTogXCJwaHhfcmVwbHlcIixcbiAgbGVhdmU6IFwicGh4X2xlYXZlXCJcbn1cblxuZXhwb3J0IGNvbnN0IFRSQU5TUE9SVFMgPSB7XG4gIGxvbmdwb2xsOiBcImxvbmdwb2xsXCIsXG4gIHdlYnNvY2tldDogXCJ3ZWJzb2NrZXRcIlxufVxuZXhwb3J0IGNvbnN0IFhIUl9TVEFURVMgPSB7XG4gIGNvbXBsZXRlOiA0XG59XG4iLCAiLyoqXG4gKiBJbml0aWFsaXplcyB0aGUgUHVzaFxuICogQHBhcmFtIHtDaGFubmVsfSBjaGFubmVsIC0gVGhlIENoYW5uZWxcbiAqIEBwYXJhbSB7c3RyaW5nfSBldmVudCAtIFRoZSBldmVudCwgZm9yIGV4YW1wbGUgYFwicGh4X2pvaW5cImBcbiAqIEBwYXJhbSB7T2JqZWN0fSBwYXlsb2FkIC0gVGhlIHBheWxvYWQsIGZvciBleGFtcGxlIGB7dXNlcl9pZDogMTIzfWBcbiAqIEBwYXJhbSB7bnVtYmVyfSB0aW1lb3V0IC0gVGhlIHB1c2ggdGltZW91dCBpbiBtaWxsaXNlY29uZHNcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUHVzaCB7XG4gIGNvbnN0cnVjdG9yKGNoYW5uZWwsIGV2ZW50LCBwYXlsb2FkLCB0aW1lb3V0KXtcbiAgICB0aGlzLmNoYW5uZWwgPSBjaGFubmVsXG4gICAgdGhpcy5ldmVudCA9IGV2ZW50XG4gICAgdGhpcy5wYXlsb2FkID0gcGF5bG9hZCB8fCBmdW5jdGlvbiAoKXsgcmV0dXJuIHt9IH1cbiAgICB0aGlzLnJlY2VpdmVkUmVzcCA9IG51bGxcbiAgICB0aGlzLnRpbWVvdXQgPSB0aW1lb3V0XG4gICAgdGhpcy50aW1lb3V0VGltZXIgPSBudWxsXG4gICAgdGhpcy5yZWNIb29rcyA9IFtdXG4gICAgdGhpcy5zZW50ID0gZmFsc2VcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0gdGltZW91dFxuICAgKi9cbiAgcmVzZW5kKHRpbWVvdXQpe1xuICAgIHRoaXMudGltZW91dCA9IHRpbWVvdXRcbiAgICB0aGlzLnJlc2V0KClcbiAgICB0aGlzLnNlbmQoKVxuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqL1xuICBzZW5kKCl7XG4gICAgaWYodGhpcy5oYXNSZWNlaXZlZChcInRpbWVvdXRcIikpeyByZXR1cm4gfVxuICAgIHRoaXMuc3RhcnRUaW1lb3V0KClcbiAgICB0aGlzLnNlbnQgPSB0cnVlXG4gICAgdGhpcy5jaGFubmVsLnNvY2tldC5wdXNoKHtcbiAgICAgIHRvcGljOiB0aGlzLmNoYW5uZWwudG9waWMsXG4gICAgICBldmVudDogdGhpcy5ldmVudCxcbiAgICAgIHBheWxvYWQ6IHRoaXMucGF5bG9hZCgpLFxuICAgICAgcmVmOiB0aGlzLnJlZixcbiAgICAgIGpvaW5fcmVmOiB0aGlzLmNoYW5uZWwuam9pblJlZigpXG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0geyp9IHN0YXR1c1xuICAgKiBAcGFyYW0geyp9IGNhbGxiYWNrXG4gICAqL1xuICByZWNlaXZlKHN0YXR1cywgY2FsbGJhY2spe1xuICAgIGlmKHRoaXMuaGFzUmVjZWl2ZWQoc3RhdHVzKSl7XG4gICAgICBjYWxsYmFjayh0aGlzLnJlY2VpdmVkUmVzcC5yZXNwb25zZSlcbiAgICB9XG5cbiAgICB0aGlzLnJlY0hvb2tzLnB1c2goe3N0YXR1cywgY2FsbGJhY2t9KVxuICAgIHJldHVybiB0aGlzXG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHJlc2V0KCl7XG4gICAgdGhpcy5jYW5jZWxSZWZFdmVudCgpXG4gICAgdGhpcy5yZWYgPSBudWxsXG4gICAgdGhpcy5yZWZFdmVudCA9IG51bGxcbiAgICB0aGlzLnJlY2VpdmVkUmVzcCA9IG51bGxcbiAgICB0aGlzLnNlbnQgPSBmYWxzZVxuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBtYXRjaFJlY2VpdmUoe3N0YXR1cywgcmVzcG9uc2UsIF9yZWZ9KXtcbiAgICB0aGlzLnJlY0hvb2tzLmZpbHRlcihoID0+IGguc3RhdHVzID09PSBzdGF0dXMpXG4gICAgICAuZm9yRWFjaChoID0+IGguY2FsbGJhY2socmVzcG9uc2UpKVxuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBjYW5jZWxSZWZFdmVudCgpe1xuICAgIGlmKCF0aGlzLnJlZkV2ZW50KXsgcmV0dXJuIH1cbiAgICB0aGlzLmNoYW5uZWwub2ZmKHRoaXMucmVmRXZlbnQpXG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGNhbmNlbFRpbWVvdXQoKXtcbiAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lb3V0VGltZXIpXG4gICAgdGhpcy50aW1lb3V0VGltZXIgPSBudWxsXG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHN0YXJ0VGltZW91dCgpe1xuICAgIGlmKHRoaXMudGltZW91dFRpbWVyKXsgdGhpcy5jYW5jZWxUaW1lb3V0KCkgfVxuICAgIHRoaXMucmVmID0gdGhpcy5jaGFubmVsLnNvY2tldC5tYWtlUmVmKClcbiAgICB0aGlzLnJlZkV2ZW50ID0gdGhpcy5jaGFubmVsLnJlcGx5RXZlbnROYW1lKHRoaXMucmVmKVxuXG4gICAgdGhpcy5jaGFubmVsLm9uKHRoaXMucmVmRXZlbnQsIHBheWxvYWQgPT4ge1xuICAgICAgdGhpcy5jYW5jZWxSZWZFdmVudCgpXG4gICAgICB0aGlzLmNhbmNlbFRpbWVvdXQoKVxuICAgICAgdGhpcy5yZWNlaXZlZFJlc3AgPSBwYXlsb2FkXG4gICAgICB0aGlzLm1hdGNoUmVjZWl2ZShwYXlsb2FkKVxuICAgIH0pXG5cbiAgICB0aGlzLnRpbWVvdXRUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy50cmlnZ2VyKFwidGltZW91dFwiLCB7fSlcbiAgICB9LCB0aGlzLnRpbWVvdXQpXG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGhhc1JlY2VpdmVkKHN0YXR1cyl7XG4gICAgcmV0dXJuIHRoaXMucmVjZWl2ZWRSZXNwICYmIHRoaXMucmVjZWl2ZWRSZXNwLnN0YXR1cyA9PT0gc3RhdHVzXG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHRyaWdnZXIoc3RhdHVzLCByZXNwb25zZSl7XG4gICAgdGhpcy5jaGFubmVsLnRyaWdnZXIodGhpcy5yZWZFdmVudCwge3N0YXR1cywgcmVzcG9uc2V9KVxuICB9XG59XG4iLCAiLyoqXG4gKlxuICogQ3JlYXRlcyBhIHRpbWVyIHRoYXQgYWNjZXB0cyBhIGB0aW1lckNhbGNgIGZ1bmN0aW9uIHRvIHBlcmZvcm1cbiAqIGNhbGN1bGF0ZWQgdGltZW91dCByZXRyaWVzLCBzdWNoIGFzIGV4cG9uZW50aWFsIGJhY2tvZmYuXG4gKlxuICogQGV4YW1wbGVcbiAqIGxldCByZWNvbm5lY3RUaW1lciA9IG5ldyBUaW1lcigoKSA9PiB0aGlzLmNvbm5lY3QoKSwgZnVuY3Rpb24odHJpZXMpe1xuICogICByZXR1cm4gWzEwMDAsIDUwMDAsIDEwMDAwXVt0cmllcyAtIDFdIHx8IDEwMDAwXG4gKiB9KVxuICogcmVjb25uZWN0VGltZXIuc2NoZWR1bGVUaW1lb3V0KCkgLy8gZmlyZXMgYWZ0ZXIgMTAwMFxuICogcmVjb25uZWN0VGltZXIuc2NoZWR1bGVUaW1lb3V0KCkgLy8gZmlyZXMgYWZ0ZXIgNTAwMFxuICogcmVjb25uZWN0VGltZXIucmVzZXQoKVxuICogcmVjb25uZWN0VGltZXIuc2NoZWR1bGVUaW1lb3V0KCkgLy8gZmlyZXMgYWZ0ZXIgMTAwMFxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSB0aW1lckNhbGNcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGltZXIge1xuICBjb25zdHJ1Y3RvcihjYWxsYmFjaywgdGltZXJDYWxjKXtcbiAgICB0aGlzLmNhbGxiYWNrID0gY2FsbGJhY2tcbiAgICB0aGlzLnRpbWVyQ2FsYyA9IHRpbWVyQ2FsY1xuICAgIHRoaXMudGltZXIgPSBudWxsXG4gICAgdGhpcy50cmllcyA9IDBcbiAgfVxuXG4gIHJlc2V0KCl7XG4gICAgdGhpcy50cmllcyA9IDBcbiAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lcilcbiAgfVxuXG4gIC8qKlxuICAgKiBDYW5jZWxzIGFueSBwcmV2aW91cyBzY2hlZHVsZVRpbWVvdXQgYW5kIHNjaGVkdWxlcyBjYWxsYmFja1xuICAgKi9cbiAgc2NoZWR1bGVUaW1lb3V0KCl7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZXIpXG5cbiAgICB0aGlzLnRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLnRyaWVzID0gdGhpcy50cmllcyArIDFcbiAgICAgIHRoaXMuY2FsbGJhY2soKVxuICAgIH0sIHRoaXMudGltZXJDYWxjKHRoaXMudHJpZXMgKyAxKSlcbiAgfVxufVxuIiwgImltcG9ydCB7Y2xvc3VyZX0gZnJvbSBcIi4vdXRpbHNcIlxuaW1wb3J0IHtcbiAgQ0hBTk5FTF9FVkVOVFMsXG4gIENIQU5ORUxfU1RBVEVTLFxufSBmcm9tIFwiLi9jb25zdGFudHNcIlxuXG5pbXBvcnQgUHVzaCBmcm9tIFwiLi9wdXNoXCJcbmltcG9ydCBUaW1lciBmcm9tIFwiLi90aW1lclwiXG5cbi8qKlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSB0b3BpY1xuICogQHBhcmFtIHsoT2JqZWN0fGZ1bmN0aW9uKX0gcGFyYW1zXG4gKiBAcGFyYW0ge1NvY2tldH0gc29ja2V0XG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENoYW5uZWwge1xuICBjb25zdHJ1Y3Rvcih0b3BpYywgcGFyYW1zLCBzb2NrZXQpe1xuICAgIHRoaXMuc3RhdGUgPSBDSEFOTkVMX1NUQVRFUy5jbG9zZWRcbiAgICB0aGlzLnRvcGljID0gdG9waWNcbiAgICB0aGlzLnBhcmFtcyA9IGNsb3N1cmUocGFyYW1zIHx8IHt9KVxuICAgIHRoaXMuc29ja2V0ID0gc29ja2V0XG4gICAgdGhpcy5iaW5kaW5ncyA9IFtdXG4gICAgdGhpcy5iaW5kaW5nUmVmID0gMFxuICAgIHRoaXMudGltZW91dCA9IHRoaXMuc29ja2V0LnRpbWVvdXRcbiAgICB0aGlzLmpvaW5lZE9uY2UgPSBmYWxzZVxuICAgIHRoaXMuam9pblB1c2ggPSBuZXcgUHVzaCh0aGlzLCBDSEFOTkVMX0VWRU5UUy5qb2luLCB0aGlzLnBhcmFtcywgdGhpcy50aW1lb3V0KVxuICAgIHRoaXMucHVzaEJ1ZmZlciA9IFtdXG4gICAgdGhpcy5zdGF0ZUNoYW5nZVJlZnMgPSBbXVxuXG4gICAgdGhpcy5yZWpvaW5UaW1lciA9IG5ldyBUaW1lcigoKSA9PiB7XG4gICAgICBpZih0aGlzLnNvY2tldC5pc0Nvbm5lY3RlZCgpKXsgdGhpcy5yZWpvaW4oKSB9XG4gICAgfSwgdGhpcy5zb2NrZXQucmVqb2luQWZ0ZXJNcylcbiAgICB0aGlzLnN0YXRlQ2hhbmdlUmVmcy5wdXNoKHRoaXMuc29ja2V0Lm9uRXJyb3IoKCkgPT4gdGhpcy5yZWpvaW5UaW1lci5yZXNldCgpKSlcbiAgICB0aGlzLnN0YXRlQ2hhbmdlUmVmcy5wdXNoKHRoaXMuc29ja2V0Lm9uT3BlbigoKSA9PiB7XG4gICAgICB0aGlzLnJlam9pblRpbWVyLnJlc2V0KClcbiAgICAgIGlmKHRoaXMuaXNFcnJvcmVkKCkpeyB0aGlzLnJlam9pbigpIH1cbiAgICB9KVxuICAgIClcbiAgICB0aGlzLmpvaW5QdXNoLnJlY2VpdmUoXCJva1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLnN0YXRlID0gQ0hBTk5FTF9TVEFURVMuam9pbmVkXG4gICAgICB0aGlzLnJlam9pblRpbWVyLnJlc2V0KClcbiAgICAgIHRoaXMucHVzaEJ1ZmZlci5mb3JFYWNoKHB1c2hFdmVudCA9PiBwdXNoRXZlbnQuc2VuZCgpKVxuICAgICAgdGhpcy5wdXNoQnVmZmVyID0gW11cbiAgICB9KVxuICAgIHRoaXMuam9pblB1c2gucmVjZWl2ZShcImVycm9yXCIsICgpID0+IHtcbiAgICAgIHRoaXMuc3RhdGUgPSBDSEFOTkVMX1NUQVRFUy5lcnJvcmVkXG4gICAgICBpZih0aGlzLnNvY2tldC5pc0Nvbm5lY3RlZCgpKXsgdGhpcy5yZWpvaW5UaW1lci5zY2hlZHVsZVRpbWVvdXQoKSB9XG4gICAgfSlcbiAgICB0aGlzLm9uQ2xvc2UoKCkgPT4ge1xuICAgICAgdGhpcy5yZWpvaW5UaW1lci5yZXNldCgpXG4gICAgICBpZih0aGlzLnNvY2tldC5oYXNMb2dnZXIoKSkgdGhpcy5zb2NrZXQubG9nKFwiY2hhbm5lbFwiLCBgY2xvc2UgJHt0aGlzLnRvcGljfSAke3RoaXMuam9pblJlZigpfWApXG4gICAgICB0aGlzLnN0YXRlID0gQ0hBTk5FTF9TVEFURVMuY2xvc2VkXG4gICAgICB0aGlzLnNvY2tldC5yZW1vdmUodGhpcylcbiAgICB9KVxuICAgIHRoaXMub25FcnJvcihyZWFzb24gPT4ge1xuICAgICAgaWYodGhpcy5zb2NrZXQuaGFzTG9nZ2VyKCkpIHRoaXMuc29ja2V0LmxvZyhcImNoYW5uZWxcIiwgYGVycm9yICR7dGhpcy50b3BpY31gLCByZWFzb24pXG4gICAgICBpZih0aGlzLmlzSm9pbmluZygpKXsgdGhpcy5qb2luUHVzaC5yZXNldCgpIH1cbiAgICAgIHRoaXMuc3RhdGUgPSBDSEFOTkVMX1NUQVRFUy5lcnJvcmVkXG4gICAgICBpZih0aGlzLnNvY2tldC5pc0Nvbm5lY3RlZCgpKXsgdGhpcy5yZWpvaW5UaW1lci5zY2hlZHVsZVRpbWVvdXQoKSB9XG4gICAgfSlcbiAgICB0aGlzLmpvaW5QdXNoLnJlY2VpdmUoXCJ0aW1lb3V0XCIsICgpID0+IHtcbiAgICAgIGlmKHRoaXMuc29ja2V0Lmhhc0xvZ2dlcigpKSB0aGlzLnNvY2tldC5sb2coXCJjaGFubmVsXCIsIGB0aW1lb3V0ICR7dGhpcy50b3BpY30gKCR7dGhpcy5qb2luUmVmKCl9KWAsIHRoaXMuam9pblB1c2gudGltZW91dClcbiAgICAgIGxldCBsZWF2ZVB1c2ggPSBuZXcgUHVzaCh0aGlzLCBDSEFOTkVMX0VWRU5UUy5sZWF2ZSwgY2xvc3VyZSh7fSksIHRoaXMudGltZW91dClcbiAgICAgIGxlYXZlUHVzaC5zZW5kKClcbiAgICAgIHRoaXMuc3RhdGUgPSBDSEFOTkVMX1NUQVRFUy5lcnJvcmVkXG4gICAgICB0aGlzLmpvaW5QdXNoLnJlc2V0KClcbiAgICAgIGlmKHRoaXMuc29ja2V0LmlzQ29ubmVjdGVkKCkpeyB0aGlzLnJlam9pblRpbWVyLnNjaGVkdWxlVGltZW91dCgpIH1cbiAgICB9KVxuICAgIHRoaXMub24oQ0hBTk5FTF9FVkVOVFMucmVwbHksIChwYXlsb2FkLCByZWYpID0+IHtcbiAgICAgIHRoaXMudHJpZ2dlcih0aGlzLnJlcGx5RXZlbnROYW1lKHJlZiksIHBheWxvYWQpXG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBKb2luIHRoZSBjaGFubmVsXG4gICAqIEBwYXJhbSB7aW50ZWdlcn0gdGltZW91dFxuICAgKiBAcmV0dXJucyB7UHVzaH1cbiAgICovXG4gIGpvaW4odGltZW91dCA9IHRoaXMudGltZW91dCl7XG4gICAgaWYodGhpcy5qb2luZWRPbmNlKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcInRyaWVkIHRvIGpvaW4gbXVsdGlwbGUgdGltZXMuICdqb2luJyBjYW4gb25seSBiZSBjYWxsZWQgYSBzaW5nbGUgdGltZSBwZXIgY2hhbm5lbCBpbnN0YW5jZVwiKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnRpbWVvdXQgPSB0aW1lb3V0XG4gICAgICB0aGlzLmpvaW5lZE9uY2UgPSB0cnVlXG4gICAgICB0aGlzLnJlam9pbigpXG4gICAgICByZXR1cm4gdGhpcy5qb2luUHVzaFxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBIb29rIGludG8gY2hhbm5lbCBjbG9zZVxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICAgKi9cbiAgb25DbG9zZShjYWxsYmFjayl7XG4gICAgdGhpcy5vbihDSEFOTkVMX0VWRU5UUy5jbG9zZSwgY2FsbGJhY2spXG4gIH1cblxuICAvKipcbiAgICogSG9vayBpbnRvIGNoYW5uZWwgZXJyb3JzXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gICAqL1xuICBvbkVycm9yKGNhbGxiYWNrKXtcbiAgICByZXR1cm4gdGhpcy5vbihDSEFOTkVMX0VWRU5UUy5lcnJvciwgcmVhc29uID0+IGNhbGxiYWNrKHJlYXNvbikpXG4gIH1cblxuICAvKipcbiAgICogU3Vic2NyaWJlcyBvbiBjaGFubmVsIGV2ZW50c1xuICAgKlxuICAgKiBTdWJzY3JpcHRpb24gcmV0dXJucyBhIHJlZiBjb3VudGVyLCB3aGljaCBjYW4gYmUgdXNlZCBsYXRlciB0b1xuICAgKiB1bnN1YnNjcmliZSB0aGUgZXhhY3QgZXZlbnQgbGlzdGVuZXJcbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogY29uc3QgcmVmMSA9IGNoYW5uZWwub24oXCJldmVudFwiLCBkb19zdHVmZilcbiAgICogY29uc3QgcmVmMiA9IGNoYW5uZWwub24oXCJldmVudFwiLCBkb19vdGhlcl9zdHVmZilcbiAgICogY2hhbm5lbC5vZmYoXCJldmVudFwiLCByZWYxKVxuICAgKiAvLyBTaW5jZSB1bnN1YnNjcmlwdGlvbiwgZG9fc3R1ZmYgd29uJ3QgZmlyZSxcbiAgICogLy8gd2hpbGUgZG9fb3RoZXJfc3R1ZmYgd2lsbCBrZWVwIGZpcmluZyBvbiB0aGUgXCJldmVudFwiXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICAgKiBAcmV0dXJucyB7aW50ZWdlcn0gcmVmXG4gICAqL1xuICBvbihldmVudCwgY2FsbGJhY2spe1xuICAgIGxldCByZWYgPSB0aGlzLmJpbmRpbmdSZWYrK1xuICAgIHRoaXMuYmluZGluZ3MucHVzaCh7ZXZlbnQsIHJlZiwgY2FsbGJhY2t9KVxuICAgIHJldHVybiByZWZcbiAgfVxuXG4gIC8qKlxuICAgKiBVbnN1YnNjcmliZXMgb2ZmIG9mIGNoYW5uZWwgZXZlbnRzXG4gICAqXG4gICAqIFVzZSB0aGUgcmVmIHJldHVybmVkIGZyb20gYSBjaGFubmVsLm9uKCkgdG8gdW5zdWJzY3JpYmUgb25lXG4gICAqIGhhbmRsZXIsIG9yIHBhc3Mgbm90aGluZyBmb3IgdGhlIHJlZiB0byB1bnN1YnNjcmliZSBhbGxcbiAgICogaGFuZGxlcnMgZm9yIHRoZSBnaXZlbiBldmVudC5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogLy8gVW5zdWJzY3JpYmUgdGhlIGRvX3N0dWZmIGhhbmRsZXJcbiAgICogY29uc3QgcmVmMSA9IGNoYW5uZWwub24oXCJldmVudFwiLCBkb19zdHVmZilcbiAgICogY2hhbm5lbC5vZmYoXCJldmVudFwiLCByZWYxKVxuICAgKlxuICAgKiAvLyBVbnN1YnNjcmliZSBhbGwgaGFuZGxlcnMgZnJvbSBldmVudFxuICAgKiBjaGFubmVsLm9mZihcImV2ZW50XCIpXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudFxuICAgKiBAcGFyYW0ge2ludGVnZXJ9IHJlZlxuICAgKi9cbiAgb2ZmKGV2ZW50LCByZWYpe1xuICAgIHRoaXMuYmluZGluZ3MgPSB0aGlzLmJpbmRpbmdzLmZpbHRlcigoYmluZCkgPT4ge1xuICAgICAgcmV0dXJuICEoYmluZC5ldmVudCA9PT0gZXZlbnQgJiYgKHR5cGVvZiByZWYgPT09IFwidW5kZWZpbmVkXCIgfHwgcmVmID09PSBiaW5kLnJlZikpXG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgY2FuUHVzaCgpeyByZXR1cm4gdGhpcy5zb2NrZXQuaXNDb25uZWN0ZWQoKSAmJiB0aGlzLmlzSm9pbmVkKCkgfVxuXG4gIC8qKlxuICAgKiBTZW5kcyBhIG1lc3NhZ2UgYGV2ZW50YCB0byBwaG9lbml4IHdpdGggdGhlIHBheWxvYWQgYHBheWxvYWRgLlxuICAgKiBQaG9lbml4IHJlY2VpdmVzIHRoaXMgaW4gdGhlIGBoYW5kbGVfaW4oZXZlbnQsIHBheWxvYWQsIHNvY2tldClgXG4gICAqIGZ1bmN0aW9uLiBpZiBwaG9lbml4IHJlcGxpZXMgb3IgaXQgdGltZXMgb3V0IChkZWZhdWx0IDEwMDAwbXMpLFxuICAgKiB0aGVuIG9wdGlvbmFsbHkgdGhlIHJlcGx5IGNhbiBiZSByZWNlaXZlZC5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogY2hhbm5lbC5wdXNoKFwiZXZlbnRcIilcbiAgICogICAucmVjZWl2ZShcIm9rXCIsIHBheWxvYWQgPT4gY29uc29sZS5sb2coXCJwaG9lbml4IHJlcGxpZWQ6XCIsIHBheWxvYWQpKVxuICAgKiAgIC5yZWNlaXZlKFwiZXJyb3JcIiwgZXJyID0+IGNvbnNvbGUubG9nKFwicGhvZW5peCBlcnJvcmVkXCIsIGVycikpXG4gICAqICAgLnJlY2VpdmUoXCJ0aW1lb3V0XCIsICgpID0+IGNvbnNvbGUubG9nKFwidGltZWQgb3V0IHB1c2hpbmdcIikpXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudFxuICAgKiBAcGFyYW0ge09iamVjdH0gcGF5bG9hZFxuICAgKiBAcGFyYW0ge251bWJlcn0gW3RpbWVvdXRdXG4gICAqIEByZXR1cm5zIHtQdXNofVxuICAgKi9cbiAgcHVzaChldmVudCwgcGF5bG9hZCwgdGltZW91dCA9IHRoaXMudGltZW91dCl7XG4gICAgcGF5bG9hZCA9IHBheWxvYWQgfHwge31cbiAgICBpZighdGhpcy5qb2luZWRPbmNlKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgdHJpZWQgdG8gcHVzaCAnJHtldmVudH0nIHRvICcke3RoaXMudG9waWN9JyBiZWZvcmUgam9pbmluZy4gVXNlIGNoYW5uZWwuam9pbigpIGJlZm9yZSBwdXNoaW5nIGV2ZW50c2ApXG4gICAgfVxuICAgIGxldCBwdXNoRXZlbnQgPSBuZXcgUHVzaCh0aGlzLCBldmVudCwgZnVuY3Rpb24gKCl7IHJldHVybiBwYXlsb2FkIH0sIHRpbWVvdXQpXG4gICAgaWYodGhpcy5jYW5QdXNoKCkpe1xuICAgICAgcHVzaEV2ZW50LnNlbmQoKVxuICAgIH0gZWxzZSB7XG4gICAgICBwdXNoRXZlbnQuc3RhcnRUaW1lb3V0KClcbiAgICAgIHRoaXMucHVzaEJ1ZmZlci5wdXNoKHB1c2hFdmVudClcbiAgICB9XG5cbiAgICByZXR1cm4gcHVzaEV2ZW50XG4gIH1cblxuICAvKiogTGVhdmVzIHRoZSBjaGFubmVsXG4gICAqXG4gICAqIFVuc3Vic2NyaWJlcyBmcm9tIHNlcnZlciBldmVudHMsIGFuZFxuICAgKiBpbnN0cnVjdHMgY2hhbm5lbCB0byB0ZXJtaW5hdGUgb24gc2VydmVyXG4gICAqXG4gICAqIFRyaWdnZXJzIG9uQ2xvc2UoKSBob29rc1xuICAgKlxuICAgKiBUbyByZWNlaXZlIGxlYXZlIGFja25vd2xlZGdlbWVudHMsIHVzZSB0aGUgYHJlY2VpdmVgXG4gICAqIGhvb2sgdG8gYmluZCB0byB0aGUgc2VydmVyIGFjaywgaWU6XG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGNoYW5uZWwubGVhdmUoKS5yZWNlaXZlKFwib2tcIiwgKCkgPT4gYWxlcnQoXCJsZWZ0IVwiKSApXG4gICAqXG4gICAqIEBwYXJhbSB7aW50ZWdlcn0gdGltZW91dFxuICAgKiBAcmV0dXJucyB7UHVzaH1cbiAgICovXG4gIGxlYXZlKHRpbWVvdXQgPSB0aGlzLnRpbWVvdXQpe1xuICAgIHRoaXMucmVqb2luVGltZXIucmVzZXQoKVxuICAgIHRoaXMuam9pblB1c2guY2FuY2VsVGltZW91dCgpXG5cbiAgICB0aGlzLnN0YXRlID0gQ0hBTk5FTF9TVEFURVMubGVhdmluZ1xuICAgIGxldCBvbkNsb3NlID0gKCkgPT4ge1xuICAgICAgaWYodGhpcy5zb2NrZXQuaGFzTG9nZ2VyKCkpIHRoaXMuc29ja2V0LmxvZyhcImNoYW5uZWxcIiwgYGxlYXZlICR7dGhpcy50b3BpY31gKVxuICAgICAgdGhpcy50cmlnZ2VyKENIQU5ORUxfRVZFTlRTLmNsb3NlLCBcImxlYXZlXCIpXG4gICAgfVxuICAgIGxldCBsZWF2ZVB1c2ggPSBuZXcgUHVzaCh0aGlzLCBDSEFOTkVMX0VWRU5UUy5sZWF2ZSwgY2xvc3VyZSh7fSksIHRpbWVvdXQpXG4gICAgbGVhdmVQdXNoLnJlY2VpdmUoXCJva1wiLCAoKSA9PiBvbkNsb3NlKCkpXG4gICAgICAucmVjZWl2ZShcInRpbWVvdXRcIiwgKCkgPT4gb25DbG9zZSgpKVxuICAgIGxlYXZlUHVzaC5zZW5kKClcbiAgICBpZighdGhpcy5jYW5QdXNoKCkpeyBsZWF2ZVB1c2gudHJpZ2dlcihcIm9rXCIsIHt9KSB9XG5cbiAgICByZXR1cm4gbGVhdmVQdXNoXG4gIH1cblxuICAvKipcbiAgICogT3ZlcnJpZGFibGUgbWVzc2FnZSBob29rXG4gICAqXG4gICAqIFJlY2VpdmVzIGFsbCBldmVudHMgZm9yIHNwZWNpYWxpemVkIG1lc3NhZ2UgaGFuZGxpbmdcbiAgICogYmVmb3JlIGRpc3BhdGNoaW5nIHRvIHRoZSBjaGFubmVsIGNhbGxiYWNrcy5cbiAgICpcbiAgICogTXVzdCByZXR1cm4gdGhlIHBheWxvYWQsIG1vZGlmaWVkIG9yIHVubW9kaWZpZWRcbiAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50XG4gICAqIEBwYXJhbSB7T2JqZWN0fSBwYXlsb2FkXG4gICAqIEBwYXJhbSB7aW50ZWdlcn0gcmVmXG4gICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAqL1xuICBvbk1lc3NhZ2UoX2V2ZW50LCBwYXlsb2FkLCBfcmVmKXsgcmV0dXJuIHBheWxvYWQgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgaXNNZW1iZXIodG9waWMsIGV2ZW50LCBwYXlsb2FkLCBqb2luUmVmKXtcbiAgICBpZih0aGlzLnRvcGljICE9PSB0b3BpYyl7IHJldHVybiBmYWxzZSB9XG5cbiAgICBpZihqb2luUmVmICYmIGpvaW5SZWYgIT09IHRoaXMuam9pblJlZigpKXtcbiAgICAgIGlmKHRoaXMuc29ja2V0Lmhhc0xvZ2dlcigpKSB0aGlzLnNvY2tldC5sb2coXCJjaGFubmVsXCIsIFwiZHJvcHBpbmcgb3V0ZGF0ZWQgbWVzc2FnZVwiLCB7dG9waWMsIGV2ZW50LCBwYXlsb2FkLCBqb2luUmVmfSlcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgam9pblJlZigpeyByZXR1cm4gdGhpcy5qb2luUHVzaC5yZWYgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcmVqb2luKHRpbWVvdXQgPSB0aGlzLnRpbWVvdXQpe1xuICAgIGlmKHRoaXMuaXNMZWF2aW5nKCkpeyByZXR1cm4gfVxuICAgIHRoaXMuc29ja2V0LmxlYXZlT3BlblRvcGljKHRoaXMudG9waWMpXG4gICAgdGhpcy5zdGF0ZSA9IENIQU5ORUxfU1RBVEVTLmpvaW5pbmdcbiAgICB0aGlzLmpvaW5QdXNoLnJlc2VuZCh0aW1lb3V0KVxuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0cmlnZ2VyKGV2ZW50LCBwYXlsb2FkLCByZWYsIGpvaW5SZWYpe1xuICAgIGxldCBoYW5kbGVkUGF5bG9hZCA9IHRoaXMub25NZXNzYWdlKGV2ZW50LCBwYXlsb2FkLCByZWYsIGpvaW5SZWYpXG4gICAgaWYocGF5bG9hZCAmJiAhaGFuZGxlZFBheWxvYWQpeyB0aHJvdyBuZXcgRXJyb3IoXCJjaGFubmVsIG9uTWVzc2FnZSBjYWxsYmFja3MgbXVzdCByZXR1cm4gdGhlIHBheWxvYWQsIG1vZGlmaWVkIG9yIHVubW9kaWZpZWRcIikgfVxuXG4gICAgbGV0IGV2ZW50QmluZGluZ3MgPSB0aGlzLmJpbmRpbmdzLmZpbHRlcihiaW5kID0+IGJpbmQuZXZlbnQgPT09IGV2ZW50KVxuXG4gICAgZm9yKGxldCBpID0gMDsgaSA8IGV2ZW50QmluZGluZ3MubGVuZ3RoOyBpKyspe1xuICAgICAgbGV0IGJpbmQgPSBldmVudEJpbmRpbmdzW2ldXG4gICAgICBiaW5kLmNhbGxiYWNrKGhhbmRsZWRQYXlsb2FkLCByZWYsIGpvaW5SZWYgfHwgdGhpcy5qb2luUmVmKCkpXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICByZXBseUV2ZW50TmFtZShyZWYpeyByZXR1cm4gYGNoYW5fcmVwbHlfJHtyZWZ9YCB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBpc0Nsb3NlZCgpeyByZXR1cm4gdGhpcy5zdGF0ZSA9PT0gQ0hBTk5FTF9TVEFURVMuY2xvc2VkIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGlzRXJyb3JlZCgpeyByZXR1cm4gdGhpcy5zdGF0ZSA9PT0gQ0hBTk5FTF9TVEFURVMuZXJyb3JlZCB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBpc0pvaW5lZCgpeyByZXR1cm4gdGhpcy5zdGF0ZSA9PT0gQ0hBTk5FTF9TVEFURVMuam9pbmVkIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGlzSm9pbmluZygpeyByZXR1cm4gdGhpcy5zdGF0ZSA9PT0gQ0hBTk5FTF9TVEFURVMuam9pbmluZyB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBpc0xlYXZpbmcoKXsgcmV0dXJuIHRoaXMuc3RhdGUgPT09IENIQU5ORUxfU1RBVEVTLmxlYXZpbmcgfVxufVxuIiwgImltcG9ydCB7XG4gIGdsb2JhbCxcbiAgWEhSX1NUQVRFU1xufSBmcm9tIFwiLi9jb25zdGFudHNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBamF4IHtcblxuICBzdGF0aWMgcmVxdWVzdChtZXRob2QsIGVuZFBvaW50LCBhY2NlcHQsIGJvZHksIHRpbWVvdXQsIG9udGltZW91dCwgY2FsbGJhY2spe1xuICAgIGlmKGdsb2JhbC5YRG9tYWluUmVxdWVzdCl7XG4gICAgICBsZXQgcmVxID0gbmV3IGdsb2JhbC5YRG9tYWluUmVxdWVzdCgpIC8vIElFOCwgSUU5XG4gICAgICByZXR1cm4gdGhpcy54ZG9tYWluUmVxdWVzdChyZXEsIG1ldGhvZCwgZW5kUG9pbnQsIGJvZHksIHRpbWVvdXQsIG9udGltZW91dCwgY2FsbGJhY2spXG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCByZXEgPSBuZXcgZ2xvYmFsLlhNTEh0dHBSZXF1ZXN0KCkgLy8gSUU3KywgRmlyZWZveCwgQ2hyb21lLCBPcGVyYSwgU2FmYXJpXG4gICAgICByZXR1cm4gdGhpcy54aHJSZXF1ZXN0KHJlcSwgbWV0aG9kLCBlbmRQb2ludCwgYWNjZXB0LCBib2R5LCB0aW1lb3V0LCBvbnRpbWVvdXQsIGNhbGxiYWNrKVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyB4ZG9tYWluUmVxdWVzdChyZXEsIG1ldGhvZCwgZW5kUG9pbnQsIGJvZHksIHRpbWVvdXQsIG9udGltZW91dCwgY2FsbGJhY2spe1xuICAgIHJlcS50aW1lb3V0ID0gdGltZW91dFxuICAgIHJlcS5vcGVuKG1ldGhvZCwgZW5kUG9pbnQpXG4gICAgcmVxLm9ubG9hZCA9ICgpID0+IHtcbiAgICAgIGxldCByZXNwb25zZSA9IHRoaXMucGFyc2VKU09OKHJlcS5yZXNwb25zZVRleHQpXG4gICAgICBjYWxsYmFjayAmJiBjYWxsYmFjayhyZXNwb25zZSlcbiAgICB9XG4gICAgaWYob250aW1lb3V0KXsgcmVxLm9udGltZW91dCA9IG9udGltZW91dCB9XG5cbiAgICAvLyBXb3JrIGFyb3VuZCBidWcgaW4gSUU5IHRoYXQgcmVxdWlyZXMgYW4gYXR0YWNoZWQgb25wcm9ncmVzcyBoYW5kbGVyXG4gICAgcmVxLm9ucHJvZ3Jlc3MgPSAoKSA9PiB7IH1cblxuICAgIHJlcS5zZW5kKGJvZHkpXG4gICAgcmV0dXJuIHJlcVxuICB9XG5cbiAgc3RhdGljIHhoclJlcXVlc3QocmVxLCBtZXRob2QsIGVuZFBvaW50LCBhY2NlcHQsIGJvZHksIHRpbWVvdXQsIG9udGltZW91dCwgY2FsbGJhY2spe1xuICAgIHJlcS5vcGVuKG1ldGhvZCwgZW5kUG9pbnQsIHRydWUpXG4gICAgcmVxLnRpbWVvdXQgPSB0aW1lb3V0XG4gICAgcmVxLnNldFJlcXVlc3RIZWFkZXIoXCJDb250ZW50LVR5cGVcIiwgYWNjZXB0KVxuICAgIHJlcS5vbmVycm9yID0gKCkgPT4gY2FsbGJhY2sgJiYgY2FsbGJhY2sobnVsbClcbiAgICByZXEub25yZWFkeXN0YXRlY2hhbmdlID0gKCkgPT4ge1xuICAgICAgaWYocmVxLnJlYWR5U3RhdGUgPT09IFhIUl9TVEFURVMuY29tcGxldGUgJiYgY2FsbGJhY2spe1xuICAgICAgICBsZXQgcmVzcG9uc2UgPSB0aGlzLnBhcnNlSlNPTihyZXEucmVzcG9uc2VUZXh0KVxuICAgICAgICBjYWxsYmFjayhyZXNwb25zZSlcbiAgICAgIH1cbiAgICB9XG4gICAgaWYob250aW1lb3V0KXsgcmVxLm9udGltZW91dCA9IG9udGltZW91dCB9XG5cbiAgICByZXEuc2VuZChib2R5KVxuICAgIHJldHVybiByZXFcbiAgfVxuXG4gIHN0YXRpYyBwYXJzZUpTT04ocmVzcCl7XG4gICAgaWYoIXJlc3AgfHwgcmVzcCA9PT0gXCJcIil7IHJldHVybiBudWxsIH1cblxuICAgIHRyeSB7XG4gICAgICByZXR1cm4gSlNPTi5wYXJzZShyZXNwKVxuICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgY29uc29sZSAmJiBjb25zb2xlLmxvZyhcImZhaWxlZCB0byBwYXJzZSBKU09OIHJlc3BvbnNlXCIsIHJlc3ApXG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBzZXJpYWxpemUob2JqLCBwYXJlbnRLZXkpe1xuICAgIGxldCBxdWVyeVN0ciA9IFtdXG4gICAgZm9yKHZhciBrZXkgaW4gb2JqKXtcbiAgICAgIGlmKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKXsgY29udGludWUgfVxuICAgICAgbGV0IHBhcmFtS2V5ID0gcGFyZW50S2V5ID8gYCR7cGFyZW50S2V5fVske2tleX1dYCA6IGtleVxuICAgICAgbGV0IHBhcmFtVmFsID0gb2JqW2tleV1cbiAgICAgIGlmKHR5cGVvZiBwYXJhbVZhbCA9PT0gXCJvYmplY3RcIil7XG4gICAgICAgIHF1ZXJ5U3RyLnB1c2godGhpcy5zZXJpYWxpemUocGFyYW1WYWwsIHBhcmFtS2V5KSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHF1ZXJ5U3RyLnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KHBhcmFtS2V5KSArIFwiPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KHBhcmFtVmFsKSlcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHF1ZXJ5U3RyLmpvaW4oXCImXCIpXG4gIH1cblxuICBzdGF0aWMgYXBwZW5kUGFyYW1zKHVybCwgcGFyYW1zKXtcbiAgICBpZihPYmplY3Qua2V5cyhwYXJhbXMpLmxlbmd0aCA9PT0gMCl7IHJldHVybiB1cmwgfVxuXG4gICAgbGV0IHByZWZpeCA9IHVybC5tYXRjaCgvXFw/LykgPyBcIiZcIiA6IFwiP1wiXG4gICAgcmV0dXJuIGAke3VybH0ke3ByZWZpeH0ke3RoaXMuc2VyaWFsaXplKHBhcmFtcyl9YFxuICB9XG59XG4iLCAiaW1wb3J0IHtcbiAgU09DS0VUX1NUQVRFUyxcbiAgVFJBTlNQT1JUU1xufSBmcm9tIFwiLi9jb25zdGFudHNcIlxuXG5pbXBvcnQgQWpheCBmcm9tIFwiLi9hamF4XCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTG9uZ1BvbGwge1xuXG4gIGNvbnN0cnVjdG9yKGVuZFBvaW50KXtcbiAgICB0aGlzLmVuZFBvaW50ID0gbnVsbFxuICAgIHRoaXMudG9rZW4gPSBudWxsXG4gICAgdGhpcy5za2lwSGVhcnRiZWF0ID0gdHJ1ZVxuICAgIHRoaXMucmVxcyA9IG5ldyBTZXQoKVxuICAgIHRoaXMuYXdhaXRpbmdCYXRjaEFjayA9IGZhbHNlXG4gICAgdGhpcy5jdXJyZW50QmF0Y2ggPSBudWxsXG4gICAgdGhpcy5jdXJyZW50QmF0Y2hUaW1lciA9IG51bGxcbiAgICB0aGlzLmJhdGNoQnVmZmVyID0gW11cbiAgICB0aGlzLm9ub3BlbiA9IGZ1bmN0aW9uICgpeyB9IC8vIG5vb3BcbiAgICB0aGlzLm9uZXJyb3IgPSBmdW5jdGlvbiAoKXsgfSAvLyBub29wXG4gICAgdGhpcy5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAoKXsgfSAvLyBub29wXG4gICAgdGhpcy5vbmNsb3NlID0gZnVuY3Rpb24gKCl7IH0gLy8gbm9vcFxuICAgIHRoaXMucG9sbEVuZHBvaW50ID0gdGhpcy5ub3JtYWxpemVFbmRwb2ludChlbmRQb2ludClcbiAgICB0aGlzLnJlYWR5U3RhdGUgPSBTT0NLRVRfU1RBVEVTLmNvbm5lY3RpbmdcbiAgICB0aGlzLnBvbGwoKVxuICB9XG5cbiAgbm9ybWFsaXplRW5kcG9pbnQoZW5kUG9pbnQpe1xuICAgIHJldHVybiAoZW5kUG9pbnRcbiAgICAgIC5yZXBsYWNlKFwid3M6Ly9cIiwgXCJodHRwOi8vXCIpXG4gICAgICAucmVwbGFjZShcIndzczovL1wiLCBcImh0dHBzOi8vXCIpXG4gICAgICAucmVwbGFjZShuZXcgUmVnRXhwKFwiKC4qKVxcL1wiICsgVFJBTlNQT1JUUy53ZWJzb2NrZXQpLCBcIiQxL1wiICsgVFJBTlNQT1JUUy5sb25ncG9sbCkpXG4gIH1cblxuICBlbmRwb2ludFVSTCgpe1xuICAgIHJldHVybiBBamF4LmFwcGVuZFBhcmFtcyh0aGlzLnBvbGxFbmRwb2ludCwge3Rva2VuOiB0aGlzLnRva2VufSlcbiAgfVxuXG4gIGNsb3NlQW5kUmV0cnkoY29kZSwgcmVhc29uLCB3YXNDbGVhbil7XG4gICAgdGhpcy5jbG9zZShjb2RlLCByZWFzb24sIHdhc0NsZWFuKVxuICAgIHRoaXMucmVhZHlTdGF0ZSA9IFNPQ0tFVF9TVEFURVMuY29ubmVjdGluZ1xuICB9XG5cbiAgb250aW1lb3V0KCl7XG4gICAgdGhpcy5vbmVycm9yKFwidGltZW91dFwiKVxuICAgIHRoaXMuY2xvc2VBbmRSZXRyeSgxMDA1LCBcInRpbWVvdXRcIiwgZmFsc2UpXG4gIH1cblxuICBpc0FjdGl2ZSgpeyByZXR1cm4gdGhpcy5yZWFkeVN0YXRlID09PSBTT0NLRVRfU1RBVEVTLm9wZW4gfHwgdGhpcy5yZWFkeVN0YXRlID09PSBTT0NLRVRfU1RBVEVTLmNvbm5lY3RpbmcgfVxuXG4gIHBvbGwoKXtcbiAgICB0aGlzLmFqYXgoXCJHRVRcIiwgXCJhcHBsaWNhdGlvbi9qc29uXCIsIG51bGwsICgpID0+IHRoaXMub250aW1lb3V0KCksIHJlc3AgPT4ge1xuICAgICAgaWYocmVzcCl7XG4gICAgICAgIHZhciB7c3RhdHVzLCB0b2tlbiwgbWVzc2FnZXN9ID0gcmVzcFxuICAgICAgICB0aGlzLnRva2VuID0gdG9rZW5cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0YXR1cyA9IDBcbiAgICAgIH1cblxuICAgICAgc3dpdGNoKHN0YXR1cyl7XG4gICAgICAgIGNhc2UgMjAwOlxuICAgICAgICAgIG1lc3NhZ2VzLmZvckVhY2gobXNnID0+IHtcbiAgICAgICAgICAgIC8vIFRhc2tzIGFyZSB3aGF0IHRoaW5ncyBsaWtlIGV2ZW50IGhhbmRsZXJzLCBzZXRUaW1lb3V0IGNhbGxiYWNrcyxcbiAgICAgICAgICAgIC8vIHByb21pc2UgcmVzb2x2ZXMgYW5kIG1vcmUgYXJlIHJ1biB3aXRoaW4uXG4gICAgICAgICAgICAvLyBJbiBtb2Rlcm4gYnJvd3NlcnMsIHRoZXJlIGFyZSB0d28gZGlmZmVyZW50IGtpbmRzIG9mIHRhc2tzLFxuICAgICAgICAgICAgLy8gbWljcm90YXNrcyBhbmQgbWFjcm90YXNrcy5cbiAgICAgICAgICAgIC8vIE1pY3JvdGFza3MgYXJlIG1haW5seSB1c2VkIGZvciBQcm9taXNlcywgd2hpbGUgbWFjcm90YXNrcyBhcmVcbiAgICAgICAgICAgIC8vIHVzZWQgZm9yIGV2ZXJ5dGhpbmcgZWxzZS5cbiAgICAgICAgICAgIC8vIE1pY3JvdGFza3MgYWx3YXlzIGhhdmUgcHJpb3JpdHkgb3ZlciBtYWNyb3Rhc2tzLiBJZiB0aGUgSlMgZW5naW5lXG4gICAgICAgICAgICAvLyBpcyBsb29raW5nIGZvciBhIHRhc2sgdG8gcnVuLCBpdCB3aWxsIGFsd2F5cyB0cnkgdG8gZW1wdHkgdGhlXG4gICAgICAgICAgICAvLyBtaWNyb3Rhc2sgcXVldWUgYmVmb3JlIGF0dGVtcHRpbmcgdG8gcnVuIGFueXRoaW5nIGZyb20gdGhlXG4gICAgICAgICAgICAvLyBtYWNyb3Rhc2sgcXVldWUuXG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gRm9yIHRoZSBXZWJTb2NrZXQgdHJhbnNwb3J0LCBtZXNzYWdlcyBhbHdheXMgYXJyaXZlIGluIHRoZWlyIG93blxuICAgICAgICAgICAgLy8gZXZlbnQuIFRoaXMgbWVhbnMgdGhhdCBpZiBhbnkgcHJvbWlzZXMgYXJlIHJlc29sdmVkIGZyb20gd2l0aGluLFxuICAgICAgICAgICAgLy8gdGhlaXIgY2FsbGJhY2tzIHdpbGwgYWx3YXlzIGZpbmlzaCBleGVjdXRpb24gYnkgdGhlIHRpbWUgdGhlXG4gICAgICAgICAgICAvLyBuZXh0IG1lc3NhZ2UgZXZlbnQgaGFuZGxlciBpcyBydW4uXG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gSW4gb3JkZXIgdG8gZW11bGF0ZSB0aGlzIGJlaGF2aW91ciwgd2UgbmVlZCB0byBtYWtlIHN1cmUgZWFjaFxuICAgICAgICAgICAgLy8gb25tZXNzYWdlIGhhbmRsZXIgaXMgcnVuIHdpdGhpbiBpdHMgb3duIG1hY3JvdGFzay5cbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5vbm1lc3NhZ2Uoe2RhdGE6IG1zZ30pLCAwKVxuICAgICAgICAgIH0pXG4gICAgICAgICAgdGhpcy5wb2xsKClcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlIDIwNDpcbiAgICAgICAgICB0aGlzLnBvbGwoKVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgNDEwOlxuICAgICAgICAgIHRoaXMucmVhZHlTdGF0ZSA9IFNPQ0tFVF9TVEFURVMub3BlblxuICAgICAgICAgIHRoaXMub25vcGVuKHt9KVxuICAgICAgICAgIHRoaXMucG9sbCgpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSA0MDM6XG4gICAgICAgICAgdGhpcy5vbmVycm9yKDQwMylcbiAgICAgICAgICB0aGlzLmNsb3NlKDEwMDgsIFwiZm9yYmlkZGVuXCIsIGZhbHNlKVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgY2FzZSA1MDA6XG4gICAgICAgICAgdGhpcy5vbmVycm9yKDUwMClcbiAgICAgICAgICB0aGlzLmNsb3NlQW5kUmV0cnkoMTAxMSwgXCJpbnRlcm5hbCBzZXJ2ZXIgZXJyb3JcIiwgNTAwKVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGRlZmF1bHQ6IHRocm93IG5ldyBFcnJvcihgdW5oYW5kbGVkIHBvbGwgc3RhdHVzICR7c3RhdHVzfWApXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIC8vIHdlIGNvbGxlY3QgYWxsIHB1c2hlcyB3aXRoaW4gdGhlIGN1cnJlbnQgZXZlbnQgbG9vcCBieVxuICAvLyBzZXRUaW1lb3V0IDAsIHdoaWNoIG9wdGltaXplcyBiYWNrLXRvLWJhY2sgcHJvY2VkdXJhbFxuICAvLyBwdXNoZXMgYWdhaW5zdCBhbiBlbXB0eSBidWZmZXJcbiAgc2VuZChib2R5KXtcbiAgICBpZih0aGlzLmN1cnJlbnRCYXRjaCl7XG4gICAgICB0aGlzLmN1cnJlbnRCYXRjaC5wdXNoKGJvZHkpXG4gICAgfSBlbHNlIGlmKHRoaXMuYXdhaXRpbmdCYXRjaEFjayl7XG4gICAgICB0aGlzLmJhdGNoQnVmZmVyLnB1c2goYm9keSlcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jdXJyZW50QmF0Y2ggPSBbYm9keV1cbiAgICAgIHRoaXMuY3VycmVudEJhdGNoVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgdGhpcy5iYXRjaFNlbmQodGhpcy5jdXJyZW50QmF0Y2gpXG4gICAgICAgIHRoaXMuY3VycmVudEJhdGNoID0gbnVsbFxuICAgICAgfSwgMClcbiAgICB9XG4gIH1cblxuICBiYXRjaFNlbmQobWVzc2FnZXMpe1xuICAgIHRoaXMuYXdhaXRpbmdCYXRjaEFjayA9IHRydWVcbiAgICB0aGlzLmFqYXgoXCJQT1NUXCIsIFwiYXBwbGljYXRpb24veC1uZGpzb25cIiwgbWVzc2FnZXMuam9pbihcIlxcblwiKSwgKCkgPT4gdGhpcy5vbmVycm9yKFwidGltZW91dFwiKSwgcmVzcCA9PiB7XG4gICAgICB0aGlzLmF3YWl0aW5nQmF0Y2hBY2sgPSBmYWxzZVxuICAgICAgaWYoIXJlc3AgfHwgcmVzcC5zdGF0dXMgIT09IDIwMCl7XG4gICAgICAgIHRoaXMub25lcnJvcihyZXNwICYmIHJlc3Auc3RhdHVzKVxuICAgICAgICB0aGlzLmNsb3NlQW5kUmV0cnkoMTAxMSwgXCJpbnRlcm5hbCBzZXJ2ZXIgZXJyb3JcIiwgZmFsc2UpXG4gICAgICB9IGVsc2UgaWYodGhpcy5iYXRjaEJ1ZmZlci5sZW5ndGggPiAwKXtcbiAgICAgICAgdGhpcy5iYXRjaFNlbmQodGhpcy5iYXRjaEJ1ZmZlcilcbiAgICAgICAgdGhpcy5iYXRjaEJ1ZmZlciA9IFtdXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIGNsb3NlKGNvZGUsIHJlYXNvbiwgd2FzQ2xlYW4pe1xuICAgIGZvcihsZXQgcmVxIG9mIHRoaXMucmVxcyl7IHJlcS5hYm9ydCgpIH1cbiAgICB0aGlzLnJlYWR5U3RhdGUgPSBTT0NLRVRfU1RBVEVTLmNsb3NlZFxuICAgIGxldCBvcHRzID0gT2JqZWN0LmFzc2lnbih7Y29kZTogMTAwMCwgcmVhc29uOiB1bmRlZmluZWQsIHdhc0NsZWFuOiB0cnVlfSwge2NvZGUsIHJlYXNvbiwgd2FzQ2xlYW59KVxuICAgIHRoaXMuYmF0Y2hCdWZmZXIgPSBbXVxuICAgIGNsZWFyVGltZW91dCh0aGlzLmN1cnJlbnRCYXRjaFRpbWVyKVxuICAgIHRoaXMuY3VycmVudEJhdGNoVGltZXIgPSBudWxsXG4gICAgaWYodHlwZW9mKENsb3NlRXZlbnQpICE9PSBcInVuZGVmaW5lZFwiKXtcbiAgICAgIHRoaXMub25jbG9zZShuZXcgQ2xvc2VFdmVudChcImNsb3NlXCIsIG9wdHMpKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm9uY2xvc2Uob3B0cylcbiAgICB9XG4gIH1cblxuICBhamF4KG1ldGhvZCwgY29udGVudFR5cGUsIGJvZHksIG9uQ2FsbGVyVGltZW91dCwgY2FsbGJhY2spe1xuICAgIGxldCByZXFcbiAgICBsZXQgb250aW1lb3V0ID0gKCkgPT4ge1xuICAgICAgdGhpcy5yZXFzLmRlbGV0ZShyZXEpXG4gICAgICBvbkNhbGxlclRpbWVvdXQoKVxuICAgIH1cbiAgICByZXEgPSBBamF4LnJlcXVlc3QobWV0aG9kLCB0aGlzLmVuZHBvaW50VVJMKCksIGNvbnRlbnRUeXBlLCBib2R5LCB0aGlzLnRpbWVvdXQsIG9udGltZW91dCwgcmVzcCA9PiB7XG4gICAgICB0aGlzLnJlcXMuZGVsZXRlKHJlcSlcbiAgICAgIGlmKHRoaXMuaXNBY3RpdmUoKSl7IGNhbGxiYWNrKHJlc3ApIH1cbiAgICB9KVxuICAgIHRoaXMucmVxcy5hZGQocmVxKVxuICB9XG59XG4iLCAiLyoqXG4gKiBJbml0aWFsaXplcyB0aGUgUHJlc2VuY2VcbiAqIEBwYXJhbSB7Q2hhbm5lbH0gY2hhbm5lbCAtIFRoZSBDaGFubmVsXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIFRoZSBvcHRpb25zLFxuICogICAgICAgIGZvciBleGFtcGxlIGB7ZXZlbnRzOiB7c3RhdGU6IFwic3RhdGVcIiwgZGlmZjogXCJkaWZmXCJ9fWBcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUHJlc2VuY2Uge1xuXG4gIGNvbnN0cnVjdG9yKGNoYW5uZWwsIG9wdHMgPSB7fSl7XG4gICAgbGV0IGV2ZW50cyA9IG9wdHMuZXZlbnRzIHx8IHtzdGF0ZTogXCJwcmVzZW5jZV9zdGF0ZVwiLCBkaWZmOiBcInByZXNlbmNlX2RpZmZcIn1cbiAgICB0aGlzLnN0YXRlID0ge31cbiAgICB0aGlzLnBlbmRpbmdEaWZmcyA9IFtdXG4gICAgdGhpcy5jaGFubmVsID0gY2hhbm5lbFxuICAgIHRoaXMuam9pblJlZiA9IG51bGxcbiAgICB0aGlzLmNhbGxlciA9IHtcbiAgICAgIG9uSm9pbjogZnVuY3Rpb24gKCl7IH0sXG4gICAgICBvbkxlYXZlOiBmdW5jdGlvbiAoKXsgfSxcbiAgICAgIG9uU3luYzogZnVuY3Rpb24gKCl7IH1cbiAgICB9XG5cbiAgICB0aGlzLmNoYW5uZWwub24oZXZlbnRzLnN0YXRlLCBuZXdTdGF0ZSA9PiB7XG4gICAgICBsZXQge29uSm9pbiwgb25MZWF2ZSwgb25TeW5jfSA9IHRoaXMuY2FsbGVyXG5cbiAgICAgIHRoaXMuam9pblJlZiA9IHRoaXMuY2hhbm5lbC5qb2luUmVmKClcbiAgICAgIHRoaXMuc3RhdGUgPSBQcmVzZW5jZS5zeW5jU3RhdGUodGhpcy5zdGF0ZSwgbmV3U3RhdGUsIG9uSm9pbiwgb25MZWF2ZSlcblxuICAgICAgdGhpcy5wZW5kaW5nRGlmZnMuZm9yRWFjaChkaWZmID0+IHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IFByZXNlbmNlLnN5bmNEaWZmKHRoaXMuc3RhdGUsIGRpZmYsIG9uSm9pbiwgb25MZWF2ZSlcbiAgICAgIH0pXG4gICAgICB0aGlzLnBlbmRpbmdEaWZmcyA9IFtdXG4gICAgICBvblN5bmMoKVxuICAgIH0pXG5cbiAgICB0aGlzLmNoYW5uZWwub24oZXZlbnRzLmRpZmYsIGRpZmYgPT4ge1xuICAgICAgbGV0IHtvbkpvaW4sIG9uTGVhdmUsIG9uU3luY30gPSB0aGlzLmNhbGxlclxuXG4gICAgICBpZih0aGlzLmluUGVuZGluZ1N5bmNTdGF0ZSgpKXtcbiAgICAgICAgdGhpcy5wZW5kaW5nRGlmZnMucHVzaChkaWZmKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IFByZXNlbmNlLnN5bmNEaWZmKHRoaXMuc3RhdGUsIGRpZmYsIG9uSm9pbiwgb25MZWF2ZSlcbiAgICAgICAgb25TeW5jKClcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgb25Kb2luKGNhbGxiYWNrKXsgdGhpcy5jYWxsZXIub25Kb2luID0gY2FsbGJhY2sgfVxuXG4gIG9uTGVhdmUoY2FsbGJhY2speyB0aGlzLmNhbGxlci5vbkxlYXZlID0gY2FsbGJhY2sgfVxuXG4gIG9uU3luYyhjYWxsYmFjayl7IHRoaXMuY2FsbGVyLm9uU3luYyA9IGNhbGxiYWNrIH1cblxuICBsaXN0KGJ5KXsgcmV0dXJuIFByZXNlbmNlLmxpc3QodGhpcy5zdGF0ZSwgYnkpIH1cblxuICBpblBlbmRpbmdTeW5jU3RhdGUoKXtcbiAgICByZXR1cm4gIXRoaXMuam9pblJlZiB8fCAodGhpcy5qb2luUmVmICE9PSB0aGlzLmNoYW5uZWwuam9pblJlZigpKVxuICB9XG5cbiAgLy8gbG93ZXItbGV2ZWwgcHVibGljIHN0YXRpYyBBUElcblxuICAvKipcbiAgICogVXNlZCB0byBzeW5jIHRoZSBsaXN0IG9mIHByZXNlbmNlcyBvbiB0aGUgc2VydmVyXG4gICAqIHdpdGggdGhlIGNsaWVudCdzIHN0YXRlLiBBbiBvcHRpb25hbCBgb25Kb2luYCBhbmQgYG9uTGVhdmVgIGNhbGxiYWNrIGNhblxuICAgKiBiZSBwcm92aWRlZCB0byByZWFjdCB0byBjaGFuZ2VzIGluIHRoZSBjbGllbnQncyBsb2NhbCBwcmVzZW5jZXMgYWNyb3NzXG4gICAqIGRpc2Nvbm5lY3RzIGFuZCByZWNvbm5lY3RzIHdpdGggdGhlIHNlcnZlci5cbiAgICpcbiAgICogQHJldHVybnMge1ByZXNlbmNlfVxuICAgKi9cbiAgc3RhdGljIHN5bmNTdGF0ZShjdXJyZW50U3RhdGUsIG5ld1N0YXRlLCBvbkpvaW4sIG9uTGVhdmUpe1xuICAgIGxldCBzdGF0ZSA9IHRoaXMuY2xvbmUoY3VycmVudFN0YXRlKVxuICAgIGxldCBqb2lucyA9IHt9XG4gICAgbGV0IGxlYXZlcyA9IHt9XG5cbiAgICB0aGlzLm1hcChzdGF0ZSwgKGtleSwgcHJlc2VuY2UpID0+IHtcbiAgICAgIGlmKCFuZXdTdGF0ZVtrZXldKXtcbiAgICAgICAgbGVhdmVzW2tleV0gPSBwcmVzZW5jZVxuICAgICAgfVxuICAgIH0pXG4gICAgdGhpcy5tYXAobmV3U3RhdGUsIChrZXksIG5ld1ByZXNlbmNlKSA9PiB7XG4gICAgICBsZXQgY3VycmVudFByZXNlbmNlID0gc3RhdGVba2V5XVxuICAgICAgaWYoY3VycmVudFByZXNlbmNlKXtcbiAgICAgICAgbGV0IG5ld1JlZnMgPSBuZXdQcmVzZW5jZS5tZXRhcy5tYXAobSA9PiBtLnBoeF9yZWYpXG4gICAgICAgIGxldCBjdXJSZWZzID0gY3VycmVudFByZXNlbmNlLm1ldGFzLm1hcChtID0+IG0ucGh4X3JlZilcbiAgICAgICAgbGV0IGpvaW5lZE1ldGFzID0gbmV3UHJlc2VuY2UubWV0YXMuZmlsdGVyKG0gPT4gY3VyUmVmcy5pbmRleE9mKG0ucGh4X3JlZikgPCAwKVxuICAgICAgICBsZXQgbGVmdE1ldGFzID0gY3VycmVudFByZXNlbmNlLm1ldGFzLmZpbHRlcihtID0+IG5ld1JlZnMuaW5kZXhPZihtLnBoeF9yZWYpIDwgMClcbiAgICAgICAgaWYoam9pbmVkTWV0YXMubGVuZ3RoID4gMCl7XG4gICAgICAgICAgam9pbnNba2V5XSA9IG5ld1ByZXNlbmNlXG4gICAgICAgICAgam9pbnNba2V5XS5tZXRhcyA9IGpvaW5lZE1ldGFzXG4gICAgICAgIH1cbiAgICAgICAgaWYobGVmdE1ldGFzLmxlbmd0aCA+IDApe1xuICAgICAgICAgIGxlYXZlc1trZXldID0gdGhpcy5jbG9uZShjdXJyZW50UHJlc2VuY2UpXG4gICAgICAgICAgbGVhdmVzW2tleV0ubWV0YXMgPSBsZWZ0TWV0YXNcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgam9pbnNba2V5XSA9IG5ld1ByZXNlbmNlXG4gICAgICB9XG4gICAgfSlcbiAgICByZXR1cm4gdGhpcy5zeW5jRGlmZihzdGF0ZSwge2pvaW5zOiBqb2lucywgbGVhdmVzOiBsZWF2ZXN9LCBvbkpvaW4sIG9uTGVhdmUpXG4gIH1cblxuICAvKipcbiAgICpcbiAgICogVXNlZCB0byBzeW5jIGEgZGlmZiBvZiBwcmVzZW5jZSBqb2luIGFuZCBsZWF2ZVxuICAgKiBldmVudHMgZnJvbSB0aGUgc2VydmVyLCBhcyB0aGV5IGhhcHBlbi4gTGlrZSBgc3luY1N0YXRlYCwgYHN5bmNEaWZmYFxuICAgKiBhY2NlcHRzIG9wdGlvbmFsIGBvbkpvaW5gIGFuZCBgb25MZWF2ZWAgY2FsbGJhY2tzIHRvIHJlYWN0IHRvIGEgdXNlclxuICAgKiBqb2luaW5nIG9yIGxlYXZpbmcgZnJvbSBhIGRldmljZS5cbiAgICpcbiAgICogQHJldHVybnMge1ByZXNlbmNlfVxuICAgKi9cbiAgc3RhdGljIHN5bmNEaWZmKHN0YXRlLCBkaWZmLCBvbkpvaW4sIG9uTGVhdmUpe1xuICAgIGxldCB7am9pbnMsIGxlYXZlc30gPSB0aGlzLmNsb25lKGRpZmYpXG4gICAgaWYoIW9uSm9pbil7IG9uSm9pbiA9IGZ1bmN0aW9uICgpeyB9IH1cbiAgICBpZighb25MZWF2ZSl7IG9uTGVhdmUgPSBmdW5jdGlvbiAoKXsgfSB9XG5cbiAgICB0aGlzLm1hcChqb2lucywgKGtleSwgbmV3UHJlc2VuY2UpID0+IHtcbiAgICAgIGxldCBjdXJyZW50UHJlc2VuY2UgPSBzdGF0ZVtrZXldXG4gICAgICBzdGF0ZVtrZXldID0gdGhpcy5jbG9uZShuZXdQcmVzZW5jZSlcbiAgICAgIGlmKGN1cnJlbnRQcmVzZW5jZSl7XG4gICAgICAgIGxldCBqb2luZWRSZWZzID0gc3RhdGVba2V5XS5tZXRhcy5tYXAobSA9PiBtLnBoeF9yZWYpXG4gICAgICAgIGxldCBjdXJNZXRhcyA9IGN1cnJlbnRQcmVzZW5jZS5tZXRhcy5maWx0ZXIobSA9PiBqb2luZWRSZWZzLmluZGV4T2YobS5waHhfcmVmKSA8IDApXG4gICAgICAgIHN0YXRlW2tleV0ubWV0YXMudW5zaGlmdCguLi5jdXJNZXRhcylcbiAgICAgIH1cbiAgICAgIG9uSm9pbihrZXksIGN1cnJlbnRQcmVzZW5jZSwgbmV3UHJlc2VuY2UpXG4gICAgfSlcbiAgICB0aGlzLm1hcChsZWF2ZXMsIChrZXksIGxlZnRQcmVzZW5jZSkgPT4ge1xuICAgICAgbGV0IGN1cnJlbnRQcmVzZW5jZSA9IHN0YXRlW2tleV1cbiAgICAgIGlmKCFjdXJyZW50UHJlc2VuY2UpeyByZXR1cm4gfVxuICAgICAgbGV0IHJlZnNUb1JlbW92ZSA9IGxlZnRQcmVzZW5jZS5tZXRhcy5tYXAobSA9PiBtLnBoeF9yZWYpXG4gICAgICBjdXJyZW50UHJlc2VuY2UubWV0YXMgPSBjdXJyZW50UHJlc2VuY2UubWV0YXMuZmlsdGVyKHAgPT4ge1xuICAgICAgICByZXR1cm4gcmVmc1RvUmVtb3ZlLmluZGV4T2YocC5waHhfcmVmKSA8IDBcbiAgICAgIH0pXG4gICAgICBvbkxlYXZlKGtleSwgY3VycmVudFByZXNlbmNlLCBsZWZ0UHJlc2VuY2UpXG4gICAgICBpZihjdXJyZW50UHJlc2VuY2UubWV0YXMubGVuZ3RoID09PSAwKXtcbiAgICAgICAgZGVsZXRlIHN0YXRlW2tleV1cbiAgICAgIH1cbiAgICB9KVxuICAgIHJldHVybiBzdGF0ZVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGFycmF5IG9mIHByZXNlbmNlcywgd2l0aCBzZWxlY3RlZCBtZXRhZGF0YS5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IHByZXNlbmNlc1xuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjaG9vc2VyXG4gICAqXG4gICAqIEByZXR1cm5zIHtQcmVzZW5jZX1cbiAgICovXG4gIHN0YXRpYyBsaXN0KHByZXNlbmNlcywgY2hvb3Nlcil7XG4gICAgaWYoIWNob29zZXIpeyBjaG9vc2VyID0gZnVuY3Rpb24gKGtleSwgcHJlcyl7IHJldHVybiBwcmVzIH0gfVxuXG4gICAgcmV0dXJuIHRoaXMubWFwKHByZXNlbmNlcywgKGtleSwgcHJlc2VuY2UpID0+IHtcbiAgICAgIHJldHVybiBjaG9vc2VyKGtleSwgcHJlc2VuY2UpXG4gICAgfSlcbiAgfVxuXG4gIC8vIHByaXZhdGVcblxuICBzdGF0aWMgbWFwKG9iaiwgZnVuYyl7XG4gICAgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKG9iaikubWFwKGtleSA9PiBmdW5jKGtleSwgb2JqW2tleV0pKVxuICB9XG5cbiAgc3RhdGljIGNsb25lKG9iail7IHJldHVybiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG9iaikpIH1cbn1cbiIsICIvKiBUaGUgZGVmYXVsdCBzZXJpYWxpemVyIGZvciBlbmNvZGluZyBhbmQgZGVjb2RpbmcgbWVzc2FnZXMgKi9cbmltcG9ydCB7XG4gIENIQU5ORUxfRVZFTlRTXG59IGZyb20gXCIuL2NvbnN0YW50c1wiXG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgSEVBREVSX0xFTkdUSDogMSxcbiAgTUVUQV9MRU5HVEg6IDQsXG4gIEtJTkRTOiB7cHVzaDogMCwgcmVwbHk6IDEsIGJyb2FkY2FzdDogMn0sXG5cbiAgZW5jb2RlKG1zZywgY2FsbGJhY2spe1xuICAgIGlmKG1zZy5wYXlsb2FkLmNvbnN0cnVjdG9yID09PSBBcnJheUJ1ZmZlcil7XG4gICAgICByZXR1cm4gY2FsbGJhY2sodGhpcy5iaW5hcnlFbmNvZGUobXNnKSlcbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IHBheWxvYWQgPSBbbXNnLmpvaW5fcmVmLCBtc2cucmVmLCBtc2cudG9waWMsIG1zZy5ldmVudCwgbXNnLnBheWxvYWRdXG4gICAgICByZXR1cm4gY2FsbGJhY2soSlNPTi5zdHJpbmdpZnkocGF5bG9hZCkpXG4gICAgfVxuICB9LFxuXG4gIGRlY29kZShyYXdQYXlsb2FkLCBjYWxsYmFjayl7XG4gICAgaWYocmF3UGF5bG9hZC5jb25zdHJ1Y3RvciA9PT0gQXJyYXlCdWZmZXIpe1xuICAgICAgcmV0dXJuIGNhbGxiYWNrKHRoaXMuYmluYXJ5RGVjb2RlKHJhd1BheWxvYWQpKVxuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgW2pvaW5fcmVmLCByZWYsIHRvcGljLCBldmVudCwgcGF5bG9hZF0gPSBKU09OLnBhcnNlKHJhd1BheWxvYWQpXG4gICAgICByZXR1cm4gY2FsbGJhY2soe2pvaW5fcmVmLCByZWYsIHRvcGljLCBldmVudCwgcGF5bG9hZH0pXG4gICAgfVxuICB9LFxuXG4gIC8vIHByaXZhdGVcblxuICBiaW5hcnlFbmNvZGUobWVzc2FnZSl7XG4gICAgbGV0IHtqb2luX3JlZiwgcmVmLCBldmVudCwgdG9waWMsIHBheWxvYWR9ID0gbWVzc2FnZVxuICAgIGxldCBtZXRhTGVuZ3RoID0gdGhpcy5NRVRBX0xFTkdUSCArIGpvaW5fcmVmLmxlbmd0aCArIHJlZi5sZW5ndGggKyB0b3BpYy5sZW5ndGggKyBldmVudC5sZW5ndGhcbiAgICBsZXQgaGVhZGVyID0gbmV3IEFycmF5QnVmZmVyKHRoaXMuSEVBREVSX0xFTkdUSCArIG1ldGFMZW5ndGgpXG4gICAgbGV0IHZpZXcgPSBuZXcgRGF0YVZpZXcoaGVhZGVyKVxuICAgIGxldCBvZmZzZXQgPSAwXG5cbiAgICB2aWV3LnNldFVpbnQ4KG9mZnNldCsrLCB0aGlzLktJTkRTLnB1c2gpIC8vIGtpbmRcbiAgICB2aWV3LnNldFVpbnQ4KG9mZnNldCsrLCBqb2luX3JlZi5sZW5ndGgpXG4gICAgdmlldy5zZXRVaW50OChvZmZzZXQrKywgcmVmLmxlbmd0aClcbiAgICB2aWV3LnNldFVpbnQ4KG9mZnNldCsrLCB0b3BpYy5sZW5ndGgpXG4gICAgdmlldy5zZXRVaW50OChvZmZzZXQrKywgZXZlbnQubGVuZ3RoKVxuICAgIEFycmF5LmZyb20oam9pbl9yZWYsIGNoYXIgPT4gdmlldy5zZXRVaW50OChvZmZzZXQrKywgY2hhci5jaGFyQ29kZUF0KDApKSlcbiAgICBBcnJheS5mcm9tKHJlZiwgY2hhciA9PiB2aWV3LnNldFVpbnQ4KG9mZnNldCsrLCBjaGFyLmNoYXJDb2RlQXQoMCkpKVxuICAgIEFycmF5LmZyb20odG9waWMsIGNoYXIgPT4gdmlldy5zZXRVaW50OChvZmZzZXQrKywgY2hhci5jaGFyQ29kZUF0KDApKSlcbiAgICBBcnJheS5mcm9tKGV2ZW50LCBjaGFyID0+IHZpZXcuc2V0VWludDgob2Zmc2V0KyssIGNoYXIuY2hhckNvZGVBdCgwKSkpXG5cbiAgICB2YXIgY29tYmluZWQgPSBuZXcgVWludDhBcnJheShoZWFkZXIuYnl0ZUxlbmd0aCArIHBheWxvYWQuYnl0ZUxlbmd0aClcbiAgICBjb21iaW5lZC5zZXQobmV3IFVpbnQ4QXJyYXkoaGVhZGVyKSwgMClcbiAgICBjb21iaW5lZC5zZXQobmV3IFVpbnQ4QXJyYXkocGF5bG9hZCksIGhlYWRlci5ieXRlTGVuZ3RoKVxuXG4gICAgcmV0dXJuIGNvbWJpbmVkLmJ1ZmZlclxuICB9LFxuXG4gIGJpbmFyeURlY29kZShidWZmZXIpe1xuICAgIGxldCB2aWV3ID0gbmV3IERhdGFWaWV3KGJ1ZmZlcilcbiAgICBsZXQga2luZCA9IHZpZXcuZ2V0VWludDgoMClcbiAgICBsZXQgZGVjb2RlciA9IG5ldyBUZXh0RGVjb2RlcigpXG4gICAgc3dpdGNoKGtpbmQpe1xuICAgICAgY2FzZSB0aGlzLktJTkRTLnB1c2g6IHJldHVybiB0aGlzLmRlY29kZVB1c2goYnVmZmVyLCB2aWV3LCBkZWNvZGVyKVxuICAgICAgY2FzZSB0aGlzLktJTkRTLnJlcGx5OiByZXR1cm4gdGhpcy5kZWNvZGVSZXBseShidWZmZXIsIHZpZXcsIGRlY29kZXIpXG4gICAgICBjYXNlIHRoaXMuS0lORFMuYnJvYWRjYXN0OiByZXR1cm4gdGhpcy5kZWNvZGVCcm9hZGNhc3QoYnVmZmVyLCB2aWV3LCBkZWNvZGVyKVxuICAgIH1cbiAgfSxcblxuICBkZWNvZGVQdXNoKGJ1ZmZlciwgdmlldywgZGVjb2Rlcil7XG4gICAgbGV0IGpvaW5SZWZTaXplID0gdmlldy5nZXRVaW50OCgxKVxuICAgIGxldCB0b3BpY1NpemUgPSB2aWV3LmdldFVpbnQ4KDIpXG4gICAgbGV0IGV2ZW50U2l6ZSA9IHZpZXcuZ2V0VWludDgoMylcbiAgICBsZXQgb2Zmc2V0ID0gdGhpcy5IRUFERVJfTEVOR1RIICsgdGhpcy5NRVRBX0xFTkdUSCAtIDEgLy8gcHVzaGVzIGhhdmUgbm8gcmVmXG4gICAgbGV0IGpvaW5SZWYgPSBkZWNvZGVyLmRlY29kZShidWZmZXIuc2xpY2Uob2Zmc2V0LCBvZmZzZXQgKyBqb2luUmVmU2l6ZSkpXG4gICAgb2Zmc2V0ID0gb2Zmc2V0ICsgam9pblJlZlNpemVcbiAgICBsZXQgdG9waWMgPSBkZWNvZGVyLmRlY29kZShidWZmZXIuc2xpY2Uob2Zmc2V0LCBvZmZzZXQgKyB0b3BpY1NpemUpKVxuICAgIG9mZnNldCA9IG9mZnNldCArIHRvcGljU2l6ZVxuICAgIGxldCBldmVudCA9IGRlY29kZXIuZGVjb2RlKGJ1ZmZlci5zbGljZShvZmZzZXQsIG9mZnNldCArIGV2ZW50U2l6ZSkpXG4gICAgb2Zmc2V0ID0gb2Zmc2V0ICsgZXZlbnRTaXplXG4gICAgbGV0IGRhdGEgPSBidWZmZXIuc2xpY2Uob2Zmc2V0LCBidWZmZXIuYnl0ZUxlbmd0aClcbiAgICByZXR1cm4ge2pvaW5fcmVmOiBqb2luUmVmLCByZWY6IG51bGwsIHRvcGljOiB0b3BpYywgZXZlbnQ6IGV2ZW50LCBwYXlsb2FkOiBkYXRhfVxuICB9LFxuXG4gIGRlY29kZVJlcGx5KGJ1ZmZlciwgdmlldywgZGVjb2Rlcil7XG4gICAgbGV0IGpvaW5SZWZTaXplID0gdmlldy5nZXRVaW50OCgxKVxuICAgIGxldCByZWZTaXplID0gdmlldy5nZXRVaW50OCgyKVxuICAgIGxldCB0b3BpY1NpemUgPSB2aWV3LmdldFVpbnQ4KDMpXG4gICAgbGV0IGV2ZW50U2l6ZSA9IHZpZXcuZ2V0VWludDgoNClcbiAgICBsZXQgb2Zmc2V0ID0gdGhpcy5IRUFERVJfTEVOR1RIICsgdGhpcy5NRVRBX0xFTkdUSFxuICAgIGxldCBqb2luUmVmID0gZGVjb2Rlci5kZWNvZGUoYnVmZmVyLnNsaWNlKG9mZnNldCwgb2Zmc2V0ICsgam9pblJlZlNpemUpKVxuICAgIG9mZnNldCA9IG9mZnNldCArIGpvaW5SZWZTaXplXG4gICAgbGV0IHJlZiA9IGRlY29kZXIuZGVjb2RlKGJ1ZmZlci5zbGljZShvZmZzZXQsIG9mZnNldCArIHJlZlNpemUpKVxuICAgIG9mZnNldCA9IG9mZnNldCArIHJlZlNpemVcbiAgICBsZXQgdG9waWMgPSBkZWNvZGVyLmRlY29kZShidWZmZXIuc2xpY2Uob2Zmc2V0LCBvZmZzZXQgKyB0b3BpY1NpemUpKVxuICAgIG9mZnNldCA9IG9mZnNldCArIHRvcGljU2l6ZVxuICAgIGxldCBldmVudCA9IGRlY29kZXIuZGVjb2RlKGJ1ZmZlci5zbGljZShvZmZzZXQsIG9mZnNldCArIGV2ZW50U2l6ZSkpXG4gICAgb2Zmc2V0ID0gb2Zmc2V0ICsgZXZlbnRTaXplXG4gICAgbGV0IGRhdGEgPSBidWZmZXIuc2xpY2Uob2Zmc2V0LCBidWZmZXIuYnl0ZUxlbmd0aClcbiAgICBsZXQgcGF5bG9hZCA9IHtzdGF0dXM6IGV2ZW50LCByZXNwb25zZTogZGF0YX1cbiAgICByZXR1cm4ge2pvaW5fcmVmOiBqb2luUmVmLCByZWY6IHJlZiwgdG9waWM6IHRvcGljLCBldmVudDogQ0hBTk5FTF9FVkVOVFMucmVwbHksIHBheWxvYWQ6IHBheWxvYWR9XG4gIH0sXG5cbiAgZGVjb2RlQnJvYWRjYXN0KGJ1ZmZlciwgdmlldywgZGVjb2Rlcil7XG4gICAgbGV0IHRvcGljU2l6ZSA9IHZpZXcuZ2V0VWludDgoMSlcbiAgICBsZXQgZXZlbnRTaXplID0gdmlldy5nZXRVaW50OCgyKVxuICAgIGxldCBvZmZzZXQgPSB0aGlzLkhFQURFUl9MRU5HVEggKyAyXG4gICAgbGV0IHRvcGljID0gZGVjb2Rlci5kZWNvZGUoYnVmZmVyLnNsaWNlKG9mZnNldCwgb2Zmc2V0ICsgdG9waWNTaXplKSlcbiAgICBvZmZzZXQgPSBvZmZzZXQgKyB0b3BpY1NpemVcbiAgICBsZXQgZXZlbnQgPSBkZWNvZGVyLmRlY29kZShidWZmZXIuc2xpY2Uob2Zmc2V0LCBvZmZzZXQgKyBldmVudFNpemUpKVxuICAgIG9mZnNldCA9IG9mZnNldCArIGV2ZW50U2l6ZVxuICAgIGxldCBkYXRhID0gYnVmZmVyLnNsaWNlKG9mZnNldCwgYnVmZmVyLmJ5dGVMZW5ndGgpXG5cbiAgICByZXR1cm4ge2pvaW5fcmVmOiBudWxsLCByZWY6IG51bGwsIHRvcGljOiB0b3BpYywgZXZlbnQ6IGV2ZW50LCBwYXlsb2FkOiBkYXRhfVxuICB9XG59XG4iLCAiaW1wb3J0IHtcbiAgZ2xvYmFsLFxuICBwaHhXaW5kb3csXG4gIENIQU5ORUxfRVZFTlRTLFxuICBERUZBVUxUX1RJTUVPVVQsXG4gIERFRkFVTFRfVlNOLFxuICBTT0NLRVRfU1RBVEVTLFxuICBUUkFOU1BPUlRTLFxuICBXU19DTE9TRV9OT1JNQUxcbn0gZnJvbSBcIi4vY29uc3RhbnRzXCJcblxuaW1wb3J0IHtcbiAgY2xvc3VyZVxufSBmcm9tIFwiLi91dGlsc1wiXG5cbmltcG9ydCBBamF4IGZyb20gXCIuL2FqYXhcIlxuaW1wb3J0IENoYW5uZWwgZnJvbSBcIi4vY2hhbm5lbFwiXG5pbXBvcnQgTG9uZ1BvbGwgZnJvbSBcIi4vbG9uZ3BvbGxcIlxuaW1wb3J0IFNlcmlhbGl6ZXIgZnJvbSBcIi4vc2VyaWFsaXplclwiXG5pbXBvcnQgVGltZXIgZnJvbSBcIi4vdGltZXJcIlxuXG4vKiogSW5pdGlhbGl6ZXMgdGhlIFNvY2tldCAqXG4gKlxuICogRm9yIElFOCBzdXBwb3J0IHVzZSBhbiBFUzUtc2hpbSAoaHR0cHM6Ly9naXRodWIuY29tL2VzLXNoaW1zL2VzNS1zaGltKVxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBlbmRQb2ludCAtIFRoZSBzdHJpbmcgV2ViU29ja2V0IGVuZHBvaW50LCBpZSwgYFwid3M6Ly9leGFtcGxlLmNvbS9zb2NrZXRcImAsXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYFwid3NzOi8vZXhhbXBsZS5jb21cImBcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgXCIvc29ja2V0XCJgIChpbmhlcml0ZWQgaG9zdCAmIHByb3RvY29sKVxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRzXSAtIE9wdGlvbmFsIGNvbmZpZ3VyYXRpb25cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtvcHRzLnRyYW5zcG9ydF0gLSBUaGUgV2Vic29ja2V0IFRyYW5zcG9ydCwgZm9yIGV4YW1wbGUgV2ViU29ja2V0IG9yIFBob2VuaXguTG9uZ1BvbGwuXG4gKlxuICogRGVmYXVsdHMgdG8gV2ViU29ja2V0IHdpdGggYXV0b21hdGljIExvbmdQb2xsIGZhbGxiYWNrLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gW29wdHMuZW5jb2RlXSAtIFRoZSBmdW5jdGlvbiB0byBlbmNvZGUgb3V0Z29pbmcgbWVzc2FnZXMuXG4gKlxuICogRGVmYXVsdHMgdG8gSlNPTiBlbmNvZGVyLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtvcHRzLmRlY29kZV0gLSBUaGUgZnVuY3Rpb24gdG8gZGVjb2RlIGluY29taW5nIG1lc3NhZ2VzLlxuICpcbiAqIERlZmF1bHRzIHRvIEpTT046XG4gKlxuICogYGBgamF2YXNjcmlwdFxuICogKHBheWxvYWQsIGNhbGxiYWNrKSA9PiBjYWxsYmFjayhKU09OLnBhcnNlKHBheWxvYWQpKVxuICogYGBgXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRzLnRpbWVvdXRdIC0gVGhlIGRlZmF1bHQgdGltZW91dCBpbiBtaWxsaXNlY29uZHMgdG8gdHJpZ2dlciBwdXNoIHRpbWVvdXRzLlxuICpcbiAqIERlZmF1bHRzIGBERUZBVUxUX1RJTUVPVVRgXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdHMuaGVhcnRiZWF0SW50ZXJ2YWxNc10gLSBUaGUgbWlsbGlzZWMgaW50ZXJ2YWwgdG8gc2VuZCBhIGhlYXJ0YmVhdCBtZXNzYWdlXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdHMucmVjb25uZWN0QWZ0ZXJNc10gLSBUaGUgb3B0aW9uYWwgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBtaWxsaXNlY1xuICogc29ja2V0IHJlY29ubmVjdCBpbnRlcnZhbC5cbiAqXG4gKiBEZWZhdWx0cyB0byBzdGVwcGVkIGJhY2tvZmYgb2Y6XG4gKlxuICogYGBgamF2YXNjcmlwdFxuICogZnVuY3Rpb24odHJpZXMpe1xuICogICByZXR1cm4gWzEwLCA1MCwgMTAwLCAxNTAsIDIwMCwgMjUwLCA1MDAsIDEwMDAsIDIwMDBdW3RyaWVzIC0gMV0gfHwgNTAwMFxuICogfVxuICogYGBgYFxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0cy5yZWpvaW5BZnRlck1zXSAtIFRoZSBvcHRpb25hbCBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIG1pbGxpc2VjXG4gKiByZWpvaW4gaW50ZXJ2YWwgZm9yIGluZGl2aWR1YWwgY2hhbm5lbHMuXG4gKlxuICogYGBgamF2YXNjcmlwdFxuICogZnVuY3Rpb24odHJpZXMpe1xuICogICByZXR1cm4gWzEwMDAsIDIwMDAsIDUwMDBdW3RyaWVzIC0gMV0gfHwgMTAwMDBcbiAqIH1cbiAqIGBgYGBcbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb3B0cy5sb2dnZXJdIC0gVGhlIG9wdGlvbmFsIGZ1bmN0aW9uIGZvciBzcGVjaWFsaXplZCBsb2dnaW5nLCBpZTpcbiAqXG4gKiBgYGBqYXZhc2NyaXB0XG4gKiBmdW5jdGlvbihraW5kLCBtc2csIGRhdGEpIHtcbiAqICAgY29uc29sZS5sb2coYCR7a2luZH06ICR7bXNnfWAsIGRhdGEpXG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdHMubG9uZ3BvbGxlclRpbWVvdXRdIC0gVGhlIG1heGltdW0gdGltZW91dCBvZiBhIGxvbmcgcG9sbCBBSkFYIHJlcXVlc3QuXG4gKlxuICogRGVmYXVsdHMgdG8gMjBzIChkb3VibGUgdGhlIHNlcnZlciBsb25nIHBvbGwgdGltZXIpLlxuICpcbiAqIEBwYXJhbSB7KE9iamVjdHxmdW5jdGlvbil9IFtvcHRzLnBhcmFtc10gLSBUaGUgb3B0aW9uYWwgcGFyYW1zIHRvIHBhc3Mgd2hlbiBjb25uZWN0aW5nXG4gKiBAcGFyYW0ge3N0cmluZ30gW29wdHMuYmluYXJ5VHlwZV0gLSBUaGUgYmluYXJ5IHR5cGUgdG8gdXNlIGZvciBiaW5hcnkgV2ViU29ja2V0IGZyYW1lcy5cbiAqXG4gKiBEZWZhdWx0cyB0byBcImFycmF5YnVmZmVyXCJcbiAqXG4gKiBAcGFyYW0ge3Zzbn0gW29wdHMudnNuXSAtIFRoZSBzZXJpYWxpemVyJ3MgcHJvdG9jb2wgdmVyc2lvbiB0byBzZW5kIG9uIGNvbm5lY3QuXG4gKlxuICogRGVmYXVsdHMgdG8gREVGQVVMVF9WU04uXG4qL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU29ja2V0IHtcbiAgY29uc3RydWN0b3IoZW5kUG9pbnQsIG9wdHMgPSB7fSl7XG4gICAgdGhpcy5zdGF0ZUNoYW5nZUNhbGxiYWNrcyA9IHtvcGVuOiBbXSwgY2xvc2U6IFtdLCBlcnJvcjogW10sIG1lc3NhZ2U6IFtdfVxuICAgIHRoaXMuY2hhbm5lbHMgPSBbXVxuICAgIHRoaXMuc2VuZEJ1ZmZlciA9IFtdXG4gICAgdGhpcy5yZWYgPSAwXG4gICAgdGhpcy50aW1lb3V0ID0gb3B0cy50aW1lb3V0IHx8IERFRkFVTFRfVElNRU9VVFxuICAgIHRoaXMudHJhbnNwb3J0ID0gb3B0cy50cmFuc3BvcnQgfHwgZ2xvYmFsLldlYlNvY2tldCB8fCBMb25nUG9sbFxuICAgIHRoaXMuZXN0YWJsaXNoZWRDb25uZWN0aW9ucyA9IDBcbiAgICB0aGlzLmRlZmF1bHRFbmNvZGVyID0gU2VyaWFsaXplci5lbmNvZGUuYmluZChTZXJpYWxpemVyKVxuICAgIHRoaXMuZGVmYXVsdERlY29kZXIgPSBTZXJpYWxpemVyLmRlY29kZS5iaW5kKFNlcmlhbGl6ZXIpXG4gICAgdGhpcy5jbG9zZVdhc0NsZWFuID0gZmFsc2VcbiAgICB0aGlzLmJpbmFyeVR5cGUgPSBvcHRzLmJpbmFyeVR5cGUgfHwgXCJhcnJheWJ1ZmZlclwiXG4gICAgdGhpcy5jb25uZWN0Q2xvY2sgPSAxXG4gICAgaWYodGhpcy50cmFuc3BvcnQgIT09IExvbmdQb2xsKXtcbiAgICAgIHRoaXMuZW5jb2RlID0gb3B0cy5lbmNvZGUgfHwgdGhpcy5kZWZhdWx0RW5jb2RlclxuICAgICAgdGhpcy5kZWNvZGUgPSBvcHRzLmRlY29kZSB8fCB0aGlzLmRlZmF1bHREZWNvZGVyXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZW5jb2RlID0gdGhpcy5kZWZhdWx0RW5jb2RlclxuICAgICAgdGhpcy5kZWNvZGUgPSB0aGlzLmRlZmF1bHREZWNvZGVyXG4gICAgfVxuICAgIGxldCBhd2FpdGluZ0Nvbm5lY3Rpb25PblBhZ2VTaG93ID0gbnVsbFxuICAgIGlmKHBoeFdpbmRvdyAmJiBwaHhXaW5kb3cuYWRkRXZlbnRMaXN0ZW5lcil7XG4gICAgICBwaHhXaW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInBhZ2VoaWRlXCIsIF9lID0+IHtcbiAgICAgICAgaWYodGhpcy5jb25uKXtcbiAgICAgICAgICB0aGlzLmRpc2Nvbm5lY3QoKVxuICAgICAgICAgIGF3YWl0aW5nQ29ubmVjdGlvbk9uUGFnZVNob3cgPSB0aGlzLmNvbm5lY3RDbG9ja1xuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgcGh4V2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJwYWdlc2hvd1wiLCBfZSA9PiB7XG4gICAgICAgIGlmKGF3YWl0aW5nQ29ubmVjdGlvbk9uUGFnZVNob3cgPT09IHRoaXMuY29ubmVjdENsb2NrKXtcbiAgICAgICAgICBhd2FpdGluZ0Nvbm5lY3Rpb25PblBhZ2VTaG93ID0gbnVsbFxuICAgICAgICAgIHRoaXMuY29ubmVjdCgpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuICAgIHRoaXMuaGVhcnRiZWF0SW50ZXJ2YWxNcyA9IG9wdHMuaGVhcnRiZWF0SW50ZXJ2YWxNcyB8fCAzMDAwMFxuICAgIHRoaXMucmVqb2luQWZ0ZXJNcyA9ICh0cmllcykgPT4ge1xuICAgICAgaWYob3B0cy5yZWpvaW5BZnRlck1zKXtcbiAgICAgICAgcmV0dXJuIG9wdHMucmVqb2luQWZ0ZXJNcyh0cmllcylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBbMTAwMCwgMjAwMCwgNTAwMF1bdHJpZXMgLSAxXSB8fCAxMDAwMFxuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnJlY29ubmVjdEFmdGVyTXMgPSAodHJpZXMpID0+IHtcbiAgICAgIGlmKG9wdHMucmVjb25uZWN0QWZ0ZXJNcyl7XG4gICAgICAgIHJldHVybiBvcHRzLnJlY29ubmVjdEFmdGVyTXModHJpZXMpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gWzEwLCA1MCwgMTAwLCAxNTAsIDIwMCwgMjUwLCA1MDAsIDEwMDAsIDIwMDBdW3RyaWVzIC0gMV0gfHwgNTAwMFxuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLmxvZ2dlciA9IG9wdHMubG9nZ2VyIHx8IG51bGxcbiAgICB0aGlzLmxvbmdwb2xsZXJUaW1lb3V0ID0gb3B0cy5sb25ncG9sbGVyVGltZW91dCB8fCAyMDAwMFxuICAgIHRoaXMucGFyYW1zID0gY2xvc3VyZShvcHRzLnBhcmFtcyB8fCB7fSlcbiAgICB0aGlzLmVuZFBvaW50ID0gYCR7ZW5kUG9pbnR9LyR7VFJBTlNQT1JUUy53ZWJzb2NrZXR9YFxuICAgIHRoaXMudnNuID0gb3B0cy52c24gfHwgREVGQVVMVF9WU05cbiAgICB0aGlzLmhlYXJ0YmVhdFRpbWVvdXRUaW1lciA9IG51bGxcbiAgICB0aGlzLmhlYXJ0YmVhdFRpbWVyID0gbnVsbFxuICAgIHRoaXMucGVuZGluZ0hlYXJ0YmVhdFJlZiA9IG51bGxcbiAgICB0aGlzLnJlY29ubmVjdFRpbWVyID0gbmV3IFRpbWVyKCgpID0+IHtcbiAgICAgIHRoaXMudGVhcmRvd24oKCkgPT4gdGhpcy5jb25uZWN0KCkpXG4gICAgfSwgdGhpcy5yZWNvbm5lY3RBZnRlck1zKVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIExvbmdQb2xsIHRyYW5zcG9ydCByZWZlcmVuY2VcbiAgICovXG4gIGdldExvbmdQb2xsVHJhbnNwb3J0KCl7IHJldHVybiBMb25nUG9sbCB9XG5cbiAgLyoqXG4gICAqIERpc2Nvbm5lY3RzIGFuZCByZXBsYWNlcyB0aGUgYWN0aXZlIHRyYW5zcG9ydFxuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBuZXdUcmFuc3BvcnQgLSBUaGUgbmV3IHRyYW5zcG9ydCBjbGFzcyB0byBpbnN0YW50aWF0ZVxuICAgKlxuICAgKi9cbiAgcmVwbGFjZVRyYW5zcG9ydChuZXdUcmFuc3BvcnQpe1xuICAgIHRoaXMuY29ubmVjdENsb2NrKytcbiAgICB0aGlzLmNsb3NlV2FzQ2xlYW4gPSB0cnVlXG4gICAgdGhpcy5yZWNvbm5lY3RUaW1lci5yZXNldCgpXG4gICAgdGhpcy5zZW5kQnVmZmVyID0gW11cbiAgICBpZih0aGlzLmNvbm4pe1xuICAgICAgdGhpcy5jb25uLmNsb3NlKClcbiAgICAgIHRoaXMuY29ubiA9IG51bGxcbiAgICB9XG4gICAgdGhpcy50cmFuc3BvcnQgPSBuZXdUcmFuc3BvcnRcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBzb2NrZXQgcHJvdG9jb2xcbiAgICpcbiAgICogQHJldHVybnMge3N0cmluZ31cbiAgICovXG4gIHByb3RvY29sKCl7IHJldHVybiBsb2NhdGlvbi5wcm90b2NvbC5tYXRjaCgvXmh0dHBzLykgPyBcIndzc1wiIDogXCJ3c1wiIH1cblxuICAvKipcbiAgICogVGhlIGZ1bGx5IHF1YWxpZmllZCBzb2NrZXQgdXJsXG4gICAqXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAqL1xuICBlbmRQb2ludFVSTCgpe1xuICAgIGxldCB1cmkgPSBBamF4LmFwcGVuZFBhcmFtcyhcbiAgICAgIEFqYXguYXBwZW5kUGFyYW1zKHRoaXMuZW5kUG9pbnQsIHRoaXMucGFyYW1zKCkpLCB7dnNuOiB0aGlzLnZzbn0pXG4gICAgaWYodXJpLmNoYXJBdCgwKSAhPT0gXCIvXCIpeyByZXR1cm4gdXJpIH1cbiAgICBpZih1cmkuY2hhckF0KDEpID09PSBcIi9cIil7IHJldHVybiBgJHt0aGlzLnByb3RvY29sKCl9OiR7dXJpfWAgfVxuXG4gICAgcmV0dXJuIGAke3RoaXMucHJvdG9jb2woKX06Ly8ke2xvY2F0aW9uLmhvc3R9JHt1cml9YFxuICB9XG5cbiAgLyoqXG4gICAqIERpc2Nvbm5lY3RzIHRoZSBzb2NrZXRcbiAgICpcbiAgICogU2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9DbG9zZUV2ZW50I1N0YXR1c19jb2RlcyBmb3IgdmFsaWQgc3RhdHVzIGNvZGVzLlxuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayAtIE9wdGlvbmFsIGNhbGxiYWNrIHdoaWNoIGlzIGNhbGxlZCBhZnRlciBzb2NrZXQgaXMgZGlzY29ubmVjdGVkLlxuICAgKiBAcGFyYW0ge2ludGVnZXJ9IGNvZGUgLSBBIHN0YXR1cyBjb2RlIGZvciBkaXNjb25uZWN0aW9uIChPcHRpb25hbCkuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByZWFzb24gLSBBIHRleHR1YWwgZGVzY3JpcHRpb24gb2YgdGhlIHJlYXNvbiB0byBkaXNjb25uZWN0LiAoT3B0aW9uYWwpXG4gICAqL1xuICBkaXNjb25uZWN0KGNhbGxiYWNrLCBjb2RlLCByZWFzb24pe1xuICAgIHRoaXMuY29ubmVjdENsb2NrKytcbiAgICB0aGlzLmNsb3NlV2FzQ2xlYW4gPSB0cnVlXG4gICAgdGhpcy5yZWNvbm5lY3RUaW1lci5yZXNldCgpXG4gICAgdGhpcy50ZWFyZG93bihjYWxsYmFjaywgY29kZSwgcmVhc29uKVxuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBwYXJhbXMgLSBUaGUgcGFyYW1zIHRvIHNlbmQgd2hlbiBjb25uZWN0aW5nLCBmb3IgZXhhbXBsZSBge3VzZXJfaWQ6IHVzZXJUb2tlbn1gXG4gICAqXG4gICAqIFBhc3NpbmcgcGFyYW1zIHRvIGNvbm5lY3QgaXMgZGVwcmVjYXRlZDsgcGFzcyB0aGVtIGluIHRoZSBTb2NrZXQgY29uc3RydWN0b3IgaW5zdGVhZDpcbiAgICogYG5ldyBTb2NrZXQoXCIvc29ja2V0XCIsIHtwYXJhbXM6IHt1c2VyX2lkOiB1c2VyVG9rZW59fSlgLlxuICAgKi9cbiAgY29ubmVjdChwYXJhbXMpe1xuICAgIGlmKHBhcmFtcyl7XG4gICAgICBjb25zb2xlICYmIGNvbnNvbGUubG9nKFwicGFzc2luZyBwYXJhbXMgdG8gY29ubmVjdCBpcyBkZXByZWNhdGVkLiBJbnN0ZWFkIHBhc3MgOnBhcmFtcyB0byB0aGUgU29ja2V0IGNvbnN0cnVjdG9yXCIpXG4gICAgICB0aGlzLnBhcmFtcyA9IGNsb3N1cmUocGFyYW1zKVxuICAgIH1cbiAgICBpZih0aGlzLmNvbm4peyByZXR1cm4gfVxuXG4gICAgdGhpcy5jb25uZWN0Q2xvY2srK1xuICAgIHRoaXMuY2xvc2VXYXNDbGVhbiA9IGZhbHNlXG4gICAgdGhpcy5jb25uID0gbmV3IHRoaXMudHJhbnNwb3J0KHRoaXMuZW5kUG9pbnRVUkwoKSlcbiAgICB0aGlzLmNvbm4uYmluYXJ5VHlwZSA9IHRoaXMuYmluYXJ5VHlwZVxuICAgIHRoaXMuY29ubi50aW1lb3V0ID0gdGhpcy5sb25ncG9sbGVyVGltZW91dFxuICAgIHRoaXMuY29ubi5vbm9wZW4gPSAoKSA9PiB0aGlzLm9uQ29ubk9wZW4oKVxuICAgIHRoaXMuY29ubi5vbmVycm9yID0gZXJyb3IgPT4gdGhpcy5vbkNvbm5FcnJvcihlcnJvcilcbiAgICB0aGlzLmNvbm4ub25tZXNzYWdlID0gZXZlbnQgPT4gdGhpcy5vbkNvbm5NZXNzYWdlKGV2ZW50KVxuICAgIHRoaXMuY29ubi5vbmNsb3NlID0gZXZlbnQgPT4gdGhpcy5vbkNvbm5DbG9zZShldmVudClcbiAgfVxuXG4gIC8qKlxuICAgKiBMb2dzIHRoZSBtZXNzYWdlLiBPdmVycmlkZSBgdGhpcy5sb2dnZXJgIGZvciBzcGVjaWFsaXplZCBsb2dnaW5nLiBub29wcyBieSBkZWZhdWx0XG4gICAqIEBwYXJhbSB7c3RyaW5nfSBraW5kXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBtc2dcbiAgICogQHBhcmFtIHtPYmplY3R9IGRhdGFcbiAgICovXG4gIGxvZyhraW5kLCBtc2csIGRhdGEpeyB0aGlzLmxvZ2dlcihraW5kLCBtc2csIGRhdGEpIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0cnVlIGlmIGEgbG9nZ2VyIGhhcyBiZWVuIHNldCBvbiB0aGlzIHNvY2tldC5cbiAgICovXG4gIGhhc0xvZ2dlcigpeyByZXR1cm4gdGhpcy5sb2dnZXIgIT09IG51bGwgfVxuXG4gIC8qKlxuICAgKiBSZWdpc3RlcnMgY2FsbGJhY2tzIGZvciBjb25uZWN0aW9uIG9wZW4gZXZlbnRzXG4gICAqXG4gICAqIEBleGFtcGxlIHNvY2tldC5vbk9wZW4oZnVuY3Rpb24oKXsgY29uc29sZS5pbmZvKFwidGhlIHNvY2tldCB3YXMgb3BlbmVkXCIpIH0pXG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gICAqL1xuICBvbk9wZW4oY2FsbGJhY2spe1xuICAgIGxldCByZWYgPSB0aGlzLm1ha2VSZWYoKVxuICAgIHRoaXMuc3RhdGVDaGFuZ2VDYWxsYmFja3Mub3Blbi5wdXNoKFtyZWYsIGNhbGxiYWNrXSlcbiAgICByZXR1cm4gcmVmXG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXJzIGNhbGxiYWNrcyBmb3IgY29ubmVjdGlvbiBjbG9zZSBldmVudHNcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcbiAgICovXG4gIG9uQ2xvc2UoY2FsbGJhY2spe1xuICAgIGxldCByZWYgPSB0aGlzLm1ha2VSZWYoKVxuICAgIHRoaXMuc3RhdGVDaGFuZ2VDYWxsYmFja3MuY2xvc2UucHVzaChbcmVmLCBjYWxsYmFja10pXG4gICAgcmV0dXJuIHJlZlxuICB9XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVycyBjYWxsYmFja3MgZm9yIGNvbm5lY3Rpb24gZXJyb3IgZXZlbnRzXG4gICAqXG4gICAqIEBleGFtcGxlIHNvY2tldC5vbkVycm9yKGZ1bmN0aW9uKGVycm9yKXsgYWxlcnQoXCJBbiBlcnJvciBvY2N1cnJlZFwiKSB9KVxuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICAgKi9cbiAgb25FcnJvcihjYWxsYmFjayl7XG4gICAgbGV0IHJlZiA9IHRoaXMubWFrZVJlZigpXG4gICAgdGhpcy5zdGF0ZUNoYW5nZUNhbGxiYWNrcy5lcnJvci5wdXNoKFtyZWYsIGNhbGxiYWNrXSlcbiAgICByZXR1cm4gcmVmXG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXJzIGNhbGxiYWNrcyBmb3IgY29ubmVjdGlvbiBtZXNzYWdlIGV2ZW50c1xuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICAgKi9cbiAgb25NZXNzYWdlKGNhbGxiYWNrKXtcbiAgICBsZXQgcmVmID0gdGhpcy5tYWtlUmVmKClcbiAgICB0aGlzLnN0YXRlQ2hhbmdlQ2FsbGJhY2tzLm1lc3NhZ2UucHVzaChbcmVmLCBjYWxsYmFja10pXG4gICAgcmV0dXJuIHJlZlxuICB9XG5cbiAgLyoqXG4gICAqIFBpbmdzIHRoZSBzZXJ2ZXIgYW5kIGludm9rZXMgdGhlIGNhbGxiYWNrIHdpdGggdGhlIFJUVCBpbiBtaWxsaXNlY29uZHNcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcbiAgICpcbiAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBwaW5nIHdhcyBwdXNoZWQgb3IgZmFsc2UgaWYgdW5hYmxlIHRvIGJlIHB1c2hlZC5cbiAgICovXG4gIHBpbmcoY2FsbGJhY2spe1xuICAgIGlmKCF0aGlzLmlzQ29ubmVjdGVkKCkpeyByZXR1cm4gZmFsc2UgfVxuICAgIGxldCByZWYgPSB0aGlzLm1ha2VSZWYoKVxuICAgIGxldCBzdGFydFRpbWUgPSBEYXRlLm5vdygpXG4gICAgdGhpcy5wdXNoKHt0b3BpYzogXCJwaG9lbml4XCIsIGV2ZW50OiBcImhlYXJ0YmVhdFwiLCBwYXlsb2FkOiB7fSwgcmVmOiByZWZ9KVxuICAgIGxldCBvbk1zZ1JlZiA9IHRoaXMub25NZXNzYWdlKG1zZyA9PiB7XG4gICAgICBpZihtc2cucmVmID09PSByZWYpe1xuICAgICAgICB0aGlzLm9mZihbb25Nc2dSZWZdKVxuICAgICAgICBjYWxsYmFjayhEYXRlLm5vdygpIC0gc3RhcnRUaW1lKVxuICAgICAgfVxuICAgIH0pXG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cblxuICBjbGVhckhlYXJ0YmVhdHMoKXtcbiAgICBjbGVhclRpbWVvdXQodGhpcy5oZWFydGJlYXRUaW1lcilcbiAgICBjbGVhclRpbWVvdXQodGhpcy5oZWFydGJlYXRUaW1lb3V0VGltZXIpXG4gIH1cblxuICBvbkNvbm5PcGVuKCl7XG4gICAgaWYodGhpcy5oYXNMb2dnZXIoKSkgdGhpcy5sb2coXCJ0cmFuc3BvcnRcIiwgYGNvbm5lY3RlZCB0byAke3RoaXMuZW5kUG9pbnRVUkwoKX1gKVxuICAgIHRoaXMuY2xvc2VXYXNDbGVhbiA9IGZhbHNlXG4gICAgdGhpcy5lc3RhYmxpc2hlZENvbm5lY3Rpb25zKytcbiAgICB0aGlzLmZsdXNoU2VuZEJ1ZmZlcigpXG4gICAgdGhpcy5yZWNvbm5lY3RUaW1lci5yZXNldCgpXG4gICAgdGhpcy5yZXNldEhlYXJ0YmVhdCgpXG4gICAgdGhpcy5zdGF0ZUNoYW5nZUNhbGxiYWNrcy5vcGVuLmZvckVhY2goKFssIGNhbGxiYWNrXSkgPT4gY2FsbGJhY2soKSlcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cblxuICBoZWFydGJlYXRUaW1lb3V0KCl7XG4gICAgaWYodGhpcy5wZW5kaW5nSGVhcnRiZWF0UmVmKXtcbiAgICAgIHRoaXMucGVuZGluZ0hlYXJ0YmVhdFJlZiA9IG51bGxcbiAgICAgIGlmKHRoaXMuaGFzTG9nZ2VyKCkpeyB0aGlzLmxvZyhcInRyYW5zcG9ydFwiLCBcImhlYXJ0YmVhdCB0aW1lb3V0LiBBdHRlbXB0aW5nIHRvIHJlLWVzdGFibGlzaCBjb25uZWN0aW9uXCIpIH1cbiAgICAgIHRoaXMudHJpZ2dlckNoYW5FcnJvcigpXG4gICAgICB0aGlzLmNsb3NlV2FzQ2xlYW4gPSBmYWxzZVxuICAgICAgdGhpcy50ZWFyZG93bigoKSA9PiB0aGlzLnJlY29ubmVjdFRpbWVyLnNjaGVkdWxlVGltZW91dCgpLCBXU19DTE9TRV9OT1JNQUwsIFwiaGVhcnRiZWF0IHRpbWVvdXRcIilcbiAgICB9XG4gIH1cblxuICByZXNldEhlYXJ0YmVhdCgpe1xuICAgIGlmKHRoaXMuY29ubiAmJiB0aGlzLmNvbm4uc2tpcEhlYXJ0YmVhdCl7IHJldHVybiB9XG4gICAgdGhpcy5wZW5kaW5nSGVhcnRiZWF0UmVmID0gbnVsbFxuICAgIHRoaXMuY2xlYXJIZWFydGJlYXRzKClcbiAgICB0aGlzLmhlYXJ0YmVhdFRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB0aGlzLnNlbmRIZWFydGJlYXQoKSwgdGhpcy5oZWFydGJlYXRJbnRlcnZhbE1zKVxuICB9XG5cbiAgdGVhcmRvd24oY2FsbGJhY2ssIGNvZGUsIHJlYXNvbil7XG4gICAgaWYoIXRoaXMuY29ubil7XG4gICAgICByZXR1cm4gY2FsbGJhY2sgJiYgY2FsbGJhY2soKVxuICAgIH1cblxuICAgIHRoaXMud2FpdEZvckJ1ZmZlckRvbmUoKCkgPT4ge1xuICAgICAgaWYodGhpcy5jb25uKXtcbiAgICAgICAgaWYoY29kZSl7IHRoaXMuY29ubi5jbG9zZShjb2RlLCByZWFzb24gfHwgXCJcIikgfSBlbHNlIHsgdGhpcy5jb25uLmNsb3NlKCkgfVxuICAgICAgfVxuXG4gICAgICB0aGlzLndhaXRGb3JTb2NrZXRDbG9zZWQoKCkgPT4ge1xuICAgICAgICBpZih0aGlzLmNvbm4pe1xuICAgICAgICAgIHRoaXMuY29ubi5vbm9wZW4gPSBmdW5jdGlvbiAoKXsgfSAvLyBub29wXG4gICAgICAgICAgdGhpcy5jb25uLm9uZXJyb3IgPSBmdW5jdGlvbiAoKXsgfSAvLyBub29wXG4gICAgICAgICAgdGhpcy5jb25uLm9ubWVzc2FnZSA9IGZ1bmN0aW9uICgpeyB9IC8vIG5vb3BcbiAgICAgICAgICB0aGlzLmNvbm4ub25jbG9zZSA9IGZ1bmN0aW9uICgpeyB9IC8vIG5vb3BcbiAgICAgICAgICB0aGlzLmNvbm4gPSBudWxsXG4gICAgICAgIH1cblxuICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjaygpXG4gICAgICB9KVxuICAgIH0pXG4gIH1cblxuICB3YWl0Rm9yQnVmZmVyRG9uZShjYWxsYmFjaywgdHJpZXMgPSAxKXtcbiAgICBpZih0cmllcyA9PT0gNSB8fCAhdGhpcy5jb25uIHx8ICF0aGlzLmNvbm4uYnVmZmVyZWRBbW91bnQpe1xuICAgICAgY2FsbGJhY2soKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLndhaXRGb3JCdWZmZXJEb25lKGNhbGxiYWNrLCB0cmllcyArIDEpXG4gICAgfSwgMTUwICogdHJpZXMpXG4gIH1cblxuICB3YWl0Rm9yU29ja2V0Q2xvc2VkKGNhbGxiYWNrLCB0cmllcyA9IDEpe1xuICAgIGlmKHRyaWVzID09PSA1IHx8ICF0aGlzLmNvbm4gfHwgdGhpcy5jb25uLnJlYWR5U3RhdGUgPT09IFNPQ0tFVF9TVEFURVMuY2xvc2VkKXtcbiAgICAgIGNhbGxiYWNrKClcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy53YWl0Rm9yU29ja2V0Q2xvc2VkKGNhbGxiYWNrLCB0cmllcyArIDEpXG4gICAgfSwgMTUwICogdHJpZXMpXG4gIH1cblxuICBvbkNvbm5DbG9zZShldmVudCl7XG4gICAgbGV0IGNsb3NlQ29kZSA9IGV2ZW50ICYmIGV2ZW50LmNvZGVcbiAgICBpZih0aGlzLmhhc0xvZ2dlcigpKSB0aGlzLmxvZyhcInRyYW5zcG9ydFwiLCBcImNsb3NlXCIsIGV2ZW50KVxuICAgIHRoaXMudHJpZ2dlckNoYW5FcnJvcigpXG4gICAgdGhpcy5jbGVhckhlYXJ0YmVhdHMoKVxuICAgIGlmKCF0aGlzLmNsb3NlV2FzQ2xlYW4gJiYgY2xvc2VDb2RlICE9PSAxMDAwKXtcbiAgICAgIHRoaXMucmVjb25uZWN0VGltZXIuc2NoZWR1bGVUaW1lb3V0KClcbiAgICB9XG4gICAgdGhpcy5zdGF0ZUNoYW5nZUNhbGxiYWNrcy5jbG9zZS5mb3JFYWNoKChbLCBjYWxsYmFja10pID0+IGNhbGxiYWNrKGV2ZW50KSlcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgb25Db25uRXJyb3IoZXJyb3Ipe1xuICAgIGlmKHRoaXMuaGFzTG9nZ2VyKCkpIHRoaXMubG9nKFwidHJhbnNwb3J0XCIsIGVycm9yKVxuICAgIGxldCB0cmFuc3BvcnRCZWZvcmUgPSB0aGlzLnRyYW5zcG9ydFxuICAgIGxldCBlc3RhYmxpc2hlZEJlZm9yZSA9IHRoaXMuZXN0YWJsaXNoZWRDb25uZWN0aW9uc1xuICAgIHRoaXMuc3RhdGVDaGFuZ2VDYWxsYmFja3MuZXJyb3IuZm9yRWFjaCgoWywgY2FsbGJhY2tdKSA9PiB7XG4gICAgICBjYWxsYmFjayhlcnJvciwgdHJhbnNwb3J0QmVmb3JlLCBlc3RhYmxpc2hlZEJlZm9yZSlcbiAgICB9KVxuICAgIGlmKHRyYW5zcG9ydEJlZm9yZSA9PT0gdGhpcy50cmFuc3BvcnQgfHwgZXN0YWJsaXNoZWRCZWZvcmUgPiAwKXtcbiAgICAgIHRoaXMudHJpZ2dlckNoYW5FcnJvcigpXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0cmlnZ2VyQ2hhbkVycm9yKCl7XG4gICAgdGhpcy5jaGFubmVscy5mb3JFYWNoKGNoYW5uZWwgPT4ge1xuICAgICAgaWYoIShjaGFubmVsLmlzRXJyb3JlZCgpIHx8IGNoYW5uZWwuaXNMZWF2aW5nKCkgfHwgY2hhbm5lbC5pc0Nsb3NlZCgpKSl7XG4gICAgICAgIGNoYW5uZWwudHJpZ2dlcihDSEFOTkVMX0VWRU5UUy5lcnJvcilcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAqL1xuICBjb25uZWN0aW9uU3RhdGUoKXtcbiAgICBzd2l0Y2godGhpcy5jb25uICYmIHRoaXMuY29ubi5yZWFkeVN0YXRlKXtcbiAgICAgIGNhc2UgU09DS0VUX1NUQVRFUy5jb25uZWN0aW5nOiByZXR1cm4gXCJjb25uZWN0aW5nXCJcbiAgICAgIGNhc2UgU09DS0VUX1NUQVRFUy5vcGVuOiByZXR1cm4gXCJvcGVuXCJcbiAgICAgIGNhc2UgU09DS0VUX1NUQVRFUy5jbG9zaW5nOiByZXR1cm4gXCJjbG9zaW5nXCJcbiAgICAgIGRlZmF1bHQ6IHJldHVybiBcImNsb3NlZFwiXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgKi9cbiAgaXNDb25uZWN0ZWQoKXsgcmV0dXJuIHRoaXMuY29ubmVjdGlvblN0YXRlKCkgPT09IFwib3BlblwiIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICpcbiAgICogQHBhcmFtIHtDaGFubmVsfVxuICAgKi9cbiAgcmVtb3ZlKGNoYW5uZWwpe1xuICAgIHRoaXMub2ZmKGNoYW5uZWwuc3RhdGVDaGFuZ2VSZWZzKVxuICAgIHRoaXMuY2hhbm5lbHMgPSB0aGlzLmNoYW5uZWxzLmZpbHRlcihjID0+IGMuam9pblJlZigpICE9PSBjaGFubmVsLmpvaW5SZWYoKSlcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIGBvbk9wZW5gLCBgb25DbG9zZWAsIGBvbkVycm9yLGAgYW5kIGBvbk1lc3NhZ2VgIHJlZ2lzdHJhdGlvbnMuXG4gICAqXG4gICAqIEBwYXJhbSB7cmVmc30gLSBsaXN0IG9mIHJlZnMgcmV0dXJuZWQgYnkgY2FsbHMgdG9cbiAgICogICAgICAgICAgICAgICAgIGBvbk9wZW5gLCBgb25DbG9zZWAsIGBvbkVycm9yLGAgYW5kIGBvbk1lc3NhZ2VgXG4gICAqL1xuICBvZmYocmVmcyl7XG4gICAgZm9yKGxldCBrZXkgaW4gdGhpcy5zdGF0ZUNoYW5nZUNhbGxiYWNrcyl7XG4gICAgICB0aGlzLnN0YXRlQ2hhbmdlQ2FsbGJhY2tzW2tleV0gPSB0aGlzLnN0YXRlQ2hhbmdlQ2FsbGJhY2tzW2tleV0uZmlsdGVyKChbcmVmXSkgPT4ge1xuICAgICAgICByZXR1cm4gcmVmcy5pbmRleE9mKHJlZikgPT09IC0xXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWF0ZXMgYSBuZXcgY2hhbm5lbCBmb3IgdGhlIGdpdmVuIHRvcGljXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0b3BpY1xuICAgKiBAcGFyYW0ge09iamVjdH0gY2hhblBhcmFtcyAtIFBhcmFtZXRlcnMgZm9yIHRoZSBjaGFubmVsXG4gICAqIEByZXR1cm5zIHtDaGFubmVsfVxuICAgKi9cbiAgY2hhbm5lbCh0b3BpYywgY2hhblBhcmFtcyA9IHt9KXtcbiAgICBsZXQgY2hhbiA9IG5ldyBDaGFubmVsKHRvcGljLCBjaGFuUGFyYW1zLCB0aGlzKVxuICAgIHRoaXMuY2hhbm5lbHMucHVzaChjaGFuKVxuICAgIHJldHVybiBjaGFuXG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtPYmplY3R9IGRhdGFcbiAgICovXG4gIHB1c2goZGF0YSl7XG4gICAgaWYodGhpcy5oYXNMb2dnZXIoKSl7XG4gICAgICBsZXQge3RvcGljLCBldmVudCwgcGF5bG9hZCwgcmVmLCBqb2luX3JlZn0gPSBkYXRhXG4gICAgICB0aGlzLmxvZyhcInB1c2hcIiwgYCR7dG9waWN9ICR7ZXZlbnR9ICgke2pvaW5fcmVmfSwgJHtyZWZ9KWAsIHBheWxvYWQpXG4gICAgfVxuXG4gICAgaWYodGhpcy5pc0Nvbm5lY3RlZCgpKXtcbiAgICAgIHRoaXMuZW5jb2RlKGRhdGEsIHJlc3VsdCA9PiB0aGlzLmNvbm4uc2VuZChyZXN1bHQpKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNlbmRCdWZmZXIucHVzaCgoKSA9PiB0aGlzLmVuY29kZShkYXRhLCByZXN1bHQgPT4gdGhpcy5jb25uLnNlbmQocmVzdWx0KSkpXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgbmV4dCBtZXNzYWdlIHJlZiwgYWNjb3VudGluZyBmb3Igb3ZlcmZsb3dzXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAqL1xuICBtYWtlUmVmKCl7XG4gICAgbGV0IG5ld1JlZiA9IHRoaXMucmVmICsgMVxuICAgIGlmKG5ld1JlZiA9PT0gdGhpcy5yZWYpeyB0aGlzLnJlZiA9IDAgfSBlbHNlIHsgdGhpcy5yZWYgPSBuZXdSZWYgfVxuXG4gICAgcmV0dXJuIHRoaXMucmVmLnRvU3RyaW5nKClcbiAgfVxuXG4gIHNlbmRIZWFydGJlYXQoKXtcbiAgICBpZih0aGlzLnBlbmRpbmdIZWFydGJlYXRSZWYgJiYgIXRoaXMuaXNDb25uZWN0ZWQoKSl7IHJldHVybiB9XG4gICAgdGhpcy5wZW5kaW5nSGVhcnRiZWF0UmVmID0gdGhpcy5tYWtlUmVmKClcbiAgICB0aGlzLnB1c2goe3RvcGljOiBcInBob2VuaXhcIiwgZXZlbnQ6IFwiaGVhcnRiZWF0XCIsIHBheWxvYWQ6IHt9LCByZWY6IHRoaXMucGVuZGluZ0hlYXJ0YmVhdFJlZn0pXG4gICAgdGhpcy5oZWFydGJlYXRUaW1lb3V0VGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHRoaXMuaGVhcnRiZWF0VGltZW91dCgpLCB0aGlzLmhlYXJ0YmVhdEludGVydmFsTXMpXG4gIH1cblxuICBmbHVzaFNlbmRCdWZmZXIoKXtcbiAgICBpZih0aGlzLmlzQ29ubmVjdGVkKCkgJiYgdGhpcy5zZW5kQnVmZmVyLmxlbmd0aCA+IDApe1xuICAgICAgdGhpcy5zZW5kQnVmZmVyLmZvckVhY2goY2FsbGJhY2sgPT4gY2FsbGJhY2soKSlcbiAgICAgIHRoaXMuc2VuZEJ1ZmZlciA9IFtdXG4gICAgfVxuICB9XG5cbiAgb25Db25uTWVzc2FnZShyYXdNZXNzYWdlKXtcbiAgICB0aGlzLmRlY29kZShyYXdNZXNzYWdlLmRhdGEsIG1zZyA9PiB7XG4gICAgICBsZXQge3RvcGljLCBldmVudCwgcGF5bG9hZCwgcmVmLCBqb2luX3JlZn0gPSBtc2dcbiAgICAgIGlmKHJlZiAmJiByZWYgPT09IHRoaXMucGVuZGluZ0hlYXJ0YmVhdFJlZil7XG4gICAgICAgIHRoaXMuY2xlYXJIZWFydGJlYXRzKClcbiAgICAgICAgdGhpcy5wZW5kaW5nSGVhcnRiZWF0UmVmID0gbnVsbFxuICAgICAgICB0aGlzLmhlYXJ0YmVhdFRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB0aGlzLnNlbmRIZWFydGJlYXQoKSwgdGhpcy5oZWFydGJlYXRJbnRlcnZhbE1zKVxuICAgICAgfVxuXG4gICAgICBpZih0aGlzLmhhc0xvZ2dlcigpKSB0aGlzLmxvZyhcInJlY2VpdmVcIiwgYCR7cGF5bG9hZC5zdGF0dXMgfHwgXCJcIn0gJHt0b3BpY30gJHtldmVudH0gJHtyZWYgJiYgXCIoXCIgKyByZWYgKyBcIilcIiB8fCBcIlwifWAsIHBheWxvYWQpXG5cbiAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCB0aGlzLmNoYW5uZWxzLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgY29uc3QgY2hhbm5lbCA9IHRoaXMuY2hhbm5lbHNbaV1cbiAgICAgICAgaWYoIWNoYW5uZWwuaXNNZW1iZXIodG9waWMsIGV2ZW50LCBwYXlsb2FkLCBqb2luX3JlZikpeyBjb250aW51ZSB9XG4gICAgICAgIGNoYW5uZWwudHJpZ2dlcihldmVudCwgcGF5bG9hZCwgcmVmLCBqb2luX3JlZilcbiAgICAgIH1cblxuICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMuc3RhdGVDaGFuZ2VDYWxsYmFja3MubWVzc2FnZS5sZW5ndGg7IGkrKyl7XG4gICAgICAgIGxldCBbLCBjYWxsYmFja10gPSB0aGlzLnN0YXRlQ2hhbmdlQ2FsbGJhY2tzLm1lc3NhZ2VbaV1cbiAgICAgICAgY2FsbGJhY2sobXNnKVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICBsZWF2ZU9wZW5Ub3BpYyh0b3BpYyl7XG4gICAgbGV0IGR1cENoYW5uZWwgPSB0aGlzLmNoYW5uZWxzLmZpbmQoYyA9PiBjLnRvcGljID09PSB0b3BpYyAmJiAoYy5pc0pvaW5lZCgpIHx8IGMuaXNKb2luaW5nKCkpKVxuICAgIGlmKGR1cENoYW5uZWwpe1xuICAgICAgaWYodGhpcy5oYXNMb2dnZXIoKSkgdGhpcy5sb2coXCJ0cmFuc3BvcnRcIiwgYGxlYXZpbmcgZHVwbGljYXRlIHRvcGljIFwiJHt0b3BpY31cImApXG4gICAgICBkdXBDaGFubmVsLmxlYXZlKClcbiAgICB9XG4gIH1cbn1cbiIsICJleHBvcnQgY29uc3QgQ09OU0VDVVRJVkVfUkVMT0FEUyA9IFwiY29uc2VjdXRpdmUtcmVsb2Fkc1wiXG5leHBvcnQgY29uc3QgTUFYX1JFTE9BRFMgPSAxMFxuZXhwb3J0IGNvbnN0IFJFTE9BRF9KSVRURVJfTUlOID0gNTAwMFxuZXhwb3J0IGNvbnN0IFJFTE9BRF9KSVRURVJfTUFYID0gMTAwMDBcbmV4cG9ydCBjb25zdCBGQUlMU0FGRV9KSVRURVIgPSAzMDAwMFxuZXhwb3J0IGNvbnN0IFBIWF9FVkVOVF9DTEFTU0VTID0gW1xuICBcInBoeC1jbGljay1sb2FkaW5nXCIsIFwicGh4LWNoYW5nZS1sb2FkaW5nXCIsIFwicGh4LXN1Ym1pdC1sb2FkaW5nXCIsXG4gIFwicGh4LWtleWRvd24tbG9hZGluZ1wiLCBcInBoeC1rZXl1cC1sb2FkaW5nXCIsIFwicGh4LWJsdXItbG9hZGluZ1wiLCBcInBoeC1mb2N1cy1sb2FkaW5nXCJcbl1cbmV4cG9ydCBjb25zdCBQSFhfQ09NUE9ORU5UID0gXCJkYXRhLXBoeC1jb21wb25lbnRcIlxuZXhwb3J0IGNvbnN0IFBIWF9MSVZFX0xJTksgPSBcImRhdGEtcGh4LWxpbmtcIlxuZXhwb3J0IGNvbnN0IFBIWF9UUkFDS19TVEFUSUMgPSBcInRyYWNrLXN0YXRpY1wiXG5leHBvcnQgY29uc3QgUEhYX0xJTktfU1RBVEUgPSBcImRhdGEtcGh4LWxpbmstc3RhdGVcIlxuZXhwb3J0IGNvbnN0IFBIWF9SRUYgPSBcImRhdGEtcGh4LXJlZlwiXG5leHBvcnQgY29uc3QgUEhYX1JFRl9TUkMgPSBcImRhdGEtcGh4LXJlZi1zcmNcIlxuZXhwb3J0IGNvbnN0IFBIWF9UUkFDS19VUExPQURTID0gXCJ0cmFjay11cGxvYWRzXCJcbmV4cG9ydCBjb25zdCBQSFhfVVBMT0FEX1JFRiA9IFwiZGF0YS1waHgtdXBsb2FkLXJlZlwiXG5leHBvcnQgY29uc3QgUEhYX1BSRUZMSUdIVEVEX1JFRlMgPSBcImRhdGEtcGh4LXByZWZsaWdodGVkLXJlZnNcIlxuZXhwb3J0IGNvbnN0IFBIWF9ET05FX1JFRlMgPSBcImRhdGEtcGh4LWRvbmUtcmVmc1wiXG5leHBvcnQgY29uc3QgUEhYX0RST1BfVEFSR0VUID0gXCJkcm9wLXRhcmdldFwiXG5leHBvcnQgY29uc3QgUEhYX0FDVElWRV9FTlRSWV9SRUZTID0gXCJkYXRhLXBoeC1hY3RpdmUtcmVmc1wiXG5leHBvcnQgY29uc3QgUEhYX0xJVkVfRklMRV9VUERBVEVEID0gXCJwaHg6bGl2ZS1maWxlOnVwZGF0ZWRcIlxuZXhwb3J0IGNvbnN0IFBIWF9TS0lQID0gXCJkYXRhLXBoeC1za2lwXCJcbmV4cG9ydCBjb25zdCBQSFhfUFJVTkUgPSBcImRhdGEtcGh4LXBydW5lXCJcbmV4cG9ydCBjb25zdCBQSFhfUEFHRV9MT0FESU5HID0gXCJwYWdlLWxvYWRpbmdcIlxuZXhwb3J0IGNvbnN0IFBIWF9DT05ORUNURURfQ0xBU1MgPSBcInBoeC1jb25uZWN0ZWRcIlxuZXhwb3J0IGNvbnN0IFBIWF9ESVNDT05ORUNURURfQ0xBU1MgPSBcInBoeC1sb2FkaW5nXCJcbmV4cG9ydCBjb25zdCBQSFhfTk9fRkVFREJBQ0tfQ0xBU1MgPSBcInBoeC1uby1mZWVkYmFja1wiXG5leHBvcnQgY29uc3QgUEhYX0VSUk9SX0NMQVNTID0gXCJwaHgtZXJyb3JcIlxuZXhwb3J0IGNvbnN0IFBIWF9QQVJFTlRfSUQgPSBcImRhdGEtcGh4LXBhcmVudC1pZFwiXG5leHBvcnQgY29uc3QgUEhYX01BSU4gPSBcImRhdGEtcGh4LW1haW5cIlxuZXhwb3J0IGNvbnN0IFBIWF9ST09UX0lEID0gXCJkYXRhLXBoeC1yb290LWlkXCJcbmV4cG9ydCBjb25zdCBQSFhfVFJJR0dFUl9BQ1RJT04gPSBcInRyaWdnZXItYWN0aW9uXCJcbmV4cG9ydCBjb25zdCBQSFhfRkVFREJBQ0tfRk9SID0gXCJmZWVkYmFjay1mb3JcIlxuZXhwb3J0IGNvbnN0IFBIWF9IQVNfRk9DVVNFRCA9IFwicGh4LWhhcy1mb2N1c2VkXCJcbmV4cG9ydCBjb25zdCBGT0NVU0FCTEVfSU5QVVRTID0gW1widGV4dFwiLCBcInRleHRhcmVhXCIsIFwibnVtYmVyXCIsIFwiZW1haWxcIiwgXCJwYXNzd29yZFwiLCBcInNlYXJjaFwiLCBcInRlbFwiLCBcInVybFwiLCBcImRhdGVcIiwgXCJ0aW1lXCIsIFwiZGF0ZXRpbWUtbG9jYWxcIiwgXCJjb2xvclwiLCBcInJhbmdlXCJdXG5leHBvcnQgY29uc3QgQ0hFQ0tBQkxFX0lOUFVUUyA9IFtcImNoZWNrYm94XCIsIFwicmFkaW9cIl1cbmV4cG9ydCBjb25zdCBQSFhfSEFTX1NVQk1JVFRFRCA9IFwicGh4LWhhcy1zdWJtaXR0ZWRcIlxuZXhwb3J0IGNvbnN0IFBIWF9TRVNTSU9OID0gXCJkYXRhLXBoeC1zZXNzaW9uXCJcbmV4cG9ydCBjb25zdCBQSFhfVklFV19TRUxFQ1RPUiA9IGBbJHtQSFhfU0VTU0lPTn1dYFxuZXhwb3J0IGNvbnN0IFBIWF9TVElDS1kgPSBcImRhdGEtcGh4LXN0aWNreVwiXG5leHBvcnQgY29uc3QgUEhYX1NUQVRJQyA9IFwiZGF0YS1waHgtc3RhdGljXCJcbmV4cG9ydCBjb25zdCBQSFhfUkVBRE9OTFkgPSBcImRhdGEtcGh4LXJlYWRvbmx5XCJcbmV4cG9ydCBjb25zdCBQSFhfRElTQUJMRUQgPSBcImRhdGEtcGh4LWRpc2FibGVkXCJcbmV4cG9ydCBjb25zdCBQSFhfRElTQUJMRV9XSVRIID0gXCJkaXNhYmxlLXdpdGhcIlxuZXhwb3J0IGNvbnN0IFBIWF9ESVNBQkxFX1dJVEhfUkVTVE9SRSA9IFwiZGF0YS1waHgtZGlzYWJsZS13aXRoLXJlc3RvcmVcIlxuZXhwb3J0IGNvbnN0IFBIWF9IT09LID0gXCJob29rXCJcbmV4cG9ydCBjb25zdCBQSFhfREVCT1VOQ0UgPSBcImRlYm91bmNlXCJcbmV4cG9ydCBjb25zdCBQSFhfVEhST1RUTEUgPSBcInRocm90dGxlXCJcbmV4cG9ydCBjb25zdCBQSFhfVVBEQVRFID0gXCJ1cGRhdGVcIlxuZXhwb3J0IGNvbnN0IFBIWF9TVFJFQU0gPSBcInN0cmVhbVwiXG5leHBvcnQgY29uc3QgUEhYX0tFWSA9IFwia2V5XCJcbmV4cG9ydCBjb25zdCBQSFhfUFJJVkFURSA9IFwicGh4UHJpdmF0ZVwiXG5leHBvcnQgY29uc3QgUEhYX0FVVE9fUkVDT1ZFUiA9IFwiYXV0by1yZWNvdmVyXCJcbmV4cG9ydCBjb25zdCBQSFhfTFZfREVCVUcgPSBcInBoeDpsaXZlLXNvY2tldDpkZWJ1Z1wiXG5leHBvcnQgY29uc3QgUEhYX0xWX1BST0ZJTEUgPSBcInBoeDpsaXZlLXNvY2tldDpwcm9maWxpbmdcIlxuZXhwb3J0IGNvbnN0IFBIWF9MVl9MQVRFTkNZX1NJTSA9IFwicGh4OmxpdmUtc29ja2V0OmxhdGVuY3ktc2ltXCJcbmV4cG9ydCBjb25zdCBQSFhfUFJPR1JFU1MgPSBcInByb2dyZXNzXCJcbmV4cG9ydCBjb25zdCBQSFhfTU9VTlRFRCA9IFwibW91bnRlZFwiXG5leHBvcnQgY29uc3QgTE9BREVSX1RJTUVPVVQgPSAxXG5leHBvcnQgY29uc3QgQkVGT1JFX1VOTE9BRF9MT0FERVJfVElNRU9VVCA9IDIwMFxuZXhwb3J0IGNvbnN0IEJJTkRJTkdfUFJFRklYID0gXCJwaHgtXCJcbmV4cG9ydCBjb25zdCBQVVNIX1RJTUVPVVQgPSAzMDAwMFxuZXhwb3J0IGNvbnN0IExJTktfSEVBREVSID0gXCJ4LXJlcXVlc3RlZC13aXRoXCJcbmV4cG9ydCBjb25zdCBSRVNQT05TRV9VUkxfSEVBREVSID0gXCJ4LXJlc3BvbnNlLXVybFwiXG5leHBvcnQgY29uc3QgREVCT1VOQ0VfVFJJR0dFUiA9IFwiZGVib3VuY2UtdHJpZ2dlclwiXG5leHBvcnQgY29uc3QgVEhST1RUTEVEID0gXCJ0aHJvdHRsZWRcIlxuZXhwb3J0IGNvbnN0IERFQk9VTkNFX1BSRVZfS0VZID0gXCJkZWJvdW5jZS1wcmV2LWtleVwiXG5leHBvcnQgY29uc3QgREVGQVVMVFMgPSB7XG4gIGRlYm91bmNlOiAzMDAsXG4gIHRocm90dGxlOiAzMDBcbn1cblxuLy8gUmVuZGVyZWRcbmV4cG9ydCBjb25zdCBEWU5BTUlDUyA9IFwiZFwiXG5leHBvcnQgY29uc3QgU1RBVElDID0gXCJzXCJcbmV4cG9ydCBjb25zdCBDT01QT05FTlRTID0gXCJjXCJcbmV4cG9ydCBjb25zdCBFVkVOVFMgPSBcImVcIlxuZXhwb3J0IGNvbnN0IFJFUExZID0gXCJyXCJcbmV4cG9ydCBjb25zdCBUSVRMRSA9IFwidFwiXG5leHBvcnQgY29uc3QgVEVNUExBVEVTID0gXCJwXCJcbmV4cG9ydCBjb25zdCBTVFJFQU0gPSBcInN0cmVhbVwiXG4iLCAiaW1wb3J0IHtcbiAgbG9nRXJyb3Jcbn0gZnJvbSBcIi4vdXRpbHNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBFbnRyeVVwbG9hZGVyIHtcbiAgY29uc3RydWN0b3IoZW50cnksIGNodW5rU2l6ZSwgbGl2ZVNvY2tldCl7XG4gICAgdGhpcy5saXZlU29ja2V0ID0gbGl2ZVNvY2tldFxuICAgIHRoaXMuZW50cnkgPSBlbnRyeVxuICAgIHRoaXMub2Zmc2V0ID0gMFxuICAgIHRoaXMuY2h1bmtTaXplID0gY2h1bmtTaXplXG4gICAgdGhpcy5jaHVua1RpbWVyID0gbnVsbFxuICAgIHRoaXMudXBsb2FkQ2hhbm5lbCA9IGxpdmVTb2NrZXQuY2hhbm5lbChgbHZ1OiR7ZW50cnkucmVmfWAsIHt0b2tlbjogZW50cnkubWV0YWRhdGEoKX0pXG4gIH1cblxuICBlcnJvcihyZWFzb24pe1xuICAgIGNsZWFyVGltZW91dCh0aGlzLmNodW5rVGltZXIpXG4gICAgdGhpcy51cGxvYWRDaGFubmVsLmxlYXZlKClcbiAgICB0aGlzLmVudHJ5LmVycm9yKHJlYXNvbilcbiAgfVxuXG4gIHVwbG9hZCgpe1xuICAgIHRoaXMudXBsb2FkQ2hhbm5lbC5vbkVycm9yKHJlYXNvbiA9PiB0aGlzLmVycm9yKHJlYXNvbikpXG4gICAgdGhpcy51cGxvYWRDaGFubmVsLmpvaW4oKVxuICAgICAgLnJlY2VpdmUoXCJva1wiLCBfZGF0YSA9PiB0aGlzLnJlYWROZXh0Q2h1bmsoKSlcbiAgICAgIC5yZWNlaXZlKFwiZXJyb3JcIiwgcmVhc29uID0+IHRoaXMuZXJyb3IocmVhc29uKSlcbiAgfVxuXG4gIGlzRG9uZSgpeyByZXR1cm4gdGhpcy5vZmZzZXQgPj0gdGhpcy5lbnRyeS5maWxlLnNpemUgfVxuXG4gIHJlYWROZXh0Q2h1bmsoKXtcbiAgICBsZXQgcmVhZGVyID0gbmV3IHdpbmRvdy5GaWxlUmVhZGVyKClcbiAgICBsZXQgYmxvYiA9IHRoaXMuZW50cnkuZmlsZS5zbGljZSh0aGlzLm9mZnNldCwgdGhpcy5jaHVua1NpemUgKyB0aGlzLm9mZnNldClcbiAgICByZWFkZXIub25sb2FkID0gKGUpID0+IHtcbiAgICAgIGlmKGUudGFyZ2V0LmVycm9yID09PSBudWxsKXtcbiAgICAgICAgdGhpcy5vZmZzZXQgKz0gZS50YXJnZXQucmVzdWx0LmJ5dGVMZW5ndGhcbiAgICAgICAgdGhpcy5wdXNoQ2h1bmsoZS50YXJnZXQucmVzdWx0KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGxvZ0Vycm9yKFwiUmVhZCBlcnJvcjogXCIgKyBlLnRhcmdldC5lcnJvcilcbiAgICAgIH1cbiAgICB9XG4gICAgcmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKGJsb2IpXG4gIH1cblxuICBwdXNoQ2h1bmsoY2h1bmspe1xuICAgIGlmKCF0aGlzLnVwbG9hZENoYW5uZWwuaXNKb2luZWQoKSl7IHJldHVybiB9XG4gICAgdGhpcy51cGxvYWRDaGFubmVsLnB1c2goXCJjaHVua1wiLCBjaHVuaylcbiAgICAgIC5yZWNlaXZlKFwib2tcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLmVudHJ5LnByb2dyZXNzKCh0aGlzLm9mZnNldCAvIHRoaXMuZW50cnkuZmlsZS5zaXplKSAqIDEwMClcbiAgICAgICAgaWYoIXRoaXMuaXNEb25lKCkpe1xuICAgICAgICAgIHRoaXMuY2h1bmtUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4gdGhpcy5yZWFkTmV4dENodW5rKCksIHRoaXMubGl2ZVNvY2tldC5nZXRMYXRlbmN5U2ltKCkgfHwgMClcbiAgICAgICAgfVxuICAgICAgfSlcbiAgfVxufVxuIiwgImltcG9ydCB7XG4gIFBIWF9WSUVXX1NFTEVDVE9SXG59IGZyb20gXCIuL2NvbnN0YW50c1wiXG5cbmltcG9ydCBFbnRyeVVwbG9hZGVyIGZyb20gXCIuL2VudHJ5X3VwbG9hZGVyXCJcblxuZXhwb3J0IGxldCBsb2dFcnJvciA9IChtc2csIG9iaikgPT4gY29uc29sZS5lcnJvciAmJiBjb25zb2xlLmVycm9yKG1zZywgb2JqKVxuXG5leHBvcnQgbGV0IGlzQ2lkID0gKGNpZCkgPT4ge1xuICBsZXQgdHlwZSA9IHR5cGVvZihjaWQpXG4gIHJldHVybiB0eXBlID09PSBcIm51bWJlclwiIHx8ICh0eXBlID09PSBcInN0cmluZ1wiICYmIC9eKDB8WzEtOV1cXGQqKSQvLnRlc3QoY2lkKSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRldGVjdER1cGxpY2F0ZUlkcygpe1xuICBsZXQgaWRzID0gbmV3IFNldCgpXG4gIGxldCBlbGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIqW2lkXVwiKVxuICBmb3IobGV0IGkgPSAwLCBsZW4gPSBlbGVtcy5sZW5ndGg7IGkgPCBsZW47IGkrKyl7XG4gICAgaWYoaWRzLmhhcyhlbGVtc1tpXS5pZCkpe1xuICAgICAgY29uc29sZS5lcnJvcihgTXVsdGlwbGUgSURzIGRldGVjdGVkOiAke2VsZW1zW2ldLmlkfS4gRW5zdXJlIHVuaXF1ZSBlbGVtZW50IGlkcy5gKVxuICAgIH0gZWxzZSB7XG4gICAgICBpZHMuYWRkKGVsZW1zW2ldLmlkKVxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgbGV0IGRlYnVnID0gKHZpZXcsIGtpbmQsIG1zZywgb2JqKSA9PiB7XG4gIGlmKHZpZXcubGl2ZVNvY2tldC5pc0RlYnVnRW5hYmxlZCgpKXtcbiAgICBjb25zb2xlLmxvZyhgJHt2aWV3LmlkfSAke2tpbmR9OiAke21zZ30gLSBgLCBvYmopXG4gIH1cbn1cblxuLy8gd3JhcHMgdmFsdWUgaW4gY2xvc3VyZSBvciByZXR1cm5zIGNsb3N1cmVcbmV4cG9ydCBsZXQgY2xvc3VyZSA9ICh2YWwpID0+IHR5cGVvZiB2YWwgPT09IFwiZnVuY3Rpb25cIiA/IHZhbCA6IGZ1bmN0aW9uICgpeyByZXR1cm4gdmFsIH1cblxuZXhwb3J0IGxldCBjbG9uZSA9IChvYmopID0+IHsgcmV0dXJuIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkob2JqKSkgfVxuXG5leHBvcnQgbGV0IGNsb3Nlc3RQaHhCaW5kaW5nID0gKGVsLCBiaW5kaW5nLCBib3JkZXJFbCkgPT4ge1xuICBkbyB7XG4gICAgaWYoZWwubWF0Y2hlcyhgWyR7YmluZGluZ31dYCkgJiYgIWVsLmRpc2FibGVkKXsgcmV0dXJuIGVsIH1cbiAgICBlbCA9IGVsLnBhcmVudEVsZW1lbnQgfHwgZWwucGFyZW50Tm9kZVxuICB9IHdoaWxlKGVsICE9PSBudWxsICYmIGVsLm5vZGVUeXBlID09PSAxICYmICEoKGJvcmRlckVsICYmIGJvcmRlckVsLmlzU2FtZU5vZGUoZWwpKSB8fCBlbC5tYXRjaGVzKFBIWF9WSUVXX1NFTEVDVE9SKSkpXG4gIHJldHVybiBudWxsXG59XG5cbmV4cG9ydCBsZXQgaXNPYmplY3QgPSAob2JqKSA9PiB7XG4gIHJldHVybiBvYmogIT09IG51bGwgJiYgdHlwZW9mIG9iaiA9PT0gXCJvYmplY3RcIiAmJiAhKG9iaiBpbnN0YW5jZW9mIEFycmF5KVxufVxuXG5leHBvcnQgbGV0IGlzRXF1YWxPYmogPSAob2JqMSwgb2JqMikgPT4gSlNPTi5zdHJpbmdpZnkob2JqMSkgPT09IEpTT04uc3RyaW5naWZ5KG9iajIpXG5cbmV4cG9ydCBsZXQgaXNFbXB0eSA9IChvYmopID0+IHtcbiAgZm9yKGxldCB4IGluIG9iail7IHJldHVybiBmYWxzZSB9XG4gIHJldHVybiB0cnVlXG59XG5cbmV4cG9ydCBsZXQgbWF5YmUgPSAoZWwsIGNhbGxiYWNrKSA9PiBlbCAmJiBjYWxsYmFjayhlbClcblxuZXhwb3J0IGxldCBjaGFubmVsVXBsb2FkZXIgPSBmdW5jdGlvbiAoZW50cmllcywgb25FcnJvciwgcmVzcCwgbGl2ZVNvY2tldCl7XG4gIGVudHJpZXMuZm9yRWFjaChlbnRyeSA9PiB7XG4gICAgbGV0IGVudHJ5VXBsb2FkZXIgPSBuZXcgRW50cnlVcGxvYWRlcihlbnRyeSwgcmVzcC5jb25maWcuY2h1bmtfc2l6ZSwgbGl2ZVNvY2tldClcbiAgICBlbnRyeVVwbG9hZGVyLnVwbG9hZCgpXG4gIH0pXG59XG4iLCAibGV0IEJyb3dzZXIgPSB7XG4gIGNhblB1c2hTdGF0ZSgpeyByZXR1cm4gKHR5cGVvZiAoaGlzdG9yeS5wdXNoU3RhdGUpICE9PSBcInVuZGVmaW5lZFwiKSB9LFxuXG4gIGRyb3BMb2NhbChsb2NhbFN0b3JhZ2UsIG5hbWVzcGFjZSwgc3Via2V5KXtcbiAgICByZXR1cm4gbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0odGhpcy5sb2NhbEtleShuYW1lc3BhY2UsIHN1YmtleSkpXG4gIH0sXG5cbiAgdXBkYXRlTG9jYWwobG9jYWxTdG9yYWdlLCBuYW1lc3BhY2UsIHN1YmtleSwgaW5pdGlhbCwgZnVuYyl7XG4gICAgbGV0IGN1cnJlbnQgPSB0aGlzLmdldExvY2FsKGxvY2FsU3RvcmFnZSwgbmFtZXNwYWNlLCBzdWJrZXkpXG4gICAgbGV0IGtleSA9IHRoaXMubG9jYWxLZXkobmFtZXNwYWNlLCBzdWJrZXkpXG4gICAgbGV0IG5ld1ZhbCA9IGN1cnJlbnQgPT09IG51bGwgPyBpbml0aWFsIDogZnVuYyhjdXJyZW50KVxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGtleSwgSlNPTi5zdHJpbmdpZnkobmV3VmFsKSlcbiAgICByZXR1cm4gbmV3VmFsXG4gIH0sXG5cbiAgZ2V0TG9jYWwobG9jYWxTdG9yYWdlLCBuYW1lc3BhY2UsIHN1YmtleSl7XG4gICAgcmV0dXJuIEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0odGhpcy5sb2NhbEtleShuYW1lc3BhY2UsIHN1YmtleSkpKVxuICB9LFxuXG4gIHVwZGF0ZUN1cnJlbnRTdGF0ZShjYWxsYmFjayl7XG4gICAgaWYoIXRoaXMuY2FuUHVzaFN0YXRlKCkpeyByZXR1cm4gfVxuICAgIGhpc3RvcnkucmVwbGFjZVN0YXRlKGNhbGxiYWNrKGhpc3Rvcnkuc3RhdGUgfHwge30pLCBcIlwiLCB3aW5kb3cubG9jYXRpb24uaHJlZilcbiAgfSxcblxuICBwdXNoU3RhdGUoa2luZCwgbWV0YSwgdG8pe1xuICAgIGlmKHRoaXMuY2FuUHVzaFN0YXRlKCkpe1xuICAgICAgaWYodG8gIT09IHdpbmRvdy5sb2NhdGlvbi5ocmVmKXtcbiAgICAgICAgaWYobWV0YS50eXBlID09IFwicmVkaXJlY3RcIiAmJiBtZXRhLnNjcm9sbCl7XG4gICAgICAgICAgLy8gSWYgd2UncmUgcmVkaXJlY3Rpbmcgc3RvcmUgdGhlIGN1cnJlbnQgc2Nyb2xsWSBmb3IgdGhlIGN1cnJlbnQgaGlzdG9yeSBzdGF0ZS5cbiAgICAgICAgICBsZXQgY3VycmVudFN0YXRlID0gaGlzdG9yeS5zdGF0ZSB8fCB7fVxuICAgICAgICAgIGN1cnJlbnRTdGF0ZS5zY3JvbGwgPSBtZXRhLnNjcm9sbFxuICAgICAgICAgIGhpc3RvcnkucmVwbGFjZVN0YXRlKGN1cnJlbnRTdGF0ZSwgXCJcIiwgd2luZG93LmxvY2F0aW9uLmhyZWYpXG4gICAgICAgIH1cblxuICAgICAgICBkZWxldGUgbWV0YS5zY3JvbGwgLy8gT25seSBzdG9yZSB0aGUgc2Nyb2xsIGluIHRoZSByZWRpcmVjdCBjYXNlLlxuICAgICAgICBoaXN0b3J5W2tpbmQgKyBcIlN0YXRlXCJdKG1ldGEsIFwiXCIsIHRvIHx8IG51bGwpIC8vIElFIHdpbGwgY29lcmNlIHVuZGVmaW5lZCB0byBzdHJpbmdcbiAgICAgICAgbGV0IGhhc2hFbCA9IHRoaXMuZ2V0SGFzaFRhcmdldEVsKHdpbmRvdy5sb2NhdGlvbi5oYXNoKVxuXG4gICAgICAgIGlmKGhhc2hFbCl7XG4gICAgICAgICAgaGFzaEVsLnNjcm9sbEludG9WaWV3KClcbiAgICAgICAgfSBlbHNlIGlmKG1ldGEudHlwZSA9PT0gXCJyZWRpcmVjdFwiKXtcbiAgICAgICAgICB3aW5kb3cuc2Nyb2xsKDAsIDApXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yZWRpcmVjdCh0bylcbiAgICB9XG4gIH0sXG5cbiAgc2V0Q29va2llKG5hbWUsIHZhbHVlKXtcbiAgICBkb2N1bWVudC5jb29raWUgPSBgJHtuYW1lfT0ke3ZhbHVlfWBcbiAgfSxcblxuICBnZXRDb29raWUobmFtZSl7XG4gICAgcmV0dXJuIGRvY3VtZW50LmNvb2tpZS5yZXBsYWNlKG5ldyBSZWdFeHAoYCg/Oig/Ol58Lio7XFxzKikke25hbWV9XFxzKlxcPVxccyooW147XSopLiokKXxeLiokYCksIFwiJDFcIilcbiAgfSxcblxuICByZWRpcmVjdCh0b1VSTCwgZmxhc2gpe1xuICAgIGlmKGZsYXNoKXsgQnJvd3Nlci5zZXRDb29raWUoXCJfX3Bob2VuaXhfZmxhc2hfX1wiLCBmbGFzaCArIFwiOyBtYXgtYWdlPTYwMDAwOyBwYXRoPS9cIikgfVxuICAgIHdpbmRvdy5sb2NhdGlvbiA9IHRvVVJMXG4gIH0sXG5cbiAgbG9jYWxLZXkobmFtZXNwYWNlLCBzdWJrZXkpeyByZXR1cm4gYCR7bmFtZXNwYWNlfS0ke3N1YmtleX1gIH0sXG5cbiAgZ2V0SGFzaFRhcmdldEVsKG1heWJlSGFzaCl7XG4gICAgbGV0IGhhc2ggPSBtYXliZUhhc2gudG9TdHJpbmcoKS5zdWJzdHJpbmcoMSlcbiAgICBpZihoYXNoID09PSBcIlwiKXsgcmV0dXJuIH1cbiAgICByZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaGFzaCkgfHwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgYVtuYW1lPVwiJHtoYXNofVwiXWApXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQnJvd3NlclxuIiwgImltcG9ydCB7XG4gIENIRUNLQUJMRV9JTlBVVFMsXG4gIERFQk9VTkNFX1BSRVZfS0VZLFxuICBERUJPVU5DRV9UUklHR0VSLFxuICBGT0NVU0FCTEVfSU5QVVRTLFxuICBQSFhfQ09NUE9ORU5ULFxuICBQSFhfRVZFTlRfQ0xBU1NFUyxcbiAgUEhYX0hBU19GT0NVU0VELFxuICBQSFhfSEFTX1NVQk1JVFRFRCxcbiAgUEhYX01BSU4sXG4gIFBIWF9OT19GRUVEQkFDS19DTEFTUyxcbiAgUEhYX1BBUkVOVF9JRCxcbiAgUEhYX1BSSVZBVEUsXG4gIFBIWF9SRUYsXG4gIFBIWF9SRUZfU1JDLFxuICBQSFhfUk9PVF9JRCxcbiAgUEhYX1NFU1NJT04sXG4gIFBIWF9TVEFUSUMsXG4gIFBIWF9VUExPQURfUkVGLFxuICBQSFhfVklFV19TRUxFQ1RPUixcbiAgUEhYX1NUSUNLWSxcbiAgVEhST1RUTEVEXG59IGZyb20gXCIuL2NvbnN0YW50c1wiXG5cbmltcG9ydCB7XG4gIGxvZ0Vycm9yXG59IGZyb20gXCIuL3V0aWxzXCJcblxubGV0IERPTSA9IHtcbiAgYnlJZChpZCl7IHJldHVybiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCkgfHwgbG9nRXJyb3IoYG5vIGlkIGZvdW5kIGZvciAke2lkfWApIH0sXG5cbiAgcmVtb3ZlQ2xhc3MoZWwsIGNsYXNzTmFtZSl7XG4gICAgZWwuY2xhc3NMaXN0LnJlbW92ZShjbGFzc05hbWUpXG4gICAgaWYoZWwuY2xhc3NMaXN0Lmxlbmd0aCA9PT0gMCl7IGVsLnJlbW92ZUF0dHJpYnV0ZShcImNsYXNzXCIpIH1cbiAgfSxcblxuICBhbGwobm9kZSwgcXVlcnksIGNhbGxiYWNrKXtcbiAgICBpZighbm9kZSl7IHJldHVybiBbXSB9XG4gICAgbGV0IGFycmF5ID0gQXJyYXkuZnJvbShub2RlLnF1ZXJ5U2VsZWN0b3JBbGwocXVlcnkpKVxuICAgIHJldHVybiBjYWxsYmFjayA/IGFycmF5LmZvckVhY2goY2FsbGJhY2spIDogYXJyYXlcbiAgfSxcblxuICBjaGlsZE5vZGVMZW5ndGgoaHRtbCl7XG4gICAgbGV0IHRlbXBsYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRlbXBsYXRlXCIpXG4gICAgdGVtcGxhdGUuaW5uZXJIVE1MID0gaHRtbFxuICAgIHJldHVybiB0ZW1wbGF0ZS5jb250ZW50LmNoaWxkRWxlbWVudENvdW50XG4gIH0sXG5cbiAgaXNVcGxvYWRJbnB1dChlbCl7IHJldHVybiBlbC50eXBlID09PSBcImZpbGVcIiAmJiBlbC5nZXRBdHRyaWJ1dGUoUEhYX1VQTE9BRF9SRUYpICE9PSBudWxsIH0sXG5cbiAgZmluZFVwbG9hZElucHV0cyhub2RlKXsgcmV0dXJuIHRoaXMuYWxsKG5vZGUsIGBpbnB1dFt0eXBlPVwiZmlsZVwiXVske1BIWF9VUExPQURfUkVGfV1gKSB9LFxuXG4gIGZpbmRDb21wb25lbnROb2RlTGlzdChub2RlLCBjaWQpe1xuICAgIHJldHVybiB0aGlzLmZpbHRlcldpdGhpblNhbWVMaXZlVmlldyh0aGlzLmFsbChub2RlLCBgWyR7UEhYX0NPTVBPTkVOVH09XCIke2NpZH1cIl1gKSwgbm9kZSlcbiAgfSxcblxuICBpc1BoeERlc3Ryb3llZChub2RlKXtcbiAgICByZXR1cm4gbm9kZS5pZCAmJiBET00ucHJpdmF0ZShub2RlLCBcImRlc3Ryb3llZFwiKSA/IHRydWUgOiBmYWxzZVxuICB9LFxuXG4gIHdhbnRzTmV3VGFiKGUpe1xuICAgIGxldCB3YW50c05ld1RhYiA9IGUuY3RybEtleSB8fCBlLnNoaWZ0S2V5IHx8IGUubWV0YUtleSB8fCAoZS5idXR0b24gJiYgZS5idXR0b24gPT09IDEpXG4gICAgcmV0dXJuIHdhbnRzTmV3VGFiIHx8IGUudGFyZ2V0LmdldEF0dHJpYnV0ZShcInRhcmdldFwiKSA9PT0gXCJfYmxhbmtcIlxuICB9LFxuXG4gIGlzVW5sb2FkYWJsZUZvcm1TdWJtaXQoZSl7XG4gICAgcmV0dXJuICFlLmRlZmF1bHRQcmV2ZW50ZWQgJiYgIXRoaXMud2FudHNOZXdUYWIoZSlcbiAgfSxcblxuICBpc05ld1BhZ2VIcmVmKGhyZWYsIGN1cnJlbnRMb2NhdGlvbil7XG4gICAgbGV0IHVybFxuICAgIHRyeSB7XG4gICAgICB1cmwgPSBuZXcgVVJMKGhyZWYpXG4gICAgfSBjYXRjaChlKSB7XG4gICAgICB0cnkge1xuICAgICAgICB1cmwgPSBuZXcgVVJMKGhyZWYsIGN1cnJlbnRMb2NhdGlvbilcbiAgICAgIH0gY2F0Y2goZSkge1xuICAgICAgICAvLyBiYWQgVVJMLCBmYWxsYmFjayB0byBsZXQgYnJvd3NlciB0cnkgaXQgYXMgZXh0ZXJuYWxcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZih1cmwuaG9zdCA9PT0gY3VycmVudExvY2F0aW9uLmhvc3QgJiYgdXJsLnByb3RvY29sID09PSBjdXJyZW50TG9jYXRpb24ucHJvdG9jb2wpe1xuICAgICAgaWYodXJsLnBhdGhuYW1lID09PSBjdXJyZW50TG9jYXRpb24ucGF0aG5hbWUgJiYgdXJsLnNlYXJjaCA9PT0gY3VycmVudExvY2F0aW9uLnNlYXJjaCl7XG4gICAgICAgIHJldHVybiB1cmwuaGFzaCA9PT0gXCJcIiAmJiAhdXJsLmhyZWYuZW5kc1dpdGgoXCIjXCIpXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlXG4gIH0sXG5cbiAgbWFya1BoeENoaWxkRGVzdHJveWVkKGVsKXtcbiAgICBpZih0aGlzLmlzUGh4Q2hpbGQoZWwpKXsgZWwuc2V0QXR0cmlidXRlKFBIWF9TRVNTSU9OLCBcIlwiKSB9XG4gICAgdGhpcy5wdXRQcml2YXRlKGVsLCBcImRlc3Ryb3llZFwiLCB0cnVlKVxuICB9LFxuXG4gIGZpbmRQaHhDaGlsZHJlbkluRnJhZ21lbnQoaHRtbCwgcGFyZW50SWQpe1xuICAgIGxldCB0ZW1wbGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZW1wbGF0ZVwiKVxuICAgIHRlbXBsYXRlLmlubmVySFRNTCA9IGh0bWxcbiAgICByZXR1cm4gdGhpcy5maW5kUGh4Q2hpbGRyZW4odGVtcGxhdGUuY29udGVudCwgcGFyZW50SWQpXG4gIH0sXG5cbiAgaXNJZ25vcmVkKGVsLCBwaHhVcGRhdGUpe1xuICAgIHJldHVybiAoZWwuZ2V0QXR0cmlidXRlKHBoeFVwZGF0ZSkgfHwgZWwuZ2V0QXR0cmlidXRlKFwiZGF0YS1waHgtdXBkYXRlXCIpKSA9PT0gXCJpZ25vcmVcIlxuICB9LFxuXG4gIGlzUGh4VXBkYXRlKGVsLCBwaHhVcGRhdGUsIHVwZGF0ZVR5cGVzKXtcbiAgICByZXR1cm4gZWwuZ2V0QXR0cmlidXRlICYmIHVwZGF0ZVR5cGVzLmluZGV4T2YoZWwuZ2V0QXR0cmlidXRlKHBoeFVwZGF0ZSkpID49IDBcbiAgfSxcblxuICBmaW5kUGh4U3RpY2t5KGVsKXsgcmV0dXJuIHRoaXMuYWxsKGVsLCBgWyR7UEhYX1NUSUNLWX1dYCkgfSxcblxuICBmaW5kUGh4Q2hpbGRyZW4oZWwsIHBhcmVudElkKXtcbiAgICByZXR1cm4gdGhpcy5hbGwoZWwsIGAke1BIWF9WSUVXX1NFTEVDVE9SfVske1BIWF9QQVJFTlRfSUR9PVwiJHtwYXJlbnRJZH1cIl1gKVxuICB9LFxuXG4gIGZpbmRQYXJlbnRDSURzKG5vZGUsIGNpZHMpe1xuICAgIGxldCBpbml0aWFsID0gbmV3IFNldChjaWRzKVxuICAgIGxldCBwYXJlbnRDaWRzID1cbiAgICAgIGNpZHMucmVkdWNlKChhY2MsIGNpZCkgPT4ge1xuICAgICAgICBsZXQgc2VsZWN0b3IgPSBgWyR7UEhYX0NPTVBPTkVOVH09XCIke2NpZH1cIl0gWyR7UEhYX0NPTVBPTkVOVH1dYFxuXG4gICAgICAgIHRoaXMuZmlsdGVyV2l0aGluU2FtZUxpdmVWaWV3KHRoaXMuYWxsKG5vZGUsIHNlbGVjdG9yKSwgbm9kZSlcbiAgICAgICAgICAubWFwKGVsID0+IHBhcnNlSW50KGVsLmdldEF0dHJpYnV0ZShQSFhfQ09NUE9ORU5UKSkpXG4gICAgICAgICAgLmZvckVhY2goY2hpbGRDSUQgPT4gYWNjLmRlbGV0ZShjaGlsZENJRCkpXG5cbiAgICAgICAgcmV0dXJuIGFjY1xuICAgICAgfSwgaW5pdGlhbClcblxuICAgIHJldHVybiBwYXJlbnRDaWRzLnNpemUgPT09IDAgPyBuZXcgU2V0KGNpZHMpIDogcGFyZW50Q2lkc1xuICB9LFxuXG4gIGZpbHRlcldpdGhpblNhbWVMaXZlVmlldyhub2RlcywgcGFyZW50KXtcbiAgICBpZihwYXJlbnQucXVlcnlTZWxlY3RvcihQSFhfVklFV19TRUxFQ1RPUikpe1xuICAgICAgcmV0dXJuIG5vZGVzLmZpbHRlcihlbCA9PiB0aGlzLndpdGhpblNhbWVMaXZlVmlldyhlbCwgcGFyZW50KSlcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG5vZGVzXG4gICAgfVxuICB9LFxuXG4gIHdpdGhpblNhbWVMaXZlVmlldyhub2RlLCBwYXJlbnQpe1xuICAgIHdoaWxlKG5vZGUgPSBub2RlLnBhcmVudE5vZGUpe1xuICAgICAgaWYobm9kZS5pc1NhbWVOb2RlKHBhcmVudCkpeyByZXR1cm4gdHJ1ZSB9XG4gICAgICBpZihub2RlLmdldEF0dHJpYnV0ZShQSFhfU0VTU0lPTikgIT09IG51bGwpeyByZXR1cm4gZmFsc2UgfVxuICAgIH1cbiAgfSxcblxuICBwcml2YXRlKGVsLCBrZXkpeyByZXR1cm4gZWxbUEhYX1BSSVZBVEVdICYmIGVsW1BIWF9QUklWQVRFXVtrZXldIH0sXG5cbiAgZGVsZXRlUHJpdmF0ZShlbCwga2V5KXsgZWxbUEhYX1BSSVZBVEVdICYmIGRlbGV0ZSAoZWxbUEhYX1BSSVZBVEVdW2tleV0pIH0sXG5cbiAgcHV0UHJpdmF0ZShlbCwga2V5LCB2YWx1ZSl7XG4gICAgaWYoIWVsW1BIWF9QUklWQVRFXSl7IGVsW1BIWF9QUklWQVRFXSA9IHt9IH1cbiAgICBlbFtQSFhfUFJJVkFURV1ba2V5XSA9IHZhbHVlXG4gIH0sXG5cbiAgdXBkYXRlUHJpdmF0ZShlbCwga2V5LCBkZWZhdWx0VmFsLCB1cGRhdGVGdW5jKXtcbiAgICBsZXQgZXhpc3RpbmcgPSB0aGlzLnByaXZhdGUoZWwsIGtleSlcbiAgICBpZihleGlzdGluZyA9PT0gdW5kZWZpbmVkKXtcbiAgICAgIHRoaXMucHV0UHJpdmF0ZShlbCwga2V5LCB1cGRhdGVGdW5jKGRlZmF1bHRWYWwpKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnB1dFByaXZhdGUoZWwsIGtleSwgdXBkYXRlRnVuYyhleGlzdGluZykpXG4gICAgfVxuICB9LFxuXG4gIGNvcHlQcml2YXRlcyh0YXJnZXQsIHNvdXJjZSl7XG4gICAgaWYoc291cmNlW1BIWF9QUklWQVRFXSl7XG4gICAgICB0YXJnZXRbUEhYX1BSSVZBVEVdID0gc291cmNlW1BIWF9QUklWQVRFXVxuICAgIH1cbiAgfSxcblxuICBwdXRUaXRsZShzdHIpe1xuICAgIGxldCB0aXRsZUVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcInRpdGxlXCIpXG4gICAgaWYodGl0bGVFbCl7XG4gICAgICBsZXQge3ByZWZpeCwgc3VmZml4fSA9IHRpdGxlRWwuZGF0YXNldFxuICAgICAgZG9jdW1lbnQudGl0bGUgPSBgJHtwcmVmaXggfHwgXCJcIn0ke3N0cn0ke3N1ZmZpeCB8fCBcIlwifWBcbiAgICB9IGVsc2Uge1xuICAgICAgZG9jdW1lbnQudGl0bGUgPSBzdHJcbiAgICB9XG4gIH0sXG5cbiAgZGVib3VuY2UoZWwsIGV2ZW50LCBwaHhEZWJvdW5jZSwgZGVmYXVsdERlYm91bmNlLCBwaHhUaHJvdHRsZSwgZGVmYXVsdFRocm90dGxlLCBhc3luY0ZpbHRlciwgY2FsbGJhY2spe1xuICAgIGxldCBkZWJvdW5jZSA9IGVsLmdldEF0dHJpYnV0ZShwaHhEZWJvdW5jZSlcbiAgICBsZXQgdGhyb3R0bGUgPSBlbC5nZXRBdHRyaWJ1dGUocGh4VGhyb3R0bGUpXG4gICAgaWYoZGVib3VuY2UgPT09IFwiXCIpeyBkZWJvdW5jZSA9IGRlZmF1bHREZWJvdW5jZSB9XG4gICAgaWYodGhyb3R0bGUgPT09IFwiXCIpeyB0aHJvdHRsZSA9IGRlZmF1bHRUaHJvdHRsZSB9XG4gICAgbGV0IHZhbHVlID0gZGVib3VuY2UgfHwgdGhyb3R0bGVcbiAgICBzd2l0Y2godmFsdWUpe1xuICAgICAgY2FzZSBudWxsOiByZXR1cm4gY2FsbGJhY2soKVxuXG4gICAgICBjYXNlIFwiYmx1clwiOlxuICAgICAgICBpZih0aGlzLm9uY2UoZWwsIFwiZGVib3VuY2UtYmx1clwiKSl7XG4gICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcihcImJsdXJcIiwgKCkgPT4gY2FsbGJhY2soKSlcbiAgICAgICAgfVxuICAgICAgICByZXR1cm5cblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgbGV0IHRpbWVvdXQgPSBwYXJzZUludCh2YWx1ZSlcbiAgICAgICAgbGV0IHRyaWdnZXIgPSAoKSA9PiB0aHJvdHRsZSA/IHRoaXMuZGVsZXRlUHJpdmF0ZShlbCwgVEhST1RUTEVEKSA6IGNhbGxiYWNrKClcbiAgICAgICAgbGV0IGN1cnJlbnRDeWNsZSA9IHRoaXMuaW5jQ3ljbGUoZWwsIERFQk9VTkNFX1RSSUdHRVIsIHRyaWdnZXIpXG4gICAgICAgIGlmKGlzTmFOKHRpbWVvdXQpKXsgcmV0dXJuIGxvZ0Vycm9yKGBpbnZhbGlkIHRocm90dGxlL2RlYm91bmNlIHZhbHVlOiAke3ZhbHVlfWApIH1cbiAgICAgICAgaWYodGhyb3R0bGUpe1xuICAgICAgICAgIGxldCBuZXdLZXlEb3duID0gZmFsc2VcbiAgICAgICAgICBpZihldmVudC50eXBlID09PSBcImtleWRvd25cIil7XG4gICAgICAgICAgICBsZXQgcHJldktleSA9IHRoaXMucHJpdmF0ZShlbCwgREVCT1VOQ0VfUFJFVl9LRVkpXG4gICAgICAgICAgICB0aGlzLnB1dFByaXZhdGUoZWwsIERFQk9VTkNFX1BSRVZfS0VZLCBldmVudC5rZXkpXG4gICAgICAgICAgICBuZXdLZXlEb3duID0gcHJldktleSAhPT0gZXZlbnQua2V5XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYoIW5ld0tleURvd24gJiYgdGhpcy5wcml2YXRlKGVsLCBUSFJPVFRMRUQpKXtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWxsYmFjaygpXG4gICAgICAgICAgICB0aGlzLnB1dFByaXZhdGUoZWwsIFRIUk9UVExFRCwgdHJ1ZSlcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICBpZihhc3luY0ZpbHRlcigpKXsgdGhpcy50cmlnZ2VyQ3ljbGUoZWwsIERFQk9VTkNFX1RSSUdHRVIpIH1cbiAgICAgICAgICAgIH0sIHRpbWVvdXQpXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgaWYoYXN5bmNGaWx0ZXIoKSl7IHRoaXMudHJpZ2dlckN5Y2xlKGVsLCBERUJPVU5DRV9UUklHR0VSLCBjdXJyZW50Q3ljbGUpIH1cbiAgICAgICAgICB9LCB0aW1lb3V0KVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGZvcm0gPSBlbC5mb3JtXG4gICAgICAgIGlmKGZvcm0gJiYgdGhpcy5vbmNlKGZvcm0sIFwiYmluZC1kZWJvdW5jZVwiKSl7XG4gICAgICAgICAgZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsICgpID0+IHtcbiAgICAgICAgICAgIEFycmF5LmZyb20oKG5ldyBGb3JtRGF0YShmb3JtKSkuZW50cmllcygpLCAoW25hbWVdKSA9PiB7XG4gICAgICAgICAgICAgIGxldCBpbnB1dCA9IGZvcm0ucXVlcnlTZWxlY3RvcihgW25hbWU9XCIke25hbWV9XCJdYClcbiAgICAgICAgICAgICAgdGhpcy5pbmNDeWNsZShpbnB1dCwgREVCT1VOQ0VfVFJJR0dFUilcbiAgICAgICAgICAgICAgdGhpcy5kZWxldGVQcml2YXRlKGlucHV0LCBUSFJPVFRMRUQpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYodGhpcy5vbmNlKGVsLCBcImJpbmQtZGVib3VuY2VcIikpe1xuICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoXCJibHVyXCIsICgpID0+IHRoaXMudHJpZ2dlckN5Y2xlKGVsLCBERUJPVU5DRV9UUklHR0VSKSlcbiAgICAgICAgfVxuICAgIH1cbiAgfSxcblxuICB0cmlnZ2VyQ3ljbGUoZWwsIGtleSwgY3VycmVudEN5Y2xlKXtcbiAgICBsZXQgW2N5Y2xlLCB0cmlnZ2VyXSA9IHRoaXMucHJpdmF0ZShlbCwga2V5KVxuICAgIGlmKCFjdXJyZW50Q3ljbGUpeyBjdXJyZW50Q3ljbGUgPSBjeWNsZSB9XG4gICAgaWYoY3VycmVudEN5Y2xlID09PSBjeWNsZSl7XG4gICAgICB0aGlzLmluY0N5Y2xlKGVsLCBrZXkpXG4gICAgICB0cmlnZ2VyKClcbiAgICB9XG4gIH0sXG5cbiAgb25jZShlbCwga2V5KXtcbiAgICBpZih0aGlzLnByaXZhdGUoZWwsIGtleSkgPT09IHRydWUpeyByZXR1cm4gZmFsc2UgfVxuICAgIHRoaXMucHV0UHJpdmF0ZShlbCwga2V5LCB0cnVlKVxuICAgIHJldHVybiB0cnVlXG4gIH0sXG5cbiAgaW5jQ3ljbGUoZWwsIGtleSwgdHJpZ2dlciA9IGZ1bmN0aW9uICgpeyB9KXtcbiAgICBsZXQgW2N1cnJlbnRDeWNsZV0gPSB0aGlzLnByaXZhdGUoZWwsIGtleSkgfHwgWzAsIHRyaWdnZXJdXG4gICAgY3VycmVudEN5Y2xlKytcbiAgICB0aGlzLnB1dFByaXZhdGUoZWwsIGtleSwgW2N1cnJlbnRDeWNsZSwgdHJpZ2dlcl0pXG4gICAgcmV0dXJuIGN1cnJlbnRDeWNsZVxuICB9LFxuXG4gIGRpc2NhcmRFcnJvcihjb250YWluZXIsIGVsLCBwaHhGZWVkYmFja0Zvcil7XG4gICAgbGV0IGZpZWxkID0gZWwuZ2V0QXR0cmlidXRlICYmIGVsLmdldEF0dHJpYnV0ZShwaHhGZWVkYmFja0ZvcilcbiAgICAvLyBUT0RPOiBSZW1vdmUgaWQgbG9va3VwIGFmdGVyIHdlIHVwZGF0ZSBQaG9lbml4IHRvIHVzZSBpbnB1dF9uYW1lIGluc3RlYWQgb2YgaW5wdXRfaWRcbiAgICBsZXQgaW5wdXQgPSBmaWVsZCAmJiBjb250YWluZXIucXVlcnlTZWxlY3RvcihgW2lkPVwiJHtmaWVsZH1cIl0sIFtuYW1lPVwiJHtmaWVsZH1cIl0sIFtuYW1lPVwiJHtmaWVsZH1bXVwiXWApXG4gICAgaWYoIWlucHV0KXsgcmV0dXJuIH1cblxuICAgIGlmKCEodGhpcy5wcml2YXRlKGlucHV0LCBQSFhfSEFTX0ZPQ1VTRUQpIHx8IHRoaXMucHJpdmF0ZShpbnB1dCwgUEhYX0hBU19TVUJNSVRURUQpKSl7XG4gICAgICBlbC5jbGFzc0xpc3QuYWRkKFBIWF9OT19GRUVEQkFDS19DTEFTUylcbiAgICB9XG4gIH0sXG5cbiAgcmVzZXRGb3JtKGZvcm0sIHBoeEZlZWRiYWNrRm9yKXtcbiAgICBBcnJheS5mcm9tKGZvcm0uZWxlbWVudHMpLmZvckVhY2goaW5wdXQgPT4ge1xuICAgICAgbGV0IHF1ZXJ5ID0gYFske3BoeEZlZWRiYWNrRm9yfT1cIiR7aW5wdXQuaWR9XCJdLFxuICAgICAgICAgICAgICAgICAgIFske3BoeEZlZWRiYWNrRm9yfT1cIiR7aW5wdXQubmFtZX1cIl0sXG4gICAgICAgICAgICAgICAgICAgWyR7cGh4RmVlZGJhY2tGb3J9PVwiJHtpbnB1dC5uYW1lLnJlcGxhY2UoL1xcW1xcXSQvLCBcIlwiKX1cIl1gXG5cbiAgICAgIHRoaXMuZGVsZXRlUHJpdmF0ZShpbnB1dCwgUEhYX0hBU19GT0NVU0VEKVxuICAgICAgdGhpcy5kZWxldGVQcml2YXRlKGlucHV0LCBQSFhfSEFTX1NVQk1JVFRFRClcbiAgICAgIHRoaXMuYWxsKGRvY3VtZW50LCBxdWVyeSwgZmVlZGJhY2tFbCA9PiB7XG4gICAgICAgIGZlZWRiYWNrRWwuY2xhc3NMaXN0LmFkZChQSFhfTk9fRkVFREJBQ0tfQ0xBU1MpXG4gICAgICB9KVxuICAgIH0pXG4gIH0sXG5cbiAgc2hvd0Vycm9yKGlucHV0RWwsIHBoeEZlZWRiYWNrRm9yKXtcbiAgICBpZihpbnB1dEVsLmlkIHx8IGlucHV0RWwubmFtZSl7XG4gICAgICB0aGlzLmFsbChpbnB1dEVsLmZvcm0sIGBbJHtwaHhGZWVkYmFja0Zvcn09XCIke2lucHV0RWwuaWR9XCJdLCBbJHtwaHhGZWVkYmFja0Zvcn09XCIke2lucHV0RWwubmFtZX1cIl1gLCAoZWwpID0+IHtcbiAgICAgICAgdGhpcy5yZW1vdmVDbGFzcyhlbCwgUEhYX05PX0ZFRURCQUNLX0NMQVNTKVxuICAgICAgfSlcbiAgICB9XG4gIH0sXG5cbiAgaXNQaHhDaGlsZChub2RlKXtcbiAgICByZXR1cm4gbm9kZS5nZXRBdHRyaWJ1dGUgJiYgbm9kZS5nZXRBdHRyaWJ1dGUoUEhYX1BBUkVOVF9JRClcbiAgfSxcblxuICBpc1BoeFN0aWNreShub2RlKXtcbiAgICByZXR1cm4gbm9kZS5nZXRBdHRyaWJ1dGUgJiYgbm9kZS5nZXRBdHRyaWJ1dGUoUEhYX1NUSUNLWSkgIT09IG51bGxcbiAgfSxcblxuICBmaXJzdFBoeENoaWxkKGVsKXtcbiAgICByZXR1cm4gdGhpcy5pc1BoeENoaWxkKGVsKSA/IGVsIDogdGhpcy5hbGwoZWwsIGBbJHtQSFhfUEFSRU5UX0lEfV1gKVswXVxuICB9LFxuXG4gIGRpc3BhdGNoRXZlbnQodGFyZ2V0LCBuYW1lLCBvcHRzID0ge30pe1xuICAgIGxldCBidWJibGVzID0gb3B0cy5idWJibGVzID09PSB1bmRlZmluZWQgPyB0cnVlIDogISFvcHRzLmJ1YmJsZXNcbiAgICBsZXQgZXZlbnRPcHRzID0ge2J1YmJsZXM6IGJ1YmJsZXMsIGNhbmNlbGFibGU6IHRydWUsIGRldGFpbDogb3B0cy5kZXRhaWwgfHwge319XG4gICAgbGV0IGV2ZW50ID0gbmFtZSA9PT0gXCJjbGlja1wiID8gbmV3IE1vdXNlRXZlbnQoXCJjbGlja1wiLCBldmVudE9wdHMpIDogbmV3IEN1c3RvbUV2ZW50KG5hbWUsIGV2ZW50T3B0cylcbiAgICB0YXJnZXQuZGlzcGF0Y2hFdmVudChldmVudClcbiAgfSxcblxuICBjbG9uZU5vZGUobm9kZSwgaHRtbCl7XG4gICAgaWYodHlwZW9mIChodG1sKSA9PT0gXCJ1bmRlZmluZWRcIil7XG4gICAgICByZXR1cm4gbm9kZS5jbG9uZU5vZGUodHJ1ZSlcbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IGNsb25lZCA9IG5vZGUuY2xvbmVOb2RlKGZhbHNlKVxuICAgICAgY2xvbmVkLmlubmVySFRNTCA9IGh0bWxcbiAgICAgIHJldHVybiBjbG9uZWRcbiAgICB9XG4gIH0sXG5cbiAgbWVyZ2VBdHRycyh0YXJnZXQsIHNvdXJjZSwgb3B0cyA9IHt9KXtcbiAgICBsZXQgZXhjbHVkZSA9IG9wdHMuZXhjbHVkZSB8fCBbXVxuICAgIGxldCBpc0lnbm9yZWQgPSBvcHRzLmlzSWdub3JlZFxuICAgIGxldCBzb3VyY2VBdHRycyA9IHNvdXJjZS5hdHRyaWJ1dGVzXG4gICAgZm9yKGxldCBpID0gc291cmNlQXR0cnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pe1xuICAgICAgbGV0IG5hbWUgPSBzb3VyY2VBdHRyc1tpXS5uYW1lXG4gICAgICBpZihleGNsdWRlLmluZGV4T2YobmFtZSkgPCAwKXsgdGFyZ2V0LnNldEF0dHJpYnV0ZShuYW1lLCBzb3VyY2UuZ2V0QXR0cmlidXRlKG5hbWUpKSB9XG4gICAgfVxuXG4gICAgbGV0IHRhcmdldEF0dHJzID0gdGFyZ2V0LmF0dHJpYnV0ZXNcbiAgICBmb3IobGV0IGkgPSB0YXJnZXRBdHRycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSl7XG4gICAgICBsZXQgbmFtZSA9IHRhcmdldEF0dHJzW2ldLm5hbWVcbiAgICAgIGlmKGlzSWdub3JlZCl7XG4gICAgICAgIGlmKG5hbWUuc3RhcnRzV2l0aChcImRhdGEtXCIpICYmICFzb3VyY2UuaGFzQXR0cmlidXRlKG5hbWUpKXsgdGFyZ2V0LnJlbW92ZUF0dHJpYnV0ZShuYW1lKSB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZighc291cmNlLmhhc0F0dHJpYnV0ZShuYW1lKSl7IHRhcmdldC5yZW1vdmVBdHRyaWJ1dGUobmFtZSkgfVxuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICBtZXJnZUZvY3VzZWRJbnB1dCh0YXJnZXQsIHNvdXJjZSl7XG4gICAgLy8gc2tpcCBzZWxlY3RzIGJlY2F1c2UgRkYgd2lsbCByZXNldCBoaWdobGlnaHRlZCBpbmRleCBmb3IgYW55IHNldEF0dHJpYnV0ZVxuICAgIGlmKCEodGFyZ2V0IGluc3RhbmNlb2YgSFRNTFNlbGVjdEVsZW1lbnQpKXsgRE9NLm1lcmdlQXR0cnModGFyZ2V0LCBzb3VyY2UsIHtleGNsdWRlOiBbXCJ2YWx1ZVwiXX0pIH1cbiAgICBpZihzb3VyY2UucmVhZE9ubHkpe1xuICAgICAgdGFyZ2V0LnNldEF0dHJpYnV0ZShcInJlYWRvbmx5XCIsIHRydWUpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRhcmdldC5yZW1vdmVBdHRyaWJ1dGUoXCJyZWFkb25seVwiKVxuICAgIH1cbiAgfSxcblxuICBoYXNTZWxlY3Rpb25SYW5nZShlbCl7XG4gICAgcmV0dXJuIGVsLnNldFNlbGVjdGlvblJhbmdlICYmIChlbC50eXBlID09PSBcInRleHRcIiB8fCBlbC50eXBlID09PSBcInRleHRhcmVhXCIpXG4gIH0sXG5cbiAgcmVzdG9yZUZvY3VzKGZvY3VzZWQsIHNlbGVjdGlvblN0YXJ0LCBzZWxlY3Rpb25FbmQpe1xuICAgIGlmKCFET00uaXNUZXh0dWFsSW5wdXQoZm9jdXNlZCkpeyByZXR1cm4gfVxuICAgIGxldCB3YXNGb2N1c2VkID0gZm9jdXNlZC5tYXRjaGVzKFwiOmZvY3VzXCIpXG4gICAgaWYoZm9jdXNlZC5yZWFkT25seSl7IGZvY3VzZWQuYmx1cigpIH1cbiAgICBpZighd2FzRm9jdXNlZCl7IGZvY3VzZWQuZm9jdXMoKSB9XG4gICAgaWYodGhpcy5oYXNTZWxlY3Rpb25SYW5nZShmb2N1c2VkKSl7XG4gICAgICBmb2N1c2VkLnNldFNlbGVjdGlvblJhbmdlKHNlbGVjdGlvblN0YXJ0LCBzZWxlY3Rpb25FbmQpXG4gICAgfVxuICB9LFxuXG4gIGlzRm9ybUlucHV0KGVsKXsgcmV0dXJuIC9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhKSQvaS50ZXN0KGVsLnRhZ05hbWUpICYmIGVsLnR5cGUgIT09IFwiYnV0dG9uXCIgfSxcblxuICBzeW5jQXR0cnNUb1Byb3BzKGVsKXtcbiAgICBpZihlbCBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQgJiYgQ0hFQ0tBQkxFX0lOUFVUUy5pbmRleE9mKGVsLnR5cGUudG9Mb2NhbGVMb3dlckNhc2UoKSkgPj0gMCl7XG4gICAgICBlbC5jaGVja2VkID0gZWwuZ2V0QXR0cmlidXRlKFwiY2hlY2tlZFwiKSAhPT0gbnVsbFxuICAgIH1cbiAgfSxcblxuICBpc1RleHR1YWxJbnB1dChlbCl7IHJldHVybiBGT0NVU0FCTEVfSU5QVVRTLmluZGV4T2YoZWwudHlwZSkgPj0gMCB9LFxuXG4gIGlzTm93VHJpZ2dlckZvcm1FeHRlcm5hbChlbCwgcGh4VHJpZ2dlckV4dGVybmFsKXtcbiAgICByZXR1cm4gZWwuZ2V0QXR0cmlidXRlICYmIGVsLmdldEF0dHJpYnV0ZShwaHhUcmlnZ2VyRXh0ZXJuYWwpICE9PSBudWxsXG4gIH0sXG5cbiAgc3luY1BlbmRpbmdSZWYoZnJvbUVsLCB0b0VsLCBkaXNhYmxlV2l0aCl7XG4gICAgbGV0IHJlZiA9IGZyb21FbC5nZXRBdHRyaWJ1dGUoUEhYX1JFRilcbiAgICBpZihyZWYgPT09IG51bGwpeyByZXR1cm4gdHJ1ZSB9XG4gICAgbGV0IHJlZlNyYyA9IGZyb21FbC5nZXRBdHRyaWJ1dGUoUEhYX1JFRl9TUkMpXG5cbiAgICBpZihET00uaXNGb3JtSW5wdXQoZnJvbUVsKSB8fCBmcm9tRWwuZ2V0QXR0cmlidXRlKGRpc2FibGVXaXRoKSAhPT0gbnVsbCl7XG4gICAgICBpZihET00uaXNVcGxvYWRJbnB1dChmcm9tRWwpKXsgRE9NLm1lcmdlQXR0cnMoZnJvbUVsLCB0b0VsLCB7aXNJZ25vcmVkOiB0cnVlfSkgfVxuICAgICAgRE9NLnB1dFByaXZhdGUoZnJvbUVsLCBQSFhfUkVGLCB0b0VsKVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfSBlbHNlIHtcbiAgICAgIFBIWF9FVkVOVF9DTEFTU0VTLmZvckVhY2goY2xhc3NOYW1lID0+IHtcbiAgICAgICAgZnJvbUVsLmNsYXNzTGlzdC5jb250YWlucyhjbGFzc05hbWUpICYmIHRvRWwuY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpXG4gICAgICB9KVxuICAgICAgdG9FbC5zZXRBdHRyaWJ1dGUoUEhYX1JFRiwgcmVmKVxuICAgICAgdG9FbC5zZXRBdHRyaWJ1dGUoUEhYX1JFRl9TUkMsIHJlZlNyYylcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICB9LFxuXG4gIGNsZWFuQ2hpbGROb2Rlcyhjb250YWluZXIsIHBoeFVwZGF0ZSl7XG4gICAgaWYoRE9NLmlzUGh4VXBkYXRlKGNvbnRhaW5lciwgcGh4VXBkYXRlLCBbXCJhcHBlbmRcIiwgXCJwcmVwZW5kXCJdKSl7XG4gICAgICBsZXQgdG9SZW1vdmUgPSBbXVxuICAgICAgY29udGFpbmVyLmNoaWxkTm9kZXMuZm9yRWFjaChjaGlsZE5vZGUgPT4ge1xuICAgICAgICBpZighY2hpbGROb2RlLmlkKXtcbiAgICAgICAgICAvLyBTa2lwIHdhcm5pbmcgaWYgaXQncyBhbiBlbXB0eSB0ZXh0IG5vZGUgKGUuZy4gYSBuZXctbGluZSlcbiAgICAgICAgICBsZXQgaXNFbXB0eVRleHROb2RlID0gY2hpbGROb2RlLm5vZGVUeXBlID09PSBOb2RlLlRFWFRfTk9ERSAmJiBjaGlsZE5vZGUubm9kZVZhbHVlLnRyaW0oKSA9PT0gXCJcIlxuICAgICAgICAgIGlmKCFpc0VtcHR5VGV4dE5vZGUpe1xuICAgICAgICAgICAgbG9nRXJyb3IoXCJvbmx5IEhUTUwgZWxlbWVudCB0YWdzIHdpdGggYW4gaWQgYXJlIGFsbG93ZWQgaW5zaWRlIGNvbnRhaW5lcnMgd2l0aCBwaHgtdXBkYXRlLlxcblxcblwiICtcbiAgICAgICAgICAgICAgYHJlbW92aW5nIGlsbGVnYWwgbm9kZTogXCIkeyhjaGlsZE5vZGUub3V0ZXJIVE1MIHx8IGNoaWxkTm9kZS5ub2RlVmFsdWUpLnRyaW0oKX1cIlxcblxcbmApXG4gICAgICAgICAgfVxuICAgICAgICAgIHRvUmVtb3ZlLnB1c2goY2hpbGROb2RlKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgdG9SZW1vdmUuZm9yRWFjaChjaGlsZE5vZGUgPT4gY2hpbGROb2RlLnJlbW92ZSgpKVxuICAgIH1cbiAgfSxcblxuICByZXBsYWNlUm9vdENvbnRhaW5lcihjb250YWluZXIsIHRhZ05hbWUsIGF0dHJzKXtcbiAgICBsZXQgcmV0YWluZWRBdHRycyA9IG5ldyBTZXQoW1wiaWRcIiwgUEhYX1NFU1NJT04sIFBIWF9TVEFUSUMsIFBIWF9NQUlOLCBQSFhfUk9PVF9JRF0pXG4gICAgaWYoY29udGFpbmVyLnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gdGFnTmFtZS50b0xvd2VyQ2FzZSgpKXtcbiAgICAgIEFycmF5LmZyb20oY29udGFpbmVyLmF0dHJpYnV0ZXMpXG4gICAgICAgIC5maWx0ZXIoYXR0ciA9PiAhcmV0YWluZWRBdHRycy5oYXMoYXR0ci5uYW1lLnRvTG93ZXJDYXNlKCkpKVxuICAgICAgICAuZm9yRWFjaChhdHRyID0+IGNvbnRhaW5lci5yZW1vdmVBdHRyaWJ1dGUoYXR0ci5uYW1lKSlcblxuICAgICAgT2JqZWN0LmtleXMoYXR0cnMpXG4gICAgICAgIC5maWx0ZXIobmFtZSA9PiAhcmV0YWluZWRBdHRycy5oYXMobmFtZS50b0xvd2VyQ2FzZSgpKSlcbiAgICAgICAgLmZvckVhY2goYXR0ciA9PiBjb250YWluZXIuc2V0QXR0cmlidXRlKGF0dHIsIGF0dHJzW2F0dHJdKSlcblxuICAgICAgcmV0dXJuIGNvbnRhaW5lclxuXG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCBuZXdDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZ05hbWUpXG4gICAgICBPYmplY3Qua2V5cyhhdHRycykuZm9yRWFjaChhdHRyID0+IG5ld0NvbnRhaW5lci5zZXRBdHRyaWJ1dGUoYXR0ciwgYXR0cnNbYXR0cl0pKVxuICAgICAgcmV0YWluZWRBdHRycy5mb3JFYWNoKGF0dHIgPT4gbmV3Q29udGFpbmVyLnNldEF0dHJpYnV0ZShhdHRyLCBjb250YWluZXIuZ2V0QXR0cmlidXRlKGF0dHIpKSlcbiAgICAgIG5ld0NvbnRhaW5lci5pbm5lckhUTUwgPSBjb250YWluZXIuaW5uZXJIVE1MXG4gICAgICBjb250YWluZXIucmVwbGFjZVdpdGgobmV3Q29udGFpbmVyKVxuICAgICAgcmV0dXJuIG5ld0NvbnRhaW5lclxuICAgIH1cbiAgfSxcblxuICBnZXRTdGlja3koZWwsIG5hbWUsIGRlZmF1bHRWYWwpe1xuICAgIGxldCBvcCA9IChET00ucHJpdmF0ZShlbCwgXCJzdGlja3lcIikgfHwgW10pLmZpbmQoKFtleGlzdGluZ05hbWUsIF0pID0+IG5hbWUgPT09IGV4aXN0aW5nTmFtZSlcbiAgICBpZihvcCl7XG4gICAgICBsZXQgW19uYW1lLCBfb3AsIHN0YXNoZWRSZXN1bHRdID0gb3BcbiAgICAgIHJldHVybiBzdGFzaGVkUmVzdWx0XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0eXBlb2YoZGVmYXVsdFZhbCkgPT09IFwiZnVuY3Rpb25cIiA/IGRlZmF1bHRWYWwoKSA6IGRlZmF1bHRWYWxcbiAgICB9XG4gIH0sXG5cbiAgZGVsZXRlU3RpY2t5KGVsLCBuYW1lKXtcbiAgICB0aGlzLnVwZGF0ZVByaXZhdGUoZWwsIFwic3RpY2t5XCIsIFtdLCBvcHMgPT4ge1xuICAgICAgcmV0dXJuIG9wcy5maWx0ZXIoKFtleGlzdGluZ05hbWUsIF9dKSA9PiBleGlzdGluZ05hbWUgIT09IG5hbWUpXG4gICAgfSlcbiAgfSxcblxuICBwdXRTdGlja3koZWwsIG5hbWUsIG9wKXtcbiAgICBsZXQgc3Rhc2hlZFJlc3VsdCA9IG9wKGVsKVxuICAgIHRoaXMudXBkYXRlUHJpdmF0ZShlbCwgXCJzdGlja3lcIiwgW10sIG9wcyA9PiB7XG4gICAgICBsZXQgZXhpc3RpbmdJbmRleCA9IG9wcy5maW5kSW5kZXgoKFtleGlzdGluZ05hbWUsIF0pID0+IG5hbWUgPT09IGV4aXN0aW5nTmFtZSlcbiAgICAgIGlmKGV4aXN0aW5nSW5kZXggPj0gMCl7XG4gICAgICAgIG9wc1tleGlzdGluZ0luZGV4XSA9IFtuYW1lLCBvcCwgc3Rhc2hlZFJlc3VsdF1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG9wcy5wdXNoKFtuYW1lLCBvcCwgc3Rhc2hlZFJlc3VsdF0pXG4gICAgICB9XG4gICAgICByZXR1cm4gb3BzXG4gICAgfSlcbiAgfSxcblxuICBhcHBseVN0aWNreU9wZXJhdGlvbnMoZWwpe1xuICAgIGxldCBvcHMgPSBET00ucHJpdmF0ZShlbCwgXCJzdGlja3lcIilcbiAgICBpZighb3BzKXsgcmV0dXJuIH1cblxuICAgIG9wcy5mb3JFYWNoKChbbmFtZSwgb3AsIF9zdGFzaGVkXSkgPT4gdGhpcy5wdXRTdGlja3koZWwsIG5hbWUsIG9wKSlcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBET00iLCAiaW1wb3J0IHtcbiAgUEhYX0FDVElWRV9FTlRSWV9SRUZTLFxuICBQSFhfTElWRV9GSUxFX1VQREFURUQsXG4gIFBIWF9QUkVGTElHSFRFRF9SRUZTXG59IGZyb20gXCIuL2NvbnN0YW50c1wiXG5cbmltcG9ydCB7XG4gIGNoYW5uZWxVcGxvYWRlcixcbiAgbG9nRXJyb3Jcbn0gZnJvbSBcIi4vdXRpbHNcIlxuXG5pbXBvcnQgTGl2ZVVwbG9hZGVyIGZyb20gXCIuL2xpdmVfdXBsb2FkZXJcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBVcGxvYWRFbnRyeSB7XG4gIHN0YXRpYyBpc0FjdGl2ZShmaWxlRWwsIGZpbGUpe1xuICAgIGxldCBpc05ldyA9IGZpbGUuX3BoeFJlZiA9PT0gdW5kZWZpbmVkXG4gICAgbGV0IGFjdGl2ZVJlZnMgPSBmaWxlRWwuZ2V0QXR0cmlidXRlKFBIWF9BQ1RJVkVfRU5UUllfUkVGUykuc3BsaXQoXCIsXCIpXG4gICAgbGV0IGlzQWN0aXZlID0gYWN0aXZlUmVmcy5pbmRleE9mKExpdmVVcGxvYWRlci5nZW5GaWxlUmVmKGZpbGUpKSA+PSAwXG4gICAgcmV0dXJuIGZpbGUuc2l6ZSA+IDAgJiYgKGlzTmV3IHx8IGlzQWN0aXZlKVxuICB9XG5cbiAgc3RhdGljIGlzUHJlZmxpZ2h0ZWQoZmlsZUVsLCBmaWxlKXtcbiAgICBsZXQgcHJlZmxpZ2h0ZWRSZWZzID0gZmlsZUVsLmdldEF0dHJpYnV0ZShQSFhfUFJFRkxJR0hURURfUkVGUykuc3BsaXQoXCIsXCIpXG4gICAgbGV0IGlzUHJlZmxpZ2h0ZWQgPSBwcmVmbGlnaHRlZFJlZnMuaW5kZXhPZihMaXZlVXBsb2FkZXIuZ2VuRmlsZVJlZihmaWxlKSkgPj0gMFxuICAgIHJldHVybiBpc1ByZWZsaWdodGVkICYmIHRoaXMuaXNBY3RpdmUoZmlsZUVsLCBmaWxlKVxuICB9XG5cbiAgY29uc3RydWN0b3IoZmlsZUVsLCBmaWxlLCB2aWV3KXtcbiAgICB0aGlzLnJlZiA9IExpdmVVcGxvYWRlci5nZW5GaWxlUmVmKGZpbGUpXG4gICAgdGhpcy5maWxlRWwgPSBmaWxlRWxcbiAgICB0aGlzLmZpbGUgPSBmaWxlXG4gICAgdGhpcy52aWV3ID0gdmlld1xuICAgIHRoaXMubWV0YSA9IG51bGxcbiAgICB0aGlzLl9pc0NhbmNlbGxlZCA9IGZhbHNlXG4gICAgdGhpcy5faXNEb25lID0gZmFsc2VcbiAgICB0aGlzLl9wcm9ncmVzcyA9IDBcbiAgICB0aGlzLl9sYXN0UHJvZ3Jlc3NTZW50ID0gLTFcbiAgICB0aGlzLl9vbkRvbmUgPSBmdW5jdGlvbiAoKXsgfVxuICAgIHRoaXMuX29uRWxVcGRhdGVkID0gdGhpcy5vbkVsVXBkYXRlZC5iaW5kKHRoaXMpXG4gICAgdGhpcy5maWxlRWwuYWRkRXZlbnRMaXN0ZW5lcihQSFhfTElWRV9GSUxFX1VQREFURUQsIHRoaXMuX29uRWxVcGRhdGVkKVxuICB9XG5cbiAgbWV0YWRhdGEoKXsgcmV0dXJuIHRoaXMubWV0YSB9XG5cbiAgcHJvZ3Jlc3MocHJvZ3Jlc3Mpe1xuICAgIHRoaXMuX3Byb2dyZXNzID0gTWF0aC5mbG9vcihwcm9ncmVzcylcbiAgICBpZih0aGlzLl9wcm9ncmVzcyA+IHRoaXMuX2xhc3RQcm9ncmVzc1NlbnQpe1xuICAgICAgaWYodGhpcy5fcHJvZ3Jlc3MgPj0gMTAwKXtcbiAgICAgICAgdGhpcy5fcHJvZ3Jlc3MgPSAxMDBcbiAgICAgICAgdGhpcy5fbGFzdFByb2dyZXNzU2VudCA9IDEwMFxuICAgICAgICB0aGlzLl9pc0RvbmUgPSB0cnVlXG4gICAgICAgIHRoaXMudmlldy5wdXNoRmlsZVByb2dyZXNzKHRoaXMuZmlsZUVsLCB0aGlzLnJlZiwgMTAwLCAoKSA9PiB7XG4gICAgICAgICAgTGl2ZVVwbG9hZGVyLnVudHJhY2tGaWxlKHRoaXMuZmlsZUVsLCB0aGlzLmZpbGUpXG4gICAgICAgICAgdGhpcy5fb25Eb25lKClcbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX2xhc3RQcm9ncmVzc1NlbnQgPSB0aGlzLl9wcm9ncmVzc1xuICAgICAgICB0aGlzLnZpZXcucHVzaEZpbGVQcm9ncmVzcyh0aGlzLmZpbGVFbCwgdGhpcy5yZWYsIHRoaXMuX3Byb2dyZXNzKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGNhbmNlbCgpe1xuICAgIHRoaXMuX2lzQ2FuY2VsbGVkID0gdHJ1ZVxuICAgIHRoaXMuX2lzRG9uZSA9IHRydWVcbiAgICB0aGlzLl9vbkRvbmUoKVxuICB9XG5cbiAgaXNEb25lKCl7IHJldHVybiB0aGlzLl9pc0RvbmUgfVxuXG4gIGVycm9yKHJlYXNvbiA9IFwiZmFpbGVkXCIpe1xuICAgIHRoaXMuZmlsZUVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoUEhYX0xJVkVfRklMRV9VUERBVEVELCB0aGlzLl9vbkVsVXBkYXRlZClcbiAgICB0aGlzLnZpZXcucHVzaEZpbGVQcm9ncmVzcyh0aGlzLmZpbGVFbCwgdGhpcy5yZWYsIHtlcnJvcjogcmVhc29ufSlcbiAgICBMaXZlVXBsb2FkZXIuY2xlYXJGaWxlcyh0aGlzLmZpbGVFbClcbiAgfVxuXG4gIC8vcHJpdmF0ZVxuXG4gIG9uRG9uZShjYWxsYmFjayl7XG4gICAgdGhpcy5fb25Eb25lID0gKCkgPT4ge1xuICAgICAgdGhpcy5maWxlRWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihQSFhfTElWRV9GSUxFX1VQREFURUQsIHRoaXMuX29uRWxVcGRhdGVkKVxuICAgICAgY2FsbGJhY2soKVxuICAgIH1cbiAgfVxuXG4gIG9uRWxVcGRhdGVkKCl7XG4gICAgbGV0IGFjdGl2ZVJlZnMgPSB0aGlzLmZpbGVFbC5nZXRBdHRyaWJ1dGUoUEhYX0FDVElWRV9FTlRSWV9SRUZTKS5zcGxpdChcIixcIilcbiAgICBpZihhY3RpdmVSZWZzLmluZGV4T2YodGhpcy5yZWYpID09PSAtMSl7IHRoaXMuY2FuY2VsKCkgfVxuICB9XG5cbiAgdG9QcmVmbGlnaHRQYXlsb2FkKCl7XG4gICAgcmV0dXJuIHtcbiAgICAgIGxhc3RfbW9kaWZpZWQ6IHRoaXMuZmlsZS5sYXN0TW9kaWZpZWQsXG4gICAgICBuYW1lOiB0aGlzLmZpbGUubmFtZSxcbiAgICAgIHJlbGF0aXZlX3BhdGg6IHRoaXMuZmlsZS53ZWJraXRSZWxhdGl2ZVBhdGgsXG4gICAgICBzaXplOiB0aGlzLmZpbGUuc2l6ZSxcbiAgICAgIHR5cGU6IHRoaXMuZmlsZS50eXBlLFxuICAgICAgcmVmOiB0aGlzLnJlZlxuICAgIH1cbiAgfVxuXG4gIHVwbG9hZGVyKHVwbG9hZGVycyl7XG4gICAgaWYodGhpcy5tZXRhLnVwbG9hZGVyKXtcbiAgICAgIGxldCBjYWxsYmFjayA9IHVwbG9hZGVyc1t0aGlzLm1ldGEudXBsb2FkZXJdIHx8IGxvZ0Vycm9yKGBubyB1cGxvYWRlciBjb25maWd1cmVkIGZvciAke3RoaXMubWV0YS51cGxvYWRlcn1gKVxuICAgICAgcmV0dXJuIHtuYW1lOiB0aGlzLm1ldGEudXBsb2FkZXIsIGNhbGxiYWNrOiBjYWxsYmFja31cbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHtuYW1lOiBcImNoYW5uZWxcIiwgY2FsbGJhY2s6IGNoYW5uZWxVcGxvYWRlcn1cbiAgICB9XG4gIH1cblxuICB6aXBQb3N0RmxpZ2h0KHJlc3Ape1xuICAgIHRoaXMubWV0YSA9IHJlc3AuZW50cmllc1t0aGlzLnJlZl1cbiAgICBpZighdGhpcy5tZXRhKXsgbG9nRXJyb3IoYG5vIHByZWZsaWdodCB1cGxvYWQgcmVzcG9uc2UgcmV0dXJuZWQgd2l0aCByZWYgJHt0aGlzLnJlZn1gLCB7aW5wdXQ6IHRoaXMuZmlsZUVsLCByZXNwb25zZTogcmVzcH0pIH1cbiAgfVxufVxuIiwgImltcG9ydCB7XG4gIFBIWF9ET05FX1JFRlMsXG4gIFBIWF9QUkVGTElHSFRFRF9SRUZTLFxuICBQSFhfVVBMT0FEX1JFRlxufSBmcm9tIFwiLi9jb25zdGFudHNcIlxuXG5pbXBvcnQge1xufSBmcm9tIFwiLi91dGlsc1wiXG5cbmltcG9ydCBET00gZnJvbSBcIi4vZG9tXCJcbmltcG9ydCBVcGxvYWRFbnRyeSBmcm9tIFwiLi91cGxvYWRfZW50cnlcIlxuXG5sZXQgbGl2ZVVwbG9hZGVyRmlsZVJlZiA9IDBcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTGl2ZVVwbG9hZGVyIHtcbiAgc3RhdGljIGdlbkZpbGVSZWYoZmlsZSl7XG4gICAgbGV0IHJlZiA9IGZpbGUuX3BoeFJlZlxuICAgIGlmKHJlZiAhPT0gdW5kZWZpbmVkKXtcbiAgICAgIHJldHVybiByZWZcbiAgICB9IGVsc2Uge1xuICAgICAgZmlsZS5fcGh4UmVmID0gKGxpdmVVcGxvYWRlckZpbGVSZWYrKykudG9TdHJpbmcoKVxuICAgICAgcmV0dXJuIGZpbGUuX3BoeFJlZlxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBnZXRFbnRyeURhdGFVUkwoaW5wdXRFbCwgcmVmLCBjYWxsYmFjayl7XG4gICAgbGV0IGZpbGUgPSB0aGlzLmFjdGl2ZUZpbGVzKGlucHV0RWwpLmZpbmQoZmlsZSA9PiB0aGlzLmdlbkZpbGVSZWYoZmlsZSkgPT09IHJlZilcbiAgICBjYWxsYmFjayhVUkwuY3JlYXRlT2JqZWN0VVJMKGZpbGUpKVxuICB9XG5cbiAgc3RhdGljIGhhc1VwbG9hZHNJblByb2dyZXNzKGZvcm1FbCl7XG4gICAgbGV0IGFjdGl2ZSA9IDBcbiAgICBET00uZmluZFVwbG9hZElucHV0cyhmb3JtRWwpLmZvckVhY2goaW5wdXQgPT4ge1xuICAgICAgaWYoaW5wdXQuZ2V0QXR0cmlidXRlKFBIWF9QUkVGTElHSFRFRF9SRUZTKSAhPT0gaW5wdXQuZ2V0QXR0cmlidXRlKFBIWF9ET05FX1JFRlMpKXtcbiAgICAgICAgYWN0aXZlKytcbiAgICAgIH1cbiAgICB9KVxuICAgIHJldHVybiBhY3RpdmUgPiAwXG4gIH1cblxuICBzdGF0aWMgc2VyaWFsaXplVXBsb2FkcyhpbnB1dEVsKXtcbiAgICBsZXQgZmlsZXMgPSB0aGlzLmFjdGl2ZUZpbGVzKGlucHV0RWwpXG4gICAgbGV0IGZpbGVEYXRhID0ge31cbiAgICBmaWxlcy5mb3JFYWNoKGZpbGUgPT4ge1xuICAgICAgbGV0IGVudHJ5ID0ge3BhdGg6IGlucHV0RWwubmFtZX1cbiAgICAgIGxldCB1cGxvYWRSZWYgPSBpbnB1dEVsLmdldEF0dHJpYnV0ZShQSFhfVVBMT0FEX1JFRilcbiAgICAgIGZpbGVEYXRhW3VwbG9hZFJlZl0gPSBmaWxlRGF0YVt1cGxvYWRSZWZdIHx8IFtdXG4gICAgICBlbnRyeS5yZWYgPSB0aGlzLmdlbkZpbGVSZWYoZmlsZSlcbiAgICAgIGVudHJ5Lmxhc3RfbW9kaWZpZWQgPSBmaWxlLmxhc3RNb2RpZmllZFxuICAgICAgZW50cnkubmFtZSA9IGZpbGUubmFtZSB8fCBlbnRyeS5yZWZcbiAgICAgIGVudHJ5LnJlbGF0aXZlX3BhdGggPSBmaWxlLndlYmtpdFJlbGF0aXZlUGF0aFxuICAgICAgZW50cnkudHlwZSA9IGZpbGUudHlwZVxuICAgICAgZW50cnkuc2l6ZSA9IGZpbGUuc2l6ZVxuICAgICAgZmlsZURhdGFbdXBsb2FkUmVmXS5wdXNoKGVudHJ5KVxuICAgIH0pXG4gICAgcmV0dXJuIGZpbGVEYXRhXG4gIH1cblxuICBzdGF0aWMgY2xlYXJGaWxlcyhpbnB1dEVsKXtcbiAgICBpbnB1dEVsLnZhbHVlID0gbnVsbFxuICAgIGlucHV0RWwucmVtb3ZlQXR0cmlidXRlKFBIWF9VUExPQURfUkVGKVxuICAgIERPTS5wdXRQcml2YXRlKGlucHV0RWwsIFwiZmlsZXNcIiwgW10pXG4gIH1cblxuICBzdGF0aWMgdW50cmFja0ZpbGUoaW5wdXRFbCwgZmlsZSl7XG4gICAgRE9NLnB1dFByaXZhdGUoaW5wdXRFbCwgXCJmaWxlc1wiLCBET00ucHJpdmF0ZShpbnB1dEVsLCBcImZpbGVzXCIpLmZpbHRlcihmID0+ICFPYmplY3QuaXMoZiwgZmlsZSkpKVxuICB9XG5cbiAgc3RhdGljIHRyYWNrRmlsZXMoaW5wdXRFbCwgZmlsZXMsIGRhdGFUcmFuc2Zlcil7XG4gICAgaWYoaW5wdXRFbC5nZXRBdHRyaWJ1dGUoXCJtdWx0aXBsZVwiKSAhPT0gbnVsbCl7XG4gICAgICBsZXQgbmV3RmlsZXMgPSBmaWxlcy5maWx0ZXIoZmlsZSA9PiAhdGhpcy5hY3RpdmVGaWxlcyhpbnB1dEVsKS5maW5kKGYgPT4gT2JqZWN0LmlzKGYsIGZpbGUpKSlcbiAgICAgIERPTS5wdXRQcml2YXRlKGlucHV0RWwsIFwiZmlsZXNcIiwgdGhpcy5hY3RpdmVGaWxlcyhpbnB1dEVsKS5jb25jYXQobmV3RmlsZXMpKVxuICAgICAgaW5wdXRFbC52YWx1ZSA9IG51bGxcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gUmVzZXQgaW5wdXRFbCBmaWxlcyB0byBhbGlnbiBvdXRwdXQgd2l0aCBwcm9ncmFtbWF0aWMgY2hhbmdlcyAoaS5lLiBkcmFnIGFuZCBkcm9wKVxuICAgICAgaWYoZGF0YVRyYW5zZmVyICYmIGRhdGFUcmFuc2Zlci5maWxlcy5sZW5ndGggPiAwKXsgaW5wdXRFbC5maWxlcyA9IGRhdGFUcmFuc2Zlci5maWxlcyB9XG4gICAgICBET00ucHV0UHJpdmF0ZShpbnB1dEVsLCBcImZpbGVzXCIsIGZpbGVzKVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhY3RpdmVGaWxlSW5wdXRzKGZvcm1FbCl7XG4gICAgbGV0IGZpbGVJbnB1dHMgPSBET00uZmluZFVwbG9hZElucHV0cyhmb3JtRWwpXG4gICAgcmV0dXJuIEFycmF5LmZyb20oZmlsZUlucHV0cykuZmlsdGVyKGVsID0+IGVsLmZpbGVzICYmIHRoaXMuYWN0aXZlRmlsZXMoZWwpLmxlbmd0aCA+IDApXG4gIH1cblxuICBzdGF0aWMgYWN0aXZlRmlsZXMoaW5wdXQpe1xuICAgIHJldHVybiAoRE9NLnByaXZhdGUoaW5wdXQsIFwiZmlsZXNcIikgfHwgW10pLmZpbHRlcihmID0+IFVwbG9hZEVudHJ5LmlzQWN0aXZlKGlucHV0LCBmKSlcbiAgfVxuXG4gIHN0YXRpYyBpbnB1dHNBd2FpdGluZ1ByZWZsaWdodChmb3JtRWwpe1xuICAgIGxldCBmaWxlSW5wdXRzID0gRE9NLmZpbmRVcGxvYWRJbnB1dHMoZm9ybUVsKVxuICAgIHJldHVybiBBcnJheS5mcm9tKGZpbGVJbnB1dHMpLmZpbHRlcihpbnB1dCA9PiB0aGlzLmZpbGVzQXdhaXRpbmdQcmVmbGlnaHQoaW5wdXQpLmxlbmd0aCA+IDApXG4gIH1cblxuICBzdGF0aWMgZmlsZXNBd2FpdGluZ1ByZWZsaWdodChpbnB1dCl7XG4gICAgcmV0dXJuIHRoaXMuYWN0aXZlRmlsZXMoaW5wdXQpLmZpbHRlcihmID0+ICFVcGxvYWRFbnRyeS5pc1ByZWZsaWdodGVkKGlucHV0LCBmKSlcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKGlucHV0RWwsIHZpZXcsIG9uQ29tcGxldGUpe1xuICAgIHRoaXMudmlldyA9IHZpZXdcbiAgICB0aGlzLm9uQ29tcGxldGUgPSBvbkNvbXBsZXRlXG4gICAgdGhpcy5fZW50cmllcyA9XG4gICAgICBBcnJheS5mcm9tKExpdmVVcGxvYWRlci5maWxlc0F3YWl0aW5nUHJlZmxpZ2h0KGlucHV0RWwpIHx8IFtdKVxuICAgICAgICAubWFwKGZpbGUgPT4gbmV3IFVwbG9hZEVudHJ5KGlucHV0RWwsIGZpbGUsIHZpZXcpKVxuXG4gICAgdGhpcy5udW1FbnRyaWVzSW5Qcm9ncmVzcyA9IHRoaXMuX2VudHJpZXMubGVuZ3RoXG4gIH1cblxuICBlbnRyaWVzKCl7IHJldHVybiB0aGlzLl9lbnRyaWVzIH1cblxuICBpbml0QWRhcHRlclVwbG9hZChyZXNwLCBvbkVycm9yLCBsaXZlU29ja2V0KXtcbiAgICB0aGlzLl9lbnRyaWVzID1cbiAgICAgIHRoaXMuX2VudHJpZXMubWFwKGVudHJ5ID0+IHtcbiAgICAgICAgZW50cnkuemlwUG9zdEZsaWdodChyZXNwKVxuICAgICAgICBlbnRyeS5vbkRvbmUoKCkgPT4ge1xuICAgICAgICAgIHRoaXMubnVtRW50cmllc0luUHJvZ3Jlc3MtLVxuICAgICAgICAgIGlmKHRoaXMubnVtRW50cmllc0luUHJvZ3Jlc3MgPT09IDApeyB0aGlzLm9uQ29tcGxldGUoKSB9XG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiBlbnRyeVxuICAgICAgfSlcblxuICAgIGxldCBncm91cGVkRW50cmllcyA9IHRoaXMuX2VudHJpZXMucmVkdWNlKChhY2MsIGVudHJ5KSA9PiB7XG4gICAgICBsZXQge25hbWUsIGNhbGxiYWNrfSA9IGVudHJ5LnVwbG9hZGVyKGxpdmVTb2NrZXQudXBsb2FkZXJzKVxuICAgICAgYWNjW25hbWVdID0gYWNjW25hbWVdIHx8IHtjYWxsYmFjazogY2FsbGJhY2ssIGVudHJpZXM6IFtdfVxuICAgICAgYWNjW25hbWVdLmVudHJpZXMucHVzaChlbnRyeSlcbiAgICAgIHJldHVybiBhY2NcbiAgICB9LCB7fSlcblxuICAgIGZvcihsZXQgbmFtZSBpbiBncm91cGVkRW50cmllcyl7XG4gICAgICBsZXQge2NhbGxiYWNrLCBlbnRyaWVzfSA9IGdyb3VwZWRFbnRyaWVzW25hbWVdXG4gICAgICBjYWxsYmFjayhlbnRyaWVzLCBvbkVycm9yLCByZXNwLCBsaXZlU29ja2V0KVxuICAgIH1cbiAgfVxufVxuIiwgImxldCBBUklBID0ge1xuICBmb2N1c01haW4oKXtcbiAgICBsZXQgdGFyZ2V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIm1haW4gaDEsIG1haW4sIGgxXCIpXG4gICAgaWYodGFyZ2V0KXtcbiAgICAgIGxldCBvcmlnVGFiSW5kZXggPSB0YXJnZXQudGFiSW5kZXhcbiAgICAgIHRhcmdldC50YWJJbmRleCA9IC0xXG4gICAgICB0YXJnZXQuZm9jdXMoKVxuICAgICAgdGFyZ2V0LnRhYkluZGV4ID0gb3JpZ1RhYkluZGV4XG4gICAgfVxuICB9LFxuXG4gIGFueU9mKGluc3RhbmNlLCBjbGFzc2VzKXsgcmV0dXJuIGNsYXNzZXMuZmluZChuYW1lID0+IGluc3RhbmNlIGluc3RhbmNlb2YgbmFtZSkgfSxcblxuICBpc0ZvY3VzYWJsZShlbCwgaW50ZXJhY3RpdmVPbmx5KXtcbiAgICByZXR1cm4oXG4gICAgICAoZWwgaW5zdGFuY2VvZiBIVE1MQW5jaG9yRWxlbWVudCAmJiBlbC5yZWwgIT09IFwiaWdub3JlXCIpIHx8XG4gICAgICAoZWwgaW5zdGFuY2VvZiBIVE1MQXJlYUVsZW1lbnQgJiYgZWwuaHJlZiAhPT0gdW5kZWZpbmVkKSB8fFxuICAgICAgKCFlbC5kaXNhYmxlZCAmJiAodGhpcy5hbnlPZihlbCwgW0hUTUxJbnB1dEVsZW1lbnQsIEhUTUxTZWxlY3RFbGVtZW50LCBIVE1MVGV4dEFyZWFFbGVtZW50LCBIVE1MQnV0dG9uRWxlbWVudF0pKSkgfHxcbiAgICAgIChlbCBpbnN0YW5jZW9mIEhUTUxJRnJhbWVFbGVtZW50KSB8fFxuICAgICAgKGVsLnRhYkluZGV4ID4gMCB8fCAoIWludGVyYWN0aXZlT25seSAmJiBlbC50YWJJbmRleCA9PT0gMCAmJiBlbC5nZXRBdHRyaWJ1dGUoXCJ0YWJpbmRleFwiKSAhPT0gbnVsbCAmJiBlbC5nZXRBdHRyaWJ1dGUoXCJhcmlhLWhpZGRlblwiKSAhPT0gXCJ0cnVlXCIpKVxuICAgIClcbiAgfSxcblxuICBhdHRlbXB0Rm9jdXMoZWwsIGludGVyYWN0aXZlT25seSl7XG4gICAgaWYodGhpcy5pc0ZvY3VzYWJsZShlbCwgaW50ZXJhY3RpdmVPbmx5KSl7IHRyeXsgZWwuZm9jdXMoKSB9IGNhdGNoKGUpe30gfVxuICAgIHJldHVybiAhIWRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgJiYgZG9jdW1lbnQuYWN0aXZlRWxlbWVudC5pc1NhbWVOb2RlKGVsKVxuICB9LFxuXG4gIGZvY3VzRmlyc3RJbnRlcmFjdGl2ZShlbCl7XG4gICAgbGV0IGNoaWxkID0gZWwuZmlyc3RFbGVtZW50Q2hpbGRcbiAgICB3aGlsZShjaGlsZCl7XG4gICAgICBpZih0aGlzLmF0dGVtcHRGb2N1cyhjaGlsZCwgdHJ1ZSkgfHwgdGhpcy5mb2N1c0ZpcnN0SW50ZXJhY3RpdmUoY2hpbGQsIHRydWUpKXtcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgIH1cbiAgICAgIGNoaWxkID0gY2hpbGQubmV4dEVsZW1lbnRTaWJsaW5nXG4gICAgfVxuICB9LFxuXG4gIGZvY3VzRmlyc3QoZWwpe1xuICAgIGxldCBjaGlsZCA9IGVsLmZpcnN0RWxlbWVudENoaWxkXG4gICAgd2hpbGUoY2hpbGQpe1xuICAgICAgaWYodGhpcy5hdHRlbXB0Rm9jdXMoY2hpbGQpIHx8IHRoaXMuZm9jdXNGaXJzdChjaGlsZCkpe1xuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgfVxuICAgICAgY2hpbGQgPSBjaGlsZC5uZXh0RWxlbWVudFNpYmxpbmdcbiAgICB9XG4gIH0sXG5cbiAgZm9jdXNMYXN0KGVsKXtcbiAgICBsZXQgY2hpbGQgPSBlbC5sYXN0RWxlbWVudENoaWxkXG4gICAgd2hpbGUoY2hpbGQpe1xuICAgICAgaWYodGhpcy5hdHRlbXB0Rm9jdXMoY2hpbGQpIHx8IHRoaXMuZm9jdXNMYXN0KGNoaWxkKSl7XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICB9XG4gICAgICBjaGlsZCA9IGNoaWxkLnByZXZpb3VzRWxlbWVudFNpYmxpbmdcbiAgICB9XG4gIH1cbn1cbmV4cG9ydCBkZWZhdWx0IEFSSUEiLCAiaW1wb3J0IHtcbiAgUEhYX0FDVElWRV9FTlRSWV9SRUZTLFxuICBQSFhfTElWRV9GSUxFX1VQREFURUQsXG4gIFBIWF9QUkVGTElHSFRFRF9SRUZTLFxuICBQSFhfVVBMT0FEX1JFRlxufSBmcm9tIFwiLi9jb25zdGFudHNcIlxuXG5pbXBvcnQgTGl2ZVVwbG9hZGVyIGZyb20gXCIuL2xpdmVfdXBsb2FkZXJcIlxuaW1wb3J0IEFSSUEgZnJvbSBcIi4vYXJpYVwiXG5cbmxldCBIb29rcyA9IHtcbiAgTGl2ZUZpbGVVcGxvYWQ6IHtcbiAgICBhY3RpdmVSZWZzKCl7IHJldHVybiB0aGlzLmVsLmdldEF0dHJpYnV0ZShQSFhfQUNUSVZFX0VOVFJZX1JFRlMpIH0sXG5cbiAgICBwcmVmbGlnaHRlZFJlZnMoKXsgcmV0dXJuIHRoaXMuZWwuZ2V0QXR0cmlidXRlKFBIWF9QUkVGTElHSFRFRF9SRUZTKSB9LFxuXG4gICAgbW91bnRlZCgpeyB0aGlzLnByZWZsaWdodGVkV2FzID0gdGhpcy5wcmVmbGlnaHRlZFJlZnMoKSB9LFxuXG4gICAgdXBkYXRlZCgpe1xuICAgICAgbGV0IG5ld1ByZWZsaWdodHMgPSB0aGlzLnByZWZsaWdodGVkUmVmcygpXG4gICAgICBpZih0aGlzLnByZWZsaWdodGVkV2FzICE9PSBuZXdQcmVmbGlnaHRzKXtcbiAgICAgICAgdGhpcy5wcmVmbGlnaHRlZFdhcyA9IG5ld1ByZWZsaWdodHNcbiAgICAgICAgaWYobmV3UHJlZmxpZ2h0cyA9PT0gXCJcIil7XG4gICAgICAgICAgdGhpcy5fX3ZpZXcuY2FuY2VsU3VibWl0KHRoaXMuZWwuZm9ybSlcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZih0aGlzLmFjdGl2ZVJlZnMoKSA9PT0gXCJcIil7IHRoaXMuZWwudmFsdWUgPSBudWxsIH1cbiAgICAgIHRoaXMuZWwuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoUEhYX0xJVkVfRklMRV9VUERBVEVEKSlcbiAgICB9XG4gIH0sXG5cbiAgTGl2ZUltZ1ByZXZpZXc6IHtcbiAgICBtb3VudGVkKCl7XG4gICAgICB0aGlzLnJlZiA9IHRoaXMuZWwuZ2V0QXR0cmlidXRlKFwiZGF0YS1waHgtZW50cnktcmVmXCIpXG4gICAgICB0aGlzLmlucHV0RWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmVsLmdldEF0dHJpYnV0ZShQSFhfVVBMT0FEX1JFRikpXG4gICAgICBMaXZlVXBsb2FkZXIuZ2V0RW50cnlEYXRhVVJMKHRoaXMuaW5wdXRFbCwgdGhpcy5yZWYsIHVybCA9PiB7XG4gICAgICAgIHRoaXMudXJsID0gdXJsXG4gICAgICAgIHRoaXMuZWwuc3JjID0gdXJsXG4gICAgICB9KVxuICAgIH0sXG4gICAgZGVzdHJveWVkKCl7XG4gICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKHRoaXMudXJsKVxuICAgIH1cbiAgfSxcbiAgRm9jdXNXcmFwOiB7XG4gICAgbW91bnRlZCgpe1xuICAgICAgdGhpcy5mb2N1c1N0YXJ0ID0gdGhpcy5lbC5maXJzdEVsZW1lbnRDaGlsZFxuICAgICAgdGhpcy5mb2N1c0VuZCA9IHRoaXMuZWwubGFzdEVsZW1lbnRDaGlsZFxuICAgICAgdGhpcy5mb2N1c1N0YXJ0LmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c1wiLCAoKSA9PiBBUklBLmZvY3VzTGFzdCh0aGlzLmVsKSlcbiAgICAgIHRoaXMuZm9jdXNFbmQuYWRkRXZlbnRMaXN0ZW5lcihcImZvY3VzXCIsICgpID0+IEFSSUEuZm9jdXNGaXJzdCh0aGlzLmVsKSlcbiAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcihcInBoeDpzaG93LWVuZFwiLCAoKSA9PiB0aGlzLmVsLmZvY3VzKCkpXG4gICAgICBpZih3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLmVsKS5kaXNwbGF5ICE9PSBcIm5vbmVcIil7XG4gICAgICAgIEFSSUEuZm9jdXNGaXJzdCh0aGlzLmVsKVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBIb29rc1xuIiwgImltcG9ydCB7XG4gIG1heWJlXG59IGZyb20gXCIuL3V0aWxzXCJcblxuaW1wb3J0IERPTSBmcm9tIFwiLi9kb21cIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBET01Qb3N0TW9ycGhSZXN0b3JlciB7XG4gIGNvbnN0cnVjdG9yKGNvbnRhaW5lckJlZm9yZSwgY29udGFpbmVyQWZ0ZXIsIHVwZGF0ZVR5cGUpe1xuICAgIGxldCBpZHNCZWZvcmUgPSBuZXcgU2V0KClcbiAgICBsZXQgaWRzQWZ0ZXIgPSBuZXcgU2V0KFsuLi5jb250YWluZXJBZnRlci5jaGlsZHJlbl0ubWFwKGNoaWxkID0+IGNoaWxkLmlkKSlcblxuICAgIGxldCBlbGVtZW50c1RvTW9kaWZ5ID0gW11cblxuICAgIEFycmF5LmZyb20oY29udGFpbmVyQmVmb3JlLmNoaWxkcmVuKS5mb3JFYWNoKGNoaWxkID0+IHtcbiAgICAgIGlmKGNoaWxkLmlkKXsgLy8gYWxsIG9mIG91ciBjaGlsZHJlbiBzaG91bGQgYmUgZWxlbWVudHMgd2l0aCBpZHNcbiAgICAgICAgaWRzQmVmb3JlLmFkZChjaGlsZC5pZClcbiAgICAgICAgaWYoaWRzQWZ0ZXIuaGFzKGNoaWxkLmlkKSl7XG4gICAgICAgICAgbGV0IHByZXZpb3VzRWxlbWVudElkID0gY2hpbGQucHJldmlvdXNFbGVtZW50U2libGluZyAmJiBjaGlsZC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nLmlkXG4gICAgICAgICAgZWxlbWVudHNUb01vZGlmeS5wdXNoKHtlbGVtZW50SWQ6IGNoaWxkLmlkLCBwcmV2aW91c0VsZW1lbnRJZDogcHJldmlvdXNFbGVtZW50SWR9KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcblxuICAgIHRoaXMuY29udGFpbmVySWQgPSBjb250YWluZXJBZnRlci5pZFxuICAgIHRoaXMudXBkYXRlVHlwZSA9IHVwZGF0ZVR5cGVcbiAgICB0aGlzLmVsZW1lbnRzVG9Nb2RpZnkgPSBlbGVtZW50c1RvTW9kaWZ5XG4gICAgdGhpcy5lbGVtZW50SWRzVG9BZGQgPSBbLi4uaWRzQWZ0ZXJdLmZpbHRlcihpZCA9PiAhaWRzQmVmb3JlLmhhcyhpZCkpXG4gIH1cblxuICAvLyBXZSBkbyB0aGUgZm9sbG93aW5nIHRvIG9wdGltaXplIGFwcGVuZC9wcmVwZW5kIG9wZXJhdGlvbnM6XG4gIC8vICAgMSkgVHJhY2sgaWRzIG9mIG1vZGlmaWVkIGVsZW1lbnRzICYgb2YgbmV3IGVsZW1lbnRzXG4gIC8vICAgMikgQWxsIHRoZSBtb2RpZmllZCBlbGVtZW50cyBhcmUgcHV0IGJhY2sgaW4gdGhlIGNvcnJlY3QgcG9zaXRpb24gaW4gdGhlIERPTSB0cmVlXG4gIC8vICAgICAgYnkgc3RvcmluZyB0aGUgaWQgb2YgdGhlaXIgcHJldmlvdXMgc2libGluZ1xuICAvLyAgIDMpIE5ldyBlbGVtZW50cyBhcmUgZ29pbmcgdG8gYmUgcHV0IGluIHRoZSByaWdodCBwbGFjZSBieSBtb3JwaGRvbSBkdXJpbmcgYXBwZW5kLlxuICAvLyAgICAgIEZvciBwcmVwZW5kLCB3ZSBtb3ZlIHRoZW0gdG8gdGhlIGZpcnN0IHBvc2l0aW9uIGluIHRoZSBjb250YWluZXJcbiAgcGVyZm9ybSgpe1xuICAgIGxldCBjb250YWluZXIgPSBET00uYnlJZCh0aGlzLmNvbnRhaW5lcklkKVxuICAgIHRoaXMuZWxlbWVudHNUb01vZGlmeS5mb3JFYWNoKGVsZW1lbnRUb01vZGlmeSA9PiB7XG4gICAgICBpZihlbGVtZW50VG9Nb2RpZnkucHJldmlvdXNFbGVtZW50SWQpe1xuICAgICAgICBtYXliZShkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbGVtZW50VG9Nb2RpZnkucHJldmlvdXNFbGVtZW50SWQpLCBwcmV2aW91c0VsZW0gPT4ge1xuICAgICAgICAgIG1heWJlKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1lbnRUb01vZGlmeS5lbGVtZW50SWQpLCBlbGVtID0+IHtcbiAgICAgICAgICAgIGxldCBpc0luUmlnaHRQbGFjZSA9IGVsZW0ucHJldmlvdXNFbGVtZW50U2libGluZyAmJiBlbGVtLnByZXZpb3VzRWxlbWVudFNpYmxpbmcuaWQgPT0gcHJldmlvdXNFbGVtLmlkXG4gICAgICAgICAgICBpZighaXNJblJpZ2h0UGxhY2Upe1xuICAgICAgICAgICAgICBwcmV2aW91c0VsZW0uaW5zZXJ0QWRqYWNlbnRFbGVtZW50KFwiYWZ0ZXJlbmRcIiwgZWxlbSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gVGhpcyBpcyB0aGUgZmlyc3QgZWxlbWVudCBpbiB0aGUgY29udGFpbmVyXG4gICAgICAgIG1heWJlKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1lbnRUb01vZGlmeS5lbGVtZW50SWQpLCBlbGVtID0+IHtcbiAgICAgICAgICBsZXQgaXNJblJpZ2h0UGxhY2UgPSBlbGVtLnByZXZpb3VzRWxlbWVudFNpYmxpbmcgPT0gbnVsbFxuICAgICAgICAgIGlmKCFpc0luUmlnaHRQbGFjZSl7XG4gICAgICAgICAgICBjb250YWluZXIuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KFwiYWZ0ZXJiZWdpblwiLCBlbGVtKVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgaWYodGhpcy51cGRhdGVUeXBlID09IFwicHJlcGVuZFwiKXtcbiAgICAgIHRoaXMuZWxlbWVudElkc1RvQWRkLnJldmVyc2UoKS5mb3JFYWNoKGVsZW1JZCA9PiB7XG4gICAgICAgIG1heWJlKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1JZCksIGVsZW0gPT4gY29udGFpbmVyLmluc2VydEFkamFjZW50RWxlbWVudChcImFmdGVyYmVnaW5cIiwgZWxlbSkpXG4gICAgICB9KVxuICAgIH1cbiAgfVxufVxuIiwgInZhciBET0NVTUVOVF9GUkFHTUVOVF9OT0RFID0gMTE7XG5cbmZ1bmN0aW9uIG1vcnBoQXR0cnMoZnJvbU5vZGUsIHRvTm9kZSkge1xuICAgIHZhciB0b05vZGVBdHRycyA9IHRvTm9kZS5hdHRyaWJ1dGVzO1xuICAgIHZhciBhdHRyO1xuICAgIHZhciBhdHRyTmFtZTtcbiAgICB2YXIgYXR0ck5hbWVzcGFjZVVSSTtcbiAgICB2YXIgYXR0clZhbHVlO1xuICAgIHZhciBmcm9tVmFsdWU7XG5cbiAgICAvLyBkb2N1bWVudC1mcmFnbWVudHMgZG9udCBoYXZlIGF0dHJpYnV0ZXMgc28gbGV0cyBub3QgZG8gYW55dGhpbmdcbiAgICBpZiAodG9Ob2RlLm5vZGVUeXBlID09PSBET0NVTUVOVF9GUkFHTUVOVF9OT0RFIHx8IGZyb21Ob2RlLm5vZGVUeXBlID09PSBET0NVTUVOVF9GUkFHTUVOVF9OT0RFKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gdXBkYXRlIGF0dHJpYnV0ZXMgb24gb3JpZ2luYWwgRE9NIGVsZW1lbnRcbiAgICBmb3IgKHZhciBpID0gdG9Ob2RlQXR0cnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgYXR0ciA9IHRvTm9kZUF0dHJzW2ldO1xuICAgICAgICBhdHRyTmFtZSA9IGF0dHIubmFtZTtcbiAgICAgICAgYXR0ck5hbWVzcGFjZVVSSSA9IGF0dHIubmFtZXNwYWNlVVJJO1xuICAgICAgICBhdHRyVmFsdWUgPSBhdHRyLnZhbHVlO1xuXG4gICAgICAgIGlmIChhdHRyTmFtZXNwYWNlVVJJKSB7XG4gICAgICAgICAgICBhdHRyTmFtZSA9IGF0dHIubG9jYWxOYW1lIHx8IGF0dHJOYW1lO1xuICAgICAgICAgICAgZnJvbVZhbHVlID0gZnJvbU5vZGUuZ2V0QXR0cmlidXRlTlMoYXR0ck5hbWVzcGFjZVVSSSwgYXR0ck5hbWUpO1xuXG4gICAgICAgICAgICBpZiAoZnJvbVZhbHVlICE9PSBhdHRyVmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpZiAoYXR0ci5wcmVmaXggPT09ICd4bWxucycpe1xuICAgICAgICAgICAgICAgICAgICBhdHRyTmFtZSA9IGF0dHIubmFtZTsgLy8gSXQncyBub3QgYWxsb3dlZCB0byBzZXQgYW4gYXR0cmlidXRlIHdpdGggdGhlIFhNTE5TIG5hbWVzcGFjZSB3aXRob3V0IHNwZWNpZnlpbmcgdGhlIGB4bWxuc2AgcHJlZml4XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZyb21Ob2RlLnNldEF0dHJpYnV0ZU5TKGF0dHJOYW1lc3BhY2VVUkksIGF0dHJOYW1lLCBhdHRyVmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZnJvbVZhbHVlID0gZnJvbU5vZGUuZ2V0QXR0cmlidXRlKGF0dHJOYW1lKTtcblxuICAgICAgICAgICAgaWYgKGZyb21WYWx1ZSAhPT0gYXR0clZhbHVlKSB7XG4gICAgICAgICAgICAgICAgZnJvbU5vZGUuc2V0QXR0cmlidXRlKGF0dHJOYW1lLCBhdHRyVmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gUmVtb3ZlIGFueSBleHRyYSBhdHRyaWJ1dGVzIGZvdW5kIG9uIHRoZSBvcmlnaW5hbCBET00gZWxlbWVudCB0aGF0XG4gICAgLy8gd2VyZW4ndCBmb3VuZCBvbiB0aGUgdGFyZ2V0IGVsZW1lbnQuXG4gICAgdmFyIGZyb21Ob2RlQXR0cnMgPSBmcm9tTm9kZS5hdHRyaWJ1dGVzO1xuXG4gICAgZm9yICh2YXIgZCA9IGZyb21Ob2RlQXR0cnMubGVuZ3RoIC0gMTsgZCA+PSAwOyBkLS0pIHtcbiAgICAgICAgYXR0ciA9IGZyb21Ob2RlQXR0cnNbZF07XG4gICAgICAgIGF0dHJOYW1lID0gYXR0ci5uYW1lO1xuICAgICAgICBhdHRyTmFtZXNwYWNlVVJJID0gYXR0ci5uYW1lc3BhY2VVUkk7XG5cbiAgICAgICAgaWYgKGF0dHJOYW1lc3BhY2VVUkkpIHtcbiAgICAgICAgICAgIGF0dHJOYW1lID0gYXR0ci5sb2NhbE5hbWUgfHwgYXR0ck5hbWU7XG5cbiAgICAgICAgICAgIGlmICghdG9Ob2RlLmhhc0F0dHJpYnV0ZU5TKGF0dHJOYW1lc3BhY2VVUkksIGF0dHJOYW1lKSkge1xuICAgICAgICAgICAgICAgIGZyb21Ob2RlLnJlbW92ZUF0dHJpYnV0ZU5TKGF0dHJOYW1lc3BhY2VVUkksIGF0dHJOYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmICghdG9Ob2RlLmhhc0F0dHJpYnV0ZShhdHRyTmFtZSkpIHtcbiAgICAgICAgICAgICAgICBmcm9tTm9kZS5yZW1vdmVBdHRyaWJ1dGUoYXR0ck5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG52YXIgcmFuZ2U7IC8vIENyZWF0ZSBhIHJhbmdlIG9iamVjdCBmb3IgZWZmaWNlbnRseSByZW5kZXJpbmcgc3RyaW5ncyB0byBlbGVtZW50cy5cbnZhciBOU19YSFRNTCA9ICdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sJztcblxudmFyIGRvYyA9IHR5cGVvZiBkb2N1bWVudCA9PT0gJ3VuZGVmaW5lZCcgPyB1bmRlZmluZWQgOiBkb2N1bWVudDtcbnZhciBIQVNfVEVNUExBVEVfU1VQUE9SVCA9ICEhZG9jICYmICdjb250ZW50JyBpbiBkb2MuY3JlYXRlRWxlbWVudCgndGVtcGxhdGUnKTtcbnZhciBIQVNfUkFOR0VfU1VQUE9SVCA9ICEhZG9jICYmIGRvYy5jcmVhdGVSYW5nZSAmJiAnY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50JyBpbiBkb2MuY3JlYXRlUmFuZ2UoKTtcblxuZnVuY3Rpb24gY3JlYXRlRnJhZ21lbnRGcm9tVGVtcGxhdGUoc3RyKSB7XG4gICAgdmFyIHRlbXBsYXRlID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ3RlbXBsYXRlJyk7XG4gICAgdGVtcGxhdGUuaW5uZXJIVE1MID0gc3RyO1xuICAgIHJldHVybiB0ZW1wbGF0ZS5jb250ZW50LmNoaWxkTm9kZXNbMF07XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUZyYWdtZW50RnJvbVJhbmdlKHN0cikge1xuICAgIGlmICghcmFuZ2UpIHtcbiAgICAgICAgcmFuZ2UgPSBkb2MuY3JlYXRlUmFuZ2UoKTtcbiAgICAgICAgcmFuZ2Uuc2VsZWN0Tm9kZShkb2MuYm9keSk7XG4gICAgfVxuXG4gICAgdmFyIGZyYWdtZW50ID0gcmFuZ2UuY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50KHN0cik7XG4gICAgcmV0dXJuIGZyYWdtZW50LmNoaWxkTm9kZXNbMF07XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUZyYWdtZW50RnJvbVdyYXAoc3RyKSB7XG4gICAgdmFyIGZyYWdtZW50ID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ2JvZHknKTtcbiAgICBmcmFnbWVudC5pbm5lckhUTUwgPSBzdHI7XG4gICAgcmV0dXJuIGZyYWdtZW50LmNoaWxkTm9kZXNbMF07XG59XG5cbi8qKlxuICogVGhpcyBpcyBhYm91dCB0aGUgc2FtZVxuICogdmFyIGh0bWwgPSBuZXcgRE9NUGFyc2VyKCkucGFyc2VGcm9tU3RyaW5nKHN0ciwgJ3RleHQvaHRtbCcpO1xuICogcmV0dXJuIGh0bWwuYm9keS5maXJzdENoaWxkO1xuICpcbiAqIEBtZXRob2QgdG9FbGVtZW50XG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKi9cbmZ1bmN0aW9uIHRvRWxlbWVudChzdHIpIHtcbiAgICBzdHIgPSBzdHIudHJpbSgpO1xuICAgIGlmIChIQVNfVEVNUExBVEVfU1VQUE9SVCkge1xuICAgICAgLy8gYXZvaWQgcmVzdHJpY3Rpb25zIG9uIGNvbnRlbnQgZm9yIHRoaW5ncyBsaWtlIGA8dHI+PHRoPkhpPC90aD48L3RyPmAgd2hpY2hcbiAgICAgIC8vIGNyZWF0ZUNvbnRleHR1YWxGcmFnbWVudCBkb2Vzbid0IHN1cHBvcnRcbiAgICAgIC8vIDx0ZW1wbGF0ZT4gc3VwcG9ydCBub3QgYXZhaWxhYmxlIGluIElFXG4gICAgICByZXR1cm4gY3JlYXRlRnJhZ21lbnRGcm9tVGVtcGxhdGUoc3RyKTtcbiAgICB9IGVsc2UgaWYgKEhBU19SQU5HRV9TVVBQT1JUKSB7XG4gICAgICByZXR1cm4gY3JlYXRlRnJhZ21lbnRGcm9tUmFuZ2Uoc3RyKTtcbiAgICB9XG5cbiAgICByZXR1cm4gY3JlYXRlRnJhZ21lbnRGcm9tV3JhcChzdHIpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0d28gbm9kZSdzIG5hbWVzIGFyZSB0aGUgc2FtZS5cbiAqXG4gKiBOT1RFOiBXZSBkb24ndCBib3RoZXIgY2hlY2tpbmcgYG5hbWVzcGFjZVVSSWAgYmVjYXVzZSB5b3Ugd2lsbCBuZXZlciBmaW5kIHR3byBIVE1MIGVsZW1lbnRzIHdpdGggdGhlIHNhbWVcbiAqICAgICAgIG5vZGVOYW1lIGFuZCBkaWZmZXJlbnQgbmFtZXNwYWNlIFVSSXMuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBhXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGIgVGhlIHRhcmdldCBlbGVtZW50XG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5mdW5jdGlvbiBjb21wYXJlTm9kZU5hbWVzKGZyb21FbCwgdG9FbCkge1xuICAgIHZhciBmcm9tTm9kZU5hbWUgPSBmcm9tRWwubm9kZU5hbWU7XG4gICAgdmFyIHRvTm9kZU5hbWUgPSB0b0VsLm5vZGVOYW1lO1xuICAgIHZhciBmcm9tQ29kZVN0YXJ0LCB0b0NvZGVTdGFydDtcblxuICAgIGlmIChmcm9tTm9kZU5hbWUgPT09IHRvTm9kZU5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgZnJvbUNvZGVTdGFydCA9IGZyb21Ob2RlTmFtZS5jaGFyQ29kZUF0KDApO1xuICAgIHRvQ29kZVN0YXJ0ID0gdG9Ob2RlTmFtZS5jaGFyQ29kZUF0KDApO1xuXG4gICAgLy8gSWYgdGhlIHRhcmdldCBlbGVtZW50IGlzIGEgdmlydHVhbCBET00gbm9kZSBvciBTVkcgbm9kZSB0aGVuIHdlIG1heVxuICAgIC8vIG5lZWQgdG8gbm9ybWFsaXplIHRoZSB0YWcgbmFtZSBiZWZvcmUgY29tcGFyaW5nLiBOb3JtYWwgSFRNTCBlbGVtZW50cyB0aGF0IGFyZVxuICAgIC8vIGluIHRoZSBcImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWxcIlxuICAgIC8vIGFyZSBjb252ZXJ0ZWQgdG8gdXBwZXIgY2FzZVxuICAgIGlmIChmcm9tQ29kZVN0YXJ0IDw9IDkwICYmIHRvQ29kZVN0YXJ0ID49IDk3KSB7IC8vIGZyb20gaXMgdXBwZXIgYW5kIHRvIGlzIGxvd2VyXG4gICAgICAgIHJldHVybiBmcm9tTm9kZU5hbWUgPT09IHRvTm9kZU5hbWUudG9VcHBlckNhc2UoKTtcbiAgICB9IGVsc2UgaWYgKHRvQ29kZVN0YXJ0IDw9IDkwICYmIGZyb21Db2RlU3RhcnQgPj0gOTcpIHsgLy8gdG8gaXMgdXBwZXIgYW5kIGZyb20gaXMgbG93ZXJcbiAgICAgICAgcmV0dXJuIHRvTm9kZU5hbWUgPT09IGZyb21Ob2RlTmFtZS50b1VwcGVyQ2FzZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5cbi8qKlxuICogQ3JlYXRlIGFuIGVsZW1lbnQsIG9wdGlvbmFsbHkgd2l0aCBhIGtub3duIG5hbWVzcGFjZSBVUkkuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgdGhlIGVsZW1lbnQgbmFtZSwgZS5nLiAnZGl2JyBvciAnc3ZnJ1xuICogQHBhcmFtIHtzdHJpbmd9IFtuYW1lc3BhY2VVUkldIHRoZSBlbGVtZW50J3MgbmFtZXNwYWNlIFVSSSwgaS5lLiB0aGUgdmFsdWUgb2ZcbiAqIGl0cyBgeG1sbnNgIGF0dHJpYnV0ZSBvciBpdHMgaW5mZXJyZWQgbmFtZXNwYWNlLlxuICpcbiAqIEByZXR1cm4ge0VsZW1lbnR9XG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnROUyhuYW1lLCBuYW1lc3BhY2VVUkkpIHtcbiAgICByZXR1cm4gIW5hbWVzcGFjZVVSSSB8fCBuYW1lc3BhY2VVUkkgPT09IE5TX1hIVE1MID9cbiAgICAgICAgZG9jLmNyZWF0ZUVsZW1lbnQobmFtZSkgOlxuICAgICAgICBkb2MuY3JlYXRlRWxlbWVudE5TKG5hbWVzcGFjZVVSSSwgbmFtZSk7XG59XG5cbi8qKlxuICogQ29waWVzIHRoZSBjaGlsZHJlbiBvZiBvbmUgRE9NIGVsZW1lbnQgdG8gYW5vdGhlciBET00gZWxlbWVudFxuICovXG5mdW5jdGlvbiBtb3ZlQ2hpbGRyZW4oZnJvbUVsLCB0b0VsKSB7XG4gICAgdmFyIGN1ckNoaWxkID0gZnJvbUVsLmZpcnN0Q2hpbGQ7XG4gICAgd2hpbGUgKGN1ckNoaWxkKSB7XG4gICAgICAgIHZhciBuZXh0Q2hpbGQgPSBjdXJDaGlsZC5uZXh0U2libGluZztcbiAgICAgICAgdG9FbC5hcHBlbmRDaGlsZChjdXJDaGlsZCk7XG4gICAgICAgIGN1ckNoaWxkID0gbmV4dENoaWxkO1xuICAgIH1cbiAgICByZXR1cm4gdG9FbDtcbn1cblxuZnVuY3Rpb24gc3luY0Jvb2xlYW5BdHRyUHJvcChmcm9tRWwsIHRvRWwsIG5hbWUpIHtcbiAgICBpZiAoZnJvbUVsW25hbWVdICE9PSB0b0VsW25hbWVdKSB7XG4gICAgICAgIGZyb21FbFtuYW1lXSA9IHRvRWxbbmFtZV07XG4gICAgICAgIGlmIChmcm9tRWxbbmFtZV0pIHtcbiAgICAgICAgICAgIGZyb21FbC5zZXRBdHRyaWJ1dGUobmFtZSwgJycpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZnJvbUVsLnJlbW92ZUF0dHJpYnV0ZShuYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxudmFyIHNwZWNpYWxFbEhhbmRsZXJzID0ge1xuICAgIE9QVElPTjogZnVuY3Rpb24oZnJvbUVsLCB0b0VsKSB7XG4gICAgICAgIHZhciBwYXJlbnROb2RlID0gZnJvbUVsLnBhcmVudE5vZGU7XG4gICAgICAgIGlmIChwYXJlbnROb2RlKSB7XG4gICAgICAgICAgICB2YXIgcGFyZW50TmFtZSA9IHBhcmVudE5vZGUubm9kZU5hbWUudG9VcHBlckNhc2UoKTtcbiAgICAgICAgICAgIGlmIChwYXJlbnROYW1lID09PSAnT1BUR1JPVVAnKSB7XG4gICAgICAgICAgICAgICAgcGFyZW50Tm9kZSA9IHBhcmVudE5vZGUucGFyZW50Tm9kZTtcbiAgICAgICAgICAgICAgICBwYXJlbnROYW1lID0gcGFyZW50Tm9kZSAmJiBwYXJlbnROb2RlLm5vZGVOYW1lLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocGFyZW50TmFtZSA9PT0gJ1NFTEVDVCcgJiYgIXBhcmVudE5vZGUuaGFzQXR0cmlidXRlKCdtdWx0aXBsZScpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGZyb21FbC5oYXNBdHRyaWJ1dGUoJ3NlbGVjdGVkJykgJiYgIXRvRWwuc2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gV29ya2Fyb3VuZCBmb3IgTVMgRWRnZSBidWcgd2hlcmUgdGhlICdzZWxlY3RlZCcgYXR0cmlidXRlIGNhbiBvbmx5IGJlXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlbW92ZWQgaWYgc2V0IHRvIGEgbm9uLWVtcHR5IHZhbHVlOlxuICAgICAgICAgICAgICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5taWNyb3NvZnQuY29tL2VuLXVzL21pY3Jvc29mdC1lZGdlL3BsYXRmb3JtL2lzc3Vlcy8xMjA4NzY3OS9cbiAgICAgICAgICAgICAgICAgICAgZnJvbUVsLnNldEF0dHJpYnV0ZSgnc2VsZWN0ZWQnLCAnc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgZnJvbUVsLnJlbW92ZUF0dHJpYnV0ZSgnc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gV2UgaGF2ZSB0byByZXNldCBzZWxlY3QgZWxlbWVudCdzIHNlbGVjdGVkSW5kZXggdG8gLTEsIG90aGVyd2lzZSBzZXR0aW5nXG4gICAgICAgICAgICAgICAgLy8gZnJvbUVsLnNlbGVjdGVkIHVzaW5nIHRoZSBzeW5jQm9vbGVhbkF0dHJQcm9wIGJlbG93IGhhcyBubyBlZmZlY3QuXG4gICAgICAgICAgICAgICAgLy8gVGhlIGNvcnJlY3Qgc2VsZWN0ZWRJbmRleCB3aWxsIGJlIHNldCBpbiB0aGUgU0VMRUNUIHNwZWNpYWwgaGFuZGxlciBiZWxvdy5cbiAgICAgICAgICAgICAgICBwYXJlbnROb2RlLnNlbGVjdGVkSW5kZXggPSAtMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzeW5jQm9vbGVhbkF0dHJQcm9wKGZyb21FbCwgdG9FbCwgJ3NlbGVjdGVkJyk7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBUaGUgXCJ2YWx1ZVwiIGF0dHJpYnV0ZSBpcyBzcGVjaWFsIGZvciB0aGUgPGlucHV0PiBlbGVtZW50IHNpbmNlIGl0IHNldHNcbiAgICAgKiB0aGUgaW5pdGlhbCB2YWx1ZS4gQ2hhbmdpbmcgdGhlIFwidmFsdWVcIiBhdHRyaWJ1dGUgd2l0aG91dCBjaGFuZ2luZyB0aGVcbiAgICAgKiBcInZhbHVlXCIgcHJvcGVydHkgd2lsbCBoYXZlIG5vIGVmZmVjdCBzaW5jZSBpdCBpcyBvbmx5IHVzZWQgdG8gdGhlIHNldCB0aGVcbiAgICAgKiBpbml0aWFsIHZhbHVlLiAgU2ltaWxhciBmb3IgdGhlIFwiY2hlY2tlZFwiIGF0dHJpYnV0ZSwgYW5kIFwiZGlzYWJsZWRcIi5cbiAgICAgKi9cbiAgICBJTlBVVDogZnVuY3Rpb24oZnJvbUVsLCB0b0VsKSB7XG4gICAgICAgIHN5bmNCb29sZWFuQXR0clByb3AoZnJvbUVsLCB0b0VsLCAnY2hlY2tlZCcpO1xuICAgICAgICBzeW5jQm9vbGVhbkF0dHJQcm9wKGZyb21FbCwgdG9FbCwgJ2Rpc2FibGVkJyk7XG5cbiAgICAgICAgaWYgKGZyb21FbC52YWx1ZSAhPT0gdG9FbC52YWx1ZSkge1xuICAgICAgICAgICAgZnJvbUVsLnZhbHVlID0gdG9FbC52YWx1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdG9FbC5oYXNBdHRyaWJ1dGUoJ3ZhbHVlJykpIHtcbiAgICAgICAgICAgIGZyb21FbC5yZW1vdmVBdHRyaWJ1dGUoJ3ZhbHVlJyk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgVEVYVEFSRUE6IGZ1bmN0aW9uKGZyb21FbCwgdG9FbCkge1xuICAgICAgICB2YXIgbmV3VmFsdWUgPSB0b0VsLnZhbHVlO1xuICAgICAgICBpZiAoZnJvbUVsLnZhbHVlICE9PSBuZXdWYWx1ZSkge1xuICAgICAgICAgICAgZnJvbUVsLnZhbHVlID0gbmV3VmFsdWU7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZmlyc3RDaGlsZCA9IGZyb21FbC5maXJzdENoaWxkO1xuICAgICAgICBpZiAoZmlyc3RDaGlsZCkge1xuICAgICAgICAgICAgLy8gTmVlZGVkIGZvciBJRS4gQXBwYXJlbnRseSBJRSBzZXRzIHRoZSBwbGFjZWhvbGRlciBhcyB0aGVcbiAgICAgICAgICAgIC8vIG5vZGUgdmFsdWUgYW5kIHZpc2UgdmVyc2EuIFRoaXMgaWdub3JlcyBhbiBlbXB0eSB1cGRhdGUuXG4gICAgICAgICAgICB2YXIgb2xkVmFsdWUgPSBmaXJzdENoaWxkLm5vZGVWYWx1ZTtcblxuICAgICAgICAgICAgaWYgKG9sZFZhbHVlID09IG5ld1ZhbHVlIHx8ICghbmV3VmFsdWUgJiYgb2xkVmFsdWUgPT0gZnJvbUVsLnBsYWNlaG9sZGVyKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZmlyc3RDaGlsZC5ub2RlVmFsdWUgPSBuZXdWYWx1ZTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgU0VMRUNUOiBmdW5jdGlvbihmcm9tRWwsIHRvRWwpIHtcbiAgICAgICAgaWYgKCF0b0VsLmhhc0F0dHJpYnV0ZSgnbXVsdGlwbGUnKSkge1xuICAgICAgICAgICAgdmFyIHNlbGVjdGVkSW5kZXggPSAtMTtcbiAgICAgICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgICAgIC8vIFdlIGhhdmUgdG8gbG9vcCB0aHJvdWdoIGNoaWxkcmVuIG9mIGZyb21FbCwgbm90IHRvRWwgc2luY2Ugbm9kZXMgY2FuIGJlIG1vdmVkXG4gICAgICAgICAgICAvLyBmcm9tIHRvRWwgdG8gZnJvbUVsIGRpcmVjdGx5IHdoZW4gbW9ycGhpbmcuXG4gICAgICAgICAgICAvLyBBdCB0aGUgdGltZSB0aGlzIHNwZWNpYWwgaGFuZGxlciBpcyBpbnZva2VkLCBhbGwgY2hpbGRyZW4gaGF2ZSBhbHJlYWR5IGJlZW4gbW9ycGhlZFxuICAgICAgICAgICAgLy8gYW5kIGFwcGVuZGVkIHRvIC8gcmVtb3ZlZCBmcm9tIGZyb21FbCwgc28gdXNpbmcgZnJvbUVsIGhlcmUgaXMgc2FmZSBhbmQgY29ycmVjdC5cbiAgICAgICAgICAgIHZhciBjdXJDaGlsZCA9IGZyb21FbC5maXJzdENoaWxkO1xuICAgICAgICAgICAgdmFyIG9wdGdyb3VwO1xuICAgICAgICAgICAgdmFyIG5vZGVOYW1lO1xuICAgICAgICAgICAgd2hpbGUoY3VyQ2hpbGQpIHtcbiAgICAgICAgICAgICAgICBub2RlTmFtZSA9IGN1ckNoaWxkLm5vZGVOYW1lICYmIGN1ckNoaWxkLm5vZGVOYW1lLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgaWYgKG5vZGVOYW1lID09PSAnT1BUR1JPVVAnKSB7XG4gICAgICAgICAgICAgICAgICAgIG9wdGdyb3VwID0gY3VyQ2hpbGQ7XG4gICAgICAgICAgICAgICAgICAgIGN1ckNoaWxkID0gb3B0Z3JvdXAuZmlyc3RDaGlsZDtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAobm9kZU5hbWUgPT09ICdPUFRJT04nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VyQ2hpbGQuaGFzQXR0cmlidXRlKCdzZWxlY3RlZCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRJbmRleCA9IGk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY3VyQ2hpbGQgPSBjdXJDaGlsZC5uZXh0U2libGluZztcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjdXJDaGlsZCAmJiBvcHRncm91cCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VyQ2hpbGQgPSBvcHRncm91cC5uZXh0U2libGluZztcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGdyb3VwID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnJvbUVsLnNlbGVjdGVkSW5kZXggPSBzZWxlY3RlZEluZGV4O1xuICAgICAgICB9XG4gICAgfVxufTtcblxudmFyIEVMRU1FTlRfTk9ERSA9IDE7XG52YXIgRE9DVU1FTlRfRlJBR01FTlRfTk9ERSQxID0gMTE7XG52YXIgVEVYVF9OT0RFID0gMztcbnZhciBDT01NRU5UX05PREUgPSA4O1xuXG5mdW5jdGlvbiBub29wKCkge31cblxuZnVuY3Rpb24gZGVmYXVsdEdldE5vZGVLZXkobm9kZSkge1xuICBpZiAobm9kZSkge1xuICAgIHJldHVybiAobm9kZS5nZXRBdHRyaWJ1dGUgJiYgbm9kZS5nZXRBdHRyaWJ1dGUoJ2lkJykpIHx8IG5vZGUuaWQ7XG4gIH1cbn1cblxuZnVuY3Rpb24gbW9ycGhkb21GYWN0b3J5KG1vcnBoQXR0cnMpIHtcblxuICByZXR1cm4gZnVuY3Rpb24gbW9ycGhkb20oZnJvbU5vZGUsIHRvTm9kZSwgb3B0aW9ucykge1xuICAgIGlmICghb3B0aW9ucykge1xuICAgICAgb3B0aW9ucyA9IHt9O1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgdG9Ob2RlID09PSAnc3RyaW5nJykge1xuICAgICAgaWYgKGZyb21Ob2RlLm5vZGVOYW1lID09PSAnI2RvY3VtZW50JyB8fCBmcm9tTm9kZS5ub2RlTmFtZSA9PT0gJ0hUTUwnIHx8IGZyb21Ob2RlLm5vZGVOYW1lID09PSAnQk9EWScpIHtcbiAgICAgICAgdmFyIHRvTm9kZUh0bWwgPSB0b05vZGU7XG4gICAgICAgIHRvTm9kZSA9IGRvYy5jcmVhdGVFbGVtZW50KCdodG1sJyk7XG4gICAgICAgIHRvTm9kZS5pbm5lckhUTUwgPSB0b05vZGVIdG1sO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdG9Ob2RlID0gdG9FbGVtZW50KHRvTm9kZSk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0b05vZGUubm9kZVR5cGUgPT09IERPQ1VNRU5UX0ZSQUdNRU5UX05PREUkMSkge1xuICAgICAgdG9Ob2RlID0gdG9Ob2RlLmZpcnN0RWxlbWVudENoaWxkO1xuICAgIH1cblxuICAgIHZhciBnZXROb2RlS2V5ID0gb3B0aW9ucy5nZXROb2RlS2V5IHx8IGRlZmF1bHRHZXROb2RlS2V5O1xuICAgIHZhciBvbkJlZm9yZU5vZGVBZGRlZCA9IG9wdGlvbnMub25CZWZvcmVOb2RlQWRkZWQgfHwgbm9vcDtcbiAgICB2YXIgb25Ob2RlQWRkZWQgPSBvcHRpb25zLm9uTm9kZUFkZGVkIHx8IG5vb3A7XG4gICAgdmFyIG9uQmVmb3JlRWxVcGRhdGVkID0gb3B0aW9ucy5vbkJlZm9yZUVsVXBkYXRlZCB8fCBub29wO1xuICAgIHZhciBvbkVsVXBkYXRlZCA9IG9wdGlvbnMub25FbFVwZGF0ZWQgfHwgbm9vcDtcbiAgICB2YXIgb25CZWZvcmVOb2RlRGlzY2FyZGVkID0gb3B0aW9ucy5vbkJlZm9yZU5vZGVEaXNjYXJkZWQgfHwgbm9vcDtcbiAgICB2YXIgb25Ob2RlRGlzY2FyZGVkID0gb3B0aW9ucy5vbk5vZGVEaXNjYXJkZWQgfHwgbm9vcDtcbiAgICB2YXIgb25CZWZvcmVFbENoaWxkcmVuVXBkYXRlZCA9IG9wdGlvbnMub25CZWZvcmVFbENoaWxkcmVuVXBkYXRlZCB8fCBub29wO1xuICAgIHZhciBza2lwRnJvbUNoaWxkcmVuID0gb3B0aW9ucy5za2lwRnJvbUNoaWxkcmVuIHx8IG5vb3A7XG4gICAgdmFyIGFkZENoaWxkID0gb3B0aW9ucy5hZGRDaGlsZCB8fCBmdW5jdGlvbihwYXJlbnQsIGNoaWxkKXsgcmV0dXJuIHBhcmVudC5hcHBlbmRDaGlsZChjaGlsZCk7IH07XG4gICAgdmFyIGNoaWxkcmVuT25seSA9IG9wdGlvbnMuY2hpbGRyZW5Pbmx5ID09PSB0cnVlO1xuXG4gICAgLy8gVGhpcyBvYmplY3QgaXMgdXNlZCBhcyBhIGxvb2t1cCB0byBxdWlja2x5IGZpbmQgYWxsIGtleWVkIGVsZW1lbnRzIGluIHRoZSBvcmlnaW5hbCBET00gdHJlZS5cbiAgICB2YXIgZnJvbU5vZGVzTG9va3VwID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICB2YXIga2V5ZWRSZW1vdmFsTGlzdCA9IFtdO1xuXG4gICAgZnVuY3Rpb24gYWRkS2V5ZWRSZW1vdmFsKGtleSkge1xuICAgICAga2V5ZWRSZW1vdmFsTGlzdC5wdXNoKGtleSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gd2Fsa0Rpc2NhcmRlZENoaWxkTm9kZXMobm9kZSwgc2tpcEtleWVkTm9kZXMpIHtcbiAgICAgIGlmIChub2RlLm5vZGVUeXBlID09PSBFTEVNRU5UX05PREUpIHtcbiAgICAgICAgdmFyIGN1ckNoaWxkID0gbm9kZS5maXJzdENoaWxkO1xuICAgICAgICB3aGlsZSAoY3VyQ2hpbGQpIHtcblxuICAgICAgICAgIHZhciBrZXkgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgICBpZiAoc2tpcEtleWVkTm9kZXMgJiYgKGtleSA9IGdldE5vZGVLZXkoY3VyQ2hpbGQpKSkge1xuICAgICAgICAgICAgLy8gSWYgd2UgYXJlIHNraXBwaW5nIGtleWVkIG5vZGVzIHRoZW4gd2UgYWRkIHRoZSBrZXlcbiAgICAgICAgICAgIC8vIHRvIGEgbGlzdCBzbyB0aGF0IGl0IGNhbiBiZSBoYW5kbGVkIGF0IHRoZSB2ZXJ5IGVuZC5cbiAgICAgICAgICAgIGFkZEtleWVkUmVtb3ZhbChrZXkpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBPbmx5IHJlcG9ydCB0aGUgbm9kZSBhcyBkaXNjYXJkZWQgaWYgaXQgaXMgbm90IGtleWVkLiBXZSBkbyB0aGlzIGJlY2F1c2VcbiAgICAgICAgICAgIC8vIGF0IHRoZSBlbmQgd2UgbG9vcCB0aHJvdWdoIGFsbCBrZXllZCBlbGVtZW50cyB0aGF0IHdlcmUgdW5tYXRjaGVkXG4gICAgICAgICAgICAvLyBhbmQgdGhlbiBkaXNjYXJkIHRoZW0gaW4gb25lIGZpbmFsIHBhc3MuXG4gICAgICAgICAgICBvbk5vZGVEaXNjYXJkZWQoY3VyQ2hpbGQpO1xuICAgICAgICAgICAgaWYgKGN1ckNoaWxkLmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgICAgICAgd2Fsa0Rpc2NhcmRlZENoaWxkTm9kZXMoY3VyQ2hpbGQsIHNraXBLZXllZE5vZGVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjdXJDaGlsZCA9IGN1ckNoaWxkLm5leHRTaWJsaW5nO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgKiBSZW1vdmVzIGEgRE9NIG5vZGUgb3V0IG9mIHRoZSBvcmlnaW5hbCBET01cbiAgICAqXG4gICAgKiBAcGFyYW0gIHtOb2RlfSBub2RlIFRoZSBub2RlIHRvIHJlbW92ZVxuICAgICogQHBhcmFtICB7Tm9kZX0gcGFyZW50Tm9kZSBUaGUgbm9kZXMgcGFyZW50XG4gICAgKiBAcGFyYW0gIHtCb29sZWFufSBza2lwS2V5ZWROb2RlcyBJZiB0cnVlIHRoZW4gZWxlbWVudHMgd2l0aCBrZXlzIHdpbGwgYmUgc2tpcHBlZCBhbmQgbm90IGRpc2NhcmRlZC5cbiAgICAqIEByZXR1cm4ge3VuZGVmaW5lZH1cbiAgICAqL1xuICAgIGZ1bmN0aW9uIHJlbW92ZU5vZGUobm9kZSwgcGFyZW50Tm9kZSwgc2tpcEtleWVkTm9kZXMpIHtcbiAgICAgIGlmIChvbkJlZm9yZU5vZGVEaXNjYXJkZWQobm9kZSkgPT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKHBhcmVudE5vZGUpIHtcbiAgICAgICAgcGFyZW50Tm9kZS5yZW1vdmVDaGlsZChub2RlKTtcbiAgICAgIH1cblxuICAgICAgb25Ob2RlRGlzY2FyZGVkKG5vZGUpO1xuICAgICAgd2Fsa0Rpc2NhcmRlZENoaWxkTm9kZXMobm9kZSwgc2tpcEtleWVkTm9kZXMpO1xuICAgIH1cblxuICAgIC8vIC8vIFRyZWVXYWxrZXIgaW1wbGVtZW50YXRpb24gaXMgbm8gZmFzdGVyLCBidXQga2VlcGluZyB0aGlzIGFyb3VuZCBpbiBjYXNlIHRoaXMgY2hhbmdlcyBpbiB0aGUgZnV0dXJlXG4gICAgLy8gZnVuY3Rpb24gaW5kZXhUcmVlKHJvb3QpIHtcbiAgICAvLyAgICAgdmFyIHRyZWVXYWxrZXIgPSBkb2N1bWVudC5jcmVhdGVUcmVlV2Fsa2VyKFxuICAgIC8vICAgICAgICAgcm9vdCxcbiAgICAvLyAgICAgICAgIE5vZGVGaWx0ZXIuU0hPV19FTEVNRU5UKTtcbiAgICAvL1xuICAgIC8vICAgICB2YXIgZWw7XG4gICAgLy8gICAgIHdoaWxlKChlbCA9IHRyZWVXYWxrZXIubmV4dE5vZGUoKSkpIHtcbiAgICAvLyAgICAgICAgIHZhciBrZXkgPSBnZXROb2RlS2V5KGVsKTtcbiAgICAvLyAgICAgICAgIGlmIChrZXkpIHtcbiAgICAvLyAgICAgICAgICAgICBmcm9tTm9kZXNMb29rdXBba2V5XSA9IGVsO1xuICAgIC8vICAgICAgICAgfVxuICAgIC8vICAgICB9XG4gICAgLy8gfVxuXG4gICAgLy8gLy8gTm9kZUl0ZXJhdG9yIGltcGxlbWVudGF0aW9uIGlzIG5vIGZhc3RlciwgYnV0IGtlZXBpbmcgdGhpcyBhcm91bmQgaW4gY2FzZSB0aGlzIGNoYW5nZXMgaW4gdGhlIGZ1dHVyZVxuICAgIC8vXG4gICAgLy8gZnVuY3Rpb24gaW5kZXhUcmVlKG5vZGUpIHtcbiAgICAvLyAgICAgdmFyIG5vZGVJdGVyYXRvciA9IGRvY3VtZW50LmNyZWF0ZU5vZGVJdGVyYXRvcihub2RlLCBOb2RlRmlsdGVyLlNIT1dfRUxFTUVOVCk7XG4gICAgLy8gICAgIHZhciBlbDtcbiAgICAvLyAgICAgd2hpbGUoKGVsID0gbm9kZUl0ZXJhdG9yLm5leHROb2RlKCkpKSB7XG4gICAgLy8gICAgICAgICB2YXIga2V5ID0gZ2V0Tm9kZUtleShlbCk7XG4gICAgLy8gICAgICAgICBpZiAoa2V5KSB7XG4gICAgLy8gICAgICAgICAgICAgZnJvbU5vZGVzTG9va3VwW2tleV0gPSBlbDtcbiAgICAvLyAgICAgICAgIH1cbiAgICAvLyAgICAgfVxuICAgIC8vIH1cblxuICAgIGZ1bmN0aW9uIGluZGV4VHJlZShub2RlKSB7XG4gICAgICBpZiAobm9kZS5ub2RlVHlwZSA9PT0gRUxFTUVOVF9OT0RFIHx8IG5vZGUubm9kZVR5cGUgPT09IERPQ1VNRU5UX0ZSQUdNRU5UX05PREUkMSkge1xuICAgICAgICB2YXIgY3VyQ2hpbGQgPSBub2RlLmZpcnN0Q2hpbGQ7XG4gICAgICAgIHdoaWxlIChjdXJDaGlsZCkge1xuICAgICAgICAgIHZhciBrZXkgPSBnZXROb2RlS2V5KGN1ckNoaWxkKTtcbiAgICAgICAgICBpZiAoa2V5KSB7XG4gICAgICAgICAgICBmcm9tTm9kZXNMb29rdXBba2V5XSA9IGN1ckNoaWxkO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIFdhbGsgcmVjdXJzaXZlbHlcbiAgICAgICAgICBpbmRleFRyZWUoY3VyQ2hpbGQpO1xuXG4gICAgICAgICAgY3VyQ2hpbGQgPSBjdXJDaGlsZC5uZXh0U2libGluZztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGluZGV4VHJlZShmcm9tTm9kZSk7XG5cbiAgICBmdW5jdGlvbiBoYW5kbGVOb2RlQWRkZWQoZWwpIHtcbiAgICAgIG9uTm9kZUFkZGVkKGVsKTtcblxuICAgICAgdmFyIGN1ckNoaWxkID0gZWwuZmlyc3RDaGlsZDtcbiAgICAgIHdoaWxlIChjdXJDaGlsZCkge1xuICAgICAgICB2YXIgbmV4dFNpYmxpbmcgPSBjdXJDaGlsZC5uZXh0U2libGluZztcblxuICAgICAgICB2YXIga2V5ID0gZ2V0Tm9kZUtleShjdXJDaGlsZCk7XG4gICAgICAgIGlmIChrZXkpIHtcbiAgICAgICAgICB2YXIgdW5tYXRjaGVkRnJvbUVsID0gZnJvbU5vZGVzTG9va3VwW2tleV07XG4gICAgICAgICAgLy8gaWYgd2UgZmluZCBhIGR1cGxpY2F0ZSAjaWQgbm9kZSBpbiBjYWNoZSwgcmVwbGFjZSBgZWxgIHdpdGggY2FjaGUgdmFsdWVcbiAgICAgICAgICAvLyBhbmQgbW9ycGggaXQgdG8gdGhlIGNoaWxkIG5vZGUuXG4gICAgICAgICAgaWYgKHVubWF0Y2hlZEZyb21FbCAmJiBjb21wYXJlTm9kZU5hbWVzKGN1ckNoaWxkLCB1bm1hdGNoZWRGcm9tRWwpKSB7XG4gICAgICAgICAgICBjdXJDaGlsZC5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZCh1bm1hdGNoZWRGcm9tRWwsIGN1ckNoaWxkKTtcbiAgICAgICAgICAgIG1vcnBoRWwodW5tYXRjaGVkRnJvbUVsLCBjdXJDaGlsZCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGhhbmRsZU5vZGVBZGRlZChjdXJDaGlsZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIHJlY3Vyc2l2ZWx5IGNhbGwgZm9yIGN1ckNoaWxkIGFuZCBpdCdzIGNoaWxkcmVuIHRvIHNlZSBpZiB3ZSBmaW5kIHNvbWV0aGluZyBpblxuICAgICAgICAgIC8vIGZyb21Ob2Rlc0xvb2t1cFxuICAgICAgICAgIGhhbmRsZU5vZGVBZGRlZChjdXJDaGlsZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjdXJDaGlsZCA9IG5leHRTaWJsaW5nO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNsZWFudXBGcm9tRWwoZnJvbUVsLCBjdXJGcm9tTm9kZUNoaWxkLCBjdXJGcm9tTm9kZUtleSkge1xuICAgICAgLy8gV2UgaGF2ZSBwcm9jZXNzZWQgYWxsIG9mIHRoZSBcInRvIG5vZGVzXCIuIElmIGN1ckZyb21Ob2RlQ2hpbGQgaXNcbiAgICAgIC8vIG5vbi1udWxsIHRoZW4gd2Ugc3RpbGwgaGF2ZSBzb21lIGZyb20gbm9kZXMgbGVmdCBvdmVyIHRoYXQgbmVlZFxuICAgICAgLy8gdG8gYmUgcmVtb3ZlZFxuICAgICAgd2hpbGUgKGN1ckZyb21Ob2RlQ2hpbGQpIHtcbiAgICAgICAgdmFyIGZyb21OZXh0U2libGluZyA9IGN1ckZyb21Ob2RlQ2hpbGQubmV4dFNpYmxpbmc7XG4gICAgICAgIGlmICgoY3VyRnJvbU5vZGVLZXkgPSBnZXROb2RlS2V5KGN1ckZyb21Ob2RlQ2hpbGQpKSkge1xuICAgICAgICAgIC8vIFNpbmNlIHRoZSBub2RlIGlzIGtleWVkIGl0IG1pZ2h0IGJlIG1hdGNoZWQgdXAgbGF0ZXIgc28gd2UgZGVmZXJcbiAgICAgICAgICAvLyB0aGUgYWN0dWFsIHJlbW92YWwgdG8gbGF0ZXJcbiAgICAgICAgICBhZGRLZXllZFJlbW92YWwoY3VyRnJvbU5vZGVLZXkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIE5PVEU6IHdlIHNraXAgbmVzdGVkIGtleWVkIG5vZGVzIGZyb20gYmVpbmcgcmVtb3ZlZCBzaW5jZSB0aGVyZSBpc1xuICAgICAgICAgIC8vICAgICAgIHN0aWxsIGEgY2hhbmNlIHRoZXkgd2lsbCBiZSBtYXRjaGVkIHVwIGxhdGVyXG4gICAgICAgICAgcmVtb3ZlTm9kZShjdXJGcm9tTm9kZUNoaWxkLCBmcm9tRWwsIHRydWUgLyogc2tpcCBrZXllZCBub2RlcyAqLyk7XG4gICAgICAgIH1cbiAgICAgICAgY3VyRnJvbU5vZGVDaGlsZCA9IGZyb21OZXh0U2libGluZztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBtb3JwaEVsKGZyb21FbCwgdG9FbCwgY2hpbGRyZW5Pbmx5KSB7XG4gICAgICB2YXIgdG9FbEtleSA9IGdldE5vZGVLZXkodG9FbCk7XG5cbiAgICAgIGlmICh0b0VsS2V5KSB7XG4gICAgICAgIC8vIElmIGFuIGVsZW1lbnQgd2l0aCBhbiBJRCBpcyBiZWluZyBtb3JwaGVkIHRoZW4gaXQgd2lsbCBiZSBpbiB0aGUgZmluYWxcbiAgICAgICAgLy8gRE9NIHNvIGNsZWFyIGl0IG91dCBvZiB0aGUgc2F2ZWQgZWxlbWVudHMgY29sbGVjdGlvblxuICAgICAgICBkZWxldGUgZnJvbU5vZGVzTG9va3VwW3RvRWxLZXldO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWNoaWxkcmVuT25seSkge1xuICAgICAgICAvLyBvcHRpb25hbFxuICAgICAgICBpZiAob25CZWZvcmVFbFVwZGF0ZWQoZnJvbUVsLCB0b0VsKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyB1cGRhdGUgYXR0cmlidXRlcyBvbiBvcmlnaW5hbCBET00gZWxlbWVudCBmaXJzdFxuICAgICAgICBtb3JwaEF0dHJzKGZyb21FbCwgdG9FbCk7XG4gICAgICAgIC8vIG9wdGlvbmFsXG4gICAgICAgIG9uRWxVcGRhdGVkKGZyb21FbCk7XG5cbiAgICAgICAgaWYgKG9uQmVmb3JlRWxDaGlsZHJlblVwZGF0ZWQoZnJvbUVsLCB0b0VsKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGZyb21FbC5ub2RlTmFtZSAhPT0gJ1RFWFRBUkVBJykge1xuICAgICAgICBtb3JwaENoaWxkcmVuKGZyb21FbCwgdG9FbCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzcGVjaWFsRWxIYW5kbGVycy5URVhUQVJFQShmcm9tRWwsIHRvRWwpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIG1vcnBoQ2hpbGRyZW4oZnJvbUVsLCB0b0VsKSB7XG4gICAgICB2YXIgc2tpcEZyb20gPSBza2lwRnJvbUNoaWxkcmVuKGZyb21FbCk7XG4gICAgICB2YXIgY3VyVG9Ob2RlQ2hpbGQgPSB0b0VsLmZpcnN0Q2hpbGQ7XG4gICAgICB2YXIgY3VyRnJvbU5vZGVDaGlsZCA9IGZyb21FbC5maXJzdENoaWxkO1xuICAgICAgdmFyIGN1clRvTm9kZUtleTtcbiAgICAgIHZhciBjdXJGcm9tTm9kZUtleTtcblxuICAgICAgdmFyIGZyb21OZXh0U2libGluZztcbiAgICAgIHZhciB0b05leHRTaWJsaW5nO1xuICAgICAgdmFyIG1hdGNoaW5nRnJvbUVsO1xuXG4gICAgICAvLyB3YWxrIHRoZSBjaGlsZHJlblxuICAgICAgb3V0ZXI6IHdoaWxlIChjdXJUb05vZGVDaGlsZCkge1xuICAgICAgICB0b05leHRTaWJsaW5nID0gY3VyVG9Ob2RlQ2hpbGQubmV4dFNpYmxpbmc7XG4gICAgICAgIGN1clRvTm9kZUtleSA9IGdldE5vZGVLZXkoY3VyVG9Ob2RlQ2hpbGQpO1xuXG4gICAgICAgIC8vIHdhbGsgdGhlIGZyb21Ob2RlIGNoaWxkcmVuIGFsbCB0aGUgd2F5IHRocm91Z2hcbiAgICAgICAgd2hpbGUgKCFza2lwRnJvbSAmJiBjdXJGcm9tTm9kZUNoaWxkKSB7XG4gICAgICAgICAgZnJvbU5leHRTaWJsaW5nID0gY3VyRnJvbU5vZGVDaGlsZC5uZXh0U2libGluZztcblxuICAgICAgICAgIGlmIChjdXJUb05vZGVDaGlsZC5pc1NhbWVOb2RlICYmIGN1clRvTm9kZUNoaWxkLmlzU2FtZU5vZGUoY3VyRnJvbU5vZGVDaGlsZCkpIHtcbiAgICAgICAgICAgIGN1clRvTm9kZUNoaWxkID0gdG9OZXh0U2libGluZztcbiAgICAgICAgICAgIGN1ckZyb21Ob2RlQ2hpbGQgPSBmcm9tTmV4dFNpYmxpbmc7XG4gICAgICAgICAgICBjb250aW51ZSBvdXRlcjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjdXJGcm9tTm9kZUtleSA9IGdldE5vZGVLZXkoY3VyRnJvbU5vZGVDaGlsZCk7XG5cbiAgICAgICAgICB2YXIgY3VyRnJvbU5vZGVUeXBlID0gY3VyRnJvbU5vZGVDaGlsZC5ub2RlVHlwZTtcblxuICAgICAgICAgIC8vIHRoaXMgbWVhbnMgaWYgdGhlIGN1ckZyb21Ob2RlQ2hpbGQgZG9lc250IGhhdmUgYSBtYXRjaCB3aXRoIHRoZSBjdXJUb05vZGVDaGlsZFxuICAgICAgICAgIHZhciBpc0NvbXBhdGlibGUgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgICBpZiAoY3VyRnJvbU5vZGVUeXBlID09PSBjdXJUb05vZGVDaGlsZC5ub2RlVHlwZSkge1xuICAgICAgICAgICAgaWYgKGN1ckZyb21Ob2RlVHlwZSA9PT0gRUxFTUVOVF9OT0RFKSB7XG4gICAgICAgICAgICAgIC8vIEJvdGggbm9kZXMgYmVpbmcgY29tcGFyZWQgYXJlIEVsZW1lbnQgbm9kZXNcblxuICAgICAgICAgICAgICBpZiAoY3VyVG9Ob2RlS2V5KSB7XG4gICAgICAgICAgICAgICAgLy8gVGhlIHRhcmdldCBub2RlIGhhcyBhIGtleSBzbyB3ZSB3YW50IHRvIG1hdGNoIGl0IHVwIHdpdGggdGhlIGNvcnJlY3QgZWxlbWVudFxuICAgICAgICAgICAgICAgIC8vIGluIHRoZSBvcmlnaW5hbCBET00gdHJlZVxuICAgICAgICAgICAgICAgIGlmIChjdXJUb05vZGVLZXkgIT09IGN1ckZyb21Ob2RlS2V5KSB7XG4gICAgICAgICAgICAgICAgICAvLyBUaGUgY3VycmVudCBlbGVtZW50IGluIHRoZSBvcmlnaW5hbCBET00gdHJlZSBkb2VzIG5vdCBoYXZlIGEgbWF0Y2hpbmcga2V5IHNvXG4gICAgICAgICAgICAgICAgICAvLyBsZXQncyBjaGVjayBvdXIgbG9va3VwIHRvIHNlZSBpZiB0aGVyZSBpcyBhIG1hdGNoaW5nIGVsZW1lbnQgaW4gdGhlIG9yaWdpbmFsXG4gICAgICAgICAgICAgICAgICAvLyBET00gdHJlZVxuICAgICAgICAgICAgICAgICAgaWYgKChtYXRjaGluZ0Zyb21FbCA9IGZyb21Ob2Rlc0xvb2t1cFtjdXJUb05vZGVLZXldKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZnJvbU5leHRTaWJsaW5nID09PSBtYXRjaGluZ0Zyb21FbCkge1xuICAgICAgICAgICAgICAgICAgICAgIC8vIFNwZWNpYWwgY2FzZSBmb3Igc2luZ2xlIGVsZW1lbnQgcmVtb3ZhbHMuIFRvIGF2b2lkIHJlbW92aW5nIHRoZSBvcmlnaW5hbFxuICAgICAgICAgICAgICAgICAgICAgIC8vIERPTSBub2RlIG91dCBvZiB0aGUgdHJlZSAoc2luY2UgdGhhdCBjYW4gYnJlYWsgQ1NTIHRyYW5zaXRpb25zLCBldGMuKSxcbiAgICAgICAgICAgICAgICAgICAgICAvLyB3ZSB3aWxsIGluc3RlYWQgZGlzY2FyZCB0aGUgY3VycmVudCBub2RlIGFuZCB3YWl0IHVudGlsIHRoZSBuZXh0XG4gICAgICAgICAgICAgICAgICAgICAgLy8gaXRlcmF0aW9uIHRvIHByb3Blcmx5IG1hdGNoIHVwIHRoZSBrZXllZCB0YXJnZXQgZWxlbWVudCB3aXRoIGl0cyBtYXRjaGluZ1xuICAgICAgICAgICAgICAgICAgICAgIC8vIGVsZW1lbnQgaW4gdGhlIG9yaWdpbmFsIHRyZWVcbiAgICAgICAgICAgICAgICAgICAgICBpc0NvbXBhdGlibGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBmb3VuZCBhIG1hdGNoaW5nIGtleWVkIGVsZW1lbnQgc29tZXdoZXJlIGluIHRoZSBvcmlnaW5hbCBET00gdHJlZS5cbiAgICAgICAgICAgICAgICAgICAgICAvLyBMZXQncyBtb3ZlIHRoZSBvcmlnaW5hbCBET00gbm9kZSBpbnRvIHRoZSBjdXJyZW50IHBvc2l0aW9uIGFuZCBtb3JwaFxuICAgICAgICAgICAgICAgICAgICAgIC8vIGl0LlxuXG4gICAgICAgICAgICAgICAgICAgICAgLy8gTk9URTogV2UgdXNlIGluc2VydEJlZm9yZSBpbnN0ZWFkIG9mIHJlcGxhY2VDaGlsZCBiZWNhdXNlIHdlIHdhbnQgdG8gZ28gdGhyb3VnaFxuICAgICAgICAgICAgICAgICAgICAgIC8vIHRoZSBgcmVtb3ZlTm9kZSgpYCBmdW5jdGlvbiBmb3IgdGhlIG5vZGUgdGhhdCBpcyBiZWluZyBkaXNjYXJkZWQgc28gdGhhdFxuICAgICAgICAgICAgICAgICAgICAgIC8vIGFsbCBsaWZlY3ljbGUgaG9va3MgYXJlIGNvcnJlY3RseSBpbnZva2VkXG4gICAgICAgICAgICAgICAgICAgICAgZnJvbUVsLmluc2VydEJlZm9yZShtYXRjaGluZ0Zyb21FbCwgY3VyRnJvbU5vZGVDaGlsZCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAvLyBmcm9tTmV4dFNpYmxpbmcgPSBjdXJGcm9tTm9kZUNoaWxkLm5leHRTaWJsaW5nO1xuXG4gICAgICAgICAgICAgICAgICAgICAgaWYgKGN1ckZyb21Ob2RlS2V5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBTaW5jZSB0aGUgbm9kZSBpcyBrZXllZCBpdCBtaWdodCBiZSBtYXRjaGVkIHVwIGxhdGVyIHNvIHdlIGRlZmVyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGUgYWN0dWFsIHJlbW92YWwgdG8gbGF0ZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZEtleWVkUmVtb3ZhbChjdXJGcm9tTm9kZUtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5PVEU6IHdlIHNraXAgbmVzdGVkIGtleWVkIG5vZGVzIGZyb20gYmVpbmcgcmVtb3ZlZCBzaW5jZSB0aGVyZSBpc1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgc3RpbGwgYSBjaGFuY2UgdGhleSB3aWxsIGJlIG1hdGNoZWQgdXAgbGF0ZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZU5vZGUoY3VyRnJvbU5vZGVDaGlsZCwgZnJvbUVsLCB0cnVlIC8qIHNraXAga2V5ZWQgbm9kZXMgKi8pO1xuICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgIGN1ckZyb21Ob2RlQ2hpbGQgPSBtYXRjaGluZ0Zyb21FbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlIG5vZGVzIGFyZSBub3QgY29tcGF0aWJsZSBzaW5jZSB0aGUgXCJ0b1wiIG5vZGUgaGFzIGEga2V5IGFuZCB0aGVyZVxuICAgICAgICAgICAgICAgICAgICAvLyBpcyBubyBtYXRjaGluZyBrZXllZCBub2RlIGluIHRoZSBzb3VyY2UgdHJlZVxuICAgICAgICAgICAgICAgICAgICBpc0NvbXBhdGlibGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAoY3VyRnJvbU5vZGVLZXkpIHtcbiAgICAgICAgICAgICAgICAvLyBUaGUgb3JpZ2luYWwgaGFzIGEga2V5XG4gICAgICAgICAgICAgICAgaXNDb21wYXRpYmxlID0gZmFsc2U7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpc0NvbXBhdGlibGUgPSBpc0NvbXBhdGlibGUgIT09IGZhbHNlICYmIGNvbXBhcmVOb2RlTmFtZXMoY3VyRnJvbU5vZGVDaGlsZCwgY3VyVG9Ob2RlQ2hpbGQpO1xuICAgICAgICAgICAgICBpZiAoaXNDb21wYXRpYmxlKSB7XG4gICAgICAgICAgICAgICAgLy8gV2UgZm91bmQgY29tcGF0aWJsZSBET00gZWxlbWVudHMgc28gdHJhbnNmb3JtXG4gICAgICAgICAgICAgICAgLy8gdGhlIGN1cnJlbnQgXCJmcm9tXCIgbm9kZSB0byBtYXRjaCB0aGUgY3VycmVudFxuICAgICAgICAgICAgICAgIC8vIHRhcmdldCBET00gbm9kZS5cbiAgICAgICAgICAgICAgICAvLyBNT1JQSFxuICAgICAgICAgICAgICAgIG1vcnBoRWwoY3VyRnJvbU5vZGVDaGlsZCwgY3VyVG9Ob2RlQ2hpbGQpO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY3VyRnJvbU5vZGVUeXBlID09PSBURVhUX05PREUgfHwgY3VyRnJvbU5vZGVUeXBlID09IENPTU1FTlRfTk9ERSkge1xuICAgICAgICAgICAgICAvLyBCb3RoIG5vZGVzIGJlaW5nIGNvbXBhcmVkIGFyZSBUZXh0IG9yIENvbW1lbnQgbm9kZXNcbiAgICAgICAgICAgICAgaXNDb21wYXRpYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgLy8gU2ltcGx5IHVwZGF0ZSBub2RlVmFsdWUgb24gdGhlIG9yaWdpbmFsIG5vZGUgdG9cbiAgICAgICAgICAgICAgLy8gY2hhbmdlIHRoZSB0ZXh0IHZhbHVlXG4gICAgICAgICAgICAgIGlmIChjdXJGcm9tTm9kZUNoaWxkLm5vZGVWYWx1ZSAhPT0gY3VyVG9Ob2RlQ2hpbGQubm9kZVZhbHVlKSB7XG4gICAgICAgICAgICAgICAgY3VyRnJvbU5vZGVDaGlsZC5ub2RlVmFsdWUgPSBjdXJUb05vZGVDaGlsZC5ub2RlVmFsdWU7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChpc0NvbXBhdGlibGUpIHtcbiAgICAgICAgICAgIC8vIEFkdmFuY2UgYm90aCB0aGUgXCJ0b1wiIGNoaWxkIGFuZCB0aGUgXCJmcm9tXCIgY2hpbGQgc2luY2Ugd2UgZm91bmQgYSBtYXRjaFxuICAgICAgICAgICAgLy8gTm90aGluZyBlbHNlIHRvIGRvIGFzIHdlIGFscmVhZHkgcmVjdXJzaXZlbHkgY2FsbGVkIG1vcnBoQ2hpbGRyZW4gYWJvdmVcbiAgICAgICAgICAgIGN1clRvTm9kZUNoaWxkID0gdG9OZXh0U2libGluZztcbiAgICAgICAgICAgIGN1ckZyb21Ob2RlQ2hpbGQgPSBmcm9tTmV4dFNpYmxpbmc7XG4gICAgICAgICAgICBjb250aW51ZSBvdXRlcjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBObyBjb21wYXRpYmxlIG1hdGNoIHNvIHJlbW92ZSB0aGUgb2xkIG5vZGUgZnJvbSB0aGUgRE9NIGFuZCBjb250aW51ZSB0cnlpbmcgdG8gZmluZCBhXG4gICAgICAgICAgLy8gbWF0Y2ggaW4gdGhlIG9yaWdpbmFsIERPTS4gSG93ZXZlciwgd2Ugb25seSBkbyB0aGlzIGlmIHRoZSBmcm9tIG5vZGUgaXMgbm90IGtleWVkXG4gICAgICAgICAgLy8gc2luY2UgaXQgaXMgcG9zc2libGUgdGhhdCBhIGtleWVkIG5vZGUgbWlnaHQgbWF0Y2ggdXAgd2l0aCBhIG5vZGUgc29tZXdoZXJlIGVsc2UgaW4gdGhlXG4gICAgICAgICAgLy8gdGFyZ2V0IHRyZWUgYW5kIHdlIGRvbid0IHdhbnQgdG8gZGlzY2FyZCBpdCBqdXN0IHlldCBzaW5jZSBpdCBzdGlsbCBtaWdodCBmaW5kIGFcbiAgICAgICAgICAvLyBob21lIGluIHRoZSBmaW5hbCBET00gdHJlZS4gQWZ0ZXIgZXZlcnl0aGluZyBpcyBkb25lIHdlIHdpbGwgcmVtb3ZlIGFueSBrZXllZCBub2Rlc1xuICAgICAgICAgIC8vIHRoYXQgZGlkbid0IGZpbmQgYSBob21lXG4gICAgICAgICAgaWYgKGN1ckZyb21Ob2RlS2V5KSB7XG4gICAgICAgICAgICAvLyBTaW5jZSB0aGUgbm9kZSBpcyBrZXllZCBpdCBtaWdodCBiZSBtYXRjaGVkIHVwIGxhdGVyIHNvIHdlIGRlZmVyXG4gICAgICAgICAgICAvLyB0aGUgYWN0dWFsIHJlbW92YWwgdG8gbGF0ZXJcbiAgICAgICAgICAgIGFkZEtleWVkUmVtb3ZhbChjdXJGcm9tTm9kZUtleSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIE5PVEU6IHdlIHNraXAgbmVzdGVkIGtleWVkIG5vZGVzIGZyb20gYmVpbmcgcmVtb3ZlZCBzaW5jZSB0aGVyZSBpc1xuICAgICAgICAgICAgLy8gICAgICAgc3RpbGwgYSBjaGFuY2UgdGhleSB3aWxsIGJlIG1hdGNoZWQgdXAgbGF0ZXJcbiAgICAgICAgICAgIHJlbW92ZU5vZGUoY3VyRnJvbU5vZGVDaGlsZCwgZnJvbUVsLCB0cnVlIC8qIHNraXAga2V5ZWQgbm9kZXMgKi8pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGN1ckZyb21Ob2RlQ2hpbGQgPSBmcm9tTmV4dFNpYmxpbmc7XG4gICAgICAgIH0gLy8gRU5EOiB3aGlsZShjdXJGcm9tTm9kZUNoaWxkKSB7fVxuXG4gICAgICAgIC8vIElmIHdlIGdvdCB0aGlzIGZhciB0aGVuIHdlIGRpZCBub3QgZmluZCBhIGNhbmRpZGF0ZSBtYXRjaCBmb3JcbiAgICAgICAgLy8gb3VyIFwidG8gbm9kZVwiIGFuZCB3ZSBleGhhdXN0ZWQgYWxsIG9mIHRoZSBjaGlsZHJlbiBcImZyb21cIlxuICAgICAgICAvLyBub2Rlcy4gVGhlcmVmb3JlLCB3ZSB3aWxsIGp1c3QgYXBwZW5kIHRoZSBjdXJyZW50IFwidG9cIiBub2RlXG4gICAgICAgIC8vIHRvIHRoZSBlbmRcbiAgICAgICAgaWYgKGN1clRvTm9kZUtleSAmJiAobWF0Y2hpbmdGcm9tRWwgPSBmcm9tTm9kZXNMb29rdXBbY3VyVG9Ob2RlS2V5XSkgJiYgY29tcGFyZU5vZGVOYW1lcyhtYXRjaGluZ0Zyb21FbCwgY3VyVG9Ob2RlQ2hpbGQpKSB7XG4gICAgICAgICAgLy8gTU9SUEhcbiAgICAgICAgICBpZighc2tpcEZyb20peyBhZGRDaGlsZChmcm9tRWwsIG1hdGNoaW5nRnJvbUVsKTsgfVxuICAgICAgICAgIG1vcnBoRWwobWF0Y2hpbmdGcm9tRWwsIGN1clRvTm9kZUNoaWxkKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgb25CZWZvcmVOb2RlQWRkZWRSZXN1bHQgPSBvbkJlZm9yZU5vZGVBZGRlZChjdXJUb05vZGVDaGlsZCk7XG4gICAgICAgICAgaWYgKG9uQmVmb3JlTm9kZUFkZGVkUmVzdWx0ICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgaWYgKG9uQmVmb3JlTm9kZUFkZGVkUmVzdWx0KSB7XG4gICAgICAgICAgICAgIGN1clRvTm9kZUNoaWxkID0gb25CZWZvcmVOb2RlQWRkZWRSZXN1bHQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChjdXJUb05vZGVDaGlsZC5hY3R1YWxpemUpIHtcbiAgICAgICAgICAgICAgY3VyVG9Ob2RlQ2hpbGQgPSBjdXJUb05vZGVDaGlsZC5hY3R1YWxpemUoZnJvbUVsLm93bmVyRG9jdW1lbnQgfHwgZG9jKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFkZENoaWxkKGZyb21FbCwgY3VyVG9Ob2RlQ2hpbGQpO1xuICAgICAgICAgICAgaGFuZGxlTm9kZUFkZGVkKGN1clRvTm9kZUNoaWxkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjdXJUb05vZGVDaGlsZCA9IHRvTmV4dFNpYmxpbmc7XG4gICAgICAgIGN1ckZyb21Ob2RlQ2hpbGQgPSBmcm9tTmV4dFNpYmxpbmc7XG4gICAgICB9XG5cbiAgICAgIGNsZWFudXBGcm9tRWwoZnJvbUVsLCBjdXJGcm9tTm9kZUNoaWxkLCBjdXJGcm9tTm9kZUtleSk7XG5cbiAgICAgIHZhciBzcGVjaWFsRWxIYW5kbGVyID0gc3BlY2lhbEVsSGFuZGxlcnNbZnJvbUVsLm5vZGVOYW1lXTtcbiAgICAgIGlmIChzcGVjaWFsRWxIYW5kbGVyKSB7XG4gICAgICAgIHNwZWNpYWxFbEhhbmRsZXIoZnJvbUVsLCB0b0VsKTtcbiAgICAgIH1cbiAgICB9IC8vIEVORDogbW9ycGhDaGlsZHJlbiguLi4pXG5cbiAgICB2YXIgbW9ycGhlZE5vZGUgPSBmcm9tTm9kZTtcbiAgICB2YXIgbW9ycGhlZE5vZGVUeXBlID0gbW9ycGhlZE5vZGUubm9kZVR5cGU7XG4gICAgdmFyIHRvTm9kZVR5cGUgPSB0b05vZGUubm9kZVR5cGU7XG5cbiAgICBpZiAoIWNoaWxkcmVuT25seSkge1xuICAgICAgLy8gSGFuZGxlIHRoZSBjYXNlIHdoZXJlIHdlIGFyZSBnaXZlbiB0d28gRE9NIG5vZGVzIHRoYXQgYXJlIG5vdFxuICAgICAgLy8gY29tcGF0aWJsZSAoZS5nLiA8ZGl2PiAtLT4gPHNwYW4+IG9yIDxkaXY+IC0tPiBURVhUKVxuICAgICAgaWYgKG1vcnBoZWROb2RlVHlwZSA9PT0gRUxFTUVOVF9OT0RFKSB7XG4gICAgICAgIGlmICh0b05vZGVUeXBlID09PSBFTEVNRU5UX05PREUpIHtcbiAgICAgICAgICBpZiAoIWNvbXBhcmVOb2RlTmFtZXMoZnJvbU5vZGUsIHRvTm9kZSkpIHtcbiAgICAgICAgICAgIG9uTm9kZURpc2NhcmRlZChmcm9tTm9kZSk7XG4gICAgICAgICAgICBtb3JwaGVkTm9kZSA9IG1vdmVDaGlsZHJlbihmcm9tTm9kZSwgY3JlYXRlRWxlbWVudE5TKHRvTm9kZS5ub2RlTmFtZSwgdG9Ob2RlLm5hbWVzcGFjZVVSSSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBHb2luZyBmcm9tIGFuIGVsZW1lbnQgbm9kZSB0byBhIHRleHQgbm9kZVxuICAgICAgICAgIG1vcnBoZWROb2RlID0gdG9Ob2RlO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKG1vcnBoZWROb2RlVHlwZSA9PT0gVEVYVF9OT0RFIHx8IG1vcnBoZWROb2RlVHlwZSA9PT0gQ09NTUVOVF9OT0RFKSB7IC8vIFRleHQgb3IgY29tbWVudCBub2RlXG4gICAgICAgIGlmICh0b05vZGVUeXBlID09PSBtb3JwaGVkTm9kZVR5cGUpIHtcbiAgICAgICAgICBpZiAobW9ycGhlZE5vZGUubm9kZVZhbHVlICE9PSB0b05vZGUubm9kZVZhbHVlKSB7XG4gICAgICAgICAgICBtb3JwaGVkTm9kZS5ub2RlVmFsdWUgPSB0b05vZGUubm9kZVZhbHVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiBtb3JwaGVkTm9kZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBUZXh0IG5vZGUgdG8gc29tZXRoaW5nIGVsc2VcbiAgICAgICAgICBtb3JwaGVkTm9kZSA9IHRvTm9kZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChtb3JwaGVkTm9kZSA9PT0gdG9Ob2RlKSB7XG4gICAgICAvLyBUaGUgXCJ0byBub2RlXCIgd2FzIG5vdCBjb21wYXRpYmxlIHdpdGggdGhlIFwiZnJvbSBub2RlXCIgc28gd2UgaGFkIHRvXG4gICAgICAvLyB0b3NzIG91dCB0aGUgXCJmcm9tIG5vZGVcIiBhbmQgdXNlIHRoZSBcInRvIG5vZGVcIlxuICAgICAgb25Ob2RlRGlzY2FyZGVkKGZyb21Ob2RlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHRvTm9kZS5pc1NhbWVOb2RlICYmIHRvTm9kZS5pc1NhbWVOb2RlKG1vcnBoZWROb2RlKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIG1vcnBoRWwobW9ycGhlZE5vZGUsIHRvTm9kZSwgY2hpbGRyZW5Pbmx5KTtcblxuICAgICAgLy8gV2Ugbm93IG5lZWQgdG8gbG9vcCBvdmVyIGFueSBrZXllZCBub2RlcyB0aGF0IG1pZ2h0IG5lZWQgdG8gYmVcbiAgICAgIC8vIHJlbW92ZWQuIFdlIG9ubHkgZG8gdGhlIHJlbW92YWwgaWYgd2Uga25vdyB0aGF0IHRoZSBrZXllZCBub2RlXG4gICAgICAvLyBuZXZlciBmb3VuZCBhIG1hdGNoLiBXaGVuIGEga2V5ZWQgbm9kZSBpcyBtYXRjaGVkIHVwIHdlIHJlbW92ZVxuICAgICAgLy8gaXQgb3V0IG9mIGZyb21Ob2Rlc0xvb2t1cCBhbmQgd2UgdXNlIGZyb21Ob2Rlc0xvb2t1cCB0byBkZXRlcm1pbmVcbiAgICAgIC8vIGlmIGEga2V5ZWQgbm9kZSBoYXMgYmVlbiBtYXRjaGVkIHVwIG9yIG5vdFxuICAgICAgaWYgKGtleWVkUmVtb3ZhbExpc3QpIHtcbiAgICAgICAgZm9yICh2YXIgaT0wLCBsZW49a2V5ZWRSZW1vdmFsTGlzdC5sZW5ndGg7IGk8bGVuOyBpKyspIHtcbiAgICAgICAgICB2YXIgZWxUb1JlbW92ZSA9IGZyb21Ob2Rlc0xvb2t1cFtrZXllZFJlbW92YWxMaXN0W2ldXTtcbiAgICAgICAgICBpZiAoZWxUb1JlbW92ZSkge1xuICAgICAgICAgICAgcmVtb3ZlTm9kZShlbFRvUmVtb3ZlLCBlbFRvUmVtb3ZlLnBhcmVudE5vZGUsIGZhbHNlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIWNoaWxkcmVuT25seSAmJiBtb3JwaGVkTm9kZSAhPT0gZnJvbU5vZGUgJiYgZnJvbU5vZGUucGFyZW50Tm9kZSkge1xuICAgICAgaWYgKG1vcnBoZWROb2RlLmFjdHVhbGl6ZSkge1xuICAgICAgICBtb3JwaGVkTm9kZSA9IG1vcnBoZWROb2RlLmFjdHVhbGl6ZShmcm9tTm9kZS5vd25lckRvY3VtZW50IHx8IGRvYyk7XG4gICAgICB9XG4gICAgICAvLyBJZiB3ZSBoYWQgdG8gc3dhcCBvdXQgdGhlIGZyb20gbm9kZSB3aXRoIGEgbmV3IG5vZGUgYmVjYXVzZSB0aGUgb2xkXG4gICAgICAvLyBub2RlIHdhcyBub3QgY29tcGF0aWJsZSB3aXRoIHRoZSB0YXJnZXQgbm9kZSB0aGVuIHdlIG5lZWQgdG9cbiAgICAgIC8vIHJlcGxhY2UgdGhlIG9sZCBET00gbm9kZSBpbiB0aGUgb3JpZ2luYWwgRE9NIHRyZWUuIFRoaXMgaXMgb25seVxuICAgICAgLy8gcG9zc2libGUgaWYgdGhlIG9yaWdpbmFsIERPTSBub2RlIHdhcyBwYXJ0IG9mIGEgRE9NIHRyZWUgd2hpY2hcbiAgICAgIC8vIHdlIGtub3cgaXMgdGhlIGNhc2UgaWYgaXQgaGFzIGEgcGFyZW50IG5vZGUuXG4gICAgICBmcm9tTm9kZS5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChtb3JwaGVkTm9kZSwgZnJvbU5vZGUpO1xuICAgIH1cblxuICAgIHJldHVybiBtb3JwaGVkTm9kZTtcbiAgfTtcbn1cblxudmFyIG1vcnBoZG9tID0gbW9ycGhkb21GYWN0b3J5KG1vcnBoQXR0cnMpO1xuXG5leHBvcnQgZGVmYXVsdCBtb3JwaGRvbTtcbiIsICJpbXBvcnQge1xuICBQSFhfQ09NUE9ORU5ULFxuICBQSFhfRElTQUJMRV9XSVRILFxuICBQSFhfRkVFREJBQ0tfRk9SLFxuICBQSFhfUFJVTkUsXG4gIFBIWF9ST09UX0lELFxuICBQSFhfU0VTU0lPTixcbiAgUEhYX1NLSVAsXG4gIFBIWF9TVEFUSUMsXG4gIFBIWF9UUklHR0VSX0FDVElPTixcbiAgUEhYX1VQREFURSxcbiAgUEhYX1NUUkVBTSxcbn0gZnJvbSBcIi4vY29uc3RhbnRzXCJcblxuaW1wb3J0IHtcbiAgZGV0ZWN0RHVwbGljYXRlSWRzLFxuICBpc0NpZFxufSBmcm9tIFwiLi91dGlsc1wiXG5cbmltcG9ydCBET00gZnJvbSBcIi4vZG9tXCJcbmltcG9ydCBET01Qb3N0TW9ycGhSZXN0b3JlciBmcm9tIFwiLi9kb21fcG9zdF9tb3JwaF9yZXN0b3JlclwiXG5pbXBvcnQgbW9ycGhkb20gZnJvbSBcIm1vcnBoZG9tXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRE9NUGF0Y2gge1xuICBzdGF0aWMgcGF0Y2hFbChmcm9tRWwsIHRvRWwsIGFjdGl2ZUVsZW1lbnQpe1xuICAgIG1vcnBoZG9tKGZyb21FbCwgdG9FbCwge1xuICAgICAgY2hpbGRyZW5Pbmx5OiBmYWxzZSxcbiAgICAgIG9uQmVmb3JlRWxVcGRhdGVkOiAoZnJvbUVsLCB0b0VsKSA9PiB7XG4gICAgICAgIGlmKGFjdGl2ZUVsZW1lbnQgJiYgYWN0aXZlRWxlbWVudC5pc1NhbWVOb2RlKGZyb21FbCkgJiYgRE9NLmlzRm9ybUlucHV0KGZyb21FbCkpe1xuICAgICAgICAgIERPTS5tZXJnZUZvY3VzZWRJbnB1dChmcm9tRWwsIHRvRWwpXG4gICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgY29uc3RydWN0b3IodmlldywgY29udGFpbmVyLCBpZCwgaHRtbCwgc3RyZWFtcywgdGFyZ2V0Q0lEKXtcbiAgICB0aGlzLnZpZXcgPSB2aWV3XG4gICAgdGhpcy5saXZlU29ja2V0ID0gdmlldy5saXZlU29ja2V0XG4gICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXJcbiAgICB0aGlzLmlkID0gaWRcbiAgICB0aGlzLnJvb3RJRCA9IHZpZXcucm9vdC5pZFxuICAgIHRoaXMuaHRtbCA9IGh0bWxcbiAgICB0aGlzLnN0cmVhbXMgPSBzdHJlYW1zXG4gICAgdGhpcy5zdHJlYW1JbnNlcnRzID0ge31cbiAgICB0aGlzLnRhcmdldENJRCA9IHRhcmdldENJRFxuICAgIHRoaXMuY2lkUGF0Y2ggPSBpc0NpZCh0aGlzLnRhcmdldENJRClcbiAgICB0aGlzLnBlbmRpbmdSZW1vdmVzID0gW11cbiAgICB0aGlzLnBoeFJlbW92ZSA9IHRoaXMubGl2ZVNvY2tldC5iaW5kaW5nKFwicmVtb3ZlXCIpXG4gICAgdGhpcy5jYWxsYmFja3MgPSB7XG4gICAgICBiZWZvcmVhZGRlZDogW10sIGJlZm9yZXVwZGF0ZWQ6IFtdLCBiZWZvcmVwaHhDaGlsZEFkZGVkOiBbXSxcbiAgICAgIGFmdGVyYWRkZWQ6IFtdLCBhZnRlcnVwZGF0ZWQ6IFtdLCBhZnRlcmRpc2NhcmRlZDogW10sIGFmdGVycGh4Q2hpbGRBZGRlZDogW10sXG4gICAgICBhZnRlcnRyYW5zaXRpb25zRGlzY2FyZGVkOiBbXVxuICAgIH1cbiAgfVxuXG4gIGJlZm9yZShraW5kLCBjYWxsYmFjayl7IHRoaXMuY2FsbGJhY2tzW2BiZWZvcmUke2tpbmR9YF0ucHVzaChjYWxsYmFjaykgfVxuICBhZnRlcihraW5kLCBjYWxsYmFjayl7IHRoaXMuY2FsbGJhY2tzW2BhZnRlciR7a2luZH1gXS5wdXNoKGNhbGxiYWNrKSB9XG5cbiAgdHJhY2tCZWZvcmUoa2luZCwgLi4uYXJncyl7XG4gICAgdGhpcy5jYWxsYmFja3NbYGJlZm9yZSR7a2luZH1gXS5mb3JFYWNoKGNhbGxiYWNrID0+IGNhbGxiYWNrKC4uLmFyZ3MpKVxuICB9XG5cbiAgdHJhY2tBZnRlcihraW5kLCAuLi5hcmdzKXtcbiAgICB0aGlzLmNhbGxiYWNrc1tgYWZ0ZXIke2tpbmR9YF0uZm9yRWFjaChjYWxsYmFjayA9PiBjYWxsYmFjayguLi5hcmdzKSlcbiAgfVxuXG4gIG1hcmtQcnVuYWJsZUNvbnRlbnRGb3JSZW1vdmFsKCl7XG4gICAgbGV0IHBoeFVwZGF0ZSA9IHRoaXMubGl2ZVNvY2tldC5iaW5kaW5nKFBIWF9VUERBVEUpXG4gICAgRE9NLmFsbCh0aGlzLmNvbnRhaW5lciwgYFske3BoeFVwZGF0ZX09JHtQSFhfU1RSRUFNfV1gLCBlbCA9PiBlbC5pbm5lckhUTUwgPSBcIlwiKVxuICAgIERPTS5hbGwodGhpcy5jb250YWluZXIsIGBbJHtwaHhVcGRhdGV9PWFwcGVuZF0gPiAqLCBbJHtwaHhVcGRhdGV9PXByZXBlbmRdID4gKmAsIGVsID0+IHtcbiAgICAgIGVsLnNldEF0dHJpYnV0ZShQSFhfUFJVTkUsIFwiXCIpXG4gICAgfSlcbiAgfVxuXG4gIHBlcmZvcm0oKXtcbiAgICBsZXQge3ZpZXcsIGxpdmVTb2NrZXQsIGNvbnRhaW5lciwgaHRtbH0gPSB0aGlzXG4gICAgbGV0IHRhcmdldENvbnRhaW5lciA9IHRoaXMuaXNDSURQYXRjaCgpID8gdGhpcy50YXJnZXRDSURDb250YWluZXIoaHRtbCkgOiBjb250YWluZXJcbiAgICBpZih0aGlzLmlzQ0lEUGF0Y2goKSAmJiAhdGFyZ2V0Q29udGFpbmVyKXsgcmV0dXJuIH1cblxuICAgIGxldCBmb2N1c2VkID0gbGl2ZVNvY2tldC5nZXRBY3RpdmVFbGVtZW50KClcbiAgICBsZXQge3NlbGVjdGlvblN0YXJ0LCBzZWxlY3Rpb25FbmR9ID0gZm9jdXNlZCAmJiBET00uaGFzU2VsZWN0aW9uUmFuZ2UoZm9jdXNlZCkgPyBmb2N1c2VkIDoge31cbiAgICBsZXQgcGh4VXBkYXRlID0gbGl2ZVNvY2tldC5iaW5kaW5nKFBIWF9VUERBVEUpXG4gICAgbGV0IHBoeEZlZWRiYWNrRm9yID0gbGl2ZVNvY2tldC5iaW5kaW5nKFBIWF9GRUVEQkFDS19GT1IpXG4gICAgbGV0IGRpc2FibGVXaXRoID0gbGl2ZVNvY2tldC5iaW5kaW5nKFBIWF9ESVNBQkxFX1dJVEgpXG4gICAgbGV0IHBoeFRyaWdnZXJFeHRlcm5hbCA9IGxpdmVTb2NrZXQuYmluZGluZyhQSFhfVFJJR0dFUl9BQ1RJT04pXG4gICAgbGV0IGFkZGVkID0gW11cbiAgICBsZXQgdXBkYXRlcyA9IFtdXG4gICAgbGV0IGFwcGVuZFByZXBlbmRVcGRhdGVzID0gW11cblxuICAgIGxldCBleHRlcm5hbEZvcm1UcmlnZ2VyZWQgPSBudWxsXG5cbiAgICBsZXQgZGlmZkhUTUwgPSBsaXZlU29ja2V0LnRpbWUoXCJwcmVtb3JwaCBjb250YWluZXIgcHJlcFwiLCAoKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5idWlsZERpZmZIVE1MKGNvbnRhaW5lciwgaHRtbCwgcGh4VXBkYXRlLCB0YXJnZXRDb250YWluZXIpXG4gICAgfSlcblxuICAgIHRoaXMudHJhY2tCZWZvcmUoXCJhZGRlZFwiLCBjb250YWluZXIpXG4gICAgdGhpcy50cmFja0JlZm9yZShcInVwZGF0ZWRcIiwgY29udGFpbmVyLCBjb250YWluZXIpXG5cbiAgICBsaXZlU29ja2V0LnRpbWUoXCJtb3JwaGRvbVwiLCAoKSA9PiB7XG4gICAgICB0aGlzLnN0cmVhbXMuZm9yRWFjaCgoW2luc2VydHMsIGRlbGV0ZUlkc10pID0+IHtcbiAgICAgICAgdGhpcy5zdHJlYW1JbnNlcnRzID0gT2JqZWN0LmFzc2lnbih0aGlzLnN0cmVhbUluc2VydHMsIGluc2VydHMpXG4gICAgICAgIGRlbGV0ZUlkcy5mb3JFYWNoKGlkID0+IHtcbiAgICAgICAgICBsZXQgY2hpbGQgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcihgW2lkPVwiJHtpZH1cIl1gKVxuICAgICAgICAgIGlmKGNoaWxkKXtcbiAgICAgICAgICAgIGlmKCF0aGlzLm1heWJlUGVuZGluZ1JlbW92ZShjaGlsZCkpe1xuICAgICAgICAgICAgICBjaGlsZC5yZW1vdmUoKVxuICAgICAgICAgICAgICB0aGlzLm9uTm9kZURpc2NhcmRlZChjaGlsZClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICB9KVxuXG4gICAgICBtb3JwaGRvbSh0YXJnZXRDb250YWluZXIsIGRpZmZIVE1MLCB7XG4gICAgICAgIGNoaWxkcmVuT25seTogdGFyZ2V0Q29udGFpbmVyLmdldEF0dHJpYnV0ZShQSFhfQ09NUE9ORU5UKSA9PT0gbnVsbCxcbiAgICAgICAgZ2V0Tm9kZUtleTogKG5vZGUpID0+IHtcbiAgICAgICAgICByZXR1cm4gRE9NLmlzUGh4RGVzdHJveWVkKG5vZGUpID8gbnVsbCA6IG5vZGUuaWRcbiAgICAgICAgfSxcbiAgICAgICAgLy8gc2tpcCBpbmRleGluZyBmcm9tIGNoaWxkcmVuIHdoZW4gY29udGFpbmVyIGlzIHN0cmVhbVxuICAgICAgICBza2lwRnJvbUNoaWxkcmVuOiAoZnJvbSkgPT4geyByZXR1cm4gZnJvbS5nZXRBdHRyaWJ1dGUocGh4VXBkYXRlKSA9PT0gUEhYX1NUUkVBTSB9LFxuICAgICAgICAvLyB0ZWxsIG1vcnBoZG9tIGhvdyB0byBhZGQgYSBjaGlsZFxuICAgICAgICBhZGRDaGlsZDogKHBhcmVudCwgY2hpbGQpID0+IHtcbiAgICAgICAgICBsZXQgc3RyZWFtQXQgPSBjaGlsZC5pZCA/IHRoaXMuc3RyZWFtSW5zZXJ0c1tjaGlsZC5pZF0gOiB1bmRlZmluZWRcbiAgICAgICAgICBpZihzdHJlYW1BdCA9PT0gdW5kZWZpbmVkKSB7IHJldHVybiBwYXJlbnQuYXBwZW5kQ2hpbGQoY2hpbGQpIH1cblxuICAgICAgICAgIC8vIHN0cmVhbWluZ1xuICAgICAgICAgIGlmKHN0cmVhbUF0ID09PSAwKXtcbiAgICAgICAgICAgIHBhcmVudC5pbnNlcnRBZGphY2VudEVsZW1lbnQoXCJhZnRlcmJlZ2luXCIsIGNoaWxkKVxuICAgICAgICAgIH0gZWxzZSBpZihzdHJlYW1BdCA9PT0gLTEpe1xuICAgICAgICAgICAgcGFyZW50LmFwcGVuZENoaWxkKGNoaWxkKVxuICAgICAgICAgIH0gZWxzZSBpZihzdHJlYW1BdCA+IDApe1xuICAgICAgICAgICAgbGV0IHNpYmxpbmcgPSBBcnJheS5mcm9tKHBhcmVudC5jaGlsZHJlbilbc3RyZWFtQXRdXG4gICAgICAgICAgICBwYXJlbnQuaW5zZXJ0QmVmb3JlKGNoaWxkLCBzaWJsaW5nKVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgb25CZWZvcmVOb2RlQWRkZWQ6IChlbCkgPT4ge1xuICAgICAgICAgIHRoaXMudHJhY2tCZWZvcmUoXCJhZGRlZFwiLCBlbClcbiAgICAgICAgICByZXR1cm4gZWxcbiAgICAgICAgfSxcbiAgICAgICAgb25Ob2RlQWRkZWQ6IChlbCkgPT4ge1xuICAgICAgICAgIC8vIGhhY2sgdG8gZml4IFNhZmFyaSBoYW5kbGluZyBvZiBpbWcgc3Jjc2V0IGFuZCB2aWRlbyB0YWdzXG4gICAgICAgICAgaWYoZWwgaW5zdGFuY2VvZiBIVE1MSW1hZ2VFbGVtZW50ICYmIGVsLnNyY3NldCl7XG4gICAgICAgICAgICBlbC5zcmNzZXQgPSBlbC5zcmNzZXRcbiAgICAgICAgICB9IGVsc2UgaWYoZWwgaW5zdGFuY2VvZiBIVE1MVmlkZW9FbGVtZW50ICYmIGVsLmF1dG9wbGF5KXtcbiAgICAgICAgICAgIGVsLnBsYXkoKVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZihET00uaXNOb3dUcmlnZ2VyRm9ybUV4dGVybmFsKGVsLCBwaHhUcmlnZ2VyRXh0ZXJuYWwpKXtcbiAgICAgICAgICAgIGV4dGVybmFsRm9ybVRyaWdnZXJlZCA9IGVsXG4gICAgICAgICAgfVxuICAgICAgICAgIC8vaW5wdXQgaGFuZGxpbmdcbiAgICAgICAgICBET00uZGlzY2FyZEVycm9yKHRhcmdldENvbnRhaW5lciwgZWwsIHBoeEZlZWRiYWNrRm9yKVxuICAgICAgICAgIC8vIG5lc3RlZCB2aWV3IGhhbmRsaW5nXG4gICAgICAgICAgaWYoKERPTS5pc1BoeENoaWxkKGVsKSAmJiB2aWV3Lm93bnNFbGVtZW50KGVsKSkgfHwgRE9NLmlzUGh4U3RpY2t5KGVsKSAmJiB2aWV3Lm93bnNFbGVtZW50KGVsLnBhcmVudE5vZGUpKXtcbiAgICAgICAgICAgIHRoaXMudHJhY2tBZnRlcihcInBoeENoaWxkQWRkZWRcIiwgZWwpXG4gICAgICAgICAgfVxuICAgICAgICAgIGFkZGVkLnB1c2goZWwpXG4gICAgICAgIH0sXG4gICAgICAgIG9uTm9kZURpc2NhcmRlZDogKGVsKSA9PiB0aGlzLm9uTm9kZURpc2NhcmRlZChlbCksXG4gICAgICAgIG9uQmVmb3JlTm9kZURpc2NhcmRlZDogKGVsKSA9PiB7XG4gICAgICAgICAgaWYoZWwuZ2V0QXR0cmlidXRlICYmIGVsLmdldEF0dHJpYnV0ZShQSFhfUFJVTkUpICE9PSBudWxsKXsgcmV0dXJuIHRydWUgfVxuICAgICAgICAgIGlmKGVsLnBhcmVudEVsZW1lbnQgIT09IG51bGwgJiYgZWwuaWQgJiZcbiAgICAgICAgICAgICBET00uaXNQaHhVcGRhdGUoZWwucGFyZW50RWxlbWVudCwgcGh4VXBkYXRlLCBbUEhYX1NUUkVBTSwgXCJhcHBlbmRcIiwgXCJwcmVwZW5kXCJdKSl7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYodGhpcy5tYXliZVBlbmRpbmdSZW1vdmUoZWwpKXsgcmV0dXJuIGZhbHNlIH1cbiAgICAgICAgICBpZih0aGlzLnNraXBDSURTaWJsaW5nKGVsKSl7IHJldHVybiBmYWxzZSB9XG5cbiAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICB9LFxuICAgICAgICBvbkVsVXBkYXRlZDogKGVsKSA9PiB7XG4gICAgICAgICAgaWYoRE9NLmlzTm93VHJpZ2dlckZvcm1FeHRlcm5hbChlbCwgcGh4VHJpZ2dlckV4dGVybmFsKSl7XG4gICAgICAgICAgICBleHRlcm5hbEZvcm1UcmlnZ2VyZWQgPSBlbFxuICAgICAgICAgIH1cbiAgICAgICAgICB1cGRhdGVzLnB1c2goZWwpXG4gICAgICAgICAgdGhpcy5tYXliZVJlT3JkZXJTdHJlYW0oZWwpXG4gICAgICAgIH0sXG4gICAgICAgIG9uQmVmb3JlRWxVcGRhdGVkOiAoZnJvbUVsLCB0b0VsKSA9PiB7XG4gICAgICAgICAgRE9NLmNsZWFuQ2hpbGROb2Rlcyh0b0VsLCBwaHhVcGRhdGUpXG4gICAgICAgICAgaWYodGhpcy5za2lwQ0lEU2libGluZyh0b0VsKSl7IHJldHVybiBmYWxzZSB9XG4gICAgICAgICAgaWYoRE9NLmlzUGh4U3RpY2t5KGZyb21FbCkpeyByZXR1cm4gZmFsc2UgfVxuICAgICAgICAgIGlmKERPTS5pc0lnbm9yZWQoZnJvbUVsLCBwaHhVcGRhdGUpIHx8IChmcm9tRWwuZm9ybSAmJiBmcm9tRWwuZm9ybS5pc1NhbWVOb2RlKGV4dGVybmFsRm9ybVRyaWdnZXJlZCkpKXtcbiAgICAgICAgICAgIHRoaXMudHJhY2tCZWZvcmUoXCJ1cGRhdGVkXCIsIGZyb21FbCwgdG9FbClcbiAgICAgICAgICAgIERPTS5tZXJnZUF0dHJzKGZyb21FbCwgdG9FbCwge2lzSWdub3JlZDogdHJ1ZX0pXG4gICAgICAgICAgICB1cGRhdGVzLnB1c2goZnJvbUVsKVxuICAgICAgICAgICAgRE9NLmFwcGx5U3RpY2t5T3BlcmF0aW9ucyhmcm9tRWwpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYoZnJvbUVsLnR5cGUgPT09IFwibnVtYmVyXCIgJiYgKGZyb21FbC52YWxpZGl0eSAmJiBmcm9tRWwudmFsaWRpdHkuYmFkSW5wdXQpKXsgcmV0dXJuIGZhbHNlIH1cbiAgICAgICAgICBpZighRE9NLnN5bmNQZW5kaW5nUmVmKGZyb21FbCwgdG9FbCwgZGlzYWJsZVdpdGgpKXtcbiAgICAgICAgICAgIGlmKERPTS5pc1VwbG9hZElucHV0KGZyb21FbCkpe1xuICAgICAgICAgICAgICB0aGlzLnRyYWNrQmVmb3JlKFwidXBkYXRlZFwiLCBmcm9tRWwsIHRvRWwpXG4gICAgICAgICAgICAgIHVwZGF0ZXMucHVzaChmcm9tRWwpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBET00uYXBwbHlTdGlja3lPcGVyYXRpb25zKGZyb21FbClcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIG5lc3RlZCB2aWV3IGhhbmRsaW5nXG4gICAgICAgICAgaWYoRE9NLmlzUGh4Q2hpbGQodG9FbCkpe1xuICAgICAgICAgICAgbGV0IHByZXZTZXNzaW9uID0gZnJvbUVsLmdldEF0dHJpYnV0ZShQSFhfU0VTU0lPTilcbiAgICAgICAgICAgIERPTS5tZXJnZUF0dHJzKGZyb21FbCwgdG9FbCwge2V4Y2x1ZGU6IFtQSFhfU1RBVElDXX0pXG4gICAgICAgICAgICBpZihwcmV2U2Vzc2lvbiAhPT0gXCJcIil7IGZyb21FbC5zZXRBdHRyaWJ1dGUoUEhYX1NFU1NJT04sIHByZXZTZXNzaW9uKSB9XG4gICAgICAgICAgICBmcm9tRWwuc2V0QXR0cmlidXRlKFBIWF9ST09UX0lELCB0aGlzLnJvb3RJRClcbiAgICAgICAgICAgIERPTS5hcHBseVN0aWNreU9wZXJhdGlvbnMoZnJvbUVsKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gaW5wdXQgaGFuZGxpbmdcbiAgICAgICAgICBET00uY29weVByaXZhdGVzKHRvRWwsIGZyb21FbClcbiAgICAgICAgICBET00uZGlzY2FyZEVycm9yKHRhcmdldENvbnRhaW5lciwgdG9FbCwgcGh4RmVlZGJhY2tGb3IpXG5cbiAgICAgICAgICBsZXQgaXNGb2N1c2VkRm9ybUVsID0gZm9jdXNlZCAmJiBmcm9tRWwuaXNTYW1lTm9kZShmb2N1c2VkKSAmJiBET00uaXNGb3JtSW5wdXQoZnJvbUVsKVxuICAgICAgICAgIGlmKGlzRm9jdXNlZEZvcm1FbCAmJiBmcm9tRWwudHlwZSAhPT0gXCJoaWRkZW5cIil7XG4gICAgICAgICAgICB0aGlzLnRyYWNrQmVmb3JlKFwidXBkYXRlZFwiLCBmcm9tRWwsIHRvRWwpXG4gICAgICAgICAgICBET00ubWVyZ2VGb2N1c2VkSW5wdXQoZnJvbUVsLCB0b0VsKVxuICAgICAgICAgICAgRE9NLnN5bmNBdHRyc1RvUHJvcHMoZnJvbUVsKVxuICAgICAgICAgICAgdXBkYXRlcy5wdXNoKGZyb21FbClcbiAgICAgICAgICAgIERPTS5hcHBseVN0aWNreU9wZXJhdGlvbnMoZnJvbUVsKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmKERPTS5pc1BoeFVwZGF0ZSh0b0VsLCBwaHhVcGRhdGUsIFtcImFwcGVuZFwiLCBcInByZXBlbmRcIl0pKXtcbiAgICAgICAgICAgICAgYXBwZW5kUHJlcGVuZFVwZGF0ZXMucHVzaChuZXcgRE9NUG9zdE1vcnBoUmVzdG9yZXIoZnJvbUVsLCB0b0VsLCB0b0VsLmdldEF0dHJpYnV0ZShwaHhVcGRhdGUpKSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIERPTS5zeW5jQXR0cnNUb1Byb3BzKHRvRWwpXG4gICAgICAgICAgICBET00uYXBwbHlTdGlja3lPcGVyYXRpb25zKHRvRWwpXG4gICAgICAgICAgICB0aGlzLnRyYWNrQmVmb3JlKFwidXBkYXRlZFwiLCBmcm9tRWwsIHRvRWwpXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9KVxuXG4gICAgaWYobGl2ZVNvY2tldC5pc0RlYnVnRW5hYmxlZCgpKXsgZGV0ZWN0RHVwbGljYXRlSWRzKCkgfVxuXG4gICAgaWYoYXBwZW5kUHJlcGVuZFVwZGF0ZXMubGVuZ3RoID4gMCl7XG4gICAgICBsaXZlU29ja2V0LnRpbWUoXCJwb3N0LW1vcnBoIGFwcGVuZC9wcmVwZW5kIHJlc3RvcmF0aW9uXCIsICgpID0+IHtcbiAgICAgICAgYXBwZW5kUHJlcGVuZFVwZGF0ZXMuZm9yRWFjaCh1cGRhdGUgPT4gdXBkYXRlLnBlcmZvcm0oKSlcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgbGl2ZVNvY2tldC5zaWxlbmNlRXZlbnRzKCgpID0+IERPTS5yZXN0b3JlRm9jdXMoZm9jdXNlZCwgc2VsZWN0aW9uU3RhcnQsIHNlbGVjdGlvbkVuZCkpXG4gICAgRE9NLmRpc3BhdGNoRXZlbnQoZG9jdW1lbnQsIFwicGh4OnVwZGF0ZVwiKVxuICAgIGFkZGVkLmZvckVhY2goZWwgPT4gdGhpcy50cmFja0FmdGVyKFwiYWRkZWRcIiwgZWwpKVxuICAgIHVwZGF0ZXMuZm9yRWFjaChlbCA9PiB0aGlzLnRyYWNrQWZ0ZXIoXCJ1cGRhdGVkXCIsIGVsKSlcblxuICAgIHRoaXMudHJhbnNpdGlvblBlbmRpbmdSZW1vdmVzKClcblxuICAgIGlmKGV4dGVybmFsRm9ybVRyaWdnZXJlZCl7XG4gICAgICBsaXZlU29ja2V0LnVubG9hZCgpXG4gICAgICBleHRlcm5hbEZvcm1UcmlnZ2VyZWQuc3VibWl0KClcbiAgICB9XG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIG9uTm9kZURpc2NhcmRlZChlbCl7XG4gICAgLy8gbmVzdGVkIHZpZXcgaGFuZGxpbmdcbiAgICBpZihET00uaXNQaHhDaGlsZChlbCkgfHwgRE9NLmlzUGh4U3RpY2t5KGVsKSl7IHRoaXMubGl2ZVNvY2tldC5kZXN0cm95Vmlld0J5RWwoZWwpIH1cbiAgICB0aGlzLnRyYWNrQWZ0ZXIoXCJkaXNjYXJkZWRcIiwgZWwpXG4gIH1cblxuICBtYXliZVBlbmRpbmdSZW1vdmUobm9kZSl7XG4gICAgaWYobm9kZS5nZXRBdHRyaWJ1dGUgJiYgbm9kZS5nZXRBdHRyaWJ1dGUodGhpcy5waHhSZW1vdmUpICE9PSBudWxsKXtcbiAgICAgIHRoaXMucGVuZGluZ1JlbW92ZXMucHVzaChub2RlKVxuICAgICAgcmV0dXJuIHRydWVcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICB9XG5cbiAgbWF5YmVSZU9yZGVyU3RyZWFtKGVsKXtcbiAgICBsZXQgc3RyZWFtQXQgPSBlbC5pZCA/IHRoaXMuc3RyZWFtSW5zZXJ0c1tlbC5pZF0gOiB1bmRlZmluZWRcbiAgICBpZihzdHJlYW1BdCA9PT0gdW5kZWZpbmVkKXsgcmV0dXJuIH1cblxuICAgIGlmKHN0cmVhbUF0ID09PSAwKXtcbiAgICAgIGVsLnBhcmVudEVsZW1lbnQuaW5zZXJ0QmVmb3JlKGVsLCBlbC5wYXJlbnRFbGVtZW50LmZpcnN0RWxlbWVudENoaWxkKVxuICAgIH0gZWxzZSBpZihzdHJlYW1BdCA+IDApe1xuICAgICAgbGV0IGNoaWxkcmVuID0gQXJyYXkuZnJvbShlbC5wYXJlbnRFbGVtZW50LmNoaWxkcmVuKVxuICAgICAgbGV0IG9sZEluZGV4ID0gY2hpbGRyZW4uaW5kZXhPZihlbClcbiAgICAgIGlmKHN0cmVhbUF0ID49IGNoaWxkcmVuLmxlbmd0aCAtIDEpe1xuICAgICAgICBlbC5wYXJlbnRFbGVtZW50LmFwcGVuZENoaWxkKGVsKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGV0IHNpYmxpbmcgPSBjaGlsZHJlbltzdHJlYW1BdF1cbiAgICAgICAgaWYob2xkSW5kZXggPiBzdHJlYW1BdCl7XG4gICAgICAgICAgZWwucGFyZW50RWxlbWVudC5pbnNlcnRCZWZvcmUoZWwsIHNpYmxpbmcpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZWwucGFyZW50RWxlbWVudC5pbnNlcnRCZWZvcmUoZWwsIHNpYmxpbmcubmV4dEVsZW1lbnRTaWJsaW5nKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgdHJhbnNpdGlvblBlbmRpbmdSZW1vdmVzKCl7XG4gICAgbGV0IHtwZW5kaW5nUmVtb3ZlcywgbGl2ZVNvY2tldH0gPSB0aGlzXG4gICAgaWYocGVuZGluZ1JlbW92ZXMubGVuZ3RoID4gMCl7XG4gICAgICBsaXZlU29ja2V0LnRyYW5zaXRpb25SZW1vdmVzKHBlbmRpbmdSZW1vdmVzKVxuICAgICAgbGl2ZVNvY2tldC5yZXF1ZXN0RE9NVXBkYXRlKCgpID0+IHtcbiAgICAgICAgcGVuZGluZ1JlbW92ZXMuZm9yRWFjaChlbCA9PiB7XG4gICAgICAgICAgbGV0IGNoaWxkID0gRE9NLmZpcnN0UGh4Q2hpbGQoZWwpXG4gICAgICAgICAgaWYoY2hpbGQpeyBsaXZlU29ja2V0LmRlc3Ryb3lWaWV3QnlFbChjaGlsZCkgfVxuICAgICAgICAgIGVsLnJlbW92ZSgpXG4gICAgICAgIH0pXG4gICAgICAgIHRoaXMudHJhY2tBZnRlcihcInRyYW5zaXRpb25zRGlzY2FyZGVkXCIsIHBlbmRpbmdSZW1vdmVzKVxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICBpc0NJRFBhdGNoKCl7IHJldHVybiB0aGlzLmNpZFBhdGNoIH1cblxuICBza2lwQ0lEU2libGluZyhlbCl7XG4gICAgcmV0dXJuIGVsLm5vZGVUeXBlID09PSBOb2RlLkVMRU1FTlRfTk9ERSAmJiBlbC5nZXRBdHRyaWJ1dGUoUEhYX1NLSVApICE9PSBudWxsXG4gIH1cblxuICB0YXJnZXRDSURDb250YWluZXIoaHRtbCl7XG4gICAgaWYoIXRoaXMuaXNDSURQYXRjaCgpKXsgcmV0dXJuIH1cbiAgICBsZXQgW2ZpcnN0LCAuLi5yZXN0XSA9IERPTS5maW5kQ29tcG9uZW50Tm9kZUxpc3QodGhpcy5jb250YWluZXIsIHRoaXMudGFyZ2V0Q0lEKVxuICAgIGlmKHJlc3QubGVuZ3RoID09PSAwICYmIERPTS5jaGlsZE5vZGVMZW5ndGgoaHRtbCkgPT09IDEpe1xuICAgICAgcmV0dXJuIGZpcnN0XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBmaXJzdCAmJiBmaXJzdC5wYXJlbnROb2RlXG4gICAgfVxuICB9XG5cbiAgLy8gYnVpbGRzIEhUTUwgZm9yIG1vcnBoZG9tIHBhdGNoXG4gIC8vIC0gZm9yIGZ1bGwgcGF0Y2hlcyBvZiBMaXZlVmlldyBvciBhIGNvbXBvbmVudCB3aXRoIGEgc2luZ2xlXG4gIC8vICAgcm9vdCBub2RlLCBzaW1wbHkgcmV0dXJucyB0aGUgSFRNTFxuICAvLyAtIGZvciBwYXRjaGVzIG9mIGEgY29tcG9uZW50IHdpdGggbXVsdGlwbGUgcm9vdCBub2RlcywgdGhlXG4gIC8vICAgcGFyZW50IG5vZGUgYmVjb21lcyB0aGUgdGFyZ2V0IGNvbnRhaW5lciBhbmQgbm9uLWNvbXBvbmVudFxuICAvLyAgIHNpYmxpbmdzIGFyZSBtYXJrZWQgYXMgc2tpcC5cbiAgYnVpbGREaWZmSFRNTChjb250YWluZXIsIGh0bWwsIHBoeFVwZGF0ZSwgdGFyZ2V0Q29udGFpbmVyKXtcbiAgICBsZXQgaXNDSURQYXRjaCA9IHRoaXMuaXNDSURQYXRjaCgpXG4gICAgbGV0IGlzQ0lEV2l0aFNpbmdsZVJvb3QgPSBpc0NJRFBhdGNoICYmIHRhcmdldENvbnRhaW5lci5nZXRBdHRyaWJ1dGUoUEhYX0NPTVBPTkVOVCkgPT09IHRoaXMudGFyZ2V0Q0lELnRvU3RyaW5nKClcbiAgICBpZighaXNDSURQYXRjaCB8fCBpc0NJRFdpdGhTaW5nbGVSb290KXtcbiAgICAgIHJldHVybiBodG1sXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGNvbXBvbmVudCBwYXRjaCB3aXRoIG11bHRpcGxlIENJRCByb290c1xuICAgICAgbGV0IGRpZmZDb250YWluZXIgPSBudWxsXG4gICAgICBsZXQgdGVtcGxhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGVtcGxhdGVcIilcbiAgICAgIGRpZmZDb250YWluZXIgPSBET00uY2xvbmVOb2RlKHRhcmdldENvbnRhaW5lcilcbiAgICAgIGxldCBbZmlyc3RDb21wb25lbnQsIC4uLnJlc3RdID0gRE9NLmZpbmRDb21wb25lbnROb2RlTGlzdChkaWZmQ29udGFpbmVyLCB0aGlzLnRhcmdldENJRClcbiAgICAgIHRlbXBsYXRlLmlubmVySFRNTCA9IGh0bWxcbiAgICAgIHJlc3QuZm9yRWFjaChlbCA9PiBlbC5yZW1vdmUoKSlcbiAgICAgIEFycmF5LmZyb20oZGlmZkNvbnRhaW5lci5jaGlsZE5vZGVzKS5mb3JFYWNoKGNoaWxkID0+IHtcbiAgICAgICAgLy8gd2UgY2FuIG9ubHkgc2tpcCB0cmFja2FibGUgbm9kZXMgd2l0aCBhbiBJRFxuICAgICAgICBpZihjaGlsZC5pZCAmJiBjaGlsZC5ub2RlVHlwZSA9PT0gTm9kZS5FTEVNRU5UX05PREUgJiYgY2hpbGQuZ2V0QXR0cmlidXRlKFBIWF9DT01QT05FTlQpICE9PSB0aGlzLnRhcmdldENJRC50b1N0cmluZygpKXtcbiAgICAgICAgICBjaGlsZC5zZXRBdHRyaWJ1dGUoUEhYX1NLSVAsIFwiXCIpXG4gICAgICAgICAgY2hpbGQuaW5uZXJIVE1MID0gXCJcIlxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgQXJyYXkuZnJvbSh0ZW1wbGF0ZS5jb250ZW50LmNoaWxkTm9kZXMpLmZvckVhY2goZWwgPT4gZGlmZkNvbnRhaW5lci5pbnNlcnRCZWZvcmUoZWwsIGZpcnN0Q29tcG9uZW50KSlcbiAgICAgIGZpcnN0Q29tcG9uZW50LnJlbW92ZSgpXG4gICAgICByZXR1cm4gZGlmZkNvbnRhaW5lci5vdXRlckhUTUxcbiAgICB9XG4gIH1cblxuICBpbmRleE9mKHBhcmVudCwgY2hpbGQpeyByZXR1cm4gQXJyYXkuZnJvbShwYXJlbnQuY2hpbGRyZW4pLmluZGV4T2YoY2hpbGQpIH1cbn1cbiIsICJpbXBvcnQge1xuICBDT01QT05FTlRTLFxuICBEWU5BTUlDUyxcbiAgVEVNUExBVEVTLFxuICBFVkVOVFMsXG4gIFBIWF9DT01QT05FTlQsXG4gIFBIWF9TS0lQLFxuICBSRVBMWSxcbiAgU1RBVElDLFxuICBUSVRMRSxcbiAgU1RSRUFNLFxufSBmcm9tIFwiLi9jb25zdGFudHNcIlxuXG5pbXBvcnQge1xuICBpc09iamVjdCxcbiAgbG9nRXJyb3IsXG4gIGlzQ2lkLFxufSBmcm9tIFwiLi91dGlsc1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJlbmRlcmVkIHtcbiAgc3RhdGljIGV4dHJhY3QoZGlmZil7XG4gICAgbGV0IHtbUkVQTFldOiByZXBseSwgW0VWRU5UU106IGV2ZW50cywgW1RJVExFXTogdGl0bGV9ID0gZGlmZlxuICAgIGRlbGV0ZSBkaWZmW1JFUExZXVxuICAgIGRlbGV0ZSBkaWZmW0VWRU5UU11cbiAgICBkZWxldGUgZGlmZltUSVRMRV1cbiAgICByZXR1cm4ge2RpZmYsIHRpdGxlLCByZXBseTogcmVwbHkgfHwgbnVsbCwgZXZlbnRzOiBldmVudHMgfHwgW119XG4gIH1cblxuICBjb25zdHJ1Y3Rvcih2aWV3SWQsIHJlbmRlcmVkKXtcbiAgICB0aGlzLnZpZXdJZCA9IHZpZXdJZFxuICAgIHRoaXMucmVuZGVyZWQgPSB7fVxuICAgIHRoaXMubWVyZ2VEaWZmKHJlbmRlcmVkKVxuICB9XG5cbiAgcGFyZW50Vmlld0lkKCl7IHJldHVybiB0aGlzLnZpZXdJZCB9XG5cbiAgdG9TdHJpbmcob25seUNpZHMpe1xuICAgIGxldCBbc3RyLCBzdHJlYW1zXSA9IHRoaXMucmVjdXJzaXZlVG9TdHJpbmcodGhpcy5yZW5kZXJlZCwgdGhpcy5yZW5kZXJlZFtDT01QT05FTlRTXSwgb25seUNpZHMpXG4gICAgcmV0dXJuIFtzdHIsIHN0cmVhbXNdXG4gIH1cblxuICByZWN1cnNpdmVUb1N0cmluZyhyZW5kZXJlZCwgY29tcG9uZW50cyA9IHJlbmRlcmVkW0NPTVBPTkVOVFNdLCBvbmx5Q2lkcyl7XG4gICAgb25seUNpZHMgPSBvbmx5Q2lkcyA/IG5ldyBTZXQob25seUNpZHMpIDogbnVsbFxuICAgIGxldCBvdXRwdXQgPSB7YnVmZmVyOiBcIlwiLCBjb21wb25lbnRzOiBjb21wb25lbnRzLCBvbmx5Q2lkczogb25seUNpZHMsIHN0cmVhbXM6IG5ldyBTZXQoKX1cbiAgICB0aGlzLnRvT3V0cHV0QnVmZmVyKHJlbmRlcmVkLCBudWxsLCBvdXRwdXQpXG4gICAgcmV0dXJuIFtvdXRwdXQuYnVmZmVyLCBvdXRwdXQuc3RyZWFtc11cbiAgfVxuXG4gIGNvbXBvbmVudENJRHMoZGlmZil7IHJldHVybiBPYmplY3Qua2V5cyhkaWZmW0NPTVBPTkVOVFNdIHx8IHt9KS5tYXAoaSA9PiBwYXJzZUludChpKSkgfVxuXG4gIGlzQ29tcG9uZW50T25seURpZmYoZGlmZil7XG4gICAgaWYoIWRpZmZbQ09NUE9ORU5UU10peyByZXR1cm4gZmFsc2UgfVxuICAgIHJldHVybiBPYmplY3Qua2V5cyhkaWZmKS5sZW5ndGggPT09IDFcbiAgfVxuXG4gIGdldENvbXBvbmVudChkaWZmLCBjaWQpeyByZXR1cm4gZGlmZltDT01QT05FTlRTXVtjaWRdIH1cblxuICBtZXJnZURpZmYoZGlmZil7XG4gICAgbGV0IG5ld2MgPSBkaWZmW0NPTVBPTkVOVFNdXG4gICAgbGV0IGNhY2hlID0ge31cbiAgICBkZWxldGUgZGlmZltDT01QT05FTlRTXVxuICAgIHRoaXMucmVuZGVyZWQgPSB0aGlzLm11dGFibGVNZXJnZSh0aGlzLnJlbmRlcmVkLCBkaWZmKVxuICAgIHRoaXMucmVuZGVyZWRbQ09NUE9ORU5UU10gPSB0aGlzLnJlbmRlcmVkW0NPTVBPTkVOVFNdIHx8IHt9XG5cbiAgICBpZihuZXdjKXtcbiAgICAgIGxldCBvbGRjID0gdGhpcy5yZW5kZXJlZFtDT01QT05FTlRTXVxuXG4gICAgICBmb3IobGV0IGNpZCBpbiBuZXdjKXtcbiAgICAgICAgbmV3Y1tjaWRdID0gdGhpcy5jYWNoZWRGaW5kQ29tcG9uZW50KGNpZCwgbmV3Y1tjaWRdLCBvbGRjLCBuZXdjLCBjYWNoZSlcbiAgICAgIH1cblxuICAgICAgZm9yKGxldCBjaWQgaW4gbmV3Yyl7IG9sZGNbY2lkXSA9IG5ld2NbY2lkXSB9XG4gICAgICBkaWZmW0NPTVBPTkVOVFNdID0gbmV3Y1xuICAgIH1cbiAgfVxuXG4gIGNhY2hlZEZpbmRDb21wb25lbnQoY2lkLCBjZGlmZiwgb2xkYywgbmV3YywgY2FjaGUpe1xuICAgIGlmKGNhY2hlW2NpZF0pe1xuICAgICAgcmV0dXJuIGNhY2hlW2NpZF1cbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IG5kaWZmLCBzdGF0LCBzY2lkID0gY2RpZmZbU1RBVElDXVxuXG4gICAgICBpZihpc0NpZChzY2lkKSl7XG4gICAgICAgIGxldCB0ZGlmZlxuXG4gICAgICAgIGlmKHNjaWQgPiAwKXtcbiAgICAgICAgICB0ZGlmZiA9IHRoaXMuY2FjaGVkRmluZENvbXBvbmVudChzY2lkLCBuZXdjW3NjaWRdLCBvbGRjLCBuZXdjLCBjYWNoZSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0ZGlmZiA9IG9sZGNbLXNjaWRdXG4gICAgICAgIH1cblxuICAgICAgICBzdGF0ID0gdGRpZmZbU1RBVElDXVxuICAgICAgICBuZGlmZiA9IHRoaXMuY2xvbmVNZXJnZSh0ZGlmZiwgY2RpZmYpXG4gICAgICAgIG5kaWZmW1NUQVRJQ10gPSBzdGF0XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZGlmZiA9IGNkaWZmW1NUQVRJQ10gIT09IHVuZGVmaW5lZCA/IGNkaWZmIDogdGhpcy5jbG9uZU1lcmdlKG9sZGNbY2lkXSB8fCB7fSwgY2RpZmYpXG4gICAgICB9XG5cbiAgICAgIGNhY2hlW2NpZF0gPSBuZGlmZlxuICAgICAgcmV0dXJuIG5kaWZmXG4gICAgfVxuICB9XG5cbiAgbXV0YWJsZU1lcmdlKHRhcmdldCwgc291cmNlKXtcbiAgICBpZihzb3VyY2VbU1RBVElDXSAhPT0gdW5kZWZpbmVkKXtcbiAgICAgIHJldHVybiBzb3VyY2VcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5kb011dGFibGVNZXJnZSh0YXJnZXQsIHNvdXJjZSlcbiAgICAgIHJldHVybiB0YXJnZXRcbiAgICB9XG4gIH1cblxuICBkb011dGFibGVNZXJnZSh0YXJnZXQsIHNvdXJjZSl7XG4gICAgZm9yKGxldCBrZXkgaW4gc291cmNlKXtcbiAgICAgIGxldCB2YWwgPSBzb3VyY2Vba2V5XVxuICAgICAgbGV0IHRhcmdldFZhbCA9IHRhcmdldFtrZXldXG4gICAgICBsZXQgaXNPYmpWYWwgPSBpc09iamVjdCh2YWwpXG4gICAgICBpZihpc09ialZhbCAmJiB2YWxbU1RBVElDXSA9PT0gdW5kZWZpbmVkICYmIGlzT2JqZWN0KHRhcmdldFZhbCkpe1xuICAgICAgICB0aGlzLmRvTXV0YWJsZU1lcmdlKHRhcmdldFZhbCwgdmFsKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGFyZ2V0W2tleV0gPSB2YWxcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBjbG9uZU1lcmdlKHRhcmdldCwgc291cmNlKXtcbiAgICBsZXQgbWVyZ2VkID0gey4uLnRhcmdldCwgLi4uc291cmNlfVxuICAgIGZvcihsZXQga2V5IGluIG1lcmdlZCl7XG4gICAgICBsZXQgdmFsID0gc291cmNlW2tleV1cbiAgICAgIGxldCB0YXJnZXRWYWwgPSB0YXJnZXRba2V5XVxuICAgICAgaWYoaXNPYmplY3QodmFsKSAmJiB2YWxbU1RBVElDXSA9PT0gdW5kZWZpbmVkICYmIGlzT2JqZWN0KHRhcmdldFZhbCkpe1xuICAgICAgICBtZXJnZWRba2V5XSA9IHRoaXMuY2xvbmVNZXJnZSh0YXJnZXRWYWwsIHZhbClcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1lcmdlZFxuICB9XG5cbiAgY29tcG9uZW50VG9TdHJpbmcoY2lkKXtcbiAgICBsZXQgW3N0ciwgc3RyZWFtc10gPSB0aGlzLnJlY3Vyc2l2ZUNJRFRvU3RyaW5nKHRoaXMucmVuZGVyZWRbQ09NUE9ORU5UU10sIGNpZClcbiAgICByZXR1cm4gW3N0ciwgc3RyZWFtc11cbiAgfVxuXG4gIHBydW5lQ0lEcyhjaWRzKXtcbiAgICBjaWRzLmZvckVhY2goY2lkID0+IGRlbGV0ZSB0aGlzLnJlbmRlcmVkW0NPTVBPTkVOVFNdW2NpZF0pXG4gIH1cblxuICAvLyBwcml2YXRlXG5cbiAgZ2V0KCl7IHJldHVybiB0aGlzLnJlbmRlcmVkIH1cblxuICBpc05ld0ZpbmdlcnByaW50KGRpZmYgPSB7fSl7IHJldHVybiAhIWRpZmZbU1RBVElDXSB9XG5cbiAgdGVtcGxhdGVTdGF0aWMocGFydCwgdGVtcGxhdGVzKXtcbiAgICBpZih0eXBlb2YgKHBhcnQpID09PSBcIm51bWJlclwiKSB7XG4gICAgICByZXR1cm4gdGVtcGxhdGVzW3BhcnRdXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBwYXJ0XG4gICAgfVxuICB9XG5cbiAgdG9PdXRwdXRCdWZmZXIocmVuZGVyZWQsIHRlbXBsYXRlcywgb3V0cHV0KXtcbiAgICBpZihyZW5kZXJlZFtEWU5BTUlDU10peyByZXR1cm4gdGhpcy5jb21wcmVoZW5zaW9uVG9CdWZmZXIocmVuZGVyZWQsIHRlbXBsYXRlcywgb3V0cHV0KSB9XG4gICAgbGV0IHtbU1RBVElDXTogc3RhdGljc30gPSByZW5kZXJlZFxuICAgIHN0YXRpY3MgPSB0aGlzLnRlbXBsYXRlU3RhdGljKHN0YXRpY3MsIHRlbXBsYXRlcylcblxuICAgIG91dHB1dC5idWZmZXIgKz0gc3RhdGljc1swXVxuICAgIGZvcihsZXQgaSA9IDE7IGkgPCBzdGF0aWNzLmxlbmd0aDsgaSsrKXtcbiAgICAgIHRoaXMuZHluYW1pY1RvQnVmZmVyKHJlbmRlcmVkW2kgLSAxXSwgdGVtcGxhdGVzLCBvdXRwdXQpXG4gICAgICBvdXRwdXQuYnVmZmVyICs9IHN0YXRpY3NbaV1cbiAgICB9XG4gIH1cblxuICBjb21wcmVoZW5zaW9uVG9CdWZmZXIocmVuZGVyZWQsIHRlbXBsYXRlcywgb3V0cHV0KXtcbiAgICBsZXQge1tEWU5BTUlDU106IGR5bmFtaWNzLCBbU1RBVElDXTogc3RhdGljcywgW1NUUkVBTV06IHN0cmVhbX0gPSByZW5kZXJlZFxuICAgIGxldCBbX2luc2VydHMsIGRlbGV0ZUlkc10gPSBzdHJlYW0gfHwgW3t9LCBbXV1cbiAgICBzdGF0aWNzID0gdGhpcy50ZW1wbGF0ZVN0YXRpYyhzdGF0aWNzLCB0ZW1wbGF0ZXMpXG4gICAgbGV0IGNvbXBUZW1wbGF0ZXMgPSB0ZW1wbGF0ZXMgfHwgcmVuZGVyZWRbVEVNUExBVEVTXVxuICAgIGZvcihsZXQgZCA9IDA7IGQgPCBkeW5hbWljcy5sZW5ndGg7IGQrKyl7XG4gICAgICBsZXQgZHluYW1pYyA9IGR5bmFtaWNzW2RdXG4gICAgICBvdXRwdXQuYnVmZmVyICs9IHN0YXRpY3NbMF1cbiAgICAgIGZvcihsZXQgaSA9IDE7IGkgPCBzdGF0aWNzLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgdGhpcy5keW5hbWljVG9CdWZmZXIoZHluYW1pY1tpIC0gMV0sIGNvbXBUZW1wbGF0ZXMsIG91dHB1dClcbiAgICAgICAgb3V0cHV0LmJ1ZmZlciArPSBzdGF0aWNzW2ldXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYoc3RyZWFtICE9PSB1bmRlZmluZWQgJiYgKHJlbmRlcmVkW0RZTkFNSUNTXS5sZW5ndGggPiAwIHx8IGRlbGV0ZUlkcy5sZW5ndGggPiAwKSl7XG4gICAgICByZW5kZXJlZFtEWU5BTUlDU10gPSBbXVxuICAgICAgb3V0cHV0LnN0cmVhbXMuYWRkKHN0cmVhbSlcbiAgICB9XG4gIH1cblxuICBkeW5hbWljVG9CdWZmZXIocmVuZGVyZWQsIHRlbXBsYXRlcywgb3V0cHV0KXtcbiAgICBpZih0eXBlb2YgKHJlbmRlcmVkKSA9PT0gXCJudW1iZXJcIil7XG4gICAgICBsZXQgW3N0ciwgc3RyZWFtc10gPSB0aGlzLnJlY3Vyc2l2ZUNJRFRvU3RyaW5nKG91dHB1dC5jb21wb25lbnRzLCByZW5kZXJlZCwgb3V0cHV0Lm9ubHlDaWRzKVxuICAgICAgb3V0cHV0LmJ1ZmZlciArPSBzdHJcbiAgICAgIG91dHB1dC5zdHJlYW1zID0gbmV3IFNldChbLi4ub3V0cHV0LnN0cmVhbXMsIC4uLnN0cmVhbXNdKVxuICAgIH0gZWxzZSBpZihpc09iamVjdChyZW5kZXJlZCkpe1xuICAgICAgdGhpcy50b091dHB1dEJ1ZmZlcihyZW5kZXJlZCwgdGVtcGxhdGVzLCBvdXRwdXQpXG4gICAgfSBlbHNlIHtcbiAgICAgIG91dHB1dC5idWZmZXIgKz0gcmVuZGVyZWRcbiAgICB9XG4gIH1cblxuICByZWN1cnNpdmVDSURUb1N0cmluZyhjb21wb25lbnRzLCBjaWQsIG9ubHlDaWRzKXtcbiAgICBsZXQgY29tcG9uZW50ID0gY29tcG9uZW50c1tjaWRdIHx8IGxvZ0Vycm9yKGBubyBjb21wb25lbnQgZm9yIENJRCAke2NpZH1gLCBjb21wb25lbnRzKVxuICAgIGxldCB0ZW1wbGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZW1wbGF0ZVwiKVxuICAgIGxldCBbaHRtbCwgc3RyZWFtc10gPSB0aGlzLnJlY3Vyc2l2ZVRvU3RyaW5nKGNvbXBvbmVudCwgY29tcG9uZW50cywgb25seUNpZHMpXG4gICAgdGVtcGxhdGUuaW5uZXJIVE1MID0gaHRtbFxuICAgIGxldCBjb250YWluZXIgPSB0ZW1wbGF0ZS5jb250ZW50XG4gICAgbGV0IHNraXAgPSBvbmx5Q2lkcyAmJiAhb25seUNpZHMuaGFzKGNpZClcblxuICAgIGxldCBbaGFzQ2hpbGROb2RlcywgaGFzQ2hpbGRDb21wb25lbnRzXSA9XG4gICAgICBBcnJheS5mcm9tKGNvbnRhaW5lci5jaGlsZE5vZGVzKS5yZWR1Y2UoKFtoYXNOb2RlcywgaGFzQ29tcG9uZW50c10sIGNoaWxkLCBpKSA9PiB7XG4gICAgICAgIGlmKGNoaWxkLm5vZGVUeXBlID09PSBOb2RlLkVMRU1FTlRfTk9ERSl7XG4gICAgICAgICAgaWYoY2hpbGQuZ2V0QXR0cmlidXRlKFBIWF9DT01QT05FTlQpKXtcbiAgICAgICAgICAgIHJldHVybiBbaGFzTm9kZXMsIHRydWVdXG4gICAgICAgICAgfVxuICAgICAgICAgIGNoaWxkLnNldEF0dHJpYnV0ZShQSFhfQ09NUE9ORU5ULCBjaWQpXG4gICAgICAgICAgaWYoIWNoaWxkLmlkKXsgY2hpbGQuaWQgPSBgJHt0aGlzLnBhcmVudFZpZXdJZCgpfS0ke2NpZH0tJHtpfWAgfVxuICAgICAgICAgIGlmKHNraXApe1xuICAgICAgICAgICAgY2hpbGQuc2V0QXR0cmlidXRlKFBIWF9TS0lQLCBcIlwiKVxuICAgICAgICAgICAgY2hpbGQuaW5uZXJIVE1MID0gXCJcIlxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gW3RydWUsIGhhc0NvbXBvbmVudHNdXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYoY2hpbGQubm9kZVZhbHVlLnRyaW0oKSAhPT0gXCJcIil7XG4gICAgICAgICAgICBsb2dFcnJvcihcIm9ubHkgSFRNTCBlbGVtZW50IHRhZ3MgYXJlIGFsbG93ZWQgYXQgdGhlIHJvb3Qgb2YgY29tcG9uZW50cy5cXG5cXG5cIiArXG4gICAgICAgICAgICAgIGBnb3Q6IFwiJHtjaGlsZC5ub2RlVmFsdWUudHJpbSgpfVwiXFxuXFxuYCArXG4gICAgICAgICAgICAgIFwid2l0aGluOlxcblwiLCB0ZW1wbGF0ZS5pbm5lckhUTUwudHJpbSgpKVxuICAgICAgICAgICAgY2hpbGQucmVwbGFjZVdpdGgodGhpcy5jcmVhdGVTcGFuKGNoaWxkLm5vZGVWYWx1ZSwgY2lkKSlcbiAgICAgICAgICAgIHJldHVybiBbdHJ1ZSwgaGFzQ29tcG9uZW50c11cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2hpbGQucmVtb3ZlKClcbiAgICAgICAgICAgIHJldHVybiBbaGFzTm9kZXMsIGhhc0NvbXBvbmVudHNdXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LCBbZmFsc2UsIGZhbHNlXSlcblxuICAgIGlmKCFoYXNDaGlsZE5vZGVzICYmICFoYXNDaGlsZENvbXBvbmVudHMpe1xuICAgICAgbG9nRXJyb3IoXCJleHBlY3RlZCBhdCBsZWFzdCBvbmUgSFRNTCBlbGVtZW50IHRhZyBpbnNpZGUgYSBjb21wb25lbnQsIGJ1dCB0aGUgY29tcG9uZW50IGlzIGVtcHR5OlxcblwiLFxuICAgICAgICB0ZW1wbGF0ZS5pbm5lckhUTUwudHJpbSgpKVxuICAgICAgcmV0dXJuIFt0aGlzLmNyZWF0ZVNwYW4oXCJcIiwgY2lkKS5vdXRlckhUTUwsIHN0cmVhbXNdXG4gICAgfSBlbHNlIGlmKCFoYXNDaGlsZE5vZGVzICYmIGhhc0NoaWxkQ29tcG9uZW50cyl7XG4gICAgICBsb2dFcnJvcihcImV4cGVjdGVkIGF0IGxlYXN0IG9uZSBIVE1MIGVsZW1lbnQgdGFnIGRpcmVjdGx5IGluc2lkZSBhIGNvbXBvbmVudCwgYnV0IG9ubHkgc3ViY29tcG9uZW50cyB3ZXJlIGZvdW5kLiBBIGNvbXBvbmVudCBtdXN0IHJlbmRlciBhdCBsZWFzdCBvbmUgSFRNTCB0YWcgZGlyZWN0bHkgaW5zaWRlIGl0c2VsZi5cIixcbiAgICAgICAgdGVtcGxhdGUuaW5uZXJIVE1MLnRyaW0oKSlcbiAgICAgIHJldHVybiBbdGVtcGxhdGUuaW5uZXJIVE1MLCBzdHJlYW1zXVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gW3RlbXBsYXRlLmlubmVySFRNTCwgc3RyZWFtc11cbiAgICB9XG4gIH1cblxuICBjcmVhdGVTcGFuKHRleHQsIGNpZCl7XG4gICAgbGV0IHNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKVxuICAgIHNwYW4uaW5uZXJUZXh0ID0gdGV4dFxuICAgIHNwYW4uc2V0QXR0cmlidXRlKFBIWF9DT01QT05FTlQsIGNpZClcbiAgICByZXR1cm4gc3BhblxuICB9XG59XG4iLCAibGV0IHZpZXdIb29rSUQgPSAxXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBWaWV3SG9vayB7XG4gIHN0YXRpYyBtYWtlSUQoKXsgcmV0dXJuIHZpZXdIb29rSUQrKyB9XG4gIHN0YXRpYyBlbGVtZW50SUQoZWwpeyByZXR1cm4gZWwucGh4SG9va0lkIH1cblxuICBjb25zdHJ1Y3Rvcih2aWV3LCBlbCwgY2FsbGJhY2tzKXtcbiAgICB0aGlzLl9fdmlldyA9IHZpZXdcbiAgICB0aGlzLmxpdmVTb2NrZXQgPSB2aWV3LmxpdmVTb2NrZXRcbiAgICB0aGlzLl9fY2FsbGJhY2tzID0gY2FsbGJhY2tzXG4gICAgdGhpcy5fX2xpc3RlbmVycyA9IG5ldyBTZXQoKVxuICAgIHRoaXMuX19pc0Rpc2Nvbm5lY3RlZCA9IGZhbHNlXG4gICAgdGhpcy5lbCA9IGVsXG4gICAgdGhpcy5lbC5waHhIb29rSWQgPSB0aGlzLmNvbnN0cnVjdG9yLm1ha2VJRCgpXG4gICAgZm9yKGxldCBrZXkgaW4gdGhpcy5fX2NhbGxiYWNrcyl7IHRoaXNba2V5XSA9IHRoaXMuX19jYWxsYmFja3Nba2V5XSB9XG4gIH1cblxuICBfX21vdW50ZWQoKXsgdGhpcy5tb3VudGVkICYmIHRoaXMubW91bnRlZCgpIH1cbiAgX191cGRhdGVkKCl7IHRoaXMudXBkYXRlZCAmJiB0aGlzLnVwZGF0ZWQoKSB9XG4gIF9fYmVmb3JlVXBkYXRlKCl7IHRoaXMuYmVmb3JlVXBkYXRlICYmIHRoaXMuYmVmb3JlVXBkYXRlKCkgfVxuICBfX2Rlc3Ryb3llZCgpeyB0aGlzLmRlc3Ryb3llZCAmJiB0aGlzLmRlc3Ryb3llZCgpIH1cbiAgX19yZWNvbm5lY3RlZCgpe1xuICAgIGlmKHRoaXMuX19pc0Rpc2Nvbm5lY3RlZCl7XG4gICAgICB0aGlzLl9faXNEaXNjb25uZWN0ZWQgPSBmYWxzZVxuICAgICAgdGhpcy5yZWNvbm5lY3RlZCAmJiB0aGlzLnJlY29ubmVjdGVkKClcbiAgICB9XG4gIH1cbiAgX19kaXNjb25uZWN0ZWQoKXtcbiAgICB0aGlzLl9faXNEaXNjb25uZWN0ZWQgPSB0cnVlXG4gICAgdGhpcy5kaXNjb25uZWN0ZWQgJiYgdGhpcy5kaXNjb25uZWN0ZWQoKVxuICB9XG5cbiAgcHVzaEV2ZW50KGV2ZW50LCBwYXlsb2FkID0ge30sIG9uUmVwbHkgPSBmdW5jdGlvbiAoKXsgfSl7XG4gICAgcmV0dXJuIHRoaXMuX192aWV3LnB1c2hIb29rRXZlbnQobnVsbCwgZXZlbnQsIHBheWxvYWQsIG9uUmVwbHkpXG4gIH1cblxuICBwdXNoRXZlbnRUbyhwaHhUYXJnZXQsIGV2ZW50LCBwYXlsb2FkID0ge30sIG9uUmVwbHkgPSBmdW5jdGlvbiAoKXsgfSl7XG4gICAgcmV0dXJuIHRoaXMuX192aWV3LndpdGhpblRhcmdldHMocGh4VGFyZ2V0LCAodmlldywgdGFyZ2V0Q3R4KSA9PiB7XG4gICAgICByZXR1cm4gdmlldy5wdXNoSG9va0V2ZW50KHRhcmdldEN0eCwgZXZlbnQsIHBheWxvYWQsIG9uUmVwbHkpXG4gICAgfSlcbiAgfVxuXG4gIGhhbmRsZUV2ZW50KGV2ZW50LCBjYWxsYmFjayl7XG4gICAgbGV0IGNhbGxiYWNrUmVmID0gKGN1c3RvbUV2ZW50LCBieXBhc3MpID0+IGJ5cGFzcyA/IGV2ZW50IDogY2FsbGJhY2soY3VzdG9tRXZlbnQuZGV0YWlsKVxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKGBwaHg6JHtldmVudH1gLCBjYWxsYmFja1JlZilcbiAgICB0aGlzLl9fbGlzdGVuZXJzLmFkZChjYWxsYmFja1JlZilcbiAgICByZXR1cm4gY2FsbGJhY2tSZWZcbiAgfVxuXG4gIHJlbW92ZUhhbmRsZUV2ZW50KGNhbGxiYWNrUmVmKXtcbiAgICBsZXQgZXZlbnQgPSBjYWxsYmFja1JlZihudWxsLCB0cnVlKVxuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKGBwaHg6JHtldmVudH1gLCBjYWxsYmFja1JlZilcbiAgICB0aGlzLl9fbGlzdGVuZXJzLmRlbGV0ZShjYWxsYmFja1JlZilcbiAgfVxuXG4gIHVwbG9hZChuYW1lLCBmaWxlcyl7XG4gICAgcmV0dXJuIHRoaXMuX192aWV3LmRpc3BhdGNoVXBsb2FkcyhuYW1lLCBmaWxlcylcbiAgfVxuXG4gIHVwbG9hZFRvKHBoeFRhcmdldCwgbmFtZSwgZmlsZXMpe1xuICAgIHJldHVybiB0aGlzLl9fdmlldy53aXRoaW5UYXJnZXRzKHBoeFRhcmdldCwgdmlldyA9PiB2aWV3LmRpc3BhdGNoVXBsb2FkcyhuYW1lLCBmaWxlcykpXG4gIH1cblxuICBfX2NsZWFudXBfXygpe1xuICAgIHRoaXMuX19saXN0ZW5lcnMuZm9yRWFjaChjYWxsYmFja1JlZiA9PiB0aGlzLnJlbW92ZUhhbmRsZUV2ZW50KGNhbGxiYWNrUmVmKSlcbiAgfVxufVxuIiwgImltcG9ydCBET00gZnJvbSBcIi4vZG9tXCJcbmltcG9ydCBBUklBIGZyb20gXCIuL2FyaWFcIlxuXG5sZXQgZm9jdXNTdGFjayA9IG51bGxcblxubGV0IEpTID0ge1xuICBleGVjKGV2ZW50VHlwZSwgcGh4RXZlbnQsIHZpZXcsIHNvdXJjZUVsLCBkZWZhdWx0cyl7XG4gICAgbGV0IFtkZWZhdWx0S2luZCwgZGVmYXVsdEFyZ3NdID0gZGVmYXVsdHMgfHwgW251bGwsIHt9XVxuICAgIGxldCBjb21tYW5kcyA9IHBoeEV2ZW50LmNoYXJBdCgwKSA9PT0gXCJbXCIgP1xuICAgICAgSlNPTi5wYXJzZShwaHhFdmVudCkgOiBbW2RlZmF1bHRLaW5kLCBkZWZhdWx0QXJnc11dXG5cbiAgICBjb21tYW5kcy5mb3JFYWNoKChba2luZCwgYXJnc10pID0+IHtcbiAgICAgIGlmKGtpbmQgPT09IGRlZmF1bHRLaW5kICYmIGRlZmF1bHRBcmdzLmRhdGEpe1xuICAgICAgICBhcmdzLmRhdGEgPSBPYmplY3QuYXNzaWduKGFyZ3MuZGF0YSB8fCB7fSwgZGVmYXVsdEFyZ3MuZGF0YSlcbiAgICAgIH1cbiAgICAgIHRoaXMuZmlsdGVyVG9FbHMoc291cmNlRWwsIGFyZ3MpLmZvckVhY2goZWwgPT4ge1xuICAgICAgICB0aGlzW2BleGVjXyR7a2luZH1gXShldmVudFR5cGUsIHBoeEV2ZW50LCB2aWV3LCBzb3VyY2VFbCwgZWwsIGFyZ3MpXG4gICAgICB9KVxuICAgIH0pXG4gIH0sXG5cbiAgaXNWaXNpYmxlKGVsKXtcbiAgICByZXR1cm4gISEoZWwub2Zmc2V0V2lkdGggfHwgZWwub2Zmc2V0SGVpZ2h0IHx8IGVsLmdldENsaWVudFJlY3RzKCkubGVuZ3RoID4gMClcbiAgfSxcblxuICAvLyBwcml2YXRlXG5cbiAgLy8gY29tbWFuZHNcblxuICBleGVjX2Rpc3BhdGNoKGV2ZW50VHlwZSwgcGh4RXZlbnQsIHZpZXcsIHNvdXJjZUVsLCBlbCwge3RvLCBldmVudCwgZGV0YWlsLCBidWJibGVzfSl7XG4gICAgZGV0YWlsID0gZGV0YWlsIHx8IHt9XG4gICAgZGV0YWlsLmRpc3BhdGNoZXIgPSBzb3VyY2VFbFxuICAgIERPTS5kaXNwYXRjaEV2ZW50KGVsLCBldmVudCwge2RldGFpbCwgYnViYmxlc30pXG4gIH0sXG5cbiAgZXhlY19wdXNoKGV2ZW50VHlwZSwgcGh4RXZlbnQsIHZpZXcsIHNvdXJjZUVsLCBlbCwgYXJncyl7XG4gICAgaWYoIXZpZXcuaXNDb25uZWN0ZWQoKSl7IHJldHVybiB9XG5cbiAgICBsZXQge2V2ZW50LCBkYXRhLCB0YXJnZXQsIHBhZ2VfbG9hZGluZywgbG9hZGluZywgdmFsdWUsIGRpc3BhdGNoZXJ9ID0gYXJnc1xuICAgIGxldCBwdXNoT3B0cyA9IHtsb2FkaW5nLCB2YWx1ZSwgdGFyZ2V0LCBwYWdlX2xvYWRpbmc6ICEhcGFnZV9sb2FkaW5nfVxuICAgIGxldCB0YXJnZXRTcmMgPSBldmVudFR5cGUgPT09IFwiY2hhbmdlXCIgJiYgZGlzcGF0Y2hlciA/IGRpc3BhdGNoZXIgOiBzb3VyY2VFbFxuICAgIGxldCBwaHhUYXJnZXQgPSB0YXJnZXQgfHwgdGFyZ2V0U3JjLmdldEF0dHJpYnV0ZSh2aWV3LmJpbmRpbmcoXCJ0YXJnZXRcIikpIHx8IHRhcmdldFNyY1xuICAgIHZpZXcud2l0aGluVGFyZ2V0cyhwaHhUYXJnZXQsICh0YXJnZXRWaWV3LCB0YXJnZXRDdHgpID0+IHtcbiAgICAgIGlmKGV2ZW50VHlwZSA9PT0gXCJjaGFuZ2VcIil7XG4gICAgICAgIGxldCB7bmV3Q2lkLCBfdGFyZ2V0LCBjYWxsYmFja30gPSBhcmdzXG4gICAgICAgIF90YXJnZXQgPSBfdGFyZ2V0IHx8IChET00uaXNGb3JtSW5wdXQoc291cmNlRWwpID8gc291cmNlRWwubmFtZSA6IHVuZGVmaW5lZClcbiAgICAgICAgaWYoX3RhcmdldCl7IHB1c2hPcHRzLl90YXJnZXQgPSBfdGFyZ2V0IH1cbiAgICAgICAgdGFyZ2V0Vmlldy5wdXNoSW5wdXQoc291cmNlRWwsIHRhcmdldEN0eCwgbmV3Q2lkLCBldmVudCB8fCBwaHhFdmVudCwgcHVzaE9wdHMsIGNhbGxiYWNrKVxuICAgICAgfSBlbHNlIGlmKGV2ZW50VHlwZSA9PT0gXCJzdWJtaXRcIil7XG4gICAgICAgIGxldCB7c3VibWl0dGVyfSA9IGFyZ3NcbiAgICAgICAgdGFyZ2V0Vmlldy5zdWJtaXRGb3JtKHNvdXJjZUVsLCB0YXJnZXRDdHgsIGV2ZW50IHx8IHBoeEV2ZW50LCBzdWJtaXR0ZXIsIHB1c2hPcHRzKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGFyZ2V0Vmlldy5wdXNoRXZlbnQoZXZlbnRUeXBlLCBzb3VyY2VFbCwgdGFyZ2V0Q3R4LCBldmVudCB8fCBwaHhFdmVudCwgZGF0YSwgcHVzaE9wdHMpXG4gICAgICB9XG4gICAgfSlcbiAgfSxcblxuICBleGVjX25hdmlnYXRlKGV2ZW50VHlwZSwgcGh4RXZlbnQsIHZpZXcsIHNvdXJjZUVsLCBlbCwge2hyZWYsIHJlcGxhY2V9KXtcbiAgICB2aWV3LmxpdmVTb2NrZXQuaGlzdG9yeVJlZGlyZWN0KGhyZWYsIHJlcGxhY2UgPyBcInJlcGxhY2VcIiA6IFwicHVzaFwiKVxuICB9LFxuXG4gIGV4ZWNfcGF0Y2goZXZlbnRUeXBlLCBwaHhFdmVudCwgdmlldywgc291cmNlRWwsIGVsLCB7aHJlZiwgcmVwbGFjZX0pe1xuICAgIHZpZXcubGl2ZVNvY2tldC5wdXNoSGlzdG9yeVBhdGNoKGhyZWYsIHJlcGxhY2UgPyBcInJlcGxhY2VcIiA6IFwicHVzaFwiLCBzb3VyY2VFbClcbiAgfSxcblxuICBleGVjX2ZvY3VzKGV2ZW50VHlwZSwgcGh4RXZlbnQsIHZpZXcsIHNvdXJjZUVsLCBlbCl7XG4gICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiBBUklBLmF0dGVtcHRGb2N1cyhlbCkpXG4gIH0sXG5cbiAgZXhlY19mb2N1c19maXJzdChldmVudFR5cGUsIHBoeEV2ZW50LCB2aWV3LCBzb3VyY2VFbCwgZWwpe1xuICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gQVJJQS5mb2N1c0ZpcnN0SW50ZXJhY3RpdmUoZWwpIHx8IEFSSUEuZm9jdXNGaXJzdChlbCkpXG4gIH0sXG5cbiAgZXhlY19wdXNoX2ZvY3VzKGV2ZW50VHlwZSwgcGh4RXZlbnQsIHZpZXcsIHNvdXJjZUVsLCBlbCl7XG4gICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiBmb2N1c1N0YWNrID0gZWwgfHwgc291cmNlRWwpXG4gIH0sXG5cbiAgZXhlY19wb3BfZm9jdXMoZXZlbnRUeXBlLCBwaHhFdmVudCwgdmlldywgc291cmNlRWwsIGVsKXtcbiAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgIGlmKGZvY3VzU3RhY2speyBmb2N1c1N0YWNrLmZvY3VzKCkgfVxuICAgICAgZm9jdXNTdGFjayA9IG51bGxcbiAgICB9KVxuICB9LFxuXG4gIGV4ZWNfYWRkX2NsYXNzKGV2ZW50VHlwZSwgcGh4RXZlbnQsIHZpZXcsIHNvdXJjZUVsLCBlbCwge25hbWVzLCB0cmFuc2l0aW9uLCB0aW1lfSl7XG4gICAgdGhpcy5hZGRPclJlbW92ZUNsYXNzZXMoZWwsIG5hbWVzLCBbXSwgdHJhbnNpdGlvbiwgdGltZSwgdmlldylcbiAgfSxcblxuICBleGVjX3JlbW92ZV9jbGFzcyhldmVudFR5cGUsIHBoeEV2ZW50LCB2aWV3LCBzb3VyY2VFbCwgZWwsIHtuYW1lcywgdHJhbnNpdGlvbiwgdGltZX0pe1xuICAgIHRoaXMuYWRkT3JSZW1vdmVDbGFzc2VzKGVsLCBbXSwgbmFtZXMsIHRyYW5zaXRpb24sIHRpbWUsIHZpZXcpXG4gIH0sXG5cbiAgZXhlY190cmFuc2l0aW9uKGV2ZW50VHlwZSwgcGh4RXZlbnQsIHZpZXcsIHNvdXJjZUVsLCBlbCwge3RpbWUsIHRyYW5zaXRpb259KXtcbiAgICB0aGlzLmFkZE9yUmVtb3ZlQ2xhc3NlcyhlbCwgW10sIFtdLCB0cmFuc2l0aW9uLCB0aW1lLCB2aWV3KVxuICB9LFxuXG4gIGV4ZWNfdG9nZ2xlKGV2ZW50VHlwZSwgcGh4RXZlbnQsIHZpZXcsIHNvdXJjZUVsLCBlbCwge2Rpc3BsYXksIGlucywgb3V0cywgdGltZX0pe1xuICAgIHRoaXMudG9nZ2xlKGV2ZW50VHlwZSwgdmlldywgZWwsIGRpc3BsYXksIGlucywgb3V0cywgdGltZSlcbiAgfSxcblxuICBleGVjX3Nob3coZXZlbnRUeXBlLCBwaHhFdmVudCwgdmlldywgc291cmNlRWwsIGVsLCB7ZGlzcGxheSwgdHJhbnNpdGlvbiwgdGltZX0pe1xuICAgIHRoaXMuc2hvdyhldmVudFR5cGUsIHZpZXcsIGVsLCBkaXNwbGF5LCB0cmFuc2l0aW9uLCB0aW1lKVxuICB9LFxuXG4gIGV4ZWNfaGlkZShldmVudFR5cGUsIHBoeEV2ZW50LCB2aWV3LCBzb3VyY2VFbCwgZWwsIHtkaXNwbGF5LCB0cmFuc2l0aW9uLCB0aW1lfSl7XG4gICAgdGhpcy5oaWRlKGV2ZW50VHlwZSwgdmlldywgZWwsIGRpc3BsYXksIHRyYW5zaXRpb24sIHRpbWUpXG4gIH0sXG5cbiAgZXhlY19zZXRfYXR0cihldmVudFR5cGUsIHBoeEV2ZW50LCB2aWV3LCBzb3VyY2VFbCwgZWwsIHthdHRyOiBbYXR0ciwgdmFsXX0pe1xuICAgIHRoaXMuc2V0T3JSZW1vdmVBdHRycyhlbCwgW1thdHRyLCB2YWxdXSwgW10pXG4gIH0sXG5cbiAgZXhlY19yZW1vdmVfYXR0cihldmVudFR5cGUsIHBoeEV2ZW50LCB2aWV3LCBzb3VyY2VFbCwgZWwsIHthdHRyfSl7XG4gICAgdGhpcy5zZXRPclJlbW92ZUF0dHJzKGVsLCBbXSwgW2F0dHJdKVxuICB9LFxuXG4gIC8vIHV0aWxzIGZvciBjb21tYW5kc1xuXG4gIHNob3coZXZlbnRUeXBlLCB2aWV3LCBlbCwgZGlzcGxheSwgdHJhbnNpdGlvbiwgdGltZSl7XG4gICAgaWYoIXRoaXMuaXNWaXNpYmxlKGVsKSl7XG4gICAgICB0aGlzLnRvZ2dsZShldmVudFR5cGUsIHZpZXcsIGVsLCBkaXNwbGF5LCB0cmFuc2l0aW9uLCBudWxsLCB0aW1lKVxuICAgIH1cbiAgfSxcblxuICBoaWRlKGV2ZW50VHlwZSwgdmlldywgZWwsIGRpc3BsYXksIHRyYW5zaXRpb24sIHRpbWUpe1xuICAgIGlmKHRoaXMuaXNWaXNpYmxlKGVsKSl7XG4gICAgICB0aGlzLnRvZ2dsZShldmVudFR5cGUsIHZpZXcsIGVsLCBkaXNwbGF5LCBudWxsLCB0cmFuc2l0aW9uLCB0aW1lKVxuICAgIH1cbiAgfSxcblxuICB0b2dnbGUoZXZlbnRUeXBlLCB2aWV3LCBlbCwgZGlzcGxheSwgaW5zLCBvdXRzLCB0aW1lKXtcbiAgICBsZXQgW2luQ2xhc3NlcywgaW5TdGFydENsYXNzZXMsIGluRW5kQ2xhc3Nlc10gPSBpbnMgfHwgW1tdLCBbXSwgW11dXG4gICAgbGV0IFtvdXRDbGFzc2VzLCBvdXRTdGFydENsYXNzZXMsIG91dEVuZENsYXNzZXNdID0gb3V0cyB8fCBbW10sIFtdLCBbXV1cbiAgICBpZihpbkNsYXNzZXMubGVuZ3RoID4gMCB8fCBvdXRDbGFzc2VzLmxlbmd0aCA+IDApe1xuICAgICAgaWYodGhpcy5pc1Zpc2libGUoZWwpKXtcbiAgICAgICAgbGV0IG9uU3RhcnQgPSAoKSA9PiB7XG4gICAgICAgICAgdGhpcy5hZGRPclJlbW92ZUNsYXNzZXMoZWwsIG91dFN0YXJ0Q2xhc3NlcywgaW5DbGFzc2VzLmNvbmNhdChpblN0YXJ0Q2xhc3NlcykuY29uY2F0KGluRW5kQ2xhc3NlcykpXG4gICAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmFkZE9yUmVtb3ZlQ2xhc3NlcyhlbCwgb3V0Q2xhc3NlcywgW10pXG4gICAgICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHRoaXMuYWRkT3JSZW1vdmVDbGFzc2VzKGVsLCBvdXRFbmRDbGFzc2VzLCBvdXRTdGFydENsYXNzZXMpKVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgZWwuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoXCJwaHg6aGlkZS1zdGFydFwiKSlcbiAgICAgICAgdmlldy50cmFuc2l0aW9uKHRpbWUsIG9uU3RhcnQsICgpID0+IHtcbiAgICAgICAgICB0aGlzLmFkZE9yUmVtb3ZlQ2xhc3NlcyhlbCwgW10sIG91dENsYXNzZXMuY29uY2F0KG91dEVuZENsYXNzZXMpKVxuICAgICAgICAgIERPTS5wdXRTdGlja3koZWwsIFwidG9nZ2xlXCIsIGN1cnJlbnRFbCA9PiBjdXJyZW50RWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiKVxuICAgICAgICAgIGVsLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwicGh4OmhpZGUtZW5kXCIpKVxuICAgICAgICB9KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYoZXZlbnRUeXBlID09PSBcInJlbW92ZVwiKXsgcmV0dXJuIH1cbiAgICAgICAgbGV0IG9uU3RhcnQgPSAoKSA9PiB7XG4gICAgICAgICAgdGhpcy5hZGRPclJlbW92ZUNsYXNzZXMoZWwsIGluU3RhcnRDbGFzc2VzLCBvdXRDbGFzc2VzLmNvbmNhdChvdXRTdGFydENsYXNzZXMpLmNvbmNhdChvdXRFbmRDbGFzc2VzKSlcbiAgICAgICAgICBsZXQgc3RpY2t5RGlzcGxheSA9IGRpc3BsYXkgfHwgdGhpcy5kZWZhdWx0RGlzcGxheShlbClcbiAgICAgICAgICBET00ucHV0U3RpY2t5KGVsLCBcInRvZ2dsZVwiLCBjdXJyZW50RWwgPT4gY3VycmVudEVsLnN0eWxlLmRpc3BsYXkgPSBzdGlja3lEaXNwbGF5KVxuICAgICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5hZGRPclJlbW92ZUNsYXNzZXMoZWwsIGluQ2xhc3NlcywgW10pXG4gICAgICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHRoaXMuYWRkT3JSZW1vdmVDbGFzc2VzKGVsLCBpbkVuZENsYXNzZXMsIGluU3RhcnRDbGFzc2VzKSlcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGVsLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwicGh4OnNob3ctc3RhcnRcIikpXG4gICAgICAgIHZpZXcudHJhbnNpdGlvbih0aW1lLCBvblN0YXJ0LCAoKSA9PiB7XG4gICAgICAgICAgdGhpcy5hZGRPclJlbW92ZUNsYXNzZXMoZWwsIFtdLCBpbkNsYXNzZXMuY29uY2F0KGluRW5kQ2xhc3NlcykpXG4gICAgICAgICAgZWwuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoXCJwaHg6c2hvdy1lbmRcIikpXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmKHRoaXMuaXNWaXNpYmxlKGVsKSl7XG4gICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICAgIGVsLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwicGh4OmhpZGUtc3RhcnRcIikpXG4gICAgICAgICAgRE9NLnB1dFN0aWNreShlbCwgXCJ0b2dnbGVcIiwgY3VycmVudEVsID0+IGN1cnJlbnRFbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCIpXG4gICAgICAgICAgZWwuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoXCJwaHg6aGlkZS1lbmRcIikpXG4gICAgICAgIH0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgICBlbC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcInBoeDpzaG93LXN0YXJ0XCIpKVxuICAgICAgICAgIGxldCBzdGlja3lEaXNwbGF5ID0gZGlzcGxheSB8fCB0aGlzLmRlZmF1bHREaXNwbGF5KGVsKVxuICAgICAgICAgIERPTS5wdXRTdGlja3koZWwsIFwidG9nZ2xlXCIsIGN1cnJlbnRFbCA9PiBjdXJyZW50RWwuc3R5bGUuZGlzcGxheSA9IHN0aWNreURpc3BsYXkpXG4gICAgICAgICAgZWwuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoXCJwaHg6c2hvdy1lbmRcIikpXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIGFkZE9yUmVtb3ZlQ2xhc3NlcyhlbCwgYWRkcywgcmVtb3ZlcywgdHJhbnNpdGlvbiwgdGltZSwgdmlldyl7XG4gICAgbGV0IFt0cmFuc2l0aW9uX3J1biwgdHJhbnNpdGlvbl9zdGFydCwgdHJhbnNpdGlvbl9lbmRdID0gdHJhbnNpdGlvbiB8fCBbW10sIFtdLCBbXV1cbiAgICBpZih0cmFuc2l0aW9uX3J1bi5sZW5ndGggPiAwKXtcbiAgICAgIGxldCBvblN0YXJ0ID0gKCkgPT4gdGhpcy5hZGRPclJlbW92ZUNsYXNzZXMoZWwsIHRyYW5zaXRpb25fc3RhcnQuY29uY2F0KHRyYW5zaXRpb25fcnVuKSwgW10pXG4gICAgICBsZXQgb25Eb25lID0gKCkgPT4gdGhpcy5hZGRPclJlbW92ZUNsYXNzZXMoZWwsIGFkZHMuY29uY2F0KHRyYW5zaXRpb25fZW5kKSwgcmVtb3Zlcy5jb25jYXQodHJhbnNpdGlvbl9ydW4pLmNvbmNhdCh0cmFuc2l0aW9uX3N0YXJ0KSlcbiAgICAgIHJldHVybiB2aWV3LnRyYW5zaXRpb24odGltZSwgb25TdGFydCwgb25Eb25lKVxuICAgIH1cbiAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgIGxldCBbcHJldkFkZHMsIHByZXZSZW1vdmVzXSA9IERPTS5nZXRTdGlja3koZWwsIFwiY2xhc3Nlc1wiLCBbW10sIFtdXSlcbiAgICAgIGxldCBrZWVwQWRkcyA9IGFkZHMuZmlsdGVyKG5hbWUgPT4gcHJldkFkZHMuaW5kZXhPZihuYW1lKSA8IDAgJiYgIWVsLmNsYXNzTGlzdC5jb250YWlucyhuYW1lKSlcbiAgICAgIGxldCBrZWVwUmVtb3ZlcyA9IHJlbW92ZXMuZmlsdGVyKG5hbWUgPT4gcHJldlJlbW92ZXMuaW5kZXhPZihuYW1lKSA8IDAgJiYgZWwuY2xhc3NMaXN0LmNvbnRhaW5zKG5hbWUpKVxuICAgICAgbGV0IG5ld0FkZHMgPSBwcmV2QWRkcy5maWx0ZXIobmFtZSA9PiByZW1vdmVzLmluZGV4T2YobmFtZSkgPCAwKS5jb25jYXQoa2VlcEFkZHMpXG4gICAgICBsZXQgbmV3UmVtb3ZlcyA9IHByZXZSZW1vdmVzLmZpbHRlcihuYW1lID0+IGFkZHMuaW5kZXhPZihuYW1lKSA8IDApLmNvbmNhdChrZWVwUmVtb3ZlcylcblxuICAgICAgRE9NLnB1dFN0aWNreShlbCwgXCJjbGFzc2VzXCIsIGN1cnJlbnRFbCA9PiB7XG4gICAgICAgIGN1cnJlbnRFbC5jbGFzc0xpc3QucmVtb3ZlKC4uLm5ld1JlbW92ZXMpXG4gICAgICAgIGN1cnJlbnRFbC5jbGFzc0xpc3QuYWRkKC4uLm5ld0FkZHMpXG4gICAgICAgIHJldHVybiBbbmV3QWRkcywgbmV3UmVtb3Zlc11cbiAgICAgIH0pXG4gICAgfSlcbiAgfSxcblxuICBzZXRPclJlbW92ZUF0dHJzKGVsLCBzZXRzLCByZW1vdmVzKXtcbiAgICBsZXQgW3ByZXZTZXRzLCBwcmV2UmVtb3Zlc10gPSBET00uZ2V0U3RpY2t5KGVsLCBcImF0dHJzXCIsIFtbXSwgW11dKVxuXG4gICAgbGV0IGFsdGVyZWRBdHRycyA9IHNldHMubWFwKChbYXR0ciwgX3ZhbF0pID0+IGF0dHIpLmNvbmNhdChyZW1vdmVzKTtcbiAgICBsZXQgbmV3U2V0cyA9IHByZXZTZXRzLmZpbHRlcigoW2F0dHIsIF92YWxdKSA9PiAhYWx0ZXJlZEF0dHJzLmluY2x1ZGVzKGF0dHIpKS5jb25jYXQoc2V0cyk7XG4gICAgbGV0IG5ld1JlbW92ZXMgPSBwcmV2UmVtb3Zlcy5maWx0ZXIoKGF0dHIpID0+ICFhbHRlcmVkQXR0cnMuaW5jbHVkZXMoYXR0cikpLmNvbmNhdChyZW1vdmVzKTtcblxuICAgIERPTS5wdXRTdGlja3koZWwsIFwiYXR0cnNcIiwgY3VycmVudEVsID0+IHtcbiAgICAgIG5ld1JlbW92ZXMuZm9yRWFjaChhdHRyID0+IGN1cnJlbnRFbC5yZW1vdmVBdHRyaWJ1dGUoYXR0cikpXG4gICAgICBuZXdTZXRzLmZvckVhY2goKFthdHRyLCB2YWxdKSA9PiBjdXJyZW50RWwuc2V0QXR0cmlidXRlKGF0dHIsIHZhbCkpXG4gICAgICByZXR1cm4gW25ld1NldHMsIG5ld1JlbW92ZXNdXG4gICAgfSlcbiAgfSxcblxuICBoYXNBbGxDbGFzc2VzKGVsLCBjbGFzc2VzKXsgcmV0dXJuIGNsYXNzZXMuZXZlcnkobmFtZSA9PiBlbC5jbGFzc0xpc3QuY29udGFpbnMobmFtZSkpIH0sXG5cbiAgaXNUb2dnbGVkT3V0KGVsLCBvdXRDbGFzc2VzKXtcbiAgICByZXR1cm4gIXRoaXMuaXNWaXNpYmxlKGVsKSB8fCB0aGlzLmhhc0FsbENsYXNzZXMoZWwsIG91dENsYXNzZXMpXG4gIH0sXG5cbiAgZmlsdGVyVG9FbHMoc291cmNlRWwsIHt0b30pe1xuICAgIHJldHVybiB0byA/IERPTS5hbGwoZG9jdW1lbnQsIHRvKSA6IFtzb3VyY2VFbF1cbiAgfSxcblxuICBkZWZhdWx0RGlzcGxheShlbCl7XG4gICAgcmV0dXJuIHt0cjogXCJ0YWJsZS1yb3dcIiwgdGQ6IFwidGFibGUtY2VsbFwifVtlbC50YWdOYW1lLnRvTG93ZXJDYXNlKCldIHx8IFwiYmxvY2tcIlxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEpTXG4iLCAiaW1wb3J0IHtcbiAgQkVGT1JFX1VOTE9BRF9MT0FERVJfVElNRU9VVCxcbiAgQ0hFQ0tBQkxFX0lOUFVUUyxcbiAgQ09OU0VDVVRJVkVfUkVMT0FEUyxcbiAgUEhYX0FVVE9fUkVDT1ZFUixcbiAgUEhYX0NPTVBPTkVOVCxcbiAgUEhYX0NPTk5FQ1RFRF9DTEFTUyxcbiAgUEhYX0RJU0FCTEVfV0lUSCxcbiAgUEhYX0RJU0FCTEVfV0lUSF9SRVNUT1JFLFxuICBQSFhfRElTQUJMRUQsXG4gIFBIWF9ESVNDT05ORUNURURfQ0xBU1MsXG4gIFBIWF9FVkVOVF9DTEFTU0VTLFxuICBQSFhfRVJST1JfQ0xBU1MsXG4gIFBIWF9GRUVEQkFDS19GT1IsXG4gIFBIWF9IQVNfU1VCTUlUVEVELFxuICBQSFhfSE9PSyxcbiAgUEhYX1BBR0VfTE9BRElORyxcbiAgUEhYX1BBUkVOVF9JRCxcbiAgUEhYX1BST0dSRVNTLFxuICBQSFhfUkVBRE9OTFksXG4gIFBIWF9SRUYsXG4gIFBIWF9SRUZfU1JDLFxuICBQSFhfUk9PVF9JRCxcbiAgUEhYX1NFU1NJT04sXG4gIFBIWF9TVEFUSUMsXG4gIFBIWF9UUkFDS19TVEFUSUMsXG4gIFBIWF9UUkFDS19VUExPQURTLFxuICBQSFhfVVBEQVRFLFxuICBQSFhfVVBMT0FEX1JFRixcbiAgUEhYX1ZJRVdfU0VMRUNUT1IsXG4gIFBIWF9NQUlOLFxuICBQSFhfTU9VTlRFRCxcbiAgUFVTSF9USU1FT1VULFxufSBmcm9tIFwiLi9jb25zdGFudHNcIlxuXG5pbXBvcnQge1xuICBjbG9uZSxcbiAgY2xvc2VzdFBoeEJpbmRpbmcsXG4gIGlzRW1wdHksXG4gIGlzRXF1YWxPYmosXG4gIGxvZ0Vycm9yLFxuICBtYXliZSxcbiAgaXNDaWQsXG59IGZyb20gXCIuL3V0aWxzXCJcblxuaW1wb3J0IEJyb3dzZXIgZnJvbSBcIi4vYnJvd3NlclwiXG5pbXBvcnQgRE9NIGZyb20gXCIuL2RvbVwiXG5pbXBvcnQgRE9NUGF0Y2ggZnJvbSBcIi4vZG9tX3BhdGNoXCJcbmltcG9ydCBMaXZlVXBsb2FkZXIgZnJvbSBcIi4vbGl2ZV91cGxvYWRlclwiXG5pbXBvcnQgUmVuZGVyZWQgZnJvbSBcIi4vcmVuZGVyZWRcIlxuaW1wb3J0IFZpZXdIb29rIGZyb20gXCIuL3ZpZXdfaG9va1wiXG5pbXBvcnQgSlMgZnJvbSBcIi4vanNcIlxuXG5sZXQgc2VyaWFsaXplRm9ybSA9IChmb3JtLCBtZXRhZGF0YSwgb25seU5hbWVzID0gW10pID0+IHtcbiAgbGV0IHtzdWJtaXR0ZXIsIC4uLm1ldGF9ID0gbWV0YWRhdGFcblxuICAvLyBUT0RPOiBSZXBsYWNlIHdpdGggYG5ldyBGb3JtRGF0YShmb3JtLCBzdWJtaXR0ZXIpYCB3aGVuIHN1cHBvcnRlZCBieSBsYXRlc3QgYnJvd3NlcnMsXG4gIC8vICAgICAgIGFuZCBtZW50aW9uIGBmb3JtZGF0YS1zdWJtaXR0ZXItcG9seWZpbGxgIGluIHRoZSBkb2NzLlxuICBsZXQgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoZm9ybSlcblxuICAvLyBUT0RPOiBSZW1vdmUgd2hlbiBGb3JtRGF0YSBjb25zdHJ1Y3RvciBzdXBwb3J0cyB0aGUgc3VibWl0dGVyIGFyZ3VtZW50LlxuICBpZiAoc3VibWl0dGVyICYmIHN1Ym1pdHRlci5mb3JtICYmIHN1Ym1pdHRlci5mb3JtID09PSBmb3JtKXtcbiAgICBmb3JtRGF0YS5hcHBlbmQoc3VibWl0dGVyLm5hbWUsIHN1Ym1pdHRlci52YWx1ZSlcbiAgfVxuXG4gIGxldCB0b1JlbW92ZSA9IFtdXG5cbiAgZm9ybURhdGEuZm9yRWFjaCgodmFsLCBrZXksIF9pbmRleCkgPT4ge1xuICAgIGlmKHZhbCBpbnN0YW5jZW9mIEZpbGUpeyB0b1JlbW92ZS5wdXNoKGtleSkgfVxuICB9KVxuXG4gIC8vIENsZWFudXAgYWZ0ZXIgYnVpbGRpbmcgZmlsZURhdGFcbiAgdG9SZW1vdmUuZm9yRWFjaChrZXkgPT4gZm9ybURhdGEuZGVsZXRlKGtleSkpXG5cbiAgbGV0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKVxuICBmb3IobGV0IFtrZXksIHZhbF0gb2YgZm9ybURhdGEuZW50cmllcygpKXtcbiAgICBpZihvbmx5TmFtZXMubGVuZ3RoID09PSAwIHx8IG9ubHlOYW1lcy5pbmRleE9mKGtleSkgPj0gMCl7XG4gICAgICBwYXJhbXMuYXBwZW5kKGtleSwgdmFsKVxuICAgIH1cbiAgfVxuICBmb3IobGV0IG1ldGFLZXkgaW4gbWV0YSl7IHBhcmFtcy5hcHBlbmQobWV0YUtleSwgbWV0YVttZXRhS2V5XSkgfVxuXG4gIHJldHVybiBwYXJhbXMudG9TdHJpbmcoKVxufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBWaWV3IHtcbiAgY29uc3RydWN0b3IoZWwsIGxpdmVTb2NrZXQsIHBhcmVudFZpZXcsIGZsYXNoLCBsaXZlUmVmZXJlcil7XG4gICAgdGhpcy5pc0RlYWQgPSBmYWxzZVxuICAgIHRoaXMubGl2ZVNvY2tldCA9IGxpdmVTb2NrZXRcbiAgICB0aGlzLmZsYXNoID0gZmxhc2hcbiAgICB0aGlzLnBhcmVudCA9IHBhcmVudFZpZXdcbiAgICB0aGlzLnJvb3QgPSBwYXJlbnRWaWV3ID8gcGFyZW50Vmlldy5yb290IDogdGhpc1xuICAgIHRoaXMuZWwgPSBlbFxuICAgIHRoaXMuaWQgPSB0aGlzLmVsLmlkXG4gICAgdGhpcy5yZWYgPSAwXG4gICAgdGhpcy5jaGlsZEpvaW5zID0gMFxuICAgIHRoaXMubG9hZGVyVGltZXIgPSBudWxsXG4gICAgdGhpcy5wZW5kaW5nRGlmZnMgPSBbXVxuICAgIHRoaXMucHJ1bmluZ0NJRHMgPSBbXVxuICAgIHRoaXMucmVkaXJlY3QgPSBmYWxzZVxuICAgIHRoaXMuaHJlZiA9IG51bGxcbiAgICB0aGlzLmpvaW5Db3VudCA9IHRoaXMucGFyZW50ID8gdGhpcy5wYXJlbnQuam9pbkNvdW50IC0gMSA6IDBcbiAgICB0aGlzLmpvaW5QZW5kaW5nID0gdHJ1ZVxuICAgIHRoaXMuZGVzdHJveWVkID0gZmFsc2VcbiAgICB0aGlzLmpvaW5DYWxsYmFjayA9IGZ1bmN0aW9uKG9uRG9uZSl7IG9uRG9uZSAmJiBvbkRvbmUoKSB9XG4gICAgdGhpcy5zdG9wQ2FsbGJhY2sgPSBmdW5jdGlvbigpeyB9XG4gICAgdGhpcy5wZW5kaW5nSm9pbk9wcyA9IHRoaXMucGFyZW50ID8gbnVsbCA6IFtdXG4gICAgdGhpcy52aWV3SG9va3MgPSB7fVxuICAgIHRoaXMudXBsb2FkZXJzID0ge31cbiAgICB0aGlzLmZvcm1TdWJtaXRzID0gW11cbiAgICB0aGlzLmNoaWxkcmVuID0gdGhpcy5wYXJlbnQgPyBudWxsIDoge31cbiAgICB0aGlzLnJvb3QuY2hpbGRyZW5bdGhpcy5pZF0gPSB7fVxuICAgIHRoaXMuY2hhbm5lbCA9IHRoaXMubGl2ZVNvY2tldC5jaGFubmVsKGBsdjoke3RoaXMuaWR9YCwgKCkgPT4ge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcmVkaXJlY3Q6IHRoaXMucmVkaXJlY3QgPyB0aGlzLmhyZWYgOiB1bmRlZmluZWQsXG4gICAgICAgIHVybDogdGhpcy5yZWRpcmVjdCA/IHVuZGVmaW5lZCA6IHRoaXMuaHJlZiB8fCB1bmRlZmluZWQsXG4gICAgICAgIHBhcmFtczogdGhpcy5jb25uZWN0UGFyYW1zKGxpdmVSZWZlcmVyKSxcbiAgICAgICAgc2Vzc2lvbjogdGhpcy5nZXRTZXNzaW9uKCksXG4gICAgICAgIHN0YXRpYzogdGhpcy5nZXRTdGF0aWMoKSxcbiAgICAgICAgZmxhc2g6IHRoaXMuZmxhc2gsXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIHNldEhyZWYoaHJlZil7IHRoaXMuaHJlZiA9IGhyZWYgfVxuXG4gIHNldFJlZGlyZWN0KGhyZWYpe1xuICAgIHRoaXMucmVkaXJlY3QgPSB0cnVlXG4gICAgdGhpcy5ocmVmID0gaHJlZlxuICB9XG5cbiAgaXNNYWluKCl7IHJldHVybiB0aGlzLmVsLmhhc0F0dHJpYnV0ZShQSFhfTUFJTikgfVxuXG4gIGNvbm5lY3RQYXJhbXMobGl2ZVJlZmVyZXIpe1xuICAgIGxldCBwYXJhbXMgPSB0aGlzLmxpdmVTb2NrZXQucGFyYW1zKHRoaXMuZWwpXG4gICAgbGV0IG1hbmlmZXN0ID1cbiAgICAgIERPTS5hbGwoZG9jdW1lbnQsIGBbJHt0aGlzLmJpbmRpbmcoUEhYX1RSQUNLX1NUQVRJQyl9XWApXG4gICAgICAgIC5tYXAobm9kZSA9PiBub2RlLnNyYyB8fCBub2RlLmhyZWYpLmZpbHRlcih1cmwgPT4gdHlwZW9mICh1cmwpID09PSBcInN0cmluZ1wiKVxuXG4gICAgaWYobWFuaWZlc3QubGVuZ3RoID4gMCl7IHBhcmFtc1tcIl90cmFja19zdGF0aWNcIl0gPSBtYW5pZmVzdCB9XG4gICAgcGFyYW1zW1wiX21vdW50c1wiXSA9IHRoaXMuam9pbkNvdW50XG4gICAgcGFyYW1zW1wiX2xpdmVfcmVmZXJlclwiXSA9IGxpdmVSZWZlcmVyXG5cbiAgICByZXR1cm4gcGFyYW1zXG4gIH1cblxuICBpc0Nvbm5lY3RlZCgpeyByZXR1cm4gdGhpcy5jaGFubmVsLmNhblB1c2goKSB9XG5cbiAgZ2V0U2Vzc2lvbigpeyByZXR1cm4gdGhpcy5lbC5nZXRBdHRyaWJ1dGUoUEhYX1NFU1NJT04pIH1cblxuICBnZXRTdGF0aWMoKXtcbiAgICBsZXQgdmFsID0gdGhpcy5lbC5nZXRBdHRyaWJ1dGUoUEhYX1NUQVRJQylcbiAgICByZXR1cm4gdmFsID09PSBcIlwiID8gbnVsbCA6IHZhbFxuICB9XG5cbiAgZGVzdHJveShjYWxsYmFjayA9IGZ1bmN0aW9uICgpeyB9KXtcbiAgICB0aGlzLmRlc3Ryb3lBbGxDaGlsZHJlbigpXG4gICAgdGhpcy5kZXN0cm95ZWQgPSB0cnVlXG4gICAgZGVsZXRlIHRoaXMucm9vdC5jaGlsZHJlblt0aGlzLmlkXVxuICAgIGlmKHRoaXMucGFyZW50KXsgZGVsZXRlIHRoaXMucm9vdC5jaGlsZHJlblt0aGlzLnBhcmVudC5pZF1bdGhpcy5pZF0gfVxuICAgIGNsZWFyVGltZW91dCh0aGlzLmxvYWRlclRpbWVyKVxuICAgIGxldCBvbkZpbmlzaGVkID0gKCkgPT4ge1xuICAgICAgY2FsbGJhY2soKVxuICAgICAgZm9yKGxldCBpZCBpbiB0aGlzLnZpZXdIb29rcyl7XG4gICAgICAgIHRoaXMuZGVzdHJveUhvb2sodGhpcy52aWV3SG9va3NbaWRdKVxuICAgICAgfVxuICAgIH1cblxuICAgIERPTS5tYXJrUGh4Q2hpbGREZXN0cm95ZWQodGhpcy5lbClcblxuICAgIHRoaXMubG9nKFwiZGVzdHJveWVkXCIsICgpID0+IFtcInRoZSBjaGlsZCBoYXMgYmVlbiByZW1vdmVkIGZyb20gdGhlIHBhcmVudFwiXSlcbiAgICB0aGlzLmNoYW5uZWwubGVhdmUoKVxuICAgICAgLnJlY2VpdmUoXCJva1wiLCBvbkZpbmlzaGVkKVxuICAgICAgLnJlY2VpdmUoXCJlcnJvclwiLCBvbkZpbmlzaGVkKVxuICAgICAgLnJlY2VpdmUoXCJ0aW1lb3V0XCIsIG9uRmluaXNoZWQpXG4gIH1cblxuICBzZXRDb250YWluZXJDbGFzc2VzKC4uLmNsYXNzZXMpe1xuICAgIHRoaXMuZWwuY2xhc3NMaXN0LnJlbW92ZShcbiAgICAgIFBIWF9DT05ORUNURURfQ0xBU1MsXG4gICAgICBQSFhfRElTQ09OTkVDVEVEX0NMQVNTLFxuICAgICAgUEhYX0VSUk9SX0NMQVNTXG4gICAgKVxuICAgIHRoaXMuZWwuY2xhc3NMaXN0LmFkZCguLi5jbGFzc2VzKVxuICB9XG5cbiAgc2hvd0xvYWRlcih0aW1lb3V0KXtcbiAgICBjbGVhclRpbWVvdXQodGhpcy5sb2FkZXJUaW1lcilcbiAgICBpZih0aW1lb3V0KXtcbiAgICAgIHRoaXMubG9hZGVyVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHRoaXMuc2hvd0xvYWRlcigpLCB0aW1lb3V0KVxuICAgIH0gZWxzZSB7XG4gICAgICBmb3IobGV0IGlkIGluIHRoaXMudmlld0hvb2tzKXsgdGhpcy52aWV3SG9va3NbaWRdLl9fZGlzY29ubmVjdGVkKCkgfVxuICAgICAgdGhpcy5zZXRDb250YWluZXJDbGFzc2VzKFBIWF9ESVNDT05ORUNURURfQ0xBU1MpXG4gICAgfVxuICB9XG5cbiAgZXhlY0FsbChiaW5kaW5nKXtcbiAgICBET00uYWxsKHRoaXMuZWwsIGBbJHtiaW5kaW5nfV1gLCBlbCA9PiB0aGlzLmxpdmVTb2NrZXQuZXhlY0pTKGVsLCBlbC5nZXRBdHRyaWJ1dGUoYmluZGluZykpKVxuICB9XG5cbiAgaGlkZUxvYWRlcigpe1xuICAgIGNsZWFyVGltZW91dCh0aGlzLmxvYWRlclRpbWVyKVxuICAgIHRoaXMuc2V0Q29udGFpbmVyQ2xhc3NlcyhQSFhfQ09OTkVDVEVEX0NMQVNTKVxuICAgIHRoaXMuZXhlY0FsbCh0aGlzLmJpbmRpbmcoXCJjb25uZWN0ZWRcIikpXG4gIH1cblxuICB0cmlnZ2VyUmVjb25uZWN0ZWQoKXtcbiAgICBmb3IobGV0IGlkIGluIHRoaXMudmlld0hvb2tzKXsgdGhpcy52aWV3SG9va3NbaWRdLl9fcmVjb25uZWN0ZWQoKSB9XG4gIH1cblxuICBsb2coa2luZCwgbXNnQ2FsbGJhY2spe1xuICAgIHRoaXMubGl2ZVNvY2tldC5sb2codGhpcywga2luZCwgbXNnQ2FsbGJhY2spXG4gIH1cblxuICB0cmFuc2l0aW9uKHRpbWUsIG9uU3RhcnQsIG9uRG9uZSA9IGZ1bmN0aW9uKCl7fSl7XG4gICAgdGhpcy5saXZlU29ja2V0LnRyYW5zaXRpb24odGltZSwgb25TdGFydCwgb25Eb25lKVxuICB9XG5cbiAgd2l0aGluVGFyZ2V0cyhwaHhUYXJnZXQsIGNhbGxiYWNrKXtcbiAgICBpZihwaHhUYXJnZXQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCB8fCBwaHhUYXJnZXQgaW5zdGFuY2VvZiBTVkdFbGVtZW50KXtcbiAgICAgIHJldHVybiB0aGlzLmxpdmVTb2NrZXQub3duZXIocGh4VGFyZ2V0LCB2aWV3ID0+IGNhbGxiYWNrKHZpZXcsIHBoeFRhcmdldCkpXG4gICAgfVxuXG4gICAgaWYoaXNDaWQocGh4VGFyZ2V0KSl7XG4gICAgICBsZXQgdGFyZ2V0cyA9IERPTS5maW5kQ29tcG9uZW50Tm9kZUxpc3QodGhpcy5lbCwgcGh4VGFyZ2V0KVxuICAgICAgaWYodGFyZ2V0cy5sZW5ndGggPT09IDApe1xuICAgICAgICBsb2dFcnJvcihgbm8gY29tcG9uZW50IGZvdW5kIG1hdGNoaW5nIHBoeC10YXJnZXQgb2YgJHtwaHhUYXJnZXR9YClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNhbGxiYWNrKHRoaXMsIHBhcnNlSW50KHBoeFRhcmdldCkpXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCB0YXJnZXRzID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHBoeFRhcmdldCkpXG4gICAgICBpZih0YXJnZXRzLmxlbmd0aCA9PT0gMCl7IGxvZ0Vycm9yKGBub3RoaW5nIGZvdW5kIG1hdGNoaW5nIHRoZSBwaHgtdGFyZ2V0IHNlbGVjdG9yIFwiJHtwaHhUYXJnZXR9XCJgKSB9XG4gICAgICB0YXJnZXRzLmZvckVhY2godGFyZ2V0ID0+IHRoaXMubGl2ZVNvY2tldC5vd25lcih0YXJnZXQsIHZpZXcgPT4gY2FsbGJhY2sodmlldywgdGFyZ2V0KSkpXG4gICAgfVxuICB9XG5cbiAgYXBwbHlEaWZmKHR5cGUsIHJhd0RpZmYsIGNhbGxiYWNrKXtcbiAgICB0aGlzLmxvZyh0eXBlLCAoKSA9PiBbXCJcIiwgY2xvbmUocmF3RGlmZildKVxuICAgIGxldCB7ZGlmZiwgcmVwbHksIGV2ZW50cywgdGl0bGV9ID0gUmVuZGVyZWQuZXh0cmFjdChyYXdEaWZmKVxuICAgIGNhbGxiYWNrKHtkaWZmLCByZXBseSwgZXZlbnRzfSlcbiAgICBpZih0aXRsZSl7IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gRE9NLnB1dFRpdGxlKHRpdGxlKSkgfVxuICB9XG5cbiAgb25Kb2luKHJlc3Ape1xuICAgIGxldCB7cmVuZGVyZWQsIGNvbnRhaW5lcn0gPSByZXNwXG4gICAgaWYoY29udGFpbmVyKXtcbiAgICAgIGxldCBbdGFnLCBhdHRyc10gPSBjb250YWluZXJcbiAgICAgIHRoaXMuZWwgPSBET00ucmVwbGFjZVJvb3RDb250YWluZXIodGhpcy5lbCwgdGFnLCBhdHRycylcbiAgICB9XG4gICAgdGhpcy5jaGlsZEpvaW5zID0gMFxuICAgIHRoaXMuam9pblBlbmRpbmcgPSB0cnVlXG4gICAgdGhpcy5mbGFzaCA9IG51bGxcblxuICAgIEJyb3dzZXIuZHJvcExvY2FsKHRoaXMubGl2ZVNvY2tldC5sb2NhbFN0b3JhZ2UsIHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSwgQ09OU0VDVVRJVkVfUkVMT0FEUylcbiAgICB0aGlzLmFwcGx5RGlmZihcIm1vdW50XCIsIHJlbmRlcmVkLCAoe2RpZmYsIGV2ZW50c30pID0+IHtcbiAgICAgIHRoaXMucmVuZGVyZWQgPSBuZXcgUmVuZGVyZWQodGhpcy5pZCwgZGlmZilcbiAgICAgIGxldCBbaHRtbCwgc3RyZWFtc10gPSB0aGlzLnJlbmRlckNvbnRhaW5lcihudWxsLCBcImpvaW5cIilcbiAgICAgIHRoaXMuZHJvcFBlbmRpbmdSZWZzKClcbiAgICAgIGxldCBmb3JtcyA9IHRoaXMuZm9ybXNGb3JSZWNvdmVyeShodG1sKVxuICAgICAgdGhpcy5qb2luQ291bnQrK1xuXG4gICAgICBpZihmb3Jtcy5sZW5ndGggPiAwKXtcbiAgICAgICAgZm9ybXMuZm9yRWFjaCgoW2Zvcm0sIG5ld0Zvcm0sIG5ld0NpZF0sIGkpID0+IHtcbiAgICAgICAgICB0aGlzLnB1c2hGb3JtUmVjb3ZlcnkoZm9ybSwgbmV3Q2lkLCByZXNwID0+IHtcbiAgICAgICAgICAgIGlmKGkgPT09IGZvcm1zLmxlbmd0aCAtIDEpe1xuICAgICAgICAgICAgICB0aGlzLm9uSm9pbkNvbXBsZXRlKHJlc3AsIGh0bWwsIHN0cmVhbXMsIGV2ZW50cylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5vbkpvaW5Db21wbGV0ZShyZXNwLCBodG1sLCBzdHJlYW1zLCBldmVudHMpXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIGRyb3BQZW5kaW5nUmVmcygpe1xuICAgIERPTS5hbGwoZG9jdW1lbnQsIGBbJHtQSFhfUkVGX1NSQ309XCIke3RoaXMuaWR9XCJdWyR7UEhYX1JFRn1dYCwgZWwgPT4ge1xuICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKFBIWF9SRUYpXG4gICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoUEhYX1JFRl9TUkMpXG4gICAgfSlcbiAgfVxuXG4gIG9uSm9pbkNvbXBsZXRlKHtsaXZlX3BhdGNofSwgaHRtbCwgc3RyZWFtcywgZXZlbnRzKXtcbiAgICAvLyBJbiBvcmRlciB0byBwcm92aWRlIGEgYmV0dGVyIGV4cGVyaWVuY2UsIHdlIHdhbnQgdG8gam9pblxuICAgIC8vIGFsbCBMaXZlVmlld3MgZmlyc3QgYW5kIG9ubHkgdGhlbiBhcHBseSB0aGVpciBwYXRjaGVzLlxuICAgIGlmKHRoaXMuam9pbkNvdW50ID4gMSB8fCAodGhpcy5wYXJlbnQgJiYgIXRoaXMucGFyZW50LmlzSm9pblBlbmRpbmcoKSkpe1xuICAgICAgcmV0dXJuIHRoaXMuYXBwbHlKb2luUGF0Y2gobGl2ZV9wYXRjaCwgaHRtbCwgc3RyZWFtcywgZXZlbnRzKVxuICAgIH1cblxuICAgIC8vIE9uZSBkb3duc2lkZSBvZiB0aGlzIGFwcHJvYWNoIGlzIHRoYXQgd2UgbmVlZCB0byBmaW5kIHBoeENoaWxkcmVuXG4gICAgLy8gaW4gdGhlIGh0bWwgZnJhZ21lbnQsIGluc3RlYWQgb2YgZGlyZWN0bHkgb24gdGhlIERPTS4gVGhlIGZyYWdtZW50XG4gICAgLy8gYWxzbyBkb2VzIG5vdCBpbmNsdWRlIFBIWF9TVEFUSUMsIHNvIHdlIG5lZWQgdG8gY29weSBpdCBvdmVyIGZyb21cbiAgICAvLyB0aGUgRE9NLlxuICAgIGxldCBuZXdDaGlsZHJlbiA9IERPTS5maW5kUGh4Q2hpbGRyZW5JbkZyYWdtZW50KGh0bWwsIHRoaXMuaWQpLmZpbHRlcih0b0VsID0+IHtcbiAgICAgIGxldCBmcm9tRWwgPSB0b0VsLmlkICYmIHRoaXMuZWwucXVlcnlTZWxlY3RvcihgW2lkPVwiJHt0b0VsLmlkfVwiXWApXG4gICAgICBsZXQgcGh4U3RhdGljID0gZnJvbUVsICYmIGZyb21FbC5nZXRBdHRyaWJ1dGUoUEhYX1NUQVRJQylcbiAgICAgIGlmKHBoeFN0YXRpYyl7IHRvRWwuc2V0QXR0cmlidXRlKFBIWF9TVEFUSUMsIHBoeFN0YXRpYykgfVxuICAgICAgcmV0dXJuIHRoaXMuam9pbkNoaWxkKHRvRWwpXG4gICAgfSlcblxuICAgIGlmKG5ld0NoaWxkcmVuLmxlbmd0aCA9PT0gMCl7XG4gICAgICBpZih0aGlzLnBhcmVudCl7XG4gICAgICAgIHRoaXMucm9vdC5wZW5kaW5nSm9pbk9wcy5wdXNoKFt0aGlzLCAoKSA9PiB0aGlzLmFwcGx5Sm9pblBhdGNoKGxpdmVfcGF0Y2gsIGh0bWwsIHN0cmVhbXMsIGV2ZW50cyldKVxuICAgICAgICB0aGlzLnBhcmVudC5hY2tKb2luKHRoaXMpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLm9uQWxsQ2hpbGRKb2luc0NvbXBsZXRlKClcbiAgICAgICAgdGhpcy5hcHBseUpvaW5QYXRjaChsaXZlX3BhdGNoLCBodG1sLCBzdHJlYW1zLCBldmVudHMpXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucm9vdC5wZW5kaW5nSm9pbk9wcy5wdXNoKFt0aGlzLCAoKSA9PiB0aGlzLmFwcGx5Sm9pblBhdGNoKGxpdmVfcGF0Y2gsIGh0bWwsIHN0cmVhbXMsIGV2ZW50cyldKVxuICAgIH1cbiAgfVxuXG4gIGF0dGFjaFRydWVEb2NFbCgpe1xuICAgIHRoaXMuZWwgPSBET00uYnlJZCh0aGlzLmlkKVxuICAgIHRoaXMuZWwuc2V0QXR0cmlidXRlKFBIWF9ST09UX0lELCB0aGlzLnJvb3QuaWQpXG4gIH1cblxuICBleGVjTmV3TW91bnRlZCgpe1xuICAgIERPTS5hbGwodGhpcy5lbCwgYFske3RoaXMuYmluZGluZyhQSFhfSE9PSyl9XSwgW2RhdGEtcGh4LSR7UEhYX0hPT0t9XWAsIGhvb2tFbCA9PiB7XG4gICAgICB0aGlzLm1heWJlQWRkTmV3SG9vayhob29rRWwpXG4gICAgfSlcbiAgICBET00uYWxsKHRoaXMuZWwsIGBbJHt0aGlzLmJpbmRpbmcoUEhYX01PVU5URUQpfV1gLCBlbCA9PiB0aGlzLm1heWJlTW91bnRlZChlbCkpXG4gIH1cblxuICBhcHBseUpvaW5QYXRjaChsaXZlX3BhdGNoLCBodG1sLCBzdHJlYW1zLCBldmVudHMpe1xuICAgIHRoaXMuYXR0YWNoVHJ1ZURvY0VsKClcbiAgICBsZXQgcGF0Y2ggPSBuZXcgRE9NUGF0Y2godGhpcywgdGhpcy5lbCwgdGhpcy5pZCwgaHRtbCwgc3RyZWFtcywgbnVsbClcbiAgICBwYXRjaC5tYXJrUHJ1bmFibGVDb250ZW50Rm9yUmVtb3ZhbCgpXG4gICAgdGhpcy5wZXJmb3JtUGF0Y2gocGF0Y2gsIGZhbHNlKVxuICAgIHRoaXMuam9pbk5ld0NoaWxkcmVuKClcbiAgICB0aGlzLmV4ZWNOZXdNb3VudGVkKClcblxuICAgIHRoaXMuam9pblBlbmRpbmcgPSBmYWxzZVxuICAgIHRoaXMubGl2ZVNvY2tldC5kaXNwYXRjaEV2ZW50cyhldmVudHMpXG4gICAgdGhpcy5hcHBseVBlbmRpbmdVcGRhdGVzKClcblxuICAgIGlmKGxpdmVfcGF0Y2gpe1xuICAgICAgbGV0IHtraW5kLCB0b30gPSBsaXZlX3BhdGNoXG4gICAgICB0aGlzLmxpdmVTb2NrZXQuaGlzdG9yeVBhdGNoKHRvLCBraW5kKVxuICAgIH1cbiAgICB0aGlzLmhpZGVMb2FkZXIoKVxuICAgIGlmKHRoaXMuam9pbkNvdW50ID4gMSl7IHRoaXMudHJpZ2dlclJlY29ubmVjdGVkKCkgfVxuICAgIHRoaXMuc3RvcENhbGxiYWNrKClcbiAgfVxuXG4gIHRyaWdnZXJCZWZvcmVVcGRhdGVIb29rKGZyb21FbCwgdG9FbCl7XG4gICAgdGhpcy5saXZlU29ja2V0LnRyaWdnZXJET00oXCJvbkJlZm9yZUVsVXBkYXRlZFwiLCBbZnJvbUVsLCB0b0VsXSlcbiAgICBsZXQgaG9vayA9IHRoaXMuZ2V0SG9vayhmcm9tRWwpXG4gICAgbGV0IGlzSWdub3JlZCA9IGhvb2sgJiYgRE9NLmlzSWdub3JlZChmcm9tRWwsIHRoaXMuYmluZGluZyhQSFhfVVBEQVRFKSlcbiAgICBpZihob29rICYmICFmcm9tRWwuaXNFcXVhbE5vZGUodG9FbCkgJiYgIShpc0lnbm9yZWQgJiYgaXNFcXVhbE9iaihmcm9tRWwuZGF0YXNldCwgdG9FbC5kYXRhc2V0KSkpe1xuICAgICAgaG9vay5fX2JlZm9yZVVwZGF0ZSgpXG4gICAgICByZXR1cm4gaG9va1xuICAgIH1cbiAgfVxuXG4gIG1heWJlTW91bnRlZChlbCl7XG4gICAgbGV0IHBoeE1vdW50ZWQgPSBlbC5nZXRBdHRyaWJ1dGUodGhpcy5iaW5kaW5nKFBIWF9NT1VOVEVEKSlcbiAgICBsZXQgaGFzQmVlbkludm9rZWQgPSBwaHhNb3VudGVkICYmIERPTS5wcml2YXRlKGVsLCBcIm1vdW50ZWRcIilcbiAgICBpZihwaHhNb3VudGVkICYmICFoYXNCZWVuSW52b2tlZCl7XG4gICAgICB0aGlzLmxpdmVTb2NrZXQuZXhlY0pTKGVsLCBwaHhNb3VudGVkKVxuICAgICAgRE9NLnB1dFByaXZhdGUoZWwsIFwibW91bnRlZFwiLCB0cnVlKVxuICAgIH1cbiAgfVxuXG4gIG1heWJlQWRkTmV3SG9vayhlbCwgZm9yY2Upe1xuICAgIGxldCBuZXdIb29rID0gdGhpcy5hZGRIb29rKGVsKVxuICAgIGlmKG5ld0hvb2speyBuZXdIb29rLl9fbW91bnRlZCgpIH1cbiAgfVxuXG4gIHBlcmZvcm1QYXRjaChwYXRjaCwgcHJ1bmVDaWRzKXtcbiAgICBsZXQgcmVtb3ZlZEVscyA9IFtdXG4gICAgbGV0IHBoeENoaWxkcmVuQWRkZWQgPSBmYWxzZVxuICAgIGxldCB1cGRhdGVkSG9va0lkcyA9IG5ldyBTZXQoKVxuXG4gICAgcGF0Y2guYWZ0ZXIoXCJhZGRlZFwiLCBlbCA9PiB7XG4gICAgICB0aGlzLmxpdmVTb2NrZXQudHJpZ2dlckRPTShcIm9uTm9kZUFkZGVkXCIsIFtlbF0pXG4gICAgICB0aGlzLm1heWJlQWRkTmV3SG9vayhlbClcbiAgICAgIGlmKGVsLmdldEF0dHJpYnV0ZSl7IHRoaXMubWF5YmVNb3VudGVkKGVsKSB9XG4gICAgfSlcblxuICAgIHBhdGNoLmFmdGVyKFwicGh4Q2hpbGRBZGRlZFwiLCBlbCA9PiB7XG4gICAgICBpZihET00uaXNQaHhTdGlja3koZWwpKXtcbiAgICAgICAgdGhpcy5saXZlU29ja2V0LmpvaW5Sb290Vmlld3MoKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcGh4Q2hpbGRyZW5BZGRlZCA9IHRydWVcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgcGF0Y2guYmVmb3JlKFwidXBkYXRlZFwiLCAoZnJvbUVsLCB0b0VsKSA9PiB7XG4gICAgICBsZXQgaG9vayA9IHRoaXMudHJpZ2dlckJlZm9yZVVwZGF0ZUhvb2soZnJvbUVsLCB0b0VsKVxuICAgICAgaWYoaG9vayl7IHVwZGF0ZWRIb29rSWRzLmFkZChmcm9tRWwuaWQpIH1cbiAgICB9KVxuXG4gICAgcGF0Y2guYWZ0ZXIoXCJ1cGRhdGVkXCIsIGVsID0+IHtcbiAgICAgIGlmKHVwZGF0ZWRIb29rSWRzLmhhcyhlbC5pZCkpeyB0aGlzLmdldEhvb2soZWwpLl9fdXBkYXRlZCgpIH1cbiAgICB9KVxuXG4gICAgcGF0Y2guYWZ0ZXIoXCJkaXNjYXJkZWRcIiwgKGVsKSA9PiB7XG4gICAgICBpZihlbC5ub2RlVHlwZSA9PT0gTm9kZS5FTEVNRU5UX05PREUpeyByZW1vdmVkRWxzLnB1c2goZWwpIH1cbiAgICB9KVxuXG4gICAgcGF0Y2guYWZ0ZXIoXCJ0cmFuc2l0aW9uc0Rpc2NhcmRlZFwiLCBlbHMgPT4gdGhpcy5hZnRlckVsZW1lbnRzUmVtb3ZlZChlbHMsIHBydW5lQ2lkcykpXG4gICAgcGF0Y2gucGVyZm9ybSgpXG4gICAgdGhpcy5hZnRlckVsZW1lbnRzUmVtb3ZlZChyZW1vdmVkRWxzLCBwcnVuZUNpZHMpXG5cbiAgICByZXR1cm4gcGh4Q2hpbGRyZW5BZGRlZFxuICB9XG5cbiAgYWZ0ZXJFbGVtZW50c1JlbW92ZWQoZWxlbWVudHMsIHBydW5lQ2lkcyl7XG4gICAgbGV0IGRlc3Ryb3llZENJRHMgPSBbXVxuICAgIGVsZW1lbnRzLmZvckVhY2gocGFyZW50ID0+IHtcbiAgICAgIGxldCBjb21wb25lbnRzID0gRE9NLmFsbChwYXJlbnQsIGBbJHtQSFhfQ09NUE9ORU5UfV1gKVxuICAgICAgbGV0IGhvb2tzID0gRE9NLmFsbChwYXJlbnQsIGBbJHt0aGlzLmJpbmRpbmcoUEhYX0hPT0spfV1gKVxuICAgICAgY29tcG9uZW50cy5jb25jYXQocGFyZW50KS5mb3JFYWNoKGVsID0+IHtcbiAgICAgICAgbGV0IGNpZCA9IHRoaXMuY29tcG9uZW50SUQoZWwpXG4gICAgICAgIGlmKGlzQ2lkKGNpZCkgJiYgZGVzdHJveWVkQ0lEcy5pbmRleE9mKGNpZCkgPT09IC0xKXsgZGVzdHJveWVkQ0lEcy5wdXNoKGNpZCkgfVxuICAgICAgfSlcbiAgICAgIGhvb2tzLmNvbmNhdChwYXJlbnQpLmZvckVhY2goaG9va0VsID0+IHtcbiAgICAgICAgbGV0IGhvb2sgPSB0aGlzLmdldEhvb2soaG9va0VsKVxuICAgICAgICBob29rICYmIHRoaXMuZGVzdHJveUhvb2soaG9vaylcbiAgICAgIH0pXG4gICAgfSlcbiAgICAvLyBXZSBzaG91bGQgbm90IHBydW5lQ2lkcyBvbiBqb2lucy4gT3RoZXJ3aXNlLCBpbiBjYXNlIG9mXG4gICAgLy8gcmVqb2lucywgd2UgbWF5IG5vdGlmeSBjaWRzIHRoYXQgbm8gbG9uZ2VyIGJlbG9uZyB0byB0aGVcbiAgICAvLyBjdXJyZW50IExpdmVWaWV3IHRvIGJlIHJlbW92ZWQuXG4gICAgaWYocHJ1bmVDaWRzKXtcbiAgICAgIHRoaXMubWF5YmVQdXNoQ29tcG9uZW50c0Rlc3Ryb3llZChkZXN0cm95ZWRDSURzKVxuICAgIH1cbiAgfVxuXG4gIGpvaW5OZXdDaGlsZHJlbigpe1xuICAgIERPTS5maW5kUGh4Q2hpbGRyZW4odGhpcy5lbCwgdGhpcy5pZCkuZm9yRWFjaChlbCA9PiB0aGlzLmpvaW5DaGlsZChlbCkpXG4gIH1cblxuICBnZXRDaGlsZEJ5SWQoaWQpeyByZXR1cm4gdGhpcy5yb290LmNoaWxkcmVuW3RoaXMuaWRdW2lkXSB9XG5cbiAgZ2V0RGVzY2VuZGVudEJ5RWwoZWwpe1xuICAgIGlmKGVsLmlkID09PSB0aGlzLmlkKXtcbiAgICAgIHJldHVybiB0aGlzXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLmNoaWxkcmVuW2VsLmdldEF0dHJpYnV0ZShQSFhfUEFSRU5UX0lEKV1bZWwuaWRdXG4gICAgfVxuICB9XG5cbiAgZGVzdHJveURlc2NlbmRlbnQoaWQpe1xuICAgIGZvcihsZXQgcGFyZW50SWQgaW4gdGhpcy5yb290LmNoaWxkcmVuKXtcbiAgICAgIGZvcihsZXQgY2hpbGRJZCBpbiB0aGlzLnJvb3QuY2hpbGRyZW5bcGFyZW50SWRdKXtcbiAgICAgICAgaWYoY2hpbGRJZCA9PT0gaWQpeyByZXR1cm4gdGhpcy5yb290LmNoaWxkcmVuW3BhcmVudElkXVtjaGlsZElkXS5kZXN0cm95KCkgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGpvaW5DaGlsZChlbCl7XG4gICAgbGV0IGNoaWxkID0gdGhpcy5nZXRDaGlsZEJ5SWQoZWwuaWQpXG4gICAgaWYoIWNoaWxkKXtcbiAgICAgIGxldCB2aWV3ID0gbmV3IFZpZXcoZWwsIHRoaXMubGl2ZVNvY2tldCwgdGhpcylcbiAgICAgIHRoaXMucm9vdC5jaGlsZHJlblt0aGlzLmlkXVt2aWV3LmlkXSA9IHZpZXdcbiAgICAgIHZpZXcuam9pbigpXG4gICAgICB0aGlzLmNoaWxkSm9pbnMrK1xuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gIH1cblxuICBpc0pvaW5QZW5kaW5nKCl7IHJldHVybiB0aGlzLmpvaW5QZW5kaW5nIH1cblxuICBhY2tKb2luKF9jaGlsZCl7XG4gICAgdGhpcy5jaGlsZEpvaW5zLS1cblxuICAgIGlmKHRoaXMuY2hpbGRKb2lucyA9PT0gMCl7XG4gICAgICBpZih0aGlzLnBhcmVudCl7XG4gICAgICAgIHRoaXMucGFyZW50LmFja0pvaW4odGhpcylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMub25BbGxDaGlsZEpvaW5zQ29tcGxldGUoKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIG9uQWxsQ2hpbGRKb2luc0NvbXBsZXRlKCl7XG4gICAgdGhpcy5qb2luQ2FsbGJhY2soKCkgPT4ge1xuICAgICAgdGhpcy5wZW5kaW5nSm9pbk9wcy5mb3JFYWNoKChbdmlldywgb3BdKSA9PiB7XG4gICAgICAgIGlmKCF2aWV3LmlzRGVzdHJveWVkKCkpeyBvcCgpIH1cbiAgICAgIH0pXG4gICAgICB0aGlzLnBlbmRpbmdKb2luT3BzID0gW11cbiAgICB9KVxuICB9XG5cbiAgdXBkYXRlKGRpZmYsIGV2ZW50cyl7XG4gICAgaWYodGhpcy5pc0pvaW5QZW5kaW5nKCkgfHwgKHRoaXMubGl2ZVNvY2tldC5oYXNQZW5kaW5nTGluaygpICYmIHRoaXMucm9vdC5pc01haW4oKSkpe1xuICAgICAgcmV0dXJuIHRoaXMucGVuZGluZ0RpZmZzLnB1c2goe2RpZmYsIGV2ZW50c30pXG4gICAgfVxuXG4gICAgdGhpcy5yZW5kZXJlZC5tZXJnZURpZmYoZGlmZilcbiAgICBsZXQgcGh4Q2hpbGRyZW5BZGRlZCA9IGZhbHNlXG5cbiAgICAvLyBXaGVuIHRoZSBkaWZmIG9ubHkgY29udGFpbnMgY29tcG9uZW50IGRpZmZzLCB0aGVuIHdhbGsgY29tcG9uZW50c1xuICAgIC8vIGFuZCBwYXRjaCBvbmx5IHRoZSBwYXJlbnQgY29tcG9uZW50IGNvbnRhaW5lcnMgZm91bmQgaW4gdGhlIGRpZmYuXG4gICAgLy8gT3RoZXJ3aXNlLCBwYXRjaCBlbnRpcmUgTFYgY29udGFpbmVyLlxuICAgIGlmKHRoaXMucmVuZGVyZWQuaXNDb21wb25lbnRPbmx5RGlmZihkaWZmKSl7XG4gICAgICB0aGlzLmxpdmVTb2NrZXQudGltZShcImNvbXBvbmVudCBwYXRjaCBjb21wbGV0ZVwiLCAoKSA9PiB7XG4gICAgICAgIGxldCBwYXJlbnRDaWRzID0gRE9NLmZpbmRQYXJlbnRDSURzKHRoaXMuZWwsIHRoaXMucmVuZGVyZWQuY29tcG9uZW50Q0lEcyhkaWZmKSlcbiAgICAgICAgcGFyZW50Q2lkcy5mb3JFYWNoKHBhcmVudENJRCA9PiB7XG4gICAgICAgICAgaWYodGhpcy5jb21wb25lbnRQYXRjaCh0aGlzLnJlbmRlcmVkLmdldENvbXBvbmVudChkaWZmLCBwYXJlbnRDSUQpLCBwYXJlbnRDSUQpKXsgcGh4Q2hpbGRyZW5BZGRlZCA9IHRydWUgfVxuICAgICAgICB9KVxuICAgICAgfSlcbiAgICB9IGVsc2UgaWYoIWlzRW1wdHkoZGlmZikpe1xuICAgICAgdGhpcy5saXZlU29ja2V0LnRpbWUoXCJmdWxsIHBhdGNoIGNvbXBsZXRlXCIsICgpID0+IHtcbiAgICAgICAgbGV0IFtodG1sLCBzdHJlYW1zXSA9IHRoaXMucmVuZGVyQ29udGFpbmVyKGRpZmYsIFwidXBkYXRlXCIpXG4gICAgICAgIGxldCBwYXRjaCA9IG5ldyBET01QYXRjaCh0aGlzLCB0aGlzLmVsLCB0aGlzLmlkLCBodG1sLCBzdHJlYW1zLCBudWxsKVxuICAgICAgICBwaHhDaGlsZHJlbkFkZGVkID0gdGhpcy5wZXJmb3JtUGF0Y2gocGF0Y2gsIHRydWUpXG4gICAgICB9KVxuICAgIH1cblxuICAgIHRoaXMubGl2ZVNvY2tldC5kaXNwYXRjaEV2ZW50cyhldmVudHMpXG4gICAgaWYocGh4Q2hpbGRyZW5BZGRlZCl7IHRoaXMuam9pbk5ld0NoaWxkcmVuKCkgfVxuICB9XG5cbiAgcmVuZGVyQ29udGFpbmVyKGRpZmYsIGtpbmQpe1xuICAgIHJldHVybiB0aGlzLmxpdmVTb2NrZXQudGltZShgdG9TdHJpbmcgZGlmZiAoJHtraW5kfSlgLCAoKSA9PiB7XG4gICAgICBsZXQgdGFnID0gdGhpcy5lbC50YWdOYW1lXG4gICAgICAvLyBEb24ndCBza2lwIGFueSBjb21wb25lbnQgaW4gdGhlIGRpZmYgbm9yIGFueSBtYXJrZWQgYXMgcHJ1bmVkXG4gICAgICAvLyAoYXMgdGhleSBtYXkgaGF2ZSBiZWVuIGFkZGVkIGJhY2spXG4gICAgICBsZXQgY2lkcyA9IGRpZmYgPyB0aGlzLnJlbmRlcmVkLmNvbXBvbmVudENJRHMoZGlmZikuY29uY2F0KHRoaXMucHJ1bmluZ0NJRHMpIDogbnVsbFxuICAgICAgbGV0IFtodG1sLCBzdHJlYW1zXSA9IHRoaXMucmVuZGVyZWQudG9TdHJpbmcoY2lkcylcbiAgICAgIHJldHVybiBbYDwke3RhZ30+JHtodG1sfTwvJHt0YWd9PmAsIHN0cmVhbXNdXG4gICAgfSlcbiAgfVxuXG4gIGNvbXBvbmVudFBhdGNoKGRpZmYsIGNpZCl7XG4gICAgaWYoaXNFbXB0eShkaWZmKSkgcmV0dXJuIGZhbHNlXG4gICAgbGV0IFtodG1sLCBzdHJlYW1zXSA9IHRoaXMucmVuZGVyZWQuY29tcG9uZW50VG9TdHJpbmcoY2lkKVxuICAgIGxldCBwYXRjaCA9IG5ldyBET01QYXRjaCh0aGlzLCB0aGlzLmVsLCB0aGlzLmlkLCBodG1sLCBzdHJlYW1zLCBjaWQpXG4gICAgbGV0IGNoaWxkcmVuQWRkZWQgPSB0aGlzLnBlcmZvcm1QYXRjaChwYXRjaCwgdHJ1ZSlcbiAgICByZXR1cm4gY2hpbGRyZW5BZGRlZFxuICB9XG5cbiAgZ2V0SG9vayhlbCl7IHJldHVybiB0aGlzLnZpZXdIb29rc1tWaWV3SG9vay5lbGVtZW50SUQoZWwpXSB9XG5cbiAgYWRkSG9vayhlbCl7XG4gICAgaWYoVmlld0hvb2suZWxlbWVudElEKGVsKSB8fCAhZWwuZ2V0QXR0cmlidXRlKXsgcmV0dXJuIH1cbiAgICBsZXQgaG9va05hbWUgPSBlbC5nZXRBdHRyaWJ1dGUoYGRhdGEtcGh4LSR7UEhYX0hPT0t9YCkgfHwgZWwuZ2V0QXR0cmlidXRlKHRoaXMuYmluZGluZyhQSFhfSE9PSykpXG4gICAgaWYoaG9va05hbWUgJiYgIXRoaXMub3duc0VsZW1lbnQoZWwpKXsgcmV0dXJuIH1cbiAgICBsZXQgY2FsbGJhY2tzID0gdGhpcy5saXZlU29ja2V0LmdldEhvb2tDYWxsYmFja3MoaG9va05hbWUpXG5cbiAgICBpZihjYWxsYmFja3Mpe1xuICAgICAgaWYoIWVsLmlkKXsgbG9nRXJyb3IoYG5vIERPTSBJRCBmb3IgaG9vayBcIiR7aG9va05hbWV9XCIuIEhvb2tzIHJlcXVpcmUgYSB1bmlxdWUgSUQgb24gZWFjaCBlbGVtZW50LmAsIGVsKSB9XG4gICAgICBsZXQgaG9vayA9IG5ldyBWaWV3SG9vayh0aGlzLCBlbCwgY2FsbGJhY2tzKVxuICAgICAgdGhpcy52aWV3SG9va3NbVmlld0hvb2suZWxlbWVudElEKGhvb2suZWwpXSA9IGhvb2tcbiAgICAgIHJldHVybiBob29rXG4gICAgfSBlbHNlIGlmKGhvb2tOYW1lICE9PSBudWxsKXtcbiAgICAgIGxvZ0Vycm9yKGB1bmtub3duIGhvb2sgZm91bmQgZm9yIFwiJHtob29rTmFtZX1cImAsIGVsKVxuICAgIH1cbiAgfVxuXG4gIGRlc3Ryb3lIb29rKGhvb2spe1xuICAgIGhvb2suX19kZXN0cm95ZWQoKVxuICAgIGhvb2suX19jbGVhbnVwX18oKVxuICAgIGRlbGV0ZSB0aGlzLnZpZXdIb29rc1tWaWV3SG9vay5lbGVtZW50SUQoaG9vay5lbCldXG4gIH1cblxuICBhcHBseVBlbmRpbmdVcGRhdGVzKCl7XG4gICAgdGhpcy5wZW5kaW5nRGlmZnMuZm9yRWFjaCgoe2RpZmYsIGV2ZW50c30pID0+IHRoaXMudXBkYXRlKGRpZmYsIGV2ZW50cykpXG4gICAgdGhpcy5wZW5kaW5nRGlmZnMgPSBbXVxuICAgIHRoaXMuZWFjaENoaWxkKGNoaWxkID0+IGNoaWxkLmFwcGx5UGVuZGluZ1VwZGF0ZXMoKSlcbiAgfVxuXG4gIGVhY2hDaGlsZChjYWxsYmFjayl7XG4gICAgbGV0IGNoaWxkcmVuID0gdGhpcy5yb290LmNoaWxkcmVuW3RoaXMuaWRdIHx8IHt9XG4gICAgZm9yKGxldCBpZCBpbiBjaGlsZHJlbil7IGNhbGxiYWNrKHRoaXMuZ2V0Q2hpbGRCeUlkKGlkKSkgfVxuICB9XG5cbiAgb25DaGFubmVsKGV2ZW50LCBjYil7XG4gICAgdGhpcy5saXZlU29ja2V0Lm9uQ2hhbm5lbCh0aGlzLmNoYW5uZWwsIGV2ZW50LCByZXNwID0+IHtcbiAgICAgIGlmKHRoaXMuaXNKb2luUGVuZGluZygpKXtcbiAgICAgICAgdGhpcy5yb290LnBlbmRpbmdKb2luT3BzLnB1c2goW3RoaXMsICgpID0+IGNiKHJlc3ApXSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMubGl2ZVNvY2tldC5yZXF1ZXN0RE9NVXBkYXRlKCgpID0+IGNiKHJlc3ApKVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICBiaW5kQ2hhbm5lbCgpe1xuICAgIC8vIFRoZSBkaWZmIGV2ZW50IHNob3VsZCBiZSBoYW5kbGVkIGJ5IHRoZSByZWd1bGFyIHVwZGF0ZSBvcGVyYXRpb25zLlxuICAgIC8vIEFsbCBvdGhlciBvcGVyYXRpb25zIGFyZSBxdWV1ZWQgdG8gYmUgYXBwbGllZCBvbmx5IGFmdGVyIGpvaW4uXG4gICAgdGhpcy5saXZlU29ja2V0Lm9uQ2hhbm5lbCh0aGlzLmNoYW5uZWwsIFwiZGlmZlwiLCAocmF3RGlmZikgPT4ge1xuICAgICAgdGhpcy5saXZlU29ja2V0LnJlcXVlc3RET01VcGRhdGUoKCkgPT4ge1xuICAgICAgICB0aGlzLmFwcGx5RGlmZihcInVwZGF0ZVwiLCByYXdEaWZmLCAoe2RpZmYsIGV2ZW50c30pID0+IHRoaXMudXBkYXRlKGRpZmYsIGV2ZW50cykpXG4gICAgICB9KVxuICAgIH0pXG4gICAgdGhpcy5vbkNoYW5uZWwoXCJyZWRpcmVjdFwiLCAoe3RvLCBmbGFzaH0pID0+IHRoaXMub25SZWRpcmVjdCh7dG8sIGZsYXNofSkpXG4gICAgdGhpcy5vbkNoYW5uZWwoXCJsaXZlX3BhdGNoXCIsIChyZWRpcikgPT4gdGhpcy5vbkxpdmVQYXRjaChyZWRpcikpXG4gICAgdGhpcy5vbkNoYW5uZWwoXCJsaXZlX3JlZGlyZWN0XCIsIChyZWRpcikgPT4gdGhpcy5vbkxpdmVSZWRpcmVjdChyZWRpcikpXG4gICAgdGhpcy5jaGFubmVsLm9uRXJyb3IocmVhc29uID0+IHRoaXMub25FcnJvcihyZWFzb24pKVxuICAgIHRoaXMuY2hhbm5lbC5vbkNsb3NlKHJlYXNvbiA9PiB0aGlzLm9uQ2xvc2UocmVhc29uKSlcbiAgfVxuXG4gIGRlc3Ryb3lBbGxDaGlsZHJlbigpeyB0aGlzLmVhY2hDaGlsZChjaGlsZCA9PiBjaGlsZC5kZXN0cm95KCkpIH1cblxuICBvbkxpdmVSZWRpcmVjdChyZWRpcil7XG4gICAgbGV0IHt0bywga2luZCwgZmxhc2h9ID0gcmVkaXJcbiAgICBsZXQgdXJsID0gdGhpcy5leHBhbmRVUkwodG8pXG4gICAgdGhpcy5saXZlU29ja2V0Lmhpc3RvcnlSZWRpcmVjdCh1cmwsIGtpbmQsIGZsYXNoKVxuICB9XG5cbiAgb25MaXZlUGF0Y2gocmVkaXIpe1xuICAgIGxldCB7dG8sIGtpbmR9ID0gcmVkaXJcbiAgICB0aGlzLmhyZWYgPSB0aGlzLmV4cGFuZFVSTCh0bylcbiAgICB0aGlzLmxpdmVTb2NrZXQuaGlzdG9yeVBhdGNoKHRvLCBraW5kKVxuICB9XG5cbiAgZXhwYW5kVVJMKHRvKXtcbiAgICByZXR1cm4gdG8uc3RhcnRzV2l0aChcIi9cIikgPyBgJHt3aW5kb3cubG9jYXRpb24ucHJvdG9jb2x9Ly8ke3dpbmRvdy5sb2NhdGlvbi5ob3N0fSR7dG99YCA6IHRvXG4gIH1cblxuICBvblJlZGlyZWN0KHt0bywgZmxhc2h9KXsgdGhpcy5saXZlU29ja2V0LnJlZGlyZWN0KHRvLCBmbGFzaCkgfVxuXG4gIGlzRGVzdHJveWVkKCl7IHJldHVybiB0aGlzLmRlc3Ryb3llZCB9XG5cbiAgam9pbkRlYWQoKXsgdGhpcy5pc0RlYWQgPSB0cnVlIH1cblxuICBqb2luKGNhbGxiYWNrKXtcbiAgICB0aGlzLnNob3dMb2FkZXIodGhpcy5saXZlU29ja2V0LmxvYWRlclRpbWVvdXQpXG4gICAgdGhpcy5iaW5kQ2hhbm5lbCgpXG4gICAgaWYodGhpcy5pc01haW4oKSl7XG4gICAgICB0aGlzLnN0b3BDYWxsYmFjayA9IHRoaXMubGl2ZVNvY2tldC53aXRoUGFnZUxvYWRpbmcoe3RvOiB0aGlzLmhyZWYsIGtpbmQ6IFwiaW5pdGlhbFwifSlcbiAgICB9XG4gICAgdGhpcy5qb2luQ2FsbGJhY2sgPSAob25Eb25lKSA9PiB7XG4gICAgICBvbkRvbmUgPSBvbkRvbmUgfHwgZnVuY3Rpb24oKXt9XG4gICAgICBjYWxsYmFjayA/IGNhbGxiYWNrKHRoaXMuam9pbkNvdW50LCBvbkRvbmUpIDogb25Eb25lKClcbiAgICB9XG4gICAgdGhpcy5saXZlU29ja2V0LndyYXBQdXNoKHRoaXMsIHt0aW1lb3V0OiBmYWxzZX0sICgpID0+IHtcbiAgICAgIHJldHVybiB0aGlzLmNoYW5uZWwuam9pbigpXG4gICAgICAgIC5yZWNlaXZlKFwib2tcIiwgZGF0YSA9PiB7XG4gICAgICAgICAgaWYoIXRoaXMuaXNEZXN0cm95ZWQoKSl7XG4gICAgICAgICAgICB0aGlzLmxpdmVTb2NrZXQucmVxdWVzdERPTVVwZGF0ZSgoKSA9PiB0aGlzLm9uSm9pbihkYXRhKSlcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIC5yZWNlaXZlKFwiZXJyb3JcIiwgcmVzcCA9PiAhdGhpcy5pc0Rlc3Ryb3llZCgpICYmIHRoaXMub25Kb2luRXJyb3IocmVzcCkpXG4gICAgICAgIC5yZWNlaXZlKFwidGltZW91dFwiLCAoKSA9PiAhdGhpcy5pc0Rlc3Ryb3llZCgpICYmIHRoaXMub25Kb2luRXJyb3Ioe3JlYXNvbjogXCJ0aW1lb3V0XCJ9KSlcbiAgICB9KVxuICB9XG5cbiAgb25Kb2luRXJyb3IocmVzcCl7XG4gICAgaWYocmVzcC5yZWFzb24gPT09IFwicmVsb2FkXCIpe1xuICAgICAgdGhpcy5sb2coXCJlcnJvclwiLCAoKSA9PiBbYGZhaWxlZCBtb3VudCB3aXRoICR7cmVzcC5zdGF0dXN9LiBGYWxsaW5nIGJhY2sgdG8gcGFnZSByZXF1ZXN0YCwgcmVzcF0pXG4gICAgICByZXR1cm4gdGhpcy5vblJlZGlyZWN0KHt0bzogdGhpcy5ocmVmfSlcbiAgICB9IGVsc2UgaWYocmVzcC5yZWFzb24gPT09IFwidW5hdXRob3JpemVkXCIgfHwgcmVzcC5yZWFzb24gPT09IFwic3RhbGVcIil7XG4gICAgICB0aGlzLmxvZyhcImVycm9yXCIsICgpID0+IFtcInVuYXV0aG9yaXplZCBsaXZlX3JlZGlyZWN0LiBGYWxsaW5nIGJhY2sgdG8gcGFnZSByZXF1ZXN0XCIsIHJlc3BdKVxuICAgICAgcmV0dXJuIHRoaXMub25SZWRpcmVjdCh7dG86IHRoaXMuaHJlZn0pXG4gICAgfVxuICAgIGlmKHJlc3AucmVkaXJlY3QgfHwgcmVzcC5saXZlX3JlZGlyZWN0KXtcbiAgICAgIHRoaXMuam9pblBlbmRpbmcgPSBmYWxzZVxuICAgICAgdGhpcy5jaGFubmVsLmxlYXZlKClcbiAgICB9XG4gICAgaWYocmVzcC5yZWRpcmVjdCl7IHJldHVybiB0aGlzLm9uUmVkaXJlY3QocmVzcC5yZWRpcmVjdCkgfVxuICAgIGlmKHJlc3AubGl2ZV9yZWRpcmVjdCl7IHJldHVybiB0aGlzLm9uTGl2ZVJlZGlyZWN0KHJlc3AubGl2ZV9yZWRpcmVjdCkgfVxuICAgIHRoaXMubG9nKFwiZXJyb3JcIiwgKCkgPT4gW1widW5hYmxlIHRvIGpvaW5cIiwgcmVzcF0pXG4gICAgaWYodGhpcy5saXZlU29ja2V0LmlzQ29ubmVjdGVkKCkpeyB0aGlzLmxpdmVTb2NrZXQucmVsb2FkV2l0aEppdHRlcih0aGlzKSB9XG4gIH1cblxuICBvbkNsb3NlKHJlYXNvbil7XG4gICAgaWYodGhpcy5pc0Rlc3Ryb3llZCgpKXsgcmV0dXJuIH1cbiAgICBpZih0aGlzLmxpdmVTb2NrZXQuaGFzUGVuZGluZ0xpbmsoKSAmJiByZWFzb24gIT09IFwibGVhdmVcIil7XG4gICAgICByZXR1cm4gdGhpcy5saXZlU29ja2V0LnJlbG9hZFdpdGhKaXR0ZXIodGhpcylcbiAgICB9XG4gICAgdGhpcy5kZXN0cm95QWxsQ2hpbGRyZW4oKVxuICAgIHRoaXMubGl2ZVNvY2tldC5kcm9wQWN0aXZlRWxlbWVudCh0aGlzKVxuICAgIC8vIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgY2FuIGJlIG51bGwgaW4gSW50ZXJuZXQgRXhwbG9yZXIgMTFcbiAgICBpZihkb2N1bWVudC5hY3RpdmVFbGVtZW50KXsgZG9jdW1lbnQuYWN0aXZlRWxlbWVudC5ibHVyKCkgfVxuICAgIGlmKHRoaXMubGl2ZVNvY2tldC5pc1VubG9hZGVkKCkpe1xuICAgICAgdGhpcy5zaG93TG9hZGVyKEJFRk9SRV9VTkxPQURfTE9BREVSX1RJTUVPVVQpXG4gICAgfVxuICB9XG5cbiAgb25FcnJvcihyZWFzb24pe1xuICAgIHRoaXMub25DbG9zZShyZWFzb24pXG4gICAgaWYodGhpcy5saXZlU29ja2V0LmlzQ29ubmVjdGVkKCkpeyB0aGlzLmxvZyhcImVycm9yXCIsICgpID0+IFtcInZpZXcgY3Jhc2hlZFwiLCByZWFzb25dKSB9XG4gICAgaWYoIXRoaXMubGl2ZVNvY2tldC5pc1VubG9hZGVkKCkpeyB0aGlzLmRpc3BsYXlFcnJvcigpIH1cbiAgfVxuXG4gIGRpc3BsYXlFcnJvcigpe1xuICAgIGlmKHRoaXMuaXNNYWluKCkpeyBET00uZGlzcGF0Y2hFdmVudCh3aW5kb3csIFwicGh4OnBhZ2UtbG9hZGluZy1zdGFydFwiLCB7ZGV0YWlsOiB7dG86IHRoaXMuaHJlZiwga2luZDogXCJlcnJvclwifX0pIH1cbiAgICB0aGlzLnNob3dMb2FkZXIoKVxuICAgIHRoaXMuc2V0Q29udGFpbmVyQ2xhc3NlcyhQSFhfRElTQ09OTkVDVEVEX0NMQVNTLCBQSFhfRVJST1JfQ0xBU1MpXG4gICAgdGhpcy5leGVjQWxsKHRoaXMuYmluZGluZyhcImRpc2Nvbm5lY3RlZFwiKSlcbiAgfVxuXG4gIHB1c2hXaXRoUmVwbHkocmVmR2VuZXJhdG9yLCBldmVudCwgcGF5bG9hZCwgb25SZXBseSA9IGZ1bmN0aW9uICgpeyB9KXtcbiAgICBpZighdGhpcy5pc0Nvbm5lY3RlZCgpKXsgcmV0dXJuIH1cblxuICAgIGxldCBbcmVmLCBbZWxdLCBvcHRzXSA9IHJlZkdlbmVyYXRvciA/IHJlZkdlbmVyYXRvcigpIDogW251bGwsIFtdLCB7fV1cbiAgICBsZXQgb25Mb2FkaW5nRG9uZSA9IGZ1bmN0aW9uKCl7IH1cbiAgICBpZihvcHRzLnBhZ2VfbG9hZGluZyB8fCAoZWwgJiYgKGVsLmdldEF0dHJpYnV0ZSh0aGlzLmJpbmRpbmcoUEhYX1BBR0VfTE9BRElORykpICE9PSBudWxsKSkpe1xuICAgICAgb25Mb2FkaW5nRG9uZSA9IHRoaXMubGl2ZVNvY2tldC53aXRoUGFnZUxvYWRpbmcoe2tpbmQ6IFwiZWxlbWVudFwiLCB0YXJnZXQ6IGVsfSlcbiAgICB9XG5cbiAgICBpZih0eXBlb2YgKHBheWxvYWQuY2lkKSAhPT0gXCJudW1iZXJcIil7IGRlbGV0ZSBwYXlsb2FkLmNpZCB9XG4gICAgcmV0dXJuIChcbiAgICAgIHRoaXMubGl2ZVNvY2tldC53cmFwUHVzaCh0aGlzLCB7dGltZW91dDogdHJ1ZX0sICgpID0+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2hhbm5lbC5wdXNoKGV2ZW50LCBwYXlsb2FkLCBQVVNIX1RJTUVPVVQpLnJlY2VpdmUoXCJva1wiLCByZXNwID0+IHtcbiAgICAgICAgICBsZXQgZmluaXNoID0gKGhvb2tSZXBseSkgPT4ge1xuICAgICAgICAgICAgaWYocmVzcC5yZWRpcmVjdCl7IHRoaXMub25SZWRpcmVjdChyZXNwLnJlZGlyZWN0KSB9XG4gICAgICAgICAgICBpZihyZXNwLmxpdmVfcGF0Y2gpeyB0aGlzLm9uTGl2ZVBhdGNoKHJlc3AubGl2ZV9wYXRjaCkgfVxuICAgICAgICAgICAgaWYocmVzcC5saXZlX3JlZGlyZWN0KXsgdGhpcy5vbkxpdmVSZWRpcmVjdChyZXNwLmxpdmVfcmVkaXJlY3QpIH1cbiAgICAgICAgICAgIGlmKHJlZiAhPT0gbnVsbCl7IHRoaXMudW5kb1JlZnMocmVmKSB9XG4gICAgICAgICAgICBvbkxvYWRpbmdEb25lKClcbiAgICAgICAgICAgIG9uUmVwbHkocmVzcCwgaG9va1JlcGx5KVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZihyZXNwLmRpZmYpe1xuICAgICAgICAgICAgdGhpcy5saXZlU29ja2V0LnJlcXVlc3RET01VcGRhdGUoKCkgPT4ge1xuICAgICAgICAgICAgICB0aGlzLmFwcGx5RGlmZihcInVwZGF0ZVwiLCByZXNwLmRpZmYsICh7ZGlmZiwgcmVwbHksIGV2ZW50c30pID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZShkaWZmLCBldmVudHMpXG4gICAgICAgICAgICAgICAgZmluaXNoKHJlcGx5KVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZmluaXNoKG51bGwpXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgfSlcbiAgICApXG4gIH1cblxuICB1bmRvUmVmcyhyZWYpe1xuICAgIGlmKCF0aGlzLmlzQ29ubmVjdGVkKCkpeyByZXR1cm4gfSAvLyBleGl0IGlmIGV4dGVybmFsIGZvcm0gdHJpZ2dlcmVkXG5cbiAgICBET00uYWxsKGRvY3VtZW50LCBgWyR7UEhYX1JFRl9TUkN9PVwiJHt0aGlzLmlkfVwiXVske1BIWF9SRUZ9PVwiJHtyZWZ9XCJdYCwgZWwgPT4ge1xuICAgICAgbGV0IGRpc2FibGVkVmFsID0gZWwuZ2V0QXR0cmlidXRlKFBIWF9ESVNBQkxFRClcbiAgICAgIC8vIHJlbW92ZSByZWZzXG4gICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoUEhYX1JFRilcbiAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZShQSFhfUkVGX1NSQylcbiAgICAgIC8vIHJlc3RvcmUgaW5wdXRzXG4gICAgICBpZihlbC5nZXRBdHRyaWJ1dGUoUEhYX1JFQURPTkxZKSAhPT0gbnVsbCl7XG4gICAgICAgIGVsLnJlYWRPbmx5ID0gZmFsc2VcbiAgICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKFBIWF9SRUFET05MWSlcbiAgICAgIH1cbiAgICAgIGlmKGRpc2FibGVkVmFsICE9PSBudWxsKXtcbiAgICAgICAgZWwuZGlzYWJsZWQgPSBkaXNhYmxlZFZhbCA9PT0gXCJ0cnVlXCIgPyB0cnVlIDogZmFsc2VcbiAgICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKFBIWF9ESVNBQkxFRClcbiAgICAgIH1cbiAgICAgIC8vIHJlbW92ZSBjbGFzc2VzXG4gICAgICBQSFhfRVZFTlRfQ0xBU1NFUy5mb3JFYWNoKGNsYXNzTmFtZSA9PiBET00ucmVtb3ZlQ2xhc3MoZWwsIGNsYXNzTmFtZSkpXG4gICAgICAvLyByZXN0b3JlIGRpc2FibGVzXG4gICAgICBsZXQgZGlzYWJsZVJlc3RvcmUgPSBlbC5nZXRBdHRyaWJ1dGUoUEhYX0RJU0FCTEVfV0lUSF9SRVNUT1JFKVxuICAgICAgaWYoZGlzYWJsZVJlc3RvcmUgIT09IG51bGwpe1xuICAgICAgICBlbC5pbm5lclRleHQgPSBkaXNhYmxlUmVzdG9yZVxuICAgICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoUEhYX0RJU0FCTEVfV0lUSF9SRVNUT1JFKVxuICAgICAgfVxuICAgICAgbGV0IHRvRWwgPSBET00ucHJpdmF0ZShlbCwgUEhYX1JFRilcbiAgICAgIGlmKHRvRWwpe1xuICAgICAgICBsZXQgaG9vayA9IHRoaXMudHJpZ2dlckJlZm9yZVVwZGF0ZUhvb2soZWwsIHRvRWwpXG4gICAgICAgIERPTVBhdGNoLnBhdGNoRWwoZWwsIHRvRWwsIHRoaXMubGl2ZVNvY2tldC5nZXRBY3RpdmVFbGVtZW50KCkpXG4gICAgICAgIGlmKGhvb2speyBob29rLl9fdXBkYXRlZCgpIH1cbiAgICAgICAgRE9NLmRlbGV0ZVByaXZhdGUoZWwsIFBIWF9SRUYpXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIHB1dFJlZihlbGVtZW50cywgZXZlbnQsIG9wdHMgPSB7fSl7XG4gICAgbGV0IG5ld1JlZiA9IHRoaXMucmVmKytcbiAgICBsZXQgZGlzYWJsZVdpdGggPSB0aGlzLmJpbmRpbmcoUEhYX0RJU0FCTEVfV0lUSClcbiAgICBpZihvcHRzLmxvYWRpbmcpeyBlbGVtZW50cyA9IGVsZW1lbnRzLmNvbmNhdChET00uYWxsKGRvY3VtZW50LCBvcHRzLmxvYWRpbmcpKX1cblxuICAgIGVsZW1lbnRzLmZvckVhY2goZWwgPT4ge1xuICAgICAgZWwuY2xhc3NMaXN0LmFkZChgcGh4LSR7ZXZlbnR9LWxvYWRpbmdgKVxuICAgICAgZWwuc2V0QXR0cmlidXRlKFBIWF9SRUYsIG5ld1JlZilcbiAgICAgIGVsLnNldEF0dHJpYnV0ZShQSFhfUkVGX1NSQywgdGhpcy5lbC5pZClcbiAgICAgIGxldCBkaXNhYmxlVGV4dCA9IGVsLmdldEF0dHJpYnV0ZShkaXNhYmxlV2l0aClcbiAgICAgIGlmKGRpc2FibGVUZXh0ICE9PSBudWxsKXtcbiAgICAgICAgaWYoIWVsLmdldEF0dHJpYnV0ZShQSFhfRElTQUJMRV9XSVRIX1JFU1RPUkUpKXtcbiAgICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoUEhYX0RJU0FCTEVfV0lUSF9SRVNUT1JFLCBlbC5pbm5lclRleHQpXG4gICAgICAgIH1cbiAgICAgICAgaWYoZGlzYWJsZVRleHQgIT09IFwiXCIpeyBlbC5pbm5lclRleHQgPSBkaXNhYmxlVGV4dCB9XG4gICAgICAgIGVsLnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsIFwiXCIpXG4gICAgICB9XG4gICAgfSlcbiAgICByZXR1cm4gW25ld1JlZiwgZWxlbWVudHMsIG9wdHNdXG4gIH1cblxuICBjb21wb25lbnRJRChlbCl7XG4gICAgbGV0IGNpZCA9IGVsLmdldEF0dHJpYnV0ZSAmJiBlbC5nZXRBdHRyaWJ1dGUoUEhYX0NPTVBPTkVOVClcbiAgICByZXR1cm4gY2lkID8gcGFyc2VJbnQoY2lkKSA6IG51bGxcbiAgfVxuXG4gIHRhcmdldENvbXBvbmVudElEKHRhcmdldCwgdGFyZ2V0Q3R4LCBvcHRzID0ge30pe1xuICAgIGlmKGlzQ2lkKHRhcmdldEN0eCkpeyByZXR1cm4gdGFyZ2V0Q3R4IH1cblxuICAgIGxldCBjaWRPclNlbGVjdG9yID0gdGFyZ2V0LmdldEF0dHJpYnV0ZSh0aGlzLmJpbmRpbmcoXCJ0YXJnZXRcIikpXG4gICAgaWYoaXNDaWQoY2lkT3JTZWxlY3Rvcikpe1xuICAgICAgcmV0dXJuIHBhcnNlSW50KGNpZE9yU2VsZWN0b3IpXG4gICAgfSBlbHNlIGlmKHRhcmdldEN0eCAmJiAoY2lkT3JTZWxlY3RvciAhPT0gbnVsbCB8fCBvcHRzLnRhcmdldCkpe1xuICAgICAgcmV0dXJuIHRoaXMuY2xvc2VzdENvbXBvbmVudElEKHRhcmdldEN0eClcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG4gIH1cblxuICBjbG9zZXN0Q29tcG9uZW50SUQodGFyZ2V0Q3R4KXtcbiAgICBpZihpc0NpZCh0YXJnZXRDdHgpKXtcbiAgICAgIHJldHVybiB0YXJnZXRDdHhcbiAgICB9IGVsc2UgaWYodGFyZ2V0Q3R4KXtcbiAgICAgIHJldHVybiBtYXliZSh0YXJnZXRDdHguY2xvc2VzdChgWyR7UEhYX0NPTVBPTkVOVH1dYCksIGVsID0+IHRoaXMub3duc0VsZW1lbnQoZWwpICYmIHRoaXMuY29tcG9uZW50SUQoZWwpKVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cbiAgfVxuXG4gIHB1c2hIb29rRXZlbnQodGFyZ2V0Q3R4LCBldmVudCwgcGF5bG9hZCwgb25SZXBseSl7XG4gICAgaWYoIXRoaXMuaXNDb25uZWN0ZWQoKSl7XG4gICAgICB0aGlzLmxvZyhcImhvb2tcIiwgKCkgPT4gW1widW5hYmxlIHRvIHB1c2ggaG9vayBldmVudC4gTGl2ZVZpZXcgbm90IGNvbm5lY3RlZFwiLCBldmVudCwgcGF5bG9hZF0pXG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gICAgbGV0IFtyZWYsIGVscywgb3B0c10gPSB0aGlzLnB1dFJlZihbXSwgXCJob29rXCIpXG4gICAgdGhpcy5wdXNoV2l0aFJlcGx5KCgpID0+IFtyZWYsIGVscywgb3B0c10sIFwiZXZlbnRcIiwge1xuICAgICAgdHlwZTogXCJob29rXCIsXG4gICAgICBldmVudDogZXZlbnQsXG4gICAgICB2YWx1ZTogcGF5bG9hZCxcbiAgICAgIGNpZDogdGhpcy5jbG9zZXN0Q29tcG9uZW50SUQodGFyZ2V0Q3R4KVxuICAgIH0sIChyZXNwLCByZXBseSkgPT4gb25SZXBseShyZXBseSwgcmVmKSlcblxuICAgIHJldHVybiByZWZcbiAgfVxuXG4gIGV4dHJhY3RNZXRhKGVsLCBtZXRhLCB2YWx1ZSl7XG4gICAgbGV0IHByZWZpeCA9IHRoaXMuYmluZGluZyhcInZhbHVlLVwiKVxuICAgIGZvcihsZXQgaSA9IDA7IGkgPCBlbC5hdHRyaWJ1dGVzLmxlbmd0aDsgaSsrKXtcbiAgICAgIGlmKCFtZXRhKXsgbWV0YSA9IHt9IH1cbiAgICAgIGxldCBuYW1lID0gZWwuYXR0cmlidXRlc1tpXS5uYW1lXG4gICAgICBpZihuYW1lLnN0YXJ0c1dpdGgocHJlZml4KSl7IG1ldGFbbmFtZS5yZXBsYWNlKHByZWZpeCwgXCJcIildID0gZWwuZ2V0QXR0cmlidXRlKG5hbWUpIH1cbiAgICB9XG4gICAgaWYoZWwudmFsdWUgIT09IHVuZGVmaW5lZCl7XG4gICAgICBpZighbWV0YSl7IG1ldGEgPSB7fSB9XG4gICAgICBtZXRhLnZhbHVlID0gZWwudmFsdWVcblxuICAgICAgaWYoZWwudGFnTmFtZSA9PT0gXCJJTlBVVFwiICYmIENIRUNLQUJMRV9JTlBVVFMuaW5kZXhPZihlbC50eXBlKSA+PSAwICYmICFlbC5jaGVja2VkKXtcbiAgICAgICAgZGVsZXRlIG1ldGEudmFsdWVcbiAgICAgIH1cbiAgICB9XG4gICAgaWYodmFsdWUpe1xuICAgICAgaWYoIW1ldGEpeyBtZXRhID0ge30gfVxuICAgICAgZm9yKGxldCBrZXkgaW4gdmFsdWUpeyBtZXRhW2tleV0gPSB2YWx1ZVtrZXldIH1cbiAgICB9XG4gICAgcmV0dXJuIG1ldGFcbiAgfVxuXG4gIHB1c2hFdmVudCh0eXBlLCBlbCwgdGFyZ2V0Q3R4LCBwaHhFdmVudCwgbWV0YSwgb3B0cyA9IHt9KXtcbiAgICB0aGlzLnB1c2hXaXRoUmVwbHkoKCkgPT4gdGhpcy5wdXRSZWYoW2VsXSwgdHlwZSwgb3B0cyksIFwiZXZlbnRcIiwge1xuICAgICAgdHlwZTogdHlwZSxcbiAgICAgIGV2ZW50OiBwaHhFdmVudCxcbiAgICAgIHZhbHVlOiB0aGlzLmV4dHJhY3RNZXRhKGVsLCBtZXRhLCBvcHRzLnZhbHVlKSxcbiAgICAgIGNpZDogdGhpcy50YXJnZXRDb21wb25lbnRJRChlbCwgdGFyZ2V0Q3R4LCBvcHRzKVxuICAgIH0pXG4gIH1cblxuICBwdXNoRmlsZVByb2dyZXNzKGZpbGVFbCwgZW50cnlSZWYsIHByb2dyZXNzLCBvblJlcGx5ID0gZnVuY3Rpb24gKCl7IH0pe1xuICAgIHRoaXMubGl2ZVNvY2tldC53aXRoaW5Pd25lcnMoZmlsZUVsLmZvcm0sICh2aWV3LCB0YXJnZXRDdHgpID0+IHtcbiAgICAgIHZpZXcucHVzaFdpdGhSZXBseShudWxsLCBcInByb2dyZXNzXCIsIHtcbiAgICAgICAgZXZlbnQ6IGZpbGVFbC5nZXRBdHRyaWJ1dGUodmlldy5iaW5kaW5nKFBIWF9QUk9HUkVTUykpLFxuICAgICAgICByZWY6IGZpbGVFbC5nZXRBdHRyaWJ1dGUoUEhYX1VQTE9BRF9SRUYpLFxuICAgICAgICBlbnRyeV9yZWY6IGVudHJ5UmVmLFxuICAgICAgICBwcm9ncmVzczogcHJvZ3Jlc3MsXG4gICAgICAgIGNpZDogdmlldy50YXJnZXRDb21wb25lbnRJRChmaWxlRWwuZm9ybSwgdGFyZ2V0Q3R4KVxuICAgICAgfSwgb25SZXBseSlcbiAgICB9KVxuICB9XG5cbiAgcHVzaElucHV0KGlucHV0RWwsIHRhcmdldEN0eCwgZm9yY2VDaWQsIHBoeEV2ZW50LCBvcHRzLCBjYWxsYmFjayl7XG4gICAgbGV0IHVwbG9hZHNcbiAgICBsZXQgY2lkID0gaXNDaWQoZm9yY2VDaWQpID8gZm9yY2VDaWQgOiB0aGlzLnRhcmdldENvbXBvbmVudElEKGlucHV0RWwuZm9ybSwgdGFyZ2V0Q3R4KVxuICAgIGxldCByZWZHZW5lcmF0b3IgPSAoKSA9PiB0aGlzLnB1dFJlZihbaW5wdXRFbCwgaW5wdXRFbC5mb3JtXSwgXCJjaGFuZ2VcIiwgb3B0cylcbiAgICBsZXQgZm9ybURhdGFcbiAgICBpZihpbnB1dEVsLmdldEF0dHJpYnV0ZSh0aGlzLmJpbmRpbmcoXCJjaGFuZ2VcIikpKXtcbiAgICAgIGZvcm1EYXRhID0gc2VyaWFsaXplRm9ybShpbnB1dEVsLmZvcm0sIHtfdGFyZ2V0OiBvcHRzLl90YXJnZXR9LCBbaW5wdXRFbC5uYW1lXSlcbiAgICB9IGVsc2Uge1xuICAgICAgZm9ybURhdGEgPSBzZXJpYWxpemVGb3JtKGlucHV0RWwuZm9ybSwge190YXJnZXQ6IG9wdHMuX3RhcmdldH0pXG4gICAgfVxuICAgIGlmKERPTS5pc1VwbG9hZElucHV0KGlucHV0RWwpICYmIGlucHV0RWwuZmlsZXMgJiYgaW5wdXRFbC5maWxlcy5sZW5ndGggPiAwKXtcbiAgICAgIExpdmVVcGxvYWRlci50cmFja0ZpbGVzKGlucHV0RWwsIEFycmF5LmZyb20oaW5wdXRFbC5maWxlcykpXG4gICAgfVxuICAgIHVwbG9hZHMgPSBMaXZlVXBsb2FkZXIuc2VyaWFsaXplVXBsb2FkcyhpbnB1dEVsKVxuICAgIGxldCBldmVudCA9IHtcbiAgICAgIHR5cGU6IFwiZm9ybVwiLFxuICAgICAgZXZlbnQ6IHBoeEV2ZW50LFxuICAgICAgdmFsdWU6IGZvcm1EYXRhLFxuICAgICAgdXBsb2FkczogdXBsb2FkcyxcbiAgICAgIGNpZDogY2lkXG4gICAgfVxuICAgIHRoaXMucHVzaFdpdGhSZXBseShyZWZHZW5lcmF0b3IsIFwiZXZlbnRcIiwgZXZlbnQsIHJlc3AgPT4ge1xuICAgICAgRE9NLnNob3dFcnJvcihpbnB1dEVsLCB0aGlzLmxpdmVTb2NrZXQuYmluZGluZyhQSFhfRkVFREJBQ0tfRk9SKSlcbiAgICAgIGlmKERPTS5pc1VwbG9hZElucHV0KGlucHV0RWwpICYmIGlucHV0RWwuZ2V0QXR0cmlidXRlKFwiZGF0YS1waHgtYXV0by11cGxvYWRcIikgIT09IG51bGwpe1xuICAgICAgICBpZihMaXZlVXBsb2FkZXIuZmlsZXNBd2FpdGluZ1ByZWZsaWdodChpbnB1dEVsKS5sZW5ndGggPiAwKXtcbiAgICAgICAgICBsZXQgW3JlZiwgX2Vsc10gPSByZWZHZW5lcmF0b3IoKVxuICAgICAgICAgIHRoaXMudXBsb2FkRmlsZXMoaW5wdXRFbC5mb3JtLCB0YXJnZXRDdHgsIHJlZiwgY2lkLCAoX3VwbG9hZHMpID0+IHtcbiAgICAgICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKHJlc3ApXG4gICAgICAgICAgICB0aGlzLnRyaWdnZXJBd2FpdGluZ1N1Ym1pdChpbnB1dEVsLmZvcm0pXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2socmVzcClcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgdHJpZ2dlckF3YWl0aW5nU3VibWl0KGZvcm1FbCl7XG4gICAgbGV0IGF3YWl0aW5nU3VibWl0ID0gdGhpcy5nZXRTY2hlZHVsZWRTdWJtaXQoZm9ybUVsKVxuICAgIGlmKGF3YWl0aW5nU3VibWl0KXtcbiAgICAgIGxldCBbX2VsLCBfcmVmLCBfb3B0cywgY2FsbGJhY2tdID0gYXdhaXRpbmdTdWJtaXRcbiAgICAgIHRoaXMuY2FuY2VsU3VibWl0KGZvcm1FbClcbiAgICAgIGNhbGxiYWNrKClcbiAgICB9XG4gIH1cblxuICBnZXRTY2hlZHVsZWRTdWJtaXQoZm9ybUVsKXtcbiAgICByZXR1cm4gdGhpcy5mb3JtU3VibWl0cy5maW5kKChbZWwsIF9yZWYsIF9vcHRzLCBfY2FsbGJhY2tdKSA9PiBlbC5pc1NhbWVOb2RlKGZvcm1FbCkpXG4gIH1cblxuICBzY2hlZHVsZVN1Ym1pdChmb3JtRWwsIHJlZiwgb3B0cywgY2FsbGJhY2spe1xuICAgIGlmKHRoaXMuZ2V0U2NoZWR1bGVkU3VibWl0KGZvcm1FbCkpeyByZXR1cm4gdHJ1ZSB9XG4gICAgdGhpcy5mb3JtU3VibWl0cy5wdXNoKFtmb3JtRWwsIHJlZiwgb3B0cywgY2FsbGJhY2tdKVxuICB9XG5cbiAgY2FuY2VsU3VibWl0KGZvcm1FbCl7XG4gICAgdGhpcy5mb3JtU3VibWl0cyA9IHRoaXMuZm9ybVN1Ym1pdHMuZmlsdGVyKChbZWwsIHJlZiwgX2NhbGxiYWNrXSkgPT4ge1xuICAgICAgaWYoZWwuaXNTYW1lTm9kZShmb3JtRWwpKXtcbiAgICAgICAgdGhpcy51bmRvUmVmcyhyZWYpXG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgZGlzYWJsZUZvcm0oZm9ybUVsLCBvcHRzID0ge30pe1xuICAgIGxldCBmaWx0ZXJJZ25vcmVkID0gZWwgPT4ge1xuICAgICAgbGV0IHVzZXJJZ25vcmVkID0gY2xvc2VzdFBoeEJpbmRpbmcoZWwsIGAke3RoaXMuYmluZGluZyhQSFhfVVBEQVRFKX09aWdub3JlYCwgZWwuZm9ybSlcbiAgICAgIHJldHVybiAhKHVzZXJJZ25vcmVkIHx8IGNsb3Nlc3RQaHhCaW5kaW5nKGVsLCBcImRhdGEtcGh4LXVwZGF0ZT1pZ25vcmVcIiwgZWwuZm9ybSkpXG4gICAgfVxuICAgIGxldCBmaWx0ZXJEaXNhYmxlcyA9IGVsID0+IHtcbiAgICAgIHJldHVybiBlbC5oYXNBdHRyaWJ1dGUodGhpcy5iaW5kaW5nKFBIWF9ESVNBQkxFX1dJVEgpKVxuICAgIH1cbiAgICBsZXQgZmlsdGVyQnV0dG9uID0gZWwgPT4gZWwudGFnTmFtZSA9PSBcIkJVVFRPTlwiXG5cbiAgICBsZXQgZmlsdGVySW5wdXQgPSBlbCA9PiBbXCJJTlBVVFwiLCBcIlRFWFRBUkVBXCIsIFwiU0VMRUNUXCJdLmluY2x1ZGVzKGVsLnRhZ05hbWUpXG5cbiAgICBsZXQgZm9ybUVsZW1lbnRzID0gQXJyYXkuZnJvbShmb3JtRWwuZWxlbWVudHMpXG4gICAgbGV0IGRpc2FibGVzID0gZm9ybUVsZW1lbnRzLmZpbHRlcihmaWx0ZXJEaXNhYmxlcylcbiAgICBsZXQgYnV0dG9ucyA9IGZvcm1FbGVtZW50cy5maWx0ZXIoZmlsdGVyQnV0dG9uKS5maWx0ZXIoZmlsdGVySWdub3JlZClcbiAgICBsZXQgaW5wdXRzID0gZm9ybUVsZW1lbnRzLmZpbHRlcihmaWx0ZXJJbnB1dCkuZmlsdGVyKGZpbHRlcklnbm9yZWQpXG5cbiAgICBidXR0b25zLmZvckVhY2goYnV0dG9uID0+IHtcbiAgICAgIGJ1dHRvbi5zZXRBdHRyaWJ1dGUoUEhYX0RJU0FCTEVELCBidXR0b24uZGlzYWJsZWQpXG4gICAgICBidXR0b24uZGlzYWJsZWQgPSB0cnVlXG4gICAgfSlcbiAgICBpbnB1dHMuZm9yRWFjaChpbnB1dCA9PiB7XG4gICAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoUEhYX1JFQURPTkxZLCBpbnB1dC5yZWFkT25seSlcbiAgICAgIGlucHV0LnJlYWRPbmx5ID0gdHJ1ZVxuICAgICAgaWYoaW5wdXQuZmlsZXMpe1xuICAgICAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoUEhYX0RJU0FCTEVELCBpbnB1dC5kaXNhYmxlZClcbiAgICAgICAgaW5wdXQuZGlzYWJsZWQgPSB0cnVlXG4gICAgICB9XG4gICAgfSlcbiAgICBmb3JtRWwuc2V0QXR0cmlidXRlKHRoaXMuYmluZGluZyhQSFhfUEFHRV9MT0FESU5HKSwgXCJcIilcbiAgICByZXR1cm4gdGhpcy5wdXRSZWYoW2Zvcm1FbF0uY29uY2F0KGRpc2FibGVzKS5jb25jYXQoYnV0dG9ucykuY29uY2F0KGlucHV0cyksIFwic3VibWl0XCIsIG9wdHMpXG4gIH1cblxuICBwdXNoRm9ybVN1Ym1pdChmb3JtRWwsIHRhcmdldEN0eCwgcGh4RXZlbnQsIHN1Ym1pdHRlciwgb3B0cywgb25SZXBseSl7XG4gICAgbGV0IHJlZkdlbmVyYXRvciA9ICgpID0+IHRoaXMuZGlzYWJsZUZvcm0oZm9ybUVsLCBvcHRzKVxuICAgIGxldCBjaWQgPSB0aGlzLnRhcmdldENvbXBvbmVudElEKGZvcm1FbCwgdGFyZ2V0Q3R4KVxuICAgIGlmKExpdmVVcGxvYWRlci5oYXNVcGxvYWRzSW5Qcm9ncmVzcyhmb3JtRWwpKXtcbiAgICAgIGxldCBbcmVmLCBfZWxzXSA9IHJlZkdlbmVyYXRvcigpXG4gICAgICBsZXQgcHVzaCA9ICgpID0+IHRoaXMucHVzaEZvcm1TdWJtaXQoZm9ybUVsLCBzdWJtaXR0ZXIsIHRhcmdldEN0eCwgcGh4RXZlbnQsIG9wdHMsIG9uUmVwbHkpXG4gICAgICByZXR1cm4gdGhpcy5zY2hlZHVsZVN1Ym1pdChmb3JtRWwsIHJlZiwgb3B0cywgcHVzaClcbiAgICB9IGVsc2UgaWYoTGl2ZVVwbG9hZGVyLmlucHV0c0F3YWl0aW5nUHJlZmxpZ2h0KGZvcm1FbCkubGVuZ3RoID4gMCl7XG4gICAgICBsZXQgW3JlZiwgZWxzXSA9IHJlZkdlbmVyYXRvcigpXG4gICAgICBsZXQgcHJveHlSZWZHZW4gPSAoKSA9PiBbcmVmLCBlbHMsIG9wdHNdXG4gICAgICB0aGlzLnVwbG9hZEZpbGVzKGZvcm1FbCwgdGFyZ2V0Q3R4LCByZWYsIGNpZCwgKF91cGxvYWRzKSA9PiB7XG4gICAgICAgIGxldCBmb3JtRGF0YSA9IHNlcmlhbGl6ZUZvcm0oZm9ybUVsLCB7c3VibWl0dGVyfSlcbiAgICAgICAgdGhpcy5wdXNoV2l0aFJlcGx5KHByb3h5UmVmR2VuLCBcImV2ZW50XCIsIHtcbiAgICAgICAgICB0eXBlOiBcImZvcm1cIixcbiAgICAgICAgICBldmVudDogcGh4RXZlbnQsXG4gICAgICAgICAgdmFsdWU6IGZvcm1EYXRhLFxuICAgICAgICAgIGNpZDogY2lkXG4gICAgICAgIH0sIG9uUmVwbHkpXG4gICAgICB9KVxuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgZm9ybURhdGEgPSBzZXJpYWxpemVGb3JtKGZvcm1FbCwge3N1Ym1pdHRlcn0pXG4gICAgICB0aGlzLnB1c2hXaXRoUmVwbHkocmVmR2VuZXJhdG9yLCBcImV2ZW50XCIsIHtcbiAgICAgICAgdHlwZTogXCJmb3JtXCIsXG4gICAgICAgIGV2ZW50OiBwaHhFdmVudCxcbiAgICAgICAgdmFsdWU6IGZvcm1EYXRhLFxuICAgICAgICBjaWQ6IGNpZFxuICAgICAgfSwgb25SZXBseSlcbiAgICB9XG4gIH1cblxuICB1cGxvYWRGaWxlcyhmb3JtRWwsIHRhcmdldEN0eCwgcmVmLCBjaWQsIG9uQ29tcGxldGUpe1xuICAgIGxldCBqb2luQ291bnRBdFVwbG9hZCA9IHRoaXMuam9pbkNvdW50XG4gICAgbGV0IGlucHV0RWxzID0gTGl2ZVVwbG9hZGVyLmFjdGl2ZUZpbGVJbnB1dHMoZm9ybUVsKVxuICAgIGxldCBudW1GaWxlSW5wdXRzSW5Qcm9ncmVzcyA9IGlucHV0RWxzLmxlbmd0aFxuXG4gICAgLy8gZ2V0IGVhY2ggZmlsZSBpbnB1dFxuICAgIGlucHV0RWxzLmZvckVhY2goaW5wdXRFbCA9PiB7XG4gICAgICBsZXQgdXBsb2FkZXIgPSBuZXcgTGl2ZVVwbG9hZGVyKGlucHV0RWwsIHRoaXMsICgpID0+IHtcbiAgICAgICAgbnVtRmlsZUlucHV0c0luUHJvZ3Jlc3MtLVxuICAgICAgICBpZihudW1GaWxlSW5wdXRzSW5Qcm9ncmVzcyA9PT0gMCl7IG9uQ29tcGxldGUoKSB9XG4gICAgICB9KTtcblxuICAgICAgdGhpcy51cGxvYWRlcnNbaW5wdXRFbF0gPSB1cGxvYWRlclxuICAgICAgbGV0IGVudHJpZXMgPSB1cGxvYWRlci5lbnRyaWVzKCkubWFwKGVudHJ5ID0+IGVudHJ5LnRvUHJlZmxpZ2h0UGF5bG9hZCgpKVxuXG4gICAgICBsZXQgcGF5bG9hZCA9IHtcbiAgICAgICAgcmVmOiBpbnB1dEVsLmdldEF0dHJpYnV0ZShQSFhfVVBMT0FEX1JFRiksXG4gICAgICAgIGVudHJpZXM6IGVudHJpZXMsXG4gICAgICAgIGNpZDogdGhpcy50YXJnZXRDb21wb25lbnRJRChpbnB1dEVsLmZvcm0sIHRhcmdldEN0eClcbiAgICAgIH1cblxuICAgICAgdGhpcy5sb2coXCJ1cGxvYWRcIiwgKCkgPT4gW1wic2VuZGluZyBwcmVmbGlnaHQgcmVxdWVzdFwiLCBwYXlsb2FkXSlcblxuICAgICAgdGhpcy5wdXNoV2l0aFJlcGx5KG51bGwsIFwiYWxsb3dfdXBsb2FkXCIsIHBheWxvYWQsIHJlc3AgPT4ge1xuICAgICAgICB0aGlzLmxvZyhcInVwbG9hZFwiLCAoKSA9PiBbXCJnb3QgcHJlZmxpZ2h0IHJlc3BvbnNlXCIsIHJlc3BdKVxuICAgICAgICBpZihyZXNwLmVycm9yKXtcbiAgICAgICAgICB0aGlzLnVuZG9SZWZzKHJlZilcbiAgICAgICAgICBsZXQgW2VudHJ5X3JlZiwgcmVhc29uXSA9IHJlc3AuZXJyb3JcbiAgICAgICAgICB0aGlzLmxvZyhcInVwbG9hZFwiLCAoKSA9PiBbYGVycm9yIGZvciBlbnRyeSAke2VudHJ5X3JlZn1gLCByZWFzb25dKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxldCBvbkVycm9yID0gKGNhbGxiYWNrKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNoYW5uZWwub25FcnJvcigoKSA9PiB7XG4gICAgICAgICAgICAgIGlmKHRoaXMuam9pbkNvdW50ID09PSBqb2luQ291bnRBdFVwbG9hZCl7IGNhbGxiYWNrKCkgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgICAgdXBsb2FkZXIuaW5pdEFkYXB0ZXJVcGxvYWQocmVzcCwgb25FcnJvciwgdGhpcy5saXZlU29ja2V0KVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH0pXG4gIH1cblxuICBkaXNwYXRjaFVwbG9hZHMobmFtZSwgZmlsZXNPckJsb2JzKXtcbiAgICBsZXQgaW5wdXRzID0gRE9NLmZpbmRVcGxvYWRJbnB1dHModGhpcy5lbCkuZmlsdGVyKGVsID0+IGVsLm5hbWUgPT09IG5hbWUpXG4gICAgaWYoaW5wdXRzLmxlbmd0aCA9PT0gMCl7IGxvZ0Vycm9yKGBubyBsaXZlIGZpbGUgaW5wdXRzIGZvdW5kIG1hdGNoaW5nIHRoZSBuYW1lIFwiJHtuYW1lfVwiYCkgfVxuICAgIGVsc2UgaWYoaW5wdXRzLmxlbmd0aCA+IDEpeyBsb2dFcnJvcihgZHVwbGljYXRlIGxpdmUgZmlsZSBpbnB1dHMgZm91bmQgbWF0Y2hpbmcgdGhlIG5hbWUgXCIke25hbWV9XCJgKSB9XG4gICAgZWxzZSB7IERPTS5kaXNwYXRjaEV2ZW50KGlucHV0c1swXSwgUEhYX1RSQUNLX1VQTE9BRFMsIHtkZXRhaWw6IHtmaWxlczogZmlsZXNPckJsb2JzfX0pIH1cbiAgfVxuXG4gIHB1c2hGb3JtUmVjb3ZlcnkoZm9ybSwgbmV3Q2lkLCBjYWxsYmFjayl7XG4gICAgdGhpcy5saXZlU29ja2V0LndpdGhpbk93bmVycyhmb3JtLCAodmlldywgdGFyZ2V0Q3R4KSA9PiB7XG4gICAgICBsZXQgaW5wdXQgPSBBcnJheS5mcm9tKGZvcm0uZWxlbWVudHMpLmZpbmQoZWwgPT4ge1xuICAgICAgICByZXR1cm4gRE9NLmlzRm9ybUlucHV0KGVsKSAmJiBlbC50eXBlICE9PSBcImhpZGRlblwiICYmICFlbC5oYXNBdHRyaWJ1dGUodGhpcy5iaW5kaW5nKFwiY2hhbmdlXCIpKVxuICAgICAgfSlcbiAgICAgIGxldCBwaHhFdmVudCA9IGZvcm0uZ2V0QXR0cmlidXRlKHRoaXMuYmluZGluZyhQSFhfQVVUT19SRUNPVkVSKSkgfHwgZm9ybS5nZXRBdHRyaWJ1dGUodGhpcy5iaW5kaW5nKFwiY2hhbmdlXCIpKVxuXG4gICAgICBKUy5leGVjKFwiY2hhbmdlXCIsIHBoeEV2ZW50LCB2aWV3LCBpbnB1dCwgW1wicHVzaFwiLCB7X3RhcmdldDogaW5wdXQubmFtZSwgbmV3Q2lkOiBuZXdDaWQsIGNhbGxiYWNrOiBjYWxsYmFja31dKVxuICAgIH0pXG4gIH1cblxuICBwdXNoTGlua1BhdGNoKGhyZWYsIHRhcmdldEVsLCBjYWxsYmFjayl7XG4gICAgbGV0IGxpbmtSZWYgPSB0aGlzLmxpdmVTb2NrZXQuc2V0UGVuZGluZ0xpbmsoaHJlZilcbiAgICBsZXQgcmVmR2VuID0gdGFyZ2V0RWwgPyAoKSA9PiB0aGlzLnB1dFJlZihbdGFyZ2V0RWxdLCBcImNsaWNrXCIpIDogbnVsbFxuICAgIGxldCBmYWxsYmFjayA9ICgpID0+IHRoaXMubGl2ZVNvY2tldC5yZWRpcmVjdCh3aW5kb3cubG9jYXRpb24uaHJlZilcblxuICAgIGxldCBwdXNoID0gdGhpcy5wdXNoV2l0aFJlcGx5KHJlZkdlbiwgXCJsaXZlX3BhdGNoXCIsIHt1cmw6IGhyZWZ9LCByZXNwID0+IHtcbiAgICAgIHRoaXMubGl2ZVNvY2tldC5yZXF1ZXN0RE9NVXBkYXRlKCgpID0+IHtcbiAgICAgICAgaWYocmVzcC5saW5rX3JlZGlyZWN0KXtcbiAgICAgICAgICB0aGlzLmxpdmVTb2NrZXQucmVwbGFjZU1haW4oaHJlZiwgbnVsbCwgY2FsbGJhY2ssIGxpbmtSZWYpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYodGhpcy5saXZlU29ja2V0LmNvbW1pdFBlbmRpbmdMaW5rKGxpbmtSZWYpKXtcbiAgICAgICAgICAgIHRoaXMuaHJlZiA9IGhyZWZcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5hcHBseVBlbmRpbmdVcGRhdGVzKClcbiAgICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjayhsaW5rUmVmKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH0pXG5cbiAgICBpZihwdXNoKXtcbiAgICAgIHB1c2gucmVjZWl2ZShcInRpbWVvdXRcIiwgZmFsbGJhY2spXG4gICAgfSBlbHNlIHtcbiAgICAgIGZhbGxiYWNrKClcbiAgICB9XG4gIH1cblxuICBmb3Jtc0ZvclJlY292ZXJ5KGh0bWwpe1xuICAgIGlmKHRoaXMuam9pbkNvdW50ID09PSAwKXsgcmV0dXJuIFtdIH1cblxuICAgIGxldCBwaHhDaGFuZ2UgPSB0aGlzLmJpbmRpbmcoXCJjaGFuZ2VcIilcbiAgICBsZXQgdGVtcGxhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGVtcGxhdGVcIilcbiAgICB0ZW1wbGF0ZS5pbm5lckhUTUwgPSBodG1sXG5cbiAgICByZXR1cm4gKFxuICAgICAgRE9NLmFsbCh0aGlzLmVsLCBgZm9ybVske3BoeENoYW5nZX1dYClcbiAgICAgICAgLmZpbHRlcihmb3JtID0+IGZvcm0uaWQgJiYgdGhpcy5vd25zRWxlbWVudChmb3JtKSlcbiAgICAgICAgLmZpbHRlcihmb3JtID0+IGZvcm0uZWxlbWVudHMubGVuZ3RoID4gMClcbiAgICAgICAgLmZpbHRlcihmb3JtID0+IGZvcm0uZ2V0QXR0cmlidXRlKHRoaXMuYmluZGluZyhQSFhfQVVUT19SRUNPVkVSKSkgIT09IFwiaWdub3JlXCIpXG4gICAgICAgIC5tYXAoZm9ybSA9PiB7XG4gICAgICAgICAgbGV0IG5ld0Zvcm0gPSB0ZW1wbGF0ZS5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoYGZvcm1baWQ9XCIke2Zvcm0uaWR9XCJdWyR7cGh4Q2hhbmdlfT1cIiR7Zm9ybS5nZXRBdHRyaWJ1dGUocGh4Q2hhbmdlKX1cIl1gKVxuICAgICAgICAgIGlmKG5ld0Zvcm0pe1xuICAgICAgICAgICAgcmV0dXJuIFtmb3JtLCBuZXdGb3JtLCB0aGlzLnRhcmdldENvbXBvbmVudElEKG5ld0Zvcm0pXVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gW2Zvcm0sIG51bGwsIG51bGxdXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICAuZmlsdGVyKChbZm9ybSwgbmV3Rm9ybSwgbmV3Q2lkXSkgPT4gbmV3Rm9ybSlcbiAgICApXG4gIH1cblxuICBtYXliZVB1c2hDb21wb25lbnRzRGVzdHJveWVkKGRlc3Ryb3llZENJRHMpe1xuICAgIGxldCB3aWxsRGVzdHJveUNJRHMgPSBkZXN0cm95ZWRDSURzLmZpbHRlcihjaWQgPT4ge1xuICAgICAgcmV0dXJuIERPTS5maW5kQ29tcG9uZW50Tm9kZUxpc3QodGhpcy5lbCwgY2lkKS5sZW5ndGggPT09IDBcbiAgICB9KVxuICAgIGlmKHdpbGxEZXN0cm95Q0lEcy5sZW5ndGggPiAwKXtcbiAgICAgIHRoaXMucHJ1bmluZ0NJRHMucHVzaCguLi53aWxsRGVzdHJveUNJRHMpXG5cbiAgICAgIHRoaXMucHVzaFdpdGhSZXBseShudWxsLCBcImNpZHNfd2lsbF9kZXN0cm95XCIsIHtjaWRzOiB3aWxsRGVzdHJveUNJRHN9LCAoKSA9PiB7XG4gICAgICAgIC8vIFRoZSBjaWRzIGFyZSBlaXRoZXIgYmFjayBvbiB0aGUgcGFnZSBvciB0aGV5IHdpbGwgYmUgZnVsbHkgcmVtb3ZlZCxcbiAgICAgICAgLy8gc28gd2UgY2FuIHJlbW92ZSB0aGVtIGZyb20gdGhlIHBydW5pbmdDSURzLlxuICAgICAgICB0aGlzLnBydW5pbmdDSURzID0gdGhpcy5wcnVuaW5nQ0lEcy5maWx0ZXIoY2lkID0+IHdpbGxEZXN0cm95Q0lEcy5pbmRleE9mKGNpZCkgIT09IC0xKVxuXG4gICAgICAgIC8vIFNlZSBpZiBhbnkgb2YgdGhlIGNpZHMgd2Ugd2FudGVkIHRvIGRlc3Ryb3kgd2VyZSBhZGRlZCBiYWNrLFxuICAgICAgICAvLyBpZiB0aGV5IHdlcmUgYWRkZWQgYmFjaywgd2UgZG9uJ3QgYWN0dWFsbHkgZGVzdHJveSB0aGVtLlxuICAgICAgICBsZXQgY29tcGxldGVseURlc3Ryb3lDSURzID0gd2lsbERlc3Ryb3lDSURzLmZpbHRlcihjaWQgPT4ge1xuICAgICAgICAgIHJldHVybiBET00uZmluZENvbXBvbmVudE5vZGVMaXN0KHRoaXMuZWwsIGNpZCkubGVuZ3RoID09PSAwXG4gICAgICAgIH0pXG5cbiAgICAgICAgaWYoY29tcGxldGVseURlc3Ryb3lDSURzLmxlbmd0aCA+IDApe1xuICAgICAgICAgIHRoaXMucHVzaFdpdGhSZXBseShudWxsLCBcImNpZHNfZGVzdHJveWVkXCIsIHtjaWRzOiBjb21wbGV0ZWx5RGVzdHJveUNJRHN9LCAocmVzcCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlZC5wcnVuZUNJRHMocmVzcC5jaWRzKVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgb3duc0VsZW1lbnQoZWwpe1xuICAgIGxldCBwYXJlbnRWaWV3RWwgPSBlbC5jbG9zZXN0KFBIWF9WSUVXX1NFTEVDVE9SKVxuICAgIHJldHVybiBlbC5nZXRBdHRyaWJ1dGUoUEhYX1BBUkVOVF9JRCkgPT09IHRoaXMuaWQgfHxcbiAgICAgIChwYXJlbnRWaWV3RWwgJiYgcGFyZW50Vmlld0VsLmlkID09PSB0aGlzLmlkKSB8fFxuICAgICAgKCFwYXJlbnRWaWV3RWwgJiYgdGhpcy5pc0RlYWQpXG4gIH1cblxuICBzdWJtaXRGb3JtKGZvcm0sIHRhcmdldEN0eCwgcGh4RXZlbnQsIHN1Ym1pdHRlciwgb3B0cyA9IHt9KXtcbiAgICBET00ucHV0UHJpdmF0ZShmb3JtLCBQSFhfSEFTX1NVQk1JVFRFRCwgdHJ1ZSlcbiAgICBsZXQgcGh4RmVlZGJhY2sgPSB0aGlzLmxpdmVTb2NrZXQuYmluZGluZyhQSFhfRkVFREJBQ0tfRk9SKVxuICAgIGxldCBpbnB1dHMgPSBBcnJheS5mcm9tKGZvcm0uZWxlbWVudHMpXG4gICAgaW5wdXRzLmZvckVhY2goaW5wdXQgPT4gRE9NLnB1dFByaXZhdGUoaW5wdXQsIFBIWF9IQVNfU1VCTUlUVEVELCB0cnVlKSlcbiAgICB0aGlzLmxpdmVTb2NrZXQuYmx1ckFjdGl2ZUVsZW1lbnQodGhpcylcbiAgICB0aGlzLnB1c2hGb3JtU3VibWl0KGZvcm0sIHRhcmdldEN0eCwgcGh4RXZlbnQsIHN1Ym1pdHRlciwgb3B0cywgKCkgPT4ge1xuICAgICAgaW5wdXRzLmZvckVhY2goaW5wdXQgPT4gRE9NLnNob3dFcnJvcihpbnB1dCwgcGh4RmVlZGJhY2spKVxuICAgICAgdGhpcy5saXZlU29ja2V0LnJlc3RvcmVQcmV2aW91c2x5QWN0aXZlRm9jdXMoKVxuICAgIH0pXG4gIH1cblxuICBiaW5kaW5nKGtpbmQpeyByZXR1cm4gdGhpcy5saXZlU29ja2V0LmJpbmRpbmcoa2luZCkgfVxufVxuIiwgIi8qKiBJbml0aWFsaXplcyB0aGUgTGl2ZVNvY2tldFxuICpcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gZW5kUG9pbnQgLSBUaGUgc3RyaW5nIFdlYlNvY2tldCBlbmRwb2ludCwgaWUsIGBcIndzczovL2V4YW1wbGUuY29tL2xpdmVcImAsXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYFwiL2xpdmVcImAgKGluaGVyaXRlZCBob3N0ICYgcHJvdG9jb2wpXG4gKiBAcGFyYW0ge1Bob2VuaXguU29ja2V0fSBzb2NrZXQgLSB0aGUgcmVxdWlyZWQgUGhvZW5peCBTb2NrZXQgY2xhc3MgaW1wb3J0ZWQgZnJvbSBcInBob2VuaXhcIi4gRm9yIGV4YW1wbGU6XG4gKlxuICogICAgIGltcG9ydCB7U29ja2V0fSBmcm9tIFwicGhvZW5peFwiXG4gKiAgICAgaW1wb3J0IHtMaXZlU29ja2V0fSBmcm9tIFwicGhvZW5peF9saXZlX3ZpZXdcIlxuICogICAgIGxldCBsaXZlU29ja2V0ID0gbmV3IExpdmVTb2NrZXQoXCIvbGl2ZVwiLCBTb2NrZXQsIHsuLi59KVxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0c10gLSBPcHRpb25hbCBjb25maWd1cmF0aW9uLiBPdXRzaWRlIG9mIGtleXMgbGlzdGVkIGJlbG93LCBhbGxcbiAqIGNvbmZpZ3VyYXRpb24gaXMgcGFzc2VkIGRpcmVjdGx5IHRvIHRoZSBQaG9lbml4IFNvY2tldCBjb25zdHJ1Y3Rvci5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0cy5kZWZhdWx0c10gLSBUaGUgb3B0aW9uYWwgZGVmYXVsdHMgdG8gdXNlIGZvciB2YXJpb3VzIGJpbmRpbmdzLFxuICogc3VjaCBhcyBgcGh4LWRlYm91bmNlYC4gU3VwcG9ydHMgdGhlIGZvbGxvd2luZyBrZXlzOlxuICpcbiAqICAgLSBkZWJvdW5jZSAtIHRoZSBtaWxsaXNlY29uZCBwaHgtZGVib3VuY2UgdGltZS4gRGVmYXVsdHMgMzAwXG4gKiAgIC0gdGhyb3R0bGUgLSB0aGUgbWlsbGlzZWNvbmQgcGh4LXRocm90dGxlIHRpbWUuIERlZmF1bHRzIDMwMFxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtvcHRzLnBhcmFtc10gLSBUaGUgb3B0aW9uYWwgZnVuY3Rpb24gZm9yIHBhc3NpbmcgY29ubmVjdCBwYXJhbXMuXG4gKiBUaGUgZnVuY3Rpb24gcmVjZWl2ZXMgdGhlIGVsZW1lbnQgYXNzb2NpYXRlZCB3aXRoIGEgZ2l2ZW4gTGl2ZVZpZXcuIEZvciBleGFtcGxlOlxuICpcbiAqICAgICAoZWwpID0+IHt2aWV3OiBlbC5nZXRBdHRyaWJ1dGUoXCJkYXRhLW15LXZpZXctbmFtZVwiLCB0b2tlbjogd2luZG93Lm15VG9rZW59XG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmJpbmRpbmdQcmVmaXhdIC0gVGhlIG9wdGlvbmFsIHByZWZpeCB0byB1c2UgZm9yIGFsbCBwaHggRE9NIGFubm90YXRpb25zLlxuICogRGVmYXVsdHMgdG8gXCJwaHgtXCIuXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdHMuaG9va3NdIC0gVGhlIG9wdGlvbmFsIG9iamVjdCBmb3IgcmVmZXJlbmNpbmcgTGl2ZVZpZXcgaG9vayBjYWxsYmFja3MuXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdHMudXBsb2FkZXJzXSAtIFRoZSBvcHRpb25hbCBvYmplY3QgZm9yIHJlZmVyZW5jaW5nIExpdmVWaWV3IHVwbG9hZGVyIGNhbGxiYWNrcy5cbiAqIEBwYXJhbSB7aW50ZWdlcn0gW29wdHMubG9hZGVyVGltZW91dF0gLSBUaGUgb3B0aW9uYWwgZGVsYXkgaW4gbWlsbGlzZWNvbmRzIHRvIHdhaXQgYmVmb3JlIGFwcGx5XG4gKiBsb2FkaW5nIHN0YXRlcy5cbiAqIEBwYXJhbSB7aW50ZWdlcn0gW29wdHMubWF4UmVsb2Fkc10gLSBUaGUgbWF4aW11bSByZWxvYWRzIGJlZm9yZSBlbnRlcmluZyBmYWlsc2FmZSBtb2RlLlxuICogQHBhcmFtIHtpbnRlZ2VyfSBbb3B0cy5yZWxvYWRKaXR0ZXJNaW5dIC0gVGhlIG1pbmltdW0gdGltZSBiZXR3ZWVuIG5vcm1hbCByZWxvYWQgYXR0ZW1wdHMuXG4gKiBAcGFyYW0ge2ludGVnZXJ9IFtvcHRzLnJlbG9hZEppdHRlck1heF0gLSBUaGUgbWF4aW11bSB0aW1lIGJldHdlZW4gbm9ybWFsIHJlbG9hZCBhdHRlbXB0cy5cbiAqIEBwYXJhbSB7aW50ZWdlcn0gW29wdHMuZmFpbHNhZmVKaXR0ZXJdIC0gVGhlIHRpbWUgYmV0d2VlbiByZWxvYWQgYXR0ZW1wdHMgaW4gZmFpbHNhZmUgbW9kZS5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtvcHRzLnZpZXdMb2dnZXJdIC0gVGhlIG9wdGlvbmFsIGZ1bmN0aW9uIHRvIGxvZyBkZWJ1ZyBpbmZvcm1hdGlvbi4gRm9yIGV4YW1wbGU6XG4gKlxuICogICAgICh2aWV3LCBraW5kLCBtc2csIG9iaikgPT4gY29uc29sZS5sb2coYCR7dmlldy5pZH0gJHtraW5kfTogJHttc2d9IC0gYCwgb2JqKVxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0cy5tZXRhZGF0YV0gLSBUaGUgb3B0aW9uYWwgb2JqZWN0IG1hcHBpbmcgZXZlbnQgbmFtZXMgdG8gZnVuY3Rpb25zIGZvclxuICogcG9wdWxhdGluZyBldmVudCBtZXRhZGF0YS4gRm9yIGV4YW1wbGU6XG4gKlxuICogICAgIG1ldGFkYXRhOiB7XG4gKiAgICAgICBjbGljazogKGUsIGVsKSA9PiB7XG4gKiAgICAgICAgIHJldHVybiB7XG4gKiAgICAgICAgICAgY3RybEtleTogZS5jdHJsS2V5LFxuICogICAgICAgICAgIG1ldGFLZXk6IGUubWV0YUtleSxcbiAqICAgICAgICAgICBkZXRhaWw6IGUuZGV0YWlsIHx8IDEsXG4gKiAgICAgICAgIH1cbiAqICAgICAgIH0sXG4gKiAgICAgICBrZXlkb3duOiAoZSwgZWwpID0+IHtcbiAqICAgICAgICAgcmV0dXJuIHtcbiAqICAgICAgICAgICBrZXk6IGUua2V5LFxuICogICAgICAgICAgIGN0cmxLZXk6IGUuY3RybEtleSxcbiAqICAgICAgICAgICBtZXRhS2V5OiBlLm1ldGFLZXksXG4gKiAgICAgICAgICAgc2hpZnRLZXk6IGUuc2hpZnRLZXlcbiAqICAgICAgICAgfVxuICogICAgICAgfVxuICogICAgIH1cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0cy5zZXNzaW9uU3RvcmFnZV0gLSBBbiBvcHRpb25hbCBTdG9yYWdlIGNvbXBhdGlibGUgb2JqZWN0XG4gKiBVc2VmdWwgd2hlbiBMaXZlVmlldyB3b24ndCBoYXZlIGFjY2VzcyB0byBgc2Vzc2lvblN0b3JhZ2VgLiAgRm9yIGV4YW1wbGUsIFRoaXMgY291bGRcbiAqIGhhcHBlbiBpZiBhIHNpdGUgbG9hZHMgYSBjcm9zcy1kb21haW4gTGl2ZVZpZXcgaW4gYW4gaWZyYW1lLiAgRXhhbXBsZSB1c2FnZTpcbiAqXG4gKiAgICAgY2xhc3MgSW5NZW1vcnlTdG9yYWdlIHtcbiAqICAgICAgIGNvbnN0cnVjdG9yKCkgeyB0aGlzLnN0b3JhZ2UgPSB7fSB9XG4gKiAgICAgICBnZXRJdGVtKGtleU5hbWUpIHsgcmV0dXJuIHRoaXMuc3RvcmFnZVtrZXlOYW1lXSB8fCBudWxsIH1cbiAqICAgICAgIHJlbW92ZUl0ZW0oa2V5TmFtZSkgeyBkZWxldGUgdGhpcy5zdG9yYWdlW2tleU5hbWVdIH1cbiAqICAgICAgIHNldEl0ZW0oa2V5TmFtZSwga2V5VmFsdWUpIHsgdGhpcy5zdG9yYWdlW2tleU5hbWVdID0ga2V5VmFsdWUgfVxuICogICAgIH1cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdHMubG9jYWxTdG9yYWdlXSAtIEFuIG9wdGlvbmFsIFN0b3JhZ2UgY29tcGF0aWJsZSBvYmplY3RcbiAqIFVzZWZ1bCBmb3Igd2hlbiBMaXZlVmlldyB3b24ndCBoYXZlIGFjY2VzcyB0byBgbG9jYWxTdG9yYWdlYC5cbiAqIFNlZSBgb3B0cy5zZXNzaW9uU3RvcmFnZWAgZm9yIGV4YW1wbGVzLlxuKi9cblxuaW1wb3J0IHtcbiAgQklORElOR19QUkVGSVgsXG4gIENPTlNFQ1VUSVZFX1JFTE9BRFMsXG4gIERFRkFVTFRTLFxuICBGQUlMU0FGRV9KSVRURVIsXG4gIExPQURFUl9USU1FT1VULFxuICBNQVhfUkVMT0FEUyxcbiAgUEhYX0RFQk9VTkNFLFxuICBQSFhfRFJPUF9UQVJHRVQsXG4gIFBIWF9IQVNfRk9DVVNFRCxcbiAgUEhYX0tFWSxcbiAgUEhYX0xJTktfU1RBVEUsXG4gIFBIWF9MSVZFX0xJTkssXG4gIFBIWF9MVl9ERUJVRyxcbiAgUEhYX0xWX0xBVEVOQ1lfU0lNLFxuICBQSFhfTFZfUFJPRklMRSxcbiAgUEhYX01BSU4sXG4gIFBIWF9QQVJFTlRfSUQsXG4gIFBIWF9WSUVXX1NFTEVDVE9SLFxuICBQSFhfUk9PVF9JRCxcbiAgUEhYX1RIUk9UVExFLFxuICBQSFhfVFJBQ0tfVVBMT0FEUyxcbiAgUEhYX1NFU1NJT04sXG4gIFBIWF9GRUVEQkFDS19GT1IsXG4gIFJFTE9BRF9KSVRURVJfTUlOLFxuICBSRUxPQURfSklUVEVSX01BWCxcbn0gZnJvbSBcIi4vY29uc3RhbnRzXCJcblxuaW1wb3J0IHtcbiAgY2xvbmUsXG4gIGNsb3Nlc3RQaHhCaW5kaW5nLFxuICBjbG9zdXJlLFxuICBkZWJ1ZyxcbiAgaXNPYmplY3QsXG4gIG1heWJlXG59IGZyb20gXCIuL3V0aWxzXCJcblxuaW1wb3J0IEJyb3dzZXIgZnJvbSBcIi4vYnJvd3NlclwiXG5pbXBvcnQgRE9NIGZyb20gXCIuL2RvbVwiXG5pbXBvcnQgSG9va3MgZnJvbSBcIi4vaG9va3NcIlxuaW1wb3J0IExpdmVVcGxvYWRlciBmcm9tIFwiLi9saXZlX3VwbG9hZGVyXCJcbmltcG9ydCBWaWV3IGZyb20gXCIuL3ZpZXdcIlxuaW1wb3J0IEpTIGZyb20gXCIuL2pzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTGl2ZVNvY2tldCB7XG4gIGNvbnN0cnVjdG9yKHVybCwgcGh4U29ja2V0LCBvcHRzID0ge30pe1xuICAgIHRoaXMudW5sb2FkZWQgPSBmYWxzZVxuICAgIGlmKCFwaHhTb2NrZXQgfHwgcGh4U29ja2V0LmNvbnN0cnVjdG9yLm5hbWUgPT09IFwiT2JqZWN0XCIpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBcbiAgICAgIGEgcGhvZW5peCBTb2NrZXQgbXVzdCBiZSBwcm92aWRlZCBhcyB0aGUgc2Vjb25kIGFyZ3VtZW50IHRvIHRoZSBMaXZlU29ja2V0IGNvbnN0cnVjdG9yLiBGb3IgZXhhbXBsZTpcblxuICAgICAgICAgIGltcG9ydCB7U29ja2V0fSBmcm9tIFwicGhvZW5peFwiXG4gICAgICAgICAgaW1wb3J0IHtMaXZlU29ja2V0fSBmcm9tIFwicGhvZW5peF9saXZlX3ZpZXdcIlxuICAgICAgICAgIGxldCBsaXZlU29ja2V0ID0gbmV3IExpdmVTb2NrZXQoXCIvbGl2ZVwiLCBTb2NrZXQsIHsuLi59KVxuICAgICAgYClcbiAgICB9XG4gICAgdGhpcy5zb2NrZXQgPSBuZXcgcGh4U29ja2V0KHVybCwgb3B0cylcbiAgICB0aGlzLmJpbmRpbmdQcmVmaXggPSBvcHRzLmJpbmRpbmdQcmVmaXggfHwgQklORElOR19QUkVGSVhcbiAgICB0aGlzLm9wdHMgPSBvcHRzXG4gICAgdGhpcy5wYXJhbXMgPSBjbG9zdXJlKG9wdHMucGFyYW1zIHx8IHt9KVxuICAgIHRoaXMudmlld0xvZ2dlciA9IG9wdHMudmlld0xvZ2dlclxuICAgIHRoaXMubWV0YWRhdGFDYWxsYmFja3MgPSBvcHRzLm1ldGFkYXRhIHx8IHt9XG4gICAgdGhpcy5kZWZhdWx0cyA9IE9iamVjdC5hc3NpZ24oY2xvbmUoREVGQVVMVFMpLCBvcHRzLmRlZmF1bHRzIHx8IHt9KVxuICAgIHRoaXMuYWN0aXZlRWxlbWVudCA9IG51bGxcbiAgICB0aGlzLnByZXZBY3RpdmUgPSBudWxsXG4gICAgdGhpcy5zaWxlbmNlZCA9IGZhbHNlXG4gICAgdGhpcy5tYWluID0gbnVsbFxuICAgIHRoaXMub3V0Z29pbmdNYWluRWwgPSBudWxsXG4gICAgdGhpcy5jbGlja1N0YXJ0ZWRBdFRhcmdldCA9IG51bGxcbiAgICB0aGlzLmxpbmtSZWYgPSAxXG4gICAgdGhpcy5yb290cyA9IHt9XG4gICAgdGhpcy5ocmVmID0gd2luZG93LmxvY2F0aW9uLmhyZWZcbiAgICB0aGlzLnBlbmRpbmdMaW5rID0gbnVsbFxuICAgIHRoaXMuY3VycmVudExvY2F0aW9uID0gY2xvbmUod2luZG93LmxvY2F0aW9uKVxuICAgIHRoaXMuaG9va3MgPSBvcHRzLmhvb2tzIHx8IHt9XG4gICAgdGhpcy51cGxvYWRlcnMgPSBvcHRzLnVwbG9hZGVycyB8fCB7fVxuICAgIHRoaXMubG9hZGVyVGltZW91dCA9IG9wdHMubG9hZGVyVGltZW91dCB8fCBMT0FERVJfVElNRU9VVFxuICAgIHRoaXMucmVsb2FkV2l0aEppdHRlclRpbWVyID0gbnVsbFxuICAgIHRoaXMubWF4UmVsb2FkcyA9IG9wdHMubWF4UmVsb2FkcyB8fCBNQVhfUkVMT0FEU1xuICAgIHRoaXMucmVsb2FkSml0dGVyTWluID0gb3B0cy5yZWxvYWRKaXR0ZXJNaW4gfHwgUkVMT0FEX0pJVFRFUl9NSU5cbiAgICB0aGlzLnJlbG9hZEppdHRlck1heCA9IG9wdHMucmVsb2FkSml0dGVyTWF4IHx8IFJFTE9BRF9KSVRURVJfTUFYXG4gICAgdGhpcy5mYWlsc2FmZUppdHRlciA9IG9wdHMuZmFpbHNhZmVKaXR0ZXIgfHwgRkFJTFNBRkVfSklUVEVSXG4gICAgdGhpcy5sb2NhbFN0b3JhZ2UgPSBvcHRzLmxvY2FsU3RvcmFnZSB8fCB3aW5kb3cubG9jYWxTdG9yYWdlXG4gICAgdGhpcy5zZXNzaW9uU3RvcmFnZSA9IG9wdHMuc2Vzc2lvblN0b3JhZ2UgfHwgd2luZG93LnNlc3Npb25TdG9yYWdlXG4gICAgdGhpcy5ib3VuZFRvcExldmVsRXZlbnRzID0gZmFsc2VcbiAgICB0aGlzLmRvbUNhbGxiYWNrcyA9IE9iamVjdC5hc3NpZ24oe29uTm9kZUFkZGVkOiBjbG9zdXJlKCksIG9uQmVmb3JlRWxVcGRhdGVkOiBjbG9zdXJlKCl9LCBvcHRzLmRvbSB8fCB7fSlcbiAgICB0aGlzLnRyYW5zaXRpb25zID0gbmV3IFRyYW5zaXRpb25TZXQoKVxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicGFnZWhpZGVcIiwgX2UgPT4ge1xuICAgICAgdGhpcy51bmxvYWRlZCA9IHRydWVcbiAgICB9KVxuICAgIHRoaXMuc29ja2V0Lm9uT3BlbigoKSA9PiB7XG4gICAgICBpZih0aGlzLmlzVW5sb2FkZWQoKSl7XG4gICAgICAgIC8vIHJlbG9hZCBwYWdlIGlmIGJlaW5nIHJlc3RvcmVkIGZyb20gYmFjay9mb3J3YXJkIGNhY2hlIGFuZCBicm93c2VyIGRvZXMgbm90IGVtaXQgXCJwYWdlc2hvd1wiXG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICAvLyBwdWJsaWNcblxuICBpc1Byb2ZpbGVFbmFibGVkKCl7IHJldHVybiB0aGlzLnNlc3Npb25TdG9yYWdlLmdldEl0ZW0oUEhYX0xWX1BST0ZJTEUpID09PSBcInRydWVcIiB9XG5cbiAgaXNEZWJ1Z0VuYWJsZWQoKXsgcmV0dXJuIHRoaXMuc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShQSFhfTFZfREVCVUcpID09PSBcInRydWVcIiB9XG5cbiAgaXNEZWJ1Z0Rpc2FibGVkKCl7IHJldHVybiB0aGlzLnNlc3Npb25TdG9yYWdlLmdldEl0ZW0oUEhYX0xWX0RFQlVHKSA9PT0gXCJmYWxzZVwiIH1cblxuICBlbmFibGVEZWJ1ZygpeyB0aGlzLnNlc3Npb25TdG9yYWdlLnNldEl0ZW0oUEhYX0xWX0RFQlVHLCBcInRydWVcIikgfVxuXG4gIGVuYWJsZVByb2ZpbGluZygpeyB0aGlzLnNlc3Npb25TdG9yYWdlLnNldEl0ZW0oUEhYX0xWX1BST0ZJTEUsIFwidHJ1ZVwiKSB9XG5cbiAgZGlzYWJsZURlYnVnKCl7IHRoaXMuc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShQSFhfTFZfREVCVUcsIFwiZmFsc2VcIikgfVxuXG4gIGRpc2FibGVQcm9maWxpbmcoKXsgdGhpcy5zZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKFBIWF9MVl9QUk9GSUxFKSB9XG5cbiAgZW5hYmxlTGF0ZW5jeVNpbSh1cHBlckJvdW5kTXMpe1xuICAgIHRoaXMuZW5hYmxlRGVidWcoKVxuICAgIGNvbnNvbGUubG9nKFwibGF0ZW5jeSBzaW11bGF0b3IgZW5hYmxlZCBmb3IgdGhlIGR1cmF0aW9uIG9mIHRoaXMgYnJvd3NlciBzZXNzaW9uLiBDYWxsIGRpc2FibGVMYXRlbmN5U2ltKCkgdG8gZGlzYWJsZVwiKVxuICAgIHRoaXMuc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShQSFhfTFZfTEFURU5DWV9TSU0sIHVwcGVyQm91bmRNcylcbiAgfVxuXG4gIGRpc2FibGVMYXRlbmN5U2ltKCl7IHRoaXMuc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbShQSFhfTFZfTEFURU5DWV9TSU0pIH1cblxuICBnZXRMYXRlbmN5U2ltKCl7XG4gICAgbGV0IHN0ciA9IHRoaXMuc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShQSFhfTFZfTEFURU5DWV9TSU0pXG4gICAgcmV0dXJuIHN0ciA/IHBhcnNlSW50KHN0cikgOiBudWxsXG4gIH1cblxuICBnZXRTb2NrZXQoKXsgcmV0dXJuIHRoaXMuc29ja2V0IH1cblxuICBjb25uZWN0KCl7XG4gICAgLy8gZW5hYmxlIGRlYnVnIGJ5IGRlZmF1bHQgaWYgb24gbG9jYWxob3N0IGFuZCBub3QgZXhwbGljaXRseSBkaXNhYmxlZFxuICAgIGlmKHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZSA9PT0gXCJsb2NhbGhvc3RcIiAmJiAhdGhpcy5pc0RlYnVnRGlzYWJsZWQoKSl7IHRoaXMuZW5hYmxlRGVidWcoKSB9XG4gICAgbGV0IGRvQ29ubmVjdCA9ICgpID0+IHtcbiAgICAgIGlmKHRoaXMuam9pblJvb3RWaWV3cygpKXtcbiAgICAgICAgdGhpcy5iaW5kVG9wTGV2ZWxFdmVudHMoKVxuICAgICAgICB0aGlzLnNvY2tldC5jb25uZWN0KClcbiAgICAgIH0gZWxzZSBpZih0aGlzLm1haW4pe1xuICAgICAgICB0aGlzLnNvY2tldC5jb25uZWN0KClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuYmluZFRvcExldmVsRXZlbnRzKHtkZWFkOiB0cnVlfSlcbiAgICAgIH1cbiAgICAgIHRoaXMuam9pbkRlYWRWaWV3KClcbiAgICB9XG4gICAgaWYoW1wiY29tcGxldGVcIiwgXCJsb2FkZWRcIiwgXCJpbnRlcmFjdGl2ZVwiXS5pbmRleE9mKGRvY3VtZW50LnJlYWR5U3RhdGUpID49IDApe1xuICAgICAgZG9Db25uZWN0KClcbiAgICB9IGVsc2Uge1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgKCkgPT4gZG9Db25uZWN0KCkpXG4gICAgfVxuICB9XG5cbiAgZGlzY29ubmVjdChjYWxsYmFjayl7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMucmVsb2FkV2l0aEppdHRlclRpbWVyKVxuICAgIHRoaXMuc29ja2V0LmRpc2Nvbm5lY3QoY2FsbGJhY2spXG4gIH1cblxuICByZXBsYWNlVHJhbnNwb3J0KHRyYW5zcG9ydCl7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMucmVsb2FkV2l0aEppdHRlclRpbWVyKVxuICAgIHRoaXMuc29ja2V0LnJlcGxhY2VUcmFuc3BvcnQodHJhbnNwb3J0KVxuICAgIHRoaXMuY29ubmVjdCgpXG4gIH1cblxuICBleGVjSlMoZWwsIGVuY29kZWRKUywgZXZlbnRUeXBlID0gbnVsbCl7XG4gICAgdGhpcy5vd25lcihlbCwgdmlldyA9PiBKUy5leGVjKGV2ZW50VHlwZSwgZW5jb2RlZEpTLCB2aWV3LCBlbCkpXG4gIH1cblxuICAvLyBwcml2YXRlXG5cbiAgdW5sb2FkKCl7XG4gICAgaWYodGhpcy51bmxvYWRlZCl7IHJldHVybiB9XG4gICAgaWYodGhpcy5tYWluICYmIHRoaXMuaXNDb25uZWN0ZWQoKSl7IHRoaXMubG9nKHRoaXMubWFpbiwgXCJzb2NrZXRcIiwgKCkgPT4gW1wiZGlzY29ubmVjdCBmb3IgcGFnZSBuYXZcIl0pIH1cbiAgICB0aGlzLnVubG9hZGVkID0gdHJ1ZVxuICAgIHRoaXMuZGVzdHJveUFsbFZpZXdzKClcbiAgICB0aGlzLmRpc2Nvbm5lY3QoKVxuICB9XG5cbiAgdHJpZ2dlckRPTShraW5kLCBhcmdzKXsgdGhpcy5kb21DYWxsYmFja3Nba2luZF0oLi4uYXJncykgfVxuXG4gIHRpbWUobmFtZSwgZnVuYyl7XG4gICAgaWYoIXRoaXMuaXNQcm9maWxlRW5hYmxlZCgpIHx8ICFjb25zb2xlLnRpbWUpeyByZXR1cm4gZnVuYygpIH1cbiAgICBjb25zb2xlLnRpbWUobmFtZSlcbiAgICBsZXQgcmVzdWx0ID0gZnVuYygpXG4gICAgY29uc29sZS50aW1lRW5kKG5hbWUpXG4gICAgcmV0dXJuIHJlc3VsdFxuICB9XG5cbiAgbG9nKHZpZXcsIGtpbmQsIG1zZ0NhbGxiYWNrKXtcbiAgICBpZih0aGlzLnZpZXdMb2dnZXIpe1xuICAgICAgbGV0IFttc2csIG9ial0gPSBtc2dDYWxsYmFjaygpXG4gICAgICB0aGlzLnZpZXdMb2dnZXIodmlldywga2luZCwgbXNnLCBvYmopXG4gICAgfSBlbHNlIGlmKHRoaXMuaXNEZWJ1Z0VuYWJsZWQoKSl7XG4gICAgICBsZXQgW21zZywgb2JqXSA9IG1zZ0NhbGxiYWNrKClcbiAgICAgIGRlYnVnKHZpZXcsIGtpbmQsIG1zZywgb2JqKVxuICAgIH1cbiAgfVxuXG4gIHJlcXVlc3RET01VcGRhdGUoY2FsbGJhY2spe1xuICAgIHRoaXMudHJhbnNpdGlvbnMuYWZ0ZXIoY2FsbGJhY2spXG4gIH1cblxuICB0cmFuc2l0aW9uKHRpbWUsIG9uU3RhcnQsIG9uRG9uZSA9IGZ1bmN0aW9uKCl7fSl7XG4gICAgdGhpcy50cmFuc2l0aW9ucy5hZGRUcmFuc2l0aW9uKHRpbWUsIG9uU3RhcnQsIG9uRG9uZSlcbiAgfVxuXG4gIG9uQ2hhbm5lbChjaGFubmVsLCBldmVudCwgY2Ipe1xuICAgIGNoYW5uZWwub24oZXZlbnQsIGRhdGEgPT4ge1xuICAgICAgbGV0IGxhdGVuY3kgPSB0aGlzLmdldExhdGVuY3lTaW0oKVxuICAgICAgaWYoIWxhdGVuY3kpe1xuICAgICAgICBjYihkYXRhKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiBjYihkYXRhKSwgbGF0ZW5jeSlcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgd3JhcFB1c2godmlldywgb3B0cywgcHVzaCl7XG4gICAgbGV0IGxhdGVuY3kgPSB0aGlzLmdldExhdGVuY3lTaW0oKVxuICAgIGxldCBvbGRKb2luQ291bnQgPSB2aWV3LmpvaW5Db3VudFxuICAgIGlmKCFsYXRlbmN5KXtcbiAgICAgIGlmKHRoaXMuaXNDb25uZWN0ZWQoKSAmJiBvcHRzLnRpbWVvdXQpe1xuICAgICAgICByZXR1cm4gcHVzaCgpLnJlY2VpdmUoXCJ0aW1lb3V0XCIsICgpID0+IHtcbiAgICAgICAgICBpZih2aWV3LmpvaW5Db3VudCA9PT0gb2xkSm9pbkNvdW50ICYmICF2aWV3LmlzRGVzdHJveWVkKCkpe1xuICAgICAgICAgICAgdGhpcy5yZWxvYWRXaXRoSml0dGVyKHZpZXcsICgpID0+IHtcbiAgICAgICAgICAgICAgdGhpcy5sb2codmlldywgXCJ0aW1lb3V0XCIsICgpID0+IFtcInJlY2VpdmVkIHRpbWVvdXQgd2hpbGUgY29tbXVuaWNhdGluZyB3aXRoIHNlcnZlci4gRmFsbGluZyBiYWNrIHRvIGhhcmQgcmVmcmVzaCBmb3IgcmVjb3ZlcnlcIl0pXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBwdXNoKClcbiAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgZmFrZVB1c2ggPSB7XG4gICAgICByZWNlaXZlczogW10sXG4gICAgICByZWNlaXZlKGtpbmQsIGNiKXsgdGhpcy5yZWNlaXZlcy5wdXNoKFtraW5kLCBjYl0pIH1cbiAgICB9XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBpZih2aWV3LmlzRGVzdHJveWVkKCkpeyByZXR1cm4gfVxuICAgICAgZmFrZVB1c2gucmVjZWl2ZXMucmVkdWNlKChhY2MsIFtraW5kLCBjYl0pID0+IGFjYy5yZWNlaXZlKGtpbmQsIGNiKSwgcHVzaCgpKVxuICAgIH0sIGxhdGVuY3kpXG4gICAgcmV0dXJuIGZha2VQdXNoXG4gIH1cblxuICByZWxvYWRXaXRoSml0dGVyKHZpZXcsIGxvZyl7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMucmVsb2FkV2l0aEppdHRlclRpbWVyKVxuICAgIHRoaXMuZGlzY29ubmVjdCgpXG4gICAgbGV0IG1pbk1zID0gdGhpcy5yZWxvYWRKaXR0ZXJNaW5cbiAgICBsZXQgbWF4TXMgPSB0aGlzLnJlbG9hZEppdHRlck1heFxuICAgIGxldCBhZnRlck1zID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heE1zIC0gbWluTXMgKyAxKSkgKyBtaW5Nc1xuICAgIGxldCB0cmllcyA9IEJyb3dzZXIudXBkYXRlTG9jYWwodGhpcy5sb2NhbFN0b3JhZ2UsIHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSwgQ09OU0VDVVRJVkVfUkVMT0FEUywgMCwgY291bnQgPT4gY291bnQgKyAxKVxuICAgIGlmKHRyaWVzID4gdGhpcy5tYXhSZWxvYWRzKXtcbiAgICAgIGFmdGVyTXMgPSB0aGlzLmZhaWxzYWZlSml0dGVyXG4gICAgfVxuICAgIHRoaXMucmVsb2FkV2l0aEppdHRlclRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAvLyBpZiB2aWV3IGhhcyByZWNvdmVyZWQsIHN1Y2ggYXMgdHJhbnNwb3J0IHJlcGxhY2VkLCB0aGVuIGNhbmNlbFxuICAgICAgaWYodmlldy5pc0Rlc3Ryb3llZCgpIHx8IHZpZXcuaXNDb25uZWN0ZWQoKSl7IHJldHVybiB9XG4gICAgICB2aWV3LmRlc3Ryb3koKVxuICAgICAgbG9nID8gbG9nKCkgOiB0aGlzLmxvZyh2aWV3LCBcImpvaW5cIiwgKCkgPT4gW2BlbmNvdW50ZXJlZCAke3RyaWVzfSBjb25zZWN1dGl2ZSByZWxvYWRzYF0pXG4gICAgICBpZih0cmllcyA+IHRoaXMubWF4UmVsb2Fkcyl7XG4gICAgICAgIHRoaXMubG9nKHZpZXcsIFwiam9pblwiLCAoKSA9PiBbYGV4Y2VlZGVkICR7dGhpcy5tYXhSZWxvYWRzfSBjb25zZWN1dGl2ZSByZWxvYWRzLiBFbnRlcmluZyBmYWlsc2FmZSBtb2RlYF0pXG4gICAgICB9XG4gICAgICBpZih0aGlzLmhhc1BlbmRpbmdMaW5rKCkpe1xuICAgICAgICB3aW5kb3cubG9jYXRpb24gPSB0aGlzLnBlbmRpbmdMaW5rXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKClcbiAgICAgIH1cbiAgICB9LCBhZnRlck1zKVxuICB9XG5cbiAgZ2V0SG9va0NhbGxiYWNrcyhuYW1lKXtcbiAgICByZXR1cm4gbmFtZSAmJiBuYW1lLnN0YXJ0c1dpdGgoXCJQaG9lbml4LlwiKSA/IEhvb2tzW25hbWUuc3BsaXQoXCIuXCIpWzFdXSA6IHRoaXMuaG9va3NbbmFtZV1cbiAgfVxuXG4gIGlzVW5sb2FkZWQoKXsgcmV0dXJuIHRoaXMudW5sb2FkZWQgfVxuXG4gIGlzQ29ubmVjdGVkKCl7IHJldHVybiB0aGlzLnNvY2tldC5pc0Nvbm5lY3RlZCgpIH1cblxuICBnZXRCaW5kaW5nUHJlZml4KCl7IHJldHVybiB0aGlzLmJpbmRpbmdQcmVmaXggfVxuXG4gIGJpbmRpbmcoa2luZCl7IHJldHVybiBgJHt0aGlzLmdldEJpbmRpbmdQcmVmaXgoKX0ke2tpbmR9YCB9XG5cbiAgY2hhbm5lbCh0b3BpYywgcGFyYW1zKXsgcmV0dXJuIHRoaXMuc29ja2V0LmNoYW5uZWwodG9waWMsIHBhcmFtcykgfVxuXG4gIGpvaW5EZWFkVmlldygpe1xuICAgIGxldCBib2R5ID0gZG9jdW1lbnQuYm9keVxuICAgIGlmKGJvZHkgJiYgIXRoaXMuaXNQaHhWaWV3KGJvZHkpICYmICF0aGlzLmlzUGh4Vmlldyhkb2N1bWVudC5maXJzdEVsZW1lbnRDaGlsZCkpe1xuICAgICAgbGV0IHZpZXcgPSB0aGlzLm5ld1Jvb3RWaWV3KGJvZHkpXG4gICAgICB2aWV3LnNldEhyZWYodGhpcy5nZXRIcmVmKCkpXG4gICAgICB2aWV3LmpvaW5EZWFkKClcbiAgICAgIGlmKCF0aGlzLm1haW4peyB0aGlzLm1haW4gPSB2aWV3IH1cbiAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gdmlldy5leGVjTmV3TW91bnRlZCgpKVxuICAgIH1cbiAgfVxuXG4gIGpvaW5Sb290Vmlld3MoKXtcbiAgICBsZXQgcm9vdHNGb3VuZCA9IGZhbHNlXG4gICAgRE9NLmFsbChkb2N1bWVudCwgYCR7UEhYX1ZJRVdfU0VMRUNUT1J9Om5vdChbJHtQSFhfUEFSRU5UX0lEfV0pYCwgcm9vdEVsID0+IHtcbiAgICAgIGlmKCF0aGlzLmdldFJvb3RCeUlkKHJvb3RFbC5pZCkpe1xuICAgICAgICBsZXQgdmlldyA9IHRoaXMubmV3Um9vdFZpZXcocm9vdEVsKVxuICAgICAgICB2aWV3LnNldEhyZWYodGhpcy5nZXRIcmVmKCkpXG4gICAgICAgIHZpZXcuam9pbigpXG4gICAgICAgIGlmKHJvb3RFbC5oYXNBdHRyaWJ1dGUoUEhYX01BSU4pKXsgdGhpcy5tYWluID0gdmlldyB9XG4gICAgICB9XG4gICAgICByb290c0ZvdW5kID0gdHJ1ZVxuICAgIH0pXG4gICAgcmV0dXJuIHJvb3RzRm91bmRcbiAgfVxuXG4gIHJlZGlyZWN0KHRvLCBmbGFzaCl7XG4gICAgdGhpcy51bmxvYWQoKVxuICAgIEJyb3dzZXIucmVkaXJlY3QodG8sIGZsYXNoKVxuICB9XG5cbiAgcmVwbGFjZU1haW4oaHJlZiwgZmxhc2gsIGNhbGxiYWNrID0gbnVsbCwgbGlua1JlZiA9IHRoaXMuc2V0UGVuZGluZ0xpbmsoaHJlZikpe1xuICAgIGxldCBsaXZlUmVmZXJlciA9IHRoaXMuY3VycmVudExvY2F0aW9uLmhyZWZcbiAgICB0aGlzLm91dGdvaW5nTWFpbkVsID0gdGhpcy5vdXRnb2luZ01haW5FbCB8fCB0aGlzLm1haW4uZWxcbiAgICBsZXQgbmV3TWFpbkVsID0gRE9NLmNsb25lTm9kZSh0aGlzLm91dGdvaW5nTWFpbkVsLCBcIlwiKVxuICAgIHRoaXMubWFpbi5zaG93TG9hZGVyKHRoaXMubG9hZGVyVGltZW91dClcbiAgICB0aGlzLm1haW4uZGVzdHJveSgpXG5cbiAgICB0aGlzLm1haW4gPSB0aGlzLm5ld1Jvb3RWaWV3KG5ld01haW5FbCwgZmxhc2gsIGxpdmVSZWZlcmVyKVxuICAgIHRoaXMubWFpbi5zZXRSZWRpcmVjdChocmVmKVxuICAgIHRoaXMudHJhbnNpdGlvblJlbW92ZXMoKVxuICAgIHRoaXMubWFpbi5qb2luKChqb2luQ291bnQsIG9uRG9uZSkgPT4ge1xuICAgICAgaWYoam9pbkNvdW50ID09PSAxICYmIHRoaXMuY29tbWl0UGVuZGluZ0xpbmsobGlua1JlZikpe1xuICAgICAgICB0aGlzLnJlcXVlc3RET01VcGRhdGUoKCkgPT4ge1xuICAgICAgICAgIERPTS5maW5kUGh4U3RpY2t5KGRvY3VtZW50KS5mb3JFYWNoKGVsID0+IG5ld01haW5FbC5hcHBlbmRDaGlsZChlbCkpXG4gICAgICAgICAgdGhpcy5vdXRnb2luZ01haW5FbC5yZXBsYWNlV2l0aChuZXdNYWluRWwpXG4gICAgICAgICAgdGhpcy5vdXRnb2luZ01haW5FbCA9IG51bGxcbiAgICAgICAgICBjYWxsYmFjayAmJiByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoY2FsbGJhY2spXG4gICAgICAgICAgb25Eb25lKClcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgdHJhbnNpdGlvblJlbW92ZXMoZWxlbWVudHMpe1xuICAgIGxldCByZW1vdmVBdHRyID0gdGhpcy5iaW5kaW5nKFwicmVtb3ZlXCIpXG4gICAgZWxlbWVudHMgPSBlbGVtZW50cyB8fCBET00uYWxsKGRvY3VtZW50LCBgWyR7cmVtb3ZlQXR0cn1dYClcbiAgICBlbGVtZW50cy5mb3JFYWNoKGVsID0+IHtcbiAgICAgIGlmKGRvY3VtZW50LmJvZHkuY29udGFpbnMoZWwpKXsgLy8gc2tpcCBjaGlsZHJlbiBhbHJlYWR5IHJlbW92ZWRcbiAgICAgICAgdGhpcy5leGVjSlMoZWwsIGVsLmdldEF0dHJpYnV0ZShyZW1vdmVBdHRyKSwgXCJyZW1vdmVcIilcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgaXNQaHhWaWV3KGVsKXsgcmV0dXJuIGVsLmdldEF0dHJpYnV0ZSAmJiBlbC5nZXRBdHRyaWJ1dGUoUEhYX1NFU1NJT04pICE9PSBudWxsIH1cblxuICBuZXdSb290VmlldyhlbCwgZmxhc2gsIGxpdmVSZWZlcmVyKXtcbiAgICBsZXQgdmlldyA9IG5ldyBWaWV3KGVsLCB0aGlzLCBudWxsLCBmbGFzaCwgbGl2ZVJlZmVyZXIpXG4gICAgdGhpcy5yb290c1t2aWV3LmlkXSA9IHZpZXdcbiAgICByZXR1cm4gdmlld1xuICB9XG5cbiAgb3duZXIoY2hpbGRFbCwgY2FsbGJhY2spe1xuICAgIGxldCB2aWV3ID0gbWF5YmUoY2hpbGRFbC5jbG9zZXN0KFBIWF9WSUVXX1NFTEVDVE9SKSwgZWwgPT4gdGhpcy5nZXRWaWV3QnlFbChlbCkpIHx8IHRoaXMubWFpblxuICAgIGlmKHZpZXcpeyBjYWxsYmFjayh2aWV3KSB9XG4gIH1cblxuICB3aXRoaW5Pd25lcnMoY2hpbGRFbCwgY2FsbGJhY2spe1xuICAgIHRoaXMub3duZXIoY2hpbGRFbCwgdmlldyA9PiBjYWxsYmFjayh2aWV3LCBjaGlsZEVsKSlcbiAgfVxuXG4gIGdldFZpZXdCeUVsKGVsKXtcbiAgICBsZXQgcm9vdElkID0gZWwuZ2V0QXR0cmlidXRlKFBIWF9ST09UX0lEKVxuICAgIHJldHVybiBtYXliZSh0aGlzLmdldFJvb3RCeUlkKHJvb3RJZCksIHJvb3QgPT4gcm9vdC5nZXREZXNjZW5kZW50QnlFbChlbCkpXG4gIH1cblxuICBnZXRSb290QnlJZChpZCl7IHJldHVybiB0aGlzLnJvb3RzW2lkXSB9XG5cbiAgZGVzdHJveUFsbFZpZXdzKCl7XG4gICAgZm9yKGxldCBpZCBpbiB0aGlzLnJvb3RzKXtcbiAgICAgIHRoaXMucm9vdHNbaWRdLmRlc3Ryb3koKVxuICAgICAgZGVsZXRlIHRoaXMucm9vdHNbaWRdXG4gICAgfVxuICAgIHRoaXMubWFpbiA9IG51bGxcbiAgfVxuXG4gIGRlc3Ryb3lWaWV3QnlFbChlbCl7XG4gICAgbGV0IHJvb3QgPSB0aGlzLmdldFJvb3RCeUlkKGVsLmdldEF0dHJpYnV0ZShQSFhfUk9PVF9JRCkpXG4gICAgaWYocm9vdCAmJiByb290LmlkID09PSBlbC5pZCl7XG4gICAgICByb290LmRlc3Ryb3koKVxuICAgICAgZGVsZXRlIHRoaXMucm9vdHNbcm9vdC5pZF1cbiAgICB9IGVsc2UgaWYocm9vdCl7XG4gICAgICByb290LmRlc3Ryb3lEZXNjZW5kZW50KGVsLmlkKVxuICAgIH1cbiAgfVxuXG4gIHNldEFjdGl2ZUVsZW1lbnQodGFyZ2V0KXtcbiAgICBpZih0aGlzLmFjdGl2ZUVsZW1lbnQgPT09IHRhcmdldCl7IHJldHVybiB9XG4gICAgdGhpcy5hY3RpdmVFbGVtZW50ID0gdGFyZ2V0XG4gICAgbGV0IGNhbmNlbCA9ICgpID0+IHtcbiAgICAgIGlmKHRhcmdldCA9PT0gdGhpcy5hY3RpdmVFbGVtZW50KXsgdGhpcy5hY3RpdmVFbGVtZW50ID0gbnVsbCB9XG4gICAgICB0YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgdGhpcylcbiAgICAgIHRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIiwgdGhpcylcbiAgICB9XG4gICAgdGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIGNhbmNlbClcbiAgICB0YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsIGNhbmNlbClcbiAgfVxuXG4gIGdldEFjdGl2ZUVsZW1lbnQoKXtcbiAgICBpZihkb2N1bWVudC5hY3RpdmVFbGVtZW50ID09PSBkb2N1bWVudC5ib2R5KXtcbiAgICAgIHJldHVybiB0aGlzLmFjdGl2ZUVsZW1lbnQgfHwgZG9jdW1lbnQuYWN0aXZlRWxlbWVudFxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBkb2N1bWVudC5hY3RpdmVFbGVtZW50IGNhbiBiZSBudWxsIGluIEludGVybmV0IEV4cGxvcmVyIDExXG4gICAgICByZXR1cm4gZG9jdW1lbnQuYWN0aXZlRWxlbWVudCB8fCBkb2N1bWVudC5ib2R5XG4gICAgfVxuICB9XG5cbiAgZHJvcEFjdGl2ZUVsZW1lbnQodmlldyl7XG4gICAgaWYodGhpcy5wcmV2QWN0aXZlICYmIHZpZXcub3duc0VsZW1lbnQodGhpcy5wcmV2QWN0aXZlKSl7XG4gICAgICB0aGlzLnByZXZBY3RpdmUgPSBudWxsXG4gICAgfVxuICB9XG5cbiAgcmVzdG9yZVByZXZpb3VzbHlBY3RpdmVGb2N1cygpe1xuICAgIGlmKHRoaXMucHJldkFjdGl2ZSAmJiB0aGlzLnByZXZBY3RpdmUgIT09IGRvY3VtZW50LmJvZHkpe1xuICAgICAgdGhpcy5wcmV2QWN0aXZlLmZvY3VzKClcbiAgICB9XG4gIH1cblxuICBibHVyQWN0aXZlRWxlbWVudCgpe1xuICAgIHRoaXMucHJldkFjdGl2ZSA9IHRoaXMuZ2V0QWN0aXZlRWxlbWVudCgpXG4gICAgaWYodGhpcy5wcmV2QWN0aXZlICE9PSBkb2N1bWVudC5ib2R5KXsgdGhpcy5wcmV2QWN0aXZlLmJsdXIoKSB9XG4gIH1cblxuICBiaW5kVG9wTGV2ZWxFdmVudHMoe2RlYWR9ID0ge30pe1xuICAgIGlmKHRoaXMuYm91bmRUb3BMZXZlbEV2ZW50cyl7IHJldHVybiB9XG5cbiAgICB0aGlzLmJvdW5kVG9wTGV2ZWxFdmVudHMgPSB0cnVlXG4gICAgLy8gZW50ZXIgZmFpbHNhZmUgcmVsb2FkIGlmIHNlcnZlciBoYXMgZ29uZSBhd2F5IGludGVudGlvbmFsbHksIHN1Y2ggYXMgXCJkaXNjb25uZWN0XCIgYnJvYWRjYXN0XG4gICAgdGhpcy5zb2NrZXQub25DbG9zZShldmVudCA9PiB7XG4gICAgICAvLyB1bmxvYWQgd2hlbiBuYXZpZ2F0aW5nIGhyZWYgb3IgZm9ybSBzdWJtaXQgKHN1Y2ggYXMgZm9yIGZpcmVmb3gpXG4gICAgICBpZihldmVudCAmJiBldmVudC5jb2RlID09PSAxMDAxKXsgcmV0dXJuIHRoaXMudW5sb2FkKCkgfVxuICAgICAgLy8gZmFpbHNhZmUgcmVsb2FkIGlmIG5vcm1hbCBjbG9zdXJlIGFuZCB3ZSBzdGlsbCBoYXZlIGEgbWFpbiBMVlxuICAgICAgaWYoZXZlbnQgJiYgZXZlbnQuY29kZSA9PT0gMTAwMCAmJiB0aGlzLm1haW4peyByZXR1cm4gdGhpcy5yZWxvYWRXaXRoSml0dGVyKHRoaXMubWFpbikgfVxuICAgIH0pXG4gICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCl7IH0pIC8vIGVuc3VyZSBhbGwgY2xpY2sgZXZlbnRzIGJ1YmJsZSBmb3IgbW9iaWxlIFNhZmFyaVxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicGFnZXNob3dcIiwgZSA9PiB7XG4gICAgICBpZihlLnBlcnNpc3RlZCl7IC8vIHJlbG9hZCBwYWdlIGlmIGJlaW5nIHJlc3RvcmVkIGZyb20gYmFjay9mb3J3YXJkIGNhY2hlXG4gICAgICAgIHRoaXMuZ2V0U29ja2V0KCkuZGlzY29ubmVjdCgpXG4gICAgICAgIHRoaXMud2l0aFBhZ2VMb2FkaW5nKHt0bzogd2luZG93LmxvY2F0aW9uLmhyZWYsIGtpbmQ6IFwicmVkaXJlY3RcIn0pXG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKVxuICAgICAgfVxuICAgIH0sIHRydWUpXG4gICAgaWYoIWRlYWQpeyB0aGlzLmJpbmROYXYoKSB9XG4gICAgdGhpcy5iaW5kQ2xpY2tzKClcbiAgICBpZighZGVhZCl7IHRoaXMuYmluZEZvcm1zKCkgfVxuICAgIHRoaXMuYmluZCh7a2V5dXA6IFwia2V5dXBcIiwga2V5ZG93bjogXCJrZXlkb3duXCJ9LCAoZSwgdHlwZSwgdmlldywgdGFyZ2V0RWwsIHBoeEV2ZW50LCBldmVudFRhcmdldCkgPT4ge1xuICAgICAgbGV0IG1hdGNoS2V5ID0gdGFyZ2V0RWwuZ2V0QXR0cmlidXRlKHRoaXMuYmluZGluZyhQSFhfS0VZKSlcbiAgICAgIGxldCBwcmVzc2VkS2V5ID0gZS5rZXkgJiYgZS5rZXkudG9Mb3dlckNhc2UoKSAvLyBjaHJvbWUgY2xpY2tlZCBhdXRvY29tcGxldGVzIHNlbmQgYSBrZXlkb3duIHdpdGhvdXQga2V5XG4gICAgICBpZihtYXRjaEtleSAmJiBtYXRjaEtleS50b0xvd2VyQ2FzZSgpICE9PSBwcmVzc2VkS2V5KXsgcmV0dXJuIH1cblxuICAgICAgbGV0IGRhdGEgPSB7a2V5OiBlLmtleSwgLi4udGhpcy5ldmVudE1ldGEodHlwZSwgZSwgdGFyZ2V0RWwpfVxuICAgICAgSlMuZXhlYyh0eXBlLCBwaHhFdmVudCwgdmlldywgdGFyZ2V0RWwsIFtcInB1c2hcIiwge2RhdGF9XSlcbiAgICB9KVxuICAgIHRoaXMuYmluZCh7Ymx1cjogXCJmb2N1c291dFwiLCBmb2N1czogXCJmb2N1c2luXCJ9LCAoZSwgdHlwZSwgdmlldywgdGFyZ2V0RWwsIHBoeEV2ZW50LCBldmVudFRhcmdldCkgPT4ge1xuICAgICAgaWYoIWV2ZW50VGFyZ2V0KXtcbiAgICAgICAgbGV0IGRhdGEgPSB7a2V5OiBlLmtleSwgLi4udGhpcy5ldmVudE1ldGEodHlwZSwgZSwgdGFyZ2V0RWwpfVxuICAgICAgICBKUy5leGVjKHR5cGUsIHBoeEV2ZW50LCB2aWV3LCB0YXJnZXRFbCwgW1wicHVzaFwiLCB7ZGF0YX1dKVxuICAgICAgfVxuICAgIH0pXG4gICAgdGhpcy5iaW5kKHtibHVyOiBcImJsdXJcIiwgZm9jdXM6IFwiZm9jdXNcIn0sIChlLCB0eXBlLCB2aWV3LCB0YXJnZXRFbCwgdGFyZ2V0Q3R4LCBwaHhFdmVudCwgcGh4VGFyZ2V0KSA9PiB7XG4gICAgICAvLyBibHVyIGFuZCBmb2N1cyBhcmUgdHJpZ2dlcmVkIG9uIGRvY3VtZW50IGFuZCB3aW5kb3cuIERpc2NhcmQgb25lIHRvIGF2b2lkIGR1cHNcbiAgICAgIGlmKHBoeFRhcmdldCA9PT0gXCJ3aW5kb3dcIil7XG4gICAgICAgIGxldCBkYXRhID0gdGhpcy5ldmVudE1ldGEodHlwZSwgZSwgdGFyZ2V0RWwpXG4gICAgICAgIEpTLmV4ZWModHlwZSwgcGh4RXZlbnQsIHZpZXcsIHRhcmdldEVsLCBbXCJwdXNoXCIsIHtkYXRhfV0pXG4gICAgICB9XG4gICAgfSlcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdvdmVyXCIsIGUgPT4gZS5wcmV2ZW50RGVmYXVsdCgpKVxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiZHJvcFwiLCBlID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgICAgbGV0IGRyb3BUYXJnZXRJZCA9IG1heWJlKGNsb3Nlc3RQaHhCaW5kaW5nKGUudGFyZ2V0LCB0aGlzLmJpbmRpbmcoUEhYX0RST1BfVEFSR0VUKSksIHRydWVUYXJnZXQgPT4ge1xuICAgICAgICByZXR1cm4gdHJ1ZVRhcmdldC5nZXRBdHRyaWJ1dGUodGhpcy5iaW5kaW5nKFBIWF9EUk9QX1RBUkdFVCkpXG4gICAgICB9KVxuICAgICAgbGV0IGRyb3BUYXJnZXQgPSBkcm9wVGFyZ2V0SWQgJiYgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZHJvcFRhcmdldElkKVxuICAgICAgbGV0IGZpbGVzID0gQXJyYXkuZnJvbShlLmRhdGFUcmFuc2Zlci5maWxlcyB8fCBbXSlcbiAgICAgIGlmKCFkcm9wVGFyZ2V0IHx8IGRyb3BUYXJnZXQuZGlzYWJsZWQgfHwgZmlsZXMubGVuZ3RoID09PSAwIHx8ICEoZHJvcFRhcmdldC5maWxlcyBpbnN0YW5jZW9mIEZpbGVMaXN0KSl7IHJldHVybiB9XG5cbiAgICAgIExpdmVVcGxvYWRlci50cmFja0ZpbGVzKGRyb3BUYXJnZXQsIGZpbGVzLCBlLmRhdGFUcmFuc2ZlcilcbiAgICAgIGRyb3BUYXJnZXQuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoXCJpbnB1dFwiLCB7YnViYmxlczogdHJ1ZX0pKVxuICAgIH0pXG4gICAgdGhpcy5vbihQSFhfVFJBQ0tfVVBMT0FEUywgZSA9PiB7XG4gICAgICBsZXQgdXBsb2FkVGFyZ2V0ID0gZS50YXJnZXRcbiAgICAgIGlmKCFET00uaXNVcGxvYWRJbnB1dCh1cGxvYWRUYXJnZXQpKXsgcmV0dXJuIH1cbiAgICAgIGxldCBmaWxlcyA9IEFycmF5LmZyb20oZS5kZXRhaWwuZmlsZXMgfHwgW10pLmZpbHRlcihmID0+IGYgaW5zdGFuY2VvZiBGaWxlIHx8IGYgaW5zdGFuY2VvZiBCbG9iKVxuICAgICAgTGl2ZVVwbG9hZGVyLnRyYWNrRmlsZXModXBsb2FkVGFyZ2V0LCBmaWxlcylcbiAgICAgIHVwbG9hZFRhcmdldC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcImlucHV0XCIsIHtidWJibGVzOiB0cnVlfSkpXG4gICAgfSlcbiAgfVxuXG4gIGV2ZW50TWV0YShldmVudE5hbWUsIGUsIHRhcmdldEVsKXtcbiAgICBsZXQgY2FsbGJhY2sgPSB0aGlzLm1ldGFkYXRhQ2FsbGJhY2tzW2V2ZW50TmFtZV1cbiAgICByZXR1cm4gY2FsbGJhY2sgPyBjYWxsYmFjayhlLCB0YXJnZXRFbCkgOiB7fVxuICB9XG5cbiAgc2V0UGVuZGluZ0xpbmsoaHJlZil7XG4gICAgdGhpcy5saW5rUmVmKytcbiAgICB0aGlzLnBlbmRpbmdMaW5rID0gaHJlZlxuICAgIHJldHVybiB0aGlzLmxpbmtSZWZcbiAgfVxuXG4gIGNvbW1pdFBlbmRpbmdMaW5rKGxpbmtSZWYpe1xuICAgIGlmKHRoaXMubGlua1JlZiAhPT0gbGlua1JlZil7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5ocmVmID0gdGhpcy5wZW5kaW5nTGlua1xuICAgICAgdGhpcy5wZW5kaW5nTGluayA9IG51bGxcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICB9XG5cbiAgZ2V0SHJlZigpeyByZXR1cm4gdGhpcy5ocmVmIH1cblxuICBoYXNQZW5kaW5nTGluaygpeyByZXR1cm4gISF0aGlzLnBlbmRpbmdMaW5rIH1cblxuICBiaW5kKGV2ZW50cywgY2FsbGJhY2spe1xuICAgIGZvcihsZXQgZXZlbnQgaW4gZXZlbnRzKXtcbiAgICAgIGxldCBicm93c2VyRXZlbnROYW1lID0gZXZlbnRzW2V2ZW50XVxuXG4gICAgICB0aGlzLm9uKGJyb3dzZXJFdmVudE5hbWUsIGUgPT4ge1xuICAgICAgICBsZXQgYmluZGluZyA9IHRoaXMuYmluZGluZyhldmVudClcbiAgICAgICAgbGV0IHdpbmRvd0JpbmRpbmcgPSB0aGlzLmJpbmRpbmcoYHdpbmRvdy0ke2V2ZW50fWApXG4gICAgICAgIGxldCB0YXJnZXRQaHhFdmVudCA9IGUudGFyZ2V0LmdldEF0dHJpYnV0ZSAmJiBlLnRhcmdldC5nZXRBdHRyaWJ1dGUoYmluZGluZylcbiAgICAgICAgaWYodGFyZ2V0UGh4RXZlbnQpe1xuICAgICAgICAgIHRoaXMuZGVib3VuY2UoZS50YXJnZXQsIGUsIGJyb3dzZXJFdmVudE5hbWUsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMud2l0aGluT3duZXJzKGUudGFyZ2V0LCB2aWV3ID0+IHtcbiAgICAgICAgICAgICAgY2FsbGJhY2soZSwgZXZlbnQsIHZpZXcsIGUudGFyZ2V0LCB0YXJnZXRQaHhFdmVudCwgbnVsbClcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBET00uYWxsKGRvY3VtZW50LCBgWyR7d2luZG93QmluZGluZ31dYCwgZWwgPT4ge1xuICAgICAgICAgICAgbGV0IHBoeEV2ZW50ID0gZWwuZ2V0QXR0cmlidXRlKHdpbmRvd0JpbmRpbmcpXG4gICAgICAgICAgICB0aGlzLmRlYm91bmNlKGVsLCBlLCBicm93c2VyRXZlbnROYW1lLCAoKSA9PiB7XG4gICAgICAgICAgICAgIHRoaXMud2l0aGluT3duZXJzKGVsLCB2aWV3ID0+IHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhlLCBldmVudCwgdmlldywgZWwsIHBoeEV2ZW50LCBcIndpbmRvd1wiKVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIGJpbmRDbGlja3MoKXtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGUgPT4gdGhpcy5jbGlja1N0YXJ0ZWRBdFRhcmdldCA9IGUudGFyZ2V0KVxuICAgIHRoaXMuYmluZENsaWNrKFwiY2xpY2tcIiwgXCJjbGlja1wiLCBmYWxzZSlcbiAgICB0aGlzLmJpbmRDbGljayhcIm1vdXNlZG93blwiLCBcImNhcHR1cmUtY2xpY2tcIiwgdHJ1ZSlcbiAgfVxuXG4gIGJpbmRDbGljayhldmVudE5hbWUsIGJpbmRpbmdOYW1lLCBjYXB0dXJlKXtcbiAgICBsZXQgY2xpY2sgPSB0aGlzLmJpbmRpbmcoYmluZGluZ05hbWUpXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBlID0+IHtcbiAgICAgIGxldCB0YXJnZXQgPSBudWxsXG4gICAgICBpZihjYXB0dXJlKXtcbiAgICAgICAgdGFyZ2V0ID0gZS50YXJnZXQubWF0Y2hlcyhgWyR7Y2xpY2t9XWApID8gZS50YXJnZXQgOiBlLnRhcmdldC5xdWVyeVNlbGVjdG9yKGBbJHtjbGlja31dYClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxldCBjbGlja1N0YXJ0ZWRBdFRhcmdldCA9IHRoaXMuY2xpY2tTdGFydGVkQXRUYXJnZXQgfHwgZS50YXJnZXRcbiAgICAgICAgdGFyZ2V0ID0gY2xvc2VzdFBoeEJpbmRpbmcoY2xpY2tTdGFydGVkQXRUYXJnZXQsIGNsaWNrKVxuICAgICAgICB0aGlzLmRpc3BhdGNoQ2xpY2tBd2F5KGUsIGNsaWNrU3RhcnRlZEF0VGFyZ2V0KVxuICAgICAgICB0aGlzLmNsaWNrU3RhcnRlZEF0VGFyZ2V0ID0gbnVsbFxuICAgICAgfVxuICAgICAgbGV0IHBoeEV2ZW50ID0gdGFyZ2V0ICYmIHRhcmdldC5nZXRBdHRyaWJ1dGUoY2xpY2spXG4gICAgICBpZighcGh4RXZlbnQpe1xuICAgICAgICBsZXQgaHJlZiA9IGUudGFyZ2V0IGluc3RhbmNlb2YgSFRNTEFuY2hvckVsZW1lbnQgPyBlLnRhcmdldC5nZXRBdHRyaWJ1dGUoXCJocmVmXCIpIDogbnVsbFxuICAgICAgICBpZighY2FwdHVyZSAmJiBocmVmICE9PSBudWxsICYmICFET00ud2FudHNOZXdUYWIoZSkgJiYgRE9NLmlzTmV3UGFnZUhyZWYoaHJlZiwgd2luZG93LmxvY2F0aW9uKSl7XG4gICAgICAgICAgdGhpcy51bmxvYWQoKVxuICAgICAgICB9XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgaWYodGFyZ2V0LmdldEF0dHJpYnV0ZShcImhyZWZcIikgPT09IFwiI1wiKXsgZS5wcmV2ZW50RGVmYXVsdCgpIH1cblxuICAgICAgdGhpcy5kZWJvdW5jZSh0YXJnZXQsIGUsIFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLndpdGhpbk93bmVycyh0YXJnZXQsIHZpZXcgPT4ge1xuICAgICAgICAgIEpTLmV4ZWMoXCJjbGlja1wiLCBwaHhFdmVudCwgdmlldywgdGFyZ2V0LCBbXCJwdXNoXCIsIHtkYXRhOiB0aGlzLmV2ZW50TWV0YShcImNsaWNrXCIsIGUsIHRhcmdldCl9XSlcbiAgICAgICAgfSlcbiAgICAgIH0pXG4gICAgfSwgY2FwdHVyZSlcbiAgfVxuXG4gIGRpc3BhdGNoQ2xpY2tBd2F5KGUsIGNsaWNrU3RhcnRlZEF0KXtcbiAgICBsZXQgcGh4Q2xpY2tBd2F5ID0gdGhpcy5iaW5kaW5nKFwiY2xpY2stYXdheVwiKVxuICAgIERPTS5hbGwoZG9jdW1lbnQsIGBbJHtwaHhDbGlja0F3YXl9XWAsIGVsID0+IHtcbiAgICAgIGlmKCEoZWwuaXNTYW1lTm9kZShjbGlja1N0YXJ0ZWRBdCkgfHwgZWwuY29udGFpbnMoY2xpY2tTdGFydGVkQXQpKSl7XG4gICAgICAgIHRoaXMud2l0aGluT3duZXJzKGUudGFyZ2V0LCB2aWV3ID0+IHtcbiAgICAgICAgICBsZXQgcGh4RXZlbnQgPSBlbC5nZXRBdHRyaWJ1dGUocGh4Q2xpY2tBd2F5KVxuICAgICAgICAgIGlmKEpTLmlzVmlzaWJsZShlbCkpe1xuICAgICAgICAgICAgSlMuZXhlYyhcImNsaWNrXCIsIHBoeEV2ZW50LCB2aWV3LCBlbCwgW1wicHVzaFwiLCB7ZGF0YTogdGhpcy5ldmVudE1ldGEoXCJjbGlja1wiLCBlLCBlLnRhcmdldCl9XSlcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIGJpbmROYXYoKXtcbiAgICBpZighQnJvd3Nlci5jYW5QdXNoU3RhdGUoKSl7IHJldHVybiB9XG4gICAgaWYoaGlzdG9yeS5zY3JvbGxSZXN0b3JhdGlvbil7IGhpc3Rvcnkuc2Nyb2xsUmVzdG9yYXRpb24gPSBcIm1hbnVhbFwiIH1cbiAgICBsZXQgc2Nyb2xsVGltZXIgPSBudWxsXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgX2UgPT4ge1xuICAgICAgY2xlYXJUaW1lb3V0KHNjcm9sbFRpbWVyKVxuICAgICAgc2Nyb2xsVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgQnJvd3Nlci51cGRhdGVDdXJyZW50U3RhdGUoc3RhdGUgPT4gT2JqZWN0LmFzc2lnbihzdGF0ZSwge3Njcm9sbDogd2luZG93LnNjcm9sbFl9KSlcbiAgICAgIH0sIDEwMClcbiAgICB9KVxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicG9wc3RhdGVcIiwgZXZlbnQgPT4ge1xuICAgICAgaWYoIXRoaXMucmVnaXN0ZXJOZXdMb2NhdGlvbih3aW5kb3cubG9jYXRpb24pKXsgcmV0dXJuIH1cbiAgICAgIGxldCB7dHlwZSwgaWQsIHJvb3QsIHNjcm9sbH0gPSBldmVudC5zdGF0ZSB8fCB7fVxuICAgICAgbGV0IGhyZWYgPSB3aW5kb3cubG9jYXRpb24uaHJlZlxuXG4gICAgICB0aGlzLnJlcXVlc3RET01VcGRhdGUoKCkgPT4ge1xuICAgICAgICBpZih0aGlzLm1haW4uaXNDb25uZWN0ZWQoKSAmJiAodHlwZSA9PT0gXCJwYXRjaFwiICYmIGlkID09PSB0aGlzLm1haW4uaWQpKXtcbiAgICAgICAgICB0aGlzLm1haW4ucHVzaExpbmtQYXRjaChocmVmLCBudWxsLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm1heWJlU2Nyb2xsKHNjcm9sbClcbiAgICAgICAgICB9KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMucmVwbGFjZU1haW4oaHJlZiwgbnVsbCwgKCkgPT4ge1xuICAgICAgICAgICAgaWYocm9vdCl7IHRoaXMucmVwbGFjZVJvb3RIaXN0b3J5KCkgfVxuICAgICAgICAgICAgdGhpcy5tYXliZVNjcm9sbChzY3JvbGwpXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9LCBmYWxzZSlcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGUgPT4ge1xuICAgICAgbGV0IHRhcmdldCA9IGNsb3Nlc3RQaHhCaW5kaW5nKGUudGFyZ2V0LCBQSFhfTElWRV9MSU5LKVxuICAgICAgbGV0IHR5cGUgPSB0YXJnZXQgJiYgdGFyZ2V0LmdldEF0dHJpYnV0ZShQSFhfTElWRV9MSU5LKVxuICAgICAgaWYoIXR5cGUgfHwgIXRoaXMuaXNDb25uZWN0ZWQoKSB8fCAhdGhpcy5tYWluIHx8IERPTS53YW50c05ld1RhYihlKSl7IHJldHVybiB9XG5cbiAgICAgIGxldCBocmVmID0gdGFyZ2V0LmhyZWZcbiAgICAgIGxldCBsaW5rU3RhdGUgPSB0YXJnZXQuZ2V0QXR0cmlidXRlKFBIWF9MSU5LX1NUQVRFKVxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpIC8vIGRvIG5vdCBidWJibGUgY2xpY2sgdG8gcmVndWxhciBwaHgtY2xpY2sgYmluZGluZ3NcbiAgICAgIGlmKHRoaXMucGVuZGluZ0xpbmsgPT09IGhyZWYpeyByZXR1cm4gfVxuXG4gICAgICB0aGlzLnJlcXVlc3RET01VcGRhdGUoKCkgPT4ge1xuICAgICAgICBpZih0eXBlID09PSBcInBhdGNoXCIpe1xuICAgICAgICAgIHRoaXMucHVzaEhpc3RvcnlQYXRjaChocmVmLCBsaW5rU3RhdGUsIHRhcmdldClcbiAgICAgICAgfSBlbHNlIGlmKHR5cGUgPT09IFwicmVkaXJlY3RcIil7XG4gICAgICAgICAgdGhpcy5oaXN0b3J5UmVkaXJlY3QoaHJlZiwgbGlua1N0YXRlKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgZXhwZWN0ZWQgJHtQSFhfTElWRV9MSU5LfSB0byBiZSBcInBhdGNoXCIgb3IgXCJyZWRpcmVjdFwiLCBnb3Q6ICR7dHlwZX1gKVxuICAgICAgICB9XG4gICAgICAgIGxldCBwaHhDbGljayA9IHRhcmdldC5nZXRBdHRyaWJ1dGUodGhpcy5iaW5kaW5nKFwiY2xpY2tcIikpXG4gICAgICAgIGlmKHBoeENsaWNrKXtcbiAgICAgICAgICB0aGlzLnJlcXVlc3RET01VcGRhdGUoKCkgPT4gdGhpcy5leGVjSlModGFyZ2V0LCBwaHhDbGljaywgXCJjbGlja1wiKSlcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9LCBmYWxzZSlcbiAgfVxuXG4gIG1heWJlU2Nyb2xsKHNjcm9sbCkge1xuICAgIGlmKHR5cGVvZihzY3JvbGwpID09PSBcIm51bWJlclwiKXtcbiAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgIHdpbmRvdy5zY3JvbGxUbygwLCBzY3JvbGwpXG4gICAgICB9KSAvLyB0aGUgYm9keSBuZWVkcyB0byByZW5kZXIgYmVmb3JlIHdlIHNjcm9sbC5cbiAgICB9XG4gIH1cblxuICBkaXNwYXRjaEV2ZW50KGV2ZW50LCBwYXlsb2FkID0ge30pe1xuICAgIERPTS5kaXNwYXRjaEV2ZW50KHdpbmRvdywgYHBoeDoke2V2ZW50fWAsIHtkZXRhaWw6IHBheWxvYWR9KVxuICB9XG5cbiAgZGlzcGF0Y2hFdmVudHMoZXZlbnRzKXtcbiAgICBldmVudHMuZm9yRWFjaCgoW2V2ZW50LCBwYXlsb2FkXSkgPT4gdGhpcy5kaXNwYXRjaEV2ZW50KGV2ZW50LCBwYXlsb2FkKSlcbiAgfVxuXG4gIHdpdGhQYWdlTG9hZGluZyhpbmZvLCBjYWxsYmFjayl7XG4gICAgRE9NLmRpc3BhdGNoRXZlbnQod2luZG93LCBcInBoeDpwYWdlLWxvYWRpbmctc3RhcnRcIiwge2RldGFpbDogaW5mb30pXG4gICAgbGV0IGRvbmUgPSAoKSA9PiBET00uZGlzcGF0Y2hFdmVudCh3aW5kb3csIFwicGh4OnBhZ2UtbG9hZGluZy1zdG9wXCIsIHtkZXRhaWw6IGluZm99KVxuICAgIHJldHVybiBjYWxsYmFjayA/IGNhbGxiYWNrKGRvbmUpIDogZG9uZVxuICB9XG5cbiAgcHVzaEhpc3RvcnlQYXRjaChocmVmLCBsaW5rU3RhdGUsIHRhcmdldEVsKXtcbiAgICBpZighdGhpcy5pc0Nvbm5lY3RlZCgpKXsgcmV0dXJuIEJyb3dzZXIucmVkaXJlY3QoaHJlZikgfVxuXG4gICAgdGhpcy53aXRoUGFnZUxvYWRpbmcoe3RvOiBocmVmLCBraW5kOiBcInBhdGNoXCJ9LCBkb25lID0+IHtcbiAgICAgIHRoaXMubWFpbi5wdXNoTGlua1BhdGNoKGhyZWYsIHRhcmdldEVsLCBsaW5rUmVmID0+IHtcbiAgICAgICAgdGhpcy5oaXN0b3J5UGF0Y2goaHJlZiwgbGlua1N0YXRlLCBsaW5rUmVmKVxuICAgICAgICBkb25lKClcbiAgICAgIH0pXG4gICAgfSlcbiAgfVxuXG4gIGhpc3RvcnlQYXRjaChocmVmLCBsaW5rU3RhdGUsIGxpbmtSZWYgPSB0aGlzLnNldFBlbmRpbmdMaW5rKGhyZWYpKXtcbiAgICBpZighdGhpcy5jb21taXRQZW5kaW5nTGluayhsaW5rUmVmKSl7IHJldHVybiB9XG5cbiAgICBCcm93c2VyLnB1c2hTdGF0ZShsaW5rU3RhdGUsIHt0eXBlOiBcInBhdGNoXCIsIGlkOiB0aGlzLm1haW4uaWR9LCBocmVmKVxuICAgIHRoaXMucmVnaXN0ZXJOZXdMb2NhdGlvbih3aW5kb3cubG9jYXRpb24pXG4gIH1cblxuICBoaXN0b3J5UmVkaXJlY3QoaHJlZiwgbGlua1N0YXRlLCBmbGFzaCl7XG4gICAgLy8gY29udmVydCB0byBmdWxsIGhyZWYgaWYgb25seSBwYXRoIHByZWZpeFxuICAgIGlmKCF0aGlzLmlzQ29ubmVjdGVkKCkpeyByZXR1cm4gQnJvd3Nlci5yZWRpcmVjdChocmVmLCBmbGFzaCkgfVxuICAgIGlmKC9eXFwvJHxeXFwvW15cXC9dKy4qJC8udGVzdChocmVmKSl7XG4gICAgICBsZXQge3Byb3RvY29sLCBob3N0fSA9IHdpbmRvdy5sb2NhdGlvblxuICAgICAgaHJlZiA9IGAke3Byb3RvY29sfS8vJHtob3N0fSR7aHJlZn1gXG4gICAgfVxuICAgIGxldCBzY3JvbGwgPSB3aW5kb3cuc2Nyb2xsWVxuICAgIHRoaXMud2l0aFBhZ2VMb2FkaW5nKHt0bzogaHJlZiwga2luZDogXCJyZWRpcmVjdFwifSwgZG9uZSA9PiB7XG4gICAgICB0aGlzLnJlcGxhY2VNYWluKGhyZWYsIGZsYXNoLCAoKSA9PiB7XG4gICAgICAgIEJyb3dzZXIucHVzaFN0YXRlKGxpbmtTdGF0ZSwge3R5cGU6IFwicmVkaXJlY3RcIiwgaWQ6IHRoaXMubWFpbi5pZCwgc2Nyb2xsOiBzY3JvbGx9LCBocmVmKVxuICAgICAgICB0aGlzLnJlZ2lzdGVyTmV3TG9jYXRpb24od2luZG93LmxvY2F0aW9uKVxuICAgICAgICBkb25lKClcbiAgICAgIH0pXG4gICAgfSlcbiAgfVxuXG4gIHJlcGxhY2VSb290SGlzdG9yeSgpe1xuICAgIEJyb3dzZXIucHVzaFN0YXRlKFwicmVwbGFjZVwiLCB7cm9vdDogdHJ1ZSwgdHlwZTogXCJwYXRjaFwiLCBpZDogdGhpcy5tYWluLmlkfSlcbiAgfVxuXG4gIHJlZ2lzdGVyTmV3TG9jYXRpb24obmV3TG9jYXRpb24pe1xuICAgIGxldCB7cGF0aG5hbWUsIHNlYXJjaH0gPSB0aGlzLmN1cnJlbnRMb2NhdGlvblxuICAgIGlmKHBhdGhuYW1lICsgc2VhcmNoID09PSBuZXdMb2NhdGlvbi5wYXRobmFtZSArIG5ld0xvY2F0aW9uLnNlYXJjaCl7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jdXJyZW50TG9jYXRpb24gPSBjbG9uZShuZXdMb2NhdGlvbilcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICB9XG5cbiAgYmluZEZvcm1zKCl7XG4gICAgbGV0IGl0ZXJhdGlvbnMgPSAwXG4gICAgbGV0IGV4dGVybmFsRm9ybVN1Ym1pdHRlZCA9IGZhbHNlXG5cbiAgICAvLyBkaXNhYmxlIGZvcm1zIG9uIHN1Ym1pdCB0aGF0IHRyYWNrIHBoeC1jaGFuZ2UgYnV0IHBlcmZvcm0gZXh0ZXJuYWwgc3VibWl0XG4gICAgdGhpcy5vbihcInN1Ym1pdFwiLCBlID0+IHtcbiAgICAgIGxldCBwaHhTdWJtaXQgPSBlLnRhcmdldC5nZXRBdHRyaWJ1dGUodGhpcy5iaW5kaW5nKFwic3VibWl0XCIpKVxuICAgICAgbGV0IHBoeENoYW5nZSA9IGUudGFyZ2V0LmdldEF0dHJpYnV0ZSh0aGlzLmJpbmRpbmcoXCJjaGFuZ2VcIikpXG4gICAgICBpZighZXh0ZXJuYWxGb3JtU3VibWl0dGVkICYmIHBoeENoYW5nZSAmJiAhcGh4U3VibWl0KXtcbiAgICAgICAgZXh0ZXJuYWxGb3JtU3VibWl0dGVkID0gdHJ1ZVxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgdGhpcy53aXRoaW5Pd25lcnMoZS50YXJnZXQsIHZpZXcgPT4ge1xuICAgICAgICAgIHZpZXcuZGlzYWJsZUZvcm0oZS50YXJnZXQpXG4gICAgICAgICAgLy8gc2FmYXJpIG5lZWRzIG5leHQgdGlja1xuICAgICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICAgICAgaWYoRE9NLmlzVW5sb2FkYWJsZUZvcm1TdWJtaXQoZSkpeyB0aGlzLnVubG9hZCgpIH1cbiAgICAgICAgICAgIGUudGFyZ2V0LnN1Ym1pdCgpXG4gICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9LCB0cnVlKVxuXG4gICAgdGhpcy5vbihcInN1Ym1pdFwiLCBlID0+IHtcbiAgICAgIGxldCBwaHhFdmVudCA9IGUudGFyZ2V0LmdldEF0dHJpYnV0ZSh0aGlzLmJpbmRpbmcoXCJzdWJtaXRcIikpXG4gICAgICBpZighcGh4RXZlbnQpe1xuICAgICAgICBpZihET00uaXNVbmxvYWRhYmxlRm9ybVN1Ym1pdChlKSl7IHRoaXMudW5sb2FkKCkgfVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgICAgZS50YXJnZXQuZGlzYWJsZWQgPSB0cnVlXG4gICAgICB0aGlzLndpdGhpbk93bmVycyhlLnRhcmdldCwgdmlldyA9PiB7XG4gICAgICAgIEpTLmV4ZWMoXCJzdWJtaXRcIiwgcGh4RXZlbnQsIHZpZXcsIGUudGFyZ2V0LCBbXCJwdXNoXCIsIHtzdWJtaXR0ZXI6IGUuc3VibWl0dGVyfV0pXG4gICAgICB9KVxuICAgIH0sIGZhbHNlKVxuXG4gICAgZm9yKGxldCB0eXBlIG9mIFtcImNoYW5nZVwiLCBcImlucHV0XCJdKXtcbiAgICAgIHRoaXMub24odHlwZSwgZSA9PiB7XG4gICAgICAgIGxldCBwaHhDaGFuZ2UgPSB0aGlzLmJpbmRpbmcoXCJjaGFuZ2VcIilcbiAgICAgICAgbGV0IGlucHV0ID0gZS50YXJnZXRcbiAgICAgICAgbGV0IGlucHV0RXZlbnQgPSBpbnB1dC5nZXRBdHRyaWJ1dGUocGh4Q2hhbmdlKVxuICAgICAgICBsZXQgZm9ybUV2ZW50ID0gaW5wdXQuZm9ybSAmJiBpbnB1dC5mb3JtLmdldEF0dHJpYnV0ZShwaHhDaGFuZ2UpXG4gICAgICAgIGxldCBwaHhFdmVudCA9IGlucHV0RXZlbnQgfHwgZm9ybUV2ZW50XG4gICAgICAgIGlmKCFwaHhFdmVudCl7IHJldHVybiB9XG4gICAgICAgIGlmKGlucHV0LnR5cGUgPT09IFwibnVtYmVyXCIgJiYgaW5wdXQudmFsaWRpdHkgJiYgaW5wdXQudmFsaWRpdHkuYmFkSW5wdXQpeyByZXR1cm4gfVxuXG4gICAgICAgIGxldCBkaXNwYXRjaGVyID0gaW5wdXRFdmVudCA/IGlucHV0IDogaW5wdXQuZm9ybVxuICAgICAgICBsZXQgY3VycmVudEl0ZXJhdGlvbnMgPSBpdGVyYXRpb25zXG4gICAgICAgIGl0ZXJhdGlvbnMrK1xuICAgICAgICBsZXQge2F0OiBhdCwgdHlwZTogbGFzdFR5cGV9ID0gRE9NLnByaXZhdGUoaW5wdXQsIFwicHJldi1pdGVyYXRpb25cIikgfHwge31cbiAgICAgICAgLy8gZGV0ZWN0IGR1cCBiZWNhdXNlIHNvbWUgYnJvd3NlcnMgZGlzcGF0Y2ggYm90aCBcImlucHV0XCIgYW5kIFwiY2hhbmdlXCJcbiAgICAgICAgaWYoYXQgPT09IGN1cnJlbnRJdGVyYXRpb25zIC0gMSAmJiB0eXBlICE9PSBsYXN0VHlwZSl7IHJldHVybiB9XG5cbiAgICAgICAgRE9NLnB1dFByaXZhdGUoaW5wdXQsIFwicHJldi1pdGVyYXRpb25cIiwge2F0OiBjdXJyZW50SXRlcmF0aW9ucywgdHlwZTogdHlwZX0pXG5cbiAgICAgICAgdGhpcy5kZWJvdW5jZShpbnB1dCwgZSwgdHlwZSwgKCkgPT4ge1xuICAgICAgICAgIHRoaXMud2l0aGluT3duZXJzKGRpc3BhdGNoZXIsIHZpZXcgPT4ge1xuICAgICAgICAgICAgRE9NLnB1dFByaXZhdGUoaW5wdXQsIFBIWF9IQVNfRk9DVVNFRCwgdHJ1ZSlcbiAgICAgICAgICAgIGlmKCFET00uaXNUZXh0dWFsSW5wdXQoaW5wdXQpKXtcbiAgICAgICAgICAgICAgdGhpcy5zZXRBY3RpdmVFbGVtZW50KGlucHV0KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgSlMuZXhlYyhcImNoYW5nZVwiLCBwaHhFdmVudCwgdmlldywgaW5wdXQsIFtcInB1c2hcIiwge190YXJnZXQ6IGUudGFyZ2V0Lm5hbWUsIGRpc3BhdGNoZXI6IGRpc3BhdGNoZXJ9XSlcbiAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgfSwgZmFsc2UpXG4gICAgfVxuICAgIHRoaXMub24oXCJyZXNldFwiLCAoZSkgPT4ge1xuICAgICAgbGV0IGZvcm0gPSBlLnRhcmdldFxuICAgICAgRE9NLnJlc2V0Rm9ybShmb3JtLCB0aGlzLmJpbmRpbmcoUEhYX0ZFRURCQUNLX0ZPUikpXG4gICAgICBsZXQgaW5wdXQgPSBBcnJheS5mcm9tKGZvcm0uZWxlbWVudHMpLmZpbmQoZWwgPT4gZWwudHlwZSA9PT0gXCJyZXNldFwiKVxuICAgICAgLy8gd2FpdCB1bnRpbCBuZXh0IHRpY2sgdG8gZ2V0IHVwZGF0ZWQgaW5wdXQgdmFsdWVcbiAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICBpbnB1dC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcImlucHV0XCIsIHtidWJibGVzOiB0cnVlLCBjYW5jZWxhYmxlOiBmYWxzZX0pKVxuICAgICAgfSlcbiAgICB9KVxuICB9XG5cbiAgZGVib3VuY2UoZWwsIGV2ZW50LCBldmVudFR5cGUsIGNhbGxiYWNrKXtcbiAgICBpZihldmVudFR5cGUgPT09IFwiYmx1clwiIHx8IGV2ZW50VHlwZSA9PT0gXCJmb2N1c291dFwiKXsgcmV0dXJuIGNhbGxiYWNrKCkgfVxuXG4gICAgbGV0IHBoeERlYm91bmNlID0gdGhpcy5iaW5kaW5nKFBIWF9ERUJPVU5DRSlcbiAgICBsZXQgcGh4VGhyb3R0bGUgPSB0aGlzLmJpbmRpbmcoUEhYX1RIUk9UVExFKVxuICAgIGxldCBkZWZhdWx0RGVib3VuY2UgPSB0aGlzLmRlZmF1bHRzLmRlYm91bmNlLnRvU3RyaW5nKClcbiAgICBsZXQgZGVmYXVsdFRocm90dGxlID0gdGhpcy5kZWZhdWx0cy50aHJvdHRsZS50b1N0cmluZygpXG5cbiAgICB0aGlzLndpdGhpbk93bmVycyhlbCwgdmlldyA9PiB7XG4gICAgICBsZXQgYXN5bmNGaWx0ZXIgPSAoKSA9PiAhdmlldy5pc0Rlc3Ryb3llZCgpICYmIGRvY3VtZW50LmJvZHkuY29udGFpbnMoZWwpXG4gICAgICBET00uZGVib3VuY2UoZWwsIGV2ZW50LCBwaHhEZWJvdW5jZSwgZGVmYXVsdERlYm91bmNlLCBwaHhUaHJvdHRsZSwgZGVmYXVsdFRocm90dGxlLCBhc3luY0ZpbHRlciwgKCkgPT4ge1xuICAgICAgICBjYWxsYmFjaygpXG4gICAgICB9KVxuICAgIH0pXG4gIH1cblxuICBzaWxlbmNlRXZlbnRzKGNhbGxiYWNrKXtcbiAgICB0aGlzLnNpbGVuY2VkID0gdHJ1ZVxuICAgIGNhbGxiYWNrKClcbiAgICB0aGlzLnNpbGVuY2VkID0gZmFsc2VcbiAgfVxuXG4gIG9uKGV2ZW50LCBjYWxsYmFjayl7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIGUgPT4ge1xuICAgICAgaWYoIXRoaXMuc2lsZW5jZWQpeyBjYWxsYmFjayhlKSB9XG4gICAgfSlcbiAgfVxufVxuXG5jbGFzcyBUcmFuc2l0aW9uU2V0IHtcbiAgY29uc3RydWN0b3IoKXtcbiAgICB0aGlzLnRyYW5zaXRpb25zID0gbmV3IFNldCgpXG4gICAgdGhpcy5wZW5kaW5nT3BzID0gW11cbiAgfVxuXG4gIHJlc2V0KCl7XG4gICAgdGhpcy50cmFuc2l0aW9ucy5mb3JFYWNoKHRpbWVyID0+IHtcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lcilcbiAgICAgIHRoaXMudHJhbnNpdGlvbnMuZGVsZXRlKHRpbWVyKVxuICAgIH0pXG4gICAgdGhpcy5mbHVzaFBlbmRpbmdPcHMoKVxuICB9XG5cbiAgYWZ0ZXIoY2FsbGJhY2spe1xuICAgIGlmKHRoaXMuc2l6ZSgpID09PSAwKXtcbiAgICAgIGNhbGxiYWNrKClcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5wdXNoUGVuZGluZ09wKGNhbGxiYWNrKVxuICAgIH1cbiAgfVxuXG4gIGFkZFRyYW5zaXRpb24odGltZSwgb25TdGFydCwgb25Eb25lKXtcbiAgICBvblN0YXJ0KClcbiAgICBsZXQgdGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMudHJhbnNpdGlvbnMuZGVsZXRlKHRpbWVyKVxuICAgICAgb25Eb25lKClcbiAgICAgIHRoaXMuZmx1c2hQZW5kaW5nT3BzKClcbiAgICB9LCB0aW1lKVxuICAgIHRoaXMudHJhbnNpdGlvbnMuYWRkKHRpbWVyKVxuICB9XG5cbiAgcHVzaFBlbmRpbmdPcChvcCl7IHRoaXMucGVuZGluZ09wcy5wdXNoKG9wKSB9XG5cbiAgc2l6ZSgpeyByZXR1cm4gdGhpcy50cmFuc2l0aW9ucy5zaXplIH1cblxuICBmbHVzaFBlbmRpbmdPcHMoKXtcbiAgICBpZih0aGlzLnNpemUoKSA+IDApeyByZXR1cm4gfVxuICAgIGxldCBvcCA9IHRoaXMucGVuZGluZ09wcy5zaGlmdCgpXG4gICAgaWYob3Ape1xuICAgICAgb3AoKVxuICAgICAgdGhpcy5mbHVzaFBlbmRpbmdPcHMoKVxuICAgIH1cbiAgfVxufVxuIiwgIi8vIFdlIGltcG9ydCB0aGUgQ1NTIHdoaWNoIGlzIGV4dHJhY3RlZCB0byBpdHMgb3duIGZpbGUgYnkgZXNidWlsZC5cbi8vIFJlbW92ZSB0aGlzIGxpbmUgaWYgeW91IGFkZCBhIHlvdXIgb3duIENTUyBidWlsZCBwaXBlbGluZSAoZS5nIHBvc3Rjc3MpLlxuaW1wb3J0IFwiLi4vY3NzL2FwcC5jc3NcIlxuLy8gSW1wb3J0IHRoZSBkYXJrIG1vZGUgdG9nZ2xlIHNjcmlwdFxuaW1wb3J0IFwiLi9kYXJrX21vZGVcIlxuXG4vLyBBZGRpbmcgUG9zdEhvZyBqcyBsaWJyYXJ5IGdvb2RpZXNcbmltcG9ydCBwb3N0aG9nIGZyb20gXCJwb3N0aG9nLWpzXCJcblxucG9zdGhvZy5pbml0KCdwaGNfQnlhZ29iYTZUUzZVQlo0QUFNT1NZNU5acGJhRVVKbHRNS0g5Q3Naa3Y0bCcsIHsgYXBpX2hvc3Q6ICdodHRwczovL2FwcC5wb3N0aG9nLmNvbScgfSlcblxuLy8gSWYgeW91IHdhbnQgdG8gdXNlIFBob2VuaXggY2hhbm5lbHMsIHJ1biBgbWl4IGhlbHAgcGh4Lmdlbi5jaGFubmVsYFxuLy8gdG8gZ2V0IHN0YXJ0ZWQgYW5kIHRoZW4gdW5jb21tZW50IHRoZSBsaW5lIGJlbG93LlxuLy8gaW1wb3J0IFwiLi91c2VyX3NvY2tldC5qc1wiXG5cbi8vIFlvdSBjYW4gaW5jbHVkZSBkZXBlbmRlbmNpZXMgaW4gdHdvIHdheXMuXG4vL1xuLy8gVGhlIHNpbXBsZXN0IG9wdGlvbiBpcyB0byBwdXQgdGhlbSBpbiBhc3NldHMvdmVuZG9yIGFuZFxuLy8gaW1wb3J0IHRoZW0gdXNpbmcgcmVsYXRpdmUgcGF0aHM6XG4vL1xuLy8gICAgIGltcG9ydCBcIi4uL3ZlbmRvci9zb21lLXBhY2thZ2UuanNcIlxuLy9cbi8vIEFsdGVybmF0aXZlbHksIHlvdSBjYW4gYG5wbSBpbnN0YWxsIHNvbWUtcGFja2FnZSAtLXByZWZpeCBhc3NldHNgIGFuZCBpbXBvcnRcbi8vIHRoZW0gdXNpbmcgYSBwYXRoIHN0YXJ0aW5nIHdpdGggdGhlIHBhY2thZ2UgbmFtZTpcbi8vXG4vLyAgICAgaW1wb3J0IFwic29tZS1wYWNrYWdlXCJcbi8vXG5cbi8vIEluY2x1ZGUgcGhvZW5peF9odG1sIHRvIGhhbmRsZSBtZXRob2Q9UFVUL0RFTEVURSBpbiBmb3JtcyBhbmQgYnV0dG9ucy5cbmltcG9ydCBcInBob2VuaXhfaHRtbFwiXG4vLyBFc3RhYmxpc2ggUGhvZW5peCBTb2NrZXQgYW5kIExpdmVWaWV3IGNvbmZpZ3VyYXRpb24uXG5pbXBvcnQge1NvY2tldH0gZnJvbSBcInBob2VuaXhcIlxuaW1wb3J0IHtMaXZlU29ja2V0fSBmcm9tIFwicGhvZW5peF9saXZlX3ZpZXdcIlxuaW1wb3J0IHRvcGJhciBmcm9tIFwiLi4vdmVuZG9yL3RvcGJhclwiXG5cbmxldCBjc3JmVG9rZW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwibWV0YVtuYW1lPSdjc3JmLXRva2VuJ11cIikuZ2V0QXR0cmlidXRlKFwiY29udGVudFwiKVxubGV0IGxpdmVTb2NrZXQgPSBuZXcgTGl2ZVNvY2tldChcIi9saXZlXCIsIFNvY2tldCwge3BhcmFtczoge19jc3JmX3Rva2VuOiBjc3JmVG9rZW59fSlcblxuLy8gQ2FwdHVyZSBzZWFyY2hlcyBmb3IgUG9zdEhvZyBjdXN0b20gZXZlbnRcbmxldCBzZWFyY2hUaW1lb3V0O1xuXG4vLyBBdHRhY2ggZXZlbnQgbGlzdGVuZXIgdG8gdGhlIHNlYXJjaCBpbnB1dCBmb3IgUG9zdEhvZyBjdXN0b20gZXZlbnRcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gIGlmIChldmVudC50YXJnZXQubWF0Y2hlcygnLnNlYXJjaC1ib3gtZGVmYXVsdCcpKSB7XG4gICAgY29uc3Qgc2VhcmNoUXVlcnkgPSBldmVudC50YXJnZXQudmFsdWU7XG4gICAgXG4gICAgLy8gQ2xlYXIgdGhlIHByZXZpb3VzIHRpbWVvdXRcbiAgICBjbGVhclRpbWVvdXQoc2VhcmNoVGltZW91dCk7XG4gICAgXG4gICAgLy8gU2V0IGEgbmV3IHRpbWVvdXQgdG8gY2FwdHVyZSB0aGUgZXZlbnQgYWZ0ZXIgNSBzZWNvbmRzIG9mIGluYWN0aXZpdHlcbiAgICBzZWFyY2hUaW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgIHBvc3Rob2cuY2FwdHVyZSgndXNlZF9zZWFyY2gnLCB7IHF1ZXJ5OiBzZWFyY2hRdWVyeSB9KTtcbiAgICB9LCA1MDAwKTtcbiAgfVxufSwgZmFsc2UpO1xuXG4vLyBBdHRhY2ggZXZlbnQgbGlzdGVuZXIgdG8gdGhlIFBERiBsaW5rcyBmb3IgUG9zdEhvZyBjdXN0b20gZXZlbnRcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gIGlmIChldmVudC50YXJnZXQubWF0Y2hlcygnLm1vbm9sb2d1ZS1wZGZsaW5rJykpIHtcbiAgICBjb25zdCBsaW5rRWxlbWVudCA9IGV2ZW50LnRhcmdldC5jbG9zZXN0KCdhJyk7XG4gICAgaWYgKGxpbmtFbGVtZW50KSB7XG4gICAgICBjb25zdCBjbGlja2VkXzNyZFBhcnR5VXJsID0gbGlua0VsZW1lbnQuZ2V0QXR0cmlidXRlKCdocmVmJyk7XG4gICAgICBwb3N0aG9nLmNhcHR1cmUoJ2NsaWNrZWRfM3JkUGFydHlVcmwnLCB7XG4gICAgICAgIHVybDogY2xpY2tlZF8zcmRQYXJ0eVVybFxuICAgICAgfSk7XG4gICAgfVxuICB9XG59LCBmYWxzZSk7XG5cbi8vIEF0dGFjaCBldmVudCBsaXN0ZW5lciB0byB0aGUgVGlwSmFyIGJ1dHRvbnMgZm9yIFBvc3RIb2cgY3VzdG9tIGV2ZW50XG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xuICBpZiAoZXZlbnQudGFyZ2V0Lm1hdGNoZXMoJy50aXBfamFyJykpIHtcbiAgICBwb3N0aG9nLmNhcHR1cmUoJ2NsaWNrZWRfdGlwamFyJyk7XG4gIH1cbn0sIGZhbHNlKTtcblxuLy8gVHJpZ2dlciBmb3IgUG9zdEhvZyBzdXJ2ZXlzOlxuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24gKCkge1xuICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCBzdXJ2ZXlIMSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zdXJ2ZXktaDEnKTtcbiAgICBpZiAoc3VydmV5SDEpIHtcbiAgICAgIHN1cnZleUgxLmNsYXNzTGlzdC5hZGQoJ2RlbGF5ZWQtc3VydmV5Jyk7XG4gICAgfVxuICB9LCAxMjAwMDApOyAvLyAyIG1pbnV0ZXNcbn0pO1xuXG5cbi8vIFNob3cgcHJvZ3Jlc3MgYmFyIG9uIGxpdmUgbmF2aWdhdGlvbiBhbmQgZm9ybSBzdWJtaXRzLCBpZiBzdGlsbCBsb2FkaW5nIGFmdGVyIDUwMG1zXG50b3BiYXIuY29uZmlnKHtiYXJDb2xvcnM6IHswOiBcIiMyOWRcIn0sIHNoYWRvd0NvbG9yOiBcInJnYmEoMCwgMCwgMCwgLjMpXCJ9KVxubGV0IHRvcEJhclNjaGVkdWxlZCA9IHVuZGVmaW5lZFxuXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInBoeDpwYWdlLWxvYWRpbmctc3RhcnRcIiwgKCkgPT4ge1xuICBpZighdG9wQmFyU2NoZWR1bGVkKSB7XG4gICAgdG9wQmFyU2NoZWR1bGVkID0gc2V0VGltZW91dCgoKSA9PiB0b3BiYXIuc2hvdygpLCA1MDApXG4gIH1cbn0pXG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicGh4OnBhZ2UtbG9hZGluZy1zdG9wXCIsICgpID0+IHtcbiAgY2xlYXJUaW1lb3V0KHRvcEJhclNjaGVkdWxlZClcbiAgdG9wQmFyU2NoZWR1bGVkID0gdW5kZWZpbmVkXG4gIHRvcGJhci5oaWRlKClcbn0pXG5cbi8vIGNvbm5lY3QgaWYgdGhlcmUgYXJlIGFueSBMaXZlVmlld3Mgb24gdGhlIHBhZ2VcbmxpdmVTb2NrZXQuY29ubmVjdCgpXG5cbi8vIGV4cG9zZSBsaXZlU29ja2V0IG9uIHdpbmRvdyBmb3Igd2ViIGNvbnNvbGUgZGVidWcgbG9ncyBhbmQgbGF0ZW5jeSBzaW11bGF0aW9uOlxubGl2ZVNvY2tldC5lbmFibGVEZWJ1ZygpXG4vLyA+PiBsaXZlU29ja2V0LmVuYWJsZUxhdGVuY3lTaW0oMTAwMCkgIC8vIGVuYWJsZWQgZm9yIGR1cmF0aW9uIG9mIGJyb3dzZXIgc2Vzc2lvblxuLy8gPj4gbGl2ZVNvY2tldC5kaXNhYmxlTGF0ZW5jeVNpbSgpXG53aW5kb3cubGl2ZVNvY2tldCA9IGxpdmVTb2NrZXRcblxuIl0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBTUEsTUFBQyxVQUFVLFNBQVEsV0FBVTtBQUMzQjtBQUdBLFFBQUMsWUFBWTtBQUNYLGNBQUksV0FBVztBQUNmLGNBQUksVUFBVSxDQUFDLE1BQU0sT0FBTyxVQUFVLEdBQUc7QUFDekMsbUJBQVMsS0FBSSxHQUFHLEtBQUksUUFBUSxVQUFVLENBQUMsUUFBTyx1QkFBdUIsRUFBRSxJQUFHO0FBQ3hFLG9CQUFPLHdCQUNMLFFBQU8sUUFBUSxNQUFLO0FBQ3RCLG9CQUFPLHVCQUNMLFFBQU8sUUFBUSxNQUFLLDJCQUNwQixRQUFPLFFBQVEsTUFBSztBQUFBLFVBQ3hCO0FBQ0EsY0FBSSxDQUFDLFFBQU87QUFDVixvQkFBTyx3QkFBd0IsU0FBVSxVQUFVLFNBQVM7QUFDMUQs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
