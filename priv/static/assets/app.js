(() => {
  var __create = Object.create;
  var __defProp = Object.defineProperty;
  var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
  var __getOwnPropNames = Object.getOwnPropertyNames;
  var __getOwnPropSymbols = Object.getOwnPropertySymbols;
  var __getProtoOf = Object.getPrototypeOf;
  var __hasOwnProp = Object.prototype.hasOwnProperty;
  var __propIsEnum = Object.prototype.propertyIsEnumerable;
  var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
  var __spreadValues = (a2, b2) => {
    for (var prop in b2 || (b2 = {}))
      if (__hasOwnProp.call(b2, prop))
        __defNormalProp(a2, prop, b2[prop]);
    if (__getOwnPropSymbols)
      for (var prop of __getOwnPropSymbols(b2)) {
        if (__propIsEnum.call(b2, prop))
          __defNormalProp(a2, prop, b2[prop]);
      }
    return a2;
  };
  var __objRest = (source, exclude) => {
    var target = {};
    for (var prop in source)
      if (__hasOwnProp.call(source, prop) && exclude.indexOf(prop) < 0)
        target[prop] = source[prop];
    if (source != null && __getOwnPropSymbols)
      for (var prop of __getOwnPropSymbols(source)) {
        if (exclude.indexOf(prop) < 0 && __propIsEnum.call(source, prop))
          target[prop] = source[prop];
      }
    return target;
  };
  var __commonJS = (cb, mod) => function __require() {
    return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
  };
  var __copyProps = (to, from, except, desc) => {
    if (from && typeof from === "object" || typeof from === "function") {
      for (let key of __getOwnPropNames(from))
        if (!__hasOwnProp.call(to, key) && key !== except)
          __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
    }
    return to;
  };
  var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target, mod));

  // vendor/topbar.js
  var require_topbar = __commonJS({
    "vendor/topbar.js"(exports, module) {
      (function(window2, document2) {
        "use strict";
        (function() {
          var lastTime = 0;
          var vendors = ["ms", "moz", "webkit", "o"];
          for (var x2 = 0; x2 < vendors.length && !window2.requestAnimationFrame; ++x2) {
            window2.requestAnimationFrame = window2[vendors[x2] + "RequestAnimationFrame"];
            window2.cancelAnimationFrame = window2[vendors[x2] + "CancelAnimationFrame"] || window2[vendors[x2] + "CancelRequestAnimationFrame"];
          }
          if (!window2.requestAnimationFrame)
            window2.requestAnimationFrame = function(callback, element) {
              var currTime = new Date().getTime();
              var timeToCall = Math.max(0, 16 - (currTime - lastTime));
              var id = window2.setTimeout(function() {
                callback(currTime + timeToCall);
              }, timeToCall);
              lastTime = currTime + timeToCall;
              return id;
            };
          if (!window2.cancelAnimationFrame)
            window2.cancelAnimationFrame = function(id) {
              clearTimeout(id);
            };
        })();
        var canvas, progressTimerId, fadeTimerId, currentProgress, showing, addEvent = function(elem, type, handler) {
          if (elem.addEventListener)
            elem.addEventListener(type, handler, false);
          else if (elem.attachEvent)
            elem.attachEvent("on" + type, handler);
          else
            elem["on" + type] = handler;
        }, options = {
          autoRun: true,
          barThickness: 3,
          barColors: {
            0: "rgba(26,  188, 156, .9)",
            ".25": "rgba(52,  152, 219, .9)",
            ".50": "rgba(241, 196, 15,  .9)",
            ".75": "rgba(230, 126, 34,  .9)",
            "1.0": "rgba(211, 84,  0,   .9)"
          },
          shadowBlur: 10,
          shadowColor: "rgba(0,   0,   0,   .6)",
          className: null
        }, repaint = function() {
          canvas.width = window2.innerWidth;
          canvas.height = options.barThickness * 5;
          var ctx = canvas.getContext("2d");
          ctx.shadowBlur = options.shadowBlur;
          ctx.shadowColor = options.shadowColor;
          var lineGradient = ctx.createLinearGradient(0, 0, canvas.width, 0);
          for (var stop in options.barColors)
            lineGradient.addColorStop(stop, options.barColors[stop]);
          ctx.lineWidth = options.barThickness;
          ctx.beginPath();
          ctx.moveTo(0, options.barThickness / 2);
          ctx.lineTo(Math.ceil(currentProgress * canvas.width), options.barThickness / 2);
          ctx.strokeStyle = lineGradient;
          ctx.stroke();
        }, createCanvas = function() {
          canvas = document2.createElement("canvas");
          var style = canvas.style;
          style.position = "fixed";
          style.top = style.left = style.right = style.margin = style.padding = 0;
          style.zIndex = 100001;
          style.display = "none";
          if (options.className)
            canvas.classList.add(options.className);
          document2.body.appendChild(canvas);
          addEvent(window2, "resize", repaint);
        }, topbar2 = {
          config: function(opts) {
            for (var key in opts)
              if (options.hasOwnProperty(key))
                options[key] = opts[key];
          },
          show: function() {
            if (showing)
              return;
            showing = true;
            if (fadeTimerId !== null)
              window2.cancelAnimationFrame(fadeTimerId);
            if (!canvas)
              createCanvas();
            canvas.style.opacity = 1;
            canvas.style.display = "block";
            topbar2.progress(0);
            if (options.autoRun) {
              (function loop() {
                progressTimerId = window2.requestAnimationFrame(loop);
                topbar2.progress("+" + 0.05 * Math.pow(1 - Math.sqrt(currentProgress), 2));
              })();
            }
          },
          progress: function(to) {
            if (typeof to === "undefined")
              return currentProgress;
            if (typeof to === "string") {
              to = (to.indexOf("+") >= 0 || to.indexOf("-") >= 0 ? currentProgress : 0) + parseFloat(to);
            }
            currentProgress = to > 1 ? 1 : to;
            repaint();
            return currentProgress;
          },
          hide: function() {
            if (!showing)
              return;
            showing = false;
            if (progressTimerId != null) {
              window2.cancelAnimationFrame(progressTimerId);
              progressTimerId = null;
            }
            (function loop() {
              if (topbar2.progress("+.1") >= 1) {
                canvas.style.opacity -= 0.05;
                if (canvas.style.opacity <= 0.05) {
                  canvas.style.display = "none";
                  fadeTimerId = null;
                  return;
                }
              }
              fadeTimerId = window2.requestAnimationFrame(loop);
            })();
          }
        };
        if (typeof module === "object" && typeof module.exports === "object") {
          module.exports = topbar2;
        } else if (typeof define === "function" && define.amd) {
          define(function() {
            return topbar2;
          });
        } else {
          this.topbar = topbar2;
        }
      }).call(exports, window, document);
    }
  });

  // js/dark_mode.js
  function setDarkModePreference(isDarkMode) {
    localStorage.setItem("darkMode", isDarkMode ? "true" : "false");
    document.cookie = "darkModePreference=" + (isDarkMode ? "true" : "false") + ";path=/";
    var bodyElement = document.body;
    var lightModeToggle = document.getElementById("light-mode-toggle");
    var darkModeToggle = document.getElementById("dark-mode-toggle");
    if (isDarkMode) {
      bodyElement.classList.add("dark-mode");
      lightModeToggle.style.display = "none";
      darkModeToggle.style.display = "block";
    } else {
      bodyElement.classList.remove("dark-mode");
      lightModeToggle.style.display = "block";
      darkModeToggle.style.display = "none";
    }
  }
  function toggleDarkMode() {
    var isDarkMode = localStorage.getItem("darkMode") === "true";
    setDarkModePreference(!isDarkMode);
  }
  var darkModeIcon = document.getElementById("dark-mode-icon");
  if (darkModeIcon) {
    darkModeIcon.addEventListener("click", toggleDarkMode);
  }
  var initialDarkMode = localStorage.getItem("darkMode") === "true";
  setDarkModePreference(initialDarkMode);
  window.getCookie = function(name) {
    const value = "; " + document.cookie;
    const parts = value.split("; " + name + "=");
    if (parts.length === 2)
      return parts.pop().split(";").shift();
    return null;
  };

  // ../node_modules/posthog-js/dist/es.js
  function e(e5, t2) {
    var n2 = Object.keys(e5);
    if (Object.getOwnPropertySymbols) {
      var i2 = Object.getOwnPropertySymbols(e5);
      t2 && (i2 = i2.filter(function(t3) {
        return Object.getOwnPropertyDescriptor(e5, t3).enumerable;
      })), n2.push.apply(n2, i2);
    }
    return n2;
  }
  function t(t2) {
    for (var n2 = 1; n2 < arguments.length; n2++) {
      var i2 = arguments[n2] != null ? arguments[n2] : {};
      n2 % 2 ? e(Object(i2), true).forEach(function(e5) {
        o(t2, e5, i2[e5]);
      }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(t2, Object.getOwnPropertyDescriptors(i2)) : e(Object(i2)).forEach(function(e5) {
        Object.defineProperty(t2, e5, Object.getOwnPropertyDescriptor(i2, e5));
      });
    }
    return t2;
  }
  function n(e5) {
    return n = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(e6) {
      return typeof e6;
    } : function(e6) {
      return e6 && typeof Symbol == "function" && e6.constructor === Symbol && e6 !== Symbol.prototype ? "symbol" : typeof e6;
    }, n(e5);
  }
  function i(e5, t2) {
    if (!(e5 instanceof t2))
      throw new TypeError("Cannot call a class as a function");
  }
  function r(e5, t2) {
    for (var n2 = 0; n2 < t2.length; n2++) {
      var i2 = t2[n2];
      i2.enumerable = i2.enumerable || false, i2.configurable = true, "value" in i2 && (i2.writable = true), Object.defineProperty(e5, i2.key, i2);
    }
  }
  function s(e5, t2, n2) {
    return t2 && r(e5.prototype, t2), n2 && r(e5, n2), Object.defineProperty(e5, "prototype", { writable: false }), e5;
  }
  function o(e5, t2, n2) {
    return t2 in e5 ? Object.defineProperty(e5, t2, { value: n2, enumerable: true, configurable: true, writable: true }) : e5[t2] = n2, e5;
  }
  function a(e5, t2) {
    if (e5 == null)
      return {};
    var n2, i2, r2 = function(e6, t3) {
      if (e6 == null)
        return {};
      var n3, i3, r3 = {}, s3 = Object.keys(e6);
      for (i3 = 0; i3 < s3.length; i3++)
        n3 = s3[i3], t3.indexOf(n3) >= 0 || (r3[n3] = e6[n3]);
      return r3;
    }(e5, t2);
    if (Object.getOwnPropertySymbols) {
      var s2 = Object.getOwnPropertySymbols(e5);
      for (i2 = 0; i2 < s2.length; i2++)
        n2 = s2[i2], t2.indexOf(n2) >= 0 || Object.prototype.propertyIsEnumerable.call(e5, n2) && (r2[n2] = e5[n2]);
    }
    return r2;
  }
  function u(e5, t2) {
    return function(e6) {
      if (Array.isArray(e6))
        return e6;
    }(e5) || function(e6, t3) {
      var n2 = e6 == null ? null : typeof Symbol != "undefined" && e6[Symbol.iterator] || e6["@@iterator"];
      if (n2 == null)
        return;
      var i2, r2, s2 = [], o2 = true, a2 = false;
      try {
        for (n2 = n2.call(e6); !(o2 = (i2 = n2.next()).done) && (s2.push(i2.value), !t3 || s2.length !== t3); o2 = true)
          ;
      } catch (e7) {
        a2 = true, r2 = e7;
      } finally {
        try {
          o2 || n2.return == null || n2.return();
        } finally {
          if (a2)
            throw r2;
        }
      }
      return s2;
    }(e5, t2) || c(e5, t2) || function() {
      throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
    }();
  }
  function l(e5) {
    return function(e6) {
      if (Array.isArray(e6))
        return d(e6);
    }(e5) || function(e6) {
      if (typeof Symbol != "undefined" && e6[Symbol.iterator] != null || e6["@@iterator"] != null)
        return Array.from(e6);
    }(e5) || c(e5) || function() {
      throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
    }();
  }
  function c(e5, t2) {
    if (e5) {
      if (typeof e5 == "string")
        return d(e5, t2);
      var n2 = Object.prototype.toString.call(e5).slice(8, -1);
      return n2 === "Object" && e5.constructor && (n2 = e5.constructor.name), n2 === "Map" || n2 === "Set" ? Array.from(e5) : n2 === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n2) ? d(e5, t2) : void 0;
    }
  }
  function d(e5, t2) {
    (t2 == null || t2 > e5.length) && (t2 = e5.length);
    for (var n2 = 0, i2 = new Array(t2); n2 < t2; n2++)
      i2[n2] = e5[n2];
    return i2;
  }
  function h(e5, t2) {
    var n2 = typeof Symbol != "undefined" && e5[Symbol.iterator] || e5["@@iterator"];
    if (!n2) {
      if (Array.isArray(e5) || (n2 = c(e5)) || t2 && e5 && typeof e5.length == "number") {
        n2 && (e5 = n2);
        var i2 = 0, r2 = function() {
        };
        return { s: r2, n: function() {
          return i2 >= e5.length ? { done: true } : { done: false, value: e5[i2++] };
        }, e: function(e6) {
          throw e6;
        }, f: r2 };
      }
      throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
    }
    var s2, o2 = true, a2 = false;
    return { s: function() {
      n2 = n2.call(e5);
    }, n: function() {
      var e6 = n2.next();
      return o2 = e6.done, e6;
    }, e: function(e6) {
      a2 = true, s2 = e6;
    }, f: function() {
      try {
        o2 || n2.return == null || n2.return();
      } finally {
        if (a2)
          throw s2;
      }
    } };
  }
  var f = { DEBUG: false, LIB_VERSION: "1.112.0" };
  var p = Array.isArray;
  var g = Object.prototype;
  var v = g.hasOwnProperty;
  var _ = g.toString;
  var m = p || function(e5) {
    return _.call(e5) === "[object Array]";
  };
  var y = function(e5) {
    return typeof e5 == "function";
  };
  var b = function(e5) {
    return e5 === Object(e5) && !m(e5);
  };
  var w = function(e5) {
    return e5 === void 0;
  };
  var k = function(e5) {
    return _.call(e5) == "[object String]";
  };
  var S = function(e5) {
    return e5 === null;
  };
  var F = function(e5) {
    return w(e5) || S(e5);
  };
  var R = function(e5) {
    return _.call(e5) == "[object Number]";
  };
  var x = function(e5) {
    return _.call(e5) === "[object Boolean]";
  };
  var P = function(e5) {
    return e5 instanceof FormData;
  };
  var E = typeof window != "undefined" ? window : void 0;
  var I = typeof globalThis != "undefined" ? globalThis : E;
  var C = Array.prototype;
  var $ = C.forEach;
  var T = C.indexOf;
  var O = I == null ? void 0 : I.navigator;
  var A = I == null ? void 0 : I.document;
  var M = I == null ? void 0 : I.location;
  var q = I == null ? void 0 : I.fetch;
  var D = I != null && I.XMLHttpRequest && "withCredentials" in new I.XMLHttpRequest() ? I.XMLHttpRequest : void 0;
  var L = I == null ? void 0 : I.AbortController;
  var N = O == null ? void 0 : O.userAgent;
  var B = E != null ? E : {};
  var H = "[PostHog.js]";
  var j = { _log: function(e5) {
    if (E && (f.DEBUG || B.POSTHOG_DEBUG) && !w(E.console) && E.console) {
      for (var t2 = ("__rrweb_original__" in E.console[e5]) ? E.console[e5].__rrweb_original__ : E.console[e5], n2 = arguments.length, i2 = new Array(n2 > 1 ? n2 - 1 : 0), r2 = 1; r2 < n2; r2++)
        i2[r2 - 1] = arguments[r2];
      t2.apply(void 0, [H].concat(i2));
    }
  }, info: function() {
    for (var e5 = arguments.length, t2 = new Array(e5), n2 = 0; n2 < e5; n2++)
      t2[n2] = arguments[n2];
    j._log.apply(j, ["log"].concat(t2));
  }, warn: function() {
    for (var e5 = arguments.length, t2 = new Array(e5), n2 = 0; n2 < e5; n2++)
      t2[n2] = arguments[n2];
    j._log.apply(j, ["warn"].concat(t2));
  }, error: function() {
    for (var e5 = arguments.length, t2 = new Array(e5), n2 = 0; n2 < e5; n2++)
      t2[n2] = arguments[n2];
    j._log.apply(j, ["error"].concat(t2));
  }, critical: function() {
    for (var e5, t2 = arguments.length, n2 = new Array(t2), i2 = 0; i2 < t2; i2++)
      n2[i2] = arguments[i2];
    (e5 = console).error.apply(e5, [H].concat(n2));
  }, uninitializedWarning: function(e5) {
    j.error("You must initialize PostHog before calling ".concat(e5));
  } };
  var U = {};
  var V = function(e5) {
    return e5.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g, "");
  };
  function W(e5, t2, n2) {
    if (m(e5)) {
      if ($ && e5.forEach === $)
        e5.forEach(t2, n2);
      else if ("length" in e5 && e5.length === +e5.length) {
        for (var i2 = 0, r2 = e5.length; i2 < r2; i2++)
          if (i2 in e5 && t2.call(n2, e5[i2], i2) === U)
            return;
      }
    }
  }
  function z(e5, t2, n2) {
    if (!F(e5)) {
      if (m(e5))
        return W(e5, t2, n2);
      if (P(e5)) {
        var i2, r2 = h(e5.entries());
        try {
          for (r2.s(); !(i2 = r2.n()).done; ) {
            var s2 = i2.value;
            if (t2.call(n2, s2[1], s2[0]) === U)
              return;
          }
        } catch (e6) {
          r2.e(e6);
        } finally {
          r2.f();
        }
      } else
        for (var o2 in e5)
          if (v.call(e5, o2) && t2.call(n2, e5[o2], o2) === U)
            return;
    }
  }
  var G = function(e5) {
    for (var t2 = arguments.length, n2 = new Array(t2 > 1 ? t2 - 1 : 0), i2 = 1; i2 < t2; i2++)
      n2[i2 - 1] = arguments[i2];
    return W(n2, function(t3) {
      for (var n3 in t3)
        t3[n3] !== void 0 && (e5[n3] = t3[n3]);
    }), e5;
  };
  function Q(e5, t2) {
    return e5.indexOf(t2) !== -1;
  }
  function Y(e5) {
    for (var t2 = Object.keys(e5), n2 = t2.length, i2 = new Array(n2); n2--; )
      i2[n2] = [t2[n2], e5[t2[n2]]];
    return i2;
  }
  var J = function() {
    return Date.now = Date.now || function() {
      return +new Date();
    }, Date.now();
  };
  var K = function(e5) {
    try {
      return e5();
    } catch (e6) {
      return;
    }
  };
  var X = function(e5) {
    return function() {
      try {
        for (var t2 = arguments.length, n2 = new Array(t2), i2 = 0; i2 < t2; i2++)
          n2[i2] = arguments[i2];
        return e5.apply(this, n2);
      } catch (e6) {
        j.critical("Implementation error. Please turn on debug mode and open a ticket on https://app.posthog.com/home#panel=support%3Asupport%3A."), j.critical(e6);
      }
    };
  };
  var Z = function(e5) {
    var t2 = {};
    return z(e5, function(e6, n2) {
      k(e6) && e6.length > 0 && (t2[n2] = e6);
    }), t2;
  };
  function ee(e5, t2) {
    return n2 = e5, i2 = function(e6) {
      return k(e6) && !S(t2) ? e6.slice(0, t2) : e6;
    }, r2 = /* @__PURE__ */ new Set(), function e6(t3, n3) {
      return t3 !== Object(t3) ? i2 ? i2(t3, n3) : t3 : r2.has(t3) ? void 0 : (r2.add(t3), m(t3) ? (s2 = [], W(t3, function(t4) {
        s2.push(e6(t4));
      })) : (s2 = {}, z(t3, function(t4, n4) {
        r2.has(t4) || (s2[n4] = e6(t4, n4));
      })), s2);
      var s2;
    }(n2);
    var n2, i2, r2;
  }
  var te = function(e5) {
    var t2, n2, i2, r2, s2 = "";
    for (t2 = n2 = 0, i2 = (e5 = (e5 + "").replace(/\r\n/g, "\n").replace(/\r/g, "\n")).length, r2 = 0; r2 < i2; r2++) {
      var o2 = e5.charCodeAt(r2), a2 = null;
      o2 < 128 ? n2++ : a2 = o2 > 127 && o2 < 2048 ? String.fromCharCode(o2 >> 6 | 192, 63 & o2 | 128) : String.fromCharCode(o2 >> 12 | 224, o2 >> 6 & 63 | 128, 63 & o2 | 128), S(a2) || (n2 > t2 && (s2 += e5.substring(t2, n2)), s2 += a2, t2 = n2 = r2 + 1);
    }
    return n2 > t2 && (s2 += e5.substring(t2, e5.length)), s2;
  };
  var ne = function() {
    function e5(t2) {
      return t2 && (t2.preventDefault = e5.preventDefault, t2.stopPropagation = e5.stopPropagation), t2;
    }
    return e5.preventDefault = function() {
      this.returnValue = false;
    }, e5.stopPropagation = function() {
      this.cancelBubble = true;
    }, function(t2, n2, i2, r2, s2) {
      if (t2)
        if (t2.addEventListener && !r2)
          t2.addEventListener(n2, i2, !!s2);
        else {
          var o2 = "on" + n2, a2 = t2[o2];
          t2[o2] = function(t3, n3, i3) {
            return function(r3) {
              if (r3 = r3 || e5(E == null ? void 0 : E.event)) {
                var s3, o3 = true;
                y(i3) && (s3 = i3(r3));
                var a3 = n3.call(t3, r3);
                return s3 !== false && a3 !== false || (o3 = false), o3;
              }
            };
          }(t2, i2, a2);
        }
      else
        j.error("No valid element provided to register_event");
    };
  }();
  function ie(e5, t2) {
    var n2 = function() {
      if (!A)
        return t2("document not found");
      var n3 = A.createElement("script");
      n3.type = "text/javascript", n3.src = e5, n3.onload = function(e6) {
        return t2(void 0, e6);
      }, n3.onerror = function(e6) {
        return t2(e6);
      };
      var i2, r2 = A.querySelectorAll("body > script");
      r2.length > 0 ? (i2 = r2[0].parentNode) === null || i2 === void 0 || i2.insertBefore(n3, r2[0]) : A.body.appendChild(n3);
    };
    A != null && A.body ? n2() : A == null || A.addEventListener("DOMContentLoaded", n2);
  }
  function re(e5) {
    return e5 ? V(e5).split(/\s+/) : [];
  }
  function se(e5) {
    var t2 = "";
    switch (n(e5.className)) {
      case "string":
        t2 = e5.className;
        break;
      case "object":
        t2 = ("baseVal" in e5.className ? e5.className.baseVal : null) || e5.getAttribute("class") || "";
        break;
      default:
        t2 = "";
    }
    return re(t2);
  }
  function oe(e5) {
    return F(e5) ? null : V(e5).split(/(\s+)/).filter(_e).join("").replace(/[\r\n]/g, " ").replace(/[ ]+/g, " ").substring(0, 255);
  }
  function ae(e5) {
    var t2 = "";
    return ge(e5) && !ve(e5) && e5.childNodes && e5.childNodes.length && z(e5.childNodes, function(e6) {
      var n2;
      ce(e6) && e6.textContent && (t2 += (n2 = oe(e6.textContent)) !== null && n2 !== void 0 ? n2 : "");
    }), V(t2);
  }
  function ue(e5) {
    return !!e5 && e5.nodeType === 1;
  }
  function le(e5, t2) {
    return !!e5 && !!e5.tagName && e5.tagName.toLowerCase() === t2.toLowerCase();
  }
  function ce(e5) {
    return !!e5 && e5.nodeType === 3;
  }
  function de(e5) {
    return !!e5 && e5.nodeType === 11;
  }
  var he = ["a", "button", "form", "input", "select", "textarea", "label"];
  function fe(e5) {
    var t2 = e5.parentNode;
    return !(!t2 || !ue(t2)) && t2;
  }
  function pe(e5, t2) {
    var i2 = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : void 0, r2 = arguments.length > 3 ? arguments[3] : void 0, s2 = arguments.length > 4 ? arguments[4] : void 0;
    if (!E || !e5 || le(e5, "html") || !ue(e5))
      return false;
    if (i2 != null && i2.url_allowlist) {
      var o2 = E.location.href, a2 = i2.url_allowlist;
      if (a2 && !a2.some(function(e6) {
        return o2.match(e6);
      }))
        return false;
    }
    if (i2 != null && i2.dom_event_allowlist) {
      var u2 = i2.dom_event_allowlist;
      if (u2 && !u2.some(function(e6) {
        return t2.type === e6;
      }))
        return false;
    }
    for (var l2 = false, c2 = [e5], d2 = true, f2 = e5; f2.parentNode && !le(f2, "body"); )
      if (de(f2.parentNode))
        c2.push(f2.parentNode.host), f2 = f2.parentNode.host;
      else {
        if (!(d2 = fe(f2)))
          break;
        if (r2 || he.indexOf(d2.tagName.toLowerCase()) > -1)
          l2 = true;
        else {
          var p2 = E.getComputedStyle(d2);
          p2 && p2.getPropertyValue("cursor") === "pointer" && (l2 = true);
        }
        c2.push(d2), f2 = d2;
      }
    if (!function(e6, t3) {
      var i3 = t3 == null ? void 0 : t3.element_allowlist;
      if (w(i3))
        return true;
      var r3, s3 = h(e6);
      try {
        var o3 = function() {
          var e7 = r3.value;
          if (i3.some(function(t4) {
            return e7.tagName.toLowerCase() === t4;
          }))
            return { v: true };
        };
        for (s3.s(); !(r3 = s3.n()).done; ) {
          var a3 = o3();
          if (n(a3) === "object")
            return a3.v;
        }
      } catch (e7) {
        s3.e(e7);
      } finally {
        s3.f();
      }
      return false;
    }(c2, i2))
      return false;
    if (!function(e6, t3) {
      var i3 = t3 == null ? void 0 : t3.css_selector_allowlist;
      if (w(i3))
        return true;
      var r3, s3 = h(e6);
      try {
        var o3 = function() {
          var e7 = r3.value;
          if (i3.some(function(t4) {
            return e7.matches(t4);
          }))
            return { v: true };
        };
        for (s3.s(); !(r3 = s3.n()).done; ) {
          var a3 = o3();
          if (n(a3) === "object")
            return a3.v;
        }
      } catch (e7) {
        s3.e(e7);
      } finally {
        s3.f();
      }
      return false;
    }(c2, i2))
      return false;
    var g2 = E.getComputedStyle(e5);
    if (g2 && g2.getPropertyValue("cursor") === "pointer" && t2.type === "click")
      return true;
    var v2 = e5.tagName.toLowerCase();
    switch (v2) {
      case "html":
        return false;
      case "form":
        return (s2 || ["submit"]).indexOf(t2.type) >= 0;
      case "input":
      case "select":
      case "textarea":
        return (s2 || ["change", "click"]).indexOf(t2.type) >= 0;
      default:
        return l2 ? (s2 || ["click"]).indexOf(t2.type) >= 0 : (s2 || ["click"]).indexOf(t2.type) >= 0 && (he.indexOf(v2) > -1 || e5.getAttribute("contenteditable") === "true");
    }
  }
  function ge(e5) {
    for (var t2 = e5; t2.parentNode && !le(t2, "body"); t2 = t2.parentNode) {
      var n2 = se(t2);
      if (Q(n2, "ph-sensitive") || Q(n2, "ph-no-capture"))
        return false;
    }
    if (Q(se(e5), "ph-include"))
      return true;
    var i2 = e5.type || "";
    if (k(i2))
      switch (i2.toLowerCase()) {
        case "hidden":
        case "password":
          return false;
      }
    var r2 = e5.name || e5.id || "";
    if (k(r2)) {
      if (/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(r2.replace(/[^a-zA-Z0-9]/g, "")))
        return false;
    }
    return true;
  }
  function ve(e5) {
    return !!(le(e5, "input") && !["button", "checkbox", "submit", "reset"].includes(e5.type) || le(e5, "select") || le(e5, "textarea") || e5.getAttribute("contenteditable") === "true");
  }
  function _e(e5) {
    if (F(e5))
      return false;
    if (k(e5)) {
      e5 = V(e5);
      if (/^(?:(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11}))$/.test((e5 || "").replace(/[- ]/g, "")))
        return false;
      if (/(^\d{3}-?\d{2}-?\d{4}$)/.test(e5))
        return false;
    }
    return true;
  }
  function me(e5) {
    var t2 = ae(e5);
    return _e(t2 = "".concat(t2, " ").concat(ye(e5)).trim()) ? t2 : "";
  }
  function ye(e5) {
    var t2 = "";
    return e5 && e5.childNodes && e5.childNodes.length && z(e5.childNodes, function(e6) {
      var n2;
      if (e6 && ((n2 = e6.tagName) === null || n2 === void 0 ? void 0 : n2.toLowerCase()) === "span")
        try {
          var i2 = ae(e6);
          t2 = "".concat(t2, " ").concat(i2).trim(), e6.childNodes && e6.childNodes.length && (t2 = "".concat(t2, " ").concat(ye(e6)).trim());
        } catch (e7) {
          j.error(e7);
        }
    }), t2;
  }
  function be(e5) {
    return function(e6) {
      var n2 = e6.map(function(e7) {
        var n3, i2, r2 = "";
        if (e7.tag_name && (r2 += e7.tag_name), e7.attr_class) {
          e7.attr_class.sort();
          var s2, o2 = h(e7.attr_class);
          try {
            for (o2.s(); !(s2 = o2.n()).done; ) {
              var a2 = s2.value;
              r2 += ".".concat(a2.replace(/"/g, ""));
            }
          } catch (e8) {
            o2.e(e8);
          } finally {
            o2.f();
          }
        }
        var l2 = t(t(t(t({}, e7.text ? { text: e7.text } : {}), {}, { "nth-child": (n3 = e7.nth_child) !== null && n3 !== void 0 ? n3 : 0, "nth-of-type": (i2 = e7.nth_of_type) !== null && i2 !== void 0 ? i2 : 0 }, e7.href ? { href: e7.href } : {}), e7.attr_id ? { attr_id: e7.attr_id } : {}), e7.attributes), c2 = {};
        return Y(l2).sort(function(e8, t2) {
          var n4 = u(e8, 1)[0], i3 = u(t2, 1)[0];
          return n4.localeCompare(i3);
        }).forEach(function(e8) {
          var t2 = u(e8, 2), n4 = t2[0], i3 = t2[1];
          return c2[we(n4.toString())] = we(i3.toString());
        }), r2 += ":", r2 += Y(l2).map(function(e8) {
          var t2 = u(e8, 2), n4 = t2[0], i3 = t2[1];
          return "".concat(n4, '="').concat(i3, '"');
        }).join("");
      });
      return n2.join(";");
    }(function(e6) {
      return e6.map(function(e7) {
        var t2, n2, i2 = { text: (t2 = e7.$el_text) === null || t2 === void 0 ? void 0 : t2.slice(0, 400), tag_name: e7.tag_name, href: (n2 = e7.attr__href) === null || n2 === void 0 ? void 0 : n2.slice(0, 2048), attr_class: ke(e7), attr_id: e7.attr__id, nth_child: e7.nth_child, nth_of_type: e7.nth_of_type, attributes: {} };
        return Y(e7).filter(function(e8) {
          return u(e8, 1)[0].indexOf("attr__") === 0;
        }).forEach(function(e8) {
          var t3 = u(e8, 2), n3 = t3[0], r2 = t3[1];
          return i2.attributes[n3] = r2;
        }), i2;
      });
    }(e5));
  }
  function we(e5) {
    return e5.replace(/"|\\"/g, '\\"');
  }
  function ke(e5) {
    var t2 = e5.attr__class;
    return t2 ? m(t2) ? t2 : re(t2) : void 0;
  }
  var Se = function() {
    function e5(t2) {
      i(this, e5), this.clicks = [], this.enabled = t2;
    }
    return s(e5, [{ key: "isRageClick", value: function(e6, t2, n2) {
      if (!this.enabled)
        return false;
      var i2 = this.clicks[this.clicks.length - 1];
      if (i2 && Math.abs(e6 - i2.x) + Math.abs(t2 - i2.y) < 30 && n2 - i2.timestamp < 1e3) {
        if (this.clicks.push({ x: e6, y: t2, timestamp: n2 }), this.clicks.length === 3)
          return true;
      } else
        this.clicks = [{ x: e6, y: t2, timestamp: n2 }];
      return false;
    } }]), e5;
  }();
  var Fe = "$people_distinct_id";
  var Re = "__alias";
  var xe = "__timers";
  var Pe = "$autocapture_disabled_server_side";
  var Ee = "$session_recording_enabled_server_side";
  var Ie = "$console_log_recording_enabled_server_side";
  var Ce = "$session_recording_recorder_version_server_side";
  var $e = "$session_recording_network_payload_capture";
  var Te = "$session_recording_canvas_recording";
  var Oe = "$sesid";
  var Ae = "$session_is_sampled";
  var Me = "$enabled_feature_flags";
  var qe = "$early_access_features";
  var De = "$stored_person_properties";
  var Le = "$stored_group_properties";
  var Ne = "$surveys";
  var Be = "$flag_call_reported";
  var He = "$user_state";
  var je = "$posthog_quota_limited";
  var Ue = "$client_session_props";
  var Ve = [Fe, Re, "__cmpns", xe, Ee, Oe, Me, He, je, qe, Le, De, Ne, Be, Ue];
  var We = "$copy_autocapture";
  function ze(e5, t2) {
    return t2.length > e5 ? t2.slice(0, e5) + "..." : t2;
  }
  var Ge;
  var Qe = { _initializedTokens: [], _isDisabledServerSide: null, _isAutocaptureEnabled: false, _setIsAutocaptureEnabled: function(e5) {
    var t2, n2 = S(this._isDisabledServerSide) ? !((t2 = e5.persistence) === null || t2 === void 0 || !t2.props[Pe]) : this._isDisabledServerSide, i2 = !!e5.config.autocapture;
    this._isAutocaptureEnabled = i2 && !n2;
  }, _previousElementSibling: function(e5) {
    if (e5.previousElementSibling)
      return e5.previousElementSibling;
    var t2 = e5;
    do {
      t2 = t2.previousSibling;
    } while (t2 && !ue(t2));
    return t2;
  }, _getAugmentPropertiesFromElement: function(e5) {
    if (!ge(e5))
      return {};
    var t2 = {};
    return z(e5.attributes, function(e6) {
      if (e6.name.indexOf("data-ph-capture-attribute") === 0) {
        var n2 = e6.name.replace("data-ph-capture-attribute-", ""), i2 = e6.value;
        n2 && i2 && _e(i2) && (t2[n2] = i2);
      }
    }), t2;
  }, _getPropertiesFromElement: function(e5, t2, n2) {
    var i2, r2 = e5.tagName.toLowerCase(), s2 = { tag_name: r2 };
    he.indexOf(r2) > -1 && !n2 && (r2.toLowerCase() === "a" || r2.toLowerCase() === "button" ? s2.$el_text = ze(1024, me(e5)) : s2.$el_text = ze(1024, ae(e5)));
    var o2 = se(e5);
    o2.length > 0 && (s2.classes = o2.filter(function(e6) {
      return e6 !== "";
    }));
    var a2 = (i2 = this.config) === null || i2 === void 0 ? void 0 : i2.element_attribute_ignorelist;
    z(e5.attributes, function(n3) {
      var i3;
      if ((!ve(e5) || ["name", "id", "class"].indexOf(n3.name) !== -1) && ((a2 == null || !a2.includes(n3.name)) && !t2 && _e(n3.value) && (i3 = n3.name, !k(i3) || i3.substring(0, 10) !== "_ngcontent" && i3.substring(0, 7) !== "_nghost"))) {
        var r3 = n3.value;
        n3.name === "class" && (r3 = re(r3).join(" ")), s2["attr__" + n3.name] = ze(1024, r3);
      }
    });
    for (var u2 = 1, l2 = 1, c2 = e5; c2 = this._previousElementSibling(c2); )
      u2++, c2.tagName === e5.tagName && l2++;
    return s2.nth_child = u2, s2.nth_of_type = l2, s2;
  }, _getDefaultProperties: function(e5) {
    return { $event_type: e5, $ce_version: 1 };
  }, _extractCustomPropertyValue: function(e5) {
    var t2 = [];
    return z(A == null ? void 0 : A.querySelectorAll(e5.css_selector), function(e6) {
      var n2;
      ["input", "select"].indexOf(e6.tagName.toLowerCase()) > -1 ? n2 = e6.value : e6.textContent && (n2 = e6.textContent), _e(n2) && t2.push(n2);
    }), t2.join(", ");
  }, _getCustomProperties: function(e5) {
    var t2 = this, n2 = {};
    return z(this._customProperties, function(i2) {
      z(i2.event_selectors, function(r2) {
        z(A == null ? void 0 : A.querySelectorAll(r2), function(r3) {
          Q(e5, r3) && ge(r3) && (n2[i2.name] = t2._extractCustomPropertyValue(i2));
        });
      });
    }), n2;
  }, _getEventTarget: function(e5) {
    return w(e5.target) ? e5.srcElement || null : (t2 = e5.target) !== null && t2 !== void 0 && t2.shadowRoot ? e5.composedPath()[0] || null : e5.target || null;
    var t2;
  }, _captureEvent: function(e5, t2) {
    var n2, i2 = this, r2 = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : "$autocapture", s2 = arguments.length > 3 ? arguments[3] : void 0, o2 = this._getEventTarget(e5);
    (ce(o2) && (o2 = o2.parentNode || null), r2 === "$autocapture" && e5.type === "click" && e5 instanceof MouseEvent) && ((n2 = this.rageclicks) !== null && n2 !== void 0 && n2.isRageClick(e5.clientX, e5.clientY, new Date().getTime()) && this._captureEvent(e5, t2, "$rageclick"));
    var a2 = r2 === We;
    if (o2 && pe(o2, e5, this.config, a2, a2 ? ["copy", "cut"] : void 0)) {
      for (var u2, l2, c2 = [o2], d2 = o2; d2.parentNode && !le(d2, "body"); )
        de(d2.parentNode) ? (c2.push(d2.parentNode.host), d2 = d2.parentNode.host) : (c2.push(d2.parentNode), d2 = d2.parentNode);
      var h2, f2 = [], p2 = {}, g2 = false;
      if (z(c2, function(e6) {
        var n3 = ge(e6);
        e6.tagName.toLowerCase() === "a" && (h2 = e6.getAttribute("href"), h2 = n3 && _e(h2) && h2), Q(se(e6), "ph-no-capture") && (g2 = true), f2.push(i2._getPropertiesFromElement(e6, t2.config.mask_all_element_attributes, t2.config.mask_all_text));
        var r3 = i2._getAugmentPropertiesFromElement(e6);
        G(p2, r3);
      }), t2.config.mask_all_text || (o2.tagName.toLowerCase() === "a" || o2.tagName.toLowerCase() === "button" ? f2[0].$el_text = me(o2) : f2[0].$el_text = ae(o2)), h2 && (f2[0].attr__href = h2), g2)
        return false;
      var v2 = G(this._getDefaultProperties(e5.type), t2.elementsChainAsString ? { $elements_chain: be(f2) } : { $elements: f2 }, (u2 = f2[0]) !== null && u2 !== void 0 && u2.$el_text ? { $el_text: (l2 = f2[0]) === null || l2 === void 0 ? void 0 : l2.$el_text } : {}, this._getCustomProperties(c2), p2, s2 || {});
      if (r2 === We) {
        var _2, m2 = oe(E == null || (_2 = E.getSelection()) === null || _2 === void 0 ? void 0 : _2.toString()), y2 = e5.type || "clipboard";
        if (!m2)
          return false;
        v2.$selected_content = m2, v2.$copy_type = y2;
      }
      return t2.capture(r2, v2), true;
    }
  }, _navigate: function(e5) {
    E && (E.location.href = e5);
  }, _addDomEventHandlers: function(e5) {
    var t2 = this;
    if (E && A) {
      var n2 = function(n3) {
        n3 = n3 || (E == null ? void 0 : E.event), t2._captureEvent(n3, e5);
      }, i2 = function(n3) {
        n3 = n3 || (E == null ? void 0 : E.event), t2._captureEvent(n3, e5, We);
      };
      ne(A, "submit", n2, false, true), ne(A, "change", n2, false, true), ne(A, "click", n2, false, true), b(e5.config.autocapture) && e5.config.autocapture.capture_copied_text && (ne(A, "copy", i2, false, true), ne(A, "cut", i2, false, true));
    }
  }, _customProperties: [], rageclicks: null, config: void 0, init: function(e5) {
    var t2;
    x(e5.__autocapture) || (this.config = e5.__autocapture), (t2 = this.config) !== null && t2 !== void 0 && t2.url_allowlist && (this.config.url_allowlist = this.config.url_allowlist.map(function(e6) {
      return new RegExp(e6);
    })), this.rageclicks = new Se(e5.config.rageclick);
  }, afterDecideResponse: function(e5, t2) {
    var n2 = t2.config.token;
    this._initializedTokens.indexOf(n2) > -1 ? j.info('autocapture already initialized for token "' + n2 + '"') : (t2.persistence && t2.persistence.register(o({}, Pe, !!e5.autocapture_opt_out)), this._isDisabledServerSide = !!e5.autocapture_opt_out, this._setIsAutocaptureEnabled(t2), this._initializedTokens.push(n2), e5 && e5.config && e5.config.enable_collect_everything && this._isAutocaptureEnabled ? (e5.custom_properties && (this._customProperties = e5.custom_properties), this._addDomEventHandlers(t2)) : t2.__autocapture = false);
  }, enabledForProject: function(e5, t2, n2) {
    if (!e5)
      return true;
    t2 = w(t2) ? 10 : t2, n2 = w(n2) ? 10 : n2;
    for (var i2 = 0, r2 = 0; r2 < e5.length; r2++)
      i2 += e5.charCodeAt(r2);
    return i2 % t2 < n2;
  }, isBrowserSupported: function() {
    return y(A == null ? void 0 : A.querySelectorAll);
  } };
  !function(e5) {
    for (var t2 in e5)
      y(e5[t2]) && (e5[t2] = e5[t2].bind(e5));
  }(Qe), function(e5) {
    for (var t2 in e5)
      y(e5[t2]) && (e5[t2] = X(e5[t2]));
  }(Qe), function(e5) {
    e5.GZipJS = "gzip-js", e5.Base64 = "base64";
  }(Ge || (Ge = {}));
  var Ye = "$active_feature_flags";
  var Je = "$override_feature_flags";
  var Ke = "$feature_flag_payloads";
  var Xe = function(e5) {
    var t2, n2 = {}, i2 = h(Y(e5 || {}));
    try {
      for (i2.s(); !(t2 = i2.n()).done; ) {
        var r2 = u(t2.value, 2), s2 = r2[0], o2 = r2[1];
        o2 && (n2[s2] = o2);
      }
    } catch (e6) {
      i2.e(e6);
    } finally {
      i2.f();
    }
    return n2;
  };
  var Ze = function() {
    function e5(t2) {
      i(this, e5), this.instance = t2, this._override_warning = false, this.featureFlagEventHandlers = [], this.reloadFeatureFlagsQueued = false, this.reloadFeatureFlagsInAction = false;
    }
    return s(e5, [{ key: "getFlags", value: function() {
      return Object.keys(this.getFlagVariants());
    } }, { key: "getFlagVariants", value: function() {
      var e6 = this.instance.get_property(Me), t2 = this.instance.get_property(Je);
      if (!t2)
        return e6 || {};
      for (var n2 = G({}, e6), i2 = Object.keys(t2), r2 = 0; r2 < i2.length; r2++)
        t2[i2[r2]] === false ? delete n2[i2[r2]] : n2[i2[r2]] = t2[i2[r2]];
      return this._override_warning || (j.warn(" Overriding feature flags!", { enabledFlags: e6, overriddenFlags: t2, finalFlags: n2 }), this._override_warning = true), n2;
    } }, { key: "getFlagPayloads", value: function() {
      return this.instance.get_property(Ke) || {};
    } }, { key: "reloadFeatureFlags", value: function() {
      this.reloadFeatureFlagsQueued || (this.reloadFeatureFlagsQueued = true, this._startReloadTimer());
    } }, { key: "setAnonymousDistinctId", value: function(e6) {
      this.$anon_distinct_id = e6;
    } }, { key: "setReloadingPaused", value: function(e6) {
      this.reloadFeatureFlagsInAction = e6;
    } }, { key: "resetRequestQueue", value: function() {
      this.reloadFeatureFlagsQueued = false;
    } }, { key: "_startReloadTimer", value: function() {
      var e6 = this;
      this.reloadFeatureFlagsQueued && !this.reloadFeatureFlagsInAction && setTimeout(function() {
        !e6.reloadFeatureFlagsInAction && e6.reloadFeatureFlagsQueued && (e6.reloadFeatureFlagsQueued = false, e6._reloadFeatureFlagsRequest());
      }, 5);
    } }, { key: "_reloadFeatureFlagsRequest", value: function() {
      var e6 = this;
      if (!this.instance.config.advanced_disable_feature_flags) {
        this.setReloadingPaused(true);
        var t2 = this.instance.config.token, n2 = this.instance.get_property(De), i2 = this.instance.get_property(Le), r2 = { token: t2, distinct_id: this.instance.get_distinct_id(), groups: this.instance.getGroups(), $anon_distinct_id: this.$anon_distinct_id, person_properties: n2, group_properties: i2, disable_flags: this.instance.config.advanced_disable_feature_flags || void 0 };
        this.instance._send_request({ method: "POST", url: this.instance.requestRouter.endpointFor("api", "/decide/?v=3"), data: r2, compression: Ge.Base64, timeout: this.instance.config.feature_flag_request_timeout_ms, callback: function(t3) {
          var n3;
          e6.setReloadingPaused(false);
          var i3 = true;
          t3.statusCode === 200 && (e6.$anon_distinct_id = void 0, i3 = false), e6.receivedFeatureFlags((n3 = t3.json) !== null && n3 !== void 0 ? n3 : {}, i3), e6._startReloadTimer();
        } });
      }
    } }, { key: "getFeatureFlag", value: function(e6) {
      var t2 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
      if (this.instance.decideEndpointWasHit || this.getFlags() && this.getFlags().length > 0) {
        var n2, i2 = this.getFlagVariants()[e6], r2 = "".concat(i2), s2 = this.instance.get_property(Be) || {};
        if (t2.send_event || !("send_event" in t2)) {
          if (!(e6 in s2) || !s2[e6].includes(r2))
            m(s2[e6]) ? s2[e6].push(r2) : s2[e6] = [r2], (n2 = this.instance.persistence) === null || n2 === void 0 || n2.register(o({}, Be, s2)), this.instance.capture("$feature_flag_called", { $feature_flag: e6, $feature_flag_response: i2 });
        }
        return i2;
      }
      j.warn('getFeatureFlag for key "' + e6 + `" failed. Feature flags didn't load in time.`);
    } }, { key: "getFeatureFlagPayload", value: function(e6) {
      return this.getFlagPayloads()[e6];
    } }, { key: "isFeatureEnabled", value: function(e6) {
      var t2 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
      if (this.instance.decideEndpointWasHit || this.getFlags() && this.getFlags().length > 0)
        return !!this.getFeatureFlag(e6, t2);
      j.warn('isFeatureEnabled for key "' + e6 + `" failed. Feature flags didn't load in time.`);
    } }, { key: "addFeatureFlagsHandler", value: function(e6) {
      this.featureFlagEventHandlers.push(e6);
    } }, { key: "removeFeatureFlagsHandler", value: function(e6) {
      this.featureFlagEventHandlers = this.featureFlagEventHandlers.filter(function(t2) {
        return t2 !== e6;
      });
    } }, { key: "receivedFeatureFlags", value: function(e6, n2) {
      if (this.instance.persistence) {
        this.instance.decideEndpointWasHit = true;
        var i2 = this.getFlagVariants(), r2 = this.getFlagPayloads();
        !function(e7, n3) {
          var i3, r3 = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {}, s2 = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : {}, a2 = e7.featureFlags, u2 = e7.featureFlagPayloads;
          if (a2)
            if (m(a2)) {
              var l2, c2 = {};
              if (a2)
                for (var d2 = 0; d2 < a2.length; d2++)
                  c2[a2[d2]] = true;
              n3 && n3.register((o(l2 = {}, Ye, a2), o(l2, Me, c2), l2));
            } else {
              var h2 = a2, f2 = u2;
              e7.errorsWhileComputingFlags && (h2 = t(t({}, r3), h2), f2 = t(t({}, s2), f2)), n3 && n3.register((o(i3 = {}, Ye, Object.keys(Xe(h2))), o(i3, Me, h2 || {}), o(i3, Ke, f2 || {}), i3));
            }
        }(e6, this.instance.persistence, i2, r2), this._fireFeatureFlagsCallbacks(n2);
      }
    } }, { key: "override", value: function(e6) {
      if (!this.instance.__loaded || !this.instance.persistence)
        return j.uninitializedWarning("posthog.feature_flags.override");
      if (this._override_warning = false, e6 === false)
        this.instance.persistence.unregister(Je);
      else if (m(e6)) {
        for (var t2 = {}, n2 = 0; n2 < e6.length; n2++)
          t2[e6[n2]] = true;
        this.instance.persistence.register(o({}, Je, t2));
      } else
        this.instance.persistence.register(o({}, Je, e6));
    } }, { key: "onFeatureFlags", value: function(e6) {
      var t2 = this;
      if (this.addFeatureFlagsHandler(e6), this.instance.decideEndpointWasHit) {
        var n2 = this._prepareFeatureFlagsForCallbacks(), i2 = n2.flags, r2 = n2.flagVariants;
        e6(i2, r2);
      }
      return function() {
        return t2.removeFeatureFlagsHandler(e6);
      };
    } }, { key: "updateEarlyAccessFeatureEnrollment", value: function(e6, n2) {
      var i2, r2, s2 = o({}, "$feature_enrollment/".concat(e6), n2);
      this.instance.capture("$feature_enrollment_update", { $feature_flag: e6, $feature_enrollment: n2, $set: s2 }), this.setPersonPropertiesForFlags(s2, false);
      var a2 = t(t({}, this.getFlagVariants()), {}, o({}, e6, n2));
      (i2 = this.instance.persistence) === null || i2 === void 0 || i2.register((o(r2 = {}, Ye, Object.keys(Xe(a2))), o(r2, Me, a2), r2)), this._fireFeatureFlagsCallbacks();
    } }, { key: "getEarlyAccessFeatures", value: function(e6) {
      var t2 = this, n2 = arguments.length > 1 && arguments[1] !== void 0 && arguments[1], i2 = this.instance.get_property(qe);
      if (i2 && !n2)
        return e6(i2);
      this.instance._send_request({ transport: "XHR", url: this.instance.requestRouter.endpointFor("api", "/api/early_access_features/?token=".concat(this.instance.config.token)), method: "GET", callback: function(n3) {
        var i3;
        if (n3.json) {
          var r2 = n3.json.earlyAccessFeatures;
          return (i3 = t2.instance.persistence) === null || i3 === void 0 || i3.register(o({}, qe, r2)), e6(r2);
        }
      } });
    } }, { key: "_prepareFeatureFlagsForCallbacks", value: function() {
      var e6 = this.getFlags(), t2 = this.getFlagVariants();
      return { flags: e6.filter(function(e7) {
        return t2[e7];
      }), flagVariants: Object.keys(t2).filter(function(e7) {
        return t2[e7];
      }).reduce(function(e7, n2) {
        return e7[n2] = t2[n2], e7;
      }, {}) };
    } }, { key: "_fireFeatureFlagsCallbacks", value: function(e6) {
      var t2 = this._prepareFeatureFlagsForCallbacks(), n2 = t2.flags, i2 = t2.flagVariants;
      this.featureFlagEventHandlers.forEach(function(t3) {
        return t3(n2, i2, { errorsLoading: e6 });
      });
    } }, { key: "setPersonPropertiesForFlags", value: function(e6) {
      var n2 = !(arguments.length > 1 && arguments[1] !== void 0) || arguments[1], i2 = this.instance.get_property(De) || {};
      this.instance.register(o({}, De, t(t({}, i2), e6))), n2 && this.instance.reloadFeatureFlags();
    } }, { key: "resetPersonPropertiesForFlags", value: function() {
      this.instance.unregister(De);
    } }, { key: "setGroupPropertiesForFlags", value: function(e6) {
      var n2 = !(arguments.length > 1 && arguments[1] !== void 0) || arguments[1], i2 = this.instance.get_property(Le) || {};
      Object.keys(i2).length !== 0 && Object.keys(i2).forEach(function(n3) {
        i2[n3] = t(t({}, i2[n3]), e6[n3]), delete e6[n3];
      }), this.instance.register(o({}, Le, t(t({}, i2), e6))), n2 && this.instance.reloadFeatureFlags();
    } }, { key: "resetGroupPropertiesForFlags", value: function(e6) {
      if (e6) {
        var n2 = this.instance.get_property(Le) || {};
        this.instance.register(o({}, Le, t(t({}, n2), {}, o({}, e6, {}))));
      } else
        this.instance.unregister(Le);
    } }]), e5;
  }();
  Math.trunc || (Math.trunc = function(e5) {
    return e5 < 0 ? Math.ceil(e5) : Math.floor(e5);
  }), Number.isInteger || (Number.isInteger = function(e5) {
    return R(e5) && isFinite(e5) && Math.floor(e5) === e5;
  });
  var et = "0123456789abcdef";
  var tt = function() {
    function e5(t2) {
      if (i(this, e5), this.bytes = t2, t2.length !== 16)
        throw new TypeError("not 128-bit length");
    }
    return s(e5, [{ key: "toString", value: function() {
      for (var e6 = "", t2 = 0; t2 < this.bytes.length; t2++)
        e6 = e6 + et.charAt(this.bytes[t2] >>> 4) + et.charAt(15 & this.bytes[t2]), t2 !== 3 && t2 !== 5 && t2 !== 7 && t2 !== 9 || (e6 += "-");
      if (e6.length !== 36)
        throw new Error("Invalid UUIDv7 was generated");
      return e6;
    } }, { key: "clone", value: function() {
      return new e5(this.bytes.slice(0));
    } }, { key: "equals", value: function(e6) {
      return this.compareTo(e6) === 0;
    } }, { key: "compareTo", value: function(e6) {
      for (var t2 = 0; t2 < 16; t2++) {
        var n2 = this.bytes[t2] - e6.bytes[t2];
        if (n2 !== 0)
          return Math.sign(n2);
      }
      return 0;
    } }], [{ key: "fromFieldsV7", value: function(t2, n2, i2, r2) {
      if (!Number.isInteger(t2) || !Number.isInteger(n2) || !Number.isInteger(i2) || !Number.isInteger(r2) || t2 < 0 || n2 < 0 || i2 < 0 || r2 < 0 || t2 > 281474976710655 || n2 > 4095 || i2 > 1073741823 || r2 > 4294967295)
        throw new RangeError("invalid field value");
      var s2 = new Uint8Array(16);
      return s2[0] = t2 / Math.pow(2, 40), s2[1] = t2 / Math.pow(2, 32), s2[2] = t2 / Math.pow(2, 24), s2[3] = t2 / Math.pow(2, 16), s2[4] = t2 / Math.pow(2, 8), s2[5] = t2, s2[6] = 112 | n2 >>> 8, s2[7] = n2, s2[8] = 128 | i2 >>> 24, s2[9] = i2 >>> 16, s2[10] = i2 >>> 8, s2[11] = i2, s2[12] = r2 >>> 24, s2[13] = r2 >>> 16, s2[14] = r2 >>> 8, s2[15] = r2, new e5(s2);
    } }]), e5;
  }();
  var nt = function() {
    function e5() {
      i(this, e5), o(this, "timestamp", 0), o(this, "counter", 0), o(this, "random", new st());
    }
    return s(e5, [{ key: "generate", value: function() {
      var e6 = this.generateOrAbort();
      if (w(e6)) {
        this.timestamp = 0;
        var t2 = this.generateOrAbort();
        if (w(t2))
          throw new Error("Could not generate UUID after timestamp reset");
        return t2;
      }
      return e6;
    } }, { key: "generateOrAbort", value: function() {
      var e6 = Date.now();
      if (e6 > this.timestamp)
        this.timestamp = e6, this.resetCounter();
      else {
        if (!(e6 + 1e4 > this.timestamp))
          return;
        this.counter++, this.counter > 4398046511103 && (this.timestamp++, this.resetCounter());
      }
      return tt.fromFieldsV7(this.timestamp, Math.trunc(this.counter / Math.pow(2, 30)), this.counter & Math.pow(2, 30) - 1, this.random.nextUint32());
    } }, { key: "resetCounter", value: function() {
      this.counter = 1024 * this.random.nextUint32() + (1023 & this.random.nextUint32());
    } }]), e5;
  }();
  var it = function(e5) {
    if (typeof UUIDV7_DENY_WEAK_RNG != "undefined" && UUIDV7_DENY_WEAK_RNG)
      throw new Error("no cryptographically strong RNG available");
    for (var t2 = 0; t2 < e5.length; t2++)
      e5[t2] = 65536 * Math.trunc(65536 * Math.random()) + Math.trunc(65536 * Math.random());
    return e5;
  };
  E && !w(E.crypto) && crypto.getRandomValues && (it = function(e5) {
    return crypto.getRandomValues(e5);
  });
  var rt;
  var st = function() {
    function e5() {
      i(this, e5), o(this, "buffer", new Uint32Array(8)), o(this, "cursor", 1 / 0);
    }
    return s(e5, [{ key: "nextUint32", value: function() {
      return this.cursor >= this.buffer.length && (it(this.buffer), this.cursor = 0), this.buffer[this.cursor++];
    } }]), e5;
  }();
  var ot = function() {
    return at().toString();
  };
  var at = function() {
    return (rt || (rt = new nt())).generate();
  };
  var ut = "Thu, 01 Jan 1970 00:00:00 GMT";
  var lt = "";
  var ct = /[a-z0-9][a-z0-9-]+\.[a-z]{2,}$/i;
  function dt(e5, t2) {
    if (t2) {
      var n2 = function(e6) {
        var t3 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : A;
        if (lt)
          return lt;
        if (!t3)
          return "";
        if (["localhost", "127.0.0.1"].includes(e6))
          return "";
        for (var n3 = e6.split("."), i3 = Math.min(n3.length, 8), r2 = "dmn_chk_" + ot(), s2 = new RegExp("(^|;)\\s*" + r2 + "=1"); !lt && i3--; ) {
          var o2 = n3.slice(i3).join("."), a2 = r2 + "=1;domain=." + o2;
          t3.cookie = a2, s2.test(t3.cookie) && (t3.cookie = a2 + ";expires=" + ut, lt = o2);
        }
        return lt;
      }(e5);
      if (!n2) {
        var i2 = function(e6) {
          var t3 = e6.match(ct);
          return t3 ? t3[0] : "";
        }(e5);
        i2 !== n2 && j.info("Warning: cookie subdomain discovery mismatch", i2, n2), n2 = i2;
      }
      return n2 ? "; domain=." + n2 : "";
    }
    return "";
  }
  var ht;
  var ft = { is_supported: function() {
    return !!A;
  }, error: function(e5) {
    j.error("cookieStore error: " + e5);
  }, get: function(e5) {
    if (A) {
      try {
        for (var t2 = e5 + "=", n2 = A.cookie.split(";").filter(function(e6) {
          return e6.length;
        }), i2 = 0; i2 < n2.length; i2++) {
          for (var r2 = n2[i2]; r2.charAt(0) == " "; )
            r2 = r2.substring(1, r2.length);
          if (r2.indexOf(t2) === 0)
            return decodeURIComponent(r2.substring(t2.length, r2.length));
        }
      } catch (e6) {
      }
      return null;
    }
  }, parse: function(e5) {
    var t2;
    try {
      t2 = JSON.parse(ft.get(e5)) || {};
    } catch (e6) {
    }
    return t2;
  }, set: function(e5, t2, n2, i2, r2) {
    if (A)
      try {
        var s2 = "", o2 = "", a2 = dt(A.location.hostname, i2);
        if (n2) {
          var u2 = new Date();
          u2.setTime(u2.getTime() + 24 * n2 * 60 * 60 * 1e3), s2 = "; expires=" + u2.toUTCString();
        }
        r2 && (o2 = "; secure");
        var l2 = e5 + "=" + encodeURIComponent(JSON.stringify(t2)) + s2 + "; SameSite=Lax; path=/" + a2 + o2;
        return l2.length > 3686.4 && j.warn("cookieStore warning: large cookie, len=" + l2.length), A.cookie = l2, l2;
      } catch (e6) {
        return;
      }
  }, remove: function(e5, t2) {
    try {
      ft.set(e5, "", -1, t2);
    } catch (e6) {
      return;
    }
  } };
  var pt = null;
  var gt = { is_supported: function() {
    if (!S(pt))
      return pt;
    var e5 = true;
    if (w(E))
      e5 = false;
    else
      try {
        var t2 = "__mplssupport__";
        gt.set(t2, "xyz"), gt.get(t2) !== '"xyz"' && (e5 = false), gt.remove(t2);
      } catch (t3) {
        e5 = false;
      }
    return e5 || j.error("localStorage unsupported; falling back to cookie store"), pt = e5, e5;
  }, error: function(e5) {
    j.error("localStorage error: " + e5);
  }, get: function(e5) {
    try {
      return E == null ? void 0 : E.localStorage.getItem(e5);
    } catch (e6) {
      gt.error(e6);
    }
    return null;
  }, parse: function(e5) {
    try {
      return JSON.parse(gt.get(e5)) || {};
    } catch (e6) {
    }
    return null;
  }, set: function(e5, t2) {
    try {
      E == null || E.localStorage.setItem(e5, JSON.stringify(t2));
    } catch (e6) {
      gt.error(e6);
    }
  }, remove: function(e5) {
    try {
      E == null || E.localStorage.removeItem(e5);
    } catch (e6) {
      gt.error(e6);
    }
  } };
  var vt = ["distinct_id", Oe, Ae];
  var _t = t(t({}, gt), {}, { parse: function(e5) {
    try {
      var t2 = {};
      try {
        t2 = ft.parse(e5) || {};
      } catch (e6) {
      }
      var n2 = G(t2, JSON.parse(gt.get(e5) || "{}"));
      return gt.set(e5, n2), n2;
    } catch (e6) {
    }
    return null;
  }, set: function(e5, t2, n2, i2, r2) {
    try {
      gt.set(e5, t2);
      var s2 = {};
      vt.forEach(function(e6) {
        t2[e6] && (s2[e6] = t2[e6]);
      }), Object.keys(s2).length && ft.set(e5, s2, n2, i2, r2);
    } catch (e6) {
      gt.error(e6);
    }
  }, remove: function(e5, t2) {
    try {
      E == null || E.localStorage.removeItem(e5), ft.remove(e5, t2);
    } catch (e6) {
      gt.error(e6);
    }
  } });
  var mt = {};
  var yt = { is_supported: function() {
    return true;
  }, error: function(e5) {
    j.error("memoryStorage error: " + e5);
  }, get: function(e5) {
    return mt[e5] || null;
  }, parse: function(e5) {
    return mt[e5] || null;
  }, set: function(e5, t2) {
    mt[e5] = t2;
  }, remove: function(e5) {
    delete mt[e5];
  } };
  var bt = null;
  var wt = { is_supported: function() {
    if (!S(bt))
      return bt;
    if (bt = true, w(E))
      bt = false;
    else
      try {
        var e5 = "__support__";
        wt.set(e5, "xyz"), wt.get(e5) !== '"xyz"' && (bt = false), wt.remove(e5);
      } catch (e6) {
        bt = false;
      }
    return bt;
  }, error: function(e5) {
    j.error("sessionStorage error: ", e5);
  }, get: function(e5) {
    try {
      return E == null ? void 0 : E.sessionStorage.getItem(e5);
    } catch (e6) {
      wt.error(e6);
    }
    return null;
  }, parse: function(e5) {
    try {
      return JSON.parse(wt.get(e5)) || null;
    } catch (e6) {
    }
    return null;
  }, set: function(e5, t2) {
    try {
      E == null || E.sessionStorage.setItem(e5, JSON.stringify(t2));
    } catch (e6) {
      wt.error(e6);
    }
  }, remove: function(e5) {
    try {
      E == null || E.sessionStorage.removeItem(e5);
    } catch (e6) {
      wt.error(e6);
    }
  } };
  var kt = ["localhost", "127.0.0.1"];
  var St = function(e5) {
    var t2 = A == null ? void 0 : A.createElement("a");
    return w(t2) ? null : (t2.href = e5, t2);
  };
  var Ft = function(e5, t2) {
    return !!function(e6) {
      try {
        new RegExp(e6);
      } catch (e7) {
        return false;
      }
      return true;
    }(t2) && new RegExp(t2).test(e5);
  };
  var Rt = function(e5) {
    var t2, n2, i2 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : "&", r2 = [];
    return z(e5, function(e6, i3) {
      w(e6) || w(i3) || i3 === "undefined" || (t2 = encodeURIComponent(function(e7) {
        return e7 instanceof File;
      }(e6) ? e6.name : e6.toString()), n2 = encodeURIComponent(i3), r2[r2.length] = n2 + "=" + t2);
    }), r2.join(i2);
  };
  var xt = function(e5, t2) {
    for (var n2, i2 = ((e5.split("#")[0] || "").split("?")[1] || "").split("&"), r2 = 0; r2 < i2.length; r2++) {
      var s2 = i2[r2].split("=");
      if (s2[0] === t2) {
        n2 = s2;
        break;
      }
    }
    if (!m(n2) || n2.length < 2)
      return "";
    var o2 = n2[1];
    try {
      o2 = decodeURIComponent(o2);
    } catch (e6) {
      j.error("Skipping decoding for malformed query param: " + o2);
    }
    return o2.replace(/\+/g, " ");
  };
  var Pt = function(e5, t2) {
    var n2 = e5.match(new RegExp(t2 + "=([^&]*)"));
    return n2 ? n2[1] : null;
  };
  var Et = "Mobile";
  var It = "iOS";
  var Ct = "Android";
  var $t = "Tablet";
  var Tt = Ct + " " + $t;
  var Ot = "iPad";
  var At = "Apple";
  var Mt = At + " Watch";
  var qt = "Safari";
  var Dt = "BlackBerry";
  var Lt = "Samsung";
  var Nt = Lt + "Browser";
  var Bt = Lt + " Internet";
  var Ht = "Chrome";
  var jt = Ht + " OS";
  var Ut = Ht + " " + It;
  var Vt = "Internet Explorer";
  var Wt = Vt + " " + Et;
  var zt = "Opera";
  var Gt = zt + " Mini";
  var Qt = "Edge";
  var Yt = "Microsoft " + Qt;
  var Jt = "Firefox";
  var Kt = Jt + " " + It;
  var Xt = "Nintendo";
  var Zt = "PlayStation";
  var en = "Xbox";
  var tn = Ct + " " + Et;
  var nn = Et + " " + qt;
  var rn = "Windows";
  var sn = rn + " Phone";
  var on = "Nokia";
  var an = "Ouya";
  var un = "Generic";
  var ln = un + " " + Et.toLowerCase();
  var cn = un + " " + $t.toLowerCase();
  var dn = "Konqueror";
  var hn = "(\\d+(\\.\\d+)?)";
  var fn = new RegExp("Version/" + hn);
  var pn = new RegExp(en, "i");
  var gn = new RegExp(Zt + " \\w+", "i");
  var vn = new RegExp(Xt + " \\w+", "i");
  var _n = new RegExp(Dt + "|PlayBook|BB10", "i");
  var mn = { "NT3.51": "NT 3.11", "NT4.0": "NT 4.0", "5.0": "2000", 5.1: "XP", 5.2: "XP", "6.0": "Vista", 6.1: "7", 6.2: "8", 6.3: "8.1", 6.4: "10", "10.0": "10" };
  var yn = function(e5, t2) {
    return t2 && Q(t2, At) || function(e6) {
      return Q(e6, qt) && !Q(e6, Ht) && !Q(e6, Ct);
    }(e5);
  };
  var bn = function(e5, t2, n2) {
    return n2 ? zt : (t2 = t2 || "", Q(e5, " OPR/") && Q(e5, "Mini") ? Gt : Q(e5, " OPR/") ? zt : _n.test(e5) ? Dt : Q(e5, "IE" + Et) || Q(e5, "WPDesktop") ? Wt : Q(e5, Nt) ? Bt : Q(e5, Qt) || Q(e5, "Edg/") ? Yt : Q(e5, "FBIOS") ? "Facebook " + Et : Q(e5, Ht) ? Ht : Q(e5, "CriOS") ? Ut : Q(e5, "UCWEB") || Q(e5, "UCBrowser") ? "UC Browser" : Q(e5, "FxiOS") ? Kt : Q(e5, Ct) ? tn : Q(e5.toLowerCase(), dn.toLowerCase()) ? dn : yn(e5, t2) ? Q(e5, Et) ? nn : qt : Q(e5, Jt) ? Jt : Q(e5, "MSIE") || Q(e5, "Trident/") ? Vt : Q(e5, "Gecko") ? Jt : "");
  };
  var wn = (o(ht = {}, Wt, [new RegExp("rv:" + hn)]), o(ht, Yt, [new RegExp(Qt + "?\\/" + hn)]), o(ht, Ht, [new RegExp(Ht + "/" + hn)]), o(ht, Ut, [new RegExp("CriOS\\/" + hn)]), o(ht, "UC Browser", [new RegExp("(UCBrowser|UCWEB)\\/" + hn)]), o(ht, qt, [fn]), o(ht, nn, [fn]), o(ht, zt, [new RegExp("(Opera|OPR)\\/" + hn)]), o(ht, Jt, [new RegExp(Jt + "\\/" + hn)]), o(ht, Kt, [new RegExp("FxiOS\\/" + hn)]), o(ht, dn, [new RegExp("Konqueror[:/]?" + hn, "i")]), o(ht, Dt, [new RegExp(Dt + " " + hn), fn]), o(ht, tn, [new RegExp("android\\s" + hn)]), o(ht, Bt, [new RegExp(Nt + "\\/" + hn)]), o(ht, Vt, [new RegExp("(rv:|MSIE )" + hn)]), o(ht, "Mozilla", [new RegExp("rv:" + hn)]), ht);
  var kn = [[new RegExp(en + "; " + en + " (.*?)[);]", "i"), function(e5) {
    return [en, e5 && e5[1] || ""];
  }], [new RegExp(Xt, "i"), [Xt, ""]], [new RegExp(Zt, "i"), [Zt, ""]], [_n, [Dt, ""]], [new RegExp(rn, "i"), function(e5, t2) {
    if (/Phone/.test(t2) || /WPDesktop/.test(t2))
      return [sn, ""];
    if (new RegExp(Et).test(t2) && !/IEMobile\b/.test(t2))
      return [rn + " " + Et, ""];
    var n2 = /Windows NT ([0-9.]+)/i.exec(t2);
    if (n2 && n2[1]) {
      var i2 = n2[1], r2 = mn[i2] || "";
      return /arm/i.test(t2) && (r2 = "RT"), [rn, r2];
    }
    return [rn, ""];
  }], [/((iPhone|iPad|iPod).*?OS (\d+)_(\d+)_?(\d+)?|iPhone)/, function(e5) {
    if (e5 && e5[3]) {
      var t2 = [e5[3], e5[4], e5[5] || "0"];
      return [It, t2.join(".")];
    }
    return [It, ""];
  }], [/(watch.*\/(\d+\.\d+\.\d+)|watch os,(\d+\.\d+),)/i, function(e5) {
    var t2 = "";
    return e5 && e5.length >= 3 && (t2 = w(e5[2]) ? e5[3] : e5[2]), ["watchOS", t2];
  }], [new RegExp("(" + Ct + " (\\d+)\\.(\\d+)\\.?(\\d+)?|" + Ct + ")", "i"), function(e5) {
    if (e5 && e5[2]) {
      var t2 = [e5[2], e5[3], e5[4] || "0"];
      return [Ct, t2.join(".")];
    }
    return [Ct, ""];
  }], [/Mac OS X (\d+)[_.](\d+)[_.]?(\d+)?/i, function(e5) {
    var t2 = ["Mac OS X", ""];
    if (e5 && e5[1]) {
      var n2 = [e5[1], e5[2], e5[3] || "0"];
      t2[1] = n2.join(".");
    }
    return t2;
  }], [/Mac/i, ["Mac OS X", ""]], [/CrOS/, [jt, ""]], [/Linux|debian/i, ["Linux", ""]]];
  var Sn = function(e5) {
    return vn.test(e5) ? Xt : gn.test(e5) ? Zt : pn.test(e5) ? en : new RegExp(an, "i").test(e5) ? an : new RegExp("(" + sn + "|WPDesktop)", "i").test(e5) ? sn : /iPad/.test(e5) ? Ot : /iPod/.test(e5) ? "iPod Touch" : /iPhone/.test(e5) ? "iPhone" : /(watch)(?: ?os[,/]|\d,\d\/)[\d.]+/i.test(e5) ? Mt : _n.test(e5) ? Dt : /(kobo)\s(ereader|touch)/i.test(e5) ? "Kobo" : new RegExp(on, "i").test(e5) ? on : /(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i.test(e5) || /(kf[a-z]+)( bui|\)).+silk\//i.test(e5) ? "Kindle Fire" : /(Android|ZTE)/i.test(e5) ? !new RegExp(Et).test(e5) || /(9138B|TB782B|Nexus [97]|pixel c|HUAWEISHT|BTV|noble nook|smart ultra 6)/i.test(e5) ? /pixel[\daxl ]{1,6}/i.test(e5) && !/pixel c/i.test(e5) || /(huaweimed-al00|tah-|APA|SM-G92|i980|zte|U304AA)/i.test(e5) || /lmy47v/i.test(e5) && !/QTAQZ3/i.test(e5) ? Ct : Tt : Ct : new RegExp("(pda|" + Et + ")", "i").test(e5) ? ln : new RegExp($t, "i").test(e5) && !new RegExp($t + " pc", "i").test(e5) ? cn : "";
  };
  var Fn = "https?://(.*)";
  var Rn = { campaignParams: function(e5) {
    var t2 = ["utm_source", "utm_medium", "utm_campaign", "utm_content", "utm_term", "gclid", "gad_source", "gclsrc", "dclid", "gbraid", "wbraid", "fbclid", "msclkid", "twclid", "li_fat_id", "mc_cid", "igshid", "ttclid"].concat(e5 || []), n2 = {};
    return z(t2, function(e6) {
      var t3 = A ? xt(A.URL, e6) : "";
      t3.length && (n2[e6] = t3);
    }), n2;
  }, searchEngine: function() {
    var e5 = A == null ? void 0 : A.referrer;
    return e5 ? e5.search(Fn + "google.([^/?]*)") === 0 ? "google" : e5.search(Fn + "bing.com") === 0 ? "bing" : e5.search(Fn + "yahoo.com") === 0 ? "yahoo" : e5.search(Fn + "duckduckgo.com") === 0 ? "duckduckgo" : null : null;
  }, searchInfo: function() {
    var e5 = Rn.searchEngine(), t2 = e5 != "yahoo" ? "q" : "p", n2 = {};
    if (!S(e5)) {
      n2.$search_engine = e5;
      var i2 = A ? xt(A.referrer, t2) : "";
      i2.length && (n2.ph_keyword = i2);
    }
    return n2;
  }, browser: bn, browserVersion: function(e5, t2, n2) {
    var i2 = bn(e5, t2, n2), r2 = wn[i2];
    if (w(r2))
      return null;
    for (var s2 = 0; s2 < r2.length; s2++) {
      var o2 = r2[s2], a2 = e5.match(o2);
      if (a2)
        return parseFloat(a2[a2.length - 2]);
    }
    return null;
  }, browserLanguage: function() {
    return navigator.language || navigator.userLanguage;
  }, os: function(e5) {
    for (var t2 = 0; t2 < kn.length; t2++) {
      var n2 = u(kn[t2], 2), i2 = n2[0], r2 = n2[1], s2 = i2.exec(e5), o2 = s2 && (y(r2) ? r2(s2, e5) : r2);
      if (o2)
        return o2;
    }
    return ["", ""];
  }, device: Sn, deviceType: function(e5) {
    var t2 = Sn(e5);
    return t2 === Ot || t2 === Tt || t2 === "Kobo" || t2 === "Kindle Fire" || t2 === cn ? $t : t2 === Xt || t2 === en || t2 === Zt || t2 === an ? "Console" : t2 === Mt ? "Wearable" : t2 ? Et : "Desktop";
  }, referrer: function() {
    return (A == null ? void 0 : A.referrer) || "$direct";
  }, referringDomain: function() {
    var e5;
    return A != null && A.referrer && ((e5 = St(A.referrer)) === null || e5 === void 0 ? void 0 : e5.host) || "$direct";
  }, properties: function() {
    if (!N)
      return {};
    var e5 = u(Rn.os(N), 2), t2 = e5[0], n2 = e5[1];
    return G(Z({ $os: t2, $os_version: n2, $browser: Rn.browser(N, navigator.vendor, B.opera), $device: Rn.device(N), $device_type: Rn.deviceType(N) }), { $current_url: M == null ? void 0 : M.href, $host: M == null ? void 0 : M.host, $pathname: M == null ? void 0 : M.pathname, $raw_user_agent: N.length > 1e3 ? N.substring(0, 997) + "..." : N, $browser_version: Rn.browserVersion(N, navigator.vendor, B.opera), $browser_language: Rn.browserLanguage(), $screen_height: E == null ? void 0 : E.screen.height, $screen_width: E == null ? void 0 : E.screen.width, $viewport_height: E == null ? void 0 : E.innerHeight, $viewport_width: E == null ? void 0 : E.innerWidth, $lib: "web", $lib_version: f.LIB_VERSION, $insert_id: Math.random().toString(36).substring(2, 10) + Math.random().toString(36).substring(2, 10), $time: J() / 1e3 });
  }, people_properties: function() {
    if (!N)
      return {};
    var e5 = u(Rn.os(N), 2), t2 = e5[0], n2 = e5[1];
    return G(Z({ $os: t2, $os_version: n2, $browser: Rn.browser(N, navigator.vendor, B.opera) }), { $browser_version: Rn.browserVersion(N, navigator.vendor, B.opera) });
  } };
  var xn = ["cookie", "localstorage", "localstorage+cookie", "sessionstorage", "memory"];
  var Pn = function() {
    function e5(t2) {
      i(this, e5), this.config = t2, this.props = {}, this.campaign_params_saved = false, this.name = function(e6) {
        var t3 = "";
        return e6.token && (t3 = e6.token.replace(/\+/g, "PL").replace(/\//g, "SL").replace(/=/g, "EQ")), e6.persistence_name ? "ph_" + e6.persistence_name : "ph_" + t3 + "_posthog";
      }(t2), this.storage = this.buildStorage(t2), this.load(), this.update_config(t2, t2), this.save();
    }
    return s(e5, [{ key: "buildStorage", value: function(e6) {
      xn.indexOf(e6.persistence.toLowerCase()) === -1 && (j.critical("Unknown persistence type " + e6.persistence + "; falling back to localStorage+cookie"), e6.persistence = "localStorage+cookie");
      var t2 = e6.persistence.toLowerCase();
      return t2 === "localstorage" && gt.is_supported() ? gt : t2 === "localstorage+cookie" && _t.is_supported() ? _t : t2 === "sessionstorage" && wt.is_supported() ? wt : t2 === "memory" ? yt : t2 === "cookie" ? ft : _t.is_supported() ? _t : ft;
    } }, { key: "properties", value: function() {
      var e6 = {};
      return z(this.props, function(t2, n2) {
        if (n2 === Me && b(t2))
          for (var i2 = Object.keys(t2), r2 = 0; r2 < i2.length; r2++)
            e6["$feature/".concat(i2[r2])] = t2[i2[r2]];
        else
          o2 = n2, a2 = false, (S(s2 = Ve) ? a2 : T && s2.indexOf === T ? s2.indexOf(o2) != -1 : (z(s2, function(e7) {
            if (a2 || (a2 = e7 === o2))
              return U;
          }), a2)) || (e6[n2] = t2);
        var s2, o2, a2;
      }), e6;
    } }, { key: "load", value: function() {
      if (!this.disabled) {
        var e6 = this.storage.parse(this.name);
        e6 && (this.props = G({}, e6));
      }
    } }, { key: "save", value: function() {
      this.disabled || this.storage.set(this.name, this.props, this.expire_days, this.cross_subdomain, this.secure);
    } }, { key: "remove", value: function() {
      this.storage.remove(this.name, false), this.storage.remove(this.name, true);
    } }, { key: "clear", value: function() {
      this.remove(), this.props = {};
    } }, { key: "register_once", value: function(e6, t2, n2) {
      var i2 = this;
      if (b(e6)) {
        w(t2) && (t2 = "None"), this.expire_days = w(n2) ? this.default_expiry : n2;
        var r2 = false;
        if (z(e6, function(e7, n3) {
          i2.props.hasOwnProperty(n3) && i2.props[n3] !== t2 || (i2.props[n3] = e7, r2 = true);
        }), r2)
          return this.save(), true;
      }
      return false;
    } }, { key: "register", value: function(e6, t2) {
      var n2 = this;
      if (b(e6)) {
        this.expire_days = w(t2) ? this.default_expiry : t2;
        var i2 = false;
        if (z(e6, function(t3, r2) {
          e6.hasOwnProperty(r2) && n2.props[r2] !== t3 && (n2.props[r2] = t3, i2 = true);
        }), i2)
          return this.save(), true;
      }
      return false;
    } }, { key: "unregister", value: function(e6) {
      e6 in this.props && (delete this.props[e6], this.save());
    } }, { key: "update_campaign_params", value: function() {
      this.campaign_params_saved || (this.register(Rn.campaignParams(this.config.custom_campaign_params)), this.campaign_params_saved = true);
    } }, { key: "update_search_keyword", value: function() {
      this.register(Rn.searchInfo());
    } }, { key: "update_referrer_info", value: function() {
      this.register({ $referrer: this.props.$referrer || Rn.referrer(), $referring_domain: this.props.$referring_domain || Rn.referringDomain() });
    } }, { key: "get_referrer_info", value: function() {
      return Z({ $referrer: this.props.$referrer, $referring_domain: this.props.$referring_domain });
    } }, { key: "safe_merge", value: function(e6) {
      return z(this.props, function(t2, n2) {
        n2 in e6 || (e6[n2] = t2);
      }), e6;
    } }, { key: "update_config", value: function(e6, t2) {
      if (this.default_expiry = this.expire_days = e6.cookie_expiration, this.set_disabled(e6.disable_persistence), this.set_cross_subdomain(e6.cross_subdomain_cookie), this.set_secure(e6.secure_cookie), e6.persistence !== t2.persistence) {
        var n2 = this.buildStorage(e6), i2 = this.props;
        this.clear(), this.storage = n2, this.props = i2, this.save();
      }
    } }, { key: "set_disabled", value: function(e6) {
      this.disabled = e6, this.disabled ? this.remove() : this.save();
    } }, { key: "set_cross_subdomain", value: function(e6) {
      e6 !== this.cross_subdomain && (this.cross_subdomain = e6, this.remove(), this.save());
    } }, { key: "get_cross_subdomain", value: function() {
      return !!this.cross_subdomain;
    } }, { key: "set_secure", value: function(e6) {
      e6 !== this.secure && (this.secure = e6, this.remove(), this.save());
    } }, { key: "set_event_timer", value: function(e6, t2) {
      var n2 = this.props[xe] || {};
      n2[e6] = t2, this.props[xe] = n2, this.save();
    } }, { key: "remove_event_timer", value: function(e6) {
      var t2 = (this.props[xe] || {})[e6];
      return w(t2) || (delete this.props[xe][e6], this.save()), t2;
    } }, { key: "get_user_state", value: function() {
      return this.props[He] || "anonymous";
    } }, { key: "set_user_state", value: function(e6) {
      this.props[He] = e6, this.save();
    } }, { key: "get_quota_limits", value: function() {
      return this.props[je] || {};
    } }, { key: "set_quota_limits", value: function(e6) {
      this.props[je] = e6, this.save();
    } }]), e5;
  }();
  var En = 2;
  var In = 4;
  var Cn = s(function e2(t2) {
    var n2, r2, s2 = this, a2 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
    i(this, e2), o(this, "bucketSize", 100), o(this, "refillRate", 10), o(this, "mutationBuckets", {}), o(this, "loggedTracker", {}), o(this, "refillBuckets", function() {
      Object.keys(s2.mutationBuckets).forEach(function(e5) {
        s2.mutationBuckets[e5] = s2.mutationBuckets[e5] + s2.refillRate, s2.mutationBuckets[e5] >= s2.bucketSize && delete s2.mutationBuckets[e5];
      });
    }), o(this, "getNodeOrRelevantParent", function(e5) {
      var t3 = s2.rrweb.mirror.getNode(e5);
      if ((t3 == null ? void 0 : t3.nodeName) !== "svg" && t3 instanceof Element) {
        var n3 = t3.closest("svg");
        if (n3)
          return [s2.rrweb.mirror.getId(n3), n3];
      }
      return [e5, t3];
    }), o(this, "numberOfChanges", function(e5) {
      var t3, n3, i2, r3, s3, o2, a3, u2;
      return ((t3 = (n3 = e5.removes) === null || n3 === void 0 ? void 0 : n3.length) !== null && t3 !== void 0 ? t3 : 0) + ((i2 = (r3 = e5.attributes) === null || r3 === void 0 ? void 0 : r3.length) !== null && i2 !== void 0 ? i2 : 0) + ((s3 = (o2 = e5.texts) === null || o2 === void 0 ? void 0 : o2.length) !== null && s3 !== void 0 ? s3 : 0) + ((a3 = (u2 = e5.adds) === null || u2 === void 0 ? void 0 : u2.length) !== null && a3 !== void 0 ? a3 : 0);
    }), o(this, "throttleMutations", function(e5) {
      if (e5.type !== 3 || e5.data.source !== 0)
        return e5;
      var t3 = e5.data, n3 = s2.numberOfChanges(t3);
      t3.attributes && (t3.attributes = t3.attributes.filter(function(e6) {
        var t4, n4, i3, r3 = u(s2.getNodeOrRelevantParent(e6.id), 2), o2 = r3[0], a3 = r3[1];
        if (s2.mutationBuckets[o2] === 0)
          return false;
        (s2.mutationBuckets[o2] = (t4 = s2.mutationBuckets[o2]) !== null && t4 !== void 0 ? t4 : s2.bucketSize, s2.mutationBuckets[o2] = Math.max(s2.mutationBuckets[o2] - 1, 0), s2.mutationBuckets[o2] === 0) && (s2.loggedTracker[o2] || (s2.loggedTracker[o2] = true, (n4 = (i3 = s2.options).onBlockedNode) === null || n4 === void 0 || n4.call(i3, o2, a3)));
        return e6;
      }));
      var i2 = s2.numberOfChanges(t3);
      return i2 !== 0 || n3 === i2 ? e5 : void 0;
    }), this.rrweb = t2, this.options = a2, this.refillRate = (n2 = this.options.refillRate) !== null && n2 !== void 0 ? n2 : this.refillRate, this.bucketSize = (r2 = this.options.bucketSize) !== null && r2 !== void 0 ? r2 : this.bucketSize, setInterval(function() {
      s2.refillBuckets();
    }, 1e3);
  });
  var $n = function(e5) {
    return e5[e5.DomContentLoaded = 0] = "DomContentLoaded", e5[e5.Load = 1] = "Load", e5[e5.FullSnapshot = 2] = "FullSnapshot", e5[e5.IncrementalSnapshot = 3] = "IncrementalSnapshot", e5[e5.Meta = 4] = "Meta", e5[e5.Custom = 5] = "Custom", e5[e5.Plugin = 6] = "Plugin", e5;
  }($n || {});
  var Tn = { initiatorTypes: ["audio", "beacon", "body", "css", "early-hint", "embed", "fetch", "frame", "iframe", "icon", "image", "img", "input", "link", "navigation", "object", "ping", "script", "track", "video", "xmlhttprequest"], maskRequestFn: function(e5) {
    return e5;
  }, recordHeaders: false, recordBody: false, recordInitialRequests: false, recordPerformance: false, performanceEntryTypeToObserve: ["first-input", "navigation", "paint", "resource"], payloadSizeLimitBytes: 1e6 };
  var On = ["authorization", "x-forwarded-for", "authorization", "cookie", "set-cookie", "x-api-key", "x-real-ip", "remote-addr", "forwarded", "proxy-authorization", "x-csrf-token", "x-csrftoken", "x-xsrf-token"];
  var An = ["/s/", "/e/", "/i/"];
  function Mn(e5, t2, n2, i2) {
    if (F(e5))
      return e5;
    var r2 = (t2 == null ? void 0 : t2["content-length"]) || function(e6) {
      return new Blob([e6]).size;
    }(e5);
    return k(r2) && (r2 = parseInt(r2)), r2 > n2 ? "[SessionReplay] ".concat(i2, " body too large to record (").concat(r2, " bytes)") : e5;
  }
  var qn = function(e5, n2) {
    var i2, r2, s2, o2 = e5.session_recording, a2 = o2.recordHeaders !== false && n2.recordHeaders, u2 = o2.recordBody !== false && n2.recordBody, l2 = o2.recordPerformance !== false && n2.recordPerformance, c2 = (i2 = o2, s2 = Math.min(1e6, (r2 = i2.payloadSizeLimitBytes) !== null && r2 !== void 0 ? r2 : 1e6), function(e6) {
      return e6 != null && e6.requestBody && (e6.requestBody = Mn(e6.requestBody, e6.requestHeaders, s2, "Request")), e6 != null && e6.responseBody && (e6.responseBody = Mn(e6.responseBody, e6.responseHeaders, s2, "Response")), e6;
    }), d2 = function(e6) {
      return c2(function(e7) {
        var t3 = St(e7.name);
        if (!(t3 && t3.pathname && An.some(function(e8) {
          return t3.pathname.indexOf(e8) === 0;
        })))
          return e7;
      }((t2 = e6, Object.keys((n3 = t2.requestHeaders) !== null && n3 !== void 0 ? n3 : {}).forEach(function(e7) {
        var n4;
        On.includes(e7.toLowerCase()) && ((n4 = t2.requestHeaders) === null || n4 === void 0 || delete n4[e7]);
      }), t2)));
      var t2, n3;
    }, h2 = y(e5.session_recording.maskNetworkRequestFn);
    return h2 && y(e5.session_recording.maskCapturedNetworkRequestFn) && j.warn("Both `maskNetworkRequestFn` and `maskCapturedNetworkRequestFn` are defined. `maskNetworkRequestFn` will be ignored."), h2 && (e5.session_recording.maskCapturedNetworkRequestFn = function(n3) {
      var i3 = e5.session_recording.maskNetworkRequestFn({ url: n3.name });
      return t(t({}, n3), {}, { name: i3 == null ? void 0 : i3.url });
    }), o2.maskRequestFn = y(e5.session_recording.maskCapturedNetworkRequestFn) ? function(t2) {
      var n3, i3, r3, s3 = d2(t2);
      return s3 && (n3 = (i3 = (r3 = e5.session_recording).maskCapturedNetworkRequestFn) === null || i3 === void 0 ? void 0 : i3.call(r3, s3)) !== null && n3 !== void 0 ? n3 : void 0;
    } : void 0, o2.maskRequestFn || (o2.maskRequestFn = d2), t(t(t({}, Tn), o2), {}, { recordHeaders: a2, recordBody: u2, recordPerformance: l2, recordInitialRequests: l2 });
  };
  var Dn = "__ph_opt_in_out_";
  function Ln(e5, t2) {
    zn(true, e5, t2);
  }
  function Nn(e5, t2) {
    zn(false, e5, t2);
  }
  function Bn(e5, t2) {
    return Wn(e5, t2) === "1";
  }
  function Hn(e5, t2) {
    return !!function(e6) {
      if (e6 && e6.respectDnt) {
        var t3 = e6 && e6.window || E, n2 = t3 == null ? void 0 : t3.navigator, i2 = false;
        return z([n2 == null ? void 0 : n2.doNotTrack, n2.msDoNotTrack, t3.doNotTrack], function(e7) {
          Q([true, 1, "1", "yes"], e7) && (i2 = true);
        }), i2;
      }
      return false;
    }(t2) || Wn(e5, t2) === "0";
  }
  function jn(e5, t2) {
    Un(t2 = t2 || {}).remove(Vn(e5, t2), !!t2.crossSubdomainCookie);
  }
  function Un(e5) {
    return (e5 = e5 || {}).persistenceType === "localStorage" ? gt : e5.persistenceType === "localStorage+cookie" ? _t : ft;
  }
  function Vn(e5, t2) {
    return ((t2 = t2 || {}).persistencePrefix || Dn) + e5;
  }
  function Wn(e5, t2) {
    return Un(t2).get(Vn(e5, t2));
  }
  function zn(e5, t2, n2) {
    k(t2) && t2.length ? (Un(n2 = n2 || {}).set(Vn(t2, n2), e5 ? 1 : 0, R(n2.cookieExpiration) ? n2.cookieExpiration : null, n2.crossSubdomainCookie, n2.secureCookie), n2.capture && e5 && n2.capture(n2.captureEventName || "$opt_in", n2.captureProperties || {}, { send_instantly: true })) : j.error("gdpr." + (e5 ? "optIn" : "optOut") + " called with an invalid token");
  }
  function Gn(e5) {
    var t2 = false;
    try {
      var n2 = e5.config.token, i2 = e5.config.respect_dnt, r2 = e5.config.opt_out_capturing_persistence_type, s2 = e5.config.opt_out_capturing_cookie_prefix || void 0, o2 = e5.config.window;
      n2 && (t2 = Hn(n2, { respectDnt: i2, persistenceType: r2, persistencePrefix: s2, window: o2 }));
    } catch (e6) {
      j.error("Unexpected error when checking capturing opt-out status: " + e6);
    }
    return t2;
  }
  var Qn;
  var Yn = 3e5;
  var Jn = Yn;
  !function(e5) {
    e5[e5.Mutation = 0] = "Mutation", e5[e5.MouseMove = 1] = "MouseMove", e5[e5.MouseInteraction = 2] = "MouseInteraction", e5[e5.Scroll = 3] = "Scroll", e5[e5.ViewportResize = 4] = "ViewportResize", e5[e5.Input = 5] = "Input", e5[e5.TouchMove = 6] = "TouchMove", e5[e5.MediaInteraction = 7] = "MediaInteraction", e5[e5.StyleSheetRule = 8] = "StyleSheetRule", e5[e5.CanvasMutation = 9] = "CanvasMutation", e5[e5.Font = 10] = "Font", e5[e5.Log = 11] = "Log", e5[e5.Drag = 12] = "Drag", e5[e5.StyleDeclaration = 13] = "StyleDeclaration", e5[e5.Selection = 14] = "Selection", e5[e5.AdoptedStyleSheet = 15] = "AdoptedStyleSheet";
  }(Qn || (Qn = {}));
  var Kn = [Qn.MouseMove, Qn.MouseInteraction, Qn.Scroll, Qn.ViewportResize, Qn.Input, Qn.TouchMove, Qn.MediaInteraction, Qn.Drag];
  var Xn = function(e5) {
    return { rrwebMethod: e5, enqueuedAt: Date.now(), attempt: 1 };
  };
  var Zn = "[SessionRecording]";
  var ei = function() {
    function e5(t2) {
      var n2 = this;
      if (i(this, e5), o(this, "queuedRRWebEvents", []), o(this, "isIdle", false), o(this, "_linkedFlagSeen", false), o(this, "_lastActivityTimestamp", Date.now()), o(this, "windowId", null), o(this, "sessionId", null), o(this, "_linkedFlag", null), o(this, "_sampleRate", null), o(this, "_minimumDuration", null), o(this, "_forceAllowLocalhostNetworkCapture", false), this.instance = t2, this._captureStarted = false, this._endpoint = "/s/", this.stopRrweb = void 0, this.receivedDecide = false, E == null || E.addEventListener("beforeunload", function() {
        n2._flushBuffer();
      }), E == null || E.addEventListener("offline", function() {
        n2._tryAddCustomEvent("browser offline", {});
      }), E == null || E.addEventListener("online", function() {
        n2._tryAddCustomEvent("browser online", {});
      }), !this.instance.sessionManager)
        throw j.error(Zn + " started without valid sessionManager"), new Error(Zn + " started without valid sessionManager. This is a bug.");
      this.buffer = this.clearBuffer();
    }
    return s(e5, [{ key: "started", get: function() {
      return this._captureStarted;
    } }, { key: "sessionManager", get: function() {
      if (!this.instance.sessionManager)
        throw j.error(Zn + " started without valid sessionManager"), new Error(Zn + " started without valid sessionManager. This is a bug.");
      return this.instance.sessionManager;
    } }, { key: "isSampled", get: function() {
      return R(this._sampleRate) ? this.instance.get_property(Ae) : null;
    } }, { key: "sessionDuration", get: function() {
      var e6, t2, n2 = (e6 = this.buffer) === null || e6 === void 0 ? void 0 : e6.data[((t2 = this.buffer) === null || t2 === void 0 ? void 0 : t2.data.length) - 1], i2 = this.sessionManager.checkAndGetSessionAndWindowId(true).sessionStartTimestamp;
      return n2 ? n2.timestamp - i2 : null;
    } }, { key: "isRecordingEnabled", get: function() {
      var e6 = !!this.instance.get_property(Ee), t2 = !this.instance.config.disable_session_recording;
      return E && e6 && t2;
    } }, { key: "isConsoleLogCaptureEnabled", get: function() {
      var e6 = !!this.instance.get_property(Ie), t2 = this.instance.config.enable_recording_console_log;
      return t2 != null ? t2 : e6;
    } }, { key: "canvasRecording", get: function() {
      var e6 = this.instance.get_property(Te);
      return e6 && e6.fps && e6.quality ? { enabled: e6.enabled, fps: e6.fps, quality: e6.quality } : void 0;
    } }, { key: "recordingVersion", get: function() {
      var e6, t2 = this.instance.get_property(Ce);
      return ((e6 = this.instance.config.session_recording) === null || e6 === void 0 ? void 0 : e6.recorderVersion) || t2 || "v1";
    } }, { key: "networkPayloadCapture", get: function() {
      var e6, t2, n2 = this.instance.get_property($e), i2 = { recordHeaders: (e6 = this.instance.config.session_recording) === null || e6 === void 0 ? void 0 : e6.recordHeaders, recordBody: (t2 = this.instance.config.session_recording) === null || t2 === void 0 ? void 0 : t2.recordBody }, r2 = (i2 == null ? void 0 : i2.recordHeaders) || (n2 == null ? void 0 : n2.recordHeaders), s2 = (i2 == null ? void 0 : i2.recordBody) || (n2 == null ? void 0 : n2.recordBody), o2 = this.instance.config.capture_performance || (n2 == null ? void 0 : n2.capturePerformance);
      return r2 || s2 || o2 ? { recordHeaders: r2, recordBody: s2, recordPerformance: o2 } : void 0;
    } }, { key: "status", get: function() {
      return this.receivedDecide ? this.isRecordingEnabled ? F(this._linkedFlag) || this._linkedFlagSeen ? x(this.isSampled) ? this.isSampled ? "sampled" : "disabled" : "active" : "buffering" : "disabled" : "buffering";
    } }, { key: "startRecordingIfEnabled", value: function() {
      this.isRecordingEnabled ? (this._startCapture(), j.info(Zn + " started")) : (this.stopRecording(), this.clearBuffer());
    } }, { key: "stopRecording", value: function() {
      this._captureStarted && this.stopRrweb && (this.stopRrweb(), this.stopRrweb = void 0, this._captureStarted = false, j.info(Zn + " stopped"));
    } }, { key: "makeSamplingDecision", value: function(e6) {
      var t2, n2 = this.sessionId !== e6;
      if (R(this._sampleRate)) {
        var i2, r2 = this.isSampled;
        if (n2 || !x(r2))
          i2 = Math.random() < this._sampleRate;
        else
          i2 = r2;
        i2 || j.warn(Zn + " Sample rate (".concat(this._sampleRate, ") has determined that this sessionId (").concat(e6, ") will not be sent to the server.")), (t2 = this.instance.persistence) === null || t2 === void 0 || t2.register(o({}, Ae, i2));
      } else {
        var s2;
        (s2 = this.instance.persistence) === null || s2 === void 0 || s2.register(o({}, Ae, null));
      }
    } }, { key: "afterDecideResponse", value: function(e6) {
      var n2, i2, r2, s2, a2, u2, l2, c2, d2, h2, f2, p2 = this;
      this.instance.persistence && this.instance.persistence.register((o(f2 = {}, Ee, !!e6.sessionRecording), o(f2, Ie, (a2 = e6.sessionRecording) === null || a2 === void 0 ? void 0 : a2.consoleLogRecordingEnabled), o(f2, Ce, (u2 = e6.sessionRecording) === null || u2 === void 0 ? void 0 : u2.recorderVersion), o(f2, $e, t({ capturePerformance: e6.capturePerformance }, (l2 = e6.sessionRecording) === null || l2 === void 0 ? void 0 : l2.networkPayloadCapture)), o(f2, Te, { enabled: (c2 = e6.sessionRecording) === null || c2 === void 0 ? void 0 : c2.recordCanvas, fps: (d2 = e6.sessionRecording) === null || d2 === void 0 ? void 0 : d2.canvasFps, quality: (h2 = e6.sessionRecording) === null || h2 === void 0 ? void 0 : h2.canvasQuality }), f2));
      var g2 = (n2 = e6.sessionRecording) === null || n2 === void 0 ? void 0 : n2.sampleRate;
      this._sampleRate = F(g2) ? null : parseFloat(g2);
      var v2, _2 = (i2 = e6.sessionRecording) === null || i2 === void 0 ? void 0 : i2.minimumDurationMilliseconds;
      (this._minimumDuration = w(_2) ? null : _2, this._linkedFlag = ((r2 = e6.sessionRecording) === null || r2 === void 0 ? void 0 : r2.linkedFlag) || null, (s2 = e6.sessionRecording) !== null && s2 !== void 0 && s2.endpoint) && (this._endpoint = (v2 = e6.sessionRecording) === null || v2 === void 0 ? void 0 : v2.endpoint);
      if (R(this._sampleRate) && this.sessionManager.onSessionId(function(e7) {
        p2.makeSamplingDecision(e7);
      }), !F(this._linkedFlag)) {
        var m2, y2, S2 = k(this._linkedFlag) ? this._linkedFlag : (m2 = this._linkedFlag) === null || m2 === void 0 ? void 0 : m2.flag, x2 = k(this._linkedFlag) ? null : (y2 = this._linkedFlag) === null || y2 === void 0 ? void 0 : y2.variant;
        this.instance.onFeatureFlags(function(e7, t2) {
          var n3 = b(t2) && S2 in t2, i3 = x2 ? t2[S2] === x2 : n3;
          i3 && j.info(Zn + " linked flag matched", { linkedFlag: S2, linkedVariant: x2 }), p2._linkedFlagSeen = i3;
        });
      }
      this.receivedDecide = true, this.startRecordingIfEnabled();
    } }, { key: "log", value: function(e6) {
      var t2, n2 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : "log";
      (t2 = this.instance.sessionRecording) === null || t2 === void 0 || t2.onRRwebEmit({ type: 6, data: { plugin: "rrweb/console@1", payload: { level: n2, trace: [], payload: [JSON.stringify(e6)] } }, timestamp: J() });
    } }, { key: "_startCapture", value: function() {
      var e6 = this;
      if (!w(Object.assign) && !(this._captureStarted || this.instance.config.disable_session_recording || Gn(this.instance))) {
        this._captureStarted = true, this.sessionManager.checkAndGetSessionAndWindowId();
        var t2 = this.recordingVersion === "v2" ? "recorder-v2.js" : "recorder.js";
        this.instance.__loaded_recorder_version !== this.recordingVersion ? ie(this.instance.requestRouter.endpointFor("assets", "/static/".concat(t2, "?v=").concat(f.LIB_VERSION)), function(n2) {
          if (n2)
            return j.error(Zn + " could not load ".concat(t2), n2);
          e6._onScriptLoaded();
        }) : this._onScriptLoaded();
      }
    } }, { key: "_isInteractiveEvent", value: function(e6) {
      var t2;
      return e6.type === 3 && Kn.indexOf((t2 = e6.data) === null || t2 === void 0 ? void 0 : t2.source) !== -1;
    } }, { key: "_updateWindowAndSessionIds", value: function(e6) {
      var t2 = this._isInteractiveEvent(e6);
      t2 || this.isIdle || e6.timestamp - this._lastActivityTimestamp > Jn && (this.isIdle = true, this._tryAddCustomEvent("sessionIdle", { reason: "user inactivity", timeSinceLastActive: e6.timestamp - this._lastActivityTimestamp, threshold: Jn }));
      var n2 = false;
      if (t2 && (this._lastActivityTimestamp = e6.timestamp, this.isIdle && (this.isIdle = false, this._tryAddCustomEvent("sessionNoLongerIdle", { reason: "user activity", type: e6.type }), n2 = true)), !this.isIdle) {
        var i2 = this.sessionManager.checkAndGetSessionAndWindowId(!t2, e6.timestamp), r2 = i2.windowId, s2 = i2.sessionId, o2 = this.sessionId !== s2, a2 = this.windowId !== r2;
        this.windowId = r2, this.sessionId = s2, (n2 || [En, In].indexOf(e6.type) === -1 && (a2 || o2)) && this._tryTakeFullSnapshot();
      }
    } }, { key: "_tryRRWebMethod", value: function(e6) {
      try {
        return e6.rrwebMethod(), true;
      } catch (t2) {
        return j.warn(Zn + " could not emit queued rrweb event.", t2), this.queuedRRWebEvents.length < 10 && this.queuedRRWebEvents.push({ enqueuedAt: e6.enqueuedAt || Date.now(), attempt: e6.attempt++, rrwebMethod: e6.rrwebMethod }), false;
      }
    } }, { key: "_tryAddCustomEvent", value: function(e6, t2) {
      var n2 = this;
      return this._tryRRWebMethod(Xn(function() {
        return n2.rrwebRecord.addCustomEvent(e6, t2);
      }));
    } }, { key: "_tryTakeFullSnapshot", value: function() {
      var e6 = this;
      return this._tryRRWebMethod(Xn(function() {
        return e6.rrwebRecord.takeFullSnapshot();
      }));
    } }, { key: "_onScriptLoaded", value: function() {
      var e6, n2 = this, i2 = { blockClass: "ph-no-capture", blockSelector: void 0, ignoreClass: "ph-ignore-input", maskTextClass: "ph-mask", maskTextSelector: void 0, maskTextFn: void 0, maskAllInputs: true, maskInputOptions: {}, maskInputFn: void 0, slimDOMOptions: {}, collectFonts: false, inlineStylesheet: true, recordCrossOriginIframes: false };
      this.rrwebRecord = E.rrweb ? E.rrweb.record : E.rrwebRecord;
      for (var r2 = this.instance.config.session_recording, s2 = 0, o2 = Object.entries(r2 || {}); s2 < o2.length; s2++) {
        var a2 = u(o2[s2], 2), l2 = a2[0], c2 = a2[1];
        l2 in i2 && (i2[l2] = c2);
      }
      if (this.canvasRecording && this.canvasRecording.enabled && (i2.recordCanvas = true, i2.sampling = { canvas: this.canvasRecording.fps }, i2.dataURLOptions = { type: "image/webp", quality: this.canvasRecording.quality }), this.rrwebRecord) {
        this.mutationRateLimiter = (e6 = this.mutationRateLimiter) !== null && e6 !== void 0 ? e6 : new Cn(this.rrwebRecord, { onBlockedNode: function(e7, t2) {
          var i3 = "Too many mutations on node '".concat(e7, "'. Rate limiting. This could be due to SVG animations or something similar");
          j.info(i3, { node: t2 }), n2.log(Zn + " " + i3, "warn");
        } }), this._scheduleFullSnapshot();
        var d2 = this._gatherRRWebPlugins();
        this.stopRrweb = this.rrwebRecord(t({ emit: function(e7) {
          n2.onRRwebEmit(e7);
        }, plugins: d2 }, i2)), this.instance._addCaptureHook(function(e7) {
          try {
            if (e7 === "$pageview") {
              var t2 = E ? n2._maskUrl(E.location.href) : "";
              if (!t2)
                return;
              n2._tryAddCustomEvent("$pageview", { href: t2 }), n2._tryTakeFullSnapshot();
            }
          } catch (e8) {
            j.error("Could not add $pageview to rrweb session", e8);
          }
        }), this._lastActivityTimestamp = Date.now(), this.isIdle = false, this._tryAddCustomEvent("$session_options", { sessionRecordingOptions: i2, activePlugins: d2.map(function(e7) {
          return e7 == null ? void 0 : e7.name;
        }) }), this._tryAddCustomEvent("$posthog_config", { config: this.instance.config });
      } else
        j.error(Zn + "onScriptLoaded was called but rrwebRecord is not available. This indicates something has gone wrong.");
    } }, { key: "_scheduleFullSnapshot", value: function() {
      var e6 = this;
      this._fullSnapshotTimer && clearInterval(this._fullSnapshotTimer), this._fullSnapshotTimer = setInterval(function() {
        e6._tryTakeFullSnapshot();
      }, Yn);
    } }, { key: "_gatherRRWebPlugins", value: function() {
      var e6 = [];
      (B.rrwebConsoleRecord && this.isConsoleLogCaptureEnabled && e6.push(B.rrwebConsoleRecord.getRecordConsolePlugin()), this.networkPayloadCapture && y(B.getRecordNetworkPlugin)) && (!kt.includes(location.hostname) || this._forceAllowLocalhostNetworkCapture ? e6.push(B.getRecordNetworkPlugin(qn(this.instance.config, this.networkPayloadCapture))) : j.info(Zn + " NetworkCapture not started because we are on localhost."));
      return e6;
    } }, { key: "onRRwebEmit", value: function(e6) {
      if (this._processQueuedEvents(), e6 && b(e6)) {
        if (e6.type === $n.Meta) {
          var t2 = this._maskUrl(e6.data.href);
          if (!t2)
            return;
          e6.data.href = t2;
        }
        e6.type === $n.FullSnapshot && this._scheduleFullSnapshot();
        var n2 = this.mutationRateLimiter ? this.mutationRateLimiter.throttleMutations(e6) : e6;
        if (n2) {
          var i2 = function(e7) {
            var t3 = e7;
            if (t3 && b(t3) && t3.type === 6 && b(t3.data) && t3.data.plugin === "rrweb/console@1") {
              t3.data.payload.payload.length > 10 && (t3.data.payload.payload = t3.data.payload.payload.slice(0, 10), t3.data.payload.payload.push("...[truncated]"));
              for (var n3 = [], i3 = 0; i3 < t3.data.payload.payload.length; i3++)
                t3.data.payload.payload[i3] && t3.data.payload.payload[i3].length > 2e3 ? n3.push(t3.data.payload.payload[i3].slice(0, 2e3) + "...[truncated]") : n3.push(t3.data.payload.payload[i3]);
              return t3.data.payload.payload = n3, e7;
            }
            return e7;
          }(n2), r2 = JSON.stringify(i2).length;
          if (this._updateWindowAndSessionIds(i2), !this.isIdle || i2.type === $n.Custom) {
            var s2 = { $snapshot_bytes: r2, $snapshot_data: i2, $session_id: this.sessionId, $window_id: this.windowId };
            this.status !== "disabled" ? this._captureSnapshotBuffered(s2) : this.clearBuffer();
          }
        }
      }
    } }, { key: "_processQueuedEvents", value: function() {
      var e6 = this;
      if (this.queuedRRWebEvents.length) {
        var t2 = l(this.queuedRRWebEvents);
        this.queuedRRWebEvents = [], t2.forEach(function(n2) {
          Date.now() - n2.enqueuedAt > 2e3 ? e6._tryAddCustomEvent("rrwebQueueTimeout", { enqueuedAt: n2.enqueuedAt, attempt: n2.attempt, queueLength: t2.length }) : e6._tryRRWebMethod(n2) && e6._tryAddCustomEvent("rrwebQueueSuccess", { enqueuedAt: n2.enqueuedAt, attempt: n2.attempt, queueLength: t2.length });
        });
      }
    } }, { key: "_maskUrl", value: function(e6) {
      var t2 = this.instance.config.session_recording;
      if (t2.maskNetworkRequestFn) {
        var n2, i2 = { url: e6 };
        return (n2 = i2 = t2.maskNetworkRequestFn(i2)) === null || n2 === void 0 ? void 0 : n2.url;
      }
      return e6;
    } }, { key: "clearBuffer", value: function() {
      return this.buffer = void 0, { size: 0, data: [], sessionId: this.sessionId, windowId: this.windowId };
    } }, { key: "_flushBuffer", value: function() {
      var e6 = this;
      this.flushBufferTimer && (clearTimeout(this.flushBufferTimer), this.flushBufferTimer = void 0);
      var t2 = this._minimumDuration, n2 = this.sessionDuration, i2 = R(n2) && n2 >= 0, r2 = R(t2) && i2 && n2 < t2;
      return this.status === "buffering" || r2 ? (this.flushBufferTimer = setTimeout(function() {
        e6._flushBuffer();
      }, 2e3), this.buffer || this.clearBuffer()) : this.buffer && this.buffer.data.length !== 0 ? (this._captureSnapshot({ $snapshot_bytes: this.buffer.size, $snapshot_data: this.buffer.data, $session_id: this.buffer.sessionId, $window_id: this.buffer.windowId }), this.clearBuffer()) : this.buffer || this.clearBuffer();
    } }, { key: "_captureSnapshotBuffered", value: function(e6) {
      var t2, n2 = this, i2 = 2 + (((t2 = this.buffer) === null || t2 === void 0 ? void 0 : t2.data.length) || 0);
      (!this.buffer || this.buffer.size + e6.$snapshot_bytes + i2 > 943718.4 || this.buffer.sessionId && this.buffer.sessionId !== this.sessionId) && (this.buffer = this._flushBuffer()), S(this.buffer.sessionId) && !S(this.sessionId) && (this.buffer.sessionId = this.sessionId, this.buffer.windowId = this.windowId), this.buffer.size += e6.$snapshot_bytes, this.buffer.data.push(e6.$snapshot_data), this.flushBufferTimer || (this.flushBufferTimer = setTimeout(function() {
        n2._flushBuffer();
      }, 2e3));
    } }, { key: "_captureSnapshot", value: function(e6) {
      this.instance.capture("$snapshot", e6, { _url: this.instance.requestRouter.endpointFor("api", this._endpoint), _noTruncate: true, _batchKey: "recordings" });
    } }]), e5;
  }();
  var ti = function() {
    function e5(t2) {
      i(this, e5), this.instance = t2, this.instance.decideEndpointWasHit = this.instance._hasBootstrappedFeatureFlags();
    }
    return s(e5, [{ key: "call", value: function() {
      var e6 = this, t2 = { token: this.instance.config.token, distinct_id: this.instance.get_distinct_id(), groups: this.instance.getGroups(), person_properties: this.instance.get_property(De), group_properties: this.instance.get_property(Le), disable_flags: this.instance.config.advanced_disable_feature_flags || this.instance.config.advanced_disable_feature_flags_on_first_load || void 0 };
      this.instance._send_request({ method: "POST", url: this.instance.requestRouter.endpointFor("api", "/decide/?v=3"), data: t2, compression: Ge.Base64, timeout: this.instance.config.feature_flag_request_timeout_ms, callback: function(t3) {
        return e6.parseDecideResponse(t3.json);
      } });
    } }, { key: "parseDecideResponse", value: function(e6) {
      var t2, n2 = this;
      this.instance.featureFlags.setReloadingPaused(false), this.instance.featureFlags._startReloadTimer();
      var i2 = !e6;
      if (this.instance.config.advanced_disable_feature_flags_on_first_load || this.instance.config.advanced_disable_feature_flags || this.instance.featureFlags.receivedFeatureFlags(e6 != null ? e6 : {}, i2), i2)
        j.error("Failed to fetch feature flags from PostHog.");
      else {
        if (!A || !A.body)
          return j.info("document not ready yet, trying again in 500 milliseconds..."), void setTimeout(function() {
            n2.parseDecideResponse(e6);
          }, 500);
        this.instance.toolbar.afterDecideResponse(e6), (t2 = this.instance.sessionRecording) === null || t2 === void 0 || t2.afterDecideResponse(e6), Qe.afterDecideResponse(e6, this.instance), this.instance._afterDecideResponse(e6);
        var r2 = E == null ? void 0 : E.extendPostHogWithSurveys;
        e6.surveys && !r2 && ie(this.instance.requestRouter.endpointFor("assets", "/static/surveys.js"), function(e7) {
          if (e7)
            return j.error("Could not load surveys script", e7);
          E.extendPostHogWithSurveys(n2.instance);
        });
        var s2 = E == null ? void 0 : E.extendPostHogWithExceptionAutoCapture;
        if (e6.autocaptureExceptions && e6.autocaptureExceptions && w(s2) && ie(this.instance.requestRouter.endpointFor("assets", "/static/exception-autocapture.js"), function(t3) {
          if (t3)
            return j.error("Could not load exception autocapture script", t3);
          E.extendPostHogWithExceptionAutocapture(n2.instance, e6);
        }), e6.siteApps)
          if (this.instance.config.opt_in_site_apps) {
            var o2, a2 = h(e6.siteApps);
            try {
              var u2 = function() {
                var e7 = o2.value, t3 = e7.id, i3 = e7.url, r3 = n2.instance.requestRouter.endpointFor("api", i3);
                B["__$$ph_site_app_".concat(t3)] = n2.instance, ie(r3, function(e8) {
                  e8 && j.error("Error while initializing PostHog app with config id ".concat(t3), e8);
                });
              };
              for (a2.s(); !(o2 = a2.n()).done; )
                u2();
            } catch (e7) {
              a2.e(e7);
            } finally {
              a2.f();
            }
          } else
            e6.siteApps.length > 0 && j.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.');
      }
    } }]), e5;
  }();
  var ni = ["source"];
  var ii = E != null && E.location ? Pt(E.location.hash, "__posthog") || Pt(location.hash, "state") : null;
  var ri = function() {
    function e5(t2) {
      i(this, e5), this.instance = t2;
    }
    return s(e5, [{ key: "afterDecideResponse", value: function(e6) {
      var n2 = e6.toolbarParams || e6.editorParams || (e6.toolbarVersion ? { toolbarVersion: e6.toolbarVersion } : {});
      e6.isAuthenticated && n2.toolbarVersion && n2.toolbarVersion.indexOf("toolbar") === 0 && this.loadToolbar(t({}, n2));
    } }, { key: "maybeLoadToolbar", value: function() {
      var e6, t2, n2 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : void 0, i2 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : void 0, r2 = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : void 0;
      if (!E || !A)
        return false;
      n2 = (e6 = n2) !== null && e6 !== void 0 ? e6 : E.location, r2 = (t2 = r2) !== null && t2 !== void 0 ? t2 : E.history;
      try {
        if (!i2) {
          try {
            E.localStorage.setItem("test", "test"), E.localStorage.removeItem("test");
          } catch (e7) {
            return false;
          }
          i2 = E == null ? void 0 : E.localStorage;
        }
        var s2, o2 = ii || Pt(n2.hash, "__posthog") || Pt(n2.hash, "state"), a2 = o2 ? K(function() {
          return JSON.parse(atob(decodeURIComponent(o2)));
        }) || K(function() {
          return JSON.parse(decodeURIComponent(o2));
        }) : null;
        return a2 && a2.action === "ph_authorize" ? ((s2 = a2).source = "url", s2 && Object.keys(s2).length > 0 && (a2.desiredHash ? n2.hash = a2.desiredHash : r2 ? r2.replaceState("", A.title, n2.pathname + n2.search) : n2.hash = "")) : ((s2 = JSON.parse(i2.getItem("_postHogToolbarParams") || "{}")).source = "localstorage", delete s2.userIntent), !(!s2.token || this.instance.config.token !== s2.token) && (this.loadToolbar(s2), true);
      } catch (e7) {
        return false;
      }
    } }, { key: "loadToolbar", value: function(e6) {
      var n2 = this;
      if (!E || B._postHogToolbarLoaded)
        return false;
      B._postHogToolbarLoaded = true;
      var i2 = 3e5, r2 = Math.floor(Date.now() / i2) * i2, s2 = this.instance.requestRouter.endpointFor("assets", "/static/toolbar.js?t=".concat(r2)), o2 = this.instance.requestRouter.region === "custom" && this.instance.config.advanced_disable_toolbar_metrics, u2 = t(t({ token: this.instance.config.token }, e6), {}, { apiURL: this.instance.requestRouter.endpointFor("ui") }, o2 ? { instrument: false } : {});
      u2.source;
      var l2 = a(u2, ni);
      return E.localStorage.setItem("_postHogToolbarParams", JSON.stringify(l2)), ie(s2, function(e7) {
        e7 ? j.error("Failed to load toolbar", e7) : (B.ph_load_toolbar || B.ph_load_editor)(u2, n2.instance);
      }), ne(E, "turbolinks:load", function() {
        B._postHogToolbarLoaded = false, n2.loadToolbar(u2);
      }), true;
    } }, { key: "_loadEditor", value: function(e6) {
      return this.loadToolbar(e6);
    } }, { key: "maybeLoadEditor", value: function() {
      var e6 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : void 0, t2 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : void 0, n2 = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : void 0;
      return this.maybeLoadToolbar(e6, t2, n2);
    } }]), e5;
  }();
  var si = function() {
    function e5(t2) {
      i(this, e5), o(this, "isPaused", true), o(this, "queue", []), o(this, "flushTimeoutMs", 3e3), this.sendRequest = t2;
    }
    return s(e5, [{ key: "enqueue", value: function(e6) {
      this.queue.push(e6), this.flushTimeout || this.setFlushTimeout();
    } }, { key: "unload", value: function() {
      var e6 = this;
      this.clearFlushTimeout();
      var n2 = this.queue.length > 0 ? this.formatQueue() : {}, i2 = Object.values(n2);
      [].concat(l(i2.filter(function(e7) {
        return e7.url.indexOf("/e") === 0;
      })), l(i2.filter(function(e7) {
        return e7.url.indexOf("/e") !== 0;
      }))).map(function(n3) {
        e6.sendRequest(t(t({}, n3), {}, { transport: "sendBeacon" }));
      });
    } }, { key: "enable", value: function() {
      this.isPaused = false, this.setFlushTimeout();
    } }, { key: "setFlushTimeout", value: function() {
      var e6 = this;
      this.isPaused || (this.flushTimeout = setTimeout(function() {
        if (e6.clearFlushTimeout(), e6.queue.length > 0) {
          var t2 = e6.formatQueue(), n2 = function(n3) {
            var i3 = t2[n3], r2 = new Date().getTime();
            i3.data && m(i3.data) && z(i3.data, function(e7) {
              e7.offset = Math.abs(e7.timestamp - r2), delete e7.timestamp;
            }), e6.sendRequest(i3);
          };
          for (var i2 in t2)
            n2(i2);
        }
      }, this.flushTimeoutMs));
    } }, { key: "clearFlushTimeout", value: function() {
      clearTimeout(this.flushTimeout), this.flushTimeout = void 0;
    } }, { key: "formatQueue", value: function() {
      var e6 = {};
      return z(this.queue, function(n2) {
        var i2, r2 = n2, s2 = (r2 ? r2.batchKey : null) || r2.url;
        w(e6[s2]) && (e6[s2] = t(t({}, r2), {}, { data: [] })), (i2 = e6[s2].data) === null || i2 === void 0 || i2.push(r2.data);
      }), this.queue = [], e6;
    } }]), e5;
  }();
  var oi = Uint8Array;
  var ai = Uint16Array;
  var ui = Uint32Array;
  var li = new oi([0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0, 0, 0, 0]);
  var ci = new oi([0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13, 0, 0]);
  var di = new oi([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]);
  var hi = function(e5, t2) {
    for (var n2 = new ai(31), i2 = 0; i2 < 31; ++i2)
      n2[i2] = t2 += 1 << e5[i2 - 1];
    var r2 = new ui(n2[30]);
    for (i2 = 1; i2 < 30; ++i2)
      for (var s2 = n2[i2]; s2 < n2[i2 + 1]; ++s2)
        r2[s2] = s2 - n2[i2] << 5 | i2;
    return [n2, r2];
  };
  var fi = hi(li, 2);
  var pi = fi[0];
  var gi = fi[1];
  pi[28] = 258, gi[258] = 28;
  for (vi = hi(ci, 0)[1], _i = new ai(32768), mi = 0; mi < 32768; ++mi) {
    yi = (43690 & mi) >>> 1 | (21845 & mi) << 1;
    yi = (61680 & (yi = (52428 & yi) >>> 2 | (13107 & yi) << 2)) >>> 4 | (3855 & yi) << 4, _i[mi] = ((65280 & yi) >>> 8 | (255 & yi) << 8) >>> 1;
  }
  var yi;
  var vi;
  var _i;
  var mi;
  var bi = function(e5, t2, n2) {
    for (var i2 = e5.length, r2 = 0, s2 = new ai(t2); r2 < i2; ++r2)
      ++s2[e5[r2] - 1];
    var o2, a2 = new ai(t2);
    for (r2 = 0; r2 < t2; ++r2)
      a2[r2] = a2[r2 - 1] + s2[r2 - 1] << 1;
    if (n2) {
      o2 = new ai(1 << t2);
      var u2 = 15 - t2;
      for (r2 = 0; r2 < i2; ++r2)
        if (e5[r2])
          for (var l2 = r2 << 4 | e5[r2], c2 = t2 - e5[r2], d2 = a2[e5[r2] - 1]++ << c2, h2 = d2 | (1 << c2) - 1; d2 <= h2; ++d2)
            o2[_i[d2] >>> u2] = l2;
    } else
      for (o2 = new ai(i2), r2 = 0; r2 < i2; ++r2)
        o2[r2] = _i[a2[e5[r2] - 1]++] >>> 15 - e5[r2];
    return o2;
  };
  var wi = new oi(288);
  for (mi = 0; mi < 144; ++mi)
    wi[mi] = 8;
  for (mi = 144; mi < 256; ++mi)
    wi[mi] = 9;
  for (mi = 256; mi < 280; ++mi)
    wi[mi] = 7;
  for (mi = 280; mi < 288; ++mi)
    wi[mi] = 8;
  var ki = new oi(32);
  for (mi = 0; mi < 32; ++mi)
    ki[mi] = 5;
  var Si = bi(wi, 9, 0);
  var Fi = bi(ki, 5, 0);
  var Ri = function(e5) {
    return (e5 / 8 >> 0) + (7 & e5 && 1);
  };
  var xi = function(e5, t2, n2) {
    (t2 == null || t2 < 0) && (t2 = 0), (n2 == null || n2 > e5.length) && (n2 = e5.length);
    var i2 = new (e5 instanceof ai ? ai : e5 instanceof ui ? ui : oi)(n2 - t2);
    return i2.set(e5.subarray(t2, n2)), i2;
  };
  var Pi = function(e5, t2, n2) {
    n2 <<= 7 & t2;
    var i2 = t2 / 8 >> 0;
    e5[i2] |= n2, e5[i2 + 1] |= n2 >>> 8;
  };
  var Ei = function(e5, t2, n2) {
    n2 <<= 7 & t2;
    var i2 = t2 / 8 >> 0;
    e5[i2] |= n2, e5[i2 + 1] |= n2 >>> 8, e5[i2 + 2] |= n2 >>> 16;
  };
  var Ii = function(e5, t2) {
    for (var n2 = [], i2 = 0; i2 < e5.length; ++i2)
      e5[i2] && n2.push({ s: i2, f: e5[i2] });
    var r2 = n2.length, s2 = n2.slice();
    if (!r2)
      return [new oi(0), 0];
    if (r2 == 1) {
      var o2 = new oi(n2[0].s + 1);
      return o2[n2[0].s] = 1, [o2, 1];
    }
    n2.sort(function(e6, t3) {
      return e6.f - t3.f;
    }), n2.push({ s: -1, f: 25001 });
    var a2 = n2[0], u2 = n2[1], l2 = 0, c2 = 1, d2 = 2;
    for (n2[0] = { s: -1, f: a2.f + u2.f, l: a2, r: u2 }; c2 != r2 - 1; )
      a2 = n2[n2[l2].f < n2[d2].f ? l2++ : d2++], u2 = n2[l2 != c2 && n2[l2].f < n2[d2].f ? l2++ : d2++], n2[c2++] = { s: -1, f: a2.f + u2.f, l: a2, r: u2 };
    var h2 = s2[0].s;
    for (i2 = 1; i2 < r2; ++i2)
      s2[i2].s > h2 && (h2 = s2[i2].s);
    var f2 = new ai(h2 + 1), p2 = Ci(n2[c2 - 1], f2, 0);
    if (p2 > t2) {
      i2 = 0;
      var g2 = 0, v2 = p2 - t2, _2 = 1 << v2;
      for (s2.sort(function(e6, t3) {
        return f2[t3.s] - f2[e6.s] || e6.f - t3.f;
      }); i2 < r2; ++i2) {
        var m2 = s2[i2].s;
        if (!(f2[m2] > t2))
          break;
        g2 += _2 - (1 << p2 - f2[m2]), f2[m2] = t2;
      }
      for (g2 >>>= v2; g2 > 0; ) {
        var y2 = s2[i2].s;
        f2[y2] < t2 ? g2 -= 1 << t2 - f2[y2]++ - 1 : ++i2;
      }
      for (; i2 >= 0 && g2; --i2) {
        var b2 = s2[i2].s;
        f2[b2] == t2 && (--f2[b2], ++g2);
      }
      p2 = t2;
    }
    return [new oi(f2), p2];
  };
  var Ci = function e3(t2, n2, i2) {
    return t2.s == -1 ? Math.max(e3(t2.l, n2, i2 + 1), e3(t2.r, n2, i2 + 1)) : n2[t2.s] = i2;
  };
  var $i = function(e5) {
    for (var t2 = e5.length; t2 && !e5[--t2]; )
      ;
    for (var n2 = new ai(++t2), i2 = 0, r2 = e5[0], s2 = 1, o2 = function(e6) {
      n2[i2++] = e6;
    }, a2 = 1; a2 <= t2; ++a2)
      if (e5[a2] == r2 && a2 != t2)
        ++s2;
      else {
        if (!r2 && s2 > 2) {
          for (; s2 > 138; s2 -= 138)
            o2(32754);
          s2 > 2 && (o2(s2 > 10 ? s2 - 11 << 5 | 28690 : s2 - 3 << 5 | 12305), s2 = 0);
        } else if (s2 > 3) {
          for (o2(r2), --s2; s2 > 6; s2 -= 6)
            o2(8304);
          s2 > 2 && (o2(s2 - 3 << 5 | 8208), s2 = 0);
        }
        for (; s2--; )
          o2(r2);
        s2 = 1, r2 = e5[a2];
      }
    return [n2.subarray(0, i2), t2];
  };
  var Ti = function(e5, t2) {
    for (var n2 = 0, i2 = 0; i2 < t2.length; ++i2)
      n2 += e5[i2] * t2[i2];
    return n2;
  };
  var Oi = function(e5, t2, n2) {
    var i2 = n2.length, r2 = Ri(t2 + 2);
    e5[r2] = 255 & i2, e5[r2 + 1] = i2 >>> 8, e5[r2 + 2] = 255 ^ e5[r2], e5[r2 + 3] = 255 ^ e5[r2 + 1];
    for (var s2 = 0; s2 < i2; ++s2)
      e5[r2 + s2 + 4] = n2[s2];
    return 8 * (r2 + 4 + i2);
  };
  var Ai = function(e5, t2, n2, i2, r2, s2, o2, a2, u2, l2, c2) {
    Pi(t2, c2++, n2), ++r2[256];
    for (var d2 = Ii(r2, 15), h2 = d2[0], f2 = d2[1], p2 = Ii(s2, 15), g2 = p2[0], v2 = p2[1], _2 = $i(h2), m2 = _2[0], y2 = _2[1], b2 = $i(g2), w2 = b2[0], k2 = b2[1], S2 = new ai(19), F2 = 0; F2 < m2.length; ++F2)
      S2[31 & m2[F2]]++;
    for (F2 = 0; F2 < w2.length; ++F2)
      S2[31 & w2[F2]]++;
    for (var R2 = Ii(S2, 7), x2 = R2[0], P2 = R2[1], E2 = 19; E2 > 4 && !x2[di[E2 - 1]]; --E2)
      ;
    var I2, C2, $2, T2, O2 = l2 + 5 << 3, A2 = Ti(r2, wi) + Ti(s2, ki) + o2, M2 = Ti(r2, h2) + Ti(s2, g2) + o2 + 14 + 3 * E2 + Ti(S2, x2) + (2 * S2[16] + 3 * S2[17] + 7 * S2[18]);
    if (O2 <= A2 && O2 <= M2)
      return Oi(t2, c2, e5.subarray(u2, u2 + l2));
    if (Pi(t2, c2, 1 + (M2 < A2)), c2 += 2, M2 < A2) {
      I2 = bi(h2, f2, 0), C2 = h2, $2 = bi(g2, v2, 0), T2 = g2;
      var q2 = bi(x2, P2, 0);
      Pi(t2, c2, y2 - 257), Pi(t2, c2 + 5, k2 - 1), Pi(t2, c2 + 10, E2 - 4), c2 += 14;
      for (F2 = 0; F2 < E2; ++F2)
        Pi(t2, c2 + 3 * F2, x2[di[F2]]);
      c2 += 3 * E2;
      for (var D2 = [m2, w2], L2 = 0; L2 < 2; ++L2) {
        var N2 = D2[L2];
        for (F2 = 0; F2 < N2.length; ++F2) {
          var B2 = 31 & N2[F2];
          Pi(t2, c2, q2[B2]), c2 += x2[B2], B2 > 15 && (Pi(t2, c2, N2[F2] >>> 5 & 127), c2 += N2[F2] >>> 12);
        }
      }
    } else
      I2 = Si, C2 = wi, $2 = Fi, T2 = ki;
    for (F2 = 0; F2 < a2; ++F2)
      if (i2[F2] > 255) {
        B2 = i2[F2] >>> 18 & 31;
        Ei(t2, c2, I2[B2 + 257]), c2 += C2[B2 + 257], B2 > 7 && (Pi(t2, c2, i2[F2] >>> 23 & 31), c2 += li[B2]);
        var H2 = 31 & i2[F2];
        Ei(t2, c2, $2[H2]), c2 += T2[H2], H2 > 3 && (Ei(t2, c2, i2[F2] >>> 5 & 8191), c2 += ci[H2]);
      } else
        Ei(t2, c2, I2[i2[F2]]), c2 += C2[i2[F2]];
    return Ei(t2, c2, I2[256]), c2 + C2[256];
  };
  var Mi = new ui([65540, 131080, 131088, 131104, 262176, 1048704, 1048832, 2114560, 2117632]);
  var qi = new oi(0);
  var Di = function() {
    for (var e5 = new ui(256), t2 = 0; t2 < 256; ++t2) {
      for (var n2 = t2, i2 = 9; --i2; )
        n2 = (1 & n2 && 3988292384) ^ n2 >>> 1;
      e5[t2] = n2;
    }
    return e5;
  }();
  var Li = function(e5, t2, n2, i2, r2) {
    return function(e6, t3, n3, i3, r3, s2) {
      var o2 = e6.length, a2 = new oi(i3 + o2 + 5 * (1 + Math.floor(o2 / 7e3)) + r3), u2 = a2.subarray(i3, a2.length - r3), l2 = 0;
      if (!t3 || o2 < 8)
        for (var c2 = 0; c2 <= o2; c2 += 65535) {
          var d2 = c2 + 65535;
          d2 < o2 ? l2 = Oi(u2, l2, e6.subarray(c2, d2)) : (u2[c2] = s2, l2 = Oi(u2, l2, e6.subarray(c2, o2)));
        }
      else {
        for (var h2 = Mi[t3 - 1], f2 = h2 >>> 13, p2 = 8191 & h2, g2 = (1 << n3) - 1, v2 = new ai(32768), _2 = new ai(g2 + 1), m2 = Math.ceil(n3 / 3), y2 = 2 * m2, b2 = function(t4) {
          return (e6[t4] ^ e6[t4 + 1] << m2 ^ e6[t4 + 2] << y2) & g2;
        }, w2 = new ui(25e3), k2 = new ai(288), S2 = new ai(32), F2 = 0, R2 = 0, x2 = (c2 = 0, 0), P2 = 0, E2 = 0; c2 < o2; ++c2) {
          var I2 = b2(c2), C2 = 32767 & c2, $2 = _2[I2];
          if (v2[C2] = $2, _2[I2] = C2, P2 <= c2) {
            var T2 = o2 - c2;
            if ((F2 > 7e3 || x2 > 24576) && T2 > 423) {
              l2 = Ai(e6, u2, 0, w2, k2, S2, R2, x2, E2, c2 - E2, l2), x2 = F2 = R2 = 0, E2 = c2;
              for (var O2 = 0; O2 < 286; ++O2)
                k2[O2] = 0;
              for (O2 = 0; O2 < 30; ++O2)
                S2[O2] = 0;
            }
            var A2 = 2, M2 = 0, q2 = p2, D2 = C2 - $2 & 32767;
            if (T2 > 2 && I2 == b2(c2 - D2))
              for (var L2 = Math.min(f2, T2) - 1, N2 = Math.min(32767, c2), B2 = Math.min(258, T2); D2 <= N2 && --q2 && C2 != $2; ) {
                if (e6[c2 + A2] == e6[c2 + A2 - D2]) {
                  for (var H2 = 0; H2 < B2 && e6[c2 + H2] == e6[c2 + H2 - D2]; ++H2)
                    ;
                  if (H2 > A2) {
                    if (A2 = H2, M2 = D2, H2 > L2)
                      break;
                    var j2 = Math.min(D2, H2 - 2), U2 = 0;
                    for (O2 = 0; O2 < j2; ++O2) {
                      var V2 = c2 - D2 + O2 + 32768 & 32767, W2 = V2 - v2[V2] + 32768 & 32767;
                      W2 > U2 && (U2 = W2, $2 = V2);
                    }
                  }
                }
                D2 += (C2 = $2) - ($2 = v2[C2]) + 32768 & 32767;
              }
            if (M2) {
              w2[x2++] = 268435456 | gi[A2] << 18 | vi[M2];
              var z2 = 31 & gi[A2], G2 = 31 & vi[M2];
              R2 += li[z2] + ci[G2], ++k2[257 + z2], ++S2[G2], P2 = c2 + A2, ++F2;
            } else
              w2[x2++] = e6[c2], ++k2[e6[c2]];
          }
        }
        l2 = Ai(e6, u2, s2, w2, k2, S2, R2, x2, E2, c2 - E2, l2), s2 || (l2 = Oi(u2, l2, qi));
      }
      return xi(a2, 0, i3 + Ri(l2) + r3);
    }(e5, t2.level == null ? 6 : t2.level, t2.mem == null ? Math.ceil(1.5 * Math.max(8, Math.min(13, Math.log(e5.length)))) : 12 + t2.mem, n2, i2, !r2);
  };
  var Ni = function(e5, t2, n2) {
    for (; n2; ++t2)
      e5[t2] = n2, n2 >>>= 8;
  };
  function Bi(e5, t2) {
    t2 === void 0 && (t2 = {});
    var n2 = function() {
      var e6 = 4294967295;
      return { p: function(t3) {
        for (var n3 = e6, i3 = 0; i3 < t3.length; ++i3)
          n3 = Di[255 & n3 ^ t3[i3]] ^ n3 >>> 8;
        e6 = n3;
      }, d: function() {
        return 4294967295 ^ e6;
      } };
    }(), i2 = e5.length;
    n2.p(e5);
    var r2, s2 = Li(e5, t2, 10 + ((r2 = t2).filename && r2.filename.length + 1 || 0), 8), o2 = s2.length;
    return function(e6, t3) {
      var n3 = t3.filename;
      if (e6[0] = 31, e6[1] = 139, e6[2] = 8, e6[8] = t3.level < 2 ? 4 : t3.level == 9 ? 2 : 0, e6[9] = 3, t3.mtime != 0 && Ni(e6, 4, Math.floor(new Date(t3.mtime || Date.now()) / 1e3)), n3) {
        e6[3] = 8;
        for (var i3 = 0; i3 <= n3.length; ++i3)
          e6[i3 + 10] = n3.charCodeAt(i3);
      }
    }(s2, t2), Ni(s2, o2 - 8, n2.d()), Ni(s2, o2 - 4, i2), s2;
  }
  var Hi = !!D || !!q;
  var ji = function(e5, n2) {
    var i2 = u(e5.split("?"), 2), r2 = i2[0], s2 = i2[1], o2 = t({}, n2);
    s2 == null || s2.split("&").forEach(function(e6) {
      var t2 = u(e6.split("="), 1)[0];
      delete o2[t2];
    });
    var a2 = Rt(o2);
    return a2 = a2 ? (s2 ? s2 + "&" : "") + a2 : s2, "".concat(r2, "?").concat(a2);
  };
  var Ui = function(e5) {
    return "data=" + encodeURIComponent(typeof e5 == "string" ? e5 : JSON.stringify(e5));
  };
  var Vi = function(e5) {
    var t2 = e5.data, n2 = e5.compression, i2 = e5.transport, r2 = e5.method;
    if (!t2)
      return null;
    if (n2 === Ge.GZipJS) {
      var s2 = Bi(function(e6, t3) {
        var n3 = e6.length;
        if (!t3 && typeof TextEncoder != "undefined")
          return new TextEncoder().encode(e6);
        for (var i3 = new oi(e6.length + (e6.length >>> 1)), r3 = 0, s3 = function(e7) {
          i3[r3++] = e7;
        }, o3 = 0; o3 < n3; ++o3) {
          if (r3 + 5 > i3.length) {
            var a3 = new oi(r3 + 8 + (n3 - o3 << 1));
            a3.set(i3), i3 = a3;
          }
          var u2 = e6.charCodeAt(o3);
          u2 < 128 || t3 ? s3(u2) : u2 < 2048 ? (s3(192 | u2 >>> 6), s3(128 | 63 & u2)) : u2 > 55295 && u2 < 57344 ? (s3(240 | (u2 = 65536 + (1047552 & u2) | 1023 & e6.charCodeAt(++o3)) >>> 18), s3(128 | u2 >>> 12 & 63), s3(128 | u2 >>> 6 & 63), s3(128 | 63 & u2)) : (s3(224 | u2 >>> 12), s3(128 | u2 >>> 6 & 63), s3(128 | 63 & u2));
        }
        return xi(i3, 0, r3);
      }(JSON.stringify(t2)), { mtime: 0 });
      return new Blob([s2], { type: "text/plain" });
    }
    if (n2 === Ge.Base64) {
      var o2 = function(e6) {
        var t3, n3, i3, r3, s3, o3 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=", a3 = 0, u2 = 0, l2 = "", c2 = [];
        if (!e6)
          return e6;
        e6 = te(e6);
        do {
          t3 = (s3 = e6.charCodeAt(a3++) << 16 | e6.charCodeAt(a3++) << 8 | e6.charCodeAt(a3++)) >> 18 & 63, n3 = s3 >> 12 & 63, i3 = s3 >> 6 & 63, r3 = 63 & s3, c2[u2++] = o3.charAt(t3) + o3.charAt(n3) + o3.charAt(i3) + o3.charAt(r3);
        } while (a3 < e6.length);
        switch (l2 = c2.join(""), e6.length % 3) {
          case 1:
            l2 = l2.slice(0, -2) + "==";
            break;
          case 2:
            l2 = l2.slice(0, -1) + "=";
        }
        return l2;
      }(JSON.stringify(t2));
      return Ui(o2);
    }
    if (i2 === "sendBeacon") {
      var a2 = Ui(t2);
      return new Blob([a2], { type: "application/x-www-form-urlencoded" });
    }
    return r2 !== "POST" ? null : Ui(t2);
  };
  var Wi = function(e5) {
    var t2 = new D();
    t2.open(e5.method || "GET", e5.url, true);
    var n2 = Vi(e5);
    z(e5.headers, function(e6, n3) {
      t2.setRequestHeader(n3, e6);
    }), e5.method === "POST" && typeof n2 == "string" && t2.setRequestHeader("Content-Type", "application/x-www-form-urlencoded"), e5.timeout && (t2.timeout = e5.timeout), t2.withCredentials = true, t2.onreadystatechange = function() {
      if (t2.readyState === 4) {
        var n3, i2 = { statusCode: t2.status, text: t2.responseText };
        if (t2.status === 200)
          try {
            i2.json = JSON.parse(t2.responseText);
          } catch (e6) {
          }
        (n3 = e5.callback) === null || n3 === void 0 || n3.call(e5, i2);
      }
    }, t2.send(n2);
  };
  var zi = function(e5) {
    var t2, n2 = Vi(e5), i2 = new Headers();
    z(i2, function(e6, t3) {
      i2.append(t3, e6);
    }), e5.method === "POST" && typeof n2 == "string" && i2.append("Content-Type", "application/x-www-form-urlencoded");
    var r2 = e5.url, s2 = null;
    if (L) {
      var o2 = new L();
      s2 = { signal: o2.signal, timeout: setTimeout(function() {
        return o2.abort();
      }, e5.timeout) };
    }
    q(r2, { method: (e5 == null ? void 0 : e5.method) || "GET", headers: i2, keepalive: e5.method === "POST", body: n2, signal: (t2 = s2) === null || t2 === void 0 ? void 0 : t2.signal }).then(function(t3) {
      return t3.text().then(function(n3) {
        var i3, r3 = { statusCode: t3.status, text: n3 };
        if (t3.status === 200)
          try {
            r3.json = JSON.parse(n3);
          } catch (e6) {
            j.error(e6);
          }
        (i3 = e5.callback) === null || i3 === void 0 || i3.call(e5, r3);
      });
    }).catch(function(t3) {
      var n3;
      j.error(t3), (n3 = e5.callback) === null || n3 === void 0 || n3.call(e5, { statusCode: 0, text: t3 });
    }).finally(function() {
      return s2 ? clearTimeout(s2.timeout) : null;
    });
  };
  var Gi = function(e5) {
    try {
      var t2;
      E == null || (t2 = E.navigator) === null || t2 === void 0 || t2.sendBeacon(e5.url, Vi(e5));
    } catch (e6) {
    }
  };
  var Qi = function(e5) {
    var t2;
    if (A) {
      var n2 = A.createElement("script");
      n2.type = "text/javascript", n2.async = true, n2.defer = true, n2.src = e5.url;
      var i2 = A.getElementsByTagName("script")[0];
      (t2 = i2.parentNode) === null || t2 === void 0 || t2.insertBefore(n2, i2);
    }
  };
  var Yi = ["retriesPerformedSoFar"];
  var Ji;
  var Ki = function() {
    function e5(t2) {
      var n2 = this;
      i(this, e5), o(this, "isPolling", false), o(this, "pollIntervalMs", 3e3), o(this, "queue", []), this.instance = t2, this.queue = [], this.areWeOnline = true, !w(E) && "onLine" in E.navigator && (this.areWeOnline = E.navigator.onLine, E.addEventListener("online", function() {
        n2.areWeOnline = true, n2.flush();
      }), E.addEventListener("offline", function() {
        n2.areWeOnline = false;
      }));
    }
    return s(e5, [{ key: "retriableRequest", value: function(e6) {
      var n2 = this, i2 = e6.retriesPerformedSoFar, r2 = a(e6, Yi);
      R(i2) && i2 > 0 && (r2.url = ji(r2.url, { retry_count: i2 })), this.instance._send_request(t(t({}, r2), {}, { callback: function(e7) {
        var s2;
        e7.statusCode !== 200 && (e7.statusCode < 400 || e7.statusCode >= 500) && (i2 != null ? i2 : 0) < 10 ? n2.enqueue(t({}, r2)) : (s2 = r2.callback) === null || s2 === void 0 || s2.call(r2, e7);
      } }));
    } }, { key: "enqueue", value: function(e6) {
      var t2 = e6.retriesPerformedSoFar || 0;
      e6.retriesPerformedSoFar = t2 + 1;
      var n2 = function(e7) {
        var t3 = 3e3 * Math.pow(2, e7), n3 = t3 / 2, i3 = Math.min(18e5, t3), r3 = (Math.random() - 0.5) * (i3 - n3);
        return Math.ceil(i3 + r3);
      }(t2), i2 = Date.now() + n2;
      this.queue.push({ retryAt: i2, requestOptions: e6 });
      var r2 = "Enqueued failed request for retry in ".concat(n2);
      navigator.onLine || (r2 += " (Browser is offline)"), j.warn(r2), this.isPolling || (this.isPolling = true, this.poll());
    } }, { key: "poll", value: function() {
      var e6 = this;
      this.poller && clearTimeout(this.poller), this.poller = setTimeout(function() {
        e6.areWeOnline && e6.queue.length > 0 && e6.flush(), e6.poll();
      }, this.pollIntervalMs);
    } }, { key: "flush", value: function() {
      var e6 = Date.now(), t2 = [], n2 = this.queue.filter(function(n3) {
        return n3.retryAt < e6 || (t2.push(n3), false);
      });
      if (this.queue = t2, n2.length > 0) {
        var i2, r2 = h(n2);
        try {
          for (r2.s(); !(i2 = r2.n()).done; ) {
            var s2 = i2.value.requestOptions;
            this.retriableRequest(s2);
          }
        } catch (e7) {
          r2.e(e7);
        } finally {
          r2.f();
        }
      }
    } }, { key: "unload", value: function() {
      this.poller && (clearTimeout(this.poller), this.poller = void 0);
      var e6, n2 = h(this.queue);
      try {
        for (n2.s(); !(e6 = n2.n()).done; ) {
          var i2 = e6.value.requestOptions;
          try {
            this.instance._send_request(t(t({}, i2), {}, { transport: "sendBeacon" }));
          } catch (e7) {
            j.error(e7);
          }
        }
      } catch (e7) {
        n2.e(e7);
      } finally {
        n2.f();
      }
      this.queue = [];
    } }]), e5;
  }();
  var Xi = 1800;
  var Zi = function() {
    function e5(t2, n2, r2, s2) {
      i(this, e5), o(this, "_sessionIdChangedHandlers", []), this.config = t2, this.persistence = n2, this._windowId = void 0, this._sessionId = void 0, this._sessionStartTimestamp = null, this._sessionActivityTimestamp = null, this._sessionIdGenerator = r2 || ot, this._windowIdGenerator = s2 || ot;
      var a2 = t2.persistence_name || t2.token, u2 = t2.session_idle_timeout_seconds || Xi;
      if (R(u2) ? u2 > Xi ? j.warn("session_idle_timeout_seconds cannot be  greater than 30 minutes. Using 30 minutes instead.") : u2 < 60 && j.warn("session_idle_timeout_seconds cannot be less than 60 seconds. Using 60 seconds instead.") : (j.warn("session_idle_timeout_seconds must be a number. Defaulting to 30 minutes."), u2 = Xi), this._sessionTimeoutMs = 1e3 * Math.min(Math.max(u2, 60), Xi), this._window_id_storage_key = "ph_" + a2 + "_window_id", this._primary_window_exists_storage_key = "ph_" + a2 + "_primary_window_exists", this._canUseSessionStorage()) {
        var l2 = wt.parse(this._window_id_storage_key), c2 = wt.parse(this._primary_window_exists_storage_key);
        l2 && !c2 ? this._windowId = l2 : wt.remove(this._window_id_storage_key), wt.set(this._primary_window_exists_storage_key, true);
      }
      this._listenToReloadWindow();
    }
    return s(e5, [{ key: "onSessionId", value: function(e6) {
      var t2 = this;
      return w(this._sessionIdChangedHandlers) && (this._sessionIdChangedHandlers = []), this._sessionIdChangedHandlers.push(e6), this._sessionId && e6(this._sessionId, this._windowId), function() {
        t2._sessionIdChangedHandlers = t2._sessionIdChangedHandlers.filter(function(t3) {
          return t3 !== e6;
        });
      };
    } }, { key: "_canUseSessionStorage", value: function() {
      return this.config.persistence !== "memory" && !this.persistence.disabled && wt.is_supported();
    } }, { key: "_setWindowId", value: function(e6) {
      e6 !== this._windowId && (this._windowId = e6, this._canUseSessionStorage() && wt.set(this._window_id_storage_key, e6));
    } }, { key: "_getWindowId", value: function() {
      return this._windowId ? this._windowId : this._canUseSessionStorage() ? wt.parse(this._window_id_storage_key) : null;
    } }, { key: "_setSessionId", value: function(e6, t2, n2) {
      e6 === this._sessionId && t2 === this._sessionActivityTimestamp && n2 === this._sessionStartTimestamp || (this._sessionStartTimestamp = n2, this._sessionActivityTimestamp = t2, this._sessionId = e6, this.persistence.register(o({}, Oe, [t2, e6, n2])));
    } }, { key: "_getSessionId", value: function() {
      if (this._sessionId && this._sessionActivityTimestamp && this._sessionStartTimestamp)
        return [this._sessionActivityTimestamp, this._sessionId, this._sessionStartTimestamp];
      var e6 = this.persistence.props[Oe];
      return m(e6) && e6.length === 2 && e6.push(e6[0]), e6 || [0, null, 0];
    } }, { key: "resetSessionId", value: function() {
      this._setSessionId(null, null, null);
    } }, { key: "_listenToReloadWindow", value: function() {
      var e6 = this;
      E == null || E.addEventListener("beforeunload", function() {
        e6._canUseSessionStorage() && wt.remove(e6._primary_window_exists_storage_key);
      });
    } }, { key: "checkAndGetSessionAndWindowId", value: function() {
      var e6 = arguments.length > 0 && arguments[0] !== void 0 && arguments[0], t2 = (arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : null) || new Date().getTime(), n2 = u(this._getSessionId(), 3), i2 = n2[0], r2 = n2[1], s2 = n2[2], o2 = this._getWindowId(), a2 = s2 && s2 > 0 && Math.abs(t2 - s2) > 864e5, l2 = false, c2 = !r2, d2 = !e6 && Math.abs(t2 - i2) > this._sessionTimeoutMs;
      c2 || d2 || a2 ? (r2 = this._sessionIdGenerator(), o2 = this._windowIdGenerator(), j.info("[SessionId] new session ID generated", { sessionId: r2, windowId: o2, changeReason: { noSessionId: c2, activityTimeout: d2, sessionPastMaximumLength: a2 } }), s2 = t2, l2 = true) : o2 || (o2 = this._windowIdGenerator(), l2 = true);
      var h2 = i2 === 0 || !e6 || a2 ? t2 : i2, f2 = s2 === 0 ? new Date().getTime() : s2;
      return this._setWindowId(o2), this._setSessionId(r2, h2, f2), l2 && this._sessionIdChangedHandlers.forEach(function(e7) {
        return e7(r2, o2);
      }), { sessionId: r2, windowId: o2, sessionStartTimestamp: f2 };
    } }]), e5;
  }();
  !function(e5) {
    e5.US = "us", e5.EU = "eu", e5.CUSTOM = "custom";
  }(Ji || (Ji = {}));
  var er = function() {
    function e5(t2) {
      i(this, e5), o(this, "_regionCache", {}), this.instance = t2;
    }
    return s(e5, [{ key: "apiHost", get: function() {
      return this.instance.config.api_host.trim().replace(/\/$/, "");
    } }, { key: "uiHost", get: function() {
      var e6;
      return (e6 = this.instance.config.ui_host) === null || e6 === void 0 ? void 0 : e6.replace(/\/$/, "");
    } }, { key: "region", get: function() {
      return this._regionCache[this.apiHost] || (/https:\/\/(app|us|us-assets)(\.i)?\.posthog\.com/i.test(this.apiHost) ? this._regionCache[this.apiHost] = Ji.US : /https:\/\/(eu|eu-assets)(\.i)?\.posthog\.com/i.test(this.apiHost) ? this._regionCache[this.apiHost] = Ji.EU : this._regionCache[this.apiHost] = Ji.CUSTOM), this._regionCache[this.apiHost];
    } }, { key: "endpointFor", value: function(e6) {
      var t2 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : "";
      if (t2 && (t2 = t2[0] === "/" ? t2 : "/".concat(t2)), e6 === "ui")
        return (this.uiHost || this.apiHost) + t2;
      if (this.region === Ji.CUSTOM)
        return this.apiHost + t2;
      var n2 = "i.posthog.com" + t2;
      switch (e6) {
        case "assets":
          return "https://".concat(this.region, "-assets.").concat(n2);
        case "api":
          return "https://".concat(this.region, ".").concat(n2);
      }
    } }]), e5;
  }();
  var tr = s(function e4(t2, n2, r2, s2) {
    i(this, e4), this.name = "posthog-js", this.setupOnce = function(e5) {
      e5(function(e6) {
        var i2, o2, a2, u2, l2;
        if (e6.level !== "error" || !t2.__loaded)
          return e6;
        e6.tags || (e6.tags = {});
        var c2 = t2.requestRouter.endpointFor("ui", "/person/" + t2.get_distinct_id());
        e6.tags["PostHog Person URL"] = c2, t2.sessionRecordingStarted() && (e6.tags["PostHog Recording URL"] = t2.get_session_replay_url({ withTimestamp: true }));
        var d2 = ((i2 = e6.exception) === null || i2 === void 0 ? void 0 : i2.values) || [], h2 = { $exception_message: (o2 = d2[0]) === null || o2 === void 0 ? void 0 : o2.value, $exception_type: (a2 = d2[0]) === null || a2 === void 0 ? void 0 : a2.type, $exception_personURL: c2, $sentry_event_id: e6.event_id, $sentry_exception: e6.exception, $sentry_exception_message: (u2 = d2[0]) === null || u2 === void 0 ? void 0 : u2.value, $sentry_exception_type: (l2 = d2[0]) === null || l2 === void 0 ? void 0 : l2.type, $sentry_tags: e6.tags };
        return n2 && r2 && (h2.$sentry_url = (s2 || "https://sentry.io/organizations/") + n2 + "/issues/?project=" + r2 + "&query=" + e6.event_id), t2.capture("$exception", h2), e6;
      });
    };
  });
  var nr = function() {
    function e5(t2) {
      var n2 = this;
      i(this, e5), o(this, "_hasSeenPageView", false), o(this, "_updateScrollData", function() {
        var e6, t3, i2, r2;
        n2._pageViewData || (n2._pageViewData = n2._createPageViewData());
        var s2 = n2._pageViewData, o2 = n2._scrollY(), a2 = n2._scrollHeight(), u2 = n2._contentY(), l2 = n2._contentHeight();
        s2.lastScrollY = o2, s2.maxScrollY = Math.max(o2, (e6 = s2.maxScrollY) !== null && e6 !== void 0 ? e6 : 0), s2.maxScrollHeight = Math.max(a2, (t3 = s2.maxScrollHeight) !== null && t3 !== void 0 ? t3 : 0), s2.lastContentY = u2, s2.maxContentY = Math.max(u2, (i2 = s2.maxContentY) !== null && i2 !== void 0 ? i2 : 0), s2.maxContentHeight = Math.max(l2, (r2 = s2.maxContentHeight) !== null && r2 !== void 0 ? r2 : 0);
      }), this._instance = t2;
    }
    return s(e5, [{ key: "_createPageViewData", value: function() {
      var e6;
      return { pathname: (e6 = E == null ? void 0 : E.location.pathname) !== null && e6 !== void 0 ? e6 : "" };
    } }, { key: "doPageView", value: function() {
      var e6, n2;
      return this._hasSeenPageView ? (n2 = this._pageViewData, this._pageViewData = this._createPageViewData()) : (this._hasSeenPageView = true, n2 = void 0, this._pageViewData || (this._pageViewData = this._createPageViewData())), setTimeout(this._updateScrollData, 0), t({ $prev_pageview_pathname: (e6 = n2) === null || e6 === void 0 ? void 0 : e6.pathname }, this._calculatePrevPageScrollProperties(n2));
    } }, { key: "doPageLeave", value: function() {
      var e6 = this._pageViewData;
      return t({ $prev_pageview_pathname: e6 == null ? void 0 : e6.pathname }, this._calculatePrevPageScrollProperties(e6));
    } }, { key: "_calculatePrevPageScrollProperties", value: function(e6) {
      if (!e6 || e6.maxScrollHeight == null || e6.lastScrollY == null || e6.maxScrollY == null || e6.maxContentHeight == null || e6.lastContentY == null || e6.maxContentY == null)
        return {};
      var t2 = e6.maxScrollHeight, n2 = e6.lastScrollY, i2 = e6.maxScrollY, r2 = e6.maxContentHeight, s2 = e6.lastContentY, o2 = e6.maxContentY;
      return t2 = Math.ceil(t2), n2 = Math.ceil(n2), i2 = Math.ceil(i2), r2 = Math.ceil(r2), s2 = Math.ceil(s2), o2 = Math.ceil(o2), { $prev_pageview_last_scroll: n2, $prev_pageview_last_scroll_percentage: t2 <= 1 ? 1 : ir(n2 / t2, 0, 1), $prev_pageview_max_scroll: i2, $prev_pageview_max_scroll_percentage: t2 <= 1 ? 1 : ir(i2 / t2, 0, 1), $prev_pageview_last_content: s2, $prev_pageview_last_content_percentage: r2 <= 1 ? 1 : ir(s2 / r2, 0, 1), $prev_pageview_max_content: o2, $prev_pageview_max_content_percentage: r2 <= 1 ? 1 : ir(o2 / r2, 0, 1) };
    } }, { key: "startMeasuringScrollPosition", value: function() {
      E == null || E.addEventListener("scroll", this._updateScrollData, true), E == null || E.addEventListener("scrollend", this._updateScrollData, true), E == null || E.addEventListener("resize", this._updateScrollData);
    } }, { key: "stopMeasuringScrollPosition", value: function() {
      E == null || E.removeEventListener("scroll", this._updateScrollData), E == null || E.removeEventListener("scrollend", this._updateScrollData), E == null || E.removeEventListener("resize", this._updateScrollData);
    } }, { key: "_scrollElement", value: function() {
      if (!this._instance.config.scroll_root_selector)
        return E == null ? void 0 : E.document.documentElement;
      var e6, t2 = h(m(this._instance.config.scroll_root_selector) ? this._instance.config.scroll_root_selector : [this._instance.config.scroll_root_selector]);
      try {
        for (t2.s(); !(e6 = t2.n()).done; ) {
          var n2 = e6.value, i2 = E == null ? void 0 : E.document.querySelector(n2);
          if (i2)
            return i2;
        }
      } catch (e7) {
        t2.e(e7);
      } finally {
        t2.f();
      }
    } }, { key: "_scrollHeight", value: function() {
      var e6 = this._scrollElement();
      return e6 ? Math.max(0, e6.scrollHeight - e6.clientHeight) : 0;
    } }, { key: "_scrollY", value: function() {
      if (this._instance.config.scroll_root_selector) {
        var e6 = this._scrollElement();
        return e6 && e6.scrollTop || 0;
      }
      return E && (E.scrollY || E.pageYOffset || E.document.documentElement.scrollTop) || 0;
    } }, { key: "_contentHeight", value: function() {
      var e6 = this._scrollElement();
      return (e6 == null ? void 0 : e6.scrollHeight) || 0;
    } }, { key: "_contentY", value: function() {
      var e6 = this._scrollElement(), t2 = (e6 == null ? void 0 : e6.clientHeight) || 0;
      return this._scrollY() + t2;
    } }]), e5;
  }();
  function ir(e5, t2, n2) {
    return Math.max(t2, Math.min(e5, n2));
  }
  var rr = { icontains: function(e5) {
    return !!E && E.location.href.toLowerCase().indexOf(e5.toLowerCase()) > -1;
  }, regex: function(e5) {
    return !!E && Ft(E.location.href, e5);
  }, exact: function(e5) {
    return (E == null ? void 0 : E.location.href) === e5;
  } };
  var sr = function() {
    function e5(t2) {
      i(this, e5), this.instance = t2;
    }
    return s(e5, [{ key: "getSurveys", value: function(e6) {
      var t2 = this, n2 = arguments.length > 1 && arguments[1] !== void 0 && arguments[1], i2 = this.instance.get_property(Ne);
      if (i2 && !n2)
        return e6(i2);
      this.instance._send_request({ url: this.instance.requestRouter.endpointFor("api", "/api/surveys/?token=".concat(this.instance.config.token)), method: "GET", transport: "XHR", callback: function(n3) {
        var i3;
        if (n3.statusCode !== 200 || !n3.json)
          return e6([]);
        var r2 = n3.json.surveys || [];
        return (i3 = t2.instance.persistence) === null || i3 === void 0 || i3.register(o({}, Ne, r2)), e6(r2);
      } });
    } }, { key: "getActiveMatchingSurveys", value: function(e6) {
      var t2 = this, n2 = arguments.length > 1 && arguments[1] !== void 0 && arguments[1];
      this.getSurveys(function(n3) {
        var i2 = n3.filter(function(e7) {
          return !(!e7.start_date || e7.end_date);
        }).filter(function(e7) {
          var t3, n4, i3, r2;
          if (!e7.conditions)
            return true;
          var s2 = (t3 = e7.conditions) === null || t3 === void 0 || !t3.url || rr[(n4 = (i3 = e7.conditions) === null || i3 === void 0 ? void 0 : i3.urlMatchType) !== null && n4 !== void 0 ? n4 : "icontains"](e7.conditions.url), o2 = (r2 = e7.conditions) === null || r2 === void 0 || !r2.selector || (A == null ? void 0 : A.querySelector(e7.conditions.selector));
          return s2 && o2;
        }).filter(function(e7) {
          if (!e7.linked_flag_key && !e7.targeting_flag_key)
            return true;
          var n4 = !e7.linked_flag_key || t2.instance.featureFlags.isFeatureEnabled(e7.linked_flag_key), i3 = !e7.targeting_flag_key || t2.instance.featureFlags.isFeatureEnabled(e7.targeting_flag_key);
          return n4 && i3;
        });
        return e6(i2);
      }, n2);
    } }]), e5;
  }();
  var or = function() {
    function e5() {
      var t2 = this;
      i(this, e5), o(this, "limits", {}), o(this, "checkForLimiting", function(e6) {
        var n2 = e6.text;
        if (n2 && n2.length)
          try {
            (JSON.parse(n2).quota_limited || []).forEach(function(e7) {
              j.info("[RateLimiter] ".concat(e7 || "events", " is quota limited.")), t2.limits[e7] = new Date().getTime() + 6e4;
            });
          } catch (e7) {
            return void j.warn('[RateLimiter] could not rate limit - continuing. Error: "'.concat(e7 == null ? void 0 : e7.message, '"'), { text: n2 });
          }
      });
    }
    return s(e5, [{ key: "isRateLimited", value: function(e6) {
      var t2 = this.limits[e6 || "events"] || false;
      return t2 !== false && new Date().getTime() < t2;
    } }]), e5;
  }();
  var ar = function() {
    return t({ initialPathName: (M == null ? void 0 : M.pathname) || "", referringDomain: Rn.referringDomain() }, Rn.campaignParams());
  };
  var ur = function() {
    function e5(t2, n2, r2) {
      var s2 = this;
      i(this, e5), o(this, "_onSessionIdCallback", function(e6) {
        var t3 = s2._getStoredProps();
        if (!t3 || t3.sessionId !== e6) {
          var n3 = { sessionId: e6, props: s2._sessionSourceParamGenerator() };
          s2._persistence.register(o({}, Ue, n3));
        }
      }), this._sessionIdManager = t2, this._persistence = n2, this._sessionSourceParamGenerator = r2 || ar, this._sessionIdManager.onSessionId(this._onSessionIdCallback);
    }
    return s(e5, [{ key: "_getStoredProps", value: function() {
      return this._persistence.props[Ue];
    } }, { key: "getSessionProps", value: function() {
      var e6, t2 = (e6 = this._getStoredProps()) === null || e6 === void 0 ? void 0 : e6.props;
      return t2 ? { $client_session_initial_referring_host: t2.referringDomain, $client_session_initial_pathname: t2.initialPathName, $client_session_initial_utm_source: t2.utm_source, $client_session_initial_utm_campaign: t2.utm_campaign, $client_session_initial_utm_medium: t2.utm_medium, $client_session_initial_utm_content: t2.utm_content, $client_session_initial_utm_term: t2.utm_term } : {};
    } }]), e5;
  }();
  var lr = ["ahrefsbot", "ahrefssiteaudit", "applebot", "baiduspider", "bingbot", "bingpreview", "bot.htm", "bot.php", "crawler", "duckduckbot", "facebookexternal", "facebookcatalog", "gptbot", "http://yandex.com/bots", "hubspot", "ia_archiver", "linkedinbot", "mj12bot", "msnbot", "nessus", "petalbot", "pinterest", "prerender", "rogerbot", "screaming frog", "semrushbot", "sitebulb", "slurp", "turnitin", "twitterbot", "vercelbot", "yahoo! slurp", "yandexbot", "adsbot-google", "apis-google", "duplexweb-google", "feedfetcher-google", "google favicon", "google web preview", "google-read-aloud", "googlebot", "googleweblight", "mediapartners-google", "storebot-google"];
  var cr = function(e5, t2) {
    if (!e5)
      return false;
    var n2 = e5.toLowerCase();
    return lr.concat(t2 || []).some(function(e6) {
      var t3 = e6.toLowerCase();
      return n2.includes ? n2.includes(t3) : n2.indexOf(t3) !== -1;
    });
  };
  var dr = {};
  var hr = function() {
  };
  var fr = "posthog";
  var pr = !Hi && (N == null ? void 0 : N.indexOf("MSIE")) === -1 && (N == null ? void 0 : N.indexOf("Mozilla")) === -1;
  var gr = function() {
    var e5, t2, n2;
    return { api_host: "https://app.posthog.com", api_transport: "XHR", ui_host: null, token: "", autocapture: true, rageclick: true, cross_subdomain_cookie: (t2 = A == null ? void 0 : A.location, n2 = t2 == null ? void 0 : t2.hostname, !!k(n2) && n2.split(".").slice(-2).join(".") !== "herokuapp.com"), persistence: "localStorage+cookie", persistence_name: "", cookie_name: "", loaded: hr, store_google: true, custom_campaign_params: [], custom_blocked_useragents: [], save_referrer: true, capture_pageview: true, capture_pageleave: true, debug: false, verbose: false, cookie_expiration: 365, upgrade: false, disable_session_recording: false, disable_persistence: false, disable_cookie: false, enable_recording_console_log: void 0, secure_cookie: (E == null || (e5 = E.location) === null || e5 === void 0 ? void 0 : e5.protocol) === "https:", ip: true, opt_out_capturing_by_default: false, opt_out_persistence_by_default: false, opt_out_useragent_filter: false, opt_out_capturing_persistence_type: "localStorage", opt_out_capturing_cookie_prefix: null, opt_in_site_apps: false, property_blacklist: [], property_denylist: [], respect_dnt: false, sanitize_properties: null, request_headers: {}, inapp_protocol: "//", inapp_link_new_window: false, request_batching: true, properties_string_max_length: 65535, session_recording: {}, mask_all_element_attributes: false, mask_all_text: false, advanced_disable_decide: false, advanced_disable_feature_flags: false, advanced_disable_feature_flags_on_first_load: false, advanced_disable_toolbar_metrics: false, feature_flag_request_timeout_ms: 3e3, on_request_error: function(e6) {
      var t3 = "Bad HTTP status: " + e6.statusCode + " " + e6.text;
      j.error(t3);
    }, get_device_id: function(e6) {
      return e6;
    }, _onCapture: hr, capture_performance: void 0, name: "posthog", bootstrap: {}, disable_compression: false, session_idle_timeout_seconds: 1800 };
  };
  var vr = function() {
    function e5() {
      i(this, e5), o(this, "__forceAllowLocalhost", false);
    }
    return s(e5, [{ key: "_forceAllowLocalhost", get: function() {
      return this.__forceAllowLocalhost;
    }, set: function(e6) {
      j.error("WebPerformanceObserver is deprecated and has no impact on network capture. Use `_forceAllowLocalhostNetworkCapture` on `posthog.sessionRecording`"), this.__forceAllowLocalhost = e6;
    } }]), e5;
  }();
  var _r = function() {
    function e5() {
      var t2 = this;
      i(this, e5), o(this, "webPerformance", new vr()), o(this, "compression", Ge.Base64), this.config = gr(), this.decideEndpointWasHit = false, this.SentryIntegration = tr, this.segmentIntegration = function() {
        return function(e6) {
          Promise && Promise.resolve || j.warn("This browser does not have Promise support, and can not use the segment integration");
          var t3 = function(t4, n2) {
            t4.event.userId || t4.event.anonymousId === e6.get_distinct_id() || e6.reset(), t4.event.userId && t4.event.userId !== e6.get_distinct_id() && (e6.register({ distinct_id: t4.event.userId }), e6.reloadFeatureFlags());
            var i2 = e6._calculate_event_properties(n2, t4.event.properties);
            return t4.event.properties = Object.assign({}, i2, t4.event.properties), t4;
          };
          return { name: "PostHog JS", type: "enrichment", version: "1.0.0", isLoaded: function() {
            return true;
          }, load: function() {
            return Promise.resolve();
          }, track: function(e7) {
            return t3(e7, e7.event.event);
          }, page: function(e7) {
            return t3(e7, "$pageview");
          }, identify: function(e7) {
            return t3(e7, "$identify");
          }, screen: function(e7) {
            return t3(e7, "$screen");
          } };
        }(t2);
      }, this.__captureHooks = [], this.__request_queue = [], this.__loaded = false, this.__loaded_recorder_version = void 0, this.__autocapture = void 0, this.analyticsDefaultEndpoint = "/e/", this.elementsChainAsString = false, this.featureFlags = new Ze(this), this.toolbar = new ri(this), this.pageViewManager = new nr(this), this.surveys = new sr(this), this.rateLimiter = new or(), this.requestRouter = new er(this), this.people = { set: function(e6, n2, i2) {
        var r2 = k(e6) ? o({}, e6, n2) : e6;
        t2.setPersonProperties(r2), i2 == null || i2({});
      }, set_once: function(e6, n2, i2) {
        var r2 = k(e6) ? o({}, e6, n2) : e6;
        t2.setPersonProperties(void 0, r2), i2 == null || i2({});
      } };
    }
    return s(e5, [{ key: "init", value: function(t2, n2, i2) {
      if (i2 && i2 !== fr) {
        var r2, s2 = (r2 = dr[i2]) !== null && r2 !== void 0 ? r2 : new e5();
        return s2._init(t2, n2, i2), dr[i2] = s2, dr[fr][i2] = s2, s2;
      }
      return this._init(t2, n2, i2);
    } }, { key: "_init", value: function(e6) {
      var n2, i2, r2, s2 = this, o2 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {}, a2 = arguments.length > 2 ? arguments[2] : void 0;
      if (w(e6) || function(e7) {
        return k(e7) && e7.trim().length === 0;
      }(e6))
        j.critical("PostHog was initialized without a token. This likely indicates a misconfiguration. Please check the first argument passed to posthog.init()");
      else {
        if (!this.__loaded) {
          var u2;
          if (this.__loaded = true, this.config = {}, this._triggered_notifs = [], o2.request_headers = o2.request_headers || o2.xhr_headers, this.set_config(G({}, gr(), o2, { name: a2, token: e6 })), E != null && (n2 = E.rrweb) !== null && n2 !== void 0 && n2.record || E != null && E.rrwebRecord)
            this.__loaded_recorder_version = E == null || (u2 = E.rrweb) === null || u2 === void 0 ? void 0 : u2.version;
          if (this.persistence = new Pn(this.config), this.sessionPersistence = this.config.persistence === "sessionStorage" ? this.persistence : new Pn(t(t({}, this.config), {}, { persistence: "sessionStorage" })), this._requestQueue = new si(function(e7) {
            return s2._send_request(e7);
          }), this._retryQueue = new Ki(this), this.__captureHooks = [], this.__request_queue = [], this.sessionManager = new Zi(this.config, this.persistence), this.sessionPropsManager = new ur(this.sessionManager, this.persistence), this.sessionRecording = new ei(this), this.sessionRecording.startRecordingIfEnabled(), this.config.disable_scroll_properties || this.pageViewManager.startMeasuringScrollPosition(), this.__autocapture = this.config.autocapture, Qe._setIsAutocaptureEnabled(this), Qe._isAutocaptureEnabled) {
            this.__autocapture = this.config.autocapture;
            Qe.enabledForProject(this.config.token, 100, 100) ? Qe.isBrowserSupported() ? Qe.init(this) : (this.__autocapture = false, j.info("Disabling Automatic Event Collection because this browser is not supported")) : (this.__autocapture = false, j.info("Not in active bucket: disabling Automatic Event Collection."));
          }
          if (f.DEBUG = f.DEBUG || this.config.debug, this._gdpr_init(), o2.segment && (this.config.get_device_id = function() {
            return o2.segment.user().anonymousId();
          }, o2.segment.user().id() && (this.register({ distinct_id: o2.segment.user().id() }), this.persistence.set_user_state("identified"))), ((i2 = o2.bootstrap) === null || i2 === void 0 ? void 0 : i2.distinctID) !== void 0) {
            var l2, c2, d2 = this.config.get_device_id(ot()), h2 = (l2 = o2.bootstrap) !== null && l2 !== void 0 && l2.isIdentifiedID ? d2 : o2.bootstrap.distinctID;
            this.persistence.set_user_state((c2 = o2.bootstrap) !== null && c2 !== void 0 && c2.isIdentifiedID ? "identified" : "anonymous"), this.register({ distinct_id: o2.bootstrap.distinctID, $device_id: h2 });
          }
          if (this._hasBootstrappedFeatureFlags()) {
            var p2, g2, v2 = Object.keys(((p2 = o2.bootstrap) === null || p2 === void 0 ? void 0 : p2.featureFlags) || {}).filter(function(e7) {
              var t2, n3;
              return !((t2 = o2.bootstrap) === null || t2 === void 0 || (n3 = t2.featureFlags) === null || n3 === void 0 || !n3[e7]);
            }).reduce(function(e7, t2) {
              var n3, i3;
              return e7[t2] = ((n3 = o2.bootstrap) === null || n3 === void 0 || (i3 = n3.featureFlags) === null || i3 === void 0 ? void 0 : i3[t2]) || false, e7;
            }, {}), _2 = Object.keys(((g2 = o2.bootstrap) === null || g2 === void 0 ? void 0 : g2.featureFlagPayloads) || {}).filter(function(e7) {
              return v2[e7];
            }).reduce(function(e7, t2) {
              var n3, i3, r3, s3;
              (n3 = o2.bootstrap) !== null && n3 !== void 0 && (i3 = n3.featureFlagPayloads) !== null && i3 !== void 0 && i3[t2] && (e7[t2] = (r3 = o2.bootstrap) === null || r3 === void 0 || (s3 = r3.featureFlagPayloads) === null || s3 === void 0 ? void 0 : s3[t2]);
              return e7;
            }, {});
            this.featureFlags.receivedFeatureFlags({ featureFlags: v2, featureFlagPayloads: _2 });
          }
          if (!this.get_distinct_id()) {
            var m2 = this.config.get_device_id(ot());
            this.register_once({ distinct_id: m2, $device_id: m2 }, ""), this.persistence.set_user_state("anonymous");
          }
          return E == null || (r2 = E.addEventListener) === null || r2 === void 0 || r2.call(E, "onpagehide" in self ? "pagehide" : "unload", this._handle_unload.bind(this)), this.toolbar.maybeLoadToolbar(), o2.segment ? o2.segment.register(this.segmentIntegration()).then(function() {
            s2._loaded();
          }) : this._loaded(), this;
        }
        j.warn("You have already initialized PostHog! Re-initialising is a no-op");
      }
    } }, { key: "_afterDecideResponse", value: function(e6) {
      var t2;
      this.compression = void 0, e6.supportedCompression && !this.config.disable_compression && (this.compression = Q(e6.supportedCompression, Ge.GZipJS) ? Ge.GZipJS : Q(e6.supportedCompression, Ge.Base64) ? Ge.Base64 : void 0), (t2 = e6.analytics) !== null && t2 !== void 0 && t2.endpoint && (this.analyticsDefaultEndpoint = e6.analytics.endpoint), e6.elementsChainAsString && (this.elementsChainAsString = e6.elementsChainAsString);
    } }, { key: "_loaded", value: function() {
      var e6 = this, t2 = this.config.advanced_disable_decide;
      t2 || this.featureFlags.setReloadingPaused(true);
      try {
        this.config.loaded(this);
      } catch (e7) {
        j.critical("`loaded` function failed", e7);
      }
      this._start_queue_if_opted_in(), this.config.capture_pageview && setTimeout(function() {
        A && e6.capture("$pageview", { title: A.title }, { send_instantly: true });
      }, 1), t2 || (new ti(this).call(), this.featureFlags.resetRequestQueue());
    } }, { key: "_start_queue_if_opted_in", value: function() {
      var e6;
      this.has_opted_out_capturing() || this.config.request_batching && ((e6 = this._requestQueue) === null || e6 === void 0 || e6.enable());
    } }, { key: "_dom_loaded", value: function() {
      var e6 = this;
      this.has_opted_out_capturing() || W(this.__request_queue, function(t2) {
        return e6._send_retriable_request(t2);
      }), this.__request_queue = [], this._start_queue_if_opted_in();
    } }, { key: "_handle_unload", value: function() {
      var e6, t2;
      this.config.request_batching ? (this.config.capture_pageview && this.config.capture_pageleave && this.capture("$pageleave"), (e6 = this._requestQueue) === null || e6 === void 0 || e6.unload(), (t2 = this._retryQueue) === null || t2 === void 0 || t2.unload()) : this.config.capture_pageview && this.config.capture_pageleave && this.capture("$pageleave", null, { transport: "sendBeacon" });
    } }, { key: "_send_request", value: function(e6) {
      var n2 = this;
      this.__loaded && (pr ? this.__request_queue.push(e6) : this.rateLimiter.isRateLimited(e6.batchKey) || (e6.transport = e6.transport || this.config.api_transport, e6.url = ji(e6.url, { ip: this.config.ip ? 1 : 0 }), e6.headers = this.config.request_headers, function(e7) {
        var n3, i2 = t({}, e7);
        i2.timeout = i2.timeout || 6e4, i2.url = ji(i2.url, { _: new Date().getTime().toString(), ver: f.LIB_VERSION, compression: i2.compression }), i2.transport === "sendBeacon" && E != null && (n3 = E.navigator) !== null && n3 !== void 0 && n3.sendBeacon ? Gi(i2) : i2.transport === "fetch" && q ? zi(i2) : D || !A ? Wi(i2) : Qi(i2);
      }(t(t({}, e6), {}, { callback: function(t2) {
        var i2, r2, s2;
        (n2.rateLimiter.checkForLimiting(t2), t2.statusCode >= 400) && ((r2 = (s2 = n2.config).on_request_error) === null || r2 === void 0 || r2.call(s2, t2));
        (i2 = e6.callback) === null || i2 === void 0 || i2.call(e6, t2);
      } }))));
    } }, { key: "_send_retriable_request", value: function(e6) {
      this._retryQueue ? this._retryQueue.retriableRequest(e6) : this._send_request(e6);
    } }, { key: "_execute_array", value: function(e6) {
      var t2, n2 = this, i2 = [], r2 = [], s2 = [];
      W(e6, function(e7) {
        e7 && (t2 = e7[0], m(t2) ? s2.push(e7) : y(e7) ? e7.call(n2) : m(e7) && t2 === "alias" ? i2.push(e7) : m(e7) && t2.indexOf("capture") !== -1 && y(n2[t2]) ? s2.push(e7) : r2.push(e7));
      });
      var o2 = function(e7, t3) {
        W(e7, function(e8) {
          if (m(e8[0])) {
            var n3 = t3;
            z(e8, function(e9) {
              n3 = n3[e9[0]].apply(n3, e9.slice(1));
            });
          } else
            this[e8[0]].apply(this, e8.slice(1));
        }, t3);
      };
      o2(i2, this), o2(r2, this), o2(s2, this);
    } }, { key: "_hasBootstrappedFeatureFlags", value: function() {
      var e6, t2;
      return ((e6 = this.config.bootstrap) === null || e6 === void 0 ? void 0 : e6.featureFlags) && Object.keys((t2 = this.config.bootstrap) === null || t2 === void 0 ? void 0 : t2.featureFlags).length > 0 || false;
    } }, { key: "push", value: function(e6) {
      this._execute_array([e6]);
    } }, { key: "capture", value: function(e6, n2, i2) {
      var r2;
      if (!this.__loaded || !this.sessionPersistence || !this._requestQueue)
        return j.uninitializedWarning("posthog.capture");
      if (!Gn(this))
        if (!w(e6) && k(e6)) {
          if (!N || this.config.opt_out_useragent_filter || !cr(N, this.config.custom_blocked_useragents)) {
            this.sessionPersistence.update_search_keyword(), this.config.store_google && this.sessionPersistence.update_campaign_params(), this.config.save_referrer && this.sessionPersistence.update_referrer_info();
            var s2 = { uuid: ot(), event: e6, properties: this._calculate_event_properties(e6, n2 || {}) };
            e6 === "$identify" && (s2.$set = i2 == null ? void 0 : i2.$set, s2.$set_once = i2 == null ? void 0 : i2.$set_once), (s2 = ee(s2, i2 != null && i2._noTruncate ? null : this.config.properties_string_max_length)).timestamp = (i2 == null ? void 0 : i2.timestamp) || new Date(), w(i2 == null ? void 0 : i2.timestamp) || (s2.properties.$event_time_override_provided = true, s2.properties.$event_time_override_system_time = new Date());
            var o2 = t(t({}, s2.properties.$set), s2.$set);
            (function(e7) {
              if (b(e7)) {
                for (var t2 in e7)
                  if (v.call(e7, t2))
                    return false;
                return true;
              }
              return false;
            })(o2) || this.setPersonPropertiesForFlags(o2), j.info("send", s2);
            var a2 = { method: "POST", url: (r2 = i2 == null ? void 0 : i2._url) !== null && r2 !== void 0 ? r2 : this.requestRouter.endpointFor("api", this.analyticsDefaultEndpoint), data: s2, compression: this.compression, batchKey: i2 == null ? void 0 : i2._batchKey };
            return !this.config.request_batching || i2 && (i2 == null || !i2._batchKey) || i2 != null && i2.send_instantly ? this._send_retriable_request(a2) : this._requestQueue.enqueue(a2), this._invokeCaptureHooks(e6, s2), s2;
          }
        } else
          j.error("No event name provided to posthog.capture");
    } }, { key: "_addCaptureHook", value: function(e6) {
      this.__captureHooks.push(e6);
    } }, { key: "_invokeCaptureHooks", value: function(e6, t2) {
      this.config._onCapture(e6, t2), z(this.__captureHooks, function(t3) {
        return t3(e6);
      });
    } }, { key: "_calculate_event_properties", value: function(e6, n2) {
      if (!this.persistence || !this.sessionPersistence)
        return n2;
      var i2 = this.persistence.remove_event_timer(e6), r2 = t({}, n2);
      if (r2.token = this.config.token, e6 === "$snapshot") {
        var s2 = t(t({}, this.persistence.properties()), this.sessionPersistence.properties());
        return r2.distinct_id = s2.distinct_id, r2;
      }
      var o2 = Rn.properties();
      if (this.sessionManager) {
        var a2 = this.sessionManager.checkAndGetSessionAndWindowId(), u2 = a2.sessionId, c2 = a2.windowId;
        r2.$session_id = u2, r2.$window_id = c2;
      }
      if (this.sessionPropsManager && this.config.__preview_send_client_session_params && (e6 === "$pageview" || e6 === "$pageleave" || e6 === "$autocapture")) {
        var d2 = this.sessionPropsManager.getSessionProps();
        r2 = G(r2, d2);
      }
      if (!this.config.disable_scroll_properties) {
        var h2 = {};
        e6 === "$pageview" ? h2 = this.pageViewManager.doPageView() : e6 === "$pageleave" && (h2 = this.pageViewManager.doPageLeave()), r2 = G(r2, h2);
      }
      if (e6 === "$pageview" && A && (r2.title = A.title), e6 === "$performance_event") {
        var f2 = this.persistence.properties();
        return r2.distinct_id = f2.distinct_id, r2.$current_url = o2.$current_url, r2;
      }
      if (!w(i2)) {
        var p2 = new Date().getTime() - i2;
        r2.$duration = parseFloat((p2 / 1e3).toFixed(3));
      }
      (N && this.config.opt_out_useragent_filter && (r2.$browser_type = cr(N, this.config.custom_blocked_useragents) ? "bot" : "browser"), r2 = G({}, Rn.properties(), this.persistence.properties(), this.sessionPersistence.properties(), r2), m(this.config.property_denylist) && m(this.config.property_blacklist)) ? z([].concat(l(this.config.property_blacklist), l(this.config.property_denylist)), function(e7) {
        delete r2[e7];
      }) : j.error("Invalid value for property_denylist config: " + this.config.property_denylist + " or property_blacklist config: " + this.config.property_blacklist);
      var g2 = this.config.sanitize_properties;
      return g2 && (r2 = g2(r2, e6)), r2;
    } }, { key: "register", value: function(e6, t2) {
      var n2;
      (n2 = this.persistence) === null || n2 === void 0 || n2.register(e6, t2);
    } }, { key: "register_once", value: function(e6, t2, n2) {
      var i2;
      (i2 = this.persistence) === null || i2 === void 0 || i2.register_once(e6, t2, n2);
    } }, { key: "register_for_session", value: function(e6) {
      var t2;
      (t2 = this.sessionPersistence) === null || t2 === void 0 || t2.register(e6);
    } }, { key: "unregister", value: function(e6) {
      var t2;
      (t2 = this.persistence) === null || t2 === void 0 || t2.unregister(e6);
    } }, { key: "unregister_for_session", value: function(e6) {
      var t2;
      (t2 = this.sessionPersistence) === null || t2 === void 0 || t2.unregister(e6);
    } }, { key: "_register_single", value: function(e6, t2) {
      this.register(o({}, e6, t2));
    } }, { key: "getFeatureFlag", value: function(e6, t2) {
      return this.featureFlags.getFeatureFlag(e6, t2);
    } }, { key: "getFeatureFlagPayload", value: function(e6) {
      var t2 = this.featureFlags.getFeatureFlagPayload(e6);
      try {
        return JSON.parse(t2);
      } catch (e7) {
        return t2;
      }
    } }, { key: "isFeatureEnabled", value: function(e6, t2) {
      return this.featureFlags.isFeatureEnabled(e6, t2);
    } }, { key: "reloadFeatureFlags", value: function() {
      this.featureFlags.reloadFeatureFlags();
    } }, { key: "updateEarlyAccessFeatureEnrollment", value: function(e6, t2) {
      this.featureFlags.updateEarlyAccessFeatureEnrollment(e6, t2);
    } }, { key: "getEarlyAccessFeatures", value: function(e6) {
      var t2 = arguments.length > 1 && arguments[1] !== void 0 && arguments[1];
      return this.featureFlags.getEarlyAccessFeatures(e6, t2);
    } }, { key: "onFeatureFlags", value: function(e6) {
      return this.featureFlags.onFeatureFlags(e6);
    } }, { key: "onSessionId", value: function(e6) {
      var t2, n2;
      return (t2 = (n2 = this.sessionManager) === null || n2 === void 0 ? void 0 : n2.onSessionId(e6)) !== null && t2 !== void 0 ? t2 : function() {
      };
    } }, { key: "getSurveys", value: function(e6) {
      var t2 = arguments.length > 1 && arguments[1] !== void 0 && arguments[1];
      this.surveys.getSurveys(e6, t2);
    } }, { key: "getActiveMatchingSurveys", value: function(e6) {
      var t2 = arguments.length > 1 && arguments[1] !== void 0 && arguments[1];
      this.surveys.getActiveMatchingSurveys(e6, t2);
    } }, { key: "identify", value: function(e6, t2, n2) {
      if (!this.__loaded || !this.persistence)
        return j.uninitializedWarning("posthog.identify");
      if (R(e6) && (e6 = e6.toString(), j.warn("The first argument to posthog.identify was a number, but it should be a string. It has been converted to a string.")), e6)
        if (["distinct_id", "distinctid"].includes(e6.toLowerCase()))
          j.critical('The string "'.concat(e6, '" was set in posthog.identify which indicates an error. This ID should be unique to the user and not a hardcoded string.'));
        else {
          var i2 = this.get_distinct_id();
          if (this.register({ $user_id: e6 }), !this.get_property("$device_id")) {
            var r2 = i2;
            this.register_once({ $had_persisted_distinct_id: true, $device_id: r2 }, "");
          }
          e6 !== i2 && e6 !== this.get_property(Re) && (this.unregister(Re), this.register({ distinct_id: e6 }));
          var s2 = this.persistence.get_user_state() === "anonymous";
          e6 !== i2 && s2 ? (this.persistence.set_user_state("identified"), this.setPersonPropertiesForFlags(t2 || {}, false), this.capture("$identify", { distinct_id: e6, $anon_distinct_id: i2 }, { $set: t2 || {}, $set_once: n2 || {} }), this.featureFlags.setAnonymousDistinctId(i2)) : (t2 || n2) && this.setPersonProperties(t2, n2), e6 !== i2 && (this.reloadFeatureFlags(), this.unregister(Be));
        }
      else
        j.error("Unique user id has not been set in posthog.identify");
    } }, { key: "setPersonProperties", value: function(e6, t2) {
      (e6 || t2) && (this.setPersonPropertiesForFlags(e6 || {}), this.capture("$set", { $set: e6 || {}, $set_once: t2 || {} }));
    } }, { key: "group", value: function(e6, n2, i2) {
      if (e6 && n2) {
        var r2 = this.getGroups();
        r2[e6] !== n2 && this.resetGroupPropertiesForFlags(e6), this.register({ $groups: t(t({}, r2), {}, o({}, e6, n2)) }), i2 && (this.capture("$groupidentify", { $group_type: e6, $group_key: n2, $group_set: i2 }), this.setGroupPropertiesForFlags(o({}, e6, i2))), r2[e6] === n2 || i2 || this.reloadFeatureFlags();
      } else
        j.error("posthog.group requires a group type and group key");
    } }, { key: "resetGroups", value: function() {
      this.register({ $groups: {} }), this.resetGroupPropertiesForFlags(), this.reloadFeatureFlags();
    } }, { key: "setPersonPropertiesForFlags", value: function(e6) {
      var t2 = !(arguments.length > 1 && arguments[1] !== void 0) || arguments[1];
      this.featureFlags.setPersonPropertiesForFlags(e6, t2);
    } }, { key: "resetPersonPropertiesForFlags", value: function() {
      this.featureFlags.resetPersonPropertiesForFlags();
    } }, { key: "setGroupPropertiesForFlags", value: function(e6) {
      var t2 = !(arguments.length > 1 && arguments[1] !== void 0) || arguments[1];
      this.featureFlags.setGroupPropertiesForFlags(e6, t2);
    } }, { key: "resetGroupPropertiesForFlags", value: function(e6) {
      this.featureFlags.resetGroupPropertiesForFlags(e6);
    } }, { key: "reset", value: function(e6) {
      var t2, n2, i2, r2;
      if (!this.__loaded)
        return j.uninitializedWarning("posthog.reset");
      var s2 = this.get_property("$device_id");
      (t2 = this.persistence) === null || t2 === void 0 || t2.clear(), (n2 = this.sessionPersistence) === null || n2 === void 0 || n2.clear(), (i2 = this.persistence) === null || i2 === void 0 || i2.set_user_state("anonymous"), (r2 = this.sessionManager) === null || r2 === void 0 || r2.resetSessionId();
      var o2 = this.config.get_device_id(ot());
      this.register_once({ distinct_id: o2, $device_id: e6 ? o2 : s2 }, "");
    } }, { key: "get_distinct_id", value: function() {
      return this.get_property("distinct_id");
    } }, { key: "getGroups", value: function() {
      return this.get_property("$groups") || {};
    } }, { key: "get_session_id", value: function() {
      var e6, t2;
      return (e6 = (t2 = this.sessionManager) === null || t2 === void 0 ? void 0 : t2.checkAndGetSessionAndWindowId(true).sessionId) !== null && e6 !== void 0 ? e6 : "";
    } }, { key: "get_session_replay_url", value: function(e6) {
      if (!this.sessionManager)
        return "";
      var t2 = this.sessionManager.checkAndGetSessionAndWindowId(true), n2 = t2.sessionId, i2 = t2.sessionStartTimestamp, r2 = this.requestRouter.endpointFor("ui", "/replay/" + n2);
      if (e6 != null && e6.withTimestamp && i2) {
        var s2, o2 = (s2 = e6.timestampLookBack) !== null && s2 !== void 0 ? s2 : 10;
        if (!i2)
          return r2;
        var a2 = Math.max(Math.floor((new Date().getTime() - i2) / 1e3) - o2, 0);
        r2 += "?t=".concat(a2);
      }
      return r2;
    } }, { key: "alias", value: function(e6, t2) {
      return e6 === this.get_property(Fe) ? (j.critical("Attempting to create alias for existing People user - aborting."), -2) : (w(t2) && (t2 = this.get_distinct_id()), e6 !== t2 ? (this._register_single(Re, e6), this.capture("$create_alias", { alias: e6, distinct_id: t2 })) : (j.warn("alias matches current distinct_id - skipping api call."), this.identify(e6), -1));
    } }, { key: "set_config", value: function(e6) {
      var n2, i2 = t({}, this.config);
      if (b(e6) && (G(this.config, e6), this.config.persistence_name || (this.config.persistence_name = this.config.cookie_name), this.config.disable_persistence || (this.config.disable_persistence = this.config.disable_cookie), (n2 = this.persistence) === null || n2 === void 0 || n2.update_config(this.config, i2), this.sessionPersistence = this.config.persistence === "sessionStorage" ? this.persistence : new Pn(t(t({}, this.config), {}, { persistence: "sessionStorage" })), gt.is_supported() && gt.get("ph_debug") === "true" && (this.config.debug = true), this.config.debug && (f.DEBUG = true), this.sessionRecording && !w(e6.disable_session_recording))) {
        var r2 = i2.disable_session_recording !== e6.disable_session_recording, s2 = !Gn(this) && !e6.disable_session_recording && !this.sessionRecording.started;
        (r2 || s2) && (e6.disable_session_recording ? this.sessionRecording.stopRecording() : this.sessionRecording.startRecordingIfEnabled());
      }
    } }, { key: "startSessionRecording", value: function() {
      this.set_config({ disable_session_recording: false });
    } }, { key: "stopSessionRecording", value: function() {
      this.set_config({ disable_session_recording: true });
    } }, { key: "sessionRecordingStarted", value: function() {
      var e6;
      return !((e6 = this.sessionRecording) === null || e6 === void 0 || !e6.started);
    } }, { key: "loadToolbar", value: function(e6) {
      return this.toolbar.loadToolbar(e6);
    } }, { key: "get_property", value: function(e6) {
      var t2;
      return (t2 = this.persistence) === null || t2 === void 0 ? void 0 : t2.props[e6];
    } }, { key: "getSessionProperty", value: function(e6) {
      var t2;
      return (t2 = this.sessionPersistence) === null || t2 === void 0 ? void 0 : t2.props[e6];
    } }, { key: "toString", value: function() {
      var e6, t2 = (e6 = this.config.name) !== null && e6 !== void 0 ? e6 : fr;
      return t2 !== fr && (t2 = fr + "." + t2), t2;
    } }, { key: "_gdpr_init", value: function() {
      this.config.opt_out_capturing_persistence_type === "localStorage" && gt.is_supported() && (!this.has_opted_in_capturing() && this.has_opted_in_capturing({ persistence_type: "cookie" }) && this.opt_in_capturing({ enable_persistence: false }), !this.has_opted_out_capturing() && this.has_opted_out_capturing({ persistence_type: "cookie" }) && this.opt_out_capturing({ clear_persistence: false }), this.clear_opt_in_out_capturing({ persistence_type: "cookie", enable_persistence: false })), this.has_opted_out_capturing() ? this._gdpr_update_persistence({ clear_persistence: true }) : this.has_opted_in_capturing() || !this.config.opt_out_capturing_by_default && !ft.get("ph_optout") || (ft.remove("ph_optout"), this.opt_out_capturing({ clear_persistence: this.config.opt_out_persistence_by_default }));
    } }, { key: "_gdpr_update_persistence", value: function(e6) {
      var t2, n2, i2, r2, s2;
      if (e6 && e6.clear_persistence)
        i2 = true;
      else {
        if (!e6 || !e6.enable_persistence)
          return;
        i2 = false;
      }
      this.config.disable_persistence || ((t2 = this.persistence) === null || t2 === void 0 ? void 0 : t2.disabled) === i2 || ((r2 = this.persistence) === null || r2 === void 0 || r2.set_disabled(i2));
      this.config.disable_persistence || ((n2 = this.sessionPersistence) === null || n2 === void 0 ? void 0 : n2.disabled) === i2 || ((s2 = this.sessionPersistence) === null || s2 === void 0 || s2.set_disabled(i2));
    } }, { key: "_gdpr_call_func", value: function(e6, t2) {
      return t2 = G({ capture: this.capture.bind(this), persistence_type: this.config.opt_out_capturing_persistence_type, cookie_prefix: this.config.opt_out_capturing_cookie_prefix, cookie_expiration: this.config.cookie_expiration, cross_subdomain_cookie: this.config.cross_subdomain_cookie, secure_cookie: this.config.secure_cookie }, t2 || {}), gt.is_supported() || t2.persistence_type !== "localStorage" || (t2.persistence_type = "cookie"), e6(this.config.token, { capture: t2.capture, captureEventName: t2.capture_event_name, captureProperties: t2.capture_properties, persistenceType: t2.persistence_type, persistencePrefix: t2.cookie_prefix, cookieExpiration: t2.cookie_expiration, crossSubdomainCookie: t2.cross_subdomain_cookie, secureCookie: t2.secure_cookie });
    } }, { key: "opt_in_capturing", value: function(e6) {
      e6 = G({ enable_persistence: true }, e6 || {}), this._gdpr_call_func(Ln, e6), this._gdpr_update_persistence(e6);
    } }, { key: "opt_out_capturing", value: function(e6) {
      var t2 = G({ clear_persistence: true }, e6 || {});
      this._gdpr_call_func(Nn, t2), this._gdpr_update_persistence(t2);
    } }, { key: "has_opted_in_capturing", value: function(e6) {
      return this._gdpr_call_func(Bn, e6);
    } }, { key: "has_opted_out_capturing", value: function(e6) {
      return this._gdpr_call_func(Hn, e6);
    } }, { key: "clear_opt_in_out_capturing", value: function(e6) {
      var t2 = G({ enable_persistence: true }, e6 != null ? e6 : {});
      this._gdpr_call_func(jn, t2), this._gdpr_update_persistence(t2);
    } }, { key: "debug", value: function(e6) {
      e6 === false ? (E == null || E.console.log("You've disabled debug mode."), localStorage && localStorage.removeItem("ph_debug"), this.set_config({ debug: false })) : (E == null || E.console.log("You're now in debug mode. All calls to PostHog will be logged in your console.\nYou can disable this with `posthog.debug(false)`."), localStorage && localStorage.setItem("ph_debug", "true"), this.set_config({ debug: true }));
    } }]), e5;
  }();
  !function(e5, t2) {
    for (var n2 = 0; n2 < t2.length; n2++)
      e5.prototype[t2[n2]] = X(e5.prototype[t2[n2]]);
  }(_r, ["identify"]);
  var mr;
  var yr;
  !function(e5) {
    e5.Popover = "popover", e5.API = "api", e5.Widget = "widget";
  }(mr || (mr = {})), function(e5) {
    e5.Open = "open", e5.MultipleChoice = "multiple_choice", e5.SingleChoice = "single_choice", e5.Rating = "rating", e5.Link = "link";
  }(yr || (yr = {}));
  var br;
  var wr = (br = dr[fr] = new _r(), function() {
    function e5() {
      e5.done || (e5.done = true, pr = false, z(dr, function(e6) {
        e6._dom_loaded();
      }));
    }
    A != null && A.addEventListener && (A.readyState === "complete" ? e5() : A.addEventListener("DOMContentLoaded", e5, false)), E && ne(E, "load", e5, true);
  }(), br);

  // ../deps/phoenix_html/priv/static/phoenix_html.js
  (function() {
    var PolyfillEvent = eventConstructor();
    function eventConstructor() {
      if (typeof window.CustomEvent === "function")
        return window.CustomEvent;
      function CustomEvent2(event, params) {
        params = params || { bubbles: false, cancelable: false, detail: void 0 };
        var evt = document.createEvent("CustomEvent");
        evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);
        return evt;
      }
      CustomEvent2.prototype = window.Event.prototype;
      return CustomEvent2;
    }
    function buildHiddenInput(name, value) {
      var input = document.createElement("input");
      input.type = "hidden";
      input.name = name;
      input.value = value;
      return input;
    }
    function handleClick(element, targetModifierKey) {
      var to = element.getAttribute("data-to"), method = buildHiddenInput("_method", element.getAttribute("data-method")), csrf = buildHiddenInput("_csrf_token", element.getAttribute("data-csrf")), form = document.createElement("form"), submit = document.createElement("input"), target = element.getAttribute("target");
      form.method = element.getAttribute("data-method") === "get" ? "get" : "post";
      form.action = to;
      form.style.display = "none";
      if (target)
        form.target = target;
      else if (targetModifierKey)
        form.target = "_blank";
      form.appendChild(csrf);
      form.appendChild(method);
      document.body.appendChild(form);
      submit.type = "submit";
      form.appendChild(submit);
      submit.click();
    }
    window.addEventListener("click", function(e5) {
      var element = e5.target;
      if (e5.defaultPrevented)
        return;
      while (element && element.getAttribute) {
        var phoenixLinkEvent = new PolyfillEvent("phoenix.link.click", {
          "bubbles": true,
          "cancelable": true
        });
        if (!element.dispatchEvent(phoenixLinkEvent)) {
          e5.preventDefault();
          e5.stopImmediatePropagation();
          return false;
        }
        if (element.getAttribute("data-method")) {
          handleClick(element, e5.metaKey || e5.shiftKey);
          e5.preventDefault();
          return false;
        } else {
          element = element.parentNode;
        }
      }
    }, false);
    window.addEventListener("phoenix.link.click", function(e5) {
      var message = e5.target.getAttribute("data-confirm");
      if (message && !window.confirm(message)) {
        e5.preventDefault();
      }
    }, false);
  })();

  // ../deps/phoenix/priv/static/phoenix.mjs
  var closure = (value) => {
    if (typeof value === "function") {
      return value;
    } else {
      let closure22 = function() {
        return value;
      };
      return closure22;
    }
  };
  var globalSelf = typeof self !== "undefined" ? self : null;
  var phxWindow = typeof window !== "undefined" ? window : null;
  var global = globalSelf || phxWindow || global;
  var DEFAULT_VSN = "2.0.0";
  var SOCKET_STATES = { connecting: 0, open: 1, closing: 2, closed: 3 };
  var DEFAULT_TIMEOUT = 1e4;
  var WS_CLOSE_NORMAL = 1e3;
  var CHANNEL_STATES = {
    closed: "closed",
    errored: "errored",
    joined: "joined",
    joining: "joining",
    leaving: "leaving"
  };
  var CHANNEL_EVENTS = {
    close: "phx_close",
    error: "phx_error",
    join: "phx_join",
    reply: "phx_reply",
    leave: "phx_leave"
  };
  var TRANSPORTS = {
    longpoll: "longpoll",
    websocket: "websocket"
  };
  var XHR_STATES = {
    complete: 4
  };
  var Push = class {
    constructor(channel, event, payload, timeout) {
      this.channel = channel;
      this.event = event;
      this.payload = payload || function() {
        return {};
      };
      this.receivedResp = null;
      this.timeout = timeout;
      this.timeoutTimer = null;
      this.recHooks = [];
      this.sent = false;
    }
    resend(timeout) {
      this.timeout = timeout;
      this.reset();
      this.send();
    }
    send() {
      if (this.hasReceived("timeout")) {
        return;
      }
      this.startTimeout();
      this.sent = true;
      this.channel.socket.push({
        topic: this.channel.topic,
        event: this.event,
        payload: this.payload(),
        ref: this.ref,
        join_ref: this.channel.joinRef()
      });
    }
    receive(status, callback) {
      if (this.hasReceived(status)) {
        callback(this.receivedResp.response);
      }
      this.recHooks.push({ status, callback });
      return this;
    }
    reset() {
      this.cancelRefEvent();
      this.ref = null;
      this.refEvent = null;
      this.receivedResp = null;
      this.sent = false;
    }
    matchReceive({ status, response, _ref }) {
      this.recHooks.filter((h2) => h2.status === status).forEach((h2) => h2.callback(response));
    }
    cancelRefEvent() {
      if (!this.refEvent) {
        return;
      }
      this.channel.off(this.refEvent);
    }
    cancelTimeout() {
      clearTimeout(this.timeoutTimer);
      this.timeoutTimer = null;
    }
    startTimeout() {
      if (this.timeoutTimer) {
        this.cancelTimeout();
      }
      this.ref = this.channel.socket.makeRef();
      this.refEvent = this.channel.replyEventName(this.ref);
      this.channel.on(this.refEvent, (payload) => {
        this.cancelRefEvent();
        this.cancelTimeout();
        this.receivedResp = payload;
        this.matchReceive(payload);
      });
      this.timeoutTimer = setTimeout(() => {
        this.trigger("timeout", {});
      }, this.timeout);
    }
    hasReceived(status) {
      return this.receivedResp && this.receivedResp.status === status;
    }
    trigger(status, response) {
      this.channel.trigger(this.refEvent, { status, response });
    }
  };
  var Timer = class {
    constructor(callback, timerCalc) {
      this.callback = callback;
      this.timerCalc = timerCalc;
      this.timer = null;
      this.tries = 0;
    }
    reset() {
      this.tries = 0;
      clearTimeout(this.timer);
    }
    scheduleTimeout() {
      clearTimeout(this.timer);
      this.timer = setTimeout(() => {
        this.tries = this.tries + 1;
        this.callback();
      }, this.timerCalc(this.tries + 1));
    }
  };
  var Channel = class {
    constructor(topic, params, socket) {
      this.state = CHANNEL_STATES.closed;
      this.topic = topic;
      this.params = closure(params || {});
      this.socket = socket;
      this.bindings = [];
      this.bindingRef = 0;
      this.timeout = this.socket.timeout;
      this.joinedOnce = false;
      this.joinPush = new Push(this, CHANNEL_EVENTS.join, this.params, this.timeout);
      this.pushBuffer = [];
      this.stateChangeRefs = [];
      this.rejoinTimer = new Timer(() => {
        if (this.socket.isConnected()) {
          this.rejoin();
        }
      }, this.socket.rejoinAfterMs);
      this.stateChangeRefs.push(this.socket.onError(() => this.rejoinTimer.reset()));
      this.stateChangeRefs.push(this.socket.onOpen(() => {
        this.rejoinTimer.reset();
        if (this.isErrored()) {
          this.rejoin();
        }
      }));
      this.joinPush.receive("ok", () => {
        this.state = CHANNEL_STATES.joined;
        this.rejoinTimer.reset();
        this.pushBuffer.forEach((pushEvent) => pushEvent.send());
        this.pushBuffer = [];
      });
      this.joinPush.receive("error", () => {
        this.state = CHANNEL_STATES.errored;
        if (this.socket.isConnected()) {
          this.rejoinTimer.scheduleTimeout();
        }
      });
      this.onClose(() => {
        this.rejoinTimer.reset();
        if (this.socket.hasLogger())
          this.socket.log("channel", `close ${this.topic} ${this.joinRef()}`);
        this.state = CHANNEL_STATES.closed;
        this.socket.remove(this);
      });
      this.onError((reason) => {
        if (this.socket.hasLogger())
          this.socket.log("channel", `error ${this.topic}`, reason);
        if (this.isJoining()) {
          this.joinPush.reset();
        }
        this.state = CHANNEL_STATES.errored;
        if (this.socket.isConnected()) {
          this.rejoinTimer.scheduleTimeout();
        }
      });
      this.joinPush.receive("timeout", () => {
        if (this.socket.hasLogger())
          this.socket.log("channel", `timeout ${this.topic} (${this.joinRef()})`, this.joinPush.timeout);
        let leavePush = new Push(this, CHANNEL_EVENTS.leave, closure({}), this.timeout);
        leavePush.send();
        this.state = CHANNEL_STATES.errored;
        this.joinPush.reset();
        if (this.socket.isConnected()) {
          this.rejoinTimer.scheduleTimeout();
        }
      });
      this.on(CHANNEL_EVENTS.reply, (payload, ref) => {
        this.trigger(this.replyEventName(ref), payload);
      });
    }
    join(timeout = this.timeout) {
      if (this.joinedOnce) {
        throw new Error("tried to join multiple times. 'join' can only be called a single time per channel instance");
      } else {
        this.timeout = timeout;
        this.joinedOnce = true;
        this.rejoin();
        return this.joinPush;
      }
    }
    onClose(callback) {
      this.on(CHANNEL_EVENTS.close, callback);
    }
    onError(callback) {
      return this.on(CHANNEL_EVENTS.error, (reason) => callback(reason));
    }
    on(event, callback) {
      let ref = this.bindingRef++;
      this.bindings.push({ event, ref, callback });
      return ref;
    }
    off(event, ref) {
      this.bindings = this.bindings.filter((bind) => {
        return !(bind.event === event && (typeof ref === "undefined" || ref === bind.ref));
      });
    }
    canPush() {
      return this.socket.isConnected() && this.isJoined();
    }
    push(event, payload, timeout = this.timeout) {
      payload = payload || {};
      if (!this.joinedOnce) {
        throw new Error(`tried to push '${event}' to '${this.topic}' before joining. Use channel.join() before pushing events`);
      }
      let pushEvent = new Push(this, event, function() {
        return payload;
      }, timeout);
      if (this.canPush()) {
        pushEvent.send();
      } else {
        pushEvent.startTimeout();
        this.pushBuffer.push(pushEvent);
      }
      return pushEvent;
    }
    leave(timeout = this.timeout) {
      this.rejoinTimer.reset();
      this.joinPush.cancelTimeout();
      this.state = CHANNEL_STATES.leaving;
      let onClose = () => {
        if (this.socket.hasLogger())
          this.socket.log("channel", `leave ${this.topic}`);
        this.trigger(CHANNEL_EVENTS.close, "leave");
      };
      let leavePush = new Push(this, CHANNEL_EVENTS.leave, closure({}), timeout);
      leavePush.receive("ok", () => onClose()).receive("timeout", () => onClose());
      leavePush.send();
      if (!this.canPush()) {
        leavePush.trigger("ok", {});
      }
      return leavePush;
    }
    onMessage(_event, payload, _ref) {
      return payload;
    }
    isMember(topic, event, payload, joinRef) {
      if (this.topic !== topic) {
        return false;
      }
      if (joinRef && joinRef !== this.joinRef()) {
        if (this.socket.hasLogger())
          this.socket.log("channel", "dropping outdated message", { topic, event, payload, joinRef });
        return false;
      } else {
        return true;
      }
    }
    joinRef() {
      return this.joinPush.ref;
    }
    rejoin(timeout = this.timeout) {
      if (this.isLeaving()) {
        return;
      }
      this.socket.leaveOpenTopic(this.topic);
      this.state = CHANNEL_STATES.joining;
      this.joinPush.resend(timeout);
    }
    trigger(event, payload, ref, joinRef) {
      let handledPayload = this.onMessage(event, payload, ref, joinRef);
      if (payload && !handledPayload) {
        throw new Error("channel onMessage callbacks must return the payload, modified or unmodified");
      }
      let eventBindings = this.bindings.filter((bind) => bind.event === event);
      for (let i2 = 0; i2 < eventBindings.length; i2++) {
        let bind = eventBindings[i2];
        bind.callback(handledPayload, ref, joinRef || this.joinRef());
      }
    }
    replyEventName(ref) {
      return `chan_reply_${ref}`;
    }
    isClosed() {
      return this.state === CHANNEL_STATES.closed;
    }
    isErrored() {
      return this.state === CHANNEL_STATES.errored;
    }
    isJoined() {
      return this.state === CHANNEL_STATES.joined;
    }
    isJoining() {
      return this.state === CHANNEL_STATES.joining;
    }
    isLeaving() {
      return this.state === CHANNEL_STATES.leaving;
    }
  };
  var Ajax = class {
    static request(method, endPoint, accept, body, timeout, ontimeout, callback) {
      if (global.XDomainRequest) {
        let req = new global.XDomainRequest();
        return this.xdomainRequest(req, method, endPoint, body, timeout, ontimeout, callback);
      } else {
        let req = new global.XMLHttpRequest();
        return this.xhrRequest(req, method, endPoint, accept, body, timeout, ontimeout, callback);
      }
    }
    static xdomainRequest(req, method, endPoint, body, timeout, ontimeout, callback) {
      req.timeout = timeout;
      req.open(method, endPoint);
      req.onload = () => {
        let response = this.parseJSON(req.responseText);
        callback && callback(response);
      };
      if (ontimeout) {
        req.ontimeout = ontimeout;
      }
      req.onprogress = () => {
      };
      req.send(body);
      return req;
    }
    static xhrRequest(req, method, endPoint, accept, body, timeout, ontimeout, callback) {
      req.open(method, endPoint, true);
      req.timeout = timeout;
      req.setRequestHeader("Content-Type", accept);
      req.onerror = () => callback && callback(null);
      req.onreadystatechange = () => {
        if (req.readyState === XHR_STATES.complete && callback) {
          let response = this.parseJSON(req.responseText);
          callback(response);
        }
      };
      if (ontimeout) {
        req.ontimeout = ontimeout;
      }
      req.send(body);
      return req;
    }
    static parseJSON(resp) {
      if (!resp || resp === "") {
        return null;
      }
      try {
        return JSON.parse(resp);
      } catch (e5) {
        console && console.log("failed to parse JSON response", resp);
        return null;
      }
    }
    static serialize(obj, parentKey) {
      let queryStr = [];
      for (var key in obj) {
        if (!Object.prototype.hasOwnProperty.call(obj, key)) {
          continue;
        }
        let paramKey = parentKey ? `${parentKey}[${key}]` : key;
        let paramVal = obj[key];
        if (typeof paramVal === "object") {
          queryStr.push(this.serialize(paramVal, paramKey));
        } else {
          queryStr.push(encodeURIComponent(paramKey) + "=" + encodeURIComponent(paramVal));
        }
      }
      return queryStr.join("&");
    }
    static appendParams(url, params) {
      if (Object.keys(params).length === 0) {
        return url;
      }
      let prefix = url.match(/\?/) ? "&" : "?";
      return `${url}${prefix}${this.serialize(params)}`;
    }
  };
  var LongPoll = class {
    constructor(endPoint) {
      this.endPoint = null;
      this.token = null;
      this.skipHeartbeat = true;
      this.reqs = /* @__PURE__ */ new Set();
      this.awaitingBatchAck = false;
      this.currentBatch = null;
      this.currentBatchTimer = null;
      this.batchBuffer = [];
      this.onopen = function() {
      };
      this.onerror = function() {
      };
      this.onmessage = function() {
      };
      this.onclose = function() {
      };
      this.pollEndpoint = this.normalizeEndpoint(endPoint);
      this.readyState = SOCKET_STATES.connecting;
      this.poll();
    }
    normalizeEndpoint(endPoint) {
      return endPoint.replace("ws://", "http://").replace("wss://", "https://").replace(new RegExp("(.*)/" + TRANSPORTS.websocket), "$1/" + TRANSPORTS.longpoll);
    }
    endpointURL() {
      return Ajax.appendParams(this.pollEndpoint, { token: this.token });
    }
    closeAndRetry(code, reason, wasClean) {
      this.close(code, reason, wasClean);
      this.readyState = SOCKET_STATES.connecting;
    }
    ontimeout() {
      this.onerror("timeout");
      this.closeAndRetry(1005, "timeout", false);
    }
    isActive() {
      return this.readyState === SOCKET_STATES.open || this.readyState === SOCKET_STATES.connecting;
    }
    poll() {
      this.ajax("GET", "application/json", null, () => this.ontimeout(), (resp) => {
        if (resp) {
          var { status, token, messages } = resp;
          this.token = token;
        } else {
          status = 0;
        }
        switch (status) {
          case 200:
            messages.forEach((msg) => {
              setTimeout(() => this.onmessage({ data: msg }), 0);
            });
            this.poll();
            break;
          case 204:
            this.poll();
            break;
          case 410:
            this.readyState = SOCKET_STATES.open;
            this.onopen({});
            this.poll();
            break;
          case 403:
            this.onerror(403);
            this.close(1008, "forbidden", false);
            break;
          case 0:
          case 500:
            this.onerror(500);
            this.closeAndRetry(1011, "internal server error", 500);
            break;
          default:
            throw new Error(`unhandled poll status ${status}`);
        }
      });
    }
    send(body) {
      if (this.currentBatch) {
        this.currentBatch.push(body);
      } else if (this.awaitingBatchAck) {
        this.batchBuffer.push(body);
      } else {
        this.currentBatch = [body];
        this.currentBatchTimer = setTimeout(() => {
          this.batchSend(this.currentBatch);
          this.currentBatch = null;
        }, 0);
      }
    }
    batchSend(messages) {
      this.awaitingBatchAck = true;
      this.ajax("POST", "application/x-ndjson", messages.join("\n"), () => this.onerror("timeout"), (resp) => {
        this.awaitingBatchAck = false;
        if (!resp || resp.status !== 200) {
          this.onerror(resp && resp.status);
          this.closeAndRetry(1011, "internal server error", false);
        } else if (this.batchBuffer.length > 0) {
          this.batchSend(this.batchBuffer);
          this.batchBuffer = [];
        }
      });
    }
    close(code, reason, wasClean) {
      for (let req of this.reqs) {
        req.abort();
      }
      this.readyState = SOCKET_STATES.closed;
      let opts = Object.assign({ code: 1e3, reason: void 0, wasClean: true }, { code, reason, wasClean });
      this.batchBuffer = [];
      clearTimeout(this.currentBatchTimer);
      this.currentBatchTimer = null;
      if (typeof CloseEvent !== "undefined") {
        this.onclose(new CloseEvent("close", opts));
      } else {
        this.onclose(opts);
      }
    }
    ajax(method, contentType, body, onCallerTimeout, callback) {
      let req;
      let ontimeout = () => {
        this.reqs.delete(req);
        onCallerTimeout();
      };
      req = Ajax.request(method, this.endpointURL(), contentType, body, this.timeout, ontimeout, (resp) => {
        this.reqs.delete(req);
        if (this.isActive()) {
          callback(resp);
        }
      });
      this.reqs.add(req);
    }
  };
  var serializer_default = {
    HEADER_LENGTH: 1,
    META_LENGTH: 4,
    KINDS: { push: 0, reply: 1, broadcast: 2 },
    encode(msg, callback) {
      if (msg.payload.constructor === ArrayBuffer) {
        return callback(this.binaryEncode(msg));
      } else {
        let payload = [msg.join_ref, msg.ref, msg.topic, msg.event, msg.payload];
        return callback(JSON.stringify(payload));
      }
    },
    decode(rawPayload, callback) {
      if (rawPayload.constructor === ArrayBuffer) {
        return callback(this.binaryDecode(rawPayload));
      } else {
        let [join_ref, ref, topic, event, payload] = JSON.parse(rawPayload);
        return callback({ join_ref, ref, topic, event, payload });
      }
    },
    binaryEncode(message) {
      let { join_ref, ref, event, topic, payload } = message;
      let metaLength = this.META_LENGTH + join_ref.length + ref.length + topic.length + event.length;
      let header = new ArrayBuffer(this.HEADER_LENGTH + metaLength);
      let view = new DataView(header);
      let offset = 0;
      view.setUint8(offset++, this.KINDS.push);
      view.setUint8(offset++, join_ref.length);
      view.setUint8(offset++, ref.length);
      view.setUint8(offset++, topic.length);
      view.setUint8(offset++, event.length);
      Array.from(join_ref, (char) => view.setUint8(offset++, char.charCodeAt(0)));
      Array.from(ref, (char) => view.setUint8(offset++, char.charCodeAt(0)));
      Array.from(topic, (char) => view.setUint8(offset++, char.charCodeAt(0)));
      Array.from(event, (char) => view.setUint8(offset++, char.charCodeAt(0)));
      var combined = new Uint8Array(header.byteLength + payload.byteLength);
      combined.set(new Uint8Array(header), 0);
      combined.set(new Uint8Array(payload), header.byteLength);
      return combined.buffer;
    },
    binaryDecode(buffer) {
      let view = new DataView(buffer);
      let kind = view.getUint8(0);
      let decoder = new TextDecoder();
      switch (kind) {
        case this.KINDS.push:
          return this.decodePush(buffer, view, decoder);
        case this.KINDS.reply:
          return this.decodeReply(buffer, view, decoder);
        case this.KINDS.broadcast:
          return this.decodeBroadcast(buffer, view, decoder);
      }
    },
    decodePush(buffer, view, decoder) {
      let joinRefSize = view.getUint8(1);
      let topicSize = view.getUint8(2);
      let eventSize = view.getUint8(3);
      let offset = this.HEADER_LENGTH + this.META_LENGTH - 1;
      let joinRef = decoder.decode(buffer.slice(offset, offset + joinRefSize));
      offset = offset + joinRefSize;
      let topic = decoder.decode(buffer.slice(offset, offset + topicSize));
      offset = offset + topicSize;
      let event = decoder.decode(buffer.slice(offset, offset + eventSize));
      offset = offset + eventSize;
      let data = buffer.slice(offset, buffer.byteLength);
      return { join_ref: joinRef, ref: null, topic, event, payload: data };
    },
    decodeReply(buffer, view, decoder) {
      let joinRefSize = view.getUint8(1);
      let refSize = view.getUint8(2);
      let topicSize = view.getUint8(3);
      let eventSize = view.getUint8(4);
      let offset = this.HEADER_LENGTH + this.META_LENGTH;
      let joinRef = decoder.decode(buffer.slice(offset, offset + joinRefSize));
      offset = offset + joinRefSize;
      let ref = decoder.decode(buffer.slice(offset, offset + refSize));
      offset = offset + refSize;
      let topic = decoder.decode(buffer.slice(offset, offset + topicSize));
      offset = offset + topicSize;
      let event = decoder.decode(buffer.slice(offset, offset + eventSize));
      offset = offset + eventSize;
      let data = buffer.slice(offset, buffer.byteLength);
      let payload = { status: event, response: data };
      return { join_ref: joinRef, ref, topic, event: CHANNEL_EVENTS.reply, payload };
    },
    decodeBroadcast(buffer, view, decoder) {
      let topicSize = view.getUint8(1);
      let eventSize = view.getUint8(2);
      let offset = this.HEADER_LENGTH + 2;
      let topic = decoder.decode(buffer.slice(offset, offset + topicSize));
      offset = offset + topicSize;
      let event = decoder.decode(buffer.slice(offset, offset + eventSize));
      offset = offset + eventSize;
      let data = buffer.slice(offset, buffer.byteLength);
      return { join_ref: null, ref: null, topic, event, payload: data };
    }
  };
  var Socket = class {
    constructor(endPoint, opts = {}) {
      this.stateChangeCallbacks = { open: [], close: [], error: [], message: [] };
      this.channels = [];
      this.sendBuffer = [];
      this.ref = 0;
      this.timeout = opts.timeout || DEFAULT_TIMEOUT;
      this.transport = opts.transport || global.WebSocket || LongPoll;
      this.establishedConnections = 0;
      this.defaultEncoder = serializer_default.encode.bind(serializer_default);
      this.defaultDecoder = serializer_default.decode.bind(serializer_default);
      this.closeWasClean = false;
      this.binaryType = opts.binaryType || "arraybuffer";
      this.connectClock = 1;
      if (this.transport !== LongPoll) {
        this.encode = opts.encode || this.defaultEncoder;
        this.decode = opts.decode || this.defaultDecoder;
      } else {
        this.encode = this.defaultEncoder;
        this.decode = this.defaultDecoder;
      }
      let awaitingConnectionOnPageShow = null;
      if (phxWindow && phxWindow.addEventListener) {
        phxWindow.addEventListener("pagehide", (_e2) => {
          if (this.conn) {
            this.disconnect();
            awaitingConnectionOnPageShow = this.connectClock;
          }
        });
        phxWindow.addEventListener("pageshow", (_e2) => {
          if (awaitingConnectionOnPageShow === this.connectClock) {
            awaitingConnectionOnPageShow = null;
            this.connect();
          }
        });
      }
      this.heartbeatIntervalMs = opts.heartbeatIntervalMs || 3e4;
      this.rejoinAfterMs = (tries) => {
        if (opts.rejoinAfterMs) {
          return opts.rejoinAfterMs(tries);
        } else {
          return [1e3, 2e3, 5e3][tries - 1] || 1e4;
        }
      };
      this.reconnectAfterMs = (tries) => {
        if (opts.reconnectAfterMs) {
          return opts.reconnectAfterMs(tries);
        } else {
          return [10, 50, 100, 150, 200, 250, 500, 1e3, 2e3][tries - 1] || 5e3;
        }
      };
      this.logger = opts.logger || null;
      this.longpollerTimeout = opts.longpollerTimeout || 2e4;
      this.params = closure(opts.params || {});
      this.endPoint = `${endPoint}/${TRANSPORTS.websocket}`;
      this.vsn = opts.vsn || DEFAULT_VSN;
      this.heartbeatTimeoutTimer = null;
      this.heartbeatTimer = null;
      this.pendingHeartbeatRef = null;
      this.reconnectTimer = new Timer(() => {
        this.teardown(() => this.connect());
      }, this.reconnectAfterMs);
    }
    getLongPollTransport() {
      return LongPoll;
    }
    replaceTransport(newTransport) {
      this.connectClock++;
      this.closeWasClean = true;
      this.reconnectTimer.reset();
      this.sendBuffer = [];
      if (this.conn) {
        this.conn.close();
        this.conn = null;
      }
      this.transport = newTransport;
    }
    protocol() {
      return location.protocol.match(/^https/) ? "wss" : "ws";
    }
    endPointURL() {
      let uri = Ajax.appendParams(Ajax.appendParams(this.endPoint, this.params()), { vsn: this.vsn });
      if (uri.charAt(0) !== "/") {
        return uri;
      }
      if (uri.charAt(1) === "/") {
        return `${this.protocol()}:${uri}`;
      }
      return `${this.protocol()}://${location.host}${uri}`;
    }
    disconnect(callback, code, reason) {
      this.connectClock++;
      this.closeWasClean = true;
      this.reconnectTimer.reset();
      this.teardown(callback, code, reason);
    }
    connect(params) {
      if (params) {
        console && console.log("passing params to connect is deprecated. Instead pass :params to the Socket constructor");
        this.params = closure(params);
      }
      if (this.conn) {
        return;
      }
      this.connectClock++;
      this.closeWasClean = false;
      this.conn = new this.transport(this.endPointURL());
      this.conn.binaryType = this.binaryType;
      this.conn.timeout = this.longpollerTimeout;
      this.conn.onopen = () => this.onConnOpen();
      this.conn.onerror = (error) => this.onConnError(error);
      this.conn.onmessage = (event) => this.onConnMessage(event);
      this.conn.onclose = (event) => this.onConnClose(event);
    }
    log(kind, msg, data) {
      this.logger(kind, msg, data);
    }
    hasLogger() {
      return this.logger !== null;
    }
    onOpen(callback) {
      let ref = this.makeRef();
      this.stateChangeCallbacks.open.push([ref, callback]);
      return ref;
    }
    onClose(callback) {
      let ref = this.makeRef();
      this.stateChangeCallbacks.close.push([ref, callback]);
      return ref;
    }
    onError(callback) {
      let ref = this.makeRef();
      this.stateChangeCallbacks.error.push([ref, callback]);
      return ref;
    }
    onMessage(callback) {
      let ref = this.makeRef();
      this.stateChangeCallbacks.message.push([ref, callback]);
      return ref;
    }
    ping(callback) {
      if (!this.isConnected()) {
        return false;
      }
      let ref = this.makeRef();
      let startTime = Date.now();
      this.push({ topic: "phoenix", event: "heartbeat", payload: {}, ref });
      let onMsgRef = this.onMessage((msg) => {
        if (msg.ref === ref) {
          this.off([onMsgRef]);
          callback(Date.now() - startTime);
        }
      });
      return true;
    }
    clearHeartbeats() {
      clearTimeout(this.heartbeatTimer);
      clearTimeout(this.heartbeatTimeoutTimer);
    }
    onConnOpen() {
      if (this.hasLogger())
        this.log("transport", `connected to ${this.endPointURL()}`);
      this.closeWasClean = false;
      this.establishedConnections++;
      this.flushSendBuffer();
      this.reconnectTimer.reset();
      this.resetHeartbeat();
      this.stateChangeCallbacks.open.forEach(([, callback]) => callback());
    }
    heartbeatTimeout() {
      if (this.pendingHeartbeatRef) {
        this.pendingHeartbeatRef = null;
        if (this.hasLogger()) {
          this.log("transport", "heartbeat timeout. Attempting to re-establish connection");
        }
        this.triggerChanError();
        this.closeWasClean = false;
        this.teardown(() => this.reconnectTimer.scheduleTimeout(), WS_CLOSE_NORMAL, "heartbeat timeout");
      }
    }
    resetHeartbeat() {
      if (this.conn && this.conn.skipHeartbeat) {
        return;
      }
      this.pendingHeartbeatRef = null;
      this.clearHeartbeats();
      this.heartbeatTimer = setTimeout(() => this.sendHeartbeat(), this.heartbeatIntervalMs);
    }
    teardown(callback, code, reason) {
      if (!this.conn) {
        return callback && callback();
      }
      this.waitForBufferDone(() => {
        if (this.conn) {
          if (code) {
            this.conn.close(code, reason || "");
          } else {
            this.conn.close();
          }
        }
        this.waitForSocketClosed(() => {
          if (this.conn) {
            this.conn.onopen = function() {
            };
            this.conn.onerror = function() {
            };
            this.conn.onmessage = function() {
            };
            this.conn.onclose = function() {
            };
            this.conn = null;
          }
          callback && callback();
        });
      });
    }
    waitForBufferDone(callback, tries = 1) {
      if (tries === 5 || !this.conn || !this.conn.bufferedAmount) {
        callback();
        return;
      }
      setTimeout(() => {
        this.waitForBufferDone(callback, tries + 1);
      }, 150 * tries);
    }
    waitForSocketClosed(callback, tries = 1) {
      if (tries === 5 || !this.conn || this.conn.readyState === SOCKET_STATES.closed) {
        callback();
        return;
      }
      setTimeout(() => {
        this.waitForSocketClosed(callback, tries + 1);
      }, 150 * tries);
    }
    onConnClose(event) {
      let closeCode = event && event.code;
      if (this.hasLogger())
        this.log("transport", "close", event);
      this.triggerChanError();
      this.clearHeartbeats();
      if (!this.closeWasClean && closeCode !== 1e3) {
        this.reconnectTimer.scheduleTimeout();
      }
      this.stateChangeCallbacks.close.forEach(([, callback]) => callback(event));
    }
    onConnError(error) {
      if (this.hasLogger())
        this.log("transport", error);
      let transportBefore = this.transport;
      let establishedBefore = this.establishedConnections;
      this.stateChangeCallbacks.error.forEach(([, callback]) => {
        callback(error, transportBefore, establishedBefore);
      });
      if (transportBefore === this.transport || establishedBefore > 0) {
        this.triggerChanError();
      }
    }
    triggerChanError() {
      this.channels.forEach((channel) => {
        if (!(channel.isErrored() || channel.isLeaving() || channel.isClosed())) {
          channel.trigger(CHANNEL_EVENTS.error);
        }
      });
    }
    connectionState() {
      switch (this.conn && this.conn.readyState) {
        case SOCKET_STATES.connecting:
          return "connecting";
        case SOCKET_STATES.open:
          return "open";
        case SOCKET_STATES.closing:
          return "closing";
        default:
          return "closed";
      }
    }
    isConnected() {
      return this.connectionState() === "open";
    }
    remove(channel) {
      this.off(channel.stateChangeRefs);
      this.channels = this.channels.filter((c2) => c2.joinRef() !== channel.joinRef());
    }
    off(refs) {
      for (let key in this.stateChangeCallbacks) {
        this.stateChangeCallbacks[key] = this.stateChangeCallbacks[key].filter(([ref]) => {
          return refs.indexOf(ref) === -1;
        });
      }
    }
    channel(topic, chanParams = {}) {
      let chan = new Channel(topic, chanParams, this);
      this.channels.push(chan);
      return chan;
    }
    push(data) {
      if (this.hasLogger()) {
        let { topic, event, payload, ref, join_ref } = data;
        this.log("push", `${topic} ${event} (${join_ref}, ${ref})`, payload);
      }
      if (this.isConnected()) {
        this.encode(data, (result) => this.conn.send(result));
      } else {
        this.sendBuffer.push(() => this.encode(data, (result) => this.conn.send(result)));
      }
    }
    makeRef() {
      let newRef = this.ref + 1;
      if (newRef === this.ref) {
        this.ref = 0;
      } else {
        this.ref = newRef;
      }
      return this.ref.toString();
    }
    sendHeartbeat() {
      if (this.pendingHeartbeatRef && !this.isConnected()) {
        return;
      }
      this.pendingHeartbeatRef = this.makeRef();
      this.push({ topic: "phoenix", event: "heartbeat", payload: {}, ref: this.pendingHeartbeatRef });
      this.heartbeatTimeoutTimer = setTimeout(() => this.heartbeatTimeout(), this.heartbeatIntervalMs);
    }
    flushSendBuffer() {
      if (this.isConnected() && this.sendBuffer.length > 0) {
        this.sendBuffer.forEach((callback) => callback());
        this.sendBuffer = [];
      }
    }
    onConnMessage(rawMessage) {
      this.decode(rawMessage.data, (msg) => {
        let { topic, event, payload, ref, join_ref } = msg;
        if (ref && ref === this.pendingHeartbeatRef) {
          this.clearHeartbeats();
          this.pendingHeartbeatRef = null;
          this.heartbeatTimer = setTimeout(() => this.sendHeartbeat(), this.heartbeatIntervalMs);
        }
        if (this.hasLogger())
          this.log("receive", `${payload.status || ""} ${topic} ${event} ${ref && "(" + ref + ")" || ""}`, payload);
        for (let i2 = 0; i2 < this.channels.length; i2++) {
          const channel = this.channels[i2];
          if (!channel.isMember(topic, event, payload, join_ref)) {
            continue;
          }
          channel.trigger(event, payload, ref, join_ref);
        }
        for (let i2 = 0; i2 < this.stateChangeCallbacks.message.length; i2++) {
          let [, callback] = this.stateChangeCallbacks.message[i2];
          callback(msg);
        }
      });
    }
    leaveOpenTopic(topic) {
      let dupChannel = this.channels.find((c2) => c2.topic === topic && (c2.isJoined() || c2.isJoining()));
      if (dupChannel) {
        if (this.hasLogger())
          this.log("transport", `leaving duplicate topic "${topic}"`);
        dupChannel.leave();
      }
    }
  };

  // ../deps/phoenix_live_view/priv/static/phoenix_live_view.esm.js
  var CONSECUTIVE_RELOADS = "consecutive-reloads";
  var MAX_RELOADS = 10;
  var RELOAD_JITTER_MIN = 5e3;
  var RELOAD_JITTER_MAX = 1e4;
  var FAILSAFE_JITTER = 3e4;
  var PHX_EVENT_CLASSES = [
    "phx-click-loading",
    "phx-change-loading",
    "phx-submit-loading",
    "phx-keydown-loading",
    "phx-keyup-loading",
    "phx-blur-loading",
    "phx-focus-loading"
  ];
  var PHX_COMPONENT = "data-phx-component";
  var PHX_LIVE_LINK = "data-phx-link";
  var PHX_TRACK_STATIC = "track-static";
  var PHX_LINK_STATE = "data-phx-link-state";
  var PHX_REF = "data-phx-ref";
  var PHX_REF_SRC = "data-phx-ref-src";
  var PHX_TRACK_UPLOADS = "track-uploads";
  var PHX_UPLOAD_REF = "data-phx-upload-ref";
  var PHX_PREFLIGHTED_REFS = "data-phx-preflighted-refs";
  var PHX_DONE_REFS = "data-phx-done-refs";
  var PHX_DROP_TARGET = "drop-target";
  var PHX_ACTIVE_ENTRY_REFS = "data-phx-active-refs";
  var PHX_LIVE_FILE_UPDATED = "phx:live-file:updated";
  var PHX_SKIP = "data-phx-skip";
  var PHX_PRUNE = "data-phx-prune";
  var PHX_PAGE_LOADING = "page-loading";
  var PHX_CONNECTED_CLASS = "phx-connected";
  var PHX_DISCONNECTED_CLASS = "phx-loading";
  var PHX_NO_FEEDBACK_CLASS = "phx-no-feedback";
  var PHX_ERROR_CLASS = "phx-error";
  var PHX_PARENT_ID = "data-phx-parent-id";
  var PHX_MAIN = "data-phx-main";
  var PHX_ROOT_ID = "data-phx-root-id";
  var PHX_TRIGGER_ACTION = "trigger-action";
  var PHX_FEEDBACK_FOR = "feedback-for";
  var PHX_HAS_FOCUSED = "phx-has-focused";
  var FOCUSABLE_INPUTS = ["text", "textarea", "number", "email", "password", "search", "tel", "url", "date", "time", "datetime-local", "color", "range"];
  var CHECKABLE_INPUTS = ["checkbox", "radio"];
  var PHX_HAS_SUBMITTED = "phx-has-submitted";
  var PHX_SESSION = "data-phx-session";
  var PHX_VIEW_SELECTOR = `[${PHX_SESSION}]`;
  var PHX_STICKY = "data-phx-sticky";
  var PHX_STATIC = "data-phx-static";
  var PHX_READONLY = "data-phx-readonly";
  var PHX_DISABLED = "data-phx-disabled";
  var PHX_DISABLE_WITH = "disable-with";
  var PHX_DISABLE_WITH_RESTORE = "data-phx-disable-with-restore";
  var PHX_HOOK = "hook";
  var PHX_DEBOUNCE = "debounce";
  var PHX_THROTTLE = "throttle";
  var PHX_UPDATE = "update";
  var PHX_STREAM = "stream";
  var PHX_KEY = "key";
  var PHX_PRIVATE = "phxPrivate";
  var PHX_AUTO_RECOVER = "auto-recover";
  var PHX_LV_DEBUG = "phx:live-socket:debug";
  var PHX_LV_PROFILE = "phx:live-socket:profiling";
  var PHX_LV_LATENCY_SIM = "phx:live-socket:latency-sim";
  var PHX_PROGRESS = "progress";
  var PHX_MOUNTED = "mounted";
  var LOADER_TIMEOUT = 1;
  var BEFORE_UNLOAD_LOADER_TIMEOUT = 200;
  var BINDING_PREFIX = "phx-";
  var PUSH_TIMEOUT = 3e4;
  var DEBOUNCE_TRIGGER = "debounce-trigger";
  var THROTTLED = "throttled";
  var DEBOUNCE_PREV_KEY = "debounce-prev-key";
  var DEFAULTS = {
    debounce: 300,
    throttle: 300
  };
  var DYNAMICS = "d";
  var STATIC = "s";
  var COMPONENTS = "c";
  var EVENTS = "e";
  var REPLY = "r";
  var TITLE = "t";
  var TEMPLATES = "p";
  var STREAM = "stream";
  var EntryUploader = class {
    constructor(entry, chunkSize, liveSocket2) {
      this.liveSocket = liveSocket2;
      this.entry = entry;
      this.offset = 0;
      this.chunkSize = chunkSize;
      this.chunkTimer = null;
      this.uploadChannel = liveSocket2.channel(`lvu:${entry.ref}`, { token: entry.metadata() });
    }
    error(reason) {
      clearTimeout(this.chunkTimer);
      this.uploadChannel.leave();
      this.entry.error(reason);
    }
    upload() {
      this.uploadChannel.onError((reason) => this.error(reason));
      this.uploadChannel.join().receive("ok", (_data) => this.readNextChunk()).receive("error", (reason) => this.error(reason));
    }
    isDone() {
      return this.offset >= this.entry.file.size;
    }
    readNextChunk() {
      let reader = new window.FileReader();
      let blob = this.entry.file.slice(this.offset, this.chunkSize + this.offset);
      reader.onload = (e5) => {
        if (e5.target.error === null) {
          this.offset += e5.target.result.byteLength;
          this.pushChunk(e5.target.result);
        } else {
          return logError("Read error: " + e5.target.error);
        }
      };
      reader.readAsArrayBuffer(blob);
    }
    pushChunk(chunk) {
      if (!this.uploadChannel.isJoined()) {
        return;
      }
      this.uploadChannel.push("chunk", chunk).receive("ok", () => {
        this.entry.progress(this.offset / this.entry.file.size * 100);
        if (!this.isDone()) {
          this.chunkTimer = setTimeout(() => this.readNextChunk(), this.liveSocket.getLatencySim() || 0);
        }
      });
    }
  };
  var logError = (msg, obj) => console.error && console.error(msg, obj);
  var isCid = (cid) => {
    let type = typeof cid;
    return type === "number" || type === "string" && /^(0|[1-9]\d*)$/.test(cid);
  };
  function detectDuplicateIds() {
    let ids = /* @__PURE__ */ new Set();
    let elems = document.querySelectorAll("*[id]");
    for (let i2 = 0, len = elems.length; i2 < len; i2++) {
      if (ids.has(elems[i2].id)) {
        console.error(`Multiple IDs detected: ${elems[i2].id}. Ensure unique element ids.`);
      } else {
        ids.add(elems[i2].id);
      }
    }
  }
  var debug = (view, kind, msg, obj) => {
    if (view.liveSocket.isDebugEnabled()) {
      console.log(`${view.id} ${kind}: ${msg} - `, obj);
    }
  };
  var closure2 = (val) => typeof val === "function" ? val : function() {
    return val;
  };
  var clone = (obj) => {
    return JSON.parse(JSON.stringify(obj));
  };
  var closestPhxBinding = (el, binding, borderEl) => {
    do {
      if (el.matches(`[${binding}]`) && !el.disabled) {
        return el;
      }
      el = el.parentElement || el.parentNode;
    } while (el !== null && el.nodeType === 1 && !(borderEl && borderEl.isSameNode(el) || el.matches(PHX_VIEW_SELECTOR)));
    return null;
  };
  var isObject = (obj) => {
    return obj !== null && typeof obj === "object" && !(obj instanceof Array);
  };
  var isEqualObj = (obj1, obj2) => JSON.stringify(obj1) === JSON.stringify(obj2);
  var isEmpty = (obj) => {
    for (let x2 in obj) {
      return false;
    }
    return true;
  };
  var maybe = (el, callback) => el && callback(el);
  var channelUploader = function(entries, onError, resp, liveSocket2) {
    entries.forEach((entry) => {
      let entryUploader = new EntryUploader(entry, resp.config.chunk_size, liveSocket2);
      entryUploader.upload();
    });
  };
  var Browser = {
    canPushState() {
      return typeof history.pushState !== "undefined";
    },
    dropLocal(localStorage2, namespace, subkey) {
      return localStorage2.removeItem(this.localKey(namespace, subkey));
    },
    updateLocal(localStorage2, namespace, subkey, initial, func) {
      let current = this.getLocal(localStorage2, namespace, subkey);
      let key = this.localKey(namespace, subkey);
      let newVal = current === null ? initial : func(current);
      localStorage2.setItem(key, JSON.stringify(newVal));
      return newVal;
    },
    getLocal(localStorage2, namespace, subkey) {
      return JSON.parse(localStorage2.getItem(this.localKey(namespace, subkey)));
    },
    updateCurrentState(callback) {
      if (!this.canPushState()) {
        return;
      }
      history.replaceState(callback(history.state || {}), "", window.location.href);
    },
    pushState(kind, meta, to) {
      if (this.canPushState()) {
        if (to !== window.location.href) {
          if (meta.type == "redirect" && meta.scroll) {
            let currentState = history.state || {};
            currentState.scroll = meta.scroll;
            history.replaceState(currentState, "", window.location.href);
          }
          delete meta.scroll;
          history[kind + "State"](meta, "", to || null);
          let hashEl = this.getHashTargetEl(window.location.hash);
          if (hashEl) {
            hashEl.scrollIntoView();
          } else if (meta.type === "redirect") {
            window.scroll(0, 0);
          }
        }
      } else {
        this.redirect(to);
      }
    },
    setCookie(name, value) {
      document.cookie = `${name}=${value}`;
    },
    getCookie(name) {
      return document.cookie.replace(new RegExp(`(?:(?:^|.*;s*)${name}s*=s*([^;]*).*$)|^.*$`), "$1");
    },
    redirect(toURL, flash) {
      if (flash) {
        Browser.setCookie("__phoenix_flash__", flash + "; max-age=60000; path=/");
      }
      window.location = toURL;
    },
    localKey(namespace, subkey) {
      return `${namespace}-${subkey}`;
    },
    getHashTargetEl(maybeHash) {
      let hash = maybeHash.toString().substring(1);
      if (hash === "") {
        return;
      }
      return document.getElementById(hash) || document.querySelector(`a[name="${hash}"]`);
    }
  };
  var browser_default = Browser;
  var DOM = {
    byId(id) {
      return document.getElementById(id) || logError(`no id found for ${id}`);
    },
    removeClass(el, className) {
      el.classList.remove(className);
      if (el.classList.length === 0) {
        el.removeAttribute("class");
      }
    },
    all(node, query, callback) {
      if (!node) {
        return [];
      }
      let array = Array.from(node.querySelectorAll(query));
      return callback ? array.forEach(callback) : array;
    },
    childNodeLength(html) {
      let template = document.createElement("template");
      template.innerHTML = html;
      return template.content.childElementCount;
    },
    isUploadInput(el) {
      return el.type === "file" && el.getAttribute(PHX_UPLOAD_REF) !== null;
    },
    findUploadInputs(node) {
      return this.all(node, `input[type="file"][${PHX_UPLOAD_REF}]`);
    },
    findComponentNodeList(node, cid) {
      return this.filterWithinSameLiveView(this.all(node, `[${PHX_COMPONENT}="${cid}"]`), node);
    },
    isPhxDestroyed(node) {
      return node.id && DOM.private(node, "destroyed") ? true : false;
    },
    wantsNewTab(e5) {
      let wantsNewTab = e5.ctrlKey || e5.shiftKey || e5.metaKey || e5.button && e5.button === 1;
      return wantsNewTab || e5.target.getAttribute("target") === "_blank";
    },
    isUnloadableFormSubmit(e5) {
      return !e5.defaultPrevented && !this.wantsNewTab(e5);
    },
    isNewPageHref(href, currentLocation) {
      let url;
      try {
        url = new URL(href);
      } catch (e5) {
        try {
          url = new URL(href, currentLocation);
        } catch (e22) {
          return true;
        }
      }
      if (url.host === currentLocation.host && url.protocol === currentLocation.protocol) {
        if (url.pathname === currentLocation.pathname && url.search === currentLocation.search) {
          return url.hash === "" && !url.href.endsWith("#");
        }
      }
      return true;
    },
    markPhxChildDestroyed(el) {
      if (this.isPhxChild(el)) {
        el.setAttribute(PHX_SESSION, "");
      }
      this.putPrivate(el, "destroyed", true);
    },
    findPhxChildrenInFragment(html, parentId) {
      let template = document.createElement("template");
      template.innerHTML = html;
      return this.findPhxChildren(template.content, parentId);
    },
    isIgnored(el, phxUpdate) {
      return (el.getAttribute(phxUpdate) || el.getAttribute("data-phx-update")) === "ignore";
    },
    isPhxUpdate(el, phxUpdate, updateTypes) {
      return el.getAttribute && updateTypes.indexOf(el.getAttribute(phxUpdate)) >= 0;
    },
    findPhxSticky(el) {
      return this.all(el, `[${PHX_STICKY}]`);
    },
    findPhxChildren(el, parentId) {
      return this.all(el, `${PHX_VIEW_SELECTOR}[${PHX_PARENT_ID}="${parentId}"]`);
    },
    findParentCIDs(node, cids) {
      let initial = new Set(cids);
      let parentCids = cids.reduce((acc, cid) => {
        let selector = `[${PHX_COMPONENT}="${cid}"] [${PHX_COMPONENT}]`;
        this.filterWithinSameLiveView(this.all(node, selector), node).map((el) => parseInt(el.getAttribute(PHX_COMPONENT))).forEach((childCID) => acc.delete(childCID));
        return acc;
      }, initial);
      return parentCids.size === 0 ? new Set(cids) : parentCids;
    },
    filterWithinSameLiveView(nodes, parent) {
      if (parent.querySelector(PHX_VIEW_SELECTOR)) {
        return nodes.filter((el) => this.withinSameLiveView(el, parent));
      } else {
        return nodes;
      }
    },
    withinSameLiveView(node, parent) {
      while (node = node.parentNode) {
        if (node.isSameNode(parent)) {
          return true;
        }
        if (node.getAttribute(PHX_SESSION) !== null) {
          return false;
        }
      }
    },
    private(el, key) {
      return el[PHX_PRIVATE] && el[PHX_PRIVATE][key];
    },
    deletePrivate(el, key) {
      el[PHX_PRIVATE] && delete el[PHX_PRIVATE][key];
    },
    putPrivate(el, key, value) {
      if (!el[PHX_PRIVATE]) {
        el[PHX_PRIVATE] = {};
      }
      el[PHX_PRIVATE][key] = value;
    },
    updatePrivate(el, key, defaultVal, updateFunc) {
      let existing = this.private(el, key);
      if (existing === void 0) {
        this.putPrivate(el, key, updateFunc(defaultVal));
      } else {
        this.putPrivate(el, key, updateFunc(existing));
      }
    },
    copyPrivates(target, source) {
      if (source[PHX_PRIVATE]) {
        target[PHX_PRIVATE] = source[PHX_PRIVATE];
      }
    },
    putTitle(str) {
      let titleEl = document.querySelector("title");
      if (titleEl) {
        let { prefix, suffix } = titleEl.dataset;
        document.title = `${prefix || ""}${str}${suffix || ""}`;
      } else {
        document.title = str;
      }
    },
    debounce(el, event, phxDebounce, defaultDebounce, phxThrottle, defaultThrottle, asyncFilter, callback) {
      let debounce = el.getAttribute(phxDebounce);
      let throttle = el.getAttribute(phxThrottle);
      if (debounce === "") {
        debounce = defaultDebounce;
      }
      if (throttle === "") {
        throttle = defaultThrottle;
      }
      let value = debounce || throttle;
      switch (value) {
        case null:
          return callback();
        case "blur":
          if (this.once(el, "debounce-blur")) {
            el.addEventListener("blur", () => callback());
          }
          return;
        default:
          let timeout = parseInt(value);
          let trigger = () => throttle ? this.deletePrivate(el, THROTTLED) : callback();
          let currentCycle = this.incCycle(el, DEBOUNCE_TRIGGER, trigger);
          if (isNaN(timeout)) {
            return logError(`invalid throttle/debounce value: ${value}`);
          }
          if (throttle) {
            let newKeyDown = false;
            if (event.type === "keydown") {
              let prevKey = this.private(el, DEBOUNCE_PREV_KEY);
              this.putPrivate(el, DEBOUNCE_PREV_KEY, event.key);
              newKeyDown = prevKey !== event.key;
            }
            if (!newKeyDown && this.private(el, THROTTLED)) {
              return false;
            } else {
              callback();
              this.putPrivate(el, THROTTLED, true);
              setTimeout(() => {
                if (asyncFilter()) {
                  this.triggerCycle(el, DEBOUNCE_TRIGGER);
                }
              }, timeout);
            }
          } else {
            setTimeout(() => {
              if (asyncFilter()) {
                this.triggerCycle(el, DEBOUNCE_TRIGGER, currentCycle);
              }
            }, timeout);
          }
          let form = el.form;
          if (form && this.once(form, "bind-debounce")) {
            form.addEventListener("submit", () => {
              Array.from(new FormData(form).entries(), ([name]) => {
                let input = form.querySelector(`[name="${name}"]`);
                this.incCycle(input, DEBOUNCE_TRIGGER);
                this.deletePrivate(input, THROTTLED);
              });
            });
          }
          if (this.once(el, "bind-debounce")) {
            el.addEventListener("blur", () => this.triggerCycle(el, DEBOUNCE_TRIGGER));
          }
      }
    },
    triggerCycle(el, key, currentCycle) {
      let [cycle, trigger] = this.private(el, key);
      if (!currentCycle) {
        currentCycle = cycle;
      }
      if (currentCycle === cycle) {
        this.incCycle(el, key);
        trigger();
      }
    },
    once(el, key) {
      if (this.private(el, key) === true) {
        return false;
      }
      this.putPrivate(el, key, true);
      return true;
    },
    incCycle(el, key, trigger = function() {
    }) {
      let [currentCycle] = this.private(el, key) || [0, trigger];
      currentCycle++;
      this.putPrivate(el, key, [currentCycle, trigger]);
      return currentCycle;
    },
    discardError(container, el, phxFeedbackFor) {
      let field = el.getAttribute && el.getAttribute(phxFeedbackFor);
      let input = field && container.querySelector(`[id="${field}"], [name="${field}"], [name="${field}[]"]`);
      if (!input) {
        return;
      }
      if (!(this.private(input, PHX_HAS_FOCUSED) || this.private(input, PHX_HAS_SUBMITTED))) {
        el.classList.add(PHX_NO_FEEDBACK_CLASS);
      }
    },
    resetForm(form, phxFeedbackFor) {
      Array.from(form.elements).forEach((input) => {
        let query = `[${phxFeedbackFor}="${input.id}"],
                   [${phxFeedbackFor}="${input.name}"],
                   [${phxFeedbackFor}="${input.name.replace(/\[\]$/, "")}"]`;
        this.deletePrivate(input, PHX_HAS_FOCUSED);
        this.deletePrivate(input, PHX_HAS_SUBMITTED);
        this.all(document, query, (feedbackEl) => {
          feedbackEl.classList.add(PHX_NO_FEEDBACK_CLASS);
        });
      });
    },
    showError(inputEl, phxFeedbackFor) {
      if (inputEl.id || inputEl.name) {
        this.all(inputEl.form, `[${phxFeedbackFor}="${inputEl.id}"], [${phxFeedbackFor}="${inputEl.name}"]`, (el) => {
          this.removeClass(el, PHX_NO_FEEDBACK_CLASS);
        });
      }
    },
    isPhxChild(node) {
      return node.getAttribute && node.getAttribute(PHX_PARENT_ID);
    },
    isPhxSticky(node) {
      return node.getAttribute && node.getAttribute(PHX_STICKY) !== null;
    },
    firstPhxChild(el) {
      return this.isPhxChild(el) ? el : this.all(el, `[${PHX_PARENT_ID}]`)[0];
    },
    dispatchEvent(target, name, opts = {}) {
      let bubbles = opts.bubbles === void 0 ? true : !!opts.bubbles;
      let eventOpts = { bubbles, cancelable: true, detail: opts.detail || {} };
      let event = name === "click" ? new MouseEvent("click", eventOpts) : new CustomEvent(name, eventOpts);
      target.dispatchEvent(event);
    },
    cloneNode(node, html) {
      if (typeof html === "undefined") {
        return node.cloneNode(true);
      } else {
        let cloned = node.cloneNode(false);
        cloned.innerHTML = html;
        return cloned;
      }
    },
    mergeAttrs(target, source, opts = {}) {
      let exclude = opts.exclude || [];
      let isIgnored = opts.isIgnored;
      let sourceAttrs = source.attributes;
      for (let i2 = sourceAttrs.length - 1; i2 >= 0; i2--) {
        let name = sourceAttrs[i2].name;
        if (exclude.indexOf(name) < 0) {
          target.setAttribute(name, source.getAttribute(name));
        }
      }
      let targetAttrs = target.attributes;
      for (let i2 = targetAttrs.length - 1; i2 >= 0; i2--) {
        let name = targetAttrs[i2].name;
        if (isIgnored) {
          if (name.startsWith("data-") && !source.hasAttribute(name)) {
            target.removeAttribute(name);
          }
        } else {
          if (!source.hasAttribute(name)) {
            target.removeAttribute(name);
          }
        }
      }
    },
    mergeFocusedInput(target, source) {
      if (!(target instanceof HTMLSelectElement)) {
        DOM.mergeAttrs(target, source, { exclude: ["value"] });
      }
      if (source.readOnly) {
        target.setAttribute("readonly", true);
      } else {
        target.removeAttribute("readonly");
      }
    },
    hasSelectionRange(el) {
      return el.setSelectionRange && (el.type === "text" || el.type === "textarea");
    },
    restoreFocus(focused, selectionStart, selectionEnd) {
      if (!DOM.isTextualInput(focused)) {
        return;
      }
      let wasFocused = focused.matches(":focus");
      if (focused.readOnly) {
        focused.blur();
      }
      if (!wasFocused) {
        focused.focus();
      }
      if (this.hasSelectionRange(focused)) {
        focused.setSelectionRange(selectionStart, selectionEnd);
      }
    },
    isFormInput(el) {
      return /^(?:input|select|textarea)$/i.test(el.tagName) && el.type !== "button";
    },
    syncAttrsToProps(el) {
      if (el instanceof HTMLInputElement && CHECKABLE_INPUTS.indexOf(el.type.toLocaleLowerCase()) >= 0) {
        el.checked = el.getAttribute("checked") !== null;
      }
    },
    isTextualInput(el) {
      return FOCUSABLE_INPUTS.indexOf(el.type) >= 0;
    },
    isNowTriggerFormExternal(el, phxTriggerExternal) {
      return el.getAttribute && el.getAttribute(phxTriggerExternal) !== null;
    },
    syncPendingRef(fromEl, toEl, disableWith) {
      let ref = fromEl.getAttribute(PHX_REF);
      if (ref === null) {
        return true;
      }
      let refSrc = fromEl.getAttribute(PHX_REF_SRC);
      if (DOM.isFormInput(fromEl) || fromEl.getAttribute(disableWith) !== null) {
        if (DOM.isUploadInput(fromEl)) {
          DOM.mergeAttrs(fromEl, toEl, { isIgnored: true });
        }
        DOM.putPrivate(fromEl, PHX_REF, toEl);
        return false;
      } else {
        PHX_EVENT_CLASSES.forEach((className) => {
          fromEl.classList.contains(className) && toEl.classList.add(className);
        });
        toEl.setAttribute(PHX_REF, ref);
        toEl.setAttribute(PHX_REF_SRC, refSrc);
        return true;
      }
    },
    cleanChildNodes(container, phxUpdate) {
      if (DOM.isPhxUpdate(container, phxUpdate, ["append", "prepend"])) {
        let toRemove = [];
        container.childNodes.forEach((childNode) => {
          if (!childNode.id) {
            let isEmptyTextNode = childNode.nodeType === Node.TEXT_NODE && childNode.nodeValue.trim() === "";
            if (!isEmptyTextNode) {
              logError(`only HTML element tags with an id are allowed inside containers with phx-update.

removing illegal node: "${(childNode.outerHTML || childNode.nodeValue).trim()}"

`);
            }
            toRemove.push(childNode);
          }
        });
        toRemove.forEach((childNode) => childNode.remove());
      }
    },
    replaceRootContainer(container, tagName, attrs) {
      let retainedAttrs = /* @__PURE__ */ new Set(["id", PHX_SESSION, PHX_STATIC, PHX_MAIN, PHX_ROOT_ID]);
      if (container.tagName.toLowerCase() === tagName.toLowerCase()) {
        Array.from(container.attributes).filter((attr) => !retainedAttrs.has(attr.name.toLowerCase())).forEach((attr) => container.removeAttribute(attr.name));
        Object.keys(attrs).filter((name) => !retainedAttrs.has(name.toLowerCase())).forEach((attr) => container.setAttribute(attr, attrs[attr]));
        return container;
      } else {
        let newContainer = document.createElement(tagName);
        Object.keys(attrs).forEach((attr) => newContainer.setAttribute(attr, attrs[attr]));
        retainedAttrs.forEach((attr) => newContainer.setAttribute(attr, container.getAttribute(attr)));
        newContainer.innerHTML = container.innerHTML;
        container.replaceWith(newContainer);
        return newContainer;
      }
    },
    getSticky(el, name, defaultVal) {
      let op = (DOM.private(el, "sticky") || []).find(([existingName]) => name === existingName);
      if (op) {
        let [_name, _op, stashedResult] = op;
        return stashedResult;
      } else {
        return typeof defaultVal === "function" ? defaultVal() : defaultVal;
      }
    },
    deleteSticky(el, name) {
      this.updatePrivate(el, "sticky", [], (ops) => {
        return ops.filter(([existingName, _2]) => existingName !== name);
      });
    },
    putSticky(el, name, op) {
      let stashedResult = op(el);
      this.updatePrivate(el, "sticky", [], (ops) => {
        let existingIndex = ops.findIndex(([existingName]) => name === existingName);
        if (existingIndex >= 0) {
          ops[existingIndex] = [name, op, stashedResult];
        } else {
          ops.push([name, op, stashedResult]);
        }
        return ops;
      });
    },
    applyStickyOperations(el) {
      let ops = DOM.private(el, "sticky");
      if (!ops) {
        return;
      }
      ops.forEach(([name, op, _stashed]) => this.putSticky(el, name, op));
    }
  };
  var dom_default = DOM;
  var UploadEntry = class {
    static isActive(fileEl, file) {
      let isNew = file._phxRef === void 0;
      let activeRefs = fileEl.getAttribute(PHX_ACTIVE_ENTRY_REFS).split(",");
      let isActive = activeRefs.indexOf(LiveUploader.genFileRef(file)) >= 0;
      return file.size > 0 && (isNew || isActive);
    }
    static isPreflighted(fileEl, file) {
      let preflightedRefs = fileEl.getAttribute(PHX_PREFLIGHTED_REFS).split(",");
      let isPreflighted = preflightedRefs.indexOf(LiveUploader.genFileRef(file)) >= 0;
      return isPreflighted && this.isActive(fileEl, file);
    }
    constructor(fileEl, file, view) {
      this.ref = LiveUploader.genFileRef(file);
      this.fileEl = fileEl;
      this.file = file;
      this.view = view;
      this.meta = null;
      this._isCancelled = false;
      this._isDone = false;
      this._progress = 0;
      this._lastProgressSent = -1;
      this._onDone = function() {
      };
      this._onElUpdated = this.onElUpdated.bind(this);
      this.fileEl.addEventListener(PHX_LIVE_FILE_UPDATED, this._onElUpdated);
    }
    metadata() {
      return this.meta;
    }
    progress(progress) {
      this._progress = Math.floor(progress);
      if (this._progress > this._lastProgressSent) {
        if (this._progress >= 100) {
          this._progress = 100;
          this._lastProgressSent = 100;
          this._isDone = true;
          this.view.pushFileProgress(this.fileEl, this.ref, 100, () => {
            LiveUploader.untrackFile(this.fileEl, this.file);
            this._onDone();
          });
        } else {
          this._lastProgressSent = this._progress;
          this.view.pushFileProgress(this.fileEl, this.ref, this._progress);
        }
      }
    }
    cancel() {
      this._isCancelled = true;
      this._isDone = true;
      this._onDone();
    }
    isDone() {
      return this._isDone;
    }
    error(reason = "failed") {
      this.fileEl.removeEventListener(PHX_LIVE_FILE_UPDATED, this._onElUpdated);
      this.view.pushFileProgress(this.fileEl, this.ref, { error: reason });
      LiveUploader.clearFiles(this.fileEl);
    }
    onDone(callback) {
      this._onDone = () => {
        this.fileEl.removeEventListener(PHX_LIVE_FILE_UPDATED, this._onElUpdated);
        callback();
      };
    }
    onElUpdated() {
      let activeRefs = this.fileEl.getAttribute(PHX_ACTIVE_ENTRY_REFS).split(",");
      if (activeRefs.indexOf(this.ref) === -1) {
        this.cancel();
      }
    }
    toPreflightPayload() {
      return {
        last_modified: this.file.lastModified,
        name: this.file.name,
        relative_path: this.file.webkitRelativePath,
        size: this.file.size,
        type: this.file.type,
        ref: this.ref
      };
    }
    uploader(uploaders) {
      if (this.meta.uploader) {
        let callback = uploaders[this.meta.uploader] || logError(`no uploader configured for ${this.meta.uploader}`);
        return { name: this.meta.uploader, callback };
      } else {
        return { name: "channel", callback: channelUploader };
      }
    }
    zipPostFlight(resp) {
      this.meta = resp.entries[this.ref];
      if (!this.meta) {
        logError(`no preflight upload response returned with ref ${this.ref}`, { input: this.fileEl, response: resp });
      }
    }
  };
  var liveUploaderFileRef = 0;
  var LiveUploader = class {
    static genFileRef(file) {
      let ref = file._phxRef;
      if (ref !== void 0) {
        return ref;
      } else {
        file._phxRef = (liveUploaderFileRef++).toString();
        return file._phxRef;
      }
    }
    static getEntryDataURL(inputEl, ref, callback) {
      let file = this.activeFiles(inputEl).find((file2) => this.genFileRef(file2) === ref);
      callback(URL.createObjectURL(file));
    }
    static hasUploadsInProgress(formEl) {
      let active = 0;
      dom_default.findUploadInputs(formEl).forEach((input) => {
        if (input.getAttribute(PHX_PREFLIGHTED_REFS) !== input.getAttribute(PHX_DONE_REFS)) {
          active++;
        }
      });
      return active > 0;
    }
    static serializeUploads(inputEl) {
      let files = this.activeFiles(inputEl);
      let fileData = {};
      files.forEach((file) => {
        let entry = { path: inputEl.name };
        let uploadRef = inputEl.getAttribute(PHX_UPLOAD_REF);
        fileData[uploadRef] = fileData[uploadRef] || [];
        entry.ref = this.genFileRef(file);
        entry.last_modified = file.lastModified;
        entry.name = file.name || entry.ref;
        entry.relative_path = file.webkitRelativePath;
        entry.type = file.type;
        entry.size = file.size;
        fileData[uploadRef].push(entry);
      });
      return fileData;
    }
    static clearFiles(inputEl) {
      inputEl.value = null;
      inputEl.removeAttribute(PHX_UPLOAD_REF);
      dom_default.putPrivate(inputEl, "files", []);
    }
    static untrackFile(inputEl, file) {
      dom_default.putPrivate(inputEl, "files", dom_default.private(inputEl, "files").filter((f2) => !Object.is(f2, file)));
    }
    static trackFiles(inputEl, files, dataTransfer) {
      if (inputEl.getAttribute("multiple") !== null) {
        let newFiles = files.filter((file) => !this.activeFiles(inputEl).find((f2) => Object.is(f2, file)));
        dom_default.putPrivate(inputEl, "files", this.activeFiles(inputEl).concat(newFiles));
        inputEl.value = null;
      } else {
        if (dataTransfer && dataTransfer.files.length > 0) {
          inputEl.files = dataTransfer.files;
        }
        dom_default.putPrivate(inputEl, "files", files);
      }
    }
    static activeFileInputs(formEl) {
      let fileInputs = dom_default.findUploadInputs(formEl);
      return Array.from(fileInputs).filter((el) => el.files && this.activeFiles(el).length > 0);
    }
    static activeFiles(input) {
      return (dom_default.private(input, "files") || []).filter((f2) => UploadEntry.isActive(input, f2));
    }
    static inputsAwaitingPreflight(formEl) {
      let fileInputs = dom_default.findUploadInputs(formEl);
      return Array.from(fileInputs).filter((input) => this.filesAwaitingPreflight(input).length > 0);
    }
    static filesAwaitingPreflight(input) {
      return this.activeFiles(input).filter((f2) => !UploadEntry.isPreflighted(input, f2));
    }
    constructor(inputEl, view, onComplete) {
      this.view = view;
      this.onComplete = onComplete;
      this._entries = Array.from(LiveUploader.filesAwaitingPreflight(inputEl) || []).map((file) => new UploadEntry(inputEl, file, view));
      this.numEntriesInProgress = this._entries.length;
    }
    entries() {
      return this._entries;
    }
    initAdapterUpload(resp, onError, liveSocket2) {
      this._entries = this._entries.map((entry) => {
        entry.zipPostFlight(resp);
        entry.onDone(() => {
          this.numEntriesInProgress--;
          if (this.numEntriesInProgress === 0) {
            this.onComplete();
          }
        });
        return entry;
      });
      let groupedEntries = this._entries.reduce((acc, entry) => {
        let { name, callback } = entry.uploader(liveSocket2.uploaders);
        acc[name] = acc[name] || { callback, entries: [] };
        acc[name].entries.push(entry);
        return acc;
      }, {});
      for (let name in groupedEntries) {
        let { callback, entries } = groupedEntries[name];
        callback(entries, onError, resp, liveSocket2);
      }
    }
  };
  var ARIA = {
    focusMain() {
      let target = document.querySelector("main h1, main, h1");
      if (target) {
        let origTabIndex = target.tabIndex;
        target.tabIndex = -1;
        target.focus();
        target.tabIndex = origTabIndex;
      }
    },
    anyOf(instance, classes) {
      return classes.find((name) => instance instanceof name);
    },
    isFocusable(el, interactiveOnly) {
      return el instanceof HTMLAnchorElement && el.rel !== "ignore" || el instanceof HTMLAreaElement && el.href !== void 0 || !el.disabled && this.anyOf(el, [HTMLInputElement, HTMLSelectElement, HTMLTextAreaElement, HTMLButtonElement]) || el instanceof HTMLIFrameElement || (el.tabIndex > 0 || !interactiveOnly && el.tabIndex === 0 && el.getAttribute("tabindex") !== null && el.getAttribute("aria-hidden") !== "true");
    },
    attemptFocus(el, interactiveOnly) {
      if (this.isFocusable(el, interactiveOnly)) {
        try {
          el.focus();
        } catch (e5) {
        }
      }
      return !!document.activeElement && document.activeElement.isSameNode(el);
    },
    focusFirstInteractive(el) {
      let child = el.firstElementChild;
      while (child) {
        if (this.attemptFocus(child, true) || this.focusFirstInteractive(child, true)) {
          return true;
        }
        child = child.nextElementSibling;
      }
    },
    focusFirst(el) {
      let child = el.firstElementChild;
      while (child) {
        if (this.attemptFocus(child) || this.focusFirst(child)) {
          return true;
        }
        child = child.nextElementSibling;
      }
    },
    focusLast(el) {
      let child = el.lastElementChild;
      while (child) {
        if (this.attemptFocus(child) || this.focusLast(child)) {
          return true;
        }
        child = child.previousElementSibling;
      }
    }
  };
  var aria_default = ARIA;
  var Hooks = {
    LiveFileUpload: {
      activeRefs() {
        return this.el.getAttribute(PHX_ACTIVE_ENTRY_REFS);
      },
      preflightedRefs() {
        return this.el.getAttribute(PHX_PREFLIGHTED_REFS);
      },
      mounted() {
        this.preflightedWas = this.preflightedRefs();
      },
      updated() {
        let newPreflights = this.preflightedRefs();
        if (this.preflightedWas !== newPreflights) {
          this.preflightedWas = newPreflights;
          if (newPreflights === "") {
            this.__view.cancelSubmit(this.el.form);
          }
        }
        if (this.activeRefs() === "") {
          this.el.value = null;
        }
        this.el.dispatchEvent(new CustomEvent(PHX_LIVE_FILE_UPDATED));
      }
    },
    LiveImgPreview: {
      mounted() {
        this.ref = this.el.getAttribute("data-phx-entry-ref");
        this.inputEl = document.getElementById(this.el.getAttribute(PHX_UPLOAD_REF));
        LiveUploader.getEntryDataURL(this.inputEl, this.ref, (url) => {
          this.url = url;
          this.el.src = url;
        });
      },
      destroyed() {
        URL.revokeObjectURL(this.url);
      }
    },
    FocusWrap: {
      mounted() {
        this.focusStart = this.el.firstElementChild;
        this.focusEnd = this.el.lastElementChild;
        this.focusStart.addEventListener("focus", () => aria_default.focusLast(this.el));
        this.focusEnd.addEventListener("focus", () => aria_default.focusFirst(this.el));
        this.el.addEventListener("phx:show-end", () => this.el.focus());
        if (window.getComputedStyle(this.el).display !== "none") {
          aria_default.focusFirst(this.el);
        }
      }
    }
  };
  var hooks_default = Hooks;
  var DOMPostMorphRestorer = class {
    constructor(containerBefore, containerAfter, updateType) {
      let idsBefore = /* @__PURE__ */ new Set();
      let idsAfter = new Set([...containerAfter.children].map((child) => child.id));
      let elementsToModify = [];
      Array.from(containerBefore.children).forEach((child) => {
        if (child.id) {
          idsBefore.add(child.id);
          if (idsAfter.has(child.id)) {
            let previousElementId = child.previousElementSibling && child.previousElementSibling.id;
            elementsToModify.push({ elementId: child.id, previousElementId });
          }
        }
      });
      this.containerId = containerAfter.id;
      this.updateType = updateType;
      this.elementsToModify = elementsToModify;
      this.elementIdsToAdd = [...idsAfter].filter((id) => !idsBefore.has(id));
    }
    perform() {
      let container = dom_default.byId(this.containerId);
      this.elementsToModify.forEach((elementToModify) => {
        if (elementToModify.previousElementId) {
          maybe(document.getElementById(elementToModify.previousElementId), (previousElem) => {
            maybe(document.getElementById(elementToModify.elementId), (elem) => {
              let isInRightPlace = elem.previousElementSibling && elem.previousElementSibling.id == previousElem.id;
              if (!isInRightPlace) {
                previousElem.insertAdjacentElement("afterend", elem);
              }
            });
          });
        } else {
          maybe(document.getElementById(elementToModify.elementId), (elem) => {
            let isInRightPlace = elem.previousElementSibling == null;
            if (!isInRightPlace) {
              container.insertAdjacentElement("afterbegin", elem);
            }
          });
        }
      });
      if (this.updateType == "prepend") {
        this.elementIdsToAdd.reverse().forEach((elemId) => {
          maybe(document.getElementById(elemId), (elem) => container.insertAdjacentElement("afterbegin", elem));
        });
      }
    }
  };
  var DOCUMENT_FRAGMENT_NODE = 11;
  function morphAttrs(fromNode, toNode) {
    var toNodeAttrs = toNode.attributes;
    var attr;
    var attrName;
    var attrNamespaceURI;
    var attrValue;
    var fromValue;
    if (toNode.nodeType === DOCUMENT_FRAGMENT_NODE || fromNode.nodeType === DOCUMENT_FRAGMENT_NODE) {
      return;
    }
    for (var i2 = toNodeAttrs.length - 1; i2 >= 0; i2--) {
      attr = toNodeAttrs[i2];
      attrName = attr.name;
      attrNamespaceURI = attr.namespaceURI;
      attrValue = attr.value;
      if (attrNamespaceURI) {
        attrName = attr.localName || attrName;
        fromValue = fromNode.getAttributeNS(attrNamespaceURI, attrName);
        if (fromValue !== attrValue) {
          if (attr.prefix === "xmlns") {
            attrName = attr.name;
          }
          fromNode.setAttributeNS(attrNamespaceURI, attrName, attrValue);
        }
      } else {
        fromValue = fromNode.getAttribute(attrName);
        if (fromValue !== attrValue) {
          fromNode.setAttribute(attrName, attrValue);
        }
      }
    }
    var fromNodeAttrs = fromNode.attributes;
    for (var d2 = fromNodeAttrs.length - 1; d2 >= 0; d2--) {
      attr = fromNodeAttrs[d2];
      attrName = attr.name;
      attrNamespaceURI = attr.namespaceURI;
      if (attrNamespaceURI) {
        attrName = attr.localName || attrName;
        if (!toNode.hasAttributeNS(attrNamespaceURI, attrName)) {
          fromNode.removeAttributeNS(attrNamespaceURI, attrName);
        }
      } else {
        if (!toNode.hasAttribute(attrName)) {
          fromNode.removeAttribute(attrName);
        }
      }
    }
  }
  var range;
  var NS_XHTML = "http://www.w3.org/1999/xhtml";
  var doc = typeof document === "undefined" ? void 0 : document;
  var HAS_TEMPLATE_SUPPORT = !!doc && "content" in doc.createElement("template");
  var HAS_RANGE_SUPPORT = !!doc && doc.createRange && "createContextualFragment" in doc.createRange();
  function createFragmentFromTemplate(str) {
    var template = doc.createElement("template");
    template.innerHTML = str;
    return template.content.childNodes[0];
  }
  function createFragmentFromRange(str) {
    if (!range) {
      range = doc.createRange();
      range.selectNode(doc.body);
    }
    var fragment = range.createContextualFragment(str);
    return fragment.childNodes[0];
  }
  function createFragmentFromWrap(str) {
    var fragment = doc.createElement("body");
    fragment.innerHTML = str;
    return fragment.childNodes[0];
  }
  function toElement(str) {
    str = str.trim();
    if (HAS_TEMPLATE_SUPPORT) {
      return createFragmentFromTemplate(str);
    } else if (HAS_RANGE_SUPPORT) {
      return createFragmentFromRange(str);
    }
    return createFragmentFromWrap(str);
  }
  function compareNodeNames(fromEl, toEl) {
    var fromNodeName = fromEl.nodeName;
    var toNodeName = toEl.nodeName;
    var fromCodeStart, toCodeStart;
    if (fromNodeName === toNodeName) {
      return true;
    }
    fromCodeStart = fromNodeName.charCodeAt(0);
    toCodeStart = toNodeName.charCodeAt(0);
    if (fromCodeStart <= 90 && toCodeStart >= 97) {
      return fromNodeName === toNodeName.toUpperCase();
    } else if (toCodeStart <= 90 && fromCodeStart >= 97) {
      return toNodeName === fromNodeName.toUpperCase();
    } else {
      return false;
    }
  }
  function createElementNS(name, namespaceURI) {
    return !namespaceURI || namespaceURI === NS_XHTML ? doc.createElement(name) : doc.createElementNS(namespaceURI, name);
  }
  function moveChildren(fromEl, toEl) {
    var curChild = fromEl.firstChild;
    while (curChild) {
      var nextChild = curChild.nextSibling;
      toEl.appendChild(curChild);
      curChild = nextChild;
    }
    return toEl;
  }
  function syncBooleanAttrProp(fromEl, toEl, name) {
    if (fromEl[name] !== toEl[name]) {
      fromEl[name] = toEl[name];
      if (fromEl[name]) {
        fromEl.setAttribute(name, "");
      } else {
        fromEl.removeAttribute(name);
      }
    }
  }
  var specialElHandlers = {
    OPTION: function(fromEl, toEl) {
      var parentNode = fromEl.parentNode;
      if (parentNode) {
        var parentName = parentNode.nodeName.toUpperCase();
        if (parentName === "OPTGROUP") {
          parentNode = parentNode.parentNode;
          parentName = parentNode && parentNode.nodeName.toUpperCase();
        }
        if (parentName === "SELECT" && !parentNode.hasAttribute("multiple")) {
          if (fromEl.hasAttribute("selected") && !toEl.selected) {
            fromEl.setAttribute("selected", "selected");
            fromEl.removeAttribute("selected");
          }
          parentNode.selectedIndex = -1;
        }
      }
      syncBooleanAttrProp(fromEl, toEl, "selected");
    },
    INPUT: function(fromEl, toEl) {
      syncBooleanAttrProp(fromEl, toEl, "checked");
      syncBooleanAttrProp(fromEl, toEl, "disabled");
      if (fromEl.value !== toEl.value) {
        fromEl.value = toEl.value;
      }
      if (!toEl.hasAttribute("value")) {
        fromEl.removeAttribute("value");
      }
    },
    TEXTAREA: function(fromEl, toEl) {
      var newValue = toEl.value;
      if (fromEl.value !== newValue) {
        fromEl.value = newValue;
      }
      var firstChild = fromEl.firstChild;
      if (firstChild) {
        var oldValue = firstChild.nodeValue;
        if (oldValue == newValue || !newValue && oldValue == fromEl.placeholder) {
          return;
        }
        firstChild.nodeValue = newValue;
      }
    },
    SELECT: function(fromEl, toEl) {
      if (!toEl.hasAttribute("multiple")) {
        var selectedIndex = -1;
        var i2 = 0;
        var curChild = fromEl.firstChild;
        var optgroup;
        var nodeName;
        while (curChild) {
          nodeName = curChild.nodeName && curChild.nodeName.toUpperCase();
          if (nodeName === "OPTGROUP") {
            optgroup = curChild;
            curChild = optgroup.firstChild;
          } else {
            if (nodeName === "OPTION") {
              if (curChild.hasAttribute("selected")) {
                selectedIndex = i2;
                break;
              }
              i2++;
            }
            curChild = curChild.nextSibling;
            if (!curChild && optgroup) {
              curChild = optgroup.nextSibling;
              optgroup = null;
            }
          }
        }
        fromEl.selectedIndex = selectedIndex;
      }
    }
  };
  var ELEMENT_NODE = 1;
  var DOCUMENT_FRAGMENT_NODE$1 = 11;
  var TEXT_NODE = 3;
  var COMMENT_NODE = 8;
  function noop() {
  }
  function defaultGetNodeKey(node) {
    if (node) {
      return node.getAttribute && node.getAttribute("id") || node.id;
    }
  }
  function morphdomFactory(morphAttrs2) {
    return function morphdom2(fromNode, toNode, options) {
      if (!options) {
        options = {};
      }
      if (typeof toNode === "string") {
        if (fromNode.nodeName === "#document" || fromNode.nodeName === "HTML" || fromNode.nodeName === "BODY") {
          var toNodeHtml = toNode;
          toNode = doc.createElement("html");
          toNode.innerHTML = toNodeHtml;
        } else {
          toNode = toElement(toNode);
        }
      } else if (toNode.nodeType === DOCUMENT_FRAGMENT_NODE$1) {
        toNode = toNode.firstElementChild;
      }
      var getNodeKey = options.getNodeKey || defaultGetNodeKey;
      var onBeforeNodeAdded = options.onBeforeNodeAdded || noop;
      var onNodeAdded = options.onNodeAdded || noop;
      var onBeforeElUpdated = options.onBeforeElUpdated || noop;
      var onElUpdated = options.onElUpdated || noop;
      var onBeforeNodeDiscarded = options.onBeforeNodeDiscarded || noop;
      var onNodeDiscarded = options.onNodeDiscarded || noop;
      var onBeforeElChildrenUpdated = options.onBeforeElChildrenUpdated || noop;
      var skipFromChildren = options.skipFromChildren || noop;
      var addChild = options.addChild || function(parent, child) {
        return parent.appendChild(child);
      };
      var childrenOnly = options.childrenOnly === true;
      var fromNodesLookup = /* @__PURE__ */ Object.create(null);
      var keyedRemovalList = [];
      function addKeyedRemoval(key) {
        keyedRemovalList.push(key);
      }
      function walkDiscardedChildNodes(node, skipKeyedNodes) {
        if (node.nodeType === ELEMENT_NODE) {
          var curChild = node.firstChild;
          while (curChild) {
            var key = void 0;
            if (skipKeyedNodes && (key = getNodeKey(curChild))) {
              addKeyedRemoval(key);
            } else {
              onNodeDiscarded(curChild);
              if (curChild.firstChild) {
                walkDiscardedChildNodes(curChild, skipKeyedNodes);
              }
            }
            curChild = curChild.nextSibling;
          }
        }
      }
      function removeNode(node, parentNode, skipKeyedNodes) {
        if (onBeforeNodeDiscarded(node) === false) {
          return;
        }
        if (parentNode) {
          parentNode.removeChild(node);
        }
        onNodeDiscarded(node);
        walkDiscardedChildNodes(node, skipKeyedNodes);
      }
      function indexTree(node) {
        if (node.nodeType === ELEMENT_NODE || node.nodeType === DOCUMENT_FRAGMENT_NODE$1) {
          var curChild = node.firstChild;
          while (curChild) {
            var key = getNodeKey(curChild);
            if (key) {
              fromNodesLookup[key] = curChild;
            }
            indexTree(curChild);
            curChild = curChild.nextSibling;
          }
        }
      }
      indexTree(fromNode);
      function handleNodeAdded(el) {
        onNodeAdded(el);
        var curChild = el.firstChild;
        while (curChild) {
          var nextSibling = curChild.nextSibling;
          var key = getNodeKey(curChild);
          if (key) {
            var unmatchedFromEl = fromNodesLookup[key];
            if (unmatchedFromEl && compareNodeNames(curChild, unmatchedFromEl)) {
              curChild.parentNode.replaceChild(unmatchedFromEl, curChild);
              morphEl(unmatchedFromEl, curChild);
            } else {
              handleNodeAdded(curChild);
            }
          } else {
            handleNodeAdded(curChild);
          }
          curChild = nextSibling;
        }
      }
      function cleanupFromEl(fromEl, curFromNodeChild, curFromNodeKey) {
        while (curFromNodeChild) {
          var fromNextSibling = curFromNodeChild.nextSibling;
          if (curFromNodeKey = getNodeKey(curFromNodeChild)) {
            addKeyedRemoval(curFromNodeKey);
          } else {
            removeNode(curFromNodeChild, fromEl, true);
          }
          curFromNodeChild = fromNextSibling;
        }
      }
      function morphEl(fromEl, toEl, childrenOnly2) {
        var toElKey = getNodeKey(toEl);
        if (toElKey) {
          delete fromNodesLookup[toElKey];
        }
        if (!childrenOnly2) {
          if (onBeforeElUpdated(fromEl, toEl) === false) {
            return;
          }
          morphAttrs2(fromEl, toEl);
          onElUpdated(fromEl);
          if (onBeforeElChildrenUpdated(fromEl, toEl) === false) {
            return;
          }
        }
        if (fromEl.nodeName !== "TEXTAREA") {
          morphChildren(fromEl, toEl);
        } else {
          specialElHandlers.TEXTAREA(fromEl, toEl);
        }
      }
      function morphChildren(fromEl, toEl) {
        var skipFrom = skipFromChildren(fromEl);
        var curToNodeChild = toEl.firstChild;
        var curFromNodeChild = fromEl.firstChild;
        var curToNodeKey;
        var curFromNodeKey;
        var fromNextSibling;
        var toNextSibling;
        var matchingFromEl;
        outer:
          while (curToNodeChild) {
            toNextSibling = curToNodeChild.nextSibling;
            curToNodeKey = getNodeKey(curToNodeChild);
            while (!skipFrom && curFromNodeChild) {
              fromNextSibling = curFromNodeChild.nextSibling;
              if (curToNodeChild.isSameNode && curToNodeChild.isSameNode(curFromNodeChild)) {
                curToNodeChild = toNextSibling;
                curFromNodeChild = fromNextSibling;
                continue outer;
              }
              curFromNodeKey = getNodeKey(curFromNodeChild);
              var curFromNodeType = curFromNodeChild.nodeType;
              var isCompatible = void 0;
              if (curFromNodeType === curToNodeChild.nodeType) {
                if (curFromNodeType === ELEMENT_NODE) {
                  if (curToNodeKey) {
                    if (curToNodeKey !== curFromNodeKey) {
                      if (matchingFromEl = fromNodesLookup[curToNodeKey]) {
                        if (fromNextSibling === matchingFromEl) {
                          isCompatible = false;
                        } else {
                          fromEl.insertBefore(matchingFromEl, curFromNodeChild);
                          if (curFromNodeKey) {
                            addKeyedRemoval(curFromNodeKey);
                          } else {
                            removeNode(curFromNodeChild, fromEl, true);
                          }
                          curFromNodeChild = matchingFromEl;
                        }
                      } else {
                        isCompatible = false;
                      }
                    }
                  } else if (curFromNodeKey) {
                    isCompatible = false;
                  }
                  isCompatible = isCompatible !== false && compareNodeNames(curFromNodeChild, curToNodeChild);
                  if (isCompatible) {
                    morphEl(curFromNodeChild, curToNodeChild);
                  }
                } else if (curFromNodeType === TEXT_NODE || curFromNodeType == COMMENT_NODE) {
                  isCompatible = true;
                  if (curFromNodeChild.nodeValue !== curToNodeChild.nodeValue) {
                    curFromNodeChild.nodeValue = curToNodeChild.nodeValue;
                  }
                }
              }
              if (isCompatible) {
                curToNodeChild = toNextSibling;
                curFromNodeChild = fromNextSibling;
                continue outer;
              }
              if (curFromNodeKey) {
                addKeyedRemoval(curFromNodeKey);
              } else {
                removeNode(curFromNodeChild, fromEl, true);
              }
              curFromNodeChild = fromNextSibling;
            }
            if (curToNodeKey && (matchingFromEl = fromNodesLookup[curToNodeKey]) && compareNodeNames(matchingFromEl, curToNodeChild)) {
              if (!skipFrom) {
                addChild(fromEl, matchingFromEl);
              }
              morphEl(matchingFromEl, curToNodeChild);
            } else {
              var onBeforeNodeAddedResult = onBeforeNodeAdded(curToNodeChild);
              if (onBeforeNodeAddedResult !== false) {
                if (onBeforeNodeAddedResult) {
                  curToNodeChild = onBeforeNodeAddedResult;
                }
                if (curToNodeChild.actualize) {
                  curToNodeChild = curToNodeChild.actualize(fromEl.ownerDocument || doc);
                }
                addChild(fromEl, curToNodeChild);
                handleNodeAdded(curToNodeChild);
              }
            }
            curToNodeChild = toNextSibling;
            curFromNodeChild = fromNextSibling;
          }
        cleanupFromEl(fromEl, curFromNodeChild, curFromNodeKey);
        var specialElHandler = specialElHandlers[fromEl.nodeName];
        if (specialElHandler) {
          specialElHandler(fromEl, toEl);
        }
      }
      var morphedNode = fromNode;
      var morphedNodeType = morphedNode.nodeType;
      var toNodeType = toNode.nodeType;
      if (!childrenOnly) {
        if (morphedNodeType === ELEMENT_NODE) {
          if (toNodeType === ELEMENT_NODE) {
            if (!compareNodeNames(fromNode, toNode)) {
              onNodeDiscarded(fromNode);
              morphedNode = moveChildren(fromNode, createElementNS(toNode.nodeName, toNode.namespaceURI));
            }
          } else {
            morphedNode = toNode;
          }
        } else if (morphedNodeType === TEXT_NODE || morphedNodeType === COMMENT_NODE) {
          if (toNodeType === morphedNodeType) {
            if (morphedNode.nodeValue !== toNode.nodeValue) {
              morphedNode.nodeValue = toNode.nodeValue;
            }
            return morphedNode;
          } else {
            morphedNode = toNode;
          }
        }
      }
      if (morphedNode === toNode) {
        onNodeDiscarded(fromNode);
      } else {
        if (toNode.isSameNode && toNode.isSameNode(morphedNode)) {
          return;
        }
        morphEl(morphedNode, toNode, childrenOnly);
        if (keyedRemovalList) {
          for (var i2 = 0, len = keyedRemovalList.length; i2 < len; i2++) {
            var elToRemove = fromNodesLookup[keyedRemovalList[i2]];
            if (elToRemove) {
              removeNode(elToRemove, elToRemove.parentNode, false);
            }
          }
        }
      }
      if (!childrenOnly && morphedNode !== fromNode && fromNode.parentNode) {
        if (morphedNode.actualize) {
          morphedNode = morphedNode.actualize(fromNode.ownerDocument || doc);
        }
        fromNode.parentNode.replaceChild(morphedNode, fromNode);
      }
      return morphedNode;
    };
  }
  var morphdom = morphdomFactory(morphAttrs);
  var morphdom_esm_default = morphdom;
  var DOMPatch = class {
    static patchEl(fromEl, toEl, activeElement) {
      morphdom_esm_default(fromEl, toEl, {
        childrenOnly: false,
        onBeforeElUpdated: (fromEl2, toEl2) => {
          if (activeElement && activeElement.isSameNode(fromEl2) && dom_default.isFormInput(fromEl2)) {
            dom_default.mergeFocusedInput(fromEl2, toEl2);
            return false;
          }
        }
      });
    }
    constructor(view, container, id, html, streams, targetCID) {
      this.view = view;
      this.liveSocket = view.liveSocket;
      this.container = container;
      this.id = id;
      this.rootID = view.root.id;
      this.html = html;
      this.streams = streams;
      this.streamInserts = {};
      this.targetCID = targetCID;
      this.cidPatch = isCid(this.targetCID);
      this.pendingRemoves = [];
      this.phxRemove = this.liveSocket.binding("remove");
      this.callbacks = {
        beforeadded: [],
        beforeupdated: [],
        beforephxChildAdded: [],
        afteradded: [],
        afterupdated: [],
        afterdiscarded: [],
        afterphxChildAdded: [],
        aftertransitionsDiscarded: []
      };
    }
    before(kind, callback) {
      this.callbacks[`before${kind}`].push(callback);
    }
    after(kind, callback) {
      this.callbacks[`after${kind}`].push(callback);
    }
    trackBefore(kind, ...args) {
      this.callbacks[`before${kind}`].forEach((callback) => callback(...args));
    }
    trackAfter(kind, ...args) {
      this.callbacks[`after${kind}`].forEach((callback) => callback(...args));
    }
    markPrunableContentForRemoval() {
      let phxUpdate = this.liveSocket.binding(PHX_UPDATE);
      dom_default.all(this.container, `[${phxUpdate}=${PHX_STREAM}]`, (el) => el.innerHTML = "");
      dom_default.all(this.container, `[${phxUpdate}=append] > *, [${phxUpdate}=prepend] > *`, (el) => {
        el.setAttribute(PHX_PRUNE, "");
      });
    }
    perform() {
      let { view, liveSocket: liveSocket2, container, html } = this;
      let targetContainer = this.isCIDPatch() ? this.targetCIDContainer(html) : container;
      if (this.isCIDPatch() && !targetContainer) {
        return;
      }
      let focused = liveSocket2.getActiveElement();
      let { selectionStart, selectionEnd } = focused && dom_default.hasSelectionRange(focused) ? focused : {};
      let phxUpdate = liveSocket2.binding(PHX_UPDATE);
      let phxFeedbackFor = liveSocket2.binding(PHX_FEEDBACK_FOR);
      let disableWith = liveSocket2.binding(PHX_DISABLE_WITH);
      let phxTriggerExternal = liveSocket2.binding(PHX_TRIGGER_ACTION);
      let added = [];
      let updates = [];
      let appendPrependUpdates = [];
      let externalFormTriggered = null;
      let diffHTML = liveSocket2.time("premorph container prep", () => {
        return this.buildDiffHTML(container, html, phxUpdate, targetContainer);
      });
      this.trackBefore("added", container);
      this.trackBefore("updated", container, container);
      liveSocket2.time("morphdom", () => {
        this.streams.forEach(([inserts, deleteIds]) => {
          this.streamInserts = Object.assign(this.streamInserts, inserts);
          deleteIds.forEach((id) => {
            let child = container.querySelector(`[id="${id}"]`);
            if (child) {
              if (!this.maybePendingRemove(child)) {
                child.remove();
                this.onNodeDiscarded(child);
              }
            }
          });
        });
        morphdom_esm_default(targetContainer, diffHTML, {
          childrenOnly: targetContainer.getAttribute(PHX_COMPONENT) === null,
          getNodeKey: (node) => {
            return dom_default.isPhxDestroyed(node) ? null : node.id;
          },
          skipFromChildren: (from) => {
            return from.getAttribute(phxUpdate) === PHX_STREAM;
          },
          addChild: (parent, child) => {
            let streamAt = child.id ? this.streamInserts[child.id] : void 0;
            if (streamAt === void 0) {
              return parent.appendChild(child);
            }
            if (streamAt === 0) {
              parent.insertAdjacentElement("afterbegin", child);
            } else if (streamAt === -1) {
              parent.appendChild(child);
            } else if (streamAt > 0) {
              let sibling = Array.from(parent.children)[streamAt];
              parent.insertBefore(child, sibling);
            }
          },
          onBeforeNodeAdded: (el) => {
            this.trackBefore("added", el);
            return el;
          },
          onNodeAdded: (el) => {
            if (el instanceof HTMLImageElement && el.srcset) {
              el.srcset = el.srcset;
            } else if (el instanceof HTMLVideoElement && el.autoplay) {
              el.play();
            }
            if (dom_default.isNowTriggerFormExternal(el, phxTriggerExternal)) {
              externalFormTriggered = el;
            }
            dom_default.discardError(targetContainer, el, phxFeedbackFor);
            if (dom_default.isPhxChild(el) && view.ownsElement(el) || dom_default.isPhxSticky(el) && view.ownsElement(el.parentNode)) {
              this.trackAfter("phxChildAdded", el);
            }
            added.push(el);
          },
          onNodeDiscarded: (el) => this.onNodeDiscarded(el),
          onBeforeNodeDiscarded: (el) => {
            if (el.getAttribute && el.getAttribute(PHX_PRUNE) !== null) {
              return true;
            }
            if (el.parentElement !== null && el.id && dom_default.isPhxUpdate(el.parentElement, phxUpdate, [PHX_STREAM, "append", "prepend"])) {
              return false;
            }
            if (this.maybePendingRemove(el)) {
              return false;
            }
            if (this.skipCIDSibling(el)) {
              return false;
            }
            return true;
          },
          onElUpdated: (el) => {
            if (dom_default.isNowTriggerFormExternal(el, phxTriggerExternal)) {
              externalFormTriggered = el;
            }
            updates.push(el);
            this.maybeReOrderStream(el);
          },
          onBeforeElUpdated: (fromEl, toEl) => {
            dom_default.cleanChildNodes(toEl, phxUpdate);
            if (this.skipCIDSibling(toEl)) {
              return false;
            }
            if (dom_default.isPhxSticky(fromEl)) {
              return false;
            }
            if (dom_default.isIgnored(fromEl, phxUpdate) || fromEl.form && fromEl.form.isSameNode(externalFormTriggered)) {
              this.trackBefore("updated", fromEl, toEl);
              dom_default.mergeAttrs(fromEl, toEl, { isIgnored: true });
              updates.push(fromEl);
              dom_default.applyStickyOperations(fromEl);
              return false;
            }
            if (fromEl.type === "number" && (fromEl.validity && fromEl.validity.badInput)) {
              return false;
            }
            if (!dom_default.syncPendingRef(fromEl, toEl, disableWith)) {
              if (dom_default.isUploadInput(fromEl)) {
                this.trackBefore("updated", fromEl, toEl);
                updates.push(fromEl);
              }
              dom_default.applyStickyOperations(fromEl);
              return false;
            }
            if (dom_default.isPhxChild(toEl)) {
              let prevSession = fromEl.getAttribute(PHX_SESSION);
              dom_default.mergeAttrs(fromEl, toEl, { exclude: [PHX_STATIC] });
              if (prevSession !== "") {
                fromEl.setAttribute(PHX_SESSION, prevSession);
              }
              fromEl.setAttribute(PHX_ROOT_ID, this.rootID);
              dom_default.applyStickyOperations(fromEl);
              return false;
            }
            dom_default.copyPrivates(toEl, fromEl);
            dom_default.discardError(targetContainer, toEl, phxFeedbackFor);
            let isFocusedFormEl = focused && fromEl.isSameNode(focused) && dom_default.isFormInput(fromEl);
            if (isFocusedFormEl && fromEl.type !== "hidden") {
              this.trackBefore("updated", fromEl, toEl);
              dom_default.mergeFocusedInput(fromEl, toEl);
              dom_default.syncAttrsToProps(fromEl);
              updates.push(fromEl);
              dom_default.applyStickyOperations(fromEl);
              return false;
            } else {
              if (dom_default.isPhxUpdate(toEl, phxUpdate, ["append", "prepend"])) {
                appendPrependUpdates.push(new DOMPostMorphRestorer(fromEl, toEl, toEl.getAttribute(phxUpdate)));
              }
              dom_default.syncAttrsToProps(toEl);
              dom_default.applyStickyOperations(toEl);
              this.trackBefore("updated", fromEl, toEl);
              return true;
            }
          }
        });
      });
      if (liveSocket2.isDebugEnabled()) {
        detectDuplicateIds();
      }
      if (appendPrependUpdates.length > 0) {
        liveSocket2.time("post-morph append/prepend restoration", () => {
          appendPrependUpdates.forEach((update) => update.perform());
        });
      }
      liveSocket2.silenceEvents(() => dom_default.restoreFocus(focused, selectionStart, selectionEnd));
      dom_default.dispatchEvent(document, "phx:update");
      added.forEach((el) => this.trackAfter("added", el));
      updates.forEach((el) => this.trackAfter("updated", el));
      this.transitionPendingRemoves();
      if (externalFormTriggered) {
        liveSocket2.unload();
        externalFormTriggered.submit();
      }
      return true;
    }
    onNodeDiscarded(el) {
      if (dom_default.isPhxChild(el) || dom_default.isPhxSticky(el)) {
        this.liveSocket.destroyViewByEl(el);
      }
      this.trackAfter("discarded", el);
    }
    maybePendingRemove(node) {
      if (node.getAttribute && node.getAttribute(this.phxRemove) !== null) {
        this.pendingRemoves.push(node);
        return true;
      } else {
        return false;
      }
    }
    maybeReOrderStream(el) {
      let streamAt = el.id ? this.streamInserts[el.id] : void 0;
      if (streamAt === void 0) {
        return;
      }
      if (streamAt === 0) {
        el.parentElement.insertBefore(el, el.parentElement.firstElementChild);
      } else if (streamAt > 0) {
        let children = Array.from(el.parentElement.children);
        let oldIndex = children.indexOf(el);
        if (streamAt >= children.length - 1) {
          el.parentElement.appendChild(el);
        } else {
          let sibling = children[streamAt];
          if (oldIndex > streamAt) {
            el.parentElement.insertBefore(el, sibling);
          } else {
            el.parentElement.insertBefore(el, sibling.nextElementSibling);
          }
        }
      }
    }
    transitionPendingRemoves() {
      let { pendingRemoves, liveSocket: liveSocket2 } = this;
      if (pendingRemoves.length > 0) {
        liveSocket2.transitionRemoves(pendingRemoves);
        liveSocket2.requestDOMUpdate(() => {
          pendingRemoves.forEach((el) => {
            let child = dom_default.firstPhxChild(el);
            if (child) {
              liveSocket2.destroyViewByEl(child);
            }
            el.remove();
          });
          this.trackAfter("transitionsDiscarded", pendingRemoves);
        });
      }
    }
    isCIDPatch() {
      return this.cidPatch;
    }
    skipCIDSibling(el) {
      return el.nodeType === Node.ELEMENT_NODE && el.getAttribute(PHX_SKIP) !== null;
    }
    targetCIDContainer(html) {
      if (!this.isCIDPatch()) {
        return;
      }
      let [first, ...rest] = dom_default.findComponentNodeList(this.container, this.targetCID);
      if (rest.length === 0 && dom_default.childNodeLength(html) === 1) {
        return first;
      } else {
        return first && first.parentNode;
      }
    }
    buildDiffHTML(container, html, phxUpdate, targetContainer) {
      let isCIDPatch = this.isCIDPatch();
      let isCIDWithSingleRoot = isCIDPatch && targetContainer.getAttribute(PHX_COMPONENT) === this.targetCID.toString();
      if (!isCIDPatch || isCIDWithSingleRoot) {
        return html;
      } else {
        let diffContainer = null;
        let template = document.createElement("template");
        diffContainer = dom_default.cloneNode(targetContainer);
        let [firstComponent, ...rest] = dom_default.findComponentNodeList(diffContainer, this.targetCID);
        template.innerHTML = html;
        rest.forEach((el) => el.remove());
        Array.from(diffContainer.childNodes).forEach((child) => {
          if (child.id && child.nodeType === Node.ELEMENT_NODE && child.getAttribute(PHX_COMPONENT) !== this.targetCID.toString()) {
            child.setAttribute(PHX_SKIP, "");
            child.innerHTML = "";
          }
        });
        Array.from(template.content.childNodes).forEach((el) => diffContainer.insertBefore(el, firstComponent));
        firstComponent.remove();
        return diffContainer.outerHTML;
      }
    }
    indexOf(parent, child) {
      return Array.from(parent.children).indexOf(child);
    }
  };
  var Rendered = class {
    static extract(diff) {
      let { [REPLY]: reply, [EVENTS]: events, [TITLE]: title } = diff;
      delete diff[REPLY];
      delete diff[EVENTS];
      delete diff[TITLE];
      return { diff, title, reply: reply || null, events: events || [] };
    }
    constructor(viewId, rendered) {
      this.viewId = viewId;
      this.rendered = {};
      this.mergeDiff(rendered);
    }
    parentViewId() {
      return this.viewId;
    }
    toString(onlyCids) {
      let [str, streams] = this.recursiveToString(this.rendered, this.rendered[COMPONENTS], onlyCids);
      return [str, streams];
    }
    recursiveToString(rendered, components = rendered[COMPONENTS], onlyCids) {
      onlyCids = onlyCids ? new Set(onlyCids) : null;
      let output = { buffer: "", components, onlyCids, streams: /* @__PURE__ */ new Set() };
      this.toOutputBuffer(rendered, null, output);
      return [output.buffer, output.streams];
    }
    componentCIDs(diff) {
      return Object.keys(diff[COMPONENTS] || {}).map((i2) => parseInt(i2));
    }
    isComponentOnlyDiff(diff) {
      if (!diff[COMPONENTS]) {
        return false;
      }
      return Object.keys(diff).length === 1;
    }
    getComponent(diff, cid) {
      return diff[COMPONENTS][cid];
    }
    mergeDiff(diff) {
      let newc = diff[COMPONENTS];
      let cache = {};
      delete diff[COMPONENTS];
      this.rendered = this.mutableMerge(this.rendered, diff);
      this.rendered[COMPONENTS] = this.rendered[COMPONENTS] || {};
      if (newc) {
        let oldc = this.rendered[COMPONENTS];
        for (let cid in newc) {
          newc[cid] = this.cachedFindComponent(cid, newc[cid], oldc, newc, cache);
        }
        for (let cid in newc) {
          oldc[cid] = newc[cid];
        }
        diff[COMPONENTS] = newc;
      }
    }
    cachedFindComponent(cid, cdiff, oldc, newc, cache) {
      if (cache[cid]) {
        return cache[cid];
      } else {
        let ndiff, stat, scid = cdiff[STATIC];
        if (isCid(scid)) {
          let tdiff;
          if (scid > 0) {
            tdiff = this.cachedFindComponent(scid, newc[scid], oldc, newc, cache);
          } else {
            tdiff = oldc[-scid];
          }
          stat = tdiff[STATIC];
          ndiff = this.cloneMerge(tdiff, cdiff);
          ndiff[STATIC] = stat;
        } else {
          ndiff = cdiff[STATIC] !== void 0 ? cdiff : this.cloneMerge(oldc[cid] || {}, cdiff);
        }
        cache[cid] = ndiff;
        return ndiff;
      }
    }
    mutableMerge(target, source) {
      if (source[STATIC] !== void 0) {
        return source;
      } else {
        this.doMutableMerge(target, source);
        return target;
      }
    }
    doMutableMerge(target, source) {
      for (let key in source) {
        let val = source[key];
        let targetVal = target[key];
        let isObjVal = isObject(val);
        if (isObjVal && val[STATIC] === void 0 && isObject(targetVal)) {
          this.doMutableMerge(targetVal, val);
        } else {
          target[key] = val;
        }
      }
    }
    cloneMerge(target, source) {
      let merged = __spreadValues(__spreadValues({}, target), source);
      for (let key in merged) {
        let val = source[key];
        let targetVal = target[key];
        if (isObject(val) && val[STATIC] === void 0 && isObject(targetVal)) {
          merged[key] = this.cloneMerge(targetVal, val);
        }
      }
      return merged;
    }
    componentToString(cid) {
      let [str, streams] = this.recursiveCIDToString(this.rendered[COMPONENTS], cid);
      return [str, streams];
    }
    pruneCIDs(cids) {
      cids.forEach((cid) => delete this.rendered[COMPONENTS][cid]);
    }
    get() {
      return this.rendered;
    }
    isNewFingerprint(diff = {}) {
      return !!diff[STATIC];
    }
    templateStatic(part, templates) {
      if (typeof part === "number") {
        return templates[part];
      } else {
        return part;
      }
    }
    toOutputBuffer(rendered, templates, output) {
      if (rendered[DYNAMICS]) {
        return this.comprehensionToBuffer(rendered, templates, output);
      }
      let { [STATIC]: statics } = rendered;
      statics = this.templateStatic(statics, templates);
      output.buffer += statics[0];
      for (let i2 = 1; i2 < statics.length; i2++) {
        this.dynamicToBuffer(rendered[i2 - 1], templates, output);
        output.buffer += statics[i2];
      }
    }
    comprehensionToBuffer(rendered, templates, output) {
      let { [DYNAMICS]: dynamics, [STATIC]: statics, [STREAM]: stream } = rendered;
      let [_inserts, deleteIds] = stream || [{}, []];
      statics = this.templateStatic(statics, templates);
      let compTemplates = templates || rendered[TEMPLATES];
      for (let d2 = 0; d2 < dynamics.length; d2++) {
        let dynamic = dynamics[d2];
        output.buffer += statics[0];
        for (let i2 = 1; i2 < statics.length; i2++) {
          this.dynamicToBuffer(dynamic[i2 - 1], compTemplates, output);
          output.buffer += statics[i2];
        }
      }
      if (stream !== void 0 && (rendered[DYNAMICS].length > 0 || deleteIds.length > 0)) {
        rendered[DYNAMICS] = [];
        output.streams.add(stream);
      }
    }
    dynamicToBuffer(rendered, templates, output) {
      if (typeof rendered === "number") {
        let [str, streams] = this.recursiveCIDToString(output.components, rendered, output.onlyCids);
        output.buffer += str;
        output.streams = /* @__PURE__ */ new Set([...output.streams, ...streams]);
      } else if (isObject(rendered)) {
        this.toOutputBuffer(rendered, templates, output);
      } else {
        output.buffer += rendered;
      }
    }
    recursiveCIDToString(components, cid, onlyCids) {
      let component = components[cid] || logError(`no component for CID ${cid}`, components);
      let template = document.createElement("template");
      let [html, streams] = this.recursiveToString(component, components, onlyCids);
      template.innerHTML = html;
      let container = template.content;
      let skip = onlyCids && !onlyCids.has(cid);
      let [hasChildNodes, hasChildComponents] = Array.from(container.childNodes).reduce(([hasNodes, hasComponents], child, i2) => {
        if (child.nodeType === Node.ELEMENT_NODE) {
          if (child.getAttribute(PHX_COMPONENT)) {
            return [hasNodes, true];
          }
          child.setAttribute(PHX_COMPONENT, cid);
          if (!child.id) {
            child.id = `${this.parentViewId()}-${cid}-${i2}`;
          }
          if (skip) {
            child.setAttribute(PHX_SKIP, "");
            child.innerHTML = "";
          }
          return [true, hasComponents];
        } else {
          if (child.nodeValue.trim() !== "") {
            logError(`only HTML element tags are allowed at the root of components.

got: "${child.nodeValue.trim()}"

within:
`, template.innerHTML.trim());
            child.replaceWith(this.createSpan(child.nodeValue, cid));
            return [true, hasComponents];
          } else {
            child.remove();
            return [hasNodes, hasComponents];
          }
        }
      }, [false, false]);
      if (!hasChildNodes && !hasChildComponents) {
        logError("expected at least one HTML element tag inside a component, but the component is empty:\n", template.innerHTML.trim());
        return [this.createSpan("", cid).outerHTML, streams];
      } else if (!hasChildNodes && hasChildComponents) {
        logError("expected at least one HTML element tag directly inside a component, but only subcomponents were found. A component must render at least one HTML tag directly inside itself.", template.innerHTML.trim());
        return [template.innerHTML, streams];
      } else {
        return [template.innerHTML, streams];
      }
    }
    createSpan(text, cid) {
      let span = document.createElement("span");
      span.innerText = text;
      span.setAttribute(PHX_COMPONENT, cid);
      return span;
    }
  };
  var viewHookID = 1;
  var ViewHook = class {
    static makeID() {
      return viewHookID++;
    }
    static elementID(el) {
      return el.phxHookId;
    }
    constructor(view, el, callbacks) {
      this.__view = view;
      this.liveSocket = view.liveSocket;
      this.__callbacks = callbacks;
      this.__listeners = /* @__PURE__ */ new Set();
      this.__isDisconnected = false;
      this.el = el;
      this.el.phxHookId = this.constructor.makeID();
      for (let key in this.__callbacks) {
        this[key] = this.__callbacks[key];
      }
    }
    __mounted() {
      this.mounted && this.mounted();
    }
    __updated() {
      this.updated && this.updated();
    }
    __beforeUpdate() {
      this.beforeUpdate && this.beforeUpdate();
    }
    __destroyed() {
      this.destroyed && this.destroyed();
    }
    __reconnected() {
      if (this.__isDisconnected) {
        this.__isDisconnected = false;
        this.reconnected && this.reconnected();
      }
    }
    __disconnected() {
      this.__isDisconnected = true;
      this.disconnected && this.disconnected();
    }
    pushEvent(event, payload = {}, onReply = function() {
    }) {
      return this.__view.pushHookEvent(null, event, payload, onReply);
    }
    pushEventTo(phxTarget, event, payload = {}, onReply = function() {
    }) {
      return this.__view.withinTargets(phxTarget, (view, targetCtx) => {
        return view.pushHookEvent(targetCtx, event, payload, onReply);
      });
    }
    handleEvent(event, callback) {
      let callbackRef = (customEvent, bypass) => bypass ? event : callback(customEvent.detail);
      window.addEventListener(`phx:${event}`, callbackRef);
      this.__listeners.add(callbackRef);
      return callbackRef;
    }
    removeHandleEvent(callbackRef) {
      let event = callbackRef(null, true);
      window.removeEventListener(`phx:${event}`, callbackRef);
      this.__listeners.delete(callbackRef);
    }
    upload(name, files) {
      return this.__view.dispatchUploads(name, files);
    }
    uploadTo(phxTarget, name, files) {
      return this.__view.withinTargets(phxTarget, (view) => view.dispatchUploads(name, files));
    }
    __cleanup__() {
      this.__listeners.forEach((callbackRef) => this.removeHandleEvent(callbackRef));
    }
  };
  var focusStack = null;
  var JS = {
    exec(eventType, phxEvent, view, sourceEl, defaults) {
      let [defaultKind, defaultArgs] = defaults || [null, {}];
      let commands = phxEvent.charAt(0) === "[" ? JSON.parse(phxEvent) : [[defaultKind, defaultArgs]];
      commands.forEach(([kind, args]) => {
        if (kind === defaultKind && defaultArgs.data) {
          args.data = Object.assign(args.data || {}, defaultArgs.data);
        }
        this.filterToEls(sourceEl, args).forEach((el) => {
          this[`exec_${kind}`](eventType, phxEvent, view, sourceEl, el, args);
        });
      });
    },
    isVisible(el) {
      return !!(el.offsetWidth || el.offsetHeight || el.getClientRects().length > 0);
    },
    exec_dispatch(eventType, phxEvent, view, sourceEl, el, { to, event, detail, bubbles }) {
      detail = detail || {};
      detail.dispatcher = sourceEl;
      dom_default.dispatchEvent(el, event, { detail, bubbles });
    },
    exec_push(eventType, phxEvent, view, sourceEl, el, args) {
      if (!view.isConnected()) {
        return;
      }
      let { event, data, target, page_loading, loading, value, dispatcher } = args;
      let pushOpts = { loading, value, target, page_loading: !!page_loading };
      let targetSrc = eventType === "change" && dispatcher ? dispatcher : sourceEl;
      let phxTarget = target || targetSrc.getAttribute(view.binding("target")) || targetSrc;
      view.withinTargets(phxTarget, (targetView, targetCtx) => {
        if (eventType === "change") {
          let { newCid, _target, callback } = args;
          _target = _target || (dom_default.isFormInput(sourceEl) ? sourceEl.name : void 0);
          if (_target) {
            pushOpts._target = _target;
          }
          targetView.pushInput(sourceEl, targetCtx, newCid, event || phxEvent, pushOpts, callback);
        } else if (eventType === "submit") {
          let { submitter } = args;
          targetView.submitForm(sourceEl, targetCtx, event || phxEvent, submitter, pushOpts);
        } else {
          targetView.pushEvent(eventType, sourceEl, targetCtx, event || phxEvent, data, pushOpts);
        }
      });
    },
    exec_navigate(eventType, phxEvent, view, sourceEl, el, { href, replace }) {
      view.liveSocket.historyRedirect(href, replace ? "replace" : "push");
    },
    exec_patch(eventType, phxEvent, view, sourceEl, el, { href, replace }) {
      view.liveSocket.pushHistoryPatch(href, replace ? "replace" : "push", sourceEl);
    },
    exec_focus(eventType, phxEvent, view, sourceEl, el) {
      window.requestAnimationFrame(() => aria_default.attemptFocus(el));
    },
    exec_focus_first(eventType, phxEvent, view, sourceEl, el) {
      window.requestAnimationFrame(() => aria_default.focusFirstInteractive(el) || aria_default.focusFirst(el));
    },
    exec_push_focus(eventType, phxEvent, view, sourceEl, el) {
      window.requestAnimationFrame(() => focusStack = el || sourceEl);
    },
    exec_pop_focus(eventType, phxEvent, view, sourceEl, el) {
      window.requestAnimationFrame(() => {
        if (focusStack) {
          focusStack.focus();
        }
        focusStack = null;
      });
    },
    exec_add_class(eventType, phxEvent, view, sourceEl, el, { names, transition, time }) {
      this.addOrRemoveClasses(el, names, [], transition, time, view);
    },
    exec_remove_class(eventType, phxEvent, view, sourceEl, el, { names, transition, time }) {
      this.addOrRemoveClasses(el, [], names, transition, time, view);
    },
    exec_transition(eventType, phxEvent, view, sourceEl, el, { time, transition }) {
      this.addOrRemoveClasses(el, [], [], transition, time, view);
    },
    exec_toggle(eventType, phxEvent, view, sourceEl, el, { display, ins, outs, time }) {
      this.toggle(eventType, view, el, display, ins, outs, time);
    },
    exec_show(eventType, phxEvent, view, sourceEl, el, { display, transition, time }) {
      this.show(eventType, view, el, display, transition, time);
    },
    exec_hide(eventType, phxEvent, view, sourceEl, el, { display, transition, time }) {
      this.hide(eventType, view, el, display, transition, time);
    },
    exec_set_attr(eventType, phxEvent, view, sourceEl, el, { attr: [attr, val] }) {
      this.setOrRemoveAttrs(el, [[attr, val]], []);
    },
    exec_remove_attr(eventType, phxEvent, view, sourceEl, el, { attr }) {
      this.setOrRemoveAttrs(el, [], [attr]);
    },
    show(eventType, view, el, display, transition, time) {
      if (!this.isVisible(el)) {
        this.toggle(eventType, view, el, display, transition, null, time);
      }
    },
    hide(eventType, view, el, display, transition, time) {
      if (this.isVisible(el)) {
        this.toggle(eventType, view, el, display, null, transition, time);
      }
    },
    toggle(eventType, view, el, display, ins, outs, time) {
      let [inClasses, inStartClasses, inEndClasses] = ins || [[], [], []];
      let [outClasses, outStartClasses, outEndClasses] = outs || [[], [], []];
      if (inClasses.length > 0 || outClasses.length > 0) {
        if (this.isVisible(el)) {
          let onStart = () => {
            this.addOrRemoveClasses(el, outStartClasses, inClasses.concat(inStartClasses).concat(inEndClasses));
            window.requestAnimationFrame(() => {
              this.addOrRemoveClasses(el, outClasses, []);
              window.requestAnimationFrame(() => this.addOrRemoveClasses(el, outEndClasses, outStartClasses));
            });
          };
          el.dispatchEvent(new Event("phx:hide-start"));
          view.transition(time, onStart, () => {
            this.addOrRemoveClasses(el, [], outClasses.concat(outEndClasses));
            dom_default.putSticky(el, "toggle", (currentEl) => currentEl.style.display = "none");
            el.dispatchEvent(new Event("phx:hide-end"));
          });
        } else {
          if (eventType === "remove") {
            return;
          }
          let onStart = () => {
            this.addOrRemoveClasses(el, inStartClasses, outClasses.concat(outStartClasses).concat(outEndClasses));
            let stickyDisplay = display || this.defaultDisplay(el);
            dom_default.putSticky(el, "toggle", (currentEl) => currentEl.style.display = stickyDisplay);
            window.requestAnimationFrame(() => {
              this.addOrRemoveClasses(el, inClasses, []);
              window.requestAnimationFrame(() => this.addOrRemoveClasses(el, inEndClasses, inStartClasses));
            });
          };
          el.dispatchEvent(new Event("phx:show-start"));
          view.transition(time, onStart, () => {
            this.addOrRemoveClasses(el, [], inClasses.concat(inEndClasses));
            el.dispatchEvent(new Event("phx:show-end"));
          });
        }
      } else {
        if (this.isVisible(el)) {
          window.requestAnimationFrame(() => {
            el.dispatchEvent(new Event("phx:hide-start"));
            dom_default.putSticky(el, "toggle", (currentEl) => currentEl.style.display = "none");
            el.dispatchEvent(new Event("phx:hide-end"));
          });
        } else {
          window.requestAnimationFrame(() => {
            el.dispatchEvent(new Event("phx:show-start"));
            let stickyDisplay = display || this.defaultDisplay(el);
            dom_default.putSticky(el, "toggle", (currentEl) => currentEl.style.display = stickyDisplay);
            el.dispatchEvent(new Event("phx:show-end"));
          });
        }
      }
    },
    addOrRemoveClasses(el, adds, removes, transition, time, view) {
      let [transition_run, transition_start, transition_end] = transition || [[], [], []];
      if (transition_run.length > 0) {
        let onStart = () => this.addOrRemoveClasses(el, transition_start.concat(transition_run), []);
        let onDone = () => this.addOrRemoveClasses(el, adds.concat(transition_end), removes.concat(transition_run).concat(transition_start));
        return view.transition(time, onStart, onDone);
      }
      window.requestAnimationFrame(() => {
        let [prevAdds, prevRemoves] = dom_default.getSticky(el, "classes", [[], []]);
        let keepAdds = adds.filter((name) => prevAdds.indexOf(name) < 0 && !el.classList.contains(name));
        let keepRemoves = removes.filter((name) => prevRemoves.indexOf(name) < 0 && el.classList.contains(name));
        let newAdds = prevAdds.filter((name) => removes.indexOf(name) < 0).concat(keepAdds);
        let newRemoves = prevRemoves.filter((name) => adds.indexOf(name) < 0).concat(keepRemoves);
        dom_default.putSticky(el, "classes", (currentEl) => {
          currentEl.classList.remove(...newRemoves);
          currentEl.classList.add(...newAdds);
          return [newAdds, newRemoves];
        });
      });
    },
    setOrRemoveAttrs(el, sets, removes) {
      let [prevSets, prevRemoves] = dom_default.getSticky(el, "attrs", [[], []]);
      let alteredAttrs = sets.map(([attr, _val]) => attr).concat(removes);
      let newSets = prevSets.filter(([attr, _val]) => !alteredAttrs.includes(attr)).concat(sets);
      let newRemoves = prevRemoves.filter((attr) => !alteredAttrs.includes(attr)).concat(removes);
      dom_default.putSticky(el, "attrs", (currentEl) => {
        newRemoves.forEach((attr) => currentEl.removeAttribute(attr));
        newSets.forEach(([attr, val]) => currentEl.setAttribute(attr, val));
        return [newSets, newRemoves];
      });
    },
    hasAllClasses(el, classes) {
      return classes.every((name) => el.classList.contains(name));
    },
    isToggledOut(el, outClasses) {
      return !this.isVisible(el) || this.hasAllClasses(el, outClasses);
    },
    filterToEls(sourceEl, { to }) {
      return to ? dom_default.all(document, to) : [sourceEl];
    },
    defaultDisplay(el) {
      return { tr: "table-row", td: "table-cell" }[el.tagName.toLowerCase()] || "block";
    }
  };
  var js_default = JS;
  var serializeForm = (form, metadata, onlyNames = []) => {
    let _a = metadata, { submitter } = _a, meta = __objRest(_a, ["submitter"]);
    let formData = new FormData(form);
    if (submitter && submitter.form && submitter.form === form) {
      formData.append(submitter.name, submitter.value);
    }
    let toRemove = [];
    formData.forEach((val, key, _index) => {
      if (val instanceof File) {
        toRemove.push(key);
      }
    });
    toRemove.forEach((key) => formData.delete(key));
    let params = new URLSearchParams();
    for (let [key, val] of formData.entries()) {
      if (onlyNames.length === 0 || onlyNames.indexOf(key) >= 0) {
        params.append(key, val);
      }
    }
    for (let metaKey in meta) {
      params.append(metaKey, meta[metaKey]);
    }
    return params.toString();
  };
  var View = class {
    constructor(el, liveSocket2, parentView, flash, liveReferer) {
      this.isDead = false;
      this.liveSocket = liveSocket2;
      this.flash = flash;
      this.parent = parentView;
      this.root = parentView ? parentView.root : this;
      this.el = el;
      this.id = this.el.id;
      this.ref = 0;
      this.childJoins = 0;
      this.loaderTimer = null;
      this.pendingDiffs = [];
      this.pruningCIDs = [];
      this.redirect = false;
      this.href = null;
      this.joinCount = this.parent ? this.parent.joinCount - 1 : 0;
      this.joinPending = true;
      this.destroyed = false;
      this.joinCallback = function(onDone) {
        onDone && onDone();
      };
      this.stopCallback = function() {
      };
      this.pendingJoinOps = this.parent ? null : [];
      this.viewHooks = {};
      this.uploaders = {};
      this.formSubmits = [];
      this.children = this.parent ? null : {};
      this.root.children[this.id] = {};
      this.channel = this.liveSocket.channel(`lv:${this.id}`, () => {
        return {
          redirect: this.redirect ? this.href : void 0,
          url: this.redirect ? void 0 : this.href || void 0,
          params: this.connectParams(liveReferer),
          session: this.getSession(),
          static: this.getStatic(),
          flash: this.flash
        };
      });
    }
    setHref(href) {
      this.href = href;
    }
    setRedirect(href) {
      this.redirect = true;
      this.href = href;
    }
    isMain() {
      return this.el.hasAttribute(PHX_MAIN);
    }
    connectParams(liveReferer) {
      let params = this.liveSocket.params(this.el);
      let manifest = dom_default.all(document, `[${this.binding(PHX_TRACK_STATIC)}]`).map((node) => node.src || node.href).filter((url) => typeof url === "string");
      if (manifest.length > 0) {
        params["_track_static"] = manifest;
      }
      params["_mounts"] = this.joinCount;
      params["_live_referer"] = liveReferer;
      return params;
    }
    isConnected() {
      return this.channel.canPush();
    }
    getSession() {
      return this.el.getAttribute(PHX_SESSION);
    }
    getStatic() {
      let val = this.el.getAttribute(PHX_STATIC);
      return val === "" ? null : val;
    }
    destroy(callback = function() {
    }) {
      this.destroyAllChildren();
      this.destroyed = true;
      delete this.root.children[this.id];
      if (this.parent) {
        delete this.root.children[this.parent.id][this.id];
      }
      clearTimeout(this.loaderTimer);
      let onFinished = () => {
        callback();
        for (let id in this.viewHooks) {
          this.destroyHook(this.viewHooks[id]);
        }
      };
      dom_default.markPhxChildDestroyed(this.el);
      this.log("destroyed", () => ["the child has been removed from the parent"]);
      this.channel.leave().receive("ok", onFinished).receive("error", onFinished).receive("timeout", onFinished);
    }
    setContainerClasses(...classes) {
      this.el.classList.remove(PHX_CONNECTED_CLASS, PHX_DISCONNECTED_CLASS, PHX_ERROR_CLASS);
      this.el.classList.add(...classes);
    }
    showLoader(timeout) {
      clearTimeout(this.loaderTimer);
      if (timeout) {
        this.loaderTimer = setTimeout(() => this.showLoader(), timeout);
      } else {
        for (let id in this.viewHooks) {
          this.viewHooks[id].__disconnected();
        }
        this.setContainerClasses(PHX_DISCONNECTED_CLASS);
      }
    }
    execAll(binding) {
      dom_default.all(this.el, `[${binding}]`, (el) => this.liveSocket.execJS(el, el.getAttribute(binding)));
    }
    hideLoader() {
      clearTimeout(this.loaderTimer);
      this.setContainerClasses(PHX_CONNECTED_CLASS);
      this.execAll(this.binding("connected"));
    }
    triggerReconnected() {
      for (let id in this.viewHooks) {
        this.viewHooks[id].__reconnected();
      }
    }
    log(kind, msgCallback) {
      this.liveSocket.log(this, kind, msgCallback);
    }
    transition(time, onStart, onDone = function() {
    }) {
      this.liveSocket.transition(time, onStart, onDone);
    }
    withinTargets(phxTarget, callback) {
      if (phxTarget instanceof HTMLElement || phxTarget instanceof SVGElement) {
        return this.liveSocket.owner(phxTarget, (view) => callback(view, phxTarget));
      }
      if (isCid(phxTarget)) {
        let targets = dom_default.findComponentNodeList(this.el, phxTarget);
        if (targets.length === 0) {
          logError(`no component found matching phx-target of ${phxTarget}`);
        } else {
          callback(this, parseInt(phxTarget));
        }
      } else {
        let targets = Array.from(document.querySelectorAll(phxTarget));
        if (targets.length === 0) {
          logError(`nothing found matching the phx-target selector "${phxTarget}"`);
        }
        targets.forEach((target) => this.liveSocket.owner(target, (view) => callback(view, target)));
      }
    }
    applyDiff(type, rawDiff, callback) {
      this.log(type, () => ["", clone(rawDiff)]);
      let { diff, reply, events, title } = Rendered.extract(rawDiff);
      callback({ diff, reply, events });
      if (title) {
        window.requestAnimationFrame(() => dom_default.putTitle(title));
      }
    }
    onJoin(resp) {
      let { rendered, container } = resp;
      if (container) {
        let [tag, attrs] = container;
        this.el = dom_default.replaceRootContainer(this.el, tag, attrs);
      }
      this.childJoins = 0;
      this.joinPending = true;
      this.flash = null;
      browser_default.dropLocal(this.liveSocket.localStorage, window.location.pathname, CONSECUTIVE_RELOADS);
      this.applyDiff("mount", rendered, ({ diff, events }) => {
        this.rendered = new Rendered(this.id, diff);
        let [html, streams] = this.renderContainer(null, "join");
        this.dropPendingRefs();
        let forms = this.formsForRecovery(html);
        this.joinCount++;
        if (forms.length > 0) {
          forms.forEach(([form, newForm, newCid], i2) => {
            this.pushFormRecovery(form, newCid, (resp2) => {
              if (i2 === forms.length - 1) {
                this.onJoinComplete(resp2, html, streams, events);
              }
            });
          });
        } else {
          this.onJoinComplete(resp, html, streams, events);
        }
      });
    }
    dropPendingRefs() {
      dom_default.all(document, `[${PHX_REF_SRC}="${this.id}"][${PHX_REF}]`, (el) => {
        el.removeAttribute(PHX_REF);
        el.removeAttribute(PHX_REF_SRC);
      });
    }
    onJoinComplete({ live_patch }, html, streams, events) {
      if (this.joinCount > 1 || this.parent && !this.parent.isJoinPending()) {
        return this.applyJoinPatch(live_patch, html, streams, events);
      }
      let newChildren = dom_default.findPhxChildrenInFragment(html, this.id).filter((toEl) => {
        let fromEl = toEl.id && this.el.querySelector(`[id="${toEl.id}"]`);
        let phxStatic = fromEl && fromEl.getAttribute(PHX_STATIC);
        if (phxStatic) {
          toEl.setAttribute(PHX_STATIC, phxStatic);
        }
        return this.joinChild(toEl);
      });
      if (newChildren.length === 0) {
        if (this.parent) {
          this.root.pendingJoinOps.push([this, () => this.applyJoinPatch(live_patch, html, streams, events)]);
          this.parent.ackJoin(this);
        } else {
          this.onAllChildJoinsComplete();
          this.applyJoinPatch(live_patch, html, streams, events);
        }
      } else {
        this.root.pendingJoinOps.push([this, () => this.applyJoinPatch(live_patch, html, streams, events)]);
      }
    }
    attachTrueDocEl() {
      this.el = dom_default.byId(this.id);
      this.el.setAttribute(PHX_ROOT_ID, this.root.id);
    }
    execNewMounted() {
      dom_default.all(this.el, `[${this.binding(PHX_HOOK)}], [data-phx-${PHX_HOOK}]`, (hookEl) => {
        this.maybeAddNewHook(hookEl);
      });
      dom_default.all(this.el, `[${this.binding(PHX_MOUNTED)}]`, (el) => this.maybeMounted(el));
    }
    applyJoinPatch(live_patch, html, streams, events) {
      this.attachTrueDocEl();
      let patch = new DOMPatch(this, this.el, this.id, html, streams, null);
      patch.markPrunableContentForRemoval();
      this.performPatch(patch, false);
      this.joinNewChildren();
      this.execNewMounted();
      this.joinPending = false;
      this.liveSocket.dispatchEvents(events);
      this.applyPendingUpdates();
      if (live_patch) {
        let { kind, to } = live_patch;
        this.liveSocket.historyPatch(to, kind);
      }
      this.hideLoader();
      if (this.joinCount > 1) {
        this.triggerReconnected();
      }
      this.stopCallback();
    }
    triggerBeforeUpdateHook(fromEl, toEl) {
      this.liveSocket.triggerDOM("onBeforeElUpdated", [fromEl, toEl]);
      let hook = this.getHook(fromEl);
      let isIgnored = hook && dom_default.isIgnored(fromEl, this.binding(PHX_UPDATE));
      if (hook && !fromEl.isEqualNode(toEl) && !(isIgnored && isEqualObj(fromEl.dataset, toEl.dataset))) {
        hook.__beforeUpdate();
        return hook;
      }
    }
    maybeMounted(el) {
      let phxMounted = el.getAttribute(this.binding(PHX_MOUNTED));
      let hasBeenInvoked = phxMounted && dom_default.private(el, "mounted");
      if (phxMounted && !hasBeenInvoked) {
        this.liveSocket.execJS(el, phxMounted);
        dom_default.putPrivate(el, "mounted", true);
      }
    }
    maybeAddNewHook(el, force) {
      let newHook = this.addHook(el);
      if (newHook) {
        newHook.__mounted();
      }
    }
    performPatch(patch, pruneCids) {
      let removedEls = [];
      let phxChildrenAdded = false;
      let updatedHookIds = /* @__PURE__ */ new Set();
      patch.after("added", (el) => {
        this.liveSocket.triggerDOM("onNodeAdded", [el]);
        this.maybeAddNewHook(el);
        if (el.getAttribute) {
          this.maybeMounted(el);
        }
      });
      patch.after("phxChildAdded", (el) => {
        if (dom_default.isPhxSticky(el)) {
          this.liveSocket.joinRootViews();
        } else {
          phxChildrenAdded = true;
        }
      });
      patch.before("updated", (fromEl, toEl) => {
        let hook = this.triggerBeforeUpdateHook(fromEl, toEl);
        if (hook) {
          updatedHookIds.add(fromEl.id);
        }
      });
      patch.after("updated", (el) => {
        if (updatedHookIds.has(el.id)) {
          this.getHook(el).__updated();
        }
      });
      patch.after("discarded", (el) => {
        if (el.nodeType === Node.ELEMENT_NODE) {
          removedEls.push(el);
        }
      });
      patch.after("transitionsDiscarded", (els) => this.afterElementsRemoved(els, pruneCids));
      patch.perform();
      this.afterElementsRemoved(removedEls, pruneCids);
      return phxChildrenAdded;
    }
    afterElementsRemoved(elements, pruneCids) {
      let destroyedCIDs = [];
      elements.forEach((parent) => {
        let components = dom_default.all(parent, `[${PHX_COMPONENT}]`);
        let hooks = dom_default.all(parent, `[${this.binding(PHX_HOOK)}]`);
        components.concat(parent).forEach((el) => {
          let cid = this.componentID(el);
          if (isCid(cid) && destroyedCIDs.indexOf(cid) === -1) {
            destroyedCIDs.push(cid);
          }
        });
        hooks.concat(parent).forEach((hookEl) => {
          let hook = this.getHook(hookEl);
          hook && this.destroyHook(hook);
        });
      });
      if (pruneCids) {
        this.maybePushComponentsDestroyed(destroyedCIDs);
      }
    }
    joinNewChildren() {
      dom_default.findPhxChildren(this.el, this.id).forEach((el) => this.joinChild(el));
    }
    getChildById(id) {
      return this.root.children[this.id][id];
    }
    getDescendentByEl(el) {
      if (el.id === this.id) {
        return this;
      } else {
        return this.children[el.getAttribute(PHX_PARENT_ID)][el.id];
      }
    }
    destroyDescendent(id) {
      for (let parentId in this.root.children) {
        for (let childId in this.root.children[parentId]) {
          if (childId === id) {
            return this.root.children[parentId][childId].destroy();
          }
        }
      }
    }
    joinChild(el) {
      let child = this.getChildById(el.id);
      if (!child) {
        let view = new View(el, this.liveSocket, this);
        this.root.children[this.id][view.id] = view;
        view.join();
        this.childJoins++;
        return true;
      }
    }
    isJoinPending() {
      return this.joinPending;
    }
    ackJoin(_child) {
      this.childJoins--;
      if (this.childJoins === 0) {
        if (this.parent) {
          this.parent.ackJoin(this);
        } else {
          this.onAllChildJoinsComplete();
        }
      }
    }
    onAllChildJoinsComplete() {
      this.joinCallback(() => {
        this.pendingJoinOps.forEach(([view, op]) => {
          if (!view.isDestroyed()) {
            op();
          }
        });
        this.pendingJoinOps = [];
      });
    }
    update(diff, events) {
      if (this.isJoinPending() || this.liveSocket.hasPendingLink() && this.root.isMain()) {
        return this.pendingDiffs.push({ diff, events });
      }
      this.rendered.mergeDiff(diff);
      let phxChildrenAdded = false;
      if (this.rendered.isComponentOnlyDiff(diff)) {
        this.liveSocket.time("component patch complete", () => {
          let parentCids = dom_default.findParentCIDs(this.el, this.rendered.componentCIDs(diff));
          parentCids.forEach((parentCID) => {
            if (this.componentPatch(this.rendered.getComponent(diff, parentCID), parentCID)) {
              phxChildrenAdded = true;
            }
          });
        });
      } else if (!isEmpty(diff)) {
        this.liveSocket.time("full patch complete", () => {
          let [html, streams] = this.renderContainer(diff, "update");
          let patch = new DOMPatch(this, this.el, this.id, html, streams, null);
          phxChildrenAdded = this.performPatch(patch, true);
        });
      }
      this.liveSocket.dispatchEvents(events);
      if (phxChildrenAdded) {
        this.joinNewChildren();
      }
    }
    renderContainer(diff, kind) {
      return this.liveSocket.time(`toString diff (${kind})`, () => {
        let tag = this.el.tagName;
        let cids = diff ? this.rendered.componentCIDs(diff).concat(this.pruningCIDs) : null;
        let [html, streams] = this.rendered.toString(cids);
        return [`<${tag}>${html}</${tag}>`, streams];
      });
    }
    componentPatch(diff, cid) {
      if (isEmpty(diff))
        return false;
      let [html, streams] = this.rendered.componentToString(cid);
      let patch = new DOMPatch(this, this.el, this.id, html, streams, cid);
      let childrenAdded = this.performPatch(patch, true);
      return childrenAdded;
    }
    getHook(el) {
      return this.viewHooks[ViewHook.elementID(el)];
    }
    addHook(el) {
      if (ViewHook.elementID(el) || !el.getAttribute) {
        return;
      }
      let hookName = el.getAttribute(`data-phx-${PHX_HOOK}`) || el.getAttribute(this.binding(PHX_HOOK));
      if (hookName && !this.ownsElement(el)) {
        return;
      }
      let callbacks = this.liveSocket.getHookCallbacks(hookName);
      if (callbacks) {
        if (!el.id) {
          logError(`no DOM ID for hook "${hookName}". Hooks require a unique ID on each element.`, el);
        }
        let hook = new ViewHook(this, el, callbacks);
        this.viewHooks[ViewHook.elementID(hook.el)] = hook;
        return hook;
      } else if (hookName !== null) {
        logError(`unknown hook found for "${hookName}"`, el);
      }
    }
    destroyHook(hook) {
      hook.__destroyed();
      hook.__cleanup__();
      delete this.viewHooks[ViewHook.elementID(hook.el)];
    }
    applyPendingUpdates() {
      this.pendingDiffs.forEach(({ diff, events }) => this.update(diff, events));
      this.pendingDiffs = [];
      this.eachChild((child) => child.applyPendingUpdates());
    }
    eachChild(callback) {
      let children = this.root.children[this.id] || {};
      for (let id in children) {
        callback(this.getChildById(id));
      }
    }
    onChannel(event, cb) {
      this.liveSocket.onChannel(this.channel, event, (resp) => {
        if (this.isJoinPending()) {
          this.root.pendingJoinOps.push([this, () => cb(resp)]);
        } else {
          this.liveSocket.requestDOMUpdate(() => cb(resp));
        }
      });
    }
    bindChannel() {
      this.liveSocket.onChannel(this.channel, "diff", (rawDiff) => {
        this.liveSocket.requestDOMUpdate(() => {
          this.applyDiff("update", rawDiff, ({ diff, events }) => this.update(diff, events));
        });
      });
      this.onChannel("redirect", ({ to, flash }) => this.onRedirect({ to, flash }));
      this.onChannel("live_patch", (redir) => this.onLivePatch(redir));
      this.onChannel("live_redirect", (redir) => this.onLiveRedirect(redir));
      this.channel.onError((reason) => this.onError(reason));
      this.channel.onClose((reason) => this.onClose(reason));
    }
    destroyAllChildren() {
      this.eachChild((child) => child.destroy());
    }
    onLiveRedirect(redir) {
      let { to, kind, flash } = redir;
      let url = this.expandURL(to);
      this.liveSocket.historyRedirect(url, kind, flash);
    }
    onLivePatch(redir) {
      let { to, kind } = redir;
      this.href = this.expandURL(to);
      this.liveSocket.historyPatch(to, kind);
    }
    expandURL(to) {
      return to.startsWith("/") ? `${window.location.protocol}//${window.location.host}${to}` : to;
    }
    onRedirect({ to, flash }) {
      this.liveSocket.redirect(to, flash);
    }
    isDestroyed() {
      return this.destroyed;
    }
    joinDead() {
      this.isDead = true;
    }
    join(callback) {
      this.showLoader(this.liveSocket.loaderTimeout);
      this.bindChannel();
      if (this.isMain()) {
        this.stopCallback = this.liveSocket.withPageLoading({ to: this.href, kind: "initial" });
      }
      this.joinCallback = (onDone) => {
        onDone = onDone || function() {
        };
        callback ? callback(this.joinCount, onDone) : onDone();
      };
      this.liveSocket.wrapPush(this, { timeout: false }, () => {
        return this.channel.join().receive("ok", (data) => {
          if (!this.isDestroyed()) {
            this.liveSocket.requestDOMUpdate(() => this.onJoin(data));
          }
        }).receive("error", (resp) => !this.isDestroyed() && this.onJoinError(resp)).receive("timeout", () => !this.isDestroyed() && this.onJoinError({ reason: "timeout" }));
      });
    }
    onJoinError(resp) {
      if (resp.reason === "reload") {
        this.log("error", () => [`failed mount with ${resp.status}. Falling back to page request`, resp]);
        return this.onRedirect({ to: this.href });
      } else if (resp.reason === "unauthorized" || resp.reason === "stale") {
        this.log("error", () => ["unauthorized live_redirect. Falling back to page request", resp]);
        return this.onRedirect({ to: this.href });
      }
      if (resp.redirect || resp.live_redirect) {
        this.joinPending = false;
        this.channel.leave();
      }
      if (resp.redirect) {
        return this.onRedirect(resp.redirect);
      }
      if (resp.live_redirect) {
        return this.onLiveRedirect(resp.live_redirect);
      }
      this.log("error", () => ["unable to join", resp]);
      if (this.liveSocket.isConnected()) {
        this.liveSocket.reloadWithJitter(this);
      }
    }
    onClose(reason) {
      if (this.isDestroyed()) {
        return;
      }
      if (this.liveSocket.hasPendingLink() && reason !== "leave") {
        return this.liveSocket.reloadWithJitter(this);
      }
      this.destroyAllChildren();
      this.liveSocket.dropActiveElement(this);
      if (document.activeElement) {
        document.activeElement.blur();
      }
      if (this.liveSocket.isUnloaded()) {
        this.showLoader(BEFORE_UNLOAD_LOADER_TIMEOUT);
      }
    }
    onError(reason) {
      this.onClose(reason);
      if (this.liveSocket.isConnected()) {
        this.log("error", () => ["view crashed", reason]);
      }
      if (!this.liveSocket.isUnloaded()) {
        this.displayError();
      }
    }
    displayError() {
      if (this.isMain()) {
        dom_default.dispatchEvent(window, "phx:page-loading-start", { detail: { to: this.href, kind: "error" } });
      }
      this.showLoader();
      this.setContainerClasses(PHX_DISCONNECTED_CLASS, PHX_ERROR_CLASS);
      this.execAll(this.binding("disconnected"));
    }
    pushWithReply(refGenerator, event, payload, onReply = function() {
    }) {
      if (!this.isConnected()) {
        return;
      }
      let [ref, [el], opts] = refGenerator ? refGenerator() : [null, [], {}];
      let onLoadingDone = function() {
      };
      if (opts.page_loading || el && el.getAttribute(this.binding(PHX_PAGE_LOADING)) !== null) {
        onLoadingDone = this.liveSocket.withPageLoading({ kind: "element", target: el });
      }
      if (typeof payload.cid !== "number") {
        delete payload.cid;
      }
      return this.liveSocket.wrapPush(this, { timeout: true }, () => {
        return this.channel.push(event, payload, PUSH_TIMEOUT).receive("ok", (resp) => {
          let finish = (hookReply) => {
            if (resp.redirect) {
              this.onRedirect(resp.redirect);
            }
            if (resp.live_patch) {
              this.onLivePatch(resp.live_patch);
            }
            if (resp.live_redirect) {
              this.onLiveRedirect(resp.live_redirect);
            }
            if (ref !== null) {
              this.undoRefs(ref);
            }
            onLoadingDone();
            onReply(resp, hookReply);
          };
          if (resp.diff) {
            this.liveSocket.requestDOMUpdate(() => {
              this.applyDiff("update", resp.diff, ({ diff, reply, events }) => {
                this.update(diff, events);
                finish(reply);
              });
            });
          } else {
            finish(null);
          }
        });
      });
    }
    undoRefs(ref) {
      if (!this.isConnected()) {
        return;
      }
      dom_default.all(document, `[${PHX_REF_SRC}="${this.id}"][${PHX_REF}="${ref}"]`, (el) => {
        let disabledVal = el.getAttribute(PHX_DISABLED);
        el.removeAttribute(PHX_REF);
        el.removeAttribute(PHX_REF_SRC);
        if (el.getAttribute(PHX_READONLY) !== null) {
          el.readOnly = false;
          el.removeAttribute(PHX_READONLY);
        }
        if (disabledVal !== null) {
          el.disabled = disabledVal === "true" ? true : false;
          el.removeAttribute(PHX_DISABLED);
        }
        PHX_EVENT_CLASSES.forEach((className) => dom_default.removeClass(el, className));
        let disableRestore = el.getAttribute(PHX_DISABLE_WITH_RESTORE);
        if (disableRestore !== null) {
          el.innerText = disableRestore;
          el.removeAttribute(PHX_DISABLE_WITH_RESTORE);
        }
        let toEl = dom_default.private(el, PHX_REF);
        if (toEl) {
          let hook = this.triggerBeforeUpdateHook(el, toEl);
          DOMPatch.patchEl(el, toEl, this.liveSocket.getActiveElement());
          if (hook) {
            hook.__updated();
          }
          dom_default.deletePrivate(el, PHX_REF);
        }
      });
    }
    putRef(elements, event, opts = {}) {
      let newRef = this.ref++;
      let disableWith = this.binding(PHX_DISABLE_WITH);
      if (opts.loading) {
        elements = elements.concat(dom_default.all(document, opts.loading));
      }
      elements.forEach((el) => {
        el.classList.add(`phx-${event}-loading`);
        el.setAttribute(PHX_REF, newRef);
        el.setAttribute(PHX_REF_SRC, this.el.id);
        let disableText = el.getAttribute(disableWith);
        if (disableText !== null) {
          if (!el.getAttribute(PHX_DISABLE_WITH_RESTORE)) {
            el.setAttribute(PHX_DISABLE_WITH_RESTORE, el.innerText);
          }
          if (disableText !== "") {
            el.innerText = disableText;
          }
          el.setAttribute("disabled", "");
        }
      });
      return [newRef, elements, opts];
    }
    componentID(el) {
      let cid = el.getAttribute && el.getAttribute(PHX_COMPONENT);
      return cid ? parseInt(cid) : null;
    }
    targetComponentID(target, targetCtx, opts = {}) {
      if (isCid(targetCtx)) {
        return targetCtx;
      }
      let cidOrSelector = target.getAttribute(this.binding("target"));
      if (isCid(cidOrSelector)) {
        return parseInt(cidOrSelector);
      } else if (targetCtx && (cidOrSelector !== null || opts.target)) {
        return this.closestComponentID(targetCtx);
      } else {
        return null;
      }
    }
    closestComponentID(targetCtx) {
      if (isCid(targetCtx)) {
        return targetCtx;
      } else if (targetCtx) {
        return maybe(targetCtx.closest(`[${PHX_COMPONENT}]`), (el) => this.ownsElement(el) && this.componentID(el));
      } else {
        return null;
      }
    }
    pushHookEvent(targetCtx, event, payload, onReply) {
      if (!this.isConnected()) {
        this.log("hook", () => ["unable to push hook event. LiveView not connected", event, payload]);
        return false;
      }
      let [ref, els, opts] = this.putRef([], "hook");
      this.pushWithReply(() => [ref, els, opts], "event", {
        type: "hook",
        event,
        value: payload,
        cid: this.closestComponentID(targetCtx)
      }, (resp, reply) => onReply(reply, ref));
      return ref;
    }
    extractMeta(el, meta, value) {
      let prefix = this.binding("value-");
      for (let i2 = 0; i2 < el.attributes.length; i2++) {
        if (!meta) {
          meta = {};
        }
        let name = el.attributes[i2].name;
        if (name.startsWith(prefix)) {
          meta[name.replace(prefix, "")] = el.getAttribute(name);
        }
      }
      if (el.value !== void 0) {
        if (!meta) {
          meta = {};
        }
        meta.value = el.value;
        if (el.tagName === "INPUT" && CHECKABLE_INPUTS.indexOf(el.type) >= 0 && !el.checked) {
          delete meta.value;
        }
      }
      if (value) {
        if (!meta) {
          meta = {};
        }
        for (let key in value) {
          meta[key] = value[key];
        }
      }
      return meta;
    }
    pushEvent(type, el, targetCtx, phxEvent, meta, opts = {}) {
      this.pushWithReply(() => this.putRef([el], type, opts), "event", {
        type,
        event: phxEvent,
        value: this.extractMeta(el, meta, opts.value),
        cid: this.targetComponentID(el, targetCtx, opts)
      });
    }
    pushFileProgress(fileEl, entryRef, progress, onReply = function() {
    }) {
      this.liveSocket.withinOwners(fileEl.form, (view, targetCtx) => {
        view.pushWithReply(null, "progress", {
          event: fileEl.getAttribute(view.binding(PHX_PROGRESS)),
          ref: fileEl.getAttribute(PHX_UPLOAD_REF),
          entry_ref: entryRef,
          progress,
          cid: view.targetComponentID(fileEl.form, targetCtx)
        }, onReply);
      });
    }
    pushInput(inputEl, targetCtx, forceCid, phxEvent, opts, callback) {
      let uploads;
      let cid = isCid(forceCid) ? forceCid : this.targetComponentID(inputEl.form, targetCtx);
      let refGenerator = () => this.putRef([inputEl, inputEl.form], "change", opts);
      let formData;
      if (inputEl.getAttribute(this.binding("change"))) {
        formData = serializeForm(inputEl.form, { _target: opts._target }, [inputEl.name]);
      } else {
        formData = serializeForm(inputEl.form, { _target: opts._target });
      }
      if (dom_default.isUploadInput(inputEl) && inputEl.files && inputEl.files.length > 0) {
        LiveUploader.trackFiles(inputEl, Array.from(inputEl.files));
      }
      uploads = LiveUploader.serializeUploads(inputEl);
      let event = {
        type: "form",
        event: phxEvent,
        value: formData,
        uploads,
        cid
      };
      this.pushWithReply(refGenerator, "event", event, (resp) => {
        dom_default.showError(inputEl, this.liveSocket.binding(PHX_FEEDBACK_FOR));
        if (dom_default.isUploadInput(inputEl) && inputEl.getAttribute("data-phx-auto-upload") !== null) {
          if (LiveUploader.filesAwaitingPreflight(inputEl).length > 0) {
            let [ref, _els] = refGenerator();
            this.uploadFiles(inputEl.form, targetCtx, ref, cid, (_uploads) => {
              callback && callback(resp);
              this.triggerAwaitingSubmit(inputEl.form);
            });
          }
        } else {
          callback && callback(resp);
        }
      });
    }
    triggerAwaitingSubmit(formEl) {
      let awaitingSubmit = this.getScheduledSubmit(formEl);
      if (awaitingSubmit) {
        let [_el, _ref, _opts, callback] = awaitingSubmit;
        this.cancelSubmit(formEl);
        callback();
      }
    }
    getScheduledSubmit(formEl) {
      return this.formSubmits.find(([el, _ref, _opts, _callback]) => el.isSameNode(formEl));
    }
    scheduleSubmit(formEl, ref, opts, callback) {
      if (this.getScheduledSubmit(formEl)) {
        return true;
      }
      this.formSubmits.push([formEl, ref, opts, callback]);
    }
    cancelSubmit(formEl) {
      this.formSubmits = this.formSubmits.filter(([el, ref, _callback]) => {
        if (el.isSameNode(formEl)) {
          this.undoRefs(ref);
          return false;
        } else {
          return true;
        }
      });
    }
    disableForm(formEl, opts = {}) {
      let filterIgnored = (el) => {
        let userIgnored = closestPhxBinding(el, `${this.binding(PHX_UPDATE)}=ignore`, el.form);
        return !(userIgnored || closestPhxBinding(el, "data-phx-update=ignore", el.form));
      };
      let filterDisables = (el) => {
        return el.hasAttribute(this.binding(PHX_DISABLE_WITH));
      };
      let filterButton = (el) => el.tagName == "BUTTON";
      let filterInput = (el) => ["INPUT", "TEXTAREA", "SELECT"].includes(el.tagName);
      let formElements = Array.from(formEl.elements);
      let disables = formElements.filter(filterDisables);
      let buttons = formElements.filter(filterButton).filter(filterIgnored);
      let inputs = formElements.filter(filterInput).filter(filterIgnored);
      buttons.forEach((button) => {
        button.setAttribute(PHX_DISABLED, button.disabled);
        button.disabled = true;
      });
      inputs.forEach((input) => {
        input.setAttribute(PHX_READONLY, input.readOnly);
        input.readOnly = true;
        if (input.files) {
          input.setAttribute(PHX_DISABLED, input.disabled);
          input.disabled = true;
        }
      });
      formEl.setAttribute(this.binding(PHX_PAGE_LOADING), "");
      return this.putRef([formEl].concat(disables).concat(buttons).concat(inputs), "submit", opts);
    }
    pushFormSubmit(formEl, targetCtx, phxEvent, submitter, opts, onReply) {
      let refGenerator = () => this.disableForm(formEl, opts);
      let cid = this.targetComponentID(formEl, targetCtx);
      if (LiveUploader.hasUploadsInProgress(formEl)) {
        let [ref, _els] = refGenerator();
        let push = () => this.pushFormSubmit(formEl, submitter, targetCtx, phxEvent, opts, onReply);
        return this.scheduleSubmit(formEl, ref, opts, push);
      } else if (LiveUploader.inputsAwaitingPreflight(formEl).length > 0) {
        let [ref, els] = refGenerator();
        let proxyRefGen = () => [ref, els, opts];
        this.uploadFiles(formEl, targetCtx, ref, cid, (_uploads) => {
          let formData = serializeForm(formEl, { submitter });
          this.pushWithReply(proxyRefGen, "event", {
            type: "form",
            event: phxEvent,
            value: formData,
            cid
          }, onReply);
        });
      } else {
        let formData = serializeForm(formEl, { submitter });
        this.pushWithReply(refGenerator, "event", {
          type: "form",
          event: phxEvent,
          value: formData,
          cid
        }, onReply);
      }
    }
    uploadFiles(formEl, targetCtx, ref, cid, onComplete) {
      let joinCountAtUpload = this.joinCount;
      let inputEls = LiveUploader.activeFileInputs(formEl);
      let numFileInputsInProgress = inputEls.length;
      inputEls.forEach((inputEl) => {
        let uploader = new LiveUploader(inputEl, this, () => {
          numFileInputsInProgress--;
          if (numFileInputsInProgress === 0) {
            onComplete();
          }
        });
        this.uploaders[inputEl] = uploader;
        let entries = uploader.entries().map((entry) => entry.toPreflightPayload());
        let payload = {
          ref: inputEl.getAttribute(PHX_UPLOAD_REF),
          entries,
          cid: this.targetComponentID(inputEl.form, targetCtx)
        };
        this.log("upload", () => ["sending preflight request", payload]);
        this.pushWithReply(null, "allow_upload", payload, (resp) => {
          this.log("upload", () => ["got preflight response", resp]);
          if (resp.error) {
            this.undoRefs(ref);
            let [entry_ref, reason] = resp.error;
            this.log("upload", () => [`error for entry ${entry_ref}`, reason]);
          } else {
            let onError = (callback) => {
              this.channel.onError(() => {
                if (this.joinCount === joinCountAtUpload) {
                  callback();
                }
              });
            };
            uploader.initAdapterUpload(resp, onError, this.liveSocket);
          }
        });
      });
    }
    dispatchUploads(name, filesOrBlobs) {
      let inputs = dom_default.findUploadInputs(this.el).filter((el) => el.name === name);
      if (inputs.length === 0) {
        logError(`no live file inputs found matching the name "${name}"`);
      } else if (inputs.length > 1) {
        logError(`duplicate live file inputs found matching the name "${name}"`);
      } else {
        dom_default.dispatchEvent(inputs[0], PHX_TRACK_UPLOADS, { detail: { files: filesOrBlobs } });
      }
    }
    pushFormRecovery(form, newCid, callback) {
      this.liveSocket.withinOwners(form, (view, targetCtx) => {
        let input = Array.from(form.elements).find((el) => {
          return dom_default.isFormInput(el) && el.type !== "hidden" && !el.hasAttribute(this.binding("change"));
        });
        let phxEvent = form.getAttribute(this.binding(PHX_AUTO_RECOVER)) || form.getAttribute(this.binding("change"));
        js_default.exec("change", phxEvent, view, input, ["push", { _target: input.name, newCid, callback }]);
      });
    }
    pushLinkPatch(href, targetEl, callback) {
      let linkRef = this.liveSocket.setPendingLink(href);
      let refGen = targetEl ? () => this.putRef([targetEl], "click") : null;
      let fallback = () => this.liveSocket.redirect(window.location.href);
      let push = this.pushWithReply(refGen, "live_patch", { url: href }, (resp) => {
        this.liveSocket.requestDOMUpdate(() => {
          if (resp.link_redirect) {
            this.liveSocket.replaceMain(href, null, callback, linkRef);
          } else {
            if (this.liveSocket.commitPendingLink(linkRef)) {
              this.href = href;
            }
            this.applyPendingUpdates();
            callback && callback(linkRef);
          }
        });
      });
      if (push) {
        push.receive("timeout", fallback);
      } else {
        fallback();
      }
    }
    formsForRecovery(html) {
      if (this.joinCount === 0) {
        return [];
      }
      let phxChange = this.binding("change");
      let template = document.createElement("template");
      template.innerHTML = html;
      return dom_default.all(this.el, `form[${phxChange}]`).filter((form) => form.id && this.ownsElement(form)).filter((form) => form.elements.length > 0).filter((form) => form.getAttribute(this.binding(PHX_AUTO_RECOVER)) !== "ignore").map((form) => {
        let newForm = template.content.querySelector(`form[id="${form.id}"][${phxChange}="${form.getAttribute(phxChange)}"]`);
        if (newForm) {
          return [form, newForm, this.targetComponentID(newForm)];
        } else {
          return [form, null, null];
        }
      }).filter(([form, newForm, newCid]) => newForm);
    }
    maybePushComponentsDestroyed(destroyedCIDs) {
      let willDestroyCIDs = destroyedCIDs.filter((cid) => {
        return dom_default.findComponentNodeList(this.el, cid).length === 0;
      });
      if (willDestroyCIDs.length > 0) {
        this.pruningCIDs.push(...willDestroyCIDs);
        this.pushWithReply(null, "cids_will_destroy", { cids: willDestroyCIDs }, () => {
          this.pruningCIDs = this.pruningCIDs.filter((cid) => willDestroyCIDs.indexOf(cid) !== -1);
          let completelyDestroyCIDs = willDestroyCIDs.filter((cid) => {
            return dom_default.findComponentNodeList(this.el, cid).length === 0;
          });
          if (completelyDestroyCIDs.length > 0) {
            this.pushWithReply(null, "cids_destroyed", { cids: completelyDestroyCIDs }, (resp) => {
              this.rendered.pruneCIDs(resp.cids);
            });
          }
        });
      }
    }
    ownsElement(el) {
      let parentViewEl = el.closest(PHX_VIEW_SELECTOR);
      return el.getAttribute(PHX_PARENT_ID) === this.id || parentViewEl && parentViewEl.id === this.id || !parentViewEl && this.isDead;
    }
    submitForm(form, targetCtx, phxEvent, submitter, opts = {}) {
      dom_default.putPrivate(form, PHX_HAS_SUBMITTED, true);
      let phxFeedback = this.liveSocket.binding(PHX_FEEDBACK_FOR);
      let inputs = Array.from(form.elements);
      inputs.forEach((input) => dom_default.putPrivate(input, PHX_HAS_SUBMITTED, true));
      this.liveSocket.blurActiveElement(this);
      this.pushFormSubmit(form, targetCtx, phxEvent, submitter, opts, () => {
        inputs.forEach((input) => dom_default.showError(input, phxFeedback));
        this.liveSocket.restorePreviouslyActiveFocus();
      });
    }
    binding(kind) {
      return this.liveSocket.binding(kind);
    }
  };
  var LiveSocket = class {
    constructor(url, phxSocket, opts = {}) {
      this.unloaded = false;
      if (!phxSocket || phxSocket.constructor.name === "Object") {
        throw new Error(`
      a phoenix Socket must be provided as the second argument to the LiveSocket constructor. For example:

          import {Socket} from "phoenix"
          import {LiveSocket} from "phoenix_live_view"
          let liveSocket = new LiveSocket("/live", Socket, {...})
      `);
      }
      this.socket = new phxSocket(url, opts);
      this.bindingPrefix = opts.bindingPrefix || BINDING_PREFIX;
      this.opts = opts;
      this.params = closure2(opts.params || {});
      this.viewLogger = opts.viewLogger;
      this.metadataCallbacks = opts.metadata || {};
      this.defaults = Object.assign(clone(DEFAULTS), opts.defaults || {});
      this.activeElement = null;
      this.prevActive = null;
      this.silenced = false;
      this.main = null;
      this.outgoingMainEl = null;
      this.clickStartedAtTarget = null;
      this.linkRef = 1;
      this.roots = {};
      this.href = window.location.href;
      this.pendingLink = null;
      this.currentLocation = clone(window.location);
      this.hooks = opts.hooks || {};
      this.uploaders = opts.uploaders || {};
      this.loaderTimeout = opts.loaderTimeout || LOADER_TIMEOUT;
      this.reloadWithJitterTimer = null;
      this.maxReloads = opts.maxReloads || MAX_RELOADS;
      this.reloadJitterMin = opts.reloadJitterMin || RELOAD_JITTER_MIN;
      this.reloadJitterMax = opts.reloadJitterMax || RELOAD_JITTER_MAX;
      this.failsafeJitter = opts.failsafeJitter || FAILSAFE_JITTER;
      this.localStorage = opts.localStorage || window.localStorage;
      this.sessionStorage = opts.sessionStorage || window.sessionStorage;
      this.boundTopLevelEvents = false;
      this.domCallbacks = Object.assign({ onNodeAdded: closure2(), onBeforeElUpdated: closure2() }, opts.dom || {});
      this.transitions = new TransitionSet();
      window.addEventListener("pagehide", (_e2) => {
        this.unloaded = true;
      });
      this.socket.onOpen(() => {
        if (this.isUnloaded()) {
          window.location.reload();
        }
      });
    }
    isProfileEnabled() {
      return this.sessionStorage.getItem(PHX_LV_PROFILE) === "true";
    }
    isDebugEnabled() {
      return this.sessionStorage.getItem(PHX_LV_DEBUG) === "true";
    }
    isDebugDisabled() {
      return this.sessionStorage.getItem(PHX_LV_DEBUG) === "false";
    }
    enableDebug() {
      this.sessionStorage.setItem(PHX_LV_DEBUG, "true");
    }
    enableProfiling() {
      this.sessionStorage.setItem(PHX_LV_PROFILE, "true");
    }
    disableDebug() {
      this.sessionStorage.setItem(PHX_LV_DEBUG, "false");
    }
    disableProfiling() {
      this.sessionStorage.removeItem(PHX_LV_PROFILE);
    }
    enableLatencySim(upperBoundMs) {
      this.enableDebug();
      console.log("latency simulator enabled for the duration of this browser session. Call disableLatencySim() to disable");
      this.sessionStorage.setItem(PHX_LV_LATENCY_SIM, upperBoundMs);
    }
    disableLatencySim() {
      this.sessionStorage.removeItem(PHX_LV_LATENCY_SIM);
    }
    getLatencySim() {
      let str = this.sessionStorage.getItem(PHX_LV_LATENCY_SIM);
      return str ? parseInt(str) : null;
    }
    getSocket() {
      return this.socket;
    }
    connect() {
      if (window.location.hostname === "localhost" && !this.isDebugDisabled()) {
        this.enableDebug();
      }
      let doConnect = () => {
        if (this.joinRootViews()) {
          this.bindTopLevelEvents();
          this.socket.connect();
        } else if (this.main) {
          this.socket.connect();
        } else {
          this.bindTopLevelEvents({ dead: true });
        }
        this.joinDeadView();
      };
      if (["complete", "loaded", "interactive"].indexOf(document.readyState) >= 0) {
        doConnect();
      } else {
        document.addEventListener("DOMContentLoaded", () => doConnect());
      }
    }
    disconnect(callback) {
      clearTimeout(this.reloadWithJitterTimer);
      this.socket.disconnect(callback);
    }
    replaceTransport(transport) {
      clearTimeout(this.reloadWithJitterTimer);
      this.socket.replaceTransport(transport);
      this.connect();
    }
    execJS(el, encodedJS, eventType = null) {
      this.owner(el, (view) => js_default.exec(eventType, encodedJS, view, el));
    }
    unload() {
      if (this.unloaded) {
        return;
      }
      if (this.main && this.isConnected()) {
        this.log(this.main, "socket", () => ["disconnect for page nav"]);
      }
      this.unloaded = true;
      this.destroyAllViews();
      this.disconnect();
    }
    triggerDOM(kind, args) {
      this.domCallbacks[kind](...args);
    }
    time(name, func) {
      if (!this.isProfileEnabled() || !console.time) {
        return func();
      }
      console.time(name);
      let result = func();
      console.timeEnd(name);
      return result;
    }
    log(view, kind, msgCallback) {
      if (this.viewLogger) {
        let [msg, obj] = msgCallback();
        this.viewLogger(view, kind, msg, obj);
      } else if (this.isDebugEnabled()) {
        let [msg, obj] = msgCallback();
        debug(view, kind, msg, obj);
      }
    }
    requestDOMUpdate(callback) {
      this.transitions.after(callback);
    }
    transition(time, onStart, onDone = function() {
    }) {
      this.transitions.addTransition(time, onStart, onDone);
    }
    onChannel(channel, event, cb) {
      channel.on(event, (data) => {
        let latency = this.getLatencySim();
        if (!latency) {
          cb(data);
        } else {
          setTimeout(() => cb(data), latency);
        }
      });
    }
    wrapPush(view, opts, push) {
      let latency = this.getLatencySim();
      let oldJoinCount = view.joinCount;
      if (!latency) {
        if (this.isConnected() && opts.timeout) {
          return push().receive("timeout", () => {
            if (view.joinCount === oldJoinCount && !view.isDestroyed()) {
              this.reloadWithJitter(view, () => {
                this.log(view, "timeout", () => ["received timeout while communicating with server. Falling back to hard refresh for recovery"]);
              });
            }
          });
        } else {
          return push();
        }
      }
      let fakePush = {
        receives: [],
        receive(kind, cb) {
          this.receives.push([kind, cb]);
        }
      };
      setTimeout(() => {
        if (view.isDestroyed()) {
          return;
        }
        fakePush.receives.reduce((acc, [kind, cb]) => acc.receive(kind, cb), push());
      }, latency);
      return fakePush;
    }
    reloadWithJitter(view, log) {
      clearTimeout(this.reloadWithJitterTimer);
      this.disconnect();
      let minMs = this.reloadJitterMin;
      let maxMs = this.reloadJitterMax;
      let afterMs = Math.floor(Math.random() * (maxMs - minMs + 1)) + minMs;
      let tries = browser_default.updateLocal(this.localStorage, window.location.pathname, CONSECUTIVE_RELOADS, 0, (count) => count + 1);
      if (tries > this.maxReloads) {
        afterMs = this.failsafeJitter;
      }
      this.reloadWithJitterTimer = setTimeout(() => {
        if (view.isDestroyed() || view.isConnected()) {
          return;
        }
        view.destroy();
        log ? log() : this.log(view, "join", () => [`encountered ${tries} consecutive reloads`]);
        if (tries > this.maxReloads) {
          this.log(view, "join", () => [`exceeded ${this.maxReloads} consecutive reloads. Entering failsafe mode`]);
        }
        if (this.hasPendingLink()) {
          window.location = this.pendingLink;
        } else {
          window.location.reload();
        }
      }, afterMs);
    }
    getHookCallbacks(name) {
      return name && name.startsWith("Phoenix.") ? hooks_default[name.split(".")[1]] : this.hooks[name];
    }
    isUnloaded() {
      return this.unloaded;
    }
    isConnected() {
      return this.socket.isConnected();
    }
    getBindingPrefix() {
      return this.bindingPrefix;
    }
    binding(kind) {
      return `${this.getBindingPrefix()}${kind}`;
    }
    channel(topic, params) {
      return this.socket.channel(topic, params);
    }
    joinDeadView() {
      let body = document.body;
      if (body && !this.isPhxView(body) && !this.isPhxView(document.firstElementChild)) {
        let view = this.newRootView(body);
        view.setHref(this.getHref());
        view.joinDead();
        if (!this.main) {
          this.main = view;
        }
        window.requestAnimationFrame(() => view.execNewMounted());
      }
    }
    joinRootViews() {
      let rootsFound = false;
      dom_default.all(document, `${PHX_VIEW_SELECTOR}:not([${PHX_PARENT_ID}])`, (rootEl) => {
        if (!this.getRootById(rootEl.id)) {
          let view = this.newRootView(rootEl);
          view.setHref(this.getHref());
          view.join();
          if (rootEl.hasAttribute(PHX_MAIN)) {
            this.main = view;
          }
        }
        rootsFound = true;
      });
      return rootsFound;
    }
    redirect(to, flash) {
      this.unload();
      browser_default.redirect(to, flash);
    }
    replaceMain(href, flash, callback = null, linkRef = this.setPendingLink(href)) {
      let liveReferer = this.currentLocation.href;
      this.outgoingMainEl = this.outgoingMainEl || this.main.el;
      let newMainEl = dom_default.cloneNode(this.outgoingMainEl, "");
      this.main.showLoader(this.loaderTimeout);
      this.main.destroy();
      this.main = this.newRootView(newMainEl, flash, liveReferer);
      this.main.setRedirect(href);
      this.transitionRemoves();
      this.main.join((joinCount, onDone) => {
        if (joinCount === 1 && this.commitPendingLink(linkRef)) {
          this.requestDOMUpdate(() => {
            dom_default.findPhxSticky(document).forEach((el) => newMainEl.appendChild(el));
            this.outgoingMainEl.replaceWith(newMainEl);
            this.outgoingMainEl = null;
            callback && requestAnimationFrame(callback);
            onDone();
          });
        }
      });
    }
    transitionRemoves(elements) {
      let removeAttr = this.binding("remove");
      elements = elements || dom_default.all(document, `[${removeAttr}]`);
      elements.forEach((el) => {
        if (document.body.contains(el)) {
          this.execJS(el, el.getAttribute(removeAttr), "remove");
        }
      });
    }
    isPhxView(el) {
      return el.getAttribute && el.getAttribute(PHX_SESSION) !== null;
    }
    newRootView(el, flash, liveReferer) {
      let view = new View(el, this, null, flash, liveReferer);
      this.roots[view.id] = view;
      return view;
    }
    owner(childEl, callback) {
      let view = maybe(childEl.closest(PHX_VIEW_SELECTOR), (el) => this.getViewByEl(el)) || this.main;
      if (view) {
        callback(view);
      }
    }
    withinOwners(childEl, callback) {
      this.owner(childEl, (view) => callback(view, childEl));
    }
    getViewByEl(el) {
      let rootId = el.getAttribute(PHX_ROOT_ID);
      return maybe(this.getRootById(rootId), (root) => root.getDescendentByEl(el));
    }
    getRootById(id) {
      return this.roots[id];
    }
    destroyAllViews() {
      for (let id in this.roots) {
        this.roots[id].destroy();
        delete this.roots[id];
      }
      this.main = null;
    }
    destroyViewByEl(el) {
      let root = this.getRootById(el.getAttribute(PHX_ROOT_ID));
      if (root && root.id === el.id) {
        root.destroy();
        delete this.roots[root.id];
      } else if (root) {
        root.destroyDescendent(el.id);
      }
    }
    setActiveElement(target) {
      if (this.activeElement === target) {
        return;
      }
      this.activeElement = target;
      let cancel = () => {
        if (target === this.activeElement) {
          this.activeElement = null;
        }
        target.removeEventListener("mouseup", this);
        target.removeEventListener("touchend", this);
      };
      target.addEventListener("mouseup", cancel);
      target.addEventListener("touchend", cancel);
    }
    getActiveElement() {
      if (document.activeElement === document.body) {
        return this.activeElement || document.activeElement;
      } else {
        return document.activeElement || document.body;
      }
    }
    dropActiveElement(view) {
      if (this.prevActive && view.ownsElement(this.prevActive)) {
        this.prevActive = null;
      }
    }
    restorePreviouslyActiveFocus() {
      if (this.prevActive && this.prevActive !== document.body) {
        this.prevActive.focus();
      }
    }
    blurActiveElement() {
      this.prevActive = this.getActiveElement();
      if (this.prevActive !== document.body) {
        this.prevActive.blur();
      }
    }
    bindTopLevelEvents({ dead } = {}) {
      if (this.boundTopLevelEvents) {
        return;
      }
      this.boundTopLevelEvents = true;
      this.socket.onClose((event) => {
        if (event && event.code === 1001) {
          return this.unload();
        }
        if (event && event.code === 1e3 && this.main) {
          return this.reloadWithJitter(this.main);
        }
      });
      document.body.addEventListener("click", function() {
      });
      window.addEventListener("pageshow", (e5) => {
        if (e5.persisted) {
          this.getSocket().disconnect();
          this.withPageLoading({ to: window.location.href, kind: "redirect" });
          window.location.reload();
        }
      }, true);
      if (!dead) {
        this.bindNav();
      }
      this.bindClicks();
      if (!dead) {
        this.bindForms();
      }
      this.bind({ keyup: "keyup", keydown: "keydown" }, (e5, type, view, targetEl, phxEvent, eventTarget) => {
        let matchKey = targetEl.getAttribute(this.binding(PHX_KEY));
        let pressedKey = e5.key && e5.key.toLowerCase();
        if (matchKey && matchKey.toLowerCase() !== pressedKey) {
          return;
        }
        let data = __spreadValues({ key: e5.key }, this.eventMeta(type, e5, targetEl));
        js_default.exec(type, phxEvent, view, targetEl, ["push", { data }]);
      });
      this.bind({ blur: "focusout", focus: "focusin" }, (e5, type, view, targetEl, phxEvent, eventTarget) => {
        if (!eventTarget) {
          let data = __spreadValues({ key: e5.key }, this.eventMeta(type, e5, targetEl));
          js_default.exec(type, phxEvent, view, targetEl, ["push", { data }]);
        }
      });
      this.bind({ blur: "blur", focus: "focus" }, (e5, type, view, targetEl, targetCtx, phxEvent, phxTarget) => {
        if (phxTarget === "window") {
          let data = this.eventMeta(type, e5, targetEl);
          js_default.exec(type, phxEvent, view, targetEl, ["push", { data }]);
        }
      });
      window.addEventListener("dragover", (e5) => e5.preventDefault());
      window.addEventListener("drop", (e5) => {
        e5.preventDefault();
        let dropTargetId = maybe(closestPhxBinding(e5.target, this.binding(PHX_DROP_TARGET)), (trueTarget) => {
          return trueTarget.getAttribute(this.binding(PHX_DROP_TARGET));
        });
        let dropTarget = dropTargetId && document.getElementById(dropTargetId);
        let files = Array.from(e5.dataTransfer.files || []);
        if (!dropTarget || dropTarget.disabled || files.length === 0 || !(dropTarget.files instanceof FileList)) {
          return;
        }
        LiveUploader.trackFiles(dropTarget, files, e5.dataTransfer);
        dropTarget.dispatchEvent(new Event("input", { bubbles: true }));
      });
      this.on(PHX_TRACK_UPLOADS, (e5) => {
        let uploadTarget = e5.target;
        if (!dom_default.isUploadInput(uploadTarget)) {
          return;
        }
        let files = Array.from(e5.detail.files || []).filter((f2) => f2 instanceof File || f2 instanceof Blob);
        LiveUploader.trackFiles(uploadTarget, files);
        uploadTarget.dispatchEvent(new Event("input", { bubbles: true }));
      });
    }
    eventMeta(eventName, e5, targetEl) {
      let callback = this.metadataCallbacks[eventName];
      return callback ? callback(e5, targetEl) : {};
    }
    setPendingLink(href) {
      this.linkRef++;
      this.pendingLink = href;
      return this.linkRef;
    }
    commitPendingLink(linkRef) {
      if (this.linkRef !== linkRef) {
        return false;
      } else {
        this.href = this.pendingLink;
        this.pendingLink = null;
        return true;
      }
    }
    getHref() {
      return this.href;
    }
    hasPendingLink() {
      return !!this.pendingLink;
    }
    bind(events, callback) {
      for (let event in events) {
        let browserEventName = events[event];
        this.on(browserEventName, (e5) => {
          let binding = this.binding(event);
          let windowBinding = this.binding(`window-${event}`);
          let targetPhxEvent = e5.target.getAttribute && e5.target.getAttribute(binding);
          if (targetPhxEvent) {
            this.debounce(e5.target, e5, browserEventName, () => {
              this.withinOwners(e5.target, (view) => {
                callback(e5, event, view, e5.target, targetPhxEvent, null);
              });
            });
          } else {
            dom_default.all(document, `[${windowBinding}]`, (el) => {
              let phxEvent = el.getAttribute(windowBinding);
              this.debounce(el, e5, browserEventName, () => {
                this.withinOwners(el, (view) => {
                  callback(e5, event, view, el, phxEvent, "window");
                });
              });
            });
          }
        });
      }
    }
    bindClicks() {
      window.addEventListener("click", (e5) => this.clickStartedAtTarget = e5.target);
      this.bindClick("click", "click", false);
      this.bindClick("mousedown", "capture-click", true);
    }
    bindClick(eventName, bindingName, capture) {
      let click = this.binding(bindingName);
      window.addEventListener(eventName, (e5) => {
        let target = null;
        if (capture) {
          target = e5.target.matches(`[${click}]`) ? e5.target : e5.target.querySelector(`[${click}]`);
        } else {
          let clickStartedAtTarget = this.clickStartedAtTarget || e5.target;
          target = closestPhxBinding(clickStartedAtTarget, click);
          this.dispatchClickAway(e5, clickStartedAtTarget);
          this.clickStartedAtTarget = null;
        }
        let phxEvent = target && target.getAttribute(click);
        if (!phxEvent) {
          let href = e5.target instanceof HTMLAnchorElement ? e5.target.getAttribute("href") : null;
          if (!capture && href !== null && !dom_default.wantsNewTab(e5) && dom_default.isNewPageHref(href, window.location)) {
            this.unload();
          }
          return;
        }
        if (target.getAttribute("href") === "#") {
          e5.preventDefault();
        }
        this.debounce(target, e5, "click", () => {
          this.withinOwners(target, (view) => {
            js_default.exec("click", phxEvent, view, target, ["push", { data: this.eventMeta("click", e5, target) }]);
          });
        });
      }, capture);
    }
    dispatchClickAway(e5, clickStartedAt) {
      let phxClickAway = this.binding("click-away");
      dom_default.all(document, `[${phxClickAway}]`, (el) => {
        if (!(el.isSameNode(clickStartedAt) || el.contains(clickStartedAt))) {
          this.withinOwners(e5.target, (view) => {
            let phxEvent = el.getAttribute(phxClickAway);
            if (js_default.isVisible(el)) {
              js_default.exec("click", phxEvent, view, el, ["push", { data: this.eventMeta("click", e5, e5.target) }]);
            }
          });
        }
      });
    }
    bindNav() {
      if (!browser_default.canPushState()) {
        return;
      }
      if (history.scrollRestoration) {
        history.scrollRestoration = "manual";
      }
      let scrollTimer = null;
      window.addEventListener("scroll", (_e2) => {
        clearTimeout(scrollTimer);
        scrollTimer = setTimeout(() => {
          browser_default.updateCurrentState((state) => Object.assign(state, { scroll: window.scrollY }));
        }, 100);
      });
      window.addEventListener("popstate", (event) => {
        if (!this.registerNewLocation(window.location)) {
          return;
        }
        let { type, id, root, scroll } = event.state || {};
        let href = window.location.href;
        this.requestDOMUpdate(() => {
          if (this.main.isConnected() && (type === "patch" && id === this.main.id)) {
            this.main.pushLinkPatch(href, null, () => {
              this.maybeScroll(scroll);
            });
          } else {
            this.replaceMain(href, null, () => {
              if (root) {
                this.replaceRootHistory();
              }
              this.maybeScroll(scroll);
            });
          }
        });
      }, false);
      window.addEventListener("click", (e5) => {
        let target = closestPhxBinding(e5.target, PHX_LIVE_LINK);
        let type = target && target.getAttribute(PHX_LIVE_LINK);
        if (!type || !this.isConnected() || !this.main || dom_default.wantsNewTab(e5)) {
          return;
        }
        let href = target.href;
        let linkState = target.getAttribute(PHX_LINK_STATE);
        e5.preventDefault();
        e5.stopImmediatePropagation();
        if (this.pendingLink === href) {
          return;
        }
        this.requestDOMUpdate(() => {
          if (type === "patch") {
            this.pushHistoryPatch(href, linkState, target);
          } else if (type === "redirect") {
            this.historyRedirect(href, linkState);
          } else {
            throw new Error(`expected ${PHX_LIVE_LINK} to be "patch" or "redirect", got: ${type}`);
          }
          let phxClick = target.getAttribute(this.binding("click"));
          if (phxClick) {
            this.requestDOMUpdate(() => this.execJS(target, phxClick, "click"));
          }
        });
      }, false);
    }
    maybeScroll(scroll) {
      if (typeof scroll === "number") {
        requestAnimationFrame(() => {
          window.scrollTo(0, scroll);
        });
      }
    }
    dispatchEvent(event, payload = {}) {
      dom_default.dispatchEvent(window, `phx:${event}`, { detail: payload });
    }
    dispatchEvents(events) {
      events.forEach(([event, payload]) => this.dispatchEvent(event, payload));
    }
    withPageLoading(info, callback) {
      dom_default.dispatchEvent(window, "phx:page-loading-start", { detail: info });
      let done = () => dom_default.dispatchEvent(window, "phx:page-loading-stop", { detail: info });
      return callback ? callback(done) : done;
    }
    pushHistoryPatch(href, linkState, targetEl) {
      if (!this.isConnected()) {
        return browser_default.redirect(href);
      }
      this.withPageLoading({ to: href, kind: "patch" }, (done) => {
        this.main.pushLinkPatch(href, targetEl, (linkRef) => {
          this.historyPatch(href, linkState, linkRef);
          done();
        });
      });
    }
    historyPatch(href, linkState, linkRef = this.setPendingLink(href)) {
      if (!this.commitPendingLink(linkRef)) {
        return;
      }
      browser_default.pushState(linkState, { type: "patch", id: this.main.id }, href);
      this.registerNewLocation(window.location);
    }
    historyRedirect(href, linkState, flash) {
      if (!this.isConnected()) {
        return browser_default.redirect(href, flash);
      }
      if (/^\/$|^\/[^\/]+.*$/.test(href)) {
        let { protocol, host } = window.location;
        href = `${protocol}//${host}${href}`;
      }
      let scroll = window.scrollY;
      this.withPageLoading({ to: href, kind: "redirect" }, (done) => {
        this.replaceMain(href, flash, () => {
          browser_default.pushState(linkState, { type: "redirect", id: this.main.id, scroll }, href);
          this.registerNewLocation(window.location);
          done();
        });
      });
    }
    replaceRootHistory() {
      browser_default.pushState("replace", { root: true, type: "patch", id: this.main.id });
    }
    registerNewLocation(newLocation) {
      let { pathname, search } = this.currentLocation;
      if (pathname + search === newLocation.pathname + newLocation.search) {
        return false;
      } else {
        this.currentLocation = clone(newLocation);
        return true;
      }
    }
    bindForms() {
      let iterations = 0;
      let externalFormSubmitted = false;
      this.on("submit", (e5) => {
        let phxSubmit = e5.target.getAttribute(this.binding("submit"));
        let phxChange = e5.target.getAttribute(this.binding("change"));
        if (!externalFormSubmitted && phxChange && !phxSubmit) {
          externalFormSubmitted = true;
          e5.preventDefault();
          this.withinOwners(e5.target, (view) => {
            view.disableForm(e5.target);
            window.requestAnimationFrame(() => {
              if (dom_default.isUnloadableFormSubmit(e5)) {
                this.unload();
              }
              e5.target.submit();
            });
          });
        }
      }, true);
      this.on("submit", (e5) => {
        let phxEvent = e5.target.getAttribute(this.binding("submit"));
        if (!phxEvent) {
          if (dom_default.isUnloadableFormSubmit(e5)) {
            this.unload();
          }
          return;
        }
        e5.preventDefault();
        e5.target.disabled = true;
        this.withinOwners(e5.target, (view) => {
          js_default.exec("submit", phxEvent, view, e5.target, ["push", { submitter: e5.submitter }]);
        });
      }, false);
      for (let type of ["change", "input"]) {
        this.on(type, (e5) => {
          let phxChange = this.binding("change");
          let input = e5.target;
          let inputEvent = input.getAttribute(phxChange);
          let formEvent = input.form && input.form.getAttribute(phxChange);
          let phxEvent = inputEvent || formEvent;
          if (!phxEvent) {
            return;
          }
          if (input.type === "number" && input.validity && input.validity.badInput) {
            return;
          }
          let dispatcher = inputEvent ? input : input.form;
          let currentIterations = iterations;
          iterations++;
          let { at: at2, type: lastType } = dom_default.private(input, "prev-iteration") || {};
          if (at2 === currentIterations - 1 && type !== lastType) {
            return;
          }
          dom_default.putPrivate(input, "prev-iteration", { at: currentIterations, type });
          this.debounce(input, e5, type, () => {
            this.withinOwners(dispatcher, (view) => {
              dom_default.putPrivate(input, PHX_HAS_FOCUSED, true);
              if (!dom_default.isTextualInput(input)) {
                this.setActiveElement(input);
              }
              js_default.exec("change", phxEvent, view, input, ["push", { _target: e5.target.name, dispatcher }]);
            });
          });
        }, false);
      }
      this.on("reset", (e5) => {
        let form = e5.target;
        dom_default.resetForm(form, this.binding(PHX_FEEDBACK_FOR));
        let input = Array.from(form.elements).find((el) => el.type === "reset");
        window.requestAnimationFrame(() => {
          input.dispatchEvent(new Event("input", { bubbles: true, cancelable: false }));
        });
      });
    }
    debounce(el, event, eventType, callback) {
      if (eventType === "blur" || eventType === "focusout") {
        return callback();
      }
      let phxDebounce = this.binding(PHX_DEBOUNCE);
      let phxThrottle = this.binding(PHX_THROTTLE);
      let defaultDebounce = this.defaults.debounce.toString();
      let defaultThrottle = this.defaults.throttle.toString();
      this.withinOwners(el, (view) => {
        let asyncFilter = () => !view.isDestroyed() && document.body.contains(el);
        dom_default.debounce(el, event, phxDebounce, defaultDebounce, phxThrottle, defaultThrottle, asyncFilter, () => {
          callback();
        });
      });
    }
    silenceEvents(callback) {
      this.silenced = true;
      callback();
      this.silenced = false;
    }
    on(event, callback) {
      window.addEventListener(event, (e5) => {
        if (!this.silenced) {
          callback(e5);
        }
      });
    }
  };
  var TransitionSet = class {
    constructor() {
      this.transitions = /* @__PURE__ */ new Set();
      this.pendingOps = [];
    }
    reset() {
      this.transitions.forEach((timer) => {
        clearTimeout(timer);
        this.transitions.delete(timer);
      });
      this.flushPendingOps();
    }
    after(callback) {
      if (this.size() === 0) {
        callback();
      } else {
        this.pushPendingOp(callback);
      }
    }
    addTransition(time, onStart, onDone) {
      onStart();
      let timer = setTimeout(() => {
        this.transitions.delete(timer);
        onDone();
        this.flushPendingOps();
      }, time);
      this.transitions.add(timer);
    }
    pushPendingOp(op) {
      this.pendingOps.push(op);
    }
    size() {
      return this.transitions.size;
    }
    flushPendingOps() {
      if (this.size() > 0) {
        return;
      }
      let op = this.pendingOps.shift();
      if (op) {
        op();
        this.flushPendingOps();
      }
    }
  };

  // js/app.js
  var import_topbar = __toESM(require_topbar());
  wr.init("phc_Byagoba6TS6UBZ4AAMOSY5NZpbaEUJltMKH9CsZkv4l", { api_host: "https://app.posthog.com" });
  var csrfToken = document.querySelector("meta[name='csrf-token']").getAttribute("content");
  var liveSocket = new LiveSocket("/live", Socket, { params: { _csrf_token: csrfToken } });
  var searchTimeout;
  document.addEventListener("input", function(event) {
    if (event.target.matches(".search-box-default")) {
      const searchQuery = event.target.value;
      clearTimeout(searchTimeout);
      searchTimeout = setTimeout(function() {
        wr.capture("used_search", { query: searchQuery });
      }, 5e3);
    }
  }, false);
  document.addEventListener("DOMContentLoaded", function() {
    setTimeout(function() {
      const surveyH1 = document.querySelector(".survey-h1");
      if (surveyH1) {
        surveyH1.classList.add("delayed-survey");
      }
    }, 12e4);
  });
  import_topbar.default.config({ barColors: { 0: "#29d" }, shadowColor: "rgba(0, 0, 0, .3)" });
  var topBarScheduled = void 0;
  window.addEventListener("phx:page-loading-start", () => {
    if (!topBarScheduled) {
      topBarScheduled = setTimeout(() => import_topbar.default.show(), 500);
    }
  });
  window.addEventListener("phx:page-loading-stop", () => {
    clearTimeout(topBarScheduled);
    topBarScheduled = void 0;
    import_topbar.default.hide();
  });
  liveSocket.connect();
  liveSocket.enableDebug();
  window.liveSocket = liveSocket;
})();
/**
 * @license MIT
 * topbar 1.0.0, 2021-01-06
 * https://buunguyen.github.io/topbar
 * Copyright (c) 2021 Buu Nguyen
 */
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vLi4vYXNzZXRzL3ZlbmRvci90b3BiYXIuanMiLCAiLi4vLi4vLi4vYXNzZXRzL2pzL2RhcmtfbW9kZS5qcyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1qcy9zcmMvY29uZmlnLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9wb3N0aG9nLWpzL3NyYy91dGlscy90eXBlLXV0aWxzLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9wb3N0aG9nLWpzL3NyYy91dGlscy9nbG9iYWxzLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9wb3N0aG9nLWpzL3NyYy91dGlscy9sb2dnZXIudHMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Bvc3Rob2ctanMvc3JjL3V0aWxzL2luZGV4LnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9wb3N0aG9nLWpzL3NyYy9hdXRvY2FwdHVyZS11dGlscy50cyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1qcy9zcmMvZXh0ZW5zaW9ucy9yYWdlY2xpY2sudHMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Bvc3Rob2ctanMvc3JjL2NvbnN0YW50cy50cyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1qcy9zcmMvYXV0b2NhcHR1cmUudHMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Bvc3Rob2ctanMvc3JjL3R5cGVzLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9wb3N0aG9nLWpzL3NyYy9wb3N0aG9nLWZlYXR1cmVmbGFncy50cyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1qcy9zcmMvdXVpZHY3LnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9wb3N0aG9nLWpzL3NyYy9zdG9yYWdlLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9wb3N0aG9nLWpzL3NyYy91dGlscy9yZXF1ZXN0LXV0aWxzLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9wb3N0aG9nLWpzL3NyYy91dGlscy91c2VyLWFnZW50LXV0aWxzLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9wb3N0aG9nLWpzL3NyYy91dGlscy9ldmVudC11dGlscy50cyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1qcy9zcmMvcG9zdGhvZy1wZXJzaXN0ZW5jZS50cyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1qcy9zcmMvZXh0ZW5zaW9ucy9yZXBsYXkvc2Vzc2lvbnJlY29yZGluZy11dGlscy50cyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1qcy9ub2RlX21vZHVsZXMvLnBucG0vQHJyd2ViK3R5cGVzQDIuMC4wLWFscGhhLjExL25vZGVfbW9kdWxlcy9AcnJ3ZWIvdHlwZXMvZGlzdC90eXBlcy5qcyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1qcy9zcmMvZXh0ZW5zaW9ucy9yZXBsYXkvY29uZmlnLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9wb3N0aG9nLWpzL3NyYy9nZHByLXV0aWxzLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9wb3N0aG9nLWpzL3NyYy9leHRlbnNpb25zL3JlcGxheS9zZXNzaW9ucmVjb3JkaW5nLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9wb3N0aG9nLWpzL3NyYy9kZWNpZGUudHMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Bvc3Rob2ctanMvc3JjL2V4dGVuc2lvbnMvdG9vbGJhci50cyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1qcy9zcmMvcmVxdWVzdC1xdWV1ZS50cyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1qcy9ub2RlX21vZHVsZXMvLnBucG0vZmZsYXRlQDAuNC44L25vZGVfbW9kdWxlcy9mZmxhdGUvZXNtL2Jyb3dzZXIuanMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Bvc3Rob2ctanMvc3JjL3JlcXVlc3QudHMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Bvc3Rob2ctanMvc3JjL3JldHJ5LXF1ZXVlLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9wb3N0aG9nLWpzL3NyYy91dGlscy9yZXF1ZXN0LXJvdXRlci50cyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1qcy9zcmMvc2Vzc2lvbmlkLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9wb3N0aG9nLWpzL3NyYy9leHRlbnNpb25zL3NlbnRyeS1pbnRlZ3JhdGlvbi50cyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1qcy9zcmMvcGFnZS12aWV3LnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9wb3N0aG9nLWpzL3NyYy9wb3N0aG9nLXN1cnZleXMudHMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Bvc3Rob2ctanMvc3JjL3JhdGUtbGltaXRlci50cyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1qcy9zcmMvc2Vzc2lvbi1wcm9wcy50cyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1qcy9zcmMvdXRpbHMvYmxvY2tlZC11YXMudHMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Bvc3Rob2ctanMvc3JjL3Bvc3Rob2ctY29yZS50cyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1qcy9zcmMvZXh0ZW5zaW9ucy9zZWdtZW50LWludGVncmF0aW9uLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9wb3N0aG9nLWpzL3NyYy9wb3N0aG9nLXN1cnZleXMtdHlwZXMudHMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Bvc3Rob2ctanMvc3JjL2xvYWRlci1tb2R1bGUudHMiLCAiLi4vLi4vLi4vZGVwcy9waG9lbml4X2h0bWwvcHJpdi9zdGF0aWMvcGhvZW5peF9odG1sLmpzIiwgIi4uLy4uLy4uL2RlcHMvcGhvZW5peC9hc3NldHMvanMvcGhvZW5peC91dGlscy5qcyIsICIuLi8uLi8uLi9kZXBzL3Bob2VuaXgvYXNzZXRzL2pzL3Bob2VuaXgvY29uc3RhbnRzLmpzIiwgIi4uLy4uLy4uL2RlcHMvcGhvZW5peC9hc3NldHMvanMvcGhvZW5peC9wdXNoLmpzIiwgIi4uLy4uLy4uL2RlcHMvcGhvZW5peC9hc3NldHMvanMvcGhvZW5peC90aW1lci5qcyIsICIuLi8uLi8uLi9kZXBzL3Bob2VuaXgvYXNzZXRzL2pzL3Bob2VuaXgvY2hhbm5lbC5qcyIsICIuLi8uLi8uLi9kZXBzL3Bob2VuaXgvYXNzZXRzL2pzL3Bob2VuaXgvYWpheC5qcyIsICIuLi8uLi8uLi9kZXBzL3Bob2VuaXgvYXNzZXRzL2pzL3Bob2VuaXgvbG9uZ3BvbGwuanMiLCAiLi4vLi4vLi4vZGVwcy9waG9lbml4L2Fzc2V0cy9qcy9waG9lbml4L3ByZXNlbmNlLmpzIiwgIi4uLy4uLy4uL2RlcHMvcGhvZW5peC9hc3NldHMvanMvcGhvZW5peC9zZXJpYWxpemVyLmpzIiwgIi4uLy4uLy4uL2RlcHMvcGhvZW5peC9hc3NldHMvanMvcGhvZW5peC9zb2NrZXQuanMiLCAiLi4vLi4vLi4vZGVwcy9waG9lbml4X2xpdmVfdmlldy9hc3NldHMvanMvcGhvZW5peF9saXZlX3ZpZXcvY29uc3RhbnRzLmpzIiwgIi4uLy4uLy4uL2RlcHMvcGhvZW5peF9saXZlX3ZpZXcvYXNzZXRzL2pzL3Bob2VuaXhfbGl2ZV92aWV3L2VudHJ5X3VwbG9hZGVyLmpzIiwgIi4uLy4uLy4uL2RlcHMvcGhvZW5peF9saXZlX3ZpZXcvYXNzZXRzL2pzL3Bob2VuaXhfbGl2ZV92aWV3L3V0aWxzLmpzIiwgIi4uLy4uLy4uL2RlcHMvcGhvZW5peF9saXZlX3ZpZXcvYXNzZXRzL2pzL3Bob2VuaXhfbGl2ZV92aWV3L2Jyb3dzZXIuanMiLCAiLi4vLi4vLi4vZGVwcy9waG9lbml4X2xpdmVfdmlldy9hc3NldHMvanMvcGhvZW5peF9saXZlX3ZpZXcvZG9tLmpzIiwgIi4uLy4uLy4uL2RlcHMvcGhvZW5peF9saXZlX3ZpZXcvYXNzZXRzL2pzL3Bob2VuaXhfbGl2ZV92aWV3L3VwbG9hZF9lbnRyeS5qcyIsICIuLi8uLi8uLi9kZXBzL3Bob2VuaXhfbGl2ZV92aWV3L2Fzc2V0cy9qcy9waG9lbml4X2xpdmVfdmlldy9saXZlX3VwbG9hZGVyLmpzIiwgIi4uLy4uLy4uL2RlcHMvcGhvZW5peF9saXZlX3ZpZXcvYXNzZXRzL2pzL3Bob2VuaXhfbGl2ZV92aWV3L2FyaWEuanMiLCAiLi4vLi4vLi4vZGVwcy9waG9lbml4X2xpdmVfdmlldy9hc3NldHMvanMvcGhvZW5peF9saXZlX3ZpZXcvaG9va3MuanMiLCAiLi4vLi4vLi4vZGVwcy9waG9lbml4X2xpdmVfdmlldy9hc3NldHMvanMvcGhvZW5peF9saXZlX3ZpZXcvZG9tX3Bvc3RfbW9ycGhfcmVzdG9yZXIuanMiLCAiLi4vLi4vLi4vZGVwcy9waG9lbml4X2xpdmVfdmlldy9hc3NldHMvbm9kZV9tb2R1bGVzL21vcnBoZG9tL2Rpc3QvbW9ycGhkb20tZXNtLmpzIiwgIi4uLy4uLy4uL2RlcHMvcGhvZW5peF9saXZlX3ZpZXcvYXNzZXRzL2pzL3Bob2VuaXhfbGl2ZV92aWV3L2RvbV9wYXRjaC5qcyIsICIuLi8uLi8uLi9kZXBzL3Bob2VuaXhfbGl2ZV92aWV3L2Fzc2V0cy9qcy9waG9lbml4X2xpdmVfdmlldy9yZW5kZXJlZC5qcyIsICIuLi8uLi8uLi9kZXBzL3Bob2VuaXhfbGl2ZV92aWV3L2Fzc2V0cy9qcy9waG9lbml4X2xpdmVfdmlldy92aWV3X2hvb2suanMiLCAiLi4vLi4vLi4vZGVwcy9waG9lbml4X2xpdmVfdmlldy9hc3NldHMvanMvcGhvZW5peF9saXZlX3ZpZXcvanMuanMiLCAiLi4vLi4vLi4vZGVwcy9waG9lbml4X2xpdmVfdmlldy9hc3NldHMvanMvcGhvZW5peF9saXZlX3ZpZXcvdmlldy5qcyIsICIuLi8uLi8uLi9kZXBzL3Bob2VuaXhfbGl2ZV92aWV3L2Fzc2V0cy9qcy9waG9lbml4X2xpdmVfdmlldy9saXZlX3NvY2tldC5qcyIsICIuLi8uLi8uLi9hc3NldHMvanMvYXBwLmpzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyIvKipcbiAqIEBsaWNlbnNlIE1JVFxuICogdG9wYmFyIDEuMC4wLCAyMDIxLTAxLTA2XG4gKiBodHRwczovL2J1dW5ndXllbi5naXRodWIuaW8vdG9wYmFyXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjEgQnV1IE5ndXllblxuICovXG4oZnVuY3Rpb24gKHdpbmRvdywgZG9jdW1lbnQpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgLy8gaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vcGF1bGlyaXNoLzE1Nzk2NzFcbiAgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgbGFzdFRpbWUgPSAwO1xuICAgIHZhciB2ZW5kb3JzID0gW1wibXNcIiwgXCJtb3pcIiwgXCJ3ZWJraXRcIiwgXCJvXCJdO1xuICAgIGZvciAodmFyIHggPSAwOyB4IDwgdmVuZG9ycy5sZW5ndGggJiYgIXdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWU7ICsreCkge1xuICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSA9XG4gICAgICAgIHdpbmRvd1t2ZW5kb3JzW3hdICsgXCJSZXF1ZXN0QW5pbWF0aW9uRnJhbWVcIl07XG4gICAgICB3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUgPVxuICAgICAgICB3aW5kb3dbdmVuZG9yc1t4XSArIFwiQ2FuY2VsQW5pbWF0aW9uRnJhbWVcIl0gfHxcbiAgICAgICAgd2luZG93W3ZlbmRvcnNbeF0gKyBcIkNhbmNlbFJlcXVlc3RBbmltYXRpb25GcmFtZVwiXTtcbiAgICB9XG4gICAgaWYgKCF3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKVxuICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSA9IGZ1bmN0aW9uIChjYWxsYmFjaywgZWxlbWVudCkge1xuICAgICAgICB2YXIgY3VyclRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICAgICAgdmFyIHRpbWVUb0NhbGwgPSBNYXRoLm1heCgwLCAxNiAtIChjdXJyVGltZSAtIGxhc3RUaW1lKSk7XG4gICAgICAgIHZhciBpZCA9IHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBjYWxsYmFjayhjdXJyVGltZSArIHRpbWVUb0NhbGwpO1xuICAgICAgICB9LCB0aW1lVG9DYWxsKTtcbiAgICAgICAgbGFzdFRpbWUgPSBjdXJyVGltZSArIHRpbWVUb0NhbGw7XG4gICAgICAgIHJldHVybiBpZDtcbiAgICAgIH07XG4gICAgaWYgKCF3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUpXG4gICAgICB3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUgPSBmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KGlkKTtcbiAgICAgIH07XG4gIH0pKCk7XG5cbiAgdmFyIGNhbnZhcyxcbiAgICBwcm9ncmVzc1RpbWVySWQsXG4gICAgZmFkZVRpbWVySWQsXG4gICAgY3VycmVudFByb2dyZXNzLFxuICAgIHNob3dpbmcsXG4gICAgYWRkRXZlbnQgPSBmdW5jdGlvbiAoZWxlbSwgdHlwZSwgaGFuZGxlcikge1xuICAgICAgaWYgKGVsZW0uYWRkRXZlbnRMaXN0ZW5lcikgZWxlbS5hZGRFdmVudExpc3RlbmVyKHR5cGUsIGhhbmRsZXIsIGZhbHNlKTtcbiAgICAgIGVsc2UgaWYgKGVsZW0uYXR0YWNoRXZlbnQpIGVsZW0uYXR0YWNoRXZlbnQoXCJvblwiICsgdHlwZSwgaGFuZGxlcik7XG4gICAgICBlbHNlIGVsZW1bXCJvblwiICsgdHlwZV0gPSBoYW5kbGVyO1xuICAgIH0sXG4gICAgb3B0aW9ucyA9IHtcbiAgICAgIGF1dG9SdW46IHRydWUsXG4gICAgICBiYXJUaGlja25lc3M6IDMsXG4gICAgICBiYXJDb2xvcnM6IHtcbiAgICAgICAgMDogXCJyZ2JhKDI2LCAgMTg4LCAxNTYsIC45KVwiLFxuICAgICAgICBcIi4yNVwiOiBcInJnYmEoNTIsICAxNTIsIDIxOSwgLjkpXCIsXG4gICAgICAgIFwiLjUwXCI6IFwicmdiYSgyNDEsIDE5NiwgMTUsICAuOSlcIixcbiAgICAgICAgXCIuNzVcIjogXCJyZ2JhKDIzMCwgMTI2LCAzNCwgIC45KVwiLFxuICAgICAgICBcIjEuMFwiOiBcInJnYmEoMjExLCA4NCwgIDAsICAgLjkpXCIsXG4gICAgICB9LFxuICAgICAgc2hhZG93Qmx1cjogMTAsXG4gICAgICBzaGFkb3dDb2xvcjogXCJyZ2JhKDAsICAgMCwgICAwLCAgIC42KVwiLFxuICAgICAgY2xhc3NOYW1lOiBudWxsLFxuICAgIH0sXG4gICAgcmVwYWludCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGNhbnZhcy53aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xuICAgICAgY2FudmFzLmhlaWdodCA9IG9wdGlvbnMuYmFyVGhpY2tuZXNzICogNTsgLy8gbmVlZCBzcGFjZSBmb3Igc2hhZG93XG5cbiAgICAgIHZhciBjdHggPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuICAgICAgY3R4LnNoYWRvd0JsdXIgPSBvcHRpb25zLnNoYWRvd0JsdXI7XG4gICAgICBjdHguc2hhZG93Q29sb3IgPSBvcHRpb25zLnNoYWRvd0NvbG9yO1xuXG4gICAgICB2YXIgbGluZUdyYWRpZW50ID0gY3R4LmNyZWF0ZUxpbmVhckdyYWRpZW50KDAsIDAsIGNhbnZhcy53aWR0aCwgMCk7XG4gICAgICBmb3IgKHZhciBzdG9wIGluIG9wdGlvbnMuYmFyQ29sb3JzKVxuICAgICAgICBsaW5lR3JhZGllbnQuYWRkQ29sb3JTdG9wKHN0b3AsIG9wdGlvbnMuYmFyQ29sb3JzW3N0b3BdKTtcbiAgICAgIGN0eC5saW5lV2lkdGggPSBvcHRpb25zLmJhclRoaWNrbmVzcztcbiAgICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICAgIGN0eC5tb3ZlVG8oMCwgb3B0aW9ucy5iYXJUaGlja25lc3MgLyAyKTtcbiAgICAgIGN0eC5saW5lVG8oXG4gICAgICAgIE1hdGguY2VpbChjdXJyZW50UHJvZ3Jlc3MgKiBjYW52YXMud2lkdGgpLFxuICAgICAgICBvcHRpb25zLmJhclRoaWNrbmVzcyAvIDJcbiAgICAgICk7XG4gICAgICBjdHguc3Ryb2tlU3R5bGUgPSBsaW5lR3JhZGllbnQ7XG4gICAgICBjdHguc3Ryb2tlKCk7XG4gICAgfSxcbiAgICBjcmVhdGVDYW52YXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xuICAgICAgdmFyIHN0eWxlID0gY2FudmFzLnN0eWxlO1xuICAgICAgc3R5bGUucG9zaXRpb24gPSBcImZpeGVkXCI7XG4gICAgICBzdHlsZS50b3AgPSBzdHlsZS5sZWZ0ID0gc3R5bGUucmlnaHQgPSBzdHlsZS5tYXJnaW4gPSBzdHlsZS5wYWRkaW5nID0gMDtcbiAgICAgIHN0eWxlLnpJbmRleCA9IDEwMDAwMTtcbiAgICAgIHN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgIGlmIChvcHRpb25zLmNsYXNzTmFtZSkgY2FudmFzLmNsYXNzTGlzdC5hZGQob3B0aW9ucy5jbGFzc05hbWUpO1xuICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChjYW52YXMpO1xuICAgICAgYWRkRXZlbnQod2luZG93LCBcInJlc2l6ZVwiLCByZXBhaW50KTtcbiAgICB9LFxuICAgIHRvcGJhciA9IHtcbiAgICAgIGNvbmZpZzogZnVuY3Rpb24gKG9wdHMpIHtcbiAgICAgICAgZm9yICh2YXIga2V5IGluIG9wdHMpXG4gICAgICAgICAgaWYgKG9wdGlvbnMuaGFzT3duUHJvcGVydHkoa2V5KSkgb3B0aW9uc1trZXldID0gb3B0c1trZXldO1xuICAgICAgfSxcbiAgICAgIHNob3c6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHNob3dpbmcpIHJldHVybjtcbiAgICAgICAgc2hvd2luZyA9IHRydWU7XG4gICAgICAgIGlmIChmYWRlVGltZXJJZCAhPT0gbnVsbCkgd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lKGZhZGVUaW1lcklkKTtcbiAgICAgICAgaWYgKCFjYW52YXMpIGNyZWF0ZUNhbnZhcygpO1xuICAgICAgICBjYW52YXMuc3R5bGUub3BhY2l0eSA9IDE7XG4gICAgICAgIGNhbnZhcy5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICB0b3BiYXIucHJvZ3Jlc3MoMCk7XG4gICAgICAgIGlmIChvcHRpb25zLmF1dG9SdW4pIHtcbiAgICAgICAgICAoZnVuY3Rpb24gbG9vcCgpIHtcbiAgICAgICAgICAgIHByb2dyZXNzVGltZXJJZCA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUobG9vcCk7XG4gICAgICAgICAgICB0b3BiYXIucHJvZ3Jlc3MoXG4gICAgICAgICAgICAgIFwiK1wiICsgMC4wNSAqIE1hdGgucG93KDEgLSBNYXRoLnNxcnQoY3VycmVudFByb2dyZXNzKSwgMilcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSkoKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHByb2dyZXNzOiBmdW5jdGlvbiAodG8pIHtcbiAgICAgICAgaWYgKHR5cGVvZiB0byA9PT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuIGN1cnJlbnRQcm9ncmVzcztcbiAgICAgICAgaWYgKHR5cGVvZiB0byA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgIHRvID1cbiAgICAgICAgICAgICh0by5pbmRleE9mKFwiK1wiKSA+PSAwIHx8IHRvLmluZGV4T2YoXCItXCIpID49IDBcbiAgICAgICAgICAgICAgPyBjdXJyZW50UHJvZ3Jlc3NcbiAgICAgICAgICAgICAgOiAwKSArIHBhcnNlRmxvYXQodG8pO1xuICAgICAgICB9XG4gICAgICAgIGN1cnJlbnRQcm9ncmVzcyA9IHRvID4gMSA/IDEgOiB0bztcbiAgICAgICAgcmVwYWludCgpO1xuICAgICAgICByZXR1cm4gY3VycmVudFByb2dyZXNzO1xuICAgICAgfSxcbiAgICAgIGhpZGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCFzaG93aW5nKSByZXR1cm47XG4gICAgICAgIHNob3dpbmcgPSBmYWxzZTtcbiAgICAgICAgaWYgKHByb2dyZXNzVGltZXJJZCAhPSBudWxsKSB7XG4gICAgICAgICAgd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lKHByb2dyZXNzVGltZXJJZCk7XG4gICAgICAgICAgcHJvZ3Jlc3NUaW1lcklkID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICAoZnVuY3Rpb24gbG9vcCgpIHtcbiAgICAgICAgICBpZiAodG9wYmFyLnByb2dyZXNzKFwiKy4xXCIpID49IDEpIHtcbiAgICAgICAgICAgIGNhbnZhcy5zdHlsZS5vcGFjaXR5IC09IDAuMDU7XG4gICAgICAgICAgICBpZiAoY2FudmFzLnN0eWxlLm9wYWNpdHkgPD0gMC4wNSkge1xuICAgICAgICAgICAgICBjYW52YXMuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgICBmYWRlVGltZXJJZCA9IG51bGw7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgZmFkZVRpbWVySWQgPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGxvb3ApO1xuICAgICAgICB9KSgpO1xuICAgICAgfSxcbiAgICB9O1xuXG4gIGlmICh0eXBlb2YgbW9kdWxlID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJvYmplY3RcIikge1xuICAgIG1vZHVsZS5leHBvcnRzID0gdG9wYmFyO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09IFwiZnVuY3Rpb25cIiAmJiBkZWZpbmUuYW1kKSB7XG4gICAgZGVmaW5lKGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0b3BiYXI7XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgdGhpcy50b3BiYXIgPSB0b3BiYXI7XG4gIH1cbn0uY2FsbCh0aGlzLCB3aW5kb3csIGRvY3VtZW50KSk7XG4iLCAiLy8gRnVuY3Rpb24gdG8gcmVhZCB0aGUgdmFsdWUgb2YgYSBjb29raWUgYnkgaXRzIG5hbWVcbmZ1bmN0aW9uIGdldENvb2tpZShuYW1lKSB7XG4gIGNvbnN0IHZhbHVlID0gJzsgJyArIGRvY3VtZW50LmNvb2tpZTtcbiAgY29uc3QgcGFydHMgPSB2YWx1ZS5zcGxpdCgnOyAnICsgbmFtZSArICc9Jyk7XG4gIGlmIChwYXJ0cy5sZW5ndGggPT09IDIpIHJldHVybiBwYXJ0cy5wb3AoKS5zcGxpdCgnOycpLnNoaWZ0KCk7XG4gIHJldHVybiBudWxsO1xufVxuXG4vLyBGdW5jdGlvbiB0byBzZXQgZGFyayBtb2RlIGJhc2VkIG9uIHRoZSB1c2VyJ3MgcHJlZmVyZW5jZVxuZnVuY3Rpb24gc2V0RGFya01vZGVQcmVmZXJlbmNlKGlzRGFya01vZGUpIHtcbiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2RhcmtNb2RlJywgaXNEYXJrTW9kZSA/ICd0cnVlJyA6ICdmYWxzZScpO1xuICAvLyBTZXQgYSBjb29raWUgZm9yIHRoZSBkYXJrIG1vZGUgcHJlZmVyZW5jZVxuICBkb2N1bWVudC5jb29raWUgPSAnZGFya01vZGVQcmVmZXJlbmNlPScgKyAoaXNEYXJrTW9kZSA/ICd0cnVlJyA6ICdmYWxzZScpICsgJztwYXRoPS8nO1xuICB2YXIgYm9keUVsZW1lbnQgPSBkb2N1bWVudC5ib2R5OyAvLyBVc2UgJ2RvY3VtZW50LmJvZHknIGluc3RlYWQgb2YgJ2dldEVsZW1lbnRCeUlkJ1xuICB2YXIgbGlnaHRNb2RlVG9nZ2xlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xpZ2h0LW1vZGUtdG9nZ2xlJyk7XG4gIHZhciBkYXJrTW9kZVRvZ2dsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkYXJrLW1vZGUtdG9nZ2xlJyk7XG4gIGlmIChpc0RhcmtNb2RlKSB7XG4gICAgYm9keUVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZGFyay1tb2RlJyk7XG4gICAgbGlnaHRNb2RlVG9nZ2xlLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgZGFya01vZGVUb2dnbGUuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gIH0gZWxzZSB7XG4gICAgYm9keUVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnZGFyay1tb2RlJyk7XG4gICAgbGlnaHRNb2RlVG9nZ2xlLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgIGRhcmtNb2RlVG9nZ2xlLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gIH1cbn1cblxuLy8gRnVuY3Rpb24gdG8gdG9nZ2xlIGRhcmsgbW9kZVxuZnVuY3Rpb24gdG9nZ2xlRGFya01vZGUoKSB7XG4gIC8vIENoZWNrIGlmIGRhcmsgbW9kZSBpcyBjdXJyZW50bHkgZW5hYmxlZFxuICB2YXIgaXNEYXJrTW9kZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdkYXJrTW9kZScpID09PSAndHJ1ZSc7XG4gIC8vIFRvZ2dsZSB0aGUgZGFyayBtb2RlIHByZWZlcmVuY2UgYW5kIHVwZGF0ZSB0aGUgVUlcbiAgc2V0RGFya01vZGVQcmVmZXJlbmNlKCFpc0RhcmtNb2RlKTtcbn1cblxuLy8gQXR0YWNoIHRoZSB0b2dnbGVEYXJrTW9kZSBmdW5jdGlvbiB0byB0aGUgY2xpY2sgZXZlbnQgb2YgdGhlIGRhcmsgbW9kZSBpY29uXG52YXIgZGFya01vZGVJY29uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RhcmstbW9kZS1pY29uJyk7XG5pZiAoZGFya01vZGVJY29uKSB7XG4gIGRhcmtNb2RlSWNvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRvZ2dsZURhcmtNb2RlKTtcbn1cblxuLy8gU2V0IHRoZSBpbml0aWFsIGRhcmsgbW9kZSBwcmVmZXJlbmNlIGJhc2VkIG9uIGxvY2FsU3RvcmFnZVxudmFyIGluaXRpYWxEYXJrTW9kZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdkYXJrTW9kZScpID09PSAndHJ1ZSc7XG5zZXREYXJrTW9kZVByZWZlcmVuY2UoaW5pdGlhbERhcmtNb2RlKTtcblxud2luZG93LmdldENvb2tpZSA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgY29uc3QgdmFsdWUgPSAnOyAnICsgZG9jdW1lbnQuY29va2llO1xuICBjb25zdCBwYXJ0cyA9IHZhbHVlLnNwbGl0KCc7ICcgKyBuYW1lICsgJz0nKTtcbiAgaWYgKHBhcnRzLmxlbmd0aCA9PT0gMikgcmV0dXJuIHBhcnRzLnBvcCgpLnNwbGl0KCc7Jykuc2hpZnQoKTtcbiAgcmV0dXJuIG51bGw7XG59O1xuIiwgImltcG9ydCB7IHZlcnNpb24gfSBmcm9tICcuLi9wYWNrYWdlLmpzb24nXG5cbi8vIG92ZXJyaWRlbiBpbiBwb3N0aG9nLWNvcmUsXG4vLyBlLmcuICAgICBDb25maWcuREVCVUcgPSBDb25maWcuREVCVUcgfHwgaW5zdGFuY2UuY29uZmlnLmRlYnVnXG5jb25zdCBDb25maWcgPSB7XG4gICAgREVCVUc6IGZhbHNlLFxuICAgIExJQl9WRVJTSU9OOiB2ZXJzaW9uLFxufVxuXG5leHBvcnQgZGVmYXVsdCBDb25maWdcbiIsICIvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcG9zdGhvZy1qcy9uby1kaXJlY3QtYXJyYXktY2hlY2tcbmNvbnN0IG5hdGl2ZUlzQXJyYXkgPSBBcnJheS5pc0FycmF5XG5jb25zdCBPYmpQcm90byA9IE9iamVjdC5wcm90b3R5cGVcbmV4cG9ydCBjb25zdCBoYXNPd25Qcm9wZXJ0eSA9IE9ialByb3RvLmhhc093blByb3BlcnR5XG5jb25zdCB0b1N0cmluZyA9IE9ialByb3RvLnRvU3RyaW5nXG5cbmV4cG9ydCBjb25zdCBfaXNBcnJheSA9XG4gICAgbmF0aXZlSXNBcnJheSB8fFxuICAgIGZ1bmN0aW9uIChvYmo6IGFueSk6IG9iaiBpcyBhbnlbXSB7XG4gICAgICAgIHJldHVybiB0b1N0cmluZy5jYWxsKG9iaikgPT09ICdbb2JqZWN0IEFycmF5XSdcbiAgICB9XG5leHBvcnQgY29uc3QgX2lzVWludDhBcnJheSA9IGZ1bmN0aW9uICh4OiB1bmtub3duKTogeCBpcyBVaW50OEFycmF5IHtcbiAgICByZXR1cm4gdG9TdHJpbmcuY2FsbCh4KSA9PT0gJ1tvYmplY3QgVWludDhBcnJheV0nXG59XG4vLyBmcm9tIGEgY29tbWVudCBvbiBodHRwOi8vZGJqLm9yZy9kYmovP3A9Mjg2XG4vLyBmYWlscyBvbiBvbmx5IG9uZSB2ZXJ5IHJhcmUgYW5kIGRlbGliZXJhdGUgY3VzdG9tIG9iamVjdDpcbi8vIGxldCBib21iID0geyB0b1N0cmluZyA6IHVuZGVmaW5lZCwgdmFsdWVPZjogZnVuY3Rpb24obykgeyByZXR1cm4gXCJmdW5jdGlvbiBCT01CQSFcIjsgfX07XG5leHBvcnQgY29uc3QgX2lzRnVuY3Rpb24gPSBmdW5jdGlvbiAoZjogYW55KTogZiBpcyAoLi4uYXJnczogYW55W10pID0+IGFueSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHBvc3Rob2ctanMvbm8tZGlyZWN0LWZ1bmN0aW9uLWNoZWNrXG4gICAgcmV0dXJuIHR5cGVvZiBmID09PSAnZnVuY3Rpb24nXG59XG4vLyBVbmRlcnNjb3JlIEFkZG9uc1xuZXhwb3J0IGNvbnN0IF9pc09iamVjdCA9IGZ1bmN0aW9uICh4OiB1bmtub3duKTogeCBpcyBSZWNvcmQ8c3RyaW5nLCBhbnk+IHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcG9zdGhvZy1qcy9uby1kaXJlY3Qtb2JqZWN0LWNoZWNrXG4gICAgcmV0dXJuIHggPT09IE9iamVjdCh4KSAmJiAhX2lzQXJyYXkoeClcbn1cbmV4cG9ydCBjb25zdCBfaXNFbXB0eU9iamVjdCA9IGZ1bmN0aW9uICh4OiB1bmtub3duKTogeCBpcyBSZWNvcmQ8c3RyaW5nLCBhbnk+IHtcbiAgICBpZiAoX2lzT2JqZWN0KHgpKSB7XG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIHgpIHtcbiAgICAgICAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKHgsIGtleSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2Vcbn1cbmV4cG9ydCBjb25zdCBfaXNVbmRlZmluZWQgPSBmdW5jdGlvbiAoeDogdW5rbm93bik6IHggaXMgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4geCA9PT0gdm9pZCAwXG59XG5cbmV4cG9ydCBjb25zdCBfaXNTdHJpbmcgPSBmdW5jdGlvbiAoeDogdW5rbm93bik6IHggaXMgc3RyaW5nIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcG9zdGhvZy1qcy9uby1kaXJlY3Qtc3RyaW5nLWNoZWNrXG4gICAgcmV0dXJuIHRvU3RyaW5nLmNhbGwoeCkgPT0gJ1tvYmplY3QgU3RyaW5nXSdcbn1cblxuZXhwb3J0IGNvbnN0IF9pc0VtcHR5U3RyaW5nID0gZnVuY3Rpb24gKHg6IHVua25vd24pOiBib29sZWFuIHtcbiAgICByZXR1cm4gX2lzU3RyaW5nKHgpICYmIHgudHJpbSgpLmxlbmd0aCA9PT0gMFxufVxuXG5leHBvcnQgY29uc3QgX2lzTnVsbCA9IGZ1bmN0aW9uICh4OiB1bmtub3duKTogeCBpcyBudWxsIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcG9zdGhvZy1qcy9uby1kaXJlY3QtbnVsbC1jaGVja1xuICAgIHJldHVybiB4ID09PSBudWxsXG59XG5cbi8qXG4gICAgc29tZXRpbWVzIHlvdSB3YW50IHRvIGNoZWNrIGlmIHNvbWV0aGluZyBpcyBudWxsIG9yIHVuZGVmaW5lZFxuICAgIHRoYXQncyB3aGF0IHRoaXMgaXMgZm9yXG4gKi9cbmV4cG9ydCBjb25zdCBfaXNOdWxsaXNoID0gZnVuY3Rpb24gKHg6IHVua25vd24pOiB4IGlzIG51bGwgfCB1bmRlZmluZWQge1xuICAgIHJldHVybiBfaXNVbmRlZmluZWQoeCkgfHwgX2lzTnVsbCh4KVxufVxuXG5leHBvcnQgY29uc3QgX2lzRGF0ZSA9IGZ1bmN0aW9uICh4OiB1bmtub3duKTogeCBpcyBEYXRlIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcG9zdGhvZy1qcy9uby1kaXJlY3QtZGF0ZS1jaGVja1xuICAgIHJldHVybiB0b1N0cmluZy5jYWxsKHgpID09ICdbb2JqZWN0IERhdGVdJ1xufVxuZXhwb3J0IGNvbnN0IF9pc051bWJlciA9IGZ1bmN0aW9uICh4OiB1bmtub3duKTogeCBpcyBudW1iZXIge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwb3N0aG9nLWpzL25vLWRpcmVjdC1udW1iZXItY2hlY2tcbiAgICByZXR1cm4gdG9TdHJpbmcuY2FsbCh4KSA9PSAnW29iamVjdCBOdW1iZXJdJ1xufVxuZXhwb3J0IGNvbnN0IF9pc0Jvb2xlYW4gPSBmdW5jdGlvbiAoeDogdW5rbm93bik6IHggaXMgYm9vbGVhbiB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHBvc3Rob2ctanMvbm8tZGlyZWN0LWJvb2xlYW4tY2hlY2tcbiAgICByZXR1cm4gdG9TdHJpbmcuY2FsbCh4KSA9PT0gJ1tvYmplY3QgQm9vbGVhbl0nXG59XG5cbmV4cG9ydCBjb25zdCBfaXNEb2N1bWVudCA9ICh4OiB1bmtub3duKTogeCBpcyBEb2N1bWVudCA9PiB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHBvc3Rob2ctanMvbm8tZGlyZWN0LWRvY3VtZW50LWNoZWNrXG4gICAgcmV0dXJuIHggaW5zdGFuY2VvZiBEb2N1bWVudFxufVxuXG5leHBvcnQgY29uc3QgX2lzRm9ybURhdGEgPSAoeDogdW5rbm93bik6IHggaXMgRm9ybURhdGEgPT4ge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwb3N0aG9nLWpzL25vLWRpcmVjdC1mb3JtLWRhdGEtY2hlY2tcbiAgICByZXR1cm4geCBpbnN0YW5jZW9mIEZvcm1EYXRhXG59XG5cbmV4cG9ydCBjb25zdCBfaXNGaWxlID0gKHg6IHVua25vd24pOiB4IGlzIEZpbGUgPT4ge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwb3N0aG9nLWpzL25vLWRpcmVjdC1maWxlLWNoZWNrXG4gICAgcmV0dXJuIHggaW5zdGFuY2VvZiBGaWxlXG59XG4iLCAiLypcbiAqIEdsb2JhbCBoZWxwZXJzIHRvIHByb3RlY3QgYWNjZXNzIHRvIGJyb3dzZXIgZ2xvYmFscyBpbiBhIHdheSB0aGF0IGlzIHNhZmVyIGZvciBkaWZmZXJlbnQgdGFyZ2V0c1xuICogbGlrZSBET00sIFNTUiwgV2ViIHdvcmtlcnMgZXRjLlxuICpcbiAqIE5PVEU6IFR5cGljYWxseSB3ZSB3YW50IHRoZSBcIndpbmRvd1wiIGJ1dCBnbG9iYWxUaGlzIHdvcmtzIGZvciBib3RoIHRoZSB0eXBpY2FsIGJyb3dzZXIgY29udGV4dCBhc1xuICogd2VsbCBhcyBvdGhlciBjb250ZXh0cyBzdWNoIGFzIHRoZSB3ZWIgd29ya2VyIGNvbnRleHQuIFdpbmRvdyBpcyBzdGlsbCBleHBvcnRlZCBmb3IgYW55IGJpdHMgdGhhdCBleHBsaWNpdGx5IHJlcXVpcmUgaXQuXG4gKiBJZiBpbiBkb3VidCAtIGV4cG9ydCB0aGUgZ2xvYmFsIHlvdSBuZWVkIGZyb20gdGhpcyBmaWxlIGFuZCB1c2UgdGhhdCBhcyBhbiBvcHRpb25hbCB2YWx1ZS4gVGhpcyB3YXkgdGhlIGNvZGUgcGF0aCBpcyBmb3JjZWRcbiAqIHRvIGhhbmRsZSB0aGUgY2FzZSB3aGVyZSB0aGUgZ2xvYmFsIGlzIG5vdCBhdmFpbGFibGUuXG4gKi9cblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtZ2xvYmFsc1xuY29uc3Qgd2luOiAoV2luZG93ICYgdHlwZW9mIGdsb2JhbFRoaXMpIHwgdW5kZWZpbmVkID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cgOiB1bmRlZmluZWRcblxuY29uc3QgZ2xvYmFsOiB0eXBlb2YgZ2xvYmFsVGhpcyB8IHVuZGVmaW5lZCA9IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbFRoaXMgOiB3aW5cblxuZXhwb3J0IGNvbnN0IEFycmF5UHJvdG8gPSBBcnJheS5wcm90b3R5cGVcbmV4cG9ydCBjb25zdCBuYXRpdmVGb3JFYWNoID0gQXJyYXlQcm90by5mb3JFYWNoXG5leHBvcnQgY29uc3QgbmF0aXZlSW5kZXhPZiA9IEFycmF5UHJvdG8uaW5kZXhPZlxuXG5jb25zdCBuYXZpZ2F0b3IgPSBnbG9iYWw/Lm5hdmlnYXRvclxuZXhwb3J0IGNvbnN0IGRvY3VtZW50ID0gZ2xvYmFsPy5kb2N1bWVudFxuZXhwb3J0IGNvbnN0IGxvY2F0aW9uID0gZ2xvYmFsPy5sb2NhdGlvblxuZXhwb3J0IGNvbnN0IGZldGNoID0gZ2xvYmFsPy5mZXRjaFxuZXhwb3J0IGNvbnN0IFhNTEh0dHBSZXF1ZXN0ID1cbiAgICBnbG9iYWw/LlhNTEh0dHBSZXF1ZXN0ICYmICd3aXRoQ3JlZGVudGlhbHMnIGluIG5ldyBnbG9iYWwuWE1MSHR0cFJlcXVlc3QoKSA/IGdsb2JhbC5YTUxIdHRwUmVxdWVzdCA6IHVuZGVmaW5lZFxuZXhwb3J0IGNvbnN0IEFib3J0Q29udHJvbGxlciA9IGdsb2JhbD8uQWJvcnRDb250cm9sbGVyXG5leHBvcnQgY29uc3QgdXNlckFnZW50ID0gbmF2aWdhdG9yPy51c2VyQWdlbnRcbmV4cG9ydCBjb25zdCBhc3NpZ25hYmxlV2luZG93OiBXaW5kb3cgJiB0eXBlb2YgZ2xvYmFsVGhpcyAmIFJlY29yZDxzdHJpbmcsIGFueT4gPSB3aW4gPz8gKHt9IGFzIGFueSlcblxuZXhwb3J0IHsgd2luIGFzIHdpbmRvdyB9XG4iLCAiaW1wb3J0IENvbmZpZyBmcm9tICcuLi9jb25maWcnXG5pbXBvcnQgeyBfaXNVbmRlZmluZWQgfSBmcm9tICcuL3R5cGUtdXRpbHMnXG5pbXBvcnQgeyBhc3NpZ25hYmxlV2luZG93LCB3aW5kb3cgfSBmcm9tICcuL2dsb2JhbHMnXG5cbmNvbnN0IExPR0dFUl9QUkVGSVggPSAnW1Bvc3RIb2cuanNdJ1xuZXhwb3J0IGNvbnN0IGxvZ2dlciA9IHtcbiAgICBfbG9nOiAobGV2ZWw6ICdsb2cnIHwgJ3dhcm4nIHwgJ2Vycm9yJywgLi4uYXJnczogYW55W10pID0+IHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgd2luZG93ICYmXG4gICAgICAgICAgICAoQ29uZmlnLkRFQlVHIHx8IGFzc2lnbmFibGVXaW5kb3cuUE9TVEhPR19ERUJVRykgJiZcbiAgICAgICAgICAgICFfaXNVbmRlZmluZWQod2luZG93LmNvbnNvbGUpICYmXG4gICAgICAgICAgICB3aW5kb3cuY29uc29sZVxuICAgICAgICApIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbnNvbGVMb2cgPVxuICAgICAgICAgICAgICAgICdfX3Jyd2ViX29yaWdpbmFsX18nIGluIHdpbmRvdy5jb25zb2xlW2xldmVsXVxuICAgICAgICAgICAgICAgICAgICA/ICh3aW5kb3cuY29uc29sZVtsZXZlbF0gYXMgYW55KVsnX19ycndlYl9vcmlnaW5hbF9fJ11cbiAgICAgICAgICAgICAgICAgICAgOiB3aW5kb3cuY29uc29sZVtsZXZlbF1cblxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgICAgICAgIGNvbnNvbGVMb2coTE9HR0VSX1BSRUZJWCwgLi4uYXJncylcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBpbmZvOiAoLi4uYXJnczogYW55W10pID0+IHtcbiAgICAgICAgbG9nZ2VyLl9sb2coJ2xvZycsIC4uLmFyZ3MpXG4gICAgfSxcblxuICAgIHdhcm46ICguLi5hcmdzOiBhbnlbXSkgPT4ge1xuICAgICAgICBsb2dnZXIuX2xvZygnd2FybicsIC4uLmFyZ3MpXG4gICAgfSxcblxuICAgIGVycm9yOiAoLi4uYXJnczogYW55W10pID0+IHtcbiAgICAgICAgbG9nZ2VyLl9sb2coJ2Vycm9yJywgLi4uYXJncylcbiAgICB9LFxuXG4gICAgY3JpdGljYWw6ICguLi5hcmdzOiBhbnlbXSkgPT4ge1xuICAgICAgICAvLyBDcml0aWNhbCBlcnJvcnMgYXJlIGFsd2F5cyBsb2dnZWQgdG8gdGhlIGNvbnNvbGVcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgICAgY29uc29sZS5lcnJvcihMT0dHRVJfUFJFRklYLCAuLi5hcmdzKVxuICAgIH0sXG5cbiAgICB1bmluaXRpYWxpemVkV2FybmluZzogKG1ldGhvZE5hbWU6IHN0cmluZykgPT4ge1xuICAgICAgICBsb2dnZXIuZXJyb3IoYFlvdSBtdXN0IGluaXRpYWxpemUgUG9zdEhvZyBiZWZvcmUgY2FsbGluZyAke21ldGhvZE5hbWV9YClcbiAgICB9LFxufVxuIiwgImltcG9ydCB7IEJyZWFrZXIsIEV2ZW50SGFuZGxlciwgUHJvcGVydGllcyB9IGZyb20gJy4uL3R5cGVzJ1xuaW1wb3J0IHtcbiAgICBfaXNBcnJheSxcbiAgICBfaXNEYXRlLFxuICAgIF9pc0Zvcm1EYXRhLFxuICAgIF9pc0Z1bmN0aW9uLFxuICAgIF9pc051bGwsXG4gICAgX2lzTnVsbGlzaCxcbiAgICBfaXNPYmplY3QsXG4gICAgX2lzU3RyaW5nLFxuICAgIGhhc093blByb3BlcnR5LFxufSBmcm9tICcuL3R5cGUtdXRpbHMnXG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tICcuL2xvZ2dlcidcbmltcG9ydCB7IHdpbmRvdywgZG9jdW1lbnQsIG5hdGl2ZUZvckVhY2gsIG5hdGl2ZUluZGV4T2YgfSBmcm9tICcuL2dsb2JhbHMnXG5cbmNvbnN0IGJyZWFrZXI6IEJyZWFrZXIgPSB7fVxuXG4vLyBVTkRFUlNDT1JFXG4vLyBFbWJlZCBwYXJ0IG9mIHRoZSBVbmRlcnNjb3JlIExpYnJhcnlcbmV4cG9ydCBjb25zdCBfdHJpbSA9IGZ1bmN0aW9uIChzdHI6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHN0ci5yZXBsYWNlKC9eW1xcc1xcdUZFRkZcXHhBMF0rfFtcXHNcXHVGRUZGXFx4QTBdKyQvZywgJycpXG59XG5cbmV4cG9ydCBjb25zdCBfYmluZF9pbnN0YW5jZV9tZXRob2RzID0gZnVuY3Rpb24gKG9iajogUmVjb3JkPHN0cmluZywgYW55Pik6IHZvaWQge1xuICAgIGZvciAoY29uc3QgZnVuYyBpbiBvYmopIHtcbiAgICAgICAgaWYgKF9pc0Z1bmN0aW9uKG9ialtmdW5jXSkpIHtcbiAgICAgICAgICAgIG9ialtmdW5jXSA9IG9ialtmdW5jXS5iaW5kKG9iailcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF9lYWNoQXJyYXk8RSA9IGFueT4oXG4gICAgb2JqOiBFW10gfCBudWxsIHwgdW5kZWZpbmVkLFxuICAgIGl0ZXJhdG9yOiAodmFsdWU6IEUsIGtleTogbnVtYmVyKSA9PiB2b2lkIHwgQnJlYWtlcixcbiAgICB0aGlzQXJnPzogYW55XG4pOiB2b2lkIHtcbiAgICBpZiAoX2lzQXJyYXkob2JqKSkge1xuICAgICAgICBpZiAobmF0aXZlRm9yRWFjaCAmJiBvYmouZm9yRWFjaCA9PT0gbmF0aXZlRm9yRWFjaCkge1xuICAgICAgICAgICAgb2JqLmZvckVhY2goaXRlcmF0b3IsIHRoaXNBcmcpXG4gICAgICAgIH0gZWxzZSBpZiAoJ2xlbmd0aCcgaW4gb2JqICYmIG9iai5sZW5ndGggPT09ICtvYmoubGVuZ3RoKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMCwgbCA9IG9iai5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoaSBpbiBvYmogJiYgaXRlcmF0b3IuY2FsbCh0aGlzQXJnLCBvYmpbaV0sIGkpID09PSBicmVha2VyKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cblxuLyoqXG4gKiBAcGFyYW0geyo9fSBvYmpcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oLi4uKik9fSBpdGVyYXRvclxuICogQHBhcmFtIHtPYmplY3Q9fSB0aGlzQXJnXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBfZWFjaChvYmo6IGFueSwgaXRlcmF0b3I6ICh2YWx1ZTogYW55LCBrZXk6IGFueSkgPT4gdm9pZCB8IEJyZWFrZXIsIHRoaXNBcmc/OiBhbnkpOiB2b2lkIHtcbiAgICBpZiAoX2lzTnVsbGlzaChvYmopKSB7XG4gICAgICAgIHJldHVyblxuICAgIH1cbiAgICBpZiAoX2lzQXJyYXkob2JqKSkge1xuICAgICAgICByZXR1cm4gX2VhY2hBcnJheShvYmosIGl0ZXJhdG9yLCB0aGlzQXJnKVxuICAgIH1cbiAgICBpZiAoX2lzRm9ybURhdGEob2JqKSkge1xuICAgICAgICBmb3IgKGNvbnN0IHBhaXIgb2Ygb2JqLmVudHJpZXMoKSkge1xuICAgICAgICAgICAgaWYgKGl0ZXJhdG9yLmNhbGwodGhpc0FyZywgcGFpclsxXSwgcGFpclswXSkgPT09IGJyZWFrZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm5cbiAgICB9XG4gICAgZm9yIChjb25zdCBrZXkgaW4gb2JqKSB7XG4gICAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkge1xuICAgICAgICAgICAgaWYgKGl0ZXJhdG9yLmNhbGwodGhpc0FyZywgb2JqW2tleV0sIGtleSkgPT09IGJyZWFrZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cblxuZXhwb3J0IGNvbnN0IF9leHRlbmQgPSBmdW5jdGlvbiAob2JqOiBSZWNvcmQ8c3RyaW5nLCBhbnk+LCAuLi5hcmdzOiBSZWNvcmQ8c3RyaW5nLCBhbnk+W10pOiBSZWNvcmQ8c3RyaW5nLCBhbnk+IHtcbiAgICBfZWFjaEFycmF5KGFyZ3MsIGZ1bmN0aW9uIChzb3VyY2UpIHtcbiAgICAgICAgZm9yIChjb25zdCBwcm9wIGluIHNvdXJjZSkge1xuICAgICAgICAgICAgaWYgKHNvdXJjZVtwcm9wXSAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgICAgb2JqW3Byb3BdID0gc291cmNlW3Byb3BdXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KVxuICAgIHJldHVybiBvYmpcbn1cblxuZXhwb3J0IGNvbnN0IF9pbmNsdWRlID0gZnVuY3Rpb24gKFxuICAgIG9iajogbnVsbCB8IHN0cmluZyB8IEFycmF5PGFueT4gfCBSZWNvcmQ8c3RyaW5nLCBhbnk+LFxuICAgIHRhcmdldDogYW55XG4pOiBib29sZWFuIHwgQnJlYWtlciB7XG4gICAgbGV0IGZvdW5kID0gZmFsc2VcbiAgICBpZiAoX2lzTnVsbChvYmopKSB7XG4gICAgICAgIHJldHVybiBmb3VuZFxuICAgIH1cbiAgICBpZiAobmF0aXZlSW5kZXhPZiAmJiBvYmouaW5kZXhPZiA9PT0gbmF0aXZlSW5kZXhPZikge1xuICAgICAgICByZXR1cm4gb2JqLmluZGV4T2YodGFyZ2V0KSAhPSAtMVxuICAgIH1cbiAgICBfZWFjaChvYmosIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBpZiAoZm91bmQgfHwgKGZvdW5kID0gdmFsdWUgPT09IHRhcmdldCkpIHtcbiAgICAgICAgICAgIHJldHVybiBicmVha2VyXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuXG4gICAgfSlcbiAgICByZXR1cm4gZm91bmRcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF9pbmNsdWRlczxUID0gYW55PihzdHI6IFRbXSB8IHN0cmluZywgbmVlZGxlOiBUKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIChzdHIgYXMgYW55KS5pbmRleE9mKG5lZWRsZSkgIT09IC0xXG59XG5cbi8qKlxuICogT2JqZWN0LmVudHJpZXMoKSBwb2x5ZmlsbFxuICogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvT2JqZWN0L2VudHJpZXNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIF9lbnRyaWVzPFQgPSBhbnk+KG9iajogUmVjb3JkPHN0cmluZywgVD4pOiBbc3RyaW5nLCBUXVtdIHtcbiAgICBjb25zdCBvd25Qcm9wcyA9IE9iamVjdC5rZXlzKG9iailcbiAgICBsZXQgaSA9IG93blByb3BzLmxlbmd0aFxuICAgIGNvbnN0IHJlc0FycmF5ID0gbmV3IEFycmF5KGkpIC8vIHByZWFsbG9jYXRlIHRoZSBBcnJheVxuXG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgICByZXNBcnJheVtpXSA9IFtvd25Qcm9wc1tpXSwgb2JqW293blByb3BzW2ldXV1cbiAgICB9XG4gICAgcmV0dXJuIHJlc0FycmF5XG59XG5cbmV4cG9ydCBjb25zdCBfaXNWYWxpZFJlZ2V4ID0gZnVuY3Rpb24gKHN0cjogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgdHJ5IHtcbiAgICAgICAgbmV3IFJlZ0V4cChzdHIpXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIHJldHVybiB0cnVlXG59XG5cbmV4cG9ydCBjb25zdCBfZW5jb2RlRGF0ZXMgPSBmdW5jdGlvbiAob2JqOiBQcm9wZXJ0aWVzKTogUHJvcGVydGllcyB7XG4gICAgX2VhY2gob2JqLCBmdW5jdGlvbiAodiwgaykge1xuICAgICAgICBpZiAoX2lzRGF0ZSh2KSkge1xuICAgICAgICAgICAgb2JqW2tdID0gX2Zvcm1hdERhdGUodilcbiAgICAgICAgfSBlbHNlIGlmIChfaXNPYmplY3QodikpIHtcbiAgICAgICAgICAgIG9ialtrXSA9IF9lbmNvZGVEYXRlcyh2KSAvLyByZWN1cnNlXG4gICAgICAgIH1cbiAgICB9KVxuICAgIHJldHVybiBvYmpcbn1cblxuZXhwb3J0IGNvbnN0IF90aW1lc3RhbXAgPSBmdW5jdGlvbiAoKTogbnVtYmVyIHtcbiAgICBEYXRlLm5vdyA9XG4gICAgICAgIERhdGUubm93IHx8XG4gICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiArbmV3IERhdGUoKVxuICAgICAgICB9XG4gICAgcmV0dXJuIERhdGUubm93KClcbn1cblxuZXhwb3J0IGNvbnN0IF9mb3JtYXREYXRlID0gZnVuY3Rpb24gKGQ6IERhdGUpOiBzdHJpbmcge1xuICAgIC8vIFlZWVktTU0tRERUSEg6TU06U1MgaW4gVVRDXG4gICAgZnVuY3Rpb24gcGFkKG46IG51bWJlcikge1xuICAgICAgICByZXR1cm4gbiA8IDEwID8gJzAnICsgbiA6IG5cbiAgICB9XG4gICAgcmV0dXJuIChcbiAgICAgICAgZC5nZXRVVENGdWxsWWVhcigpICtcbiAgICAgICAgJy0nICtcbiAgICAgICAgcGFkKGQuZ2V0VVRDTW9udGgoKSArIDEpICtcbiAgICAgICAgJy0nICtcbiAgICAgICAgcGFkKGQuZ2V0VVRDRGF0ZSgpKSArXG4gICAgICAgICdUJyArXG4gICAgICAgIHBhZChkLmdldFVUQ0hvdXJzKCkpICtcbiAgICAgICAgJzonICtcbiAgICAgICAgcGFkKGQuZ2V0VVRDTWludXRlcygpKSArXG4gICAgICAgICc6JyArXG4gICAgICAgIHBhZChkLmdldFVUQ1NlY29uZHMoKSlcbiAgICApXG59XG5cbmV4cG9ydCBjb25zdCBfdHJ5ID0gZnVuY3Rpb24gPFQ+KGZuOiAoKSA9PiBUKTogVCB8IHVuZGVmaW5lZCB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGZuKClcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWRcbiAgICB9XG59XG5cbmV4cG9ydCBjb25zdCBfc2FmZXdyYXAgPSBmdW5jdGlvbiA8RiBleHRlbmRzICguLi5hcmdzOiBhbnlbXSkgPT4gYW55ID0gKC4uLmFyZ3M6IGFueVtdKSA9PiBhbnk+KGY6IEYpOiBGIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKC4uLmFyZ3MpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvYmFuLXRzLWNvbW1lbnRcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgIHJldHVybiBmLmFwcGx5KHRoaXMsIGFyZ3MpXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGxvZ2dlci5jcml0aWNhbChcbiAgICAgICAgICAgICAgICAnSW1wbGVtZW50YXRpb24gZXJyb3IuIFBsZWFzZSB0dXJuIG9uIGRlYnVnIG1vZGUgYW5kIG9wZW4gYSB0aWNrZXQgb24gaHR0cHM6Ly9hcHAucG9zdGhvZy5jb20vaG9tZSNwYW5lbD1zdXBwb3J0JTNBc3VwcG9ydCUzQS4nXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBsb2dnZXIuY3JpdGljYWwoZSlcbiAgICAgICAgfVxuICAgIH0gYXMgRlxufVxuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2Jhbi10eXBlc1xuZXhwb3J0IGNvbnN0IF9zYWZld3JhcF9jbGFzcyA9IGZ1bmN0aW9uIChrbGFzczogRnVuY3Rpb24sIGZ1bmN0aW9uczogc3RyaW5nW10pOiB2b2lkIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZ1bmN0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICBrbGFzcy5wcm90b3R5cGVbZnVuY3Rpb25zW2ldXSA9IF9zYWZld3JhcChrbGFzcy5wcm90b3R5cGVbZnVuY3Rpb25zW2ldXSlcbiAgICB9XG59XG5cbmV4cG9ydCBjb25zdCBfc2FmZXdyYXBfaW5zdGFuY2VfbWV0aG9kcyA9IGZ1bmN0aW9uIChvYmo6IFJlY29yZDxzdHJpbmcsIGFueT4pOiB2b2lkIHtcbiAgICBmb3IgKGNvbnN0IGZ1bmMgaW4gb2JqKSB7XG4gICAgICAgIGlmIChfaXNGdW5jdGlvbihvYmpbZnVuY10pKSB7XG4gICAgICAgICAgICBvYmpbZnVuY10gPSBfc2FmZXdyYXAob2JqW2Z1bmNdKVxuICAgICAgICB9XG4gICAgfVxufVxuXG5leHBvcnQgY29uc3QgX3N0cmlwX2VtcHR5X3Byb3BlcnRpZXMgPSBmdW5jdGlvbiAocDogUHJvcGVydGllcyk6IFByb3BlcnRpZXMge1xuICAgIGNvbnN0IHJldDogUHJvcGVydGllcyA9IHt9XG4gICAgX2VhY2gocCwgZnVuY3Rpb24gKHYsIGspIHtcbiAgICAgICAgaWYgKF9pc1N0cmluZyh2KSAmJiB2Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHJldFtrXSA9IHZcbiAgICAgICAgfVxuICAgIH0pXG4gICAgcmV0dXJuIHJldFxufVxuXG4vKipcbiAqIERlZXAgY29waWVzIGFuIG9iamVjdC5cbiAqIEl0IGhhbmRsZXMgY3ljbGVzIGJ5IHJlcGxhY2luZyBhbGwgcmVmZXJlbmNlcyB0byB0aGVtIHdpdGggYHVuZGVmaW5lZGBcbiAqIEFsc28gc3VwcG9ydHMgY3VzdG9taXppbmcgbmF0aXZlIHZhbHVlc1xuICpcbiAqIEBwYXJhbSB2YWx1ZVxuICogQHBhcmFtIGN1c3RvbWl6ZXJcbiAqIEByZXR1cm5zIHt7fXx1bmRlZmluZWR8Kn1cbiAqL1xuZnVuY3Rpb24gZGVlcENpcmN1bGFyQ29weTxUIGV4dGVuZHMgUmVjb3JkPHN0cmluZywgYW55PiA9IFJlY29yZDxzdHJpbmcsIGFueT4+KFxuICAgIHZhbHVlOiBULFxuICAgIGN1c3RvbWl6ZXI/OiA8SyBleHRlbmRzIGtleW9mIFQgPSBrZXlvZiBUPih2YWx1ZTogVFtLXSwga2V5PzogSykgPT4gVFtLXVxuKTogVCB8IHVuZGVmaW5lZCB7XG4gICAgY29uc3QgQ09QWV9JTl9QUk9HUkVTU19TRVQgPSBuZXcgU2V0KClcblxuICAgIGZ1bmN0aW9uIGludGVybmFsRGVlcENpcmN1bGFyQ29weSh2YWx1ZTogVCwga2V5Pzogc3RyaW5nKTogVCB8IHVuZGVmaW5lZCB7XG4gICAgICAgIGlmICh2YWx1ZSAhPT0gT2JqZWN0KHZhbHVlKSkgcmV0dXJuIGN1c3RvbWl6ZXIgPyBjdXN0b21pemVyKHZhbHVlIGFzIGFueSwga2V5KSA6IHZhbHVlIC8vIHByaW1pdGl2ZSB2YWx1ZVxuXG4gICAgICAgIGlmIChDT1BZX0lOX1BST0dSRVNTX1NFVC5oYXModmFsdWUpKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgICAgIENPUFlfSU5fUFJPR1JFU1NfU0VULmFkZCh2YWx1ZSlcbiAgICAgICAgbGV0IHJlc3VsdDogVFxuXG4gICAgICAgIGlmIChfaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IFtdIGFzIGFueSBhcyBUXG4gICAgICAgICAgICBfZWFjaEFycmF5KHZhbHVlLCAoaXQpID0+IHtcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChpbnRlcm5hbERlZXBDaXJjdWxhckNvcHkoaXQpKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHt9IGFzIFRcbiAgICAgICAgICAgIF9lYWNoKHZhbHVlLCAodmFsLCBrZXkpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIUNPUFlfSU5fUFJPR1JFU1NfU0VULmhhcyh2YWwpKSB7XG4gICAgICAgICAgICAgICAgICAgIDsocmVzdWx0IGFzIGFueSlba2V5XSA9IGludGVybmFsRGVlcENpcmN1bGFyQ29weSh2YWwsIGtleSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHRcbiAgICB9XG4gICAgcmV0dXJuIGludGVybmFsRGVlcENpcmN1bGFyQ29weSh2YWx1ZSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF9jb3B5QW5kVHJ1bmNhdGVTdHJpbmdzPFQgZXh0ZW5kcyBSZWNvcmQ8c3RyaW5nLCBhbnk+ID0gUmVjb3JkPHN0cmluZywgYW55Pj4oXG4gICAgb2JqZWN0OiBULFxuICAgIG1heFN0cmluZ0xlbmd0aDogbnVtYmVyIHwgbnVsbFxuKTogVCB7XG4gICAgcmV0dXJuIGRlZXBDaXJjdWxhckNvcHkob2JqZWN0LCAodmFsdWU6IGFueSkgPT4ge1xuICAgICAgICBpZiAoX2lzU3RyaW5nKHZhbHVlKSAmJiAhX2lzTnVsbChtYXhTdHJpbmdMZW5ndGgpKSB7XG4gICAgICAgICAgICByZXR1cm4gKHZhbHVlIGFzIHN0cmluZykuc2xpY2UoMCwgbWF4U3RyaW5nTGVuZ3RoKVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZVxuICAgIH0pIGFzIFRcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF9iYXNlNjRFbmNvZGUoZGF0YTogbnVsbCk6IG51bGxcbmV4cG9ydCBmdW5jdGlvbiBfYmFzZTY0RW5jb2RlKGRhdGE6IHVuZGVmaW5lZCk6IHVuZGVmaW5lZFxuZXhwb3J0IGZ1bmN0aW9uIF9iYXNlNjRFbmNvZGUoZGF0YTogc3RyaW5nKTogc3RyaW5nXG5leHBvcnQgZnVuY3Rpb24gX2Jhc2U2NEVuY29kZShkYXRhOiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkKTogc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZCB7XG4gICAgY29uc3QgYjY0ID0gJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky89J1xuICAgIGxldCBvMSxcbiAgICAgICAgbzIsXG4gICAgICAgIG8zLFxuICAgICAgICBoMSxcbiAgICAgICAgaDIsXG4gICAgICAgIGgzLFxuICAgICAgICBoNCxcbiAgICAgICAgYml0cyxcbiAgICAgICAgaSA9IDAsXG4gICAgICAgIGFjID0gMCxcbiAgICAgICAgZW5jID0gJydcbiAgICBjb25zdCB0bXBfYXJyOiBzdHJpbmdbXSA9IFtdXG5cbiAgICBpZiAoIWRhdGEpIHtcbiAgICAgICAgcmV0dXJuIGRhdGFcbiAgICB9XG5cbiAgICBkYXRhID0gX3V0ZjhFbmNvZGUoZGF0YSlcblxuICAgIGRvIHtcbiAgICAgICAgLy8gcGFjayB0aHJlZSBvY3RldHMgaW50byBmb3VyIGhleGV0c1xuICAgICAgICBvMSA9IGRhdGEuY2hhckNvZGVBdChpKyspXG4gICAgICAgIG8yID0gZGF0YS5jaGFyQ29kZUF0KGkrKylcbiAgICAgICAgbzMgPSBkYXRhLmNoYXJDb2RlQXQoaSsrKVxuXG4gICAgICAgIGJpdHMgPSAobzEgPDwgMTYpIHwgKG8yIDw8IDgpIHwgbzNcblxuICAgICAgICBoMSA9IChiaXRzID4+IDE4KSAmIDB4M2ZcbiAgICAgICAgaDIgPSAoYml0cyA+PiAxMikgJiAweDNmXG4gICAgICAgIGgzID0gKGJpdHMgPj4gNikgJiAweDNmXG4gICAgICAgIGg0ID0gYml0cyAmIDB4M2ZcblxuICAgICAgICAvLyB1c2UgaGV4ZXRzIHRvIGluZGV4IGludG8gYjY0LCBhbmQgYXBwZW5kIHJlc3VsdCB0byBlbmNvZGVkIHN0cmluZ1xuICAgICAgICB0bXBfYXJyW2FjKytdID0gYjY0LmNoYXJBdChoMSkgKyBiNjQuY2hhckF0KGgyKSArIGI2NC5jaGFyQXQoaDMpICsgYjY0LmNoYXJBdChoNClcbiAgICB9IHdoaWxlIChpIDwgZGF0YS5sZW5ndGgpXG5cbiAgICBlbmMgPSB0bXBfYXJyLmpvaW4oJycpXG5cbiAgICBzd2l0Y2ggKGRhdGEubGVuZ3RoICUgMykge1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICBlbmMgPSBlbmMuc2xpY2UoMCwgLTIpICsgJz09J1xuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgZW5jID0gZW5jLnNsaWNlKDAsIC0xKSArICc9J1xuICAgICAgICAgICAgYnJlYWtcbiAgICB9XG5cbiAgICByZXR1cm4gZW5jXG59XG5cbmV4cG9ydCBjb25zdCBfdXRmOEVuY29kZSA9IGZ1bmN0aW9uIChzdHJpbmc6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgc3RyaW5nID0gKHN0cmluZyArICcnKS5yZXBsYWNlKC9cXHJcXG4vZywgJ1xcbicpLnJlcGxhY2UoL1xcci9nLCAnXFxuJylcblxuICAgIGxldCB1dGZ0ZXh0ID0gJycsXG4gICAgICAgIHN0YXJ0LFxuICAgICAgICBlbmRcbiAgICBsZXQgc3RyaW5nbCA9IDAsXG4gICAgICAgIG5cblxuICAgIHN0YXJ0ID0gZW5kID0gMFxuICAgIHN0cmluZ2wgPSBzdHJpbmcubGVuZ3RoXG5cbiAgICBmb3IgKG4gPSAwOyBuIDwgc3RyaW5nbDsgbisrKSB7XG4gICAgICAgIGNvbnN0IGMxID0gc3RyaW5nLmNoYXJDb2RlQXQobilcbiAgICAgICAgbGV0IGVuYyA9IG51bGxcblxuICAgICAgICBpZiAoYzEgPCAxMjgpIHtcbiAgICAgICAgICAgIGVuZCsrXG4gICAgICAgIH0gZWxzZSBpZiAoYzEgPiAxMjcgJiYgYzEgPCAyMDQ4KSB7XG4gICAgICAgICAgICBlbmMgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKChjMSA+PiA2KSB8IDE5MiwgKGMxICYgNjMpIHwgMTI4KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZW5jID0gU3RyaW5nLmZyb21DaGFyQ29kZSgoYzEgPj4gMTIpIHwgMjI0LCAoKGMxID4+IDYpICYgNjMpIHwgMTI4LCAoYzEgJiA2MykgfCAxMjgpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFfaXNOdWxsKGVuYykpIHtcbiAgICAgICAgICAgIGlmIChlbmQgPiBzdGFydCkge1xuICAgICAgICAgICAgICAgIHV0ZnRleHQgKz0gc3RyaW5nLnN1YnN0cmluZyhzdGFydCwgZW5kKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdXRmdGV4dCArPSBlbmNcbiAgICAgICAgICAgIHN0YXJ0ID0gZW5kID0gbiArIDFcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmIChlbmQgPiBzdGFydCkge1xuICAgICAgICB1dGZ0ZXh0ICs9IHN0cmluZy5zdWJzdHJpbmcoc3RhcnQsIHN0cmluZy5sZW5ndGgpXG4gICAgfVxuXG4gICAgcmV0dXJuIHV0ZnRleHRcbn1cblxuZXhwb3J0IGNvbnN0IF9yZWdpc3Rlcl9ldmVudCA9IChmdW5jdGlvbiAoKSB7XG4gICAgLy8gd3JpdHRlbiBieSBEZWFuIEVkd2FyZHMsIDIwMDVcbiAgICAvLyB3aXRoIGlucHV0IGZyb20gVGlubyBaaWpkZWwgLSBjcmlzcEB4czRhbGwubmxcbiAgICAvLyB3aXRoIGlucHV0IGZyb20gQ2FybCBTdmVycmUgLSBtYWlsQGNhcmxzdmVycmUuY29tXG4gICAgLy8gd2l0aCBpbnB1dCBmcm9tIFBvc3RIb2dcbiAgICAvLyBodHRwOi8vZGVhbi5lZHdhcmRzLm5hbWUvd2VibG9nLzIwMDUvMTAvYWRkLWV2ZW50L1xuICAgIC8vIGh0dHBzOi8vZ2lzdC5naXRodWIuY29tLzE5MzA0NDBcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBlbGVtZW50XG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGVcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKC4uLiopfSBoYW5kbGVyXG4gICAgICogQHBhcmFtIHtib29sZWFuPX0gb2xkU2Nob29sXG4gICAgICogQHBhcmFtIHtib29sZWFuPX0gdXNlQ2FwdHVyZVxuICAgICAqL1xuICAgIGNvbnN0IHJlZ2lzdGVyX2V2ZW50ID0gZnVuY3Rpb24gKFxuICAgICAgICBlbGVtZW50OiBFbGVtZW50IHwgV2luZG93IHwgRG9jdW1lbnQgfCBOb2RlLFxuICAgICAgICB0eXBlOiBzdHJpbmcsXG4gICAgICAgIGhhbmRsZXI6IEV2ZW50SGFuZGxlcixcbiAgICAgICAgb2xkU2Nob29sPzogYm9vbGVhbixcbiAgICAgICAgdXNlQ2FwdHVyZT86IGJvb2xlYW5cbiAgICApIHtcbiAgICAgICAgaWYgKCFlbGVtZW50KSB7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ05vIHZhbGlkIGVsZW1lbnQgcHJvdmlkZWQgdG8gcmVnaXN0ZXJfZXZlbnQnKVxuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZWxlbWVudC5hZGRFdmVudExpc3RlbmVyICYmICFvbGRTY2hvb2wpIHtcbiAgICAgICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBoYW5kbGVyLCAhIXVzZUNhcHR1cmUpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBvbnR5cGUgPSAnb24nICsgdHlwZVxuICAgICAgICAgICAgY29uc3Qgb2xkX2hhbmRsZXIgPSAoZWxlbWVudCBhcyBhbnkpW29udHlwZV0gLy8gY2FuIGJlIHVuZGVmaW5lZFxuICAgICAgICAgICAgOyhlbGVtZW50IGFzIGFueSlbb250eXBlXSA9IG1ha2VIYW5kbGVyKGVsZW1lbnQsIGhhbmRsZXIsIG9sZF9oYW5kbGVyKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbWFrZUhhbmRsZXIoXG4gICAgICAgIGVsZW1lbnQ6IEVsZW1lbnQgfCBXaW5kb3cgfCBEb2N1bWVudCB8IE5vZGUsXG4gICAgICAgIG5ld19oYW5kbGVyOiBFdmVudEhhbmRsZXIsXG4gICAgICAgIG9sZF9oYW5kbGVyczogRXZlbnRIYW5kbGVyXG4gICAgKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoZXZlbnQ6IEV2ZW50KTogYm9vbGVhbiB8IHZvaWQge1xuICAgICAgICAgICAgZXZlbnQgPSBldmVudCB8fCBmaXhFdmVudCh3aW5kb3c/LmV2ZW50KVxuXG4gICAgICAgICAgICAvLyB0aGlzIGJhc2ljYWxseSBoYXBwZW5zIGluIGZpcmVmb3ggd2hlbmV2ZXIgYW5vdGhlciBzY3JpcHRcbiAgICAgICAgICAgIC8vIG92ZXJ3cml0ZXMgdGhlIG9ubG9hZCBjYWxsYmFjayBhbmQgZG9lc24ndCBwYXNzIHRoZSBldmVudFxuICAgICAgICAgICAgLy8gb2JqZWN0IHRvIHByZXZpb3VzbHkgZGVmaW5lZCBjYWxsYmFja3MuICBBbGwgdGhlIGJyb3dzZXJzXG4gICAgICAgICAgICAvLyB0aGF0IGRvbid0IGRlZmluZSB3aW5kb3cuZXZlbnQgaW1wbGVtZW50IGFkZEV2ZW50TGlzdGVuZXJcbiAgICAgICAgICAgIC8vIHNvIHRoZSBkb21fbG9hZGVkIGhhbmRsZXIgd2lsbCBzdGlsbCBiZSBmaXJlZCBhcyB1c3VhbC5cbiAgICAgICAgICAgIGlmICghZXZlbnQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxldCByZXQgPSB0cnVlXG4gICAgICAgICAgICBsZXQgb2xkX3Jlc3VsdDogYW55XG5cbiAgICAgICAgICAgIGlmIChfaXNGdW5jdGlvbihvbGRfaGFuZGxlcnMpKSB7XG4gICAgICAgICAgICAgICAgb2xkX3Jlc3VsdCA9IG9sZF9oYW5kbGVycyhldmVudClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG5ld19yZXN1bHQgPSBuZXdfaGFuZGxlci5jYWxsKGVsZW1lbnQsIGV2ZW50KVxuXG4gICAgICAgICAgICBpZiAoZmFsc2UgPT09IG9sZF9yZXN1bHQgfHwgZmFsc2UgPT09IG5ld19yZXN1bHQpIHtcbiAgICAgICAgICAgICAgICByZXQgPSBmYWxzZVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gcmV0XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBmaXhFdmVudChldmVudDogRXZlbnQgfCB1bmRlZmluZWQpOiBFdmVudCB8IHVuZGVmaW5lZCB7XG4gICAgICAgIGlmIChldmVudCkge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQgPSBmaXhFdmVudC5wcmV2ZW50RGVmYXVsdFxuICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uID0gZml4RXZlbnQuc3RvcFByb3BhZ2F0aW9uXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGV2ZW50XG4gICAgfVxuICAgIGZpeEV2ZW50LnByZXZlbnREZWZhdWx0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICA7KHRoaXMgYXMgYW55IGFzIEV2ZW50KS5yZXR1cm5WYWx1ZSA9IGZhbHNlXG4gICAgfVxuICAgIGZpeEV2ZW50LnN0b3BQcm9wYWdhdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgOyh0aGlzIGFzIGFueSBhcyBFdmVudCkuY2FuY2VsQnViYmxlID0gdHJ1ZVxuICAgIH1cblxuICAgIHJldHVybiByZWdpc3Rlcl9ldmVudFxufSkoKVxuXG5leHBvcnQgZnVuY3Rpb24gbG9hZFNjcmlwdChzY3JpcHRVcmxUb0xvYWQ6IHN0cmluZywgY2FsbGJhY2s6IChlcnJvcj86IHN0cmluZyB8IEV2ZW50LCBldmVudD86IEV2ZW50KSA9PiB2b2lkKTogdm9pZCB7XG4gICAgY29uc3QgYWRkU2NyaXB0ID0gKCkgPT4ge1xuICAgICAgICBpZiAoIWRvY3VtZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soJ2RvY3VtZW50IG5vdCBmb3VuZCcpXG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc2NyaXB0VGFnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0JylcbiAgICAgICAgc2NyaXB0VGFnLnR5cGUgPSAndGV4dC9qYXZhc2NyaXB0J1xuICAgICAgICBzY3JpcHRUYWcuc3JjID0gc2NyaXB0VXJsVG9Mb2FkXG4gICAgICAgIHNjcmlwdFRhZy5vbmxvYWQgPSAoZXZlbnQpID0+IGNhbGxiYWNrKHVuZGVmaW5lZCwgZXZlbnQpXG4gICAgICAgIHNjcmlwdFRhZy5vbmVycm9yID0gKGVycm9yKSA9PiBjYWxsYmFjayhlcnJvcilcblxuICAgICAgICBjb25zdCBzY3JpcHRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnYm9keSA+IHNjcmlwdCcpXG4gICAgICAgIGlmIChzY3JpcHRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHNjcmlwdHNbMF0ucGFyZW50Tm9kZT8uaW5zZXJ0QmVmb3JlKHNjcmlwdFRhZywgc2NyaXB0c1swXSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIEluIGV4Y2VwdGlvbmFsIHNpdHVhdGlvbnMgdGhpcyBjYWxsIG1pZ2h0IGxvYWQgYmVmb3JlIHRoZSBET00gaXMgZnVsbHkgcmVhZHkuXG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHNjcmlwdFRhZylcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmIChkb2N1bWVudD8uYm9keSkge1xuICAgICAgICBhZGRTY3JpcHQoKVxuICAgIH0gZWxzZSB7XG4gICAgICAgIGRvY3VtZW50Py5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgYWRkU2NyaXB0KVxuICAgIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzQ3Jvc3NEb21haW5Db29raWUoZG9jdW1lbnRMb2NhdGlvbjogTG9jYXRpb24gfCB1bmRlZmluZWQpIHtcbiAgICBjb25zdCBob3N0bmFtZSA9IGRvY3VtZW50TG9jYXRpb24/Lmhvc3RuYW1lXG5cbiAgICBpZiAoIV9pc1N0cmluZyhob3N0bmFtZSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIC8vIHNwbGl0IGFuZCBzbGljZSBpc24ndCBhIGdyZWF0IHdheSB0byBtYXRjaCBhcmJpdHJhcnkgZG9tYWlucyxcbiAgICAvLyBidXQgaXQncyBnb29kIGVub3VnaCBmb3IgZW5zdXJpbmcgd2Ugb25seSBtYXRjaCBoZXJva3VhcHAuY29tIHdoZW4gaXQgaXMgdGhlIFRMRFxuICAgIC8vIGZvciB0aGUgaG9zdG5hbWVcbiAgICByZXR1cm4gaG9zdG5hbWUuc3BsaXQoJy4nKS5zbGljZSgtMikuam9pbignLicpICE9PSAnaGVyb2t1YXBwLmNvbSdcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzRGlzdGluY3RJZFN0cmluZ0xpa2UodmFsdWU6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBbJ2Rpc3RpbmN0X2lkJywgJ2Rpc3RpbmN0aWQnXS5pbmNsdWRlcyh2YWx1ZS50b0xvd2VyQ2FzZSgpKVxufVxuIiwgImltcG9ydCB7IEF1dG9jYXB0dXJlQ29uZmlnLCBQcm9wZXJ0aWVzIH0gZnJvbSAnLi90eXBlcydcbmltcG9ydCB7IF9lYWNoLCBfZW50cmllcywgX2luY2x1ZGVzLCBfdHJpbSB9IGZyb20gJy4vdXRpbHMnXG5cbmltcG9ydCB7IF9pc0FycmF5LCBfaXNOdWxsaXNoLCBfaXNTdHJpbmcsIF9pc1VuZGVmaW5lZCB9IGZyb20gJy4vdXRpbHMvdHlwZS11dGlscydcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJy4vdXRpbHMvbG9nZ2VyJ1xuaW1wb3J0IHsgd2luZG93IH0gZnJvbSAnLi91dGlscy9nbG9iYWxzJ1xuXG5leHBvcnQgZnVuY3Rpb24gc3BsaXRDbGFzc1N0cmluZyhzOiBzdHJpbmcpOiBzdHJpbmdbXSB7XG4gICAgcmV0dXJuIHMgPyBfdHJpbShzKS5zcGxpdCgvXFxzKy8pIDogW11cbn1cblxuLypcbiAqIEdldCB0aGUgY2xhc3NOYW1lIG9mIGFuIGVsZW1lbnQsIGFjY291bnRpbmcgZm9yIGVkZ2UgY2FzZXMgd2hlcmUgZWxlbWVudC5jbGFzc05hbWUgaXMgYW4gb2JqZWN0XG4gKlxuICogQmVjYXVzZSB0aGlzIGlzIGEgc3RyaW5nIGl0IGNhbiBjb250YWluIHVuZXhwZWN0ZWQgY2hhcmFjdGVyc1xuICogU28sIHRoaXMgbWV0aG9kIHNhZmVseSBzcGxpdHMgdGhlIGNsYXNzTmFtZSBhbmQgcmV0dXJucyB0aGF0IGFycmF5LlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q2xhc3NOYW1lcyhlbDogRWxlbWVudCk6IHN0cmluZ1tdIHtcbiAgICBsZXQgY2xhc3NOYW1lID0gJydcbiAgICBzd2l0Y2ggKHR5cGVvZiBlbC5jbGFzc05hbWUpIHtcbiAgICAgICAgY2FzZSAnc3RyaW5nJzpcbiAgICAgICAgICAgIGNsYXNzTmFtZSA9IGVsLmNsYXNzTmFtZVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgLy8gVE9ETzogd2hlbiBpcyB0aGlzIGV2ZXIgdXNlZD9cbiAgICAgICAgY2FzZSAnb2JqZWN0JzogLy8gaGFuZGxlIGNhc2VzIHdoZXJlIGNsYXNzTmFtZSBtaWdodCBiZSBTVkdBbmltYXRlZFN0cmluZyBvciBzb21lIG90aGVyIHR5cGVcbiAgICAgICAgICAgIGNsYXNzTmFtZSA9XG4gICAgICAgICAgICAgICAgKCdiYXNlVmFsJyBpbiBlbC5jbGFzc05hbWUgPyAoZWwuY2xhc3NOYW1lIGFzIGFueSkuYmFzZVZhbCA6IG51bGwpIHx8IGVsLmdldEF0dHJpYnV0ZSgnY2xhc3MnKSB8fCAnJ1xuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGNsYXNzTmFtZSA9ICcnXG4gICAgfVxuXG4gICAgcmV0dXJuIHNwbGl0Q2xhc3NTdHJpbmcoY2xhc3NOYW1lKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gbWFrZVNhZmVUZXh0KHM6IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQpOiBzdHJpbmcgfCBudWxsIHtcbiAgICBpZiAoX2lzTnVsbGlzaChzKSkge1xuICAgICAgICByZXR1cm4gbnVsbFxuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICAgIF90cmltKHMpXG4gICAgICAgICAgICAvLyBzY3J1YiBwb3RlbnRpYWxseSBzZW5zaXRpdmUgdmFsdWVzXG4gICAgICAgICAgICAuc3BsaXQoLyhcXHMrKS8pXG4gICAgICAgICAgICAuZmlsdGVyKHNob3VsZENhcHR1cmVWYWx1ZSlcbiAgICAgICAgICAgIC5qb2luKCcnKVxuICAgICAgICAgICAgLy8gbm9ybWFsaXplIHdoaXRlc3BhY2VcbiAgICAgICAgICAgIC5yZXBsYWNlKC9bXFxyXFxuXS9nLCAnICcpXG4gICAgICAgICAgICAucmVwbGFjZSgvWyBdKy9nLCAnICcpXG4gICAgICAgICAgICAvLyB0cnVuY2F0ZVxuICAgICAgICAgICAgLnN1YnN0cmluZygwLCAyNTUpXG4gICAgKVxufVxuXG4vKlxuICogR2V0IHRoZSBkaXJlY3QgdGV4dCBjb250ZW50IG9mIGFuIGVsZW1lbnQsIHByb3RlY3RpbmcgYWdhaW5zdCBzZW5zaXRpdmUgZGF0YSBjb2xsZWN0aW9uLlxuICogQ29uY2F0cyB0ZXh0Q29udGVudCBvZiBlYWNoIG9mIHRoZSBlbGVtZW50J3MgdGV4dCBub2RlIGNoaWxkcmVuOyB0aGlzIGF2b2lkcyBwb3RlbnRpYWxcbiAqIGNvbGxlY3Rpb24gb2Ygc2Vuc2l0aXZlIGRhdGEgdGhhdCBjb3VsZCBoYXBwZW4gaWYgd2UgdXNlZCBlbGVtZW50LnRleHRDb250ZW50IGFuZCB0aGVcbiAqIGVsZW1lbnQgaGFkIHNlbnNpdGl2ZSBjaGlsZCBlbGVtZW50cywgc2luY2UgZWxlbWVudC50ZXh0Q29udGVudCBpbmNsdWRlcyBjaGlsZCBjb250ZW50LlxuICogU2NydWJzIHZhbHVlcyB0aGF0IGxvb2sgbGlrZSB0aGV5IGNvdWxkIGJlIHNlbnNpdGl2ZSAoaS5lLiBjYyBvciBzc24gbnVtYmVyKS5cbiAqIEBwYXJhbSB7RWxlbWVudH0gZWwgLSBlbGVtZW50IHRvIGdldCB0aGUgdGV4dCBvZlxuICogQHJldHVybnMge3N0cmluZ30gdGhlIGVsZW1lbnQncyBkaXJlY3QgdGV4dCBjb250ZW50XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRTYWZlVGV4dChlbDogRWxlbWVudCk6IHN0cmluZyB7XG4gICAgbGV0IGVsVGV4dCA9ICcnXG5cbiAgICBpZiAoc2hvdWxkQ2FwdHVyZUVsZW1lbnQoZWwpICYmICFpc1NlbnNpdGl2ZUVsZW1lbnQoZWwpICYmIGVsLmNoaWxkTm9kZXMgJiYgZWwuY2hpbGROb2Rlcy5sZW5ndGgpIHtcbiAgICAgICAgX2VhY2goZWwuY2hpbGROb2RlcywgZnVuY3Rpb24gKGNoaWxkKSB7XG4gICAgICAgICAgICBpZiAoaXNUZXh0Tm9kZShjaGlsZCkgJiYgY2hpbGQudGV4dENvbnRlbnQpIHtcbiAgICAgICAgICAgICAgICBlbFRleHQgKz0gbWFrZVNhZmVUZXh0KGNoaWxkLnRleHRDb250ZW50KSA/PyAnJ1xuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIHJldHVybiBfdHJpbShlbFRleHQpXG59XG5cbi8qXG4gKiBDaGVjayB3aGV0aGVyIGFuIGVsZW1lbnQgaGFzIG5vZGVUeXBlIE5vZGUuRUxFTUVOVF9OT0RFXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsIC0gZWxlbWVudCB0byBjaGVja1xuICogQHJldHVybnMge2Jvb2xlYW59IHdoZXRoZXIgZWwgaXMgb2YgdGhlIGNvcnJlY3Qgbm9kZVR5cGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzRWxlbWVudE5vZGUoZWw6IE5vZGUgfCBFbGVtZW50IHwgdW5kZWZpbmVkIHwgbnVsbCk6IGVsIGlzIEVsZW1lbnQge1xuICAgIHJldHVybiAhIWVsICYmIGVsLm5vZGVUeXBlID09PSAxIC8vIE5vZGUuRUxFTUVOVF9OT0RFIC0gdXNlIGludGVnZXIgY29uc3RhbnQgZm9yIGJyb3dzZXIgcG9ydGFiaWxpdHlcbn1cblxuLypcbiAqIENoZWNrIHdoZXRoZXIgYW4gZWxlbWVudCBpcyBvZiBhIGdpdmVuIHRhZyB0eXBlLlxuICogRHVlIHRvIHBvdGVudGlhbCByZWZlcmVuY2UgZGlzY3JlcGFuY2llcyAoc3VjaCBhcyB0aGUgd2ViY29tcG9uZW50cy5qcyBwb2x5ZmlsbCksXG4gKiB3ZSB3YW50IHRvIG1hdGNoIHRhZ05hbWVzIGluc3RlYWQgb2Ygc3BlY2lmaWMgcmVmZXJlbmNlcyBiZWNhdXNlIHNvbWV0aGluZyBsaWtlXG4gKiBlbGVtZW50ID09PSBkb2N1bWVudC5ib2R5IHdvbid0IGFsd2F5cyB3b3JrIGJlY2F1c2UgZWxlbWVudCBtaWdodCBub3QgYmUgYSBuYXRpdmVcbiAqIGVsZW1lbnQuXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsIC0gZWxlbWVudCB0byBjaGVja1xuICogQHBhcmFtIHtzdHJpbmd9IHRhZyAtIHRhZyBuYW1lIChlLmcuLCBcImRpdlwiKVxuICogQHJldHVybnMge2Jvb2xlYW59IHdoZXRoZXIgZWwgaXMgb2YgdGhlIGdpdmVuIHRhZyB0eXBlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1RhZyhlbDogRWxlbWVudCB8IHVuZGVmaW5lZCB8IG51bGwsIHRhZzogc3RyaW5nKTogZWwgaXMgSFRNTEVsZW1lbnQge1xuICAgIHJldHVybiAhIWVsICYmICEhZWwudGFnTmFtZSAmJiBlbC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09IHRhZy50b0xvd2VyQ2FzZSgpXG59XG5cbi8qXG4gKiBDaGVjayB3aGV0aGVyIGFuIGVsZW1lbnQgaGFzIG5vZGVUeXBlIE5vZGUuVEVYVF9OT0RFXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsIC0gZWxlbWVudCB0byBjaGVja1xuICogQHJldHVybnMge2Jvb2xlYW59IHdoZXRoZXIgZWwgaXMgb2YgdGhlIGNvcnJlY3Qgbm9kZVR5cGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzVGV4dE5vZGUoZWw6IEVsZW1lbnQgfCB1bmRlZmluZWQgfCBudWxsKTogZWwgaXMgSFRNTEVsZW1lbnQge1xuICAgIHJldHVybiAhIWVsICYmIGVsLm5vZGVUeXBlID09PSAzIC8vIE5vZGUuVEVYVF9OT0RFIC0gdXNlIGludGVnZXIgY29uc3RhbnQgZm9yIGJyb3dzZXIgcG9ydGFiaWxpdHlcbn1cblxuLypcbiAqIENoZWNrIHdoZXRoZXIgYW4gZWxlbWVudCBoYXMgbm9kZVR5cGUgTm9kZS5ET0NVTUVOVF9GUkFHTUVOVF9OT0RFXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsIC0gZWxlbWVudCB0byBjaGVja1xuICogQHJldHVybnMge2Jvb2xlYW59IHdoZXRoZXIgZWwgaXMgb2YgdGhlIGNvcnJlY3Qgbm9kZVR5cGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzRG9jdW1lbnRGcmFnbWVudChlbDogRWxlbWVudCB8IFBhcmVudE5vZGUgfCB1bmRlZmluZWQgfCBudWxsKTogZWwgaXMgRG9jdW1lbnRGcmFnbWVudCB7XG4gICAgcmV0dXJuICEhZWwgJiYgZWwubm9kZVR5cGUgPT09IDExIC8vIE5vZGUuRE9DVU1FTlRfRlJBR01FTlRfTk9ERSAtIHVzZSBpbnRlZ2VyIGNvbnN0YW50IGZvciBicm93c2VyIHBvcnRhYmlsaXR5XG59XG5cbmV4cG9ydCBjb25zdCBhdXRvY2FwdHVyZUNvbXBhdGlibGVFbGVtZW50cyA9IFsnYScsICdidXR0b24nLCAnZm9ybScsICdpbnB1dCcsICdzZWxlY3QnLCAndGV4dGFyZWEnLCAnbGFiZWwnXVxuXG4vKlxuIGlmIHRoZXJlIGlzIG5vIGNvbmZpZywgdGhlbiBhbGwgZWxlbWVudHMgYXJlIGFsbG93ZWRcbiBpZiB0aGVyZSBpcyBhIGNvbmZpZywgYW5kIHRoZXJlIGlzIGFuIGFsbG93IGxpc3QsIHRoZW4gb25seSBlbGVtZW50cyBpbiB0aGUgYWxsb3cgbGlzdCBhcmUgYWxsb3dlZFxuIGFzc3VtZXMgdGhhdCBzb21lIG90aGVyIGNvZGUgaXMgY2hlY2tpbmcgdGhpcyBlbGVtZW50J3MgcGFyZW50c1xuICovXG5mdW5jdGlvbiBjaGVja0lmRWxlbWVudFRyZWVQYXNzZXNFbGVtZW50QWxsb3dMaXN0KFxuICAgIGVsZW1lbnRzOiBFbGVtZW50W10sXG4gICAgYXV0b2NhcHR1cmVDb25maWc6IEF1dG9jYXB0dXJlQ29uZmlnIHwgdW5kZWZpbmVkXG4pOiBib29sZWFuIHtcbiAgICBjb25zdCBhbGxvd2xpc3QgPSBhdXRvY2FwdHVyZUNvbmZpZz8uZWxlbWVudF9hbGxvd2xpc3RcbiAgICBpZiAoX2lzVW5kZWZpbmVkKGFsbG93bGlzdCkpIHtcbiAgICAgICAgLy8gZXZlcnl0aGluZyBpcyBhbGxvd2VkLCB3aGVuIHRoZXJlIGlzIG5vIGFsbG93IGxpc3RcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG5cbiAgICAvLyBjaGVjayBlYWNoIGVsZW1lbnQgaW4gdGhlIHRyZWVcbiAgICAvLyBpZiBhbnkgb2YgdGhlIGVsZW1lbnRzIGFyZSBpbiB0aGUgYWxsb3cgbGlzdCwgdGhlbiB0aGUgdHJlZSBpcyBhbGxvd2VkXG4gICAgZm9yIChjb25zdCBlbCBvZiBlbGVtZW50cykge1xuICAgICAgICBpZiAoYWxsb3dsaXN0LnNvbWUoKGVsZW1lbnRUeXBlKSA9PiBlbC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09IGVsZW1lbnRUeXBlKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIG90aGVyd2lzZSB0aGVyZSBpcyBhbiBhbGxvdyBsaXN0IGFuZCB0aGlzIGVsZW1lbnQgdHJlZSBkaWRuJ3QgbWF0Y2ggaXRcbiAgICByZXR1cm4gZmFsc2Vcbn1cblxuLypcbiBpZiB0aGVyZSBpcyBubyBjb25maWcsIHRoZW4gYWxsIGVsZW1lbnRzIGFyZSBhbGxvd2VkXG4gaWYgdGhlcmUgaXMgYSBjb25maWcsIGFuZCB0aGVyZSBpcyBhbiBhbGxvdyBsaXN0LCB0aGVuXG4gb25seSBlbGVtZW50cyB0aGF0IG1hdGNoIHRoZSBjc3Mgc2VsZWN0b3IgaW4gdGhlIGFsbG93IGxpc3QgYXJlIGFsbG93ZWRcbiBhc3N1bWVzIHRoYXQgc29tZSBvdGhlciBjb2RlIGlzIGNoZWNraW5nIHRoaXMgZWxlbWVudCdzIHBhcmVudHNcbiAqL1xuZnVuY3Rpb24gY2hlY2tJZkVsZW1lbnRUcmVlUGFzc2VzQ1NTU2VsZWN0b3JBbGxvd0xpc3QoXG4gICAgZWxlbWVudHM6IEVsZW1lbnRbXSxcbiAgICBhdXRvY2FwdHVyZUNvbmZpZzogQXV0b2NhcHR1cmVDb25maWcgfCB1bmRlZmluZWRcbik6IGJvb2xlYW4ge1xuICAgIGNvbnN0IGFsbG93bGlzdCA9IGF1dG9jYXB0dXJlQ29uZmlnPy5jc3Nfc2VsZWN0b3JfYWxsb3dsaXN0XG4gICAgaWYgKF9pc1VuZGVmaW5lZChhbGxvd2xpc3QpKSB7XG4gICAgICAgIC8vIGV2ZXJ5dGhpbmcgaXMgYWxsb3dlZCwgd2hlbiB0aGVyZSBpcyBubyBhbGxvdyBsaXN0XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuXG4gICAgLy8gY2hlY2sgZWFjaCBlbGVtZW50IGluIHRoZSB0cmVlXG4gICAgLy8gaWYgYW55IG9mIHRoZSBlbGVtZW50cyBhcmUgaW4gdGhlIGFsbG93IGxpc3QsIHRoZW4gdGhlIHRyZWUgaXMgYWxsb3dlZFxuICAgIGZvciAoY29uc3QgZWwgb2YgZWxlbWVudHMpIHtcbiAgICAgICAgaWYgKGFsbG93bGlzdC5zb21lKChzZWxlY3RvcikgPT4gZWwubWF0Y2hlcyhzZWxlY3RvcikpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gb3RoZXJ3aXNlIHRoZXJlIGlzIGFuIGFsbG93IGxpc3QgYW5kIHRoaXMgZWxlbWVudCB0cmVlIGRpZG4ndCBtYXRjaCBpdFxuICAgIHJldHVybiBmYWxzZVxufVxuXG5mdW5jdGlvbiBnZXRQYXJlbnRFbGVtZW50KGN1ckVsOiBFbGVtZW50KTogRWxlbWVudCB8IGZhbHNlIHtcbiAgICBjb25zdCBwYXJlbnROb2RlID0gY3VyRWwucGFyZW50Tm9kZVxuICAgIGlmICghcGFyZW50Tm9kZSB8fCAhaXNFbGVtZW50Tm9kZShwYXJlbnROb2RlKSkgcmV0dXJuIGZhbHNlXG4gICAgcmV0dXJuIHBhcmVudE5vZGVcbn1cblxuLypcbiAqIENoZWNrIHdoZXRoZXIgYSBET00gZXZlbnQgc2hvdWxkIGJlIFwiY2FwdHVyZWRcIiBvciBpZiBpdCBtYXkgY29udGFpbiBzZW50aXRpdmUgZGF0YVxuICogdXNpbmcgYSB2YXJpZXR5IG9mIGhldXJpc3RpY3MuXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsIC0gZWxlbWVudCB0byBjaGVja1xuICogQHBhcmFtIHtFdmVudH0gZXZlbnQgLSBldmVudCB0byBjaGVja1xuICogQHBhcmFtIHtPYmplY3R9IGF1dG9jYXB0dXJlQ29uZmlnIC0gYXV0b2NhcHR1cmUgY29uZmlnXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGNhcHR1cmVPbkFueUVsZW1lbnQgLSB3aGV0aGVyIHRvIGNhcHR1cmUgb24gYW55IGVsZW1lbnQsIGNsaXBib2FyZCBhdXRvY2FwdHVyZSBkb2Vzbid0IHJlc3RyaWN0IHRvIFwiY2xpY2thYmxlXCIgZWxlbWVudHNcbiAqIEBwYXJhbSB7c3RyaW5nW119IGFsbG93ZWRFdmVudFR5cGVzIC0gZXZlbnQgdHlwZXMgdG8gY2FwdHVyZSwgbm9ybWFsbHkganVzdCAnY2xpY2snLCBidXQgc29tZSBhdXRvY2FwdHVyZSB0eXBlcyByZWFjdCB0byBkaWZmZXJlbnQgZXZlbnRzLCBzb21lIGVsZW1lbnRzIGhhdmUgZml4ZWQgZXZlbnRzIChlLmcuLCBmb3JtIGhhcyBcInN1Ym1pdFwiKVxuICogQHJldHVybnMge2Jvb2xlYW59IHdoZXRoZXIgdGhlIGV2ZW50IHNob3VsZCBiZSBjYXB0dXJlZFxuICovXG5leHBvcnQgZnVuY3Rpb24gc2hvdWxkQ2FwdHVyZURvbUV2ZW50KFxuICAgIGVsOiBFbGVtZW50LFxuICAgIGV2ZW50OiBFdmVudCxcbiAgICBhdXRvY2FwdHVyZUNvbmZpZzogQXV0b2NhcHR1cmVDb25maWcgfCB1bmRlZmluZWQgPSB1bmRlZmluZWQsXG4gICAgY2FwdHVyZU9uQW55RWxlbWVudD86IGJvb2xlYW4sXG4gICAgYWxsb3dlZEV2ZW50VHlwZXM/OiBzdHJpbmdbXVxuKTogYm9vbGVhbiB7XG4gICAgaWYgKCF3aW5kb3cgfHwgIWVsIHx8IGlzVGFnKGVsLCAnaHRtbCcpIHx8ICFpc0VsZW1lbnROb2RlKGVsKSkge1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG5cbiAgICBpZiAoYXV0b2NhcHR1cmVDb25maWc/LnVybF9hbGxvd2xpc3QpIHtcbiAgICAgICAgY29uc3QgdXJsID0gd2luZG93LmxvY2F0aW9uLmhyZWZcbiAgICAgICAgY29uc3QgYWxsb3dsaXN0ID0gYXV0b2NhcHR1cmVDb25maWcudXJsX2FsbG93bGlzdFxuICAgICAgICBpZiAoYWxsb3dsaXN0ICYmICFhbGxvd2xpc3Quc29tZSgocmVnZXgpID0+IHVybC5tYXRjaChyZWdleCkpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmIChhdXRvY2FwdHVyZUNvbmZpZz8uZG9tX2V2ZW50X2FsbG93bGlzdCkge1xuICAgICAgICBjb25zdCBhbGxvd2xpc3QgPSBhdXRvY2FwdHVyZUNvbmZpZy5kb21fZXZlbnRfYWxsb3dsaXN0XG4gICAgICAgIGlmIChhbGxvd2xpc3QgJiYgIWFsbG93bGlzdC5zb21lKChldmVudFR5cGUpID0+IGV2ZW50LnR5cGUgPT09IGV2ZW50VHlwZSkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgbGV0IHBhcmVudElzVXNlZnVsRWxlbWVudCA9IGZhbHNlXG4gICAgY29uc3QgdGFyZ2V0RWxlbWVudExpc3Q6IEVsZW1lbnRbXSA9IFtlbF1cbiAgICBsZXQgcGFyZW50Tm9kZTogRWxlbWVudCB8IGJvb2xlYW4gPSB0cnVlXG4gICAgbGV0IGN1ckVsOiBFbGVtZW50ID0gZWxcbiAgICB3aGlsZSAoY3VyRWwucGFyZW50Tm9kZSAmJiAhaXNUYWcoY3VyRWwsICdib2R5JykpIHtcbiAgICAgICAgLy8gSWYgZWxlbWVudCBpcyBhIHNoYWRvdyByb290LCB3ZSBza2lwIGl0XG4gICAgICAgIGlmIChpc0RvY3VtZW50RnJhZ21lbnQoY3VyRWwucGFyZW50Tm9kZSkpIHtcbiAgICAgICAgICAgIHRhcmdldEVsZW1lbnRMaXN0LnB1c2goKGN1ckVsLnBhcmVudE5vZGUgYXMgYW55KS5ob3N0KVxuICAgICAgICAgICAgY3VyRWwgPSAoY3VyRWwucGFyZW50Tm9kZSBhcyBhbnkpLmhvc3RcbiAgICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgIH1cbiAgICAgICAgcGFyZW50Tm9kZSA9IGdldFBhcmVudEVsZW1lbnQoY3VyRWwpXG4gICAgICAgIGlmICghcGFyZW50Tm9kZSkgYnJlYWtcbiAgICAgICAgaWYgKGNhcHR1cmVPbkFueUVsZW1lbnQgfHwgYXV0b2NhcHR1cmVDb21wYXRpYmxlRWxlbWVudHMuaW5kZXhPZihwYXJlbnROb2RlLnRhZ05hbWUudG9Mb3dlckNhc2UoKSkgPiAtMSkge1xuICAgICAgICAgICAgcGFyZW50SXNVc2VmdWxFbGVtZW50ID0gdHJ1ZVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgY29tcFN0eWxlcyA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHBhcmVudE5vZGUpXG4gICAgICAgICAgICBpZiAoY29tcFN0eWxlcyAmJiBjb21wU3R5bGVzLmdldFByb3BlcnR5VmFsdWUoJ2N1cnNvcicpID09PSAncG9pbnRlcicpIHtcbiAgICAgICAgICAgICAgICBwYXJlbnRJc1VzZWZ1bEVsZW1lbnQgPSB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0YXJnZXRFbGVtZW50TGlzdC5wdXNoKHBhcmVudE5vZGUpXG4gICAgICAgIGN1ckVsID0gcGFyZW50Tm9kZVxuICAgIH1cblxuICAgIGlmICghY2hlY2tJZkVsZW1lbnRUcmVlUGFzc2VzRWxlbWVudEFsbG93TGlzdCh0YXJnZXRFbGVtZW50TGlzdCwgYXV0b2NhcHR1cmVDb25maWcpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cblxuICAgIGlmICghY2hlY2tJZkVsZW1lbnRUcmVlUGFzc2VzQ1NTU2VsZWN0b3JBbGxvd0xpc3QodGFyZ2V0RWxlbWVudExpc3QsIGF1dG9jYXB0dXJlQ29uZmlnKSkge1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG5cbiAgICBjb25zdCBjb21wU3R5bGVzID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZWwpXG4gICAgaWYgKGNvbXBTdHlsZXMgJiYgY29tcFN0eWxlcy5nZXRQcm9wZXJ0eVZhbHVlKCdjdXJzb3InKSA9PT0gJ3BvaW50ZXInICYmIGV2ZW50LnR5cGUgPT09ICdjbGljaycpIHtcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG5cbiAgICBjb25zdCB0YWcgPSBlbC50YWdOYW1lLnRvTG93ZXJDYXNlKClcbiAgICBzd2l0Y2ggKHRhZykge1xuICAgICAgICBjYXNlICdodG1sJzpcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICBjYXNlICdmb3JtJzpcbiAgICAgICAgICAgIHJldHVybiAoYWxsb3dlZEV2ZW50VHlwZXMgfHwgWydzdWJtaXQnXSkuaW5kZXhPZihldmVudC50eXBlKSA+PSAwXG4gICAgICAgIGNhc2UgJ2lucHV0JzpcbiAgICAgICAgY2FzZSAnc2VsZWN0JzpcbiAgICAgICAgY2FzZSAndGV4dGFyZWEnOlxuICAgICAgICAgICAgcmV0dXJuIChhbGxvd2VkRXZlbnRUeXBlcyB8fCBbJ2NoYW5nZScsICdjbGljayddKS5pbmRleE9mKGV2ZW50LnR5cGUpID49IDBcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGlmIChwYXJlbnRJc1VzZWZ1bEVsZW1lbnQpIHJldHVybiAoYWxsb3dlZEV2ZW50VHlwZXMgfHwgWydjbGljayddKS5pbmRleE9mKGV2ZW50LnR5cGUpID49IDBcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgKGFsbG93ZWRFdmVudFR5cGVzIHx8IFsnY2xpY2snXSkuaW5kZXhPZihldmVudC50eXBlKSA+PSAwICYmXG4gICAgICAgICAgICAgICAgKGF1dG9jYXB0dXJlQ29tcGF0aWJsZUVsZW1lbnRzLmluZGV4T2YodGFnKSA+IC0xIHx8IGVsLmdldEF0dHJpYnV0ZSgnY29udGVudGVkaXRhYmxlJykgPT09ICd0cnVlJylcbiAgICAgICAgICAgIClcbiAgICB9XG59XG5cbi8qXG4gKiBDaGVjayB3aGV0aGVyIGEgRE9NIGVsZW1lbnQgc2hvdWxkIGJlIFwiY2FwdHVyZWRcIiBvciBpZiBpdCBtYXkgY29udGFpbiBzZW50aXRpdmUgZGF0YVxuICogdXNpbmcgYSB2YXJpZXR5IG9mIGhldXJpc3RpY3MuXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsIC0gZWxlbWVudCB0byBjaGVja1xuICogQHJldHVybnMge2Jvb2xlYW59IHdoZXRoZXIgdGhlIGVsZW1lbnQgc2hvdWxkIGJlIGNhcHR1cmVkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzaG91bGRDYXB0dXJlRWxlbWVudChlbDogRWxlbWVudCk6IGJvb2xlYW4ge1xuICAgIGZvciAobGV0IGN1ckVsID0gZWw7IGN1ckVsLnBhcmVudE5vZGUgJiYgIWlzVGFnKGN1ckVsLCAnYm9keScpOyBjdXJFbCA9IGN1ckVsLnBhcmVudE5vZGUgYXMgRWxlbWVudCkge1xuICAgICAgICBjb25zdCBjbGFzc2VzID0gZ2V0Q2xhc3NOYW1lcyhjdXJFbClcbiAgICAgICAgaWYgKF9pbmNsdWRlcyhjbGFzc2VzLCAncGgtc2Vuc2l0aXZlJykgfHwgX2luY2x1ZGVzKGNsYXNzZXMsICdwaC1uby1jYXB0dXJlJykpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgaWYgKF9pbmNsdWRlcyhnZXRDbGFzc05hbWVzKGVsKSwgJ3BoLWluY2x1ZGUnKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cblxuICAgIC8vIGRvbid0IGluY2x1ZGUgaGlkZGVuIG9yIHBhc3N3b3JkIGZpZWxkc1xuICAgIGNvbnN0IHR5cGUgPSAoZWwgYXMgSFRNTElucHV0RWxlbWVudCkudHlwZSB8fCAnJ1xuICAgIGlmIChfaXNTdHJpbmcodHlwZSkpIHtcbiAgICAgICAgLy8gaXQncyBwb3NzaWJsZSBmb3IgZWwudHlwZSB0byBiZSBhIERPTSBlbGVtZW50IGlmIGVsIGlzIGEgZm9ybSB3aXRoIGEgY2hpbGQgaW5wdXRbbmFtZT1cInR5cGVcIl1cbiAgICAgICAgc3dpdGNoICh0eXBlLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICAgIGNhc2UgJ2hpZGRlbic6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgICBjYXNlICdwYXNzd29yZCc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBmaWx0ZXIgb3V0IGRhdGEgZnJvbSBmaWVsZHMgdGhhdCBsb29rIGxpa2Ugc2Vuc2l0aXZlIGZpZWxkc1xuICAgIGNvbnN0IG5hbWUgPSAoZWwgYXMgSFRNTElucHV0RWxlbWVudCkubmFtZSB8fCBlbC5pZCB8fCAnJ1xuICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vcG9zdGhvZy9wb3N0aG9nLWpzL2lzc3Vlcy8xNjVcbiAgICAvLyBVbmRlciBzcGVjaWZpYyBjaXJjdW1zdGFuY2VzIGEgYnVnIGNhdXNlZCAucmVwbGFjZSB0byBiZSBjYWxsZWQgb24gYSBET00gZWxlbWVudFxuICAgIC8vIGluc3RlYWQgb2YgYSBzdHJpbmcsIHJlbW92aW5nIHRoZSBlbGVtZW50IGZyb20gdGhlIHBhZ2UuIEVuc3VyZSB0aGlzIGlzc3VlIGlzIG1pdGlnYXRlZC5cbiAgICBpZiAoX2lzU3RyaW5nKG5hbWUpKSB7XG4gICAgICAgIC8vIGl0J3MgcG9zc2libGUgZm9yIGVsLm5hbWUgb3IgZWwuaWQgdG8gYmUgYSBET00gZWxlbWVudCBpZiBlbCBpcyBhIGZvcm0gd2l0aCBhIGNoaWxkIGlucHV0W25hbWU9XCJuYW1lXCJdXG4gICAgICAgIGNvbnN0IHNlbnNpdGl2ZU5hbWVSZWdleCA9XG4gICAgICAgICAgICAvXmNjfGNhcmRudW18Y2NudW18Y3JlZGl0Y2FyZHxjc2N8Y3ZjfGN2dnxleHB8cGFzc3xwd2R8cm91dGluZ3xzZWNjb2RlfHNlY3VyaXR5Y29kZXxzZWN1cml0eW51bXxzb2NpYWxzZWN8c29jc2VjfHNzbi9pXG4gICAgICAgIGlmIChzZW5zaXRpdmVOYW1lUmVnZXgudGVzdChuYW1lLnJlcGxhY2UoL1teYS16QS1aMC05XS9nLCAnJykpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0cnVlXG59XG5cbi8qXG4gKiBDaGVjayB3aGV0aGVyIGEgRE9NIGVsZW1lbnQgaXMgJ3NlbnNpdGl2ZScgYW5kIHdlIHNob3VsZCBvbmx5IGNhcHR1cmUgbGltaXRlZCBkYXRhXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsIC0gZWxlbWVudCB0byBjaGVja1xuICogQHJldHVybnMge2Jvb2xlYW59IHdoZXRoZXIgdGhlIGVsZW1lbnQgc2hvdWxkIGJlIGNhcHR1cmVkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1NlbnNpdGl2ZUVsZW1lbnQoZWw6IEVsZW1lbnQpOiBib29sZWFuIHtcbiAgICAvLyBkb24ndCBzZW5kIGRhdGEgZnJvbSBpbnB1dHMgb3Igc2ltaWxhciBlbGVtZW50cyBzaW5jZSB0aGVyZSB3aWxsIGFsd2F5cyBiZVxuICAgIC8vIGEgcmlzayBvZiBjbGllbnRzaWRlIGphdmFzY3JpcHQgcGxhY2luZyBzZW5zaXRpdmUgZGF0YSBpbiBhdHRyaWJ1dGVzXG4gICAgY29uc3QgYWxsb3dlZElucHV0VHlwZXMgPSBbJ2J1dHRvbicsICdjaGVja2JveCcsICdzdWJtaXQnLCAncmVzZXQnXVxuICAgIGlmIChcbiAgICAgICAgKGlzVGFnKGVsLCAnaW5wdXQnKSAmJiAhYWxsb3dlZElucHV0VHlwZXMuaW5jbHVkZXMoKGVsIGFzIEhUTUxJbnB1dEVsZW1lbnQpLnR5cGUpKSB8fFxuICAgICAgICBpc1RhZyhlbCwgJ3NlbGVjdCcpIHx8XG4gICAgICAgIGlzVGFnKGVsLCAndGV4dGFyZWEnKSB8fFxuICAgICAgICBlbC5nZXRBdHRyaWJ1dGUoJ2NvbnRlbnRlZGl0YWJsZScpID09PSAndHJ1ZSdcbiAgICApIHtcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlXG59XG5cbi8qXG4gKiBDaGVjayB3aGV0aGVyIGEgc3RyaW5nIHZhbHVlIHNob3VsZCBiZSBcImNhcHR1cmVkXCIgb3IgaWYgaXQgbWF5IGNvbnRhaW4gc2VudGl0aXZlIGRhdGFcbiAqIHVzaW5nIGEgdmFyaWV0eSBvZiBoZXVyaXN0aWNzLlxuICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlIC0gc3RyaW5nIHZhbHVlIHRvIGNoZWNrXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gd2hldGhlciB0aGUgZWxlbWVudCBzaG91bGQgYmUgY2FwdHVyZWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNob3VsZENhcHR1cmVWYWx1ZSh2YWx1ZTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgaWYgKF9pc051bGxpc2godmFsdWUpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cblxuICAgIGlmIChfaXNTdHJpbmcodmFsdWUpKSB7XG4gICAgICAgIHZhbHVlID0gX3RyaW0odmFsdWUpXG5cbiAgICAgICAgLy8gY2hlY2sgdG8gc2VlIGlmIGlucHV0IHZhbHVlIGxvb2tzIGxpa2UgYSBjcmVkaXQgY2FyZCBudW1iZXJcbiAgICAgICAgLy8gc2VlOiBodHRwczovL3d3dy5zYWZhcmlib29rc29ubGluZS5jb20vbGlicmFyeS92aWV3L3JlZ3VsYXItZXhwcmVzc2lvbnMtY29va2Jvb2svOTc4MTQ0OTMyNzQ1My9jaDA0czIwLmh0bWxcbiAgICAgICAgY29uc3QgY2NSZWdleCA9XG4gICAgICAgICAgICAvXig/Oig0WzAtOV17MTJ9KD86WzAtOV17M30pPyl8KDVbMS01XVswLTldezE0fSl8KDYoPzowMTF8NVswLTldezJ9KVswLTldezEyfSl8KDNbNDddWzAtOV17MTN9KXwoMyg/OjBbMC01XXxbNjhdWzAtOV0pWzAtOV17MTF9KXwoKD86MjEzMXwxODAwfDM1WzAtOV17M30pWzAtOV17MTF9KSkkL1xuICAgICAgICBpZiAoY2NSZWdleC50ZXN0KCh2YWx1ZSB8fCAnJykucmVwbGFjZSgvWy0gXS9nLCAnJykpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGNoZWNrIHRvIHNlZSBpZiBpbnB1dCB2YWx1ZSBsb29rcyBsaWtlIGEgc29jaWFsIHNlY3VyaXR5IG51bWJlclxuICAgICAgICBjb25zdCBzc25SZWdleCA9IC8oXlxcZHszfS0/XFxkezJ9LT9cXGR7NH0kKS9cbiAgICAgICAgaWYgKHNzblJlZ2V4LnRlc3QodmFsdWUpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0cnVlXG59XG5cbi8qXG4gKiBDaGVjayB3aGV0aGVyIGFuIGF0dHJpYnV0ZSBuYW1lIGlzIGFuIEFuZ3VsYXIgc3R5bGUgYXR0ciAoZWl0aGVyIF9uZ2NvbnRlbnQgb3IgX25naG9zdClcbiAqIFRoZXNlIHVwZGF0ZSBvbiBlYWNoIGJ1aWxkIGFuZCBsZWFkIHRvIG5vaXNlIGluIHRoZSBlbGVtZW50IGNoYWluXG4gKiBNb3JlIGRldGFpbHMgb24gdGhlIGF0dHJpYnV0ZXMgaGVyZTogaHR0cHM6Ly9hbmd1bGFyLmlvL2d1aWRlL3ZpZXctZW5jYXBzdWxhdGlvblxuICogQHBhcmFtIHtzdHJpbmd9IGF0dHJpYnV0ZU5hbWUgLSBzdHJpbmcgdmFsdWUgdG8gY2hlY2tcbiAqIEByZXR1cm5zIHtib29sZWFufSB3aGV0aGVyIHRoZSBlbGVtZW50IGlzIGFuIGFuZ3VsYXIgdGFnXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0FuZ3VsYXJTdHlsZUF0dHIoYXR0cmlidXRlTmFtZTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgaWYgKF9pc1N0cmluZyhhdHRyaWJ1dGVOYW1lKSkge1xuICAgICAgICByZXR1cm4gYXR0cmlidXRlTmFtZS5zdWJzdHJpbmcoMCwgMTApID09PSAnX25nY29udGVudCcgfHwgYXR0cmlidXRlTmFtZS5zdWJzdHJpbmcoMCwgNykgPT09ICdfbmdob3N0J1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2Vcbn1cblxuLypcbiAqIEl0ZXJhdGUgdGhyb3VnaCBjaGlsZHJlbiBvZiBhIHRhcmdldCBlbGVtZW50IGxvb2tpbmcgZm9yIHNwYW4gdGFnc1xuICogYW5kIHJldHVybiB0aGUgdGV4dCBjb250ZW50IG9mIHRoZSBzcGFuIHRhZ3MsIHNlcGFyYXRlZCBieSBzcGFjZXMsXG4gKiBhbG9uZyB3aXRoIHRoZSBkaXJlY3QgdGV4dCBjb250ZW50IG9mIHRoZSB0YXJnZXQgZWxlbWVudFxuICogQHBhcmFtIHtFbGVtZW50fSB0YXJnZXQgLSBlbGVtZW50IHRvIGNoZWNrXG4gKiBAcmV0dXJucyB7c3RyaW5nfSB0ZXh0IGNvbnRlbnQgb2YgdGhlIHRhcmdldCBlbGVtZW50IGFuZCBpdHMgY2hpbGQgc3BhbiB0YWdzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXREaXJlY3RBbmROZXN0ZWRTcGFuVGV4dCh0YXJnZXQ6IEVsZW1lbnQpOiBzdHJpbmcge1xuICAgIGxldCB0ZXh0ID0gZ2V0U2FmZVRleHQodGFyZ2V0KVxuICAgIHRleHQgPSBgJHt0ZXh0fSAke2dldE5lc3RlZFNwYW5UZXh0KHRhcmdldCl9YC50cmltKClcbiAgICByZXR1cm4gc2hvdWxkQ2FwdHVyZVZhbHVlKHRleHQpID8gdGV4dCA6ICcnXG59XG5cbi8qXG4gKiBJdGVyYXRlIHRocm91Z2ggY2hpbGRyZW4gb2YgYSB0YXJnZXQgZWxlbWVudCBsb29raW5nIGZvciBzcGFuIHRhZ3NcbiAqIGFuZCByZXR1cm4gdGhlIHRleHQgY29udGVudCBvZiB0aGUgc3BhbiB0YWdzLCBzZXBhcmF0ZWQgYnkgc3BhY2VzXG4gKiBAcGFyYW0ge0VsZW1lbnR9IHRhcmdldCAtIGVsZW1lbnQgdG8gY2hlY2tcbiAqIEByZXR1cm5zIHtzdHJpbmd9IHRleHQgY29udGVudCBvZiBzcGFuIHRhZ3NcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldE5lc3RlZFNwYW5UZXh0KHRhcmdldDogRWxlbWVudCk6IHN0cmluZyB7XG4gICAgbGV0IHRleHQgPSAnJ1xuICAgIGlmICh0YXJnZXQgJiYgdGFyZ2V0LmNoaWxkTm9kZXMgJiYgdGFyZ2V0LmNoaWxkTm9kZXMubGVuZ3RoKSB7XG4gICAgICAgIF9lYWNoKHRhcmdldC5jaGlsZE5vZGVzLCBmdW5jdGlvbiAoY2hpbGQpIHtcbiAgICAgICAgICAgIGlmIChjaGlsZCAmJiBjaGlsZC50YWdOYW1lPy50b0xvd2VyQ2FzZSgpID09PSAnc3BhbicpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzcGFuVGV4dCA9IGdldFNhZmVUZXh0KGNoaWxkKVxuICAgICAgICAgICAgICAgICAgICB0ZXh0ID0gYCR7dGV4dH0gJHtzcGFuVGV4dH1gLnRyaW0oKVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGlsZC5jaGlsZE5vZGVzICYmIGNoaWxkLmNoaWxkTm9kZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0ID0gYCR7dGV4dH0gJHtnZXROZXN0ZWRTcGFuVGV4dChjaGlsZCl9YC50cmltKClcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKGUpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH1cbiAgICByZXR1cm4gdGV4dFxufVxuXG4vKlxuQmFjayBpbiB0aGUgZGF5IHN0b3JpbmcgZXZlbnRzIGluIFBvc3RncmVzIHdlIHVzZSBFbGVtZW50cyBmb3IgYXV0b2NhcHR1cmUgZXZlbnRzLlxuTm93IHdlJ3JlIHVzaW5nIGVsZW1lbnRzX2NoYWluLiBXZSB1c2VkIHRvIGRvIHRoaXMgcGFyc2luZy9wcm9jZXNzaW5nIGR1cmluZyBpbmdlc3Rpb24uXG5UaGlzIGNvZGUgaXMganVzdCBjb3BpZWQgb3ZlciBmcm9tIGluZ2VzdGlvbiwgYnV0IHdlIHNob3VsZCBvcHRpbWl6ZSBpdFxudG8gY3JlYXRlIGVsZW1lbnRzX2NoYWluIHN0cmluZyBkaXJlY3RseS5cbiovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RWxlbWVudHNDaGFpblN0cmluZyhlbGVtZW50czogUHJvcGVydGllc1tdKTogc3RyaW5nIHtcbiAgICByZXR1cm4gZWxlbWVudHNUb1N0cmluZyhleHRyYWN0RWxlbWVudHMoZWxlbWVudHMpKVxufVxuXG4vLyBUaGlzIGludGVyZmFjZSBpcyBjYWxsZWQgJ0VsZW1lbnQnIGluIHBsdWdpbi1zY2FmZm9sZCBodHRwczovL2dpdGh1Yi5jb20vUG9zdEhvZy9wbHVnaW4tc2NhZmZvbGQvYmxvYi9iMDdkM2I4Nzk3OTZlY2M3ZTIyZGViNzFiZjYyNzY5NGJhMDUzODZiL3NyYy90eXBlcy50cyNMMjAwXG4vLyBIb3dldmVyICdFbGVtZW50JyBpcyBhIERPTSBFbGVtZW50IHdoZW4gcnVuIGluIHRoZSBicm93c2VyLCBzbyB3ZSBoYXZlIHRvIHJlbmFtZSBpdFxuaW50ZXJmYWNlIFBIRWxlbWVudCB7XG4gICAgdGV4dD86IHN0cmluZ1xuICAgIHRhZ19uYW1lPzogc3RyaW5nXG4gICAgaHJlZj86IHN0cmluZ1xuICAgIGF0dHJfaWQ/OiBzdHJpbmdcbiAgICBhdHRyX2NsYXNzPzogc3RyaW5nW11cbiAgICBudGhfY2hpbGQ/OiBudW1iZXJcbiAgICBudGhfb2ZfdHlwZT86IG51bWJlclxuICAgIGF0dHJpYnV0ZXM/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+XG4gICAgZXZlbnRfaWQ/OiBudW1iZXJcbiAgICBvcmRlcj86IG51bWJlclxuICAgIGdyb3VwX2lkPzogbnVtYmVyXG59XG5cbmZ1bmN0aW9uIGVzY2FwZVF1b3RlcyhpbnB1dDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gaW5wdXQucmVwbGFjZSgvXCJ8XFxcXFwiL2csICdcXFxcXCInKVxufVxuXG5mdW5jdGlvbiBlbGVtZW50c1RvU3RyaW5nKGVsZW1lbnRzOiBQSEVsZW1lbnRbXSk6IHN0cmluZyB7XG4gICAgY29uc3QgcmV0ID0gZWxlbWVudHMubWFwKChlbGVtZW50KSA9PiB7XG4gICAgICAgIGxldCBlbF9zdHJpbmcgPSAnJ1xuICAgICAgICBpZiAoZWxlbWVudC50YWdfbmFtZSkge1xuICAgICAgICAgICAgZWxfc3RyaW5nICs9IGVsZW1lbnQudGFnX25hbWVcbiAgICAgICAgfVxuICAgICAgICBpZiAoZWxlbWVudC5hdHRyX2NsYXNzKSB7XG4gICAgICAgICAgICBlbGVtZW50LmF0dHJfY2xhc3Muc29ydCgpXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHNpbmdsZV9jbGFzcyBvZiBlbGVtZW50LmF0dHJfY2xhc3MpIHtcbiAgICAgICAgICAgICAgICBlbF9zdHJpbmcgKz0gYC4ke3NpbmdsZV9jbGFzcy5yZXBsYWNlKC9cIi9nLCAnJyl9YFxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGF0dHJpYnV0ZXM6IFJlY29yZDxzdHJpbmcsIGFueT4gPSB7XG4gICAgICAgICAgICAuLi4oZWxlbWVudC50ZXh0ID8geyB0ZXh0OiBlbGVtZW50LnRleHQgfSA6IHt9KSxcbiAgICAgICAgICAgICdudGgtY2hpbGQnOiBlbGVtZW50Lm50aF9jaGlsZCA/PyAwLFxuICAgICAgICAgICAgJ250aC1vZi10eXBlJzogZWxlbWVudC5udGhfb2ZfdHlwZSA/PyAwLFxuICAgICAgICAgICAgLi4uKGVsZW1lbnQuaHJlZiA/IHsgaHJlZjogZWxlbWVudC5ocmVmIH0gOiB7fSksXG4gICAgICAgICAgICAuLi4oZWxlbWVudC5hdHRyX2lkID8geyBhdHRyX2lkOiBlbGVtZW50LmF0dHJfaWQgfSA6IHt9KSxcbiAgICAgICAgICAgIC4uLmVsZW1lbnQuYXR0cmlidXRlcyxcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzb3J0ZWRBdHRyaWJ1dGVzOiBSZWNvcmQ8c3RyaW5nLCBhbnk+ID0ge31cbiAgICAgICAgX2VudHJpZXMoYXR0cmlidXRlcylcbiAgICAgICAgICAgIC5zb3J0KChbYV0sIFtiXSkgPT4gYS5sb2NhbGVDb21wYXJlKGIpKVxuICAgICAgICAgICAgLmZvckVhY2goXG4gICAgICAgICAgICAgICAgKFtrZXksIHZhbHVlXSkgPT4gKHNvcnRlZEF0dHJpYnV0ZXNbZXNjYXBlUXVvdGVzKGtleS50b1N0cmluZygpKV0gPSBlc2NhcGVRdW90ZXModmFsdWUudG9TdHJpbmcoKSkpXG4gICAgICAgICAgICApXG4gICAgICAgIGVsX3N0cmluZyArPSAnOidcbiAgICAgICAgZWxfc3RyaW5nICs9IF9lbnRyaWVzKGF0dHJpYnV0ZXMpXG4gICAgICAgICAgICAubWFwKChba2V5LCB2YWx1ZV0pID0+IGAke2tleX09XCIke3ZhbHVlfVwiYClcbiAgICAgICAgICAgIC5qb2luKCcnKVxuICAgICAgICByZXR1cm4gZWxfc3RyaW5nXG4gICAgfSlcbiAgICByZXR1cm4gcmV0LmpvaW4oJzsnKVxufVxuXG5mdW5jdGlvbiBleHRyYWN0RWxlbWVudHMoZWxlbWVudHM6IFByb3BlcnRpZXNbXSk6IFBIRWxlbWVudFtdIHtcbiAgICByZXR1cm4gZWxlbWVudHMubWFwKChlbCkgPT4ge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IHtcbiAgICAgICAgICAgIHRleHQ6IGVsWyckZWxfdGV4dCddPy5zbGljZSgwLCA0MDApLFxuICAgICAgICAgICAgdGFnX25hbWU6IGVsWyd0YWdfbmFtZSddLFxuICAgICAgICAgICAgaHJlZjogZWxbJ2F0dHJfX2hyZWYnXT8uc2xpY2UoMCwgMjA0OCksXG4gICAgICAgICAgICBhdHRyX2NsYXNzOiBleHRyYWN0QXR0ckNsYXNzKGVsKSxcbiAgICAgICAgICAgIGF0dHJfaWQ6IGVsWydhdHRyX19pZCddLFxuICAgICAgICAgICAgbnRoX2NoaWxkOiBlbFsnbnRoX2NoaWxkJ10sXG4gICAgICAgICAgICBudGhfb2ZfdHlwZTogZWxbJ250aF9vZl90eXBlJ10sXG4gICAgICAgICAgICBhdHRyaWJ1dGVzOiB7fSBhcyB7IFtpZDogc3RyaW5nXTogYW55IH0sXG4gICAgICAgIH1cbiAgICAgICAgX2VudHJpZXMoZWwpXG4gICAgICAgICAgICAuZmlsdGVyKChba2V5XSkgPT4ga2V5LmluZGV4T2YoJ2F0dHJfXycpID09PSAwKVxuICAgICAgICAgICAgLmZvckVhY2goKFtrZXksIHZhbHVlXSkgPT4gKHJlc3BvbnNlLmF0dHJpYnV0ZXNba2V5XSA9IHZhbHVlKSlcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlXG4gICAgfSlcbn1cblxuZnVuY3Rpb24gZXh0cmFjdEF0dHJDbGFzcyhlbDogUHJvcGVydGllcyk6IFBIRWxlbWVudFsnYXR0cl9jbGFzcyddIHtcbiAgICBjb25zdCBhdHRyX2NsYXNzID0gZWxbJ2F0dHJfX2NsYXNzJ11cbiAgICBpZiAoIWF0dHJfY2xhc3MpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgIH0gZWxzZSBpZiAoX2lzQXJyYXkoYXR0cl9jbGFzcykpIHtcbiAgICAgICAgcmV0dXJuIGF0dHJfY2xhc3NcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gc3BsaXRDbGFzc1N0cmluZyhhdHRyX2NsYXNzKVxuICAgIH1cbn1cbiIsICIvLyBOYWl2ZSByYWdlIGNsaWNrIGltcGxlbWVudGF0aW9uOiBJZiBtb3VzZSBoYXMgbm90IG1vdmVkIHRoYW4gUkFHRV9DTElDS19USFJFU0hPTERfUFhcbi8vIG92ZXIgUkFHRV9DTElDS19DTElDS19DT1VOVCBjbGlja3Mgd2l0aCBtYXggUkFHRV9DTElDS19USU1FT1VUX01TIGJldHdlZW4gY2xpY2tzLCBpdCdzXG4vLyBjb3VudGVkIGFzIGEgcmFnZSBjbGlja1xuXG5jb25zdCBSQUdFX0NMSUNLX1RIUkVTSE9MRF9QWCA9IDMwXG5jb25zdCBSQUdFX0NMSUNLX1RJTUVPVVRfTVMgPSAxMDAwXG5jb25zdCBSQUdFX0NMSUNLX0NMSUNLX0NPVU5UID0gM1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSYWdlQ2xpY2sge1xuICAgIGNsaWNrczogeyB4OiBudW1iZXI7IHk6IG51bWJlcjsgdGltZXN0YW1wOiBudW1iZXIgfVtdXG4gICAgZW5hYmxlZDogYm9vbGVhblxuXG4gICAgY29uc3RydWN0b3IoZW5hYmxlZDogYm9vbGVhbikge1xuICAgICAgICB0aGlzLmNsaWNrcyA9IFtdXG4gICAgICAgIHRoaXMuZW5hYmxlZCA9IGVuYWJsZWRcbiAgICB9XG5cbiAgICBpc1JhZ2VDbGljayh4OiBudW1iZXIsIHk6IG51bWJlciwgdGltZXN0YW1wOiBudW1iZXIpOiBib29sZWFuIHtcbiAgICAgICAgaWYgKCF0aGlzLmVuYWJsZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbGFzdENsaWNrID0gdGhpcy5jbGlja3NbdGhpcy5jbGlja3MubGVuZ3RoIC0gMV1cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgbGFzdENsaWNrICYmXG4gICAgICAgICAgICBNYXRoLmFicyh4IC0gbGFzdENsaWNrLngpICsgTWF0aC5hYnMoeSAtIGxhc3RDbGljay55KSA8IFJBR0VfQ0xJQ0tfVEhSRVNIT0xEX1BYICYmXG4gICAgICAgICAgICB0aW1lc3RhbXAgLSBsYXN0Q2xpY2sudGltZXN0YW1wIDwgUkFHRV9DTElDS19USU1FT1VUX01TXG4gICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy5jbGlja3MucHVzaCh7IHgsIHksIHRpbWVzdGFtcCB9KVxuXG4gICAgICAgICAgICBpZiAodGhpcy5jbGlja3MubGVuZ3RoID09PSBSQUdFX0NMSUNLX0NMSUNLX0NPVU5UKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuY2xpY2tzID0gW3sgeCwgeSwgdGltZXN0YW1wIH1dXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG59XG4iLCAiLypcbiAqIENvbnN0YW50c1xuICovXG5cbi8qIFBST1BFUlRZIEtFWVMgKi9cblxuLy8gVGhpcyBrZXkgaXMgZGVwcmVjYXRlZCwgYnV0IHdlIHdhbnQgdG8gY2hlY2sgZm9yIGl0IHRvIHNlZSB3aGV0aGVyIGFsaWFzaW5nIGlzIGFsbG93ZWQuXG5leHBvcnQgY29uc3QgUEVPUExFX0RJU1RJTkNUX0lEX0tFWSA9ICckcGVvcGxlX2Rpc3RpbmN0X2lkJ1xuZXhwb3J0IGNvbnN0IERJU1RJTkNUX0lEID0gJ2Rpc3RpbmN0X2lkJ1xuZXhwb3J0IGNvbnN0IEFMSUFTX0lEX0tFWSA9ICdfX2FsaWFzJ1xuZXhwb3J0IGNvbnN0IENBTVBBSUdOX0lEU19LRVkgPSAnX19jbXBucydcbmV4cG9ydCBjb25zdCBFVkVOVF9USU1FUlNfS0VZID0gJ19fdGltZXJzJ1xuZXhwb3J0IGNvbnN0IEFVVE9DQVBUVVJFX0RJU0FCTEVEX1NFUlZFUl9TSURFID0gJyRhdXRvY2FwdHVyZV9kaXNhYmxlZF9zZXJ2ZXJfc2lkZSdcbmV4cG9ydCBjb25zdCBTRVNTSU9OX1JFQ09SRElOR19FTkFCTEVEX1NFUlZFUl9TSURFID0gJyRzZXNzaW9uX3JlY29yZGluZ19lbmFibGVkX3NlcnZlcl9zaWRlJ1xuZXhwb3J0IGNvbnN0IENPTlNPTEVfTE9HX1JFQ09SRElOR19FTkFCTEVEX1NFUlZFUl9TSURFID0gJyRjb25zb2xlX2xvZ19yZWNvcmRpbmdfZW5hYmxlZF9zZXJ2ZXJfc2lkZSdcbmV4cG9ydCBjb25zdCBTRVNTSU9OX1JFQ09SRElOR19SRUNPUkRFUl9WRVJTSU9OX1NFUlZFUl9TSURFID0gJyRzZXNzaW9uX3JlY29yZGluZ19yZWNvcmRlcl92ZXJzaW9uX3NlcnZlcl9zaWRlJyAvLyBmb2xsb3dzIHJyd2ViIHZlcnNpb25pbmdcbmV4cG9ydCBjb25zdCBTRVNTSU9OX1JFQ09SRElOR19ORVRXT1JLX1BBWUxPQURfQ0FQVFVSRSA9ICckc2Vzc2lvbl9yZWNvcmRpbmdfbmV0d29ya19wYXlsb2FkX2NhcHR1cmUnXG5leHBvcnQgY29uc3QgU0VTU0lPTl9SRUNPUkRJTkdfQ0FOVkFTX1JFQ09SRElORyA9ICckc2Vzc2lvbl9yZWNvcmRpbmdfY2FudmFzX3JlY29yZGluZydcbmV4cG9ydCBjb25zdCBTRVNTSU9OX0lEID0gJyRzZXNpZCdcbmV4cG9ydCBjb25zdCBTRVNTSU9OX1JFQ09SRElOR19JU19TQU1QTEVEID0gJyRzZXNzaW9uX2lzX3NhbXBsZWQnXG5leHBvcnQgY29uc3QgRU5BQkxFRF9GRUFUVVJFX0ZMQUdTID0gJyRlbmFibGVkX2ZlYXR1cmVfZmxhZ3MnXG5leHBvcnQgY29uc3QgUEVSU0lTVEVOQ0VfRUFSTFlfQUNDRVNTX0ZFQVRVUkVTID0gJyRlYXJseV9hY2Nlc3NfZmVhdHVyZXMnXG5leHBvcnQgY29uc3QgU1RPUkVEX1BFUlNPTl9QUk9QRVJUSUVTX0tFWSA9ICckc3RvcmVkX3BlcnNvbl9wcm9wZXJ0aWVzJ1xuZXhwb3J0IGNvbnN0IFNUT1JFRF9HUk9VUF9QUk9QRVJUSUVTX0tFWSA9ICckc3RvcmVkX2dyb3VwX3Byb3BlcnRpZXMnXG5leHBvcnQgY29uc3QgU1VSVkVZUyA9ICckc3VydmV5cydcbmV4cG9ydCBjb25zdCBGTEFHX0NBTExfUkVQT1JURUQgPSAnJGZsYWdfY2FsbF9yZXBvcnRlZCdcbmV4cG9ydCBjb25zdCBVU0VSX1NUQVRFID0gJyR1c2VyX3N0YXRlJ1xuZXhwb3J0IGNvbnN0IFBPU1RIT0dfUVVPVEFfTElNSVRFRCA9ICckcG9zdGhvZ19xdW90YV9saW1pdGVkJ1xuZXhwb3J0IGNvbnN0IENMSUVOVF9TRVNTSU9OX1BST1BTID0gJyRjbGllbnRfc2Vzc2lvbl9wcm9wcydcblxuLy8gVGhlc2UgYXJlIHByb3BlcnRpZXMgdGhhdCBhcmUgcmVzZXJ2ZWQgYW5kIHdpbGwgbm90IGJlIGF1dG9tYXRpY2FsbHkgaW5jbHVkZWQgaW4gZXZlbnRzXG5leHBvcnQgY29uc3QgUEVSU0lTVEVOQ0VfUkVTRVJWRURfUFJPUEVSVElFUyA9IFtcbiAgICBQRU9QTEVfRElTVElOQ1RfSURfS0VZLFxuICAgIEFMSUFTX0lEX0tFWSxcbiAgICBDQU1QQUlHTl9JRFNfS0VZLFxuICAgIEVWRU5UX1RJTUVSU19LRVksXG4gICAgU0VTU0lPTl9SRUNPUkRJTkdfRU5BQkxFRF9TRVJWRVJfU0lERSxcbiAgICBTRVNTSU9OX0lELFxuICAgIEVOQUJMRURfRkVBVFVSRV9GTEFHUyxcbiAgICBVU0VSX1NUQVRFLFxuICAgIFBPU1RIT0dfUVVPVEFfTElNSVRFRCxcbiAgICBQRVJTSVNURU5DRV9FQVJMWV9BQ0NFU1NfRkVBVFVSRVMsXG4gICAgU1RPUkVEX0dST1VQX1BST1BFUlRJRVNfS0VZLFxuICAgIFNUT1JFRF9QRVJTT05fUFJPUEVSVElFU19LRVksXG4gICAgU1VSVkVZUyxcbiAgICBGTEFHX0NBTExfUkVQT1JURUQsXG4gICAgQ0xJRU5UX1NFU1NJT05fUFJPUFMsXG5dXG4iLCAiaW1wb3J0IHsgX2JpbmRfaW5zdGFuY2VfbWV0aG9kcywgX2VhY2gsIF9leHRlbmQsIF9pbmNsdWRlcywgX3JlZ2lzdGVyX2V2ZW50LCBfc2FmZXdyYXBfaW5zdGFuY2VfbWV0aG9kcyB9IGZyb20gJy4vdXRpbHMnXG5pbXBvcnQge1xuICAgIGF1dG9jYXB0dXJlQ29tcGF0aWJsZUVsZW1lbnRzLFxuICAgIGdldENsYXNzTmFtZXMsXG4gICAgZ2V0RGlyZWN0QW5kTmVzdGVkU3BhblRleHQsXG4gICAgZ2V0RWxlbWVudHNDaGFpblN0cmluZyxcbiAgICBnZXRTYWZlVGV4dCxcbiAgICBpc0FuZ3VsYXJTdHlsZUF0dHIsXG4gICAgaXNEb2N1bWVudEZyYWdtZW50LFxuICAgIGlzRWxlbWVudE5vZGUsXG4gICAgaXNTZW5zaXRpdmVFbGVtZW50LFxuICAgIGlzVGFnLFxuICAgIGlzVGV4dE5vZGUsXG4gICAgbWFrZVNhZmVUZXh0LFxuICAgIHNob3VsZENhcHR1cmVEb21FdmVudCxcbiAgICBzaG91bGRDYXB0dXJlRWxlbWVudCxcbiAgICBzaG91bGRDYXB0dXJlVmFsdWUsXG4gICAgc3BsaXRDbGFzc1N0cmluZyxcbn0gZnJvbSAnLi9hdXRvY2FwdHVyZS11dGlscydcbmltcG9ydCBSYWdlQ2xpY2sgZnJvbSAnLi9leHRlbnNpb25zL3JhZ2VjbGljaydcbmltcG9ydCB7IEF1dG9jYXB0dXJlQ29uZmlnLCBBdXRvQ2FwdHVyZUN1c3RvbVByb3BlcnR5LCBEZWNpZGVSZXNwb25zZSwgUHJvcGVydGllcyB9IGZyb20gJy4vdHlwZXMnXG5pbXBvcnQgeyBQb3N0SG9nIH0gZnJvbSAnLi9wb3N0aG9nLWNvcmUnXG5pbXBvcnQgeyBBVVRPQ0FQVFVSRV9ESVNBQkxFRF9TRVJWRVJfU0lERSB9IGZyb20gJy4vY29uc3RhbnRzJ1xuXG5pbXBvcnQgeyBfaXNCb29sZWFuLCBfaXNGdW5jdGlvbiwgX2lzTnVsbCwgX2lzT2JqZWN0LCBfaXNVbmRlZmluZWQgfSBmcm9tICcuL3V0aWxzL3R5cGUtdXRpbHMnXG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tICcuL3V0aWxzL2xvZ2dlcidcbmltcG9ydCB7IGRvY3VtZW50LCB3aW5kb3cgfSBmcm9tICcuL3V0aWxzL2dsb2JhbHMnXG5cbmNvbnN0IENPUFlfQVVUT0NBUFRVUkVfRVZFTlQgPSAnJGNvcHlfYXV0b2NhcHR1cmUnXG5cbmZ1bmN0aW9uIGxpbWl0VGV4dChsZW5ndGg6IG51bWJlciwgdGV4dDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBpZiAodGV4dC5sZW5ndGggPiBsZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIHRleHQuc2xpY2UoMCwgbGVuZ3RoKSArICcuLi4nXG4gICAgfVxuICAgIHJldHVybiB0ZXh0XG59XG5cbmNvbnN0IGF1dG9jYXB0dXJlID0ge1xuICAgIF9pbml0aWFsaXplZFRva2VuczogW10gYXMgc3RyaW5nW10sXG4gICAgX2lzRGlzYWJsZWRTZXJ2ZXJTaWRlOiBudWxsIGFzIGJvb2xlYW4gfCBudWxsLFxuICAgIF9pc0F1dG9jYXB0dXJlRW5hYmxlZDogZmFsc2UgYXMgYm9vbGVhbixcblxuICAgIF9zZXRJc0F1dG9jYXB0dXJlRW5hYmxlZDogZnVuY3Rpb24gKGluc3RhbmNlOiBQb3N0SG9nKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGRpc2FibGVkX3NlcnZlcl9zaWRlID0gX2lzTnVsbCh0aGlzLl9pc0Rpc2FibGVkU2VydmVyU2lkZSlcbiAgICAgICAgICAgID8gISFpbnN0YW5jZS5wZXJzaXN0ZW5jZT8ucHJvcHNbQVVUT0NBUFRVUkVfRElTQUJMRURfU0VSVkVSX1NJREVdXG4gICAgICAgICAgICA6IHRoaXMuX2lzRGlzYWJsZWRTZXJ2ZXJTaWRlXG4gICAgICAgIGNvbnN0IGVuYWJsZWRfY2xpZW50X3NpZGUgPSAhIWluc3RhbmNlLmNvbmZpZy5hdXRvY2FwdHVyZVxuICAgICAgICB0aGlzLl9pc0F1dG9jYXB0dXJlRW5hYmxlZCA9IGVuYWJsZWRfY2xpZW50X3NpZGUgJiYgIWRpc2FibGVkX3NlcnZlcl9zaWRlXG4gICAgfSxcblxuICAgIF9wcmV2aW91c0VsZW1lbnRTaWJsaW5nOiBmdW5jdGlvbiAoZWw6IEVsZW1lbnQpOiBFbGVtZW50IHwgbnVsbCB7XG4gICAgICAgIGlmIChlbC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nKSB7XG4gICAgICAgICAgICByZXR1cm4gZWwucHJldmlvdXNFbGVtZW50U2libGluZ1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGV0IF9lbDogRWxlbWVudCB8IG51bGwgPSBlbFxuICAgICAgICAgICAgZG8ge1xuICAgICAgICAgICAgICAgIF9lbCA9IF9lbC5wcmV2aW91c1NpYmxpbmcgYXMgRWxlbWVudCB8IG51bGwgLy8gcmVzb2x2ZXMgdG8gQ2hpbGROb2RlLT5Ob2RlLCB3aGljaCBpcyBFbGVtZW50J3MgcGFyZW50IGNsYXNzXG4gICAgICAgICAgICB9IHdoaWxlIChfZWwgJiYgIWlzRWxlbWVudE5vZGUoX2VsKSlcbiAgICAgICAgICAgIHJldHVybiBfZWxcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBfZ2V0QXVnbWVudFByb3BlcnRpZXNGcm9tRWxlbWVudDogZnVuY3Rpb24gKGVsZW06IEVsZW1lbnQpOiBQcm9wZXJ0aWVzIHtcbiAgICAgICAgY29uc3Qgc2hvdWxkQ2FwdHVyZUVsID0gc2hvdWxkQ2FwdHVyZUVsZW1lbnQoZWxlbSlcbiAgICAgICAgaWYgKCFzaG91bGRDYXB0dXJlRWwpIHtcbiAgICAgICAgICAgIHJldHVybiB7fVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcHJvcHM6IFByb3BlcnRpZXMgPSB7fVxuXG4gICAgICAgIF9lYWNoKGVsZW0uYXR0cmlidXRlcywgZnVuY3Rpb24gKGF0dHI6IEF0dHIpIHtcbiAgICAgICAgICAgIGlmIChhdHRyLm5hbWUuaW5kZXhPZignZGF0YS1waC1jYXB0dXJlLWF0dHJpYnV0ZScpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcHJvcGVydHlLZXkgPSBhdHRyLm5hbWUucmVwbGFjZSgnZGF0YS1waC1jYXB0dXJlLWF0dHJpYnV0ZS0nLCAnJylcbiAgICAgICAgICAgICAgICBjb25zdCBwcm9wZXJ0eVZhbHVlID0gYXR0ci52YWx1ZVxuICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0eUtleSAmJiBwcm9wZXJ0eVZhbHVlICYmIHNob3VsZENhcHR1cmVWYWx1ZShwcm9wZXJ0eVZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICBwcm9wc1twcm9wZXJ0eUtleV0gPSBwcm9wZXJ0eVZhbHVlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gcHJvcHNcbiAgICB9LFxuXG4gICAgX2dldFByb3BlcnRpZXNGcm9tRWxlbWVudDogZnVuY3Rpb24gKGVsZW06IEVsZW1lbnQsIG1hc2tJbnB1dHM6IGJvb2xlYW4sIG1hc2tUZXh0OiBib29sZWFuKTogUHJvcGVydGllcyB7XG4gICAgICAgIGNvbnN0IHRhZ19uYW1lID0gZWxlbS50YWdOYW1lLnRvTG93ZXJDYXNlKClcbiAgICAgICAgY29uc3QgcHJvcHM6IFByb3BlcnRpZXMgPSB7XG4gICAgICAgICAgICB0YWdfbmFtZTogdGFnX25hbWUsXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGF1dG9jYXB0dXJlQ29tcGF0aWJsZUVsZW1lbnRzLmluZGV4T2YodGFnX25hbWUpID4gLTEgJiYgIW1hc2tUZXh0KSB7XG4gICAgICAgICAgICBpZiAodGFnX25hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ2EnIHx8IHRhZ19uYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdidXR0b24nKSB7XG4gICAgICAgICAgICAgICAgcHJvcHNbJyRlbF90ZXh0J10gPSBsaW1pdFRleHQoMTAyNCwgZ2V0RGlyZWN0QW5kTmVzdGVkU3BhblRleHQoZWxlbSkpXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHByb3BzWyckZWxfdGV4dCddID0gbGltaXRUZXh0KDEwMjQsIGdldFNhZmVUZXh0KGVsZW0pKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY2xhc3NlcyA9IGdldENsYXNzTmFtZXMoZWxlbSlcbiAgICAgICAgaWYgKGNsYXNzZXMubGVuZ3RoID4gMClcbiAgICAgICAgICAgIHByb3BzWydjbGFzc2VzJ10gPSBjbGFzc2VzLmZpbHRlcihmdW5jdGlvbiAoYykge1xuICAgICAgICAgICAgICAgIHJldHVybiBjICE9PSAnJ1xuICAgICAgICAgICAgfSlcblxuICAgICAgICAvLyBjYXB0dXJlIHRoZSBkZW55IGxpc3QgaGVyZSBiZWNhdXNlIHRoaXMgbm90LWEtY2xhc3MgY2xhc3MgbWFrZXMgaXQgdHJpY2t5IHRvIHVzZSB0aGlzLmNvbmZpZyBpbiB0aGUgZnVuY3Rpb24gYmVsb3dcbiAgICAgICAgY29uc3QgZWxlbWVudEF0dHJpYnV0ZUlnbm9yZWxpc3QgPSB0aGlzLmNvbmZpZz8uZWxlbWVudF9hdHRyaWJ1dGVfaWdub3JlbGlzdFxuICAgICAgICBfZWFjaChlbGVtLmF0dHJpYnV0ZXMsIGZ1bmN0aW9uIChhdHRyOiBBdHRyKSB7XG4gICAgICAgICAgICAvLyBPbmx5IGNhcHR1cmUgYXR0cmlidXRlcyB3ZSBrbm93IGFyZSBzYWZlXG4gICAgICAgICAgICBpZiAoaXNTZW5zaXRpdmVFbGVtZW50KGVsZW0pICYmIFsnbmFtZScsICdpZCcsICdjbGFzcyddLmluZGV4T2YoYXR0ci5uYW1lKSA9PT0gLTEpIHJldHVyblxuXG4gICAgICAgICAgICBpZiAoZWxlbWVudEF0dHJpYnV0ZUlnbm9yZWxpc3Q/LmluY2x1ZGVzKGF0dHIubmFtZSkpIHJldHVyblxuXG4gICAgICAgICAgICBpZiAoIW1hc2tJbnB1dHMgJiYgc2hvdWxkQ2FwdHVyZVZhbHVlKGF0dHIudmFsdWUpICYmICFpc0FuZ3VsYXJTdHlsZUF0dHIoYXR0ci5uYW1lKSkge1xuICAgICAgICAgICAgICAgIGxldCB2YWx1ZSA9IGF0dHIudmFsdWVcbiAgICAgICAgICAgICAgICBpZiAoYXR0ci5uYW1lID09PSAnY2xhc3MnKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGh0bWwgYXR0cmlidXRlcyBjYW4gX3RlY2huaWNhbGx5XyBjb250YWluIGxpbmVicmVha3MsXG4gICAgICAgICAgICAgICAgICAgIC8vIGJ1dCB3ZSdyZSB2ZXJ5IGludG9sZXJhbnQgb2YgdGhlbSBpbiB0aGUgY2xhc3Mgc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAvLyBzbyB3ZSBzdHJpcCB0aGVtLlxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHNwbGl0Q2xhc3NTdHJpbmcodmFsdWUpLmpvaW4oJyAnKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwcm9wc1snYXR0cl9fJyArIGF0dHIubmFtZV0gPSBsaW1pdFRleHQoMTAyNCwgdmFsdWUpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG5cbiAgICAgICAgbGV0IG50aENoaWxkID0gMVxuICAgICAgICBsZXQgbnRoT2ZUeXBlID0gMVxuICAgICAgICBsZXQgY3VycmVudEVsZW06IEVsZW1lbnQgfCBudWxsID0gZWxlbVxuICAgICAgICB3aGlsZSAoKGN1cnJlbnRFbGVtID0gdGhpcy5fcHJldmlvdXNFbGVtZW50U2libGluZyhjdXJyZW50RWxlbSkpKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbmQtYXNzaWduXG4gICAgICAgICAgICBudGhDaGlsZCsrXG4gICAgICAgICAgICBpZiAoY3VycmVudEVsZW0udGFnTmFtZSA9PT0gZWxlbS50YWdOYW1lKSB7XG4gICAgICAgICAgICAgICAgbnRoT2ZUeXBlKytcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBwcm9wc1snbnRoX2NoaWxkJ10gPSBudGhDaGlsZFxuICAgICAgICBwcm9wc1snbnRoX29mX3R5cGUnXSA9IG50aE9mVHlwZVxuXG4gICAgICAgIHJldHVybiBwcm9wc1xuICAgIH0sXG5cbiAgICBfZ2V0RGVmYXVsdFByb3BlcnRpZXM6IGZ1bmN0aW9uIChldmVudFR5cGU6IHN0cmluZyk6IFByb3BlcnRpZXMge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgJGV2ZW50X3R5cGU6IGV2ZW50VHlwZSxcbiAgICAgICAgICAgICRjZV92ZXJzaW9uOiAxLFxuICAgICAgICB9XG4gICAgfSxcblxuICAgIF9leHRyYWN0Q3VzdG9tUHJvcGVydHlWYWx1ZTogZnVuY3Rpb24gKGN1c3RvbVByb3BlcnR5OiBBdXRvQ2FwdHVyZUN1c3RvbVByb3BlcnR5KTogc3RyaW5nIHtcbiAgICAgICAgY29uc3QgcHJvcFZhbHVlczogc3RyaW5nW10gPSBbXVxuICAgICAgICBfZWFjaChkb2N1bWVudD8ucXVlcnlTZWxlY3RvckFsbChjdXN0b21Qcm9wZXJ0eVsnY3NzX3NlbGVjdG9yJ10pLCBmdW5jdGlvbiAobWF0Y2hlZEVsZW0pIHtcbiAgICAgICAgICAgIGxldCB2YWx1ZVxuXG4gICAgICAgICAgICBpZiAoWydpbnB1dCcsICdzZWxlY3QnXS5pbmRleE9mKG1hdGNoZWRFbGVtLnRhZ05hbWUudG9Mb3dlckNhc2UoKSkgPiAtMSkge1xuICAgICAgICAgICAgICAgIHZhbHVlID0gbWF0Y2hlZEVsZW1bJ3ZhbHVlJ11cbiAgICAgICAgICAgIH0gZWxzZSBpZiAobWF0Y2hlZEVsZW1bJ3RleHRDb250ZW50J10pIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IG1hdGNoZWRFbGVtWyd0ZXh0Q29udGVudCddXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChzaG91bGRDYXB0dXJlVmFsdWUodmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgcHJvcFZhbHVlcy5wdXNoKHZhbHVlKVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gcHJvcFZhbHVlcy5qb2luKCcsICcpXG4gICAgfSxcblxuICAgIC8vIFRPRE86IGRlbGV0ZSBjdXN0b21fcHJvcGVydGllcyBhZnRlciBjaGFuZ2VsZXNzIHR5cGVzY3JpcHQgcmVmYWN0b3JcbiAgICBfZ2V0Q3VzdG9tUHJvcGVydGllczogZnVuY3Rpb24gKHRhcmdldEVsZW1lbnRMaXN0OiBFbGVtZW50W10pOiBQcm9wZXJ0aWVzIHtcbiAgICAgICAgY29uc3QgcHJvcHM6IFByb3BlcnRpZXMgPSB7fSAvLyB3aWxsIGJlIGRlbGV0ZWRcbiAgICAgICAgX2VhY2godGhpcy5fY3VzdG9tUHJvcGVydGllcywgKGN1c3RvbVByb3BlcnR5KSA9PiB7XG4gICAgICAgICAgICBfZWFjaChjdXN0b21Qcm9wZXJ0eVsnZXZlbnRfc2VsZWN0b3JzJ10sIChldmVudFNlbGVjdG9yKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXZlbnRFbGVtZW50cyA9IGRvY3VtZW50Py5xdWVyeVNlbGVjdG9yQWxsKGV2ZW50U2VsZWN0b3IpXG4gICAgICAgICAgICAgICAgX2VhY2goZXZlbnRFbGVtZW50cywgKGV2ZW50RWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoX2luY2x1ZGVzKHRhcmdldEVsZW1lbnRMaXN0LCBldmVudEVsZW1lbnQpICYmIHNob3VsZENhcHR1cmVFbGVtZW50KGV2ZW50RWxlbWVudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3BzW2N1c3RvbVByb3BlcnR5WyduYW1lJ11dID0gdGhpcy5fZXh0cmFjdEN1c3RvbVByb3BlcnR5VmFsdWUoY3VzdG9tUHJvcGVydHkpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIHByb3BzXG4gICAgfSxcblxuICAgIF9nZXRFdmVudFRhcmdldDogZnVuY3Rpb24gKGU6IEV2ZW50KTogRWxlbWVudCB8IG51bGwge1xuICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvRXZlbnQvdGFyZ2V0I0NvbXBhdGliaWxpdHlfbm90ZXNcbiAgICAgICAgaWYgKF9pc1VuZGVmaW5lZChlLnRhcmdldCkpIHtcbiAgICAgICAgICAgIHJldHVybiAoZS5zcmNFbGVtZW50IGFzIEVsZW1lbnQpIHx8IG51bGxcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmICgoZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQpPy5zaGFkb3dSb290KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChlLmNvbXBvc2VkUGF0aCgpWzBdIGFzIEVsZW1lbnQpIHx8IG51bGxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAoZS50YXJnZXQgYXMgRWxlbWVudCkgfHwgbnVsbFxuICAgICAgICB9XG4gICAgfSxcblxuICAgIF9jYXB0dXJlRXZlbnQ6IGZ1bmN0aW9uIChcbiAgICAgICAgZTogRXZlbnQsXG4gICAgICAgIGluc3RhbmNlOiBQb3N0SG9nLFxuICAgICAgICBldmVudE5hbWUgPSAnJGF1dG9jYXB0dXJlJyxcbiAgICAgICAgZXh0cmFQcm9wcz86IFByb3BlcnRpZXNcbiAgICApOiBib29sZWFuIHwgdm9pZCB7XG4gICAgICAgIC8qKiogRG9uJ3QgbWVzcyB3aXRoIHRoaXMgY29kZSB3aXRob3V0IHJ1bm5pbmcgSUU4IHRlc3RzIG9uIGl0ICoqKi9cbiAgICAgICAgbGV0IHRhcmdldCA9IHRoaXMuX2dldEV2ZW50VGFyZ2V0KGUpXG4gICAgICAgIGlmIChpc1RleHROb2RlKHRhcmdldCkpIHtcbiAgICAgICAgICAgIC8vIGRlZmVhdCBTYWZhcmkgYnVnIChzZWU6IGh0dHA6Ly93d3cucXVpcmtzbW9kZS5vcmcvanMvZXZlbnRzX3Byb3BlcnRpZXMuaHRtbClcbiAgICAgICAgICAgIHRhcmdldCA9ICh0YXJnZXQucGFyZW50Tm9kZSB8fCBudWxsKSBhcyBFbGVtZW50IHwgbnVsbFxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGV2ZW50TmFtZSA9PT0gJyRhdXRvY2FwdHVyZScgJiYgZS50eXBlID09PSAnY2xpY2snICYmIGUgaW5zdGFuY2VvZiBNb3VzZUV2ZW50KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5yYWdlY2xpY2tzPy5pc1JhZ2VDbGljayhlLmNsaWVudFgsIGUuY2xpZW50WSwgbmV3IERhdGUoKS5nZXRUaW1lKCkpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fY2FwdHVyZUV2ZW50KGUsIGluc3RhbmNlLCAnJHJhZ2VjbGljaycpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBpc0NvcHlBdXRvY2FwdHVyZSA9IGV2ZW50TmFtZSA9PT0gQ09QWV9BVVRPQ0FQVFVSRV9FVkVOVFxuICAgICAgICBpZiAoXG4gICAgICAgICAgICB0YXJnZXQgJiZcbiAgICAgICAgICAgIHNob3VsZENhcHR1cmVEb21FdmVudChcbiAgICAgICAgICAgICAgICB0YXJnZXQsXG4gICAgICAgICAgICAgICAgZSxcbiAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZyxcbiAgICAgICAgICAgICAgICAvLyBtb3N0bHkgdGhpcyBtZXRob2QgY2FyZXMgYWJvdXQgdGhlIHRhcmdldCBlbGVtZW50LCBidXQgaW4gdGhlIGNhc2Ugb2YgY29weSBldmVudHMsXG4gICAgICAgICAgICAgICAgLy8gd2Ugd2FudCBzb21lIG9mIHRoZSB3b3JrIHRoaXMgY2hlY2sgZG9lcyB3aXRob3V0IGluc2lzdGluZyBvbiB0aGUgdGFyZ2V0IGVsZW1lbnQncyB0eXBlXG4gICAgICAgICAgICAgICAgaXNDb3B5QXV0b2NhcHR1cmUsXG4gICAgICAgICAgICAgICAgLy8gd2UgYWxzbyBkb24ndCB3YW50IHRvIHJlc3RyaWN0IGNvcHkgY2hlY2tzIHRvIGNsaWNrcyxcbiAgICAgICAgICAgICAgICAvLyBzbyB3ZSBwYXNzIHRoYXQga25vd2xlZGdlIGluIGhlcmUsIHJhdGhlciB0aGFuIGFkZCB0aGUgbG9naWMgaW5zaWRlIHRoZSBjaGVja1xuICAgICAgICAgICAgICAgIGlzQ29weUF1dG9jYXB0dXJlID8gWydjb3B5JywgJ2N1dCddIDogdW5kZWZpbmVkXG4gICAgICAgICAgICApXG4gICAgICAgICkge1xuICAgICAgICAgICAgY29uc3QgdGFyZ2V0RWxlbWVudExpc3QgPSBbdGFyZ2V0XVxuICAgICAgICAgICAgbGV0IGN1ckVsID0gdGFyZ2V0XG4gICAgICAgICAgICB3aGlsZSAoY3VyRWwucGFyZW50Tm9kZSAmJiAhaXNUYWcoY3VyRWwsICdib2R5JykpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNEb2N1bWVudEZyYWdtZW50KGN1ckVsLnBhcmVudE5vZGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldEVsZW1lbnRMaXN0LnB1c2goKGN1ckVsLnBhcmVudE5vZGUgYXMgYW55KS5ob3N0KVxuICAgICAgICAgICAgICAgICAgICBjdXJFbCA9IChjdXJFbC5wYXJlbnROb2RlIGFzIGFueSkuaG9zdFxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0YXJnZXRFbGVtZW50TGlzdC5wdXNoKGN1ckVsLnBhcmVudE5vZGUgYXMgRWxlbWVudClcbiAgICAgICAgICAgICAgICBjdXJFbCA9IGN1ckVsLnBhcmVudE5vZGUgYXMgRWxlbWVudFxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBlbGVtZW50c0pzb246IFByb3BlcnRpZXNbXSA9IFtdXG4gICAgICAgICAgICBjb25zdCBhdXRvY2FwdHVyZUF1Z21lbnRQcm9wZXJ0aWVzOiBQcm9wZXJ0aWVzID0ge31cbiAgICAgICAgICAgIGxldCBocmVmLFxuICAgICAgICAgICAgICAgIGV4cGxpY2l0Tm9DYXB0dXJlID0gZmFsc2VcbiAgICAgICAgICAgIF9lYWNoKHRhcmdldEVsZW1lbnRMaXN0LCAoZWwpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzaG91bGRDYXB0dXJlRWwgPSBzaG91bGRDYXB0dXJlRWxlbWVudChlbClcblxuICAgICAgICAgICAgICAgIC8vIGlmIHRoZSBlbGVtZW50IG9yIGEgcGFyZW50IGVsZW1lbnQgaXMgYW4gYW5jaG9yIHRhZ1xuICAgICAgICAgICAgICAgIC8vIGluY2x1ZGUgdGhlIGhyZWYgYXMgYSBwcm9wZXJ0eVxuICAgICAgICAgICAgICAgIGlmIChlbC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdhJykge1xuICAgICAgICAgICAgICAgICAgICBocmVmID0gZWwuZ2V0QXR0cmlidXRlKCdocmVmJylcbiAgICAgICAgICAgICAgICAgICAgaHJlZiA9IHNob3VsZENhcHR1cmVFbCAmJiBzaG91bGRDYXB0dXJlVmFsdWUoaHJlZikgJiYgaHJlZlxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIGFsbG93IHVzZXJzIHRvIHByb2dyYW1tYXRpY2FsbHkgcHJldmVudCBjYXB0dXJpbmcgb2YgZWxlbWVudHMgYnkgYWRkaW5nIGNsYXNzICdwaC1uby1jYXB0dXJlJ1xuICAgICAgICAgICAgICAgIGNvbnN0IGNsYXNzZXMgPSBnZXRDbGFzc05hbWVzKGVsKVxuICAgICAgICAgICAgICAgIGlmIChfaW5jbHVkZXMoY2xhc3NlcywgJ3BoLW5vLWNhcHR1cmUnKSkge1xuICAgICAgICAgICAgICAgICAgICBleHBsaWNpdE5vQ2FwdHVyZSA9IHRydWVcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBlbGVtZW50c0pzb24ucHVzaChcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZ2V0UHJvcGVydGllc0Zyb21FbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgZWwsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZS5jb25maWcubWFza19hbGxfZWxlbWVudF9hdHRyaWJ1dGVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2UuY29uZmlnLm1hc2tfYWxsX3RleHRcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIClcblxuICAgICAgICAgICAgICAgIGNvbnN0IGF1Z21lbnRQcm9wZXJ0aWVzID0gdGhpcy5fZ2V0QXVnbWVudFByb3BlcnRpZXNGcm9tRWxlbWVudChlbClcbiAgICAgICAgICAgICAgICBfZXh0ZW5kKGF1dG9jYXB0dXJlQXVnbWVudFByb3BlcnRpZXMsIGF1Z21lbnRQcm9wZXJ0aWVzKVxuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgaWYgKCFpbnN0YW5jZS5jb25maWcubWFza19hbGxfdGV4dCkge1xuICAgICAgICAgICAgICAgIC8vIGlmIHRoZSBlbGVtZW50IGlzIGEgYnV0dG9uIG9yIGFuY2hvciB0YWcgZ2V0IHRoZSBzcGFuIHRleHQgZnJvbSBhbnlcbiAgICAgICAgICAgICAgICAvLyBjaGlsZHJlbiBhbmQgaW5jbHVkZSBpdCBhcy93aXRoIHRoZSB0ZXh0IHByb3BlcnR5IG9uIHRoZSBwYXJlbnQgZWxlbWVudFxuICAgICAgICAgICAgICAgIGlmICh0YXJnZXQudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnYScgfHwgdGFyZ2V0LnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ2J1dHRvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudHNKc29uWzBdWyckZWxfdGV4dCddID0gZ2V0RGlyZWN0QW5kTmVzdGVkU3BhblRleHQodGFyZ2V0KVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzSnNvblswXVsnJGVsX3RleHQnXSA9IGdldFNhZmVUZXh0KHRhcmdldClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChocmVmKSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudHNKc29uWzBdWydhdHRyX19ocmVmJ10gPSBocmVmXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChleHBsaWNpdE5vQ2FwdHVyZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBwcm9wcyA9IF9leHRlbmQoXG4gICAgICAgICAgICAgICAgdGhpcy5fZ2V0RGVmYXVsdFByb3BlcnRpZXMoZS50eXBlKSxcbiAgICAgICAgICAgICAgICBpbnN0YW5jZS5lbGVtZW50c0NoYWluQXNTdHJpbmdcbiAgICAgICAgICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICRlbGVtZW50c19jaGFpbjogZ2V0RWxlbWVudHNDaGFpblN0cmluZyhlbGVtZW50c0pzb24pLFxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICRlbGVtZW50czogZWxlbWVudHNKc29uLFxuICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZWxlbWVudHNKc29uWzBdPy5bJyRlbF90ZXh0J10gPyB7ICRlbF90ZXh0OiBlbGVtZW50c0pzb25bMF0/LlsnJGVsX3RleHQnXSB9IDoge30sXG4gICAgICAgICAgICAgICAgdGhpcy5fZ2V0Q3VzdG9tUHJvcGVydGllcyh0YXJnZXRFbGVtZW50TGlzdCksXG4gICAgICAgICAgICAgICAgYXV0b2NhcHR1cmVBdWdtZW50UHJvcGVydGllcyxcbiAgICAgICAgICAgICAgICBleHRyYVByb3BzIHx8IHt9XG4gICAgICAgICAgICApXG5cbiAgICAgICAgICAgIGlmIChldmVudE5hbWUgPT09IENPUFlfQVVUT0NBUFRVUkVfRVZFTlQpIHtcbiAgICAgICAgICAgICAgICAvLyB5b3UgY2FuJ3QgcmVhZCB0aGUgZGF0YSBmcm9tIHRoZSBjbGlwYm9hcmQgZXZlbnQsXG4gICAgICAgICAgICAgICAgLy8gYnV0IHlvdSBjYW4gZ3Vlc3MgdGhhdCB5b3UgY2FuIHJlYWQgaXQgZnJvbSB0aGUgd2luZG93J3MgY3VycmVudCBzZWxlY3Rpb25cbiAgICAgICAgICAgICAgICBjb25zdCBzZWxlY3RlZENvbnRlbnQgPSBtYWtlU2FmZVRleHQod2luZG93Py5nZXRTZWxlY3Rpb24oKT8udG9TdHJpbmcoKSlcbiAgICAgICAgICAgICAgICBjb25zdCBjbGlwVHlwZSA9IChlIGFzIENsaXBib2FyZEV2ZW50KS50eXBlIHx8ICdjbGlwYm9hcmQnXG4gICAgICAgICAgICAgICAgaWYgKCFzZWxlY3RlZENvbnRlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHByb3BzWyckc2VsZWN0ZWRfY29udGVudCddID0gc2VsZWN0ZWRDb250ZW50XG4gICAgICAgICAgICAgICAgcHJvcHNbJyRjb3B5X3R5cGUnXSA9IGNsaXBUeXBlXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGluc3RhbmNlLmNhcHR1cmUoZXZlbnROYW1lLCBwcm9wcylcbiAgICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLy8gb25seSByZWFzb24gaXMgdG8gc3R1YiBmb3IgdW5pdCB0ZXN0c1xuICAgIC8vIHNpbmNlIHlvdSBjYW4ndCBvdmVycmlkZSB3aW5kb3cubG9jYXRpb24gcHJvcHNcbiAgICBfbmF2aWdhdGU6IGZ1bmN0aW9uIChocmVmOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgaWYgKCF3aW5kb3cpIHtcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gaHJlZlxuICAgIH0sXG5cbiAgICBfYWRkRG9tRXZlbnRIYW5kbGVyczogZnVuY3Rpb24gKGluc3RhbmNlOiBQb3N0SG9nKTogdm9pZCB7XG4gICAgICAgIGlmICghd2luZG93IHx8ICFkb2N1bWVudCkge1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaGFuZGxlciA9IChlOiBFdmVudCkgPT4ge1xuICAgICAgICAgICAgZSA9IGUgfHwgd2luZG93Py5ldmVudFxuICAgICAgICAgICAgdGhpcy5fY2FwdHVyZUV2ZW50KGUsIGluc3RhbmNlKVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY29waWVkVGV4dEhhbmRsZXIgPSAoZTogRXZlbnQpID0+IHtcbiAgICAgICAgICAgIGUgPSBlIHx8IHdpbmRvdz8uZXZlbnRcbiAgICAgICAgICAgIHRoaXMuX2NhcHR1cmVFdmVudChlLCBpbnN0YW5jZSwgQ09QWV9BVVRPQ0FQVFVSRV9FVkVOVClcbiAgICAgICAgfVxuXG4gICAgICAgIF9yZWdpc3Rlcl9ldmVudChkb2N1bWVudCwgJ3N1Ym1pdCcsIGhhbmRsZXIsIGZhbHNlLCB0cnVlKVxuICAgICAgICBfcmVnaXN0ZXJfZXZlbnQoZG9jdW1lbnQsICdjaGFuZ2UnLCBoYW5kbGVyLCBmYWxzZSwgdHJ1ZSlcbiAgICAgICAgX3JlZ2lzdGVyX2V2ZW50KGRvY3VtZW50LCAnY2xpY2snLCBoYW5kbGVyLCBmYWxzZSwgdHJ1ZSlcblxuICAgICAgICBpZiAoX2lzT2JqZWN0KGluc3RhbmNlLmNvbmZpZy5hdXRvY2FwdHVyZSkgJiYgaW5zdGFuY2UuY29uZmlnLmF1dG9jYXB0dXJlLmNhcHR1cmVfY29waWVkX3RleHQpIHtcbiAgICAgICAgICAgIF9yZWdpc3Rlcl9ldmVudChkb2N1bWVudCwgJ2NvcHknLCBjb3BpZWRUZXh0SGFuZGxlciwgZmFsc2UsIHRydWUpXG4gICAgICAgICAgICBfcmVnaXN0ZXJfZXZlbnQoZG9jdW1lbnQsICdjdXQnLCBjb3BpZWRUZXh0SGFuZGxlciwgZmFsc2UsIHRydWUpXG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgX2N1c3RvbVByb3BlcnRpZXM6IFtdIGFzIEF1dG9DYXB0dXJlQ3VzdG9tUHJvcGVydHlbXSxcbiAgICByYWdlY2xpY2tzOiBudWxsIGFzIFJhZ2VDbGljayB8IG51bGwsXG4gICAgY29uZmlnOiB1bmRlZmluZWQgYXMgQXV0b2NhcHR1cmVDb25maWcgfCB1bmRlZmluZWQsXG5cbiAgICBpbml0OiBmdW5jdGlvbiAoaW5zdGFuY2U6IFBvc3RIb2cpOiB2b2lkIHtcbiAgICAgICAgaWYgKCFfaXNCb29sZWFuKGluc3RhbmNlLl9fYXV0b2NhcHR1cmUpKSB7XG4gICAgICAgICAgICB0aGlzLmNvbmZpZyA9IGluc3RhbmNlLl9fYXV0b2NhcHR1cmVcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHByZWNvbXBpbGUgdGhlIHJlZ2V4XG4gICAgICAgIGlmICh0aGlzLmNvbmZpZz8udXJsX2FsbG93bGlzdCkge1xuICAgICAgICAgICAgdGhpcy5jb25maWcudXJsX2FsbG93bGlzdCA9IHRoaXMuY29uZmlnLnVybF9hbGxvd2xpc3QubWFwKCh1cmwpID0+IG5ldyBSZWdFeHAodXJsKSlcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucmFnZWNsaWNrcyA9IG5ldyBSYWdlQ2xpY2soaW5zdGFuY2UuY29uZmlnLnJhZ2VjbGljaylcbiAgICB9LFxuXG4gICAgYWZ0ZXJEZWNpZGVSZXNwb25zZTogZnVuY3Rpb24gKHJlc3BvbnNlOiBEZWNpZGVSZXNwb25zZSwgaW5zdGFuY2U6IFBvc3RIb2cpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgdG9rZW4gPSBpbnN0YW5jZS5jb25maWcudG9rZW5cbiAgICAgICAgaWYgKHRoaXMuX2luaXRpYWxpemVkVG9rZW5zLmluZGV4T2YodG9rZW4pID4gLTEpIHtcbiAgICAgICAgICAgIGxvZ2dlci5pbmZvKCdhdXRvY2FwdHVyZSBhbHJlYWR5IGluaXRpYWxpemVkIGZvciB0b2tlbiBcIicgKyB0b2tlbiArICdcIicpXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpbnN0YW5jZS5wZXJzaXN0ZW5jZSkge1xuICAgICAgICAgICAgaW5zdGFuY2UucGVyc2lzdGVuY2UucmVnaXN0ZXIoe1xuICAgICAgICAgICAgICAgIFtBVVRPQ0FQVFVSRV9ESVNBQkxFRF9TRVJWRVJfU0lERV06ICEhcmVzcG9uc2VbJ2F1dG9jYXB0dXJlX29wdF9vdXQnXSxcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgLy8gc3RvcmUgdGhpcyBpbi1tZW1vcnkgaW5jYXNlIHBlcnNpc3RlbmNlIGlzIGRpc2FibGVkXG4gICAgICAgIHRoaXMuX2lzRGlzYWJsZWRTZXJ2ZXJTaWRlID0gISFyZXNwb25zZVsnYXV0b2NhcHR1cmVfb3B0X291dCddXG5cbiAgICAgICAgdGhpcy5fc2V0SXNBdXRvY2FwdHVyZUVuYWJsZWQoaW5zdGFuY2UpXG5cbiAgICAgICAgdGhpcy5faW5pdGlhbGl6ZWRUb2tlbnMucHVzaCh0b2tlbilcblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICByZXNwb25zZSAmJlxuICAgICAgICAgICAgcmVzcG9uc2VbJ2NvbmZpZyddICYmXG4gICAgICAgICAgICByZXNwb25zZVsnY29uZmlnJ11bJ2VuYWJsZV9jb2xsZWN0X2V2ZXJ5dGhpbmcnXSAmJlxuICAgICAgICAgICAgdGhpcy5faXNBdXRvY2FwdHVyZUVuYWJsZWRcbiAgICAgICAgKSB7XG4gICAgICAgICAgICAvLyBUT0RPOiBkZWxldGUgY3VzdG9tX3Byb3BlcnRpZXMgYWZ0ZXIgY2hhbmdlbGVzcyB0eXBlc2NyaXB0IHJlZmFjdG9yXG4gICAgICAgICAgICBpZiAocmVzcG9uc2VbJ2N1c3RvbV9wcm9wZXJ0aWVzJ10pIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9jdXN0b21Qcm9wZXJ0aWVzID0gcmVzcG9uc2VbJ2N1c3RvbV9wcm9wZXJ0aWVzJ11cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX2FkZERvbUV2ZW50SGFuZGxlcnMoaW5zdGFuY2UpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpbnN0YW5jZVsnX19hdXRvY2FwdHVyZSddID0gZmFsc2VcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICAvLyB0aGlzIGlzIGEgbWVjaGFuaXNtIHRvIHJhbXAgdXAgQ0Ugd2l0aCBubyBzZXJ2ZXItc2lkZSBpbnRlcmFjdGlvbi5cbiAgICAvLyB3aGVuIENFIGlzIGFjdGl2ZSwgZXZlcnkgcGFnZSBsb2FkIHJlc3VsdHMgaW4gYSBkZWNpZGUgcmVxdWVzdC4gd2VcbiAgICAvLyBuZWVkIHRvIGdlbnRseSByYW1wIHRoaXMgdXAsIHNvIHdlIGRvbid0IG92ZXJsb2FkIGRlY2lkZS4gdGhpcyBkZWNpZGVzXG4gICAgLy8gZGV0ZXJtaW5pc3RpY2FsbHkgaWYgQ0UgaXMgZW5hYmxlZCBmb3IgdGhpcyBwcm9qZWN0IGJ5IG1vZGRpbmcgdGhlIGNoYXJcbiAgICAvLyB2YWx1ZSBvZiB0aGUgcHJvamVjdCB0b2tlbi5cbiAgICBlbmFibGVkRm9yUHJvamVjdDogZnVuY3Rpb24gKFxuICAgICAgICB0b2tlbjogc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZCxcbiAgICAgICAgbnVtQnVja2V0czogbnVtYmVyLFxuICAgICAgICBudW1FbmFibGVkQnVja2V0czogbnVtYmVyXG4gICAgKTogYm9vbGVhbiB7XG4gICAgICAgIGlmICghdG9rZW4pIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgbnVtQnVja2V0cyA9ICFfaXNVbmRlZmluZWQobnVtQnVja2V0cykgPyBudW1CdWNrZXRzIDogMTBcbiAgICAgICAgbnVtRW5hYmxlZEJ1Y2tldHMgPSAhX2lzVW5kZWZpbmVkKG51bUVuYWJsZWRCdWNrZXRzKSA/IG51bUVuYWJsZWRCdWNrZXRzIDogMTBcbiAgICAgICAgbGV0IGNoYXJDb2RlU3VtID0gMFxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRva2VuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjaGFyQ29kZVN1bSArPSB0b2tlbi5jaGFyQ29kZUF0KGkpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNoYXJDb2RlU3VtICUgbnVtQnVja2V0cyA8IG51bUVuYWJsZWRCdWNrZXRzXG4gICAgfSxcblxuICAgIGlzQnJvd3NlclN1cHBvcnRlZDogZnVuY3Rpb24gKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gX2lzRnVuY3Rpb24oZG9jdW1lbnQ/LnF1ZXJ5U2VsZWN0b3JBbGwpXG4gICAgfSxcbn1cblxuX2JpbmRfaW5zdGFuY2VfbWV0aG9kcyhhdXRvY2FwdHVyZSlcbl9zYWZld3JhcF9pbnN0YW5jZV9tZXRob2RzKGF1dG9jYXB0dXJlKVxuXG5leHBvcnQgeyBhdXRvY2FwdHVyZSB9XG4iLCAiaW1wb3J0IHR5cGUgeyBNYXNrSW5wdXRPcHRpb25zLCBTbGltRE9NT3B0aW9ucyB9IGZyb20gJ3Jyd2ViLXNuYXBzaG90J1xuaW1wb3J0IHsgUG9zdEhvZyB9IGZyb20gJy4vcG9zdGhvZy1jb3JlJ1xuXG5leHBvcnQgdHlwZSBQcm9wZXJ0eSA9IGFueVxuZXhwb3J0IHR5cGUgUHJvcGVydGllcyA9IFJlY29yZDxzdHJpbmcsIFByb3BlcnR5PlxuXG5leHBvcnQgaW50ZXJmYWNlIENhcHR1cmVSZXN1bHQge1xuICAgIHV1aWQ6IHN0cmluZ1xuICAgIGV2ZW50OiBzdHJpbmdcbiAgICBwcm9wZXJ0aWVzOiBQcm9wZXJ0aWVzXG4gICAgJHNldD86IFByb3BlcnRpZXNcbiAgICAkc2V0X29uY2U/OiBQcm9wZXJ0aWVzXG4gICAgdGltZXN0YW1wPzogRGF0ZVxufVxuXG5leHBvcnQgdHlwZSBBdXRvY2FwdHVyZUNvbXBhdGlibGVFbGVtZW50ID0gJ2EnIHwgJ2J1dHRvbicgfCAnZm9ybScgfCAnaW5wdXQnIHwgJ3NlbGVjdCcgfCAndGV4dGFyZWEnIHwgJ2xhYmVsJ1xuZXhwb3J0IHR5cGUgRG9tQXV0b2NhcHR1cmVFdmVudHMgPSAnY2xpY2snIHwgJ2NoYW5nZScgfCAnc3VibWl0J1xuXG4vKipcbiAqIElmIGFuIGFycmF5IGlzIHBhc3NlZCBmb3IgYW4gYWxsb3dsaXN0LCBhdXRvY2FwdHVyZSBldmVudHMgd2lsbCBvbmx5IGJlIHNlbnQgZm9yIGVsZW1lbnRzIG1hdGNoaW5nXG4gKiBhdCBsZWFzdCBvbmUgb2YgdGhlIGVsZW1lbnRzIGluIHRoZSBhcnJheS4gTXVsdGlwbGUgYWxsb3dsaXN0cyBjYW4gYmUgdXNlZFxuICovXG5leHBvcnQgaW50ZXJmYWNlIEF1dG9jYXB0dXJlQ29uZmlnIHtcbiAgICAvKipcbiAgICAgKiBMaXN0IG9mIFVSTHMgdG8gYWxsb3cgYXV0b2NhcHR1cmUgb24sIGNhbiBiZSBzdHJpbmdzIHRvIG1hdGNoXG4gICAgICogb3IgcmVnZXhlcyBlLmcuIFsnaHR0cHM6Ly9leGFtcGxlLmNvbScsICd0ZXN0LmNvbS8uKiddXG4gICAgICovXG4gICAgdXJsX2FsbG93bGlzdD86IChzdHJpbmcgfCBSZWdFeHApW11cblxuICAgIC8qKlxuICAgICAqIExpc3Qgb2YgRE9NIGV2ZW50cyB0byBhbGxvdyBhdXRvY2FwdHVyZSBvbiAgZS5nLiBbJ2NsaWNrJywgJ2NoYW5nZScsICdzdWJtaXQnXVxuICAgICAqL1xuICAgIGRvbV9ldmVudF9hbGxvd2xpc3Q/OiBEb21BdXRvY2FwdHVyZUV2ZW50c1tdXG5cbiAgICAvKipcbiAgICAgKiBMaXN0IG9mIERPTSBlbGVtZW50cyB0byBhbGxvdyBhdXRvY2FwdHVyZSBvblxuICAgICAqIGUuZy4gWydhJywgJ2J1dHRvbicsICdmb3JtJywgJ2lucHV0JywgJ3NlbGVjdCcsICd0ZXh0YXJlYScsICdsYWJlbCddXG4gICAgICogd2UgY29uc2lkZXIgdGhlIHRyZWUgb2YgZWxlbWVudHMgZnJvbSB0aGUgcm9vdCB0byB0aGUgdGFyZ2V0IGVsZW1lbnQgb2YgdGhlIGNsaWNrIGV2ZW50XG4gICAgICogc28gZm9yIHRoZSB0cmVlIGRpdiA+IGRpdiA+IGJ1dHRvbiA+IHN2Z1xuICAgICAqIGlmIHRoZSBhbGxvd2xpc3QgaGFzIGJ1dHRvbiB0aGVuIHdlIGFsbG93IHRoZSBjYXB0dXJlIHdoZW4gdGhlIGJ1dHRvbiBvciB0aGUgc3ZnIGlzIHRoZSBjbGljayB0YXJnZXRcbiAgICAgKiBidXQgbm90IGlmIGVpdGhlciBvZiB0aGUgZGl2cyBhcmUgZGV0ZWN0ZWQgYXMgdGhlIGNsaWNrIHRhcmdldFxuICAgICAqL1xuICAgIGVsZW1lbnRfYWxsb3dsaXN0PzogQXV0b2NhcHR1cmVDb21wYXRpYmxlRWxlbWVudFtdXG5cbiAgICAvKipcbiAgICAgKiBMaXN0IG9mIENTUyBzZWxlY3RvcnMgdG8gYWxsb3cgYXV0b2NhcHR1cmUgb25cbiAgICAgKiBlLmcuIFsnW3BoLWNhcHR1cmVdJ11cbiAgICAgKiB3ZSBjb25zaWRlciB0aGUgdHJlZSBvZiBlbGVtZW50cyBmcm9tIHRoZSByb290IHRvIHRoZSB0YXJnZXQgZWxlbWVudCBvZiB0aGUgY2xpY2sgZXZlbnRcbiAgICAgKiBzbyBmb3IgdGhlIHRyZWUgZGl2ID4gZGl2ID4gYnV0dG9uID4gc3ZnXG4gICAgICogYW5kIGFsbG93IGxpc3QgY29uZmlnIGBbJ1tpZF0nXWBcbiAgICAgKiB3ZSB3aWxsIGNhcHR1cmUgdGhlIGNsaWNrIGlmIHRoZSBjbGljay10YXJnZXQgb3IgaXRzIHBhcmVudHMgaGFzIGFueSBpZFxuICAgICAqL1xuICAgIGNzc19zZWxlY3Rvcl9hbGxvd2xpc3Q/OiBzdHJpbmdbXVxuXG4gICAgLyoqXG4gICAgICogRXhjbHVkZSBjZXJ0YWluIGVsZW1lbnQgYXR0cmlidXRlcyBmcm9tIGF1dG9jYXB0dXJlXG4gICAgICogRS5nLiBbJ2FyaWEtbGFiZWwnXSBvciBbZGF0YS1hdHRyLXBpaV1cbiAgICAgKi9cbiAgICBlbGVtZW50X2F0dHJpYnV0ZV9pZ25vcmVsaXN0Pzogc3RyaW5nW11cblxuICAgIGNhcHR1cmVfY29waWVkX3RleHQ/OiBib29sZWFuXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUG9zdEhvZ0NvbmZpZyB7XG4gICAgYXBpX2hvc3Q6IHN0cmluZ1xuICAgIC8qKiBAZGVwcmVjYXRlZCAtIFRoaXMgcHJvcGVydHkgaXMgbm8gbG9uZ2VyIHN1cHBvcnRlZCAqL1xuICAgIGFwaV9tZXRob2Q/OiBzdHJpbmdcbiAgICBhcGlfdHJhbnNwb3J0PzogJ1hIUicgfCAnZmV0Y2gnXG4gICAgdWlfaG9zdDogc3RyaW5nIHwgbnVsbFxuICAgIHRva2VuOiBzdHJpbmdcbiAgICBhdXRvY2FwdHVyZTogYm9vbGVhbiB8IEF1dG9jYXB0dXJlQ29uZmlnXG4gICAgcmFnZWNsaWNrOiBib29sZWFuXG4gICAgY3Jvc3Nfc3ViZG9tYWluX2Nvb2tpZTogYm9vbGVhblxuICAgIHBlcnNpc3RlbmNlOiAnbG9jYWxTdG9yYWdlJyB8ICdjb29raWUnIHwgJ21lbW9yeScgfCAnbG9jYWxTdG9yYWdlK2Nvb2tpZScgfCAnc2Vzc2lvblN0b3JhZ2UnXG4gICAgcGVyc2lzdGVuY2VfbmFtZTogc3RyaW5nXG4gICAgY29va2llX25hbWU6IHN0cmluZ1xuICAgIGxvYWRlZDogKHBvc3Rob2dfaW5zdGFuY2U6IFBvc3RIb2cpID0+IHZvaWRcbiAgICBzdG9yZV9nb29nbGU6IGJvb2xlYW5cbiAgICBjdXN0b21fY2FtcGFpZ25fcGFyYW1zOiBzdHJpbmdbXVxuICAgIC8vIGEgbGlzdCBvZiBzdHJpbmdzIHRvIGJlIHRlc3RlZCBhZ2FpbnN0IG5hdmlnYXRvci51c2VyQWdlbnQgdG8gZGV0ZXJtaW5lIGlmIHRoZSBzb3VyY2UgaXMgYSBib3RcbiAgICAvLyB0aGlzIGlzICoqYWRkZWQgdG8qKiB0aGUgZGVmYXVsdCBsaXN0IG9mIGJvdHMgdGhhdCB3ZSBjaGVja1xuICAgIC8vIGRlZmF1bHRzIHRvIHRoZSBlbXB0eSBhcnJheVxuICAgIGN1c3RvbV9ibG9ja2VkX3VzZXJhZ2VudHM6IHN0cmluZ1tdXG4gICAgc2F2ZV9yZWZlcnJlcjogYm9vbGVhblxuICAgIHZlcmJvc2U6IGJvb2xlYW5cbiAgICBjYXB0dXJlX3BhZ2V2aWV3OiBib29sZWFuXG4gICAgY2FwdHVyZV9wYWdlbGVhdmU6IGJvb2xlYW5cbiAgICBkZWJ1ZzogYm9vbGVhblxuICAgIGNvb2tpZV9leHBpcmF0aW9uOiBudW1iZXJcbiAgICB1cGdyYWRlOiBib29sZWFuXG4gICAgZGlzYWJsZV9zZXNzaW9uX3JlY29yZGluZzogYm9vbGVhblxuICAgIGRpc2FibGVfcGVyc2lzdGVuY2U6IGJvb2xlYW5cbiAgICAvKiogQGRlcHJlY2F0ZWQgLSB1c2UgYGRpc2FibGVfcGVyc2lzdGVuY2VgIGluc3RlYWQgICovXG4gICAgZGlzYWJsZV9jb29raWU6IGJvb2xlYW5cbiAgICBlbmFibGVfcmVjb3JkaW5nX2NvbnNvbGVfbG9nPzogYm9vbGVhblxuICAgIHNlY3VyZV9jb29raWU6IGJvb2xlYW5cbiAgICBpcDogYm9vbGVhblxuICAgIG9wdF9vdXRfY2FwdHVyaW5nX2J5X2RlZmF1bHQ6IGJvb2xlYW5cbiAgICBvcHRfb3V0X3BlcnNpc3RlbmNlX2J5X2RlZmF1bHQ6IGJvb2xlYW5cbiAgICAvKiogT3B0IG91dCBvZiB1c2VyIGFnZW50IGZpbHRlcmluZyBzdWNoIGFzIGdvb2dsZWJvdCBvciBvdGhlciBib3RzLiBEZWZhdWx0cyB0byBgZmFsc2VgICovXG4gICAgb3B0X291dF91c2VyYWdlbnRfZmlsdGVyOiBib29sZWFuXG4gICAgb3B0X291dF9jYXB0dXJpbmdfcGVyc2lzdGVuY2VfdHlwZTogJ2xvY2FsU3RvcmFnZScgfCAnY29va2llJ1xuICAgIG9wdF9vdXRfY2FwdHVyaW5nX2Nvb2tpZV9wcmVmaXg6IHN0cmluZyB8IG51bGxcbiAgICBvcHRfaW5fc2l0ZV9hcHBzOiBib29sZWFuXG4gICAgcmVzcGVjdF9kbnQ6IGJvb2xlYW5cbiAgICAvKiogQGRlcHJlY2F0ZWQgLSB1c2UgYHByb3BlcnR5X2RlbnlsaXN0YCBpbnN0ZWFkICAqL1xuICAgIHByb3BlcnR5X2JsYWNrbGlzdDogc3RyaW5nW11cbiAgICBwcm9wZXJ0eV9kZW55bGlzdDogc3RyaW5nW11cbiAgICByZXF1ZXN0X2hlYWRlcnM6IHsgW2hlYWRlcl9uYW1lOiBzdHJpbmddOiBzdHJpbmcgfVxuICAgIG9uX3JlcXVlc3RfZXJyb3I/OiAoZXJyb3I6IFJlcXVlc3RSZXNwb25zZSkgPT4gdm9pZFxuICAgIC8qKiBAZGVwcmVjYXRlZCAtIHVzZSBgcmVxdWVzdF9oZWFkZXJzYCBpbnN0ZWFkICAqL1xuICAgIHhocl9oZWFkZXJzPzogeyBbaGVhZGVyX25hbWU6IHN0cmluZ106IHN0cmluZyB9XG4gICAgLyoqIEBkZXByZWNhdGVkIC0gdXNlIGBvbl9yZXF1ZXN0X2Vycm9yYCBpbnN0ZWFkICAqL1xuICAgIG9uX3hocl9lcnJvcj86IChmYWlsZWRSZXF1ZXN0OiBYTUxIdHRwUmVxdWVzdCkgPT4gdm9pZFxuICAgIGluYXBwX3Byb3RvY29sOiBzdHJpbmdcbiAgICBpbmFwcF9saW5rX25ld193aW5kb3c6IGJvb2xlYW5cbiAgICByZXF1ZXN0X2JhdGNoaW5nOiBib29sZWFuXG4gICAgc2FuaXRpemVfcHJvcGVydGllczogKChwcm9wZXJ0aWVzOiBQcm9wZXJ0aWVzLCBldmVudF9uYW1lOiBzdHJpbmcpID0+IFByb3BlcnRpZXMpIHwgbnVsbFxuICAgIHByb3BlcnRpZXNfc3RyaW5nX21heF9sZW5ndGg6IG51bWJlclxuICAgIHNlc3Npb25fcmVjb3JkaW5nOiBTZXNzaW9uUmVjb3JkaW5nT3B0aW9uc1xuICAgIHNlc3Npb25faWRsZV90aW1lb3V0X3NlY29uZHM6IG51bWJlclxuICAgIG1hc2tfYWxsX2VsZW1lbnRfYXR0cmlidXRlczogYm9vbGVhblxuICAgIG1hc2tfYWxsX3RleHQ6IGJvb2xlYW5cbiAgICBhZHZhbmNlZF9kaXNhYmxlX2RlY2lkZTogYm9vbGVhblxuICAgIGFkdmFuY2VkX2Rpc2FibGVfZmVhdHVyZV9mbGFnczogYm9vbGVhblxuICAgIGFkdmFuY2VkX2Rpc2FibGVfZmVhdHVyZV9mbGFnc19vbl9maXJzdF9sb2FkOiBib29sZWFuXG4gICAgYWR2YW5jZWRfZGlzYWJsZV90b29sYmFyX21ldHJpY3M6IGJvb2xlYW5cbiAgICBmZWF0dXJlX2ZsYWdfcmVxdWVzdF90aW1lb3V0X21zOiBudW1iZXJcbiAgICBnZXRfZGV2aWNlX2lkOiAodXVpZDogc3RyaW5nKSA9PiBzdHJpbmdcbiAgICBuYW1lOiBzdHJpbmdcbiAgICBfb25DYXB0dXJlOiAoZXZlbnROYW1lOiBzdHJpbmcsIGV2ZW50RGF0YTogQ2FwdHVyZVJlc3VsdCkgPT4gdm9pZFxuICAgIGNhcHR1cmVfcGVyZm9ybWFuY2U/OiBib29sZWFuXG4gICAgLy8gU2hvdWxkIG9ubHkgYmUgdXNlZCBmb3IgdGVzdGluZy4gQ291bGQgbmVnYXRpdmVseSBpbXBhY3QgcGVyZm9ybWFuY2UuXG4gICAgZGlzYWJsZV9jb21wcmVzc2lvbjogYm9vbGVhblxuICAgIGJvb3RzdHJhcDoge1xuICAgICAgICBkaXN0aW5jdElEPzogc3RyaW5nXG4gICAgICAgIGlzSWRlbnRpZmllZElEPzogYm9vbGVhblxuICAgICAgICBmZWF0dXJlRmxhZ3M/OiBSZWNvcmQ8c3RyaW5nLCBib29sZWFuIHwgc3RyaW5nPlxuICAgICAgICBmZWF0dXJlRmxhZ1BheWxvYWRzPzogUmVjb3JkPHN0cmluZywgSnNvblR5cGU+XG4gICAgfVxuICAgIHNlZ21lbnQ/OiBhbnlcbiAgICBfX3ByZXZpZXdfc2VuZF9jbGllbnRfc2Vzc2lvbl9wYXJhbXM/OiBib29sZWFuXG4gICAgZGlzYWJsZV9zY3JvbGxfcHJvcGVydGllcz86IGJvb2xlYW5cbiAgICAvLyBMZXQgdGhlIHBhZ2V2aWV3IHNjcm9sbCBzdGF0cyB1c2UgYSBjdXN0b20gY3NzIHNlbGVjdG9yIGZvciB0aGUgcm9vdCBlbGVtZW50LCBlLmcuIGBtYWluYFxuICAgIHNjcm9sbF9yb290X3NlbGVjdG9yPzogc3RyaW5nIHwgc3RyaW5nW11cbn1cblxuZXhwb3J0IGludGVyZmFjZSBPcHRJbk91dENhcHR1cmluZ09wdGlvbnMge1xuICAgIGNhcHR1cmU6IChldmVudDogc3RyaW5nLCBwcm9wZXJ0aWVzOiBQcm9wZXJ0aWVzLCBvcHRpb25zOiBDYXB0dXJlT3B0aW9ucykgPT4gdm9pZFxuICAgIGNhcHR1cmVfZXZlbnRfbmFtZTogc3RyaW5nXG4gICAgY2FwdHVyZV9wcm9wZXJ0aWVzOiBQcm9wZXJ0aWVzXG4gICAgZW5hYmxlX3BlcnNpc3RlbmNlOiBib29sZWFuXG4gICAgY2xlYXJfcGVyc2lzdGVuY2U6IGJvb2xlYW5cbiAgICBwZXJzaXN0ZW5jZV90eXBlOiAnY29va2llJyB8ICdsb2NhbFN0b3JhZ2UnIHwgJ2xvY2FsU3RvcmFnZStjb29raWUnXG4gICAgY29va2llX3ByZWZpeDogc3RyaW5nXG4gICAgY29va2llX2V4cGlyYXRpb246IG51bWJlclxuICAgIGNyb3NzX3N1YmRvbWFpbl9jb29raWU6IGJvb2xlYW5cbiAgICBzZWN1cmVfY29va2llOiBib29sZWFuXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSXNGZWF0dXJlRW5hYmxlZE9wdGlvbnMge1xuICAgIHNlbmRfZXZlbnQ6IGJvb2xlYW5cbn1cblxuZXhwb3J0IGludGVyZmFjZSBTZXNzaW9uUmVjb3JkaW5nT3B0aW9ucyB7XG4gICAgYmxvY2tDbGFzcz86IHN0cmluZyB8IFJlZ0V4cFxuICAgIGJsb2NrU2VsZWN0b3I/OiBzdHJpbmcgfCBudWxsXG4gICAgaWdub3JlQ2xhc3M/OiBzdHJpbmdcbiAgICBtYXNrVGV4dENsYXNzPzogc3RyaW5nIHwgUmVnRXhwXG4gICAgbWFza1RleHRTZWxlY3Rvcj86IHN0cmluZyB8IG51bGxcbiAgICBtYXNrVGV4dEZuPzogKCh0ZXh0OiBzdHJpbmcpID0+IHN0cmluZykgfCBudWxsXG4gICAgbWFza0FsbElucHV0cz86IGJvb2xlYW5cbiAgICBtYXNrSW5wdXRPcHRpb25zPzogTWFza0lucHV0T3B0aW9uc1xuICAgIG1hc2tJbnB1dEZuPzogKCh0ZXh0OiBzdHJpbmcsIGVsZW1lbnQ/OiBIVE1MRWxlbWVudCkgPT4gc3RyaW5nKSB8IG51bGxcbiAgICBzbGltRE9NT3B0aW9ucz86IFNsaW1ET01PcHRpb25zIHwgJ2FsbCcgfCB0cnVlXG4gICAgY29sbGVjdEZvbnRzPzogYm9vbGVhblxuICAgIGlubGluZVN0eWxlc2hlZXQ/OiBib29sZWFuXG4gICAgcmVjb3JkZXJWZXJzaW9uPzogJ3YxJyB8ICd2MidcbiAgICByZWNvcmRDcm9zc09yaWdpbklmcmFtZXM/OiBib29sZWFuXG4gICAgLyoqIEBkZXByZWNhdGVkIC0gdXNlIG1hc2tDYXB0dXJlZE5ldHdvcmtSZXF1ZXN0Rm4gaW5zdGVhZCAgKi9cbiAgICBtYXNrTmV0d29ya1JlcXVlc3RGbj86ICgoZGF0YTogTmV0d29ya1JlcXVlc3QpID0+IE5ldHdvcmtSZXF1ZXN0IHwgbnVsbCB8IHVuZGVmaW5lZCkgfCBudWxsXG4gICAgLyoqIE1vZGlmeSB0aGUgbmV0d29yayByZXF1ZXN0IGJlZm9yZSBpdCBpcyBjYXB0dXJlZC4gUmV0dXJuaW5nIG51bGwgb3IgdW5kZWZpbmVkIHN0b3BzIGl0IGJlaW5nIGNhcHR1cmVkICovXG4gICAgbWFza0NhcHR1cmVkTmV0d29ya1JlcXVlc3RGbj86ICgoZGF0YTogQ2FwdHVyZWROZXR3b3JrUmVxdWVzdCkgPT4gQ2FwdHVyZWROZXR3b3JrUmVxdWVzdCB8IG51bGwgfCB1bmRlZmluZWQpIHwgbnVsbFxuICAgIC8vIG91ciBzZXR0aW5ncyBoZXJlIG9ubHkgc3VwcG9ydCBhIHN1YnNldCBvZiB0aG9zZSBwcm9wb3NlZCBmb3IgcnJ3ZWIncyBuZXR3b3JrIGNhcHR1cmUgcGx1Z2luXG4gICAgcmVjb3JkSGVhZGVycz86IGJvb2xlYW5cbiAgICByZWNvcmRCb2R5PzogYm9vbGVhblxufVxuXG5leHBvcnQgdHlwZSBTZXNzaW9uSWRDaGFuZ2VkQ2FsbGJhY2sgPSAoc2Vzc2lvbklkOiBzdHJpbmcsIHdpbmRvd0lkOiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkKSA9PiB2b2lkXG5cbmV4cG9ydCBlbnVtIENvbXByZXNzaW9uIHtcbiAgICBHWmlwSlMgPSAnZ3ppcC1qcycsXG4gICAgQmFzZTY0ID0gJ2Jhc2U2NCcsXG59XG5cbi8vIFJlcXVlc3QgdHlwZXMgLSB0aGVzZSBzaG91bGQgYmUga2VwdCBtaW5pbWFsIHRvIHdoYXQgcmVxdWVzdC50cyBuZWVkc1xuXG4vLyBNaW5pbWFsIGNsYXNzIHRvIGFsbG93IGludGVyb3AgYmV0d2VlbiBkaWZmZXJlbnQgcmVxdWVzdCBtZXRob2RzICh4aHIgLyBmZXRjaClcbmV4cG9ydCBpbnRlcmZhY2UgUmVxdWVzdFJlc3BvbnNlIHtcbiAgICBzdGF0dXNDb2RlOiBudW1iZXJcbiAgICB0ZXh0Pzogc3RyaW5nXG4gICAganNvbj86IGFueVxufVxuXG5leHBvcnQgdHlwZSBSZXF1ZXN0Q2FsbGJhY2sgPSAocmVzcG9uc2U6IFJlcXVlc3RSZXNwb25zZSkgPT4gdm9pZFxuXG5leHBvcnQgaW50ZXJmYWNlIFJlcXVlc3RPcHRpb25zIHtcbiAgICB1cmw6IHN0cmluZ1xuICAgIC8vIERhdGEgY2FuIGJlIGEgc2luZ2xlIG9iamVjdCBvciBhbiBhcnJheSBvZiBvYmplY3RzIHdoZW4gYmF0Y2hlZFxuICAgIGRhdGE/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+IHwgUmVjb3JkPHN0cmluZywgYW55PltdXG4gICAgaGVhZGVycz86IFJlY29yZDxzdHJpbmcsIGFueT5cbiAgICB0cmFuc3BvcnQ/OiAnWEhSJyB8ICdmZXRjaCcgfCAnc2VuZEJlYWNvbidcbiAgICBtZXRob2Q/OiAnUE9TVCcgfCAnR0VUJ1xuICAgIHVybFF1ZXJ5QXJncz86IHsgY29tcHJlc3Npb246IENvbXByZXNzaW9uIH1cbiAgICBjYWxsYmFjaz86IFJlcXVlc3RDYWxsYmFja1xuICAgIHRpbWVvdXQ/OiBudW1iZXJcbiAgICBub1JldHJpZXM/OiBib29sZWFuXG4gICAgY29tcHJlc3Npb24/OiBDb21wcmVzc2lvblxufVxuXG4vLyBRdWV1ZWQgcmVxdWVzdCB0eXBlcyAtIHRoZSBzYW1lIGFzIGEgcmVxdWVzdCBidXQgd2l0aCBhZGRpdGlvbmFsIHF1ZXVlaW5nIGluZm9ybWF0aW9uXG5cbmV4cG9ydCBpbnRlcmZhY2UgUXVldWVkUmVxdWVzdE9wdGlvbnMgZXh0ZW5kcyBSZXF1ZXN0T3B0aW9ucyB7XG4gICAgYmF0Y2hLZXk/OiBzdHJpbmcgLyoqIGtleSBvZiBxdWV1ZSwgZS5nLiAnc2Vzc2lvblJlY29yZGluZycgdnMgJ2V2ZW50JyAqL1xufVxuXG4vLyBVc2VkIGV4cGxpY2l0bHkgZm9yIHJldHJpYWJsZSByZXF1ZXN0c1xuZXhwb3J0IGludGVyZmFjZSBSZXRyaWFibGVSZXF1ZXN0T3B0aW9ucyBleHRlbmRzIFF1ZXVlZFJlcXVlc3RPcHRpb25zIHtcbiAgICByZXRyaWVzUGVyZm9ybWVkU29GYXI/OiBudW1iZXJcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDYXB0dXJlT3B0aW9ucyB7XG4gICAgJHNldD86IFByb3BlcnRpZXMgLyoqIHVzZWQgd2l0aCAkaWRlbnRpZnkgKi9cbiAgICAkc2V0X29uY2U/OiBQcm9wZXJ0aWVzIC8qKiB1c2VkIHdpdGggJGlkZW50aWZ5ICovXG4gICAgX3VybD86IHN0cmluZyAvKiogVXNlZCB0byBvdmVycmlkZSB0aGUgZGVzaXJlZCBlbmRwb2ludCBmb3IgdGhlIGNhcHR1cmVkIGV2ZW50ICovXG4gICAgX2JhdGNoS2V5Pzogc3RyaW5nIC8qKiBrZXkgb2YgcXVldWUsIGUuZy4gJ3Nlc3Npb25SZWNvcmRpbmcnIHZzICdldmVudCcgKi9cbiAgICBfbm9UcnVuY2F0ZT86IGJvb2xlYW4gLyoqIGlmIHNldCwgb3ZlcnJpZGVzIGFuZCBkaXNhYmxlcyBjb25maWcucHJvcGVydGllc19zdHJpbmdfbWF4X2xlbmd0aCAqL1xuICAgIHNlbmRfaW5zdGFudGx5PzogYm9vbGVhbiAvKiogaWYgc2V0IHNraXBzIHRoZSBiYXRjaGVkIHF1ZXVlICovXG4gICAgdHJhbnNwb3J0PzogUmVxdWVzdE9wdGlvbnNbJ3RyYW5zcG9ydCddIC8qKiBpZiBzZXQsIG92ZXJyaWRlcyB0aGUgZGVzaXJlZCB0cmFuc3BvcnQgbWV0aG9kICovXG4gICAgdGltZXN0YW1wPzogRGF0ZVxufVxuXG5leHBvcnQgdHlwZSBGbGFnVmFyaWFudCA9IHsgZmxhZzogc3RyaW5nOyB2YXJpYW50OiBzdHJpbmcgfVxuXG5leHBvcnQgaW50ZXJmYWNlIERlY2lkZVJlc3BvbnNlIHtcbiAgICBzdXBwb3J0ZWRDb21wcmVzc2lvbjogQ29tcHJlc3Npb25bXVxuICAgIGNvbmZpZzoge1xuICAgICAgICBlbmFibGVfY29sbGVjdF9ldmVyeXRoaW5nOiBib29sZWFuXG4gICAgfVxuICAgIGN1c3RvbV9wcm9wZXJ0aWVzOiBBdXRvQ2FwdHVyZUN1c3RvbVByb3BlcnR5W10gLy8gVE9ETzogZGVsZXRlLCBub3Qgc2VudFxuICAgIGZlYXR1cmVGbGFnczogUmVjb3JkPHN0cmluZywgc3RyaW5nIHwgYm9vbGVhbj5cbiAgICBmZWF0dXJlRmxhZ1BheWxvYWRzOiBSZWNvcmQ8c3RyaW5nLCBKc29uVHlwZT5cbiAgICBlcnJvcnNXaGlsZUNvbXB1dGluZ0ZsYWdzOiBib29sZWFuXG4gICAgYXV0b2NhcHR1cmVfb3B0X291dD86IGJvb2xlYW5cbiAgICBjYXB0dXJlUGVyZm9ybWFuY2U/OiBib29sZWFuXG4gICAgYW5hbHl0aWNzPzoge1xuICAgICAgICBlbmRwb2ludD86IHN0cmluZ1xuICAgIH1cbiAgICBlbGVtZW50c0NoYWluQXNTdHJpbmc/OiBib29sZWFuXG4gICAgLy8gdGhpcyBpcyBjdXJyZW50bHkgaW4gZGV2ZWxvcG1lbnQgYW5kIG1heSBoYXZlIGJyZWFraW5nIGNoYW5nZXMgd2l0aG91dCBhIG1ham9yIHZlcnNpb24gYnVtcFxuICAgIGF1dG9jYXB0dXJlRXhjZXB0aW9ucz86XG4gICAgICAgIHwgYm9vbGVhblxuICAgICAgICB8IHtcbiAgICAgICAgICAgICAgZW5kcG9pbnQ/OiBzdHJpbmdcbiAgICAgICAgICAgICAgZXJyb3JzX3RvX2lnbm9yZTogc3RyaW5nW11cbiAgICAgICAgICB9XG4gICAgc2Vzc2lvblJlY29yZGluZz86IHtcbiAgICAgICAgZW5kcG9pbnQ/OiBzdHJpbmdcbiAgICAgICAgY29uc29sZUxvZ1JlY29yZGluZ0VuYWJsZWQ/OiBib29sZWFuXG4gICAgICAgIHJlY29yZGVyVmVyc2lvbj86ICd2MScgfCAndjInXG4gICAgICAgIC8vIHRoZSBBUEkgcmV0dXJucyBhIGRlY2ltYWwgYmV0d2VlbiAwIGFuZCAxIGFzIGEgc3RyaW5nXG4gICAgICAgIHNhbXBsZVJhdGU/OiBzdHJpbmcgfCBudWxsXG4gICAgICAgIG1pbmltdW1EdXJhdGlvbk1pbGxpc2Vjb25kcz86IG51bWJlclxuICAgICAgICByZWNvcmRDYW52YXM/OiBib29sZWFuIHwgbnVsbFxuICAgICAgICBjYW52YXNGcHM/OiBudW1iZXIgfCBudWxsXG4gICAgICAgIC8vIHRoZSBBUEkgcmV0dXJucyBhIGRlY2ltYWwgYmV0d2VlbiAwIGFuZCAxIGFzIGEgc3RyaW5nXG4gICAgICAgIGNhbnZhc1F1YWxpdHk/OiBzdHJpbmcgfCBudWxsXG4gICAgICAgIGxpbmtlZEZsYWc/OiBzdHJpbmcgfCBGbGFnVmFyaWFudCB8IG51bGxcbiAgICAgICAgbmV0d29ya1BheWxvYWRDYXB0dXJlPzogUGljazxOZXR3b3JrUmVjb3JkT3B0aW9ucywgJ3JlY29yZEJvZHknIHwgJ3JlY29yZEhlYWRlcnMnPlxuICAgIH1cbiAgICBzdXJ2ZXlzPzogYm9vbGVhblxuICAgIHRvb2xiYXJQYXJhbXM6IFRvb2xiYXJQYXJhbXNcbiAgICBlZGl0b3JQYXJhbXM/OiBUb29sYmFyUGFyYW1zIC8qKiBAZGVwcmVjYXRlZCwgcmVuYW1lZCB0byB0b29sYmFyUGFyYW1zLCBzdGlsbCBwcmVzZW50IG9uIG9sZGVyIEFQSSByZXNwb25zZXMgKi9cbiAgICB0b29sYmFyVmVyc2lvbjogJ3Rvb2xiYXInIC8qKiBAZGVwcmVjYXRlZCwgbW92ZWQgdG8gdG9vbGJhclBhcmFtcyAqL1xuICAgIGlzQXV0aGVudGljYXRlZDogYm9vbGVhblxuICAgIHNpdGVBcHBzOiB7IGlkOiBudW1iZXI7IHVybDogc3RyaW5nIH1bXVxufVxuXG5leHBvcnQgdHlwZSBGZWF0dXJlRmxhZ3NDYWxsYmFjayA9IChcbiAgICBmbGFnczogc3RyaW5nW10sXG4gICAgdmFyaWFudHM6IFJlY29yZDxzdHJpbmcsIHN0cmluZyB8IGJvb2xlYW4+LFxuICAgIGNvbnRleHQ/OiB7XG4gICAgICAgIGVycm9yc0xvYWRpbmc/OiBib29sZWFuXG4gICAgfVxuKSA9PiB2b2lkXG5cbi8vIFRPRE86IGRlbGV0ZSBjdXN0b21fcHJvcGVydGllcyBhZnRlciBjaGFuZ2VsZXNzIHR5cGVzY3JpcHQgcmVmYWN0b3JcbmV4cG9ydCBpbnRlcmZhY2UgQXV0b0NhcHR1cmVDdXN0b21Qcm9wZXJ0eSB7XG4gICAgbmFtZTogc3RyaW5nXG4gICAgY3NzX3NlbGVjdG9yOiBzdHJpbmdcbiAgICBldmVudF9zZWxlY3RvcnM6IHN0cmluZ1tdXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgR0RQUk9wdGlvbnMge1xuICAgIGNhcHR1cmU/OiAoXG4gICAgICAgIGV2ZW50OiBzdHJpbmcsXG4gICAgICAgIHByb3BlcnRpZXM6IFByb3BlcnRpZXMsXG4gICAgICAgIG9wdGlvbnM6IENhcHR1cmVPcHRpb25zXG4gICAgKSA9PiB2b2lkIC8qKiBmdW5jdGlvbiB1c2VkIGZvciBjYXB0dXJpbmcgYSBQb3N0SG9nIGV2ZW50IHRvIHJlY29yZCB0aGUgb3B0LWluIGFjdGlvbiAqL1xuICAgIGNhcHR1cmVFdmVudE5hbWU/OiBzdHJpbmcgLyoqIGV2ZW50IG5hbWUgdG8gYmUgdXNlZCBmb3IgY2FwdHVyaW5nIHRoZSBvcHQtaW4gYWN0aW9uICovXG4gICAgY2FwdHVyZVByb3BlcnRpZXM/OiBQcm9wZXJ0aWVzIC8qKiBzZXQgb2YgcHJvcGVydGllcyB0byBiZSBjYXB0dXJlZCBhbG9uZyB3aXRoIHRoZSBvcHQtaW4gYWN0aW9uICovXG4gICAgLyoqIHBlcnNpc3RlbmNlIG1lY2hhbmlzbSB1c2VkICovXG4gICAgcGVyc2lzdGVuY2VUeXBlPzogJ2Nvb2tpZScgfCAnbG9jYWxTdG9yYWdlJyB8ICdsb2NhbFN0b3JhZ2UrY29va2llJ1xuICAgIHBlcnNpc3RlbmNlUHJlZml4Pzogc3RyaW5nIC8qKiBbX19waF9vcHRfaW5fb3V0XSAtIGN1c3RvbSBwcmVmaXggdG8gYmUgdXNlZCBpbiB0aGUgY29va2llL2xvY2Fsc3RvcmFnZSBuYW1lICovXG4gICAgY29va2llRXhwaXJhdGlvbj86IG51bWJlciAvKiogbnVtYmVyIG9mIGRheXMgdW50aWwgdGhlIG9wdC1pbiBjb29raWUgZXhwaXJlcyAqL1xuICAgIGNyb3NzU3ViZG9tYWluQ29va2llPzogYm9vbGVhbiAvKiogd2hldGhlciB0aGUgb3B0LWluIGNvb2tpZSBpcyBzZXQgYXMgY3Jvc3Mtc3ViZG9tYWluIG9yIG5vdCAqL1xuICAgIHNlY3VyZUNvb2tpZT86IGJvb2xlYW4gLyoqIHdoZXRoZXIgdGhlIG9wdC1pbiBjb29raWUgaXMgc2V0IGFzIHNlY3VyZSBvciBub3QgKi9cbiAgICByZXNwZWN0RG50PzogYm9vbGVhblxuICAgIHdpbmRvdz86IFdpbmRvd1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBlcnNpc3RlbnRTdG9yZSB7XG4gICAgaXNfc3VwcG9ydGVkOiAoKSA9PiBib29sZWFuXG4gICAgZXJyb3I6IChlcnJvcjogYW55KSA9PiB2b2lkXG4gICAgcGFyc2U6IChuYW1lOiBzdHJpbmcpID0+IGFueVxuICAgIGdldDogKG5hbWU6IHN0cmluZykgPT4gYW55XG4gICAgc2V0OiAobmFtZTogc3RyaW5nLCB2YWx1ZTogYW55LCBleHBpcmVfZGF5cz86IG51bWJlciB8IG51bGwsIGNyb3NzX3N1YmRvbWFpbj86IGJvb2xlYW4sIHNlY3VyZT86IGJvb2xlYW4pID0+IHZvaWRcbiAgICByZW1vdmU6IChuYW1lOiBzdHJpbmcsIGNyb3NzX3N1YmRvbWFpbj86IGJvb2xlYW4pID0+IHZvaWRcbn1cblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9iYW4tdHlwZXNcbmV4cG9ydCB0eXBlIEJyZWFrZXIgPSB7fVxuZXhwb3J0IHR5cGUgRXZlbnRIYW5kbGVyID0gKGV2ZW50OiBFdmVudCkgPT4gYm9vbGVhbiB8IHZvaWRcblxuZXhwb3J0IHR5cGUgVG9vbGJhclVzZXJJbnRlbnQgPSAnYWRkLWFjdGlvbicgfCAnZWRpdC1hY3Rpb24nXG5leHBvcnQgdHlwZSBUb29sYmFyU291cmNlID0gJ3VybCcgfCAnbG9jYWxzdG9yYWdlJ1xuZXhwb3J0IHR5cGUgVG9vbGJhclZlcnNpb24gPSAndG9vbGJhcidcblxuLyogc3luYyB3aXRoIHBvc3Rob2cgKi9cbmV4cG9ydCBpbnRlcmZhY2UgVG9vbGJhclBhcmFtcyB7XG4gICAgdG9rZW4/OiBzdHJpbmcgLyoqIHB1YmxpYyBwb3N0aG9nLWpzIHRva2VuICovXG4gICAgdGVtcG9yYXJ5VG9rZW4/OiBzdHJpbmcgLyoqIHByaXZhdGUgdGVtcG9yYXJ5IHVzZXIgdG9rZW4gKi9cbiAgICBhY3Rpb25JZD86IG51bWJlclxuICAgIHVzZXJJbnRlbnQ/OiBUb29sYmFyVXNlckludGVudFxuICAgIHNvdXJjZT86IFRvb2xiYXJTb3VyY2VcbiAgICB0b29sYmFyVmVyc2lvbj86IFRvb2xiYXJWZXJzaW9uXG4gICAgaW5zdHJ1bWVudD86IGJvb2xlYW5cbiAgICBkaXN0aW5jdElkPzogc3RyaW5nXG4gICAgdXNlckVtYWlsPzogc3RyaW5nXG4gICAgZGF0YUF0dHJpYnV0ZXM/OiBzdHJpbmdbXVxuICAgIGZlYXR1cmVGbGFncz86IFJlY29yZDxzdHJpbmcsIHN0cmluZyB8IGJvb2xlYW4+XG59XG5cbmV4cG9ydCB0eXBlIFNuaXBwZXRBcnJheUl0ZW0gPSBbbWV0aG9kOiBzdHJpbmcsIC4uLmFyZ3M6IGFueVtdXVxuXG5leHBvcnQgdHlwZSBKc29uVHlwZSA9IHN0cmluZyB8IG51bWJlciB8IGJvb2xlYW4gfCBudWxsIHwgeyBba2V5OiBzdHJpbmddOiBKc29uVHlwZSB9IHwgQXJyYXk8SnNvblR5cGU+XG5cbi8qKiBBIGZlYXR1cmUgdGhhdCBpc24ndCBwdWJsaWNseSBhdmFpbGFibGUgeWV0LiovXG5leHBvcnQgaW50ZXJmYWNlIEVhcmx5QWNjZXNzRmVhdHVyZSB7XG4gICAgLy8gU3luYyB0aGlzIHdpdGggdGhlIGJhY2tlbmQncyBFYXJseUFjY2Vzc0ZlYXR1cmVTZXJpYWxpemVyIVxuICAgIG5hbWU6IHN0cmluZ1xuICAgIGRlc2NyaXB0aW9uOiBzdHJpbmdcbiAgICBzdGFnZTogJ2NvbmNlcHQnIHwgJ2FscGhhJyB8ICdiZXRhJ1xuICAgIGRvY3VtZW50YXRpb25Vcmw6IHN0cmluZyB8IG51bGxcbiAgICBmbGFnS2V5OiBzdHJpbmcgfCBudWxsXG59XG5cbmV4cG9ydCB0eXBlIEVhcmx5QWNjZXNzRmVhdHVyZUNhbGxiYWNrID0gKGVhcmx5QWNjZXNzRmVhdHVyZXM6IEVhcmx5QWNjZXNzRmVhdHVyZVtdKSA9PiB2b2lkXG5cbmV4cG9ydCBpbnRlcmZhY2UgRWFybHlBY2Nlc3NGZWF0dXJlUmVzcG9uc2Uge1xuICAgIGVhcmx5QWNjZXNzRmVhdHVyZXM6IEVhcmx5QWNjZXNzRmVhdHVyZVtdXG59XG5cbmV4cG9ydCB0eXBlIEhlYWRlcnMgPSBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+XG5cbi8qIGZvciBycndlYi9uZXR3b3JrQDFcbiAqKiB3aGVuIHRoYXQgaXMgcmVsZWFzZWQgYXMgcGFydCBvZiBycndlYiB0aGlzIGNhbiBiZSByZW1vdmVkXG4gKiogZG9uJ3QgcmVseSBvbiB0aGlzIHR5cGUsIGl0IG1heSBjaGFuZ2Ugd2l0aG91dCBub3RpY2VcbiAqL1xuZXhwb3J0IHR5cGUgSW5pdGlhdG9yVHlwZSA9XG4gICAgfCAnYXVkaW8nXG4gICAgfCAnYmVhY29uJ1xuICAgIHwgJ2JvZHknXG4gICAgfCAnY3NzJ1xuICAgIHwgJ2Vhcmx5LWhpbnQnXG4gICAgfCAnZW1iZWQnXG4gICAgfCAnZmV0Y2gnXG4gICAgfCAnZnJhbWUnXG4gICAgfCAnaWZyYW1lJ1xuICAgIHwgJ2ljb24nXG4gICAgfCAnaW1hZ2UnXG4gICAgfCAnaW1nJ1xuICAgIHwgJ2lucHV0J1xuICAgIHwgJ2xpbmsnXG4gICAgfCAnbmF2aWdhdGlvbidcbiAgICB8ICdvYmplY3QnXG4gICAgfCAncGluZydcbiAgICB8ICdzY3JpcHQnXG4gICAgfCAndHJhY2snXG4gICAgfCAndmlkZW8nXG4gICAgfCAneG1saHR0cHJlcXVlc3QnXG5cbmV4cG9ydCB0eXBlIE5ldHdvcmtSZWNvcmRPcHRpb25zID0ge1xuICAgIGluaXRpYXRvclR5cGVzPzogSW5pdGlhdG9yVHlwZVtdXG4gICAgbWFza1JlcXVlc3RGbj86IChkYXRhOiBDYXB0dXJlZE5ldHdvcmtSZXF1ZXN0KSA9PiBDYXB0dXJlZE5ldHdvcmtSZXF1ZXN0IHwgdW5kZWZpbmVkXG4gICAgcmVjb3JkSGVhZGVycz86IGJvb2xlYW4gfCB7IHJlcXVlc3Q6IGJvb2xlYW47IHJlc3BvbnNlOiBib29sZWFuIH1cbiAgICByZWNvcmRCb2R5PzogYm9vbGVhbiB8IHN0cmluZ1tdIHwgeyByZXF1ZXN0OiBib29sZWFuIHwgc3RyaW5nW107IHJlc3BvbnNlOiBib29sZWFuIHwgc3RyaW5nW10gfVxuICAgIHJlY29yZEluaXRpYWxSZXF1ZXN0cz86IGJvb2xlYW5cbiAgICAvLyB3aGV0aGVyIHRvIHJlY29yZCBQZXJmb3JtYW5jZUVudHJ5IGV2ZW50cyBmb3IgbmV0d29yayByZXF1ZXN0c1xuICAgIHJlY29yZFBlcmZvcm1hbmNlPzogYm9vbGVhblxuICAgIC8vIHRoZSBQZXJmb3JtYW5jZU9ic2VydmVyIHdpbGwgb25seSBvYnNlcnZlIHRoZXNlIGVudHJ5IHR5cGVzXG4gICAgcGVyZm9ybWFuY2VFbnRyeVR5cGVUb09ic2VydmU6IHN0cmluZ1tdXG4gICAgLy8gdGhlIG1heGltdW0gc2l6ZSBvZiB0aGUgcmVxdWVzdC9yZXNwb25zZSBib2R5IHRvIHJlY29yZFxuICAgIC8vIE5CIHRoaXMgd2lsbCBiZSBhdCBtb3N0IDFNQiBldmVuIGlmIHNldCBsYXJnZXJcbiAgICBwYXlsb2FkU2l6ZUxpbWl0Qnl0ZXM6IG51bWJlclxufVxuXG4vKiogQGRlcHJlY2F0ZWQgLSB1c2UgQ2FwdHVyZWROZXR3b3JrUmVxdWVzdCBpbnN0ZWFkICAqL1xuZXhwb3J0IHR5cGUgTmV0d29ya1JlcXVlc3QgPSB7XG4gICAgdXJsOiBzdHJpbmdcbn1cblxuLy8gSW4gcnJ3ZWIgdGhpcyBpcyBjYWxsZWQgTmV0d29ya1JlcXVlc3QsIGJ1dCB3ZSBhbHJlYWR5IGV4cG9zZWQgdGhhdCBhcyBoYXZpbmcgb25seSBVUkxcbi8vIHdlIGFsc28gd2FudCB0byB2YXJ5IGZyb20gdGhlIHJyd2ViIE5ldHdvcmtSZXF1ZXN0IGJlY2F1c2Ugd2Ugd2FudCB0byBpbmNsdWRlXG4vLyBhbGwgUGVyZm9ybWFuY2VFbnRyeSBwcm9wZXJ0aWVzIHRvby5cbi8vIHRoYXQgaGFzIDQgcmVxdWlyZWQgcHJvcGVydGllc1xuLy8gICAgIHJlYWRvbmx5IGR1cmF0aW9uOiBET01IaWdoUmVzVGltZVN0YW1wO1xuLy8gICAgIHJlYWRvbmx5IGVudHJ5VHlwZTogc3RyaW5nO1xuLy8gICAgIHJlYWRvbmx5IG5hbWU6IHN0cmluZztcbi8vICAgICByZWFkb25seSBzdGFydFRpbWU6IERPTUhpZ2hSZXNUaW1lU3RhbXA7XG4vLyBOQjogcHJvcGVydGllcyBiZWxvdyBoZXJlIGFyZSBBTFBIQSwgZG9uJ3QgcmVseSBvbiB0aGVtLCB0aGV5IG1heSBjaGFuZ2Ugd2l0aG91dCBub3RpY2VcbmV4cG9ydCB0eXBlIENhcHR1cmVkTmV0d29ya1JlcXVlc3QgPSBPbWl0PFBlcmZvcm1hbmNlRW50cnksICd0b0pTT04nPiAmIHtcbiAgICAvLyBwcm9wZXJ0aWVzIGJlbG93IGhlcmUgYXJlIEFMUEhBLCBkb24ndCByZWx5IG9uIHRoZW0sIHRoZXkgbWF5IGNoYW5nZSB3aXRob3V0IG5vdGljZVxuICAgIG1ldGhvZD86IHN0cmluZ1xuICAgIGluaXRpYXRvclR5cGU/OiBJbml0aWF0b3JUeXBlXG4gICAgc3RhdHVzPzogbnVtYmVyXG4gICAgdGltZU9yaWdpbj86IG51bWJlclxuICAgIHRpbWVzdGFtcD86IG51bWJlclxuICAgIHN0YXJ0VGltZT86IG51bWJlclxuICAgIGVuZFRpbWU/OiBudW1iZXJcbiAgICByZXF1ZXN0SGVhZGVycz86IEhlYWRlcnNcbiAgICByZXF1ZXN0Qm9keT86IHN0cmluZyB8IG51bGxcbiAgICByZXNwb25zZUhlYWRlcnM/OiBIZWFkZXJzXG4gICAgcmVzcG9uc2VCb2R5Pzogc3RyaW5nIHwgbnVsbFxuICAgIC8vIHdhcyB0aGlzIGNhcHR1cmVkIGJlZm9yZSBmZXRjaC94aHIgY291bGQgaGF2ZSBiZWVuIHdyYXBwZWRcbiAgICBpc0luaXRpYWw/OiBib29sZWFuXG59XG4iLCAiaW1wb3J0IHsgX2VudHJpZXMsIF9leHRlbmQgfSBmcm9tICcuL3V0aWxzJ1xuaW1wb3J0IHsgUG9zdEhvZyB9IGZyb20gJy4vcG9zdGhvZy1jb3JlJ1xuaW1wb3J0IHtcbiAgICBEZWNpZGVSZXNwb25zZSxcbiAgICBGZWF0dXJlRmxhZ3NDYWxsYmFjayxcbiAgICBFYXJseUFjY2Vzc0ZlYXR1cmVDYWxsYmFjayxcbiAgICBFYXJseUFjY2Vzc0ZlYXR1cmVSZXNwb25zZSxcbiAgICBQcm9wZXJ0aWVzLFxuICAgIEpzb25UeXBlLFxuICAgIENvbXByZXNzaW9uLFxufSBmcm9tICcuL3R5cGVzJ1xuaW1wb3J0IHsgUG9zdEhvZ1BlcnNpc3RlbmNlIH0gZnJvbSAnLi9wb3N0aG9nLXBlcnNpc3RlbmNlJ1xuXG5pbXBvcnQge1xuICAgIFBFUlNJU1RFTkNFX0VBUkxZX0FDQ0VTU19GRUFUVVJFUyxcbiAgICBFTkFCTEVEX0ZFQVRVUkVfRkxBR1MsXG4gICAgU1RPUkVEX0dST1VQX1BST1BFUlRJRVNfS0VZLFxuICAgIFNUT1JFRF9QRVJTT05fUFJPUEVSVElFU19LRVksXG4gICAgRkxBR19DQUxMX1JFUE9SVEVELFxufSBmcm9tICcuL2NvbnN0YW50cydcblxuaW1wb3J0IHsgX2lzQXJyYXkgfSBmcm9tICcuL3V0aWxzL3R5cGUtdXRpbHMnXG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tICcuL3V0aWxzL2xvZ2dlcidcblxuY29uc3QgUEVSU0lTVEVOQ0VfQUNUSVZFX0ZFQVRVUkVfRkxBR1MgPSAnJGFjdGl2ZV9mZWF0dXJlX2ZsYWdzJ1xuY29uc3QgUEVSU0lTVEVOQ0VfT1ZFUlJJREVfRkVBVFVSRV9GTEFHUyA9ICckb3ZlcnJpZGVfZmVhdHVyZV9mbGFncydcbmNvbnN0IFBFUlNJU1RFTkNFX0ZFQVRVUkVfRkxBR19QQVlMT0FEUyA9ICckZmVhdHVyZV9mbGFnX3BheWxvYWRzJ1xuXG5leHBvcnQgY29uc3QgZmlsdGVyQWN0aXZlRmVhdHVyZUZsYWdzID0gKGZlYXR1cmVGbGFncz86IFJlY29yZDxzdHJpbmcsIHN0cmluZyB8IGJvb2xlYW4+KSA9PiB7XG4gICAgY29uc3QgYWN0aXZlRmVhdHVyZUZsYWdzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmcgfCBib29sZWFuPiA9IHt9XG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgX2VudHJpZXMoZmVhdHVyZUZsYWdzIHx8IHt9KSkge1xuICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgIGFjdGl2ZUZlYXR1cmVGbGFnc1trZXldID0gdmFsdWVcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYWN0aXZlRmVhdHVyZUZsYWdzXG59XG5cbmV4cG9ydCBjb25zdCBwYXJzZUZlYXR1cmVGbGFnRGVjaWRlUmVzcG9uc2UgPSAoXG4gICAgcmVzcG9uc2U6IFBhcnRpYWw8RGVjaWRlUmVzcG9uc2U+LFxuICAgIHBlcnNpc3RlbmNlOiBQb3N0SG9nUGVyc2lzdGVuY2UsXG4gICAgY3VycmVudEZsYWdzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmcgfCBib29sZWFuPiA9IHt9LFxuICAgIGN1cnJlbnRGbGFnUGF5bG9hZHM6IFJlY29yZDxzdHJpbmcsIEpzb25UeXBlPiA9IHt9XG4pID0+IHtcbiAgICBjb25zdCBmbGFncyA9IHJlc3BvbnNlWydmZWF0dXJlRmxhZ3MnXVxuICAgIGNvbnN0IGZsYWdQYXlsb2FkcyA9IHJlc3BvbnNlWydmZWF0dXJlRmxhZ1BheWxvYWRzJ11cbiAgICBpZiAoIWZsYWdzKSB7XG4gICAgICAgIHJldHVyblxuICAgIH1cbiAgICAvLyB1c2luZyB0aGUgdjEgYXBpXG4gICAgaWYgKF9pc0FycmF5KGZsYWdzKSkge1xuICAgICAgICBjb25zdCAkZW5hYmxlZF9mZWF0dXJlX2ZsYWdzOiBSZWNvcmQ8c3RyaW5nLCBib29sZWFuPiA9IHt9XG4gICAgICAgIGlmIChmbGFncykge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmbGFncy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICRlbmFibGVkX2ZlYXR1cmVfZmxhZ3NbZmxhZ3NbaV1dID0gdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHBlcnNpc3RlbmNlICYmXG4gICAgICAgICAgICBwZXJzaXN0ZW5jZS5yZWdpc3Rlcih7XG4gICAgICAgICAgICAgICAgW1BFUlNJU1RFTkNFX0FDVElWRV9GRUFUVVJFX0ZMQUdTXTogZmxhZ3MsXG4gICAgICAgICAgICAgICAgW0VOQUJMRURfRkVBVFVSRV9GTEFHU106ICRlbmFibGVkX2ZlYXR1cmVfZmxhZ3MsXG4gICAgICAgICAgICB9KVxuICAgICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAvLyB1c2luZyB0aGUgdjIrIGFwaVxuICAgIGxldCBuZXdGZWF0dXJlRmxhZ3MgPSBmbGFnc1xuICAgIGxldCBuZXdGZWF0dXJlRmxhZ1BheWxvYWRzID0gZmxhZ1BheWxvYWRzXG4gICAgaWYgKHJlc3BvbnNlLmVycm9yc1doaWxlQ29tcHV0aW5nRmxhZ3MpIHtcbiAgICAgICAgLy8gaWYgbm90IGFsbCBmbGFncyB3ZXJlIGNvbXB1dGVkLCB3ZSB1cHNlcnQgZmxhZ3MgaW5zdGVhZCBvZiByZXBsYWNpbmcgdGhlbVxuICAgICAgICBuZXdGZWF0dXJlRmxhZ3MgPSB7IC4uLmN1cnJlbnRGbGFncywgLi4ubmV3RmVhdHVyZUZsYWdzIH1cbiAgICAgICAgbmV3RmVhdHVyZUZsYWdQYXlsb2FkcyA9IHsgLi4uY3VycmVudEZsYWdQYXlsb2FkcywgLi4ubmV3RmVhdHVyZUZsYWdQYXlsb2FkcyB9XG4gICAgfVxuICAgIHBlcnNpc3RlbmNlICYmXG4gICAgICAgIHBlcnNpc3RlbmNlLnJlZ2lzdGVyKHtcbiAgICAgICAgICAgIFtQRVJTSVNURU5DRV9BQ1RJVkVfRkVBVFVSRV9GTEFHU106IE9iamVjdC5rZXlzKGZpbHRlckFjdGl2ZUZlYXR1cmVGbGFncyhuZXdGZWF0dXJlRmxhZ3MpKSxcbiAgICAgICAgICAgIFtFTkFCTEVEX0ZFQVRVUkVfRkxBR1NdOiBuZXdGZWF0dXJlRmxhZ3MgfHwge30sXG4gICAgICAgICAgICBbUEVSU0lTVEVOQ0VfRkVBVFVSRV9GTEFHX1BBWUxPQURTXTogbmV3RmVhdHVyZUZsYWdQYXlsb2FkcyB8fCB7fSxcbiAgICAgICAgfSlcbn1cblxuZXhwb3J0IGNsYXNzIFBvc3RIb2dGZWF0dXJlRmxhZ3Mge1xuICAgIGluc3RhbmNlOiBQb3N0SG9nXG4gICAgX292ZXJyaWRlX3dhcm5pbmc6IGJvb2xlYW5cbiAgICBmZWF0dXJlRmxhZ0V2ZW50SGFuZGxlcnM6IEZlYXR1cmVGbGFnc0NhbGxiYWNrW11cbiAgICByZWxvYWRGZWF0dXJlRmxhZ3NRdWV1ZWQ6IGJvb2xlYW5cbiAgICByZWxvYWRGZWF0dXJlRmxhZ3NJbkFjdGlvbjogYm9vbGVhblxuICAgICRhbm9uX2Rpc3RpbmN0X2lkOiBzdHJpbmcgfCB1bmRlZmluZWRcblxuICAgIGNvbnN0cnVjdG9yKGluc3RhbmNlOiBQb3N0SG9nKSB7XG4gICAgICAgIHRoaXMuaW5zdGFuY2UgPSBpbnN0YW5jZVxuICAgICAgICB0aGlzLl9vdmVycmlkZV93YXJuaW5nID0gZmFsc2VcbiAgICAgICAgdGhpcy5mZWF0dXJlRmxhZ0V2ZW50SGFuZGxlcnMgPSBbXVxuXG4gICAgICAgIHRoaXMucmVsb2FkRmVhdHVyZUZsYWdzUXVldWVkID0gZmFsc2VcbiAgICAgICAgdGhpcy5yZWxvYWRGZWF0dXJlRmxhZ3NJbkFjdGlvbiA9IGZhbHNlXG4gICAgfVxuXG4gICAgZ2V0RmxhZ3MoKTogc3RyaW5nW10ge1xuICAgICAgICByZXR1cm4gT2JqZWN0LmtleXModGhpcy5nZXRGbGFnVmFyaWFudHMoKSlcbiAgICB9XG5cbiAgICBnZXRGbGFnVmFyaWFudHMoKTogUmVjb3JkPHN0cmluZywgc3RyaW5nIHwgYm9vbGVhbj4ge1xuICAgICAgICBjb25zdCBlbmFibGVkRmxhZ3MgPSB0aGlzLmluc3RhbmNlLmdldF9wcm9wZXJ0eShFTkFCTEVEX0ZFQVRVUkVfRkxBR1MpXG4gICAgICAgIGNvbnN0IG92ZXJyaWRkZW5GbGFncyA9IHRoaXMuaW5zdGFuY2UuZ2V0X3Byb3BlcnR5KFBFUlNJU1RFTkNFX09WRVJSSURFX0ZFQVRVUkVfRkxBR1MpXG4gICAgICAgIGlmICghb3ZlcnJpZGRlbkZsYWdzKSB7XG4gICAgICAgICAgICByZXR1cm4gZW5hYmxlZEZsYWdzIHx8IHt9XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBmaW5hbEZsYWdzID0gX2V4dGVuZCh7fSwgZW5hYmxlZEZsYWdzKVxuICAgICAgICBjb25zdCBvdmVycmlkZGVuS2V5cyA9IE9iamVjdC5rZXlzKG92ZXJyaWRkZW5GbGFncylcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvdmVycmlkZGVuS2V5cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKG92ZXJyaWRkZW5GbGFnc1tvdmVycmlkZGVuS2V5c1tpXV0gPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIGZpbmFsRmxhZ3Nbb3ZlcnJpZGRlbktleXNbaV1dXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGZpbmFsRmxhZ3Nbb3ZlcnJpZGRlbktleXNbaV1dID0gb3ZlcnJpZGRlbkZsYWdzW292ZXJyaWRkZW5LZXlzW2ldXVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5fb3ZlcnJpZGVfd2FybmluZykge1xuICAgICAgICAgICAgbG9nZ2VyLndhcm4oJyBPdmVycmlkaW5nIGZlYXR1cmUgZmxhZ3MhJywge1xuICAgICAgICAgICAgICAgIGVuYWJsZWRGbGFncyxcbiAgICAgICAgICAgICAgICBvdmVycmlkZGVuRmxhZ3MsXG4gICAgICAgICAgICAgICAgZmluYWxGbGFncyxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB0aGlzLl9vdmVycmlkZV93YXJuaW5nID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmaW5hbEZsYWdzXG4gICAgfVxuXG4gICAgZ2V0RmxhZ1BheWxvYWRzKCk6IFJlY29yZDxzdHJpbmcsIEpzb25UeXBlPiB7XG4gICAgICAgIGNvbnN0IGZsYWdQYXlsb2FkcyA9IHRoaXMuaW5zdGFuY2UuZ2V0X3Byb3BlcnR5KFBFUlNJU1RFTkNFX0ZFQVRVUkVfRkxBR19QQVlMT0FEUylcbiAgICAgICAgcmV0dXJuIGZsYWdQYXlsb2FkcyB8fCB7fVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbG9hZHMgZmVhdHVyZSBmbGFncyBhc3luY2hyb25vdXNseS5cbiAgICAgKlxuICAgICAqIENvbnN0cmFpbnRzOlxuICAgICAqXG4gICAgICogMS4gQXZvaWQgcGFyYWxsZWwgcmVxdWVzdHNcbiAgICAgKiAyLiBEZWxheSBhIGZldyBtaWxsaXNlY29uZHMgYWZ0ZXIgZWFjaCByZWxvYWRGZWF0dXJlRmxhZ3MgY2FsbCB0byBiYXRjaCBzdWJzZXF1ZW50IGNoYW5nZXMgdG9nZXRoZXJcbiAgICAgKiAzLiBEb24ndCBjYWxsIHRoaXMgZHVyaW5nIGluaXRpYWwgbG9hZCAoYXMgL2RlY2lkZSB3aWxsIGJlIGNhbGxlZCBpbnN0ZWFkKSwgc2VlIHBvc3Rob2ctY29yZS5qc1xuICAgICAqL1xuICAgIHJlbG9hZEZlYXR1cmVGbGFncygpOiB2b2lkIHtcbiAgICAgICAgaWYgKCF0aGlzLnJlbG9hZEZlYXR1cmVGbGFnc1F1ZXVlZCkge1xuICAgICAgICAgICAgdGhpcy5yZWxvYWRGZWF0dXJlRmxhZ3NRdWV1ZWQgPSB0cnVlXG4gICAgICAgICAgICB0aGlzLl9zdGFydFJlbG9hZFRpbWVyKClcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNldEFub255bW91c0Rpc3RpbmN0SWQoYW5vbl9kaXN0aW5jdF9pZDogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIHRoaXMuJGFub25fZGlzdGluY3RfaWQgPSBhbm9uX2Rpc3RpbmN0X2lkXG4gICAgfVxuXG4gICAgc2V0UmVsb2FkaW5nUGF1c2VkKGlzUGF1c2VkOiBib29sZWFuKTogdm9pZCB7XG4gICAgICAgIHRoaXMucmVsb2FkRmVhdHVyZUZsYWdzSW5BY3Rpb24gPSBpc1BhdXNlZFxuICAgIH1cblxuICAgIHJlc2V0UmVxdWVzdFF1ZXVlKCk6IHZvaWQge1xuICAgICAgICB0aGlzLnJlbG9hZEZlYXR1cmVGbGFnc1F1ZXVlZCA9IGZhbHNlXG4gICAgfVxuXG4gICAgX3N0YXJ0UmVsb2FkVGltZXIoKTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLnJlbG9hZEZlYXR1cmVGbGFnc1F1ZXVlZCAmJiAhdGhpcy5yZWxvYWRGZWF0dXJlRmxhZ3NJbkFjdGlvbikge1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnJlbG9hZEZlYXR1cmVGbGFnc0luQWN0aW9uICYmIHRoaXMucmVsb2FkRmVhdHVyZUZsYWdzUXVldWVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVsb2FkRmVhdHVyZUZsYWdzUXVldWVkID0gZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fcmVsb2FkRmVhdHVyZUZsYWdzUmVxdWVzdCgpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgNSlcbiAgICAgICAgfVxuICAgIH1cblxuICAgIF9yZWxvYWRGZWF0dXJlRmxhZ3NSZXF1ZXN0KCk6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy5pbnN0YW5jZS5jb25maWcuYWR2YW5jZWRfZGlzYWJsZV9mZWF0dXJlX2ZsYWdzKSB7XG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc2V0UmVsb2FkaW5nUGF1c2VkKHRydWUpXG4gICAgICAgIGNvbnN0IHRva2VuID0gdGhpcy5pbnN0YW5jZS5jb25maWcudG9rZW5cbiAgICAgICAgY29uc3QgcGVyc29uUHJvcGVydGllcyA9IHRoaXMuaW5zdGFuY2UuZ2V0X3Byb3BlcnR5KFNUT1JFRF9QRVJTT05fUFJPUEVSVElFU19LRVkpXG4gICAgICAgIGNvbnN0IGdyb3VwUHJvcGVydGllcyA9IHRoaXMuaW5zdGFuY2UuZ2V0X3Byb3BlcnR5KFNUT1JFRF9HUk9VUF9QUk9QRVJUSUVTX0tFWSlcbiAgICAgICAgY29uc3QganNvbl9kYXRhID0ge1xuICAgICAgICAgICAgdG9rZW46IHRva2VuLFxuICAgICAgICAgICAgZGlzdGluY3RfaWQ6IHRoaXMuaW5zdGFuY2UuZ2V0X2Rpc3RpbmN0X2lkKCksXG4gICAgICAgICAgICBncm91cHM6IHRoaXMuaW5zdGFuY2UuZ2V0R3JvdXBzKCksXG4gICAgICAgICAgICAkYW5vbl9kaXN0aW5jdF9pZDogdGhpcy4kYW5vbl9kaXN0aW5jdF9pZCxcbiAgICAgICAgICAgIHBlcnNvbl9wcm9wZXJ0aWVzOiBwZXJzb25Qcm9wZXJ0aWVzLFxuICAgICAgICAgICAgZ3JvdXBfcHJvcGVydGllczogZ3JvdXBQcm9wZXJ0aWVzLFxuICAgICAgICAgICAgZGlzYWJsZV9mbGFnczogdGhpcy5pbnN0YW5jZS5jb25maWcuYWR2YW5jZWRfZGlzYWJsZV9mZWF0dXJlX2ZsYWdzIHx8IHVuZGVmaW5lZCxcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuaW5zdGFuY2UuX3NlbmRfcmVxdWVzdCh7XG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgIHVybDogdGhpcy5pbnN0YW5jZS5yZXF1ZXN0Um91dGVyLmVuZHBvaW50Rm9yKCdhcGknLCAnL2RlY2lkZS8/dj0zJyksXG4gICAgICAgICAgICBkYXRhOiBqc29uX2RhdGEsXG4gICAgICAgICAgICBjb21wcmVzc2lvbjogQ29tcHJlc3Npb24uQmFzZTY0LFxuICAgICAgICAgICAgdGltZW91dDogdGhpcy5pbnN0YW5jZS5jb25maWcuZmVhdHVyZV9mbGFnX3JlcXVlc3RfdGltZW91dF9tcyxcbiAgICAgICAgICAgIGNhbGxiYWNrOiAocmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFJlbG9hZGluZ1BhdXNlZChmYWxzZSlcblxuICAgICAgICAgICAgICAgIGxldCBlcnJvcnNMb2FkaW5nID0gdHJ1ZVxuXG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1c0NvZGUgPT09IDIwMCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBzdWNjZXNzZnVsIHJlcXVlc3RcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVzZXQgYW5vbl9kaXN0aW5jdF9pZCBhZnRlciBhdCBsZWFzdCBhIHNpbmdsZSByZXF1ZXN0IHdpdGggaXRcbiAgICAgICAgICAgICAgICAgICAgLy8gbWFrZXMgaXQgdGhyb3VnaFxuICAgICAgICAgICAgICAgICAgICB0aGlzLiRhbm9uX2Rpc3RpbmN0X2lkID0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgIGVycm9yc0xvYWRpbmcgPSBmYWxzZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyA6VFJJQ0tZOiBXZSB3YW50IHRvIGZpcmUgdGhlIGNhbGxiYWNrIGV2ZW4gaWYgdGhlIHJlcXVlc3QgZmFpbHNcbiAgICAgICAgICAgICAgICAvLyBhbmQgcmV0dXJuIGV4aXN0aW5nIGZsYWdzIGlmIHRoZXkgZXhpc3RcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIGJlY2F1c2Ugd2UgZG9uJ3Qgd2FudCB0byBibG9jayBjbGllbnRzIHdhaXRpbmcgZm9yIGZsYWdzIHRvIGxvYWQuXG4gICAgICAgICAgICAgICAgLy8gSXQncyBwb3NzaWJsZSB0aGV5J3JlIHdhaXRpbmcgZm9yIHRoZSBjYWxsYmFjayB0byByZW5kZXIgdGhlIFVJLCBidXQgaXQgbmV2ZXIgb2NjdXJzLlxuICAgICAgICAgICAgICAgIHRoaXMucmVjZWl2ZWRGZWF0dXJlRmxhZ3MocmVzcG9uc2UuanNvbiA/PyB7fSwgZXJyb3JzTG9hZGluZylcblxuICAgICAgICAgICAgICAgIC8vIDpUUklDS1k6IFJlbG9hZCAtIHN0YXJ0IGFub3RoZXIgcmVxdWVzdCBpZiBxdWV1ZWQhXG4gICAgICAgICAgICAgICAgdGhpcy5fc3RhcnRSZWxvYWRUaW1lcigpXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KVxuICAgIH1cblxuICAgIC8qXG4gICAgICogR2V0IGZlYXR1cmUgZmxhZydzIHZhbHVlIGZvciB1c2VyLlxuICAgICAqXG4gICAgICogIyMjIFVzYWdlOlxuICAgICAqXG4gICAgICogICAgIGlmKHBvc3Rob2cuZ2V0RmVhdHVyZUZsYWcoJ215LWZsYWcnKSA9PT0gJ3NvbWUtdmFyaWFudCcpIHsgLy8gZG8gc29tZXRoaW5nIH1cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fFN0cmluZ30ga2V5IEtleSBvZiB0aGUgZmVhdHVyZSBmbGFnLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fFN0cmluZ30gb3B0aW9ucyAob3B0aW9uYWwpIElmIHtzZW5kX2V2ZW50OiBmYWxzZX0sIHdlIHdvbid0IHNlbmQgYW4gJGZlYXR1cmVfZmxhZ19jYWxsIGV2ZW50IHRvIFBvc3RIb2cuXG4gICAgICovXG4gICAgZ2V0RmVhdHVyZUZsYWcoa2V5OiBzdHJpbmcsIG9wdGlvbnM6IHsgc2VuZF9ldmVudD86IGJvb2xlYW4gfSA9IHt9KTogYm9vbGVhbiB8IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gICAgICAgIGlmICghdGhpcy5pbnN0YW5jZS5kZWNpZGVFbmRwb2ludFdhc0hpdCAmJiAhKHRoaXMuZ2V0RmxhZ3MoKSAmJiB0aGlzLmdldEZsYWdzKCkubGVuZ3RoID4gMCkpIHtcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKCdnZXRGZWF0dXJlRmxhZyBmb3Iga2V5IFwiJyArIGtleSArICdcIiBmYWlsZWQuIEZlYXR1cmUgZmxhZ3MgZGlkblxcJ3QgbG9hZCBpbiB0aW1lLicpXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkXG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZmxhZ1ZhbHVlID0gdGhpcy5nZXRGbGFnVmFyaWFudHMoKVtrZXldXG4gICAgICAgIGNvbnN0IGZsYWdSZXBvcnRWYWx1ZSA9IGAke2ZsYWdWYWx1ZX1gXG4gICAgICAgIGNvbnN0IGZsYWdDYWxsUmVwb3J0ZWQ6IFJlY29yZDxzdHJpbmcsIHN0cmluZ1tdPiA9IHRoaXMuaW5zdGFuY2UuZ2V0X3Byb3BlcnR5KEZMQUdfQ0FMTF9SRVBPUlRFRCkgfHwge31cblxuICAgICAgICBpZiAob3B0aW9ucy5zZW5kX2V2ZW50IHx8ICEoJ3NlbmRfZXZlbnQnIGluIG9wdGlvbnMpKSB7XG4gICAgICAgICAgICBpZiAoIShrZXkgaW4gZmxhZ0NhbGxSZXBvcnRlZCkgfHwgIWZsYWdDYWxsUmVwb3J0ZWRba2V5XS5pbmNsdWRlcyhmbGFnUmVwb3J0VmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgaWYgKF9pc0FycmF5KGZsYWdDYWxsUmVwb3J0ZWRba2V5XSkpIHtcbiAgICAgICAgICAgICAgICAgICAgZmxhZ0NhbGxSZXBvcnRlZFtrZXldLnB1c2goZmxhZ1JlcG9ydFZhbHVlKVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGZsYWdDYWxsUmVwb3J0ZWRba2V5XSA9IFtmbGFnUmVwb3J0VmFsdWVdXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuaW5zdGFuY2UucGVyc2lzdGVuY2U/LnJlZ2lzdGVyKHsgW0ZMQUdfQ0FMTF9SRVBPUlRFRF06IGZsYWdDYWxsUmVwb3J0ZWQgfSlcblxuICAgICAgICAgICAgICAgIHRoaXMuaW5zdGFuY2UuY2FwdHVyZSgnJGZlYXR1cmVfZmxhZ19jYWxsZWQnLCB7ICRmZWF0dXJlX2ZsYWc6IGtleSwgJGZlYXR1cmVfZmxhZ19yZXNwb25zZTogZmxhZ1ZhbHVlIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZsYWdWYWx1ZVxuICAgIH1cblxuICAgIGdldEZlYXR1cmVGbGFnUGF5bG9hZChrZXk6IHN0cmluZyk6IEpzb25UeXBlIHtcbiAgICAgICAgY29uc3QgcGF5bG9hZHMgPSB0aGlzLmdldEZsYWdQYXlsb2FkcygpXG4gICAgICAgIHJldHVybiBwYXlsb2Fkc1trZXldXG4gICAgfVxuXG4gICAgLypcbiAgICAgKiBTZWUgaWYgZmVhdHVyZSBmbGFnIGlzIGVuYWJsZWQgZm9yIHVzZXIuXG4gICAgICpcbiAgICAgKiAjIyMgVXNhZ2U6XG4gICAgICpcbiAgICAgKiAgICAgaWYocG9zdGhvZy5pc0ZlYXR1cmVFbmFibGVkKCdiZXRhLWZlYXR1cmUnKSkgeyAvLyBkbyBzb21ldGhpbmcgfVxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R8U3RyaW5nfSBrZXkgS2V5IG9mIHRoZSBmZWF0dXJlIGZsYWcuXG4gICAgICogQHBhcmFtIHtPYmplY3R8U3RyaW5nfSBvcHRpb25zIChvcHRpb25hbCkgSWYge3NlbmRfZXZlbnQ6IGZhbHNlfSwgd2Ugd29uJ3Qgc2VuZCBhbiAkZmVhdHVyZV9mbGFnX2NhbGwgZXZlbnQgdG8gUG9zdEhvZy5cbiAgICAgKi9cbiAgICBpc0ZlYXR1cmVFbmFibGVkKGtleTogc3RyaW5nLCBvcHRpb25zOiB7IHNlbmRfZXZlbnQ/OiBib29sZWFuIH0gPSB7fSk6IGJvb2xlYW4gfCB1bmRlZmluZWQge1xuICAgICAgICBpZiAoIXRoaXMuaW5zdGFuY2UuZGVjaWRlRW5kcG9pbnRXYXNIaXQgJiYgISh0aGlzLmdldEZsYWdzKCkgJiYgdGhpcy5nZXRGbGFncygpLmxlbmd0aCA+IDApKSB7XG4gICAgICAgICAgICBsb2dnZXIud2FybignaXNGZWF0dXJlRW5hYmxlZCBmb3Iga2V5IFwiJyArIGtleSArICdcIiBmYWlsZWQuIEZlYXR1cmUgZmxhZ3MgZGlkblxcJ3QgbG9hZCBpbiB0aW1lLicpXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICEhdGhpcy5nZXRGZWF0dXJlRmxhZyhrZXksIG9wdGlvbnMpXG4gICAgfVxuXG4gICAgYWRkRmVhdHVyZUZsYWdzSGFuZGxlcihoYW5kbGVyOiBGZWF0dXJlRmxhZ3NDYWxsYmFjayk6IHZvaWQge1xuICAgICAgICB0aGlzLmZlYXR1cmVGbGFnRXZlbnRIYW5kbGVycy5wdXNoKGhhbmRsZXIpXG4gICAgfVxuXG4gICAgcmVtb3ZlRmVhdHVyZUZsYWdzSGFuZGxlcihoYW5kbGVyOiBGZWF0dXJlRmxhZ3NDYWxsYmFjayk6IHZvaWQge1xuICAgICAgICB0aGlzLmZlYXR1cmVGbGFnRXZlbnRIYW5kbGVycyA9IHRoaXMuZmVhdHVyZUZsYWdFdmVudEhhbmRsZXJzLmZpbHRlcigoaCkgPT4gaCAhPT0gaGFuZGxlcilcbiAgICB9XG5cbiAgICByZWNlaXZlZEZlYXR1cmVGbGFncyhyZXNwb25zZTogUGFydGlhbDxEZWNpZGVSZXNwb25zZT4sIGVycm9yc0xvYWRpbmc/OiBib29sZWFuKTogdm9pZCB7XG4gICAgICAgIGlmICghdGhpcy5pbnN0YW5jZS5wZXJzaXN0ZW5jZSkge1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pbnN0YW5jZS5kZWNpZGVFbmRwb2ludFdhc0hpdCA9IHRydWVcbiAgICAgICAgY29uc3QgY3VycmVudEZsYWdzID0gdGhpcy5nZXRGbGFnVmFyaWFudHMoKVxuICAgICAgICBjb25zdCBjdXJyZW50RmxhZ1BheWxvYWRzID0gdGhpcy5nZXRGbGFnUGF5bG9hZHMoKVxuICAgICAgICBwYXJzZUZlYXR1cmVGbGFnRGVjaWRlUmVzcG9uc2UocmVzcG9uc2UsIHRoaXMuaW5zdGFuY2UucGVyc2lzdGVuY2UsIGN1cnJlbnRGbGFncywgY3VycmVudEZsYWdQYXlsb2FkcylcbiAgICAgICAgdGhpcy5fZmlyZUZlYXR1cmVGbGFnc0NhbGxiYWNrcyhlcnJvcnNMb2FkaW5nKVxuICAgIH1cblxuICAgIC8qXG4gICAgICogT3ZlcnJpZGUgZmVhdHVyZSBmbGFncyBmb3IgZGVidWdnaW5nLlxuICAgICAqXG4gICAgICogIyMjIFVzYWdlOlxuICAgICAqXG4gICAgICogICAgIC0gcG9zdGhvZy5mZWF0dXJlX2ZsYWdzLm92ZXJyaWRlKGZhbHNlKVxuICAgICAqICAgICAtIHBvc3Rob2cuZmVhdHVyZV9mbGFncy5vdmVycmlkZShbJ2JldGEtZmVhdHVyZSddKVxuICAgICAqICAgICAtIHBvc3Rob2cuZmVhdHVyZV9mbGFncy5vdmVycmlkZSh7J2JldGEtZmVhdHVyZSc6ICd2YXJpYW50JywgJ290aGVyLWZlYXR1cmUnOiBUcnVlfSlcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fEFycmF5fFN0cmluZ30gZmxhZ3MgRmxhZ3MgdG8gb3ZlcnJpZGUgd2l0aC5cbiAgICAgKi9cbiAgICBvdmVycmlkZShmbGFnczogYm9vbGVhbiB8IHN0cmluZ1tdIHwgUmVjb3JkPHN0cmluZywgc3RyaW5nIHwgYm9vbGVhbj4pOiB2b2lkIHtcbiAgICAgICAgaWYgKCF0aGlzLmluc3RhbmNlLl9fbG9hZGVkIHx8ICF0aGlzLmluc3RhbmNlLnBlcnNpc3RlbmNlKSB7XG4gICAgICAgICAgICByZXR1cm4gbG9nZ2VyLnVuaW5pdGlhbGl6ZWRXYXJuaW5nKCdwb3N0aG9nLmZlYXR1cmVfZmxhZ3Mub3ZlcnJpZGUnKVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fb3ZlcnJpZGVfd2FybmluZyA9IGZhbHNlXG5cbiAgICAgICAgaWYgKGZsYWdzID09PSBmYWxzZSkge1xuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZS5wZXJzaXN0ZW5jZS51bnJlZ2lzdGVyKFBFUlNJU1RFTkNFX09WRVJSSURFX0ZFQVRVUkVfRkxBR1MpXG4gICAgICAgIH0gZWxzZSBpZiAoX2lzQXJyYXkoZmxhZ3MpKSB7XG4gICAgICAgICAgICBjb25zdCBmbGFnc09iajogUmVjb3JkPHN0cmluZywgc3RyaW5nIHwgYm9vbGVhbj4gPSB7fVxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmbGFncy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGZsYWdzT2JqW2ZsYWdzW2ldXSA9IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2UucGVyc2lzdGVuY2UucmVnaXN0ZXIoeyBbUEVSU0lTVEVOQ0VfT1ZFUlJJREVfRkVBVFVSRV9GTEFHU106IGZsYWdzT2JqIH0pXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmluc3RhbmNlLnBlcnNpc3RlbmNlLnJlZ2lzdGVyKHsgW1BFUlNJU1RFTkNFX09WRVJSSURFX0ZFQVRVUkVfRkxBR1NdOiBmbGFncyB9KVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qXG4gICAgICogUmVnaXN0ZXIgYW4gZXZlbnQgbGlzdGVuZXIgdGhhdCBydW5zIHdoZW4gZmVhdHVyZSBmbGFncyBiZWNvbWUgYXZhaWxhYmxlIG9yIHdoZW4gdGhleSBjaGFuZ2UuXG4gICAgICogSWYgdGhlcmUgYXJlIGZsYWdzLCB0aGUgbGlzdGVuZXIgaXMgY2FsbGVkIGltbWVkaWF0ZWx5IGluIGFkZGl0aW9uIHRvIGJlaW5nIGNhbGxlZCBvbiBmdXR1cmUgY2hhbmdlcy5cbiAgICAgKlxuICAgICAqICMjIyBVc2FnZTpcbiAgICAgKlxuICAgICAqICAgICBwb3N0aG9nLm9uRmVhdHVyZUZsYWdzKGZ1bmN0aW9uKGZlYXR1cmVGbGFncykgeyAvLyBkbyBzb21ldGhpbmcgfSlcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYWxsYmFja10gVGhlIGNhbGxiYWNrIGZ1bmN0aW9uIHdpbGwgYmUgY2FsbGVkIG9uY2UgdGhlIGZlYXR1cmUgZmxhZ3MgYXJlIHJlYWR5IG9yIHdoZW4gdGhleSBhcmUgdXBkYXRlZC5cbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEl0J2xsIHJldHVybiBhIGxpc3Qgb2YgZmVhdHVyZSBmbGFncyBlbmFibGVkIGZvciB0aGUgdXNlci5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IEEgZnVuY3Rpb24gdGhhdCBjYW4gYmUgY2FsbGVkIHRvIHVuc3Vic2NyaWJlIHRoZSBsaXN0ZW5lci4gVXNlZCBieSB1c2VFZmZlY3Qgd2hlbiB0aGUgY29tcG9uZW50IHVubW91bnRzLlxuICAgICAqL1xuICAgIG9uRmVhdHVyZUZsYWdzKGNhbGxiYWNrOiBGZWF0dXJlRmxhZ3NDYWxsYmFjayk6ICgpID0+IHZvaWQge1xuICAgICAgICB0aGlzLmFkZEZlYXR1cmVGbGFnc0hhbmRsZXIoY2FsbGJhY2spXG4gICAgICAgIGlmICh0aGlzLmluc3RhbmNlLmRlY2lkZUVuZHBvaW50V2FzSGl0KSB7XG4gICAgICAgICAgICBjb25zdCB7IGZsYWdzLCBmbGFnVmFyaWFudHMgfSA9IHRoaXMuX3ByZXBhcmVGZWF0dXJlRmxhZ3NGb3JDYWxsYmFja3MoKVxuICAgICAgICAgICAgY2FsbGJhY2soZmxhZ3MsIGZsYWdWYXJpYW50cylcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKCkgPT4gdGhpcy5yZW1vdmVGZWF0dXJlRmxhZ3NIYW5kbGVyKGNhbGxiYWNrKVxuICAgIH1cblxuICAgIHVwZGF0ZUVhcmx5QWNjZXNzRmVhdHVyZUVucm9sbG1lbnQoa2V5OiBzdHJpbmcsIGlzRW5yb2xsZWQ6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICAgICAgY29uc3QgZW5yb2xsbWVudFBlcnNvblByb3AgPSB7XG4gICAgICAgICAgICBbYCRmZWF0dXJlX2Vucm9sbG1lbnQvJHtrZXl9YF06IGlzRW5yb2xsZWQsXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pbnN0YW5jZS5jYXB0dXJlKCckZmVhdHVyZV9lbnJvbGxtZW50X3VwZGF0ZScsIHtcbiAgICAgICAgICAgICRmZWF0dXJlX2ZsYWc6IGtleSxcbiAgICAgICAgICAgICRmZWF0dXJlX2Vucm9sbG1lbnQ6IGlzRW5yb2xsZWQsXG4gICAgICAgICAgICAkc2V0OiBlbnJvbGxtZW50UGVyc29uUHJvcCxcbiAgICAgICAgfSlcbiAgICAgICAgdGhpcy5zZXRQZXJzb25Qcm9wZXJ0aWVzRm9yRmxhZ3MoZW5yb2xsbWVudFBlcnNvblByb3AsIGZhbHNlKVxuXG4gICAgICAgIGNvbnN0IG5ld0ZsYWdzID0geyAuLi50aGlzLmdldEZsYWdWYXJpYW50cygpLCBba2V5XTogaXNFbnJvbGxlZCB9XG4gICAgICAgIHRoaXMuaW5zdGFuY2UucGVyc2lzdGVuY2U/LnJlZ2lzdGVyKHtcbiAgICAgICAgICAgIFtQRVJTSVNURU5DRV9BQ1RJVkVfRkVBVFVSRV9GTEFHU106IE9iamVjdC5rZXlzKGZpbHRlckFjdGl2ZUZlYXR1cmVGbGFncyhuZXdGbGFncykpLFxuICAgICAgICAgICAgW0VOQUJMRURfRkVBVFVSRV9GTEFHU106IG5ld0ZsYWdzLFxuICAgICAgICB9KVxuICAgICAgICB0aGlzLl9maXJlRmVhdHVyZUZsYWdzQ2FsbGJhY2tzKClcbiAgICB9XG5cbiAgICBnZXRFYXJseUFjY2Vzc0ZlYXR1cmVzKGNhbGxiYWNrOiBFYXJseUFjY2Vzc0ZlYXR1cmVDYWxsYmFjaywgZm9yY2VfcmVsb2FkID0gZmFsc2UpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgZXhpc3RpbmdfZWFybHlfYWNjZXNzX2ZlYXR1cmVzID0gdGhpcy5pbnN0YW5jZS5nZXRfcHJvcGVydHkoUEVSU0lTVEVOQ0VfRUFSTFlfQUNDRVNTX0ZFQVRVUkVTKVxuXG4gICAgICAgIGlmICghZXhpc3RpbmdfZWFybHlfYWNjZXNzX2ZlYXR1cmVzIHx8IGZvcmNlX3JlbG9hZCkge1xuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZS5fc2VuZF9yZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICB0cmFuc3BvcnQ6ICdYSFInLFxuICAgICAgICAgICAgICAgIHVybDogdGhpcy5pbnN0YW5jZS5yZXF1ZXN0Um91dGVyLmVuZHBvaW50Rm9yKFxuICAgICAgICAgICAgICAgICAgICAnYXBpJyxcbiAgICAgICAgICAgICAgICAgICAgYC9hcGkvZWFybHlfYWNjZXNzX2ZlYXR1cmVzLz90b2tlbj0ke3RoaXMuaW5zdGFuY2UuY29uZmlnLnRva2VufWBcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6IChyZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXJlc3BvbnNlLmpzb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVhcmx5QWNjZXNzRmVhdHVyZXMgPSAocmVzcG9uc2UuanNvbiBhcyBFYXJseUFjY2Vzc0ZlYXR1cmVSZXNwb25zZSkuZWFybHlBY2Nlc3NGZWF0dXJlc1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmluc3RhbmNlLnBlcnNpc3RlbmNlPy5yZWdpc3Rlcih7IFtQRVJTSVNURU5DRV9FQVJMWV9BQ0NFU1NfRkVBVFVSRVNdOiBlYXJseUFjY2Vzc0ZlYXR1cmVzIH0pXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhlYXJseUFjY2Vzc0ZlYXR1cmVzKVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGV4aXN0aW5nX2Vhcmx5X2FjY2Vzc19mZWF0dXJlcylcbiAgICAgICAgfVxuICAgIH1cblxuICAgIF9wcmVwYXJlRmVhdHVyZUZsYWdzRm9yQ2FsbGJhY2tzKCk6IHsgZmxhZ3M6IHN0cmluZ1tdOyBmbGFnVmFyaWFudHM6IFJlY29yZDxzdHJpbmcsIHN0cmluZyB8IGJvb2xlYW4+IH0ge1xuICAgICAgICBjb25zdCBmbGFncyA9IHRoaXMuZ2V0RmxhZ3MoKVxuICAgICAgICBjb25zdCBmbGFnVmFyaWFudHMgPSB0aGlzLmdldEZsYWdWYXJpYW50cygpXG5cbiAgICAgICAgLy8gUmV0dXJuIHRydXRoeVxuICAgICAgICBjb25zdCB0cnV0aHlGbGFncyA9IGZsYWdzLmZpbHRlcigoZmxhZykgPT4gZmxhZ1ZhcmlhbnRzW2ZsYWddKVxuICAgICAgICBjb25zdCB0cnV0aHlGbGFnVmFyaWFudHMgPSBPYmplY3Qua2V5cyhmbGFnVmFyaWFudHMpXG4gICAgICAgICAgICAuZmlsdGVyKCh2YXJpYW50S2V5KSA9PiBmbGFnVmFyaWFudHNbdmFyaWFudEtleV0pXG4gICAgICAgICAgICAucmVkdWNlKChyZXM6IFJlY29yZDxzdHJpbmcsIHN0cmluZyB8IGJvb2xlYW4+LCBrZXkpID0+IHtcbiAgICAgICAgICAgICAgICByZXNba2V5XSA9IGZsYWdWYXJpYW50c1trZXldXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc1xuICAgICAgICAgICAgfSwge30pXG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGZsYWdzOiB0cnV0aHlGbGFncyxcbiAgICAgICAgICAgIGZsYWdWYXJpYW50czogdHJ1dGh5RmxhZ1ZhcmlhbnRzLFxuICAgICAgICB9XG4gICAgfVxuXG4gICAgX2ZpcmVGZWF0dXJlRmxhZ3NDYWxsYmFja3MoZXJyb3JzTG9hZGluZz86IGJvb2xlYW4pOiB2b2lkIHtcbiAgICAgICAgY29uc3QgeyBmbGFncywgZmxhZ1ZhcmlhbnRzIH0gPSB0aGlzLl9wcmVwYXJlRmVhdHVyZUZsYWdzRm9yQ2FsbGJhY2tzKClcbiAgICAgICAgdGhpcy5mZWF0dXJlRmxhZ0V2ZW50SGFuZGxlcnMuZm9yRWFjaCgoaGFuZGxlcikgPT4gaGFuZGxlcihmbGFncywgZmxhZ1ZhcmlhbnRzLCB7IGVycm9yc0xvYWRpbmcgfSkpXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IG92ZXJyaWRlIHBlcnNvbiBwcm9wZXJ0aWVzIGZvciBmZWF0dXJlIGZsYWdzLlxuICAgICAqIFRoaXMgaXMgdXNlZCB3aGVuIGRlYWxpbmcgd2l0aCBuZXcgcGVyc29ucyAvIHdoZXJlIHlvdSBkb24ndCB3YW50IHRvIHdhaXQgZm9yIGluZ2VzdGlvblxuICAgICAqIHRvIHVwZGF0ZSB1c2VyIHByb3BlcnRpZXMuXG4gICAgICovXG4gICAgc2V0UGVyc29uUHJvcGVydGllc0ZvckZsYWdzKHByb3BlcnRpZXM6IFByb3BlcnRpZXMsIHJlbG9hZEZlYXR1cmVGbGFncyA9IHRydWUpOiB2b2lkIHtcbiAgICAgICAgLy8gR2V0IHBlcnNpc3RlZCBwZXJzb24gcHJvcGVydGllc1xuICAgICAgICBjb25zdCBleGlzdGluZ1Byb3BlcnRpZXMgPSB0aGlzLmluc3RhbmNlLmdldF9wcm9wZXJ0eShTVE9SRURfUEVSU09OX1BST1BFUlRJRVNfS0VZKSB8fCB7fVxuXG4gICAgICAgIHRoaXMuaW5zdGFuY2UucmVnaXN0ZXIoe1xuICAgICAgICAgICAgW1NUT1JFRF9QRVJTT05fUFJPUEVSVElFU19LRVldOiB7XG4gICAgICAgICAgICAgICAgLi4uZXhpc3RpbmdQcm9wZXJ0aWVzLFxuICAgICAgICAgICAgICAgIC4uLnByb3BlcnRpZXMsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KVxuXG4gICAgICAgIGlmIChyZWxvYWRGZWF0dXJlRmxhZ3MpIHtcbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2UucmVsb2FkRmVhdHVyZUZsYWdzKClcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlc2V0UGVyc29uUHJvcGVydGllc0ZvckZsYWdzKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmluc3RhbmNlLnVucmVnaXN0ZXIoU1RPUkVEX1BFUlNPTl9QUk9QRVJUSUVTX0tFWSlcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgb3ZlcnJpZGUgZ3JvdXAgcHJvcGVydGllcyBmb3IgZmVhdHVyZSBmbGFncy5cbiAgICAgKiBUaGlzIGlzIHVzZWQgd2hlbiBkZWFsaW5nIHdpdGggbmV3IGdyb3VwcyAvIHdoZXJlIHlvdSBkb24ndCB3YW50IHRvIHdhaXQgZm9yIGluZ2VzdGlvblxuICAgICAqIHRvIHVwZGF0ZSBwcm9wZXJ0aWVzLlxuICAgICAqIFRha2VzIGluIGFuIG9iamVjdCwgdGhlIGtleSBvZiB3aGljaCBpcyB0aGUgZ3JvdXAgdHlwZS5cbiAgICAgKiBGb3IgZXhhbXBsZTpcbiAgICAgKiAgICAgc2V0R3JvdXBQcm9wZXJ0aWVzRm9yRmxhZ3Moeydvcmdhbml6YXRpb24nOiB7IG5hbWU6ICdDWVonLCBlbXBsb3llZXM6ICcxMScgfSB9KVxuICAgICAqL1xuICAgIHNldEdyb3VwUHJvcGVydGllc0ZvckZsYWdzKHByb3BlcnRpZXM6IHsgW3R5cGU6IHN0cmluZ106IFByb3BlcnRpZXMgfSwgcmVsb2FkRmVhdHVyZUZsYWdzID0gdHJ1ZSk6IHZvaWQge1xuICAgICAgICAvLyBHZXQgcGVyc2lzdGVkIGdyb3VwIHByb3BlcnRpZXNcbiAgICAgICAgY29uc3QgZXhpc3RpbmdQcm9wZXJ0aWVzID0gdGhpcy5pbnN0YW5jZS5nZXRfcHJvcGVydHkoU1RPUkVEX0dST1VQX1BST1BFUlRJRVNfS0VZKSB8fCB7fVxuXG4gICAgICAgIGlmIChPYmplY3Qua2V5cyhleGlzdGluZ1Byb3BlcnRpZXMpLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgT2JqZWN0LmtleXMoZXhpc3RpbmdQcm9wZXJ0aWVzKS5mb3JFYWNoKChncm91cFR5cGUpID0+IHtcbiAgICAgICAgICAgICAgICBleGlzdGluZ1Byb3BlcnRpZXNbZ3JvdXBUeXBlXSA9IHtcbiAgICAgICAgICAgICAgICAgICAgLi4uZXhpc3RpbmdQcm9wZXJ0aWVzW2dyb3VwVHlwZV0sXG4gICAgICAgICAgICAgICAgICAgIC4uLnByb3BlcnRpZXNbZ3JvdXBUeXBlXSxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZGVsZXRlIHByb3BlcnRpZXNbZ3JvdXBUeXBlXVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuaW5zdGFuY2UucmVnaXN0ZXIoe1xuICAgICAgICAgICAgW1NUT1JFRF9HUk9VUF9QUk9QRVJUSUVTX0tFWV06IHtcbiAgICAgICAgICAgICAgICAuLi5leGlzdGluZ1Byb3BlcnRpZXMsXG4gICAgICAgICAgICAgICAgLi4ucHJvcGVydGllcyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pXG5cbiAgICAgICAgaWYgKHJlbG9hZEZlYXR1cmVGbGFncykge1xuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZS5yZWxvYWRGZWF0dXJlRmxhZ3MoKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVzZXRHcm91cFByb3BlcnRpZXNGb3JGbGFncyhncm91cF90eXBlPzogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIGlmIChncm91cF90eXBlKSB7XG4gICAgICAgICAgICBjb25zdCBleGlzdGluZ1Byb3BlcnRpZXMgPSB0aGlzLmluc3RhbmNlLmdldF9wcm9wZXJ0eShTVE9SRURfR1JPVVBfUFJPUEVSVElFU19LRVkpIHx8IHt9XG4gICAgICAgICAgICB0aGlzLmluc3RhbmNlLnJlZ2lzdGVyKHtcbiAgICAgICAgICAgICAgICBbU1RPUkVEX0dST1VQX1BST1BFUlRJRVNfS0VZXTogeyAuLi5leGlzdGluZ1Byb3BlcnRpZXMsIFtncm91cF90eXBlXToge30gfSxcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmluc3RhbmNlLnVucmVnaXN0ZXIoU1RPUkVEX0dST1VQX1BST1BFUlRJRVNfS0VZKVxuICAgICAgICB9XG4gICAgfVxufVxuIiwgIi8qKlxuICogdXVpZHY3OiBBbiBleHBlcmltZW50YWwgaW1wbGVtZW50YXRpb24gb2YgdGhlIHByb3Bvc2VkIFVVSUQgVmVyc2lvbiA3XG4gKlxuICogQGxpY2Vuc2UgQXBhY2hlLTIuMFxuICogQGNvcHlyaWdodCAyMDIxLTIwMjMgTGlvc0tcbiAqIEBwYWNrYWdlRG9jdW1lbnRhdGlvblxuICpcbiAqIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL0xpb3NLL3V1aWR2Ny9ibG9iL2U1MDE0NjJlYTNkMjMyNDFkZTEzMTkyY2VhZTcyNjk1NmY5YjNiN2Qvc3JjL2luZGV4LnRzXG4gKi9cblxuLy8gcG9seWZpbGwgZm9yIElFMTFcbmltcG9ydCB7IHdpbmRvdyB9IGZyb20gJy4vdXRpbHMvZ2xvYmFscydcblxuaW1wb3J0IHsgX2lzTnVtYmVyLCBfaXNVbmRlZmluZWQgfSBmcm9tICcuL3V0aWxzL3R5cGUtdXRpbHMnXG5cbmlmICghTWF0aC50cnVuYykge1xuICAgIE1hdGgudHJ1bmMgPSBmdW5jdGlvbiAodikge1xuICAgICAgICByZXR1cm4gdiA8IDAgPyBNYXRoLmNlaWwodikgOiBNYXRoLmZsb29yKHYpXG4gICAgfVxufVxuXG4vLyBwb2x5ZmlsbCBmb3IgSUUxMVxuaWYgKCFOdW1iZXIuaXNJbnRlZ2VyKSB7XG4gICAgTnVtYmVyLmlzSW50ZWdlciA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gX2lzTnVtYmVyKHZhbHVlKSAmJiBpc0Zpbml0ZSh2YWx1ZSkgJiYgTWF0aC5mbG9vcih2YWx1ZSkgPT09IHZhbHVlXG4gICAgfVxufVxuXG5jb25zdCBESUdJVFMgPSAnMDEyMzQ1Njc4OWFiY2RlZidcblxuLyoqIFJlcHJlc2VudHMgYSBVVUlEIGFzIGEgMTYtYnl0ZSBieXRlIGFycmF5LiAqL1xuZXhwb3J0IGNsYXNzIFVVSUQge1xuICAgIC8qKiBAcGFyYW0gYnl0ZXMgLSBUaGUgMTYtYnl0ZSBieXRlIGFycmF5IHJlcHJlc2VudGF0aW9uLiAqL1xuICAgIGNvbnN0cnVjdG9yKHJlYWRvbmx5IGJ5dGVzOiBSZWFkb25seTxVaW50OEFycmF5Pikge1xuICAgICAgICBpZiAoYnl0ZXMubGVuZ3RoICE9PSAxNikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignbm90IDEyOC1iaXQgbGVuZ3RoJylcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEJ1aWxkcyBhIGJ5dGUgYXJyYXkgZnJvbSBVVUlEdjcgZmllbGQgdmFsdWVzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHVuaXhUc01zIC0gQSA0OC1iaXQgYHVuaXhfdHNfbXNgIGZpZWxkIHZhbHVlLlxuICAgICAqIEBwYXJhbSByYW5kQSAtIEEgMTItYml0IGByYW5kX2FgIGZpZWxkIHZhbHVlLlxuICAgICAqIEBwYXJhbSByYW5kQkhpIC0gVGhlIGhpZ2hlciAzMCBiaXRzIG9mIDYyLWJpdCBgcmFuZF9iYCBmaWVsZCB2YWx1ZS5cbiAgICAgKiBAcGFyYW0gcmFuZEJMbyAtIFRoZSBsb3dlciAzMiBiaXRzIG9mIDYyLWJpdCBgcmFuZF9iYCBmaWVsZCB2YWx1ZS5cbiAgICAgKi9cbiAgICBzdGF0aWMgZnJvbUZpZWxkc1Y3KHVuaXhUc01zOiBudW1iZXIsIHJhbmRBOiBudW1iZXIsIHJhbmRCSGk6IG51bWJlciwgcmFuZEJMbzogbnVtYmVyKTogVVVJRCB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgICFOdW1iZXIuaXNJbnRlZ2VyKHVuaXhUc01zKSB8fFxuICAgICAgICAgICAgIU51bWJlci5pc0ludGVnZXIocmFuZEEpIHx8XG4gICAgICAgICAgICAhTnVtYmVyLmlzSW50ZWdlcihyYW5kQkhpKSB8fFxuICAgICAgICAgICAgIU51bWJlci5pc0ludGVnZXIocmFuZEJMbykgfHxcbiAgICAgICAgICAgIHVuaXhUc01zIDwgMCB8fFxuICAgICAgICAgICAgcmFuZEEgPCAwIHx8XG4gICAgICAgICAgICByYW5kQkhpIDwgMCB8fFxuICAgICAgICAgICAgcmFuZEJMbyA8IDAgfHxcbiAgICAgICAgICAgIHVuaXhUc01zID4gMHhmZmZmX2ZmZmZfZmZmZiB8fFxuICAgICAgICAgICAgcmFuZEEgPiAweGZmZiB8fFxuICAgICAgICAgICAgcmFuZEJIaSA+IDB4M2ZmZl9mZmZmIHx8XG4gICAgICAgICAgICByYW5kQkxvID4gMHhmZmZmX2ZmZmZcbiAgICAgICAgKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignaW52YWxpZCBmaWVsZCB2YWx1ZScpXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBieXRlcyA9IG5ldyBVaW50OEFycmF5KDE2KVxuICAgICAgICBieXRlc1swXSA9IHVuaXhUc01zIC8gMiAqKiA0MFxuICAgICAgICBieXRlc1sxXSA9IHVuaXhUc01zIC8gMiAqKiAzMlxuICAgICAgICBieXRlc1syXSA9IHVuaXhUc01zIC8gMiAqKiAyNFxuICAgICAgICBieXRlc1szXSA9IHVuaXhUc01zIC8gMiAqKiAxNlxuICAgICAgICBieXRlc1s0XSA9IHVuaXhUc01zIC8gMiAqKiA4XG4gICAgICAgIGJ5dGVzWzVdID0gdW5peFRzTXNcbiAgICAgICAgYnl0ZXNbNl0gPSAweDcwIHwgKHJhbmRBID4+PiA4KVxuICAgICAgICBieXRlc1s3XSA9IHJhbmRBXG4gICAgICAgIGJ5dGVzWzhdID0gMHg4MCB8IChyYW5kQkhpID4+PiAyNClcbiAgICAgICAgYnl0ZXNbOV0gPSByYW5kQkhpID4+PiAxNlxuICAgICAgICBieXRlc1sxMF0gPSByYW5kQkhpID4+PiA4XG4gICAgICAgIGJ5dGVzWzExXSA9IHJhbmRCSGlcbiAgICAgICAgYnl0ZXNbMTJdID0gcmFuZEJMbyA+Pj4gMjRcbiAgICAgICAgYnl0ZXNbMTNdID0gcmFuZEJMbyA+Pj4gMTZcbiAgICAgICAgYnl0ZXNbMTRdID0gcmFuZEJMbyA+Pj4gOFxuICAgICAgICBieXRlc1sxNV0gPSByYW5kQkxvXG4gICAgICAgIHJldHVybiBuZXcgVVVJRChieXRlcylcbiAgICB9XG5cbiAgICAvKiogQHJldHVybnMgVGhlIDgtNC00LTQtMTIgY2Fub25pY2FsIGhleGFkZWNpbWFsIHN0cmluZyByZXByZXNlbnRhdGlvbi4gKi9cbiAgICB0b1N0cmluZygpOiBzdHJpbmcge1xuICAgICAgICBsZXQgdGV4dCA9ICcnXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5ieXRlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGV4dCA9IHRleHQgKyBESUdJVFMuY2hhckF0KHRoaXMuYnl0ZXNbaV0gPj4+IDQpICsgRElHSVRTLmNoYXJBdCh0aGlzLmJ5dGVzW2ldICYgMHhmKVxuICAgICAgICAgICAgaWYgKGkgPT09IDMgfHwgaSA9PT0gNSB8fCBpID09PSA3IHx8IGkgPT09IDkpIHtcbiAgICAgICAgICAgICAgICB0ZXh0ICs9ICctJ1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRleHQubGVuZ3RoICE9PSAzNikge1xuICAgICAgICAgICAgLy8gV2Ugc2F3IG9uZSBjdXN0b21lciB3aG9zZSBidW5kbGluZyBjb2RlIHdhcyBtYW5nbGluZyB0aGUgVVVJRCBnZW5lcmF0aW9uXG4gICAgICAgICAgICAvLyByYXRoZXIgdGhhbiBhY2NlcHQgYSBiYWQgVVVJRCwgd2UgdGhyb3cgYW4gZXJyb3IgaGVyZS5cbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBVVUlEdjcgd2FzIGdlbmVyYXRlZCcpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRleHRcbiAgICB9XG5cbiAgICAvKiogQ3JlYXRlcyBhbiBvYmplY3QgZnJvbSBgdGhpc2AuICovXG4gICAgY2xvbmUoKTogVVVJRCB7XG4gICAgICAgIHJldHVybiBuZXcgVVVJRCh0aGlzLmJ5dGVzLnNsaWNlKDApKVxuICAgIH1cblxuICAgIC8qKiBSZXR1cm5zIHRydWUgaWYgYHRoaXNgIGlzIGVxdWl2YWxlbnQgdG8gYG90aGVyYC4gKi9cbiAgICBlcXVhbHMob3RoZXI6IFVVSUQpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tcGFyZVRvKG90aGVyKSA9PT0gMFxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBuZWdhdGl2ZSBpbnRlZ2VyLCB6ZXJvLCBvciBwb3NpdGl2ZSBpbnRlZ2VyIGlmIGB0aGlzYCBpcyBsZXNzXG4gICAgICogdGhhbiwgZXF1YWwgdG8sIG9yIGdyZWF0ZXIgdGhhbiBgb3RoZXJgLCByZXNwZWN0aXZlbHkuXG4gICAgICovXG4gICAgY29tcGFyZVRvKG90aGVyOiBVVUlEKTogbnVtYmVyIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxNjsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBkaWZmID0gdGhpcy5ieXRlc1tpXSAtIG90aGVyLmJ5dGVzW2ldXG4gICAgICAgICAgICBpZiAoZGlmZiAhPT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBNYXRoLnNpZ24oZGlmZilcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gMFxuICAgIH1cbn1cblxuLyoqIEVuY2Fwc3VsYXRlcyB0aGUgbW9ub3RvbmljIGNvdW50ZXIgc3RhdGUuICovXG5jbGFzcyBWN0dlbmVyYXRvciB7XG4gICAgcHJpdmF0ZSB0aW1lc3RhbXAgPSAwXG4gICAgcHJpdmF0ZSBjb3VudGVyID0gMFxuICAgIHByaXZhdGUgcmVhZG9ubHkgcmFuZG9tID0gbmV3IERlZmF1bHRSYW5kb20oKVxuXG4gICAgLyoqXG4gICAgICogR2VuZXJhdGVzIGEgbmV3IFVVSUR2NyBvYmplY3QgZnJvbSB0aGUgY3VycmVudCB0aW1lc3RhbXAsIG9yIHJlc2V0cyB0aGVcbiAgICAgKiBnZW5lcmF0b3IgdXBvbiBzaWduaWZpY2FudCB0aW1lc3RhbXAgcm9sbGJhY2suXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCByZXR1cm5zIG1vbm90b25pY2FsbHkgaW5jcmVhc2luZyBVVUlEcyB1bmxlc3MgdGhlIHVwLXRvLWRhdGVcbiAgICAgKiB0aW1lc3RhbXAgaXMgc2lnbmlmaWNhbnRseSAoYnkgdGVuIHNlY29uZHMgb3IgbW9yZSkgc21hbGxlciB0aGFuIHRoZSBvbmVcbiAgICAgKiBlbWJlZGRlZCBpbiB0aGUgaW1tZWRpYXRlbHkgcHJlY2VkaW5nIFVVSUQuIElmIHN1Y2ggYSBzaWduaWZpY2FudCBjbG9ja1xuICAgICAqIHJvbGxiYWNrIGlzIGRldGVjdGVkLCB0aGlzIG1ldGhvZCByZXNldHMgdGhlIGdlbmVyYXRvciBhbmQgcmV0dXJucyBhIG5ld1xuICAgICAqIFVVSUQgYmFzZWQgb24gdGhlIGN1cnJlbnQgdGltZXN0YW1wLlxuICAgICAqL1xuICAgIGdlbmVyYXRlKCk6IFVVSUQge1xuICAgICAgICBjb25zdCB2YWx1ZSA9IHRoaXMuZ2VuZXJhdGVPckFib3J0KClcbiAgICAgICAgaWYgKCFfaXNVbmRlZmluZWQodmFsdWUpKSB7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWVcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIHJlc2V0IHN0YXRlIGFuZCByZXN1bWVcbiAgICAgICAgICAgIHRoaXMudGltZXN0YW1wID0gMFxuICAgICAgICAgICAgY29uc3QgdmFsdWVBZnRlclJlc2V0ID0gdGhpcy5nZW5lcmF0ZU9yQWJvcnQoKVxuICAgICAgICAgICAgaWYgKF9pc1VuZGVmaW5lZCh2YWx1ZUFmdGVyUmVzZXQpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDb3VsZCBub3QgZ2VuZXJhdGUgVVVJRCBhZnRlciB0aW1lc3RhbXAgcmVzZXQnKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlQWZ0ZXJSZXNldFxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2VuZXJhdGVzIGEgbmV3IFVVSUR2NyBvYmplY3QgZnJvbSB0aGUgY3VycmVudCB0aW1lc3RhbXAsIG9yIHJldHVybnNcbiAgICAgKiBgdW5kZWZpbmVkYCB1cG9uIHNpZ25pZmljYW50IHRpbWVzdGFtcCByb2xsYmFjay5cbiAgICAgKlxuICAgICAqIFRoaXMgbWV0aG9kIHJldHVybnMgbW9ub3RvbmljYWxseSBpbmNyZWFzaW5nIFVVSURzIHVubGVzcyB0aGUgdXAtdG8tZGF0ZVxuICAgICAqIHRpbWVzdGFtcCBpcyBzaWduaWZpY2FudGx5IChieSB0ZW4gc2Vjb25kcyBvciBtb3JlKSBzbWFsbGVyIHRoYW4gdGhlIG9uZVxuICAgICAqIGVtYmVkZGVkIGluIHRoZSBpbW1lZGlhdGVseSBwcmVjZWRpbmcgVVVJRC4gSWYgc3VjaCBhIHNpZ25pZmljYW50IGNsb2NrXG4gICAgICogcm9sbGJhY2sgaXMgZGV0ZWN0ZWQsIHRoaXMgbWV0aG9kIGFib3J0cyBhbmQgcmV0dXJucyBgdW5kZWZpbmVkYC5cbiAgICAgKi9cbiAgICBnZW5lcmF0ZU9yQWJvcnQoKTogVVVJRCB8IHVuZGVmaW5lZCB7XG4gICAgICAgIGNvbnN0IE1BWF9DT1VOVEVSID0gMHgzZmZfZmZmZl9mZmZmXG4gICAgICAgIGNvbnN0IFJPTExCQUNLX0FMTE9XQU5DRSA9IDEwXzAwMCAvLyAxMCBzZWNvbmRzXG5cbiAgICAgICAgY29uc3QgdHMgPSBEYXRlLm5vdygpXG4gICAgICAgIGlmICh0cyA+IHRoaXMudGltZXN0YW1wKSB7XG4gICAgICAgICAgICB0aGlzLnRpbWVzdGFtcCA9IHRzXG4gICAgICAgICAgICB0aGlzLnJlc2V0Q291bnRlcigpXG4gICAgICAgIH0gZWxzZSBpZiAodHMgKyBST0xMQkFDS19BTExPV0FOQ0UgPiB0aGlzLnRpbWVzdGFtcCkge1xuICAgICAgICAgICAgLy8gZ28gb24gd2l0aCBwcmV2aW91cyB0aW1lc3RhbXAgaWYgbmV3IG9uZSBpcyBub3QgbXVjaCBzbWFsbGVyXG4gICAgICAgICAgICB0aGlzLmNvdW50ZXIrK1xuICAgICAgICAgICAgaWYgKHRoaXMuY291bnRlciA+IE1BWF9DT1VOVEVSKSB7XG4gICAgICAgICAgICAgICAgLy8gaW5jcmVtZW50IHRpbWVzdGFtcCBhdCBjb3VudGVyIG92ZXJmbG93XG4gICAgICAgICAgICAgICAgdGhpcy50aW1lc3RhbXArK1xuICAgICAgICAgICAgICAgIHRoaXMucmVzZXRDb3VudGVyKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIGFib3J0IGlmIGNsb2NrIHdlbnQgYmFja3dhcmRzIHRvIHVuYmVhcmFibGUgZXh0ZW50XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gVVVJRC5mcm9tRmllbGRzVjcoXG4gICAgICAgICAgICB0aGlzLnRpbWVzdGFtcCxcbiAgICAgICAgICAgIE1hdGgudHJ1bmModGhpcy5jb3VudGVyIC8gMiAqKiAzMCksXG4gICAgICAgICAgICB0aGlzLmNvdW50ZXIgJiAoMiAqKiAzMCAtIDEpLFxuICAgICAgICAgICAgdGhpcy5yYW5kb20ubmV4dFVpbnQzMigpXG4gICAgICAgIClcbiAgICB9XG5cbiAgICAvKiogSW5pdGlhbGl6ZXMgdGhlIGNvdW50ZXIgYXQgYSA0Mi1iaXQgcmFuZG9tIGludGVnZXIuICovXG4gICAgcHJpdmF0ZSByZXNldENvdW50ZXIoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuY291bnRlciA9IHRoaXMucmFuZG9tLm5leHRVaW50MzIoKSAqIDB4NDAwICsgKHRoaXMucmFuZG9tLm5leHRVaW50MzIoKSAmIDB4M2ZmKVxuICAgIH1cbn1cblxuLyoqIEEgZ2xvYmFsIGZsYWcgdG8gZm9yY2UgdXNlIG9mIGNyeXB0b2dyYXBoaWNhbGx5IHN0cm9uZyBSTkcuICovXG5kZWNsYXJlIGNvbnN0IFVVSURWN19ERU5ZX1dFQUtfUk5HOiBib29sZWFuXG5cbi8qKiBTdG9yZXMgYGNyeXB0by5nZXRSYW5kb21WYWx1ZXMoKWAgYXZhaWxhYmxlIGluIHRoZSBlbnZpcm9ubWVudC4gKi9cbmxldCBnZXRSYW5kb21WYWx1ZXM6IDxUIGV4dGVuZHMgVWludDhBcnJheSB8IFVpbnQzMkFycmF5PihidWZmZXI6IFQpID0+IFQgPSAoYnVmZmVyKSA9PiB7XG4gICAgLy8gZmFsbCBiYWNrIG9uIE1hdGgucmFuZG9tKCkgdW5sZXNzIHRoZSBmbGFnIGlzIHNldCB0byB0cnVlXG4gICAgLy8gVFJJQ0tZOiBkb24ndCB1c2UgdGhlIF9pc1VuZGVmaW5lZCBtZXRob2QgaGVyZSBhcyBjYW4ndCBwYXNzIHRoZSByZWZlcmVuY2VcbiAgICBpZiAodHlwZW9mIFVVSURWN19ERU5ZX1dFQUtfUk5HICE9PSAndW5kZWZpbmVkJyAmJiBVVUlEVjdfREVOWV9XRUFLX1JORykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ25vIGNyeXB0b2dyYXBoaWNhbGx5IHN0cm9uZyBSTkcgYXZhaWxhYmxlJylcbiAgICB9XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJ1ZmZlci5sZW5ndGg7IGkrKykge1xuICAgICAgICBidWZmZXJbaV0gPSBNYXRoLnRydW5jKE1hdGgucmFuZG9tKCkgKiAweDFfMDAwMCkgKiAweDFfMDAwMCArIE1hdGgudHJ1bmMoTWF0aC5yYW5kb20oKSAqIDB4MV8wMDAwKVxuICAgIH1cbiAgICByZXR1cm4gYnVmZmVyXG59XG5cbi8vIGRldGVjdCBXZWIgQ3J5cHRvIEFQSVxuaWYgKHdpbmRvdyAmJiAhX2lzVW5kZWZpbmVkKHdpbmRvdy5jcnlwdG8pICYmIGNyeXB0by5nZXRSYW5kb21WYWx1ZXMpIHtcbiAgICBnZXRSYW5kb21WYWx1ZXMgPSAoYnVmZmVyKSA9PiBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKGJ1ZmZlcilcbn1cblxuLyoqXG4gKiBXcmFwcyBgY3J5cHRvLmdldFJhbmRvbVZhbHVlcygpYCBhbmQgY29tcGF0aWJsZXMgdG8gZW5hYmxlIGJ1ZmZlcmluZzsgdGhpc1xuICogdXNlcyBhIHNtYWxsIGJ1ZmZlciBieSBkZWZhdWx0IHRvIGF2b2lkIHVuYmVhcmFibGUgdGhyb3VnaHB1dCBkZWNsaW5lIGluIHNvbWVcbiAqIGVudmlyb25tZW50cyBhcyB3ZWxsIGFzIHRoZSB3YXN0ZSBvZiB0aW1lIGFuZCBzcGFjZSBmb3IgdW51c2VkIHZhbHVlcy5cbiAqL1xuY2xhc3MgRGVmYXVsdFJhbmRvbSB7XG4gICAgcHJpdmF0ZSByZWFkb25seSBidWZmZXIgPSBuZXcgVWludDMyQXJyYXkoOClcbiAgICBwcml2YXRlIGN1cnNvciA9IEluZmluaXR5XG4gICAgbmV4dFVpbnQzMigpOiBudW1iZXIge1xuICAgICAgICBpZiAodGhpcy5jdXJzb3IgPj0gdGhpcy5idWZmZXIubGVuZ3RoKSB7XG4gICAgICAgICAgICBnZXRSYW5kb21WYWx1ZXModGhpcy5idWZmZXIpXG4gICAgICAgICAgICB0aGlzLmN1cnNvciA9IDBcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5idWZmZXJbdGhpcy5jdXJzb3IrK11cbiAgICB9XG59XG5cbmxldCBkZWZhdWx0R2VuZXJhdG9yOiBWN0dlbmVyYXRvciB8IHVuZGVmaW5lZFxuXG4vKipcbiAqIEdlbmVyYXRlcyBhIFVVSUR2NyBzdHJpbmcuXG4gKlxuICogQHJldHVybnMgVGhlIDgtNC00LTQtMTIgY2Fub25pY2FsIGhleGFkZWNpbWFsIHN0cmluZyByZXByZXNlbnRhdGlvblxuICogKFwieHh4eHh4eHgteHh4eC14eHh4LXh4eHgteHh4eHh4eHh4eHh4XCIpLlxuICovXG5leHBvcnQgY29uc3QgdXVpZHY3ID0gKCk6IHN0cmluZyA9PiB1dWlkdjdvYmooKS50b1N0cmluZygpXG5cbi8qKiBHZW5lcmF0ZXMgYSBVVUlEdjcgb2JqZWN0LiAqL1xuY29uc3QgdXVpZHY3b2JqID0gKCk6IFVVSUQgPT4gKGRlZmF1bHRHZW5lcmF0b3IgfHwgKGRlZmF1bHRHZW5lcmF0b3IgPSBuZXcgVjdHZW5lcmF0b3IoKSkpLmdlbmVyYXRlKClcbiIsICJpbXBvcnQgeyBfZXh0ZW5kIH0gZnJvbSAnLi91dGlscydcbmltcG9ydCB7IFBlcnNpc3RlbnRTdG9yZSwgUHJvcGVydGllcyB9IGZyb20gJy4vdHlwZXMnXG5pbXBvcnQgeyBESVNUSU5DVF9JRCwgU0VTU0lPTl9JRCwgU0VTU0lPTl9SRUNPUkRJTkdfSVNfU0FNUExFRCB9IGZyb20gJy4vY29uc3RhbnRzJ1xuXG5pbXBvcnQgeyBfaXNOdWxsLCBfaXNVbmRlZmluZWQgfSBmcm9tICcuL3V0aWxzL3R5cGUtdXRpbHMnXG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tICcuL3V0aWxzL2xvZ2dlcidcbmltcG9ydCB7IHdpbmRvdywgZG9jdW1lbnQgfSBmcm9tICcuL3V0aWxzL2dsb2JhbHMnXG5pbXBvcnQgeyB1dWlkdjcgfSBmcm9tICcuL3V1aWR2NydcblxuY29uc3QgWTE5NzAgPSAnVGh1LCAwMSBKYW4gMTk3MCAwMDowMDowMCBHTVQnXG4vLyB3ZSBzdG9yZSB0aGUgZGlzY292ZXJlZCBzdWJkb21haW4gaW4gbWVtb3J5IGJlY2F1c2UgaXQgbWlnaHQgYmUgcmVhZCBtdWx0aXBsZSB0aW1lc1xubGV0IGZpcnN0Tm9uUHVibGljU3ViRG9tYWluID0gJydcblxuLy8gaGVscGVyIHRvIGFsbG93IHRlc3RzIHRvIGNsZWFyIHRoaXMgXCJjYWNoZVwiXG5leHBvcnQgY29uc3QgcmVzZXRTdWJEb21haW5DYWNoZSA9ICgpID0+IHtcbiAgICBmaXJzdE5vblB1YmxpY1N1YkRvbWFpbiA9ICcnXG59XG5cbi8qKlxuICogQnJvd3NlcnMgZG9uJ3Qgb2ZmZXIgYSB3YXkgdG8gY2hlY2sgaWYgc29tZXRoaW5nIGlzIGEgcHVibGljIHN1ZmZpeFxuICogZS5nLiBgLmNvbS5hdWAsIGAuaW9gLCBgLm9yZy51a2BcbiAqXG4gKiBCdXQgdGhleSBkbyByZWplY3QgY29va2llcyBzZXQgb24gcHVibGljIHN1ZmZpeGVzXG4gKiBTZXR0aW5nIGEgY29va2llIG9uIGAuY28udWtgIHdvdWxkIG1lYW4gaXQgd2FzIHNlbnQgZm9yIGV2ZXJ5IGAuY28udWtgIHNpdGUgdmlzaXRlZFxuICpcbiAqIFNvLCB3ZSBjYW4gdXNlIHRoaXMgdG8gY2hlY2sgaWYgYSBkb21haW4gaXMgYSBwdWJsaWMgc3VmZml4XG4gKiBieSB0cnlpbmcgdG8gc2V0IGEgY29va2llIG9uIGEgc3ViZG9tYWluIG9mIHRoZSBwcm92aWRlZCBob3N0bmFtZVxuICogdW50aWwgdGhlIGJyb3dzZXIgYWNjZXB0cyBpdFxuICpcbiAqIGluc3BpcmVkIGJ5IGh0dHBzOi8vZ2l0aHViLmNvbS9Bbmd1c0Z1L2Jyb3dzZXItcm9vdC1kb21haW5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNlZWtGaXJzdE5vblB1YmxpY1N1YkRvbWFpbihob3N0bmFtZTogc3RyaW5nLCBjb29raWVKYXIgPSBkb2N1bWVudCk6IHN0cmluZyB7XG4gICAgaWYgKGZpcnN0Tm9uUHVibGljU3ViRG9tYWluKSB7XG4gICAgICAgIHJldHVybiBmaXJzdE5vblB1YmxpY1N1YkRvbWFpblxuICAgIH1cblxuICAgIGlmICghY29va2llSmFyKSB7XG4gICAgICAgIHJldHVybiAnJ1xuICAgIH1cbiAgICBpZiAoWydsb2NhbGhvc3QnLCAnMTI3LjAuMC4xJ10uaW5jbHVkZXMoaG9zdG5hbWUpKSByZXR1cm4gJydcblxuICAgIGNvbnN0IGxpc3QgPSBob3N0bmFtZS5zcGxpdCgnLicpXG4gICAgbGV0IGxlbiA9IE1hdGgubWluKGxpc3QubGVuZ3RoLCA4KSAvLyBwYXJhbm9pYSAtIHdlIGtub3cgdGhpcyBudW1iZXIgc2hvdWxkIGJlIHNtYWxsXG4gICAgY29uc3Qga2V5ID0gJ2Rtbl9jaGtfJyArIHV1aWR2NygpXG4gICAgY29uc3QgUiA9IG5ldyBSZWdFeHAoJyhefDspXFxcXHMqJyArIGtleSArICc9MScpXG5cbiAgICB3aGlsZSAoIWZpcnN0Tm9uUHVibGljU3ViRG9tYWluICYmIGxlbi0tKSB7XG4gICAgICAgIGNvbnN0IGNhbmRpZGF0ZSA9IGxpc3Quc2xpY2UobGVuKS5qb2luKCcuJylcbiAgICAgICAgY29uc3QgY2FuZGlkYXRlQ29va2llVmFsdWUgPSBrZXkgKyAnPTE7ZG9tYWluPS4nICsgY2FuZGlkYXRlXG5cbiAgICAgICAgLy8gdHJ5IHRvIHNldCBjb29raWVcbiAgICAgICAgY29va2llSmFyLmNvb2tpZSA9IGNhbmRpZGF0ZUNvb2tpZVZhbHVlXG5cbiAgICAgICAgaWYgKFIudGVzdChjb29raWVKYXIuY29va2llKSkge1xuICAgICAgICAgICAgLy8gdGhlIGNvb2tpZSB3YXMgYWNjZXB0ZWQgYnkgdGhlIGJyb3dzZXIsIHJlbW92ZSB0aGUgdGVzdCBjb29raWVcbiAgICAgICAgICAgIGNvb2tpZUphci5jb29raWUgPSBjYW5kaWRhdGVDb29raWVWYWx1ZSArICc7ZXhwaXJlcz0nICsgWTE5NzBcbiAgICAgICAgICAgIGZpcnN0Tm9uUHVibGljU3ViRG9tYWluID0gY2FuZGlkYXRlXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZmlyc3ROb25QdWJsaWNTdWJEb21haW5cbn1cblxuY29uc3QgRE9NQUlOX01BVENIX1JFR0VYID0gL1thLXowLTldW2EtejAtOS1dK1xcLlthLXpdezIsfSQvaVxuY29uc3Qgb3JpZ2luYWxDb29raWVEb21haW5GbiA9IChob3N0bmFtZTogc3RyaW5nKTogc3RyaW5nID0+IHtcbiAgICBjb25zdCBtYXRjaGVzID0gaG9zdG5hbWUubWF0Y2goRE9NQUlOX01BVENIX1JFR0VYKVxuICAgIHJldHVybiBtYXRjaGVzID8gbWF0Y2hlc1swXSA6ICcnXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjaG9vc2VDb29raWVEb21haW4oaG9zdG5hbWU6IHN0cmluZywgY3Jvc3Nfc3ViZG9tYWluOiBib29sZWFuIHwgdW5kZWZpbmVkKTogc3RyaW5nIHtcbiAgICBpZiAoY3Jvc3Nfc3ViZG9tYWluKSB7XG4gICAgICAgIC8vIE5PVEU6IENvdWxkIHdlIHVzZSB0aGlzIGZvciBjcm9zcyBkb21haW4gdHJhY2tpbmc/XG4gICAgICAgIGxldCBtYXRjaGVkU3ViRG9tYWluID0gc2Vla0ZpcnN0Tm9uUHVibGljU3ViRG9tYWluKGhvc3RuYW1lKVxuXG4gICAgICAgIGlmICghbWF0Y2hlZFN1YkRvbWFpbikge1xuICAgICAgICAgICAgY29uc3Qgb3JpZ2luYWxNYXRjaCA9IG9yaWdpbmFsQ29va2llRG9tYWluRm4oaG9zdG5hbWUpXG4gICAgICAgICAgICBpZiAob3JpZ2luYWxNYXRjaCAhPT0gbWF0Y2hlZFN1YkRvbWFpbikge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5pbmZvKCdXYXJuaW5nOiBjb29raWUgc3ViZG9tYWluIGRpc2NvdmVyeSBtaXNtYXRjaCcsIG9yaWdpbmFsTWF0Y2gsIG1hdGNoZWRTdWJEb21haW4pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBtYXRjaGVkU3ViRG9tYWluID0gb3JpZ2luYWxNYXRjaFxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG1hdGNoZWRTdWJEb21haW4gPyAnOyBkb21haW49LicgKyBtYXRjaGVkU3ViRG9tYWluIDogJydcbiAgICB9XG4gICAgcmV0dXJuICcnXG59XG5cbi8vIE1ldGhvZHMgcGFydGlhbGx5IGJvcnJvd2VkIGZyb20gcXVpcmtzbW9kZS5vcmcvanMvY29va2llcy5odG1sXG5leHBvcnQgY29uc3QgY29va2llU3RvcmU6IFBlcnNpc3RlbnRTdG9yZSA9IHtcbiAgICBpc19zdXBwb3J0ZWQ6ICgpID0+ICEhZG9jdW1lbnQsXG5cbiAgICBlcnJvcjogZnVuY3Rpb24gKG1zZykge1xuICAgICAgICBsb2dnZXIuZXJyb3IoJ2Nvb2tpZVN0b3JlIGVycm9yOiAnICsgbXNnKVxuICAgIH0sXG5cbiAgICBnZXQ6IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIGlmICghZG9jdW1lbnQpIHtcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IG5hbWVFUSA9IG5hbWUgKyAnPSdcbiAgICAgICAgICAgIGNvbnN0IGNhID0gZG9jdW1lbnQuY29va2llLnNwbGl0KCc7JykuZmlsdGVyKCh4KSA9PiB4Lmxlbmd0aClcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2EubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBsZXQgYyA9IGNhW2ldXG4gICAgICAgICAgICAgICAgd2hpbGUgKGMuY2hhckF0KDApID09ICcgJykge1xuICAgICAgICAgICAgICAgICAgICBjID0gYy5zdWJzdHJpbmcoMSwgYy5sZW5ndGgpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChjLmluZGV4T2YobmFtZUVRKSA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGMuc3Vic3RyaW5nKG5hbWVFUS5sZW5ndGgsIGMubGVuZ3RoKSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycikge31cbiAgICAgICAgcmV0dXJuIG51bGxcbiAgICB9LFxuXG4gICAgcGFyc2U6IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIGxldCBjb29raWVcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvb2tpZSA9IEpTT04ucGFyc2UoY29va2llU3RvcmUuZ2V0KG5hbWUpKSB8fCB7fVxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIC8vIG5vb3BcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29va2llXG4gICAgfSxcblxuICAgIHNldDogZnVuY3Rpb24gKG5hbWUsIHZhbHVlLCBkYXlzLCBjcm9zc19zdWJkb21haW4sIGlzX3NlY3VyZSkge1xuICAgICAgICBpZiAoIWRvY3VtZW50KSB7XG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgbGV0IGV4cGlyZXMgPSAnJyxcbiAgICAgICAgICAgICAgICBzZWN1cmUgPSAnJ1xuXG4gICAgICAgICAgICBjb25zdCBjZG9tYWluID0gY2hvb3NlQ29va2llRG9tYWluKGRvY3VtZW50LmxvY2F0aW9uLmhvc3RuYW1lLCBjcm9zc19zdWJkb21haW4pXG5cbiAgICAgICAgICAgIGlmIChkYXlzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKClcbiAgICAgICAgICAgICAgICBkYXRlLnNldFRpbWUoZGF0ZS5nZXRUaW1lKCkgKyBkYXlzICogMjQgKiA2MCAqIDYwICogMTAwMClcbiAgICAgICAgICAgICAgICBleHBpcmVzID0gJzsgZXhwaXJlcz0nICsgZGF0ZS50b1VUQ1N0cmluZygpXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChpc19zZWN1cmUpIHtcbiAgICAgICAgICAgICAgICBzZWN1cmUgPSAnOyBzZWN1cmUnXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IG5ld19jb29raWVfdmFsID1cbiAgICAgICAgICAgICAgICBuYW1lICtcbiAgICAgICAgICAgICAgICAnPScgK1xuICAgICAgICAgICAgICAgIGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeSh2YWx1ZSkpICtcbiAgICAgICAgICAgICAgICBleHBpcmVzICtcbiAgICAgICAgICAgICAgICAnOyBTYW1lU2l0ZT1MYXg7IHBhdGg9LycgK1xuICAgICAgICAgICAgICAgIGNkb21haW4gK1xuICAgICAgICAgICAgICAgIHNlY3VyZVxuXG4gICAgICAgICAgICAvLyA0MDk2IGJ5dGVzIGlzIHRoZSBzaXplIGF0IHdoaWNoIHNvbWUgYnJvd3NlcnMgKGUuZy4gZmlyZWZveCkgd2lsbCBub3Qgc3RvcmUgYSBjb29raWUsIHdhcm4gc2xpZ2h0bHkgYmVmb3JlIHRoYXRcbiAgICAgICAgICAgIGlmIChuZXdfY29va2llX3ZhbC5sZW5ndGggPiA0MDk2ICogMC45KSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ2Nvb2tpZVN0b3JlIHdhcm5pbmc6IGxhcmdlIGNvb2tpZSwgbGVuPScgKyBuZXdfY29va2llX3ZhbC5sZW5ndGgpXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGRvY3VtZW50LmNvb2tpZSA9IG5ld19jb29raWVfdmFsXG4gICAgICAgICAgICByZXR1cm4gbmV3X2Nvb2tpZV92YWxcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICByZW1vdmU6IGZ1bmN0aW9uIChuYW1lLCBjcm9zc19zdWJkb21haW4pIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvb2tpZVN0b3JlLnNldChuYW1lLCAnJywgLTEsIGNyb3NzX3N1YmRvbWFpbilcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgIH0sXG59XG5cbmxldCBfbG9jYWxTdG9yYWdlX3N1cHBvcnRlZDogYm9vbGVhbiB8IG51bGwgPSBudWxsXG5cbmV4cG9ydCBjb25zdCBsb2NhbFN0b3JlOiBQZXJzaXN0ZW50U3RvcmUgPSB7XG4gICAgaXNfc3VwcG9ydGVkOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghX2lzTnVsbChfbG9jYWxTdG9yYWdlX3N1cHBvcnRlZCkpIHtcbiAgICAgICAgICAgIHJldHVybiBfbG9jYWxTdG9yYWdlX3N1cHBvcnRlZFxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHN1cHBvcnRlZCA9IHRydWVcbiAgICAgICAgaWYgKCFfaXNVbmRlZmluZWQod2luZG93KSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSAnX19tcGxzc3VwcG9ydF9fJyxcbiAgICAgICAgICAgICAgICAgICAgdmFsID0gJ3h5eidcbiAgICAgICAgICAgICAgICBsb2NhbFN0b3JlLnNldChrZXksIHZhbClcbiAgICAgICAgICAgICAgICBpZiAobG9jYWxTdG9yZS5nZXQoa2V5KSAhPT0gJ1wieHl6XCInKSB7XG4gICAgICAgICAgICAgICAgICAgIHN1cHBvcnRlZCA9IGZhbHNlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmUucmVtb3ZlKGtleSlcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIHN1cHBvcnRlZCA9IGZhbHNlXG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzdXBwb3J0ZWQgPSBmYWxzZVxuICAgICAgICB9XG4gICAgICAgIGlmICghc3VwcG9ydGVkKSB7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ2xvY2FsU3RvcmFnZSB1bnN1cHBvcnRlZDsgZmFsbGluZyBiYWNrIHRvIGNvb2tpZSBzdG9yZScpXG4gICAgICAgIH1cblxuICAgICAgICBfbG9jYWxTdG9yYWdlX3N1cHBvcnRlZCA9IHN1cHBvcnRlZFxuICAgICAgICByZXR1cm4gc3VwcG9ydGVkXG4gICAgfSxcblxuICAgIGVycm9yOiBmdW5jdGlvbiAobXNnKSB7XG4gICAgICAgIGxvZ2dlci5lcnJvcignbG9jYWxTdG9yYWdlIGVycm9yOiAnICsgbXNnKVxuICAgIH0sXG5cbiAgICBnZXQ6IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gd2luZG93Py5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShuYW1lKVxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIGxvY2FsU3RvcmUuZXJyb3IoZXJyKVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsXG4gICAgfSxcblxuICAgIHBhcnNlOiBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UobG9jYWxTdG9yZS5nZXQobmFtZSkpIHx8IHt9XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgLy8gbm9vcFxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsXG4gICAgfSxcblxuICAgIHNldDogZnVuY3Rpb24gKG5hbWUsIHZhbHVlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB3aW5kb3c/LmxvY2FsU3RvcmFnZS5zZXRJdGVtKG5hbWUsIEpTT04uc3RyaW5naWZ5KHZhbHVlKSlcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBsb2NhbFN0b3JlLmVycm9yKGVycilcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICByZW1vdmU6IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB3aW5kb3c/LmxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKG5hbWUpXG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgbG9jYWxTdG9yZS5lcnJvcihlcnIpXG4gICAgICAgIH1cbiAgICB9LFxufVxuXG4vLyBVc2UgbG9jYWxzdG9yYWdlIGZvciBtb3N0IGRhdGEgYnV0IHN0aWxsIHVzZSBjb29raWUgZm9yIENPT0tJRV9QRVJTSVNURURfUFJPUEVSVElFU1xuLy8gVGhpcyBzb2x2ZXMgaXNzdWVzIHdpdGggY29va2llcyBoYXZpbmcgdG9vIG11Y2ggZGF0YSBpbiB0aGVtIGNhdXNpbmcgaGVhZGVycyB0b28gbGFyZ2Vcbi8vIEFsc28gbWFrZXMgc3VyZSB3ZSBkb24ndCBoYXZlIHRvIHNlbmQgYSB0b24gb2YgZGF0YSB0byB0aGUgc2VydmVyXG5jb25zdCBDT09LSUVfUEVSU0lTVEVEX1BST1BFUlRJRVMgPSBbRElTVElOQ1RfSUQsIFNFU1NJT05fSUQsIFNFU1NJT05fUkVDT1JESU5HX0lTX1NBTVBMRURdXG5cbmV4cG9ydCBjb25zdCBsb2NhbFBsdXNDb29raWVTdG9yZTogUGVyc2lzdGVudFN0b3JlID0ge1xuICAgIC4uLmxvY2FsU3RvcmUsXG4gICAgcGFyc2U6IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBsZXQgZXh0ZW5kOiBQcm9wZXJ0aWVzID0ge31cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgLy8gU2VlIGlmIHRoZXJlJ3MgYSBjb29raWUgc3RvcmVkIHdpdGggZGF0YS5cbiAgICAgICAgICAgICAgICBleHRlbmQgPSBjb29raWVTdG9yZS5wYXJzZShuYW1lKSB8fCB7fVxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7fVxuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBfZXh0ZW5kKGV4dGVuZCwgSlNPTi5wYXJzZShsb2NhbFN0b3JlLmdldChuYW1lKSB8fCAne30nKSlcbiAgICAgICAgICAgIGxvY2FsU3RvcmUuc2V0KG5hbWUsIHZhbHVlKVxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlXG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgLy8gbm9vcFxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsXG4gICAgfSxcblxuICAgIHNldDogZnVuY3Rpb24gKG5hbWUsIHZhbHVlLCBkYXlzLCBjcm9zc19zdWJkb21haW4sIGlzX3NlY3VyZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgbG9jYWxTdG9yZS5zZXQobmFtZSwgdmFsdWUpXG4gICAgICAgICAgICBjb25zdCBjb29raWVQZXJzaXN0ZWRQcm9wZXJ0aWVzOiBSZWNvcmQ8c3RyaW5nLCBhbnk+ID0ge31cbiAgICAgICAgICAgIENPT0tJRV9QRVJTSVNURURfUFJPUEVSVElFUy5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodmFsdWVba2V5XSkge1xuICAgICAgICAgICAgICAgICAgICBjb29raWVQZXJzaXN0ZWRQcm9wZXJ0aWVzW2tleV0gPSB2YWx1ZVtrZXldXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKGNvb2tpZVBlcnNpc3RlZFByb3BlcnRpZXMpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGNvb2tpZVN0b3JlLnNldChuYW1lLCBjb29raWVQZXJzaXN0ZWRQcm9wZXJ0aWVzLCBkYXlzLCBjcm9zc19zdWJkb21haW4sIGlzX3NlY3VyZSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBsb2NhbFN0b3JlLmVycm9yKGVycilcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICByZW1vdmU6IGZ1bmN0aW9uIChuYW1lLCBjcm9zc19zdWJkb21haW4pIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHdpbmRvdz8ubG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0obmFtZSlcbiAgICAgICAgICAgIGNvb2tpZVN0b3JlLnJlbW92ZShuYW1lLCBjcm9zc19zdWJkb21haW4pXG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgbG9jYWxTdG9yZS5lcnJvcihlcnIpXG4gICAgICAgIH1cbiAgICB9LFxufVxuXG5jb25zdCBtZW1vcnlTdG9yYWdlOiBQcm9wZXJ0aWVzID0ge31cblxuLy8gU3RvcmFnZSB0aGF0IG9ubHkgbGFzdHMgdGhlIGxlbmd0aCBvZiB0aGUgcGFnZXZpZXcgaWYgd2UgZG9uJ3Qgd2FudCB0byB1c2UgY29va2llc1xuZXhwb3J0IGNvbnN0IG1lbW9yeVN0b3JlOiBQZXJzaXN0ZW50U3RvcmUgPSB7XG4gICAgaXNfc3VwcG9ydGVkOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgfSxcblxuICAgIGVycm9yOiBmdW5jdGlvbiAobXNnKSB7XG4gICAgICAgIGxvZ2dlci5lcnJvcignbWVtb3J5U3RvcmFnZSBlcnJvcjogJyArIG1zZylcbiAgICB9LFxuXG4gICAgZ2V0OiBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICByZXR1cm4gbWVtb3J5U3RvcmFnZVtuYW1lXSB8fCBudWxsXG4gICAgfSxcblxuICAgIHBhcnNlOiBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICByZXR1cm4gbWVtb3J5U3RvcmFnZVtuYW1lXSB8fCBudWxsXG4gICAgfSxcblxuICAgIHNldDogZnVuY3Rpb24gKG5hbWUsIHZhbHVlKSB7XG4gICAgICAgIG1lbW9yeVN0b3JhZ2VbbmFtZV0gPSB2YWx1ZVxuICAgIH0sXG5cbiAgICByZW1vdmU6IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIGRlbGV0ZSBtZW1vcnlTdG9yYWdlW25hbWVdXG4gICAgfSxcbn1cblxubGV0IHNlc3Npb25TdG9yYWdlU3VwcG9ydGVkOiBib29sZWFuIHwgbnVsbCA9IG51bGxcbmV4cG9ydCBjb25zdCByZXNldFNlc3Npb25TdG9yYWdlU3VwcG9ydGVkID0gKCkgPT4ge1xuICAgIHNlc3Npb25TdG9yYWdlU3VwcG9ydGVkID0gbnVsbFxufVxuLy8gU3RvcmFnZSB0aGF0IG9ubHkgbGFzdHMgdGhlIGxlbmd0aCBvZiBhIHRhYi93aW5kb3cuIFN1cnZpdmVzIHBhZ2UgcmVmcmVzaGVzXG5leHBvcnQgY29uc3Qgc2Vzc2lvblN0b3JlOiBQZXJzaXN0ZW50U3RvcmUgPSB7XG4gICAgaXNfc3VwcG9ydGVkOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghX2lzTnVsbChzZXNzaW9uU3RvcmFnZVN1cHBvcnRlZCkpIHtcbiAgICAgICAgICAgIHJldHVybiBzZXNzaW9uU3RvcmFnZVN1cHBvcnRlZFxuICAgICAgICB9XG4gICAgICAgIHNlc3Npb25TdG9yYWdlU3VwcG9ydGVkID0gdHJ1ZVxuICAgICAgICBpZiAoIV9pc1VuZGVmaW5lZCh3aW5kb3cpKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9ICdfX3N1cHBvcnRfXycsXG4gICAgICAgICAgICAgICAgICAgIHZhbCA9ICd4eXonXG4gICAgICAgICAgICAgICAgc2Vzc2lvblN0b3JlLnNldChrZXksIHZhbClcbiAgICAgICAgICAgICAgICBpZiAoc2Vzc2lvblN0b3JlLmdldChrZXkpICE9PSAnXCJ4eXpcIicpIHtcbiAgICAgICAgICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2VTdXBwb3J0ZWQgPSBmYWxzZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzZXNzaW9uU3RvcmUucmVtb3ZlKGtleSlcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlU3VwcG9ydGVkID0gZmFsc2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlU3VwcG9ydGVkID0gZmFsc2VcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2Vzc2lvblN0b3JhZ2VTdXBwb3J0ZWRcbiAgICB9LFxuXG4gICAgZXJyb3I6IGZ1bmN0aW9uIChtc2cpIHtcbiAgICAgICAgbG9nZ2VyLmVycm9yKCdzZXNzaW9uU3RvcmFnZSBlcnJvcjogJywgbXNnKVxuICAgIH0sXG5cbiAgICBnZXQ6IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gd2luZG93Py5zZXNzaW9uU3RvcmFnZS5nZXRJdGVtKG5hbWUpXG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgc2Vzc2lvblN0b3JlLmVycm9yKGVycilcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbFxuICAgIH0sXG5cbiAgICBwYXJzZTogZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKHNlc3Npb25TdG9yZS5nZXQobmFtZSkpIHx8IG51bGxcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAvLyBub29wXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGxcbiAgICB9LFxuXG4gICAgc2V0OiBmdW5jdGlvbiAobmFtZSwgdmFsdWUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHdpbmRvdz8uc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShuYW1lLCBKU09OLnN0cmluZ2lmeSh2YWx1ZSkpXG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgc2Vzc2lvblN0b3JlLmVycm9yKGVycilcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICByZW1vdmU6IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB3aW5kb3c/LnNlc3Npb25TdG9yYWdlLnJlbW92ZUl0ZW0obmFtZSlcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBzZXNzaW9uU3RvcmUuZXJyb3IoZXJyKVxuICAgICAgICB9XG4gICAgfSxcbn1cbiIsICJpbXBvcnQgeyBfZWFjaCwgX2lzVmFsaWRSZWdleCB9IGZyb20gJy4vJ1xuXG5pbXBvcnQgeyBfaXNBcnJheSwgX2lzRmlsZSwgX2lzVW5kZWZpbmVkIH0gZnJvbSAnLi90eXBlLXV0aWxzJ1xuaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSAnLi9sb2dnZXInXG5pbXBvcnQgeyBkb2N1bWVudCB9IGZyb20gJy4vZ2xvYmFscydcblxuY29uc3QgbG9jYWxEb21haW5zID0gWydsb2NhbGhvc3QnLCAnMTI3LjAuMC4xJ11cblxuLyoqXG4gKiBJRTExIGRvZXNuJ3Qgc3VwcG9ydCBgbmV3IFVSTGBcbiAqIHNvIHdlIGNhbiBjcmVhdGUgYW4gYW5jaG9yIGVsZW1lbnQgYW5kIHVzZSB0aGF0IHRvIHBhcnNlIHRoZSBVUkxcbiAqIHRoZXJlJ3MgYSBsb3Qgb2Ygb3ZlcmxhcCBiZXR3ZWVuIEhUTUxIeXBlcmxpbmtFbGVtZW50VXRpbHMgYW5kIFVSTFxuICogbWVhbmluZyB1c2VmdWwgcHJvcGVydGllcyBsaWtlIGBwYXRobmFtZWAgYXJlIGF2YWlsYWJsZSBvbiBib3RoXG4gKi9cbmV4cG9ydCBjb25zdCBjb252ZXJ0VG9VUkwgPSAodXJsOiBzdHJpbmcpOiBIVE1MQW5jaG9yRWxlbWVudCB8IG51bGwgPT4ge1xuICAgIGNvbnN0IGxvY2F0aW9uID0gZG9jdW1lbnQ/LmNyZWF0ZUVsZW1lbnQoJ2EnKVxuICAgIGlmIChfaXNVbmRlZmluZWQobG9jYXRpb24pKSB7XG4gICAgICAgIHJldHVybiBudWxsXG4gICAgfVxuXG4gICAgbG9jYXRpb24uaHJlZiA9IHVybFxuICAgIHJldHVybiBsb2NhdGlvblxufVxuXG5leHBvcnQgY29uc3QgX2lzVXJsTWF0Y2hpbmdSZWdleCA9IGZ1bmN0aW9uICh1cmw6IHN0cmluZywgcGF0dGVybjogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgaWYgKCFfaXNWYWxpZFJlZ2V4KHBhdHRlcm4pKSByZXR1cm4gZmFsc2VcbiAgICByZXR1cm4gbmV3IFJlZ0V4cChwYXR0ZXJuKS50ZXN0KHVybClcbn1cblxuZXhwb3J0IGNvbnN0IF9mb3JtRGF0YVRvUXVlcnkgPSBmdW5jdGlvbiAoZm9ybWRhdGE6IFJlY29yZDxzdHJpbmcsIGFueT4gfCBGb3JtRGF0YSwgYXJnX3NlcGFyYXRvciA9ICcmJyk6IHN0cmluZyB7XG4gICAgbGV0IHVzZV92YWw6IHN0cmluZ1xuICAgIGxldCB1c2Vfa2V5OiBzdHJpbmdcbiAgICBjb25zdCB0cGhfYXJyOiBzdHJpbmdbXSA9IFtdXG5cbiAgICBfZWFjaChmb3JtZGF0YSwgZnVuY3Rpb24gKHZhbDogRmlsZSB8IHN0cmluZyB8IHVuZGVmaW5lZCwga2V5OiBzdHJpbmcgfCB1bmRlZmluZWQpIHtcbiAgICAgICAgLy8gdGhlIGtleSBtaWdodCBiZSBsaXRlcmFsbHkgdGhlIHN0cmluZyB1bmRlZmluZWQgZm9yIGUuZy4gaWYge3VuZGVmaW5lZDogJ3NvbWV0aGluZyd9XG4gICAgICAgIGlmIChfaXNVbmRlZmluZWQodmFsKSB8fCBfaXNVbmRlZmluZWQoa2V5KSB8fCBrZXkgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIHVzZV92YWwgPSBlbmNvZGVVUklDb21wb25lbnQoX2lzRmlsZSh2YWwpID8gdmFsLm5hbWUgOiB2YWwudG9TdHJpbmcoKSlcbiAgICAgICAgdXNlX2tleSA9IGVuY29kZVVSSUNvbXBvbmVudChrZXkpXG4gICAgICAgIHRwaF9hcnJbdHBoX2Fyci5sZW5ndGhdID0gdXNlX2tleSArICc9JyArIHVzZV92YWxcbiAgICB9KVxuXG4gICAgcmV0dXJuIHRwaF9hcnIuam9pbihhcmdfc2VwYXJhdG9yKVxufVxuXG5leHBvcnQgY29uc3QgX2dldFF1ZXJ5UGFyYW0gPSBmdW5jdGlvbiAodXJsOiBzdHJpbmcsIHBhcmFtOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IHdpdGhvdXRIYXNoOiBzdHJpbmcgPSB1cmwuc3BsaXQoJyMnKVswXSB8fCAnJ1xuICAgIGNvbnN0IHF1ZXJ5UGFyYW1zOiBzdHJpbmcgPSB3aXRob3V0SGFzaC5zcGxpdCgnPycpWzFdIHx8ICcnXG5cbiAgICBjb25zdCBxdWVyeVBhcnRzID0gcXVlcnlQYXJhbXMuc3BsaXQoJyYnKVxuICAgIGxldCBrZXlWYWx1ZVBhaXJcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcXVlcnlQYXJ0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBwYXJ0cyA9IHF1ZXJ5UGFydHNbaV0uc3BsaXQoJz0nKVxuICAgICAgICBpZiAocGFydHNbMF0gPT09IHBhcmFtKSB7XG4gICAgICAgICAgICBrZXlWYWx1ZVBhaXIgPSBwYXJ0c1xuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmICghX2lzQXJyYXkoa2V5VmFsdWVQYWlyKSB8fCBrZXlWYWx1ZVBhaXIubGVuZ3RoIDwgMikge1xuICAgICAgICByZXR1cm4gJydcbiAgICB9IGVsc2Uge1xuICAgICAgICBsZXQgcmVzdWx0ID0ga2V5VmFsdWVQYWlyWzFdXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXN1bHQgPSBkZWNvZGVVUklDb21wb25lbnQocmVzdWx0KVxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcignU2tpcHBpbmcgZGVjb2RpbmcgZm9yIG1hbGZvcm1lZCBxdWVyeSBwYXJhbTogJyArIHJlc3VsdClcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0LnJlcGxhY2UoL1xcKy9nLCAnICcpXG4gICAgfVxufVxuXG5leHBvcnQgY29uc3QgX2dldEhhc2hQYXJhbSA9IGZ1bmN0aW9uIChoYXNoOiBzdHJpbmcsIHBhcmFtOiBzdHJpbmcpOiBzdHJpbmcgfCBudWxsIHtcbiAgICBjb25zdCBtYXRjaGVzID0gaGFzaC5tYXRjaChuZXcgUmVnRXhwKHBhcmFtICsgJz0oW14mXSopJykpXG4gICAgcmV0dXJuIG1hdGNoZXMgPyBtYXRjaGVzWzFdIDogbnVsbFxufVxuXG5leHBvcnQgY29uc3QgaXNMb2NhbGhvc3QgPSAoKTogYm9vbGVhbiA9PiB7XG4gICAgcmV0dXJuIGxvY2FsRG9tYWlucy5pbmNsdWRlcyhsb2NhdGlvbi5ob3N0bmFtZSlcbn1cbiIsICJpbXBvcnQgeyBfaW5jbHVkZXMgfSBmcm9tICcuL2luZGV4J1xuaW1wb3J0IHsgX2lzRnVuY3Rpb24sIF9pc1VuZGVmaW5lZCB9IGZyb20gJy4vdHlwZS11dGlscydcblxuLyoqXG4gKiB0aGlzIGRldmljZSBkZXRlY3Rpb24gY29kZSBpcyAoYXQgdGltZSBvZiB3cml0aW5nKSBhYm91dCAzJSBvZiB0aGUgc2l6ZSBvZiB0aGUgZW50aXJlIGxpYnJhcnlcbiAqIHRoaXMgaXMgbW9zdGx5IGJlY2F1c2UgdGhlIGlkZW50aWZpZXJzIHVzZXIgaW4gcmVnZXhlcyBhbmQgcmVzdWx0cyBjYW4ndCBiZSBtaW5pZmllZCBhd2F5IHNpbmNlXG4gKiB0aGV5IGhhdmUgbWVhbmluZ1xuICpcbiAqIHNvLCB0aGVyZSBhcmUgc29tZSBwcmUtdWdsaWZ5aW5nIGNob2ljZXMgaW4gdGhlIGNvZGUgdG8gaGVscCByZWR1Y2UgdGhlIHNpemVcbiAqIGUuZy4gbWFueSByZXBlYXRlZCBzdHJpbmdzIGFyZSBzdG9yZWQgYXMgdmFyaWFibGVzIGFuZCB0aGVuIG9sZC1mYXNoaW9uZWQgY29uY2F0ZW5hdGVkIHRvZ2V0aGVyXG4gKlxuICogVEw7RFIgaGVyZSBiZSBkcmFnb25zXG4gKi9cbmNvbnN0IEZBQ0VCT09LID0gJ0ZhY2Vib29rJ1xuY29uc3QgTU9CSUxFID0gJ01vYmlsZSdcbmNvbnN0IElPUyA9ICdpT1MnXG5jb25zdCBBTkRST0lEID0gJ0FuZHJvaWQnXG5jb25zdCBUQUJMRVQgPSAnVGFibGV0J1xuY29uc3QgQU5EUk9JRF9UQUJMRVQgPSBBTkRST0lEICsgJyAnICsgVEFCTEVUXG5jb25zdCBJUEFEID0gJ2lQYWQnXG5jb25zdCBBUFBMRSA9ICdBcHBsZSdcbmNvbnN0IEFQUExFX1dBVENIID0gQVBQTEUgKyAnIFdhdGNoJ1xuY29uc3QgU0FGQVJJID0gJ1NhZmFyaSdcbmNvbnN0IEJMQUNLQkVSUlkgPSAnQmxhY2tCZXJyeSdcbmNvbnN0IFNBTVNVTkcgPSAnU2Ftc3VuZydcbmNvbnN0IFNBTVNVTkdfQlJPV1NFUiA9IFNBTVNVTkcgKyAnQnJvd3NlcidcbmNvbnN0IFNBTVNVTkdfSU5URVJORVQgPSBTQU1TVU5HICsgJyBJbnRlcm5ldCdcbmNvbnN0IENIUk9NRSA9ICdDaHJvbWUnXG5jb25zdCBDSFJPTUVfT1MgPSBDSFJPTUUgKyAnIE9TJ1xuY29uc3QgQ0hST01FX0lPUyA9IENIUk9NRSArICcgJyArIElPU1xuY29uc3QgSU5URVJORVRfRVhQTE9SRVIgPSAnSW50ZXJuZXQgRXhwbG9yZXInXG5jb25zdCBJTlRFUk5FVF9FWFBMT1JFUl9NT0JJTEUgPSBJTlRFUk5FVF9FWFBMT1JFUiArICcgJyArIE1PQklMRVxuY29uc3QgT1BFUkEgPSAnT3BlcmEnXG5jb25zdCBPUEVSQV9NSU5JID0gT1BFUkEgKyAnIE1pbmknXG5jb25zdCBFREdFID0gJ0VkZ2UnXG5jb25zdCBNSUNST1NPRlRfRURHRSA9ICdNaWNyb3NvZnQgJyArIEVER0VcbmNvbnN0IEZJUkVGT1ggPSAnRmlyZWZveCdcbmNvbnN0IEZJUkVGT1hfSU9TID0gRklSRUZPWCArICcgJyArIElPU1xuY29uc3QgTklOVEVORE8gPSAnTmludGVuZG8nXG5jb25zdCBQTEFZU1RBVElPTiA9ICdQbGF5U3RhdGlvbidcbmNvbnN0IFhCT1ggPSAnWGJveCdcbmNvbnN0IEFORFJPSURfTU9CSUxFID0gQU5EUk9JRCArICcgJyArIE1PQklMRVxuY29uc3QgTU9CSUxFX1NBRkFSSSA9IE1PQklMRSArICcgJyArIFNBRkFSSVxuY29uc3QgV0lORE9XUyA9ICdXaW5kb3dzJ1xuY29uc3QgV0lORE9XU19QSE9ORSA9IFdJTkRPV1MgKyAnIFBob25lJ1xuY29uc3QgTk9LSUEgPSAnTm9raWEnXG5jb25zdCBPVVlBID0gJ091eWEnXG5jb25zdCBHRU5FUklDID0gJ0dlbmVyaWMnXG5jb25zdCBHRU5FUklDX01PQklMRSA9IEdFTkVSSUMgKyAnICcgKyBNT0JJTEUudG9Mb3dlckNhc2UoKVxuY29uc3QgR0VORVJJQ19UQUJMRVQgPSBHRU5FUklDICsgJyAnICsgVEFCTEVULnRvTG93ZXJDYXNlKClcbmNvbnN0IEtPTlFVRVJPUiA9ICdLb25xdWVyb3InXG5cbmNvbnN0IEJST1dTRVJfVkVSU0lPTl9SRUdFWF9TVUZGSVggPSAnKFxcXFxkKyhcXFxcLlxcXFxkKyk/KSdcbmNvbnN0IERFRkFVTFRfQlJPV1NFUl9WRVJTSU9OX1JFR0VYID0gbmV3IFJlZ0V4cCgnVmVyc2lvbi8nICsgQlJPV1NFUl9WRVJTSU9OX1JFR0VYX1NVRkZJWClcblxuY29uc3QgWEJPWF9SRUdFWCA9IG5ldyBSZWdFeHAoWEJPWCwgJ2knKVxuY29uc3QgUExBWVNUQVRJT05fUkVHRVggPSBuZXcgUmVnRXhwKFBMQVlTVEFUSU9OICsgJyBcXFxcdysnLCAnaScpXG5jb25zdCBOSU5URU5ET19SRUdFWCA9IG5ldyBSZWdFeHAoTklOVEVORE8gKyAnIFxcXFx3KycsICdpJylcbmNvbnN0IEJMQUNLQkVSUllfUkVHRVggPSBuZXcgUmVnRXhwKEJMQUNLQkVSUlkgKyAnfFBsYXlCb29rfEJCMTAnLCAnaScpXG5cbmNvbnN0IHdpbmRvd3NWZXJzaW9uTWFwOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICAgICdOVDMuNTEnOiAnTlQgMy4xMScsXG4gICAgJ05UNC4wJzogJ05UIDQuMCcsXG4gICAgJzUuMCc6ICcyMDAwJyxcbiAgICAnNS4xJzogJ1hQJyxcbiAgICAnNS4yJzogJ1hQJyxcbiAgICAnNi4wJzogJ1Zpc3RhJyxcbiAgICAnNi4xJzogJzcnLFxuICAgICc2LjInOiAnOCcsXG4gICAgJzYuMyc6ICc4LjEnLFxuICAgICc2LjQnOiAnMTAnLFxuICAgICcxMC4wJzogJzEwJyxcbn1cblxuLyoqXG4gKiBTYWZhcmkgZGV0ZWN0aW9uIHR1cm5zIG91dCB0byBiZSBjb21wbGljYXRlZC4gRm9yIGUuZy4gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzI5Njk2NTA5XG4gKiBXZSBjYW4gYmUgc2xpZ2h0bHkgbG9vc2UgYmVjYXVzZSBzb21lIG9wdGlvbnMgaGF2ZSBiZWVuIHJ1bGVkIG91dCAoZS5nLiBmaXJlZm94IG9uIGlPUylcbiAqIGJlZm9yZSB0aGlzIGNoZWNrIGlzIG1hZGVcbiAqL1xuZnVuY3Rpb24gaXNTYWZhcmkodXNlckFnZW50OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICByZXR1cm4gX2luY2x1ZGVzKHVzZXJBZ2VudCwgU0FGQVJJKSAmJiAhX2luY2x1ZGVzKHVzZXJBZ2VudCwgQ0hST01FKSAmJiAhX2luY2x1ZGVzKHVzZXJBZ2VudCwgQU5EUk9JRClcbn1cblxuY29uc3Qgc2FmYXJpQ2hlY2sgPSAodWE6IHN0cmluZywgdmVuZG9yPzogc3RyaW5nKSA9PiAodmVuZG9yICYmIF9pbmNsdWRlcyh2ZW5kb3IsIEFQUExFKSkgfHwgaXNTYWZhcmkodWEpXG5cbi8qKlxuICogVGhpcyBmdW5jdGlvbiBkZXRlY3RzIHdoaWNoIGJyb3dzZXIgaXMgcnVubmluZyB0aGlzIHNjcmlwdC5cbiAqIFRoZSBvcmRlciBvZiB0aGUgY2hlY2tzIGFyZSBpbXBvcnRhbnQgc2luY2UgbWFueSB1c2VyIGFnZW50c1xuICogaW5jbHVkZSBrZXl3b3JkcyB1c2VkIGluIGxhdGVyIGNoZWNrcy5cbiAqL1xuZXhwb3J0IGNvbnN0IGRldGVjdEJyb3dzZXIgPSBmdW5jdGlvbiAodXNlcl9hZ2VudDogc3RyaW5nLCB2ZW5kb3I6IHN0cmluZyB8IHVuZGVmaW5lZCwgb3BlcmE/OiBhbnkpOiBzdHJpbmcge1xuICAgIGlmIChvcGVyYSkge1xuICAgICAgICByZXR1cm4gT1BFUkFcbiAgICB9XG4gICAgdmVuZG9yID0gdmVuZG9yIHx8ICcnIC8vIHZlbmRvciBpcyB1bmRlZmluZWQgZm9yIGF0IGxlYXN0IElFOVxuXG4gICAgaWYgKF9pbmNsdWRlcyh1c2VyX2FnZW50LCAnIE9QUi8nKSAmJiBfaW5jbHVkZXModXNlcl9hZ2VudCwgJ01pbmknKSkge1xuICAgICAgICByZXR1cm4gT1BFUkFfTUlOSVxuICAgIH0gZWxzZSBpZiAoX2luY2x1ZGVzKHVzZXJfYWdlbnQsICcgT1BSLycpKSB7XG4gICAgICAgIHJldHVybiBPUEVSQVxuICAgIH0gZWxzZSBpZiAoQkxBQ0tCRVJSWV9SRUdFWC50ZXN0KHVzZXJfYWdlbnQpKSB7XG4gICAgICAgIHJldHVybiBCTEFDS0JFUlJZXG4gICAgfSBlbHNlIGlmIChfaW5jbHVkZXModXNlcl9hZ2VudCwgJ0lFJyArIE1PQklMRSkgfHwgX2luY2x1ZGVzKHVzZXJfYWdlbnQsICdXUERlc2t0b3AnKSkge1xuICAgICAgICByZXR1cm4gSU5URVJORVRfRVhQTE9SRVJfTU9CSUxFXG4gICAgfVxuICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLnNhbXN1bmcuY29tL2ludGVybmV0L3VzZXItYWdlbnQtc3RyaW5nLWZvcm1hdFxuICAgIGVsc2UgaWYgKF9pbmNsdWRlcyh1c2VyX2FnZW50LCBTQU1TVU5HX0JST1dTRVIpKSB7XG4gICAgICAgIHJldHVybiBTQU1TVU5HX0lOVEVSTkVUXG4gICAgfSBlbHNlIGlmIChfaW5jbHVkZXModXNlcl9hZ2VudCwgRURHRSkgfHwgX2luY2x1ZGVzKHVzZXJfYWdlbnQsICdFZGcvJykpIHtcbiAgICAgICAgcmV0dXJuIE1JQ1JPU09GVF9FREdFXG4gICAgfSBlbHNlIGlmIChfaW5jbHVkZXModXNlcl9hZ2VudCwgJ0ZCSU9TJykpIHtcbiAgICAgICAgcmV0dXJuIEZBQ0VCT09LICsgJyAnICsgTU9CSUxFXG4gICAgfSBlbHNlIGlmIChfaW5jbHVkZXModXNlcl9hZ2VudCwgQ0hST01FKSkge1xuICAgICAgICByZXR1cm4gQ0hST01FXG4gICAgfSBlbHNlIGlmIChfaW5jbHVkZXModXNlcl9hZ2VudCwgJ0NyaU9TJykpIHtcbiAgICAgICAgcmV0dXJuIENIUk9NRV9JT1NcbiAgICB9IGVsc2UgaWYgKF9pbmNsdWRlcyh1c2VyX2FnZW50LCAnVUNXRUInKSB8fCBfaW5jbHVkZXModXNlcl9hZ2VudCwgJ1VDQnJvd3NlcicpKSB7XG4gICAgICAgIHJldHVybiAnVUMgQnJvd3NlcidcbiAgICB9IGVsc2UgaWYgKF9pbmNsdWRlcyh1c2VyX2FnZW50LCAnRnhpT1MnKSkge1xuICAgICAgICByZXR1cm4gRklSRUZPWF9JT1NcbiAgICB9IGVsc2UgaWYgKF9pbmNsdWRlcyh1c2VyX2FnZW50LCBBTkRST0lEKSkge1xuICAgICAgICByZXR1cm4gQU5EUk9JRF9NT0JJTEVcbiAgICB9IGVsc2UgaWYgKF9pbmNsdWRlcyh1c2VyX2FnZW50LnRvTG93ZXJDYXNlKCksIEtPTlFVRVJPUi50b0xvd2VyQ2FzZSgpKSkge1xuICAgICAgICByZXR1cm4gS09OUVVFUk9SXG4gICAgfSBlbHNlIGlmIChzYWZhcmlDaGVjayh1c2VyX2FnZW50LCB2ZW5kb3IpKSB7XG4gICAgICAgIHJldHVybiBfaW5jbHVkZXModXNlcl9hZ2VudCwgTU9CSUxFKSA/IE1PQklMRV9TQUZBUkkgOiBTQUZBUklcbiAgICB9IGVsc2UgaWYgKF9pbmNsdWRlcyh1c2VyX2FnZW50LCBGSVJFRk9YKSkge1xuICAgICAgICByZXR1cm4gRklSRUZPWFxuICAgIH0gZWxzZSBpZiAoX2luY2x1ZGVzKHVzZXJfYWdlbnQsICdNU0lFJykgfHwgX2luY2x1ZGVzKHVzZXJfYWdlbnQsICdUcmlkZW50LycpKSB7XG4gICAgICAgIHJldHVybiBJTlRFUk5FVF9FWFBMT1JFUlxuICAgIH0gZWxzZSBpZiAoX2luY2x1ZGVzKHVzZXJfYWdlbnQsICdHZWNrbycpKSB7XG4gICAgICAgIHJldHVybiBGSVJFRk9YXG4gICAgfVxuXG4gICAgcmV0dXJuICcnXG59XG5cbmNvbnN0IHZlcnNpb25SZWdleGVzOiBSZWNvcmQ8c3RyaW5nLCBSZWdFeHBbXT4gPSB7XG4gICAgW0lOVEVSTkVUX0VYUExPUkVSX01PQklMRV06IFtuZXcgUmVnRXhwKCdydjonICsgQlJPV1NFUl9WRVJTSU9OX1JFR0VYX1NVRkZJWCldLFxuICAgIFtNSUNST1NPRlRfRURHRV06IFtuZXcgUmVnRXhwKEVER0UgKyAnP1xcXFwvJyArIEJST1dTRVJfVkVSU0lPTl9SRUdFWF9TVUZGSVgpXSxcbiAgICBbQ0hST01FXTogW25ldyBSZWdFeHAoQ0hST01FICsgJy8nICsgQlJPV1NFUl9WRVJTSU9OX1JFR0VYX1NVRkZJWCldLFxuICAgIFtDSFJPTUVfSU9TXTogW25ldyBSZWdFeHAoJ0NyaU9TXFxcXC8nICsgQlJPV1NFUl9WRVJTSU9OX1JFR0VYX1NVRkZJWCldLFxuICAgICdVQyBCcm93c2VyJzogW25ldyBSZWdFeHAoJyhVQ0Jyb3dzZXJ8VUNXRUIpXFxcXC8nICsgQlJPV1NFUl9WRVJTSU9OX1JFR0VYX1NVRkZJWCldLFxuICAgIFtTQUZBUkldOiBbREVGQVVMVF9CUk9XU0VSX1ZFUlNJT05fUkVHRVhdLFxuICAgIFtNT0JJTEVfU0FGQVJJXTogW0RFRkFVTFRfQlJPV1NFUl9WRVJTSU9OX1JFR0VYXSxcbiAgICBbT1BFUkFdOiBbbmV3IFJlZ0V4cCgnKCcgKyBPUEVSQSArICd8T1BSKVxcXFwvJyArIEJST1dTRVJfVkVSU0lPTl9SRUdFWF9TVUZGSVgpXSxcbiAgICBbRklSRUZPWF06IFtuZXcgUmVnRXhwKEZJUkVGT1ggKyAnXFxcXC8nICsgQlJPV1NFUl9WRVJTSU9OX1JFR0VYX1NVRkZJWCldLFxuICAgIFtGSVJFRk9YX0lPU106IFtuZXcgUmVnRXhwKCdGeGlPU1xcXFwvJyArIEJST1dTRVJfVkVSU0lPTl9SRUdFWF9TVUZGSVgpXSxcbiAgICBbS09OUVVFUk9SXTogW25ldyBSZWdFeHAoJ0tvbnF1ZXJvcls6L10/JyArIEJST1dTRVJfVkVSU0lPTl9SRUdFWF9TVUZGSVgsICdpJyldLFxuICAgIC8vIG5vdCBldmVyeSBibGFja2JlcnJ5IHVzZXIgYWdlbnQgaGFzIHRoZSB2ZXJzaW9uIGFmdGVyIHRoZSBuYW1lXG4gICAgW0JMQUNLQkVSUlldOiBbbmV3IFJlZ0V4cChCTEFDS0JFUlJZICsgJyAnICsgQlJPV1NFUl9WRVJTSU9OX1JFR0VYX1NVRkZJWCksIERFRkFVTFRfQlJPV1NFUl9WRVJTSU9OX1JFR0VYXSxcbiAgICBbQU5EUk9JRF9NT0JJTEVdOiBbbmV3IFJlZ0V4cCgnYW5kcm9pZFxcXFxzJyArIEJST1dTRVJfVkVSU0lPTl9SRUdFWF9TVUZGSVgpXSxcbiAgICBbU0FNU1VOR19JTlRFUk5FVF06IFtuZXcgUmVnRXhwKFNBTVNVTkdfQlJPV1NFUiArICdcXFxcLycgKyBCUk9XU0VSX1ZFUlNJT05fUkVHRVhfU1VGRklYKV0sXG4gICAgW0lOVEVSTkVUX0VYUExPUkVSXTogW25ldyBSZWdFeHAoJyhydjp8TVNJRSApJyArIEJST1dTRVJfVkVSU0lPTl9SRUdFWF9TVUZGSVgpXSxcbiAgICBNb3ppbGxhOiBbbmV3IFJlZ0V4cCgncnY6JyArIEJST1dTRVJfVkVSU0lPTl9SRUdFWF9TVUZGSVgpXSxcbn1cblxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIGRldGVjdHMgd2hpY2ggYnJvd3NlciB2ZXJzaW9uIGlzIHJ1bm5pbmcgdGhpcyBzY3JpcHQsXG4gKiBwYXJzaW5nIG1ham9yIGFuZCBtaW5vciB2ZXJzaW9uIChlLmcuLCA0Mi4xKS4gVXNlciBhZ2VudCBzdHJpbmdzIGZyb206XG4gKiBodHRwOi8vd3d3LnVzZXJhZ2VudHN0cmluZy5jb20vcGFnZXMvdXNlcmFnZW50c3RyaW5nLnBocFxuICpcbiAqIGBuYXZpZ2F0b3IudmVuZG9yYCBpcyBwYXNzZWQgaW4gYW5kIHVzZWQgdG8gaGVscCB3aXRoIGRldGVjdGluZyBjZXJ0YWluIGJyb3dzZXJzXG4gKiBOQiBgbmF2aWdhdG9yLnZlbmRvcmAgaXMgZGVwcmVjYXRlZCBhbmQgbm90IHByZXNlbnQgaW4gZXZlcnkgYnJvd3NlclxuICovXG5leHBvcnQgY29uc3QgZGV0ZWN0QnJvd3NlclZlcnNpb24gPSBmdW5jdGlvbiAoXG4gICAgdXNlckFnZW50OiBzdHJpbmcsXG4gICAgdmVuZG9yOiBzdHJpbmcgfCB1bmRlZmluZWQsXG4gICAgb3BlcmE6IHN0cmluZ1xuKTogbnVtYmVyIHwgbnVsbCB7XG4gICAgY29uc3QgYnJvd3NlciA9IGRldGVjdEJyb3dzZXIodXNlckFnZW50LCB2ZW5kb3IsIG9wZXJhKVxuICAgIGNvbnN0IHJlZ2V4ZXM6IFJlZ0V4cFtdIHwgdW5kZWZpbmVkID0gdmVyc2lvblJlZ2V4ZXNbYnJvd3NlciBhcyBrZXlvZiB0eXBlb2YgdmVyc2lvblJlZ2V4ZXNdXG4gICAgaWYgKF9pc1VuZGVmaW5lZChyZWdleGVzKSkge1xuICAgICAgICByZXR1cm4gbnVsbFxuICAgIH1cblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVnZXhlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCByZWdleCA9IHJlZ2V4ZXNbaV1cbiAgICAgICAgY29uc3QgbWF0Y2hlcyA9IHVzZXJBZ2VudC5tYXRjaChyZWdleClcbiAgICAgICAgaWYgKG1hdGNoZXMpIHtcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUZsb2F0KG1hdGNoZXNbbWF0Y2hlcy5sZW5ndGggLSAyXSlcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbFxufVxuXG4vLyB0byBhdm9pZCByZXBlYXRpbmcgcmVnZXhlcyBvciBjYWxsaW5nIHRoZW0gdHdpY2UsIHdlIGhhdmUgYW4gYXJyYXkgb2YgbWF0Y2hlc1xuLy8gdGhlIGZpcnN0IHJlZ2V4IHRoYXQgbWF0Y2hlcyB1c2VzIGl0cyBtYXRjaGVyIGZ1bmN0aW9uIHRvIHJldHVybiB0aGUgcmVzdWx0XG5jb25zdCBvc01hdGNoZXJzOiBbXG4gICAgUmVnRXhwLFxuICAgIFtzdHJpbmcsIHN0cmluZ10gfCAoKG1hdGNoOiBSZWdFeHBNYXRjaEFycmF5IHwgbnVsbCwgdXNlcl9hZ2VudDogc3RyaW5nKSA9PiBbc3RyaW5nLCBzdHJpbmddKVxuXVtdID0gW1xuICAgIFtcbiAgICAgICAgbmV3IFJlZ0V4cChYQk9YICsgJzsgJyArIFhCT1ggKyAnICguKj8pWyk7XScsICdpJyksXG4gICAgICAgIChtYXRjaCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIFtYQk9YLCAobWF0Y2ggJiYgbWF0Y2hbMV0pIHx8ICcnXVxuICAgICAgICB9LFxuICAgIF0sXG4gICAgW25ldyBSZWdFeHAoTklOVEVORE8sICdpJyksIFtOSU5URU5ETywgJyddXSxcbiAgICBbbmV3IFJlZ0V4cChQTEFZU1RBVElPTiwgJ2knKSwgW1BMQVlTVEFUSU9OLCAnJ11dLFxuICAgIFtCTEFDS0JFUlJZX1JFR0VYLCBbQkxBQ0tCRVJSWSwgJyddXSxcbiAgICBbXG4gICAgICAgIG5ldyBSZWdFeHAoV0lORE9XUywgJ2knKSxcbiAgICAgICAgKF8sIHVzZXJfYWdlbnQpID0+IHtcbiAgICAgICAgICAgIGlmICgvUGhvbmUvLnRlc3QodXNlcl9hZ2VudCkgfHwgL1dQRGVza3RvcC8udGVzdCh1c2VyX2FnZW50KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBbV0lORE9XU19QSE9ORSwgJyddXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBub3QgYWxsIEpTIHZlcnNpb25zIHN1cHBvcnQgbmVnYXRpdmUgbG9va2JlaGluZCwgc28gd2UgbmVlZCB0d28gY2hlY2tzIGhlcmVcbiAgICAgICAgICAgIGlmIChuZXcgUmVnRXhwKE1PQklMRSkudGVzdCh1c2VyX2FnZW50KSAmJiAhL0lFTW9iaWxlXFxiLy50ZXN0KHVzZXJfYWdlbnQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtXSU5ET1dTICsgJyAnICsgTU9CSUxFLCAnJ11cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG1hdGNoID0gL1dpbmRvd3MgTlQgKFswLTkuXSspL2kuZXhlYyh1c2VyX2FnZW50KVxuICAgICAgICAgICAgaWYgKG1hdGNoICYmIG1hdGNoWzFdKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdmVyc2lvbiA9IG1hdGNoWzFdXG4gICAgICAgICAgICAgICAgbGV0IG9zVmVyc2lvbiA9IHdpbmRvd3NWZXJzaW9uTWFwW3ZlcnNpb25dIHx8ICcnXG4gICAgICAgICAgICAgICAgaWYgKC9hcm0vaS50ZXN0KHVzZXJfYWdlbnQpKSB7XG4gICAgICAgICAgICAgICAgICAgIG9zVmVyc2lvbiA9ICdSVCdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtXSU5ET1dTLCBvc1ZlcnNpb25dXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gW1dJTkRPV1MsICcnXVxuICAgICAgICB9LFxuICAgIF0sXG4gICAgW1xuICAgICAgICAvKChpUGhvbmV8aVBhZHxpUG9kKS4qP09TIChcXGQrKV8oXFxkKylfPyhcXGQrKT98aVBob25lKS8sXG4gICAgICAgIChtYXRjaCkgPT4ge1xuICAgICAgICAgICAgaWYgKG1hdGNoICYmIG1hdGNoWzNdKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdmVyc2lvblBhcnRzID0gW21hdGNoWzNdLCBtYXRjaFs0XSwgbWF0Y2hbNV0gfHwgJzAnXVxuICAgICAgICAgICAgICAgIHJldHVybiBbSU9TLCB2ZXJzaW9uUGFydHMuam9pbignLicpXVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFtJT1MsICcnXVxuICAgICAgICB9LFxuICAgIF0sXG4gICAgW1xuICAgICAgICAvKHdhdGNoLipcXC8oXFxkK1xcLlxcZCtcXC5cXGQrKXx3YXRjaCBvcywoXFxkK1xcLlxcZCspLCkvaSxcbiAgICAgICAgKG1hdGNoKSA9PiB7XG4gICAgICAgICAgICAvLyBlLmcuIFdhdGNoNCwzLzUuMy44ICgxNlU2ODApXG4gICAgICAgICAgICBsZXQgdmVyc2lvbiA9ICcnXG4gICAgICAgICAgICBpZiAobWF0Y2ggJiYgbWF0Y2gubGVuZ3RoID49IDMpIHtcbiAgICAgICAgICAgICAgICB2ZXJzaW9uID0gX2lzVW5kZWZpbmVkKG1hdGNoWzJdKSA/IG1hdGNoWzNdIDogbWF0Y2hbMl1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBbJ3dhdGNoT1MnLCB2ZXJzaW9uXVxuICAgICAgICB9LFxuICAgIF0sXG4gICAgW1xuICAgICAgICBuZXcgUmVnRXhwKCcoJyArIEFORFJPSUQgKyAnIChcXFxcZCspXFxcXC4oXFxcXGQrKVxcXFwuPyhcXFxcZCspP3wnICsgQU5EUk9JRCArICcpJywgJ2knKSxcbiAgICAgICAgKG1hdGNoKSA9PiB7XG4gICAgICAgICAgICBpZiAobWF0Y2ggJiYgbWF0Y2hbMl0pIHtcbiAgICAgICAgICAgICAgICBjb25zdCB2ZXJzaW9uUGFydHMgPSBbbWF0Y2hbMl0sIG1hdGNoWzNdLCBtYXRjaFs0XSB8fCAnMCddXG4gICAgICAgICAgICAgICAgcmV0dXJuIFtBTkRST0lELCB2ZXJzaW9uUGFydHMuam9pbignLicpXVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFtBTkRST0lELCAnJ11cbiAgICAgICAgfSxcbiAgICBdLFxuICAgIFtcbiAgICAgICAgL01hYyBPUyBYIChcXGQrKVtfLl0oXFxkKylbXy5dPyhcXGQrKT8vaSxcbiAgICAgICAgKG1hdGNoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQ6IFtzdHJpbmcsIHN0cmluZ10gPSBbJ01hYyBPUyBYJywgJyddXG4gICAgICAgICAgICBpZiAobWF0Y2ggJiYgbWF0Y2hbMV0pIHtcbiAgICAgICAgICAgICAgICBjb25zdCB2ZXJzaW9uUGFydHMgPSBbbWF0Y2hbMV0sIG1hdGNoWzJdLCBtYXRjaFszXSB8fCAnMCddXG4gICAgICAgICAgICAgICAgcmVzdWx0WzFdID0gdmVyc2lvblBhcnRzLmpvaW4oJy4nKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgICAgICB9LFxuICAgIF0sXG4gICAgW1xuICAgICAgICAvTWFjL2ksXG4gICAgICAgIC8vIG1vcCB1cCBhIGZldyBub24tc3RhbmRhcmQgVUFzIHRoYXQgc2hvdWxkIG1hdGNoIG1hY1xuICAgICAgICBbJ01hYyBPUyBYJywgJyddLFxuICAgIF0sXG4gICAgWy9Dck9TLywgW0NIUk9NRV9PUywgJyddXSxcbiAgICBbL0xpbnV4fGRlYmlhbi9pLCBbJ0xpbnV4JywgJyddXSxcbl1cblxuZXhwb3J0IGNvbnN0IGRldGVjdE9TID0gZnVuY3Rpb24gKHVzZXJfYWdlbnQ6IHN0cmluZyk6IFtzdHJpbmcsIHN0cmluZ10ge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb3NNYXRjaGVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBbcmdleCwgcmVzdWx0T3JGbl0gPSBvc01hdGNoZXJzW2ldXG4gICAgICAgIGNvbnN0IG1hdGNoID0gcmdleC5leGVjKHVzZXJfYWdlbnQpXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IG1hdGNoICYmIChfaXNGdW5jdGlvbihyZXN1bHRPckZuKSA/IHJlc3VsdE9yRm4obWF0Y2gsIHVzZXJfYWdlbnQpIDogcmVzdWx0T3JGbilcbiAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBbJycsICcnXVxufVxuXG5leHBvcnQgY29uc3QgZGV0ZWN0RGV2aWNlID0gZnVuY3Rpb24gKHVzZXJfYWdlbnQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgaWYgKE5JTlRFTkRPX1JFR0VYLnRlc3QodXNlcl9hZ2VudCkpIHtcbiAgICAgICAgcmV0dXJuIE5JTlRFTkRPXG4gICAgfSBlbHNlIGlmIChQTEFZU1RBVElPTl9SRUdFWC50ZXN0KHVzZXJfYWdlbnQpKSB7XG4gICAgICAgIHJldHVybiBQTEFZU1RBVElPTlxuICAgIH0gZWxzZSBpZiAoWEJPWF9SRUdFWC50ZXN0KHVzZXJfYWdlbnQpKSB7XG4gICAgICAgIHJldHVybiBYQk9YXG4gICAgfSBlbHNlIGlmIChuZXcgUmVnRXhwKE9VWUEsICdpJykudGVzdCh1c2VyX2FnZW50KSkge1xuICAgICAgICByZXR1cm4gT1VZQVxuICAgIH0gZWxzZSBpZiAobmV3IFJlZ0V4cCgnKCcgKyBXSU5ET1dTX1BIT05FICsgJ3xXUERlc2t0b3ApJywgJ2knKS50ZXN0KHVzZXJfYWdlbnQpKSB7XG4gICAgICAgIHJldHVybiBXSU5ET1dTX1BIT05FXG4gICAgfSBlbHNlIGlmICgvaVBhZC8udGVzdCh1c2VyX2FnZW50KSkge1xuICAgICAgICByZXR1cm4gSVBBRFxuICAgIH0gZWxzZSBpZiAoL2lQb2QvLnRlc3QodXNlcl9hZ2VudCkpIHtcbiAgICAgICAgcmV0dXJuICdpUG9kIFRvdWNoJ1xuICAgIH0gZWxzZSBpZiAoL2lQaG9uZS8udGVzdCh1c2VyX2FnZW50KSkge1xuICAgICAgICByZXR1cm4gJ2lQaG9uZSdcbiAgICB9IGVsc2UgaWYgKC8od2F0Y2gpKD86ID9vc1ssL118XFxkLFxcZFxcLylbXFxkLl0rL2kudGVzdCh1c2VyX2FnZW50KSkge1xuICAgICAgICByZXR1cm4gQVBQTEVfV0FUQ0hcbiAgICB9IGVsc2UgaWYgKEJMQUNLQkVSUllfUkVHRVgudGVzdCh1c2VyX2FnZW50KSkge1xuICAgICAgICByZXR1cm4gQkxBQ0tCRVJSWVxuICAgIH0gZWxzZSBpZiAoLyhrb2JvKVxccyhlcmVhZGVyfHRvdWNoKS9pLnRlc3QodXNlcl9hZ2VudCkpIHtcbiAgICAgICAgcmV0dXJuICdLb2JvJ1xuICAgIH0gZWxzZSBpZiAobmV3IFJlZ0V4cChOT0tJQSwgJ2knKS50ZXN0KHVzZXJfYWdlbnQpKSB7XG4gICAgICAgIHJldHVybiBOT0tJQVxuICAgIH0gZWxzZSBpZiAoXG4gICAgICAgIC8vIEtpbmRsZSBGaXJlIHdpdGhvdXQgU2lsayAvIEVjaG8gU2hvd1xuICAgICAgICAvKGtmW2Etel17Mn13aXxhZW9bYy1yXXsyfSkoIGJ1aXxcXCkpL2kudGVzdCh1c2VyX2FnZW50KSB8fFxuICAgICAgICAvLyBLaW5kbGUgRmlyZSBIRFxuICAgICAgICAvKGtmW2Etel0rKSggYnVpfFxcKSkuK3NpbGtcXC8vaS50ZXN0KHVzZXJfYWdlbnQpXG4gICAgKSB7XG4gICAgICAgIHJldHVybiAnS2luZGxlIEZpcmUnXG4gICAgfSBlbHNlIGlmICgvKEFuZHJvaWR8WlRFKS9pLnRlc3QodXNlcl9hZ2VudCkpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgIW5ldyBSZWdFeHAoTU9CSUxFKS50ZXN0KHVzZXJfYWdlbnQpIHx8XG4gICAgICAgICAgICAvKDkxMzhCfFRCNzgyQnxOZXh1cyBbOTddfHBpeGVsIGN8SFVBV0VJU0hUfEJUVnxub2JsZSBub29rfHNtYXJ0IHVsdHJhIDYpL2kudGVzdCh1c2VyX2FnZW50KVxuICAgICAgICApIHtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAoL3BpeGVsW1xcZGF4bCBdezEsNn0vaS50ZXN0KHVzZXJfYWdlbnQpICYmICEvcGl4ZWwgYy9pLnRlc3QodXNlcl9hZ2VudCkpIHx8XG4gICAgICAgICAgICAgICAgLyhodWF3ZWltZWQtYWwwMHx0YWgtfEFQQXxTTS1HOTJ8aTk4MHx6dGV8VTMwNEFBKS9pLnRlc3QodXNlcl9hZ2VudCkgfHxcbiAgICAgICAgICAgICAgICAoL2xteTQ3di9pLnRlc3QodXNlcl9hZ2VudCkgJiYgIS9RVEFRWjMvaS50ZXN0KHVzZXJfYWdlbnQpKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIEFORFJPSURcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBBTkRST0lEX1RBQkxFVFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIEFORFJPSURcbiAgICAgICAgfVxuICAgIH0gZWxzZSBpZiAobmV3IFJlZ0V4cCgnKHBkYXwnICsgTU9CSUxFICsgJyknLCAnaScpLnRlc3QodXNlcl9hZ2VudCkpIHtcbiAgICAgICAgcmV0dXJuIEdFTkVSSUNfTU9CSUxFXG4gICAgfSBlbHNlIGlmIChuZXcgUmVnRXhwKFRBQkxFVCwgJ2knKS50ZXN0KHVzZXJfYWdlbnQpICYmICFuZXcgUmVnRXhwKFRBQkxFVCArICcgcGMnLCAnaScpLnRlc3QodXNlcl9hZ2VudCkpIHtcbiAgICAgICAgcmV0dXJuIEdFTkVSSUNfVEFCTEVUXG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuICcnXG4gICAgfVxufVxuXG5leHBvcnQgY29uc3QgZGV0ZWN0RGV2aWNlVHlwZSA9IGZ1bmN0aW9uICh1c2VyX2FnZW50OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IGRldmljZSA9IGRldGVjdERldmljZSh1c2VyX2FnZW50KVxuICAgIGlmIChcbiAgICAgICAgZGV2aWNlID09PSBJUEFEIHx8XG4gICAgICAgIGRldmljZSA9PT0gQU5EUk9JRF9UQUJMRVQgfHxcbiAgICAgICAgZGV2aWNlID09PSAnS29ibycgfHxcbiAgICAgICAgZGV2aWNlID09PSAnS2luZGxlIEZpcmUnIHx8XG4gICAgICAgIGRldmljZSA9PT0gR0VORVJJQ19UQUJMRVRcbiAgICApIHtcbiAgICAgICAgcmV0dXJuIFRBQkxFVFxuICAgIH0gZWxzZSBpZiAoZGV2aWNlID09PSBOSU5URU5ETyB8fCBkZXZpY2UgPT09IFhCT1ggfHwgZGV2aWNlID09PSBQTEFZU1RBVElPTiB8fCBkZXZpY2UgPT09IE9VWUEpIHtcbiAgICAgICAgcmV0dXJuICdDb25zb2xlJ1xuICAgIH0gZWxzZSBpZiAoZGV2aWNlID09PSBBUFBMRV9XQVRDSCkge1xuICAgICAgICByZXR1cm4gJ1dlYXJhYmxlJ1xuICAgIH0gZWxzZSBpZiAoZGV2aWNlKSB7XG4gICAgICAgIHJldHVybiBNT0JJTEVcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gJ0Rlc2t0b3AnXG4gICAgfVxufVxuIiwgImltcG9ydCB7IF9nZXRRdWVyeVBhcmFtLCBjb252ZXJ0VG9VUkwgfSBmcm9tICcuL3JlcXVlc3QtdXRpbHMnXG5pbXBvcnQgeyBfaXNOdWxsIH0gZnJvbSAnLi90eXBlLXV0aWxzJ1xuaW1wb3J0IHsgUHJvcGVydGllcyB9IGZyb20gJy4uL3R5cGVzJ1xuaW1wb3J0IENvbmZpZyBmcm9tICcuLi9jb25maWcnXG5pbXBvcnQgeyBfZWFjaCwgX2V4dGVuZCwgX3N0cmlwX2VtcHR5X3Byb3BlcnRpZXMsIF90aW1lc3RhbXAgfSBmcm9tICcuL2luZGV4J1xuaW1wb3J0IHsgYXNzaWduYWJsZVdpbmRvdywgZG9jdW1lbnQsIGxvY2F0aW9uLCB1c2VyQWdlbnQsIHdpbmRvdyB9IGZyb20gJy4vZ2xvYmFscydcbmltcG9ydCB7IGRldGVjdEJyb3dzZXIsIGRldGVjdEJyb3dzZXJWZXJzaW9uLCBkZXRlY3REZXZpY2UsIGRldGVjdERldmljZVR5cGUsIGRldGVjdE9TIH0gZnJvbSAnLi91c2VyLWFnZW50LXV0aWxzJ1xuXG5jb25zdCBVUkxfUkVHRVhfUFJFRklYID0gJ2h0dHBzPzovLyguKiknXG5cbmV4cG9ydCBjb25zdCBfaW5mbyA9IHtcbiAgICBjYW1wYWlnblBhcmFtczogZnVuY3Rpb24gKGN1c3RvbVBhcmFtcz86IHN0cmluZ1tdKTogUmVjb3JkPHN0cmluZywgYW55PiB7XG4gICAgICAgIC8vIFNob3VsZCBiZSBrZXB0IGluIHN5bmMgd2l0aCBodHRwczovL2dpdGh1Yi5jb20vUG9zdEhvZy9wb3N0aG9nL2Jsb2IvbWFzdGVyL3BsdWdpbi1zZXJ2ZXIvc3JjL3V0aWxzL2RiL3V0aWxzLnRzI0w2MFxuICAgICAgICBjb25zdCBjYW1wYWlnbl9rZXl3b3JkcyA9IFtcbiAgICAgICAgICAgICd1dG1fc291cmNlJyxcbiAgICAgICAgICAgICd1dG1fbWVkaXVtJyxcbiAgICAgICAgICAgICd1dG1fY2FtcGFpZ24nLFxuICAgICAgICAgICAgJ3V0bV9jb250ZW50JyxcbiAgICAgICAgICAgICd1dG1fdGVybScsXG4gICAgICAgICAgICAnZ2NsaWQnLCAvLyBnb29nbGUgYWRzXG4gICAgICAgICAgICAnZ2FkX3NvdXJjZScsIC8vIGdvb2dsZSBhZHNcbiAgICAgICAgICAgICdnY2xzcmMnLCAvLyBnb29nbGUgYWRzIDM2MFxuICAgICAgICAgICAgJ2RjbGlkJywgLy8gZ29vZ2xlIGRpc3BsYXkgYWRzXG4gICAgICAgICAgICAnZ2JyYWlkJywgLy8gZ29vZ2xlIGFkcywgd2ViIHRvIGFwcFxuICAgICAgICAgICAgJ3dicmFpZCcsIC8vIGdvb2dsZSBhZHMsIGFwcCB0byB3ZWJcbiAgICAgICAgICAgICdmYmNsaWQnLCAvLyBmYWNlYm9va1xuICAgICAgICAgICAgJ21zY2xraWQnLCAvLyBtaWNyb3NvZnRcbiAgICAgICAgICAgICd0d2NsaWQnLCAvLyB0d2l0dGVyXG4gICAgICAgICAgICAnbGlfZmF0X2lkJywgLy8gbGlua2VkaW5cbiAgICAgICAgICAgICdtY19jaWQnLCAvLyBtYWlsY2hpbXAgY2FtcGFpZ24gaWRcbiAgICAgICAgICAgICdpZ3NoaWQnLCAvLyBpbnN0YWdyYW1cbiAgICAgICAgICAgICd0dGNsaWQnLCAvLyB0aWt0b2tcbiAgICAgICAgXS5jb25jYXQoY3VzdG9tUGFyYW1zIHx8IFtdKVxuXG4gICAgICAgIGNvbnN0IHBhcmFtczogUmVjb3JkPHN0cmluZywgYW55PiA9IHt9XG4gICAgICAgIF9lYWNoKGNhbXBhaWduX2tleXdvcmRzLCBmdW5jdGlvbiAoa3drZXkpIHtcbiAgICAgICAgICAgIGNvbnN0IGt3ID0gZG9jdW1lbnQgPyBfZ2V0UXVlcnlQYXJhbShkb2N1bWVudC5VUkwsIGt3a2V5KSA6ICcnXG4gICAgICAgICAgICBpZiAoa3cubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgcGFyYW1zW2t3a2V5XSA9IGt3XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG5cbiAgICAgICAgcmV0dXJuIHBhcmFtc1xuICAgIH0sXG5cbiAgICBzZWFyY2hFbmdpbmU6IGZ1bmN0aW9uICgpOiBzdHJpbmcgfCBudWxsIHtcbiAgICAgICAgY29uc3QgcmVmZXJyZXIgPSBkb2N1bWVudD8ucmVmZXJyZXJcbiAgICAgICAgaWYgKCFyZWZlcnJlcikge1xuICAgICAgICAgICAgcmV0dXJuIG51bGxcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChyZWZlcnJlci5zZWFyY2goVVJMX1JFR0VYX1BSRUZJWCArICdnb29nbGUuKFteLz9dKiknKSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAnZ29vZ2xlJ1xuICAgICAgICAgICAgfSBlbHNlIGlmIChyZWZlcnJlci5zZWFyY2goVVJMX1JFR0VYX1BSRUZJWCArICdiaW5nLmNvbScpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICdiaW5nJ1xuICAgICAgICAgICAgfSBlbHNlIGlmIChyZWZlcnJlci5zZWFyY2goVVJMX1JFR0VYX1BSRUZJWCArICd5YWhvby5jb20nKSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAneWFob28nXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHJlZmVycmVyLnNlYXJjaChVUkxfUkVHRVhfUFJFRklYICsgJ2R1Y2tkdWNrZ28uY29tJykgPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gJ2R1Y2tkdWNrZ28nXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgc2VhcmNoSW5mbzogZnVuY3Rpb24gKCk6IFJlY29yZDxzdHJpbmcsIGFueT4ge1xuICAgICAgICBjb25zdCBzZWFyY2ggPSBfaW5mby5zZWFyY2hFbmdpbmUoKSxcbiAgICAgICAgICAgIHBhcmFtID0gc2VhcmNoICE9ICd5YWhvbycgPyAncScgOiAncCcsXG4gICAgICAgICAgICByZXQ6IFJlY29yZDxzdHJpbmcsIGFueT4gPSB7fVxuXG4gICAgICAgIGlmICghX2lzTnVsbChzZWFyY2gpKSB7XG4gICAgICAgICAgICByZXRbJyRzZWFyY2hfZW5naW5lJ10gPSBzZWFyY2hcblxuICAgICAgICAgICAgY29uc3Qga2V5d29yZCA9IGRvY3VtZW50ID8gX2dldFF1ZXJ5UGFyYW0oZG9jdW1lbnQucmVmZXJyZXIsIHBhcmFtKSA6ICcnXG4gICAgICAgICAgICBpZiAoa2V5d29yZC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICByZXRbJ3BoX2tleXdvcmQnXSA9IGtleXdvcmRcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXRcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogVGhpcyBmdW5jdGlvbiBkZXRlY3RzIHdoaWNoIGJyb3dzZXIgaXMgcnVubmluZyB0aGlzIHNjcmlwdC5cbiAgICAgKiBUaGUgb3JkZXIgb2YgdGhlIGNoZWNrcyBhcmUgaW1wb3J0YW50IHNpbmNlIG1hbnkgdXNlciBhZ2VudHNcbiAgICAgKiBpbmNsdWRlIGtleXdvcmRzIHVzZWQgaW4gbGF0ZXIgY2hlY2tzLlxuICAgICAqL1xuICAgIGJyb3dzZXI6IGRldGVjdEJyb3dzZXIsXG5cbiAgICAvKipcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIGRldGVjdHMgd2hpY2ggYnJvd3NlciB2ZXJzaW9uIGlzIHJ1bm5pbmcgdGhpcyBzY3JpcHQsXG4gICAgICogcGFyc2luZyBtYWpvciBhbmQgbWlub3IgdmVyc2lvbiAoZS5nLiwgNDIuMSkuIFVzZXIgYWdlbnQgc3RyaW5ncyBmcm9tOlxuICAgICAqIGh0dHA6Ly93d3cudXNlcmFnZW50c3RyaW5nLmNvbS9wYWdlcy91c2VyYWdlbnRzdHJpbmcucGhwXG4gICAgICpcbiAgICAgKiBgbmF2aWdhdG9yLnZlbmRvcmAgaXMgcGFzc2VkIGluIGFuZCB1c2VkIHRvIGhlbHAgd2l0aCBkZXRlY3RpbmcgY2VydGFpbiBicm93c2Vyc1xuICAgICAqIE5CIGBuYXZpZ2F0b3IudmVuZG9yYCBpcyBkZXByZWNhdGVkIGFuZCBub3QgcHJlc2VudCBpbiBldmVyeSBicm93c2VyXG4gICAgICovXG4gICAgYnJvd3NlclZlcnNpb246IGRldGVjdEJyb3dzZXJWZXJzaW9uLFxuXG4gICAgYnJvd3Nlckxhbmd1YWdlOiBmdW5jdGlvbiAoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIG5hdmlnYXRvci5sYW5ndWFnZSB8fCAvLyBBbnkgbW9kZXJuIGJyb3dzZXJcbiAgICAgICAgICAgIChuYXZpZ2F0b3IgYXMgUmVjb3JkPHN0cmluZywgYW55PikudXNlckxhbmd1YWdlIC8vIElFMTFcbiAgICAgICAgKVxuICAgIH0sXG5cbiAgICBvczogZGV0ZWN0T1MsXG5cbiAgICBkZXZpY2U6IGRldGVjdERldmljZSxcblxuICAgIGRldmljZVR5cGU6IGRldGVjdERldmljZVR5cGUsXG5cbiAgICByZWZlcnJlcjogZnVuY3Rpb24gKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBkb2N1bWVudD8ucmVmZXJyZXIgfHwgJyRkaXJlY3QnXG4gICAgfSxcblxuICAgIHJlZmVycmluZ0RvbWFpbjogZnVuY3Rpb24gKCk6IHN0cmluZyB7XG4gICAgICAgIGlmICghZG9jdW1lbnQ/LnJlZmVycmVyKSB7XG4gICAgICAgICAgICByZXR1cm4gJyRkaXJlY3QnXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbnZlcnRUb1VSTChkb2N1bWVudC5yZWZlcnJlcik/Lmhvc3QgfHwgJyRkaXJlY3QnXG4gICAgfSxcblxuICAgIHByb3BlcnRpZXM6IGZ1bmN0aW9uICgpOiBQcm9wZXJ0aWVzIHtcbiAgICAgICAgaWYgKCF1c2VyQWdlbnQpIHtcbiAgICAgICAgICAgIHJldHVybiB7fVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IFtvc19uYW1lLCBvc192ZXJzaW9uXSA9IF9pbmZvLm9zKHVzZXJBZ2VudClcbiAgICAgICAgcmV0dXJuIF9leHRlbmQoXG4gICAgICAgICAgICBfc3RyaXBfZW1wdHlfcHJvcGVydGllcyh7XG4gICAgICAgICAgICAgICAgJG9zOiBvc19uYW1lLFxuICAgICAgICAgICAgICAgICRvc192ZXJzaW9uOiBvc192ZXJzaW9uLFxuICAgICAgICAgICAgICAgICRicm93c2VyOiBfaW5mby5icm93c2VyKHVzZXJBZ2VudCwgbmF2aWdhdG9yLnZlbmRvciwgYXNzaWduYWJsZVdpbmRvdy5vcGVyYSksXG4gICAgICAgICAgICAgICAgJGRldmljZTogX2luZm8uZGV2aWNlKHVzZXJBZ2VudCksXG4gICAgICAgICAgICAgICAgJGRldmljZV90eXBlOiBfaW5mby5kZXZpY2VUeXBlKHVzZXJBZ2VudCksXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAkY3VycmVudF91cmw6IGxvY2F0aW9uPy5ocmVmLFxuICAgICAgICAgICAgICAgICRob3N0OiBsb2NhdGlvbj8uaG9zdCxcbiAgICAgICAgICAgICAgICAkcGF0aG5hbWU6IGxvY2F0aW9uPy5wYXRobmFtZSxcbiAgICAgICAgICAgICAgICAkcmF3X3VzZXJfYWdlbnQ6IHVzZXJBZ2VudC5sZW5ndGggPiAxMDAwID8gdXNlckFnZW50LnN1YnN0cmluZygwLCA5OTcpICsgJy4uLicgOiB1c2VyQWdlbnQsXG4gICAgICAgICAgICAgICAgJGJyb3dzZXJfdmVyc2lvbjogX2luZm8uYnJvd3NlclZlcnNpb24odXNlckFnZW50LCBuYXZpZ2F0b3IudmVuZG9yLCBhc3NpZ25hYmxlV2luZG93Lm9wZXJhKSxcbiAgICAgICAgICAgICAgICAkYnJvd3Nlcl9sYW5ndWFnZTogX2luZm8uYnJvd3Nlckxhbmd1YWdlKCksXG4gICAgICAgICAgICAgICAgJHNjcmVlbl9oZWlnaHQ6IHdpbmRvdz8uc2NyZWVuLmhlaWdodCxcbiAgICAgICAgICAgICAgICAkc2NyZWVuX3dpZHRoOiB3aW5kb3c/LnNjcmVlbi53aWR0aCxcbiAgICAgICAgICAgICAgICAkdmlld3BvcnRfaGVpZ2h0OiB3aW5kb3c/LmlubmVySGVpZ2h0LFxuICAgICAgICAgICAgICAgICR2aWV3cG9ydF93aWR0aDogd2luZG93Py5pbm5lcldpZHRoLFxuICAgICAgICAgICAgICAgICRsaWI6ICd3ZWInLFxuICAgICAgICAgICAgICAgICRsaWJfdmVyc2lvbjogQ29uZmlnLkxJQl9WRVJTSU9OLFxuICAgICAgICAgICAgICAgICRpbnNlcnRfaWQ6IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZygyLCAxMCkgKyBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMiwgMTApLFxuICAgICAgICAgICAgICAgICR0aW1lOiBfdGltZXN0YW1wKCkgLyAxMDAwLCAvLyBlcG9jaCB0aW1lIGluIHNlY29uZHNcbiAgICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgIH0sXG5cbiAgICBwZW9wbGVfcHJvcGVydGllczogZnVuY3Rpb24gKCk6IFByb3BlcnRpZXMge1xuICAgICAgICBpZiAoIXVzZXJBZ2VudCkge1xuICAgICAgICAgICAgcmV0dXJuIHt9XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBbb3NfbmFtZSwgb3NfdmVyc2lvbl0gPSBfaW5mby5vcyh1c2VyQWdlbnQpXG4gICAgICAgIHJldHVybiBfZXh0ZW5kKFxuICAgICAgICAgICAgX3N0cmlwX2VtcHR5X3Byb3BlcnRpZXMoe1xuICAgICAgICAgICAgICAgICRvczogb3NfbmFtZSxcbiAgICAgICAgICAgICAgICAkb3NfdmVyc2lvbjogb3NfdmVyc2lvbixcbiAgICAgICAgICAgICAgICAkYnJvd3NlcjogX2luZm8uYnJvd3Nlcih1c2VyQWdlbnQsIG5hdmlnYXRvci52ZW5kb3IsIGFzc2lnbmFibGVXaW5kb3cub3BlcmEpLFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgJGJyb3dzZXJfdmVyc2lvbjogX2luZm8uYnJvd3NlclZlcnNpb24odXNlckFnZW50LCBuYXZpZ2F0b3IudmVuZG9yLCBhc3NpZ25hYmxlV2luZG93Lm9wZXJhKSxcbiAgICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgIH0sXG59XG4iLCAiLyogZXNsaW50IGNhbWVsY2FzZTogXCJvZmZcIiAqL1xuXG5pbXBvcnQgeyBfZWFjaCwgX2V4dGVuZCwgX2luY2x1ZGUsIF9zdHJpcF9lbXB0eV9wcm9wZXJ0aWVzIH0gZnJvbSAnLi91dGlscydcbmltcG9ydCB7IGNvb2tpZVN0b3JlLCBsb2NhbFN0b3JlLCBsb2NhbFBsdXNDb29raWVTdG9yZSwgbWVtb3J5U3RvcmUsIHNlc3Npb25TdG9yZSB9IGZyb20gJy4vc3RvcmFnZSdcbmltcG9ydCB7IFBlcnNpc3RlbnRTdG9yZSwgUG9zdEhvZ0NvbmZpZywgUHJvcGVydGllcyB9IGZyb20gJy4vdHlwZXMnXG5pbXBvcnQge1xuICAgIFBFUlNJU1RFTkNFX1JFU0VSVkVEX1BST1BFUlRJRVMsXG4gICAgRVZFTlRfVElNRVJTX0tFWSxcbiAgICBFTkFCTEVEX0ZFQVRVUkVfRkxBR1MsXG4gICAgUE9TVEhPR19RVU9UQV9MSU1JVEVELFxuICAgIFVTRVJfU1RBVEUsXG59IGZyb20gJy4vY29uc3RhbnRzJ1xuXG5pbXBvcnQgeyBfaXNPYmplY3QsIF9pc1VuZGVmaW5lZCB9IGZyb20gJy4vdXRpbHMvdHlwZS11dGlscydcbmltcG9ydCB7IF9pbmZvIH0gZnJvbSAnLi91dGlscy9ldmVudC11dGlscydcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJy4vdXRpbHMvbG9nZ2VyJ1xuXG5jb25zdCBDQVNFX0lOU0VOU0lUSVZFX1BFUlNJU1RFTkNFX1RZUEVTOiByZWFkb25seSBMb3dlcmNhc2U8UG9zdEhvZ0NvbmZpZ1sncGVyc2lzdGVuY2UnXT5bXSA9IFtcbiAgICAnY29va2llJyxcbiAgICAnbG9jYWxzdG9yYWdlJyxcbiAgICAnbG9jYWxzdG9yYWdlK2Nvb2tpZScsXG4gICAgJ3Nlc3Npb25zdG9yYWdlJyxcbiAgICAnbWVtb3J5Jyxcbl1cblxuY29uc3QgcGFyc2VOYW1lID0gKGNvbmZpZzogUG9zdEhvZ0NvbmZpZyk6IHN0cmluZyA9PiB7XG4gICAgbGV0IHRva2VuID0gJydcbiAgICBpZiAoY29uZmlnWyd0b2tlbiddKSB7XG4gICAgICAgIHRva2VuID0gY29uZmlnWyd0b2tlbiddLnJlcGxhY2UoL1xcKy9nLCAnUEwnKS5yZXBsYWNlKC9cXC8vZywgJ1NMJykucmVwbGFjZSgvPS9nLCAnRVEnKVxuICAgIH1cblxuICAgIGlmIChjb25maWdbJ3BlcnNpc3RlbmNlX25hbWUnXSkge1xuICAgICAgICByZXR1cm4gJ3BoXycgKyBjb25maWdbJ3BlcnNpc3RlbmNlX25hbWUnXVxuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAncGhfJyArIHRva2VuICsgJ19wb3N0aG9nJ1xuICAgIH1cbn1cblxuLyoqXG4gKiBQb3N0SG9nIFBlcnNpc3RlbmNlIE9iamVjdFxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmV4cG9ydCBjbGFzcyBQb3N0SG9nUGVyc2lzdGVuY2Uge1xuICAgIHByaXZhdGUgY29uZmlnOiBQb3N0SG9nQ29uZmlnXG4gICAgcHJvcHM6IFByb3BlcnRpZXNcbiAgICBzdG9yYWdlOiBQZXJzaXN0ZW50U3RvcmVcbiAgICBjYW1wYWlnbl9wYXJhbXNfc2F2ZWQ6IGJvb2xlYW5cbiAgICBuYW1lOiBzdHJpbmdcbiAgICBkaXNhYmxlZDogYm9vbGVhbiB8IHVuZGVmaW5lZFxuICAgIHNlY3VyZTogYm9vbGVhbiB8IHVuZGVmaW5lZFxuICAgIGV4cGlyZV9kYXlzOiBudW1iZXIgfCB1bmRlZmluZWRcbiAgICBkZWZhdWx0X2V4cGlyeTogbnVtYmVyIHwgdW5kZWZpbmVkXG4gICAgY3Jvc3Nfc3ViZG9tYWluOiBib29sZWFuIHwgdW5kZWZpbmVkXG5cbiAgICBjb25zdHJ1Y3Rvcihjb25maWc6IFBvc3RIb2dDb25maWcpIHtcbiAgICAgICAgdGhpcy5jb25maWcgPSBjb25maWdcbiAgICAgICAgdGhpcy5wcm9wcyA9IHt9XG4gICAgICAgIHRoaXMuY2FtcGFpZ25fcGFyYW1zX3NhdmVkID0gZmFsc2VcbiAgICAgICAgdGhpcy5uYW1lID0gcGFyc2VOYW1lKGNvbmZpZylcbiAgICAgICAgdGhpcy5zdG9yYWdlID0gdGhpcy5idWlsZFN0b3JhZ2UoY29uZmlnKVxuICAgICAgICB0aGlzLmxvYWQoKVxuICAgICAgICB0aGlzLnVwZGF0ZV9jb25maWcoY29uZmlnLCBjb25maWcpXG4gICAgICAgIHRoaXMuc2F2ZSgpXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBidWlsZFN0b3JhZ2UoY29uZmlnOiBQb3N0SG9nQ29uZmlnKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIENBU0VfSU5TRU5TSVRJVkVfUEVSU0lTVEVOQ0VfVFlQRVMuaW5kZXhPZihcbiAgICAgICAgICAgICAgICBjb25maWdbJ3BlcnNpc3RlbmNlJ10udG9Mb3dlckNhc2UoKSBhcyBMb3dlcmNhc2U8UG9zdEhvZ0NvbmZpZ1sncGVyc2lzdGVuY2UnXT5cbiAgICAgICAgICAgICkgPT09IC0xXG4gICAgICAgICkge1xuICAgICAgICAgICAgbG9nZ2VyLmNyaXRpY2FsKFxuICAgICAgICAgICAgICAgICdVbmtub3duIHBlcnNpc3RlbmNlIHR5cGUgJyArIGNvbmZpZ1sncGVyc2lzdGVuY2UnXSArICc7IGZhbGxpbmcgYmFjayB0byBsb2NhbFN0b3JhZ2UrY29va2llJ1xuICAgICAgICAgICAgKVxuICAgICAgICAgICAgY29uZmlnWydwZXJzaXN0ZW5jZSddID0gJ2xvY2FsU3RvcmFnZStjb29raWUnXG4gICAgICAgIH1cblxuICAgICAgICBsZXQgc3RvcmU6IFBlcnNpc3RlbnRTdG9yZVxuICAgICAgICAvLyBXZSBoYW5kbGUgc3RvcmFnZSB0eXBlIGluIGEgY2FzZS1pbnNlbnNpdGl2ZSB3YXkgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5XG4gICAgICAgIGNvbnN0IHN0b3JhZ2VfdHlwZSA9IGNvbmZpZ1sncGVyc2lzdGVuY2UnXS50b0xvd2VyQ2FzZSgpIGFzIExvd2VyY2FzZTxQb3N0SG9nQ29uZmlnWydwZXJzaXN0ZW5jZSddPlxuICAgICAgICBpZiAoc3RvcmFnZV90eXBlID09PSAnbG9jYWxzdG9yYWdlJyAmJiBsb2NhbFN0b3JlLmlzX3N1cHBvcnRlZCgpKSB7XG4gICAgICAgICAgICBzdG9yZSA9IGxvY2FsU3RvcmVcbiAgICAgICAgfSBlbHNlIGlmIChzdG9yYWdlX3R5cGUgPT09ICdsb2NhbHN0b3JhZ2UrY29va2llJyAmJiBsb2NhbFBsdXNDb29raWVTdG9yZS5pc19zdXBwb3J0ZWQoKSkge1xuICAgICAgICAgICAgc3RvcmUgPSBsb2NhbFBsdXNDb29raWVTdG9yZVxuICAgICAgICB9IGVsc2UgaWYgKHN0b3JhZ2VfdHlwZSA9PT0gJ3Nlc3Npb25zdG9yYWdlJyAmJiBzZXNzaW9uU3RvcmUuaXNfc3VwcG9ydGVkKCkpIHtcbiAgICAgICAgICAgIHN0b3JlID0gc2Vzc2lvblN0b3JlXG4gICAgICAgIH0gZWxzZSBpZiAoc3RvcmFnZV90eXBlID09PSAnbWVtb3J5Jykge1xuICAgICAgICAgICAgc3RvcmUgPSBtZW1vcnlTdG9yZVxuICAgICAgICB9IGVsc2UgaWYgKHN0b3JhZ2VfdHlwZSA9PT0gJ2Nvb2tpZScpIHtcbiAgICAgICAgICAgIHN0b3JlID0gY29va2llU3RvcmVcbiAgICAgICAgfSBlbHNlIGlmIChsb2NhbFBsdXNDb29raWVTdG9yZS5pc19zdXBwb3J0ZWQoKSkge1xuICAgICAgICAgICAgLy8gc2VsZWN0ZWQgc3RvcmFnZSB0eXBlIHdhc24ndCBzdXBwb3J0ZWQsIGZhbGxiYWNrIHRvICdsb2NhbHN0b3JhZ2UrY29va2llJyBpZiBwb3NzaWJsZVxuICAgICAgICAgICAgc3RvcmUgPSBsb2NhbFBsdXNDb29raWVTdG9yZVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3RvcmUgPSBjb29raWVTdG9yZVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHN0b3JlXG4gICAgfVxuXG4gICAgcHJvcGVydGllcygpOiBQcm9wZXJ0aWVzIHtcbiAgICAgICAgY29uc3QgcDogUHJvcGVydGllcyA9IHt9XG4gICAgICAgIC8vIEZpbHRlciBvdXQgcmVzZXJ2ZWQgcHJvcGVydGllc1xuICAgICAgICBfZWFjaCh0aGlzLnByb3BzLCBmdW5jdGlvbiAodiwgaykge1xuICAgICAgICAgICAgaWYgKGsgPT09IEVOQUJMRURfRkVBVFVSRV9GTEFHUyAmJiBfaXNPYmplY3QodikpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXModilcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgcFtgJGZlYXR1cmUvJHtrZXlzW2ldfWBdID0gdltrZXlzW2ldXVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIV9pbmNsdWRlKFBFUlNJU1RFTkNFX1JFU0VSVkVEX1BST1BFUlRJRVMsIGspKSB7XG4gICAgICAgICAgICAgICAgcFtrXSA9IHZcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIHBcbiAgICB9XG5cbiAgICBsb2FkKCk6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy5kaXNhYmxlZCkge1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBlbnRyeSA9IHRoaXMuc3RvcmFnZS5wYXJzZSh0aGlzLm5hbWUpXG5cbiAgICAgICAgaWYgKGVudHJ5KSB7XG4gICAgICAgICAgICB0aGlzLnByb3BzID0gX2V4dGVuZCh7fSwgZW50cnkpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBOT1RFOiBTYXZpbmcgZnJlcXVlbnRseSBjYXVzZXMgaXNzdWVzIHdpdGggUmVjb3JkaW5ncyBhbmQgQ29uc2VudCBNYW5hZ2VtZW50IFBsYXRmb3JtIChDTVApIHRvb2xzIHdoaWNoXG4gICAgICogb2JzZXJ2ZSBjb29raWUgY2hhbmdlcywgYW5kIG1vZGlmeSB0aGVpciBVSSwgb2Z0ZW4gY2F1c2luZyBpbmZpbml0ZSBsb29wcy5cbiAgICAgKiBBcyBzdWNoIGNhbGxlcnMgb2YgdGhpcyBzaG91bGQgaWRlYWxseSBjaGVjayB0aGF0IHRoZSBkYXRhIGhhcyBjaGFuZ2VkIGJlZm9yZWhhbmRcbiAgICAgKi9cbiAgICBzYXZlKCk6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy5kaXNhYmxlZCkge1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zdG9yYWdlLnNldCh0aGlzLm5hbWUsIHRoaXMucHJvcHMsIHRoaXMuZXhwaXJlX2RheXMsIHRoaXMuY3Jvc3Nfc3ViZG9tYWluLCB0aGlzLnNlY3VyZSlcbiAgICB9XG5cbiAgICByZW1vdmUoKTogdm9pZCB7XG4gICAgICAgIC8vIHJlbW92ZSBib3RoIGRvbWFpbiBhbmQgc3ViZG9tYWluIGNvb2tpZXNcbiAgICAgICAgdGhpcy5zdG9yYWdlLnJlbW92ZSh0aGlzLm5hbWUsIGZhbHNlKVxuICAgICAgICB0aGlzLnN0b3JhZ2UucmVtb3ZlKHRoaXMubmFtZSwgdHJ1ZSlcbiAgICB9XG5cbiAgICAvLyByZW1vdmVzIHRoZSBzdG9yYWdlIGVudHJ5IGFuZCBkZWxldGVzIGFsbCBsb2FkZWQgZGF0YVxuICAgIC8vIGZvcmNlZCBuYW1lIGZvciB0ZXN0c1xuXG4gICAgY2xlYXIoKTogdm9pZCB7XG4gICAgICAgIHRoaXMucmVtb3ZlKClcbiAgICAgICAgdGhpcy5wcm9wcyA9IHt9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHByb3BzXG4gICAgICogQHBhcmFtIHsqPX0gZGVmYXVsdF92YWx1ZVxuICAgICAqIEBwYXJhbSB7bnVtYmVyPX0gZGF5c1xuICAgICAqL1xuXG4gICAgcmVnaXN0ZXJfb25jZShwcm9wczogUHJvcGVydGllcywgZGVmYXVsdF92YWx1ZTogYW55LCBkYXlzPzogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgICAgIGlmIChfaXNPYmplY3QocHJvcHMpKSB7XG4gICAgICAgICAgICBpZiAoX2lzVW5kZWZpbmVkKGRlZmF1bHRfdmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgZGVmYXVsdF92YWx1ZSA9ICdOb25lJ1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5leHBpcmVfZGF5cyA9IF9pc1VuZGVmaW5lZChkYXlzKSA/IHRoaXMuZGVmYXVsdF9leHBpcnkgOiBkYXlzXG5cbiAgICAgICAgICAgIGxldCBoYXNDaGFuZ2VzID0gZmFsc2VcblxuICAgICAgICAgICAgX2VhY2gocHJvcHMsICh2YWwsIHByb3ApID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMucHJvcHMuaGFzT3duUHJvcGVydHkocHJvcCkgfHwgdGhpcy5wcm9wc1twcm9wXSA9PT0gZGVmYXVsdF92YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzW3Byb3BdID0gdmFsXG4gICAgICAgICAgICAgICAgICAgIGhhc0NoYW5nZXMgPSB0cnVlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgaWYgKGhhc0NoYW5nZXMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNhdmUoKVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHByb3BzXG4gICAgICogQHBhcmFtIHtudW1iZXI9fSBkYXlzXG4gICAgICovXG5cbiAgICByZWdpc3Rlcihwcm9wczogUHJvcGVydGllcywgZGF5cz86IG51bWJlcik6IGJvb2xlYW4ge1xuICAgICAgICBpZiAoX2lzT2JqZWN0KHByb3BzKSkge1xuICAgICAgICAgICAgdGhpcy5leHBpcmVfZGF5cyA9IF9pc1VuZGVmaW5lZChkYXlzKSA/IHRoaXMuZGVmYXVsdF9leHBpcnkgOiBkYXlzXG5cbiAgICAgICAgICAgIGxldCBoYXNDaGFuZ2VzID0gZmFsc2VcblxuICAgICAgICAgICAgX2VhY2gocHJvcHMsICh2YWwsIHByb3ApID0+IHtcbiAgICAgICAgICAgICAgICBpZiAocHJvcHMuaGFzT3duUHJvcGVydHkocHJvcCkgJiYgdGhpcy5wcm9wc1twcm9wXSAhPT0gdmFsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHNbcHJvcF0gPSB2YWxcbiAgICAgICAgICAgICAgICAgICAgaGFzQ2hhbmdlcyA9IHRydWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICBpZiAoaGFzQ2hhbmdlcykge1xuICAgICAgICAgICAgICAgIHRoaXMuc2F2ZSgpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG5cbiAgICB1bnJlZ2lzdGVyKHByb3A6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICBpZiAocHJvcCBpbiB0aGlzLnByb3BzKSB7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy5wcm9wc1twcm9wXVxuICAgICAgICAgICAgdGhpcy5zYXZlKClcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHVwZGF0ZV9jYW1wYWlnbl9wYXJhbXMoKTogdm9pZCB7XG4gICAgICAgIGlmICghdGhpcy5jYW1wYWlnbl9wYXJhbXNfc2F2ZWQpIHtcbiAgICAgICAgICAgIHRoaXMucmVnaXN0ZXIoX2luZm8uY2FtcGFpZ25QYXJhbXModGhpcy5jb25maWcuY3VzdG9tX2NhbXBhaWduX3BhcmFtcykpXG4gICAgICAgICAgICB0aGlzLmNhbXBhaWduX3BhcmFtc19zYXZlZCA9IHRydWVcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHVwZGF0ZV9zZWFyY2hfa2V5d29yZCgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5yZWdpc3RlcihfaW5mby5zZWFyY2hJbmZvKCkpXG4gICAgfVxuXG4gICAgdXBkYXRlX3JlZmVycmVyX2luZm8oKTogdm9pZCB7XG4gICAgICAgIHRoaXMucmVnaXN0ZXIoe1xuICAgICAgICAgICAgJHJlZmVycmVyOiB0aGlzLnByb3BzWyckcmVmZXJyZXInXSB8fCBfaW5mby5yZWZlcnJlcigpLFxuICAgICAgICAgICAgJHJlZmVycmluZ19kb21haW46IHRoaXMucHJvcHNbJyRyZWZlcnJpbmdfZG9tYWluJ10gfHwgX2luZm8ucmVmZXJyaW5nRG9tYWluKCksXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgZ2V0X3JlZmVycmVyX2luZm8oKTogUHJvcGVydGllcyB7XG4gICAgICAgIHJldHVybiBfc3RyaXBfZW1wdHlfcHJvcGVydGllcyh7XG4gICAgICAgICAgICAkcmVmZXJyZXI6IHRoaXNbJ3Byb3BzJ11bJyRyZWZlcnJlciddLFxuICAgICAgICAgICAgJHJlZmVycmluZ19kb21haW46IHRoaXNbJ3Byb3BzJ11bJyRyZWZlcnJpbmdfZG9tYWluJ10sXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgLy8gc2FmZWx5IGZpbGxzIHRoZSBwYXNzZWQgaW4gb2JqZWN0IHdpdGggc3RvcmVkIHByb3BlcnRpZXMsXG4gICAgLy8gZG9lcyBub3Qgb3ZlcnJpZGUgYW55IHByb3BlcnRpZXMgZGVmaW5lZCBpbiBib3RoXG4gICAgLy8gcmV0dXJucyB0aGUgcGFzc2VkIGluIG9iamVjdFxuXG4gICAgc2FmZV9tZXJnZShwcm9wczogUHJvcGVydGllcyk6IFByb3BlcnRpZXMge1xuICAgICAgICBfZWFjaCh0aGlzLnByb3BzLCBmdW5jdGlvbiAodmFsLCBwcm9wKSB7XG4gICAgICAgICAgICBpZiAoIShwcm9wIGluIHByb3BzKSkge1xuICAgICAgICAgICAgICAgIHByb3BzW3Byb3BdID0gdmFsXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG5cbiAgICAgICAgcmV0dXJuIHByb3BzXG4gICAgfVxuXG4gICAgdXBkYXRlX2NvbmZpZyhjb25maWc6IFBvc3RIb2dDb25maWcsIG9sZENvbmZpZzogUG9zdEhvZ0NvbmZpZyk6IHZvaWQge1xuICAgICAgICB0aGlzLmRlZmF1bHRfZXhwaXJ5ID0gdGhpcy5leHBpcmVfZGF5cyA9IGNvbmZpZ1snY29va2llX2V4cGlyYXRpb24nXVxuICAgICAgICB0aGlzLnNldF9kaXNhYmxlZChjb25maWdbJ2Rpc2FibGVfcGVyc2lzdGVuY2UnXSlcbiAgICAgICAgdGhpcy5zZXRfY3Jvc3Nfc3ViZG9tYWluKGNvbmZpZ1snY3Jvc3Nfc3ViZG9tYWluX2Nvb2tpZSddKVxuICAgICAgICB0aGlzLnNldF9zZWN1cmUoY29uZmlnWydzZWN1cmVfY29va2llJ10pXG5cbiAgICAgICAgaWYgKGNvbmZpZy5wZXJzaXN0ZW5jZSAhPT0gb2xkQ29uZmlnLnBlcnNpc3RlbmNlKSB7XG4gICAgICAgICAgICAvLyBJZiB0aGUgcGVyc2lzdGVuY2UgdHlwZSBoYXMgY2hhbmdlZCwgd2UgbmVlZCB0byBtaWdyYXRlIHRoZSBkYXRhLlxuICAgICAgICAgICAgY29uc3QgbmV3U3RvcmUgPSB0aGlzLmJ1aWxkU3RvcmFnZShjb25maWcpXG4gICAgICAgICAgICBjb25zdCBwcm9wcyA9IHRoaXMucHJvcHNcblxuICAgICAgICAgICAgLy8gY2xlYXIgdGhlIG9sZCBzdG9yZVxuICAgICAgICAgICAgdGhpcy5jbGVhcigpXG4gICAgICAgICAgICB0aGlzLnN0b3JhZ2UgPSBuZXdTdG9yZVxuICAgICAgICAgICAgdGhpcy5wcm9wcyA9IHByb3BzXG5cbiAgICAgICAgICAgIHRoaXMuc2F2ZSgpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzZXRfZGlzYWJsZWQoZGlzYWJsZWQ6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICAgICAgdGhpcy5kaXNhYmxlZCA9IGRpc2FibGVkXG4gICAgICAgIGlmICh0aGlzLmRpc2FibGVkKSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZSgpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnNhdmUoKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2V0X2Nyb3NzX3N1YmRvbWFpbihjcm9zc19zdWJkb21haW46IGJvb2xlYW4pOiB2b2lkIHtcbiAgICAgICAgaWYgKGNyb3NzX3N1YmRvbWFpbiAhPT0gdGhpcy5jcm9zc19zdWJkb21haW4pIHtcbiAgICAgICAgICAgIHRoaXMuY3Jvc3Nfc3ViZG9tYWluID0gY3Jvc3Nfc3ViZG9tYWluXG4gICAgICAgICAgICB0aGlzLnJlbW92ZSgpXG4gICAgICAgICAgICB0aGlzLnNhdmUoKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0X2Nyb3NzX3N1YmRvbWFpbigpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5jcm9zc19zdWJkb21haW5cbiAgICB9XG5cbiAgICBzZXRfc2VjdXJlKHNlY3VyZTogYm9vbGVhbik6IHZvaWQge1xuICAgICAgICBpZiAoc2VjdXJlICE9PSB0aGlzLnNlY3VyZSkge1xuICAgICAgICAgICAgdGhpcy5zZWN1cmUgPSBzZWN1cmVcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlKClcbiAgICAgICAgICAgIHRoaXMuc2F2ZSgpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzZXRfZXZlbnRfdGltZXIoZXZlbnRfbmFtZTogc3RyaW5nLCB0aW1lc3RhbXA6IG51bWJlcik6IHZvaWQge1xuICAgICAgICBjb25zdCB0aW1lcnMgPSB0aGlzLnByb3BzW0VWRU5UX1RJTUVSU19LRVldIHx8IHt9XG4gICAgICAgIHRpbWVyc1tldmVudF9uYW1lXSA9IHRpbWVzdGFtcFxuICAgICAgICB0aGlzLnByb3BzW0VWRU5UX1RJTUVSU19LRVldID0gdGltZXJzXG4gICAgICAgIHRoaXMuc2F2ZSgpXG4gICAgfVxuXG4gICAgcmVtb3ZlX2V2ZW50X3RpbWVyKGV2ZW50X25hbWU6IHN0cmluZyk6IG51bWJlciB7XG4gICAgICAgIGNvbnN0IHRpbWVycyA9IHRoaXMucHJvcHNbRVZFTlRfVElNRVJTX0tFWV0gfHwge31cbiAgICAgICAgY29uc3QgdGltZXN0YW1wID0gdGltZXJzW2V2ZW50X25hbWVdXG4gICAgICAgIGlmICghX2lzVW5kZWZpbmVkKHRpbWVzdGFtcCkpIHtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnByb3BzW0VWRU5UX1RJTUVSU19LRVldW2V2ZW50X25hbWVdXG4gICAgICAgICAgICB0aGlzLnNhdmUoKVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aW1lc3RhbXBcbiAgICB9XG5cbiAgICBnZXRfdXNlcl9zdGF0ZSgpOiAnYW5vbnltb3VzJyB8ICdpZGVudGlmaWVkJyB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb3BzW1VTRVJfU1RBVEVdIHx8ICdhbm9ueW1vdXMnXG4gICAgfVxuXG4gICAgc2V0X3VzZXJfc3RhdGUoc3RhdGU6ICdhbm9ueW1vdXMnIHwgJ2lkZW50aWZpZWQnKTogdm9pZCB7XG4gICAgICAgIHRoaXMucHJvcHNbVVNFUl9TVEFURV0gPSBzdGF0ZVxuICAgICAgICB0aGlzLnNhdmUoKVxuICAgIH1cblxuICAgIGdldF9xdW90YV9saW1pdHMoKTogUmVjb3JkPHN0cmluZywgbnVtYmVyPiB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb3BzW1BPU1RIT0dfUVVPVEFfTElNSVRFRF0gfHwge31cbiAgICB9XG5cbiAgICBzZXRfcXVvdGFfbGltaXRzKHN0YXRlOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+KTogdm9pZCB7XG4gICAgICAgIHRoaXMucHJvcHNbUE9TVEhPR19RVU9UQV9MSU1JVEVEXSA9IHN0YXRlXG4gICAgICAgIHRoaXMuc2F2ZSgpXG4gICAgfVxufVxuIiwgImltcG9ydCB0eXBlIHtcbiAgICBLZWVwSWZyYW1lU3JjRm4sXG4gICAgUmVjb3JkUGx1Z2luLFxuICAgIFNhbXBsaW5nU3RyYXRlZ3ksXG4gICAgYmxvY2tDbGFzcyxcbiAgICBldmVudFdpdGhUaW1lLFxuICAgIGhvb2tzUGFyYW0sXG4gICAgbGlzdGVuZXJIYW5kbGVyLFxuICAgIG1hc2tUZXh0Q2xhc3MsXG4gICAgcGx1Z2luRXZlbnQsXG4gICAgbXV0YXRpb25DYWxsYmFja1BhcmFtLFxufSBmcm9tICdAcnJ3ZWIvdHlwZXMnXG5pbXBvcnQgdHlwZSB7IE1pcnJvciwgTWFza0lucHV0T3B0aW9ucywgTWFza0lucHV0Rm4sIE1hc2tUZXh0Rm4sIFNsaW1ET01PcHRpb25zLCBEYXRhVVJMT3B0aW9ucyB9IGZyb20gJ3Jyd2ViLXNuYXBzaG90J1xuXG5pbXBvcnQgeyBfaXNPYmplY3QgfSBmcm9tICcuLi8uLi91dGlscy90eXBlLXV0aWxzJ1xuXG5leHBvcnQgY29uc3QgcmVwbGFjZW1lbnRJbWFnZVVSSSA9XG4gICAgJ2RhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEhOMlp5QjNhV1IwYUQwaU1UWWlJR2hsYVdkb2REMGlNVFlpSUhacFpYZENiM2c5SWpBZ01DQXhOaUF4TmlJZ1ptbHNiRDBpYm05dVpTSWdlRzFzYm5NOUltaDBkSEE2THk5M2QzY3Vkek11YjNKbkx6SXdNREF2YzNabklqNEtQSEpsWTNRZ2QybGtkR2c5SWpFMklpQm9aV2xuYUhROUlqRTJJaUJtYVd4c1BTSmliR0ZqYXlJdlBnbzhjR0YwYUNCa1BTSk5PQ0F3U0RFMlREQWdNVFpXT0V3NElEQmFJaUJtYVd4c1BTSWpNa1F5UkRKRUlpOCtDanh3WVhSb0lHUTlJazB4TmlBNFZqRTJTRGhNTVRZZ09Gb2lJR1pwYkd3OUlpTXlSREpFTWtRaUx6NEtQQzl6ZG1jK0NnPT0nXG5cbmV4cG9ydCBjb25zdCBGVUxMX1NOQVBTSE9UX0VWRU5UX1RZUEUgPSAyXG5leHBvcnQgY29uc3QgTUVUQV9FVkVOVF9UWVBFID0gNFxuZXhwb3J0IGNvbnN0IElOQ1JFTUVOVEFMX1NOQVBTSE9UX0VWRU5UX1RZUEUgPSAzXG5leHBvcnQgY29uc3QgUExVR0lOX0VWRU5UX1RZUEUgPSA2XG5leHBvcnQgY29uc3QgTVVUQVRJT05fU09VUkNFX1RZUEUgPSAwXG5cbmV4cG9ydCBjb25zdCBNQVhfTUVTU0FHRV9TSVpFID0gNTAwMDAwMCAvLyB+NW1iXG5cbmV4cG9ydCB0eXBlIHJyd2ViUmVjb3JkID0ge1xuICAgIChvcHRpb25zOiByZWNvcmRPcHRpb25zPGV2ZW50V2l0aFRpbWU+KTogbGlzdGVuZXJIYW5kbGVyXG4gICAgYWRkQ3VzdG9tRXZlbnQ6ICh0YWc6IHN0cmluZywgcGF5bG9hZDogYW55KSA9PiB2b2lkXG4gICAgdGFrZUZ1bGxTbmFwc2hvdDogKCkgPT4gdm9pZFxuICAgIG1pcnJvcjogTWlycm9yXG59XG5cbmV4cG9ydCBkZWNsYXJlIHR5cGUgcmVjb3JkT3B0aW9uczxUPiA9IHtcbiAgICBlbWl0PzogKGU6IFQsIGlzQ2hlY2tvdXQ/OiBib29sZWFuKSA9PiB2b2lkXG4gICAgY2hlY2tvdXRFdmVyeU50aD86IG51bWJlclxuICAgIGNoZWNrb3V0RXZlcnlObXM/OiBudW1iZXJcbiAgICBibG9ja0NsYXNzPzogYmxvY2tDbGFzc1xuICAgIGJsb2NrU2VsZWN0b3I/OiBzdHJpbmdcbiAgICBpZ25vcmVDbGFzcz86IHN0cmluZ1xuICAgIG1hc2tUZXh0Q2xhc3M/OiBtYXNrVGV4dENsYXNzXG4gICAgbWFza1RleHRTZWxlY3Rvcj86IHN0cmluZ1xuICAgIG1hc2tBbGxJbnB1dHM/OiBib29sZWFuXG4gICAgbWFza0lucHV0T3B0aW9ucz86IE1hc2tJbnB1dE9wdGlvbnNcbiAgICBtYXNrSW5wdXRGbj86IE1hc2tJbnB1dEZuXG4gICAgbWFza1RleHRGbj86IE1hc2tUZXh0Rm5cbiAgICBzbGltRE9NT3B0aW9ucz86IFNsaW1ET01PcHRpb25zIHwgJ2FsbCcgfCB0cnVlXG4gICAgaWdub3JlQ1NTQXR0cmlidXRlcz86IFNldDxzdHJpbmc+XG4gICAgaW5saW5lU3R5bGVzaGVldD86IGJvb2xlYW5cbiAgICBob29rcz86IGhvb2tzUGFyYW1cbiAgICAvLyBwYWNrRm4/OiBQYWNrRm5cbiAgICBzYW1wbGluZz86IFNhbXBsaW5nU3RyYXRlZ3lcbiAgICBkYXRhVVJMT3B0aW9ucz86IERhdGFVUkxPcHRpb25zXG4gICAgcmVjb3JkQ2FudmFzPzogYm9vbGVhblxuICAgIHJlY29yZENyb3NzT3JpZ2luSWZyYW1lcz86IGJvb2xlYW5cbiAgICByZWNvcmRBZnRlcj86ICdET01Db250ZW50TG9hZGVkJyB8ICdsb2FkJ1xuICAgIHVzZXJUcmlnZ2VyZWRPbklucHV0PzogYm9vbGVhblxuICAgIGNvbGxlY3RGb250cz86IGJvb2xlYW5cbiAgICBpbmxpbmVJbWFnZXM/OiBib29sZWFuXG4gICAgcGx1Z2lucz86IFJlY29yZFBsdWdpbltdXG4gICAgbW91c2Vtb3ZlV2FpdD86IG51bWJlclxuICAgIGtlZXBJZnJhbWVTcmNGbj86IEtlZXBJZnJhbWVTcmNGblxuICAgIC8vIGVycm9ySGFuZGxlcj86IEVycm9ySGFuZGxlclxufVxuXG4vKlxuICogQ2hlY2sgd2hldGhlciBhIGRhdGEgcGF5bG9hZCBpcyBuZWFyaW5nIDVtYi4gSWYgaXQgaXMsIGl0IGNoZWNrcyB0aGUgZGF0YSBmb3JcbiAqIGRhdGEgVVJJcyAodGhlIGxpa2VseSBjdWxwcml0IGZvciBsYXJnZSBwYXlsb2FkcykuIElmIGl0IGZpbmRzIGRhdGEgVVJJcywgaXQgZWl0aGVyIHJlcGxhY2VzXG4gKiBpdCB3aXRoIGEgZ2VuZXJpYyBpbWFnZSAoaWYgaXQncyBhbiBpbWFnZSkgb3IgcmVtb3ZlcyBpdC5cbiAqIEBkYXRhIHtvYmplY3R9IHRoZSByci13ZWIgZGF0YSBvYmplY3RcbiAqIEByZXR1cm5zIHtvYmplY3R9IHRoZSByci13ZWIgZGF0YSBvYmplY3Qgd2l0aCBkYXRhIHVyaXMgZmlsdGVyZWQgb3V0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBlbnN1cmVNYXhNZXNzYWdlU2l6ZShkYXRhOiBldmVudFdpdGhUaW1lKTogeyBldmVudDogZXZlbnRXaXRoVGltZTsgc2l6ZTogbnVtYmVyIH0ge1xuICAgIGxldCBzdHJpbmdpZmllZERhdGEgPSBKU09OLnN0cmluZ2lmeShkYXRhKVxuICAgIC8vIE5vdGU6IHdpdGggY29tcHJlc3Npb24sIHRoaXMgbGltaXQgbWF5IGJlIGFibGUgdG8gYmUgaW5jcmVhc2VkXG4gICAgLy8gYnV0IHdlJ3JlIGFzc3VtaW5nIG1vc3Qgb2YgdGhlIHNpemUgaXMgZnJvbSBhIGRhdGEgdXJpIHdoaWNoXG4gICAgLy8gaXMgdW5saWtlbHkgdG8gYmUgY29tcHJlc3NlZCBmdXJ0aGVyXG5cbiAgICBpZiAoc3RyaW5naWZpZWREYXRhLmxlbmd0aCA+IE1BWF9NRVNTQUdFX1NJWkUpIHtcbiAgICAgICAgLy8gUmVnZXggdGhhdCBtYXRjaGVzIHRoZSBwYXR0ZXJuIGZvciBhIGRhdGFVUkkgd2l0aCB0aGUgc2hhcGUgJ2RhdGE6e21pbWUgdHlwZX07e2VuY29kaW5nfSx7ZGF0YX0nLiBJdDpcbiAgICAgICAgLy8gMSkgQ2hlY2tzIGlmIHRoZSBwYXR0ZXJuIHN0YXJ0cyB3aXRoICdkYXRhOicgKHBvdGVudGlhbGx5LCBub3QgYXQgdGhlIHN0YXJ0IG9mIHRoZSBzdHJpbmcpXG4gICAgICAgIC8vIDIpIEV4dHJhY3RzIHRoZSBtaW1lIHR5cGUgb2YgdGhlIGRhdGEgdXJpIGluIHRoZSBmaXJzdCBncm91cFxuICAgICAgICAvLyAzKSBEZXRlcm1pbmVzIHdoZW4gdGhlIGRhdGEgVVJJIGVuZHMuRGVwZW5kaW5nIG9uIGlmIGl0J3MgdXNlZCBpbiB0aGUgc3JjIHRhZyBvciBjc3MsIGl0IGNhbiBlbmQgd2l0aCBhICkgb3IgXCJcbiAgICAgICAgY29uc3QgZGF0YVVSSVJlZ2V4ID0gL2RhdGE6KFtcXHcvXFwtLl0rKTsoXFx3KyksKFteKVwiXSopL2dpbVxuICAgICAgICBjb25zdCBtYXRjaGVzID0gc3RyaW5naWZpZWREYXRhLm1hdGNoQWxsKGRhdGFVUklSZWdleClcbiAgICAgICAgZm9yIChjb25zdCBtYXRjaCBvZiBtYXRjaGVzKSB7XG4gICAgICAgICAgICBpZiAobWF0Y2hbMV0udG9Mb2NhbGVMb3dlckNhc2UoKS5zbGljZSgwLCA2KSA9PT0gJ2ltYWdlLycpIHtcbiAgICAgICAgICAgICAgICBzdHJpbmdpZmllZERhdGEgPSBzdHJpbmdpZmllZERhdGEucmVwbGFjZShtYXRjaFswXSwgcmVwbGFjZW1lbnRJbWFnZVVSSSlcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc3RyaW5naWZpZWREYXRhID0gc3RyaW5naWZpZWREYXRhLnJlcGxhY2UobWF0Y2hbMF0sICcnKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7IGV2ZW50OiBKU09OLnBhcnNlKHN0cmluZ2lmaWVkRGF0YSksIHNpemU6IHN0cmluZ2lmaWVkRGF0YS5sZW5ndGggfVxufVxuXG5leHBvcnQgY29uc3QgQ09OU09MRV9MT0dfUExVR0lOX05BTUUgPSAncnJ3ZWIvY29uc29sZUAxJyAvLyBUaGUgbmFtZSBvZiB0aGUgcnItd2ViIHBsdWdpbiB0aGF0IGVtaXRzIGNvbnNvbGUgbG9nc1xuXG4vLyBDb25zb2xlIGxvZ3MgY2FuIGJlIHJlYWxseSBsYXJnZS4gVGhpcyBmdW5jdGlvbiB0cnVuY2F0ZXMgbGFyZ2UgbG9nc1xuLy8gSXQncyBhIHNpbXBsZSBmdW5jdGlvbiB0aGF0IGp1c3QgdHJ1bmNhdGVzIGxvbmcgc3RyaW5ncy5cbi8vIFRPRE86IElkZWFsbHkgdGhpcyBmdW5jdGlvbiB3b3VsZCBoYXZlIGJldHRlciBoYW5kbGluZyBvZiBvYmplY3RzICsgbGlzdHMsXG4vLyBzbyB0aGV5IGNvdWxkIHN0aWxsIGJlIHJlbmRlcmVkIGluIGEgcHJldHR5IHdheSBhZnRlciB0cnVuY2F0aW9uLlxuZXhwb3J0IGZ1bmN0aW9uIHRydW5jYXRlTGFyZ2VDb25zb2xlTG9ncyhfZXZlbnQ6IGV2ZW50V2l0aFRpbWUpIHtcbiAgICBjb25zdCBldmVudCA9IF9ldmVudCBhcyBwbHVnaW5FdmVudDx7IHBheWxvYWQ6IHN0cmluZ1tdIH0+XG5cbiAgICBjb25zdCBNQVhfU1RSSU5HX1NJWkUgPSAyMDAwIC8vIE1heGltdW0gbnVtYmVyIG9mIGNoYXJhY3RlcnMgYWxsb3dlZCBpbiBhIHN0cmluZ1xuICAgIGNvbnN0IE1BWF9TVFJJTkdTX1BFUl9MT0cgPSAxMCAvLyBBIGxvZyBjYW4gY29uc2lzdCBvZiBtdWx0aXBsZSBzdHJpbmdzIChlLmcuIGNvbnNvbC5sb2coJ3N0cmluZzEnLCAnc3RyaW5nMicpKVxuXG4gICAgaWYgKFxuICAgICAgICBldmVudCAmJlxuICAgICAgICBfaXNPYmplY3QoZXZlbnQpICYmXG4gICAgICAgIGV2ZW50LnR5cGUgPT09IFBMVUdJTl9FVkVOVF9UWVBFICYmXG4gICAgICAgIF9pc09iamVjdChldmVudC5kYXRhKSAmJlxuICAgICAgICBldmVudC5kYXRhLnBsdWdpbiA9PT0gQ09OU09MRV9MT0dfUExVR0lOX05BTUVcbiAgICApIHtcbiAgICAgICAgLy8gTm90ZTogZXZlbnQuZGF0YS5wYXlsb2FkLnBheWxvYWQgY29tZXMgZnJvbSByci13ZWIsIGFuZCBpcyBhbiBhcnJheSBvZiBzdHJpbmdzXG4gICAgICAgIGlmIChldmVudC5kYXRhLnBheWxvYWQucGF5bG9hZC5sZW5ndGggPiBNQVhfU1RSSU5HU19QRVJfTE9HKSB7XG4gICAgICAgICAgICBldmVudC5kYXRhLnBheWxvYWQucGF5bG9hZCA9IGV2ZW50LmRhdGEucGF5bG9hZC5wYXlsb2FkLnNsaWNlKDAsIE1BWF9TVFJJTkdTX1BFUl9MT0cpXG4gICAgICAgICAgICBldmVudC5kYXRhLnBheWxvYWQucGF5bG9hZC5wdXNoKCcuLi5bdHJ1bmNhdGVkXScpXG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdXBkYXRlZFBheWxvYWQgPSBbXVxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGV2ZW50LmRhdGEucGF5bG9hZC5wYXlsb2FkLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgZXZlbnQuZGF0YS5wYXlsb2FkLnBheWxvYWRbaV0gJiYgLy8gVmFsdWUgY2FuIGJlIG51bGxcbiAgICAgICAgICAgICAgICBldmVudC5kYXRhLnBheWxvYWQucGF5bG9hZFtpXS5sZW5ndGggPiBNQVhfU1RSSU5HX1NJWkVcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHVwZGF0ZWRQYXlsb2FkLnB1c2goZXZlbnQuZGF0YS5wYXlsb2FkLnBheWxvYWRbaV0uc2xpY2UoMCwgTUFYX1NUUklOR19TSVpFKSArICcuLi5bdHJ1bmNhdGVkXScpXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHVwZGF0ZWRQYXlsb2FkLnB1c2goZXZlbnQuZGF0YS5wYXlsb2FkLnBheWxvYWRbaV0pXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZXZlbnQuZGF0YS5wYXlsb2FkLnBheWxvYWQgPSB1cGRhdGVkUGF5bG9hZFxuICAgICAgICAvLyBSZXR1cm4gb3JpZ2luYWwgdHlwZVxuICAgICAgICByZXR1cm4gX2V2ZW50XG4gICAgfVxuICAgIHJldHVybiBfZXZlbnRcbn1cblxuZXhwb3J0IGNsYXNzIE11dGF0aW9uUmF0ZUxpbWl0ZXIge1xuICAgIHByaXZhdGUgYnVja2V0U2l6ZSA9IDEwMFxuICAgIHByaXZhdGUgcmVmaWxsUmF0ZSA9IDEwXG4gICAgcHJpdmF0ZSBtdXRhdGlvbkJ1Y2tldHM6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gPSB7fVxuICAgIHByaXZhdGUgbG9nZ2VkVHJhY2tlcjogUmVjb3JkPHN0cmluZywgYm9vbGVhbj4gPSB7fVxuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkgcnJ3ZWI6IHJyd2ViUmVjb3JkLFxuICAgICAgICBwcml2YXRlIHJlYWRvbmx5IG9wdGlvbnM6IHtcbiAgICAgICAgICAgIGJ1Y2tldFNpemU/OiBudW1iZXJcbiAgICAgICAgICAgIHJlZmlsbFJhdGU/OiBudW1iZXJcbiAgICAgICAgICAgIG9uQmxvY2tlZE5vZGU/OiAoaWQ6IG51bWJlciwgbm9kZTogTm9kZSB8IG51bGwpID0+IHZvaWRcbiAgICAgICAgfSA9IHt9XG4gICAgKSB7XG4gICAgICAgIHRoaXMucmVmaWxsUmF0ZSA9IHRoaXMub3B0aW9ucy5yZWZpbGxSYXRlID8/IHRoaXMucmVmaWxsUmF0ZVxuICAgICAgICB0aGlzLmJ1Y2tldFNpemUgPSB0aGlzLm9wdGlvbnMuYnVja2V0U2l6ZSA/PyB0aGlzLmJ1Y2tldFNpemVcbiAgICAgICAgc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5yZWZpbGxCdWNrZXRzKClcbiAgICAgICAgfSwgMTAwMClcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlZmlsbEJ1Y2tldHMgPSAoKSA9PiB7XG4gICAgICAgIE9iamVjdC5rZXlzKHRoaXMubXV0YXRpb25CdWNrZXRzKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgICAgICAgIHRoaXMubXV0YXRpb25CdWNrZXRzW2tleV0gPSB0aGlzLm11dGF0aW9uQnVja2V0c1trZXldICsgdGhpcy5yZWZpbGxSYXRlXG5cbiAgICAgICAgICAgIGlmICh0aGlzLm11dGF0aW9uQnVja2V0c1trZXldID49IHRoaXMuYnVja2V0U2l6ZSkge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLm11dGF0aW9uQnVja2V0c1trZXldXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXROb2RlT3JSZWxldmFudFBhcmVudCA9IChpZDogbnVtYmVyKTogW251bWJlciwgTm9kZSB8IG51bGxdID0+IHtcbiAgICAgICAgLy8gRm9yIHNvbWUgbm9kZXMgd2Uga25vdyB0aGV5IGFyZSBwYXJ0IG9mIGEgbGFyZ2VyIHRyZWUgc3VjaCBhcyBhbiBTVkcuXG4gICAgICAgIC8vIEZvciB0aG9zZSB3ZSB3YW50IHRvIGJsb2NrIHRoZSBlbnRpcmUgbm9kZSwgbm90IGp1c3QgdGhlIHNwZWNpZmljIGF0dHJpYnV0ZVxuXG4gICAgICAgIGNvbnN0IG5vZGUgPSB0aGlzLnJyd2ViLm1pcnJvci5nZXROb2RlKGlkKVxuXG4gICAgICAgIC8vIENoZWNrIGlmIHRoZSBub2RlIGlzIGFuIEVsZW1lbnQgYW5kIHRoZW4gZmluZCB0aGUgY2xvc2VzdCBwYXJlbnQgdGhhdCBpcyBhbiBTVkdcbiAgICAgICAgaWYgKG5vZGU/Lm5vZGVOYW1lICE9PSAnc3ZnJyAmJiBub2RlIGluc3RhbmNlb2YgRWxlbWVudCkge1xuICAgICAgICAgICAgY29uc3QgY2xvc2VzdFNWRyA9IG5vZGUuY2xvc2VzdCgnc3ZnJylcblxuICAgICAgICAgICAgaWYgKGNsb3Nlc3RTVkcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gW3RoaXMucnJ3ZWIubWlycm9yLmdldElkKGNsb3Nlc3RTVkcpLCBjbG9zZXN0U1ZHXVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFtpZCwgbm9kZV1cbiAgICB9XG5cbiAgICBwcml2YXRlIG51bWJlck9mQ2hhbmdlcyA9IChkYXRhOiBQYXJ0aWFsPG11dGF0aW9uQ2FsbGJhY2tQYXJhbT4pID0+IHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIChkYXRhLnJlbW92ZXM/Lmxlbmd0aCA/PyAwKSArXG4gICAgICAgICAgICAoZGF0YS5hdHRyaWJ1dGVzPy5sZW5ndGggPz8gMCkgK1xuICAgICAgICAgICAgKGRhdGEudGV4dHM/Lmxlbmd0aCA/PyAwKSArXG4gICAgICAgICAgICAoZGF0YS5hZGRzPy5sZW5ndGggPz8gMClcbiAgICAgICAgKVxuICAgIH1cblxuICAgIHB1YmxpYyB0aHJvdHRsZU11dGF0aW9ucyA9IChldmVudDogZXZlbnRXaXRoVGltZSkgPT4ge1xuICAgICAgICBpZiAoZXZlbnQudHlwZSAhPT0gSU5DUkVNRU5UQUxfU05BUFNIT1RfRVZFTlRfVFlQRSB8fCBldmVudC5kYXRhLnNvdXJjZSAhPT0gTVVUQVRJT05fU09VUkNFX1RZUEUpIHtcbiAgICAgICAgICAgIHJldHVybiBldmVudFxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZGF0YSA9IGV2ZW50LmRhdGEgYXMgUGFydGlhbDxtdXRhdGlvbkNhbGxiYWNrUGFyYW0+XG4gICAgICAgIGNvbnN0IGluaXRpYWxNdXRhdGlvbkNvdW50ID0gdGhpcy5udW1iZXJPZkNoYW5nZXMoZGF0YSlcblxuICAgICAgICBpZiAoZGF0YS5hdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICAvLyBNb3N0IHByb2JsZW1hdGljIG11dGF0aW9ucyBjb21lIGZyb20gYXR0cnMgd2hlcmUgdGhlIHN0eWxlIG9yIG1pbm9yIHByb3BlcnRpZXMgYXJlIGNoYW5nZWQgcmFwaWRseVxuICAgICAgICAgICAgZGF0YS5hdHRyaWJ1dGVzID0gZGF0YS5hdHRyaWJ1dGVzLmZpbHRlcigoYXR0cikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IFtub2RlSWQsIG5vZGVdID0gdGhpcy5nZXROb2RlT3JSZWxldmFudFBhcmVudChhdHRyLmlkKVxuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubXV0YXRpb25CdWNrZXRzW25vZGVJZF0gPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdGhpcy5tdXRhdGlvbkJ1Y2tldHNbbm9kZUlkXSA9IHRoaXMubXV0YXRpb25CdWNrZXRzW25vZGVJZF0gPz8gdGhpcy5idWNrZXRTaXplXG4gICAgICAgICAgICAgICAgdGhpcy5tdXRhdGlvbkJ1Y2tldHNbbm9kZUlkXSA9IE1hdGgubWF4KHRoaXMubXV0YXRpb25CdWNrZXRzW25vZGVJZF0gLSAxLCAwKVxuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubXV0YXRpb25CdWNrZXRzW25vZGVJZF0gPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmxvZ2dlZFRyYWNrZXJbbm9kZUlkXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZWRUcmFja2VyW25vZGVJZF0gPSB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMub25CbG9ja2VkTm9kZT8uKG5vZGVJZCwgbm9kZSlcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiBhdHRyXG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2hlY2sgaWYgZXZlcnkgcGFydCBvZiB0aGUgbXV0YXRpb24gaXMgZW1wdHkgaW4gd2hpY2ggY2FzZSB0aGVyZSBpcyBub3RoaW5nIHRvIGRvXG4gICAgICAgIGNvbnN0IG11dGF0aW9uQ291bnQgPSB0aGlzLm51bWJlck9mQ2hhbmdlcyhkYXRhKVxuXG4gICAgICAgIGlmIChtdXRhdGlvbkNvdW50ID09PSAwICYmIGluaXRpYWxNdXRhdGlvbkNvdW50ICE9PSBtdXRhdGlvbkNvdW50KSB7XG4gICAgICAgICAgICAvLyBJZiB3ZSBoYXZlIG1vZGlmaWVkIHRoZSBtdXRhdGlvbiBjb3VudCBhbmQgdGhlIHJlbWFpbmluZyBjb3VudCBpcyAwLCB0aGVuIHdlIGRvbid0IG5lZWQgdGhlIGV2ZW50LlxuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGV2ZW50XG4gICAgfVxufVxuIiwgInZhciBFdmVudFR5cGUgPSAvKiBAX19QVVJFX18gKi8gKChFdmVudFR5cGUyKSA9PiB7XG4gIEV2ZW50VHlwZTJbRXZlbnRUeXBlMltcIkRvbUNvbnRlbnRMb2FkZWRcIl0gPSAwXSA9IFwiRG9tQ29udGVudExvYWRlZFwiO1xuICBFdmVudFR5cGUyW0V2ZW50VHlwZTJbXCJMb2FkXCJdID0gMV0gPSBcIkxvYWRcIjtcbiAgRXZlbnRUeXBlMltFdmVudFR5cGUyW1wiRnVsbFNuYXBzaG90XCJdID0gMl0gPSBcIkZ1bGxTbmFwc2hvdFwiO1xuICBFdmVudFR5cGUyW0V2ZW50VHlwZTJbXCJJbmNyZW1lbnRhbFNuYXBzaG90XCJdID0gM10gPSBcIkluY3JlbWVudGFsU25hcHNob3RcIjtcbiAgRXZlbnRUeXBlMltFdmVudFR5cGUyW1wiTWV0YVwiXSA9IDRdID0gXCJNZXRhXCI7XG4gIEV2ZW50VHlwZTJbRXZlbnRUeXBlMltcIkN1c3RvbVwiXSA9IDVdID0gXCJDdXN0b21cIjtcbiAgRXZlbnRUeXBlMltFdmVudFR5cGUyW1wiUGx1Z2luXCJdID0gNl0gPSBcIlBsdWdpblwiO1xuICByZXR1cm4gRXZlbnRUeXBlMjtcbn0pKEV2ZW50VHlwZSB8fCB7fSk7XG52YXIgSW5jcmVtZW50YWxTb3VyY2UgPSAvKiBAX19QVVJFX18gKi8gKChJbmNyZW1lbnRhbFNvdXJjZTIpID0+IHtcbiAgSW5jcmVtZW50YWxTb3VyY2UyW0luY3JlbWVudGFsU291cmNlMltcIk11dGF0aW9uXCJdID0gMF0gPSBcIk11dGF0aW9uXCI7XG4gIEluY3JlbWVudGFsU291cmNlMltJbmNyZW1lbnRhbFNvdXJjZTJbXCJNb3VzZU1vdmVcIl0gPSAxXSA9IFwiTW91c2VNb3ZlXCI7XG4gIEluY3JlbWVudGFsU291cmNlMltJbmNyZW1lbnRhbFNvdXJjZTJbXCJNb3VzZUludGVyYWN0aW9uXCJdID0gMl0gPSBcIk1vdXNlSW50ZXJhY3Rpb25cIjtcbiAgSW5jcmVtZW50YWxTb3VyY2UyW0luY3JlbWVudGFsU291cmNlMltcIlNjcm9sbFwiXSA9IDNdID0gXCJTY3JvbGxcIjtcbiAgSW5jcmVtZW50YWxTb3VyY2UyW0luY3JlbWVudGFsU291cmNlMltcIlZpZXdwb3J0UmVzaXplXCJdID0gNF0gPSBcIlZpZXdwb3J0UmVzaXplXCI7XG4gIEluY3JlbWVudGFsU291cmNlMltJbmNyZW1lbnRhbFNvdXJjZTJbXCJJbnB1dFwiXSA9IDVdID0gXCJJbnB1dFwiO1xuICBJbmNyZW1lbnRhbFNvdXJjZTJbSW5jcmVtZW50YWxTb3VyY2UyW1wiVG91Y2hNb3ZlXCJdID0gNl0gPSBcIlRvdWNoTW92ZVwiO1xuICBJbmNyZW1lbnRhbFNvdXJjZTJbSW5jcmVtZW50YWxTb3VyY2UyW1wiTWVkaWFJbnRlcmFjdGlvblwiXSA9IDddID0gXCJNZWRpYUludGVyYWN0aW9uXCI7XG4gIEluY3JlbWVudGFsU291cmNlMltJbmNyZW1lbnRhbFNvdXJjZTJbXCJTdHlsZVNoZWV0UnVsZVwiXSA9IDhdID0gXCJTdHlsZVNoZWV0UnVsZVwiO1xuICBJbmNyZW1lbnRhbFNvdXJjZTJbSW5jcmVtZW50YWxTb3VyY2UyW1wiQ2FudmFzTXV0YXRpb25cIl0gPSA5XSA9IFwiQ2FudmFzTXV0YXRpb25cIjtcbiAgSW5jcmVtZW50YWxTb3VyY2UyW0luY3JlbWVudGFsU291cmNlMltcIkZvbnRcIl0gPSAxMF0gPSBcIkZvbnRcIjtcbiAgSW5jcmVtZW50YWxTb3VyY2UyW0luY3JlbWVudGFsU291cmNlMltcIkxvZ1wiXSA9IDExXSA9IFwiTG9nXCI7XG4gIEluY3JlbWVudGFsU291cmNlMltJbmNyZW1lbnRhbFNvdXJjZTJbXCJEcmFnXCJdID0gMTJdID0gXCJEcmFnXCI7XG4gIEluY3JlbWVudGFsU291cmNlMltJbmNyZW1lbnRhbFNvdXJjZTJbXCJTdHlsZURlY2xhcmF0aW9uXCJdID0gMTNdID0gXCJTdHlsZURlY2xhcmF0aW9uXCI7XG4gIEluY3JlbWVudGFsU291cmNlMltJbmNyZW1lbnRhbFNvdXJjZTJbXCJTZWxlY3Rpb25cIl0gPSAxNF0gPSBcIlNlbGVjdGlvblwiO1xuICBJbmNyZW1lbnRhbFNvdXJjZTJbSW5jcmVtZW50YWxTb3VyY2UyW1wiQWRvcHRlZFN0eWxlU2hlZXRcIl0gPSAxNV0gPSBcIkFkb3B0ZWRTdHlsZVNoZWV0XCI7XG4gIHJldHVybiBJbmNyZW1lbnRhbFNvdXJjZTI7XG59KShJbmNyZW1lbnRhbFNvdXJjZSB8fCB7fSk7XG52YXIgTW91c2VJbnRlcmFjdGlvbnMgPSAvKiBAX19QVVJFX18gKi8gKChNb3VzZUludGVyYWN0aW9uczIpID0+IHtcbiAgTW91c2VJbnRlcmFjdGlvbnMyW01vdXNlSW50ZXJhY3Rpb25zMltcIk1vdXNlVXBcIl0gPSAwXSA9IFwiTW91c2VVcFwiO1xuICBNb3VzZUludGVyYWN0aW9uczJbTW91c2VJbnRlcmFjdGlvbnMyW1wiTW91c2VEb3duXCJdID0gMV0gPSBcIk1vdXNlRG93blwiO1xuICBNb3VzZUludGVyYWN0aW9uczJbTW91c2VJbnRlcmFjdGlvbnMyW1wiQ2xpY2tcIl0gPSAyXSA9IFwiQ2xpY2tcIjtcbiAgTW91c2VJbnRlcmFjdGlvbnMyW01vdXNlSW50ZXJhY3Rpb25zMltcIkNvbnRleHRNZW51XCJdID0gM10gPSBcIkNvbnRleHRNZW51XCI7XG4gIE1vdXNlSW50ZXJhY3Rpb25zMltNb3VzZUludGVyYWN0aW9uczJbXCJEYmxDbGlja1wiXSA9IDRdID0gXCJEYmxDbGlja1wiO1xuICBNb3VzZUludGVyYWN0aW9uczJbTW91c2VJbnRlcmFjdGlvbnMyW1wiRm9jdXNcIl0gPSA1XSA9IFwiRm9jdXNcIjtcbiAgTW91c2VJbnRlcmFjdGlvbnMyW01vdXNlSW50ZXJhY3Rpb25zMltcIkJsdXJcIl0gPSA2XSA9IFwiQmx1clwiO1xuICBNb3VzZUludGVyYWN0aW9uczJbTW91c2VJbnRlcmFjdGlvbnMyW1wiVG91Y2hTdGFydFwiXSA9IDddID0gXCJUb3VjaFN0YXJ0XCI7XG4gIE1vdXNlSW50ZXJhY3Rpb25zMltNb3VzZUludGVyYWN0aW9uczJbXCJUb3VjaE1vdmVfRGVwYXJ0ZWRcIl0gPSA4XSA9IFwiVG91Y2hNb3ZlX0RlcGFydGVkXCI7XG4gIE1vdXNlSW50ZXJhY3Rpb25zMltNb3VzZUludGVyYWN0aW9uczJbXCJUb3VjaEVuZFwiXSA9IDldID0gXCJUb3VjaEVuZFwiO1xuICBNb3VzZUludGVyYWN0aW9uczJbTW91c2VJbnRlcmFjdGlvbnMyW1wiVG91Y2hDYW5jZWxcIl0gPSAxMF0gPSBcIlRvdWNoQ2FuY2VsXCI7XG4gIHJldHVybiBNb3VzZUludGVyYWN0aW9uczI7XG59KShNb3VzZUludGVyYWN0aW9ucyB8fCB7fSk7XG52YXIgUG9pbnRlclR5cGVzID0gLyogQF9fUFVSRV9fICovICgoUG9pbnRlclR5cGVzMikgPT4ge1xuICBQb2ludGVyVHlwZXMyW1BvaW50ZXJUeXBlczJbXCJNb3VzZVwiXSA9IDBdID0gXCJNb3VzZVwiO1xuICBQb2ludGVyVHlwZXMyW1BvaW50ZXJUeXBlczJbXCJQZW5cIl0gPSAxXSA9IFwiUGVuXCI7XG4gIFBvaW50ZXJUeXBlczJbUG9pbnRlclR5cGVzMltcIlRvdWNoXCJdID0gMl0gPSBcIlRvdWNoXCI7XG4gIHJldHVybiBQb2ludGVyVHlwZXMyO1xufSkoUG9pbnRlclR5cGVzIHx8IHt9KTtcbnZhciBDYW52YXNDb250ZXh0ID0gLyogQF9fUFVSRV9fICovICgoQ2FudmFzQ29udGV4dDIpID0+IHtcbiAgQ2FudmFzQ29udGV4dDJbQ2FudmFzQ29udGV4dDJbXCIyRFwiXSA9IDBdID0gXCIyRFwiO1xuICBDYW52YXNDb250ZXh0MltDYW52YXNDb250ZXh0MltcIldlYkdMXCJdID0gMV0gPSBcIldlYkdMXCI7XG4gIENhbnZhc0NvbnRleHQyW0NhbnZhc0NvbnRleHQyW1wiV2ViR0wyXCJdID0gMl0gPSBcIldlYkdMMlwiO1xuICByZXR1cm4gQ2FudmFzQ29udGV4dDI7XG59KShDYW52YXNDb250ZXh0IHx8IHt9KTtcbnZhciBNZWRpYUludGVyYWN0aW9ucyA9IC8qIEBfX1BVUkVfXyAqLyAoKE1lZGlhSW50ZXJhY3Rpb25zMikgPT4ge1xuICBNZWRpYUludGVyYWN0aW9uczJbTWVkaWFJbnRlcmFjdGlvbnMyW1wiUGxheVwiXSA9IDBdID0gXCJQbGF5XCI7XG4gIE1lZGlhSW50ZXJhY3Rpb25zMltNZWRpYUludGVyYWN0aW9uczJbXCJQYXVzZVwiXSA9IDFdID0gXCJQYXVzZVwiO1xuICBNZWRpYUludGVyYWN0aW9uczJbTWVkaWFJbnRlcmFjdGlvbnMyW1wiU2Vla2VkXCJdID0gMl0gPSBcIlNlZWtlZFwiO1xuICBNZWRpYUludGVyYWN0aW9uczJbTWVkaWFJbnRlcmFjdGlvbnMyW1wiVm9sdW1lQ2hhbmdlXCJdID0gM10gPSBcIlZvbHVtZUNoYW5nZVwiO1xuICBNZWRpYUludGVyYWN0aW9uczJbTWVkaWFJbnRlcmFjdGlvbnMyW1wiUmF0ZUNoYW5nZVwiXSA9IDRdID0gXCJSYXRlQ2hhbmdlXCI7XG4gIHJldHVybiBNZWRpYUludGVyYWN0aW9uczI7XG59KShNZWRpYUludGVyYWN0aW9ucyB8fCB7fSk7XG52YXIgUmVwbGF5ZXJFdmVudHMgPSAvKiBAX19QVVJFX18gKi8gKChSZXBsYXllckV2ZW50czIpID0+IHtcbiAgUmVwbGF5ZXJFdmVudHMyW1wiU3RhcnRcIl0gPSBcInN0YXJ0XCI7XG4gIFJlcGxheWVyRXZlbnRzMltcIlBhdXNlXCJdID0gXCJwYXVzZVwiO1xuICBSZXBsYXllckV2ZW50czJbXCJSZXN1bWVcIl0gPSBcInJlc3VtZVwiO1xuICBSZXBsYXllckV2ZW50czJbXCJSZXNpemVcIl0gPSBcInJlc2l6ZVwiO1xuICBSZXBsYXllckV2ZW50czJbXCJGaW5pc2hcIl0gPSBcImZpbmlzaFwiO1xuICBSZXBsYXllckV2ZW50czJbXCJGdWxsc25hcHNob3RSZWJ1aWxkZWRcIl0gPSBcImZ1bGxzbmFwc2hvdC1yZWJ1aWxkZWRcIjtcbiAgUmVwbGF5ZXJFdmVudHMyW1wiTG9hZFN0eWxlc2hlZXRTdGFydFwiXSA9IFwibG9hZC1zdHlsZXNoZWV0LXN0YXJ0XCI7XG4gIFJlcGxheWVyRXZlbnRzMltcIkxvYWRTdHlsZXNoZWV0RW5kXCJdID0gXCJsb2FkLXN0eWxlc2hlZXQtZW5kXCI7XG4gIFJlcGxheWVyRXZlbnRzMltcIlNraXBTdGFydFwiXSA9IFwic2tpcC1zdGFydFwiO1xuICBSZXBsYXllckV2ZW50czJbXCJTa2lwRW5kXCJdID0gXCJza2lwLWVuZFwiO1xuICBSZXBsYXllckV2ZW50czJbXCJNb3VzZUludGVyYWN0aW9uXCJdID0gXCJtb3VzZS1pbnRlcmFjdGlvblwiO1xuICBSZXBsYXllckV2ZW50czJbXCJFdmVudENhc3RcIl0gPSBcImV2ZW50LWNhc3RcIjtcbiAgUmVwbGF5ZXJFdmVudHMyW1wiQ3VzdG9tRXZlbnRcIl0gPSBcImN1c3RvbS1ldmVudFwiO1xuICBSZXBsYXllckV2ZW50czJbXCJGbHVzaFwiXSA9IFwiZmx1c2hcIjtcbiAgUmVwbGF5ZXJFdmVudHMyW1wiU3RhdGVDaGFuZ2VcIl0gPSBcInN0YXRlLWNoYW5nZVwiO1xuICBSZXBsYXllckV2ZW50czJbXCJQbGF5QmFja1wiXSA9IFwicGxheS1iYWNrXCI7XG4gIFJlcGxheWVyRXZlbnRzMltcIkRlc3Ryb3lcIl0gPSBcImRlc3Ryb3lcIjtcbiAgcmV0dXJuIFJlcGxheWVyRXZlbnRzMjtcbn0pKFJlcGxheWVyRXZlbnRzIHx8IHt9KTtcbmV4cG9ydCB7XG4gIENhbnZhc0NvbnRleHQsXG4gIEV2ZW50VHlwZSxcbiAgSW5jcmVtZW50YWxTb3VyY2UsXG4gIE1lZGlhSW50ZXJhY3Rpb25zLFxuICBNb3VzZUludGVyYWN0aW9ucyxcbiAgUG9pbnRlclR5cGVzLFxuICBSZXBsYXllckV2ZW50c1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXR5cGVzLmpzLm1hcFxuIiwgImltcG9ydCB7IENhcHR1cmVkTmV0d29ya1JlcXVlc3QsIE5ldHdvcmtSZWNvcmRPcHRpb25zLCBQb3N0SG9nQ29uZmlnIH0gZnJvbSAnLi4vLi4vdHlwZXMnXG5pbXBvcnQgeyBfaXNGdW5jdGlvbiwgX2lzTnVsbGlzaCwgX2lzU3RyaW5nIH0gZnJvbSAnLi4vLi4vdXRpbHMvdHlwZS11dGlscydcbmltcG9ydCB7IGNvbnZlcnRUb1VSTCB9IGZyb20gJy4uLy4uL3V0aWxzL3JlcXVlc3QtdXRpbHMnXG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tICcuLi8uLi91dGlscy9sb2dnZXInXG5cbmV4cG9ydCBjb25zdCBkZWZhdWx0TmV0d29ya09wdGlvbnM6IE5ldHdvcmtSZWNvcmRPcHRpb25zID0ge1xuICAgIGluaXRpYXRvclR5cGVzOiBbXG4gICAgICAgICdhdWRpbycsXG4gICAgICAgICdiZWFjb24nLFxuICAgICAgICAnYm9keScsXG4gICAgICAgICdjc3MnLFxuICAgICAgICAnZWFybHktaGludCcsXG4gICAgICAgICdlbWJlZCcsXG4gICAgICAgICdmZXRjaCcsXG4gICAgICAgICdmcmFtZScsXG4gICAgICAgICdpZnJhbWUnLFxuICAgICAgICAnaWNvbicsXG4gICAgICAgICdpbWFnZScsXG4gICAgICAgICdpbWcnLFxuICAgICAgICAnaW5wdXQnLFxuICAgICAgICAnbGluaycsXG4gICAgICAgICduYXZpZ2F0aW9uJyxcbiAgICAgICAgJ29iamVjdCcsXG4gICAgICAgICdwaW5nJyxcbiAgICAgICAgJ3NjcmlwdCcsXG4gICAgICAgICd0cmFjaycsXG4gICAgICAgICd2aWRlbycsXG4gICAgICAgICd4bWxodHRwcmVxdWVzdCcsXG4gICAgXSxcbiAgICBtYXNrUmVxdWVzdEZuOiAoZGF0YTogQ2FwdHVyZWROZXR3b3JrUmVxdWVzdCkgPT4gZGF0YSxcbiAgICByZWNvcmRIZWFkZXJzOiBmYWxzZSxcbiAgICByZWNvcmRCb2R5OiBmYWxzZSxcbiAgICByZWNvcmRJbml0aWFsUmVxdWVzdHM6IGZhbHNlLFxuICAgIHJlY29yZFBlcmZvcm1hbmNlOiBmYWxzZSxcbiAgICBwZXJmb3JtYW5jZUVudHJ5VHlwZVRvT2JzZXJ2ZTogW1xuICAgICAgICAvLyAnZXZlbnQnLCAvLyBUaGlzIGlzIHRvbyBub2lzeSBhcyBpdCBjb3ZlcnMgYWxsIGJyb3dzZXIgZXZlbnRzXG4gICAgICAgICdmaXJzdC1pbnB1dCcsXG4gICAgICAgIC8vICdtYXJrJywgLy8gTWFyayBpcyB1c2VkIHRvbyBsaWJlcmFsbHkuIFdlIHdvdWxkIG5lZWQgdG8gZmlsdGVyIGZvciBzcGVjaWZpYyBtYXJrc1xuICAgICAgICAvLyAnbWVhc3VyZScsIC8vIE1lYXN1cmUgaXMgdXNlZCB0b28gbGliZXJhbGx5LiBXZSB3b3VsZCBuZWVkIHRvIGZpbHRlciBmb3Igc3BlY2lmaWMgbWVhc3VyZXNcbiAgICAgICAgJ25hdmlnYXRpb24nLFxuICAgICAgICAncGFpbnQnLFxuICAgICAgICAncmVzb3VyY2UnLFxuICAgIF0sXG4gICAgcGF5bG9hZFNpemVMaW1pdEJ5dGVzOiAxMDAwMDAwLFxufVxuXG5jb25zdCBIRUFERVJfREVOWUxJU1QgPSBbXG4gICAgJ2F1dGhvcml6YXRpb24nLFxuICAgICd4LWZvcndhcmRlZC1mb3InLFxuICAgICdhdXRob3JpemF0aW9uJyxcbiAgICAnY29va2llJyxcbiAgICAnc2V0LWNvb2tpZScsXG4gICAgJ3gtYXBpLWtleScsXG4gICAgJ3gtcmVhbC1pcCcsXG4gICAgJ3JlbW90ZS1hZGRyJyxcbiAgICAnZm9yd2FyZGVkJyxcbiAgICAncHJveHktYXV0aG9yaXphdGlvbicsXG4gICAgJ3gtY3NyZi10b2tlbicsXG4gICAgJ3gtY3NyZnRva2VuJyxcbiAgICAneC14c3JmLXRva2VuJyxcbl1cblxuLy8gd2UgYWx3YXlzIHJlbW92ZSBoZWFkZXJzIG9uIHRoZSBkZW55IGxpc3QgYmVjYXVzZSB3ZSBuZXZlciB3YW50IHRvIGNhcHR1cmUgdGhpcyBzZW5zaXRpdmUgZGF0YVxuY29uc3QgcmVtb3ZlQXV0aG9yaXphdGlvbkhlYWRlciA9IChkYXRhOiBDYXB0dXJlZE5ldHdvcmtSZXF1ZXN0KTogQ2FwdHVyZWROZXR3b3JrUmVxdWVzdCA9PiB7XG4gICAgT2JqZWN0LmtleXMoZGF0YS5yZXF1ZXN0SGVhZGVycyA/PyB7fSkuZm9yRWFjaCgoaGVhZGVyKSA9PiB7XG4gICAgICAgIGlmIChIRUFERVJfREVOWUxJU1QuaW5jbHVkZXMoaGVhZGVyLnRvTG93ZXJDYXNlKCkpKSBkZWxldGUgZGF0YS5yZXF1ZXN0SGVhZGVycz8uW2hlYWRlcl1cbiAgICB9KVxuICAgIHJldHVybiBkYXRhXG59XG5cbmNvbnN0IFBPU1RIT0dfUEFUSFNfVE9fSUdOT1JFID0gWycvcy8nLCAnL2UvJywgJy9pLyddXG4vLyB3YW50IHRvIGlnbm9yZSBwb3N0aG9nIHBhdGhzIHdoZW4gY2FwdHVyaW5nIHJlcXVlc3RzLCBvciB3ZSBjYW4gZ2V0IHRyYXBwZWQgaW4gYSBsb29wXG4vLyBiZWNhdXNlIGNhbGxzIHRvIFBvc3RIb2cgd291bGQgYmUgcmVwb3J0ZWQgdXNpbmcgYSBjYWxsIHRvIFBvc3RIb2cgd2hpY2ggd291bGQgYmUgcmVwb3J0ZWQuLi4uXG5jb25zdCBpZ25vcmVQb3N0SG9nUGF0aHMgPSAoZGF0YTogQ2FwdHVyZWROZXR3b3JrUmVxdWVzdCk6IENhcHR1cmVkTmV0d29ya1JlcXVlc3QgfCB1bmRlZmluZWQgPT4ge1xuICAgIGNvbnN0IHVybCA9IGNvbnZlcnRUb1VSTChkYXRhLm5hbWUpXG4gICAgaWYgKHVybCAmJiB1cmwucGF0aG5hbWUgJiYgUE9TVEhPR19QQVRIU19UT19JR05PUkUuc29tZSgocGF0aCkgPT4gdXJsLnBhdGhuYW1lLmluZGV4T2YocGF0aCkgPT09IDApKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWRcbiAgICB9XG4gICAgcmV0dXJuIGRhdGFcbn1cblxuZnVuY3Rpb24gZXN0aW1hdGVCeXRlcyhwYXlsb2FkOiBzdHJpbmcpOiBudW1iZXIge1xuICAgIHJldHVybiBuZXcgQmxvYihbcGF5bG9hZF0pLnNpemVcbn1cblxuZnVuY3Rpb24gcmVkYWN0UGF5bG9hZChcbiAgICBwYXlsb2FkOiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkLFxuICAgIGhlYWRlcnM6IFJlY29yZDxzdHJpbmcsIGFueT4gfCB1bmRlZmluZWQsXG4gICAgbGltaXQ6IG51bWJlcixcbiAgICBkZXNjcmlwdGlvbjogc3RyaW5nXG4pOiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkIHtcbiAgICBpZiAoX2lzTnVsbGlzaChwYXlsb2FkKSkge1xuICAgICAgICByZXR1cm4gcGF5bG9hZFxuICAgIH1cblxuICAgIGxldCByZXF1ZXN0Q29udGVudExlbmd0aDogc3RyaW5nIHwgbnVtYmVyID0gaGVhZGVycz8uWydjb250ZW50LWxlbmd0aCddIHx8IGVzdGltYXRlQnl0ZXMocGF5bG9hZClcbiAgICBpZiAoX2lzU3RyaW5nKHJlcXVlc3RDb250ZW50TGVuZ3RoKSkge1xuICAgICAgICByZXF1ZXN0Q29udGVudExlbmd0aCA9IHBhcnNlSW50KHJlcXVlc3RDb250ZW50TGVuZ3RoKVxuICAgIH1cblxuICAgIGlmIChyZXF1ZXN0Q29udGVudExlbmd0aCA+IGxpbWl0KSB7XG4gICAgICAgIHJldHVybiBgW1Nlc3Npb25SZXBsYXldICR7ZGVzY3JpcHRpb259IGJvZHkgdG9vIGxhcmdlIHRvIHJlY29yZCAoJHtyZXF1ZXN0Q29udGVudExlbmd0aH0gYnl0ZXMpYFxuICAgIH1cblxuICAgIHJldHVybiBwYXlsb2FkXG59XG5cbi8vIHBlb3BsZSBjYW4gaGF2ZSBhcmJpdHJhcmlseSBsYXJnZSBwYXlsb2FkcyBvbiB0aGVpciBzaXRlLCBidXQgd2UgZG9uJ3Qgd2FudCB0byBpbmdlc3QgdGhlbVxuY29uc3QgbGltaXRQYXlsb2FkU2l6ZSA9IChcbiAgICBvcHRpb25zOiBOZXR3b3JrUmVjb3JkT3B0aW9uc1xuKTogKChkYXRhOiBDYXB0dXJlZE5ldHdvcmtSZXF1ZXN0IHwgdW5kZWZpbmVkKSA9PiBDYXB0dXJlZE5ldHdvcmtSZXF1ZXN0IHwgdW5kZWZpbmVkKSA9PiB7XG4gICAgLy8gdGhlIHNtYWxsZXN0IG9mIDFNQiBvciB0aGUgc3BlY2lmaWVkIGxpbWl0IGlmIHRoZXJlIGlzIG9uZVxuICAgIGNvbnN0IGxpbWl0ID0gTWF0aC5taW4oMTAwMDAwMCwgb3B0aW9ucy5wYXlsb2FkU2l6ZUxpbWl0Qnl0ZXMgPz8gMTAwMDAwMClcblxuICAgIHJldHVybiAoZGF0YSkgPT4ge1xuICAgICAgICBpZiAoZGF0YT8ucmVxdWVzdEJvZHkpIHtcbiAgICAgICAgICAgIGRhdGEucmVxdWVzdEJvZHkgPSByZWRhY3RQYXlsb2FkKGRhdGEucmVxdWVzdEJvZHksIGRhdGEucmVxdWVzdEhlYWRlcnMsIGxpbWl0LCAnUmVxdWVzdCcpXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZGF0YT8ucmVzcG9uc2VCb2R5KSB7XG4gICAgICAgICAgICBkYXRhLnJlc3BvbnNlQm9keSA9IHJlZGFjdFBheWxvYWQoZGF0YS5yZXNwb25zZUJvZHksIGRhdGEucmVzcG9uc2VIZWFkZXJzLCBsaW1pdCwgJ1Jlc3BvbnNlJylcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBkYXRhXG4gICAgfVxufVxuXG4vKipcbiAqICB3aGV0aGVyIGEgbWFza1JlcXVlc3RGbiBpcyBwcm92aWRlZCBvciBub3QsXG4gKiAgd2UgZW5zdXJlIHRoYXQgd2UgcmVtb3ZlIHRoZSBkZW5pZWQgaGVhZGVyIGZyb20gcmVxdWVzdHNcbiAqICB3ZSBfbmV2ZXJfIHdhbnQgdG8gcmVjb3JkIHRoYXQgaGVhZGVyIGJ5IGFjY2lkZW50XG4gKiAgaWYgc29tZW9uZSBjb21wbGFpbnMgdGhlbiB3ZSdsbCBhZGQgYW4gb3B0LWluIHRvIGxldCB0aGVtIG92ZXJyaWRlIGl0XG4gKi9cbmV4cG9ydCBjb25zdCBidWlsZE5ldHdvcmtSZXF1ZXN0T3B0aW9ucyA9IChcbiAgICBpbnN0YW5jZUNvbmZpZzogUG9zdEhvZ0NvbmZpZyxcbiAgICByZW1vdGVOZXR3b3JrT3B0aW9uczogUGljazxOZXR3b3JrUmVjb3JkT3B0aW9ucywgJ3JlY29yZEhlYWRlcnMnIHwgJ3JlY29yZEJvZHknIHwgJ3JlY29yZFBlcmZvcm1hbmNlJz5cbik6IE5ldHdvcmtSZWNvcmRPcHRpb25zID0+IHtcbiAgICBjb25zdCBjb25maWcgPSBpbnN0YW5jZUNvbmZpZy5zZXNzaW9uX3JlY29yZGluZyBhcyBOZXR3b3JrUmVjb3JkT3B0aW9uc1xuICAgIC8vIGNsaWVudCBjYW4gYWx3YXlzIGRpc2FibGUgZGVzcGl0ZSByZW1vdGUgb3B0aW9uc1xuICAgIGNvbnN0IGNhblJlY29yZEhlYWRlcnMgPSBjb25maWcucmVjb3JkSGVhZGVycyA9PT0gZmFsc2UgPyBmYWxzZSA6IHJlbW90ZU5ldHdvcmtPcHRpb25zLnJlY29yZEhlYWRlcnNcbiAgICBjb25zdCBjYW5SZWNvcmRCb2R5ID0gY29uZmlnLnJlY29yZEJvZHkgPT09IGZhbHNlID8gZmFsc2UgOiByZW1vdGVOZXR3b3JrT3B0aW9ucy5yZWNvcmRCb2R5XG4gICAgY29uc3QgY2FuUmVjb3JkUGVyZm9ybWFuY2UgPSBjb25maWcucmVjb3JkUGVyZm9ybWFuY2UgPT09IGZhbHNlID8gZmFsc2UgOiByZW1vdGVOZXR3b3JrT3B0aW9ucy5yZWNvcmRQZXJmb3JtYW5jZVxuXG4gICAgY29uc3QgcGF5bG9hZExpbWl0ZXIgPSBsaW1pdFBheWxvYWRTaXplKGNvbmZpZylcblxuICAgIGNvbnN0IGVuZm9yY2VkQ2xlYW5pbmdGbjogTmV0d29ya1JlY29yZE9wdGlvbnNbJ21hc2tSZXF1ZXN0Rm4nXSA9IChkOiBDYXB0dXJlZE5ldHdvcmtSZXF1ZXN0KSA9PlxuICAgICAgICBwYXlsb2FkTGltaXRlcihpZ25vcmVQb3N0SG9nUGF0aHMocmVtb3ZlQXV0aG9yaXphdGlvbkhlYWRlcihkKSkpXG5cbiAgICBjb25zdCBoYXNEZXByZWNhdGVkTWFza0Z1bmN0aW9uID0gX2lzRnVuY3Rpb24oaW5zdGFuY2VDb25maWcuc2Vzc2lvbl9yZWNvcmRpbmcubWFza05ldHdvcmtSZXF1ZXN0Rm4pXG5cbiAgICBpZiAoaGFzRGVwcmVjYXRlZE1hc2tGdW5jdGlvbiAmJiBfaXNGdW5jdGlvbihpbnN0YW5jZUNvbmZpZy5zZXNzaW9uX3JlY29yZGluZy5tYXNrQ2FwdHVyZWROZXR3b3JrUmVxdWVzdEZuKSkge1xuICAgICAgICBsb2dnZXIud2FybihcbiAgICAgICAgICAgICdCb3RoIGBtYXNrTmV0d29ya1JlcXVlc3RGbmAgYW5kIGBtYXNrQ2FwdHVyZWROZXR3b3JrUmVxdWVzdEZuYCBhcmUgZGVmaW5lZC4gYG1hc2tOZXR3b3JrUmVxdWVzdEZuYCB3aWxsIGJlIGlnbm9yZWQuJ1xuICAgICAgICApXG4gICAgfVxuXG4gICAgaWYgKGhhc0RlcHJlY2F0ZWRNYXNrRnVuY3Rpb24pIHtcbiAgICAgICAgaW5zdGFuY2VDb25maWcuc2Vzc2lvbl9yZWNvcmRpbmcubWFza0NhcHR1cmVkTmV0d29ya1JlcXVlc3RGbiA9IChkYXRhOiBDYXB0dXJlZE5ldHdvcmtSZXF1ZXN0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjbGVhbmVkVVJMID0gaW5zdGFuY2VDb25maWcuc2Vzc2lvbl9yZWNvcmRpbmcubWFza05ldHdvcmtSZXF1ZXN0Rm4hKHsgdXJsOiBkYXRhLm5hbWUgfSlcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgLi4uZGF0YSxcbiAgICAgICAgICAgICAgICBuYW1lOiBjbGVhbmVkVVJMPy51cmwsXG4gICAgICAgICAgICB9IGFzIENhcHR1cmVkTmV0d29ya1JlcXVlc3RcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbmZpZy5tYXNrUmVxdWVzdEZuID0gX2lzRnVuY3Rpb24oaW5zdGFuY2VDb25maWcuc2Vzc2lvbl9yZWNvcmRpbmcubWFza0NhcHR1cmVkTmV0d29ya1JlcXVlc3RGbilcbiAgICAgICAgPyAoZGF0YSkgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBjbGVhbmVkUmVxdWVzdCA9IGVuZm9yY2VkQ2xlYW5pbmdGbihkYXRhKVxuICAgICAgICAgICAgICByZXR1cm4gY2xlYW5lZFJlcXVlc3RcbiAgICAgICAgICAgICAgICAgID8gaW5zdGFuY2VDb25maWcuc2Vzc2lvbl9yZWNvcmRpbmcubWFza0NhcHR1cmVkTmV0d29ya1JlcXVlc3RGbj8uKGNsZWFuZWRSZXF1ZXN0KSA/PyB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkXG4gICAgICAgICAgfVxuICAgICAgICA6IHVuZGVmaW5lZFxuXG4gICAgaWYgKCFjb25maWcubWFza1JlcXVlc3RGbikge1xuICAgICAgICBjb25maWcubWFza1JlcXVlc3RGbiA9IGVuZm9yY2VkQ2xlYW5pbmdGblxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIC4uLmRlZmF1bHROZXR3b3JrT3B0aW9ucyxcbiAgICAgICAgLi4uY29uZmlnLFxuICAgICAgICByZWNvcmRIZWFkZXJzOiBjYW5SZWNvcmRIZWFkZXJzLFxuICAgICAgICByZWNvcmRCb2R5OiBjYW5SZWNvcmRCb2R5LFxuICAgICAgICByZWNvcmRQZXJmb3JtYW5jZTogY2FuUmVjb3JkUGVyZm9ybWFuY2UsXG4gICAgICAgIHJlY29yZEluaXRpYWxSZXF1ZXN0czogY2FuUmVjb3JkUGVyZm9ybWFuY2UsXG4gICAgfVxufVxuIiwgIi8qKlxuICogR0RQUiB1dGlsc1xuICpcbiAqIFRoZSBHZW5lcmFsIERhdGEgUHJvdGVjdGlvbiBSZWd1bGF0aW9uIChHRFBSKSBpcyBhIHJlZ3VsYXRpb24gaW4gRVUgbGF3IG9uIGRhdGEgcHJvdGVjdGlvblxuICogYW5kIHByaXZhY3kgZm9yIGFsbCBpbmRpdmlkdWFscyB3aXRoaW4gdGhlIEV1cm9wZWFuIFVuaW9uLiBJdCBhZGRyZXNzZXMgdGhlIGV4cG9ydCBvZiBwZXJzb25hbFxuICogZGF0YSBvdXRzaWRlIHRoZSBFVS4gVGhlIEdEUFIgYWltcyBwcmltYXJpbHkgdG8gZ2l2ZSBjb250cm9sIGJhY2sgdG8gY2l0aXplbnMgYW5kIHJlc2lkZW50c1xuICogb3ZlciB0aGVpciBwZXJzb25hbCBkYXRhIGFuZCB0byBzaW1wbGlmeSB0aGUgcmVndWxhdG9yeSBlbnZpcm9ubWVudCBmb3IgaW50ZXJuYXRpb25hbCBidXNpbmVzc1xuICogYnkgdW5pZnlpbmcgdGhlIHJlZ3VsYXRpb24gd2l0aGluIHRoZSBFVS5cbiAqXG4gKiBUaGlzIHNldCBvZiB1dGlsaXRpZXMgaXMgaW50ZW5kZWQgdG8gZW5hYmxlIG9wdCBpbi9vdXQgZnVuY3Rpb25hbGl0eSBpbiB0aGUgUG9zdEhvZyBKUyBTREsuXG4gKiBUaGVzZSBmdW5jdGlvbnMgYXJlIHVzZWQgaW50ZXJuYWxseSBieSB0aGUgU0RLIGFuZCBhcmUgbm90IGludGVuZGVkIHRvIGJlIHB1YmxpY2x5IGV4cG9zZWQuXG4gKi9cblxuaW1wb3J0IHsgX2VhY2gsIF9pbmNsdWRlcyB9IGZyb20gJy4vdXRpbHMnXG5pbXBvcnQgeyB3aW5kb3cgfSBmcm9tICcuL3V0aWxzL2dsb2JhbHMnXG5pbXBvcnQgeyBjb29raWVTdG9yZSwgbG9jYWxTdG9yZSwgbG9jYWxQbHVzQ29va2llU3RvcmUgfSBmcm9tICcuL3N0b3JhZ2UnXG5pbXBvcnQgeyBHRFBST3B0aW9ucywgUGVyc2lzdGVudFN0b3JlIH0gZnJvbSAnLi90eXBlcydcbmltcG9ydCB7IFBvc3RIb2cgfSBmcm9tICcuL3Bvc3Rob2ctY29yZSdcblxuaW1wb3J0IHsgX2lzTnVtYmVyLCBfaXNTdHJpbmcgfSBmcm9tICcuL3V0aWxzL3R5cGUtdXRpbHMnXG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tICcuL3V0aWxzL2xvZ2dlcidcblxuLyoqXG4gKiBBIGZ1bmN0aW9uIHVzZWQgdG8gY2FwdHVyZSBhIFBvc3RIb2cgZXZlbnQgKGUuZy4gUG9zdEhvZ0xpYi5jYXB0dXJlKVxuICogQGNhbGxiYWNrIGNhcHR1cmVGdW5jdGlvblxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50X25hbWUgVGhlIG5hbWUgb2YgdGhlIGV2ZW50LiBUaGlzIGNhbiBiZSBhbnl0aGluZyB0aGUgdXNlciBkb2VzIC0gJ0J1dHRvbiBDbGljaycsICdTaWduIFVwJywgJ0l0ZW0gUHVyY2hhc2VkJywgZXRjLlxuICogQHBhcmFtIHtPYmplY3R9IFtwcm9wZXJ0aWVzXSBBIHNldCBvZiBwcm9wZXJ0aWVzIHRvIGluY2x1ZGUgd2l0aCB0aGUgZXZlbnQgeW91J3JlIHNlbmRpbmcuIFRoZXNlIGRlc2NyaWJlIHRoZSB1c2VyIHdobyBkaWQgdGhlIGV2ZW50IG9yIGRldGFpbHMgYWJvdXQgdGhlIGV2ZW50IGl0c2VsZi5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYWxsYmFja10gSWYgcHJvdmlkZWQsIHRoZSBjYWxsYmFjayBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZCBhZnRlciBjYXB0dXJpbmcgdGhlIGV2ZW50LlxuICovXG5cbi8qKiBQdWJsaWMgKiovXG5cbmNvbnN0IEdEUFJfREVGQVVMVF9QRVJTSVNURU5DRV9QUkVGSVggPSAnX19waF9vcHRfaW5fb3V0XydcblxuLyoqXG4gKiBPcHQgdGhlIHVzZXIgaW4gdG8gZGF0YSBjYXB0dXJpbmcgYW5kIGNvb2tpZXMvbG9jYWxzdG9yYWdlIGZvciB0aGUgZ2l2ZW4gdG9rZW5cbiAqIEBwYXJhbSB7c3RyaW5nfSB0b2tlbiAtIFBvc3RIb2cgcHJvamVjdCBjYXB0dXJpbmcgdG9rZW5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAqIEBwYXJhbSB7Y2FwdHVyZUZ1bmN0aW9ufSBbb3B0aW9ucy5jYXB0dXJlXSAtIGZ1bmN0aW9uIHVzZWQgZm9yIGNhcHR1cmluZyBhIFBvc3RIb2cgZXZlbnQgdG8gcmVjb3JkIHRoZSBvcHQtaW4gYWN0aW9uXG4gKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMuY2FwdHVyZUV2ZW50TmFtZV0gLSBldmVudCBuYW1lIHRvIGJlIHVzZWQgZm9yIGNhcHR1cmluZyB0aGUgb3B0LWluIGFjdGlvblxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zLmNhcHR1cmVQcm9wZXJ0aWVzXSAtIHNldCBvZiBwcm9wZXJ0aWVzIHRvIGJlIGNhcHR1cmVkIGFsb25nIHdpdGggdGhlIG9wdC1pbiBhY3Rpb25cbiAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5wZXJzaXN0ZW5jZVR5cGVdIFBlcnNpc3RlbmNlIG1lY2hhbmlzbSB1c2VkIC0gY29va2llIG9yIGxvY2FsU3RvcmFnZVxuICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLnBlcnNpc3RlbmNlUHJlZml4PV9fcGhfb3B0X2luX291dF0gLSBjdXN0b20gcHJlZml4IHRvIGJlIHVzZWQgaW4gdGhlIGNvb2tpZS9sb2NhbHN0b3JhZ2UgbmFtZVxuICogQHBhcmFtIHtOdW1iZXJ9IFtvcHRpb25zLmNvb2tpZUV4cGlyYXRpb25dIC0gbnVtYmVyIG9mIGRheXMgdW50aWwgdGhlIG9wdC1pbiBjb29raWUgZXhwaXJlc1xuICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5jcm9zc1N1YmRvbWFpbkNvb2tpZV0gLSB3aGV0aGVyIHRoZSBvcHQtaW4gY29va2llIGlzIHNldCBhcyBjcm9zcy1zdWJkb21haW4gb3Igbm90XG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLnNlY3VyZUNvb2tpZV0gLSB3aGV0aGVyIHRoZSBvcHQtaW4gY29va2llIGlzIHNldCBhcyBzZWN1cmUgb3Igbm90XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBvcHRJbih0b2tlbjogc3RyaW5nLCBvcHRpb25zOiBHRFBST3B0aW9ucyk6IHZvaWQge1xuICAgIF9vcHRJbk91dCh0cnVlLCB0b2tlbiwgb3B0aW9ucylcbn1cblxuLyoqXG4gKiBPcHQgdGhlIHVzZXIgb3V0IG9mIGRhdGEgY2FwdHVyaW5nIGFuZCBjb29raWVzL2xvY2Fsc3RvcmFnZSBmb3IgdGhlIGdpdmVuIHRva2VuXG4gKiBAcGFyYW0ge3N0cmluZ30gdG9rZW4gLSBQb3N0SG9nIHByb2plY3QgY2FwdHVyaW5nIHRva2VuXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG4gKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMucGVyc2lzdGVuY2VUeXBlXSBQZXJzaXN0ZW5jZSBtZWNoYW5pc20gdXNlZCAtIGNvb2tpZSBvciBsb2NhbFN0b3JhZ2VcbiAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5wZXJzaXN0ZW5jZVByZWZpeD1fX3BoX29wdF9pbl9vdXRdIC0gY3VzdG9tIHByZWZpeCB0byBiZSB1c2VkIGluIHRoZSBjb29raWUvbG9jYWxzdG9yYWdlIG5hbWVcbiAqIEBwYXJhbSB7TnVtYmVyfSBbb3B0aW9ucy5jb29raWVFeHBpcmF0aW9uXSAtIG51bWJlciBvZiBkYXlzIHVudGlsIHRoZSBvcHQtb3V0IGNvb2tpZSBleHBpcmVzXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmNyb3NzU3ViZG9tYWluQ29va2llXSAtIHdoZXRoZXIgdGhlIG9wdC1vdXQgY29va2llIGlzIHNldCBhcyBjcm9zcy1zdWJkb21haW4gb3Igbm90XG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLnNlY3VyZUNvb2tpZV0gLSB3aGV0aGVyIHRoZSBvcHQtb3V0IGNvb2tpZSBpcyBzZXQgYXMgc2VjdXJlIG9yIG5vdFxuICovXG5leHBvcnQgZnVuY3Rpb24gb3B0T3V0KHRva2VuOiBzdHJpbmcsIG9wdGlvbnM6IEdEUFJPcHRpb25zKTogdm9pZCB7XG4gICAgX29wdEluT3V0KGZhbHNlLCB0b2tlbiwgb3B0aW9ucylcbn1cblxuLyoqXG4gKiBDaGVjayB3aGV0aGVyIHRoZSB1c2VyIGhhcyBvcHRlZCBpbiB0byBkYXRhIGNhcHR1cmluZyBhbmQgY29va2llcy9sb2NhbHN0b3JhZ2UgZm9yIHRoZSBnaXZlbiB0b2tlblxuICogQHBhcmFtIHtzdHJpbmd9IHRva2VuIC0gUG9zdEhvZyBwcm9qZWN0IGNhcHR1cmluZyB0b2tlblxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLnBlcnNpc3RlbmNlVHlwZV0gUGVyc2lzdGVuY2UgbWVjaGFuaXNtIHVzZWQgLSBjb29raWUgb3IgbG9jYWxTdG9yYWdlXG4gKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMucGVyc2lzdGVuY2VQcmVmaXg9X19waF9vcHRfaW5fb3V0XSAtIGN1c3RvbSBwcmVmaXggdG8gYmUgdXNlZCBpbiB0aGUgY29va2llL2xvY2Fsc3RvcmFnZSBuYW1lXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gd2hldGhlciB0aGUgdXNlciBoYXMgb3B0ZWQgaW4gdG8gdGhlIGdpdmVuIG9wdCB0eXBlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBoYXNPcHRlZEluKHRva2VuOiBzdHJpbmcsIG9wdGlvbnM6IEdEUFJPcHRpb25zKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIF9nZXRTdG9yYWdlVmFsdWUodG9rZW4sIG9wdGlvbnMpID09PSAnMSdcbn1cblxuLyoqXG4gKiBDaGVjayB3aGV0aGVyIHRoZSB1c2VyIGhhcyBvcHRlZCBvdXQgb2YgZGF0YSBjYXB0dXJpbmcgYW5kIGNvb2tpZXMvbG9jYWxzdG9yYWdlIGZvciB0aGUgZ2l2ZW4gdG9rZW5cbiAqIEBwYXJhbSB7c3RyaW5nfSB0b2tlbiAtIFBvc3RIb2cgcHJvamVjdCBjYXB0dXJpbmcgdG9rZW5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5wZXJzaXN0ZW5jZVR5cGVdIFBlcnNpc3RlbmNlIG1lY2hhbmlzbSB1c2VkIC0gY29va2llIG9yIGxvY2FsU3RvcmFnZVxuICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLnBlcnNpc3RlbmNlUHJlZml4PV9fcGhfb3B0X2luX291dF0gLSBjdXN0b20gcHJlZml4IHRvIGJlIHVzZWQgaW4gdGhlIGNvb2tpZS9sb2NhbHN0b3JhZ2UgbmFtZVxuICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5yZXNwZWN0RG50XSAtIGZsYWcgdG8gdGFrZSBicm93c2VyIEROVCBzZXR0aW5nIGludG8gYWNjb3VudFxuICogQHJldHVybnMge2Jvb2xlYW59IHdoZXRoZXIgdGhlIHVzZXIgaGFzIG9wdGVkIG91dCBvZiB0aGUgZ2l2ZW4gb3B0IHR5cGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGhhc09wdGVkT3V0KHRva2VuOiBzdHJpbmcsIG9wdGlvbnM6IFBhcnRpYWw8R0RQUk9wdGlvbnM+KTogYm9vbGVhbiB7XG4gICAgaWYgKF9oYXNEb05vdFRyYWNrRmxhZ09uKG9wdGlvbnMpKSB7XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICAgIHJldHVybiBfZ2V0U3RvcmFnZVZhbHVlKHRva2VuLCBvcHRpb25zKSA9PT0gJzAnXG59XG5cbi8qKlxuICogQ2xlYXIgdGhlIHVzZXIncyBvcHQgaW4vb3V0IHN0YXR1cyBvZiBkYXRhIGNhcHR1cmluZyBhbmQgY29va2llcy9sb2NhbHN0b3JhZ2UgZm9yIHRoZSBnaXZlbiB0b2tlblxuICogQHBhcmFtIHtzdHJpbmd9IHRva2VuIC0gUG9zdEhvZyBwcm9qZWN0IGNhcHR1cmluZyB0b2tlblxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLnBlcnNpc3RlbmNlVHlwZV0gUGVyc2lzdGVuY2UgbWVjaGFuaXNtIHVzZWQgLSBjb29raWUgb3IgbG9jYWxTdG9yYWdlXG4gKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMucGVyc2lzdGVuY2VQcmVmaXg9X19waF9vcHRfaW5fb3V0XSAtIGN1c3RvbSBwcmVmaXggdG8gYmUgdXNlZCBpbiB0aGUgY29va2llL2xvY2Fsc3RvcmFnZSBuYW1lXG4gKiBAcGFyYW0ge051bWJlcn0gW29wdGlvbnMuY29va2llRXhwaXJhdGlvbl0gLSBudW1iZXIgb2YgZGF5cyB1bnRpbCB0aGUgb3B0LWluIGNvb2tpZSBleHBpcmVzXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmNyb3NzU3ViZG9tYWluQ29va2llXSAtIHdoZXRoZXIgdGhlIG9wdC1pbiBjb29raWUgaXMgc2V0IGFzIGNyb3NzLXN1YmRvbWFpbiBvciBub3RcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuc2VjdXJlQ29va2llXSAtIHdoZXRoZXIgdGhlIG9wdC1pbiBjb29raWUgaXMgc2V0IGFzIHNlY3VyZSBvciBub3RcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyT3B0SW5PdXQodG9rZW46IHN0cmluZywgb3B0aW9uczogR0RQUk9wdGlvbnMpIHtcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fVxuICAgIF9nZXRTdG9yYWdlKG9wdGlvbnMpLnJlbW92ZShfZ2V0U3RvcmFnZUtleSh0b2tlbiwgb3B0aW9ucyksICEhb3B0aW9ucy5jcm9zc1N1YmRvbWFpbkNvb2tpZSlcbn1cblxuLyoqIFByaXZhdGUgKiovXG5cbi8qKlxuICogR2V0IHN0b3JhZ2UgdXRpbFxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLnBlcnNpc3RlbmNlVHlwZV1cbiAqIEByZXR1cm5zIHtvYmplY3R9IGVpdGhlciBjb29raWVTdG9yZSBvciBsb2NhbFN0b3JlXG4gKi9cbmZ1bmN0aW9uIF9nZXRTdG9yYWdlKG9wdGlvbnM6IEdEUFJPcHRpb25zKTogUGVyc2lzdGVudFN0b3JlIHtcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fVxuICAgIGlmIChvcHRpb25zLnBlcnNpc3RlbmNlVHlwZSA9PT0gJ2xvY2FsU3RvcmFnZScpIHtcbiAgICAgICAgcmV0dXJuIGxvY2FsU3RvcmVcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMucGVyc2lzdGVuY2VUeXBlID09PSAnbG9jYWxTdG9yYWdlK2Nvb2tpZScpIHtcbiAgICAgICAgcmV0dXJuIGxvY2FsUGx1c0Nvb2tpZVN0b3JlXG4gICAgfVxuICAgIHJldHVybiBjb29raWVTdG9yZVxufVxuXG4vKipcbiAqIEdldCB0aGUgbmFtZSBvZiB0aGUgY29va2llIHRoYXQgaXMgdXNlZCBmb3IgdGhlIGdpdmVuIG9wdCB0eXBlIChjYXB0dXJpbmcsIGNvb2tpZSwgZXRjLilcbiAqIEBwYXJhbSB7c3RyaW5nfSB0b2tlbiAtIFBvc3RIb2cgcHJvamVjdCBjYXB0dXJpbmcgdG9rZW5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5wZXJzaXN0ZW5jZVByZWZpeD1fX3BoX29wdF9pbl9vdXRdIC0gY3VzdG9tIHByZWZpeCB0byBiZSB1c2VkIGluIHRoZSBjb29raWUvbG9jYWxzdG9yYWdlIG5hbWVcbiAqIEByZXR1cm5zIHtzdHJpbmd9IHRoZSBuYW1lIG9mIHRoZSBjb29raWUgZm9yIHRoZSBnaXZlbiBvcHQgdHlwZVxuICovXG5mdW5jdGlvbiBfZ2V0U3RvcmFnZUtleSh0b2tlbjogc3RyaW5nLCBvcHRpb25zOiBHRFBST3B0aW9ucykge1xuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9XG4gICAgcmV0dXJuIChvcHRpb25zLnBlcnNpc3RlbmNlUHJlZml4IHx8IEdEUFJfREVGQVVMVF9QRVJTSVNURU5DRV9QUkVGSVgpICsgdG9rZW5cbn1cblxuLyoqXG4gKiBHZXQgdGhlIHZhbHVlIG9mIHRoZSBjb29raWUgdGhhdCBpcyB1c2VkIGZvciB0aGUgZ2l2ZW4gb3B0IHR5cGUgKGNhcHR1cmluZywgY29va2llLCBldGMuKVxuICogQHBhcmFtIHtzdHJpbmd9IHRva2VuIC0gUG9zdEhvZyBwcm9qZWN0IGNhcHR1cmluZyB0b2tlblxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLnBlcnNpc3RlbmNlUHJlZml4PV9fcGhfb3B0X2luX291dF0gLSBjdXN0b20gcHJlZml4IHRvIGJlIHVzZWQgaW4gdGhlIGNvb2tpZS9sb2NhbHN0b3JhZ2UgbmFtZVxuICogQHJldHVybnMge3N0cmluZ30gdGhlIHZhbHVlIG9mIHRoZSBjb29raWUgZm9yIHRoZSBnaXZlbiBvcHQgdHlwZVxuICovXG5mdW5jdGlvbiBfZ2V0U3RvcmFnZVZhbHVlKHRva2VuOiBzdHJpbmcsIG9wdGlvbnM6IEdEUFJPcHRpb25zKSB7XG4gICAgcmV0dXJuIF9nZXRTdG9yYWdlKG9wdGlvbnMpLmdldChfZ2V0U3RvcmFnZUtleSh0b2tlbiwgb3B0aW9ucykpXG59XG5cbi8qKlxuICogQ2hlY2sgd2hldGhlciB0aGUgdXNlciBoYXMgc2V0IHRoZSBETlQvZG9Ob3RUcmFjayBzZXR0aW5nIHRvIHRydWUgaW4gdGhlaXIgYnJvd3NlclxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLndpbmRvd10gLSBhbHRlcm5hdGUgd2luZG93IG9iamVjdCB0byBjaGVjazsgdXNlZCB0byBmb3JjZSB2YXJpb3VzIEROVCBzZXR0aW5ncyBpbiBicm93c2VyIHRlc3RzXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLnJlc3BlY3REbnRdIC0gZmxhZyB0byB0YWtlIGJyb3dzZXIgRE5UIHNldHRpbmcgaW50byBhY2NvdW50XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gd2hldGhlciB0aGUgRE5UIHNldHRpbmcgaXMgdHJ1ZVxuICovXG5mdW5jdGlvbiBfaGFzRG9Ob3RUcmFja0ZsYWdPbihvcHRpb25zOiBHRFBST3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMucmVzcGVjdERudCkge1xuICAgICAgICBjb25zdCB3aW4gPSAob3B0aW9ucyAmJiBvcHRpb25zLndpbmRvdykgfHwgd2luZG93XG4gICAgICAgIGNvbnN0IG5hdiA9IHdpbj8ubmF2aWdhdG9yXG4gICAgICAgIGxldCBoYXNEbnRPbiA9IGZhbHNlXG4gICAgICAgIF9lYWNoKFxuICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgIG5hdj8uZG9Ob3RUcmFjaywgLy8gc3RhbmRhcmRcbiAgICAgICAgICAgICAgICAobmF2IGFzIGFueSlbJ21zRG9Ob3RUcmFjayddLFxuICAgICAgICAgICAgICAgICh3aW4gYXMgYW55KVsnZG9Ob3RUcmFjayddLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkbnRWYWx1ZSkge1xuICAgICAgICAgICAgICAgIGlmIChfaW5jbHVkZXMoW3RydWUsIDEsICcxJywgJ3llcyddLCBkbnRWYWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaGFzRG50T24gPSB0cnVlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICApXG4gICAgICAgIHJldHVybiBoYXNEbnRPblxuICAgIH1cbiAgICByZXR1cm4gZmFsc2Vcbn1cblxuLyoqXG4gKiBTZXQgY29va2llL2xvY2Fsc3RvcmFnZSBmb3IgdGhlIHVzZXIgaW5kaWNhdGluZyB0aGF0IHRoZXkgYXJlIG9wdGVkIGluIG9yIG91dCBmb3IgdGhlIGdpdmVuIG9wdCB0eXBlXG4gKiBAcGFyYW0ge2Jvb2xlYW59IG9wdFZhbHVlIC0gd2hldGhlciB0byBvcHQgdGhlIHVzZXIgaW4gb3Igb3V0IGZvciB0aGUgZ2l2ZW4gb3B0IHR5cGVcbiAqIEBwYXJhbSB7c3RyaW5nfSB0b2tlbiAtIFBvc3RIb2cgcHJvamVjdCBjYXB0dXJpbmcgdG9rZW5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAqIEBwYXJhbSB7Y2FwdHVyZUZ1bmN0aW9ufSBbb3B0aW9ucy5jYXB0dXJlXSAtIGZ1bmN0aW9uIHVzZWQgZm9yIGNhcHR1cmluZyBhIFBvc3RIb2cgZXZlbnQgdG8gcmVjb3JkIHRoZSBvcHQtaW4gYWN0aW9uXG4gKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMuY2FwdHVyZUV2ZW50TmFtZV0gLSBldmVudCBuYW1lIHRvIGJlIHVzZWQgZm9yIGNhcHR1cmluZyB0aGUgb3B0LWluIGFjdGlvblxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zLmNhcHR1cmVQcm9wZXJ0aWVzXSAtIHNldCBvZiBwcm9wZXJ0aWVzIHRvIGJlIGNhcHR1cmVkIGFsb25nIHdpdGggdGhlIG9wdC1pbiBhY3Rpb25cbiAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5wZXJzaXN0ZW5jZVByZWZpeD1fX3BoX29wdF9pbl9vdXRdIC0gY3VzdG9tIHByZWZpeCB0byBiZSB1c2VkIGluIHRoZSBjb29raWUvbG9jYWxzdG9yYWdlIG5hbWVcbiAqIEBwYXJhbSB7TnVtYmVyfSBbb3B0aW9ucy5jb29raWVFeHBpcmF0aW9uXSAtIG51bWJlciBvZiBkYXlzIHVudGlsIHRoZSBvcHQtaW4gY29va2llIGV4cGlyZXNcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuY3Jvc3NTdWJkb21haW5Db29raWVdIC0gd2hldGhlciB0aGUgb3B0LWluIGNvb2tpZSBpcyBzZXQgYXMgY3Jvc3Mtc3ViZG9tYWluIG9yIG5vdFxuICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5zZWN1cmVDb29raWVdIC0gd2hldGhlciB0aGUgb3B0LWluIGNvb2tpZSBpcyBzZXQgYXMgc2VjdXJlIG9yIG5vdFxuICovXG5mdW5jdGlvbiBfb3B0SW5PdXQob3B0VmFsdWU6IGJvb2xlYW4sIHRva2VuOiBzdHJpbmcsIG9wdGlvbnM6IEdEUFJPcHRpb25zKSB7XG4gICAgaWYgKCFfaXNTdHJpbmcodG9rZW4pIHx8ICF0b2tlbi5sZW5ndGgpIHtcbiAgICAgICAgbG9nZ2VyLmVycm9yKCdnZHByLicgKyAob3B0VmFsdWUgPyAnb3B0SW4nIDogJ29wdE91dCcpICsgJyBjYWxsZWQgd2l0aCBhbiBpbnZhbGlkIHRva2VuJylcbiAgICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge31cblxuICAgIF9nZXRTdG9yYWdlKG9wdGlvbnMpLnNldChcbiAgICAgICAgX2dldFN0b3JhZ2VLZXkodG9rZW4sIG9wdGlvbnMpLFxuICAgICAgICBvcHRWYWx1ZSA/IDEgOiAwLFxuICAgICAgICBfaXNOdW1iZXIob3B0aW9ucy5jb29raWVFeHBpcmF0aW9uKSA/IG9wdGlvbnMuY29va2llRXhwaXJhdGlvbiA6IG51bGwsXG4gICAgICAgIG9wdGlvbnMuY3Jvc3NTdWJkb21haW5Db29raWUsXG4gICAgICAgIG9wdGlvbnMuc2VjdXJlQ29va2llXG4gICAgKVxuXG4gICAgaWYgKG9wdGlvbnMuY2FwdHVyZSAmJiBvcHRWYWx1ZSkge1xuICAgICAgICAvLyBvbmx5IGNhcHR1cmUgZXZlbnQgaWYgb3B0aW5nIGluIChvcHRWYWx1ZT10cnVlKVxuICAgICAgICBvcHRpb25zLmNhcHR1cmUob3B0aW9ucy5jYXB0dXJlRXZlbnROYW1lIHx8ICckb3B0X2luJywgb3B0aW9ucy5jYXB0dXJlUHJvcGVydGllcyB8fCB7fSwge1xuICAgICAgICAgICAgc2VuZF9pbnN0YW50bHk6IHRydWUsXG4gICAgICAgIH0pXG4gICAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdXNlck9wdGVkT3V0KHBvc3Rob2c6IFBvc3RIb2cpIHtcbiAgICBsZXQgb3B0ZWRPdXQgPSBmYWxzZVxuXG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdG9rZW4gPSBwb3N0aG9nLmNvbmZpZy50b2tlblxuICAgICAgICBjb25zdCByZXNwZWN0RG50ID0gcG9zdGhvZy5jb25maWcucmVzcGVjdF9kbnRcbiAgICAgICAgY29uc3QgcGVyc2lzdGVuY2VUeXBlID0gcG9zdGhvZy5jb25maWcub3B0X291dF9jYXB0dXJpbmdfcGVyc2lzdGVuY2VfdHlwZVxuICAgICAgICBjb25zdCBwZXJzaXN0ZW5jZVByZWZpeCA9IHBvc3Rob2cuY29uZmlnLm9wdF9vdXRfY2FwdHVyaW5nX2Nvb2tpZV9wcmVmaXggfHwgdW5kZWZpbmVkXG4gICAgICAgIGNvbnN0IHdpbiA9IChwb3N0aG9nLmNvbmZpZyBhcyBhbnkpLndpbmRvdyBhcyBXaW5kb3cgfCB1bmRlZmluZWQgLy8gdXNlZCB0byBvdmVycmlkZSB3aW5kb3cgZHVyaW5nIGJyb3dzZXIgdGVzdHNcblxuICAgICAgICBpZiAodG9rZW4pIHtcbiAgICAgICAgICAgIC8vIGlmIHRoZXJlIHdhcyBhbiBpc3N1ZSBnZXR0aW5nIHRoZSB0b2tlbiwgY29udGludWUgbWV0aG9kIGV4ZWN1dGlvbiBhcyBub3JtYWxcbiAgICAgICAgICAgIG9wdGVkT3V0ID0gaGFzT3B0ZWRPdXQodG9rZW4sIHtcbiAgICAgICAgICAgICAgICByZXNwZWN0RG50LFxuICAgICAgICAgICAgICAgIHBlcnNpc3RlbmNlVHlwZSxcbiAgICAgICAgICAgICAgICBwZXJzaXN0ZW5jZVByZWZpeCxcbiAgICAgICAgICAgICAgICB3aW5kb3c6IHdpbixcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgbG9nZ2VyLmVycm9yKCdVbmV4cGVjdGVkIGVycm9yIHdoZW4gY2hlY2tpbmcgY2FwdHVyaW5nIG9wdC1vdXQgc3RhdHVzOiAnICsgZXJyKVxuICAgIH1cbiAgICByZXR1cm4gb3B0ZWRPdXRcbn1cbiIsICJpbXBvcnQge1xuICAgIENPTlNPTEVfTE9HX1JFQ09SRElOR19FTkFCTEVEX1NFUlZFUl9TSURFLFxuICAgIFNFU1NJT05fUkVDT1JESU5HX0NBTlZBU19SRUNPUkRJTkcsXG4gICAgU0VTU0lPTl9SRUNPUkRJTkdfRU5BQkxFRF9TRVJWRVJfU0lERSxcbiAgICBTRVNTSU9OX1JFQ09SRElOR19JU19TQU1QTEVELFxuICAgIFNFU1NJT05fUkVDT1JESU5HX05FVFdPUktfUEFZTE9BRF9DQVBUVVJFLFxuICAgIFNFU1NJT05fUkVDT1JESU5HX1JFQ09SREVSX1ZFUlNJT05fU0VSVkVSX1NJREUsXG59IGZyb20gJy4uLy4uL2NvbnN0YW50cydcbmltcG9ydCB7XG4gICAgRlVMTF9TTkFQU0hPVF9FVkVOVF9UWVBFLFxuICAgIElOQ1JFTUVOVEFMX1NOQVBTSE9UX0VWRU5UX1RZUEUsXG4gICAgTUVUQV9FVkVOVF9UWVBFLFxuICAgIE11dGF0aW9uUmF0ZUxpbWl0ZXIsXG4gICAgcmVjb3JkT3B0aW9ucyxcbiAgICBycndlYlJlY29yZCxcbiAgICB0cnVuY2F0ZUxhcmdlQ29uc29sZUxvZ3MsXG59IGZyb20gJy4vc2Vzc2lvbnJlY29yZGluZy11dGlscydcbmltcG9ydCB7IFBvc3RIb2cgfSBmcm9tICcuLi8uLi9wb3N0aG9nLWNvcmUnXG5pbXBvcnQgeyBEZWNpZGVSZXNwb25zZSwgRmxhZ1ZhcmlhbnQsIE5ldHdvcmtSZWNvcmRPcHRpb25zLCBOZXR3b3JrUmVxdWVzdCwgUHJvcGVydGllcyB9IGZyb20gJy4uLy4uL3R5cGVzJ1xuaW1wb3J0IHsgRXZlbnRUeXBlLCB0eXBlIGV2ZW50V2l0aFRpbWUsIHR5cGUgbGlzdGVuZXJIYW5kbGVyLCBSZWNvcmRQbHVnaW4gfSBmcm9tICdAcnJ3ZWIvdHlwZXMnXG5pbXBvcnQgQ29uZmlnIGZyb20gJy4uLy4uL2NvbmZpZydcbmltcG9ydCB7IF90aW1lc3RhbXAsIGxvYWRTY3JpcHQgfSBmcm9tICcuLi8uLi91dGlscydcblxuaW1wb3J0IHtcbiAgICBfaXNCb29sZWFuLFxuICAgIF9pc0Z1bmN0aW9uLFxuICAgIF9pc051bGwsXG4gICAgX2lzTnVsbGlzaCxcbiAgICBfaXNOdW1iZXIsXG4gICAgX2lzT2JqZWN0LFxuICAgIF9pc1N0cmluZyxcbiAgICBfaXNVbmRlZmluZWQsXG59IGZyb20gJy4uLy4uL3V0aWxzL3R5cGUtdXRpbHMnXG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tICcuLi8uLi91dGlscy9sb2dnZXInXG5pbXBvcnQgeyBhc3NpZ25hYmxlV2luZG93LCB3aW5kb3cgfSBmcm9tICcuLi8uLi91dGlscy9nbG9iYWxzJ1xuaW1wb3J0IHsgYnVpbGROZXR3b3JrUmVxdWVzdE9wdGlvbnMgfSBmcm9tICcuL2NvbmZpZydcbmltcG9ydCB7IGlzTG9jYWxob3N0IH0gZnJvbSAnLi4vLi4vdXRpbHMvcmVxdWVzdC11dGlscydcbmltcG9ydCB7IHVzZXJPcHRlZE91dCB9IGZyb20gJy4uLy4uL2dkcHItdXRpbHMnXG5cbmNvbnN0IEJBU0VfRU5EUE9JTlQgPSAnL3MvJ1xuXG5jb25zdCBGSVZFX01JTlVURVMgPSAxMDAwICogNjAgKiA1XG5jb25zdCBUV09fU0VDT05EUyA9IDIwMDBcbmV4cG9ydCBjb25zdCBSRUNPUkRJTkdfSURMRV9BQ1RJVklUWV9USU1FT1VUX01TID0gRklWRV9NSU5VVEVTXG5leHBvcnQgY29uc3QgUkVDT1JESU5HX01BWF9FVkVOVF9TSVpFID0gMTAyNCAqIDEwMjQgKiAwLjkgLy8gfjFtYiAod2l0aCBzb21lIHdpZ2dsZSByb29tKVxuZXhwb3J0IGNvbnN0IFJFQ09SRElOR19CVUZGRVJfVElNRU9VVCA9IDIwMDAgLy8gMiBzZWNvbmRzXG5leHBvcnQgY29uc3QgU0VTU0lPTl9SRUNPUkRJTkdfQkFUQ0hfS0VZID0gJ3JlY29yZGluZ3MnXG5cbi8vIE5PVEU6IEltcG9ydGluZyB0aGlzIHR5cGUgaXMgcHJvYmxlbWF0aWMgYXMgd2UgY2FuJ3Qgc2FmZWx5IGJ1bmRsZSBpdCB0byBhIFRTIGRlZmluaXRpb24gc28sIGluc3RlYWQgd2UgcmVkZWZpbmUuXG4vLyBpbXBvcnQgdHlwZSB7IHJlY29yZCB9IGZyb20gJ3Jyd2ViMi90eXBpbmdzJ1xuLy8gaW1wb3J0IHR5cGUgeyByZWNvcmRPcHRpb25zIH0gZnJvbSAncnJ3ZWIvdHlwaW5ncy90eXBlcydcblxuLy8gQ29waWVkIGZyb20gcnJ3ZWIgdHlwaW5ncyB0byBhdm9pZCBpbXBvcnRcbmVudW0gSW5jcmVtZW50YWxTb3VyY2Uge1xuICAgIE11dGF0aW9uID0gMCxcbiAgICBNb3VzZU1vdmUgPSAxLFxuICAgIE1vdXNlSW50ZXJhY3Rpb24gPSAyLFxuICAgIFNjcm9sbCA9IDMsXG4gICAgVmlld3BvcnRSZXNpemUgPSA0LFxuICAgIElucHV0ID0gNSxcbiAgICBUb3VjaE1vdmUgPSA2LFxuICAgIE1lZGlhSW50ZXJhY3Rpb24gPSA3LFxuICAgIFN0eWxlU2hlZXRSdWxlID0gOCxcbiAgICBDYW52YXNNdXRhdGlvbiA9IDksXG4gICAgRm9udCA9IDEwLFxuICAgIExvZyA9IDExLFxuICAgIERyYWcgPSAxMixcbiAgICBTdHlsZURlY2xhcmF0aW9uID0gMTMsXG4gICAgU2VsZWN0aW9uID0gMTQsXG4gICAgQWRvcHRlZFN0eWxlU2hlZXQgPSAxNSxcbn1cblxuY29uc3QgQUNUSVZFX1NPVVJDRVMgPSBbXG4gICAgSW5jcmVtZW50YWxTb3VyY2UuTW91c2VNb3ZlLFxuICAgIEluY3JlbWVudGFsU291cmNlLk1vdXNlSW50ZXJhY3Rpb24sXG4gICAgSW5jcmVtZW50YWxTb3VyY2UuU2Nyb2xsLFxuICAgIEluY3JlbWVudGFsU291cmNlLlZpZXdwb3J0UmVzaXplLFxuICAgIEluY3JlbWVudGFsU291cmNlLklucHV0LFxuICAgIEluY3JlbWVudGFsU291cmNlLlRvdWNoTW92ZSxcbiAgICBJbmNyZW1lbnRhbFNvdXJjZS5NZWRpYUludGVyYWN0aW9uLFxuICAgIEluY3JlbWVudGFsU291cmNlLkRyYWcsXG5dXG5cbi8qKlxuICogU2Vzc2lvbiByZWNvcmRpbmcgc3RhcnRzIGluIGJ1ZmZlcmluZyBtb2RlIHdoaWxlIHdhaXRpbmcgZm9yIGRlY2lkZSByZXNwb25zZVxuICogT25jZSB0aGUgcmVzcG9uc2UgaXMgcmVjZWl2ZWQgaXQgbWlnaHQgYmUgZGlzYWJsZWQsIGFjdGl2ZSBvciBzYW1wbGVkXG4gKiBXaGVuIHNhbXBsZWQgdGhhdCBtZWFucyBhIHNhbXBsZSByYXRlIGlzIHNldCBhbmQgdGhlIGxhc3QgdGltZSB0aGUgc2Vzc2lvbiBpZCB3YXMgcm90YXRlZFxuICogdGhlIHNhbXBsZSByYXRlIGRldGVybWluZWQgdGhpcyBzZXNzaW9uIHNob3VsZCBiZSBzZW50IHRvIHRoZSBzZXJ2ZXIuXG4gKi9cbnR5cGUgU2Vzc2lvblJlY29yZGluZ1N0YXR1cyA9ICdkaXNhYmxlZCcgfCAnc2FtcGxlZCcgfCAnYWN0aXZlJyB8ICdidWZmZXJpbmcnXG5cbmludGVyZmFjZSBTbmFwc2hvdEJ1ZmZlciB7XG4gICAgc2l6ZTogbnVtYmVyXG4gICAgZGF0YTogYW55W11cbiAgICBzZXNzaW9uSWQ6IHN0cmluZyB8IG51bGxcbiAgICB3aW5kb3dJZDogc3RyaW5nIHwgbnVsbFxufVxuXG5pbnRlcmZhY2UgUXVldWVkUlJXZWJFdmVudCB7XG4gICAgcnJ3ZWJNZXRob2Q6ICgpID0+IHZvaWRcbiAgICBhdHRlbXB0OiBudW1iZXJcbiAgICAvLyB0aGUgdGltZXN0YW1wIHRoaXMgd2FzIGZpcnN0IHB1dCBpbnRvIHRoaXMgcXVldWVcbiAgICBlbnF1ZXVlZEF0OiBudW1iZXJcbn1cblxuY29uc3QgbmV3UXVldWVkRXZlbnQgPSAocnJ3ZWJNZXRob2Q6ICgpID0+IHZvaWQpOiBRdWV1ZWRSUldlYkV2ZW50ID0+ICh7XG4gICAgcnJ3ZWJNZXRob2QsXG4gICAgZW5xdWV1ZWRBdDogRGF0ZS5ub3coKSxcbiAgICBhdHRlbXB0OiAxLFxufSlcblxuY29uc3QgTE9HR0VSX1BSRUZJWCA9ICdbU2Vzc2lvblJlY29yZGluZ10nXG5cbmV4cG9ydCBjbGFzcyBTZXNzaW9uUmVjb3JkaW5nIHtcbiAgICBwcml2YXRlIGluc3RhbmNlOiBQb3N0SG9nXG4gICAgcHJpdmF0ZSBfZW5kcG9pbnQ6IHN0cmluZ1xuICAgIHByaXZhdGUgZmx1c2hCdWZmZXJUaW1lcj86IGFueVxuXG4gICAgLy8gd2UgaGF2ZSBhIGJ1ZmZlciAtIHRoYXQgY29udGFpbnMgUG9zdEhvZyBzbmFwc2hvdCBldmVudHMgcmVhZHkgdG8gYmUgc2VudCB0byB0aGUgc2VydmVyXG4gICAgcHJpdmF0ZSBidWZmZXI/OiBTbmFwc2hvdEJ1ZmZlclxuICAgIC8vIGFuZCBhIHF1ZXVlIC0gdGhhdCBjb250YWlucyBycndlYiBldmVudHMgdGhhdCB3ZSB3YW50IHRvIHNlbmQgdG8gcnJ3ZWIsIGJ1dCBycndlYiB3YXNuJ3QgYWJsZSB0byBhY2NlcHQgdGhlbSB5ZXRcbiAgICBwcml2YXRlIHF1ZXVlZFJSV2ViRXZlbnRzOiBRdWV1ZWRSUldlYkV2ZW50W10gPSBbXVxuXG4gICAgcHJpdmF0ZSBtdXRhdGlvblJhdGVMaW1pdGVyPzogTXV0YXRpb25SYXRlTGltaXRlclxuICAgIHByaXZhdGUgX2NhcHR1cmVTdGFydGVkOiBib29sZWFuXG4gICAgcHJpdmF0ZSBzdG9wUnJ3ZWI6IGxpc3RlbmVySGFuZGxlciB8IHVuZGVmaW5lZFxuICAgIHByaXZhdGUgcmVjZWl2ZWREZWNpZGU6IGJvb2xlYW5cbiAgICBwcml2YXRlIHJyd2ViUmVjb3JkOiBycndlYlJlY29yZCB8IHVuZGVmaW5lZFxuICAgIHByaXZhdGUgaXNJZGxlID0gZmFsc2VcblxuICAgIHByaXZhdGUgX2xpbmtlZEZsYWdTZWVuOiBib29sZWFuID0gZmFsc2VcbiAgICBwcml2YXRlIF9sYXN0QWN0aXZpdHlUaW1lc3RhbXA6IG51bWJlciA9IERhdGUubm93KClcbiAgICBwcml2YXRlIHdpbmRvd0lkOiBzdHJpbmcgfCBudWxsID0gbnVsbFxuICAgIHByaXZhdGUgc2Vzc2lvbklkOiBzdHJpbmcgfCBudWxsID0gbnVsbFxuICAgIHByaXZhdGUgX2xpbmtlZEZsYWc6IHN0cmluZyB8IEZsYWdWYXJpYW50IHwgbnVsbCA9IG51bGxcbiAgICBwcml2YXRlIF9zYW1wbGVSYXRlOiBudW1iZXIgfCBudWxsID0gbnVsbFxuICAgIHByaXZhdGUgX21pbmltdW1EdXJhdGlvbjogbnVtYmVyIHwgbnVsbCA9IG51bGxcblxuICAgIHByaXZhdGUgX2Z1bGxTbmFwc2hvdFRpbWVyPzogbnVtYmVyXG5cbiAgICAvLyBVdGlsIHRvIGhlbHAgZGV2ZWxvcGVycyB3b3JraW5nIG9uIHRoaXMgZmVhdHVyZSBtYW51YWxseSBvdmVycmlkZVxuICAgIF9mb3JjZUFsbG93TG9jYWxob3N0TmV0d29ya0NhcHR1cmUgPSBmYWxzZVxuXG4gICAgcHVibGljIGdldCBzdGFydGVkKCk6IGJvb2xlYW4ge1xuICAgICAgICAvLyBUT0RPIGNvdWxkIHdlIHVzZSBzdGF0dXMgaW5zdGVhZCBvZiBfY2FwdHVyZVN0YXJ0ZWQ/XG4gICAgICAgIHJldHVybiB0aGlzLl9jYXB0dXJlU3RhcnRlZFxuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0IHNlc3Npb25NYW5hZ2VyKCkge1xuICAgICAgICBpZiAoIXRoaXMuaW5zdGFuY2Uuc2Vzc2lvbk1hbmFnZXIpIHtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcihMT0dHRVJfUFJFRklYICsgJyBzdGFydGVkIHdpdGhvdXQgdmFsaWQgc2Vzc2lvbk1hbmFnZXInKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKExPR0dFUl9QUkVGSVggKyAnIHN0YXJ0ZWQgd2l0aG91dCB2YWxpZCBzZXNzaW9uTWFuYWdlci4gVGhpcyBpcyBhIGJ1Zy4nKVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaW5zdGFuY2Uuc2Vzc2lvbk1hbmFnZXJcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldCBpc1NhbXBsZWQoKTogYm9vbGVhbiB8IG51bGwge1xuICAgICAgICBpZiAoX2lzTnVtYmVyKHRoaXMuX3NhbXBsZVJhdGUpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pbnN0YW5jZS5nZXRfcHJvcGVydHkoU0VTU0lPTl9SRUNPUkRJTkdfSVNfU0FNUExFRClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGdldCBzZXNzaW9uRHVyYXRpb24oKTogbnVtYmVyIHwgbnVsbCB7XG4gICAgICAgIGNvbnN0IG1vc3RSZWNlbnRTbmFwc2hvdCA9IHRoaXMuYnVmZmVyPy5kYXRhW3RoaXMuYnVmZmVyPy5kYXRhLmxlbmd0aCAtIDFdXG4gICAgICAgIGNvbnN0IHsgc2Vzc2lvblN0YXJ0VGltZXN0YW1wIH0gPSB0aGlzLnNlc3Npb25NYW5hZ2VyLmNoZWNrQW5kR2V0U2Vzc2lvbkFuZFdpbmRvd0lkKHRydWUpXG4gICAgICAgIHJldHVybiBtb3N0UmVjZW50U25hcHNob3QgPyBtb3N0UmVjZW50U25hcHNob3QudGltZXN0YW1wIC0gc2Vzc2lvblN0YXJ0VGltZXN0YW1wIDogbnVsbFxuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0IGlzUmVjb3JkaW5nRW5hYmxlZCgpIHtcbiAgICAgICAgY29uc3QgZW5hYmxlZF9zZXJ2ZXJfc2lkZSA9ICEhdGhpcy5pbnN0YW5jZS5nZXRfcHJvcGVydHkoU0VTU0lPTl9SRUNPUkRJTkdfRU5BQkxFRF9TRVJWRVJfU0lERSlcbiAgICAgICAgY29uc3QgZW5hYmxlZF9jbGllbnRfc2lkZSA9ICF0aGlzLmluc3RhbmNlLmNvbmZpZy5kaXNhYmxlX3Nlc3Npb25fcmVjb3JkaW5nXG4gICAgICAgIHJldHVybiB3aW5kb3cgJiYgZW5hYmxlZF9zZXJ2ZXJfc2lkZSAmJiBlbmFibGVkX2NsaWVudF9zaWRlXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXQgaXNDb25zb2xlTG9nQ2FwdHVyZUVuYWJsZWQoKSB7XG4gICAgICAgIGNvbnN0IGVuYWJsZWRfc2VydmVyX3NpZGUgPSAhIXRoaXMuaW5zdGFuY2UuZ2V0X3Byb3BlcnR5KENPTlNPTEVfTE9HX1JFQ09SRElOR19FTkFCTEVEX1NFUlZFUl9TSURFKVxuICAgICAgICBjb25zdCBlbmFibGVkX2NsaWVudF9zaWRlID0gdGhpcy5pbnN0YW5jZS5jb25maWcuZW5hYmxlX3JlY29yZGluZ19jb25zb2xlX2xvZ1xuICAgICAgICByZXR1cm4gZW5hYmxlZF9jbGllbnRfc2lkZSA/PyBlbmFibGVkX3NlcnZlcl9zaWRlXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXQgY2FudmFzUmVjb3JkaW5nKCk6IHsgZW5hYmxlZDogYm9vbGVhbjsgZnBzOiBudW1iZXI7IHF1YWxpdHk6IG51bWJlciB9IHwgdW5kZWZpbmVkIHtcbiAgICAgICAgY29uc3QgY2FudmFzUmVjb3JkaW5nX3NlcnZlcl9zaWRlID0gdGhpcy5pbnN0YW5jZS5nZXRfcHJvcGVydHkoU0VTU0lPTl9SRUNPUkRJTkdfQ0FOVkFTX1JFQ09SRElORylcbiAgICAgICAgcmV0dXJuIGNhbnZhc1JlY29yZGluZ19zZXJ2ZXJfc2lkZSAmJiBjYW52YXNSZWNvcmRpbmdfc2VydmVyX3NpZGUuZnBzICYmIGNhbnZhc1JlY29yZGluZ19zZXJ2ZXJfc2lkZS5xdWFsaXR5XG4gICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAgIGVuYWJsZWQ6IGNhbnZhc1JlY29yZGluZ19zZXJ2ZXJfc2lkZS5lbmFibGVkLFxuICAgICAgICAgICAgICAgICAgZnBzOiBjYW52YXNSZWNvcmRpbmdfc2VydmVyX3NpZGUuZnBzLFxuICAgICAgICAgICAgICAgICAgcXVhbGl0eTogY2FudmFzUmVjb3JkaW5nX3NlcnZlcl9zaWRlLnF1YWxpdHksXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDogdW5kZWZpbmVkXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXQgcmVjb3JkaW5nVmVyc2lvbigpIHtcbiAgICAgICAgY29uc3QgcmVjb3JkaW5nVmVyc2lvbl9zZXJ2ZXJfc2lkZSA9IHRoaXMuaW5zdGFuY2UuZ2V0X3Byb3BlcnR5KFNFU1NJT05fUkVDT1JESU5HX1JFQ09SREVSX1ZFUlNJT05fU0VSVkVSX1NJREUpXG4gICAgICAgIGNvbnN0IHJlY29yZGluZ1ZlcnNpb25fY2xpZW50X3NpZGUgPSB0aGlzLmluc3RhbmNlLmNvbmZpZy5zZXNzaW9uX3JlY29yZGluZz8ucmVjb3JkZXJWZXJzaW9uXG4gICAgICAgIHJldHVybiByZWNvcmRpbmdWZXJzaW9uX2NsaWVudF9zaWRlIHx8IHJlY29yZGluZ1ZlcnNpb25fc2VydmVyX3NpZGUgfHwgJ3YxJ1xuICAgIH1cblxuICAgIC8vIG5ldHdvcmsgcGF5bG9hZCBjYXB0dXJlIGNvbmZpZyBoYXMgdGhyZWUgcGFydHNcbiAgICAvLyBlYWNoIGNhbiBiZSBjb25maWd1cmVkIHNlcnZlciBzaWRlIG9yIGNsaWVudCBzaWRlXG4gICAgcHJpdmF0ZSBnZXQgbmV0d29ya1BheWxvYWRDYXB0dXJlKCk6XG4gICAgICAgIHwgUGljazxOZXR3b3JrUmVjb3JkT3B0aW9ucywgJ3JlY29yZEhlYWRlcnMnIHwgJ3JlY29yZEJvZHknIHwgJ3JlY29yZFBlcmZvcm1hbmNlJz5cbiAgICAgICAgfCB1bmRlZmluZWQge1xuICAgICAgICBjb25zdCBuZXR3b3JrUGF5bG9hZENhcHR1cmVfc2VydmVyX3NpZGUgPSB0aGlzLmluc3RhbmNlLmdldF9wcm9wZXJ0eShTRVNTSU9OX1JFQ09SRElOR19ORVRXT1JLX1BBWUxPQURfQ0FQVFVSRSlcbiAgICAgICAgY29uc3QgbmV0d29ya1BheWxvYWRDYXB0dXJlX2NsaWVudF9zaWRlID0ge1xuICAgICAgICAgICAgcmVjb3JkSGVhZGVyczogdGhpcy5pbnN0YW5jZS5jb25maWcuc2Vzc2lvbl9yZWNvcmRpbmc/LnJlY29yZEhlYWRlcnMsXG4gICAgICAgICAgICByZWNvcmRCb2R5OiB0aGlzLmluc3RhbmNlLmNvbmZpZy5zZXNzaW9uX3JlY29yZGluZz8ucmVjb3JkQm9keSxcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBoZWFkZXJzRW5hYmxlZCA9XG4gICAgICAgICAgICBuZXR3b3JrUGF5bG9hZENhcHR1cmVfY2xpZW50X3NpZGU/LnJlY29yZEhlYWRlcnMgfHwgbmV0d29ya1BheWxvYWRDYXB0dXJlX3NlcnZlcl9zaWRlPy5yZWNvcmRIZWFkZXJzXG4gICAgICAgIGNvbnN0IGJvZHlFbmFibGVkID1cbiAgICAgICAgICAgIG5ldHdvcmtQYXlsb2FkQ2FwdHVyZV9jbGllbnRfc2lkZT8ucmVjb3JkQm9keSB8fCBuZXR3b3JrUGF5bG9hZENhcHR1cmVfc2VydmVyX3NpZGU/LnJlY29yZEJvZHlcbiAgICAgICAgY29uc3QgcGVyZm9ybWFuY2VFbmFibGVkID1cbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2UuY29uZmlnLmNhcHR1cmVfcGVyZm9ybWFuY2UgfHwgbmV0d29ya1BheWxvYWRDYXB0dXJlX3NlcnZlcl9zaWRlPy5jYXB0dXJlUGVyZm9ybWFuY2VcblxuICAgICAgICByZXR1cm4gaGVhZGVyc0VuYWJsZWQgfHwgYm9keUVuYWJsZWQgfHwgcGVyZm9ybWFuY2VFbmFibGVkXG4gICAgICAgICAgICA/IHsgcmVjb3JkSGVhZGVyczogaGVhZGVyc0VuYWJsZWQsIHJlY29yZEJvZHk6IGJvZHlFbmFibGVkLCByZWNvcmRQZXJmb3JtYW5jZTogcGVyZm9ybWFuY2VFbmFibGVkIH1cbiAgICAgICAgICAgIDogdW5kZWZpbmVkXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogZGVmYXVsdHMgdG8gYnVmZmVyaW5nIG1vZGUgdW50aWwgYSBkZWNpZGUgcmVzcG9uc2UgaXMgcmVjZWl2ZWRcbiAgICAgKiBvbmNlIGEgZGVjaWRlIHJlc3BvbnNlIGlzIHJlY2VpdmVkIHN0YXR1cyBjYW4gYmUgZGlzYWJsZWQsIGFjdGl2ZSBvciBzYW1wbGVkXG4gICAgICovXG4gICAgcHJpdmF0ZSBnZXQgc3RhdHVzKCk6IFNlc3Npb25SZWNvcmRpbmdTdGF0dXMge1xuICAgICAgICBpZiAoIXRoaXMucmVjZWl2ZWREZWNpZGUpIHtcbiAgICAgICAgICAgIHJldHVybiAnYnVmZmVyaW5nJ1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aGlzLmlzUmVjb3JkaW5nRW5hYmxlZCkge1xuICAgICAgICAgICAgcmV0dXJuICdkaXNhYmxlZCdcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghX2lzTnVsbGlzaCh0aGlzLl9saW5rZWRGbGFnKSAmJiAhdGhpcy5fbGlua2VkRmxhZ1NlZW4pIHtcbiAgICAgICAgICAgIHJldHVybiAnYnVmZmVyaW5nJ1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKF9pc0Jvb2xlYW4odGhpcy5pc1NhbXBsZWQpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pc1NhbXBsZWQgPyAnc2FtcGxlZCcgOiAnZGlzYWJsZWQnXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gJ2FjdGl2ZSdcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0cnVjdG9yKGluc3RhbmNlOiBQb3N0SG9nKSB7XG4gICAgICAgIHRoaXMuaW5zdGFuY2UgPSBpbnN0YW5jZVxuICAgICAgICB0aGlzLl9jYXB0dXJlU3RhcnRlZCA9IGZhbHNlXG4gICAgICAgIHRoaXMuX2VuZHBvaW50ID0gQkFTRV9FTkRQT0lOVFxuICAgICAgICB0aGlzLnN0b3BScndlYiA9IHVuZGVmaW5lZFxuICAgICAgICB0aGlzLnJlY2VpdmVkRGVjaWRlID0gZmFsc2VcblxuICAgICAgICB3aW5kb3c/LmFkZEV2ZW50TGlzdGVuZXIoJ2JlZm9yZXVubG9hZCcsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX2ZsdXNoQnVmZmVyKClcbiAgICAgICAgfSlcblxuICAgICAgICB3aW5kb3c/LmFkZEV2ZW50TGlzdGVuZXIoJ29mZmxpbmUnLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl90cnlBZGRDdXN0b21FdmVudCgnYnJvd3NlciBvZmZsaW5lJywge30pXG4gICAgICAgIH0pXG5cbiAgICAgICAgd2luZG93Py5hZGRFdmVudExpc3RlbmVyKCdvbmxpbmUnLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl90cnlBZGRDdXN0b21FdmVudCgnYnJvd3NlciBvbmxpbmUnLCB7fSlcbiAgICAgICAgfSlcblxuICAgICAgICBpZiAoIXRoaXMuaW5zdGFuY2Uuc2Vzc2lvbk1hbmFnZXIpIHtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcihMT0dHRVJfUFJFRklYICsgJyBzdGFydGVkIHdpdGhvdXQgdmFsaWQgc2Vzc2lvbk1hbmFnZXInKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKExPR0dFUl9QUkVGSVggKyAnIHN0YXJ0ZWQgd2l0aG91dCB2YWxpZCBzZXNzaW9uTWFuYWdlci4gVGhpcyBpcyBhIGJ1Zy4nKVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5idWZmZXIgPSB0aGlzLmNsZWFyQnVmZmVyKClcbiAgICB9XG5cbiAgICBzdGFydFJlY29yZGluZ0lmRW5hYmxlZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNSZWNvcmRpbmdFbmFibGVkKSB7XG4gICAgICAgICAgICB0aGlzLl9zdGFydENhcHR1cmUoKVxuICAgICAgICAgICAgbG9nZ2VyLmluZm8oTE9HR0VSX1BSRUZJWCArICcgc3RhcnRlZCcpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnN0b3BSZWNvcmRpbmcoKVxuICAgICAgICAgICAgdGhpcy5jbGVhckJ1ZmZlcigpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzdG9wUmVjb3JkaW5nKCkge1xuICAgICAgICBpZiAodGhpcy5fY2FwdHVyZVN0YXJ0ZWQgJiYgdGhpcy5zdG9wUnJ3ZWIpIHtcbiAgICAgICAgICAgIHRoaXMuc3RvcFJyd2ViKClcbiAgICAgICAgICAgIHRoaXMuc3RvcFJyd2ViID0gdW5kZWZpbmVkXG4gICAgICAgICAgICB0aGlzLl9jYXB0dXJlU3RhcnRlZCA9IGZhbHNlXG4gICAgICAgICAgICBsb2dnZXIuaW5mbyhMT0dHRVJfUFJFRklYICsgJyBzdG9wcGVkJylcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgbWFrZVNhbXBsaW5nRGVjaXNpb24oc2Vzc2lvbklkOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgY29uc3Qgc2Vzc2lvbklkQ2hhbmdlZCA9IHRoaXMuc2Vzc2lvbklkICE9PSBzZXNzaW9uSWRcblxuICAgICAgICBpZiAoIV9pc051bWJlcih0aGlzLl9zYW1wbGVSYXRlKSkge1xuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZS5wZXJzaXN0ZW5jZT8ucmVnaXN0ZXIoe1xuICAgICAgICAgICAgICAgIFtTRVNTSU9OX1JFQ09SRElOR19JU19TQU1QTEVEXTogbnVsbCxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHN0b3JlZElzU2FtcGxlZCA9IHRoaXMuaXNTYW1wbGVkXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGlmIHdlIGdldCB0aGlzIGZhciB0aGVuIHdlIHNob3VsZCBtYWtlIGEgc2FtcGxpbmcgZGVjaXNpb24uXG4gICAgICAgICAqIFdoZW4gdGhlIHNlc3Npb24gaWQgY2hhbmdlcyBvciB0aGVyZSBpcyBubyBzdG9yZWQgc2FtcGxpbmcgZGVjaXNpb24gZm9yIHRoaXMgc2Vzc2lvbiBpZFxuICAgICAgICAgKiB0aGVuIHdlIHNob3VsZCBtYWtlIGEgbmV3IGRlY2lzaW9uLlxuICAgICAgICAgKlxuICAgICAgICAgKiBPdGhlcndpc2UsIHdlIHNob3VsZCB1c2UgdGhlIHN0b3JlZCBkZWNpc2lvbi5cbiAgICAgICAgICovXG4gICAgICAgIGxldCBzaG91bGRTYW1wbGU6IGJvb2xlYW5cbiAgICAgICAgaWYgKHNlc3Npb25JZENoYW5nZWQgfHwgIV9pc0Jvb2xlYW4oc3RvcmVkSXNTYW1wbGVkKSkge1xuICAgICAgICAgICAgY29uc3QgcmFuZG9tTnVtYmVyID0gTWF0aC5yYW5kb20oKVxuICAgICAgICAgICAgc2hvdWxkU2FtcGxlID0gcmFuZG9tTnVtYmVyIDwgdGhpcy5fc2FtcGxlUmF0ZVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2hvdWxkU2FtcGxlID0gc3RvcmVkSXNTYW1wbGVkXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXNob3VsZFNhbXBsZSkge1xuICAgICAgICAgICAgbG9nZ2VyLndhcm4oXG4gICAgICAgICAgICAgICAgTE9HR0VSX1BSRUZJWCArXG4gICAgICAgICAgICAgICAgICAgIGAgU2FtcGxlIHJhdGUgKCR7dGhpcy5fc2FtcGxlUmF0ZX0pIGhhcyBkZXRlcm1pbmVkIHRoYXQgdGhpcyBzZXNzaW9uSWQgKCR7c2Vzc2lvbklkfSkgd2lsbCBub3QgYmUgc2VudCB0byB0aGUgc2VydmVyLmBcbiAgICAgICAgICAgIClcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuaW5zdGFuY2UucGVyc2lzdGVuY2U/LnJlZ2lzdGVyKHtcbiAgICAgICAgICAgIFtTRVNTSU9OX1JFQ09SRElOR19JU19TQU1QTEVEXTogc2hvdWxkU2FtcGxlLFxuICAgICAgICB9KVxuICAgIH1cblxuICAgIGFmdGVyRGVjaWRlUmVzcG9uc2UocmVzcG9uc2U6IERlY2lkZVJlc3BvbnNlKSB7XG4gICAgICAgIGlmICh0aGlzLmluc3RhbmNlLnBlcnNpc3RlbmNlKSB7XG4gICAgICAgICAgICB0aGlzLmluc3RhbmNlLnBlcnNpc3RlbmNlLnJlZ2lzdGVyKHtcbiAgICAgICAgICAgICAgICBbU0VTU0lPTl9SRUNPUkRJTkdfRU5BQkxFRF9TRVJWRVJfU0lERV06ICEhcmVzcG9uc2VbJ3Nlc3Npb25SZWNvcmRpbmcnXSxcbiAgICAgICAgICAgICAgICBbQ09OU09MRV9MT0dfUkVDT1JESU5HX0VOQUJMRURfU0VSVkVSX1NJREVdOiByZXNwb25zZS5zZXNzaW9uUmVjb3JkaW5nPy5jb25zb2xlTG9nUmVjb3JkaW5nRW5hYmxlZCxcbiAgICAgICAgICAgICAgICBbU0VTU0lPTl9SRUNPUkRJTkdfUkVDT1JERVJfVkVSU0lPTl9TRVJWRVJfU0lERV06IHJlc3BvbnNlLnNlc3Npb25SZWNvcmRpbmc/LnJlY29yZGVyVmVyc2lvbixcbiAgICAgICAgICAgICAgICBbU0VTU0lPTl9SRUNPUkRJTkdfTkVUV09SS19QQVlMT0FEX0NBUFRVUkVdOiB7XG4gICAgICAgICAgICAgICAgICAgIGNhcHR1cmVQZXJmb3JtYW5jZTogcmVzcG9uc2UuY2FwdHVyZVBlcmZvcm1hbmNlLFxuICAgICAgICAgICAgICAgICAgICAuLi5yZXNwb25zZS5zZXNzaW9uUmVjb3JkaW5nPy5uZXR3b3JrUGF5bG9hZENhcHR1cmUsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBbU0VTU0lPTl9SRUNPUkRJTkdfQ0FOVkFTX1JFQ09SRElOR106IHtcbiAgICAgICAgICAgICAgICAgICAgZW5hYmxlZDogcmVzcG9uc2Uuc2Vzc2lvblJlY29yZGluZz8ucmVjb3JkQ2FudmFzLFxuICAgICAgICAgICAgICAgICAgICBmcHM6IHJlc3BvbnNlLnNlc3Npb25SZWNvcmRpbmc/LmNhbnZhc0ZwcyxcbiAgICAgICAgICAgICAgICAgICAgcXVhbGl0eTogcmVzcG9uc2Uuc2Vzc2lvblJlY29yZGluZz8uY2FudmFzUXVhbGl0eSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHJlY2VpdmVkU2FtcGxlUmF0ZSA9IHJlc3BvbnNlLnNlc3Npb25SZWNvcmRpbmc/LnNhbXBsZVJhdGVcbiAgICAgICAgdGhpcy5fc2FtcGxlUmF0ZSA9IF9pc051bGxpc2gocmVjZWl2ZWRTYW1wbGVSYXRlKSA/IG51bGwgOiBwYXJzZUZsb2F0KHJlY2VpdmVkU2FtcGxlUmF0ZSlcblxuICAgICAgICBjb25zdCByZWNlaXZlZE1pbmltdW1EdXJhdGlvbiA9IHJlc3BvbnNlLnNlc3Npb25SZWNvcmRpbmc/Lm1pbmltdW1EdXJhdGlvbk1pbGxpc2Vjb25kc1xuICAgICAgICB0aGlzLl9taW5pbXVtRHVyYXRpb24gPSBfaXNVbmRlZmluZWQocmVjZWl2ZWRNaW5pbXVtRHVyYXRpb24pID8gbnVsbCA6IHJlY2VpdmVkTWluaW11bUR1cmF0aW9uXG5cbiAgICAgICAgdGhpcy5fbGlua2VkRmxhZyA9IHJlc3BvbnNlLnNlc3Npb25SZWNvcmRpbmc/LmxpbmtlZEZsYWcgfHwgbnVsbFxuXG4gICAgICAgIGlmIChyZXNwb25zZS5zZXNzaW9uUmVjb3JkaW5nPy5lbmRwb2ludCkge1xuICAgICAgICAgICAgdGhpcy5fZW5kcG9pbnQgPSByZXNwb25zZS5zZXNzaW9uUmVjb3JkaW5nPy5lbmRwb2ludFxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKF9pc051bWJlcih0aGlzLl9zYW1wbGVSYXRlKSkge1xuICAgICAgICAgICAgdGhpcy5zZXNzaW9uTWFuYWdlci5vblNlc3Npb25JZCgoc2Vzc2lvbklkKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5tYWtlU2FtcGxpbmdEZWNpc2lvbihzZXNzaW9uSWQpXG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFfaXNOdWxsaXNoKHRoaXMuX2xpbmtlZEZsYWcpKSB7XG4gICAgICAgICAgICBjb25zdCBsaW5rZWRGbGFnID0gX2lzU3RyaW5nKHRoaXMuX2xpbmtlZEZsYWcpID8gdGhpcy5fbGlua2VkRmxhZyA6IHRoaXMuX2xpbmtlZEZsYWc/LmZsYWdcbiAgICAgICAgICAgIGNvbnN0IGxpbmtlZFZhcmlhbnQgPSBfaXNTdHJpbmcodGhpcy5fbGlua2VkRmxhZykgPyBudWxsIDogdGhpcy5fbGlua2VkRmxhZz8udmFyaWFudFxuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZS5vbkZlYXR1cmVGbGFncygoX2ZsYWdzLCB2YXJpYW50cykgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZsYWdJc1ByZXNlbnQgPSBfaXNPYmplY3QodmFyaWFudHMpICYmIGxpbmtlZEZsYWcgaW4gdmFyaWFudHNcbiAgICAgICAgICAgICAgICBjb25zdCBsaW5rZWRGbGFnTWF0Y2hlcyA9IGxpbmtlZFZhcmlhbnQgPyB2YXJpYW50c1tsaW5rZWRGbGFnXSA9PT0gbGlua2VkVmFyaWFudCA6IGZsYWdJc1ByZXNlbnRcbiAgICAgICAgICAgICAgICBpZiAobGlua2VkRmxhZ01hdGNoZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmluZm8oTE9HR0VSX1BSRUZJWCArICcgbGlua2VkIGZsYWcgbWF0Y2hlZCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmtlZEZsYWcsXG4gICAgICAgICAgICAgICAgICAgICAgICBsaW5rZWRWYXJpYW50LFxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLl9saW5rZWRGbGFnU2VlbiA9IGxpbmtlZEZsYWdNYXRjaGVzXG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5yZWNlaXZlZERlY2lkZSA9IHRydWVcbiAgICAgICAgdGhpcy5zdGFydFJlY29yZGluZ0lmRW5hYmxlZCgpXG4gICAgfVxuXG4gICAgbG9nKG1lc3NhZ2U6IHN0cmluZywgbGV2ZWw6ICdsb2cnIHwgJ3dhcm4nIHwgJ2Vycm9yJyA9ICdsb2cnKSB7XG4gICAgICAgIHRoaXMuaW5zdGFuY2Uuc2Vzc2lvblJlY29yZGluZz8ub25SUndlYkVtaXQoe1xuICAgICAgICAgICAgdHlwZTogNixcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICBwbHVnaW46ICdycndlYi9jb25zb2xlQDEnLFxuICAgICAgICAgICAgICAgIHBheWxvYWQ6IHtcbiAgICAgICAgICAgICAgICAgICAgbGV2ZWwsXG4gICAgICAgICAgICAgICAgICAgIHRyYWNlOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgLy8gRXZlbiB0aG91Z2ggaXQgaXMgYSBzdHJpbmcgd2Ugc3RyaW5naWZ5IGl0IGFzIHRoYXQncyB3aGF0IHJyd2ViIGV4cGVjdHNcbiAgICAgICAgICAgICAgICAgICAgcGF5bG9hZDogW0pTT04uc3RyaW5naWZ5KG1lc3NhZ2UpXSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogX3RpbWVzdGFtcCgpLFxuICAgICAgICB9KVxuICAgIH1cbiAgICBwcml2YXRlIF9zdGFydENhcHR1cmUoKSB7XG4gICAgICAgIGlmIChfaXNVbmRlZmluZWQoT2JqZWN0LmFzc2lnbikpIHtcbiAgICAgICAgICAgIC8vIEFjY29yZGluZyB0byB0aGUgcnJ3ZWIgZG9jcywgcnJ3ZWIgaXMgbm90IHN1cHBvcnRlZCBvbiBJRTExIGFuZCBiZWxvdzpcbiAgICAgICAgICAgIC8vIFwicnJ3ZWIgZG9lcyBub3Qgc3VwcG9ydCBJRTExIGFuZCBiZWxvdyBiZWNhdXNlIGl0IHVzZXMgdGhlIE11dGF0aW9uT2JzZXJ2ZXIgQVBJIHdoaWNoIHdhcyBzdXBwb3J0ZWQgYnkgdGhlc2UgYnJvd3NlcnMuXCJcbiAgICAgICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9ycndlYi1pby9ycndlYi9ibG9iL21hc3Rlci9ndWlkZS5tZCNjb21wYXRpYmlsaXR5LW5vdGVcbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAvLyBIb3dldmVyLCBNdXRhdGlvbk9ic2VydmVyIGRvZXMgZXhpc3Qgb24gSUUxMSwgaXQganVzdCBkb2Vzbid0IHdvcmsgd2VsbCBhbmQgZG9lcyBub3QgZGV0ZWN0IGFsbCBjaGFuZ2VzLlxuICAgICAgICAgICAgLy8gSW5zdGVhZCwgd2hlbiB3ZSBsb2FkIFwicmVjb3JkZXIuanNcIiwgdGhlIGZpcnN0IEpTIGVycm9yIGlzIGFib3V0IFwiT2JqZWN0LmFzc2lnblwiIGJlaW5nIHVuZGVmaW5lZC5cbiAgICAgICAgICAgIC8vIFRodXMgaW5zdGVhZCBvZiBNdXRhdGlvbk9ic2VydmVyLCB3ZSBsb29rIGZvciB0aGlzIGZ1bmN0aW9uIGFuZCBibG9jayByZWNvcmRpbmcgaWYgaXQncyB1bmRlZmluZWQuXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFdlIGRvIG5vdCBzd2l0Y2ggcmVjb3JkZXIgdmVyc2lvbnMgbWlkd2F5IHRocm91Z2ggYSByZWNvcmRpbmcuXG4gICAgICAgIC8vIGRvIG5vdCBzdGFydCBpZiBleHBsaWNpdGx5IGRpc2FibGVkIG9yIGlmIHRoZSB1c2VyIGhhcyBvcHRlZCBvdXRcbiAgICAgICAgaWYgKHRoaXMuX2NhcHR1cmVTdGFydGVkIHx8IHRoaXMuaW5zdGFuY2UuY29uZmlnLmRpc2FibGVfc2Vzc2lvbl9yZWNvcmRpbmcgfHwgdXNlck9wdGVkT3V0KHRoaXMuaW5zdGFuY2UpKSB7XG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX2NhcHR1cmVTdGFydGVkID0gdHJ1ZVxuICAgICAgICAvLyBXZSB3YW50IHRvIGVuc3VyZSB0aGUgc2Vzc2lvbk1hbmFnZXIgaXMgcmVzZXQgaWYgbmVjZXNzYXJ5IG9uIGxvYWQgb2YgdGhlIHJlY29yZGVyXG4gICAgICAgIHRoaXMuc2Vzc2lvbk1hbmFnZXIuY2hlY2tBbmRHZXRTZXNzaW9uQW5kV2luZG93SWQoKVxuXG4gICAgICAgIGNvbnN0IHJlY29yZGVySlMgPSB0aGlzLnJlY29yZGluZ1ZlcnNpb24gPT09ICd2MicgPyAncmVjb3JkZXItdjIuanMnIDogJ3JlY29yZGVyLmpzJ1xuXG4gICAgICAgIC8vIElmIHJlY29yZGVyLmpzIGlzIGFscmVhZHkgbG9hZGVkIChpZiBhcnJheS5mdWxsLmpzIHNuaXBwZXQgaXMgdXNlZCBvciBwb3N0aG9nLWpzL2Rpc3QvcmVjb3JkZXIgaXNcbiAgICAgICAgLy8gaW1wb3J0ZWQpIG9yIG1hdGNoZXMgdGhlIHJlcXVlc3RlZCByZWNvcmRlciB2ZXJzaW9uLCBkb24ndCBsb2FkIHNjcmlwdC4gT3RoZXJ3aXNlLCByZW1vdGVseSBpbXBvcnRcbiAgICAgICAgLy8gcmVjb3JkZXIuanMgZnJvbSBjZG4gc2luY2UgaXQgaGFzbid0IGJlZW4gbG9hZGVkLlxuICAgICAgICBpZiAodGhpcy5pbnN0YW5jZS5fX2xvYWRlZF9yZWNvcmRlcl92ZXJzaW9uICE9PSB0aGlzLnJlY29yZGluZ1ZlcnNpb24pIHtcbiAgICAgICAgICAgIGxvYWRTY3JpcHQoXG4gICAgICAgICAgICAgICAgdGhpcy5pbnN0YW5jZS5yZXF1ZXN0Um91dGVyLmVuZHBvaW50Rm9yKCdhc3NldHMnLCBgL3N0YXRpYy8ke3JlY29yZGVySlN9P3Y9JHtDb25maWcuTElCX1ZFUlNJT059YCksXG4gICAgICAgICAgICAgICAgKGVycikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbG9nZ2VyLmVycm9yKExPR0dFUl9QUkVGSVggKyBgIGNvdWxkIG5vdCBsb2FkICR7cmVjb3JkZXJKU31gLCBlcnIpXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9vblNjcmlwdExvYWRlZCgpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fb25TY3JpcHRMb2FkZWQoKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfaXNJbnRlcmFjdGl2ZUV2ZW50KGV2ZW50OiBldmVudFdpdGhUaW1lKSB7XG4gICAgICAgIHJldHVybiBldmVudC50eXBlID09PSBJTkNSRU1FTlRBTF9TTkFQU0hPVF9FVkVOVF9UWVBFICYmIEFDVElWRV9TT1VSQ0VTLmluZGV4T2YoZXZlbnQuZGF0YT8uc291cmNlKSAhPT0gLTFcbiAgICB9XG5cbiAgICBwcml2YXRlIF91cGRhdGVXaW5kb3dBbmRTZXNzaW9uSWRzKGV2ZW50OiBldmVudFdpdGhUaW1lKSB7XG4gICAgICAgIC8vIFNvbWUgcmVjb3JkaW5nIGV2ZW50cyBhcmUgdHJpZ2dlcmVkIGJ5IG5vbi11c2VyIGV2ZW50cyAoZS5nLiBcIlggbWludXRlcyBhZ29cIiB0ZXh0IHVwZGF0aW5nIG9uIHRoZSBzY3JlZW4pLlxuICAgICAgICAvLyBXZSBkb24ndCB3YW50IHRvIGV4dGVuZCB0aGUgc2Vzc2lvbiBvciB0cmlnZ2VyIGEgbmV3IHNlc3Npb24gaW4gdGhlc2UgY2FzZXMuIFRoZXNlIGV2ZW50cyBhcmUgZGVzaWduYXRlZCBieSBldmVudFxuICAgICAgICAvLyB0eXBlIC0+IGluY3JlbWVudGFsIHVwZGF0ZSwgYW5kIHNvdXJjZSAtPiBtdXRhdGlvbi5cblxuICAgICAgICBjb25zdCBpc1VzZXJJbnRlcmFjdGlvbiA9IHRoaXMuX2lzSW50ZXJhY3RpdmVFdmVudChldmVudClcblxuICAgICAgICBpZiAoIWlzVXNlckludGVyYWN0aW9uICYmICF0aGlzLmlzSWRsZSkge1xuICAgICAgICAgICAgLy8gV2UgY2hlY2sgaWYgdGhlIGxhc3RBY3Rpdml0eVRpbWVzdGFtcCBpcyBvbGQgZW5vdWdoIHRvIGdvIGlkbGVcbiAgICAgICAgICAgIGlmIChldmVudC50aW1lc3RhbXAgLSB0aGlzLl9sYXN0QWN0aXZpdHlUaW1lc3RhbXAgPiBSRUNPUkRJTkdfSURMRV9BQ1RJVklUWV9USU1FT1VUX01TKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pc0lkbGUgPSB0cnVlXG4gICAgICAgICAgICAgICAgdGhpcy5fdHJ5QWRkQ3VzdG9tRXZlbnQoJ3Nlc3Npb25JZGxlJywge1xuICAgICAgICAgICAgICAgICAgICByZWFzb246ICd1c2VyIGluYWN0aXZpdHknLFxuICAgICAgICAgICAgICAgICAgICB0aW1lU2luY2VMYXN0QWN0aXZlOiBldmVudC50aW1lc3RhbXAgLSB0aGlzLl9sYXN0QWN0aXZpdHlUaW1lc3RhbXAsXG4gICAgICAgICAgICAgICAgICAgIHRocmVzaG9sZDogUkVDT1JESU5HX0lETEVfQUNUSVZJVFlfVElNRU9VVF9NUyxcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHJldHVybmluZ0Zyb21JZGxlID0gZmFsc2VcbiAgICAgICAgaWYgKGlzVXNlckludGVyYWN0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLl9sYXN0QWN0aXZpdHlUaW1lc3RhbXAgPSBldmVudC50aW1lc3RhbXBcbiAgICAgICAgICAgIGlmICh0aGlzLmlzSWRsZSkge1xuICAgICAgICAgICAgICAgIC8vIFJlbW92ZSB0aGUgaWRsZSBzdGF0ZSBpZiBzZXQgYW5kIHRyaWdnZXIgYSBmdWxsIHNuYXBzaG90IGFzIHdlIHdpbGwgaGF2ZSBpZ25vcmVkIHByZXZpb3VzIG11dGF0aW9uc1xuICAgICAgICAgICAgICAgIHRoaXMuaXNJZGxlID0gZmFsc2VcbiAgICAgICAgICAgICAgICB0aGlzLl90cnlBZGRDdXN0b21FdmVudCgnc2Vzc2lvbk5vTG9uZ2VySWRsZScsIHtcbiAgICAgICAgICAgICAgICAgICAgcmVhc29uOiAndXNlciBhY3Rpdml0eScsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IGV2ZW50LnR5cGUsXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICByZXR1cm5pbmdGcm9tSWRsZSA9IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmlzSWRsZSkge1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cblxuICAgICAgICAvLyBXZSBvbmx5IHdhbnQgdG8gZXh0ZW5kIHRoZSBzZXNzaW9uIGlmIGl0IGlzIGFuIGludGVyYWN0aXZlIGV2ZW50LlxuICAgICAgICBjb25zdCB7IHdpbmRvd0lkLCBzZXNzaW9uSWQgfSA9IHRoaXMuc2Vzc2lvbk1hbmFnZXIuY2hlY2tBbmRHZXRTZXNzaW9uQW5kV2luZG93SWQoXG4gICAgICAgICAgICAhaXNVc2VySW50ZXJhY3Rpb24sXG4gICAgICAgICAgICBldmVudC50aW1lc3RhbXBcbiAgICAgICAgKVxuXG4gICAgICAgIGNvbnN0IHNlc3Npb25JZENoYW5nZWQgPSB0aGlzLnNlc3Npb25JZCAhPT0gc2Vzc2lvbklkXG4gICAgICAgIGNvbnN0IHdpbmRvd0lkQ2hhbmdlZCA9IHRoaXMud2luZG93SWQgIT09IHdpbmRvd0lkXG5cbiAgICAgICAgdGhpcy53aW5kb3dJZCA9IHdpbmRvd0lkXG4gICAgICAgIHRoaXMuc2Vzc2lvbklkID0gc2Vzc2lvbklkXG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgcmV0dXJuaW5nRnJvbUlkbGUgfHxcbiAgICAgICAgICAgIChbRlVMTF9TTkFQU0hPVF9FVkVOVF9UWVBFLCBNRVRBX0VWRU5UX1RZUEVdLmluZGV4T2YoZXZlbnQudHlwZSkgPT09IC0xICYmXG4gICAgICAgICAgICAgICAgKHdpbmRvd0lkQ2hhbmdlZCB8fCBzZXNzaW9uSWRDaGFuZ2VkKSlcbiAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzLl90cnlUYWtlRnVsbFNuYXBzaG90KClcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgX3RyeVJSV2ViTWV0aG9kKHF1ZXVlZFJSV2ViRXZlbnQ6IFF1ZXVlZFJSV2ViRXZlbnQpOiBib29sZWFuIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHF1ZXVlZFJSV2ViRXZlbnQucnJ3ZWJNZXRob2QoKVxuICAgICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgLy8gU29tZXRpbWVzIGEgcmFjZSBjYW4gb2NjdXIgd2hlcmUgdGhlIHJlY29yZGVyIGlzIG5vdCBmdWxseSBzdGFydGVkIHlldFxuICAgICAgICAgICAgbG9nZ2VyLndhcm4oTE9HR0VSX1BSRUZJWCArICcgY291bGQgbm90IGVtaXQgcXVldWVkIHJyd2ViIGV2ZW50LicsIGUpXG4gICAgICAgICAgICB0aGlzLnF1ZXVlZFJSV2ViRXZlbnRzLmxlbmd0aCA8IDEwICYmXG4gICAgICAgICAgICAgICAgdGhpcy5xdWV1ZWRSUldlYkV2ZW50cy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgZW5xdWV1ZWRBdDogcXVldWVkUlJXZWJFdmVudC5lbnF1ZXVlZEF0IHx8IERhdGUubm93KCksXG4gICAgICAgICAgICAgICAgICAgIGF0dGVtcHQ6IHF1ZXVlZFJSV2ViRXZlbnQuYXR0ZW1wdCsrLFxuICAgICAgICAgICAgICAgICAgICBycndlYk1ldGhvZDogcXVldWVkUlJXZWJFdmVudC5ycndlYk1ldGhvZCxcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIF90cnlBZGRDdXN0b21FdmVudCh0YWc6IHN0cmluZywgcGF5bG9hZDogYW55KTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLl90cnlSUldlYk1ldGhvZChuZXdRdWV1ZWRFdmVudCgoKSA9PiB0aGlzLnJyd2ViUmVjb3JkIS5hZGRDdXN0b21FdmVudCh0YWcsIHBheWxvYWQpKSlcbiAgICB9XG5cbiAgICBwcml2YXRlIF90cnlUYWtlRnVsbFNuYXBzaG90KCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fdHJ5UlJXZWJNZXRob2QobmV3UXVldWVkRXZlbnQoKCkgPT4gdGhpcy5ycndlYlJlY29yZCEudGFrZUZ1bGxTbmFwc2hvdCgpKSlcbiAgICB9XG5cbiAgICBwcml2YXRlIF9vblNjcmlwdExvYWRlZCgpIHtcbiAgICAgICAgLy8gcnJ3ZWIgY29uZmlnIGluZm86IGh0dHBzOi8vZ2l0aHViLmNvbS9ycndlYi1pby9ycndlYi9ibG9iLzdkNWQwMDMzMjU4ZDZjMjk1OTlmYjA4NDEyMjAyZDlhMmM3Yjk0MTMvc3JjL3JlY29yZC9pbmRleC50cyNMMjhcbiAgICAgICAgY29uc3Qgc2Vzc2lvblJlY29yZGluZ09wdGlvbnM6IHJlY29yZE9wdGlvbnM8ZXZlbnRXaXRoVGltZT4gPSB7XG4gICAgICAgICAgICAvLyBzZWxlY3Qgc2V0IG9mIHJyd2ViIGNvbmZpZyBvcHRpb25zIHdlIGV4cG9zZSB0byBvdXIgdXNlcnNcbiAgICAgICAgICAgIC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vcnJ3ZWItaW8vcnJ3ZWIvYmxvYi9tYXN0ZXIvZ3VpZGUubWRcbiAgICAgICAgICAgIGJsb2NrQ2xhc3M6ICdwaC1uby1jYXB0dXJlJyxcbiAgICAgICAgICAgIGJsb2NrU2VsZWN0b3I6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGlnbm9yZUNsYXNzOiAncGgtaWdub3JlLWlucHV0JyxcbiAgICAgICAgICAgIG1hc2tUZXh0Q2xhc3M6ICdwaC1tYXNrJyxcbiAgICAgICAgICAgIG1hc2tUZXh0U2VsZWN0b3I6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIG1hc2tUZXh0Rm46IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIG1hc2tBbGxJbnB1dHM6IHRydWUsXG4gICAgICAgICAgICBtYXNrSW5wdXRPcHRpb25zOiB7fSxcbiAgICAgICAgICAgIG1hc2tJbnB1dEZuOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBzbGltRE9NT3B0aW9uczoge30sXG4gICAgICAgICAgICBjb2xsZWN0Rm9udHM6IGZhbHNlLFxuICAgICAgICAgICAgaW5saW5lU3R5bGVzaGVldDogdHJ1ZSxcbiAgICAgICAgICAgIHJlY29yZENyb3NzT3JpZ2luSWZyYW1lczogZmFsc2UsXG4gICAgICAgIH1cbiAgICAgICAgLy8gV2Ugc3dpdGNoZWQgZnJvbSBsb2FkaW5nIGFsbCBvZiBycndlYiB0byBqdXN0IHRoZSByZWNvcmQgcGFydCwgYnV0XG4gICAgICAgIC8vIGtlZXAgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkgaWYgc29tZW9uZSBoYXNuJ3QgdXBncmFkZWQgUG9zdEhvZ1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2Jhbi10cy1jb21tZW50XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgdGhpcy5ycndlYlJlY29yZCA9IHdpbmRvdy5ycndlYiA/IHdpbmRvdy5ycndlYi5yZWNvcmQgOiB3aW5kb3cucnJ3ZWJSZWNvcmRcblxuICAgICAgICAvLyBvbmx5IGFsbG93cyB1c2VyIHRvIHNldCBvdXIgYWxsb3ctbGlzdGVkIG9wdGlvbnNcbiAgICAgICAgY29uc3QgdXNlclNlc3Npb25SZWNvcmRpbmdPcHRpb25zID0gdGhpcy5pbnN0YW5jZS5jb25maWcuc2Vzc2lvbl9yZWNvcmRpbmdcbiAgICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXModXNlclNlc3Npb25SZWNvcmRpbmdPcHRpb25zIHx8IHt9KSkge1xuICAgICAgICAgICAgaWYgKGtleSBpbiBzZXNzaW9uUmVjb3JkaW5nT3B0aW9ucykge1xuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvYmFuLXRzLWNvbW1lbnRcbiAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICAgICAgc2Vzc2lvblJlY29yZGluZ09wdGlvbnNba2V5XSA9IHZhbHVlXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5jYW52YXNSZWNvcmRpbmcgJiYgdGhpcy5jYW52YXNSZWNvcmRpbmcuZW5hYmxlZCkge1xuICAgICAgICAgICAgc2Vzc2lvblJlY29yZGluZ09wdGlvbnMucmVjb3JkQ2FudmFzID0gdHJ1ZVxuICAgICAgICAgICAgc2Vzc2lvblJlY29yZGluZ09wdGlvbnMuc2FtcGxpbmcgPSB7IGNhbnZhczogdGhpcy5jYW52YXNSZWNvcmRpbmcuZnBzIH1cbiAgICAgICAgICAgIHNlc3Npb25SZWNvcmRpbmdPcHRpb25zLmRhdGFVUkxPcHRpb25zID0geyB0eXBlOiAnaW1hZ2Uvd2VicCcsIHF1YWxpdHk6IHRoaXMuY2FudmFzUmVjb3JkaW5nLnF1YWxpdHkgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aGlzLnJyd2ViUmVjb3JkKSB7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoXG4gICAgICAgICAgICAgICAgTE9HR0VSX1BSRUZJWCArXG4gICAgICAgICAgICAgICAgICAgICdvblNjcmlwdExvYWRlZCB3YXMgY2FsbGVkIGJ1dCBycndlYlJlY29yZCBpcyBub3QgYXZhaWxhYmxlLiBUaGlzIGluZGljYXRlcyBzb21ldGhpbmcgaGFzIGdvbmUgd3JvbmcuJ1xuICAgICAgICAgICAgKVxuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLm11dGF0aW9uUmF0ZUxpbWl0ZXIgPVxuICAgICAgICAgICAgdGhpcy5tdXRhdGlvblJhdGVMaW1pdGVyID8/XG4gICAgICAgICAgICBuZXcgTXV0YXRpb25SYXRlTGltaXRlcih0aGlzLnJyd2ViUmVjb3JkLCB7XG4gICAgICAgICAgICAgICAgb25CbG9ja2VkTm9kZTogKGlkLCBub2RlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBgVG9vIG1hbnkgbXV0YXRpb25zIG9uIG5vZGUgJyR7aWR9Jy4gUmF0ZSBsaW1pdGluZy4gVGhpcyBjb3VsZCBiZSBkdWUgdG8gU1ZHIGFuaW1hdGlvbnMgb3Igc29tZXRoaW5nIHNpbWlsYXJgXG4gICAgICAgICAgICAgICAgICAgIGxvZ2dlci5pbmZvKG1lc3NhZ2UsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGU6IG5vZGUsXG4gICAgICAgICAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2coTE9HR0VSX1BSRUZJWCArICcgJyArIG1lc3NhZ2UsICd3YXJuJylcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSlcblxuICAgICAgICAvLyBycndlYiB0YWtlcyBhIHNuYXBzaG90IG9uIGluaXRpYWxpemF0aW9uLFxuICAgICAgICAvLyB3ZSB3YW50IHRvIHRha2Ugb25lIGluIGZpdmUgbWludXRlc1xuICAgICAgICAvLyBpZiBub3RoaW5nIGVsc2UgaGFwcGVucyB0byByZXNldCB0aGUgdGltZXJcbiAgICAgICAgdGhpcy5fc2NoZWR1bGVGdWxsU25hcHNob3QoKVxuXG4gICAgICAgIGNvbnN0IGFjdGl2ZVBsdWdpbnMgPSB0aGlzLl9nYXRoZXJSUldlYlBsdWdpbnMoKVxuICAgICAgICB0aGlzLnN0b3BScndlYiA9IHRoaXMucnJ3ZWJSZWNvcmQoe1xuICAgICAgICAgICAgZW1pdDogKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5vblJSd2ViRW1pdChldmVudClcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwbHVnaW5zOiBhY3RpdmVQbHVnaW5zLFxuICAgICAgICAgICAgLi4uc2Vzc2lvblJlY29yZGluZ09wdGlvbnMsXG4gICAgICAgIH0pXG5cbiAgICAgICAgLy8gOlRSSUNLWTogcnJ3ZWIgZG9lcyBub3QgY2FwdHVyZSBuYXZpZ2F0aW9uIHdpdGhpbiBTUEEtcywgc28gaG9vayBpbnRvIG91ciAkcGFnZXZpZXcgZXZlbnRzIHRvIGdldCBhY2Nlc3MgdG8gYWxsIGV2ZW50cy5cbiAgICAgICAgLy8gICBEcm9wcGluZyB0aGUgaW5pdGlhbCBldmVudCBpcyBmaW5lIChpdCdzIGFsd2F5cyBjYXB0dXJlZCBieSBycndlYikuXG4gICAgICAgIHRoaXMuaW5zdGFuY2UuX2FkZENhcHR1cmVIb29rKChldmVudE5hbWUpID0+IHtcbiAgICAgICAgICAgIC8vIElmIGFueXRoaW5nIGNvdWxkIGdvIHdyb25nIGhlcmUgaXQgaGFzIHRoZSBwb3RlbnRpYWwgdG8gYmxvY2sgdGhlIG1haW4gbG9vcCxcbiAgICAgICAgICAgIC8vIHNvIHdlIGNhdGNoIGFsbCBlcnJvcnMuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmIChldmVudE5hbWUgPT09ICckcGFnZXZpZXcnKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGhyZWYgPSB3aW5kb3cgPyB0aGlzLl9tYXNrVXJsKHdpbmRvdy5sb2NhdGlvbi5ocmVmKSA6ICcnXG4gICAgICAgICAgICAgICAgICAgIGlmICghaHJlZikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fdHJ5QWRkQ3VzdG9tRXZlbnQoJyRwYWdldmlldycsIHsgaHJlZiB9KVxuICAgICAgICAgICAgICAgICAgICB0aGlzLl90cnlUYWtlRnVsbFNuYXBzaG90KClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdDb3VsZCBub3QgYWRkICRwYWdldmlldyB0byBycndlYiBzZXNzaW9uJywgZSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcblxuICAgICAgICAvLyBXZSByZXNldCB0aGUgbGFzdCBhY3Rpdml0eSB0aW1lc3RhbXAsIHJlc2V0dGluZyB0aGUgaWRsZSB0aW1lclxuICAgICAgICB0aGlzLl9sYXN0QWN0aXZpdHlUaW1lc3RhbXAgPSBEYXRlLm5vdygpXG4gICAgICAgIHRoaXMuaXNJZGxlID0gZmFsc2VcblxuICAgICAgICB0aGlzLl90cnlBZGRDdXN0b21FdmVudCgnJHNlc3Npb25fb3B0aW9ucycsIHtcbiAgICAgICAgICAgIHNlc3Npb25SZWNvcmRpbmdPcHRpb25zLFxuICAgICAgICAgICAgYWN0aXZlUGx1Z2luczogYWN0aXZlUGx1Z2lucy5tYXAoKHApID0+IHA/Lm5hbWUpLFxuICAgICAgICB9KVxuXG4gICAgICAgIHRoaXMuX3RyeUFkZEN1c3RvbUV2ZW50KCckcG9zdGhvZ19jb25maWcnLCB7XG4gICAgICAgICAgICBjb25maWc6IHRoaXMuaW5zdGFuY2UuY29uZmlnLFxuICAgICAgICB9KVxuICAgIH1cblxuICAgIHByaXZhdGUgX3NjaGVkdWxlRnVsbFNuYXBzaG90KCk6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy5fZnVsbFNuYXBzaG90VGltZXIpIHtcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5fZnVsbFNuYXBzaG90VGltZXIpXG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9mdWxsU25hcHNob3RUaW1lciA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX3RyeVRha2VGdWxsU25hcHNob3QoKVxuICAgICAgICB9LCBGSVZFX01JTlVURVMpIC8vIDUgbWludXRlc1xuICAgIH1cblxuICAgIHByaXZhdGUgX2dhdGhlclJSV2ViUGx1Z2lucygpIHtcbiAgICAgICAgY29uc3QgcGx1Z2luczogUmVjb3JkUGx1Z2luPHVua25vd24+W10gPSBbXVxuXG4gICAgICAgIGlmIChhc3NpZ25hYmxlV2luZG93LnJyd2ViQ29uc29sZVJlY29yZCAmJiB0aGlzLmlzQ29uc29sZUxvZ0NhcHR1cmVFbmFibGVkKSB7XG4gICAgICAgICAgICBwbHVnaW5zLnB1c2goYXNzaWduYWJsZVdpbmRvdy5ycndlYkNvbnNvbGVSZWNvcmQuZ2V0UmVjb3JkQ29uc29sZVBsdWdpbigpKVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMubmV0d29ya1BheWxvYWRDYXB0dXJlICYmIF9pc0Z1bmN0aW9uKGFzc2lnbmFibGVXaW5kb3cuZ2V0UmVjb3JkTmV0d29ya1BsdWdpbikpIHtcbiAgICAgICAgICAgIGNvbnN0IGNhblJlY29yZE5ldHdvcmsgPSAhaXNMb2NhbGhvc3QoKSB8fCB0aGlzLl9mb3JjZUFsbG93TG9jYWxob3N0TmV0d29ya0NhcHR1cmVcblxuICAgICAgICAgICAgaWYgKGNhblJlY29yZE5ldHdvcmspIHtcbiAgICAgICAgICAgICAgICBwbHVnaW5zLnB1c2goXG4gICAgICAgICAgICAgICAgICAgIGFzc2lnbmFibGVXaW5kb3cuZ2V0UmVjb3JkTmV0d29ya1BsdWdpbihcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1aWxkTmV0d29ya1JlcXVlc3RPcHRpb25zKHRoaXMuaW5zdGFuY2UuY29uZmlnLCB0aGlzLm5ldHdvcmtQYXlsb2FkQ2FwdHVyZSlcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmluZm8oTE9HR0VSX1BSRUZJWCArICcgTmV0d29ya0NhcHR1cmUgbm90IHN0YXJ0ZWQgYmVjYXVzZSB3ZSBhcmUgb24gbG9jYWxob3N0LicpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcGx1Z2luc1xuICAgIH1cblxuICAgIG9uUlJ3ZWJFbWl0KHJhd0V2ZW50OiBldmVudFdpdGhUaW1lKSB7XG4gICAgICAgIHRoaXMuX3Byb2Nlc3NRdWV1ZWRFdmVudHMoKVxuXG4gICAgICAgIGlmICghcmF3RXZlbnQgfHwgIV9pc09iamVjdChyYXdFdmVudCkpIHtcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHJhd0V2ZW50LnR5cGUgPT09IEV2ZW50VHlwZS5NZXRhKSB7XG4gICAgICAgICAgICBjb25zdCBocmVmID0gdGhpcy5fbWFza1VybChyYXdFdmVudC5kYXRhLmhyZWYpXG4gICAgICAgICAgICBpZiAoIWhyZWYpIHtcbiAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJhd0V2ZW50LmRhdGEuaHJlZiA9IGhyZWZcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChyYXdFdmVudC50eXBlID09PSBFdmVudFR5cGUuRnVsbFNuYXBzaG90KSB7XG4gICAgICAgICAgICAvLyB3ZSdyZSBwcm9jZXNzaW5nIGEgZnVsbCBzbmFwc2hvdCwgc28gd2Ugc2hvdWxkIHJlc2V0IHRoZSB0aW1lclxuICAgICAgICAgICAgdGhpcy5fc2NoZWR1bGVGdWxsU25hcHNob3QoKVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdGhyb3R0bGVkRXZlbnQgPSB0aGlzLm11dGF0aW9uUmF0ZUxpbWl0ZXJcbiAgICAgICAgICAgID8gdGhpcy5tdXRhdGlvblJhdGVMaW1pdGVyLnRocm90dGxlTXV0YXRpb25zKHJhd0V2ZW50KVxuICAgICAgICAgICAgOiByYXdFdmVudFxuXG4gICAgICAgIGlmICghdGhyb3R0bGVkRXZlbnQpIHtcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG5cbiAgICAgICAgLy8gVE9ETzogUmUtYWRkIGVuc3VyZU1heE1lc3NhZ2VTaXplIG9uY2Ugd2UgYXJlIGNvbmZpZGVudCBpbiBpdFxuICAgICAgICBjb25zdCBldmVudCA9IHRydW5jYXRlTGFyZ2VDb25zb2xlTG9ncyh0aHJvdHRsZWRFdmVudClcbiAgICAgICAgY29uc3Qgc2l6ZSA9IEpTT04uc3RyaW5naWZ5KGV2ZW50KS5sZW5ndGhcblxuICAgICAgICB0aGlzLl91cGRhdGVXaW5kb3dBbmRTZXNzaW9uSWRzKGV2ZW50KVxuXG4gICAgICAgIC8vIGFsbG93IGN1c3RvbSBldmVudHMgZXZlbiB3aGVuIGlkbGVcbiAgICAgICAgaWYgKHRoaXMuaXNJZGxlICYmIGV2ZW50LnR5cGUgIT09IEV2ZW50VHlwZS5DdXN0b20pIHtcbiAgICAgICAgICAgIC8vIFdoZW4gaW4gYW4gaWRsZSBzdGF0ZSB3ZSBrZWVwIHJlY29yZGluZywgYnV0IGRvbid0IGNhcHR1cmUgdGhlIGV2ZW50c1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBwcm9wZXJ0aWVzID0ge1xuICAgICAgICAgICAgJHNuYXBzaG90X2J5dGVzOiBzaXplLFxuICAgICAgICAgICAgJHNuYXBzaG90X2RhdGE6IGV2ZW50LFxuICAgICAgICAgICAgJHNlc3Npb25faWQ6IHRoaXMuc2Vzc2lvbklkLFxuICAgICAgICAgICAgJHdpbmRvd19pZDogdGhpcy53aW5kb3dJZCxcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnN0YXR1cyAhPT0gJ2Rpc2FibGVkJykge1xuICAgICAgICAgICAgdGhpcy5fY2FwdHVyZVNuYXBzaG90QnVmZmVyZWQocHJvcGVydGllcylcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuY2xlYXJCdWZmZXIoKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfcHJvY2Vzc1F1ZXVlZEV2ZW50cygpIHtcbiAgICAgICAgaWYgKHRoaXMucXVldWVkUlJXZWJFdmVudHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAvLyBpZiBycndlYiBpc24ndCByZWFkeSB0byBhY2NlcHQgZXZlbnRzIGVhcmxpZXIgdGhlbiB3ZSBxdWV1ZWQgdGhlbSB1cFxuICAgICAgICAgICAgLy8gbm93IHRoYXQgZW1pdCBoYXMgYmVlbiBjYWxsZWQgcnJ3ZWIgc2hvdWxkIGJlIHJlYWR5IHRvIGFjY2VwdCB0aGVtXG4gICAgICAgICAgICAvLyBzbywgYmVmb3JlIHdlIHByb2Nlc3MgdGhpcyBldmVudCwgd2UgdHJ5IG91ciBxdWV1ZWQgZXZlbnRzIF9vbmNlXyBlYWNoXG4gICAgICAgICAgICAvLyB3ZSBkb24ndCB3YW50IHRvIHJpc2sgcXVldWluZyBtb3JlIHRoaW5ncyBhbmQgbmV2ZXIgZXhpdGluZyB0aGlzIGxvb3AhXG4gICAgICAgICAgICAvLyBpZiB0aGV5IGZhaWwgaGVyZSwgdGhleSdsbCBiZSBwdXNoZWQgaW50byBhIG5ldyBxdWV1ZSxcbiAgICAgICAgICAgIC8vIGFuZCB0cmllZCBvbiB0aGUgbmV4dCBsb29wLlxuICAgICAgICAgICAgLy8gdGhlcmUgaXMgYSByaXNrIG9mIHRoaXMgcXVldWUgZ3Jvd2luZyBpbiBhbiB1bmNvbnRyb2xsZWQgbWFubmVyLFxuICAgICAgICAgICAgLy8gc28gaXRzIGxlbmd0aCBpcyBsaW1pdGVkIGVsc2V3aGVyZVxuICAgICAgICAgICAgLy8gZm9yIG5vdyB0aGlzIGlzIHRvIGhlbHAgdXMgZW5zdXJlIHdlIGNhbiBjYXB0dXJlIGV2ZW50cyB0aGF0IGhhcHBlblxuICAgICAgICAgICAgLy8gYW5kIHRyeSB0byBpZGVudGlmeSBtb3JlIGFib3V0IHdoZW4gaXQgaXMgZmFpbGluZ1xuICAgICAgICAgICAgY29uc3QgaXRlbXNUb1Byb2Nlc3MgPSBbLi4udGhpcy5xdWV1ZWRSUldlYkV2ZW50c11cbiAgICAgICAgICAgIHRoaXMucXVldWVkUlJXZWJFdmVudHMgPSBbXVxuICAgICAgICAgICAgaXRlbXNUb1Byb2Nlc3MuZm9yRWFjaCgocXVldWVkUlJXZWJFdmVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChEYXRlLm5vdygpIC0gcXVldWVkUlJXZWJFdmVudC5lbnF1ZXVlZEF0ID4gVFdPX1NFQ09ORFMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fdHJ5QWRkQ3VzdG9tRXZlbnQoJ3Jyd2ViUXVldWVUaW1lb3V0Jywge1xuICAgICAgICAgICAgICAgICAgICAgICAgZW5xdWV1ZWRBdDogcXVldWVkUlJXZWJFdmVudC5lbnF1ZXVlZEF0LFxuICAgICAgICAgICAgICAgICAgICAgICAgYXR0ZW1wdDogcXVldWVkUlJXZWJFdmVudC5hdHRlbXB0LFxuICAgICAgICAgICAgICAgICAgICAgICAgcXVldWVMZW5ndGg6IGl0ZW1zVG9Qcm9jZXNzLmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fdHJ5UlJXZWJNZXRob2QocXVldWVkUlJXZWJFdmVudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3RyeUFkZEN1c3RvbUV2ZW50KCdycndlYlF1ZXVlU3VjY2VzcycsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbnF1ZXVlZEF0OiBxdWV1ZWRSUldlYkV2ZW50LmVucXVldWVkQXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0ZW1wdDogcXVldWVkUlJXZWJFdmVudC5hdHRlbXB0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXVlTGVuZ3RoOiBpdGVtc1RvUHJvY2Vzcy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgX21hc2tVcmwodXJsOiBzdHJpbmcpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICAgICAgICBjb25zdCB1c2VyU2Vzc2lvblJlY29yZGluZ09wdGlvbnMgPSB0aGlzLmluc3RhbmNlLmNvbmZpZy5zZXNzaW9uX3JlY29yZGluZ1xuXG4gICAgICAgIGlmICh1c2VyU2Vzc2lvblJlY29yZGluZ09wdGlvbnMubWFza05ldHdvcmtSZXF1ZXN0Rm4pIHtcbiAgICAgICAgICAgIGxldCBuZXR3b3JrUmVxdWVzdDogTmV0d29ya1JlcXVlc3QgfCBudWxsIHwgdW5kZWZpbmVkID0ge1xuICAgICAgICAgICAgICAgIHVybCxcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gVE9ETyB3ZSBzaG91bGQgZGVwcmVjYXRlIHRoaXMgYW5kIHVzZSB0aGUgc2FtZSBmdW5jdGlvbiBmb3IgdGhpcyBtYXNraW5nIGFuZCB0aGUgcnJ3ZWIvbmV0d29yayBwbHVnaW5cbiAgICAgICAgICAgIC8vIFRPRE8gb3IgZGVwcmVjYXRlIHRoaXMgYW5kIHByb3ZpZGUgYSBuZXcgY2xlYXJlciBuYW1lIHNvIHRoaXMgd291bGQgYmUgYG1hc2tVUkxQZXJmb3JtYW5jZUZuYCBvciBzaW1pbGFyXG4gICAgICAgICAgICBuZXR3b3JrUmVxdWVzdCA9IHVzZXJTZXNzaW9uUmVjb3JkaW5nT3B0aW9ucy5tYXNrTmV0d29ya1JlcXVlc3RGbihuZXR3b3JrUmVxdWVzdClcblxuICAgICAgICAgICAgcmV0dXJuIG5ldHdvcmtSZXF1ZXN0Py51cmxcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB1cmxcbiAgICB9XG5cbiAgICBwcml2YXRlIGNsZWFyQnVmZmVyKCk6IFNuYXBzaG90QnVmZmVyIHtcbiAgICAgICAgdGhpcy5idWZmZXIgPSB1bmRlZmluZWRcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc2l6ZTogMCxcbiAgICAgICAgICAgIGRhdGE6IFtdLFxuICAgICAgICAgICAgc2Vzc2lvbklkOiB0aGlzLnNlc3Npb25JZCxcbiAgICAgICAgICAgIHdpbmRvd0lkOiB0aGlzLndpbmRvd0lkLFxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gdGhlIGludGVudGlvbiBpcyBhIGJ1ZmZlciB0aGF0IChjdXJyZW50bHkpIGlzIHVzZWQgb25seSBhZnRlciBhIGRlY2lkZSByZXNwb25zZSBlbmFibGVzIHNlc3Npb24gcmVjb3JkaW5nXG4gICAgLy8gaXQgaXMgY2FsbGVkIGV2ZXIgWCBzZWNvbmRzIHVzaW5nIHRoZSBmbHVzaEJ1ZmZlclRpbWVyIHNvIHRoYXQgd2UgZG9uJ3QgaGF2ZSB0byB3YWl0IGZvciB0aGUgYnVmZmVyIHRvIGZpbGwgdXBcbiAgICAvLyB3aGVuIGl0IGlzIGNhbGxlZCBvbiBhIHRpbWVyIGl0IGFzc3VtZXMgdGhhdCBpdCBjYW4gZGVmaW5pdGVseSBmbHVzaFxuICAgIC8vIGl0IGlzIGZsdXNoZWQgd2hlbiB0aGUgc2Vzc2lvbiBpZCBjaGFuZ2VzIG9yIHRoZSBzaXplIG9mIHRoZSBidWZmZXJlZCBkYXRhIGdldHMgdG9vIGdyZWF0ICgxbWIgYnkgZGVmYXVsdClcbiAgICAvLyBmaXJzdCBjaGFuZ2U6IGlmIHRoZSByZWNvcmRpbmcgaXMgaW4gYnVmZmVyaW5nIG1vZGUsXG4gICAgLy8gIGZsdXNoIGJ1ZmZlciBzaW1wbHkgcmVzZXRzIHRoZSB0aW1lciBhbmQgcmV0dXJucyB0aGUgZXhpc3RpbmcgZmx1c2ggYnVmZmVyXG4gICAgcHJpdmF0ZSBfZmx1c2hCdWZmZXIoKSB7XG4gICAgICAgIGlmICh0aGlzLmZsdXNoQnVmZmVyVGltZXIpIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmZsdXNoQnVmZmVyVGltZXIpXG4gICAgICAgICAgICB0aGlzLmZsdXNoQnVmZmVyVGltZXIgPSB1bmRlZmluZWRcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IG1pbmltdW1EdXJhdGlvbiA9IHRoaXMuX21pbmltdW1EdXJhdGlvblxuICAgICAgICBjb25zdCBzZXNzaW9uRHVyYXRpb24gPSB0aGlzLnNlc3Npb25EdXJhdGlvblxuICAgICAgICAvLyBpZiB3ZSBoYXZlIG9sZCBkYXRhIGluIHRoZSBidWZmZXIgYnV0IHRoZSBzZXNzaW9uIGhhcyByb3RhdGVkIHRoZW4gdGhlXG4gICAgICAgIC8vIHNlc3Npb24gZHVyYXRpb24gbWlnaHQgYmUgbmVnYXRpdmUsIGluIHRoYXQgY2FzZSB3ZSB3YW50IHRvIGZsdXNoIHRoZSBidWZmZXJcbiAgICAgICAgY29uc3QgaXNQb3NpdGl2ZVNlc3Npb25EdXJhdGlvbiA9IF9pc051bWJlcihzZXNzaW9uRHVyYXRpb24pICYmIHNlc3Npb25EdXJhdGlvbiA+PSAwXG4gICAgICAgIGNvbnN0IGlzQmVsb3dNaW5pbXVtRHVyYXRpb24gPVxuICAgICAgICAgICAgX2lzTnVtYmVyKG1pbmltdW1EdXJhdGlvbikgJiYgaXNQb3NpdGl2ZVNlc3Npb25EdXJhdGlvbiAmJiBzZXNzaW9uRHVyYXRpb24gPCBtaW5pbXVtRHVyYXRpb25cblxuICAgICAgICBpZiAodGhpcy5zdGF0dXMgPT09ICdidWZmZXJpbmcnIHx8IGlzQmVsb3dNaW5pbXVtRHVyYXRpb24pIHtcbiAgICAgICAgICAgIHRoaXMuZmx1c2hCdWZmZXJUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuX2ZsdXNoQnVmZmVyKClcbiAgICAgICAgICAgIH0sIFJFQ09SRElOR19CVUZGRVJfVElNRU9VVClcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmJ1ZmZlciB8fCB0aGlzLmNsZWFyQnVmZmVyKClcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmJ1ZmZlciAmJiB0aGlzLmJ1ZmZlci5kYXRhLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgdGhpcy5fY2FwdHVyZVNuYXBzaG90KHtcbiAgICAgICAgICAgICAgICAkc25hcHNob3RfYnl0ZXM6IHRoaXMuYnVmZmVyLnNpemUsXG4gICAgICAgICAgICAgICAgJHNuYXBzaG90X2RhdGE6IHRoaXMuYnVmZmVyLmRhdGEsXG4gICAgICAgICAgICAgICAgJHNlc3Npb25faWQ6IHRoaXMuYnVmZmVyLnNlc3Npb25JZCxcbiAgICAgICAgICAgICAgICAkd2luZG93X2lkOiB0aGlzLmJ1ZmZlci53aW5kb3dJZCxcbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNsZWFyQnVmZmVyKClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmJ1ZmZlciB8fCB0aGlzLmNsZWFyQnVmZmVyKClcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgX2NhcHR1cmVTbmFwc2hvdEJ1ZmZlcmVkKHByb3BlcnRpZXM6IFByb3BlcnRpZXMpIHtcbiAgICAgICAgY29uc3QgYWRkaXRpb25hbEJ5dGVzID0gMiArICh0aGlzLmJ1ZmZlcj8uZGF0YS5sZW5ndGggfHwgMCkgLy8gMiBieXRlcyBmb3IgdGhlIGFycmF5IGJyYWNrZXRzIGFuZCAxIGJ5dGUgZm9yIGVhY2ggY29tbWFcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgIXRoaXMuYnVmZmVyIHx8XG4gICAgICAgICAgICB0aGlzLmJ1ZmZlci5zaXplICsgcHJvcGVydGllcy4kc25hcHNob3RfYnl0ZXMgKyBhZGRpdGlvbmFsQnl0ZXMgPiBSRUNPUkRJTkdfTUFYX0VWRU5UX1NJWkUgfHxcbiAgICAgICAgICAgICghIXRoaXMuYnVmZmVyLnNlc3Npb25JZCAmJiB0aGlzLmJ1ZmZlci5zZXNzaW9uSWQgIT09IHRoaXMuc2Vzc2lvbklkKVxuICAgICAgICApIHtcbiAgICAgICAgICAgIHRoaXMuYnVmZmVyID0gdGhpcy5fZmx1c2hCdWZmZXIoKVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKF9pc051bGwodGhpcy5idWZmZXIuc2Vzc2lvbklkKSAmJiAhX2lzTnVsbCh0aGlzLnNlc3Npb25JZCkpIHtcbiAgICAgICAgICAgIC8vIHNlc3Npb24gaWQgc3RhcnRzIG51bGwgYnV0IGhhcyBub3cgYmVlbiBhc3NpZ25lZCwgdXBkYXRlIHRoZSBidWZmZXJcbiAgICAgICAgICAgIHRoaXMuYnVmZmVyLnNlc3Npb25JZCA9IHRoaXMuc2Vzc2lvbklkXG4gICAgICAgICAgICB0aGlzLmJ1ZmZlci53aW5kb3dJZCA9IHRoaXMud2luZG93SWRcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuYnVmZmVyLnNpemUgKz0gcHJvcGVydGllcy4kc25hcHNob3RfYnl0ZXNcbiAgICAgICAgdGhpcy5idWZmZXIuZGF0YS5wdXNoKHByb3BlcnRpZXMuJHNuYXBzaG90X2RhdGEpXG5cbiAgICAgICAgaWYgKCF0aGlzLmZsdXNoQnVmZmVyVGltZXIpIHtcbiAgICAgICAgICAgIHRoaXMuZmx1c2hCdWZmZXJUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuX2ZsdXNoQnVmZmVyKClcbiAgICAgICAgICAgIH0sIFJFQ09SRElOR19CVUZGRVJfVElNRU9VVClcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgX2NhcHR1cmVTbmFwc2hvdChwcm9wZXJ0aWVzOiBQcm9wZXJ0aWVzKSB7XG4gICAgICAgIC8vIDpUUklDS1k6IE1ha2Ugc3VyZSB3ZSBiYXRjaCB0aGVzZSByZXF1ZXN0cywgdXNlIGEgY3VzdG9tIGVuZHBvaW50IGFuZCBkb24ndCB0cnVuY2F0ZSB0aGUgc3RyaW5ncy5cbiAgICAgICAgdGhpcy5pbnN0YW5jZS5jYXB0dXJlKCckc25hcHNob3QnLCBwcm9wZXJ0aWVzLCB7XG4gICAgICAgICAgICBfdXJsOiB0aGlzLmluc3RhbmNlLnJlcXVlc3RSb3V0ZXIuZW5kcG9pbnRGb3IoJ2FwaScsIHRoaXMuX2VuZHBvaW50KSxcbiAgICAgICAgICAgIF9ub1RydW5jYXRlOiB0cnVlLFxuICAgICAgICAgICAgX2JhdGNoS2V5OiBTRVNTSU9OX1JFQ09SRElOR19CQVRDSF9LRVksXG4gICAgICAgIH0pXG4gICAgfVxufVxuIiwgImltcG9ydCB7IGF1dG9jYXB0dXJlIH0gZnJvbSAnLi9hdXRvY2FwdHVyZSdcbmltcG9ydCB7IGxvYWRTY3JpcHQgfSBmcm9tICcuL3V0aWxzJ1xuaW1wb3J0IHsgUG9zdEhvZyB9IGZyb20gJy4vcG9zdGhvZy1jb3JlJ1xuaW1wb3J0IHsgQ29tcHJlc3Npb24sIERlY2lkZVJlc3BvbnNlIH0gZnJvbSAnLi90eXBlcydcbmltcG9ydCB7IFNUT1JFRF9HUk9VUF9QUk9QRVJUSUVTX0tFWSwgU1RPUkVEX1BFUlNPTl9QUk9QRVJUSUVTX0tFWSB9IGZyb20gJy4vY29uc3RhbnRzJ1xuXG5pbXBvcnQgeyBfaXNVbmRlZmluZWQgfSBmcm9tICcuL3V0aWxzL3R5cGUtdXRpbHMnXG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tICcuL3V0aWxzL2xvZ2dlcidcbmltcG9ydCB7IHdpbmRvdywgZG9jdW1lbnQsIGFzc2lnbmFibGVXaW5kb3cgfSBmcm9tICcuL3V0aWxzL2dsb2JhbHMnXG5cbmV4cG9ydCBjbGFzcyBEZWNpZGUge1xuICAgIGluc3RhbmNlOiBQb3N0SG9nXG5cbiAgICBjb25zdHJ1Y3RvcihpbnN0YW5jZTogUG9zdEhvZykge1xuICAgICAgICB0aGlzLmluc3RhbmNlID0gaW5zdGFuY2VcbiAgICAgICAgLy8gZG9uJ3QgbmVlZCB0byB3YWl0IGZvciBgZGVjaWRlYCB0byByZXR1cm4gaWYgZmxhZ3Mgd2VyZSBwcm92aWRlZCBvbiBpbml0aWFsaXNhdGlvblxuICAgICAgICB0aGlzLmluc3RhbmNlLmRlY2lkZUVuZHBvaW50V2FzSGl0ID0gdGhpcy5pbnN0YW5jZS5faGFzQm9vdHN0cmFwcGVkRmVhdHVyZUZsYWdzKClcbiAgICB9XG5cbiAgICBjYWxsKCk6IHZvaWQge1xuICAgICAgICAvKlxuICAgICAgICBDYWxscyAvZGVjaWRlIGVuZHBvaW50IHRvIGZldGNoIG9wdGlvbnMgZm9yIGF1dG9jYXB0dXJlLCBzZXNzaW9uIHJlY29yZGluZywgZmVhdHVyZSBmbGFncyAmIGNvbXByZXNzaW9uLlxuICAgICAgICAqL1xuICAgICAgICBjb25zdCBkYXRhID0ge1xuICAgICAgICAgICAgdG9rZW46IHRoaXMuaW5zdGFuY2UuY29uZmlnLnRva2VuLFxuICAgICAgICAgICAgZGlzdGluY3RfaWQ6IHRoaXMuaW5zdGFuY2UuZ2V0X2Rpc3RpbmN0X2lkKCksXG4gICAgICAgICAgICBncm91cHM6IHRoaXMuaW5zdGFuY2UuZ2V0R3JvdXBzKCksXG4gICAgICAgICAgICBwZXJzb25fcHJvcGVydGllczogdGhpcy5pbnN0YW5jZS5nZXRfcHJvcGVydHkoU1RPUkVEX1BFUlNPTl9QUk9QRVJUSUVTX0tFWSksXG4gICAgICAgICAgICBncm91cF9wcm9wZXJ0aWVzOiB0aGlzLmluc3RhbmNlLmdldF9wcm9wZXJ0eShTVE9SRURfR1JPVVBfUFJPUEVSVElFU19LRVkpLFxuICAgICAgICAgICAgZGlzYWJsZV9mbGFnczpcbiAgICAgICAgICAgICAgICB0aGlzLmluc3RhbmNlLmNvbmZpZy5hZHZhbmNlZF9kaXNhYmxlX2ZlYXR1cmVfZmxhZ3MgfHxcbiAgICAgICAgICAgICAgICB0aGlzLmluc3RhbmNlLmNvbmZpZy5hZHZhbmNlZF9kaXNhYmxlX2ZlYXR1cmVfZmxhZ3Nfb25fZmlyc3RfbG9hZCB8fFxuICAgICAgICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuaW5zdGFuY2UuX3NlbmRfcmVxdWVzdCh7XG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgIHVybDogdGhpcy5pbnN0YW5jZS5yZXF1ZXN0Um91dGVyLmVuZHBvaW50Rm9yKCdhcGknLCAnL2RlY2lkZS8/dj0zJyksXG4gICAgICAgICAgICBkYXRhLFxuICAgICAgICAgICAgY29tcHJlc3Npb246IENvbXByZXNzaW9uLkJhc2U2NCxcbiAgICAgICAgICAgIHRpbWVvdXQ6IHRoaXMuaW5zdGFuY2UuY29uZmlnLmZlYXR1cmVfZmxhZ19yZXF1ZXN0X3RpbWVvdXRfbXMsXG4gICAgICAgICAgICBjYWxsYmFjazogKHJlc3BvbnNlKSA9PiB0aGlzLnBhcnNlRGVjaWRlUmVzcG9uc2UocmVzcG9uc2UuanNvbiBhcyBEZWNpZGVSZXNwb25zZSB8IHVuZGVmaW5lZCksXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgcGFyc2VEZWNpZGVSZXNwb25zZShyZXNwb25zZT86IERlY2lkZVJlc3BvbnNlKTogdm9pZCB7XG4gICAgICAgIHRoaXMuaW5zdGFuY2UuZmVhdHVyZUZsYWdzLnNldFJlbG9hZGluZ1BhdXNlZChmYWxzZSlcbiAgICAgICAgLy8gOlRSSUNLWTogUmVsb2FkIC0gc3RhcnQgYW5vdGhlciByZXF1ZXN0IGlmIHF1ZXVlZCFcbiAgICAgICAgdGhpcy5pbnN0YW5jZS5mZWF0dXJlRmxhZ3MuX3N0YXJ0UmVsb2FkVGltZXIoKVxuXG4gICAgICAgIGNvbnN0IGVycm9yc0xvYWRpbmcgPSAhcmVzcG9uc2VcblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICAhdGhpcy5pbnN0YW5jZS5jb25maWcuYWR2YW5jZWRfZGlzYWJsZV9mZWF0dXJlX2ZsYWdzX29uX2ZpcnN0X2xvYWQgJiZcbiAgICAgICAgICAgICF0aGlzLmluc3RhbmNlLmNvbmZpZy5hZHZhbmNlZF9kaXNhYmxlX2ZlYXR1cmVfZmxhZ3NcbiAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzLmluc3RhbmNlLmZlYXR1cmVGbGFncy5yZWNlaXZlZEZlYXR1cmVGbGFncyhyZXNwb25zZSA/PyB7fSwgZXJyb3JzTG9hZGluZylcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChlcnJvcnNMb2FkaW5nKSB7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ0ZhaWxlZCB0byBmZXRjaCBmZWF0dXJlIGZsYWdzIGZyb20gUG9zdEhvZy4nKVxuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgaWYgKCEoZG9jdW1lbnQgJiYgZG9jdW1lbnQuYm9keSkpIHtcbiAgICAgICAgICAgIGxvZ2dlci5pbmZvKCdkb2N1bWVudCBub3QgcmVhZHkgeWV0LCB0cnlpbmcgYWdhaW4gaW4gNTAwIG1pbGxpc2Vjb25kcy4uLicpXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcnNlRGVjaWRlUmVzcG9uc2UocmVzcG9uc2UpXG4gICAgICAgICAgICB9LCA1MDApXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuaW5zdGFuY2UudG9vbGJhci5hZnRlckRlY2lkZVJlc3BvbnNlKHJlc3BvbnNlKVxuICAgICAgICB0aGlzLmluc3RhbmNlLnNlc3Npb25SZWNvcmRpbmc/LmFmdGVyRGVjaWRlUmVzcG9uc2UocmVzcG9uc2UpXG4gICAgICAgIGF1dG9jYXB0dXJlLmFmdGVyRGVjaWRlUmVzcG9uc2UocmVzcG9uc2UsIHRoaXMuaW5zdGFuY2UpXG4gICAgICAgIHRoaXMuaW5zdGFuY2UuX2FmdGVyRGVjaWRlUmVzcG9uc2UocmVzcG9uc2UpXG5cbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9iYW4tdHMtY29tbWVudFxuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIGNvbnN0IHN1cnZleXNHZW5lcmF0b3IgPSB3aW5kb3c/LmV4dGVuZFBvc3RIb2dXaXRoU3VydmV5c1xuXG4gICAgICAgIGlmIChyZXNwb25zZVsnc3VydmV5cyddICYmICFzdXJ2ZXlzR2VuZXJhdG9yKSB7XG4gICAgICAgICAgICBsb2FkU2NyaXB0KHRoaXMuaW5zdGFuY2UucmVxdWVzdFJvdXRlci5lbmRwb2ludEZvcignYXNzZXRzJywgJy9zdGF0aWMvc3VydmV5cy5qcycpLCAoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbG9nZ2VyLmVycm9yKGBDb3VsZCBub3QgbG9hZCBzdXJ2ZXlzIHNjcmlwdGAsIGVycilcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2Jhbi10cy1jb21tZW50XG4gICAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgICAgIHdpbmRvdy5leHRlbmRQb3N0SG9nV2l0aFN1cnZleXModGhpcy5pbnN0YW5jZSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cblxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2Jhbi10cy1jb21tZW50XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgY29uc3QgZXhjZXB0aW9uQXV0b0NhcHR1cmVBZGRlZFRvV2luZG93ID0gd2luZG93Py5leHRlbmRQb3N0SG9nV2l0aEV4Y2VwdGlvbkF1dG9DYXB0dXJlXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIHJlc3BvbnNlWydhdXRvY2FwdHVyZUV4Y2VwdGlvbnMnXSAmJlxuICAgICAgICAgICAgISFyZXNwb25zZVsnYXV0b2NhcHR1cmVFeGNlcHRpb25zJ10gJiZcbiAgICAgICAgICAgIF9pc1VuZGVmaW5lZChleGNlcHRpb25BdXRvQ2FwdHVyZUFkZGVkVG9XaW5kb3cpXG4gICAgICAgICkge1xuICAgICAgICAgICAgbG9hZFNjcmlwdCh0aGlzLmluc3RhbmNlLnJlcXVlc3RSb3V0ZXIuZW5kcG9pbnRGb3IoJ2Fzc2V0cycsICcvc3RhdGljL2V4Y2VwdGlvbi1hdXRvY2FwdHVyZS5qcycpLCAoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbG9nZ2VyLmVycm9yKGBDb3VsZCBub3QgbG9hZCBleGNlcHRpb24gYXV0b2NhcHR1cmUgc2NyaXB0YCwgZXJyKVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvYmFuLXRzLWNvbW1lbnRcbiAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICAgICAgd2luZG93LmV4dGVuZFBvc3RIb2dXaXRoRXhjZXB0aW9uQXV0b2NhcHR1cmUodGhpcy5pbnN0YW5jZSwgcmVzcG9uc2UpXG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHJlc3BvbnNlWydzaXRlQXBwcyddKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pbnN0YW5jZS5jb25maWcub3B0X2luX3NpdGVfYXBwcykge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgeyBpZCwgdXJsIH0gb2YgcmVzcG9uc2VbJ3NpdGVBcHBzJ10pIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2NyaXB0VXJsID0gdGhpcy5pbnN0YW5jZS5yZXF1ZXN0Um91dGVyLmVuZHBvaW50Rm9yKCdhcGknLCB1cmwpXG5cbiAgICAgICAgICAgICAgICAgICAgYXNzaWduYWJsZVdpbmRvd1tgX18kJHBoX3NpdGVfYXBwXyR7aWR9YF0gPSB0aGlzLmluc3RhbmNlXG5cbiAgICAgICAgICAgICAgICAgICAgbG9hZFNjcmlwdChzY3JpcHRVcmwsIChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoYEVycm9yIHdoaWxlIGluaXRpYWxpemluZyBQb3N0SG9nIGFwcCB3aXRoIGNvbmZpZyBpZCAke2lkfWAsIGVycilcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlWydzaXRlQXBwcyddLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ1Bvc3RIb2cgc2l0ZSBhcHBzIGFyZSBkaXNhYmxlZC4gRW5hYmxlIHRoZSBcIm9wdF9pbl9zaXRlX2FwcHNcIiBjb25maWcgdG8gcHJvY2VlZC4nKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuIiwgImltcG9ydCB7IF9yZWdpc3Rlcl9ldmVudCwgX3RyeSwgbG9hZFNjcmlwdCB9IGZyb20gJy4uL3V0aWxzJ1xuaW1wb3J0IHsgUG9zdEhvZyB9IGZyb20gJy4uL3Bvc3Rob2ctY29yZSdcbmltcG9ydCB7IERlY2lkZVJlc3BvbnNlLCBUb29sYmFyUGFyYW1zIH0gZnJvbSAnLi4vdHlwZXMnXG5pbXBvcnQgeyBfZ2V0SGFzaFBhcmFtIH0gZnJvbSAnLi4vdXRpbHMvcmVxdWVzdC11dGlscydcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJy4uL3V0aWxzL2xvZ2dlcidcbmltcG9ydCB7IHdpbmRvdywgZG9jdW1lbnQsIGFzc2lnbmFibGVXaW5kb3cgfSBmcm9tICcuLi91dGlscy9nbG9iYWxzJ1xuXG4vLyBUUklDS1k6IE1hbnkgd2ViIGZyYW1ld29ya3Mgd2lsbCBtb2RpZnkgdGhlIHJvdXRlIG9uIGxvYWQsIHBvdGVudGlhbGx5IGJlZm9yZSBwb3N0aG9nIGlzIGluaXRpYWxpemVkLlxuLy8gVG8gZ2V0IGFoZWFkIG9mIHRoaXMgd2UgZ3JhYiBpdCBhcyBzb29uIGFzIHRoZSBwb3N0aG9nLWpzIGlzIHBhcnNlZFxuY29uc3QgU1RBVEVfRlJPTV9XSU5ET1cgPSB3aW5kb3c/LmxvY2F0aW9uXG4gICAgPyBfZ2V0SGFzaFBhcmFtKHdpbmRvdy5sb2NhdGlvbi5oYXNoLCAnX19wb3N0aG9nJykgfHwgX2dldEhhc2hQYXJhbShsb2NhdGlvbi5oYXNoLCAnc3RhdGUnKVxuICAgIDogbnVsbFxuXG5leHBvcnQgY2xhc3MgVG9vbGJhciB7XG4gICAgaW5zdGFuY2U6IFBvc3RIb2dcbiAgICBjb25zdHJ1Y3RvcihpbnN0YW5jZTogUG9zdEhvZykge1xuICAgICAgICB0aGlzLmluc3RhbmNlID0gaW5zdGFuY2VcbiAgICB9XG5cbiAgICBhZnRlckRlY2lkZVJlc3BvbnNlKHJlc3BvbnNlOiBEZWNpZGVSZXNwb25zZSkge1xuICAgICAgICBjb25zdCB0b29sYmFyUGFyYW1zOiBUb29sYmFyUGFyYW1zID1cbiAgICAgICAgICAgIHJlc3BvbnNlWyd0b29sYmFyUGFyYW1zJ10gfHxcbiAgICAgICAgICAgIHJlc3BvbnNlWydlZGl0b3JQYXJhbXMnXSB8fFxuICAgICAgICAgICAgKHJlc3BvbnNlWyd0b29sYmFyVmVyc2lvbiddID8geyB0b29sYmFyVmVyc2lvbjogcmVzcG9uc2VbJ3Rvb2xiYXJWZXJzaW9uJ10gfSA6IHt9KVxuICAgICAgICBpZiAoXG4gICAgICAgICAgICByZXNwb25zZVsnaXNBdXRoZW50aWNhdGVkJ10gJiZcbiAgICAgICAgICAgIHRvb2xiYXJQYXJhbXNbJ3Rvb2xiYXJWZXJzaW9uJ10gJiZcbiAgICAgICAgICAgIHRvb2xiYXJQYXJhbXNbJ3Rvb2xiYXJWZXJzaW9uJ10uaW5kZXhPZigndG9vbGJhcicpID09PSAwXG4gICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy5sb2FkVG9vbGJhcih7XG4gICAgICAgICAgICAgICAgLi4udG9vbGJhclBhcmFtcyxcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUbyBsb2FkIHRoZSB0b29sYmFyLCB3ZSBuZWVkIGFuIGFjY2VzcyB0b2tlbiBhbmQgb3RoZXIgc3RhdGUuIFRoYXQgc3RhdGUgY29tZXMgZnJvbSBvbmUgb2YgdGhyZWUgcGxhY2VzOlxuICAgICAqIDEuIEluIHRoZSBVUkwgaGFzaCBwYXJhbXNcbiAgICAgKiAyLiBGcm9tIHNlc3Npb24gc3RvcmFnZSB1bmRlciB0aGUga2V5IGB0b29sYmFyUGFyYW1zYCBpZiB0aGUgdG9vbGJhciB3YXMgaW5pdGlhbGl6ZWQgb24gYSBwcmV2aW91cyBwYWdlXG4gICAgICovXG4gICAgbWF5YmVMb2FkVG9vbGJhcihcbiAgICAgICAgbG9jYXRpb246IExvY2F0aW9uIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkLFxuICAgICAgICBsb2NhbFN0b3JhZ2U6IFN0b3JhZ2UgfCB1bmRlZmluZWQgPSB1bmRlZmluZWQsXG4gICAgICAgIGhpc3Rvcnk6IEhpc3RvcnkgfCB1bmRlZmluZWQgPSB1bmRlZmluZWRcbiAgICApOiBib29sZWFuIHtcbiAgICAgICAgaWYgKCF3aW5kb3cgfHwgIWRvY3VtZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgfVxuICAgICAgICBsb2NhdGlvbiA9IGxvY2F0aW9uID8/IHdpbmRvdy5sb2NhdGlvblxuICAgICAgICBoaXN0b3J5ID0gaGlzdG9yeSA/PyB3aW5kb3cuaGlzdG9yeVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBCZWZvcmUgcnVubmluZyB0aGUgY29kZSB3ZSBjaGVjayBpZiB3ZSBjYW4gYWNjZXNzIGxvY2FsU3RvcmFnZSwgaWYgbm90IHdlIG9wdC1vdXRcbiAgICAgICAgICAgIGlmICghbG9jYWxTdG9yYWdlKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0ZXN0JywgJ3Rlc3QnKVxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3Rlc3QnKVxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIElmIGxvY2FsU3RvcmFnZSB3YXMgdW5kZWZpbmVkLCBhbmQgbG9jYWxTdG9yYWdlIGlzIHN1cHBvcnRlZCB3ZSBzZXQgdGhlIGRlZmF1bHQgdmFsdWVcbiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UgPSB3aW5kb3c/LmxvY2FsU3RvcmFnZVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEluZm8gYWJvdXQgdGhlIHN0YXRlXG4gICAgICAgICAgICAgKiBUaGUgc3RhdGUgaXMgYSBqc29uIG9iamVjdFxuICAgICAgICAgICAgICogMS4gKExlZ2FjeSkgVGhlIHN0YXRlIGNhbiBiZSBgc3RhdGU9e31gIGFzIGEgdXJsZW5jb2RlZCBvYmplY3Qgb2YgaW5mby4gSW4gdGhpcyBjYXNlXG4gICAgICAgICAgICAgKiAyLiBUaGUgc3RhdGUgc2hvdWxkIG5vdyBiZSBmb3VuZCBpbiBgX19wb3N0aG9nPXt9YCBhbmQgY2FuIGJlIGJhc2U2NCBlbmNvZGVkIG9yIHVybGVuY29kZWQuXG4gICAgICAgICAgICAgKiAzLiBCYXNlNjQgZW5jb2RpbmcgaXMgcHJlZmVycmVkIGFuZCB3aWxsIGdyYWR1YWxseSBiZSByb2xsZWQgb3V0IGV2ZXJ5d2hlcmVcbiAgICAgICAgICAgICAqL1xuXG4gICAgICAgICAgICBjb25zdCBzdGF0ZUhhc2ggPVxuICAgICAgICAgICAgICAgIFNUQVRFX0ZST01fV0lORE9XIHx8IF9nZXRIYXNoUGFyYW0obG9jYXRpb24uaGFzaCwgJ19fcG9zdGhvZycpIHx8IF9nZXRIYXNoUGFyYW0obG9jYXRpb24uaGFzaCwgJ3N0YXRlJylcblxuICAgICAgICAgICAgbGV0IHRvb2xiYXJQYXJhbXM6IFRvb2xiYXJQYXJhbXNcbiAgICAgICAgICAgIGNvbnN0IHN0YXRlID0gc3RhdGVIYXNoXG4gICAgICAgICAgICAgICAgPyBfdHJ5KCgpID0+IEpTT04ucGFyc2UoYXRvYihkZWNvZGVVUklDb21wb25lbnQoc3RhdGVIYXNoKSkpKSB8fFxuICAgICAgICAgICAgICAgICAgX3RyeSgoKSA9PiBKU09OLnBhcnNlKGRlY29kZVVSSUNvbXBvbmVudChzdGF0ZUhhc2gpKSlcbiAgICAgICAgICAgICAgICA6IG51bGxcblxuICAgICAgICAgICAgY29uc3QgcGFyc2VGcm9tVXJsID0gc3RhdGUgJiYgc3RhdGVbJ2FjdGlvbiddID09PSAncGhfYXV0aG9yaXplJ1xuXG4gICAgICAgICAgICBpZiAocGFyc2VGcm9tVXJsKSB7XG4gICAgICAgICAgICAgICAgLy8gaGFwcGVucyBpZiB0aGV5IGFyZSBpbml0aWFsaXppbmcgdGhlIHRvb2xiYXIgdXNpbmcgYW4gb2xkIHNuaXBwZXRcbiAgICAgICAgICAgICAgICB0b29sYmFyUGFyYW1zID0gc3RhdGVcbiAgICAgICAgICAgICAgICB0b29sYmFyUGFyYW1zLnNvdXJjZSA9ICd1cmwnXG5cbiAgICAgICAgICAgICAgICBpZiAodG9vbGJhclBhcmFtcyAmJiBPYmplY3Qua2V5cyh0b29sYmFyUGFyYW1zKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZVsnZGVzaXJlZEhhc2gnXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaGFzaCB0aGF0IHdhcyBpbiB0aGUgdXJsIGJlZm9yZSB0aGUgcmVkaXJlY3RcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLmhhc2ggPSBzdGF0ZVsnZGVzaXJlZEhhc2gnXVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGhpc3RvcnkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhpc3RvcnkucmVwbGFjZVN0YXRlKCcnLCBkb2N1bWVudC50aXRsZSwgbG9jYXRpb24ucGF0aG5hbWUgKyBsb2NhdGlvbi5zZWFyY2gpIC8vIGNvbXBsZXRlbHkgcmVtb3ZlIGhhc2hcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLmhhc2ggPSAnJyAvLyBjbGVhciBoYXNoIChidXQgbGVhdmVzICMgdW5mb3J0dW5hdGVseSlcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gZ2V0IGNyZWRlbnRpYWxzIGZyb20gbG9jYWxTdG9yYWdlIGZyb20gYSBwcmV2aW91cyBpbml0aWFsemF0aW9uXG4gICAgICAgICAgICAgICAgdG9vbGJhclBhcmFtcyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ19wb3N0SG9nVG9vbGJhclBhcmFtcycpIHx8ICd7fScpXG4gICAgICAgICAgICAgICAgdG9vbGJhclBhcmFtcy5zb3VyY2UgPSAnbG9jYWxzdG9yYWdlJ1xuXG4gICAgICAgICAgICAgICAgLy8gZGVsZXRlIFwiYWRkLWFjdGlvblwiIG9yIG90aGVyIGludGVudCBmcm9tIHRvb2xiYXJQYXJhbXMsIG90aGVyd2lzZSB3ZSdsbCBoYXZlIHRoZSBzYW1lIGludGVudFxuICAgICAgICAgICAgICAgIC8vIGV2ZXJ5IHRpbWUgd2Ugb3BlbiB0aGUgcGFnZSAoZS5nLiB5b3UganVzdCB2aXNpdGluZyB5b3VyIG93biBzaXRlIGFuIGhvdXIgbGF0ZXIpXG4gICAgICAgICAgICAgICAgZGVsZXRlIHRvb2xiYXJQYXJhbXMudXNlckludGVudFxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodG9vbGJhclBhcmFtc1sndG9rZW4nXSAmJiB0aGlzLmluc3RhbmNlLmNvbmZpZy50b2tlbiA9PT0gdG9vbGJhclBhcmFtc1sndG9rZW4nXSkge1xuICAgICAgICAgICAgICAgIHRoaXMubG9hZFRvb2xiYXIodG9vbGJhclBhcmFtcylcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBsb2FkVG9vbGJhcihwYXJhbXM/OiBUb29sYmFyUGFyYW1zKTogYm9vbGVhbiB7XG4gICAgICAgIGlmICghd2luZG93IHx8IGFzc2lnbmFibGVXaW5kb3dbJ19wb3N0SG9nVG9vbGJhckxvYWRlZCddKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgfVxuICAgICAgICAvLyBvbmx5IGxvYWQgdGhlIHRvb2xiYXIgb25jZSwgZXZlbiBpZiB0aGVyZSBhcmUgbXVsdGlwbGUgaW5zdGFuY2VzIG9mIFBvc3RIb2dMaWJcbiAgICAgICAgYXNzaWduYWJsZVdpbmRvd1snX3Bvc3RIb2dUb29sYmFyTG9hZGVkJ10gPSB0cnVlXG5cbiAgICAgICAgLy8gdG9vbGJhci5qcyBpcyBzZXJ2ZWQgZnJvbSB0aGUgUG9zdEhvZyBDRE4sIHRoaXMgaGFzIGEgVFRMIG9mIDI0IGhvdXJzLlxuICAgICAgICAvLyB0aGUgdG9vbGJhciBhc3NldCBpbmNsdWRlcyBhIHJvdGF0aW5nIFwidG9rZW5cIiB0aGF0IGlzIHZhbGlkIGZvciA1IG1pbnV0ZXMuXG4gICAgICAgIGNvbnN0IGZpdmVNaW51dGVzSW5NaWxsaXMgPSA1ICogNjAgKiAxMDAwXG4gICAgICAgIC8vIHRoaXMgZW5zdXJlcyB0aGF0IHdlIGJ1c3QgdGhlIGNhY2hlIHBlcmlvZGljYWxseVxuICAgICAgICBjb25zdCB0aW1lc3RhbXBUb05lYXJlc3RGaXZlTWludXRlcyA9IE1hdGguZmxvb3IoRGF0ZS5ub3coKSAvIGZpdmVNaW51dGVzSW5NaWxsaXMpICogZml2ZU1pbnV0ZXNJbk1pbGxpc1xuICAgICAgICBjb25zdCB0b29sYmFyVXJsID0gdGhpcy5pbnN0YW5jZS5yZXF1ZXN0Um91dGVyLmVuZHBvaW50Rm9yKFxuICAgICAgICAgICAgJ2Fzc2V0cycsXG4gICAgICAgICAgICBgL3N0YXRpYy90b29sYmFyLmpzP3Q9JHt0aW1lc3RhbXBUb05lYXJlc3RGaXZlTWludXRlc31gXG4gICAgICAgIClcbiAgICAgICAgY29uc3QgZGlzYWJsZVRvb2xiYXJNZXRyaWNzID1cbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2UucmVxdWVzdFJvdXRlci5yZWdpb24gPT09ICdjdXN0b20nICYmIHRoaXMuaW5zdGFuY2UuY29uZmlnLmFkdmFuY2VkX2Rpc2FibGVfdG9vbGJhcl9tZXRyaWNzXG5cbiAgICAgICAgY29uc3QgdG9vbGJhclBhcmFtcyA9IHtcbiAgICAgICAgICAgIHRva2VuOiB0aGlzLmluc3RhbmNlLmNvbmZpZy50b2tlbixcbiAgICAgICAgICAgIC4uLnBhcmFtcyxcbiAgICAgICAgICAgIGFwaVVSTDogdGhpcy5pbnN0YW5jZS5yZXF1ZXN0Um91dGVyLmVuZHBvaW50Rm9yKCd1aScpLFxuICAgICAgICAgICAgLi4uKGRpc2FibGVUb29sYmFyTWV0cmljcyA/IHsgaW5zdHJ1bWVudDogZmFsc2UgfSA6IHt9KSxcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHsgc291cmNlOiBfZGlzY2FyZCwgLi4ucGFyYW1zVG9QZXJzaXN0IH0gPSB0b29sYmFyUGFyYW1zIC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCdfcG9zdEhvZ1Rvb2xiYXJQYXJhbXMnLCBKU09OLnN0cmluZ2lmeShwYXJhbXNUb1BlcnNpc3QpKVxuXG4gICAgICAgIGxvYWRTY3JpcHQodG9vbGJhclVybCwgKGVycikgPT4ge1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcignRmFpbGVkIHRvIGxvYWQgdG9vbGJhcicsIGVycilcbiAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDsoYXNzaWduYWJsZVdpbmRvd1sncGhfbG9hZF90b29sYmFyJ10gfHwgYXNzaWduYWJsZVdpbmRvd1sncGhfbG9hZF9lZGl0b3InXSkodG9vbGJhclBhcmFtcywgdGhpcy5pbnN0YW5jZSlcbiAgICAgICAgfSlcbiAgICAgICAgLy8gVHVyYm9saW5rcyBkb2Vzbid0IGZpcmUgYW4gb25sb2FkIGV2ZW50IGJ1dCBkb2VzIHJlcGxhY2UgdGhlIGVudGlyZSBib2R5LCBpbmNsdWRpbmcgdGhlIHRvb2xiYXIuXG4gICAgICAgIC8vIFRodXMsIHdlIGVuc3VyZSB0aGUgdG9vbGJhciBpcyBvbmx5IGxvYWRlZCBpbnNpZGUgdGhlIGJvZHksIGFuZCB0aGVuIHJlbG9hZGVkIG9uIHR1cmJvbGlua3M6bG9hZC5cbiAgICAgICAgX3JlZ2lzdGVyX2V2ZW50KHdpbmRvdywgJ3R1cmJvbGlua3M6bG9hZCcsICgpID0+IHtcbiAgICAgICAgICAgIGFzc2lnbmFibGVXaW5kb3dbJ19wb3N0SG9nVG9vbGJhckxvYWRlZCddID0gZmFsc2VcbiAgICAgICAgICAgIHRoaXMubG9hZFRvb2xiYXIodG9vbGJhclBhcmFtcylcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG5cbiAgICAvKiogQGRlcHJlY2F0ZWQgVXNlIFwibG9hZFRvb2xiYXJcIiBpbnN0ZWFkLiAqL1xuICAgIF9sb2FkRWRpdG9yKHBhcmFtczogVG9vbGJhclBhcmFtcyk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5sb2FkVG9vbGJhcihwYXJhbXMpXG4gICAgfVxuXG4gICAgLyoqIEBkZXByZWNhdGVkIFVzZSBcIm1heWJlTG9hZFRvb2xiYXJcIiBpbnN0ZWFkLiAqL1xuICAgIG1heWJlTG9hZEVkaXRvcihcbiAgICAgICAgbG9jYXRpb246IExvY2F0aW9uIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkLFxuICAgICAgICBsb2NhbFN0b3JhZ2U6IFN0b3JhZ2UgfCB1bmRlZmluZWQgPSB1bmRlZmluZWQsXG4gICAgICAgIGhpc3Rvcnk6IEhpc3RvcnkgfCB1bmRlZmluZWQgPSB1bmRlZmluZWRcbiAgICApOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWF5YmVMb2FkVG9vbGJhcihsb2NhdGlvbiwgbG9jYWxTdG9yYWdlLCBoaXN0b3J5KVxuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBRdWV1ZWRSZXF1ZXN0T3B0aW9ucyB9IGZyb20gJy4vdHlwZXMnXG5pbXBvcnQgeyBfZWFjaCB9IGZyb20gJy4vdXRpbHMnXG5cbmltcG9ydCB7IF9pc0FycmF5LCBfaXNVbmRlZmluZWQgfSBmcm9tICcuL3V0aWxzL3R5cGUtdXRpbHMnXG5cbmV4cG9ydCBjbGFzcyBSZXF1ZXN0UXVldWUge1xuICAgIC8vIFdlIHN0YXJ0IGluIGEgcGF1c2VkIHN0YXRlIGFuZCBvbmx5IHN0YXJ0IGZsdXNoaW5nIHdoZW4gZW5hYmxlZCBieSB0aGUgcGFyZW50XG4gICAgcHJpdmF0ZSBpc1BhdXNlZDogYm9vbGVhbiA9IHRydWVcbiAgICBwcml2YXRlIHF1ZXVlOiBRdWV1ZWRSZXF1ZXN0T3B0aW9uc1tdID0gW11cbiAgICBwcml2YXRlIGZsdXNoVGltZW91dD86IG51bWJlciAvLyB0byBiZWNvbWUgaW50ZXJ2YWwgZm9yIHJlZmVyZW5jZSB0byBjbGVhciBsYXRlclxuICAgIHByaXZhdGUgZmx1c2hUaW1lb3V0TXMgPSAzMDAwXG4gICAgcHJpdmF0ZSBzZW5kUmVxdWVzdDogKHJlcTogUXVldWVkUmVxdWVzdE9wdGlvbnMpID0+IHZvaWRcblxuICAgIGNvbnN0cnVjdG9yKHNlbmRSZXF1ZXN0OiAocmVxOiBRdWV1ZWRSZXF1ZXN0T3B0aW9ucykgPT4gdm9pZCkge1xuICAgICAgICB0aGlzLnNlbmRSZXF1ZXN0ID0gc2VuZFJlcXVlc3RcbiAgICB9XG5cbiAgICBlbnF1ZXVlKHJlcTogUXVldWVkUmVxdWVzdE9wdGlvbnMpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5xdWV1ZS5wdXNoKHJlcSlcblxuICAgICAgICBpZiAoIXRoaXMuZmx1c2hUaW1lb3V0KSB7XG4gICAgICAgICAgICB0aGlzLnNldEZsdXNoVGltZW91dCgpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB1bmxvYWQoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuY2xlYXJGbHVzaFRpbWVvdXQoKVxuICAgICAgICBjb25zdCByZXF1ZXN0cyA9IHRoaXMucXVldWUubGVuZ3RoID4gMCA/IHRoaXMuZm9ybWF0UXVldWUoKSA6IHt9XG4gICAgICAgIGNvbnN0IHJlcXVlc3RWYWx1ZXMgPSBPYmplY3QudmFsdWVzKHJlcXVlc3RzKVxuXG4gICAgICAgIC8vIEFsd2F5cyBmb3JjZSBldmVudHMgdG8gYmUgc2VudCBiZWZvcmUgcmVjb3JkaW5ncywgYXMgZXZlbnRzIGFyZSBtb3JlIGltcG9ydGFudCwgYW5kIHJlY29yZGluZ3MgYXJlIGJpZ2dlciBhbmQgdGh1cyBsZXNzIGxpa2VseSB0byBhcnJpdmVcbiAgICAgICAgY29uc3Qgc29ydGVkUmVxdWVzdHMgPSBbXG4gICAgICAgICAgICAuLi5yZXF1ZXN0VmFsdWVzLmZpbHRlcigocikgPT4gci51cmwuaW5kZXhPZignL2UnKSA9PT0gMCksXG4gICAgICAgICAgICAuLi5yZXF1ZXN0VmFsdWVzLmZpbHRlcigocikgPT4gci51cmwuaW5kZXhPZignL2UnKSAhPT0gMCksXG4gICAgICAgIF1cbiAgICAgICAgc29ydGVkUmVxdWVzdHMubWFwKChyZXEpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc2VuZFJlcXVlc3QoeyAuLi5yZXEsIHRyYW5zcG9ydDogJ3NlbmRCZWFjb24nIH0pXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgZW5hYmxlKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmlzUGF1c2VkID0gZmFsc2VcbiAgICAgICAgdGhpcy5zZXRGbHVzaFRpbWVvdXQoKVxuICAgIH1cblxuICAgIHByaXZhdGUgc2V0Rmx1c2hUaW1lb3V0KCk6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy5pc1BhdXNlZCkge1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5mbHVzaFRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY2xlYXJGbHVzaFRpbWVvdXQoKVxuICAgICAgICAgICAgaWYgKHRoaXMucXVldWUubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlcXVlc3RzID0gdGhpcy5mb3JtYXRRdWV1ZSgpXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gcmVxdWVzdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVxID0gcmVxdWVzdHNba2V5XVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXEuZGF0YSAmJiBfaXNBcnJheShyZXEuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9lYWNoKHJlcS5kYXRhLCAoZGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFbJ29mZnNldCddID0gTWF0aC5hYnMoZGF0YVsndGltZXN0YW1wJ10gLSBub3cpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGRhdGFbJ3RpbWVzdGFtcCddXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VuZFJlcXVlc3QocmVxKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgdGhpcy5mbHVzaFRpbWVvdXRNcylcbiAgICB9XG5cbiAgICBwcml2YXRlIGNsZWFyRmx1c2hUaW1lb3V0KCk6IHZvaWQge1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5mbHVzaFRpbWVvdXQpXG4gICAgICAgIHRoaXMuZmx1c2hUaW1lb3V0ID0gdW5kZWZpbmVkXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBmb3JtYXRRdWV1ZSgpOiBSZWNvcmQ8c3RyaW5nLCBRdWV1ZWRSZXF1ZXN0T3B0aW9ucz4ge1xuICAgICAgICBjb25zdCByZXF1ZXN0czogUmVjb3JkPHN0cmluZywgUXVldWVkUmVxdWVzdE9wdGlvbnM+ID0ge31cbiAgICAgICAgX2VhY2godGhpcy5xdWV1ZSwgKHJlcXVlc3Q6IFF1ZXVlZFJlcXVlc3RPcHRpb25zKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXEgPSByZXF1ZXN0XG4gICAgICAgICAgICBjb25zdCBrZXkgPSAocmVxID8gcmVxLmJhdGNoS2V5IDogbnVsbCkgfHwgcmVxLnVybFxuICAgICAgICAgICAgaWYgKF9pc1VuZGVmaW5lZChyZXF1ZXN0c1trZXldKSkge1xuICAgICAgICAgICAgICAgIC8vIFRPRE86IFdoYXQgYWJvdXQgdGhpcyAtaXQgc2VlbXMgdG8gYmF0Y2ggZGF0YSBpbnRvIGFuIGFycmF5IC0gZG8gd2UgYWx3YXlzIHdhbnQgdGhhdD9cbiAgICAgICAgICAgICAgICByZXF1ZXN0c1trZXldID0geyAuLi5yZXEsIGRhdGE6IFtdIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmVxdWVzdHNba2V5XS5kYXRhPy5wdXNoKHJlcS5kYXRhKVxuICAgICAgICB9KVxuXG4gICAgICAgIHRoaXMucXVldWUgPSBbXVxuICAgICAgICByZXR1cm4gcmVxdWVzdHNcbiAgICB9XG59XG4iLCAiLy8gREVGTEFURSBpcyBhIGNvbXBsZXggZm9ybWF0OyB0byByZWFkIHRoaXMgY29kZSwgeW91IHNob3VsZCBwcm9iYWJseSBjaGVjayB0aGUgUkZDIGZpcnN0OlxuLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzE5NTFcbi8vIFlvdSBtYXkgYWxzbyB3aXNoIHRvIHRha2UgYSBsb29rIGF0IHRoZSBndWlkZSBJIG1hZGUgYWJvdXQgdGhpcyBwcm9ncmFtOlxuLy8gaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vMTAxYXJyb3d6LzI1M2YzMWViNWFiYzNkOTI3NWFiOTQzMDAzZmZlY2FkXG4vLyBNdWNoIG9mIHRoZSBmb2xsb3dpbmcgY29kZSBpcyBzaW1pbGFyIHRvIHRoYXQgb2YgVVpJUC5qczpcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9waG90b3BlYS9VWklQLmpzXG4vLyBNYW55IG9wdGltaXphdGlvbnMgaGF2ZSBiZWVuIG1hZGUsIHNvIHRoZSBidW5kbGUgc2l6ZSBpcyB1bHRpbWF0ZWx5IHNtYWxsZXIgYnV0IHBlcmZvcm1hbmNlIGlzIHNpbWlsYXIuXG4vLyBTb21ldGltZXMgMCB3aWxsIGFwcGVhciB3aGVyZSAtMSB3b3VsZCBiZSBtb3JlIGFwcHJvcHJpYXRlLiBUaGlzIGlzIGJlY2F1c2UgdXNpbmcgYSB1aW50XG4vLyBpcyBiZXR0ZXIgZm9yIG1lbW9yeSBpbiBtb3N0IGVuZ2luZXMgKEkgKnRoaW5rKikuXG52YXIgY2gyID0ge307XG52YXIgd2sgPSAoZnVuY3Rpb24gKGMsIGlkLCBtc2csIHRyYW5zZmVyLCBjYikge1xuICAgIHZhciB1ID0gY2gyW2lkXSB8fCAoY2gyW2lkXSA9IFVSTC5jcmVhdGVPYmplY3RVUkwobmV3IEJsb2IoW2NdLCB7IHR5cGU6ICd0ZXh0L2phdmFzY3JpcHQnIH0pKSk7XG4gICAgdmFyIHcgPSBuZXcgV29ya2VyKHUpO1xuICAgIHcub25lcnJvciA9IGZ1bmN0aW9uIChlKSB7IHJldHVybiBjYihlLmVycm9yLCBudWxsKTsgfTtcbiAgICB3Lm9ubWVzc2FnZSA9IGZ1bmN0aW9uIChlKSB7IHJldHVybiBjYihudWxsLCBlLmRhdGEpOyB9O1xuICAgIHcucG9zdE1lc3NhZ2UobXNnLCB0cmFuc2Zlcik7XG4gICAgcmV0dXJuIHc7XG59KTtcblxuLy8gYWxpYXNlcyBmb3Igc2hvcnRlciBjb21wcmVzc2VkIGNvZGUgKG1vc3QgbWluaWZlcnMgZG9uJ3QgZG8gdGhpcylcbnZhciB1OCA9IFVpbnQ4QXJyYXksIHUxNiA9IFVpbnQxNkFycmF5LCB1MzIgPSBVaW50MzJBcnJheTtcbi8vIGZpeGVkIGxlbmd0aCBleHRyYSBiaXRzXG52YXIgZmxlYiA9IG5ldyB1OChbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMSwgMSwgMSwgMSwgMiwgMiwgMiwgMiwgMywgMywgMywgMywgNCwgNCwgNCwgNCwgNSwgNSwgNSwgNSwgMCwgLyogdW51c2VkICovIDAsIDAsIC8qIGltcG9zc2libGUgKi8gMF0pO1xuLy8gZml4ZWQgZGlzdGFuY2UgZXh0cmEgYml0c1xuLy8gc2VlIGZsZWIgbm90ZVxudmFyIGZkZWIgPSBuZXcgdTgoWzAsIDAsIDAsIDAsIDEsIDEsIDIsIDIsIDMsIDMsIDQsIDQsIDUsIDUsIDYsIDYsIDcsIDcsIDgsIDgsIDksIDksIDEwLCAxMCwgMTEsIDExLCAxMiwgMTIsIDEzLCAxMywgLyogdW51c2VkICovIDAsIDBdKTtcbi8vIGNvZGUgbGVuZ3RoIGluZGV4IG1hcFxudmFyIGNsaW0gPSBuZXcgdTgoWzE2LCAxNywgMTgsIDAsIDgsIDcsIDksIDYsIDEwLCA1LCAxMSwgNCwgMTIsIDMsIDEzLCAyLCAxNCwgMSwgMTVdKTtcbi8vIGdldCBiYXNlLCByZXZlcnNlIGluZGV4IG1hcCBmcm9tIGV4dHJhIGJpdHNcbnZhciBmcmViID0gZnVuY3Rpb24gKGViLCBzdGFydCkge1xuICAgIHZhciBiID0gbmV3IHUxNigzMSk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzMTsgKytpKSB7XG4gICAgICAgIGJbaV0gPSBzdGFydCArPSAxIDw8IGViW2kgLSAxXTtcbiAgICB9XG4gICAgLy8gbnVtYmVycyBoZXJlIGFyZSBhdCBtYXggMTggYml0c1xuICAgIHZhciByID0gbmV3IHUzMihiWzMwXSk7XG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCAzMDsgKytpKSB7XG4gICAgICAgIGZvciAodmFyIGogPSBiW2ldOyBqIDwgYltpICsgMV07ICsraikge1xuICAgICAgICAgICAgcltqXSA9ICgoaiAtIGJbaV0pIDw8IDUpIHwgaTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gW2IsIHJdO1xufTtcbnZhciBfYSA9IGZyZWIoZmxlYiwgMiksIGZsID0gX2FbMF0sIHJldmZsID0gX2FbMV07XG4vLyB3ZSBjYW4gaWdub3JlIHRoZSBmYWN0IHRoYXQgdGhlIG90aGVyIG51bWJlcnMgYXJlIHdyb25nOyB0aGV5IG5ldmVyIGhhcHBlbiBhbnl3YXlcbmZsWzI4XSA9IDI1OCwgcmV2ZmxbMjU4XSA9IDI4O1xudmFyIF9iID0gZnJlYihmZGViLCAwKSwgZmQgPSBfYlswXSwgcmV2ZmQgPSBfYlsxXTtcbi8vIG1hcCBvZiB2YWx1ZSB0byByZXZlcnNlIChhc3N1bWluZyAxNiBiaXRzKVxudmFyIHJldiA9IG5ldyB1MTYoMzI3NjgpO1xuZm9yICh2YXIgaSA9IDA7IGkgPCAzMjc2ODsgKytpKSB7XG4gICAgLy8gcmV2ZXJzZSB0YWJsZSBhbGdvcml0aG0gZnJvbSBTT1xuICAgIHZhciB4ID0gKChpICYgMHhBQUFBKSA+Pj4gMSkgfCAoKGkgJiAweDU1NTUpIDw8IDEpO1xuICAgIHggPSAoKHggJiAweENDQ0MpID4+PiAyKSB8ICgoeCAmIDB4MzMzMykgPDwgMik7XG4gICAgeCA9ICgoeCAmIDB4RjBGMCkgPj4+IDQpIHwgKCh4ICYgMHgwRjBGKSA8PCA0KTtcbiAgICByZXZbaV0gPSAoKCh4ICYgMHhGRjAwKSA+Pj4gOCkgfCAoKHggJiAweDAwRkYpIDw8IDgpKSA+Pj4gMTtcbn1cbi8vIGNyZWF0ZSBodWZmbWFuIHRyZWUgZnJvbSB1OCBcIm1hcFwiOiBpbmRleCAtPiBjb2RlIGxlbmd0aCBmb3IgY29kZSBpbmRleFxuLy8gbWIgKG1heCBiaXRzKSBtdXN0IGJlIGF0IG1vc3QgMTVcbi8vIFRPRE86IG9wdGltaXplL3NwbGl0IHVwP1xudmFyIGhNYXAgPSAoZnVuY3Rpb24gKGNkLCBtYiwgcikge1xuICAgIHZhciBzID0gY2QubGVuZ3RoO1xuICAgIC8vIGluZGV4XG4gICAgdmFyIGkgPSAwO1xuICAgIC8vIHUxNiBcIm1hcFwiOiBpbmRleCAtPiAjIG9mIGNvZGVzIHdpdGggYml0IGxlbmd0aCA9IGluZGV4XG4gICAgdmFyIGwgPSBuZXcgdTE2KG1iKTtcbiAgICAvLyBsZW5ndGggb2YgY2QgbXVzdCBiZSAyODggKHRvdGFsICMgb2YgY29kZXMpXG4gICAgZm9yICg7IGkgPCBzOyArK2kpXG4gICAgICAgICsrbFtjZFtpXSAtIDFdO1xuICAgIC8vIHUxNiBcIm1hcFwiOiBpbmRleCAtPiBtaW5pbXVtIGNvZGUgZm9yIGJpdCBsZW5ndGggPSBpbmRleFxuICAgIHZhciBsZSA9IG5ldyB1MTYobWIpO1xuICAgIGZvciAoaSA9IDA7IGkgPCBtYjsgKytpKSB7XG4gICAgICAgIGxlW2ldID0gKGxlW2kgLSAxXSArIGxbaSAtIDFdKSA8PCAxO1xuICAgIH1cbiAgICB2YXIgY287XG4gICAgaWYgKHIpIHtcbiAgICAgICAgLy8gdTE2IFwibWFwXCI6IGluZGV4IC0+IG51bWJlciBvZiBhY3R1YWwgYml0cywgc3ltYm9sIGZvciBjb2RlXG4gICAgICAgIGNvID0gbmV3IHUxNigxIDw8IG1iKTtcbiAgICAgICAgLy8gYml0cyB0byByZW1vdmUgZm9yIHJldmVyc2VyXG4gICAgICAgIHZhciBydmIgPSAxNSAtIG1iO1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgczsgKytpKSB7XG4gICAgICAgICAgICAvLyBpZ25vcmUgMCBsZW5ndGhzXG4gICAgICAgICAgICBpZiAoY2RbaV0pIHtcbiAgICAgICAgICAgICAgICAvLyBudW0gZW5jb2RpbmcgYm90aCBzeW1ib2wgYW5kIGJpdHMgcmVhZFxuICAgICAgICAgICAgICAgIHZhciBzdiA9IChpIDw8IDQpIHwgY2RbaV07XG4gICAgICAgICAgICAgICAgLy8gZnJlZSBiaXRzXG4gICAgICAgICAgICAgICAgdmFyIHJfMSA9IG1iIC0gY2RbaV07XG4gICAgICAgICAgICAgICAgLy8gc3RhcnQgdmFsdWVcbiAgICAgICAgICAgICAgICB2YXIgdiA9IGxlW2NkW2ldIC0gMV0rKyA8PCByXzE7XG4gICAgICAgICAgICAgICAgLy8gbSBpcyBlbmQgdmFsdWVcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBtID0gdiB8ICgoMSA8PCByXzEpIC0gMSk7IHYgPD0gbTsgKyt2KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGV2ZXJ5IDE2IGJpdCB2YWx1ZSBzdGFydGluZyB3aXRoIHRoZSBjb2RlIHlpZWxkcyB0aGUgc2FtZSByZXN1bHRcbiAgICAgICAgICAgICAgICAgICAgY29bcmV2W3ZdID4+PiBydmJdID0gc3Y7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjbyA9IG5ldyB1MTYocyk7XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBzOyArK2kpXG4gICAgICAgICAgICBjb1tpXSA9IHJldltsZVtjZFtpXSAtIDFdKytdID4+PiAoMTUgLSBjZFtpXSk7XG4gICAgfVxuICAgIHJldHVybiBjbztcbn0pO1xuLy8gZml4ZWQgbGVuZ3RoIHRyZWVcbnZhciBmbHQgPSBuZXcgdTgoMjg4KTtcbmZvciAodmFyIGkgPSAwOyBpIDwgMTQ0OyArK2kpXG4gICAgZmx0W2ldID0gODtcbmZvciAodmFyIGkgPSAxNDQ7IGkgPCAyNTY7ICsraSlcbiAgICBmbHRbaV0gPSA5O1xuZm9yICh2YXIgaSA9IDI1NjsgaSA8IDI4MDsgKytpKVxuICAgIGZsdFtpXSA9IDc7XG5mb3IgKHZhciBpID0gMjgwOyBpIDwgMjg4OyArK2kpXG4gICAgZmx0W2ldID0gODtcbi8vIGZpeGVkIGRpc3RhbmNlIHRyZWVcbnZhciBmZHQgPSBuZXcgdTgoMzIpO1xuZm9yICh2YXIgaSA9IDA7IGkgPCAzMjsgKytpKVxuICAgIGZkdFtpXSA9IDU7XG4vLyBmaXhlZCBsZW5ndGggbWFwXG52YXIgZmxtID0gLyojX19QVVJFX18qLyBoTWFwKGZsdCwgOSwgMCksIGZscm0gPSAvKiNfX1BVUkVfXyovIGhNYXAoZmx0LCA5LCAxKTtcbi8vIGZpeGVkIGRpc3RhbmNlIG1hcFxudmFyIGZkbSA9IC8qI19fUFVSRV9fKi8gaE1hcChmZHQsIDUsIDApLCBmZHJtID0gLyojX19QVVJFX18qLyBoTWFwKGZkdCwgNSwgMSk7XG4vLyBmaW5kIG1heCBvZiBhcnJheVxudmFyIG1heCA9IGZ1bmN0aW9uIChhKSB7XG4gICAgdmFyIG0gPSBhWzBdO1xuICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYS5sZW5ndGg7ICsraSkge1xuICAgICAgICBpZiAoYVtpXSA+IG0pXG4gICAgICAgICAgICBtID0gYVtpXTtcbiAgICB9XG4gICAgcmV0dXJuIG07XG59O1xuLy8gcmVhZCBkLCBzdGFydGluZyBhdCBiaXQgcCBhbmQgbWFzayB3aXRoIG1cbnZhciBiaXRzID0gZnVuY3Rpb24gKGQsIHAsIG0pIHtcbiAgICB2YXIgbyA9IChwIC8gOCkgPj4gMDtcbiAgICByZXR1cm4gKChkW29dIHwgKGRbbyArIDFdIDw8IDgpKSA+Pj4gKHAgJiA3KSkgJiBtO1xufTtcbi8vIHJlYWQgZCwgc3RhcnRpbmcgYXQgYml0IHAgY29udGludWluZyBmb3IgYXQgbGVhc3QgMTYgYml0c1xudmFyIGJpdHMxNiA9IGZ1bmN0aW9uIChkLCBwKSB7XG4gICAgdmFyIG8gPSAocCAvIDgpID4+IDA7XG4gICAgcmV0dXJuICgoZFtvXSB8IChkW28gKyAxXSA8PCA4KSB8IChkW28gKyAyXSA8PCAxNikpID4+PiAocCAmIDcpKTtcbn07XG4vLyBnZXQgZW5kIG9mIGJ5dGVcbnZhciBzaGZ0ID0gZnVuY3Rpb24gKHApIHsgcmV0dXJuICgocCAvIDgpID4+IDApICsgKHAgJiA3ICYmIDEpOyB9O1xuLy8gdHlwZWQgYXJyYXkgc2xpY2UgLSBhbGxvd3MgZ2FyYmFnZSBjb2xsZWN0b3IgdG8gZnJlZSBvcmlnaW5hbCByZWZlcmVuY2UsXG4vLyB3aGlsZSBiZWluZyBtb3JlIGNvbXBhdGlibGUgdGhhbiAuc2xpY2VcbnZhciBzbGMgPSBmdW5jdGlvbiAodiwgcywgZSkge1xuICAgIGlmIChzID09IG51bGwgfHwgcyA8IDApXG4gICAgICAgIHMgPSAwO1xuICAgIGlmIChlID09IG51bGwgfHwgZSA+IHYubGVuZ3RoKVxuICAgICAgICBlID0gdi5sZW5ndGg7XG4gICAgLy8gY2FuJ3QgdXNlIC5jb25zdHJ1Y3RvciBpbiBjYXNlIHVzZXItc3VwcGxpZWRcbiAgICB2YXIgbiA9IG5ldyAodiBpbnN0YW5jZW9mIHUxNiA/IHUxNiA6IHYgaW5zdGFuY2VvZiB1MzIgPyB1MzIgOiB1OCkoZSAtIHMpO1xuICAgIG4uc2V0KHYuc3ViYXJyYXkocywgZSkpO1xuICAgIHJldHVybiBuO1xufTtcbi8vIGV4cGFuZHMgcmF3IERFRkxBVEUgZGF0YVxudmFyIGluZmx0ID0gZnVuY3Rpb24gKGRhdCwgYnVmLCBzdCkge1xuICAgIC8vIHNvdXJjZSBsZW5ndGhcbiAgICB2YXIgc2wgPSBkYXQubGVuZ3RoO1xuICAgIC8vIGhhdmUgdG8gZXN0aW1hdGUgc2l6ZVxuICAgIHZhciBub0J1ZiA9ICFidWYgfHwgc3Q7XG4gICAgLy8gbm8gc3RhdGVcbiAgICB2YXIgbm9TdCA9ICFzdCB8fCBzdC5pO1xuICAgIGlmICghc3QpXG4gICAgICAgIHN0ID0ge307XG4gICAgLy8gQXNzdW1lcyByb3VnaGx5IDMzJSBjb21wcmVzc2lvbiByYXRpbyBhdmVyYWdlXG4gICAgaWYgKCFidWYpXG4gICAgICAgIGJ1ZiA9IG5ldyB1OChzbCAqIDMpO1xuICAgIC8vIGVuc3VyZSBidWZmZXIgY2FuIGZpdCBhdCBsZWFzdCBsIGVsZW1lbnRzXG4gICAgdmFyIGNidWYgPSBmdW5jdGlvbiAobCkge1xuICAgICAgICB2YXIgYmwgPSBidWYubGVuZ3RoO1xuICAgICAgICAvLyBuZWVkIHRvIGluY3JlYXNlIHNpemUgdG8gZml0XG4gICAgICAgIGlmIChsID4gYmwpIHtcbiAgICAgICAgICAgIC8vIERvdWJsZSBvciBzZXQgdG8gbmVjZXNzYXJ5LCB3aGljaGV2ZXIgaXMgZ3JlYXRlclxuICAgICAgICAgICAgdmFyIG5idWYgPSBuZXcgdTgoTWF0aC5tYXgoYmwgKiAyLCBsKSk7XG4gICAgICAgICAgICBuYnVmLnNldChidWYpO1xuICAgICAgICAgICAgYnVmID0gbmJ1ZjtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLy8gIGxhc3QgY2h1bmsgICAgICAgICBiaXRwb3MgICAgICAgICAgIGJ5dGVzXG4gICAgdmFyIGZpbmFsID0gc3QuZiB8fCAwLCBwb3MgPSBzdC5wIHx8IDAsIGJ0ID0gc3QuYiB8fCAwLCBsbSA9IHN0LmwsIGRtID0gc3QuZCwgbGJ0ID0gc3QubSwgZGJ0ID0gc3QubjtcbiAgICAvLyB0b3RhbCBiaXRzXG4gICAgdmFyIHRidHMgPSBzbCAqIDg7XG4gICAgZG8ge1xuICAgICAgICBpZiAoIWxtKSB7XG4gICAgICAgICAgICAvLyBCRklOQUwgLSB0aGlzIGlzIG9ubHkgMSB3aGVuIGxhc3QgY2h1bmsgaXMgbmV4dFxuICAgICAgICAgICAgc3QuZiA9IGZpbmFsID0gYml0cyhkYXQsIHBvcywgMSk7XG4gICAgICAgICAgICAvLyB0eXBlOiAwID0gbm8gY29tcHJlc3Npb24sIDEgPSBmaXhlZCBodWZmbWFuLCAyID0gZHluYW1pYyBodWZmbWFuXG4gICAgICAgICAgICB2YXIgdHlwZSA9IGJpdHMoZGF0LCBwb3MgKyAxLCAzKTtcbiAgICAgICAgICAgIHBvcyArPSAzO1xuICAgICAgICAgICAgaWYgKCF0eXBlKSB7XG4gICAgICAgICAgICAgICAgLy8gZ28gdG8gZW5kIG9mIGJ5dGUgYm91bmRhcnlcbiAgICAgICAgICAgICAgICB2YXIgcyA9IHNoZnQocG9zKSArIDQsIGwgPSBkYXRbcyAtIDRdIHwgKGRhdFtzIC0gM10gPDwgOCksIHQgPSBzICsgbDtcbiAgICAgICAgICAgICAgICBpZiAodCA+IHNsKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChub1N0KVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgJ3VuZXhwZWN0ZWQgRU9GJztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIGVuc3VyZSBzaXplXG4gICAgICAgICAgICAgICAgaWYgKG5vQnVmKVxuICAgICAgICAgICAgICAgICAgICBjYnVmKGJ0ICsgbCk7XG4gICAgICAgICAgICAgICAgLy8gQ29weSBvdmVyIHVuY29tcHJlc3NlZCBkYXRhXG4gICAgICAgICAgICAgICAgYnVmLnNldChkYXQuc3ViYXJyYXkocywgdCksIGJ0KTtcbiAgICAgICAgICAgICAgICAvLyBHZXQgbmV3IGJpdHBvcywgdXBkYXRlIGJ5dGUgY291bnRcbiAgICAgICAgICAgICAgICBzdC5iID0gYnQgKz0gbCwgc3QucCA9IHBvcyA9IHQgKiA4O1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZSA9PSAxKVxuICAgICAgICAgICAgICAgIGxtID0gZmxybSwgZG0gPSBmZHJtLCBsYnQgPSA5LCBkYnQgPSA1O1xuICAgICAgICAgICAgZWxzZSBpZiAodHlwZSA9PSAyKSB7XG4gICAgICAgICAgICAgICAgLy8gIGxpdGVyYWwgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVuZ3Roc1xuICAgICAgICAgICAgICAgIHZhciBoTGl0ID0gYml0cyhkYXQsIHBvcywgMzEpICsgMjU3LCBoY0xlbiA9IGJpdHMoZGF0LCBwb3MgKyAxMCwgMTUpICsgNDtcbiAgICAgICAgICAgICAgICB2YXIgdGwgPSBoTGl0ICsgYml0cyhkYXQsIHBvcyArIDUsIDMxKSArIDE7XG4gICAgICAgICAgICAgICAgcG9zICs9IDE0O1xuICAgICAgICAgICAgICAgIC8vIGxlbmd0aCtkaXN0YW5jZSB0cmVlXG4gICAgICAgICAgICAgICAgdmFyIGxkdCA9IG5ldyB1OCh0bCk7XG4gICAgICAgICAgICAgICAgLy8gY29kZSBsZW5ndGggdHJlZVxuICAgICAgICAgICAgICAgIHZhciBjbHQgPSBuZXcgdTgoMTkpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaGNMZW47ICsraSkge1xuICAgICAgICAgICAgICAgICAgICAvLyB1c2UgaW5kZXggbWFwIHRvIGdldCByZWFsIGNvZGVcbiAgICAgICAgICAgICAgICAgICAgY2x0W2NsaW1baV1dID0gYml0cyhkYXQsIHBvcyArIGkgKiAzLCA3KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcG9zICs9IGhjTGVuICogMztcbiAgICAgICAgICAgICAgICAvLyBjb2RlIGxlbmd0aHMgYml0c1xuICAgICAgICAgICAgICAgIHZhciBjbGIgPSBtYXgoY2x0KSwgY2xibXNrID0gKDEgPDwgY2xiKSAtIDE7XG4gICAgICAgICAgICAgICAgaWYgKCFub1N0ICYmIHBvcyArIHRsICogKGNsYiArIDcpID4gdGJ0cylcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgLy8gY29kZSBsZW5ndGhzIG1hcFxuICAgICAgICAgICAgICAgIHZhciBjbG0gPSBoTWFwKGNsdCwgY2xiLCAxKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRsOykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgciA9IGNsbVtiaXRzKGRhdCwgcG9zLCBjbGJtc2spXTtcbiAgICAgICAgICAgICAgICAgICAgLy8gYml0cyByZWFkXG4gICAgICAgICAgICAgICAgICAgIHBvcyArPSByICYgMTU7XG4gICAgICAgICAgICAgICAgICAgIC8vIHN5bWJvbFxuICAgICAgICAgICAgICAgICAgICB2YXIgcyA9IHIgPj4+IDQ7XG4gICAgICAgICAgICAgICAgICAgIC8vIGNvZGUgbGVuZ3RoIHRvIGNvcHlcbiAgICAgICAgICAgICAgICAgICAgaWYgKHMgPCAxNikge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGR0W2krK10gPSBzO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gIGNvcHkgICBjb3VudFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSAwLCBuID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzID09IDE2KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSAzICsgYml0cyhkYXQsIHBvcywgMyksIHBvcyArPSAyLCBjID0gbGR0W2kgLSAxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHMgPT0gMTcpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IDMgKyBiaXRzKGRhdCwgcG9zLCA3KSwgcG9zICs9IDM7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChzID09IDE4KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSAxMSArIGJpdHMoZGF0LCBwb3MsIDEyNyksIHBvcyArPSA3O1xuICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKG4tLSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZHRbaSsrXSA9IGM7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gICAgbGVuZ3RoIHRyZWUgICAgICAgICAgICAgICAgIGRpc3RhbmNlIHRyZWVcbiAgICAgICAgICAgICAgICB2YXIgbHQgPSBsZHQuc3ViYXJyYXkoMCwgaExpdCksIGR0ID0gbGR0LnN1YmFycmF5KGhMaXQpO1xuICAgICAgICAgICAgICAgIC8vIG1heCBsZW5ndGggYml0c1xuICAgICAgICAgICAgICAgIGxidCA9IG1heChsdCk7XG4gICAgICAgICAgICAgICAgLy8gbWF4IGRpc3QgYml0c1xuICAgICAgICAgICAgICAgIGRidCA9IG1heChkdCk7XG4gICAgICAgICAgICAgICAgbG0gPSBoTWFwKGx0LCBsYnQsIDEpO1xuICAgICAgICAgICAgICAgIGRtID0gaE1hcChkdCwgZGJ0LCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICB0aHJvdyAnaW52YWxpZCBibG9jayB0eXBlJztcbiAgICAgICAgICAgIGlmIChwb3MgPiB0YnRzKVxuICAgICAgICAgICAgICAgIHRocm93ICd1bmV4cGVjdGVkIEVPRic7XG4gICAgICAgIH1cbiAgICAgICAgLy8gTWFrZSBzdXJlIHRoZSBidWZmZXIgY2FuIGhvbGQgdGhpcyArIHRoZSBsYXJnZXN0IHBvc3NpYmxlIGFkZGl0aW9uXG4gICAgICAgIC8vIE1heGltdW0gY2h1bmsgc2l6ZSAocHJhY3RpY2FsbHksIHRoZW9yZXRpY2FsbHkgaW5maW5pdGUpIGlzIDJeMTc7XG4gICAgICAgIGlmIChub0J1ZilcbiAgICAgICAgICAgIGNidWYoYnQgKyAxMzEwNzIpO1xuICAgICAgICB2YXIgbG1zID0gKDEgPDwgbGJ0KSAtIDEsIGRtcyA9ICgxIDw8IGRidCkgLSAxO1xuICAgICAgICB2YXIgbXhhID0gbGJ0ICsgZGJ0ICsgMTg7XG4gICAgICAgIHdoaWxlIChub1N0IHx8IHBvcyArIG14YSA8IHRidHMpIHtcbiAgICAgICAgICAgIC8vIGJpdHMgcmVhZCwgY29kZVxuICAgICAgICAgICAgdmFyIGMgPSBsbVtiaXRzMTYoZGF0LCBwb3MpICYgbG1zXSwgc3ltID0gYyA+Pj4gNDtcbiAgICAgICAgICAgIHBvcyArPSBjICYgMTU7XG4gICAgICAgICAgICBpZiAocG9zID4gdGJ0cylcbiAgICAgICAgICAgICAgICB0aHJvdyAndW5leHBlY3RlZCBFT0YnO1xuICAgICAgICAgICAgaWYgKCFjKVxuICAgICAgICAgICAgICAgIHRocm93ICdpbnZhbGlkIGxlbmd0aC9saXRlcmFsJztcbiAgICAgICAgICAgIGlmIChzeW0gPCAyNTYpXG4gICAgICAgICAgICAgICAgYnVmW2J0KytdID0gc3ltO1xuICAgICAgICAgICAgZWxzZSBpZiAoc3ltID09IDI1Nikge1xuICAgICAgICAgICAgICAgIGxtID0gbnVsbDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBhZGQgPSBzeW0gLSAyNTQ7XG4gICAgICAgICAgICAgICAgLy8gbm8gZXh0cmEgYml0cyBuZWVkZWQgaWYgbGVzc1xuICAgICAgICAgICAgICAgIGlmIChzeW0gPiAyNjQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gaW5kZXhcbiAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSBzeW0gLSAyNTcsIGIgPSBmbGViW2ldO1xuICAgICAgICAgICAgICAgICAgICBhZGQgPSBiaXRzKGRhdCwgcG9zLCAoMSA8PCBiKSAtIDEpICsgZmxbaV07XG4gICAgICAgICAgICAgICAgICAgIHBvcyArPSBiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBkaXN0XG4gICAgICAgICAgICAgICAgdmFyIGQgPSBkbVtiaXRzMTYoZGF0LCBwb3MpICYgZG1zXSwgZHN5bSA9IGQgPj4+IDQ7XG4gICAgICAgICAgICAgICAgaWYgKCFkKVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyAnaW52YWxpZCBkaXN0YW5jZSc7XG4gICAgICAgICAgICAgICAgcG9zICs9IGQgJiAxNTtcbiAgICAgICAgICAgICAgICB2YXIgZHQgPSBmZFtkc3ltXTtcbiAgICAgICAgICAgICAgICBpZiAoZHN5bSA+IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGIgPSBmZGViW2RzeW1dO1xuICAgICAgICAgICAgICAgICAgICBkdCArPSBiaXRzMTYoZGF0LCBwb3MpICYgKCgxIDw8IGIpIC0gMSksIHBvcyArPSBiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocG9zID4gdGJ0cylcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgJ3VuZXhwZWN0ZWQgRU9GJztcbiAgICAgICAgICAgICAgICBpZiAobm9CdWYpXG4gICAgICAgICAgICAgICAgICAgIGNidWYoYnQgKyAxMzEwNzIpO1xuICAgICAgICAgICAgICAgIHZhciBlbmQgPSBidCArIGFkZDtcbiAgICAgICAgICAgICAgICBmb3IgKDsgYnQgPCBlbmQ7IGJ0ICs9IDQpIHtcbiAgICAgICAgICAgICAgICAgICAgYnVmW2J0XSA9IGJ1ZltidCAtIGR0XTtcbiAgICAgICAgICAgICAgICAgICAgYnVmW2J0ICsgMV0gPSBidWZbYnQgKyAxIC0gZHRdO1xuICAgICAgICAgICAgICAgICAgICBidWZbYnQgKyAyXSA9IGJ1ZltidCArIDIgLSBkdF07XG4gICAgICAgICAgICAgICAgICAgIGJ1ZltidCArIDNdID0gYnVmW2J0ICsgMyAtIGR0XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnQgPSBlbmQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc3QubCA9IGxtLCBzdC5wID0gcG9zLCBzdC5iID0gYnQ7XG4gICAgICAgIGlmIChsbSlcbiAgICAgICAgICAgIGZpbmFsID0gMSwgc3QubSA9IGxidCwgc3QuZCA9IGRtLCBzdC5uID0gZGJ0O1xuICAgIH0gd2hpbGUgKCFmaW5hbCk7XG4gICAgcmV0dXJuIGJ0ID09IGJ1Zi5sZW5ndGggPyBidWYgOiBzbGMoYnVmLCAwLCBidCk7XG59O1xuLy8gc3RhcnRpbmcgYXQgcCwgd3JpdGUgdGhlIG1pbmltdW0gbnVtYmVyIG9mIGJpdHMgdGhhdCBjYW4gaG9sZCB2IHRvIGRcbnZhciB3Yml0cyA9IGZ1bmN0aW9uIChkLCBwLCB2KSB7XG4gICAgdiA8PD0gcCAmIDc7XG4gICAgdmFyIG8gPSAocCAvIDgpID4+IDA7XG4gICAgZFtvXSB8PSB2O1xuICAgIGRbbyArIDFdIHw9IHYgPj4+IDg7XG59O1xuLy8gc3RhcnRpbmcgYXQgcCwgd3JpdGUgdGhlIG1pbmltdW0gbnVtYmVyIG9mIGJpdHMgKD44KSB0aGF0IGNhbiBob2xkIHYgdG8gZFxudmFyIHdiaXRzMTYgPSBmdW5jdGlvbiAoZCwgcCwgdikge1xuICAgIHYgPDw9IHAgJiA3O1xuICAgIHZhciBvID0gKHAgLyA4KSA+PiAwO1xuICAgIGRbb10gfD0gdjtcbiAgICBkW28gKyAxXSB8PSB2ID4+PiA4O1xuICAgIGRbbyArIDJdIHw9IHYgPj4+IDE2O1xufTtcbi8vIGNyZWF0ZXMgY29kZSBsZW5ndGhzIGZyb20gYSBmcmVxdWVuY3kgdGFibGVcbnZhciBoVHJlZSA9IGZ1bmN0aW9uIChkLCBtYikge1xuICAgIC8vIE5lZWQgZXh0cmEgaW5mbyB0byBtYWtlIGEgdHJlZVxuICAgIHZhciB0ID0gW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIGlmIChkW2ldKVxuICAgICAgICAgICAgdC5wdXNoKHsgczogaSwgZjogZFtpXSB9KTtcbiAgICB9XG4gICAgdmFyIHMgPSB0Lmxlbmd0aDtcbiAgICB2YXIgdDIgPSB0LnNsaWNlKCk7XG4gICAgaWYgKCFzKVxuICAgICAgICByZXR1cm4gW25ldyB1OCgwKSwgMF07XG4gICAgaWYgKHMgPT0gMSkge1xuICAgICAgICB2YXIgdiA9IG5ldyB1OCh0WzBdLnMgKyAxKTtcbiAgICAgICAgdlt0WzBdLnNdID0gMTtcbiAgICAgICAgcmV0dXJuIFt2LCAxXTtcbiAgICB9XG4gICAgdC5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7IHJldHVybiBhLmYgLSBiLmY7IH0pO1xuICAgIC8vIGFmdGVyIGkyIHJlYWNoZXMgbGFzdCBpbmQsIHdpbGwgYmUgc3RvcHBlZFxuICAgIC8vIGZyZXEgbXVzdCBiZSBncmVhdGVyIHRoYW4gbGFyZ2VzdCBwb3NzaWJsZSBudW1iZXIgb2Ygc3ltYm9sc1xuICAgIHQucHVzaCh7IHM6IC0xLCBmOiAyNTAwMSB9KTtcbiAgICB2YXIgbCA9IHRbMF0sIHIgPSB0WzFdLCBpMCA9IDAsIGkxID0gMSwgaTIgPSAyO1xuICAgIHRbMF0gPSB7IHM6IC0xLCBmOiBsLmYgKyByLmYsIGw6IGwsIHI6IHIgfTtcbiAgICAvLyBlZmZpY2llbnQgYWxnb3JpdGhtIGZyb20gVVpJUC5qc1xuICAgIC8vIGkwIGlzIGxvb2tiZWhpbmQsIGkyIGlzIGxvb2thaGVhZCAtIGFmdGVyIHByb2Nlc3NpbmcgdHdvIGxvdy1mcmVxXG4gICAgLy8gc3ltYm9scyB0aGF0IGNvbWJpbmVkIGhhdmUgaGlnaCBmcmVxLCB3aWxsIHN0YXJ0IHByb2Nlc3NpbmcgaTIgKGhpZ2gtZnJlcSxcbiAgICAvLyBub24tY29tcG9zaXRlKSBzeW1ib2xzIGluc3RlYWRcbiAgICAvLyBzZWUgaHR0cHM6Ly9yZWRkaXQuY29tL3IvcGhvdG9wZWEvY29tbWVudHMvaWtla2h0L3V6aXBqc19xdWVzdGlvbnMvXG4gICAgd2hpbGUgKGkxICE9IHMgLSAxKSB7XG4gICAgICAgIGwgPSB0W3RbaTBdLmYgPCB0W2kyXS5mID8gaTArKyA6IGkyKytdO1xuICAgICAgICByID0gdFtpMCAhPSBpMSAmJiB0W2kwXS5mIDwgdFtpMl0uZiA/IGkwKysgOiBpMisrXTtcbiAgICAgICAgdFtpMSsrXSA9IHsgczogLTEsIGY6IGwuZiArIHIuZiwgbDogbCwgcjogciB9O1xuICAgIH1cbiAgICB2YXIgbWF4U3ltID0gdDJbMF0ucztcbiAgICBmb3IgKHZhciBpID0gMTsgaSA8IHM7ICsraSkge1xuICAgICAgICBpZiAodDJbaV0ucyA+IG1heFN5bSlcbiAgICAgICAgICAgIG1heFN5bSA9IHQyW2ldLnM7XG4gICAgfVxuICAgIC8vIGNvZGUgbGVuZ3Roc1xuICAgIHZhciB0ciA9IG5ldyB1MTYobWF4U3ltICsgMSk7XG4gICAgLy8gbWF4IGJpdHMgaW4gdHJlZVxuICAgIHZhciBtYnQgPSBsbih0W2kxIC0gMV0sIHRyLCAwKTtcbiAgICBpZiAobWJ0ID4gbWIpIHtcbiAgICAgICAgLy8gbW9yZSBhbGdvcml0aG1zIGZyb20gVVpJUC5qc1xuICAgICAgICAvLyBUT0RPOiBmaW5kIG91dCBob3cgdGhpcyBjb2RlIHdvcmtzIChkZWJ0KVxuICAgICAgICAvLyAgaW5kICAgIGRlYnRcbiAgICAgICAgdmFyIGkgPSAwLCBkdCA9IDA7XG4gICAgICAgIC8vICAgIGxlZnQgICAgICAgICAgICBjb3N0XG4gICAgICAgIHZhciBsZnQgPSBtYnQgLSBtYiwgY3N0ID0gMSA8PCBsZnQ7XG4gICAgICAgIHQyLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsgcmV0dXJuIHRyW2Iuc10gLSB0clthLnNdIHx8IGEuZiAtIGIuZjsgfSk7XG4gICAgICAgIGZvciAoOyBpIDwgczsgKytpKSB7XG4gICAgICAgICAgICB2YXIgaTJfMSA9IHQyW2ldLnM7XG4gICAgICAgICAgICBpZiAodHJbaTJfMV0gPiBtYikge1xuICAgICAgICAgICAgICAgIGR0ICs9IGNzdCAtICgxIDw8IChtYnQgLSB0cltpMl8xXSkpO1xuICAgICAgICAgICAgICAgIHRyW2kyXzFdID0gbWI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgZHQgPj4+PSBsZnQ7XG4gICAgICAgIHdoaWxlIChkdCA+IDApIHtcbiAgICAgICAgICAgIHZhciBpMl8yID0gdDJbaV0ucztcbiAgICAgICAgICAgIGlmICh0cltpMl8yXSA8IG1iKVxuICAgICAgICAgICAgICAgIGR0IC09IDEgPDwgKG1iIC0gdHJbaTJfMl0rKyAtIDEpO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICsraTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKDsgaSA+PSAwICYmIGR0OyAtLWkpIHtcbiAgICAgICAgICAgIHZhciBpMl8zID0gdDJbaV0ucztcbiAgICAgICAgICAgIGlmICh0cltpMl8zXSA9PSBtYikge1xuICAgICAgICAgICAgICAgIC0tdHJbaTJfM107XG4gICAgICAgICAgICAgICAgKytkdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBtYnQgPSBtYjtcbiAgICB9XG4gICAgcmV0dXJuIFtuZXcgdTgodHIpLCBtYnRdO1xufTtcbi8vIGdldCB0aGUgbWF4IGxlbmd0aCBhbmQgYXNzaWduIGxlbmd0aCBjb2Rlc1xudmFyIGxuID0gZnVuY3Rpb24gKG4sIGwsIGQpIHtcbiAgICByZXR1cm4gbi5zID09IC0xXG4gICAgICAgID8gTWF0aC5tYXgobG4obi5sLCBsLCBkICsgMSksIGxuKG4uciwgbCwgZCArIDEpKVxuICAgICAgICA6IChsW24uc10gPSBkKTtcbn07XG4vLyBsZW5ndGggY29kZXMgZ2VuZXJhdGlvblxudmFyIGxjID0gZnVuY3Rpb24gKGMpIHtcbiAgICB2YXIgcyA9IGMubGVuZ3RoO1xuICAgIC8vIE5vdGUgdGhhdCB0aGUgc2VtaWNvbG9uIHdhcyBpbnRlbnRpb25hbFxuICAgIHdoaWxlIChzICYmICFjWy0tc10pXG4gICAgICAgIDtcbiAgICB2YXIgY2wgPSBuZXcgdTE2KCsrcyk7XG4gICAgLy8gIGluZCAgICAgIG51bSAgICAgICAgIHN0cmVha1xuICAgIHZhciBjbGkgPSAwLCBjbG4gPSBjWzBdLCBjbHMgPSAxO1xuICAgIHZhciB3ID0gZnVuY3Rpb24gKHYpIHsgY2xbY2xpKytdID0gdjsgfTtcbiAgICBmb3IgKHZhciBpID0gMTsgaSA8PSBzOyArK2kpIHtcbiAgICAgICAgaWYgKGNbaV0gPT0gY2xuICYmIGkgIT0gcylcbiAgICAgICAgICAgICsrY2xzO1xuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmICghY2xuICYmIGNscyA+IDIpIHtcbiAgICAgICAgICAgICAgICBmb3IgKDsgY2xzID4gMTM4OyBjbHMgLT0gMTM4KVxuICAgICAgICAgICAgICAgICAgICB3KDMyNzU0KTtcbiAgICAgICAgICAgICAgICBpZiAoY2xzID4gMikge1xuICAgICAgICAgICAgICAgICAgICB3KGNscyA+IDEwID8gKChjbHMgLSAxMSkgPDwgNSkgfCAyODY5MCA6ICgoY2xzIC0gMykgPDwgNSkgfCAxMjMwNSk7XG4gICAgICAgICAgICAgICAgICAgIGNscyA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2xzID4gMykge1xuICAgICAgICAgICAgICAgIHcoY2xuKSwgLS1jbHM7XG4gICAgICAgICAgICAgICAgZm9yICg7IGNscyA+IDY7IGNscyAtPSA2KVxuICAgICAgICAgICAgICAgICAgICB3KDgzMDQpO1xuICAgICAgICAgICAgICAgIGlmIChjbHMgPiAyKVxuICAgICAgICAgICAgICAgICAgICB3KCgoY2xzIC0gMykgPDwgNSkgfCA4MjA4KSwgY2xzID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHdoaWxlIChjbHMtLSlcbiAgICAgICAgICAgICAgICB3KGNsbik7XG4gICAgICAgICAgICBjbHMgPSAxO1xuICAgICAgICAgICAgY2xuID0gY1tpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gW2NsLnN1YmFycmF5KDAsIGNsaSksIHNdO1xufTtcbi8vIGNhbGN1bGF0ZSB0aGUgbGVuZ3RoIG9mIG91dHB1dCBmcm9tIHRyZWUsIGNvZGUgbGVuZ3Roc1xudmFyIGNsZW4gPSBmdW5jdGlvbiAoY2YsIGNsKSB7XG4gICAgdmFyIGwgPSAwO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2wubGVuZ3RoOyArK2kpXG4gICAgICAgIGwgKz0gY2ZbaV0gKiBjbFtpXTtcbiAgICByZXR1cm4gbDtcbn07XG4vLyB3cml0ZXMgYSBmaXhlZCBibG9ja1xuLy8gcmV0dXJucyB0aGUgbmV3IGJpdCBwb3NcbnZhciB3ZmJsayA9IGZ1bmN0aW9uIChvdXQsIHBvcywgZGF0KSB7XG4gICAgLy8gbm8gbmVlZCB0byB3cml0ZSAwMCBhcyB0eXBlOiBUeXBlZEFycmF5IGRlZmF1bHRzIHRvIDBcbiAgICB2YXIgcyA9IGRhdC5sZW5ndGg7XG4gICAgdmFyIG8gPSBzaGZ0KHBvcyArIDIpO1xuICAgIG91dFtvXSA9IHMgJiAyNTU7XG4gICAgb3V0W28gKyAxXSA9IHMgPj4+IDg7XG4gICAgb3V0W28gKyAyXSA9IG91dFtvXSBeIDI1NTtcbiAgICBvdXRbbyArIDNdID0gb3V0W28gKyAxXSBeIDI1NTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHM7ICsraSlcbiAgICAgICAgb3V0W28gKyBpICsgNF0gPSBkYXRbaV07XG4gICAgcmV0dXJuIChvICsgNCArIHMpICogODtcbn07XG4vLyB3cml0ZXMgYSBibG9ja1xudmFyIHdibGsgPSBmdW5jdGlvbiAoZGF0LCBvdXQsIGZpbmFsLCBzeW1zLCBsZiwgZGYsIGViLCBsaSwgYnMsIGJsLCBwKSB7XG4gICAgd2JpdHMob3V0LCBwKyssIGZpbmFsKTtcbiAgICArK2xmWzI1Nl07XG4gICAgdmFyIF9hID0gaFRyZWUobGYsIDE1KSwgZGx0ID0gX2FbMF0sIG1sYiA9IF9hWzFdO1xuICAgIHZhciBfYiA9IGhUcmVlKGRmLCAxNSksIGRkdCA9IF9iWzBdLCBtZGIgPSBfYlsxXTtcbiAgICB2YXIgX2MgPSBsYyhkbHQpLCBsY2x0ID0gX2NbMF0sIG5sYyA9IF9jWzFdO1xuICAgIHZhciBfZCA9IGxjKGRkdCksIGxjZHQgPSBfZFswXSwgbmRjID0gX2RbMV07XG4gICAgdmFyIGxjZnJlcSA9IG5ldyB1MTYoMTkpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGNsdC5sZW5ndGg7ICsraSlcbiAgICAgICAgbGNmcmVxW2xjbHRbaV0gJiAzMV0rKztcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxjZHQubGVuZ3RoOyArK2kpXG4gICAgICAgIGxjZnJlcVtsY2R0W2ldICYgMzFdKys7XG4gICAgdmFyIF9lID0gaFRyZWUobGNmcmVxLCA3KSwgbGN0ID0gX2VbMF0sIG1sY2IgPSBfZVsxXTtcbiAgICB2YXIgbmxjYyA9IDE5O1xuICAgIGZvciAoOyBubGNjID4gNCAmJiAhbGN0W2NsaW1bbmxjYyAtIDFdXTsgLS1ubGNjKVxuICAgICAgICA7XG4gICAgdmFyIGZsZW4gPSAoYmwgKyA1KSA8PCAzO1xuICAgIHZhciBmdGxlbiA9IGNsZW4obGYsIGZsdCkgKyBjbGVuKGRmLCBmZHQpICsgZWI7XG4gICAgdmFyIGR0bGVuID0gY2xlbihsZiwgZGx0KSArIGNsZW4oZGYsIGRkdCkgKyBlYiArIDE0ICsgMyAqIG5sY2MgKyBjbGVuKGxjZnJlcSwgbGN0KSArICgyICogbGNmcmVxWzE2XSArIDMgKiBsY2ZyZXFbMTddICsgNyAqIGxjZnJlcVsxOF0pO1xuICAgIGlmIChmbGVuIDw9IGZ0bGVuICYmIGZsZW4gPD0gZHRsZW4pXG4gICAgICAgIHJldHVybiB3ZmJsayhvdXQsIHAsIGRhdC5zdWJhcnJheShicywgYnMgKyBibCkpO1xuICAgIHZhciBsbSwgbGwsIGRtLCBkbDtcbiAgICB3Yml0cyhvdXQsIHAsIDEgKyAoZHRsZW4gPCBmdGxlbikpLCBwICs9IDI7XG4gICAgaWYgKGR0bGVuIDwgZnRsZW4pIHtcbiAgICAgICAgbG0gPSBoTWFwKGRsdCwgbWxiLCAwKSwgbGwgPSBkbHQsIGRtID0gaE1hcChkZHQsIG1kYiwgMCksIGRsID0gZGR0O1xuICAgICAgICB2YXIgbGxtID0gaE1hcChsY3QsIG1sY2IsIDApO1xuICAgICAgICB3Yml0cyhvdXQsIHAsIG5sYyAtIDI1Nyk7XG4gICAgICAgIHdiaXRzKG91dCwgcCArIDUsIG5kYyAtIDEpO1xuICAgICAgICB3Yml0cyhvdXQsIHAgKyAxMCwgbmxjYyAtIDQpO1xuICAgICAgICBwICs9IDE0O1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5sY2M7ICsraSlcbiAgICAgICAgICAgIHdiaXRzKG91dCwgcCArIDMgKiBpLCBsY3RbY2xpbVtpXV0pO1xuICAgICAgICBwICs9IDMgKiBubGNjO1xuICAgICAgICB2YXIgbGN0cyA9IFtsY2x0LCBsY2R0XTtcbiAgICAgICAgZm9yICh2YXIgaXQgPSAwOyBpdCA8IDI7ICsraXQpIHtcbiAgICAgICAgICAgIHZhciBjbGN0ID0gbGN0c1tpdF07XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNsY3QubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICB2YXIgbGVuID0gY2xjdFtpXSAmIDMxO1xuICAgICAgICAgICAgICAgIHdiaXRzKG91dCwgcCwgbGxtW2xlbl0pLCBwICs9IGxjdFtsZW5dO1xuICAgICAgICAgICAgICAgIGlmIChsZW4gPiAxNSlcbiAgICAgICAgICAgICAgICAgICAgd2JpdHMob3V0LCBwLCAoY2xjdFtpXSA+Pj4gNSkgJiAxMjcpLCBwICs9IGNsY3RbaV0gPj4+IDEyO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBsbSA9IGZsbSwgbGwgPSBmbHQsIGRtID0gZmRtLCBkbCA9IGZkdDtcbiAgICB9XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaTsgKytpKSB7XG4gICAgICAgIGlmIChzeW1zW2ldID4gMjU1KSB7XG4gICAgICAgICAgICB2YXIgbGVuID0gKHN5bXNbaV0gPj4+IDE4KSAmIDMxO1xuICAgICAgICAgICAgd2JpdHMxNihvdXQsIHAsIGxtW2xlbiArIDI1N10pLCBwICs9IGxsW2xlbiArIDI1N107XG4gICAgICAgICAgICBpZiAobGVuID4gNylcbiAgICAgICAgICAgICAgICB3Yml0cyhvdXQsIHAsIChzeW1zW2ldID4+PiAyMykgJiAzMSksIHAgKz0gZmxlYltsZW5dO1xuICAgICAgICAgICAgdmFyIGRzdCA9IHN5bXNbaV0gJiAzMTtcbiAgICAgICAgICAgIHdiaXRzMTYob3V0LCBwLCBkbVtkc3RdKSwgcCArPSBkbFtkc3RdO1xuICAgICAgICAgICAgaWYgKGRzdCA+IDMpXG4gICAgICAgICAgICAgICAgd2JpdHMxNihvdXQsIHAsIChzeW1zW2ldID4+PiA1KSAmIDgxOTEpLCBwICs9IGZkZWJbZHN0XTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHdiaXRzMTYob3V0LCBwLCBsbVtzeW1zW2ldXSksIHAgKz0gbGxbc3ltc1tpXV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgd2JpdHMxNihvdXQsIHAsIGxtWzI1Nl0pO1xuICAgIHJldHVybiBwICsgbGxbMjU2XTtcbn07XG4vLyBkZWZsYXRlIG9wdGlvbnMgKG5pY2UgPDwgMTMpIHwgY2hhaW5cbnZhciBkZW8gPSAvKiNfX1BVUkVfXyovIG5ldyB1MzIoWzY1NTQwLCAxMzEwODAsIDEzMTA4OCwgMTMxMTA0LCAyNjIxNzYsIDEwNDg3MDQsIDEwNDg4MzIsIDIxMTQ1NjAsIDIxMTc2MzJdKTtcbi8vIGVtcHR5XG52YXIgZXQgPSAvKiNfX1BVUkVfXyovIG5ldyB1OCgwKTtcbi8vIGNvbXByZXNzZXMgZGF0YSBpbnRvIGEgcmF3IERFRkxBVEUgYnVmZmVyXG52YXIgZGZsdCA9IGZ1bmN0aW9uIChkYXQsIGx2bCwgcGx2bCwgcHJlLCBwb3N0LCBsc3QpIHtcbiAgICB2YXIgcyA9IGRhdC5sZW5ndGg7XG4gICAgdmFyIG8gPSBuZXcgdTgocHJlICsgcyArIDUgKiAoMSArIE1hdGguZmxvb3IocyAvIDcwMDApKSArIHBvc3QpO1xuICAgIC8vIHdyaXRpbmcgdG8gdGhpcyB3cml0ZXMgdG8gdGhlIG91dHB1dCBidWZmZXJcbiAgICB2YXIgdyA9IG8uc3ViYXJyYXkocHJlLCBvLmxlbmd0aCAtIHBvc3QpO1xuICAgIHZhciBwb3MgPSAwO1xuICAgIGlmICghbHZsIHx8IHMgPCA4KSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDw9IHM7IGkgKz0gNjU1MzUpIHtcbiAgICAgICAgICAgIC8vIGVuZFxuICAgICAgICAgICAgdmFyIGUgPSBpICsgNjU1MzU7XG4gICAgICAgICAgICBpZiAoZSA8IHMpIHtcbiAgICAgICAgICAgICAgICAvLyB3cml0ZSBmdWxsIGJsb2NrXG4gICAgICAgICAgICAgICAgcG9zID0gd2ZibGsodywgcG9zLCBkYXQuc3ViYXJyYXkoaSwgZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gd3JpdGUgZmluYWwgYmxvY2tcbiAgICAgICAgICAgICAgICB3W2ldID0gbHN0O1xuICAgICAgICAgICAgICAgIHBvcyA9IHdmYmxrKHcsIHBvcywgZGF0LnN1YmFycmF5KGksIHMpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdmFyIG9wdCA9IGRlb1tsdmwgLSAxXTtcbiAgICAgICAgdmFyIG4gPSBvcHQgPj4+IDEzLCBjID0gb3B0ICYgODE5MTtcbiAgICAgICAgdmFyIG1za18xID0gKDEgPDwgcGx2bCkgLSAxO1xuICAgICAgICAvLyAgICBwcmV2IDItYnl0ZSB2YWwgbWFwICAgIGN1cnIgMi1ieXRlIHZhbCBtYXBcbiAgICAgICAgdmFyIHByZXYgPSBuZXcgdTE2KDMyNzY4KSwgaGVhZCA9IG5ldyB1MTYobXNrXzEgKyAxKTtcbiAgICAgICAgdmFyIGJzMV8xID0gTWF0aC5jZWlsKHBsdmwgLyAzKSwgYnMyXzEgPSAyICogYnMxXzE7XG4gICAgICAgIHZhciBoc2ggPSBmdW5jdGlvbiAoaSkgeyByZXR1cm4gKGRhdFtpXSBeIChkYXRbaSArIDFdIDw8IGJzMV8xKSBeIChkYXRbaSArIDJdIDw8IGJzMl8xKSkgJiBtc2tfMTsgfTtcbiAgICAgICAgLy8gMjQ1NzYgaXMgYW4gYXJiaXRyYXJ5IG51bWJlciBvZiBtYXhpbXVtIHN5bWJvbHMgcGVyIGJsb2NrXG4gICAgICAgIC8vIDQyNCBidWZmZXIgZm9yIGxhc3QgYmxvY2tcbiAgICAgICAgdmFyIHN5bXMgPSBuZXcgdTMyKDI1MDAwKTtcbiAgICAgICAgLy8gbGVuZ3RoL2xpdGVyYWwgZnJlcSAgIGRpc3RhbmNlIGZyZXFcbiAgICAgICAgdmFyIGxmID0gbmV3IHUxNigyODgpLCBkZiA9IG5ldyB1MTYoMzIpO1xuICAgICAgICAvLyAgbC9sY250ICBleGJpdHMgIGluZGV4ICBsL2xpbmQgIHdhaXRkeCAgYml0cG9zXG4gICAgICAgIHZhciBsY18xID0gMCwgZWIgPSAwLCBpID0gMCwgbGkgPSAwLCB3aSA9IDAsIGJzID0gMDtcbiAgICAgICAgZm9yICg7IGkgPCBzOyArK2kpIHtcbiAgICAgICAgICAgIC8vIGhhc2ggdmFsdWVcbiAgICAgICAgICAgIHZhciBodiA9IGhzaChpKTtcbiAgICAgICAgICAgIC8vIGluZGV4IG1vZCAzMjc2OFxuICAgICAgICAgICAgdmFyIGltb2QgPSBpICYgMzI3Njc7XG4gICAgICAgICAgICAvLyBwcmV2aW91cyBpbmRleCB3aXRoIHRoaXMgdmFsdWVcbiAgICAgICAgICAgIHZhciBwaW1vZCA9IGhlYWRbaHZdO1xuICAgICAgICAgICAgcHJldltpbW9kXSA9IHBpbW9kO1xuICAgICAgICAgICAgaGVhZFtodl0gPSBpbW9kO1xuICAgICAgICAgICAgLy8gV2UgYWx3YXlzIHNob3VsZCBtb2RpZnkgaGVhZCBhbmQgcHJldiwgYnV0IG9ubHkgYWRkIHN5bWJvbHMgaWZcbiAgICAgICAgICAgIC8vIHRoaXMgZGF0YSBpcyBub3QgeWV0IHByb2Nlc3NlZCAoXCJ3YWl0XCIgZm9yIHdhaXQgaW5kZXgpXG4gICAgICAgICAgICBpZiAod2kgPD0gaSkge1xuICAgICAgICAgICAgICAgIC8vIGJ5dGVzIHJlbWFpbmluZ1xuICAgICAgICAgICAgICAgIHZhciByZW0gPSBzIC0gaTtcbiAgICAgICAgICAgICAgICBpZiAoKGxjXzEgPiA3MDAwIHx8IGxpID4gMjQ1NzYpICYmIHJlbSA+IDQyMykge1xuICAgICAgICAgICAgICAgICAgICBwb3MgPSB3YmxrKGRhdCwgdywgMCwgc3ltcywgbGYsIGRmLCBlYiwgbGksIGJzLCBpIC0gYnMsIHBvcyk7XG4gICAgICAgICAgICAgICAgICAgIGxpID0gbGNfMSA9IGViID0gMCwgYnMgPSBpO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IDI4NjsgKytqKVxuICAgICAgICAgICAgICAgICAgICAgICAgbGZbal0gPSAwO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IDMwOyArK2opXG4gICAgICAgICAgICAgICAgICAgICAgICBkZltqXSA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vICBsZW4gICAgZGlzdCAgIGNoYWluXG4gICAgICAgICAgICAgICAgdmFyIGwgPSAyLCBkID0gMCwgY2hfMSA9IGMsIGRpZiA9IChpbW9kIC0gcGltb2QpICYgMzI3Njc7XG4gICAgICAgICAgICAgICAgaWYgKHJlbSA+IDIgJiYgaHYgPT0gaHNoKGkgLSBkaWYpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtYXhuID0gTWF0aC5taW4obiwgcmVtKSAtIDE7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtYXhkID0gTWF0aC5taW4oMzI3NjcsIGkpO1xuICAgICAgICAgICAgICAgICAgICAvLyBtYXggcG9zc2libGUgbGVuZ3RoXG4gICAgICAgICAgICAgICAgICAgIC8vIG5vdCBjYXBwZWQgYXQgZGlmIGJlY2F1c2UgZGVjb21wcmVzc29ycyBpbXBsZW1lbnQgXCJyb2xsaW5nXCIgaW5kZXggcG9wdWxhdGlvblxuICAgICAgICAgICAgICAgICAgICB2YXIgbWwgPSBNYXRoLm1pbigyNTgsIHJlbSk7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChkaWYgPD0gbWF4ZCAmJiAtLWNoXzEgJiYgaW1vZCAhPSBwaW1vZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdFtpICsgbF0gPT0gZGF0W2kgKyBsIC0gZGlmXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBubCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICg7IG5sIDwgbWwgJiYgZGF0W2kgKyBubF0gPT0gZGF0W2kgKyBubCAtIGRpZl07ICsrbmwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobmwgPiBsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSBubCwgZCA9IGRpZjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYnJlYWsgb3V0IGVhcmx5IHdoZW4gd2UgcmVhY2ggXCJuaWNlXCIgKHdlIGFyZSBzYXRpc2ZpZWQgZW5vdWdoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobmwgPiBtYXhuKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG5vdywgZmluZCB0aGUgcmFyZXN0IDItYnl0ZSBzZXF1ZW5jZSB3aXRoaW4gdGhpc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBsZW5ndGggb2YgbGl0ZXJhbHMgYW5kIHNlYXJjaCBmb3IgdGhhdCBpbnN0ZWFkLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBNdWNoIGZhc3RlciB0aGFuIGp1c3QgdXNpbmcgdGhlIHN0YXJ0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtbWQgPSBNYXRoLm1pbihkaWYsIG5sIC0gMik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtZCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbW1kOyArK2opIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0aSA9IChpIC0gZGlmICsgaiArIDMyNzY4KSAmIDMyNzY3O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHB0aSA9IHByZXZbdGldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNkID0gKHRpIC0gcHRpICsgMzI3NjgpICYgMzI3Njc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2QgPiBtZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZCA9IGNkLCBwaW1vZCA9IHRpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2hlY2sgdGhlIHByZXZpb3VzIG1hdGNoXG4gICAgICAgICAgICAgICAgICAgICAgICBpbW9kID0gcGltb2QsIHBpbW9kID0gcHJldltpbW9kXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpZiArPSAoaW1vZCAtIHBpbW9kICsgMzI3NjgpICYgMzI3Njc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gZCB3aWxsIGJlIG5vbnplcm8gb25seSB3aGVuIGEgbWF0Y2ggd2FzIGZvdW5kXG4gICAgICAgICAgICAgICAgaWYgKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gc3RvcmUgYm90aCBkaXN0IGFuZCBsZW4gZGF0YSBpbiBvbmUgVWludDMyXG4gICAgICAgICAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSB0aGlzIGlzIHJlY29nbml6ZWQgYXMgYSBsZW4vZGlzdCB3aXRoIDI4dGggYml0ICgyXjI4KVxuICAgICAgICAgICAgICAgICAgICBzeW1zW2xpKytdID0gMjY4NDM1NDU2IHwgKHJldmZsW2xdIDw8IDE4KSB8IHJldmZkW2RdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbGluID0gcmV2ZmxbbF0gJiAzMSwgZGluID0gcmV2ZmRbZF0gJiAzMTtcbiAgICAgICAgICAgICAgICAgICAgZWIgKz0gZmxlYltsaW5dICsgZmRlYltkaW5dO1xuICAgICAgICAgICAgICAgICAgICArK2xmWzI1NyArIGxpbl07XG4gICAgICAgICAgICAgICAgICAgICsrZGZbZGluXTtcbiAgICAgICAgICAgICAgICAgICAgd2kgPSBpICsgbDtcbiAgICAgICAgICAgICAgICAgICAgKytsY18xO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc3ltc1tsaSsrXSA9IGRhdFtpXTtcbiAgICAgICAgICAgICAgICAgICAgKytsZltkYXRbaV1dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBwb3MgPSB3YmxrKGRhdCwgdywgbHN0LCBzeW1zLCBsZiwgZGYsIGViLCBsaSwgYnMsIGkgLSBicywgcG9zKTtcbiAgICAgICAgLy8gdGhpcyBpcyB0aGUgZWFzaWVzdCB3YXkgdG8gYXZvaWQgbmVlZGluZyB0byBtYWludGFpbiBzdGF0ZVxuICAgICAgICBpZiAoIWxzdClcbiAgICAgICAgICAgIHBvcyA9IHdmYmxrKHcsIHBvcywgZXQpO1xuICAgIH1cbiAgICByZXR1cm4gc2xjKG8sIDAsIHByZSArIHNoZnQocG9zKSArIHBvc3QpO1xufTtcbi8vIENSQzMyIHRhYmxlXG52YXIgY3JjdCA9IC8qI19fUFVSRV9fKi8gKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgdCA9IG5ldyB1MzIoMjU2KTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IDI1NjsgKytpKSB7XG4gICAgICAgIHZhciBjID0gaSwgayA9IDk7XG4gICAgICAgIHdoaWxlICgtLWspXG4gICAgICAgICAgICBjID0gKChjICYgMSkgJiYgMHhFREI4ODMyMCkgXiAoYyA+Pj4gMSk7XG4gICAgICAgIHRbaV0gPSBjO1xuICAgIH1cbiAgICByZXR1cm4gdDtcbn0pKCk7XG4vLyBDUkMzMlxudmFyIGNyYyA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgYyA9IDB4RkZGRkZGRkY7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcDogZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgIC8vIGNsb3N1cmVzIGhhdmUgYXdmdWwgcGVyZm9ybWFuY2VcbiAgICAgICAgICAgIHZhciBjciA9IGM7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGQubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgY3IgPSBjcmN0WyhjciAmIDI1NSkgXiBkW2ldXSBeIChjciA+Pj4gOCk7XG4gICAgICAgICAgICBjID0gY3I7XG4gICAgICAgIH0sXG4gICAgICAgIGQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGMgXiAweEZGRkZGRkZGOyB9XG4gICAgfTtcbn07XG4vLyBBbGRlcjMyXG52YXIgYWRsZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGEgPSAxLCBiID0gMDtcbiAgICByZXR1cm4ge1xuICAgICAgICBwOiBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgLy8gY2xvc3VyZXMgaGF2ZSBhd2Z1bCBwZXJmb3JtYW5jZVxuICAgICAgICAgICAgdmFyIG4gPSBhLCBtID0gYjtcbiAgICAgICAgICAgIHZhciBsID0gZC5sZW5ndGg7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSAhPSBsOykge1xuICAgICAgICAgICAgICAgIHZhciBlID0gTWF0aC5taW4oaSArIDU1NTIsIGwpO1xuICAgICAgICAgICAgICAgIGZvciAoOyBpIDwgZTsgKytpKVxuICAgICAgICAgICAgICAgICAgICBuICs9IGRbaV0sIG0gKz0gbjtcbiAgICAgICAgICAgICAgICBuICU9IDY1NTIxLCBtICU9IDY1NTIxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYSA9IG4sIGIgPSBtO1xuICAgICAgICB9LFxuICAgICAgICBkOiBmdW5jdGlvbiAoKSB7IHJldHVybiAoKGEgPj4+IDgpIDw8IDE2IHwgKGIgJiAyNTUpIDw8IDggfCAoYiA+Pj4gOCkpICsgKChhICYgMjU1KSA8PCAyMykgKiAyOyB9XG4gICAgfTtcbn07XG47XG4vLyBkZWZsYXRlIHdpdGggb3B0c1xudmFyIGRvcHQgPSBmdW5jdGlvbiAoZGF0LCBvcHQsIHByZSwgcG9zdCwgc3QpIHtcbiAgICByZXR1cm4gZGZsdChkYXQsIG9wdC5sZXZlbCA9PSBudWxsID8gNiA6IG9wdC5sZXZlbCwgb3B0Lm1lbSA9PSBudWxsID8gTWF0aC5jZWlsKE1hdGgubWF4KDgsIE1hdGgubWluKDEzLCBNYXRoLmxvZyhkYXQubGVuZ3RoKSkpICogMS41KSA6ICgxMiArIG9wdC5tZW0pLCBwcmUsIHBvc3QsICFzdCk7XG59O1xuLy8gV2FsbWFydCBvYmplY3Qgc3ByZWFkXG52YXIgbXJnID0gZnVuY3Rpb24gKGEsIGIpIHtcbiAgICB2YXIgbyA9IHt9O1xuICAgIGZvciAodmFyIGsgaW4gYSlcbiAgICAgICAgb1trXSA9IGFba107XG4gICAgZm9yICh2YXIgayBpbiBiKVxuICAgICAgICBvW2tdID0gYltrXTtcbiAgICByZXR1cm4gbztcbn07XG4vLyB3b3JrZXIgY2xvbmVcbi8vIFRoaXMgaXMgcG9zc2libHkgdGhlIGNyYXppZXN0IHBhcnQgb2YgdGhlIGVudGlyZSBjb2RlYmFzZSwgZGVzcGl0ZSBob3cgc2ltcGxlIGl0IG1heSBzZWVtLlxuLy8gVGhlIG9ubHkgcGFyYW1ldGVyIHRvIHRoaXMgZnVuY3Rpb24gaXMgYSBjbG9zdXJlIHRoYXQgcmV0dXJucyBhbiBhcnJheSBvZiB2YXJpYWJsZXMgb3V0c2lkZSBvZiB0aGUgZnVuY3Rpb24gc2NvcGUuXG4vLyBXZSdyZSBnb2luZyB0byB0cnkgdG8gZmlndXJlIG91dCB0aGUgdmFyaWFibGUgbmFtZXMgdXNlZCBpbiB0aGUgY2xvc3VyZSBhcyBzdHJpbmdzIGJlY2F1c2UgdGhhdCBpcyBjcnVjaWFsIGZvciB3b3JrZXJpemF0aW9uLlxuLy8gV2Ugd2lsbCByZXR1cm4gYW4gb2JqZWN0IG1hcHBpbmcgb2YgdHJ1ZSB2YXJpYWJsZSBuYW1lIHRvIHZhbHVlIChiYXNpY2FsbHksIHRoZSBjdXJyZW50IHNjb3BlIGFzIGEgSlMgb2JqZWN0KS5cbi8vIFRoZSByZWFzb24gd2UgY2FuJ3QganVzdCB1c2UgdGhlIG9yaWdpbmFsIHZhcmlhYmxlIG5hbWVzIGlzIG1pbmlmaWVycyBtYW5nbGluZyB0aGUgdG9wbGV2ZWwgc2NvcGUuXG4vLyBUaGlzIHRvb2sgbWUgdGhyZWUgd2Vla3MgdG8gZmlndXJlIG91dCBob3cgdG8gZG8uXG52YXIgd2NsbiA9IGZ1bmN0aW9uIChmbiwgZm5TdHIsIHRkKSB7XG4gICAgdmFyIGR0ID0gZm4oKTtcbiAgICB2YXIgc3QgPSBmbi50b1N0cmluZygpO1xuICAgIHZhciBrcyA9IHN0LnNsaWNlKHN0LmluZGV4T2YoJ1snKSArIDEsIHN0Lmxhc3RJbmRleE9mKCddJykpLnJlcGxhY2UoLyAvZywgJycpLnNwbGl0KCcsJyk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkdC5sZW5ndGg7ICsraSkge1xuICAgICAgICB2YXIgdiA9IGR0W2ldLCBrID0ga3NbaV07XG4gICAgICAgIGlmICh0eXBlb2YgdiA9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBmblN0ciArPSAnOycgKyBrICsgJz0nO1xuICAgICAgICAgICAgdmFyIHN0XzEgPSB2LnRvU3RyaW5nKCk7XG4gICAgICAgICAgICBpZiAodi5wcm90b3R5cGUpIHtcbiAgICAgICAgICAgICAgICAvLyBmb3IgZ2xvYmFsIG9iamVjdHNcbiAgICAgICAgICAgICAgICBpZiAoc3RfMS5pbmRleE9mKCdbbmF0aXZlIGNvZGVdJykgIT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNwSW5kID0gc3RfMS5pbmRleE9mKCcgJywgOCkgKyAxO1xuICAgICAgICAgICAgICAgICAgICBmblN0ciArPSBzdF8xLnNsaWNlKHNwSW5kLCBzdF8xLmluZGV4T2YoJygnLCBzcEluZCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZm5TdHIgKz0gc3RfMTtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgdCBpbiB2LnByb3RvdHlwZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGZuU3RyICs9ICc7JyArIGsgKyAnLnByb3RvdHlwZS4nICsgdCArICc9JyArIHYucHJvdG90eXBlW3RdLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIGZuU3RyICs9IHN0XzE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgdGRba10gPSB2O1xuICAgIH1cbiAgICByZXR1cm4gW2ZuU3RyLCB0ZF07XG59O1xudmFyIGNoID0gW107XG4vLyBjbG9uZSBidWZzXG52YXIgY2JmcyA9IGZ1bmN0aW9uICh2KSB7XG4gICAgdmFyIHRsID0gW107XG4gICAgZm9yICh2YXIgayBpbiB2KSB7XG4gICAgICAgIGlmICh2W2tdIGluc3RhbmNlb2YgdTggfHwgdltrXSBpbnN0YW5jZW9mIHUxNiB8fCB2W2tdIGluc3RhbmNlb2YgdTMyKVxuICAgICAgICAgICAgdGwucHVzaCgodltrXSA9IG5ldyB2W2tdLmNvbnN0cnVjdG9yKHZba10pKS5idWZmZXIpO1xuICAgIH1cbiAgICByZXR1cm4gdGw7XG59O1xuLy8gdXNlIGEgd29ya2VyIHRvIGV4ZWN1dGUgY29kZVxudmFyIHdya3IgPSBmdW5jdGlvbiAoZm5zLCBpbml0LCBpZCwgY2IpIHtcbiAgICB2YXIgX2E7XG4gICAgaWYgKCFjaFtpZF0pIHtcbiAgICAgICAgdmFyIGZuU3RyID0gJycsIHRkXzEgPSB7fSwgbSA9IGZucy5sZW5ndGggLSAxO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG07ICsraSlcbiAgICAgICAgICAgIF9hID0gd2NsbihmbnNbaV0sIGZuU3RyLCB0ZF8xKSwgZm5TdHIgPSBfYVswXSwgdGRfMSA9IF9hWzFdO1xuICAgICAgICBjaFtpZF0gPSB3Y2xuKGZuc1ttXSwgZm5TdHIsIHRkXzEpO1xuICAgIH1cbiAgICB2YXIgdGQgPSBtcmcoe30sIGNoW2lkXVsxXSk7XG4gICAgcmV0dXJuIHdrKGNoW2lkXVswXSArICc7b25tZXNzYWdlPWZ1bmN0aW9uKGUpe2Zvcih2YXIgayBpbiBlLmRhdGEpc2VsZltrXT1lLmRhdGFba107b25tZXNzYWdlPScgKyBpbml0LnRvU3RyaW5nKCkgKyAnfScsIGlkLCB0ZCwgY2Jmcyh0ZCksIGNiKTtcbn07XG4vLyBiYXNlIGFzeW5jIGluZmxhdGUgZm5cbnZhciBiSW5mbHQgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBbdTgsIHUxNiwgdTMyLCBmbGViLCBmZGViLCBjbGltLCBmbCwgZmQsIGZscm0sIGZkcm0sIHJldiwgaE1hcCwgbWF4LCBiaXRzLCBiaXRzMTYsIHNoZnQsIHNsYywgaW5mbHQsIGluZmxhdGVTeW5jLCBwYmYsIGd1OF07IH07XG52YXIgYkRmbHQgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBbdTgsIHUxNiwgdTMyLCBmbGViLCBmZGViLCBjbGltLCByZXZmbCwgcmV2ZmQsIGZsbSwgZmx0LCBmZG0sIGZkdCwgcmV2LCBkZW8sIGV0LCBoTWFwLCB3Yml0cywgd2JpdHMxNiwgaFRyZWUsIGxuLCBsYywgY2xlbiwgd2ZibGssIHdibGssIHNoZnQsIHNsYywgZGZsdCwgZG9wdCwgZGVmbGF0ZVN5bmMsIHBiZl07IH07XG4vLyBnemlwIGV4dHJhXG52YXIgZ3plID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gW2d6aCwgZ3pobCwgd2J5dGVzLCBjcmMsIGNyY3RdOyB9O1xuLy8gZ3VuemlwIGV4dHJhXG52YXIgZ3V6ZSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIFtnenMsIGd6bF07IH07XG4vLyB6bGliIGV4dHJhXG52YXIgemxlID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gW3psaCwgd2J5dGVzLCBhZGxlcl07IH07XG4vLyB1bnpsaWIgZXh0cmFcbnZhciB6dWxlID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gW3psdl07IH07XG4vLyBwb3N0IGJ1ZlxudmFyIHBiZiA9IGZ1bmN0aW9uIChtc2cpIHsgcmV0dXJuIHBvc3RNZXNzYWdlKG1zZywgW21zZy5idWZmZXJdKTsgfTtcbi8vIGdldCB1OFxudmFyIGd1OCA9IGZ1bmN0aW9uIChvKSB7IHJldHVybiBvICYmIG8uc2l6ZSAmJiBuZXcgdTgoby5zaXplKTsgfTtcbi8vIGFzeW5jIGhlbHBlclxudmFyIGNiaWZ5ID0gZnVuY3Rpb24gKGRhdCwgb3B0cywgZm5zLCBpbml0LCBpZCwgY2IpIHtcbiAgICB2YXIgdyA9IHdya3IoZm5zLCBpbml0LCBpZCwgZnVuY3Rpb24gKGVyciwgZGF0KSB7XG4gICAgICAgIHcudGVybWluYXRlKCk7XG4gICAgICAgIGNiKGVyciwgZGF0KTtcbiAgICB9KTtcbiAgICBpZiAoIW9wdHMuY29uc3VtZSlcbiAgICAgICAgZGF0ID0gbmV3IHU4KGRhdCk7XG4gICAgdy5wb3N0TWVzc2FnZShbZGF0LCBvcHRzXSwgW2RhdC5idWZmZXJdKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkgeyB3LnRlcm1pbmF0ZSgpOyB9O1xufTtcbi8vIGF1dG8gc3RyZWFtXG52YXIgYXN0cm0gPSBmdW5jdGlvbiAoc3RybSkge1xuICAgIHN0cm0ub25kYXRhID0gZnVuY3Rpb24gKGRhdCwgZmluYWwpIHsgcmV0dXJuIHBvc3RNZXNzYWdlKFtkYXQsIGZpbmFsXSwgW2RhdC5idWZmZXJdKTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGV2KSB7IHJldHVybiBzdHJtLnB1c2goZXYuZGF0YVswXSwgZXYuZGF0YVsxXSk7IH07XG59O1xuLy8gYXN5bmMgc3RyZWFtIGF0dGFjaFxudmFyIGFzdHJtaWZ5ID0gZnVuY3Rpb24gKGZucywgc3RybSwgb3B0cywgaW5pdCwgaWQpIHtcbiAgICB2YXIgdDtcbiAgICB2YXIgdyA9IHdya3IoZm5zLCBpbml0LCBpZCwgZnVuY3Rpb24gKGVyciwgZGF0KSB7XG4gICAgICAgIGlmIChlcnIpXG4gICAgICAgICAgICB3LnRlcm1pbmF0ZSgpLCBzdHJtLm9uZGF0YS5jYWxsKHN0cm0sIGVycik7XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKGRhdFsxXSlcbiAgICAgICAgICAgICAgICB3LnRlcm1pbmF0ZSgpO1xuICAgICAgICAgICAgc3RybS5vbmRhdGEuY2FsbChzdHJtLCBlcnIsIGRhdFswXSwgZGF0WzFdKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHcucG9zdE1lc3NhZ2Uob3B0cyk7XG4gICAgc3RybS5wdXNoID0gZnVuY3Rpb24gKGQsIGYpIHtcbiAgICAgICAgaWYgKHQpXG4gICAgICAgICAgICB0aHJvdyAnc3RyZWFtIGZpbmlzaGVkJztcbiAgICAgICAgaWYgKCFzdHJtLm9uZGF0YSlcbiAgICAgICAgICAgIHRocm93ICdubyBzdHJlYW0gaGFuZGxlcic7XG4gICAgICAgIHcucG9zdE1lc3NhZ2UoW2QsIHQgPSBmXSwgW2QuYnVmZmVyXSk7XG4gICAgfTtcbiAgICBzdHJtLnRlcm1pbmF0ZSA9IGZ1bmN0aW9uICgpIHsgdy50ZXJtaW5hdGUoKTsgfTtcbn07XG4vLyByZWFkIDIgYnl0ZXNcbnZhciBiMiA9IGZ1bmN0aW9uIChkLCBiKSB7IHJldHVybiBkW2JdIHwgKGRbYiArIDFdIDw8IDgpOyB9O1xuLy8gcmVhZCA0IGJ5dGVzXG52YXIgYjQgPSBmdW5jdGlvbiAoZCwgYikgeyByZXR1cm4gKGRbYl0gfCAoZFtiICsgMV0gPDwgOCkgfCAoZFtiICsgMl0gPDwgMTYpKSArIChkW2IgKyAzXSA8PCAyMykgKiAyOyB9O1xuLy8gd3JpdGUgYnl0ZXNcbnZhciB3Ynl0ZXMgPSBmdW5jdGlvbiAoZCwgYiwgdikge1xuICAgIGZvciAoOyB2OyArK2IpXG4gICAgICAgIGRbYl0gPSB2LCB2ID4+Pj0gODtcbn07XG4vLyBnemlwIGhlYWRlclxudmFyIGd6aCA9IGZ1bmN0aW9uIChjLCBvKSB7XG4gICAgdmFyIGZuID0gby5maWxlbmFtZTtcbiAgICBjWzBdID0gMzEsIGNbMV0gPSAxMzksIGNbMl0gPSA4LCBjWzhdID0gby5sZXZlbCA8IDIgPyA0IDogby5sZXZlbCA9PSA5ID8gMiA6IDAsIGNbOV0gPSAzOyAvLyBhc3N1bWUgVW5peFxuICAgIGlmIChvLm10aW1lICE9IDApXG4gICAgICAgIHdieXRlcyhjLCA0LCBNYXRoLmZsb29yKG5ldyBEYXRlKG8ubXRpbWUgfHwgRGF0ZS5ub3coKSkgLyAxMDAwKSk7XG4gICAgaWYgKGZuKSB7XG4gICAgICAgIGNbM10gPSA4O1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8PSBmbi5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgIGNbaSArIDEwXSA9IGZuLmNoYXJDb2RlQXQoaSk7XG4gICAgfVxufTtcbi8vIGd6aXAgZm9vdGVyOiAtOCB0byAtNCA9IENSQywgLTQgdG8gLTAgaXMgbGVuZ3RoXG4vLyBnemlwIHN0YXJ0XG52YXIgZ3pzID0gZnVuY3Rpb24gKGQpIHtcbiAgICBpZiAoZFswXSAhPSAzMSB8fCBkWzFdICE9IDEzOSB8fCBkWzJdICE9IDgpXG4gICAgICAgIHRocm93ICdpbnZhbGlkIGd6aXAgZGF0YSc7XG4gICAgdmFyIGZsZyA9IGRbM107XG4gICAgdmFyIHN0ID0gMTA7XG4gICAgaWYgKGZsZyAmIDQpXG4gICAgICAgIHN0ICs9IGRbMTBdIHwgKGRbMTFdIDw8IDgpICsgMjtcbiAgICBmb3IgKHZhciB6cyA9IChmbGcgPj4gMyAmIDEpICsgKGZsZyA+PiA0ICYgMSk7IHpzID4gMDsgenMgLT0gIWRbc3QrK10pXG4gICAgICAgIDtcbiAgICByZXR1cm4gc3QgKyAoZmxnICYgMik7XG59O1xuLy8gZ3ppcCBsZW5ndGhcbnZhciBnemwgPSBmdW5jdGlvbiAoZCkge1xuICAgIHZhciBsID0gZC5sZW5ndGg7XG4gICAgcmV0dXJuIChkW2wgLSA0XSB8IGRbbCAtIDNdIDw8IDggfCBkW2wgLSAyXSA8PCAxNikgKyAoMiAqIChkW2wgLSAxXSA8PCAyMykpO1xufTtcbi8vIGd6aXAgaGVhZGVyIGxlbmd0aFxudmFyIGd6aGwgPSBmdW5jdGlvbiAobykgeyByZXR1cm4gMTAgKyAoKG8uZmlsZW5hbWUgJiYgKG8uZmlsZW5hbWUubGVuZ3RoICsgMSkpIHx8IDApOyB9O1xuLy8gemxpYiBoZWFkZXJcbnZhciB6bGggPSBmdW5jdGlvbiAoYywgbykge1xuICAgIHZhciBsdiA9IG8ubGV2ZWwsIGZsID0gbHYgPT0gMCA/IDAgOiBsdiA8IDYgPyAxIDogbHYgPT0gOSA/IDMgOiAyO1xuICAgIGNbMF0gPSAxMjAsIGNbMV0gPSAoZmwgPDwgNikgfCAoZmwgPyAoMzIgLSAyICogZmwpIDogMSk7XG59O1xuLy8gemxpYiB2YWxpZFxudmFyIHpsdiA9IGZ1bmN0aW9uIChkKSB7XG4gICAgaWYgKChkWzBdICYgMTUpICE9IDggfHwgKGRbMF0gPj4+IDQpID4gNyB8fCAoKGRbMF0gPDwgOCB8IGRbMV0pICUgMzEpKVxuICAgICAgICB0aHJvdyAnaW52YWxpZCB6bGliIGRhdGEnO1xuICAgIGlmIChkWzFdICYgMzIpXG4gICAgICAgIHRocm93ICdpbnZhbGlkIHpsaWIgZGF0YTogcHJlc2V0IGRpY3Rpb25hcmllcyBub3Qgc3VwcG9ydGVkJztcbn07XG5mdW5jdGlvbiBBc3luY0NtcFN0cm0ob3B0cywgY2IpIHtcbiAgICBpZiAoIWNiICYmIHR5cGVvZiBvcHRzID09ICdmdW5jdGlvbicpXG4gICAgICAgIGNiID0gb3B0cywgb3B0cyA9IHt9O1xuICAgIHRoaXMub25kYXRhID0gY2I7XG4gICAgcmV0dXJuIG9wdHM7XG59XG4vLyB6bGliIGZvb3RlcjogLTQgdG8gLTAgaXMgQWRsZXIzMlxuLyoqXG4gKiBTdHJlYW1pbmcgREVGTEFURSBjb21wcmVzc2lvblxuICovXG52YXIgRGVmbGF0ZSA9IC8qI19fUFVSRV9fKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBEZWZsYXRlKG9wdHMsIGNiKSB7XG4gICAgICAgIGlmICghY2IgJiYgdHlwZW9mIG9wdHMgPT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgICAgIGNiID0gb3B0cywgb3B0cyA9IHt9O1xuICAgICAgICB0aGlzLm9uZGF0YSA9IGNiO1xuICAgICAgICB0aGlzLm8gPSBvcHRzIHx8IHt9O1xuICAgIH1cbiAgICBEZWZsYXRlLnByb3RvdHlwZS5wID0gZnVuY3Rpb24gKGMsIGYpIHtcbiAgICAgICAgdGhpcy5vbmRhdGEoZG9wdChjLCB0aGlzLm8sIDAsIDAsICFmKSwgZik7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBQdXNoZXMgYSBjaHVuayB0byBiZSBkZWZsYXRlZFxuICAgICAqIEBwYXJhbSBjaHVuayBUaGUgY2h1bmsgdG8gcHVzaFxuICAgICAqIEBwYXJhbSBmaW5hbCBXaGV0aGVyIHRoaXMgaXMgdGhlIGxhc3QgY2h1bmtcbiAgICAgKi9cbiAgICBEZWZsYXRlLnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24gKGNodW5rLCBmaW5hbCkge1xuICAgICAgICBpZiAodGhpcy5kKVxuICAgICAgICAgICAgdGhyb3cgJ3N0cmVhbSBmaW5pc2hlZCc7XG4gICAgICAgIGlmICghdGhpcy5vbmRhdGEpXG4gICAgICAgICAgICB0aHJvdyAnbm8gc3RyZWFtIGhhbmRsZXInO1xuICAgICAgICB0aGlzLmQgPSBmaW5hbDtcbiAgICAgICAgdGhpcy5wKGNodW5rLCBmaW5hbCB8fCBmYWxzZSk7XG4gICAgfTtcbiAgICByZXR1cm4gRGVmbGF0ZTtcbn0oKSk7XG5leHBvcnQgeyBEZWZsYXRlIH07XG4vKipcbiAqIEFzeW5jaHJvbm91cyBzdHJlYW1pbmcgREVGTEFURSBjb21wcmVzc2lvblxuICovXG52YXIgQXN5bmNEZWZsYXRlID0gLyojX19QVVJFX18qLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEFzeW5jRGVmbGF0ZShvcHRzLCBjYikge1xuICAgICAgICBhc3RybWlmeShbXG4gICAgICAgICAgICBiRGZsdCxcbiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHsgcmV0dXJuIFthc3RybSwgRGVmbGF0ZV07IH1cbiAgICAgICAgXSwgdGhpcywgQXN5bmNDbXBTdHJtLmNhbGwodGhpcywgb3B0cywgY2IpLCBmdW5jdGlvbiAoZXYpIHtcbiAgICAgICAgICAgIHZhciBzdHJtID0gbmV3IERlZmxhdGUoZXYuZGF0YSk7XG4gICAgICAgICAgICBvbm1lc3NhZ2UgPSBhc3RybShzdHJtKTtcbiAgICAgICAgfSwgNik7XG4gICAgfVxuICAgIHJldHVybiBBc3luY0RlZmxhdGU7XG59KCkpO1xuZXhwb3J0IHsgQXN5bmNEZWZsYXRlIH07XG5leHBvcnQgZnVuY3Rpb24gZGVmbGF0ZShkYXRhLCBvcHRzLCBjYikge1xuICAgIGlmICghY2IpXG4gICAgICAgIGNiID0gb3B0cywgb3B0cyA9IHt9O1xuICAgIGlmICh0eXBlb2YgY2IgIT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgdGhyb3cgJ25vIGNhbGxiYWNrJztcbiAgICByZXR1cm4gY2JpZnkoZGF0YSwgb3B0cywgW1xuICAgICAgICBiRGZsdCxcbiAgICBdLCBmdW5jdGlvbiAoZXYpIHsgcmV0dXJuIHBiZihkZWZsYXRlU3luYyhldi5kYXRhWzBdLCBldi5kYXRhWzFdKSk7IH0sIDAsIGNiKTtcbn1cbi8qKlxuICogQ29tcHJlc3NlcyBkYXRhIHdpdGggREVGTEFURSB3aXRob3V0IGFueSB3cmFwcGVyXG4gKiBAcGFyYW0gZGF0YSBUaGUgZGF0YSB0byBjb21wcmVzc1xuICogQHBhcmFtIG9wdHMgVGhlIGNvbXByZXNzaW9uIG9wdGlvbnNcbiAqIEByZXR1cm5zIFRoZSBkZWZsYXRlZCB2ZXJzaW9uIG9mIHRoZSBkYXRhXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWZsYXRlU3luYyhkYXRhLCBvcHRzKSB7XG4gICAgaWYgKG9wdHMgPT09IHZvaWQgMCkgeyBvcHRzID0ge307IH1cbiAgICByZXR1cm4gZG9wdChkYXRhLCBvcHRzLCAwLCAwKTtcbn1cbi8qKlxuICogU3RyZWFtaW5nIERFRkxBVEUgZGVjb21wcmVzc2lvblxuICovXG52YXIgSW5mbGF0ZSA9IC8qI19fUFVSRV9fKi8gKGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGluZmxhdGlvbiBzdHJlYW1cbiAgICAgKiBAcGFyYW0gY2IgVGhlIGNhbGxiYWNrIHRvIGNhbGwgd2hlbmV2ZXIgZGF0YSBpcyBpbmZsYXRlZFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEluZmxhdGUoY2IpIHtcbiAgICAgICAgdGhpcy5zID0ge307XG4gICAgICAgIHRoaXMucCA9IG5ldyB1OCgwKTtcbiAgICAgICAgdGhpcy5vbmRhdGEgPSBjYjtcbiAgICB9XG4gICAgSW5mbGF0ZS5wcm90b3R5cGUuZSA9IGZ1bmN0aW9uIChjKSB7XG4gICAgICAgIGlmICh0aGlzLmQpXG4gICAgICAgICAgICB0aHJvdyAnc3RyZWFtIGZpbmlzaGVkJztcbiAgICAgICAgaWYgKCF0aGlzLm9uZGF0YSlcbiAgICAgICAgICAgIHRocm93ICdubyBzdHJlYW0gaGFuZGxlcic7XG4gICAgICAgIHZhciBsID0gdGhpcy5wLmxlbmd0aDtcbiAgICAgICAgdmFyIG4gPSBuZXcgdTgobCArIGMubGVuZ3RoKTtcbiAgICAgICAgbi5zZXQodGhpcy5wKSwgbi5zZXQoYywgbCksIHRoaXMucCA9IG47XG4gICAgfTtcbiAgICBJbmZsYXRlLnByb3RvdHlwZS5jID0gZnVuY3Rpb24gKGZpbmFsKSB7XG4gICAgICAgIHRoaXMuZCA9IHRoaXMucy5pID0gZmluYWwgfHwgZmFsc2U7XG4gICAgICAgIHZhciBidHMgPSB0aGlzLnMuYjtcbiAgICAgICAgdmFyIGR0ID0gaW5mbHQodGhpcy5wLCB0aGlzLm8sIHRoaXMucyk7XG4gICAgICAgIHRoaXMub25kYXRhKHNsYyhkdCwgYnRzLCB0aGlzLnMuYiksIHRoaXMuZCk7XG4gICAgICAgIHRoaXMubyA9IHNsYyhkdCwgdGhpcy5zLmIgLSAzMjc2OCksIHRoaXMucy5iID0gdGhpcy5vLmxlbmd0aDtcbiAgICAgICAgdGhpcy5wID0gc2xjKHRoaXMucCwgKHRoaXMucy5wIC8gOCkgPj4gMCksIHRoaXMucy5wICY9IDc7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBQdXNoZXMgYSBjaHVuayB0byBiZSBpbmZsYXRlZFxuICAgICAqIEBwYXJhbSBjaHVuayBUaGUgY2h1bmsgdG8gcHVzaFxuICAgICAqIEBwYXJhbSBmaW5hbCBXaGV0aGVyIHRoaXMgaXMgdGhlIGZpbmFsIGNodW5rXG4gICAgICovXG4gICAgSW5mbGF0ZS5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uIChjaHVuaywgZmluYWwpIHtcbiAgICAgICAgdGhpcy5lKGNodW5rKSwgdGhpcy5jKGZpbmFsKTtcbiAgICB9O1xuICAgIHJldHVybiBJbmZsYXRlO1xufSgpKTtcbmV4cG9ydCB7IEluZmxhdGUgfTtcbi8qKlxuICogQXN5bmNocm9ub3VzIHN0cmVhbWluZyBERUZMQVRFIGRlY29tcHJlc3Npb25cbiAqL1xudmFyIEFzeW5jSW5mbGF0ZSA9IC8qI19fUFVSRV9fKi8gKGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGFzeW5jaHJvbm91cyBpbmZsYXRpb24gc3RyZWFtXG4gICAgICogQHBhcmFtIGNiIFRoZSBjYWxsYmFjayB0byBjYWxsIHdoZW5ldmVyIGRhdGEgaXMgZGVmbGF0ZWRcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBBc3luY0luZmxhdGUoY2IpIHtcbiAgICAgICAgdGhpcy5vbmRhdGEgPSBjYjtcbiAgICAgICAgYXN0cm1pZnkoW1xuICAgICAgICAgICAgYkluZmx0LFxuICAgICAgICAgICAgZnVuY3Rpb24gKCkgeyByZXR1cm4gW2FzdHJtLCBJbmZsYXRlXTsgfVxuICAgICAgICBdLCB0aGlzLCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgc3RybSA9IG5ldyBJbmZsYXRlKCk7XG4gICAgICAgICAgICBvbm1lc3NhZ2UgPSBhc3RybShzdHJtKTtcbiAgICAgICAgfSwgNyk7XG4gICAgfVxuICAgIHJldHVybiBBc3luY0luZmxhdGU7XG59KCkpO1xuZXhwb3J0IHsgQXN5bmNJbmZsYXRlIH07XG5leHBvcnQgZnVuY3Rpb24gaW5mbGF0ZShkYXRhLCBvcHRzLCBjYikge1xuICAgIGlmICghY2IpXG4gICAgICAgIGNiID0gb3B0cywgb3B0cyA9IHt9O1xuICAgIGlmICh0eXBlb2YgY2IgIT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgdGhyb3cgJ25vIGNhbGxiYWNrJztcbiAgICByZXR1cm4gY2JpZnkoZGF0YSwgb3B0cywgW1xuICAgICAgICBiSW5mbHRcbiAgICBdLCBmdW5jdGlvbiAoZXYpIHsgcmV0dXJuIHBiZihpbmZsYXRlU3luYyhldi5kYXRhWzBdLCBndTgoZXYuZGF0YVsxXSkpKTsgfSwgMSwgY2IpO1xufVxuLyoqXG4gKiBFeHBhbmRzIERFRkxBVEUgZGF0YSB3aXRoIG5vIHdyYXBwZXJcbiAqIEBwYXJhbSBkYXRhIFRoZSBkYXRhIHRvIGRlY29tcHJlc3NcbiAqIEBwYXJhbSBvdXQgV2hlcmUgdG8gd3JpdGUgdGhlIGRhdGEuIFNhdmVzIG1lbW9yeSBpZiB5b3Uga25vdyB0aGUgZGVjb21wcmVzc2VkIHNpemUgYW5kIHByb3ZpZGUgYW4gb3V0cHV0IGJ1ZmZlciBvZiB0aGF0IGxlbmd0aC5cbiAqIEByZXR1cm5zIFRoZSBkZWNvbXByZXNzZWQgdmVyc2lvbiBvZiB0aGUgZGF0YVxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5mbGF0ZVN5bmMoZGF0YSwgb3V0KSB7XG4gICAgcmV0dXJuIGluZmx0KGRhdGEsIG91dCk7XG59XG4vLyBiZWZvcmUgeW91IHllbGwgYXQgbWUgZm9yIG5vdCBqdXN0IHVzaW5nIGV4dGVuZHMsIG15IHJlYXNvbiBpcyB0aGF0IFRTIGluaGVyaXRhbmNlIGlzIGhhcmQgdG8gd29ya2VyaXplLlxuLyoqXG4gKiBTdHJlYW1pbmcgR1pJUCBjb21wcmVzc2lvblxuICovXG52YXIgR3ppcCA9IC8qI19fUFVSRV9fKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBHemlwKG9wdHMsIGNiKSB7XG4gICAgICAgIHRoaXMuYyA9IGNyYygpO1xuICAgICAgICB0aGlzLmwgPSAwO1xuICAgICAgICB0aGlzLnYgPSAxO1xuICAgICAgICBEZWZsYXRlLmNhbGwodGhpcywgb3B0cywgY2IpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQdXNoZXMgYSBjaHVuayB0byBiZSBHWklQcGVkXG4gICAgICogQHBhcmFtIGNodW5rIFRoZSBjaHVuayB0byBwdXNoXG4gICAgICogQHBhcmFtIGZpbmFsIFdoZXRoZXIgdGhpcyBpcyB0aGUgbGFzdCBjaHVua1xuICAgICAqL1xuICAgIEd6aXAucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbiAoY2h1bmssIGZpbmFsKSB7XG4gICAgICAgIERlZmxhdGUucHJvdG90eXBlLnB1c2guY2FsbCh0aGlzLCBjaHVuaywgZmluYWwpO1xuICAgIH07XG4gICAgR3ppcC5wcm90b3R5cGUucCA9IGZ1bmN0aW9uIChjLCBmKSB7XG4gICAgICAgIHRoaXMuYy5wKGMpO1xuICAgICAgICB0aGlzLmwgKz0gYy5sZW5ndGg7XG4gICAgICAgIHZhciByYXcgPSBkb3B0KGMsIHRoaXMubywgdGhpcy52ICYmIGd6aGwodGhpcy5vKSwgZiAmJiA4LCAhZik7XG4gICAgICAgIGlmICh0aGlzLnYpXG4gICAgICAgICAgICBnemgocmF3LCB0aGlzLm8pLCB0aGlzLnYgPSAwO1xuICAgICAgICBpZiAoZilcbiAgICAgICAgICAgIHdieXRlcyhyYXcsIHJhdy5sZW5ndGggLSA4LCB0aGlzLmMuZCgpKSwgd2J5dGVzKHJhdywgcmF3Lmxlbmd0aCAtIDQsIHRoaXMubCk7XG4gICAgICAgIHRoaXMub25kYXRhKHJhdywgZik7XG4gICAgfTtcbiAgICByZXR1cm4gR3ppcDtcbn0oKSk7XG5leHBvcnQgeyBHemlwIH07XG4vKipcbiAqIEFzeW5jaHJvbm91cyBzdHJlYW1pbmcgR1pJUCBjb21wcmVzc2lvblxuICovXG52YXIgQXN5bmNHemlwID0gLyojX19QVVJFX18qLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEFzeW5jR3ppcChvcHRzLCBjYikge1xuICAgICAgICBhc3RybWlmeShbXG4gICAgICAgICAgICBiRGZsdCxcbiAgICAgICAgICAgIGd6ZSxcbiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHsgcmV0dXJuIFthc3RybSwgRGVmbGF0ZSwgR3ppcF07IH1cbiAgICAgICAgXSwgdGhpcywgQXN5bmNDbXBTdHJtLmNhbGwodGhpcywgb3B0cywgY2IpLCBmdW5jdGlvbiAoZXYpIHtcbiAgICAgICAgICAgIHZhciBzdHJtID0gbmV3IEd6aXAoZXYuZGF0YSk7XG4gICAgICAgICAgICBvbm1lc3NhZ2UgPSBhc3RybShzdHJtKTtcbiAgICAgICAgfSwgOCk7XG4gICAgfVxuICAgIHJldHVybiBBc3luY0d6aXA7XG59KCkpO1xuZXhwb3J0IHsgQXN5bmNHemlwIH07XG5leHBvcnQgZnVuY3Rpb24gZ3ppcChkYXRhLCBvcHRzLCBjYikge1xuICAgIGlmICghY2IpXG4gICAgICAgIGNiID0gb3B0cywgb3B0cyA9IHt9O1xuICAgIGlmICh0eXBlb2YgY2IgIT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgdGhyb3cgJ25vIGNhbGxiYWNrJztcbiAgICByZXR1cm4gY2JpZnkoZGF0YSwgb3B0cywgW1xuICAgICAgICBiRGZsdCxcbiAgICAgICAgZ3plLFxuICAgICAgICBmdW5jdGlvbiAoKSB7IHJldHVybiBbZ3ppcFN5bmNdOyB9XG4gICAgXSwgZnVuY3Rpb24gKGV2KSB7IHJldHVybiBwYmYoZ3ppcFN5bmMoZXYuZGF0YVswXSwgZXYuZGF0YVsxXSkpOyB9LCAyLCBjYik7XG59XG4vKipcbiAqIENvbXByZXNzZXMgZGF0YSB3aXRoIEdaSVBcbiAqIEBwYXJhbSBkYXRhIFRoZSBkYXRhIHRvIGNvbXByZXNzXG4gKiBAcGFyYW0gb3B0cyBUaGUgY29tcHJlc3Npb24gb3B0aW9uc1xuICogQHJldHVybnMgVGhlIGd6aXBwZWQgdmVyc2lvbiBvZiB0aGUgZGF0YVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ3ppcFN5bmMoZGF0YSwgb3B0cykge1xuICAgIGlmIChvcHRzID09PSB2b2lkIDApIHsgb3B0cyA9IHt9OyB9XG4gICAgdmFyIGMgPSBjcmMoKSwgbCA9IGRhdGEubGVuZ3RoO1xuICAgIGMucChkYXRhKTtcbiAgICB2YXIgZCA9IGRvcHQoZGF0YSwgb3B0cywgZ3pobChvcHRzKSwgOCksIHMgPSBkLmxlbmd0aDtcbiAgICByZXR1cm4gZ3poKGQsIG9wdHMpLCB3Ynl0ZXMoZCwgcyAtIDgsIGMuZCgpKSwgd2J5dGVzKGQsIHMgLSA0LCBsKSwgZDtcbn1cbi8qKlxuICogU3RyZWFtaW5nIEdaSVAgZGVjb21wcmVzc2lvblxuICovXG52YXIgR3VuemlwID0gLyojX19QVVJFX18qLyAoZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBHVU5aSVAgc3RyZWFtXG4gICAgICogQHBhcmFtIGNiIFRoZSBjYWxsYmFjayB0byBjYWxsIHdoZW5ldmVyIGRhdGEgaXMgaW5mbGF0ZWRcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBHdW56aXAoY2IpIHtcbiAgICAgICAgdGhpcy52ID0gMTtcbiAgICAgICAgSW5mbGF0ZS5jYWxsKHRoaXMsIGNiKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHVzaGVzIGEgY2h1bmsgdG8gYmUgR1VOWklQcGVkXG4gICAgICogQHBhcmFtIGNodW5rIFRoZSBjaHVuayB0byBwdXNoXG4gICAgICogQHBhcmFtIGZpbmFsIFdoZXRoZXIgdGhpcyBpcyB0aGUgbGFzdCBjaHVua1xuICAgICAqL1xuICAgIEd1bnppcC5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uIChjaHVuaywgZmluYWwpIHtcbiAgICAgICAgSW5mbGF0ZS5wcm90b3R5cGUuZS5jYWxsKHRoaXMsIGNodW5rKTtcbiAgICAgICAgaWYgKHRoaXMudikge1xuICAgICAgICAgICAgdmFyIHMgPSBnenModGhpcy5wKTtcbiAgICAgICAgICAgIGlmIChzID49IHRoaXMucC5sZW5ndGggJiYgIWZpbmFsKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIHRoaXMucCA9IHRoaXMucC5zdWJhcnJheShzKSwgdGhpcy52ID0gMDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZmluYWwpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnAubGVuZ3RoIDwgOClcbiAgICAgICAgICAgICAgICB0aHJvdyAnaW52YWxpZCBnemlwIHN0cmVhbSc7XG4gICAgICAgICAgICB0aGlzLnAgPSB0aGlzLnAuc3ViYXJyYXkoMCwgLTgpO1xuICAgICAgICB9XG4gICAgICAgIC8vIG5lY2Vzc2FyeSB0byBwcmV2ZW50IFRTIGZyb20gdXNpbmcgdGhlIGNsb3N1cmUgdmFsdWVcbiAgICAgICAgLy8gVGhpcyBhbGxvd3MgZm9yIHdvcmtlcml6YXRpb24gdG8gZnVuY3Rpb24gY29ycmVjdGx5XG4gICAgICAgIEluZmxhdGUucHJvdG90eXBlLmMuY2FsbCh0aGlzLCBmaW5hbCk7XG4gICAgfTtcbiAgICByZXR1cm4gR3VuemlwO1xufSgpKTtcbmV4cG9ydCB7IEd1bnppcCB9O1xuLyoqXG4gKiBBc3luY2hyb25vdXMgc3RyZWFtaW5nIEdaSVAgZGVjb21wcmVzc2lvblxuICovXG52YXIgQXN5bmNHdW56aXAgPSAvKiNfX1BVUkVfXyovIChmdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBhc3luY2hyb25vdXMgR1VOWklQIHN0cmVhbVxuICAgICAqIEBwYXJhbSBjYiBUaGUgY2FsbGJhY2sgdG8gY2FsbCB3aGVuZXZlciBkYXRhIGlzIGRlZmxhdGVkXG4gICAgICovXG4gICAgZnVuY3Rpb24gQXN5bmNHdW56aXAoY2IpIHtcbiAgICAgICAgdGhpcy5vbmRhdGEgPSBjYjtcbiAgICAgICAgYXN0cm1pZnkoW1xuICAgICAgICAgICAgYkluZmx0LFxuICAgICAgICAgICAgZ3V6ZSxcbiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHsgcmV0dXJuIFthc3RybSwgSW5mbGF0ZSwgR3VuemlwXTsgfVxuICAgICAgICBdLCB0aGlzLCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgc3RybSA9IG5ldyBHdW56aXAoKTtcbiAgICAgICAgICAgIG9ubWVzc2FnZSA9IGFzdHJtKHN0cm0pO1xuICAgICAgICB9LCA5KTtcbiAgICB9XG4gICAgcmV0dXJuIEFzeW5jR3VuemlwO1xufSgpKTtcbmV4cG9ydCB7IEFzeW5jR3VuemlwIH07XG5leHBvcnQgZnVuY3Rpb24gZ3VuemlwKGRhdGEsIG9wdHMsIGNiKSB7XG4gICAgaWYgKCFjYilcbiAgICAgICAgY2IgPSBvcHRzLCBvcHRzID0ge307XG4gICAgaWYgKHR5cGVvZiBjYiAhPSAnZnVuY3Rpb24nKVxuICAgICAgICB0aHJvdyAnbm8gY2FsbGJhY2snO1xuICAgIHJldHVybiBjYmlmeShkYXRhLCBvcHRzLCBbXG4gICAgICAgIGJJbmZsdCxcbiAgICAgICAgZ3V6ZSxcbiAgICAgICAgZnVuY3Rpb24gKCkgeyByZXR1cm4gW2d1bnppcFN5bmNdOyB9XG4gICAgXSwgZnVuY3Rpb24gKGV2KSB7IHJldHVybiBwYmYoZ3VuemlwU3luYyhldi5kYXRhWzBdKSk7IH0sIDMsIGNiKTtcbn1cbi8qKlxuICogRXhwYW5kcyBHWklQIGRhdGFcbiAqIEBwYXJhbSBkYXRhIFRoZSBkYXRhIHRvIGRlY29tcHJlc3NcbiAqIEBwYXJhbSBvdXQgV2hlcmUgdG8gd3JpdGUgdGhlIGRhdGEuIEdaSVAgYWxyZWFkeSBlbmNvZGVzIHRoZSBvdXRwdXQgc2l6ZSwgc28gcHJvdmlkaW5nIHRoaXMgZG9lc24ndCBzYXZlIG1lbW9yeS5cbiAqIEByZXR1cm5zIFRoZSBkZWNvbXByZXNzZWQgdmVyc2lvbiBvZiB0aGUgZGF0YVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ3VuemlwU3luYyhkYXRhLCBvdXQpIHtcbiAgICByZXR1cm4gaW5mbHQoZGF0YS5zdWJhcnJheShnenMoZGF0YSksIC04KSwgb3V0IHx8IG5ldyB1OChnemwoZGF0YSkpKTtcbn1cbi8qKlxuICogU3RyZWFtaW5nIFpsaWIgY29tcHJlc3Npb25cbiAqL1xudmFyIFpsaWIgPSAvKiNfX1BVUkVfXyovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gWmxpYihvcHRzLCBjYikge1xuICAgICAgICB0aGlzLmMgPSBhZGxlcigpO1xuICAgICAgICB0aGlzLnYgPSAxO1xuICAgICAgICBEZWZsYXRlLmNhbGwodGhpcywgb3B0cywgY2IpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQdXNoZXMgYSBjaHVuayB0byBiZSB6bGliYmVkXG4gICAgICogQHBhcmFtIGNodW5rIFRoZSBjaHVuayB0byBwdXNoXG4gICAgICogQHBhcmFtIGZpbmFsIFdoZXRoZXIgdGhpcyBpcyB0aGUgbGFzdCBjaHVua1xuICAgICAqL1xuICAgIFpsaWIucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbiAoY2h1bmssIGZpbmFsKSB7XG4gICAgICAgIERlZmxhdGUucHJvdG90eXBlLnB1c2guY2FsbCh0aGlzLCBjaHVuaywgZmluYWwpO1xuICAgIH07XG4gICAgWmxpYi5wcm90b3R5cGUucCA9IGZ1bmN0aW9uIChjLCBmKSB7XG4gICAgICAgIHRoaXMuYy5wKGMpO1xuICAgICAgICB2YXIgcmF3ID0gZG9wdChjLCB0aGlzLm8sIHRoaXMudiAmJiAyLCBmICYmIDQsICFmKTtcbiAgICAgICAgaWYgKHRoaXMudilcbiAgICAgICAgICAgIHpsaChyYXcsIHRoaXMubyksIHRoaXMudiA9IDA7XG4gICAgICAgIGlmIChmKVxuICAgICAgICAgICAgd2J5dGVzKHJhdywgcmF3Lmxlbmd0aCAtIDQsIHRoaXMuYy5kKCkpO1xuICAgICAgICB0aGlzLm9uZGF0YShyYXcsIGYpO1xuICAgIH07XG4gICAgcmV0dXJuIFpsaWI7XG59KCkpO1xuZXhwb3J0IHsgWmxpYiB9O1xuLyoqXG4gKiBBc3luY2hyb25vdXMgc3RyZWFtaW5nIFpsaWIgY29tcHJlc3Npb25cbiAqL1xudmFyIEFzeW5jWmxpYiA9IC8qI19fUFVSRV9fKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBBc3luY1psaWIob3B0cywgY2IpIHtcbiAgICAgICAgYXN0cm1pZnkoW1xuICAgICAgICAgICAgYkRmbHQsXG4gICAgICAgICAgICB6bGUsXG4gICAgICAgICAgICBmdW5jdGlvbiAoKSB7IHJldHVybiBbYXN0cm0sIERlZmxhdGUsIFpsaWJdOyB9XG4gICAgICAgIF0sIHRoaXMsIEFzeW5jQ21wU3RybS5jYWxsKHRoaXMsIG9wdHMsIGNiKSwgZnVuY3Rpb24gKGV2KSB7XG4gICAgICAgICAgICB2YXIgc3RybSA9IG5ldyBabGliKGV2LmRhdGEpO1xuICAgICAgICAgICAgb25tZXNzYWdlID0gYXN0cm0oc3RybSk7XG4gICAgICAgIH0sIDEwKTtcbiAgICB9XG4gICAgcmV0dXJuIEFzeW5jWmxpYjtcbn0oKSk7XG5leHBvcnQgeyBBc3luY1psaWIgfTtcbmV4cG9ydCBmdW5jdGlvbiB6bGliKGRhdGEsIG9wdHMsIGNiKSB7XG4gICAgaWYgKCFjYilcbiAgICAgICAgY2IgPSBvcHRzLCBvcHRzID0ge307XG4gICAgaWYgKHR5cGVvZiBjYiAhPSAnZnVuY3Rpb24nKVxuICAgICAgICB0aHJvdyAnbm8gY2FsbGJhY2snO1xuICAgIHJldHVybiBjYmlmeShkYXRhLCBvcHRzLCBbXG4gICAgICAgIGJEZmx0LFxuICAgICAgICB6bGUsXG4gICAgICAgIGZ1bmN0aW9uICgpIHsgcmV0dXJuIFt6bGliU3luY107IH1cbiAgICBdLCBmdW5jdGlvbiAoZXYpIHsgcmV0dXJuIHBiZih6bGliU3luYyhldi5kYXRhWzBdLCBldi5kYXRhWzFdKSk7IH0sIDQsIGNiKTtcbn1cbi8qKlxuICogQ29tcHJlc3MgZGF0YSB3aXRoIFpsaWJcbiAqIEBwYXJhbSBkYXRhIFRoZSBkYXRhIHRvIGNvbXByZXNzXG4gKiBAcGFyYW0gb3B0cyBUaGUgY29tcHJlc3Npb24gb3B0aW9uc1xuICogQHJldHVybnMgVGhlIHpsaWItY29tcHJlc3NlZCB2ZXJzaW9uIG9mIHRoZSBkYXRhXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB6bGliU3luYyhkYXRhLCBvcHRzKSB7XG4gICAgaWYgKG9wdHMgPT09IHZvaWQgMCkgeyBvcHRzID0ge307IH1cbiAgICB2YXIgYSA9IGFkbGVyKCk7XG4gICAgYS5wKGRhdGEpO1xuICAgIHZhciBkID0gZG9wdChkYXRhLCBvcHRzLCAyLCA0KTtcbiAgICByZXR1cm4gemxoKGQsIG9wdHMpLCB3Ynl0ZXMoZCwgZC5sZW5ndGggLSA0LCBhLmQoKSksIGQ7XG59XG4vKipcbiAqIFN0cmVhbWluZyBabGliIGRlY29tcHJlc3Npb25cbiAqL1xudmFyIFVuemxpYiA9IC8qI19fUFVSRV9fKi8gKGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgWmxpYiBkZWNvbXByZXNzaW9uIHN0cmVhbVxuICAgICAqIEBwYXJhbSBjYiBUaGUgY2FsbGJhY2sgdG8gY2FsbCB3aGVuZXZlciBkYXRhIGlzIGluZmxhdGVkXG4gICAgICovXG4gICAgZnVuY3Rpb24gVW56bGliKGNiKSB7XG4gICAgICAgIHRoaXMudiA9IDE7XG4gICAgICAgIEluZmxhdGUuY2FsbCh0aGlzLCBjYik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFB1c2hlcyBhIGNodW5rIHRvIGJlIHVuemxpYmJlZFxuICAgICAqIEBwYXJhbSBjaHVuayBUaGUgY2h1bmsgdG8gcHVzaFxuICAgICAqIEBwYXJhbSBmaW5hbCBXaGV0aGVyIHRoaXMgaXMgdGhlIGxhc3QgY2h1bmtcbiAgICAgKi9cbiAgICBVbnpsaWIucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbiAoY2h1bmssIGZpbmFsKSB7XG4gICAgICAgIEluZmxhdGUucHJvdG90eXBlLmUuY2FsbCh0aGlzLCBjaHVuayk7XG4gICAgICAgIGlmICh0aGlzLnYpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnAubGVuZ3RoIDwgMiAmJiAhZmluYWwpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgdGhpcy5wID0gdGhpcy5wLnN1YmFycmF5KDIpLCB0aGlzLnYgPSAwO1xuICAgICAgICB9XG4gICAgICAgIGlmIChmaW5hbCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucC5sZW5ndGggPCA0KVxuICAgICAgICAgICAgICAgIHRocm93ICdpbnZhbGlkIHpsaWIgc3RyZWFtJztcbiAgICAgICAgICAgIHRoaXMucCA9IHRoaXMucC5zdWJhcnJheSgwLCAtNCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gbmVjZXNzYXJ5IHRvIHByZXZlbnQgVFMgZnJvbSB1c2luZyB0aGUgY2xvc3VyZSB2YWx1ZVxuICAgICAgICAvLyBUaGlzIGFsbG93cyBmb3Igd29ya2VyaXphdGlvbiB0byBmdW5jdGlvbiBjb3JyZWN0bHlcbiAgICAgICAgSW5mbGF0ZS5wcm90b3R5cGUuYy5jYWxsKHRoaXMsIGZpbmFsKTtcbiAgICB9O1xuICAgIHJldHVybiBVbnpsaWI7XG59KCkpO1xuZXhwb3J0IHsgVW56bGliIH07XG4vKipcbiAqIEFzeW5jaHJvbm91cyBzdHJlYW1pbmcgWmxpYiBkZWNvbXByZXNzaW9uXG4gKi9cbnZhciBBc3luY1VuemxpYiA9IC8qI19fUFVSRV9fKi8gKGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGFzeW5jaHJvbm91cyBabGliIGRlY29tcHJlc3Npb24gc3RyZWFtXG4gICAgICogQHBhcmFtIGNiIFRoZSBjYWxsYmFjayB0byBjYWxsIHdoZW5ldmVyIGRhdGEgaXMgZGVmbGF0ZWRcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBBc3luY1VuemxpYihjYikge1xuICAgICAgICB0aGlzLm9uZGF0YSA9IGNiO1xuICAgICAgICBhc3RybWlmeShbXG4gICAgICAgICAgICBiSW5mbHQsXG4gICAgICAgICAgICB6dWxlLFxuICAgICAgICAgICAgZnVuY3Rpb24gKCkgeyByZXR1cm4gW2FzdHJtLCBJbmZsYXRlLCBVbnpsaWJdOyB9XG4gICAgICAgIF0sIHRoaXMsIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBzdHJtID0gbmV3IFVuemxpYigpO1xuICAgICAgICAgICAgb25tZXNzYWdlID0gYXN0cm0oc3RybSk7XG4gICAgICAgIH0sIDExKTtcbiAgICB9XG4gICAgcmV0dXJuIEFzeW5jVW56bGliO1xufSgpKTtcbmV4cG9ydCB7IEFzeW5jVW56bGliIH07XG5leHBvcnQgZnVuY3Rpb24gdW56bGliKGRhdGEsIG9wdHMsIGNiKSB7XG4gICAgaWYgKCFjYilcbiAgICAgICAgY2IgPSBvcHRzLCBvcHRzID0ge307XG4gICAgaWYgKHR5cGVvZiBjYiAhPSAnZnVuY3Rpb24nKVxuICAgICAgICB0aHJvdyAnbm8gY2FsbGJhY2snO1xuICAgIHJldHVybiBjYmlmeShkYXRhLCBvcHRzLCBbXG4gICAgICAgIGJJbmZsdCxcbiAgICAgICAgenVsZSxcbiAgICAgICAgZnVuY3Rpb24gKCkgeyByZXR1cm4gW3VuemxpYlN5bmNdOyB9XG4gICAgXSwgZnVuY3Rpb24gKGV2KSB7IHJldHVybiBwYmYodW56bGliU3luYyhldi5kYXRhWzBdLCBndTgoZXYuZGF0YVsxXSkpKTsgfSwgNSwgY2IpO1xufVxuLyoqXG4gKiBFeHBhbmRzIFpsaWIgZGF0YVxuICogQHBhcmFtIGRhdGEgVGhlIGRhdGEgdG8gZGVjb21wcmVzc1xuICogQHBhcmFtIG91dCBXaGVyZSB0byB3cml0ZSB0aGUgZGF0YS4gU2F2ZXMgbWVtb3J5IGlmIHlvdSBrbm93IHRoZSBkZWNvbXByZXNzZWQgc2l6ZSBhbmQgcHJvdmlkZSBhbiBvdXRwdXQgYnVmZmVyIG9mIHRoYXQgbGVuZ3RoLlxuICogQHJldHVybnMgVGhlIGRlY29tcHJlc3NlZCB2ZXJzaW9uIG9mIHRoZSBkYXRhXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1bnpsaWJTeW5jKGRhdGEsIG91dCkge1xuICAgIHJldHVybiBpbmZsdCgoemx2KGRhdGEpLCBkYXRhLnN1YmFycmF5KDIsIC00KSksIG91dCk7XG59XG4vLyBEZWZhdWx0IGFsZ29yaXRobSBmb3IgY29tcHJlc3Npb24gKHVzZWQgYmVjYXVzZSBoYXZpbmcgYSBrbm93biBvdXRwdXQgc2l6ZSBhbGxvd3MgZmFzdGVyIGRlY29tcHJlc3Npb24pXG5leHBvcnQgeyBnemlwIGFzIGNvbXByZXNzLCBBc3luY0d6aXAgYXMgQXN5bmNDb21wcmVzcyB9O1xuLy8gRGVmYXVsdCBhbGdvcml0aG0gZm9yIGNvbXByZXNzaW9uICh1c2VkIGJlY2F1c2UgaGF2aW5nIGEga25vd24gb3V0cHV0IHNpemUgYWxsb3dzIGZhc3RlciBkZWNvbXByZXNzaW9uKVxuZXhwb3J0IHsgZ3ppcFN5bmMgYXMgY29tcHJlc3NTeW5jLCBHemlwIGFzIENvbXByZXNzIH07XG4vKipcbiAqIFN0cmVhbWluZyBHWklQLCBabGliLCBvciByYXcgREVGTEFURSBkZWNvbXByZXNzaW9uXG4gKi9cbnZhciBEZWNvbXByZXNzID0gLyojX19QVVJFX18qLyAoZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBkZWNvbXByZXNzaW9uIHN0cmVhbVxuICAgICAqIEBwYXJhbSBjYiBUaGUgY2FsbGJhY2sgdG8gY2FsbCB3aGVuZXZlciBkYXRhIGlzIGRlY29tcHJlc3NlZFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIERlY29tcHJlc3MoY2IpIHtcbiAgICAgICAgdGhpcy5HID0gR3VuemlwO1xuICAgICAgICB0aGlzLkkgPSBJbmZsYXRlO1xuICAgICAgICB0aGlzLlogPSBVbnpsaWI7XG4gICAgICAgIHRoaXMub25kYXRhID0gY2I7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFB1c2hlcyBhIGNodW5rIHRvIGJlIGRlY29tcHJlc3NlZFxuICAgICAqIEBwYXJhbSBjaHVuayBUaGUgY2h1bmsgdG8gcHVzaFxuICAgICAqIEBwYXJhbSBmaW5hbCBXaGV0aGVyIHRoaXMgaXMgdGhlIGxhc3QgY2h1bmtcbiAgICAgKi9cbiAgICBEZWNvbXByZXNzLnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24gKGNodW5rLCBmaW5hbCkge1xuICAgICAgICBpZiAoIXRoaXMub25kYXRhKVxuICAgICAgICAgICAgdGhyb3cgJ25vIHN0cmVhbSBoYW5kbGVyJztcbiAgICAgICAgaWYgKCF0aGlzLnMpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnAgJiYgdGhpcy5wLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHZhciBuID0gbmV3IHU4KHRoaXMucC5sZW5ndGggKyBjaHVuay5sZW5ndGgpO1xuICAgICAgICAgICAgICAgIG4uc2V0KHRoaXMucCksIG4uc2V0KGNodW5rLCB0aGlzLnAubGVuZ3RoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICB0aGlzLnAgPSBjaHVuaztcbiAgICAgICAgICAgIGlmICh0aGlzLnAubGVuZ3RoID4gMikge1xuICAgICAgICAgICAgICAgIHZhciBfdGhpc18xID0gdGhpcztcbiAgICAgICAgICAgICAgICB2YXIgY2IgPSBmdW5jdGlvbiAoKSB7IF90aGlzXzEub25kYXRhLmFwcGx5KF90aGlzXzEsIGFyZ3VtZW50cyk7IH07XG4gICAgICAgICAgICAgICAgdGhpcy5zID0gKHRoaXMucFswXSA9PSAzMSAmJiB0aGlzLnBbMV0gPT0gMTM5ICYmIHRoaXMucFsyXSA9PSA4KVxuICAgICAgICAgICAgICAgICAgICA/IG5ldyB0aGlzLkcoY2IpXG4gICAgICAgICAgICAgICAgICAgIDogKCh0aGlzLnBbMF0gJiAxNSkgIT0gOCB8fCAodGhpcy5wWzBdID4+IDQpID4gNyB8fCAoKHRoaXMucFswXSA8PCA4IHwgdGhpcy5wWzFdKSAlIDMxKSlcbiAgICAgICAgICAgICAgICAgICAgICAgID8gbmV3IHRoaXMuSShjYilcbiAgICAgICAgICAgICAgICAgICAgICAgIDogbmV3IHRoaXMuWihjYik7XG4gICAgICAgICAgICAgICAgdGhpcy5zLnB1c2godGhpcy5wLCBmaW5hbCk7XG4gICAgICAgICAgICAgICAgdGhpcy5wID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlXG4gICAgICAgICAgICB0aGlzLnMucHVzaChjaHVuaywgZmluYWwpO1xuICAgIH07XG4gICAgcmV0dXJuIERlY29tcHJlc3M7XG59KCkpO1xuZXhwb3J0IHsgRGVjb21wcmVzcyB9O1xuLyoqXG4gKiBBc3luY2hyb25vdXMgc3RyZWFtaW5nIEdaSVAsIFpsaWIsIG9yIHJhdyBERUZMQVRFIGRlY29tcHJlc3Npb25cbiAqL1xudmFyIEFzeW5jRGVjb21wcmVzcyA9IC8qI19fUFVSRV9fKi8gKGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICogQ3JlYXRlcyBhbiBhc3luY2hyb25vdXMgZGVjb21wcmVzc2lvbiBzdHJlYW1cbiAgICogQHBhcmFtIGNiIFRoZSBjYWxsYmFjayB0byBjYWxsIHdoZW5ldmVyIGRhdGEgaXMgZGVjb21wcmVzc2VkXG4gICAqL1xuICAgIGZ1bmN0aW9uIEFzeW5jRGVjb21wcmVzcyhjYikge1xuICAgICAgICB0aGlzLkcgPSBBc3luY0d1bnppcDtcbiAgICAgICAgdGhpcy5JID0gQXN5bmNJbmZsYXRlO1xuICAgICAgICB0aGlzLlogPSBBc3luY1VuemxpYjtcbiAgICAgICAgdGhpcy5vbmRhdGEgPSBjYjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHVzaGVzIGEgY2h1bmsgdG8gYmUgZGVjb21wcmVzc2VkXG4gICAgICogQHBhcmFtIGNodW5rIFRoZSBjaHVuayB0byBwdXNoXG4gICAgICogQHBhcmFtIGZpbmFsIFdoZXRoZXIgdGhpcyBpcyB0aGUgbGFzdCBjaHVua1xuICAgICAqL1xuICAgIEFzeW5jRGVjb21wcmVzcy5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uIChjaHVuaywgZmluYWwpIHtcbiAgICAgICAgRGVjb21wcmVzcy5wcm90b3R5cGUucHVzaC5jYWxsKHRoaXMsIGNodW5rLCBmaW5hbCk7XG4gICAgfTtcbiAgICByZXR1cm4gQXN5bmNEZWNvbXByZXNzO1xufSgpKTtcbmV4cG9ydCB7IEFzeW5jRGVjb21wcmVzcyB9O1xuZXhwb3J0IGZ1bmN0aW9uIGRlY29tcHJlc3MoZGF0YSwgb3B0cywgY2IpIHtcbiAgICBpZiAoIWNiKVxuICAgICAgICBjYiA9IG9wdHMsIG9wdHMgPSB7fTtcbiAgICBpZiAodHlwZW9mIGNiICE9ICdmdW5jdGlvbicpXG4gICAgICAgIHRocm93ICdubyBjYWxsYmFjayc7XG4gICAgcmV0dXJuIChkYXRhWzBdID09IDMxICYmIGRhdGFbMV0gPT0gMTM5ICYmIGRhdGFbMl0gPT0gOClcbiAgICAgICAgPyBndW56aXAoZGF0YSwgb3B0cywgY2IpXG4gICAgICAgIDogKChkYXRhWzBdICYgMTUpICE9IDggfHwgKGRhdGFbMF0gPj4gNCkgPiA3IHx8ICgoZGF0YVswXSA8PCA4IHwgZGF0YVsxXSkgJSAzMSkpXG4gICAgICAgICAgICA/IGluZmxhdGUoZGF0YSwgb3B0cywgY2IpXG4gICAgICAgICAgICA6IHVuemxpYihkYXRhLCBvcHRzLCBjYik7XG59XG4vKipcbiAqIEV4cGFuZHMgY29tcHJlc3NlZCBHWklQLCBabGliLCBvciByYXcgREVGTEFURSBkYXRhLCBhdXRvbWF0aWNhbGx5IGRldGVjdGluZyB0aGUgZm9ybWF0XG4gKiBAcGFyYW0gZGF0YSBUaGUgZGF0YSB0byBkZWNvbXByZXNzXG4gKiBAcGFyYW0gb3V0IFdoZXJlIHRvIHdyaXRlIHRoZSBkYXRhLiBTYXZlcyBtZW1vcnkgaWYgeW91IGtub3cgdGhlIGRlY29tcHJlc3NlZCBzaXplIGFuZCBwcm92aWRlIGFuIG91dHB1dCBidWZmZXIgb2YgdGhhdCBsZW5ndGguXG4gKiBAcmV0dXJucyBUaGUgZGVjb21wcmVzc2VkIHZlcnNpb24gb2YgdGhlIGRhdGFcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlY29tcHJlc3NTeW5jKGRhdGEsIG91dCkge1xuICAgIHJldHVybiAoZGF0YVswXSA9PSAzMSAmJiBkYXRhWzFdID09IDEzOSAmJiBkYXRhWzJdID09IDgpXG4gICAgICAgID8gZ3VuemlwU3luYyhkYXRhLCBvdXQpXG4gICAgICAgIDogKChkYXRhWzBdICYgMTUpICE9IDggfHwgKGRhdGFbMF0gPj4gNCkgPiA3IHx8ICgoZGF0YVswXSA8PCA4IHwgZGF0YVsxXSkgJSAzMSkpXG4gICAgICAgICAgICA/IGluZmxhdGVTeW5jKGRhdGEsIG91dClcbiAgICAgICAgICAgIDogdW56bGliU3luYyhkYXRhLCBvdXQpO1xufVxuLy8gZmxhdHRlbiBhIGRpcmVjdG9yeSBzdHJ1Y3R1cmVcbnZhciBmbHRuID0gZnVuY3Rpb24gKGQsIHAsIHQsIG8pIHtcbiAgICBmb3IgKHZhciBrIGluIGQpIHtcbiAgICAgICAgdmFyIHZhbCA9IGRba10sIG4gPSBwICsgaztcbiAgICAgICAgaWYgKHZhbCBpbnN0YW5jZW9mIHU4KVxuICAgICAgICAgICAgdFtuXSA9IFt2YWwsIG9dO1xuICAgICAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KHZhbCkpXG4gICAgICAgICAgICB0W25dID0gW3ZhbFswXSwgbXJnKG8sIHZhbFsxXSldO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICBmbHRuKHZhbCwgbiArICcvJywgdCwgbyk7XG4gICAgfVxufTtcbi8qKlxuICogQ29udmVydHMgYSBzdHJpbmcgaW50byBhIFVpbnQ4QXJyYXkgZm9yIHVzZSB3aXRoIGNvbXByZXNzaW9uL2RlY29tcHJlc3Npb24gbWV0aG9kc1xuICogQHBhcmFtIHN0ciBUaGUgc3RyaW5nIHRvIGVuY29kZVxuICogQHBhcmFtIGxhdGluMSBXaGV0aGVyIG9yIG5vdCB0byBpbnRlcnByZXQgdGhlIGRhdGEgYXMgTGF0aW4tMS4gVGhpcyBzaG91bGRcbiAqICAgICAgICAgICAgICAgbm90IG5lZWQgdG8gYmUgdHJ1ZSB1bmxlc3MgZGVjb2RpbmcgYSBiaW5hcnkgc3RyaW5nLlxuICogQHJldHVybnMgVGhlIHN0cmluZyBlbmNvZGVkIGluIFVURi04L0xhdGluLTEgYmluYXJ5XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzdHJUb1U4KHN0ciwgbGF0aW4xKSB7XG4gICAgdmFyIGwgPSBzdHIubGVuZ3RoO1xuICAgIGlmICghbGF0aW4xICYmIHR5cGVvZiBUZXh0RW5jb2RlciAhPSAndW5kZWZpbmVkJylcbiAgICAgICAgcmV0dXJuIG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShzdHIpO1xuICAgIHZhciBhciA9IG5ldyB1OChzdHIubGVuZ3RoICsgKHN0ci5sZW5ndGggPj4+IDEpKTtcbiAgICB2YXIgYWkgPSAwO1xuICAgIHZhciB3ID0gZnVuY3Rpb24gKHYpIHsgYXJbYWkrK10gPSB2OyB9O1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbDsgKytpKSB7XG4gICAgICAgIGlmIChhaSArIDUgPiBhci5sZW5ndGgpIHtcbiAgICAgICAgICAgIHZhciBuID0gbmV3IHU4KGFpICsgOCArICgobCAtIGkpIDw8IDEpKTtcbiAgICAgICAgICAgIG4uc2V0KGFyKTtcbiAgICAgICAgICAgIGFyID0gbjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgYyA9IHN0ci5jaGFyQ29kZUF0KGkpO1xuICAgICAgICBpZiAoYyA8IDEyOCB8fCBsYXRpbjEpXG4gICAgICAgICAgICB3KGMpO1xuICAgICAgICBlbHNlIGlmIChjIDwgMjA0OClcbiAgICAgICAgICAgIHcoMTkyIHwgKGMgPj4+IDYpKSwgdygxMjggfCAoYyAmIDYzKSk7XG4gICAgICAgIGVsc2UgaWYgKGMgPiA1NTI5NSAmJiBjIDwgNTczNDQpXG4gICAgICAgICAgICBjID0gNjU1MzYgKyAoYyAmIDEwMjMgPDwgMTApIHwgKHN0ci5jaGFyQ29kZUF0KCsraSkgJiAxMDIzKSxcbiAgICAgICAgICAgICAgICB3KDI0MCB8IChjID4+PiAxOCkpLCB3KDEyOCB8ICgoYyA+Pj4gMTIpICYgNjMpKSwgdygxMjggfCAoKGMgPj4+IDYpICYgNjMpKSwgdygxMjggfCAoYyAmIDYzKSk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHcoMjI0IHwgKGMgPj4+IDEyKSksIHcoMTI4IHwgKChjID4+PiA2KSAmIDYzKSksIHcoMTI4IHwgKGMgJiA2MykpO1xuICAgIH1cbiAgICByZXR1cm4gc2xjKGFyLCAwLCBhaSk7XG59XG4vKipcbiAqIENvbnZlcnRzIGEgVWludDhBcnJheSB0byBhIHN0cmluZ1xuICogQHBhcmFtIGRhdCBUaGUgZGF0YSB0byBkZWNvZGUgdG8gc3RyaW5nXG4gKiBAcGFyYW0gbGF0aW4xIFdoZXRoZXIgb3Igbm90IHRvIGludGVycHJldCB0aGUgZGF0YSBhcyBMYXRpbi0xLiBUaGlzIHNob3VsZFxuICogICAgICAgICAgICAgICBub3QgbmVlZCB0byBiZSB0cnVlIHVubGVzcyBlbmNvZGluZyB0byBiaW5hcnkgc3RyaW5nLlxuICogQHJldHVybnMgVGhlIG9yaWdpbmFsIFVURi04L0xhdGluLTEgc3RyaW5nXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzdHJGcm9tVTgoZGF0LCBsYXRpbjEpIHtcbiAgICB2YXIgciA9ICcnO1xuICAgIGlmICghbGF0aW4xICYmIHR5cGVvZiBUZXh0RGVjb2RlciAhPSAndW5kZWZpbmVkJylcbiAgICAgICAgcmV0dXJuIG5ldyBUZXh0RGVjb2RlcigpLmRlY29kZShkYXQpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGF0Lmxlbmd0aDspIHtcbiAgICAgICAgdmFyIGMgPSBkYXRbaSsrXTtcbiAgICAgICAgaWYgKGMgPCAxMjggfHwgbGF0aW4xKVxuICAgICAgICAgICAgciArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGMpO1xuICAgICAgICBlbHNlIGlmIChjIDwgMjI0KVxuICAgICAgICAgICAgciArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKChjICYgMzEpIDw8IDYgfCAoZGF0W2krK10gJiA2MykpO1xuICAgICAgICBlbHNlIGlmIChjIDwgMjQwKVxuICAgICAgICAgICAgciArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKChjICYgMTUpIDw8IDEyIHwgKGRhdFtpKytdICYgNjMpIDw8IDYgfCAoZGF0W2krK10gJiA2MykpO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICBjID0gKChjICYgMTUpIDw8IDE4IHwgKGRhdFtpKytdICYgNjMpIDw8IDEyIHwgKGRhdFtpKytdICYgNjMpIDw8IDYgfCAoZGF0W2krK10gJiA2MykpIC0gNjU1MzYsXG4gICAgICAgICAgICAgICAgciArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKDU1Mjk2IHwgKGMgPj4gMTApLCA1NjMyMCB8IChjICYgMTAyMykpO1xuICAgIH1cbiAgICByZXR1cm4gcjtcbn1cbjtcbi8vIHNraXAgbG9jYWwgemlwIGhlYWRlclxudmFyIHNsemggPSBmdW5jdGlvbiAoZCwgYikgeyByZXR1cm4gYiArIDMwICsgYjIoZCwgYiArIDI2KSArIGIyKGQsIGIgKyAyOCk7IH07XG4vLyByZWFkIHppcCBoZWFkZXJcbnZhciB6aCA9IGZ1bmN0aW9uIChkLCBiLCB6KSB7XG4gICAgdmFyIGZubCA9IGIyKGQsIGIgKyAyOCksIGZuID0gc3RyRnJvbVU4KGQuc3ViYXJyYXkoYiArIDQ2LCBiICsgNDYgKyBmbmwpLCAhKGIyKGQsIGIgKyA4KSAmIDIwNDgpKSwgZXMgPSBiICsgNDYgKyBmbmw7XG4gICAgdmFyIF9hID0geiA/IHo2NGUoZCwgZXMpIDogW2I0KGQsIGIgKyAyMCksIGI0KGQsIGIgKyAyNCksIGI0KGQsIGIgKyA0MildLCBzYyA9IF9hWzBdLCBzdSA9IF9hWzFdLCBvZmYgPSBfYVsyXTtcbiAgICByZXR1cm4gW2IyKGQsIGIgKyAxMCksIHNjLCBzdSwgZm4sIGVzICsgYjIoZCwgYiArIDMwKSArIGIyKGQsIGIgKyAzMiksIG9mZl07XG59O1xuLy8gcmVhZCB6aXA2NCBleHRyYSBmaWVsZFxudmFyIHo2NGUgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAoOyBiMihkLCBiKSAhPSAxOyBiICs9IDQgKyBiMihkLCBiICsgMikpXG4gICAgICAgIDtcbiAgICByZXR1cm4gW2I0KGQsIGIgKyAxMiksIGI0KGQsIGIgKyA0KSwgYjQoZCwgYiArIDIwKV07XG59O1xuLy8gd3JpdGUgemlwIGhlYWRlclxudmFyIHd6aCA9IGZ1bmN0aW9uIChkLCBiLCBjLCBjbXAsIHN1LCBmbiwgdSwgbywgY2UsIHQpIHtcbiAgICB2YXIgZmwgPSBmbi5sZW5ndGgsIGwgPSBjbXAubGVuZ3RoO1xuICAgIHdieXRlcyhkLCBiLCBjZSAhPSBudWxsID8gMHgyMDE0QjUwIDogMHg0MDM0QjUwKSwgYiArPSA0O1xuICAgIGlmIChjZSAhPSBudWxsKVxuICAgICAgICBkW2JdID0gMjAsIGIgKz0gMjtcbiAgICBkW2JdID0gMjAsIGIgKz0gMjsgLy8gc3BlYyBjb21wbGlhbmNlPyB3aGF0J3MgdGhhdD9cbiAgICBkW2IrK10gPSAodCA9PSA4ICYmIChvLmxldmVsID09IDEgPyA2IDogby5sZXZlbCA8IDYgPyA0IDogby5sZXZlbCA9PSA5ID8gMiA6IDApKSwgZFtiKytdID0gdSAmJiA4O1xuICAgIGRbYl0gPSB0LCBiICs9IDI7XG4gICAgdmFyIGR0ID0gbmV3IERhdGUoby5tdGltZSB8fCBEYXRlLm5vdygpKSwgeSA9IGR0LmdldEZ1bGxZZWFyKCkgLSAxOTgwO1xuICAgIGlmICh5IDwgMCB8fCB5ID4gMTE5KVxuICAgICAgICB0aHJvdyAnZGF0ZSBub3QgaW4gcmFuZ2UgMTk4MC0yMDk5JztcbiAgICB3Ynl0ZXMoZCwgYiwgKCh5IDw8IDI0KSAqIDIpIHwgKChkdC5nZXRNb250aCgpICsgMSkgPDwgMjEpIHwgKGR0LmdldERhdGUoKSA8PCAxNikgfCAoZHQuZ2V0SG91cnMoKSA8PCAxMSkgfCAoZHQuZ2V0TWludXRlcygpIDw8IDUpIHwgKGR0LmdldFNlY29uZHMoKSA+Pj4gMSkpO1xuICAgIGIgKz0gNDtcbiAgICB3Ynl0ZXMoZCwgYiwgYyk7XG4gICAgd2J5dGVzKGQsIGIgKyA0LCBsKTtcbiAgICB3Ynl0ZXMoZCwgYiArIDgsIHN1KTtcbiAgICB3Ynl0ZXMoZCwgYiArIDEyLCBmbCksIGIgKz0gMTY7IC8vIHNraXAgZXh0cmEgZmllbGQsIGNvbW1lbnRcbiAgICBpZiAoY2UgIT0gbnVsbClcbiAgICAgICAgd2J5dGVzKGQsIGIgKz0gMTAsIGNlKSwgYiArPSA0O1xuICAgIGQuc2V0KGZuLCBiKTtcbiAgICBiICs9IGZsO1xuICAgIGlmIChjZSA9PSBudWxsKVxuICAgICAgICBkLnNldChjbXAsIGIpO1xufTtcbi8vIHdyaXRlIHppcCBmb290ZXIgKGVuZCBvZiBjZW50cmFsIGRpcmVjdG9yeSlcbnZhciB3emYgPSBmdW5jdGlvbiAobywgYiwgYywgZCwgZSkge1xuICAgIHdieXRlcyhvLCBiLCAweDYwNTRCNTApOyAvLyBza2lwIGRpc2tcbiAgICB3Ynl0ZXMobywgYiArIDgsIGMpO1xuICAgIHdieXRlcyhvLCBiICsgMTAsIGMpO1xuICAgIHdieXRlcyhvLCBiICsgMTIsIGQpO1xuICAgIHdieXRlcyhvLCBiICsgMTYsIGUpO1xufTtcbmV4cG9ydCBmdW5jdGlvbiB6aXAoZGF0YSwgb3B0cywgY2IpIHtcbiAgICBpZiAoIWNiKVxuICAgICAgICBjYiA9IG9wdHMsIG9wdHMgPSB7fTtcbiAgICBpZiAodHlwZW9mIGNiICE9ICdmdW5jdGlvbicpXG4gICAgICAgIHRocm93ICdubyBjYWxsYmFjayc7XG4gICAgdmFyIHIgPSB7fTtcbiAgICBmbHRuKGRhdGEsICcnLCByLCBvcHRzKTtcbiAgICB2YXIgayA9IE9iamVjdC5rZXlzKHIpO1xuICAgIHZhciBsZnQgPSBrLmxlbmd0aCwgbyA9IDAsIHRvdCA9IDA7XG4gICAgdmFyIHNsZnQgPSBsZnQsIGZpbGVzID0gbmV3IEFycmF5KGxmdCk7XG4gICAgdmFyIHRlcm0gPSBbXTtcbiAgICB2YXIgdEFsbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0ZXJtLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgdGVybVtpXSgpO1xuICAgIH07XG4gICAgdmFyIGNiZiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG91dCA9IG5ldyB1OCh0b3QgKyAyMiksIG9lID0gbywgY2RsID0gdG90IC0gbztcbiAgICAgICAgdG90ID0gMDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzbGZ0OyArK2kpIHtcbiAgICAgICAgICAgIHZhciBmID0gZmlsZXNbaV07XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHd6aChvdXQsIHRvdCwgZi5jLCBmLmQsIGYubSwgZi5uLCBmLnUsIGYucCwgbnVsbCwgZi50KTtcbiAgICAgICAgICAgICAgICB3emgob3V0LCBvLCBmLmMsIGYuZCwgZi5tLCBmLm4sIGYudSwgZi5wLCB0b3QsIGYudCksIG8gKz0gNDYgKyBmLm4ubGVuZ3RoLCB0b3QgKz0gMzAgKyBmLm4ubGVuZ3RoICsgZi5kLmxlbmd0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNiKGUsIG51bGwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHd6ZihvdXQsIG8sIGZpbGVzLmxlbmd0aCwgY2RsLCBvZSk7XG4gICAgICAgIGNiKG51bGwsIG91dCk7XG4gICAgfTtcbiAgICBpZiAoIWxmdClcbiAgICAgICAgY2JmKCk7XG4gICAgdmFyIF9sb29wXzEgPSBmdW5jdGlvbiAoaSkge1xuICAgICAgICB2YXIgZm4gPSBrW2ldO1xuICAgICAgICB2YXIgX2EgPSByW2ZuXSwgZmlsZSA9IF9hWzBdLCBwID0gX2FbMV07XG4gICAgICAgIHZhciBjID0gY3JjKCksIG0gPSBmaWxlLmxlbmd0aDtcbiAgICAgICAgYy5wKGZpbGUpO1xuICAgICAgICB2YXIgbiA9IHN0clRvVTgoZm4pLCBzID0gbi5sZW5ndGg7XG4gICAgICAgIHZhciB0ID0gcC5sZXZlbCA9PSAwID8gMCA6IDg7XG4gICAgICAgIHZhciBjYmwgPSBmdW5jdGlvbiAoZSwgZCkge1xuICAgICAgICAgICAgaWYgKGUpIHtcbiAgICAgICAgICAgICAgICB0QWxsKCk7XG4gICAgICAgICAgICAgICAgY2IoZSwgbnVsbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgbCA9IGQubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGZpbGVzW2ldID0ge1xuICAgICAgICAgICAgICAgICAgICB0OiB0LFxuICAgICAgICAgICAgICAgICAgICBkOiBkLFxuICAgICAgICAgICAgICAgICAgICBtOiBtLFxuICAgICAgICAgICAgICAgICAgICBjOiBjLmQoKSxcbiAgICAgICAgICAgICAgICAgICAgdTogZm4ubGVuZ3RoICE9IGwsXG4gICAgICAgICAgICAgICAgICAgIG46IG4sXG4gICAgICAgICAgICAgICAgICAgIHA6IHBcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIG8gKz0gMzAgKyBzICsgbDtcbiAgICAgICAgICAgICAgICB0b3QgKz0gNzYgKyAyICogcyArIGw7XG4gICAgICAgICAgICAgICAgaWYgKCEtLWxmdClcbiAgICAgICAgICAgICAgICAgICAgY2JmKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGlmIChuLmxlbmd0aCA+IDY1NTM1KVxuICAgICAgICAgICAgY2JsKCdmaWxlbmFtZSB0b28gbG9uZycsIG51bGwpO1xuICAgICAgICBpZiAoIXQpXG4gICAgICAgICAgICBjYmwobnVsbCwgZmlsZSk7XG4gICAgICAgIGVsc2UgaWYgKG0gPCAxNjAwMDApIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY2JsKG51bGwsIGRlZmxhdGVTeW5jKGZpbGUsIHApKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgY2JsKGUsIG51bGwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHRlcm0ucHVzaChkZWZsYXRlKGZpbGUsIHAsIGNibCkpO1xuICAgIH07XG4gICAgLy8gQ2Fubm90IHVzZSBsZnQgYmVjYXVzZSBpdCBjYW4gZGVjcmVhc2VcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNsZnQ7ICsraSkge1xuICAgICAgICBfbG9vcF8xKGkpO1xuICAgIH1cbiAgICByZXR1cm4gdEFsbDtcbn1cbi8qKlxuICogU3luY2hyb25vdXNseSBjcmVhdGVzIGEgWklQIGZpbGUuIFByZWZlciB1c2luZyBgemlwYCBmb3IgYmV0dGVyIHBlcmZvcm1hbmNlXG4gKiB3aXRoIG1vcmUgdGhhbiBvbmUgZmlsZS5cbiAqIEBwYXJhbSBkYXRhIFRoZSBkaXJlY3Rvcnkgc3RydWN0dXJlIGZvciB0aGUgWklQIGFyY2hpdmVcbiAqIEBwYXJhbSBvcHRzIFRoZSBtYWluIG9wdGlvbnMsIG1lcmdlZCB3aXRoIHBlci1maWxlIG9wdGlvbnNcbiAqIEByZXR1cm5zIFRoZSBnZW5lcmF0ZWQgWklQIGFyY2hpdmVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHppcFN5bmMoZGF0YSwgb3B0cykge1xuICAgIGlmIChvcHRzID09PSB2b2lkIDApIHsgb3B0cyA9IHt9OyB9XG4gICAgdmFyIHIgPSB7fTtcbiAgICB2YXIgZmlsZXMgPSBbXTtcbiAgICBmbHRuKGRhdGEsICcnLCByLCBvcHRzKTtcbiAgICB2YXIgbyA9IDA7XG4gICAgdmFyIHRvdCA9IDA7XG4gICAgZm9yICh2YXIgZm4gaW4gcikge1xuICAgICAgICB2YXIgX2EgPSByW2ZuXSwgZmlsZSA9IF9hWzBdLCBwID0gX2FbMV07XG4gICAgICAgIHZhciB0ID0gcC5sZXZlbCA9PSAwID8gMCA6IDg7XG4gICAgICAgIHZhciBuID0gc3RyVG9VOChmbiksIHMgPSBuLmxlbmd0aDtcbiAgICAgICAgaWYgKG4ubGVuZ3RoID4gNjU1MzUpXG4gICAgICAgICAgICB0aHJvdyAnZmlsZW5hbWUgdG9vIGxvbmcnO1xuICAgICAgICB2YXIgZCA9IHQgPyBkZWZsYXRlU3luYyhmaWxlLCBwKSA6IGZpbGUsIGwgPSBkLmxlbmd0aDtcbiAgICAgICAgdmFyIGMgPSBjcmMoKTtcbiAgICAgICAgYy5wKGZpbGUpO1xuICAgICAgICBmaWxlcy5wdXNoKHtcbiAgICAgICAgICAgIHQ6IHQsXG4gICAgICAgICAgICBkOiBkLFxuICAgICAgICAgICAgbTogZmlsZS5sZW5ndGgsXG4gICAgICAgICAgICBjOiBjLmQoKSxcbiAgICAgICAgICAgIHU6IGZuLmxlbmd0aCAhPSBzLFxuICAgICAgICAgICAgbjogbixcbiAgICAgICAgICAgIG86IG8sXG4gICAgICAgICAgICBwOiBwXG4gICAgICAgIH0pO1xuICAgICAgICBvICs9IDMwICsgcyArIGw7XG4gICAgICAgIHRvdCArPSA3NiArIDIgKiBzICsgbDtcbiAgICB9XG4gICAgdmFyIG91dCA9IG5ldyB1OCh0b3QgKyAyMiksIG9lID0gbywgY2RsID0gdG90IC0gbztcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGZpbGVzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHZhciBmID0gZmlsZXNbaV07XG4gICAgICAgIHd6aChvdXQsIGYubywgZi5jLCBmLmQsIGYubSwgZi5uLCBmLnUsIGYucCwgbnVsbCwgZi50KTtcbiAgICAgICAgd3poKG91dCwgbywgZi5jLCBmLmQsIGYubSwgZi5uLCBmLnUsIGYucCwgZi5vLCBmLnQpLCBvICs9IDQ2ICsgZi5uLmxlbmd0aDtcbiAgICB9XG4gICAgd3pmKG91dCwgbywgZmlsZXMubGVuZ3RoLCBjZGwsIG9lKTtcbiAgICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBBc3luY2hyb25vdXNseSBkZWNvbXByZXNzZXMgYSBaSVAgYXJjaGl2ZVxuICogQHBhcmFtIGRhdGEgVGhlIHJhdyBjb21wcmVzc2VkIFpJUCBmaWxlXG4gKiBAcGFyYW0gY2IgVGhlIGNhbGxiYWNrIHRvIGNhbGwgd2l0aCB0aGUgZGVjb21wcmVzc2VkIGZpbGVzXG4gKiBAcmV0dXJucyBBIGZ1bmN0aW9uIHRoYXQgY2FuIGJlIHVzZWQgdG8gaW1tZWRpYXRlbHkgdGVybWluYXRlIHRoZSB1bnppcHBpbmdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVuemlwKGRhdGEsIGNiKSB7XG4gICAgaWYgKHR5cGVvZiBjYiAhPSAnZnVuY3Rpb24nKVxuICAgICAgICB0aHJvdyAnbm8gY2FsbGJhY2snO1xuICAgIHZhciB0ZXJtID0gW107XG4gICAgdmFyIHRBbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGVybS5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgIHRlcm1baV0oKTtcbiAgICB9O1xuICAgIHZhciBmaWxlcyA9IHt9O1xuICAgIHZhciBlID0gZGF0YS5sZW5ndGggLSAyMjtcbiAgICBmb3IgKDsgYjQoZGF0YSwgZSkgIT0gMHg2MDU0QjUwOyAtLWUpIHtcbiAgICAgICAgaWYgKCFlIHx8IGRhdGEubGVuZ3RoIC0gZSA+IDY1NTU4KSB7XG4gICAgICAgICAgICBjYignaW52YWxpZCB6aXAgZmlsZScsIG51bGwpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfVxuICAgIDtcbiAgICB2YXIgbGZ0ID0gYjIoZGF0YSwgZSArIDgpO1xuICAgIGlmICghbGZ0KVxuICAgICAgICBjYihudWxsLCB7fSk7XG4gICAgdmFyIGMgPSBsZnQ7XG4gICAgdmFyIG8gPSBiNChkYXRhLCBlICsgMTYpO1xuICAgIHZhciB6ID0gbyA9PSA0Mjk0OTY3Mjk1O1xuICAgIGlmICh6KSB7XG4gICAgICAgIGUgPSBiNChkYXRhLCBlIC0gMTIpO1xuICAgICAgICBpZiAoYjQoZGF0YSwgZSkgIT0gMHg2MDY0QjUwKVxuICAgICAgICAgICAgdGhyb3cgJ2ludmFsaWQgemlwIGZpbGUnO1xuICAgICAgICBjID0gbGZ0ID0gYjQoZGF0YSwgZSArIDMyKTtcbiAgICAgICAgbyA9IGI0KGRhdGEsIGUgKyA0OCk7XG4gICAgfVxuICAgIHZhciBfbG9vcF8yID0gZnVuY3Rpb24gKGkpIHtcbiAgICAgICAgdmFyIF9hID0gemgoZGF0YSwgbywgeiksIGNfMSA9IF9hWzBdLCBzYyA9IF9hWzFdLCBzdSA9IF9hWzJdLCBmbiA9IF9hWzNdLCBubyA9IF9hWzRdLCBvZmYgPSBfYVs1XSwgYiA9IHNsemgoZGF0YSwgb2ZmKTtcbiAgICAgICAgbyA9IG5vO1xuICAgICAgICB2YXIgY2JsID0gZnVuY3Rpb24gKGUsIGQpIHtcbiAgICAgICAgICAgIGlmIChlKSB7XG4gICAgICAgICAgICAgICAgdEFsbCgpO1xuICAgICAgICAgICAgICAgIGNiKGUsIG51bGwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZmlsZXNbZm5dID0gZDtcbiAgICAgICAgICAgICAgICBpZiAoIS0tbGZ0KVxuICAgICAgICAgICAgICAgICAgICBjYihudWxsLCBmaWxlcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGlmICghY18xKVxuICAgICAgICAgICAgY2JsKG51bGwsIHNsYyhkYXRhLCBiLCBiICsgc2MpKTtcbiAgICAgICAgZWxzZSBpZiAoY18xID09IDgpIHtcbiAgICAgICAgICAgIHZhciBpbmZsID0gZGF0YS5zdWJhcnJheShiLCBiICsgc2MpO1xuICAgICAgICAgICAgaWYgKHNjIDwgMzIwMDAwKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgY2JsKG51bGwsIGluZmxhdGVTeW5jKGluZmwsIG5ldyB1OChzdSkpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY2JsKGUsIG51bGwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICB0ZXJtLnB1c2goaW5mbGF0ZShpbmZsLCB7IHNpemU6IHN1IH0sIGNibCkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGNibCgndW5rbm93biBjb21wcmVzc2lvbiB0eXBlICcgKyBjXzEsIG51bGwpO1xuICAgIH07XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjOyArK2kpIHtcbiAgICAgICAgX2xvb3BfMihpKTtcbiAgICB9XG4gICAgcmV0dXJuIHRBbGw7XG59XG4vKipcbiAqIFN5bmNocm9ub3VzbHkgZGVjb21wcmVzc2VzIGEgWklQIGFyY2hpdmUuIFByZWZlciB1c2luZyBgdW56aXBgIGZvciBiZXR0ZXJcbiAqIHBlcmZvcm1hbmNlIHdpdGggbW9yZSB0aGFuIG9uZSBmaWxlLlxuICogQHBhcmFtIGRhdGEgVGhlIHJhdyBjb21wcmVzc2VkIFpJUCBmaWxlXG4gKiBAcmV0dXJucyBUaGUgZGVjb21wcmVzc2VkIGZpbGVzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1bnppcFN5bmMoZGF0YSkge1xuICAgIHZhciBmaWxlcyA9IHt9O1xuICAgIHZhciBlID0gZGF0YS5sZW5ndGggLSAyMjtcbiAgICBmb3IgKDsgYjQoZGF0YSwgZSkgIT0gMHg2MDU0QjUwOyAtLWUpIHtcbiAgICAgICAgaWYgKCFlIHx8IGRhdGEubGVuZ3RoIC0gZSA+IDY1NTU4KVxuICAgICAgICAgICAgdGhyb3cgJ2ludmFsaWQgemlwIGZpbGUnO1xuICAgIH1cbiAgICA7XG4gICAgdmFyIGMgPSBiMihkYXRhLCBlICsgOCk7XG4gICAgaWYgKCFjKVxuICAgICAgICByZXR1cm4ge307XG4gICAgdmFyIG8gPSBiNChkYXRhLCBlICsgMTYpO1xuICAgIHZhciB6ID0gbyA9PSA0Mjk0OTY3Mjk1O1xuICAgIGlmICh6KSB7XG4gICAgICAgIGUgPSBiNChkYXRhLCBlIC0gMTIpO1xuICAgICAgICBpZiAoYjQoZGF0YSwgZSkgIT0gMHg2MDY0QjUwKVxuICAgICAgICAgICAgdGhyb3cgJ2ludmFsaWQgemlwIGZpbGUnO1xuICAgICAgICBjID0gYjQoZGF0YSwgZSArIDMyKTtcbiAgICAgICAgbyA9IGI0KGRhdGEsIGUgKyA0OCk7XG4gICAgfVxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYzsgKytpKSB7XG4gICAgICAgIHZhciBfYSA9IHpoKGRhdGEsIG8sIHopLCBjXzIgPSBfYVswXSwgc2MgPSBfYVsxXSwgc3UgPSBfYVsyXSwgZm4gPSBfYVszXSwgbm8gPSBfYVs0XSwgb2ZmID0gX2FbNV0sIGIgPSBzbHpoKGRhdGEsIG9mZik7XG4gICAgICAgIG8gPSBubztcbiAgICAgICAgaWYgKCFjXzIpXG4gICAgICAgICAgICBmaWxlc1tmbl0gPSBzbGMoZGF0YSwgYiwgYiArIHNjKTtcbiAgICAgICAgZWxzZSBpZiAoY18yID09IDgpXG4gICAgICAgICAgICBmaWxlc1tmbl0gPSBpbmZsYXRlU3luYyhkYXRhLnN1YmFycmF5KGIsIGIgKyBzYyksIG5ldyB1OChzdSkpO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICB0aHJvdyAndW5rbm93biBjb21wcmVzc2lvbiB0eXBlICcgKyBjXzI7XG4gICAgfVxuICAgIHJldHVybiBmaWxlcztcbn1cbiIsICJpbXBvcnQgeyBfYmFzZTY0RW5jb2RlLCBfZWFjaCB9IGZyb20gJy4vdXRpbHMnXG5pbXBvcnQgQ29uZmlnIGZyb20gJy4vY29uZmlnJ1xuaW1wb3J0IHsgQ29tcHJlc3Npb24sIFJlcXVlc3RPcHRpb25zLCBSZXF1ZXN0UmVzcG9uc2UgfSBmcm9tICcuL3R5cGVzJ1xuaW1wb3J0IHsgX2Zvcm1EYXRhVG9RdWVyeSB9IGZyb20gJy4vdXRpbHMvcmVxdWVzdC11dGlscydcblxuaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSAnLi91dGlscy9sb2dnZXInXG5pbXBvcnQgeyBmZXRjaCwgZG9jdW1lbnQsIHdpbmRvdywgWE1MSHR0cFJlcXVlc3QsIEFib3J0Q29udHJvbGxlciB9IGZyb20gJy4vdXRpbHMvZ2xvYmFscydcbmltcG9ydCB7IGd6aXBTeW5jLCBzdHJUb1U4IH0gZnJvbSAnZmZsYXRlJ1xuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY29tcGF0L2NvbXBhdFxuZXhwb3J0IGNvbnN0IFNVUFBPUlRTX1JFUVVFU1QgPSAhIVhNTEh0dHBSZXF1ZXN0IHx8ICEhZmV0Y2hcblxuLy8gVGhpcyBpcyB0aGUgZW50cnlwb2ludC4gSXQgdGFrZXMgY2FyZSBvZiBzYW5pdGl6aW5nIHRoZSBvcHRpb25zIGFuZCB0aGVuIGNhbGxzIHRoZSBhcHByb3ByaWF0ZSByZXF1ZXN0IG1ldGhvZC5cbmV4cG9ydCBjb25zdCByZXF1ZXN0ID0gKF9vcHRpb25zOiBSZXF1ZXN0T3B0aW9ucykgPT4ge1xuICAgIC8vIENsb25lIHRoZSBvcHRpb25zIHNvIHdlIGRvbid0IG1vZGlmeSB0aGUgb3JpZ2luYWwgb2JqZWN0XG4gICAgY29uc3Qgb3B0aW9ucyA9IHsgLi4uX29wdGlvbnMgfVxuICAgIG9wdGlvbnMudGltZW91dCA9IG9wdGlvbnMudGltZW91dCB8fCA2MDAwMFxuXG4gICAgb3B0aW9ucy51cmwgPSBleHRlbmRVUkxQYXJhbXMob3B0aW9ucy51cmwsIHtcbiAgICAgICAgXzogbmV3IERhdGUoKS5nZXRUaW1lKCkudG9TdHJpbmcoKSxcbiAgICAgICAgdmVyOiBDb25maWcuTElCX1ZFUlNJT04sXG4gICAgICAgIGNvbXByZXNzaW9uOiBvcHRpb25zLmNvbXByZXNzaW9uLFxuICAgIH0pXG5cbiAgICBpZiAob3B0aW9ucy50cmFuc3BvcnQgPT09ICdzZW5kQmVhY29uJyAmJiB3aW5kb3c/Lm5hdmlnYXRvcj8uc2VuZEJlYWNvbikge1xuICAgICAgICByZXR1cm4gc2VuZEJlYWNvbihvcHRpb25zKVxuICAgIH1cblxuICAgIC8vIE5PVEU6IFVudGlsIHdlIGFyZSBjb25maWRlbnQgd2l0aCBpdCwgd2Ugb25seSB1c2UgZmV0Y2ggaWYgZXhwbGljaXRseSB0b2xkIHNvXG4gICAgLy8gQXQgc29tZSBwb2ludCB3ZSB3aWxsIG1ha2UgaXQgdGhlIGRlZmF1bHQgb3ZlciB4aHJcbiAgICBpZiAob3B0aW9ucy50cmFuc3BvcnQgPT09ICdmZXRjaCcgJiYgZmV0Y2gpIHtcbiAgICAgICAgcmV0dXJuIF9mZXRjaChvcHRpb25zKVxuICAgIH1cblxuICAgIGlmIChYTUxIdHRwUmVxdWVzdCB8fCAhZG9jdW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIHhocihvcHRpb25zKVxuICAgIH1cblxuICAgIC8vIEZpbmFsIGZhbGxiYWNrIGlmIGV2ZXJ5dGhpbmcgZWxzZSBmYWlscy4uLlxuICAgIHNjcmlwdFJlcXVlc3Qob3B0aW9ucylcbn1cblxuZXhwb3J0IGNvbnN0IGV4dGVuZFVSTFBhcmFtcyA9ICh1cmw6IHN0cmluZywgcGFyYW1zOiBSZWNvcmQ8c3RyaW5nLCBhbnk+KTogc3RyaW5nID0+IHtcbiAgICBjb25zdCBbYmFzZVVybCwgc2VhcmNoXSA9IHVybC5zcGxpdCgnPycpXG4gICAgY29uc3QgbmV3UGFyYW1zID0geyAuLi5wYXJhbXMgfVxuXG4gICAgc2VhcmNoPy5zcGxpdCgnJicpLmZvckVhY2goKHBhaXIpID0+IHtcbiAgICAgICAgY29uc3QgW2tleV0gPSBwYWlyLnNwbGl0KCc9JylcbiAgICAgICAgZGVsZXRlIG5ld1BhcmFtc1trZXldXG4gICAgfSlcblxuICAgIGxldCBuZXdTZWFyY2ggPSBfZm9ybURhdGFUb1F1ZXJ5KG5ld1BhcmFtcylcbiAgICBuZXdTZWFyY2ggPSBuZXdTZWFyY2ggPyAoc2VhcmNoID8gc2VhcmNoICsgJyYnIDogJycpICsgbmV3U2VhcmNoIDogc2VhcmNoXG5cbiAgICByZXR1cm4gYCR7YmFzZVVybH0/JHtuZXdTZWFyY2h9YFxufVxuXG5jb25zdCBlbmNvZGVUb0RhdGFTdHJpbmcgPSAoZGF0YTogc3RyaW5nIHwgUmVjb3JkPHN0cmluZywgYW55Pik6IHN0cmluZyA9PiB7XG4gICAgcmV0dXJuICdkYXRhPScgKyBlbmNvZGVVUklDb21wb25lbnQodHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnID8gZGF0YSA6IEpTT04uc3RyaW5naWZ5KGRhdGEpKVxufVxuXG5jb25zdCBlbmNvZGVQb3N0RGF0YSA9ICh7IGRhdGEsIGNvbXByZXNzaW9uLCB0cmFuc3BvcnQsIG1ldGhvZCB9OiBSZXF1ZXN0T3B0aW9ucyk6IHN0cmluZyB8IEJsb2JQYXJ0IHwgbnVsbCA9PiB7XG4gICAgaWYgKCFkYXRhKSB7XG4gICAgICAgIHJldHVybiBudWxsXG4gICAgfVxuXG4gICAgaWYgKGNvbXByZXNzaW9uID09PSBDb21wcmVzc2lvbi5HWmlwSlMpIHtcbiAgICAgICAgY29uc3QgZ3ppcERhdGEgPSBnemlwU3luYyhzdHJUb1U4KEpTT04uc3RyaW5naWZ5KGRhdGEpKSwgeyBtdGltZTogMCB9KVxuICAgICAgICByZXR1cm4gbmV3IEJsb2IoW2d6aXBEYXRhXSwgeyB0eXBlOiAndGV4dC9wbGFpbicgfSlcbiAgICB9XG5cbiAgICBpZiAoY29tcHJlc3Npb24gPT09IENvbXByZXNzaW9uLkJhc2U2NCkge1xuICAgICAgICBjb25zdCBiNjRkYXRhID0gX2Jhc2U2NEVuY29kZShKU09OLnN0cmluZ2lmeShkYXRhKSlcbiAgICAgICAgcmV0dXJuIGVuY29kZVRvRGF0YVN0cmluZyhiNjRkYXRhKVxuICAgIH1cblxuICAgIGlmICh0cmFuc3BvcnQgPT09ICdzZW5kQmVhY29uJykge1xuICAgICAgICBjb25zdCBib2R5ID0gZW5jb2RlVG9EYXRhU3RyaW5nKGRhdGEpXG4gICAgICAgIHJldHVybiBuZXcgQmxvYihbYm9keV0sIHsgdHlwZTogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcgfSlcbiAgICB9XG5cbiAgICBpZiAobWV0aG9kICE9PSAnUE9TVCcpIHtcbiAgICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG5cbiAgICByZXR1cm4gZW5jb2RlVG9EYXRhU3RyaW5nKGRhdGEpXG59XG5cbmNvbnN0IHhociA9IChvcHRpb25zOiBSZXF1ZXN0T3B0aW9ucykgPT4ge1xuICAgIGNvbnN0IHJlcSA9IG5ldyBYTUxIdHRwUmVxdWVzdCEoKVxuICAgIHJlcS5vcGVuKG9wdGlvbnMubWV0aG9kIHx8ICdHRVQnLCBvcHRpb25zLnVybCwgdHJ1ZSlcbiAgICBjb25zdCBib2R5ID0gZW5jb2RlUG9zdERhdGEob3B0aW9ucylcblxuICAgIF9lYWNoKG9wdGlvbnMuaGVhZGVycywgZnVuY3Rpb24gKGhlYWRlclZhbHVlLCBoZWFkZXJOYW1lKSB7XG4gICAgICAgIHJlcS5zZXRSZXF1ZXN0SGVhZGVyKGhlYWRlck5hbWUsIGhlYWRlclZhbHVlKVxuICAgIH0pXG5cbiAgICBpZiAob3B0aW9ucy5tZXRob2QgPT09ICdQT1NUJyAmJiB0eXBlb2YgYm9keSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmVxLnNldFJlcXVlc3RIZWFkZXIoJ0NvbnRlbnQtVHlwZScsICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnKVxuICAgIH1cblxuICAgIGlmIChvcHRpb25zLnRpbWVvdXQpIHtcbiAgICAgICAgcmVxLnRpbWVvdXQgPSBvcHRpb25zLnRpbWVvdXRcbiAgICB9XG4gICAgLy8gc2VuZCB0aGUgcGhfb3B0b3V0IGNvb2tpZVxuICAgIC8vIHdpdGhDcmVkZW50aWFscyBjYW5ub3QgYmUgbW9kaWZpZWQgdW50aWwgYWZ0ZXIgY2FsbGluZyAub3BlbiBvbiBBbmRyb2lkIGFuZCBNb2JpbGUgU2FmYXJpXG4gICAgcmVxLndpdGhDcmVkZW50aWFscyA9IHRydWVcbiAgICByZXEub25yZWFkeXN0YXRlY2hhbmdlID0gKCkgPT4ge1xuICAgICAgICAvLyBYTUxIdHRwUmVxdWVzdC5ET05FID09IDQsIGV4Y2VwdCBpbiBzYWZhcmkgNFxuICAgICAgICBpZiAocmVxLnJlYWR5U3RhdGUgPT09IDQpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlOiBSZXF1ZXN0UmVzcG9uc2UgPSB7XG4gICAgICAgICAgICAgICAgc3RhdHVzQ29kZTogcmVxLnN0YXR1cyxcbiAgICAgICAgICAgICAgICB0ZXh0OiByZXEucmVzcG9uc2VUZXh0LFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlcS5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmpzb24gPSBKU09OLnBhcnNlKHJlcS5yZXNwb25zZVRleHQpXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBsb2dnZXIuZXJyb3IoZSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIG9wdGlvbnMuY2FsbGJhY2s/LihyZXNwb25zZSlcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXEuc2VuZChib2R5KVxufVxuXG5jb25zdCBfZmV0Y2ggPSAob3B0aW9uczogUmVxdWVzdE9wdGlvbnMpID0+IHtcbiAgICBjb25zdCBib2R5ID0gZW5jb2RlUG9zdERhdGEob3B0aW9ucylcblxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjb21wYXQvY29tcGF0XG4gICAgY29uc3QgaGVhZGVycyA9IG5ldyBIZWFkZXJzKClcbiAgICBfZWFjaChoZWFkZXJzLCBmdW5jdGlvbiAoaGVhZGVyVmFsdWUsIGhlYWRlck5hbWUpIHtcbiAgICAgICAgaGVhZGVycy5hcHBlbmQoaGVhZGVyTmFtZSwgaGVhZGVyVmFsdWUpXG4gICAgfSlcblxuICAgIGlmIChvcHRpb25zLm1ldGhvZCA9PT0gJ1BPU1QnICYmIHR5cGVvZiBib2R5ID09PSAnc3RyaW5nJykge1xuICAgICAgICBoZWFkZXJzLmFwcGVuZCgnQ29udGVudC1UeXBlJywgJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcpXG4gICAgfVxuXG4gICAgY29uc3QgdXJsID0gb3B0aW9ucy51cmxcbiAgICBsZXQgYWJvcnRlcjogeyBzaWduYWw6IGFueTsgdGltZW91dDogbnVtYmVyIH0gfCBudWxsID0gbnVsbFxuXG4gICAgaWYgKEFib3J0Q29udHJvbGxlcikge1xuICAgICAgICBjb25zdCBjb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpXG4gICAgICAgIGFib3J0ZXIgPSB7XG4gICAgICAgICAgICBzaWduYWw6IGNvbnRyb2xsZXIuc2lnbmFsLFxuICAgICAgICAgICAgdGltZW91dDogc2V0VGltZW91dCgoKSA9PiBjb250cm9sbGVyLmFib3J0KCksIG9wdGlvbnMudGltZW91dCksXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmZXRjaCEodXJsLCB7XG4gICAgICAgIG1ldGhvZDogb3B0aW9ucz8ubWV0aG9kIHx8ICdHRVQnLFxuICAgICAgICBoZWFkZXJzLFxuICAgICAgICBrZWVwYWxpdmU6IG9wdGlvbnMubWV0aG9kID09PSAnUE9TVCcsXG4gICAgICAgIGJvZHksXG4gICAgICAgIHNpZ25hbDogYWJvcnRlcj8uc2lnbmFsLFxuICAgIH0pXG4gICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLnRleHQoKS50aGVuKChyZXNwb25zZVRleHQpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXM6IFJlcXVlc3RSZXNwb25zZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzQ29kZTogcmVzcG9uc2Uuc3RhdHVzLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiByZXNwb25zZVRleHQsXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXMuanNvbiA9IEpTT04ucGFyc2UocmVzcG9uc2VUZXh0KVxuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoZSlcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIG9wdGlvbnMuY2FsbGJhY2s/LihyZXMpXG4gICAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoZXJyb3IpXG4gICAgICAgICAgICBvcHRpb25zLmNhbGxiYWNrPy4oeyBzdGF0dXNDb2RlOiAwLCB0ZXh0OiBlcnJvciB9KVxuICAgICAgICB9KVxuICAgICAgICAuZmluYWxseSgoKSA9PiAoYWJvcnRlciA/IGNsZWFyVGltZW91dChhYm9ydGVyLnRpbWVvdXQpIDogbnVsbCkpXG5cbiAgICByZXR1cm5cbn1cblxuY29uc3Qgc2VuZEJlYWNvbiA9IChvcHRpb25zOiBSZXF1ZXN0T3B0aW9ucykgPT4ge1xuICAgIC8vIGJlYWNvbiBkb2N1bWVudGF0aW9uIGh0dHBzOi8vdzNjLmdpdGh1Yi5pby9iZWFjb24vXG4gICAgLy8gYmVhY29ucyBmb3JtYXQgdGhlIG1lc3NhZ2UgYW5kIHVzZSB0aGUgdHlwZSBwcm9wZXJ0eVxuICAgIHRyeSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjb21wYXQvY29tcGF0XG4gICAgICAgIHdpbmRvdz8ubmF2aWdhdG9yPy5zZW5kQmVhY29uKG9wdGlvbnMudXJsLCBlbmNvZGVQb3N0RGF0YShvcHRpb25zKSlcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIC8vIHNlbmQgYmVhY29uIGlzIGEgYmVzdC1lZmZvcnQsIGZpcmUtYW5kLWZvcmdldCBtZWNoYW5pc20gb24gcGFnZSB1bmxvYWQsXG4gICAgICAgIC8vIHdlIGRvbid0IHdhbnQgdG8gdGhyb3cgZXJyb3JzIGhlcmVcbiAgICB9XG59XG5cbmNvbnN0IHNjcmlwdFJlcXVlc3QgPSAob3B0aW9uczogUmVxdWVzdE9wdGlvbnMpID0+IHtcbiAgICBpZiAoIWRvY3VtZW50KSB7XG4gICAgICAgIHJldHVyblxuICAgIH1cbiAgICBjb25zdCBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKVxuICAgIHNjcmlwdC50eXBlID0gJ3RleHQvamF2YXNjcmlwdCdcbiAgICBzY3JpcHQuYXN5bmMgPSB0cnVlXG4gICAgc2NyaXB0LmRlZmVyID0gdHJ1ZVxuICAgIHNjcmlwdC5zcmMgPSBvcHRpb25zLnVybFxuICAgIGNvbnN0IHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc2NyaXB0JylbMF1cbiAgICBzLnBhcmVudE5vZGU/Lmluc2VydEJlZm9yZShzY3JpcHQsIHMpXG59XG4iLCAiaW1wb3J0IHsgUmV0cmlhYmxlUmVxdWVzdE9wdGlvbnMgfSBmcm9tICcuL3R5cGVzJ1xuXG5pbXBvcnQgeyBfaXNOdW1iZXIsIF9pc1VuZGVmaW5lZCB9IGZyb20gJy4vdXRpbHMvdHlwZS11dGlscydcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJy4vdXRpbHMvbG9nZ2VyJ1xuaW1wb3J0IHsgd2luZG93IH0gZnJvbSAnLi91dGlscy9nbG9iYWxzJ1xuaW1wb3J0IHsgUG9zdEhvZyB9IGZyb20gJy4vcG9zdGhvZy1jb3JlJ1xuaW1wb3J0IHsgZXh0ZW5kVVJMUGFyYW1zIH0gZnJvbSAnLi9yZXF1ZXN0J1xuXG5jb25zdCB0aGlydHlNaW51dGVzID0gMzAgKiA2MCAqIDEwMDBcblxuLyoqXG4gKiBHZW5lcmF0ZXMgYSBqaXR0ZXItZWQgZXhwb25lbnRpYWwgYmFja29mZiBkZWxheSBpbiBtaWxsaXNlY29uZHNcbiAqXG4gKiBUaGUgYmFzZSB2YWx1ZSBpcyA2IHNlY29uZHMsIHdoaWNoIGlzIGRvdWJsZWQgd2l0aCBlYWNoIHJldHJ5XG4gKiB1cCB0byB0aGUgbWF4aW11bSBvZiAzMCBtaW51dGVzXG4gKlxuICogRWFjaCB2YWx1ZSB0aGVuIGhhcyArLy0gNTAlIGppdHRlclxuICpcbiAqIEdpdmluZyBhIHJhbmdlIG9mIDYgc2Vjb25kcyB1cCB0byA0NSBtaW51dGVzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwaWNrTmV4dFJldHJ5RGVsYXkocmV0cmllc1BlcmZvcm1lZFNvRmFyOiBudW1iZXIpOiBudW1iZXIge1xuICAgIGNvbnN0IHJhd0JhY2tvZmZUaW1lID0gMzAwMCAqIDIgKiogcmV0cmllc1BlcmZvcm1lZFNvRmFyXG4gICAgY29uc3QgbWluQmFja29mZiA9IHJhd0JhY2tvZmZUaW1lIC8gMlxuICAgIGNvbnN0IGNhcHBlZEJhY2tvZmZUaW1lID0gTWF0aC5taW4odGhpcnR5TWludXRlcywgcmF3QmFja29mZlRpbWUpXG4gICAgY29uc3Qgaml0dGVyRnJhY3Rpb24gPSBNYXRoLnJhbmRvbSgpIC0gMC41IC8vIEEgcmFuZG9tIG51bWJlciBiZXR3ZWVuIC0wLjUgYW5kIDAuNVxuICAgIGNvbnN0IGppdHRlciA9IGppdHRlckZyYWN0aW9uICogKGNhcHBlZEJhY2tvZmZUaW1lIC0gbWluQmFja29mZilcbiAgICByZXR1cm4gTWF0aC5jZWlsKGNhcHBlZEJhY2tvZmZUaW1lICsgaml0dGVyKVxufVxuXG5pbnRlcmZhY2UgUmV0cnlRdWV1ZUVsZW1lbnQge1xuICAgIHJldHJ5QXQ6IG51bWJlclxuICAgIHJlcXVlc3RPcHRpb25zOiBSZXRyaWFibGVSZXF1ZXN0T3B0aW9uc1xufVxuXG5leHBvcnQgY2xhc3MgUmV0cnlRdWV1ZSB7XG4gICAgcHJpdmF0ZSBpc1BvbGxpbmc6IGJvb2xlYW4gPSBmYWxzZSAvLyBmbGFnIHRvIGNvbnRpbnVlIHRvIHJlY3Vyc2l2ZWx5IHBvbGwgb3Igbm90XG4gICAgcHJpdmF0ZSBwb2xsZXI6IG51bWJlciB8IHVuZGVmaW5lZCAvLyB0byBiZWNvbWUgaW50ZXJ2YWwgZm9yIHJlZmVyZW5jZSB0byBjbGVhciBsYXRlclxuICAgIHByaXZhdGUgcG9sbEludGVydmFsTXM6IG51bWJlciA9IDMwMDBcbiAgICBwcml2YXRlIHF1ZXVlOiBSZXRyeVF1ZXVlRWxlbWVudFtdID0gW11cbiAgICBwcml2YXRlIGFyZVdlT25saW5lOiBib29sZWFuXG5cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIGluc3RhbmNlOiBQb3N0SG9nKSB7XG4gICAgICAgIHRoaXMucXVldWUgPSBbXVxuICAgICAgICB0aGlzLmFyZVdlT25saW5lID0gdHJ1ZVxuXG4gICAgICAgIGlmICghX2lzVW5kZWZpbmVkKHdpbmRvdykgJiYgJ29uTGluZScgaW4gd2luZG93Lm5hdmlnYXRvcikge1xuICAgICAgICAgICAgdGhpcy5hcmVXZU9ubGluZSA9IHdpbmRvdy5uYXZpZ2F0b3Iub25MaW5lXG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignb25saW5lJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuYXJlV2VPbmxpbmUgPSB0cnVlXG4gICAgICAgICAgICAgICAgdGhpcy5mbHVzaCgpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ29mZmxpbmUnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5hcmVXZU9ubGluZSA9IGZhbHNlXG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0cmlhYmxlUmVxdWVzdCh7IHJldHJpZXNQZXJmb3JtZWRTb0ZhciwgLi4ub3B0aW9ucyB9OiBSZXRyaWFibGVSZXF1ZXN0T3B0aW9ucyk6IHZvaWQge1xuICAgICAgICBpZiAoX2lzTnVtYmVyKHJldHJpZXNQZXJmb3JtZWRTb0ZhcikgJiYgcmV0cmllc1BlcmZvcm1lZFNvRmFyID4gMCkge1xuICAgICAgICAgICAgb3B0aW9ucy51cmwgPSBleHRlbmRVUkxQYXJhbXMob3B0aW9ucy51cmwsIHsgcmV0cnlfY291bnQ6IHJldHJpZXNQZXJmb3JtZWRTb0ZhciB9KVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5pbnN0YW5jZS5fc2VuZF9yZXF1ZXN0KHtcbiAgICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgICAgICBjYWxsYmFjazogKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1c0NvZGUgIT09IDIwMCAmJiAocmVzcG9uc2Uuc3RhdHVzQ29kZSA8IDQwMCB8fCByZXNwb25zZS5zdGF0dXNDb2RlID49IDUwMCkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKChyZXRyaWVzUGVyZm9ybWVkU29GYXIgPz8gMCkgPCAxMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgb3B0aW9ucy5jYWxsYmFjaz8uKHJlc3BvbnNlKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBwcml2YXRlIGVucXVldWUocmVxdWVzdE9wdGlvbnM6IFJldHJpYWJsZVJlcXVlc3RPcHRpb25zKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHJldHJpZXNQZXJmb3JtZWRTb0ZhciA9IHJlcXVlc3RPcHRpb25zLnJldHJpZXNQZXJmb3JtZWRTb0ZhciB8fCAwXG4gICAgICAgIHJlcXVlc3RPcHRpb25zLnJldHJpZXNQZXJmb3JtZWRTb0ZhciA9IHJldHJpZXNQZXJmb3JtZWRTb0ZhciArIDFcblxuICAgICAgICBjb25zdCBtc1RvTmV4dFJldHJ5ID0gcGlja05leHRSZXRyeURlbGF5KHJldHJpZXNQZXJmb3JtZWRTb0ZhcilcbiAgICAgICAgY29uc3QgcmV0cnlBdCA9IERhdGUubm93KCkgKyBtc1RvTmV4dFJldHJ5XG5cbiAgICAgICAgdGhpcy5xdWV1ZS5wdXNoKHsgcmV0cnlBdCwgcmVxdWVzdE9wdGlvbnMgfSlcblxuICAgICAgICBsZXQgbG9nTWVzc2FnZSA9IGBFbnF1ZXVlZCBmYWlsZWQgcmVxdWVzdCBmb3IgcmV0cnkgaW4gJHttc1RvTmV4dFJldHJ5fWBcbiAgICAgICAgaWYgKCFuYXZpZ2F0b3Iub25MaW5lKSB7XG4gICAgICAgICAgICBsb2dNZXNzYWdlICs9ICcgKEJyb3dzZXIgaXMgb2ZmbGluZSknXG4gICAgICAgIH1cbiAgICAgICAgbG9nZ2VyLndhcm4obG9nTWVzc2FnZSlcblxuICAgICAgICBpZiAoIXRoaXMuaXNQb2xsaW5nKSB7XG4gICAgICAgICAgICB0aGlzLmlzUG9sbGluZyA9IHRydWVcbiAgICAgICAgICAgIHRoaXMucG9sbCgpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHBvbGwoKTogdm9pZCB7XG4gICAgICAgIHRoaXMucG9sbGVyICYmIGNsZWFyVGltZW91dCh0aGlzLnBvbGxlcilcbiAgICAgICAgdGhpcy5wb2xsZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLmFyZVdlT25saW5lICYmIHRoaXMucXVldWUubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZmx1c2goKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wb2xsKClcbiAgICAgICAgfSwgdGhpcy5wb2xsSW50ZXJ2YWxNcykgYXMgYW55IGFzIG51bWJlclxuICAgIH1cblxuICAgIHByaXZhdGUgZmx1c2goKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KClcbiAgICAgICAgY29uc3Qgbm90VG9GbHVzaDogUmV0cnlRdWV1ZUVsZW1lbnRbXSA9IFtdXG4gICAgICAgIGNvbnN0IHRvRmx1c2ggPSB0aGlzLnF1ZXVlLmZpbHRlcigoaXRlbSkgPT4ge1xuICAgICAgICAgICAgaWYgKGl0ZW0ucmV0cnlBdCA8IG5vdykge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBub3RUb0ZsdXNoLnB1c2goaXRlbSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICB9KVxuXG4gICAgICAgIHRoaXMucXVldWUgPSBub3RUb0ZsdXNoXG5cbiAgICAgICAgaWYgKHRvRmx1c2gubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgZm9yIChjb25zdCB7IHJlcXVlc3RPcHRpb25zIH0gb2YgdG9GbHVzaCkge1xuICAgICAgICAgICAgICAgIHRoaXMucmV0cmlhYmxlUmVxdWVzdChyZXF1ZXN0T3B0aW9ucylcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHVubG9hZCgpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMucG9sbGVyKSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5wb2xsZXIpXG4gICAgICAgICAgICB0aGlzLnBvbGxlciA9IHVuZGVmaW5lZFxuICAgICAgICB9XG5cbiAgICAgICAgZm9yIChjb25zdCB7IHJlcXVlc3RPcHRpb25zIH0gb2YgdGhpcy5xdWV1ZSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAvLyB3ZSd2ZSBoYWQgc2VuZCBiZWFjb24gaW4gcGxhY2UgZm9yIGF0IGxlYXN0IDIgeWVhcnNcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY29tcGF0L2NvbXBhdFxuICAgICAgICAgICAgICAgIHRoaXMuaW5zdGFuY2UuX3NlbmRfcmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgICAgIC4uLnJlcXVlc3RPcHRpb25zLFxuICAgICAgICAgICAgICAgICAgICB0cmFuc3BvcnQ6ICdzZW5kQmVhY29uJyxcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIC8vIE5vdGUgc2VuZEJlYWNvbiBhdXRvbWF0aWNhbGx5IHJldHJpZXMsIGFuZCBhZnRlciB0aGUgZmlyc3QgcmV0cnkgaXQgd2lsbCBsb3NlIHJlZmVyZW5jZSB0byBjb250ZXh0dWFsIGB0aGlzYC5cbiAgICAgICAgICAgICAgICAvLyBUaGlzIG1lYW5zIGluIHNvbWUgY2FzZXMgYHRoaXMuZ2V0Q29uZmlnYCB3aWxsIGJlIHVuZGVmaW5lZC5cbiAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoZSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnF1ZXVlID0gW11cbiAgICB9XG59XG4iLCAiaW1wb3J0IHsgUG9zdEhvZyB9IGZyb20gJy4uL3Bvc3Rob2ctY29yZSdcblxuLyoqXG4gKiBUaGUgcmVxdWVzdCByb3V0ZXIgaGVscHMgc2ltcGxpZnkgdGhlIGxvZ2ljIHRvIGRldGVybWluZSB3aGljaCBlbmRwb2ludHMgc2hvdWxkIGJlIGNhbGxlZCBmb3Igd2hpY2ggdGhpbmdzXG4gKiBUaGUgYmFzaWMgaWRlYSBpcyB0aGF0IGZvciBhIGdpdmVuIHJlZ2lvbiAoVVMgb3IgRVUpLCB3ZSBoYXZlIGEgc2V0IG9mIGVuZHBvaW50cyB0aGF0IHdlIHNob3VsZCBjYWxsIGRlcGVuZGluZ1xuICogb24gdGhlIHR5cGUgb2YgcmVxdWVzdCAoZXZlbnRzLCByZXBsYXlzLCBkZWNpZGUsIGV0Yy4pIGFuZCBoYW5kbGUgb3ZlcnJpZGVzIHRoYXQgbWF5IGNvbWUgZnJvbSBjb25maWdzIG9yIHRoZSBkZWNpZGUgZW5kcG9pbnRcbiAqL1xuXG5leHBvcnQgZW51bSBSZXF1ZXN0Um91dGVyUmVnaW9uIHtcbiAgICBVUyA9ICd1cycsXG4gICAgRVUgPSAnZXUnLFxuICAgIENVU1RPTSA9ICdjdXN0b20nLFxufVxuXG5leHBvcnQgdHlwZSBSZXF1ZXN0Um91dGVyVGFyZ2V0ID0gJ2FwaScgfCAndWknIHwgJ2Fzc2V0cydcblxuZXhwb3J0IGNsYXNzIFJlcXVlc3RSb3V0ZXIge1xuICAgIGluc3RhbmNlOiBQb3N0SG9nXG4gICAgcHJpdmF0ZSBfcmVnaW9uQ2FjaGU6IFJlY29yZDxzdHJpbmcsIFJlcXVlc3RSb3V0ZXJSZWdpb24+ID0ge31cblxuICAgIGNvbnN0cnVjdG9yKGluc3RhbmNlOiBQb3N0SG9nKSB7XG4gICAgICAgIHRoaXMuaW5zdGFuY2UgPSBpbnN0YW5jZVxuICAgIH1cblxuICAgIGdldCBhcGlIb3N0KCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB0aGlzLmluc3RhbmNlLmNvbmZpZy5hcGlfaG9zdC50cmltKCkucmVwbGFjZSgvXFwvJC8sICcnKVxuICAgIH1cbiAgICBnZXQgdWlIb3N0KCk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gICAgICAgIHJldHVybiB0aGlzLmluc3RhbmNlLmNvbmZpZy51aV9ob3N0Py5yZXBsYWNlKC9cXC8kLywgJycpXG4gICAgfVxuXG4gICAgZ2V0IHJlZ2lvbigpOiBSZXF1ZXN0Um91dGVyUmVnaW9uIHtcbiAgICAgICAgLy8gV2UgZG9uJ3QgbmVlZCB0byBjb21wdXRlIHRoaXMgZXZlcnkgdGltZSBzbyB3ZSBjYWNoZSB0aGUgcmVzdWx0XG4gICAgICAgIGlmICghdGhpcy5fcmVnaW9uQ2FjaGVbdGhpcy5hcGlIb3N0XSkge1xuICAgICAgICAgICAgaWYgKC9odHRwczpcXC9cXC8oYXBwfHVzfHVzLWFzc2V0cykoXFwuaSk/XFwucG9zdGhvZ1xcLmNvbS9pLnRlc3QodGhpcy5hcGlIb3N0KSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3JlZ2lvbkNhY2hlW3RoaXMuYXBpSG9zdF0gPSBSZXF1ZXN0Um91dGVyUmVnaW9uLlVTXG4gICAgICAgICAgICB9IGVsc2UgaWYgKC9odHRwczpcXC9cXC8oZXV8ZXUtYXNzZXRzKShcXC5pKT9cXC5wb3N0aG9nXFwuY29tL2kudGVzdCh0aGlzLmFwaUhvc3QpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fcmVnaW9uQ2FjaGVbdGhpcy5hcGlIb3N0XSA9IFJlcXVlc3RSb3V0ZXJSZWdpb24uRVVcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fcmVnaW9uQ2FjaGVbdGhpcy5hcGlIb3N0XSA9IFJlcXVlc3RSb3V0ZXJSZWdpb24uQ1VTVE9NXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlZ2lvbkNhY2hlW3RoaXMuYXBpSG9zdF1cbiAgICB9XG5cbiAgICBlbmRwb2ludEZvcih0YXJnZXQ6IFJlcXVlc3RSb3V0ZXJUYXJnZXQsIHBhdGg6IHN0cmluZyA9ICcnKTogc3RyaW5nIHtcbiAgICAgICAgaWYgKHBhdGgpIHtcbiAgICAgICAgICAgIHBhdGggPSBwYXRoWzBdID09PSAnLycgPyBwYXRoIDogYC8ke3BhdGh9YFxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRhcmdldCA9PT0gJ3VpJykge1xuICAgICAgICAgICAgcmV0dXJuICh0aGlzLnVpSG9zdCB8fCB0aGlzLmFwaUhvc3QpICsgcGF0aFxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMucmVnaW9uID09PSBSZXF1ZXN0Um91dGVyUmVnaW9uLkNVU1RPTSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXBpSG9zdCArIHBhdGhcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHN1ZmZpeCA9ICdpLnBvc3Rob2cuY29tJyArIHBhdGhcblxuICAgICAgICBzd2l0Y2ggKHRhcmdldCkge1xuICAgICAgICAgICAgY2FzZSAnYXNzZXRzJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gYGh0dHBzOi8vJHt0aGlzLnJlZ2lvbn0tYXNzZXRzLiR7c3VmZml4fWBcbiAgICAgICAgICAgIGNhc2UgJ2FwaSc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGBodHRwczovLyR7dGhpcy5yZWdpb259LiR7c3VmZml4fWBcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBQb3N0SG9nUGVyc2lzdGVuY2UgfSBmcm9tICcuL3Bvc3Rob2ctcGVyc2lzdGVuY2UnXG5pbXBvcnQgeyBTRVNTSU9OX0lEIH0gZnJvbSAnLi9jb25zdGFudHMnXG5pbXBvcnQgeyBzZXNzaW9uU3RvcmUgfSBmcm9tICcuL3N0b3JhZ2UnXG5pbXBvcnQgeyBQb3N0SG9nQ29uZmlnLCBTZXNzaW9uSWRDaGFuZ2VkQ2FsbGJhY2sgfSBmcm9tICcuL3R5cGVzJ1xuaW1wb3J0IHsgdXVpZHY3IH0gZnJvbSAnLi91dWlkdjcnXG5pbXBvcnQgeyB3aW5kb3cgfSBmcm9tICcuL3V0aWxzL2dsb2JhbHMnXG5cbmltcG9ydCB7IF9pc0FycmF5LCBfaXNOdW1iZXIsIF9pc1VuZGVmaW5lZCB9IGZyb20gJy4vdXRpbHMvdHlwZS11dGlscydcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJy4vdXRpbHMvbG9nZ2VyJ1xuXG5jb25zdCBNQVhfU0VTU0lPTl9JRExFX1RJTUVPVVQgPSAzMCAqIDYwIC8vIDMwIG1pbnV0ZXNcbmNvbnN0IE1JTl9TRVNTSU9OX0lETEVfVElNRU9VVCA9IDYwIC8vIDEgbWludXRlXG5jb25zdCBTRVNTSU9OX0xFTkdUSF9MSU1JVCA9IDI0ICogMzYwMCAqIDEwMDAgLy8gMjQgaG91cnNcblxuZXhwb3J0IGNsYXNzIFNlc3Npb25JZE1hbmFnZXIge1xuICAgIHByaXZhdGUgcmVhZG9ubHkgX3Nlc3Npb25JZEdlbmVyYXRvcjogKCkgPT4gc3RyaW5nXG4gICAgcHJpdmF0ZSByZWFkb25seSBfd2luZG93SWRHZW5lcmF0b3I6ICgpID0+IHN0cmluZ1xuICAgIHByaXZhdGUgY29uZmlnOiBQYXJ0aWFsPFBvc3RIb2dDb25maWc+XG4gICAgcHJpdmF0ZSBwZXJzaXN0ZW5jZTogUG9zdEhvZ1BlcnNpc3RlbmNlXG4gICAgcHJpdmF0ZSBfd2luZG93SWQ6IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWRcbiAgICBwcml2YXRlIF9zZXNzaW9uSWQ6IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWRcbiAgICBwcml2YXRlIHJlYWRvbmx5IF93aW5kb3dfaWRfc3RvcmFnZV9rZXk6IHN0cmluZ1xuICAgIHByaXZhdGUgcmVhZG9ubHkgX3ByaW1hcnlfd2luZG93X2V4aXN0c19zdG9yYWdlX2tleTogc3RyaW5nXG4gICAgcHJpdmF0ZSBfc2Vzc2lvblN0YXJ0VGltZXN0YW1wOiBudW1iZXIgfCBudWxsXG5cbiAgICBwcml2YXRlIF9zZXNzaW9uQWN0aXZpdHlUaW1lc3RhbXA6IG51bWJlciB8IG51bGxcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9zZXNzaW9uVGltZW91dE1zOiBudW1iZXJcbiAgICBwcml2YXRlIF9zZXNzaW9uSWRDaGFuZ2VkSGFuZGxlcnM6IFNlc3Npb25JZENoYW5nZWRDYWxsYmFja1tdID0gW11cblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBjb25maWc6IFBhcnRpYWw8UG9zdEhvZ0NvbmZpZz4sXG4gICAgICAgIHBlcnNpc3RlbmNlOiBQb3N0SG9nUGVyc2lzdGVuY2UsXG4gICAgICAgIHNlc3Npb25JZEdlbmVyYXRvcj86ICgpID0+IHN0cmluZyxcbiAgICAgICAgd2luZG93SWRHZW5lcmF0b3I/OiAoKSA9PiBzdHJpbmdcbiAgICApIHtcbiAgICAgICAgdGhpcy5jb25maWcgPSBjb25maWdcbiAgICAgICAgdGhpcy5wZXJzaXN0ZW5jZSA9IHBlcnNpc3RlbmNlXG4gICAgICAgIHRoaXMuX3dpbmRvd0lkID0gdW5kZWZpbmVkXG4gICAgICAgIHRoaXMuX3Nlc3Npb25JZCA9IHVuZGVmaW5lZFxuICAgICAgICB0aGlzLl9zZXNzaW9uU3RhcnRUaW1lc3RhbXAgPSBudWxsXG4gICAgICAgIHRoaXMuX3Nlc3Npb25BY3Rpdml0eVRpbWVzdGFtcCA9IG51bGxcbiAgICAgICAgdGhpcy5fc2Vzc2lvbklkR2VuZXJhdG9yID0gc2Vzc2lvbklkR2VuZXJhdG9yIHx8IHV1aWR2N1xuICAgICAgICB0aGlzLl93aW5kb3dJZEdlbmVyYXRvciA9IHdpbmRvd0lkR2VuZXJhdG9yIHx8IHV1aWR2N1xuXG4gICAgICAgIGNvbnN0IHBlcnNpc3RlbmNlTmFtZSA9IGNvbmZpZ1sncGVyc2lzdGVuY2VfbmFtZSddIHx8IGNvbmZpZ1sndG9rZW4nXVxuICAgICAgICBsZXQgZGVzaXJlZFRpbWVvdXQgPSBjb25maWdbJ3Nlc3Npb25faWRsZV90aW1lb3V0X3NlY29uZHMnXSB8fCBNQVhfU0VTU0lPTl9JRExFX1RJTUVPVVRcblxuICAgICAgICBpZiAoIV9pc051bWJlcihkZXNpcmVkVGltZW91dCkpIHtcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKCdzZXNzaW9uX2lkbGVfdGltZW91dF9zZWNvbmRzIG11c3QgYmUgYSBudW1iZXIuIERlZmF1bHRpbmcgdG8gMzAgbWludXRlcy4nKVxuICAgICAgICAgICAgZGVzaXJlZFRpbWVvdXQgPSBNQVhfU0VTU0lPTl9JRExFX1RJTUVPVVRcbiAgICAgICAgfSBlbHNlIGlmIChkZXNpcmVkVGltZW91dCA+IE1BWF9TRVNTSU9OX0lETEVfVElNRU9VVCkge1xuICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ3Nlc3Npb25faWRsZV90aW1lb3V0X3NlY29uZHMgY2Fubm90IGJlICBncmVhdGVyIHRoYW4gMzAgbWludXRlcy4gVXNpbmcgMzAgbWludXRlcyBpbnN0ZWFkLicpXG4gICAgICAgIH0gZWxzZSBpZiAoZGVzaXJlZFRpbWVvdXQgPCBNSU5fU0VTU0lPTl9JRExFX1RJTUVPVVQpIHtcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKCdzZXNzaW9uX2lkbGVfdGltZW91dF9zZWNvbmRzIGNhbm5vdCBiZSBsZXNzIHRoYW4gNjAgc2Vjb25kcy4gVXNpbmcgNjAgc2Vjb25kcyBpbnN0ZWFkLicpXG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9zZXNzaW9uVGltZW91dE1zID1cbiAgICAgICAgICAgIE1hdGgubWluKE1hdGgubWF4KGRlc2lyZWRUaW1lb3V0LCBNSU5fU0VTU0lPTl9JRExFX1RJTUVPVVQpLCBNQVhfU0VTU0lPTl9JRExFX1RJTUVPVVQpICogMTAwMFxuICAgICAgICB0aGlzLl93aW5kb3dfaWRfc3RvcmFnZV9rZXkgPSAncGhfJyArIHBlcnNpc3RlbmNlTmFtZSArICdfd2luZG93X2lkJ1xuICAgICAgICB0aGlzLl9wcmltYXJ5X3dpbmRvd19leGlzdHNfc3RvcmFnZV9rZXkgPSAncGhfJyArIHBlcnNpc3RlbmNlTmFtZSArICdfcHJpbWFyeV93aW5kb3dfZXhpc3RzJ1xuXG4gICAgICAgIC8vIHByaW1hcnlfd2luZG93X2V4aXN0cyBpcyBzZXQgd2hlbiB0aGUgRE9NIGhhcyBiZWVuIGxvYWRlZCBhbmQgaXMgY2xlYXJlZCBvbiB1bmxvYWRcbiAgICAgICAgLy8gaWYgaXQgZXhpc3RzIGhlcmUgaXQgbWVhbnMgdGhlcmUgd2FzIG5vIHVubG9hZCB3aGljaCBzdWdnZXN0cyB0aGlzIHdpbmRvdyBpcyBvcGVuZWQgYXMgYSB0YWIgZHVwbGljYXRpb24sIHdpbmRvdy5vcGVuLCBldGMuXG4gICAgICAgIGlmICh0aGlzLl9jYW5Vc2VTZXNzaW9uU3RvcmFnZSgpKSB7XG4gICAgICAgICAgICBjb25zdCBsYXN0V2luZG93SWQgPSBzZXNzaW9uU3RvcmUucGFyc2UodGhpcy5fd2luZG93X2lkX3N0b3JhZ2Vfa2V5KVxuXG4gICAgICAgICAgICBjb25zdCBwcmltYXJ5V2luZG93RXhpc3RzID0gc2Vzc2lvblN0b3JlLnBhcnNlKHRoaXMuX3ByaW1hcnlfd2luZG93X2V4aXN0c19zdG9yYWdlX2tleSlcbiAgICAgICAgICAgIGlmIChsYXN0V2luZG93SWQgJiYgIXByaW1hcnlXaW5kb3dFeGlzdHMpIHtcbiAgICAgICAgICAgICAgICAvLyBQZXJzaXN0IHdpbmRvdyBmcm9tIHByZXZpb3VzIHN0b3JhZ2Ugc3RhdGVcbiAgICAgICAgICAgICAgICB0aGlzLl93aW5kb3dJZCA9IGxhc3RXaW5kb3dJZFxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBXaXBlIGFueSByZWZlcmVuY2UgdG8gcHJldmlvdXMgd2luZG93IGlkXG4gICAgICAgICAgICAgICAgc2Vzc2lvblN0b3JlLnJlbW92ZSh0aGlzLl93aW5kb3dfaWRfc3RvcmFnZV9rZXkpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBGbGFnIHRoaXMgc2Vzc2lvbiBhcyBoYXZpbmcgYSBwcmltYXJ5IHdpbmRvd1xuICAgICAgICAgICAgc2Vzc2lvblN0b3JlLnNldCh0aGlzLl9wcmltYXJ5X3dpbmRvd19leGlzdHNfc3RvcmFnZV9rZXksIHRydWUpXG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9saXN0ZW5Ub1JlbG9hZFdpbmRvdygpXG4gICAgfVxuXG4gICAgb25TZXNzaW9uSWQoY2FsbGJhY2s6IFNlc3Npb25JZENoYW5nZWRDYWxsYmFjayk6ICgpID0+IHZvaWQge1xuICAgICAgICAvLyBLTFVER0U6IHdoZW4gcnVubmluZyBpbiB0ZXN0cyB0aGUgaGFuZGxlcnMgYXJyYXkgd2FzIGFsd2F5cyB1bmRlZmluZWRcbiAgICAgICAgLy8gaXQncyB5dWNreSBidXQgc2FmZSB0byBzZXQgaXQgaGVyZSBzbyB0aGF0IGl0J3MgYWx3YXlzIGRlZmluaXRlbHkgYXZhaWxhYmxlXG4gICAgICAgIGlmIChfaXNVbmRlZmluZWQodGhpcy5fc2Vzc2lvbklkQ2hhbmdlZEhhbmRsZXJzKSkge1xuICAgICAgICAgICAgdGhpcy5fc2Vzc2lvbklkQ2hhbmdlZEhhbmRsZXJzID0gW11cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX3Nlc3Npb25JZENoYW5nZWRIYW5kbGVycy5wdXNoKGNhbGxiYWNrKVxuICAgICAgICBpZiAodGhpcy5fc2Vzc2lvbklkKSB7XG4gICAgICAgICAgICBjYWxsYmFjayh0aGlzLl9zZXNzaW9uSWQsIHRoaXMuX3dpbmRvd0lkKVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9zZXNzaW9uSWRDaGFuZ2VkSGFuZGxlcnMgPSB0aGlzLl9zZXNzaW9uSWRDaGFuZ2VkSGFuZGxlcnMuZmlsdGVyKChoKSA9PiBoICE9PSBjYWxsYmFjaylcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgX2NhblVzZVNlc3Npb25TdG9yYWdlKCk6IGJvb2xlYW4ge1xuICAgICAgICAvLyBXZSBvbmx5IHdhbnQgdG8gdXNlIHNlc3Npb25TdG9yYWdlIGlmIHBlcnNpc3RlbmNlIGlzIGVuYWJsZWQgYW5kIG5vdCBtZW1vcnkgc3RvcmFnZVxuICAgICAgICByZXR1cm4gdGhpcy5jb25maWcucGVyc2lzdGVuY2UgIT09ICdtZW1vcnknICYmICF0aGlzLnBlcnNpc3RlbmNlLmRpc2FibGVkICYmIHNlc3Npb25TdG9yZS5pc19zdXBwb3J0ZWQoKVxuICAgIH1cblxuICAgIC8vIE5vdGU6IHRoaXMgdHJpZXMgdG8gc3RvcmUgdGhlIHdpbmRvd0lkIGluIHNlc3Npb25TdG9yYWdlLiBTZXNzaW9uU3RvcmFnZSBpcyB1bmlxdWUgdG8gdGhlIGN1cnJlbnQgd2luZG93L3RhYixcbiAgICAvLyBhbmQgcGVyc2lzdHMgcGFnZSBsb2Fkcy9yZWxvYWRzLiBTbyBpdCdzIHVuaXF1ZWx5IHN1aXRlZCBmb3Igc3RvcmluZyB0aGUgd2luZG93SWQuIFRoaXMgZnVuY3Rpb24gYWxzbyByZXNwZWN0c1xuICAgIC8vIHdoZW4gcGVyc2lzdGVuY2UgaXMgZGlzYWJsZWQgKGJ5IHVzZXIgY29uZmlnKSBhbmQgd2hlbiBzZXNzaW9uU3RvcmFnZSBpcyBub3Qgc3VwcG9ydGVkIChpdCAqc2hvdWxkKiBiZSBzdXBwb3J0ZWQgb24gYWxsIGJyb3dzZXJzKSxcbiAgICAvLyBhbmQgaW4gdGhhdCBjYXNlLCBpdCBmYWxscyBiYWNrIHRvIG1lbW9yeSAod2hpY2ggc2FkbHksIHdvbid0IHBlcnNpc3QgcGFnZSBsb2FkcylcbiAgICBwcml2YXRlIF9zZXRXaW5kb3dJZCh3aW5kb3dJZDogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIGlmICh3aW5kb3dJZCAhPT0gdGhpcy5fd2luZG93SWQpIHtcbiAgICAgICAgICAgIHRoaXMuX3dpbmRvd0lkID0gd2luZG93SWRcbiAgICAgICAgICAgIGlmICh0aGlzLl9jYW5Vc2VTZXNzaW9uU3RvcmFnZSgpKSB7XG4gICAgICAgICAgICAgICAgc2Vzc2lvblN0b3JlLnNldCh0aGlzLl93aW5kb3dfaWRfc3RvcmFnZV9rZXksIHdpbmRvd0lkKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfZ2V0V2luZG93SWQoKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgICAgIGlmICh0aGlzLl93aW5kb3dJZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3dpbmRvd0lkXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuX2NhblVzZVNlc3Npb25TdG9yYWdlKCkpIHtcbiAgICAgICAgICAgIHJldHVybiBzZXNzaW9uU3RvcmUucGFyc2UodGhpcy5fd2luZG93X2lkX3N0b3JhZ2Vfa2V5KVxuICAgICAgICB9XG4gICAgICAgIC8vIE5ldyB3aW5kb3cgaWQgd2lsbCBiZSBnZW5lcmF0ZWRcbiAgICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG5cbiAgICAvLyBOb3RlOiAndGhpcy5wZXJzaXN0ZW5jZS5yZWdpc3RlcicgY2FuIGJlIGRpc2FibGVkIGluIHRoZSBjb25maWcuXG4gICAgLy8gSW4gdGhhdCBjYXNlLCB0aGlzIHdvcmtzIGJ5IHN0b3Jpbmcgc2Vzc2lvbklkIGFuZCB0aGUgdGltZXN0YW1wIGluIG1lbW9yeS5cbiAgICBwcml2YXRlIF9zZXRTZXNzaW9uSWQoXG4gICAgICAgIHNlc3Npb25JZDogc3RyaW5nIHwgbnVsbCxcbiAgICAgICAgc2Vzc2lvbkFjdGl2aXR5VGltZXN0YW1wOiBudW1iZXIgfCBudWxsLFxuICAgICAgICBzZXNzaW9uU3RhcnRUaW1lc3RhbXA6IG51bWJlciB8IG51bGxcbiAgICApOiB2b2lkIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgc2Vzc2lvbklkICE9PSB0aGlzLl9zZXNzaW9uSWQgfHxcbiAgICAgICAgICAgIHNlc3Npb25BY3Rpdml0eVRpbWVzdGFtcCAhPT0gdGhpcy5fc2Vzc2lvbkFjdGl2aXR5VGltZXN0YW1wIHx8XG4gICAgICAgICAgICBzZXNzaW9uU3RhcnRUaW1lc3RhbXAgIT09IHRoaXMuX3Nlc3Npb25TdGFydFRpbWVzdGFtcFxuICAgICAgICApIHtcbiAgICAgICAgICAgIHRoaXMuX3Nlc3Npb25TdGFydFRpbWVzdGFtcCA9IHNlc3Npb25TdGFydFRpbWVzdGFtcFxuICAgICAgICAgICAgdGhpcy5fc2Vzc2lvbkFjdGl2aXR5VGltZXN0YW1wID0gc2Vzc2lvbkFjdGl2aXR5VGltZXN0YW1wXG4gICAgICAgICAgICB0aGlzLl9zZXNzaW9uSWQgPSBzZXNzaW9uSWRcblxuICAgICAgICAgICAgdGhpcy5wZXJzaXN0ZW5jZS5yZWdpc3Rlcih7XG4gICAgICAgICAgICAgICAgW1NFU1NJT05fSURdOiBbc2Vzc2lvbkFjdGl2aXR5VGltZXN0YW1wLCBzZXNzaW9uSWQsIHNlc3Npb25TdGFydFRpbWVzdGFtcF0sXG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfZ2V0U2Vzc2lvbklkKCk6IFtudW1iZXIsIHN0cmluZywgbnVtYmVyXSB7XG4gICAgICAgIGlmICh0aGlzLl9zZXNzaW9uSWQgJiYgdGhpcy5fc2Vzc2lvbkFjdGl2aXR5VGltZXN0YW1wICYmIHRoaXMuX3Nlc3Npb25TdGFydFRpbWVzdGFtcCkge1xuICAgICAgICAgICAgcmV0dXJuIFt0aGlzLl9zZXNzaW9uQWN0aXZpdHlUaW1lc3RhbXAsIHRoaXMuX3Nlc3Npb25JZCwgdGhpcy5fc2Vzc2lvblN0YXJ0VGltZXN0YW1wXVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNlc3Npb25JZCA9IHRoaXMucGVyc2lzdGVuY2UucHJvcHNbU0VTU0lPTl9JRF1cblxuICAgICAgICBpZiAoX2lzQXJyYXkoc2Vzc2lvbklkKSAmJiBzZXNzaW9uSWQubGVuZ3RoID09PSAyKSB7XG4gICAgICAgICAgICAvLyBTdG9yYWdlIGRvZXMgbm90IHlldCBoYXZlIGEgc2Vzc2lvbiBzdGFydCB0aW1lLiBBZGQgdGhlIGxhc3QgYWN0aXZpdHkgdGltZXN0YW1wIGFzIHRoZSBzdGFydCB0aW1lXG4gICAgICAgICAgICBzZXNzaW9uSWQucHVzaChzZXNzaW9uSWRbMF0pXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc2Vzc2lvbklkIHx8IFswLCBudWxsLCAwXVxuICAgIH1cblxuICAgIC8vIFJlc2V0cyB0aGUgc2Vzc2lvbiBpZCBieSBzZXR0aW5nIGl0IHRvIG51bGwuIE9uIHRoZSBzdWJzZXF1ZW50IGNhbGwgdG8gY2hlY2tBbmRHZXRTZXNzaW9uQW5kV2luZG93SWQsXG4gICAgLy8gbmV3IGlkcyB3aWxsIGJlIGdlbmVyYXRlZC5cbiAgICByZXNldFNlc3Npb25JZCgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5fc2V0U2Vzc2lvbklkKG51bGwsIG51bGwsIG51bGwpXG4gICAgfVxuXG4gICAgLypcbiAgICAgKiBMaXN0ZW5zIHRvIHdpbmRvdyB1bmxvYWRzIGFuZCByZW1vdmVzIHRoZSBwcmltYXJ5V2luZG93RXhpc3RzIGtleSBmcm9tIHNlc3Npb25TdG9yYWdlLlxuICAgICAqIFJlbG9hZGVkIG9yIGZyZXNoIHRhYnMgY3JlYXRlZCBhZnRlciBhIERPTSB1bmxvYWRzIChyZWxvYWRpbmcgdGhlIHNhbWUgdGFiKSBXSUxMIE5PVCBoYXZlIHRoaXMgcHJpbWFyeVdpbmRvd0V4aXN0cyBmbGFnIGluIHNlc3Npb24gc3RvcmFnZS5cbiAgICAgKiBDbG9uZWQgc2Vzc2lvbnMgKG5ldyB0YWIsIHRhYiBkdXBsaWNhdGlvbiwgd2luZG93Lm9wZW4oKSwgLi4uKSBXSUxMIGhhdmUgdGhpcyBwcmltYXJ5V2luZG93RXhpc3RzIGZsYWcgaW4gdGhlaXIgY29waWVkIHNlc3Npb24gc3RvcmFnZS5cbiAgICAgKiBXZSBjb25kaXRpb25hbGx5IGNoZWNrIHRoZSBwcmltYXJ5V2luZG93RXhpc3RzIHZhbHVlIGluIHRoZSBjb25zdHJ1Y3RvciB0byBkZWNpZGUgaWYgdGhlIHdpbmRvdyBpZCBpbiB0aGUgbGFzdCBzZXNzaW9uIHN0b3JhZ2Ugc2hvdWxkIGJlIGNhcnJpZWQgb3Zlci5cbiAgICAgKi9cbiAgICBwcml2YXRlIF9saXN0ZW5Ub1JlbG9hZFdpbmRvdygpOiB2b2lkIHtcbiAgICAgICAgd2luZG93Py5hZGRFdmVudExpc3RlbmVyKCdiZWZvcmV1bmxvYWQnLCAoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5fY2FuVXNlU2Vzc2lvblN0b3JhZ2UoKSkge1xuICAgICAgICAgICAgICAgIHNlc3Npb25TdG9yZS5yZW1vdmUodGhpcy5fcHJpbWFyeV93aW5kb3dfZXhpc3RzX3N0b3JhZ2Vfa2V5KVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIC8qXG4gICAgICogVGhpcyBmdW5jdGlvbiByZXR1cm5zIHRoZSBjdXJyZW50IHNlc3Npb25JZCBhbmQgd2luZG93SWQuIEl0IHNob3VsZCBiZSB1c2VkIHRvXG4gICAgICogYWNjZXNzIHRoZXNlIHZhbHVlcyBvdmVyIGRpcmVjdGx5IGNhbGxpbmcgYC5fc2Vzc2lvbklkYCBvciBgLl93aW5kb3dJZGAuXG4gICAgICogSW4gYWRkaXRpb24gdG8gcmV0dXJuaW5nIHRoZSBzZXNzaW9uSWQgYW5kIHdpbmRvd0lkLCB0aGlzIGZ1bmN0aW9uIGFsc28gbWFuYWdlcyBjeWNsaW5nIHRoZVxuICAgICAqIHNlc3Npb25JZCBhbmQgd2luZG93SWQgd2hlbiBhcHByb3ByaWF0ZSBieSBkb2luZyB0aGUgZm9sbG93aW5nOlxuICAgICAqXG4gICAgICogMS4gSWYgdGhlIHNlc3Npb25JZCBvciB3aW5kb3dJZCBpcyBub3Qgc2V0LCBpdCB3aWxsIGdlbmVyYXRlIGEgbmV3IG9uZSBhbmQgc3RvcmUgaXQuXG4gICAgICogMi4gSWYgdGhlIHJlYWRPbmx5IHBhcmFtIGlzIHNldCB0byBmYWxzZSwgaXQgd2lsbDpcbiAgICAgKiAgICBhLiBDaGVjayBpZiBpdCBoYXMgYmVlbiA+IFNFU1NJT05fQ0hBTkdFX1RIUkVTSE9MRCBzaW5jZSB0aGUgbGFzdCBjYWxsIHdpdGggdGhpcyBmbGFnIHNldC5cbiAgICAgKiAgICAgICBJZiBzbywgaXQgd2lsbCBnZW5lcmF0ZSBhIG5ldyBzZXNzaW9uSWQgYW5kIHN0b3JlIGl0LlxuICAgICAqICAgIGIuIFVwZGF0ZSB0aGUgdGltZXN0YW1wIHN0b3JlZCB3aXRoIHRoZSBzZXNzaW9uSWQgdG8gZW5zdXJlIHRoZSBjdXJyZW50IHNlc3Npb24gaXMgZXh0ZW5kZWRcbiAgICAgKiAgICAgICBmb3IgdGhlIGFwcHJvcHJpYXRlIGFtb3VudCBvZiB0aW1lLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtib29sZWFufSByZWFkT25seSAob3B0aW9uYWwpIERlZmF1bHRzIHRvIEZhbHNlLiBTaG91bGQgYmUgc2V0IHRvIFRydWUgd2hlbiB0aGUgY2FsbCB0byB0aGUgZnVuY3Rpb24gc2hvdWxkIG5vdCBleHRlbmQgb3IgY3ljbGUgdGhlIHNlc3Npb24gKGUuZy4gYmVpbmcgY2FsbGVkIGZvciBub24tdXNlciBnZW5lcmF0ZWQgZXZlbnRzKVxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSB0aW1lc3RhbXAgKG9wdGlvbmFsKSBEZWZhdWx0cyB0byB0aGUgY3VycmVudCB0aW1lLiBUaGUgdGltZXN0YW1wIHRvIGJlIHN0b3JlZCB3aXRoIHRoZSBzZXNzaW9uSWQgKHVzZWQgd2hlbiBkZXRlcm1pbmluZyBpZiBhIG5ldyBzZXNzaW9uSWQgc2hvdWxkIGJlIGdlbmVyYXRlZClcbiAgICAgKi9cbiAgICBjaGVja0FuZEdldFNlc3Npb25BbmRXaW5kb3dJZChyZWFkT25seSA9IGZhbHNlLCBfdGltZXN0YW1wOiBudW1iZXIgfCBudWxsID0gbnVsbCkge1xuICAgICAgICBjb25zdCB0aW1lc3RhbXAgPSBfdGltZXN0YW1wIHx8IG5ldyBEYXRlKCkuZ2V0VGltZSgpXG5cbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHByZWZlci1jb25zdFxuICAgICAgICBsZXQgW2xhc3RUaW1lc3RhbXAsIHNlc3Npb25JZCwgc3RhcnRUaW1lc3RhbXBdID0gdGhpcy5fZ2V0U2Vzc2lvbklkKClcbiAgICAgICAgbGV0IHdpbmRvd0lkID0gdGhpcy5fZ2V0V2luZG93SWQoKVxuXG4gICAgICAgIGNvbnN0IHNlc3Npb25QYXN0TWF4aW11bUxlbmd0aCA9XG4gICAgICAgICAgICBzdGFydFRpbWVzdGFtcCAmJiBzdGFydFRpbWVzdGFtcCA+IDAgJiYgTWF0aC5hYnModGltZXN0YW1wIC0gc3RhcnRUaW1lc3RhbXApID4gU0VTU0lPTl9MRU5HVEhfTElNSVRcblxuICAgICAgICBsZXQgdmFsdWVzQ2hhbmdlZCA9IGZhbHNlXG4gICAgICAgIGNvbnN0IG5vU2Vzc2lvbklkID0gIXNlc3Npb25JZFxuICAgICAgICBjb25zdCBhY3Rpdml0eVRpbWVvdXQgPSAhcmVhZE9ubHkgJiYgTWF0aC5hYnModGltZXN0YW1wIC0gbGFzdFRpbWVzdGFtcCkgPiB0aGlzLl9zZXNzaW9uVGltZW91dE1zXG4gICAgICAgIGlmIChub1Nlc3Npb25JZCB8fCBhY3Rpdml0eVRpbWVvdXQgfHwgc2Vzc2lvblBhc3RNYXhpbXVtTGVuZ3RoKSB7XG4gICAgICAgICAgICBzZXNzaW9uSWQgPSB0aGlzLl9zZXNzaW9uSWRHZW5lcmF0b3IoKVxuICAgICAgICAgICAgd2luZG93SWQgPSB0aGlzLl93aW5kb3dJZEdlbmVyYXRvcigpXG4gICAgICAgICAgICBsb2dnZXIuaW5mbygnW1Nlc3Npb25JZF0gbmV3IHNlc3Npb24gSUQgZ2VuZXJhdGVkJywge1xuICAgICAgICAgICAgICAgIHNlc3Npb25JZCxcbiAgICAgICAgICAgICAgICB3aW5kb3dJZCxcbiAgICAgICAgICAgICAgICBjaGFuZ2VSZWFzb246IHsgbm9TZXNzaW9uSWQsIGFjdGl2aXR5VGltZW91dCwgc2Vzc2lvblBhc3RNYXhpbXVtTGVuZ3RoIH0sXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgc3RhcnRUaW1lc3RhbXAgPSB0aW1lc3RhbXBcbiAgICAgICAgICAgIHZhbHVlc0NoYW5nZWQgPSB0cnVlXG4gICAgICAgIH0gZWxzZSBpZiAoIXdpbmRvd0lkKSB7XG4gICAgICAgICAgICB3aW5kb3dJZCA9IHRoaXMuX3dpbmRvd0lkR2VuZXJhdG9yKClcbiAgICAgICAgICAgIHZhbHVlc0NoYW5nZWQgPSB0cnVlXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBuZXdUaW1lc3RhbXAgPSBsYXN0VGltZXN0YW1wID09PSAwIHx8ICFyZWFkT25seSB8fCBzZXNzaW9uUGFzdE1heGltdW1MZW5ndGggPyB0aW1lc3RhbXAgOiBsYXN0VGltZXN0YW1wXG4gICAgICAgIGNvbnN0IHNlc3Npb25TdGFydFRpbWVzdGFtcCA9IHN0YXJ0VGltZXN0YW1wID09PSAwID8gbmV3IERhdGUoKS5nZXRUaW1lKCkgOiBzdGFydFRpbWVzdGFtcFxuXG4gICAgICAgIHRoaXMuX3NldFdpbmRvd0lkKHdpbmRvd0lkKVxuICAgICAgICB0aGlzLl9zZXRTZXNzaW9uSWQoc2Vzc2lvbklkLCBuZXdUaW1lc3RhbXAsIHNlc3Npb25TdGFydFRpbWVzdGFtcClcblxuICAgICAgICBpZiAodmFsdWVzQ2hhbmdlZCkge1xuICAgICAgICAgICAgdGhpcy5fc2Vzc2lvbklkQ2hhbmdlZEhhbmRsZXJzLmZvckVhY2goKGhhbmRsZXIpID0+IGhhbmRsZXIoc2Vzc2lvbklkLCB3aW5kb3dJZCkpXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc2Vzc2lvbklkLFxuICAgICAgICAgICAgd2luZG93SWQsXG4gICAgICAgICAgICBzZXNzaW9uU3RhcnRUaW1lc3RhbXAsXG4gICAgICAgIH1cbiAgICB9XG59XG4iLCAiLyoqXG4gKiBJbnRlZ3JhdGUgU2VudHJ5IHdpdGggUG9zdEhvZy4gVGhpcyB3aWxsIGFkZCBhIGRpcmVjdCBsaW5rIHRvIHRoZSBwZXJzb24gaW4gU2VudHJ5LCBhbmQgYW4gJGV4Y2VwdGlvbiBldmVudCBpbiBQb3N0SG9nXG4gKlxuICogIyMjIFVzYWdlXG4gKlxuICogICAgIFNlbnRyeS5pbml0KHtcbiAqICAgICAgICAgIGRzbjogJ2h0dHBzOi8vZXhhbXBsZScsXG4gKiAgICAgICAgICBpbnRlZ3JhdGlvbnM6IFtcbiAqICAgICAgICAgICAgICBuZXcgcG9zdGhvZy5TZW50cnlJbnRlZ3JhdGlvbihwb3N0aG9nKVxuICogICAgICAgICAgXVxuICogICAgIH0pXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IFtwb3N0aG9nXSBUaGUgcG9zdGhvZyBvYmplY3RcbiAqIEBwYXJhbSB7c3RyaW5nfSBbb3JnYW5pemF0aW9uXSBPcHRpb25hbDogVGhlIFNlbnRyeSBvcmdhbml6YXRpb24sIHVzZWQgdG8gc2VuZCBhIGRpcmVjdCBsaW5rIGZyb20gUG9zdEhvZyB0byBTZW50cnlcbiAqIEBwYXJhbSB7TnVtYmVyfSBbcHJvamVjdElkXSBPcHRpb25hbDogVGhlIFNlbnRyeSBwcm9qZWN0IGlkLCB1c2VkIHRvIHNlbmQgYSBkaXJlY3QgbGluayBmcm9tIFBvc3RIb2cgdG8gU2VudHJ5XG4gKiBAcGFyYW0ge3N0cmluZ30gW3ByZWZpeF0gT3B0aW9uYWw6IFVybCBvZiBhIHNlbGYtaG9zdGVkIHNlbnRyeSBpbnN0YW5jZSAoZGVmYXVsdDogaHR0cHM6Ly9zZW50cnkuaW8vb3JnYW5pemF0aW9ucy8pXG4gKi9cblxuaW1wb3J0IHsgUG9zdEhvZyB9IGZyb20gJy4uL3Bvc3Rob2ctY29yZSdcblxuLy8gTk9URSAtIHdlIGNhbid0IGltcG9ydCBmcm9tIEBzZW50cnkvdHlwZXMgYmVjYXVzZSBpdCBjaGFuZ2VzIGZyZXF1ZW50bHkgYW5kIGNhdXNlcyBjbGFzaGVzXG4vLyBXZSBvbmx5IHVzZSBhIHNtYWxsIHN1YnNldCBvZiB0aGUgdHlwZXMsIHNvIHdlIGNhbiBqdXN0IGRlZmluZSB0aGUgaW50ZWdyYXRpb24gb3ZlcmFsbCBhbmQgdXNlIGFueSBmb3IgdGhlIHJlc3RcblxuLy8gaW1wb3J0IHtcbi8vICAgICBFdmVudCBhcyBfU2VudHJ5RXZlbnQsXG4vLyAgICAgRXZlbnRQcm9jZXNzb3IgYXMgX1NlbnRyeUV2ZW50UHJvY2Vzc29yLFxuLy8gICAgIEh1YiBhcyBfU2VudHJ5SHViLFxuLy8gICAgIEludGVncmF0aW9uIGFzIF9TZW50cnlJbnRlZ3JhdGlvbixcbi8vIH0gZnJvbSAnQHNlbnRyeS90eXBlcydcblxuLy8gVW5jb21tZW50IHRoZSBhYm92ZSBhbmQgY29tbWVudCB0aGUgYmVsb3cgdG8gZ2V0IHR5cGUgY2hlY2tpbmcgZm9yIGRldmVsb3BtZW50XG5cbnR5cGUgX1NlbnRyeUV2ZW50ID0gYW55XG50eXBlIF9TZW50cnlFdmVudFByb2Nlc3NvciA9IGFueVxudHlwZSBfU2VudHJ5SHViID0gYW55XG5cbmludGVyZmFjZSBfU2VudHJ5SW50ZWdyYXRpb24ge1xuICAgIG5hbWU6IHN0cmluZ1xuICAgIHNldHVwT25jZShhZGRHbG9iYWxFdmVudFByb2Nlc3NvcjogKGNhbGxiYWNrOiBfU2VudHJ5RXZlbnRQcm9jZXNzb3IpID0+IHZvaWQsIGdldEN1cnJlbnRIdWI6ICgpID0+IF9TZW50cnlIdWIpOiB2b2lkXG59XG5cbmludGVyZmFjZSBTZW50cnlFeGNlcHRpb25Qcm9wZXJ0aWVzIHtcbiAgICAkc2VudHJ5X2V2ZW50X2lkOiBhbnlcbiAgICAkc2VudHJ5X2V4Y2VwdGlvbjogYW55XG4gICAgJHNlbnRyeV9leGNlcHRpb25fbWVzc2FnZTogYW55XG4gICAgJHNlbnRyeV9leGNlcHRpb25fdHlwZTogYW55XG4gICAgJHNlbnRyeV90YWdzOiBhbnlcbiAgICAkc2VudHJ5X3VybD86IHN0cmluZ1xufVxuXG5leHBvcnQgY2xhc3MgU2VudHJ5SW50ZWdyYXRpb24gaW1wbGVtZW50cyBfU2VudHJ5SW50ZWdyYXRpb24ge1xuICAgIG5hbWU6IHN0cmluZ1xuXG4gICAgc2V0dXBPbmNlOiAoXG4gICAgICAgIGFkZEdsb2JhbEV2ZW50UHJvY2Vzc29yOiAoY2FsbGJhY2s6IF9TZW50cnlFdmVudFByb2Nlc3NvcikgPT4gdm9pZCxcbiAgICAgICAgZ2V0Q3VycmVudEh1YjogKCkgPT4gX1NlbnRyeUh1YlxuICAgICkgPT4gdm9pZFxuXG4gICAgY29uc3RydWN0b3IoX3Bvc3Rob2c6IFBvc3RIb2csIG9yZ2FuaXphdGlvbj86IHN0cmluZywgcHJvamVjdElkPzogbnVtYmVyLCBwcmVmaXg/OiBzdHJpbmcpIHtcbiAgICAgICAgLy8gc2V0dXBPbmNlIGdldHMgY2FsbGVkIGJ5IFNlbnRyeSB3aGVuIGl0IGludGlhbGl6ZXMgdGhlIHBsdWdpblxuICAgICAgICB0aGlzLm5hbWUgPSAncG9zdGhvZy1qcydcbiAgICAgICAgdGhpcy5zZXR1cE9uY2UgPSBmdW5jdGlvbiAoYWRkR2xvYmFsRXZlbnRQcm9jZXNzb3I6IChjYWxsYmFjazogX1NlbnRyeUV2ZW50UHJvY2Vzc29yKSA9PiB2b2lkKSB7XG4gICAgICAgICAgICBhZGRHbG9iYWxFdmVudFByb2Nlc3NvcigoZXZlbnQ6IF9TZW50cnlFdmVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChldmVudC5sZXZlbCAhPT0gJ2Vycm9yJyB8fCAhX3Bvc3Rob2cuX19sb2FkZWQpIHJldHVybiBldmVudFxuICAgICAgICAgICAgICAgIGlmICghZXZlbnQudGFncykgZXZlbnQudGFncyA9IHt9XG5cbiAgICAgICAgICAgICAgICBjb25zdCBwZXJzb25VcmwgPSBfcG9zdGhvZy5yZXF1ZXN0Um91dGVyLmVuZHBvaW50Rm9yKCd1aScsICcvcGVyc29uLycgKyBfcG9zdGhvZy5nZXRfZGlzdGluY3RfaWQoKSlcbiAgICAgICAgICAgICAgICBldmVudC50YWdzWydQb3N0SG9nIFBlcnNvbiBVUkwnXSA9IHBlcnNvblVybFxuICAgICAgICAgICAgICAgIGlmIChfcG9zdGhvZy5zZXNzaW9uUmVjb3JkaW5nU3RhcnRlZCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnRhZ3NbJ1Bvc3RIb2cgUmVjb3JkaW5nIFVSTCddID0gX3Bvc3Rob2cuZ2V0X3Nlc3Npb25fcmVwbGF5X3VybCh7IHdpdGhUaW1lc3RhbXA6IHRydWUgfSlcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb25zdCBleGNlcHRpb25zID0gZXZlbnQuZXhjZXB0aW9uPy52YWx1ZXMgfHwgW11cblxuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGE6IFNlbnRyeUV4Y2VwdGlvblByb3BlcnRpZXMgJiB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHR3byBwcm9wZXJ0aWVzIGFkZGVkIHRvIG1hdGNoIGFueSBleGNlcHRpb24gYXV0by1jYXB0dXJlXG4gICAgICAgICAgICAgICAgICAgIC8vIGFkZGVkIG1hbnVhbGx5IHRvIGF2b2lkIGFueSBkZXBlbmRlbmN5IG9uIHRoZSBsYXppbHkgbG9hZGVkIGNvbnRlbnRcbiAgICAgICAgICAgICAgICAgICAgJGV4Y2VwdGlvbl9tZXNzYWdlOiBhbnlcbiAgICAgICAgICAgICAgICAgICAgJGV4Y2VwdGlvbl90eXBlOiBhbnlcbiAgICAgICAgICAgICAgICAgICAgJGV4Y2VwdGlvbl9wZXJzb25VUkw6IHN0cmluZ1xuICAgICAgICAgICAgICAgIH0gPSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFBvc3RIb2cgRXhjZXB0aW9uIFByb3BlcnRpZXMsXG4gICAgICAgICAgICAgICAgICAgICRleGNlcHRpb25fbWVzc2FnZTogZXhjZXB0aW9uc1swXT8udmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICRleGNlcHRpb25fdHlwZTogZXhjZXB0aW9uc1swXT8udHlwZSxcbiAgICAgICAgICAgICAgICAgICAgJGV4Y2VwdGlvbl9wZXJzb25VUkw6IHBlcnNvblVybCxcbiAgICAgICAgICAgICAgICAgICAgLy8gU2VudHJ5IEV4Y2VwdGlvbiBQcm9wZXJ0aWVzXG4gICAgICAgICAgICAgICAgICAgICRzZW50cnlfZXZlbnRfaWQ6IGV2ZW50LmV2ZW50X2lkLFxuICAgICAgICAgICAgICAgICAgICAkc2VudHJ5X2V4Y2VwdGlvbjogZXZlbnQuZXhjZXB0aW9uLFxuICAgICAgICAgICAgICAgICAgICAkc2VudHJ5X2V4Y2VwdGlvbl9tZXNzYWdlOiBleGNlcHRpb25zWzBdPy52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgJHNlbnRyeV9leGNlcHRpb25fdHlwZTogZXhjZXB0aW9uc1swXT8udHlwZSxcbiAgICAgICAgICAgICAgICAgICAgJHNlbnRyeV90YWdzOiBldmVudC50YWdzLFxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChvcmdhbml6YXRpb24gJiYgcHJvamVjdElkKVxuICAgICAgICAgICAgICAgICAgICBkYXRhWyckc2VudHJ5X3VybCddID1cbiAgICAgICAgICAgICAgICAgICAgICAgIChwcmVmaXggfHwgJ2h0dHBzOi8vc2VudHJ5LmlvL29yZ2FuaXphdGlvbnMvJykgK1xuICAgICAgICAgICAgICAgICAgICAgICAgb3JnYW5pemF0aW9uICtcbiAgICAgICAgICAgICAgICAgICAgICAgICcvaXNzdWVzLz9wcm9qZWN0PScgK1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJvamVjdElkICtcbiAgICAgICAgICAgICAgICAgICAgICAgICcmcXVlcnk9JyArXG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudC5ldmVudF9pZFxuICAgICAgICAgICAgICAgIF9wb3N0aG9nLmNhcHR1cmUoJyRleGNlcHRpb24nLCBkYXRhKVxuICAgICAgICAgICAgICAgIHJldHVybiBldmVudFxuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsICJpbXBvcnQgeyB3aW5kb3cgfSBmcm9tICcuL3V0aWxzL2dsb2JhbHMnXG5pbXBvcnQgeyBQb3N0SG9nIH0gZnJvbSAnLi9wb3N0aG9nLWNvcmUnXG5pbXBvcnQgeyBfaXNBcnJheSB9IGZyb20gJy4vdXRpbHMvdHlwZS11dGlscydcblxuaW50ZXJmYWNlIFBhZ2VWaWV3RGF0YSB7XG4gICAgcGF0aG5hbWU6IHN0cmluZ1xuICAgIC8vIHNjcm9sbCBpcyBob3cgZmFyIGRvd24gdGhlIHBhZ2UgdGhlIHVzZXIgaGFzIHNjcm9sbGVkLFxuICAgIC8vIGNvbnRlbnQgaXMgaG93IGZhciBkb3duIHRoZSBwYWdlIHRoZSB1c2VyIGNhbiB2aWV3IGNvbnRlbnRcbiAgICAvLyAoZS5nLiBpZiB0aGUgcGFnZSBpcyAxMDAwIHRhbGwsIGJ1dCB0aGUgdXNlcidzIHNjcmVlbiBpcyBvbmx5IDUwMCB0YWxsLFxuICAgIC8vIGFuZCB0aGV5IGRvbid0IHNjcm9sbCBhdCBhbGwsIHRoZW4gc2Nyb2xsIGlzIDAgYW5kIGNvbnRlbnQgaXMgNTAwKVxuICAgIG1heFNjcm9sbEhlaWdodD86IG51bWJlclxuICAgIG1heFNjcm9sbFk/OiBudW1iZXJcbiAgICBsYXN0U2Nyb2xsWT86IG51bWJlclxuICAgIG1heENvbnRlbnRIZWlnaHQ/OiBudW1iZXJcbiAgICBtYXhDb250ZW50WT86IG51bWJlclxuICAgIGxhc3RDb250ZW50WT86IG51bWJlclxufVxuXG5pbnRlcmZhY2UgU2Nyb2xsUHJvcGVydGllcyB7XG4gICAgJHByZXZfcGFnZXZpZXdfbGFzdF9zY3JvbGw/OiBudW1iZXJcbiAgICAkcHJldl9wYWdldmlld19sYXN0X3Njcm9sbF9wZXJjZW50YWdlPzogbnVtYmVyXG4gICAgJHByZXZfcGFnZXZpZXdfbWF4X3Njcm9sbD86IG51bWJlclxuICAgICRwcmV2X3BhZ2V2aWV3X21heF9zY3JvbGxfcGVyY2VudGFnZT86IG51bWJlclxuICAgICRwcmV2X3BhZ2V2aWV3X2xhc3RfY29udGVudD86IG51bWJlclxuICAgICRwcmV2X3BhZ2V2aWV3X2xhc3RfY29udGVudF9wZXJjZW50YWdlPzogbnVtYmVyXG4gICAgJHByZXZfcGFnZXZpZXdfbWF4X2NvbnRlbnQ/OiBudW1iZXJcbiAgICAkcHJldl9wYWdldmlld19tYXhfY29udGVudF9wZXJjZW50YWdlPzogbnVtYmVyXG59XG5cbmludGVyZmFjZSBQYWdlVmlld0V2ZW50UHJvcGVydGllcyBleHRlbmRzIFNjcm9sbFByb3BlcnRpZXMge1xuICAgICRwcmV2X3BhZ2V2aWV3X3BhdGhuYW1lPzogc3RyaW5nXG59XG5cbmV4cG9ydCBjbGFzcyBQYWdlVmlld01hbmFnZXIge1xuICAgIF9wYWdlVmlld0RhdGE6IFBhZ2VWaWV3RGF0YSB8IHVuZGVmaW5lZFxuICAgIF9oYXNTZWVuUGFnZVZpZXcgPSBmYWxzZVxuICAgIF9pbnN0YW5jZTogUG9zdEhvZ1xuXG4gICAgY29uc3RydWN0b3IoaW5zdGFuY2U6IFBvc3RIb2cpIHtcbiAgICAgICAgdGhpcy5faW5zdGFuY2UgPSBpbnN0YW5jZVxuICAgIH1cblxuICAgIF9jcmVhdGVQYWdlVmlld0RhdGEoKTogUGFnZVZpZXdEYXRhIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHBhdGhuYW1lOiB3aW5kb3c/LmxvY2F0aW9uLnBhdGhuYW1lID8/ICcnLFxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZG9QYWdlVmlldygpOiBQYWdlVmlld0V2ZW50UHJvcGVydGllcyB7XG4gICAgICAgIGxldCBwcmV2UGFnZVZpZXdEYXRhOiBQYWdlVmlld0RhdGEgfCB1bmRlZmluZWRcbiAgICAgICAgLy8gaWYgdGhlcmUgd2VyZSBldmVudHMgY3JlYXRlZCBiZWZvcmUgdGhlIGZpcnN0IFBhZ2VWaWV3LCB3ZSB3b3VsZCBoYXZlIGNyZWF0ZWQgYVxuICAgICAgICAvLyBwYWdlVmlld0RhdGEgZm9yIHRoZW0uIElmIHRoaXMgaGFwcGVuZWQsIHdlIGRvbid0IHdhbnQgdG8gY3JlYXRlIGEgbmV3IHBhZ2VWaWV3RGF0YVxuICAgICAgICBpZiAoIXRoaXMuX2hhc1NlZW5QYWdlVmlldykge1xuICAgICAgICAgICAgdGhpcy5faGFzU2VlblBhZ2VWaWV3ID0gdHJ1ZVxuICAgICAgICAgICAgcHJldlBhZ2VWaWV3RGF0YSA9IHVuZGVmaW5lZFxuICAgICAgICAgICAgaWYgKCF0aGlzLl9wYWdlVmlld0RhdGEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9wYWdlVmlld0RhdGEgPSB0aGlzLl9jcmVhdGVQYWdlVmlld0RhdGEoKVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcHJldlBhZ2VWaWV3RGF0YSA9IHRoaXMuX3BhZ2VWaWV3RGF0YVxuICAgICAgICAgICAgdGhpcy5fcGFnZVZpZXdEYXRhID0gdGhpcy5fY3JlYXRlUGFnZVZpZXdEYXRhKClcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHVwZGF0ZSB0aGUgc2Nyb2xsIHByb3BlcnRpZXMgZm9yIHRoZSBuZXcgcGFnZSwgYnV0IHdhaXQgdW50aWwgdGhlIG5leHQgdGlja1xuICAgICAgICAvLyBvZiB0aGUgZXZlbnQgbG9vcFxuICAgICAgICBzZXRUaW1lb3V0KHRoaXMuX3VwZGF0ZVNjcm9sbERhdGEsIDApXG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICRwcmV2X3BhZ2V2aWV3X3BhdGhuYW1lOiBwcmV2UGFnZVZpZXdEYXRhPy5wYXRobmFtZSxcbiAgICAgICAgICAgIC4uLnRoaXMuX2NhbGN1bGF0ZVByZXZQYWdlU2Nyb2xsUHJvcGVydGllcyhwcmV2UGFnZVZpZXdEYXRhKSxcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGRvUGFnZUxlYXZlKCk6IFBhZ2VWaWV3RXZlbnRQcm9wZXJ0aWVzIHtcbiAgICAgICAgY29uc3QgcHJldlBhZ2VWaWV3RGF0YSA9IHRoaXMuX3BhZ2VWaWV3RGF0YVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgJHByZXZfcGFnZXZpZXdfcGF0aG5hbWU6IHByZXZQYWdlVmlld0RhdGE/LnBhdGhuYW1lLFxuICAgICAgICAgICAgLi4udGhpcy5fY2FsY3VsYXRlUHJldlBhZ2VTY3JvbGxQcm9wZXJ0aWVzKHByZXZQYWdlVmlld0RhdGEpLFxuICAgICAgICB9XG4gICAgfVxuXG4gICAgX2NhbGN1bGF0ZVByZXZQYWdlU2Nyb2xsUHJvcGVydGllcyhwcmV2UGFnZVZpZXdEYXRhOiBQYWdlVmlld0RhdGEgfCB1bmRlZmluZWQpOiBTY3JvbGxQcm9wZXJ0aWVzIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgIXByZXZQYWdlVmlld0RhdGEgfHxcbiAgICAgICAgICAgIHByZXZQYWdlVmlld0RhdGEubWF4U2Nyb2xsSGVpZ2h0ID09IG51bGwgfHxcbiAgICAgICAgICAgIHByZXZQYWdlVmlld0RhdGEubGFzdFNjcm9sbFkgPT0gbnVsbCB8fFxuICAgICAgICAgICAgcHJldlBhZ2VWaWV3RGF0YS5tYXhTY3JvbGxZID09IG51bGwgfHxcbiAgICAgICAgICAgIHByZXZQYWdlVmlld0RhdGEubWF4Q29udGVudEhlaWdodCA9PSBudWxsIHx8XG4gICAgICAgICAgICBwcmV2UGFnZVZpZXdEYXRhLmxhc3RDb250ZW50WSA9PSBudWxsIHx8XG4gICAgICAgICAgICBwcmV2UGFnZVZpZXdEYXRhLm1heENvbnRlbnRZID09IG51bGxcbiAgICAgICAgKSB7XG4gICAgICAgICAgICByZXR1cm4ge31cbiAgICAgICAgfVxuXG4gICAgICAgIGxldCB7IG1heFNjcm9sbEhlaWdodCwgbGFzdFNjcm9sbFksIG1heFNjcm9sbFksIG1heENvbnRlbnRIZWlnaHQsIGxhc3RDb250ZW50WSwgbWF4Q29udGVudFkgfSA9IHByZXZQYWdlVmlld0RhdGFcblxuICAgICAgICAvLyBVc2UgY2VpbCwgc28gdGhhdCBlLmcuIHNjcm9sbGluZyA5OTkuNXB4IG9mIGEgMTAwMHB4IHBhZ2UgaXMgY29uc2lkZXJlZCAxMDAlIHNjcm9sbGVkXG4gICAgICAgIG1heFNjcm9sbEhlaWdodCA9IE1hdGguY2VpbChtYXhTY3JvbGxIZWlnaHQpXG4gICAgICAgIGxhc3RTY3JvbGxZID0gTWF0aC5jZWlsKGxhc3RTY3JvbGxZKVxuICAgICAgICBtYXhTY3JvbGxZID0gTWF0aC5jZWlsKG1heFNjcm9sbFkpXG4gICAgICAgIG1heENvbnRlbnRIZWlnaHQgPSBNYXRoLmNlaWwobWF4Q29udGVudEhlaWdodClcbiAgICAgICAgbGFzdENvbnRlbnRZID0gTWF0aC5jZWlsKGxhc3RDb250ZW50WSlcbiAgICAgICAgbWF4Q29udGVudFkgPSBNYXRoLmNlaWwobWF4Q29udGVudFkpXG5cbiAgICAgICAgLy8gaWYgdGhlIG1heGltdW0gc2Nyb2xsIGhlaWdodCBpcyBuZWFyIDAsIHRoZW4gdGhlIHBlcmNlbnRhZ2UgaXMgMVxuICAgICAgICBjb25zdCBsYXN0U2Nyb2xsUGVyY2VudGFnZSA9IG1heFNjcm9sbEhlaWdodCA8PSAxID8gMSA6IGNsYW1wKGxhc3RTY3JvbGxZIC8gbWF4U2Nyb2xsSGVpZ2h0LCAwLCAxKVxuICAgICAgICBjb25zdCBtYXhTY3JvbGxQZXJjZW50YWdlID0gbWF4U2Nyb2xsSGVpZ2h0IDw9IDEgPyAxIDogY2xhbXAobWF4U2Nyb2xsWSAvIG1heFNjcm9sbEhlaWdodCwgMCwgMSlcbiAgICAgICAgY29uc3QgbGFzdENvbnRlbnRQZXJjZW50YWdlID0gbWF4Q29udGVudEhlaWdodCA8PSAxID8gMSA6IGNsYW1wKGxhc3RDb250ZW50WSAvIG1heENvbnRlbnRIZWlnaHQsIDAsIDEpXG4gICAgICAgIGNvbnN0IG1heENvbnRlbnRQZXJjZW50YWdlID0gbWF4Q29udGVudEhlaWdodCA8PSAxID8gMSA6IGNsYW1wKG1heENvbnRlbnRZIC8gbWF4Q29udGVudEhlaWdodCwgMCwgMSlcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgJHByZXZfcGFnZXZpZXdfbGFzdF9zY3JvbGw6IGxhc3RTY3JvbGxZLFxuICAgICAgICAgICAgJHByZXZfcGFnZXZpZXdfbGFzdF9zY3JvbGxfcGVyY2VudGFnZTogbGFzdFNjcm9sbFBlcmNlbnRhZ2UsXG4gICAgICAgICAgICAkcHJldl9wYWdldmlld19tYXhfc2Nyb2xsOiBtYXhTY3JvbGxZLFxuICAgICAgICAgICAgJHByZXZfcGFnZXZpZXdfbWF4X3Njcm9sbF9wZXJjZW50YWdlOiBtYXhTY3JvbGxQZXJjZW50YWdlLFxuICAgICAgICAgICAgJHByZXZfcGFnZXZpZXdfbGFzdF9jb250ZW50OiBsYXN0Q29udGVudFksXG4gICAgICAgICAgICAkcHJldl9wYWdldmlld19sYXN0X2NvbnRlbnRfcGVyY2VudGFnZTogbGFzdENvbnRlbnRQZXJjZW50YWdlLFxuICAgICAgICAgICAgJHByZXZfcGFnZXZpZXdfbWF4X2NvbnRlbnQ6IG1heENvbnRlbnRZLFxuICAgICAgICAgICAgJHByZXZfcGFnZXZpZXdfbWF4X2NvbnRlbnRfcGVyY2VudGFnZTogbWF4Q29udGVudFBlcmNlbnRhZ2UsXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBfdXBkYXRlU2Nyb2xsRGF0YSA9ICgpID0+IHtcbiAgICAgICAgaWYgKCF0aGlzLl9wYWdlVmlld0RhdGEpIHtcbiAgICAgICAgICAgIHRoaXMuX3BhZ2VWaWV3RGF0YSA9IHRoaXMuX2NyZWF0ZVBhZ2VWaWV3RGF0YSgpXG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFnZVZpZXdEYXRhID0gdGhpcy5fcGFnZVZpZXdEYXRhXG5cbiAgICAgICAgY29uc3Qgc2Nyb2xsWSA9IHRoaXMuX3Njcm9sbFkoKVxuICAgICAgICBjb25zdCBzY3JvbGxIZWlnaHQgPSB0aGlzLl9zY3JvbGxIZWlnaHQoKVxuICAgICAgICBjb25zdCBjb250ZW50WSA9IHRoaXMuX2NvbnRlbnRZKClcbiAgICAgICAgY29uc3QgY29udGVudEhlaWdodCA9IHRoaXMuX2NvbnRlbnRIZWlnaHQoKVxuXG4gICAgICAgIHBhZ2VWaWV3RGF0YS5sYXN0U2Nyb2xsWSA9IHNjcm9sbFlcbiAgICAgICAgcGFnZVZpZXdEYXRhLm1heFNjcm9sbFkgPSBNYXRoLm1heChzY3JvbGxZLCBwYWdlVmlld0RhdGEubWF4U2Nyb2xsWSA/PyAwKVxuICAgICAgICBwYWdlVmlld0RhdGEubWF4U2Nyb2xsSGVpZ2h0ID0gTWF0aC5tYXgoc2Nyb2xsSGVpZ2h0LCBwYWdlVmlld0RhdGEubWF4U2Nyb2xsSGVpZ2h0ID8/IDApXG5cbiAgICAgICAgcGFnZVZpZXdEYXRhLmxhc3RDb250ZW50WSA9IGNvbnRlbnRZXG4gICAgICAgIHBhZ2VWaWV3RGF0YS5tYXhDb250ZW50WSA9IE1hdGgubWF4KGNvbnRlbnRZLCBwYWdlVmlld0RhdGEubWF4Q29udGVudFkgPz8gMClcbiAgICAgICAgcGFnZVZpZXdEYXRhLm1heENvbnRlbnRIZWlnaHQgPSBNYXRoLm1heChjb250ZW50SGVpZ2h0LCBwYWdlVmlld0RhdGEubWF4Q29udGVudEhlaWdodCA/PyAwKVxuICAgIH1cblxuICAgIHN0YXJ0TWVhc3VyaW5nU2Nyb2xsUG9zaXRpb24oKSB7XG4gICAgICAgIC8vIHNldHRpbmcgdGhlIHRoaXJkIGFyZ3VtZW50IHRvIGB0cnVlYCBtZWFucyB0aGF0IHdlIHdpbGwgcmVjZWl2ZSBzY3JvbGwgZXZlbnRzIGZvciBvdGhlciBzY3JvbGxhYmxlIGVsZW1lbnRzXG4gICAgICAgIC8vIG9uIHRoZSBwYWdlLCBub3QganVzdCB0aGUgd2luZG93XG4gICAgICAgIC8vIHNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvRXZlbnRUYXJnZXQvYWRkRXZlbnRMaXN0ZW5lciN1c2VjYXB0dXJlXG4gICAgICAgIHdpbmRvdz8uYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhpcy5fdXBkYXRlU2Nyb2xsRGF0YSwgdHJ1ZSlcbiAgICAgICAgd2luZG93Py5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGxlbmQnLCB0aGlzLl91cGRhdGVTY3JvbGxEYXRhLCB0cnVlKVxuICAgICAgICB3aW5kb3c/LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMuX3VwZGF0ZVNjcm9sbERhdGEpXG4gICAgfVxuXG4gICAgc3RvcE1lYXN1cmluZ1Njcm9sbFBvc2l0aW9uKCkge1xuICAgICAgICB3aW5kb3c/LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRoaXMuX3VwZGF0ZVNjcm9sbERhdGEpXG4gICAgICAgIHdpbmRvdz8ucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsZW5kJywgdGhpcy5fdXBkYXRlU2Nyb2xsRGF0YSlcbiAgICAgICAgd2luZG93Py5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLl91cGRhdGVTY3JvbGxEYXRhKVxuICAgIH1cblxuICAgIF9zY3JvbGxFbGVtZW50KCk6IEVsZW1lbnQgfCBudWxsIHwgdW5kZWZpbmVkIHtcbiAgICAgICAgaWYgKHRoaXMuX2luc3RhbmNlLmNvbmZpZy5zY3JvbGxfcm9vdF9zZWxlY3Rvcikge1xuICAgICAgICAgICAgY29uc3Qgc2VsZWN0b3JzID0gX2lzQXJyYXkodGhpcy5faW5zdGFuY2UuY29uZmlnLnNjcm9sbF9yb290X3NlbGVjdG9yKVxuICAgICAgICAgICAgICAgID8gdGhpcy5faW5zdGFuY2UuY29uZmlnLnNjcm9sbF9yb290X3NlbGVjdG9yXG4gICAgICAgICAgICAgICAgOiBbdGhpcy5faW5zdGFuY2UuY29uZmlnLnNjcm9sbF9yb290X3NlbGVjdG9yXVxuICAgICAgICAgICAgZm9yIChjb25zdCBzZWxlY3RvciBvZiBzZWxlY3RvcnMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlbGVtZW50ID0gd2luZG93Py5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKVxuICAgICAgICAgICAgICAgIGlmIChlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlbGVtZW50XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHdpbmRvdz8uZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBfc2Nyb2xsSGVpZ2h0KCk6IG51bWJlciB7XG4gICAgICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLl9zY3JvbGxFbGVtZW50KClcbiAgICAgICAgcmV0dXJuIGVsZW1lbnQgPyBNYXRoLm1heCgwLCBlbGVtZW50LnNjcm9sbEhlaWdodCAtIGVsZW1lbnQuY2xpZW50SGVpZ2h0KSA6IDBcbiAgICB9XG5cbiAgICBfc2Nyb2xsWSgpOiBudW1iZXIge1xuICAgICAgICBpZiAodGhpcy5faW5zdGFuY2UuY29uZmlnLnNjcm9sbF9yb290X3NlbGVjdG9yKSB7XG4gICAgICAgICAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5fc2Nyb2xsRWxlbWVudCgpXG4gICAgICAgICAgICByZXR1cm4gKGVsZW1lbnQgJiYgZWxlbWVudC5zY3JvbGxUb3ApIHx8IDBcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB3aW5kb3cgPyB3aW5kb3cuc2Nyb2xsWSB8fCB3aW5kb3cucGFnZVlPZmZzZXQgfHwgd2luZG93LmRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgfHwgMCA6IDBcbiAgICAgICAgfVxuICAgIH1cblxuICAgIF9jb250ZW50SGVpZ2h0KCk6IG51bWJlciB7XG4gICAgICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLl9zY3JvbGxFbGVtZW50KClcbiAgICAgICAgcmV0dXJuIGVsZW1lbnQ/LnNjcm9sbEhlaWdodCB8fCAwXG4gICAgfVxuXG4gICAgX2NvbnRlbnRZKCk6IG51bWJlciB7XG4gICAgICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLl9zY3JvbGxFbGVtZW50KClcbiAgICAgICAgY29uc3QgY2xpZW50SGVpZ2h0ID0gZWxlbWVudD8uY2xpZW50SGVpZ2h0IHx8IDBcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Njcm9sbFkoKSArIGNsaWVudEhlaWdodFxuICAgIH1cbn1cblxuZnVuY3Rpb24gY2xhbXAoeDogbnVtYmVyLCBtaW46IG51bWJlciwgbWF4OiBudW1iZXIpIHtcbiAgICByZXR1cm4gTWF0aC5tYXgobWluLCBNYXRoLm1pbih4LCBtYXgpKVxufVxuIiwgImltcG9ydCB7IFBvc3RIb2cgfSBmcm9tICcuL3Bvc3Rob2ctY29yZSdcbmltcG9ydCB7IFNVUlZFWVMgfSBmcm9tICcuL2NvbnN0YW50cydcbmltcG9ydCB7IFN1cnZleUNhbGxiYWNrLCBTdXJ2ZXlVcmxNYXRjaFR5cGUgfSBmcm9tICcuL3Bvc3Rob2ctc3VydmV5cy10eXBlcydcbmltcG9ydCB7IF9pc1VybE1hdGNoaW5nUmVnZXggfSBmcm9tICcuL3V0aWxzL3JlcXVlc3QtdXRpbHMnXG5pbXBvcnQgeyB3aW5kb3csIGRvY3VtZW50IH0gZnJvbSAnLi91dGlscy9nbG9iYWxzJ1xuXG5leHBvcnQgY29uc3Qgc3VydmV5VXJsVmFsaWRhdGlvbk1hcDogUmVjb3JkPFN1cnZleVVybE1hdGNoVHlwZSwgKGNvbmRpdGlvbnNVcmw6IHN0cmluZykgPT4gYm9vbGVhbj4gPSB7XG4gICAgaWNvbnRhaW5zOiAoY29uZGl0aW9uc1VybCkgPT5cbiAgICAgICAgISF3aW5kb3cgJiYgd2luZG93LmxvY2F0aW9uLmhyZWYudG9Mb3dlckNhc2UoKS5pbmRleE9mKGNvbmRpdGlvbnNVcmwudG9Mb3dlckNhc2UoKSkgPiAtMSxcbiAgICByZWdleDogKGNvbmRpdGlvbnNVcmwpID0+ICEhd2luZG93ICYmIF9pc1VybE1hdGNoaW5nUmVnZXgod2luZG93LmxvY2F0aW9uLmhyZWYsIGNvbmRpdGlvbnNVcmwpLFxuICAgIGV4YWN0OiAoY29uZGl0aW9uc1VybCkgPT4gd2luZG93Py5sb2NhdGlvbi5ocmVmID09PSBjb25kaXRpb25zVXJsLFxufVxuXG5leHBvcnQgY2xhc3MgUG9zdEhvZ1N1cnZleXMge1xuICAgIGluc3RhbmNlOiBQb3N0SG9nXG5cbiAgICBjb25zdHJ1Y3RvcihpbnN0YW5jZTogUG9zdEhvZykge1xuICAgICAgICB0aGlzLmluc3RhbmNlID0gaW5zdGFuY2VcbiAgICB9XG5cbiAgICBnZXRTdXJ2ZXlzKGNhbGxiYWNrOiBTdXJ2ZXlDYWxsYmFjaywgZm9yY2VSZWxvYWQgPSBmYWxzZSkge1xuICAgICAgICBjb25zdCBleGlzdGluZ1N1cnZleXMgPSB0aGlzLmluc3RhbmNlLmdldF9wcm9wZXJ0eShTVVJWRVlTKVxuICAgICAgICBpZiAoIWV4aXN0aW5nU3VydmV5cyB8fCBmb3JjZVJlbG9hZCkge1xuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZS5fc2VuZF9yZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICB1cmw6IHRoaXMuaW5zdGFuY2UucmVxdWVzdFJvdXRlci5lbmRwb2ludEZvcihcbiAgICAgICAgICAgICAgICAgICAgJ2FwaScsXG4gICAgICAgICAgICAgICAgICAgIGAvYXBpL3N1cnZleXMvP3Rva2VuPSR7dGhpcy5pbnN0YW5jZS5jb25maWcudG9rZW59YFxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgICAgICB0cmFuc3BvcnQ6ICdYSFInLFxuICAgICAgICAgICAgICAgIGNhbGxiYWNrOiAocmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1c0NvZGUgIT09IDIwMCB8fCAhcmVzcG9uc2UuanNvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKFtdKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHN1cnZleXMgPSByZXNwb25zZS5qc29uLnN1cnZleXMgfHwgW11cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnN0YW5jZS5wZXJzaXN0ZW5jZT8ucmVnaXN0ZXIoeyBbU1VSVkVZU106IHN1cnZleXMgfSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKHN1cnZleXMpXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soZXhpc3RpbmdTdXJ2ZXlzKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0QWN0aXZlTWF0Y2hpbmdTdXJ2ZXlzKGNhbGxiYWNrOiBTdXJ2ZXlDYWxsYmFjaywgZm9yY2VSZWxvYWQgPSBmYWxzZSkge1xuICAgICAgICB0aGlzLmdldFN1cnZleXMoKHN1cnZleXMpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGFjdGl2ZVN1cnZleXMgPSBzdXJ2ZXlzLmZpbHRlcigoc3VydmV5KSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICEhKHN1cnZleS5zdGFydF9kYXRlICYmICFzdXJ2ZXkuZW5kX2RhdGUpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgY29uc3QgY29uZGl0aW9uTWF0Y2hlZFN1cnZleXMgPSBhY3RpdmVTdXJ2ZXlzLmZpbHRlcigoc3VydmV5KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFzdXJ2ZXkuY29uZGl0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIHVzZSB1cmxNYXRjaFR5cGUgdG8gdmFsaWRhdGUgdXJsIGNvbmRpdGlvbiwgZmFsbGJhY2sgdG8gY29udGFpbnMgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5XG4gICAgICAgICAgICAgICAgY29uc3QgdXJsQ2hlY2sgPSBzdXJ2ZXkuY29uZGl0aW9ucz8udXJsXG4gICAgICAgICAgICAgICAgICAgID8gc3VydmV5VXJsVmFsaWRhdGlvbk1hcFtzdXJ2ZXkuY29uZGl0aW9ucz8udXJsTWF0Y2hUeXBlID8/ICdpY29udGFpbnMnXShzdXJ2ZXkuY29uZGl0aW9ucy51cmwpXG4gICAgICAgICAgICAgICAgICAgIDogdHJ1ZVxuICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdG9yQ2hlY2sgPSBzdXJ2ZXkuY29uZGl0aW9ucz8uc2VsZWN0b3JcbiAgICAgICAgICAgICAgICAgICAgPyBkb2N1bWVudD8ucXVlcnlTZWxlY3RvcihzdXJ2ZXkuY29uZGl0aW9ucy5zZWxlY3RvcilcbiAgICAgICAgICAgICAgICAgICAgOiB0cnVlXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVybENoZWNrICYmIHNlbGVjdG9yQ2hlY2tcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBjb25zdCB0YXJnZXRpbmdNYXRjaGVkU3VydmV5cyA9IGNvbmRpdGlvbk1hdGNoZWRTdXJ2ZXlzLmZpbHRlcigoc3VydmV5KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFzdXJ2ZXkubGlua2VkX2ZsYWdfa2V5ICYmICFzdXJ2ZXkudGFyZ2V0aW5nX2ZsYWdfa2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGxpbmtlZEZsYWdDaGVjayA9IHN1cnZleS5saW5rZWRfZmxhZ19rZXlcbiAgICAgICAgICAgICAgICAgICAgPyB0aGlzLmluc3RhbmNlLmZlYXR1cmVGbGFncy5pc0ZlYXR1cmVFbmFibGVkKHN1cnZleS5saW5rZWRfZmxhZ19rZXkpXG4gICAgICAgICAgICAgICAgICAgIDogdHJ1ZVxuICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldGluZ0ZsYWdDaGVjayA9IHN1cnZleS50YXJnZXRpbmdfZmxhZ19rZXlcbiAgICAgICAgICAgICAgICAgICAgPyB0aGlzLmluc3RhbmNlLmZlYXR1cmVGbGFncy5pc0ZlYXR1cmVFbmFibGVkKHN1cnZleS50YXJnZXRpbmdfZmxhZ19rZXkpXG4gICAgICAgICAgICAgICAgICAgIDogdHJ1ZVxuICAgICAgICAgICAgICAgIHJldHVybiBsaW5rZWRGbGFnQ2hlY2sgJiYgdGFyZ2V0aW5nRmxhZ0NoZWNrXG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sodGFyZ2V0aW5nTWF0Y2hlZFN1cnZleXMpXG4gICAgICAgIH0sIGZvcmNlUmVsb2FkKVxuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBSZXF1ZXN0UmVzcG9uc2UgfSBmcm9tICcuL3R5cGVzJ1xuaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSAnLi91dGlscy9sb2dnZXInXG5cbmNvbnN0IG9uZU1pbnV0ZUluTWlsbGlzZWNvbmRzID0gNjAgKiAxMDAwXG5cbmludGVyZmFjZSBDYXB0dXJlUmVzcG9uc2Uge1xuICAgIHF1b3RhX2xpbWl0ZWQ/OiBzdHJpbmdbXVxufVxuXG5leHBvcnQgY2xhc3MgUmF0ZUxpbWl0ZXIge1xuICAgIGxpbWl0czogUmVjb3JkPHN0cmluZywgbnVtYmVyPiA9IHt9XG5cbiAgICBwdWJsaWMgaXNSYXRlTGltaXRlZChiYXRjaEtleTogc3RyaW5nIHwgdW5kZWZpbmVkKTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IHJldHJ5QWZ0ZXIgPSB0aGlzLmxpbWl0c1tiYXRjaEtleSB8fCAnZXZlbnRzJ10gfHwgZmFsc2VcblxuICAgICAgICBpZiAocmV0cnlBZnRlciA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgRGF0ZSgpLmdldFRpbWUoKSA8IHJldHJ5QWZ0ZXJcbiAgICB9XG5cbiAgICBwdWJsaWMgY2hlY2tGb3JMaW1pdGluZyA9IChodHRwUmVzcG9uc2U6IFJlcXVlc3RSZXNwb25zZSk6IHZvaWQgPT4ge1xuICAgICAgICBjb25zdCB0ZXh0ID0gaHR0cFJlc3BvbnNlLnRleHRcblxuICAgICAgICBpZiAoIXRleHQgfHwgIXRleHQubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZTogQ2FwdHVyZVJlc3BvbnNlID0gSlNPTi5wYXJzZSh0ZXh0KVxuICAgICAgICAgICAgY29uc3QgcXVvdGFMaW1pdGVkUHJvZHVjdHMgPSByZXNwb25zZS5xdW90YV9saW1pdGVkIHx8IFtdXG4gICAgICAgICAgICBxdW90YUxpbWl0ZWRQcm9kdWN0cy5mb3JFYWNoKChiYXRjaEtleSkgPT4ge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5pbmZvKGBbUmF0ZUxpbWl0ZXJdICR7YmF0Y2hLZXkgfHwgJ2V2ZW50cyd9IGlzIHF1b3RhIGxpbWl0ZWQuYClcbiAgICAgICAgICAgICAgICB0aGlzLmxpbWl0c1tiYXRjaEtleV0gPSBuZXcgRGF0ZSgpLmdldFRpbWUoKSArIG9uZU1pbnV0ZUluTWlsbGlzZWNvbmRzXG4gICAgICAgICAgICB9KVxuICAgICAgICB9IGNhdGNoIChlOiBhbnkpIHtcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKGBbUmF0ZUxpbWl0ZXJdIGNvdWxkIG5vdCByYXRlIGxpbWl0IC0gY29udGludWluZy4gRXJyb3I6IFwiJHtlPy5tZXNzYWdlfVwiYCwgeyB0ZXh0IH0pXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgIH1cbn1cbiIsICIvKiBDbGllbnQtc2lkZSBzZXNzaW9uIHBhcmFtZXRlcnMuIFRoZXNlIGFyZSBwcmltYXJpbHkgdXNlZCBieSB3ZWIgYW5hbHl0aWNzLFxuICogd2hpY2ggcmVsaWVzIG9uIHRoZXNlIGZvciBzZXNzaW9uIGFuYWx5dGljcyB3aXRob3V0IHRoZSBwbHVnaW4gc2VydmVyIGJlaW5nXG4gKiBhdmFpbGFibGUgZm9yIHRoZSBwZXJzb24gbGV2ZWwgc2V0LW9uY2UgcHJvcGVydGllcy4gT2J2aW91c2x5IG5vdCBjb25zaXN0ZW50XG4gKiBiZXR3ZWVuIGNsaWVudC1zaWRlIGV2ZW50cyBhbmQgc2VydmVyLXNpZGUgZXZlbnRzIGJ1dCB0aGlzIGlzIGFjY2VwdGFibGVcbiAqIGFzIHdlYiBhbmFseXRpY3Mgb25seSB1c2VzIGNsaWVudC1zaWRlLlxuICpcbiAqIFRoZXNlIGhhdmUgdGhlIHNhbWUgbGlmZXNwYW4gYXMgYSBzZXNzaW9uX2lkXG4gKi9cbmltcG9ydCB7IGxvY2F0aW9uIH0gZnJvbSAnLi91dGlscy9nbG9iYWxzJ1xuaW1wb3J0IHsgX2luZm8gfSBmcm9tICcuL3V0aWxzL2V2ZW50LXV0aWxzJ1xuaW1wb3J0IHsgU2Vzc2lvbklkTWFuYWdlciB9IGZyb20gJy4vc2Vzc2lvbmlkJ1xuaW1wb3J0IHsgUG9zdEhvZ1BlcnNpc3RlbmNlIH0gZnJvbSAnLi9wb3N0aG9nLXBlcnNpc3RlbmNlJ1xuaW1wb3J0IHsgQ0xJRU5UX1NFU1NJT05fUFJPUFMgfSBmcm9tICcuL2NvbnN0YW50cydcblxuaW50ZXJmYWNlIFNlc3Npb25Tb3VyY2VQcm9wcyB7XG4gICAgaW5pdGlhbFBhdGhOYW1lOiBzdHJpbmdcbiAgICByZWZlcnJpbmdEb21haW46IHN0cmluZyAvLyBJcyBhY3R1YWxseSBob3N0LCBidXQgbmFtZWQgZG9tYWluIGZvciBpbnRlcm5hbCBjb25zaXN0ZW5jeS4gU2hvdWxkIGNvbnRhaW4gYSBwb3J0IGlmIHRoZXJlIGlzIG9uZS5cbiAgICB1dG1fbWVkaXVtPzogc3RyaW5nXG4gICAgdXRtX3NvdXJjZT86IHN0cmluZ1xuICAgIHV0bV9jYW1wYWlnbj86IHN0cmluZ1xuICAgIHV0bV9jb250ZW50Pzogc3RyaW5nXG4gICAgdXRtX3Rlcm0/OiBzdHJpbmdcbn1cblxuaW50ZXJmYWNlIFN0b3JlZFNlc3Npb25Tb3VyY2VQcm9wcyB7XG4gICAgc2Vzc2lvbklkOiBzdHJpbmdcbiAgICBwcm9wczogU2Vzc2lvblNvdXJjZVByb3BzXG59XG5cbmNvbnN0IGdlbmVyYXRlU2Vzc2lvblNvdXJjZVBhcmFtcyA9ICgpOiBTZXNzaW9uU291cmNlUHJvcHMgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICAgIGluaXRpYWxQYXRoTmFtZTogbG9jYXRpb24/LnBhdGhuYW1lIHx8ICcnLFxuICAgICAgICByZWZlcnJpbmdEb21haW46IF9pbmZvLnJlZmVycmluZ0RvbWFpbigpLFxuICAgICAgICAuLi5faW5mby5jYW1wYWlnblBhcmFtcygpLFxuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIFNlc3Npb25Qcm9wc01hbmFnZXIge1xuICAgIHByaXZhdGUgcmVhZG9ubHkgX3Nlc3Npb25JZE1hbmFnZXI6IFNlc3Npb25JZE1hbmFnZXJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9wZXJzaXN0ZW5jZTogUG9zdEhvZ1BlcnNpc3RlbmNlXG4gICAgcHJpdmF0ZSByZWFkb25seSBfc2Vzc2lvblNvdXJjZVBhcmFtR2VuZXJhdG9yOiAoKSA9PiBTZXNzaW9uU291cmNlUHJvcHNcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBzZXNzaW9uSWRNYW5hZ2VyOiBTZXNzaW9uSWRNYW5hZ2VyLFxuICAgICAgICBwZXJzaXN0ZW5jZTogUG9zdEhvZ1BlcnNpc3RlbmNlLFxuICAgICAgICBzZXNzaW9uU291cmNlUGFyYW1HZW5lcmF0b3I/OiAoKSA9PiBTZXNzaW9uU291cmNlUHJvcHNcbiAgICApIHtcbiAgICAgICAgdGhpcy5fc2Vzc2lvbklkTWFuYWdlciA9IHNlc3Npb25JZE1hbmFnZXJcbiAgICAgICAgdGhpcy5fcGVyc2lzdGVuY2UgPSBwZXJzaXN0ZW5jZVxuICAgICAgICB0aGlzLl9zZXNzaW9uU291cmNlUGFyYW1HZW5lcmF0b3IgPSBzZXNzaW9uU291cmNlUGFyYW1HZW5lcmF0b3IgfHwgZ2VuZXJhdGVTZXNzaW9uU291cmNlUGFyYW1zXG5cbiAgICAgICAgdGhpcy5fc2Vzc2lvbklkTWFuYWdlci5vblNlc3Npb25JZCh0aGlzLl9vblNlc3Npb25JZENhbGxiYWNrKVxuICAgIH1cblxuICAgIF9nZXRTdG9yZWRQcm9wcygpOiBTdG9yZWRTZXNzaW9uU291cmNlUHJvcHMgfCB1bmRlZmluZWQge1xuICAgICAgICByZXR1cm4gdGhpcy5fcGVyc2lzdGVuY2UucHJvcHNbQ0xJRU5UX1NFU1NJT05fUFJPUFNdXG4gICAgfVxuXG4gICAgX29uU2Vzc2lvbklkQ2FsbGJhY2sgPSAoc2Vzc2lvbklkOiBzdHJpbmcpID0+IHtcbiAgICAgICAgY29uc3Qgc3RvcmVkID0gdGhpcy5fZ2V0U3RvcmVkUHJvcHMoKVxuICAgICAgICBpZiAoc3RvcmVkICYmIHN0b3JlZC5zZXNzaW9uSWQgPT09IHNlc3Npb25JZCkge1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBuZXdQcm9wczogU3RvcmVkU2Vzc2lvblNvdXJjZVByb3BzID0ge1xuICAgICAgICAgICAgc2Vzc2lvbklkLFxuICAgICAgICAgICAgcHJvcHM6IHRoaXMuX3Nlc3Npb25Tb3VyY2VQYXJhbUdlbmVyYXRvcigpLFxuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3BlcnNpc3RlbmNlLnJlZ2lzdGVyKHsgW0NMSUVOVF9TRVNTSU9OX1BST1BTXTogbmV3UHJvcHMgfSlcbiAgICB9XG5cbiAgICBnZXRTZXNzaW9uUHJvcHMoKSB7XG4gICAgICAgIGNvbnN0IHAgPSB0aGlzLl9nZXRTdG9yZWRQcm9wcygpPy5wcm9wc1xuICAgICAgICBpZiAoIXApIHtcbiAgICAgICAgICAgIHJldHVybiB7fVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICRjbGllbnRfc2Vzc2lvbl9pbml0aWFsX3JlZmVycmluZ19ob3N0OiBwLnJlZmVycmluZ0RvbWFpbixcbiAgICAgICAgICAgICRjbGllbnRfc2Vzc2lvbl9pbml0aWFsX3BhdGhuYW1lOiBwLmluaXRpYWxQYXRoTmFtZSxcbiAgICAgICAgICAgICRjbGllbnRfc2Vzc2lvbl9pbml0aWFsX3V0bV9zb3VyY2U6IHAudXRtX3NvdXJjZSxcbiAgICAgICAgICAgICRjbGllbnRfc2Vzc2lvbl9pbml0aWFsX3V0bV9jYW1wYWlnbjogcC51dG1fY2FtcGFpZ24sXG4gICAgICAgICAgICAkY2xpZW50X3Nlc3Npb25faW5pdGlhbF91dG1fbWVkaXVtOiBwLnV0bV9tZWRpdW0sXG4gICAgICAgICAgICAkY2xpZW50X3Nlc3Npb25faW5pdGlhbF91dG1fY29udGVudDogcC51dG1fY29udGVudCxcbiAgICAgICAgICAgICRjbGllbnRfc2Vzc2lvbl9pbml0aWFsX3V0bV90ZXJtOiBwLnV0bV90ZXJtLFxuICAgICAgICB9XG4gICAgfVxufVxuIiwgImV4cG9ydCBjb25zdCBERUZBVUxUX0JMT0NLRURfVUFfU1RSUyA9IFtcbiAgICAnYWhyZWZzYm90JyxcbiAgICAnYWhyZWZzc2l0ZWF1ZGl0JyxcbiAgICAnYXBwbGVib3QnLFxuICAgICdiYWlkdXNwaWRlcicsXG4gICAgJ2Jpbmdib3QnLFxuICAgICdiaW5ncHJldmlldycsXG4gICAgJ2JvdC5odG0nLFxuICAgICdib3QucGhwJyxcbiAgICAnY3Jhd2xlcicsXG4gICAgJ2R1Y2tkdWNrYm90JyxcbiAgICAnZmFjZWJvb2tleHRlcm5hbCcsXG4gICAgJ2ZhY2Vib29rY2F0YWxvZycsXG4gICAgJ2dwdGJvdCcsXG4gICAgJ2h0dHA6Ly95YW5kZXguY29tL2JvdHMnLFxuICAgICdodWJzcG90JyxcbiAgICAnaWFfYXJjaGl2ZXInLFxuICAgICdsaW5rZWRpbmJvdCcsXG4gICAgJ21qMTJib3QnLFxuICAgICdtc25ib3QnLFxuICAgICduZXNzdXMnLFxuICAgICdwZXRhbGJvdCcsXG4gICAgJ3BpbnRlcmVzdCcsXG4gICAgJ3ByZXJlbmRlcicsXG4gICAgJ3JvZ2VyYm90JyxcbiAgICAnc2NyZWFtaW5nIGZyb2cnLFxuICAgICdzZW1ydXNoYm90JyxcbiAgICAnc2l0ZWJ1bGInLFxuICAgICdzbHVycCcsXG4gICAgJ3R1cm5pdGluJyxcbiAgICAndHdpdHRlcmJvdCcsXG4gICAgJ3ZlcmNlbGJvdCcsXG4gICAgJ3lhaG9vISBzbHVycCcsXG4gICAgJ3lhbmRleGJvdCcsXG5cbiAgICAvLyBhIHdob2xlIGJ1bmNoIG9mIGdvb2ctc3BlY2lmaWMgY3Jhd2xlcnNcbiAgICAvLyBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9zZWFyY2gvZG9jcy9hZHZhbmNlZC9jcmF3bGluZy9vdmVydmlldy1nb29nbGUtY3Jhd2xlcnNcbiAgICAnYWRzYm90LWdvb2dsZScsXG4gICAgJ2FwaXMtZ29vZ2xlJyxcbiAgICAnZHVwbGV4d2ViLWdvb2dsZScsXG4gICAgJ2ZlZWRmZXRjaGVyLWdvb2dsZScsXG4gICAgJ2dvb2dsZSBmYXZpY29uJyxcbiAgICAnZ29vZ2xlIHdlYiBwcmV2aWV3JyxcbiAgICAnZ29vZ2xlLXJlYWQtYWxvdWQnLFxuICAgICdnb29nbGVib3QnLFxuICAgICdnb29nbGV3ZWJsaWdodCcsXG4gICAgJ21lZGlhcGFydG5lcnMtZ29vZ2xlJyxcbiAgICAnc3RvcmVib3QtZ29vZ2xlJyxcbl1cblxuLyoqXG4gKiBCbG9jayB2YXJpb3VzIHdlYiBzcGlkZXJzIGZyb20gZXhlY3V0aW5nIG91ciBKUyBhbmQgc2VuZGluZyBmYWxzZSBjYXB0dXJpbmcgZGF0YVxuICovXG5leHBvcnQgY29uc3QgX2lzQmxvY2tlZFVBID0gZnVuY3Rpb24gKHVhOiBzdHJpbmcsIGN1c3RvbUJsb2NrZWRVc2VyQWdlbnRzOiBzdHJpbmdbXSk6IGJvb2xlYW4ge1xuICAgIGlmICghdWEpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIGNvbnN0IHVhTG93ZXIgPSB1YS50b0xvd2VyQ2FzZSgpXG4gICAgcmV0dXJuIERFRkFVTFRfQkxPQ0tFRF9VQV9TVFJTLmNvbmNhdChjdXN0b21CbG9ja2VkVXNlckFnZW50cyB8fCBbXSkuc29tZSgoYmxvY2tlZFVBKSA9PiB7XG4gICAgICAgIGNvbnN0IGJsb2NrZWRVYUxvd2VyID0gYmxvY2tlZFVBLnRvTG93ZXJDYXNlKClcbiAgICAgICAgaWYgKHVhTG93ZXIuaW5jbHVkZXMpIHtcbiAgICAgICAgICAgIHJldHVybiB1YUxvd2VyLmluY2x1ZGVzKGJsb2NrZWRVYUxvd2VyKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gSUUgMTEgOi9cbiAgICAgICAgICAgIHJldHVybiB1YUxvd2VyLmluZGV4T2YoYmxvY2tlZFVhTG93ZXIpICE9PSAtMVxuICAgICAgICB9XG4gICAgfSlcbn1cbiIsICJpbXBvcnQgQ29uZmlnIGZyb20gJy4vY29uZmlnJ1xuaW1wb3J0IHtcbiAgICBfY29weUFuZFRydW5jYXRlU3RyaW5ncyxcbiAgICBfZWFjaCxcbiAgICBfZWFjaEFycmF5LFxuICAgIF9leHRlbmQsXG4gICAgX2luY2x1ZGVzLFxuICAgIF9yZWdpc3Rlcl9ldmVudCxcbiAgICBfc2FmZXdyYXBfY2xhc3MsXG4gICAgaXNDcm9zc0RvbWFpbkNvb2tpZSxcbiAgICBpc0Rpc3RpbmN0SWRTdHJpbmdMaWtlLFxufSBmcm9tICcuL3V0aWxzJ1xuaW1wb3J0IHsgd2luZG93LCBhc3NpZ25hYmxlV2luZG93IH0gZnJvbSAnLi91dGlscy9nbG9iYWxzJ1xuaW1wb3J0IHsgYXV0b2NhcHR1cmUgfSBmcm9tICcuL2F1dG9jYXB0dXJlJ1xuaW1wb3J0IHsgUG9zdEhvZ0ZlYXR1cmVGbGFncyB9IGZyb20gJy4vcG9zdGhvZy1mZWF0dXJlZmxhZ3MnXG5pbXBvcnQgeyBQb3N0SG9nUGVyc2lzdGVuY2UgfSBmcm9tICcuL3Bvc3Rob2ctcGVyc2lzdGVuY2UnXG5pbXBvcnQgeyBBTElBU19JRF9LRVksIEZMQUdfQ0FMTF9SRVBPUlRFRCwgUEVPUExFX0RJU1RJTkNUX0lEX0tFWSB9IGZyb20gJy4vY29uc3RhbnRzJ1xuaW1wb3J0IHsgU2Vzc2lvblJlY29yZGluZyB9IGZyb20gJy4vZXh0ZW5zaW9ucy9yZXBsYXkvc2Vzc2lvbnJlY29yZGluZydcbmltcG9ydCB7IERlY2lkZSB9IGZyb20gJy4vZGVjaWRlJ1xuaW1wb3J0IHsgVG9vbGJhciB9IGZyb20gJy4vZXh0ZW5zaW9ucy90b29sYmFyJ1xuaW1wb3J0IHsgY2xlYXJPcHRJbk91dCwgaGFzT3B0ZWRJbiwgaGFzT3B0ZWRPdXQsIG9wdEluLCBvcHRPdXQsIHVzZXJPcHRlZE91dCB9IGZyb20gJy4vZ2Rwci11dGlscydcbmltcG9ydCB7IGNvb2tpZVN0b3JlLCBsb2NhbFN0b3JlIH0gZnJvbSAnLi9zdG9yYWdlJ1xuaW1wb3J0IHsgUmVxdWVzdFF1ZXVlIH0gZnJvbSAnLi9yZXF1ZXN0LXF1ZXVlJ1xuaW1wb3J0IHsgUmV0cnlRdWV1ZSB9IGZyb20gJy4vcmV0cnktcXVldWUnXG5pbXBvcnQgeyBTZXNzaW9uSWRNYW5hZ2VyIH0gZnJvbSAnLi9zZXNzaW9uaWQnXG5pbXBvcnQgeyBSZXF1ZXN0Um91dGVyIH0gZnJvbSAnLi91dGlscy9yZXF1ZXN0LXJvdXRlcidcbmltcG9ydCB7XG4gICAgQXV0b2NhcHR1cmVDb25maWcsXG4gICAgQ2FwdHVyZU9wdGlvbnMsXG4gICAgQ2FwdHVyZVJlc3VsdCxcbiAgICBDb21wcmVzc2lvbixcbiAgICBEZWNpZGVSZXNwb25zZSxcbiAgICBFYXJseUFjY2Vzc0ZlYXR1cmVDYWxsYmFjayxcbiAgICBHRFBST3B0aW9ucyxcbiAgICBJc0ZlYXR1cmVFbmFibGVkT3B0aW9ucyxcbiAgICBKc29uVHlwZSxcbiAgICBPcHRJbk91dENhcHR1cmluZ09wdGlvbnMsXG4gICAgUG9zdEhvZ0NvbmZpZyxcbiAgICBQcm9wZXJ0aWVzLFxuICAgIFByb3BlcnR5LFxuICAgIFF1ZXVlZFJlcXVlc3RPcHRpb25zLFxuICAgIFJlcXVlc3RDYWxsYmFjayxcbiAgICBTZXNzaW9uSWRDaGFuZ2VkQ2FsbGJhY2ssXG4gICAgU25pcHBldEFycmF5SXRlbSxcbiAgICBUb29sYmFyUGFyYW1zLFxufSBmcm9tICcuL3R5cGVzJ1xuaW1wb3J0IHsgU2VudHJ5SW50ZWdyYXRpb24gfSBmcm9tICcuL2V4dGVuc2lvbnMvc2VudHJ5LWludGVncmF0aW9uJ1xuaW1wb3J0IHsgY3JlYXRlU2VnbWVudEludGVncmF0aW9uIH0gZnJvbSAnLi9leHRlbnNpb25zL3NlZ21lbnQtaW50ZWdyYXRpb24nXG5pbXBvcnQgeyBQYWdlVmlld01hbmFnZXIgfSBmcm9tICcuL3BhZ2UtdmlldydcbmltcG9ydCB7IFBvc3RIb2dTdXJ2ZXlzIH0gZnJvbSAnLi9wb3N0aG9nLXN1cnZleXMnXG5pbXBvcnQgeyBSYXRlTGltaXRlciB9IGZyb20gJy4vcmF0ZS1saW1pdGVyJ1xuaW1wb3J0IHsgdXVpZHY3IH0gZnJvbSAnLi91dWlkdjcnXG5pbXBvcnQgeyBTdXJ2ZXlDYWxsYmFjayB9IGZyb20gJy4vcG9zdGhvZy1zdXJ2ZXlzLXR5cGVzJ1xuaW1wb3J0IHtcbiAgICBfaXNBcnJheSxcbiAgICBfaXNFbXB0eU9iamVjdCxcbiAgICBfaXNFbXB0eVN0cmluZyxcbiAgICBfaXNGdW5jdGlvbixcbiAgICBfaXNOdW1iZXIsXG4gICAgX2lzT2JqZWN0LFxuICAgIF9pc1N0cmluZyxcbiAgICBfaXNVbmRlZmluZWQsXG59IGZyb20gJy4vdXRpbHMvdHlwZS11dGlscydcbmltcG9ydCB7IF9pbmZvIH0gZnJvbSAnLi91dGlscy9ldmVudC11dGlscydcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJy4vdXRpbHMvbG9nZ2VyJ1xuaW1wb3J0IHsgZG9jdW1lbnQsIHVzZXJBZ2VudCB9IGZyb20gJy4vdXRpbHMvZ2xvYmFscydcbmltcG9ydCB7IFNlc3Npb25Qcm9wc01hbmFnZXIgfSBmcm9tICcuL3Nlc3Npb24tcHJvcHMnXG5pbXBvcnQgeyBfaXNCbG9ja2VkVUEgfSBmcm9tICcuL3V0aWxzL2Jsb2NrZWQtdWFzJ1xuaW1wb3J0IHsgZXh0ZW5kVVJMUGFyYW1zLCByZXF1ZXN0LCBTVVBQT1JUU19SRVFVRVNUIH0gZnJvbSAnLi9yZXF1ZXN0J1xuXG4vKlxuU0lNUExFIFNUWUxFIEdVSURFOlxuXG50aGlzLnggPT09IHB1YmxpYyBmdW5jdGlvblxudGhpcy5feCA9PT0gaW50ZXJuYWwgLSBvbmx5IHVzZSB3aXRoaW4gdGhpcyBmaWxlXG50aGlzLl9feCA9PT0gcHJpdmF0ZSAtIG9ubHkgdXNlIHdpdGhpbiB0aGUgY2xhc3NcblxuR2xvYmFscyBzaG91bGQgYmUgYWxsIGNhcHNcbiovXG5cbmNvbnN0IGluc3RhbmNlczogUmVjb3JkPHN0cmluZywgUG9zdEhvZz4gPSB7fVxuXG4vLyBzb21lIGdsb2JhbHMgZm9yIGNvbXBhcmlzb25zXG5jb25zdCBfX05PT1AgPSAoKSA9PiB7fVxuXG5jb25zdCBQUklNQVJZX0lOU1RBTkNFX05BTUUgPSAncG9zdGhvZydcblxuLypcbiAqIER5bmFtaWMuLi4gY29uc3RhbnRzPyBJcyB0aGF0IGFuIG94eW1vcm9uP1xuICovXG4vLyBodHRwOi8vaGFja3MubW96aWxsYS5vcmcvMjAwOS8wNy9jcm9zcy1zaXRlLXhtbGh0dHByZXF1ZXN0LXdpdGgtY29ycy9cbi8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvRE9NL1hNTEh0dHBSZXF1ZXN0I3dpdGhDcmVkZW50aWFsc1xuXG4vLyBJRTwxMCBkb2VzIG5vdCBzdXBwb3J0IGNyb3NzLW9yaWdpbiBYSFIncyBidXQgc2NyaXB0IHRhZ3Ncbi8vIHdpdGggZGVmZXIgd29uJ3QgYmxvY2sgd2luZG93Lm9ubG9hZDsgRU5RVUVVRV9SRVFVRVNUU1xuLy8gc2hvdWxkIG9ubHkgYmUgdHJ1ZSBmb3IgT3BlcmE8MTJcbmxldCBFTlFVRVVFX1JFUVVFU1RTID0gIVNVUFBPUlRTX1JFUVVFU1QgJiYgdXNlckFnZW50Py5pbmRleE9mKCdNU0lFJykgPT09IC0xICYmIHVzZXJBZ2VudD8uaW5kZXhPZignTW96aWxsYScpID09PSAtMVxuXG5leHBvcnQgY29uc3QgZGVmYXVsdENvbmZpZyA9ICgpOiBQb3N0SG9nQ29uZmlnID0+ICh7XG4gICAgYXBpX2hvc3Q6ICdodHRwczovL2FwcC5wb3N0aG9nLmNvbScsXG4gICAgYXBpX3RyYW5zcG9ydDogJ1hIUicsXG4gICAgdWlfaG9zdDogbnVsbCxcbiAgICB0b2tlbjogJycsXG4gICAgYXV0b2NhcHR1cmU6IHRydWUsXG4gICAgcmFnZWNsaWNrOiB0cnVlLFxuICAgIGNyb3NzX3N1YmRvbWFpbl9jb29raWU6IGlzQ3Jvc3NEb21haW5Db29raWUoZG9jdW1lbnQ/LmxvY2F0aW9uKSxcbiAgICBwZXJzaXN0ZW5jZTogJ2xvY2FsU3RvcmFnZStjb29raWUnLCAvLyB1cCB0byAxLjkyLjAgdGhpcyB3YXMgJ2Nvb2tpZScuIEl0J3MgZWFzeSB0byBtaWdyYXRlIGFzICdsb2NhbFN0b3JhZ2UrY29va2llJyB3aWxsIG1pZ3JhdGUgZGF0YSBmcm9tIGNvb2tpZSBzdG9yYWdlXG4gICAgcGVyc2lzdGVuY2VfbmFtZTogJycsXG4gICAgY29va2llX25hbWU6ICcnLFxuICAgIGxvYWRlZDogX19OT09QLFxuICAgIHN0b3JlX2dvb2dsZTogdHJ1ZSxcbiAgICBjdXN0b21fY2FtcGFpZ25fcGFyYW1zOiBbXSxcbiAgICBjdXN0b21fYmxvY2tlZF91c2VyYWdlbnRzOiBbXSxcbiAgICBzYXZlX3JlZmVycmVyOiB0cnVlLFxuICAgIGNhcHR1cmVfcGFnZXZpZXc6IHRydWUsXG4gICAgY2FwdHVyZV9wYWdlbGVhdmU6IHRydWUsIC8vIFdlJ2xsIG9ubHkgY2FwdHVyZSBwYWdlbGVhdmUgZXZlbnRzIGlmIGNhcHR1cmVfcGFnZXZpZXcgaXMgYWxzbyB0cnVlXG4gICAgZGVidWc6IGZhbHNlLFxuICAgIHZlcmJvc2U6IGZhbHNlLFxuICAgIGNvb2tpZV9leHBpcmF0aW9uOiAzNjUsXG4gICAgdXBncmFkZTogZmFsc2UsXG4gICAgZGlzYWJsZV9zZXNzaW9uX3JlY29yZGluZzogZmFsc2UsXG4gICAgZGlzYWJsZV9wZXJzaXN0ZW5jZTogZmFsc2UsXG4gICAgZGlzYWJsZV9jb29raWU6IGZhbHNlLFxuICAgIGVuYWJsZV9yZWNvcmRpbmdfY29uc29sZV9sb2c6IHVuZGVmaW5lZCwgLy8gV2hlbiB1bmRlZmluZWQsIGl0IGZhbGxzIGJhY2sgdG8gdGhlIHNlcnZlci1zaWRlIHNldHRpbmdcbiAgICBzZWN1cmVfY29va2llOiB3aW5kb3c/LmxvY2F0aW9uPy5wcm90b2NvbCA9PT0gJ2h0dHBzOicsXG4gICAgaXA6IHRydWUsXG4gICAgb3B0X291dF9jYXB0dXJpbmdfYnlfZGVmYXVsdDogZmFsc2UsXG4gICAgb3B0X291dF9wZXJzaXN0ZW5jZV9ieV9kZWZhdWx0OiBmYWxzZSxcbiAgICBvcHRfb3V0X3VzZXJhZ2VudF9maWx0ZXI6IGZhbHNlLFxuICAgIG9wdF9vdXRfY2FwdHVyaW5nX3BlcnNpc3RlbmNlX3R5cGU6ICdsb2NhbFN0b3JhZ2UnLFxuICAgIG9wdF9vdXRfY2FwdHVyaW5nX2Nvb2tpZV9wcmVmaXg6IG51bGwsXG4gICAgb3B0X2luX3NpdGVfYXBwczogZmFsc2UsXG4gICAgLy8gRGVwcmVjYXRlZCwgdXNlIHByb3BlcnR5X2RlbnlsaXN0IGluc3RlYWQuXG4gICAgcHJvcGVydHlfYmxhY2tsaXN0OiBbXSxcbiAgICBwcm9wZXJ0eV9kZW55bGlzdDogW10sXG4gICAgcmVzcGVjdF9kbnQ6IGZhbHNlLFxuICAgIHNhbml0aXplX3Byb3BlcnRpZXM6IG51bGwsXG4gICAgcmVxdWVzdF9oZWFkZXJzOiB7fSwgLy8geyBoZWFkZXI6IHZhbHVlLCBoZWFkZXIyOiB2YWx1ZSB9XG4gICAgaW5hcHBfcHJvdG9jb2w6ICcvLycsXG4gICAgaW5hcHBfbGlua19uZXdfd2luZG93OiBmYWxzZSxcbiAgICByZXF1ZXN0X2JhdGNoaW5nOiB0cnVlLFxuICAgIHByb3BlcnRpZXNfc3RyaW5nX21heF9sZW5ndGg6IDY1NTM1LFxuICAgIHNlc3Npb25fcmVjb3JkaW5nOiB7fSxcbiAgICBtYXNrX2FsbF9lbGVtZW50X2F0dHJpYnV0ZXM6IGZhbHNlLFxuICAgIG1hc2tfYWxsX3RleHQ6IGZhbHNlLFxuICAgIGFkdmFuY2VkX2Rpc2FibGVfZGVjaWRlOiBmYWxzZSxcbiAgICBhZHZhbmNlZF9kaXNhYmxlX2ZlYXR1cmVfZmxhZ3M6IGZhbHNlLFxuICAgIGFkdmFuY2VkX2Rpc2FibGVfZmVhdHVyZV9mbGFnc19vbl9maXJzdF9sb2FkOiBmYWxzZSxcbiAgICBhZHZhbmNlZF9kaXNhYmxlX3Rvb2xiYXJfbWV0cmljczogZmFsc2UsXG4gICAgZmVhdHVyZV9mbGFnX3JlcXVlc3RfdGltZW91dF9tczogMzAwMCxcbiAgICBvbl9yZXF1ZXN0X2Vycm9yOiAocmVzKSA9PiB7XG4gICAgICAgIGNvbnN0IGVycm9yID0gJ0JhZCBIVFRQIHN0YXR1czogJyArIHJlcy5zdGF0dXNDb2RlICsgJyAnICsgcmVzLnRleHRcbiAgICAgICAgbG9nZ2VyLmVycm9yKGVycm9yKVxuICAgIH0sXG4gICAgZ2V0X2RldmljZV9pZDogKHV1aWQpID0+IHV1aWQsXG4gICAgLy8gVXNlZCBmb3IgaW50ZXJuYWwgdGVzdGluZ1xuICAgIF9vbkNhcHR1cmU6IF9fTk9PUCxcbiAgICBjYXB0dXJlX3BlcmZvcm1hbmNlOiB1bmRlZmluZWQsXG4gICAgbmFtZTogJ3Bvc3Rob2cnLFxuICAgIGJvb3RzdHJhcDoge30sXG4gICAgZGlzYWJsZV9jb21wcmVzc2lvbjogZmFsc2UsXG4gICAgc2Vzc2lvbl9pZGxlX3RpbWVvdXRfc2Vjb25kczogMzAgKiA2MCwgLy8gMzAgbWludXRlc1xufSlcblxuY2xhc3MgRGVwcmVjYXRlZFdlYlBlcmZvcm1hbmNlT2JzZXJ2ZXIge1xuICAgIGdldCBfZm9yY2VBbGxvd0xvY2FsaG9zdCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX19mb3JjZUFsbG93TG9jYWxob3N0XG4gICAgfVxuICAgIHNldCBfZm9yY2VBbGxvd0xvY2FsaG9zdCh2YWx1ZTogYm9vbGVhbikge1xuICAgICAgICBsb2dnZXIuZXJyb3IoXG4gICAgICAgICAgICAnV2ViUGVyZm9ybWFuY2VPYnNlcnZlciBpcyBkZXByZWNhdGVkIGFuZCBoYXMgbm8gaW1wYWN0IG9uIG5ldHdvcmsgY2FwdHVyZS4gVXNlIGBfZm9yY2VBbGxvd0xvY2FsaG9zdE5ldHdvcmtDYXB0dXJlYCBvbiBgcG9zdGhvZy5zZXNzaW9uUmVjb3JkaW5nYCdcbiAgICAgICAgKVxuICAgICAgICB0aGlzLl9fZm9yY2VBbGxvd0xvY2FsaG9zdCA9IHZhbHVlXG4gICAgfVxuICAgIHByaXZhdGUgX19mb3JjZUFsbG93TG9jYWxob3N0OiBib29sZWFuID0gZmFsc2Vcbn1cblxuLyoqXG4gKiBQb3N0SG9nIExpYnJhcnkgT2JqZWN0XG4gKiBAY29uc3RydWN0b3JcbiAqL1xuZXhwb3J0IGNsYXNzIFBvc3RIb2cge1xuICAgIF9fbG9hZGVkOiBib29sZWFuXG4gICAgX19sb2FkZWRfcmVjb3JkZXJfdmVyc2lvbjogJ3YxJyB8ICd2MicgfCB1bmRlZmluZWQgLy8gZmxhZyB0aGF0IGtlZXBzIHRyYWNrIG9mIHdoaWNoIHZlcnNpb24gb2YgcmVjb3JkZXIgaXMgbG9hZGVkXG4gICAgY29uZmlnOiBQb3N0SG9nQ29uZmlnXG5cbiAgICByYXRlTGltaXRlcjogUmF0ZUxpbWl0ZXJcbiAgICBwYWdlVmlld01hbmFnZXI6IFBhZ2VWaWV3TWFuYWdlclxuICAgIGZlYXR1cmVGbGFnczogUG9zdEhvZ0ZlYXR1cmVGbGFnc1xuICAgIHN1cnZleXM6IFBvc3RIb2dTdXJ2ZXlzXG4gICAgdG9vbGJhcjogVG9vbGJhclxuXG4gICAgLy8gVGhlc2UgYXJlIGluc3RhbmNlLXNwZWNpZmljIHN0YXRlIGNyZWF0ZWQgYWZ0ZXIgaW5pdGlhbGlzYXRpb25cbiAgICBwZXJzaXN0ZW5jZT86IFBvc3RIb2dQZXJzaXN0ZW5jZVxuICAgIHNlc3Npb25QZXJzaXN0ZW5jZT86IFBvc3RIb2dQZXJzaXN0ZW5jZVxuICAgIHNlc3Npb25NYW5hZ2VyPzogU2Vzc2lvbklkTWFuYWdlclxuICAgIHNlc3Npb25Qcm9wc01hbmFnZXI/OiBTZXNzaW9uUHJvcHNNYW5hZ2VyXG4gICAgcmVxdWVzdFJvdXRlcjogUmVxdWVzdFJvdXRlclxuXG4gICAgX3JlcXVlc3RRdWV1ZT86IFJlcXVlc3RRdWV1ZVxuICAgIF9yZXRyeVF1ZXVlPzogUmV0cnlRdWV1ZVxuICAgIHNlc3Npb25SZWNvcmRpbmc/OiBTZXNzaW9uUmVjb3JkaW5nXG4gICAgd2ViUGVyZm9ybWFuY2UgPSBuZXcgRGVwcmVjYXRlZFdlYlBlcmZvcm1hbmNlT2JzZXJ2ZXIoKVxuXG4gICAgX3RyaWdnZXJlZF9ub3RpZnM6IGFueVxuICAgIGNvbXByZXNzaW9uPzogQ29tcHJlc3Npb24gPSBDb21wcmVzc2lvbi5CYXNlNjQgLy8gVXBncmFkZXMgdG8gZ3ppcCBpZiBkZWNpZGUgcmVzcG9uc2Ugc3VwcG9ydHMgaXRcbiAgICBfX2NhcHR1cmVIb29rczogKChldmVudE5hbWU6IHN0cmluZykgPT4gdm9pZClbXVxuICAgIF9fcmVxdWVzdF9xdWV1ZTogUXVldWVkUmVxdWVzdE9wdGlvbnNbXVxuICAgIF9fYXV0b2NhcHR1cmU6IGJvb2xlYW4gfCBBdXRvY2FwdHVyZUNvbmZpZyB8IHVuZGVmaW5lZFxuICAgIGRlY2lkZUVuZHBvaW50V2FzSGl0OiBib29sZWFuXG4gICAgYW5hbHl0aWNzRGVmYXVsdEVuZHBvaW50OiBzdHJpbmdcbiAgICBlbGVtZW50c0NoYWluQXNTdHJpbmc6IGJvb2xlYW5cblxuICAgIFNlbnRyeUludGVncmF0aW9uOiB0eXBlb2YgU2VudHJ5SW50ZWdyYXRpb25cbiAgICBzZWdtZW50SW50ZWdyYXRpb246ICgpID0+IGFueVxuXG4gICAgLyoqIERFUFJFQ0FURUQ6IFdlIGtlZXAgdGhpcyB0byBzdXBwb3J0IGV4aXN0aW5nIHVzYWdlIGJ1dCBub3cgb25lIHNob3VsZCBqdXN0IGNhbGwgLnNldFBlcnNvblByb3BlcnRpZXMgKi9cbiAgICBwZW9wbGU6IHtcbiAgICAgICAgc2V0OiAocHJvcDogc3RyaW5nIHwgUHJvcGVydGllcywgdG8/OiBzdHJpbmcsIGNhbGxiYWNrPzogUmVxdWVzdENhbGxiYWNrKSA9PiB2b2lkXG4gICAgICAgIHNldF9vbmNlOiAocHJvcDogc3RyaW5nIHwgUHJvcGVydGllcywgdG8/OiBzdHJpbmcsIGNhbGxiYWNrPzogUmVxdWVzdENhbGxiYWNrKSA9PiB2b2lkXG4gICAgfVxuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuY29uZmlnID0gZGVmYXVsdENvbmZpZygpXG4gICAgICAgIHRoaXMuZGVjaWRlRW5kcG9pbnRXYXNIaXQgPSBmYWxzZVxuICAgICAgICB0aGlzLlNlbnRyeUludGVncmF0aW9uID0gU2VudHJ5SW50ZWdyYXRpb25cbiAgICAgICAgdGhpcy5zZWdtZW50SW50ZWdyYXRpb24gPSAoKSA9PiBjcmVhdGVTZWdtZW50SW50ZWdyYXRpb24odGhpcylcbiAgICAgICAgdGhpcy5fX2NhcHR1cmVIb29rcyA9IFtdXG4gICAgICAgIHRoaXMuX19yZXF1ZXN0X3F1ZXVlID0gW11cbiAgICAgICAgdGhpcy5fX2xvYWRlZCA9IGZhbHNlXG4gICAgICAgIHRoaXMuX19sb2FkZWRfcmVjb3JkZXJfdmVyc2lvbiA9IHVuZGVmaW5lZFxuICAgICAgICB0aGlzLl9fYXV0b2NhcHR1cmUgPSB1bmRlZmluZWRcbiAgICAgICAgdGhpcy5hbmFseXRpY3NEZWZhdWx0RW5kcG9pbnQgPSAnL2UvJ1xuICAgICAgICB0aGlzLmVsZW1lbnRzQ2hhaW5Bc1N0cmluZyA9IGZhbHNlXG5cbiAgICAgICAgdGhpcy5mZWF0dXJlRmxhZ3MgPSBuZXcgUG9zdEhvZ0ZlYXR1cmVGbGFncyh0aGlzKVxuICAgICAgICB0aGlzLnRvb2xiYXIgPSBuZXcgVG9vbGJhcih0aGlzKVxuICAgICAgICB0aGlzLnBhZ2VWaWV3TWFuYWdlciA9IG5ldyBQYWdlVmlld01hbmFnZXIodGhpcylcbiAgICAgICAgdGhpcy5zdXJ2ZXlzID0gbmV3IFBvc3RIb2dTdXJ2ZXlzKHRoaXMpXG4gICAgICAgIHRoaXMucmF0ZUxpbWl0ZXIgPSBuZXcgUmF0ZUxpbWl0ZXIoKVxuICAgICAgICB0aGlzLnJlcXVlc3RSb3V0ZXIgPSBuZXcgUmVxdWVzdFJvdXRlcih0aGlzKVxuXG4gICAgICAgIC8vIE5PVEU6IFNlZSB0aGUgcHJvcGVydHkgZGVmaW5pdGlvbiBmb3IgZGVwcmVjYXRpb24gbm90aWNlXG4gICAgICAgIHRoaXMucGVvcGxlID0ge1xuICAgICAgICAgICAgc2V0OiAocHJvcDogc3RyaW5nIHwgUHJvcGVydGllcywgdG8/OiBzdHJpbmcsIGNhbGxiYWNrPzogUmVxdWVzdENhbGxiYWNrKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2V0UHJvcHMgPSBfaXNTdHJpbmcocHJvcCkgPyB7IFtwcm9wXTogdG8gfSA6IHByb3BcbiAgICAgICAgICAgICAgICB0aGlzLnNldFBlcnNvblByb3BlcnRpZXMoc2V0UHJvcHMpXG4gICAgICAgICAgICAgICAgY2FsbGJhY2s/Lih7fSBhcyBhbnkpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0X29uY2U6IChwcm9wOiBzdHJpbmcgfCBQcm9wZXJ0aWVzLCB0bz86IHN0cmluZywgY2FsbGJhY2s/OiBSZXF1ZXN0Q2FsbGJhY2spID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzZXRQcm9wcyA9IF9pc1N0cmluZyhwcm9wKSA/IHsgW3Byb3BdOiB0byB9IDogcHJvcFxuICAgICAgICAgICAgICAgIHRoaXMuc2V0UGVyc29uUHJvcGVydGllcyh1bmRlZmluZWQsIHNldFByb3BzKVxuICAgICAgICAgICAgICAgIGNhbGxiYWNrPy4oe30gYXMgYW55KVxuICAgICAgICAgICAgfSxcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIEluaXRpYWxpemF0aW9uIG1ldGhvZHNcblxuICAgIC8qKlxuICAgICAqIFRoaXMgZnVuY3Rpb24gaW5pdGlhbGl6ZXMgYSBuZXcgaW5zdGFuY2Ugb2YgdGhlIFBvc3RIb2cgY2FwdHVyaW5nIG9iamVjdC5cbiAgICAgKiBBbGwgbmV3IGluc3RhbmNlcyBhcmUgYWRkZWQgdG8gdGhlIG1haW4gcG9zdGhvZyBvYmplY3QgYXMgc3ViIHByb3BlcnRpZXMgKHN1Y2ggYXNcbiAgICAgKiBwb3N0aG9nLmxpYnJhcnlfbmFtZSkgYW5kIGFsc28gcmV0dXJuZWQgYnkgdGhpcyBmdW5jdGlvbi4gVG8gZGVmaW5lIGFcbiAgICAgKiBzZWNvbmQgaW5zdGFuY2Ugb24gdGhlIHBhZ2UsIHlvdSB3b3VsZCBjYWxsOlxuICAgICAqXG4gICAgICogICAgIHBvc3Rob2cuaW5pdCgnbmV3IHRva2VuJywgeyB5b3VyOiAnY29uZmlnJyB9LCAnbGlicmFyeV9uYW1lJyk7XG4gICAgICpcbiAgICAgKiBhbmQgdXNlIGl0IGxpa2Ugc286XG4gICAgICpcbiAgICAgKiAgICAgcG9zdGhvZy5saWJyYXJ5X25hbWUuY2FwdHVyZSguLi4pO1xuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHRva2VuICAgWW91ciBQb3N0SG9nIEFQSSB0b2tlblxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbY29uZmlnXSAgQSBkaWN0aW9uYXJ5IG9mIGNvbmZpZyBvcHRpb25zIHRvIG92ZXJyaWRlLiA8YSBocmVmPVwiaHR0cHM6Ly9naXRodWIuY29tL3Bvc3Rob2cvcG9zdGhvZy1qcy9ibG9iLzZlMGU4NzMvc3JjL3Bvc3Rob2ctY29yZS5qcyNMNTctTDkxXCI+U2VlIGEgbGlzdCBvZiBkZWZhdWx0IGNvbmZpZyBvcHRpb25zPC9hPi5cbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gW25hbWVdICAgIFRoZSBuYW1lIGZvciB0aGUgbmV3IHBvc3Rob2cgaW5zdGFuY2UgdGhhdCB5b3Ugd2FudCBjcmVhdGVkXG4gICAgICovXG4gICAgaW5pdCh0b2tlbjogc3RyaW5nLCBjb25maWc/OiBQYXJ0aWFsPFBvc3RIb2dDb25maWc+LCBuYW1lPzogc3RyaW5nKTogUG9zdEhvZyB8IHZvaWQge1xuICAgICAgICBpZiAoIW5hbWUgfHwgbmFtZSA9PT0gUFJJTUFSWV9JTlNUQU5DRV9OQU1FKSB7XG4gICAgICAgICAgICAvLyBUaGlzIG1lYW5zIHdlIGFyZSBpbml0aWFsaXNpbmcgdGhlIHByaW1hcnkgaW5zdGFuY2UgKGkuZS4gdGhpcylcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9pbml0KHRva2VuLCBjb25maWcsIG5hbWUpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBuYW1lZFBvc3Rob2cgPSBpbnN0YW5jZXNbbmFtZV0gPz8gbmV3IFBvc3RIb2coKVxuICAgICAgICAgICAgbmFtZWRQb3N0aG9nLl9pbml0KHRva2VuLCBjb25maWcsIG5hbWUpXG4gICAgICAgICAgICBpbnN0YW5jZXNbbmFtZV0gPSBuYW1lZFBvc3Rob2dcbiAgICAgICAgICAgIC8vIEFkZCBhcyBhIHByb3BlcnR5IHRvIHRoZSBwcmltYXJ5IGluc3RhbmNlICh0aGlzIGlzbid0IHR5cGUtc2FmZSBidXQgaXRzIGhvdyBpdCB3YXMgYWx3YXlzIGRvbmUpXG4gICAgICAgICAgICA7KGluc3RhbmNlc1tQUklNQVJZX0lOU1RBTkNFX05BTUVdIGFzIGFueSlbbmFtZV0gPSBuYW1lZFBvc3Rob2dcblxuICAgICAgICAgICAgcmV0dXJuIG5hbWVkUG9zdGhvZ1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gcG9zdGhvZy5faW5pdCh0b2tlbjpzdHJpbmcsIGNvbmZpZzpvYmplY3QsIG5hbWU6c3RyaW5nKVxuICAgIC8vXG4gICAgLy8gVGhpcyBmdW5jdGlvbiBzZXRzIHVwIHRoZSBjdXJyZW50IGluc3RhbmNlIG9mIHRoZSBwb3N0aG9nXG4gICAgLy8gbGlicmFyeS4gIFRoZSBkaWZmZXJlbmNlIGJldHdlZW4gdGhpcyBtZXRob2QgYW5kIHRoZSBpbml0KC4uLilcbiAgICAvLyBtZXRob2QgaXMgdGhpcyBvbmUgaW5pdGlhbGl6ZXMgdGhlIGFjdHVhbCBpbnN0YW5jZSwgd2hlcmVhcyB0aGVcbiAgICAvLyBpbml0KC4uLikgbWV0aG9kIHNldHMgdXAgYSBuZXcgbGlicmFyeSBhbmQgY2FsbHMgX2luaXQgb24gaXQuXG4gICAgLy9cbiAgICAvLyBOb3RlIHRoYXQgdGhlcmUgYXJlIG9wZXJhdGlvbnMgdGhhdCBjYW4gYmUgYXN5bmNocm9ub3VzLCBzbyB3ZVxuICAgIC8vIGFjY2VwdCBhIGNhbGxiYWNrIHRoYXQgaXMgY2FsbGVkIHdoZW4gYWxsIHRoZSBhc3luY2hyb25vdXMgd29ya1xuICAgIC8vIGlzIGRvbmUuIE5vdGUgdGhhdCB3ZSBkbyBub3QgdXNlIHByb21pc2VzIGJlY2F1c2Ugd2Ugd2FudCB0byBiZVxuICAgIC8vIElFMTEgY29tcGF0aWJsZS4gV2UgY291bGQgdXNlIHBvbHlmaWxscywgd2hpY2ggd291bGQgbWFrZSB0aGVcbiAgICAvLyBjb2RlIGEgYml0IGNsZWFuZXIsIGJ1dCB3aWxsIGFkZCBzb21lIG92ZXJoZWFkLlxuICAgIC8vXG4gICAgX2luaXQodG9rZW46IHN0cmluZywgY29uZmlnOiBQYXJ0aWFsPFBvc3RIb2dDb25maWc+ID0ge30sIG5hbWU/OiBzdHJpbmcpOiBQb3N0SG9nIHwgdm9pZCB7XG4gICAgICAgIGlmIChfaXNVbmRlZmluZWQodG9rZW4pIHx8IF9pc0VtcHR5U3RyaW5nKHRva2VuKSkge1xuICAgICAgICAgICAgbG9nZ2VyLmNyaXRpY2FsKFxuICAgICAgICAgICAgICAgICdQb3N0SG9nIHdhcyBpbml0aWFsaXplZCB3aXRob3V0IGEgdG9rZW4uIFRoaXMgbGlrZWx5IGluZGljYXRlcyBhIG1pc2NvbmZpZ3VyYXRpb24uIFBsZWFzZSBjaGVjayB0aGUgZmlyc3QgYXJndW1lbnQgcGFzc2VkIHRvIHBvc3Rob2cuaW5pdCgpJ1xuICAgICAgICAgICAgKVxuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5fX2xvYWRlZCkge1xuICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ1lvdSBoYXZlIGFscmVhZHkgaW5pdGlhbGl6ZWQgUG9zdEhvZyEgUmUtaW5pdGlhbGlzaW5nIGlzIGEgbm8tb3AnKVxuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9fbG9hZGVkID0gdHJ1ZVxuICAgICAgICB0aGlzLmNvbmZpZyA9IHt9IGFzIFBvc3RIb2dDb25maWcgLy8gd2lsbCBiZSBzZXQgcmlnaHQgYmVsb3dcbiAgICAgICAgdGhpcy5fdHJpZ2dlcmVkX25vdGlmcyA9IFtdXG5cbiAgICAgICAgY29uZmlnLnJlcXVlc3RfaGVhZGVycyA9IGNvbmZpZy5yZXF1ZXN0X2hlYWRlcnMgfHwgY29uZmlnLnhocl9oZWFkZXJzXG5cbiAgICAgICAgdGhpcy5zZXRfY29uZmlnKFxuICAgICAgICAgICAgX2V4dGVuZCh7fSwgZGVmYXVsdENvbmZpZygpLCBjb25maWcsIHtcbiAgICAgICAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgICAgICAgIHRva2VuOiB0b2tlbixcbiAgICAgICAgICAgIH0pXG4gICAgICAgIClcblxuICAgICAgICAvLyBDaGVjayBpZiByZWNvcmRlci5qcyBpcyBhbHJlYWR5IGxvYWRlZFxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2Jhbi10cy1jb21tZW50XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgaWYgKHdpbmRvdz8ucnJ3ZWI/LnJlY29yZCB8fCB3aW5kb3c/LnJyd2ViUmVjb3JkKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2Jhbi10cy1jb21tZW50XG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICB0aGlzLl9fbG9hZGVkX3JlY29yZGVyX3ZlcnNpb24gPSB3aW5kb3c/LnJyd2ViPy52ZXJzaW9uXG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnBlcnNpc3RlbmNlID0gbmV3IFBvc3RIb2dQZXJzaXN0ZW5jZSh0aGlzLmNvbmZpZylcbiAgICAgICAgdGhpcy5zZXNzaW9uUGVyc2lzdGVuY2UgPVxuICAgICAgICAgICAgdGhpcy5jb25maWcucGVyc2lzdGVuY2UgPT09ICdzZXNzaW9uU3RvcmFnZSdcbiAgICAgICAgICAgICAgICA/IHRoaXMucGVyc2lzdGVuY2VcbiAgICAgICAgICAgICAgICA6IG5ldyBQb3N0SG9nUGVyc2lzdGVuY2UoeyAuLi50aGlzLmNvbmZpZywgcGVyc2lzdGVuY2U6ICdzZXNzaW9uU3RvcmFnZScgfSlcblxuICAgICAgICB0aGlzLl9yZXF1ZXN0UXVldWUgPSBuZXcgUmVxdWVzdFF1ZXVlKChyZXEpID0+IHRoaXMuX3NlbmRfcmVxdWVzdChyZXEpKVxuICAgICAgICB0aGlzLl9yZXRyeVF1ZXVlID0gbmV3IFJldHJ5UXVldWUodGhpcylcbiAgICAgICAgdGhpcy5fX2NhcHR1cmVIb29rcyA9IFtdXG4gICAgICAgIHRoaXMuX19yZXF1ZXN0X3F1ZXVlID0gW11cblxuICAgICAgICB0aGlzLnNlc3Npb25NYW5hZ2VyID0gbmV3IFNlc3Npb25JZE1hbmFnZXIodGhpcy5jb25maWcsIHRoaXMucGVyc2lzdGVuY2UpXG4gICAgICAgIHRoaXMuc2Vzc2lvblByb3BzTWFuYWdlciA9IG5ldyBTZXNzaW9uUHJvcHNNYW5hZ2VyKHRoaXMuc2Vzc2lvbk1hbmFnZXIsIHRoaXMucGVyc2lzdGVuY2UpXG5cbiAgICAgICAgdGhpcy5zZXNzaW9uUmVjb3JkaW5nID0gbmV3IFNlc3Npb25SZWNvcmRpbmcodGhpcylcbiAgICAgICAgdGhpcy5zZXNzaW9uUmVjb3JkaW5nLnN0YXJ0UmVjb3JkaW5nSWZFbmFibGVkKClcblxuICAgICAgICBpZiAoIXRoaXMuY29uZmlnLmRpc2FibGVfc2Nyb2xsX3Byb3BlcnRpZXMpIHtcbiAgICAgICAgICAgIHRoaXMucGFnZVZpZXdNYW5hZ2VyLnN0YXJ0TWVhc3VyaW5nU2Nyb2xsUG9zaXRpb24oKVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fX2F1dG9jYXB0dXJlID0gdGhpcy5jb25maWcuYXV0b2NhcHR1cmVcbiAgICAgICAgYXV0b2NhcHR1cmUuX3NldElzQXV0b2NhcHR1cmVFbmFibGVkKHRoaXMpXG4gICAgICAgIGlmIChhdXRvY2FwdHVyZS5faXNBdXRvY2FwdHVyZUVuYWJsZWQpIHtcbiAgICAgICAgICAgIHRoaXMuX19hdXRvY2FwdHVyZSA9IHRoaXMuY29uZmlnLmF1dG9jYXB0dXJlXG4gICAgICAgICAgICBjb25zdCBudW1fYnVja2V0cyA9IDEwMFxuICAgICAgICAgICAgY29uc3QgbnVtX2VuYWJsZWRfYnVja2V0cyA9IDEwMFxuICAgICAgICAgICAgaWYgKCFhdXRvY2FwdHVyZS5lbmFibGVkRm9yUHJvamVjdCh0aGlzLmNvbmZpZy50b2tlbiwgbnVtX2J1Y2tldHMsIG51bV9lbmFibGVkX2J1Y2tldHMpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fX2F1dG9jYXB0dXJlID0gZmFsc2VcbiAgICAgICAgICAgICAgICBsb2dnZXIuaW5mbygnTm90IGluIGFjdGl2ZSBidWNrZXQ6IGRpc2FibGluZyBBdXRvbWF0aWMgRXZlbnQgQ29sbGVjdGlvbi4nKVxuICAgICAgICAgICAgfSBlbHNlIGlmICghYXV0b2NhcHR1cmUuaXNCcm93c2VyU3VwcG9ydGVkKCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9fYXV0b2NhcHR1cmUgPSBmYWxzZVxuICAgICAgICAgICAgICAgIGxvZ2dlci5pbmZvKCdEaXNhYmxpbmcgQXV0b21hdGljIEV2ZW50IENvbGxlY3Rpb24gYmVjYXVzZSB0aGlzIGJyb3dzZXIgaXMgbm90IHN1cHBvcnRlZCcpXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGF1dG9jYXB0dXJlLmluaXQodGhpcylcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGlmIGFueSBpbnN0YW5jZSBvbiB0aGUgcGFnZSBoYXMgZGVidWcgPSB0cnVlLCB3ZSBzZXQgdGhlXG4gICAgICAgIC8vIGdsb2JhbCBkZWJ1ZyB0byBiZSB0cnVlXG4gICAgICAgIENvbmZpZy5ERUJVRyA9IENvbmZpZy5ERUJVRyB8fCB0aGlzLmNvbmZpZy5kZWJ1Z1xuXG4gICAgICAgIHRoaXMuX2dkcHJfaW5pdCgpXG5cbiAgICAgICAgaWYgKGNvbmZpZy5zZWdtZW50KSB7XG4gICAgICAgICAgICAvLyBVc2Ugc2VnbWVudHMgYW5vbnltb3VzSWQgaW5zdGVhZFxuICAgICAgICAgICAgdGhpcy5jb25maWcuZ2V0X2RldmljZV9pZCA9ICgpID0+IGNvbmZpZy5zZWdtZW50LnVzZXIoKS5hbm9ueW1vdXNJZCgpXG5cbiAgICAgICAgICAgIC8vIElmIGEgc2VnbWVudCB1c2VyIElEIGV4aXN0cywgc2V0IGl0IGFzIHRoZSBkaXN0aW5jdF9pZFxuICAgICAgICAgICAgaWYgKGNvbmZpZy5zZWdtZW50LnVzZXIoKS5pZCgpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWdpc3Rlcih7XG4gICAgICAgICAgICAgICAgICAgIGRpc3RpbmN0X2lkOiBjb25maWcuc2VnbWVudC51c2VyKCkuaWQoKSxcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIHRoaXMucGVyc2lzdGVuY2Uuc2V0X3VzZXJfc3RhdGUoJ2lkZW50aWZpZWQnKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gaXNVbmRlZmluZWQgZG9lc24ndCBwcm92aWRlIHR5cGVoaW50IGhlcmUgc28gd291bGRuJ3QgcmVkdWNlIGJ1bmRsZSBhcyB3ZSdkIG5lZWQgdG8gYXNzaWduXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwb3N0aG9nLWpzL25vLWRpcmVjdC11bmRlZmluZWQtY2hlY2tcbiAgICAgICAgaWYgKGNvbmZpZy5ib290c3RyYXA/LmRpc3RpbmN0SUQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc3QgdXVpZCA9IHRoaXMuY29uZmlnLmdldF9kZXZpY2VfaWQodXVpZHY3KCkpXG4gICAgICAgICAgICBjb25zdCBkZXZpY2VJRCA9IGNvbmZpZy5ib290c3RyYXA/LmlzSWRlbnRpZmllZElEID8gdXVpZCA6IGNvbmZpZy5ib290c3RyYXAuZGlzdGluY3RJRFxuICAgICAgICAgICAgdGhpcy5wZXJzaXN0ZW5jZS5zZXRfdXNlcl9zdGF0ZShjb25maWcuYm9vdHN0cmFwPy5pc0lkZW50aWZpZWRJRCA/ICdpZGVudGlmaWVkJyA6ICdhbm9ueW1vdXMnKVxuICAgICAgICAgICAgdGhpcy5yZWdpc3Rlcih7XG4gICAgICAgICAgICAgICAgZGlzdGluY3RfaWQ6IGNvbmZpZy5ib290c3RyYXAuZGlzdGluY3RJRCxcbiAgICAgICAgICAgICAgICAkZGV2aWNlX2lkOiBkZXZpY2VJRCxcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5faGFzQm9vdHN0cmFwcGVkRmVhdHVyZUZsYWdzKCkpIHtcbiAgICAgICAgICAgIGNvbnN0IGFjdGl2ZUZsYWdzID0gT2JqZWN0LmtleXMoY29uZmlnLmJvb3RzdHJhcD8uZmVhdHVyZUZsYWdzIHx8IHt9KVxuICAgICAgICAgICAgICAgIC5maWx0ZXIoKGZsYWcpID0+ICEhY29uZmlnLmJvb3RzdHJhcD8uZmVhdHVyZUZsYWdzPy5bZmxhZ10pXG4gICAgICAgICAgICAgICAgLnJlZHVjZShcbiAgICAgICAgICAgICAgICAgICAgKHJlczogUmVjb3JkPHN0cmluZywgc3RyaW5nIHwgYm9vbGVhbj4sIGtleSkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgKHJlc1trZXldID0gY29uZmlnLmJvb3RzdHJhcD8uZmVhdHVyZUZsYWdzPy5ba2V5XSB8fCBmYWxzZSksIHJlc1xuICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICB7fVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgIGNvbnN0IGZlYXR1cmVGbGFnUGF5bG9hZHMgPSBPYmplY3Qua2V5cyhjb25maWcuYm9vdHN0cmFwPy5mZWF0dXJlRmxhZ1BheWxvYWRzIHx8IHt9KVxuICAgICAgICAgICAgICAgIC5maWx0ZXIoKGtleSkgPT4gYWN0aXZlRmxhZ3Nba2V5XSlcbiAgICAgICAgICAgICAgICAucmVkdWNlKChyZXM6IFJlY29yZDxzdHJpbmcsIEpzb25UeXBlPiwga2V5KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb25maWcuYm9vdHN0cmFwPy5mZWF0dXJlRmxhZ1BheWxvYWRzPy5ba2V5XSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzW2tleV0gPSBjb25maWcuYm9vdHN0cmFwPy5mZWF0dXJlRmxhZ1BheWxvYWRzPy5ba2V5XVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNcbiAgICAgICAgICAgICAgICB9LCB7fSlcblxuICAgICAgICAgICAgdGhpcy5mZWF0dXJlRmxhZ3MucmVjZWl2ZWRGZWF0dXJlRmxhZ3MoeyBmZWF0dXJlRmxhZ3M6IGFjdGl2ZUZsYWdzLCBmZWF0dXJlRmxhZ1BheWxvYWRzIH0pXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXRoaXMuZ2V0X2Rpc3RpbmN0X2lkKCkpIHtcbiAgICAgICAgICAgIC8vIFRoZXJlIGlzIG5vIG5lZWQgdG8gc2V0IHRoZSBkaXN0aW5jdCBpZFxuICAgICAgICAgICAgLy8gb3IgdGhlIGRldmljZSBpZCBpZiBzb21ldGhpbmcgd2FzIGFscmVhZHkgc3RvcmVkXG4gICAgICAgICAgICAvLyBpbiB0aGUgcGVyc2l0ZW5jZVxuICAgICAgICAgICAgY29uc3QgdXVpZCA9IHRoaXMuY29uZmlnLmdldF9kZXZpY2VfaWQodXVpZHY3KCkpXG5cbiAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJfb25jZShcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGRpc3RpbmN0X2lkOiB1dWlkLFxuICAgICAgICAgICAgICAgICAgICAkZGV2aWNlX2lkOiB1dWlkLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgJydcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIC8vIGRpc3RpbmN0IGlkID09ICRkZXZpY2VfaWQgaXMgYSBwcm94eSBmb3IgYW5vbnltb3VzIHVzZXJcbiAgICAgICAgICAgIHRoaXMucGVyc2lzdGVuY2Uuc2V0X3VzZXJfc3RhdGUoJ2Fub255bW91cycpXG4gICAgICAgIH1cbiAgICAgICAgLy8gU2V0IHVwIGV2ZW50IGhhbmRsZXIgZm9yIHBhZ2VsZWF2ZVxuICAgICAgICAvLyBVc2UgYG9ucGFnZWhpZGVgIGlmIGF2YWlsYWJsZSwgc2VlIGh0dHBzOi8vY2FsZW5kYXIucGVyZnBsYW5ldC5jb20vMjAyMC9iZWFjb25pbmctaW4tcHJhY3RpY2UvI2JlYWNvbmluZy1yZWxpYWJpbGl0eS1hdm9pZGluZy1hYmFuZG9uc1xuICAgICAgICB3aW5kb3c/LmFkZEV2ZW50TGlzdGVuZXI/Lignb25wYWdlaGlkZScgaW4gc2VsZiA/ICdwYWdlaGlkZScgOiAndW5sb2FkJywgdGhpcy5faGFuZGxlX3VubG9hZC5iaW5kKHRoaXMpKVxuXG4gICAgICAgIHRoaXMudG9vbGJhci5tYXliZUxvYWRUb29sYmFyKClcblxuICAgICAgICAvLyBXZSB3YW4ndCB0byBhdm9pZCBwcm9taXNlcyBmb3IgSUUxMSBjb21wYXRpYmlsaXR5LCBzbyB3ZSB1c2UgY2FsbGJhY2tzIGhlcmVcbiAgICAgICAgaWYgKGNvbmZpZy5zZWdtZW50KSB7XG4gICAgICAgICAgICBjb25maWcuc2VnbWVudC5yZWdpc3Rlcih0aGlzLnNlZ21lbnRJbnRlZ3JhdGlvbigpKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLl9sb2FkZWQoKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX2xvYWRlZCgpXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpc1xuICAgIH1cblxuICAgIC8vIFByaXZhdGUgbWV0aG9kc1xuICAgIF9hZnRlckRlY2lkZVJlc3BvbnNlKHJlc3BvbnNlOiBEZWNpZGVSZXNwb25zZSkge1xuICAgICAgICB0aGlzLmNvbXByZXNzaW9uID0gdW5kZWZpbmVkXG4gICAgICAgIGlmIChyZXNwb25zZS5zdXBwb3J0ZWRDb21wcmVzc2lvbiAmJiAhdGhpcy5jb25maWcuZGlzYWJsZV9jb21wcmVzc2lvbikge1xuICAgICAgICAgICAgdGhpcy5jb21wcmVzc2lvbiA9IF9pbmNsdWRlcyhyZXNwb25zZVsnc3VwcG9ydGVkQ29tcHJlc3Npb24nXSwgQ29tcHJlc3Npb24uR1ppcEpTKVxuICAgICAgICAgICAgICAgID8gQ29tcHJlc3Npb24uR1ppcEpTXG4gICAgICAgICAgICAgICAgOiBfaW5jbHVkZXMocmVzcG9uc2VbJ3N1cHBvcnRlZENvbXByZXNzaW9uJ10sIENvbXByZXNzaW9uLkJhc2U2NClcbiAgICAgICAgICAgICAgICA/IENvbXByZXNzaW9uLkJhc2U2NFxuICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkXG4gICAgICAgIH1cblxuICAgICAgICBpZiAocmVzcG9uc2UuYW5hbHl0aWNzPy5lbmRwb2ludCkge1xuICAgICAgICAgICAgdGhpcy5hbmFseXRpY3NEZWZhdWx0RW5kcG9pbnQgPSByZXNwb25zZS5hbmFseXRpY3MuZW5kcG9pbnRcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChyZXNwb25zZS5lbGVtZW50c0NoYWluQXNTdHJpbmcpIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudHNDaGFpbkFzU3RyaW5nID0gcmVzcG9uc2UuZWxlbWVudHNDaGFpbkFzU3RyaW5nXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBfbG9hZGVkKCk6IHZvaWQge1xuICAgICAgICAvLyBQYXVzZSBgcmVsb2FkRmVhdHVyZUZsYWdzYCBjYWxscyBpbiBjb25maWcubG9hZGVkIGNhbGxiYWNrLlxuICAgICAgICAvLyBUaGVzZSBmZWF0dXJlIGZsYWdzIGFyZSBsb2FkZWQgaW4gdGhlIGRlY2lkZSBjYWxsIG1hZGUgcmlnaHRcbiAgICAgICAgLy8gYWZ0ZXJ3YXJkc1xuICAgICAgICBjb25zdCBkaXNhYmxlRGVjaWRlID0gdGhpcy5jb25maWcuYWR2YW5jZWRfZGlzYWJsZV9kZWNpZGVcbiAgICAgICAgaWYgKCFkaXNhYmxlRGVjaWRlKSB7XG4gICAgICAgICAgICB0aGlzLmZlYXR1cmVGbGFncy5zZXRSZWxvYWRpbmdQYXVzZWQodHJ1ZSlcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5sb2FkZWQodGhpcylcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBsb2dnZXIuY3JpdGljYWwoJ2Bsb2FkZWRgIGZ1bmN0aW9uIGZhaWxlZCcsIGVycilcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX3N0YXJ0X3F1ZXVlX2lmX29wdGVkX2luKClcblxuICAgICAgICAvLyB0aGlzIGhhcHBlbnMgYWZ0ZXIgXCJsb2FkZWRcIiBzbyBhIHVzZXIgY2FuIGNhbGwgaWRlbnRpZnkgb3IgYW55IG90aGVyIHRoaW5ncyBiZWZvcmUgdGhlIHBhZ2V2aWV3IGZpcmVzXG4gICAgICAgIGlmICh0aGlzLmNvbmZpZy5jYXB0dXJlX3BhZ2V2aWV3KSB7XG4gICAgICAgICAgICAvLyBOT1RFOiBXZSB3YW50IHRvIGZpcmUgdGhpcyBvbiB0aGUgbmV4dCB0aWNrIGFzIHRoZSBwcmV2aW91cyBpbXBsZW1lbnRhdGlvbiBoYWQgdGhpcyBzaWRlIGVmZmVjdFxuICAgICAgICAgICAgLy8gYW5kIHNvbWUgY2xpZW50cyBtYXkgcmVseSBvbiBpdFxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGRvY3VtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2FwdHVyZSgnJHBhZ2V2aWV3JywgeyB0aXRsZTogZG9jdW1lbnQudGl0bGUgfSwgeyBzZW5kX2luc3RhbnRseTogdHJ1ZSB9KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIDEpXG4gICAgICAgIH1cblxuICAgICAgICAvLyBDYWxsIGRlY2lkZSB0byBnZXQgd2hhdCBmZWF0dXJlcyBhcmUgZW5hYmxlZCBhbmQgb3RoZXIgc2V0dGluZ3MuXG4gICAgICAgIC8vIEFzIGEgcmVtaW5kZXIsIGlmIHRoZSAvZGVjaWRlIGVuZHBvaW50IGlzIGRpc2FibGVkLCBmZWF0dXJlIGZsYWdzLCB0b29sYmFyLCBzZXNzaW9uIHJlY29yZGluZywgYXV0b2NhcHR1cmUsXG4gICAgICAgIC8vIGFuZCBjb21wcmVzc2lvbiB3aWxsIG5vdCBiZSBhdmFpbGFibGUuXG4gICAgICAgIGlmICghZGlzYWJsZURlY2lkZSkge1xuICAgICAgICAgICAgbmV3IERlY2lkZSh0aGlzKS5jYWxsKClcblxuICAgICAgICAgICAgLy8gVFJJQ0tZOiBSZXNldCBhbnkgZGVjaWRlIHJlbG9hZHMgcXVldWVkIGR1cmluZyBjb25maWcubG9hZGVkIGJlY2F1c2UgdGhleSdsbCBiZVxuICAgICAgICAgICAgLy8gY292ZXJlZCBieSB0aGUgZGVjaWRlIGNhbGwgcmlnaHQgYWJvdmUuXG4gICAgICAgICAgICB0aGlzLmZlYXR1cmVGbGFncy5yZXNldFJlcXVlc3RRdWV1ZSgpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBfc3RhcnRfcXVldWVfaWZfb3B0ZWRfaW4oKTogdm9pZCB7XG4gICAgICAgIGlmICghdGhpcy5oYXNfb3B0ZWRfb3V0X2NhcHR1cmluZygpKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWcucmVxdWVzdF9iYXRjaGluZykge1xuICAgICAgICAgICAgICAgIHRoaXMuX3JlcXVlc3RRdWV1ZT8uZW5hYmxlKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIF9kb21fbG9hZGVkKCk6IHZvaWQge1xuICAgICAgICBpZiAoIXRoaXMuaGFzX29wdGVkX291dF9jYXB0dXJpbmcoKSkge1xuICAgICAgICAgICAgX2VhY2hBcnJheSh0aGlzLl9fcmVxdWVzdF9xdWV1ZSwgKGl0ZW0pID0+IHRoaXMuX3NlbmRfcmV0cmlhYmxlX3JlcXVlc3QoaXRlbSkpXG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9fcmVxdWVzdF9xdWV1ZSA9IFtdXG4gICAgICAgIHRoaXMuX3N0YXJ0X3F1ZXVlX2lmX29wdGVkX2luKClcbiAgICB9XG5cbiAgICBfaGFuZGxlX3VubG9hZCgpOiB2b2lkIHtcbiAgICAgICAgaWYgKCF0aGlzLmNvbmZpZy5yZXF1ZXN0X2JhdGNoaW5nKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWcuY2FwdHVyZV9wYWdldmlldyAmJiB0aGlzLmNvbmZpZy5jYXB0dXJlX3BhZ2VsZWF2ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2FwdHVyZSgnJHBhZ2VsZWF2ZScsIG51bGwsIHsgdHJhbnNwb3J0OiAnc2VuZEJlYWNvbicgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuY29uZmlnLmNhcHR1cmVfcGFnZXZpZXcgJiYgdGhpcy5jb25maWcuY2FwdHVyZV9wYWdlbGVhdmUpIHtcbiAgICAgICAgICAgIHRoaXMuY2FwdHVyZSgnJHBhZ2VsZWF2ZScpXG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9yZXF1ZXN0UXVldWU/LnVubG9hZCgpXG4gICAgICAgIHRoaXMuX3JldHJ5UXVldWU/LnVubG9hZCgpXG4gICAgfVxuXG4gICAgX3NlbmRfcmVxdWVzdChvcHRpb25zOiBRdWV1ZWRSZXF1ZXN0T3B0aW9ucyk6IHZvaWQge1xuICAgICAgICBpZiAoIXRoaXMuX19sb2FkZWQpIHtcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKEVOUVVFVUVfUkVRVUVTVFMpIHtcbiAgICAgICAgICAgIHRoaXMuX19yZXF1ZXN0X3F1ZXVlLnB1c2gob3B0aW9ucylcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMucmF0ZUxpbWl0ZXIuaXNSYXRlTGltaXRlZChvcHRpb25zLmJhdGNoS2V5KSkge1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cblxuICAgICAgICBvcHRpb25zLnRyYW5zcG9ydCA9IG9wdGlvbnMudHJhbnNwb3J0IHx8IHRoaXMuY29uZmlnLmFwaV90cmFuc3BvcnRcbiAgICAgICAgb3B0aW9ucy51cmwgPSBleHRlbmRVUkxQYXJhbXMob3B0aW9ucy51cmwsIHtcbiAgICAgICAgICAgIC8vIFdoZXRoZXIgdG8gZGV0ZWN0IGlwIGluZm8gb3Igbm90XG4gICAgICAgICAgICBpcDogdGhpcy5jb25maWcuaXAgPyAxIDogMCxcbiAgICAgICAgfSlcbiAgICAgICAgb3B0aW9ucy5oZWFkZXJzID0gdGhpcy5jb25maWcucmVxdWVzdF9oZWFkZXJzXG5cbiAgICAgICAgcmVxdWVzdCh7XG4gICAgICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICAgICAgY2FsbGJhY2s6IChyZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMucmF0ZUxpbWl0ZXIuY2hlY2tGb3JMaW1pdGluZyhyZXNwb25zZSlcblxuICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXNDb2RlID49IDQwMCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5vbl9yZXF1ZXN0X2Vycm9yPy4ocmVzcG9uc2UpXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgb3B0aW9ucy5jYWxsYmFjaz8uKHJlc3BvbnNlKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBfc2VuZF9yZXRyaWFibGVfcmVxdWVzdChvcHRpb25zOiBRdWV1ZWRSZXF1ZXN0T3B0aW9ucyk6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy5fcmV0cnlRdWV1ZSkge1xuICAgICAgICAgICAgdGhpcy5fcmV0cnlRdWV1ZS5yZXRyaWFibGVSZXF1ZXN0KG9wdGlvbnMpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9zZW5kX3JlcXVlc3Qob3B0aW9ucylcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIF9leGVjdXRlX2FycmF5KCkgZGVhbHMgd2l0aCBwcm9jZXNzaW5nIGFueSBwb3N0aG9nIGZ1bmN0aW9uXG4gICAgICogY2FsbHMgdGhhdCB3ZXJlIGNhbGxlZCBiZWZvcmUgdGhlIFBvc3RIb2cgbGlicmFyeSB3ZXJlIGxvYWRlZFxuICAgICAqIChhbmQgYXJlIHRodXMgc3RvcmVkIGluIGFuIGFycmF5IHNvIHRoZXkgY2FuIGJlIGNhbGxlZCBsYXRlcilcbiAgICAgKlxuICAgICAqIE5vdGU6IHdlIGZpcmUgb2ZmIGFsbCB0aGUgcG9zdGhvZyBmdW5jdGlvbiBjYWxscyAmJiB1c2VyIGRlZmluZWRcbiAgICAgKiBmdW5jdGlvbnMgQkVGT1JFIHdlIGZpcmUgb2ZmIHBvc3Rob2cgY2FwdHVyaW5nIGNhbGxzLiBUaGlzIGlzIHNvXG4gICAgICogaWRlbnRpZnkvcmVnaXN0ZXIvc2V0X2NvbmZpZyBjYWxscyBjYW4gcHJvcGVybHkgbW9kaWZ5IGVhcmx5XG4gICAgICogY2FwdHVyaW5nIGNhbGxzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXlcbiAgICAgKi9cbiAgICBfZXhlY3V0ZV9hcnJheShhcnJheTogU25pcHBldEFycmF5SXRlbVtdKTogdm9pZCB7XG4gICAgICAgIGxldCBmbl9uYW1lXG4gICAgICAgIGNvbnN0IGFsaWFzX2NhbGxzOiBTbmlwcGV0QXJyYXlJdGVtW10gPSBbXVxuICAgICAgICBjb25zdCBvdGhlcl9jYWxsczogU25pcHBldEFycmF5SXRlbVtdID0gW11cbiAgICAgICAgY29uc3QgY2FwdHVyaW5nX2NhbGxzOiBTbmlwcGV0QXJyYXlJdGVtW10gPSBbXVxuICAgICAgICBfZWFjaEFycmF5KGFycmF5LCAoaXRlbSkgPT4ge1xuICAgICAgICAgICAgaWYgKGl0ZW0pIHtcbiAgICAgICAgICAgICAgICBmbl9uYW1lID0gaXRlbVswXVxuICAgICAgICAgICAgICAgIGlmIChfaXNBcnJheShmbl9uYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICBjYXB0dXJpbmdfY2FsbHMucHVzaChpdGVtKSAvLyBjaGFpbmVkIGNhbGwgZS5nLiBwb3N0aG9nLmdldF9ncm91cCgpLnNldCgpXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChfaXNGdW5jdGlvbihpdGVtKSkge1xuICAgICAgICAgICAgICAgICAgICA7KGl0ZW0gYXMgYW55KS5jYWxsKHRoaXMpXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChfaXNBcnJheShpdGVtKSAmJiBmbl9uYW1lID09PSAnYWxpYXMnKSB7XG4gICAgICAgICAgICAgICAgICAgIGFsaWFzX2NhbGxzLnB1c2goaXRlbSlcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKF9pc0FycmF5KGl0ZW0pICYmIGZuX25hbWUuaW5kZXhPZignY2FwdHVyZScpICE9PSAtMSAmJiBfaXNGdW5jdGlvbigodGhpcyBhcyBhbnkpW2ZuX25hbWVdKSkge1xuICAgICAgICAgICAgICAgICAgICBjYXB0dXJpbmdfY2FsbHMucHVzaChpdGVtKVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG90aGVyX2NhbGxzLnB1c2goaXRlbSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG5cbiAgICAgICAgY29uc3QgZXhlY3V0ZSA9IGZ1bmN0aW9uIChjYWxsczogU25pcHBldEFycmF5SXRlbVtdLCB0aGlzQXJnOiBhbnkpIHtcbiAgICAgICAgICAgIF9lYWNoQXJyYXkoXG4gICAgICAgICAgICAgICAgY2FsbHMsXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKF9pc0FycmF5KGl0ZW1bMF0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjaGFpbmVkIGNhbGxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjYWxsZXIgPSB0aGlzQXJnXG4gICAgICAgICAgICAgICAgICAgICAgICBfZWFjaChpdGVtLCBmdW5jdGlvbiAoY2FsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxlciA9IGNhbGxlcltjYWxsWzBdXS5hcHBseShjYWxsZXIsIGNhbGwuc2xpY2UoMSkpXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9iYW4tdHMtY29tbWVudFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1tpdGVtWzBdXS5hcHBseSh0aGlzLCBpdGVtLnNsaWNlKDEpKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB0aGlzQXJnXG4gICAgICAgICAgICApXG4gICAgICAgIH1cblxuICAgICAgICBleGVjdXRlKGFsaWFzX2NhbGxzLCB0aGlzKVxuICAgICAgICBleGVjdXRlKG90aGVyX2NhbGxzLCB0aGlzKVxuICAgICAgICBleGVjdXRlKGNhcHR1cmluZ19jYWxscywgdGhpcylcbiAgICB9XG5cbiAgICBfaGFzQm9vdHN0cmFwcGVkRmVhdHVyZUZsYWdzKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgKHRoaXMuY29uZmlnLmJvb3RzdHJhcD8uZmVhdHVyZUZsYWdzICYmIE9iamVjdC5rZXlzKHRoaXMuY29uZmlnLmJvb3RzdHJhcD8uZmVhdHVyZUZsYWdzKS5sZW5ndGggPiAwKSB8fFxuICAgICAgICAgICAgZmFsc2VcbiAgICAgICAgKVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHB1c2goKSBrZWVwcyB0aGUgc3RhbmRhcmQgYXN5bmMtYXJyYXktcHVzaFxuICAgICAqIGJlaGF2aW9yIGFyb3VuZCBhZnRlciB0aGUgbGliIGlzIGxvYWRlZC5cbiAgICAgKiBUaGlzIGlzIG9ubHkgdXNlZnVsIGZvciBleHRlcm5hbCBpbnRlZ3JhdGlvbnMgdGhhdFxuICAgICAqIGRvIG5vdCB3aXNoIHRvIHJlbHkgb24gb3VyIGNvbnZlbmllbmNlIG1ldGhvZHNcbiAgICAgKiAoY3JlYXRlZCBpbiB0aGUgc25pcHBldCkuXG4gICAgICpcbiAgICAgKiAjIyMgVXNhZ2U6XG4gICAgICogICAgIHBvc3Rob2cucHVzaChbJ3JlZ2lzdGVyJywgeyBhOiAnYicgfV0pO1xuICAgICAqXG4gICAgICogQHBhcmFtIHtBcnJheX0gaXRlbSBBIFtmdW5jdGlvbl9uYW1lLCBhcmdzLi4uXSBhcnJheSB0byBiZSBleGVjdXRlZFxuICAgICAqL1xuICAgIHB1c2goaXRlbTogU25pcHBldEFycmF5SXRlbSk6IHZvaWQge1xuICAgICAgICB0aGlzLl9leGVjdXRlX2FycmF5KFtpdGVtXSlcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDYXB0dXJlIGFuIGV2ZW50LiBUaGlzIGlzIHRoZSBtb3N0IGltcG9ydGFudCBhbmRcbiAgICAgKiBmcmVxdWVudGx5IHVzZWQgUG9zdEhvZyBmdW5jdGlvbi5cbiAgICAgKlxuICAgICAqICMjIyBVc2FnZTpcbiAgICAgKlxuICAgICAqICAgICAvLyBjYXB0dXJlIGFuIGV2ZW50IG5hbWVkICdSZWdpc3RlcmVkJ1xuICAgICAqICAgICBwb3N0aG9nLmNhcHR1cmUoJ1JlZ2lzdGVyZWQnLCB7J0dlbmRlcic6ICdNYWxlJywgJ0FnZSc6IDIxfSk7XG4gICAgICpcbiAgICAgKiAgICAgLy8gY2FwdHVyZSBhbiBldmVudCB1c2luZyBuYXZpZ2F0b3Iuc2VuZEJlYWNvblxuICAgICAqICAgICBwb3N0aG9nLmNhcHR1cmUoJ0xlZnQgcGFnZScsIHsnZHVyYXRpb25fc2Vjb25kcyc6IDM1fSwge3RyYW5zcG9ydDogJ3NlbmRCZWFjb24nfSk7XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRfbmFtZSBUaGUgbmFtZSBvZiB0aGUgZXZlbnQuIFRoaXMgY2FuIGJlIGFueXRoaW5nIHRoZSB1c2VyIGRvZXMgLSAnQnV0dG9uIENsaWNrJywgJ1NpZ24gVXAnLCAnSXRlbSBQdXJjaGFzZWQnLCBldGMuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtwcm9wZXJ0aWVzXSBBIHNldCBvZiBwcm9wZXJ0aWVzIHRvIGluY2x1ZGUgd2l0aCB0aGUgZXZlbnQgeW91J3JlIHNlbmRpbmcuIFRoZXNlIGRlc2NyaWJlIHRoZSB1c2VyIHdobyBkaWQgdGhlIGV2ZW50IG9yIGRldGFpbHMgYWJvdXQgdGhlIGV2ZW50IGl0c2VsZi5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIE9wdGlvbmFsIGNvbmZpZ3VyYXRpb24gZm9yIHRoaXMgY2FwdHVyZSByZXF1ZXN0LlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBbb3B0aW9ucy50cmFuc3BvcnRdIFRyYW5zcG9ydCBtZXRob2QgZm9yIG5ldHdvcmsgcmVxdWVzdCAoJ1hIUicgb3IgJ3NlbmRCZWFjb24nKS5cbiAgICAgKiBAcGFyYW0ge0RhdGV9IFtvcHRpb25zLnRpbWVzdGFtcF0gVGltZXN0YW1wIGlzIGEgRGF0ZSBvYmplY3QuIElmIG5vdCBzZXQsIGl0J2xsIGF1dG9tYXRpY2FsbHkgYmUgc2V0IHRvIHRoZSBjdXJyZW50IHRpbWUuXG4gICAgICovXG4gICAgY2FwdHVyZShldmVudF9uYW1lOiBzdHJpbmcsIHByb3BlcnRpZXM/OiBQcm9wZXJ0aWVzIHwgbnVsbCwgb3B0aW9ucz86IENhcHR1cmVPcHRpb25zKTogQ2FwdHVyZVJlc3VsdCB8IHZvaWQge1xuICAgICAgICAvLyBXaGlsZSBkZXZlbG9waW5nLCBhIGRldmVsb3BlciBtaWdodCBwdXJwb3NlZnVsbHkgX25vdF8gY2FsbCBpbml0KCksXG4gICAgICAgIC8vIGluIHRoaXMgY2FzZSwgd2Ugd291bGQgbGlrZSBjYXB0dXJlIHRvIGJlIGEgbm9vcC5cbiAgICAgICAgaWYgKCF0aGlzLl9fbG9hZGVkIHx8ICF0aGlzLnNlc3Npb25QZXJzaXN0ZW5jZSB8fCAhdGhpcy5fcmVxdWVzdFF1ZXVlKSB7XG4gICAgICAgICAgICByZXR1cm4gbG9nZ2VyLnVuaW5pdGlhbGl6ZWRXYXJuaW5nKCdwb3N0aG9nLmNhcHR1cmUnKVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHVzZXJPcHRlZE91dCh0aGlzKSkge1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cblxuICAgICAgICAvLyB0eXBpbmcgZG9lc24ndCBwcmV2ZW50IGludGVyZXN0aW5nIGRhdGFcbiAgICAgICAgaWYgKF9pc1VuZGVmaW5lZChldmVudF9uYW1lKSB8fCAhX2lzU3RyaW5nKGV2ZW50X25hbWUpKSB7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ05vIGV2ZW50IG5hbWUgcHJvdmlkZWQgdG8gcG9zdGhvZy5jYXB0dXJlJylcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgdXNlckFnZW50ICYmXG4gICAgICAgICAgICAhdGhpcy5jb25maWcub3B0X291dF91c2VyYWdlbnRfZmlsdGVyICYmXG4gICAgICAgICAgICBfaXNCbG9ja2VkVUEodXNlckFnZW50LCB0aGlzLmNvbmZpZy5jdXN0b21fYmxvY2tlZF91c2VyYWdlbnRzKVxuICAgICAgICApIHtcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG5cbiAgICAgICAgLy8gdXBkYXRlIHBlcnNpc3RlbmNlXG4gICAgICAgIHRoaXMuc2Vzc2lvblBlcnNpc3RlbmNlLnVwZGF0ZV9zZWFyY2hfa2V5d29yZCgpXG5cbiAgICAgICAgaWYgKHRoaXMuY29uZmlnLnN0b3JlX2dvb2dsZSkge1xuICAgICAgICAgICAgdGhpcy5zZXNzaW9uUGVyc2lzdGVuY2UudXBkYXRlX2NhbXBhaWduX3BhcmFtcygpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuY29uZmlnLnNhdmVfcmVmZXJyZXIpIHtcbiAgICAgICAgICAgIHRoaXMuc2Vzc2lvblBlcnNpc3RlbmNlLnVwZGF0ZV9yZWZlcnJlcl9pbmZvKClcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBkYXRhOiBDYXB0dXJlUmVzdWx0ID0ge1xuICAgICAgICAgICAgdXVpZDogdXVpZHY3KCksXG4gICAgICAgICAgICBldmVudDogZXZlbnRfbmFtZSxcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IHRoaXMuX2NhbGN1bGF0ZV9ldmVudF9wcm9wZXJ0aWVzKGV2ZW50X25hbWUsIHByb3BlcnRpZXMgfHwge30pLFxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGV2ZW50X25hbWUgPT09ICckaWRlbnRpZnknKSB7XG4gICAgICAgICAgICBkYXRhWyckc2V0J10gPSBvcHRpb25zPy5bJyRzZXQnXVxuICAgICAgICAgICAgZGF0YVsnJHNldF9vbmNlJ10gPSBvcHRpb25zPy5bJyRzZXRfb25jZSddXG4gICAgICAgIH1cblxuICAgICAgICBkYXRhID0gX2NvcHlBbmRUcnVuY2F0ZVN0cmluZ3MoZGF0YSwgb3B0aW9ucz8uX25vVHJ1bmNhdGUgPyBudWxsIDogdGhpcy5jb25maWcucHJvcGVydGllc19zdHJpbmdfbWF4X2xlbmd0aClcbiAgICAgICAgZGF0YS50aW1lc3RhbXAgPSBvcHRpb25zPy50aW1lc3RhbXAgfHwgbmV3IERhdGUoKVxuICAgICAgICBpZiAoIV9pc1VuZGVmaW5lZChvcHRpb25zPy50aW1lc3RhbXApKSB7XG4gICAgICAgICAgICBkYXRhLnByb3BlcnRpZXNbJyRldmVudF90aW1lX292ZXJyaWRlX3Byb3ZpZGVkJ10gPSB0cnVlXG4gICAgICAgICAgICBkYXRhLnByb3BlcnRpZXNbJyRldmVudF90aW1lX292ZXJyaWRlX3N5c3RlbV90aW1lJ10gPSBuZXcgRGF0ZSgpXG4gICAgICAgIH1cblxuICAgICAgICAvLyBUb3AtbGV2ZWwgJHNldCBvdmVycmlkaW5nIHZhbHVlcyBmcm9tIHRoZSBvbmUgZnJvbSBwcm9wZXJ0aWVzIGlzIHRha2VuIGZyb20gdGhlIHBsdWdpbi1zZXJ2ZXIgbm9ybWFsaXplRXZlbnRcbiAgICAgICAgLy8gVGhpcyBkb2Vzbid0IGhhbmRsZSAkc2V0X29uY2UsIGJlY2F1c2UgcG9zdGhvZy1wZW9wbGUgZG9lc24ndCBlaXRoZXJcbiAgICAgICAgY29uc3QgZmluYWxTZXQgPSB7IC4uLmRhdGEucHJvcGVydGllc1snJHNldCddLCAuLi5kYXRhWyckc2V0J10gfVxuICAgICAgICBpZiAoIV9pc0VtcHR5T2JqZWN0KGZpbmFsU2V0KSkge1xuICAgICAgICAgICAgdGhpcy5zZXRQZXJzb25Qcm9wZXJ0aWVzRm9yRmxhZ3MoZmluYWxTZXQpXG4gICAgICAgIH1cblxuICAgICAgICBsb2dnZXIuaW5mbygnc2VuZCcsIGRhdGEpXG5cbiAgICAgICAgY29uc3QgcmVxdWVzdE9wdGlvbnM6IFF1ZXVlZFJlcXVlc3RPcHRpb25zID0ge1xuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICB1cmw6IG9wdGlvbnM/Ll91cmwgPz8gdGhpcy5yZXF1ZXN0Um91dGVyLmVuZHBvaW50Rm9yKCdhcGknLCB0aGlzLmFuYWx5dGljc0RlZmF1bHRFbmRwb2ludCksXG4gICAgICAgICAgICBkYXRhLFxuICAgICAgICAgICAgY29tcHJlc3Npb246IHRoaXMuY29tcHJlc3Npb24sXG4gICAgICAgICAgICBiYXRjaEtleTogb3B0aW9ucz8uX2JhdGNoS2V5LFxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuY29uZmlnLnJlcXVlc3RfYmF0Y2hpbmcgJiYgKCFvcHRpb25zIHx8IG9wdGlvbnM/Ll9iYXRjaEtleSkgJiYgIW9wdGlvbnM/LnNlbmRfaW5zdGFudGx5KSB7XG4gICAgICAgICAgICB0aGlzLl9yZXF1ZXN0UXVldWUuZW5xdWV1ZShyZXF1ZXN0T3B0aW9ucylcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX3NlbmRfcmV0cmlhYmxlX3JlcXVlc3QocmVxdWVzdE9wdGlvbnMpXG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9pbnZva2VDYXB0dXJlSG9va3MoZXZlbnRfbmFtZSwgZGF0YSlcblxuICAgICAgICByZXR1cm4gZGF0YVxuICAgIH1cblxuICAgIF9hZGRDYXB0dXJlSG9vayhjYWxsYmFjazogKGV2ZW50TmFtZTogc3RyaW5nKSA9PiB2b2lkKTogdm9pZCB7XG4gICAgICAgIHRoaXMuX19jYXB0dXJlSG9va3MucHVzaChjYWxsYmFjaylcbiAgICB9XG5cbiAgICBfaW52b2tlQ2FwdHVyZUhvb2tzKGV2ZW50TmFtZTogc3RyaW5nLCBldmVudERhdGE6IENhcHR1cmVSZXN1bHQpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5jb25maWcuX29uQ2FwdHVyZShldmVudE5hbWUsIGV2ZW50RGF0YSlcbiAgICAgICAgX2VhY2godGhpcy5fX2NhcHR1cmVIb29rcywgKGNhbGxiYWNrKSA9PiBjYWxsYmFjayhldmVudE5hbWUpKVxuICAgIH1cblxuICAgIF9jYWxjdWxhdGVfZXZlbnRfcHJvcGVydGllcyhldmVudF9uYW1lOiBzdHJpbmcsIGV2ZW50X3Byb3BlcnRpZXM6IFByb3BlcnRpZXMpOiBQcm9wZXJ0aWVzIHtcbiAgICAgICAgaWYgKCF0aGlzLnBlcnNpc3RlbmNlIHx8ICF0aGlzLnNlc3Npb25QZXJzaXN0ZW5jZSkge1xuICAgICAgICAgICAgcmV0dXJuIGV2ZW50X3Byb3BlcnRpZXNcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHNldCBkZWZhdWx0c1xuICAgICAgICBjb25zdCBzdGFydF90aW1lc3RhbXAgPSB0aGlzLnBlcnNpc3RlbmNlLnJlbW92ZV9ldmVudF90aW1lcihldmVudF9uYW1lKVxuICAgICAgICBsZXQgcHJvcGVydGllcyA9IHsgLi4uZXZlbnRfcHJvcGVydGllcyB9XG4gICAgICAgIHByb3BlcnRpZXNbJ3Rva2VuJ10gPSB0aGlzLmNvbmZpZy50b2tlblxuXG4gICAgICAgIGlmIChldmVudF9uYW1lID09PSAnJHNuYXBzaG90Jykge1xuICAgICAgICAgICAgY29uc3QgcGVyc2lzdGVuY2VQcm9wcyA9IHsgLi4udGhpcy5wZXJzaXN0ZW5jZS5wcm9wZXJ0aWVzKCksIC4uLnRoaXMuc2Vzc2lvblBlcnNpc3RlbmNlLnByb3BlcnRpZXMoKSB9XG4gICAgICAgICAgICBwcm9wZXJ0aWVzWydkaXN0aW5jdF9pZCddID0gcGVyc2lzdGVuY2VQcm9wcy5kaXN0aW5jdF9pZFxuICAgICAgICAgICAgcmV0dXJuIHByb3BlcnRpZXNcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGluZm9Qcm9wZXJ0aWVzID0gX2luZm8ucHJvcGVydGllcygpXG5cbiAgICAgICAgaWYgKHRoaXMuc2Vzc2lvbk1hbmFnZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgc2Vzc2lvbklkLCB3aW5kb3dJZCB9ID0gdGhpcy5zZXNzaW9uTWFuYWdlci5jaGVja0FuZEdldFNlc3Npb25BbmRXaW5kb3dJZCgpXG4gICAgICAgICAgICBwcm9wZXJ0aWVzWyckc2Vzc2lvbl9pZCddID0gc2Vzc2lvbklkXG4gICAgICAgICAgICBwcm9wZXJ0aWVzWyckd2luZG93X2lkJ10gPSB3aW5kb3dJZFxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgdGhpcy5zZXNzaW9uUHJvcHNNYW5hZ2VyICYmXG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5fX3ByZXZpZXdfc2VuZF9jbGllbnRfc2Vzc2lvbl9wYXJhbXMgJiZcbiAgICAgICAgICAgIChldmVudF9uYW1lID09PSAnJHBhZ2V2aWV3JyB8fCBldmVudF9uYW1lID09PSAnJHBhZ2VsZWF2ZScgfHwgZXZlbnRfbmFtZSA9PT0gJyRhdXRvY2FwdHVyZScpXG4gICAgICAgICkge1xuICAgICAgICAgICAgY29uc3Qgc2Vzc2lvblByb3BzID0gdGhpcy5zZXNzaW9uUHJvcHNNYW5hZ2VyLmdldFNlc3Npb25Qcm9wcygpXG4gICAgICAgICAgICBwcm9wZXJ0aWVzID0gX2V4dGVuZChwcm9wZXJ0aWVzLCBzZXNzaW9uUHJvcHMpXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXRoaXMuY29uZmlnLmRpc2FibGVfc2Nyb2xsX3Byb3BlcnRpZXMpIHtcbiAgICAgICAgICAgIGxldCBwZXJmb3JtYW5jZVByb3BlcnRpZXM6IFJlY29yZDxzdHJpbmcsIGFueT4gPSB7fVxuICAgICAgICAgICAgaWYgKGV2ZW50X25hbWUgPT09ICckcGFnZXZpZXcnKSB7XG4gICAgICAgICAgICAgICAgcGVyZm9ybWFuY2VQcm9wZXJ0aWVzID0gdGhpcy5wYWdlVmlld01hbmFnZXIuZG9QYWdlVmlldygpXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50X25hbWUgPT09ICckcGFnZWxlYXZlJykge1xuICAgICAgICAgICAgICAgIHBlcmZvcm1hbmNlUHJvcGVydGllcyA9IHRoaXMucGFnZVZpZXdNYW5hZ2VyLmRvUGFnZUxlYXZlKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHByb3BlcnRpZXMgPSBfZXh0ZW5kKHByb3BlcnRpZXMsIHBlcmZvcm1hbmNlUHJvcGVydGllcylcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChldmVudF9uYW1lID09PSAnJHBhZ2V2aWV3JyAmJiBkb2N1bWVudCkge1xuICAgICAgICAgICAgcHJvcGVydGllc1sndGl0bGUnXSA9IGRvY3VtZW50LnRpdGxlXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZXZlbnRfbmFtZSA9PT0gJyRwZXJmb3JtYW5jZV9ldmVudCcpIHtcbiAgICAgICAgICAgIGNvbnN0IHBlcnNpc3RlbmNlUHJvcHMgPSB0aGlzLnBlcnNpc3RlbmNlLnByb3BlcnRpZXMoKVxuICAgICAgICAgICAgLy8gRWFybHkgZXhpdCBmb3IgJHBlcmZvcm1hbmNlX2V2ZW50IGFzIHdlIG9ubHkgbmVlZCBzZXNzaW9uIGFuZCAkY3VycmVudF91cmxcbiAgICAgICAgICAgIHByb3BlcnRpZXNbJ2Rpc3RpbmN0X2lkJ10gPSBwZXJzaXN0ZW5jZVByb3BzLmRpc3RpbmN0X2lkXG4gICAgICAgICAgICBwcm9wZXJ0aWVzWyckY3VycmVudF91cmwnXSA9IGluZm9Qcm9wZXJ0aWVzLiRjdXJyZW50X3VybFxuICAgICAgICAgICAgcmV0dXJuIHByb3BlcnRpZXNcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHNldCAkZHVyYXRpb24gaWYgdGltZV9ldmVudCB3YXMgcHJldmlvdXNseSBjYWxsZWQgZm9yIHRoaXMgZXZlbnRcbiAgICAgICAgaWYgKCFfaXNVbmRlZmluZWQoc3RhcnRfdGltZXN0YW1wKSkge1xuICAgICAgICAgICAgY29uc3QgZHVyYXRpb25faW5fbXMgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIHN0YXJ0X3RpbWVzdGFtcFxuICAgICAgICAgICAgcHJvcGVydGllc1snJGR1cmF0aW9uJ10gPSBwYXJzZUZsb2F0KChkdXJhdGlvbl9pbl9tcyAvIDEwMDApLnRvRml4ZWQoMykpXG4gICAgICAgIH1cblxuICAgICAgICAvLyB0aGlzIGlzIG9ubHkgYWRkZWQgd2hlbiB0aGlzLmNvbmZpZy5vcHRfb3V0X3VzZXJhZ2VudF9maWx0ZXIgaXMgdHJ1ZSxcbiAgICAgICAgLy8gb3IgaXQgd291bGQgYWx3YXlzIGFkZCBcImJyb3dzZXJcIlxuICAgICAgICBpZiAodXNlckFnZW50ICYmIHRoaXMuY29uZmlnLm9wdF9vdXRfdXNlcmFnZW50X2ZpbHRlcikge1xuICAgICAgICAgICAgcHJvcGVydGllc1snJGJyb3dzZXJfdHlwZSddID0gX2lzQmxvY2tlZFVBKHVzZXJBZ2VudCwgdGhpcy5jb25maWcuY3VzdG9tX2Jsb2NrZWRfdXNlcmFnZW50cylcbiAgICAgICAgICAgICAgICA/ICdib3QnXG4gICAgICAgICAgICAgICAgOiAnYnJvd3NlcidcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIG5vdGU6IGV4dGVuZCB3cml0ZXMgdG8gdGhlIGZpcnN0IG9iamVjdCwgc28gbGV0cyBtYWtlIHN1cmUgd2VcbiAgICAgICAgLy8gZG9uJ3Qgd3JpdGUgdG8gdGhlIHBlcnNpc3RlbmNlIHByb3BlcnRpZXMgb2JqZWN0IGFuZCBpbmZvXG4gICAgICAgIC8vIHByb3BlcnRpZXMgb2JqZWN0IGJ5IHBhc3NpbmcgaW4gYSBuZXcgb2JqZWN0XG5cbiAgICAgICAgLy8gdXBkYXRlIHByb3BlcnRpZXMgd2l0aCBwYWdldmlldyBpbmZvIGFuZCBzdXBlci1wcm9wZXJ0aWVzXG4gICAgICAgIHByb3BlcnRpZXMgPSBfZXh0ZW5kKFxuICAgICAgICAgICAge30sXG4gICAgICAgICAgICBfaW5mby5wcm9wZXJ0aWVzKCksXG4gICAgICAgICAgICB0aGlzLnBlcnNpc3RlbmNlLnByb3BlcnRpZXMoKSxcbiAgICAgICAgICAgIHRoaXMuc2Vzc2lvblBlcnNpc3RlbmNlLnByb3BlcnRpZXMoKSxcbiAgICAgICAgICAgIHByb3BlcnRpZXNcbiAgICAgICAgKVxuXG4gICAgICAgIGlmIChfaXNBcnJheSh0aGlzLmNvbmZpZy5wcm9wZXJ0eV9kZW55bGlzdCkgJiYgX2lzQXJyYXkodGhpcy5jb25maWcucHJvcGVydHlfYmxhY2tsaXN0KSkge1xuICAgICAgICAgICAgLy8gc2luY2UgcHJvcGVydHlfYmxhY2tsaXN0IGlzIGRlcHJlY2F0ZWQgaW4gZmF2b3Igb2YgcHJvcGVydHlfZGVueWxpc3QsIHdlIG1lcmdlIGJvdGggb2YgdGhlbSBoZXJlXG4gICAgICAgICAgICAvLyBUT0RPOiBtZXJnZSB0aGlzIG9ubHkgb25jZSwgcmVxdWlyZXMgcmVmYWN0b3JpbmcgdGVzdHNcbiAgICAgICAgICAgIGNvbnN0IHByb3BlcnR5X2RlbnlsaXN0ID0gWy4uLnRoaXMuY29uZmlnLnByb3BlcnR5X2JsYWNrbGlzdCwgLi4udGhpcy5jb25maWcucHJvcGVydHlfZGVueWxpc3RdXG4gICAgICAgICAgICBfZWFjaChwcm9wZXJ0eV9kZW55bGlzdCwgZnVuY3Rpb24gKGRlbnlsaXN0ZWRfcHJvcCkge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBwcm9wZXJ0aWVzW2RlbnlsaXN0ZWRfcHJvcF1cbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoXG4gICAgICAgICAgICAgICAgJ0ludmFsaWQgdmFsdWUgZm9yIHByb3BlcnR5X2RlbnlsaXN0IGNvbmZpZzogJyArXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLnByb3BlcnR5X2RlbnlsaXN0ICtcbiAgICAgICAgICAgICAgICAgICAgJyBvciBwcm9wZXJ0eV9ibGFja2xpc3QgY29uZmlnOiAnICtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25maWcucHJvcGVydHlfYmxhY2tsaXN0XG4gICAgICAgICAgICApXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzYW5pdGl6ZV9wcm9wZXJ0aWVzID0gdGhpcy5jb25maWcuc2FuaXRpemVfcHJvcGVydGllc1xuICAgICAgICBpZiAoc2FuaXRpemVfcHJvcGVydGllcykge1xuICAgICAgICAgICAgcHJvcGVydGllcyA9IHNhbml0aXplX3Byb3BlcnRpZXMocHJvcGVydGllcywgZXZlbnRfbmFtZSlcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBwcm9wZXJ0aWVzXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVnaXN0ZXIgYSBzZXQgb2Ygc3VwZXIgcHJvcGVydGllcywgd2hpY2ggYXJlIGluY2x1ZGVkIHdpdGggYWxsXG4gICAgICogZXZlbnRzLiBUaGlzIHdpbGwgb3ZlcndyaXRlIHByZXZpb3VzIHN1cGVyIHByb3BlcnR5IHZhbHVlcywgZXhjZXB0XG4gICAgICogZm9yIHNlc3Npb24gcHJvcGVydGllcyAoc2VlIGByZWdpc3Rlcl9mb3Jfc2Vzc2lvbihwcm9wZXJ0aWVzKWApLlxuICAgICAqXG4gICAgICogIyMjIFVzYWdlOlxuICAgICAqXG4gICAgICogICAgIC8vIHJlZ2lzdGVyICdHZW5kZXInIGFzIGEgc3VwZXIgcHJvcGVydHlcbiAgICAgKiAgICAgcG9zdGhvZy5yZWdpc3Rlcih7J0dlbmRlcic6ICdGZW1hbGUnfSk7XG4gICAgICpcbiAgICAgKiAgICAgLy8gcmVnaXN0ZXIgc2V2ZXJhbCBzdXBlciBwcm9wZXJ0aWVzIHdoZW4gYSB1c2VyIHNpZ25zIHVwXG4gICAgICogICAgIHBvc3Rob2cucmVnaXN0ZXIoe1xuICAgICAqICAgICAgICAgJ0VtYWlsJzogJ2pkb2VAZXhhbXBsZS5jb20nLFxuICAgICAqICAgICAgICAgJ0FjY291bnQgVHlwZSc6ICdGcmVlJ1xuICAgICAqICAgICB9KTtcbiAgICAgKlxuICAgICAqICAgICAvLyBEaXNwbGF5IHRoZSBwcm9wZXJ0aWVzXG4gICAgICogICAgIGNvbnNvbGUubG9nKHBvc3Rob2cucGVyc2lzdGVuY2UucHJvcGVydGllcygpKVxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHByb3BlcnRpZXMgQW4gYXNzb2NpYXRpdmUgYXJyYXkgb2YgcHJvcGVydGllcyB0byBzdG9yZSBhYm91dCB0aGUgdXNlclxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBbZGF5c10gSG93IG1hbnkgZGF5cyBzaW5jZSB0aGUgdXNlcidzIGxhc3QgdmlzaXQgdG8gc3RvcmUgdGhlIHN1cGVyIHByb3BlcnRpZXNcbiAgICAgKi9cbiAgICByZWdpc3Rlcihwcm9wZXJ0aWVzOiBQcm9wZXJ0aWVzLCBkYXlzPzogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIHRoaXMucGVyc2lzdGVuY2U/LnJlZ2lzdGVyKHByb3BlcnRpZXMsIGRheXMpXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVnaXN0ZXIgYSBzZXQgb2Ygc3VwZXIgcHJvcGVydGllcyBvbmx5IG9uY2UuIFRoZXNlIHdpbGwgbm90XG4gICAgICogb3ZlcndyaXRlIHByZXZpb3VzIHN1cGVyIHByb3BlcnR5IHZhbHVlcywgdW5saWtlIHJlZ2lzdGVyKCkuXG4gICAgICpcbiAgICAgKiAjIyMgVXNhZ2U6XG4gICAgICpcbiAgICAgKiAgICAgLy8gcmVnaXN0ZXIgYSBzdXBlciBwcm9wZXJ0eSBmb3IgdGhlIGZpcnN0IHRpbWUgb25seVxuICAgICAqICAgICBwb3N0aG9nLnJlZ2lzdGVyX29uY2Uoe1xuICAgICAqICAgICAgICAgJ0ZpcnN0IExvZ2luIERhdGUnOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgKiAgICAgfSk7XG4gICAgICpcbiAgICAgKiAgICAgLy8gRGlzcGxheSB0aGUgcHJvcGVydGllc1xuICAgICAqICAgICBjb25zb2xlLmxvZyhwb3N0aG9nLnBlcnNpc3RlbmNlLnByb3BlcnRpZXMoKSlcbiAgICAgKlxuICAgICAqICMjIyBOb3RlczpcbiAgICAgKlxuICAgICAqIElmIGRlZmF1bHRfdmFsdWUgaXMgc3BlY2lmaWVkLCBjdXJyZW50IHN1cGVyIHByb3BlcnRpZXNcbiAgICAgKiB3aXRoIHRoYXQgdmFsdWUgd2lsbCBiZSBvdmVyd3JpdHRlbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wZXJ0aWVzIEFuIGFzc29jaWF0aXZlIGFycmF5IG9mIHByb3BlcnRpZXMgdG8gc3RvcmUgYWJvdXQgdGhlIHVzZXJcbiAgICAgKiBAcGFyYW0geyp9IFtkZWZhdWx0X3ZhbHVlXSBWYWx1ZSB0byBvdmVycmlkZSBpZiBhbHJlYWR5IHNldCBpbiBzdXBlciBwcm9wZXJ0aWVzIChleDogJ0ZhbHNlJykgRGVmYXVsdDogJ05vbmUnXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IFtkYXlzXSBIb3cgbWFueSBkYXlzIHNpbmNlIHRoZSB1c2VycyBsYXN0IHZpc2l0IHRvIHN0b3JlIHRoZSBzdXBlciBwcm9wZXJ0aWVzXG4gICAgICovXG4gICAgcmVnaXN0ZXJfb25jZShwcm9wZXJ0aWVzOiBQcm9wZXJ0aWVzLCBkZWZhdWx0X3ZhbHVlPzogUHJvcGVydHksIGRheXM/OiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5wZXJzaXN0ZW5jZT8ucmVnaXN0ZXJfb25jZShwcm9wZXJ0aWVzLCBkZWZhdWx0X3ZhbHVlLCBkYXlzKVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVyIGEgc2V0IG9mIHN1cGVyIHByb3BlcnRpZXMsIHdoaWNoIGFyZSBpbmNsdWRlZCB3aXRoIGFsbCBldmVudHMsIGJ1dCBvbmx5XG4gICAgICogZm9yIFRISVMgU0VTU0lPTi4gVGhlc2Ugd2lsbCBvdmVyd3JpdGUgYWxsIG90aGVyIHN1cGVyIHByb3BlcnR5IHZhbHVlcy5cbiAgICAgKlxuICAgICAqIFVubGlrZSByZWd1bGFyIHN1cGVyIHByb3BlcnRpZXMsIHdoaWNoIGxhc3QgaW4gTG9jYWxTdG9yYWdlIGZvciBhIGxvbmcgdGltZSxcbiAgICAgKiBzZXNzaW9uIHN1cGVyIHByb3BlcnRpZXMgZ2V0IGNsZWFyZWQgYWZ0ZXIgYSBzZXNzaW9uIGVuZHMuXG4gICAgICpcbiAgICAgKiAjIyMgVXNhZ2U6XG4gICAgICpcbiAgICAgKiAgICAgLy8gcmVnaXN0ZXIgb24gYWxsIGV2ZW50cyB0aGlzIHNlc3Npb25cbiAgICAgKiAgICAgcG9zdGhvZy5yZWdpc3Rlcl9mb3Jfc2Vzc2lvbih7J3JlZmVyZXInOiBjdXN0b21HZXRSZWZlcmVyKCl9KTtcbiAgICAgKlxuICAgICAqICAgICAvLyByZWdpc3RlciBzZXZlcmFsIHNlc3Npb24gc3VwZXIgcHJvcGVydGllcyB3aGVuIGEgdXNlciBzaWducyB1cFxuICAgICAqICAgICBwb3N0aG9nLnJlZ2lzdGVyX2Zvcl9zZXNzaW9uKHtcbiAgICAgKiAgICAgICAgICdzZWxlY3RlZFBsYW4nOiAncHJvJyxcbiAgICAgKiAgICAgICAgICdjb21wbGV0ZWRTdGVwcyc6IDQsXG4gICAgICogICAgIH0pO1xuICAgICAqXG4gICAgICogICAgIC8vIERpc3BsYXkgdGhlIHByb3BlcnRpZXNcbiAgICAgKiAgICAgY29uc29sZS5sb2cocG9zdGhvZy5zZXNzaW9uUGVyc2lzdGVuY2UucHJvcGVydGllcygpKVxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHByb3BlcnRpZXMgQW4gYXNzb2NpYXRpdmUgYXJyYXkgb2YgcHJvcGVydGllcyB0byBzdG9yZSBhYm91dCB0aGUgdXNlclxuICAgICAqL1xuICAgIHJlZ2lzdGVyX2Zvcl9zZXNzaW9uKHByb3BlcnRpZXM6IFByb3BlcnRpZXMpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5zZXNzaW9uUGVyc2lzdGVuY2U/LnJlZ2lzdGVyKHByb3BlcnRpZXMpXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGVsZXRlIGEgc3VwZXIgcHJvcGVydHkgc3RvcmVkIHdpdGggdGhlIGN1cnJlbnQgdXNlci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0eSBUaGUgbmFtZSBvZiB0aGUgc3VwZXIgcHJvcGVydHkgdG8gcmVtb3ZlXG4gICAgICovXG4gICAgdW5yZWdpc3Rlcihwcm9wZXJ0eTogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIHRoaXMucGVyc2lzdGVuY2U/LnVucmVnaXN0ZXIocHJvcGVydHkpXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGVsZXRlIGEgc2Vzc2lvbiBzdXBlciBwcm9wZXJ0eSBzdG9yZWQgd2l0aCB0aGUgY3VycmVudCB1c2VyLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHByb3BlcnR5IFRoZSBuYW1lIG9mIHRoZSBzZXNzaW9uIHN1cGVyIHByb3BlcnR5IHRvIHJlbW92ZVxuICAgICAqL1xuICAgIHVucmVnaXN0ZXJfZm9yX3Nlc3Npb24ocHJvcGVydHk6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICB0aGlzLnNlc3Npb25QZXJzaXN0ZW5jZT8udW5yZWdpc3Rlcihwcm9wZXJ0eSlcbiAgICB9XG5cbiAgICBfcmVnaXN0ZXJfc2luZ2xlKHByb3A6IHN0cmluZywgdmFsdWU6IFByb3BlcnR5KSB7XG4gICAgICAgIHRoaXMucmVnaXN0ZXIoeyBbcHJvcF06IHZhbHVlIH0pXG4gICAgfVxuXG4gICAgLypcbiAgICAgKiBHZXQgZmVhdHVyZSBmbGFnIHZhbHVlIGZvciB1c2VyIChzdXBwb3J0cyBtdWx0aXZhcmlhdGUgZmxhZ3MpLlxuICAgICAqXG4gICAgICogIyMjIFVzYWdlOlxuICAgICAqXG4gICAgICogICAgIGlmKHBvc3Rob2cuZ2V0RmVhdHVyZUZsYWcoJ2JldGEtZmVhdHVyZScpID09PSAnc29tZS12YWx1ZScpIHsgLy8gZG8gc29tZXRoaW5nIH1cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fFN0cmluZ30gcHJvcCBLZXkgb2YgdGhlIGZlYXR1cmUgZmxhZy5cbiAgICAgKiBAcGFyYW0ge09iamVjdHxTdHJpbmd9IG9wdGlvbnMgKG9wdGlvbmFsKSBJZiB7c2VuZF9ldmVudDogZmFsc2V9LCB3ZSB3b24ndCBzZW5kIGFuICRmZWF0dXJlX2ZsYWdfY2FsbCBldmVudCB0byBQb3N0SG9nLlxuICAgICAqL1xuICAgIGdldEZlYXR1cmVGbGFnKGtleTogc3RyaW5nLCBvcHRpb25zPzogeyBzZW5kX2V2ZW50PzogYm9vbGVhbiB9KTogYm9vbGVhbiB8IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gICAgICAgIHJldHVybiB0aGlzLmZlYXR1cmVGbGFncy5nZXRGZWF0dXJlRmxhZyhrZXksIG9wdGlvbnMpXG4gICAgfVxuXG4gICAgLypcbiAgICAgKiBHZXQgZmVhdHVyZSBmbGFnIHBheWxvYWQgdmFsdWUgbWF0Y2hpbmcga2V5IGZvciB1c2VyIChzdXBwb3J0cyBtdWx0aXZhcmlhdGUgZmxhZ3MpLlxuICAgICAqXG4gICAgICogIyMjIFVzYWdlOlxuICAgICAqXG4gICAgICogICAgIGlmKHBvc3Rob2cuZ2V0RmVhdHVyZUZsYWcoJ2JldGEtZmVhdHVyZScpID09PSAnc29tZS12YWx1ZScpIHtcbiAgICAgKiAgICAgICAgICBjb25zdCBzb21lVmFsdWUgPSBwb3N0aG9nLmdldEZlYXR1cmVGbGFnUGF5bG9hZCgnYmV0YS1mZWF0dXJlJylcbiAgICAgKiAgICAgICAgICAvLyBkbyBzb21ldGhpbmdcbiAgICAgKiAgICAgfVxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R8U3RyaW5nfSBwcm9wIEtleSBvZiB0aGUgZmVhdHVyZSBmbGFnLlxuICAgICAqL1xuICAgIGdldEZlYXR1cmVGbGFnUGF5bG9hZChrZXk6IHN0cmluZyk6IEpzb25UeXBlIHtcbiAgICAgICAgY29uc3QgcGF5bG9hZCA9IHRoaXMuZmVhdHVyZUZsYWdzLmdldEZlYXR1cmVGbGFnUGF5bG9hZChrZXkpXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShwYXlsb2FkIGFzIGFueSlcbiAgICAgICAgfSBjYXRjaCB7XG4gICAgICAgICAgICByZXR1cm4gcGF5bG9hZFxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLypcbiAgICAgKiBTZWUgaWYgZmVhdHVyZSBmbGFnIGlzIGVuYWJsZWQgZm9yIHVzZXIuXG4gICAgICpcbiAgICAgKiAjIyMgVXNhZ2U6XG4gICAgICpcbiAgICAgKiAgICAgaWYocG9zdGhvZy5pc0ZlYXR1cmVFbmFibGVkKCdiZXRhLWZlYXR1cmUnKSkgeyAvLyBkbyBzb21ldGhpbmcgfVxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R8U3RyaW5nfSBwcm9wIEtleSBvZiB0aGUgZmVhdHVyZSBmbGFnLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fFN0cmluZ30gb3B0aW9ucyAob3B0aW9uYWwpIElmIHtzZW5kX2V2ZW50OiBmYWxzZX0sIHdlIHdvbid0IHNlbmQgYW4gJGZlYXR1cmVfZmxhZ19jYWxsIGV2ZW50IHRvIFBvc3RIb2cuXG4gICAgICovXG4gICAgaXNGZWF0dXJlRW5hYmxlZChrZXk6IHN0cmluZywgb3B0aW9ucz86IElzRmVhdHVyZUVuYWJsZWRPcHRpb25zKTogYm9vbGVhbiB8IHVuZGVmaW5lZCB7XG4gICAgICAgIHJldHVybiB0aGlzLmZlYXR1cmVGbGFncy5pc0ZlYXR1cmVFbmFibGVkKGtleSwgb3B0aW9ucylcbiAgICB9XG5cbiAgICByZWxvYWRGZWF0dXJlRmxhZ3MoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZmVhdHVyZUZsYWdzLnJlbG9hZEZlYXR1cmVGbGFncygpXG4gICAgfVxuXG4gICAgLyoqIE9wdCB0aGUgdXNlciBpbiBvciBvdXQgb2YgYW4gZWFybHkgYWNjZXNzIGZlYXR1cmUuICovXG4gICAgdXBkYXRlRWFybHlBY2Nlc3NGZWF0dXJlRW5yb2xsbWVudChrZXk6IHN0cmluZywgaXNFbnJvbGxlZDogYm9vbGVhbik6IHZvaWQge1xuICAgICAgICB0aGlzLmZlYXR1cmVGbGFncy51cGRhdGVFYXJseUFjY2Vzc0ZlYXR1cmVFbnJvbGxtZW50KGtleSwgaXNFbnJvbGxlZClcbiAgICB9XG5cbiAgICAvKiogR2V0IHRoZSBsaXN0IG9mIGVhcmx5IGFjY2VzcyBmZWF0dXJlcy4gVG8gY2hlY2sgZW5yb2xsbWVudCBzdGF0dXMsIHVzZSBgaXNGZWF0dXJlRW5hYmxlZGAuICovXG4gICAgZ2V0RWFybHlBY2Nlc3NGZWF0dXJlcyhjYWxsYmFjazogRWFybHlBY2Nlc3NGZWF0dXJlQ2FsbGJhY2ssIGZvcmNlX3JlbG9hZCA9IGZhbHNlKTogdm9pZCB7XG4gICAgICAgIHJldHVybiB0aGlzLmZlYXR1cmVGbGFncy5nZXRFYXJseUFjY2Vzc0ZlYXR1cmVzKGNhbGxiYWNrLCBmb3JjZV9yZWxvYWQpXG4gICAgfVxuXG4gICAgLypcbiAgICAgKiBSZWdpc3RlciBhbiBldmVudCBsaXN0ZW5lciB0aGF0IHJ1bnMgd2hlbiBmZWF0dXJlIGZsYWdzIGJlY29tZSBhdmFpbGFibGUgb3Igd2hlbiB0aGV5IGNoYW5nZS5cbiAgICAgKiBJZiB0aGVyZSBhcmUgZmxhZ3MsIHRoZSBsaXN0ZW5lciBpcyBjYWxsZWQgaW1tZWRpYXRlbHkgaW4gYWRkaXRpb24gdG8gYmVpbmcgY2FsbGVkIG9uIGZ1dHVyZSBjaGFuZ2VzLlxuICAgICAqXG4gICAgICogIyMjIFVzYWdlOlxuICAgICAqXG4gICAgICogICAgIHBvc3Rob2cub25GZWF0dXJlRmxhZ3MoZnVuY3Rpb24oZmVhdHVyZUZsYWdzKSB7IC8vIGRvIHNvbWV0aGluZyB9KVxuICAgICAqXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NhbGxiYWNrXSBUaGUgY2FsbGJhY2sgZnVuY3Rpb24gd2lsbCBiZSBjYWxsZWQgb25jZSB0aGUgZmVhdHVyZSBmbGFncyBhcmUgcmVhZHkgb3Igd2hlbiB0aGV5IGFyZSB1cGRhdGVkLlxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSXQnbGwgcmV0dXJuIGEgbGlzdCBvZiBmZWF0dXJlIGZsYWdzIGVuYWJsZWQgZm9yIHRoZSB1c2VyLlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gQSBmdW5jdGlvbiB0aGF0IGNhbiBiZSBjYWxsZWQgdG8gdW5zdWJzY3JpYmUgdGhlIGxpc3RlbmVyLiBVc2VkIGJ5IHVzZUVmZmVjdCB3aGVuIHRoZSBjb21wb25lbnQgdW5tb3VudHMuXG4gICAgICovXG4gICAgb25GZWF0dXJlRmxhZ3MoY2FsbGJhY2s6IChmbGFnczogc3RyaW5nW10sIHZhcmlhbnRzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmcgfCBib29sZWFuPikgPT4gdm9pZCk6ICgpID0+IHZvaWQge1xuICAgICAgICByZXR1cm4gdGhpcy5mZWF0dXJlRmxhZ3Mub25GZWF0dXJlRmxhZ3MoY2FsbGJhY2spXG4gICAgfVxuXG4gICAgLypcbiAgICAgKiBSZWdpc3RlciBhbiBldmVudCBsaXN0ZW5lciB0aGF0IHJ1bnMgd2hlbmV2ZXIgdGhlIHNlc3Npb24gaWQgb3Igd2luZG93IGlkIGNoYW5nZS5cbiAgICAgKiBJZiB0aGVyZSBpcyBhbHJlYWR5IGEgc2Vzc2lvbiBpZCwgdGhlIGxpc3RlbmVyIGlzIGNhbGxlZCBpbW1lZGlhdGVseSBpbiBhZGRpdGlvbiB0byBiZWluZyBjYWxsZWQgb24gZnV0dXJlIGNoYW5nZXMuXG4gICAgICpcbiAgICAgKiBDYW4gYmUgdXNlZCwgZm9yIGV4YW1wbGUsIHRvIHN5bmMgdGhlIFBvc3RIb2cgc2Vzc2lvbiBpZCB3aXRoIGEgYmFja2VuZCBzZXNzaW9uLlxuICAgICAqXG4gICAgICogIyMjIFVzYWdlOlxuICAgICAqXG4gICAgICogICAgIHBvc3Rob2cub25TZXNzaW9uSWQoZnVuY3Rpb24oc2Vzc2lvbklkLCB3aW5kb3dJZCkgeyAvLyBkbyBzb21ldGhpbmcgfSlcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYWxsYmFja10gVGhlIGNhbGxiYWNrIGZ1bmN0aW9uIHdpbGwgYmUgY2FsbGVkIG9uY2UgYSBzZXNzaW9uIGlkIGlzIHByZXNlbnQgb3Igd2hlbiBpdCBvciB0aGUgd2luZG93IGlkIGFyZSB1cGRhdGVkLlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gQSBmdW5jdGlvbiB0aGF0IGNhbiBiZSBjYWxsZWQgdG8gdW5zdWJzY3JpYmUgdGhlIGxpc3RlbmVyLiBFLmcuIFVzZWQgYnkgdXNlRWZmZWN0IHdoZW4gdGhlIGNvbXBvbmVudCB1bm1vdW50cy5cbiAgICAgKi9cbiAgICBvblNlc3Npb25JZChjYWxsYmFjazogU2Vzc2lvbklkQ2hhbmdlZENhbGxiYWNrKTogKCkgPT4gdm9pZCB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlc3Npb25NYW5hZ2VyPy5vblNlc3Npb25JZChjYWxsYmFjaykgPz8gKCgpID0+IHt9KVxuICAgIH1cblxuICAgIC8qKiBHZXQgbGlzdCBvZiBhbGwgc3VydmV5cy4gKi9cbiAgICBnZXRTdXJ2ZXlzKGNhbGxiYWNrOiBTdXJ2ZXlDYWxsYmFjaywgZm9yY2VSZWxvYWQgPSBmYWxzZSk6IHZvaWQge1xuICAgICAgICB0aGlzLnN1cnZleXMuZ2V0U3VydmV5cyhjYWxsYmFjaywgZm9yY2VSZWxvYWQpXG4gICAgfVxuXG4gICAgLyoqIEdldCBzdXJ2ZXlzIHRoYXQgc2hvdWxkIGJlIGVuYWJsZWQgZm9yIHRoZSBjdXJyZW50IHVzZXIuICovXG4gICAgZ2V0QWN0aXZlTWF0Y2hpbmdTdXJ2ZXlzKGNhbGxiYWNrOiBTdXJ2ZXlDYWxsYmFjaywgZm9yY2VSZWxvYWQgPSBmYWxzZSk6IHZvaWQge1xuICAgICAgICB0aGlzLnN1cnZleXMuZ2V0QWN0aXZlTWF0Y2hpbmdTdXJ2ZXlzKGNhbGxiYWNrLCBmb3JjZVJlbG9hZClcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJZGVudGlmeSBhIHVzZXIgd2l0aCBhIHVuaXF1ZSBJRCBpbnN0ZWFkIG9mIGEgUG9zdEhvZ1xuICAgICAqIHJhbmRvbWx5IGdlbmVyYXRlZCBkaXN0aW5jdF9pZC4gSWYgdGhlIG1ldGhvZCBpcyBuZXZlciBjYWxsZWQsXG4gICAgICogdGhlbiB1bmlxdWUgdmlzaXRvcnMgd2lsbCBiZSBpZGVudGlmaWVkIGJ5IGEgVVVJRCB0aGF0IGlzIGdlbmVyYXRlZFxuICAgICAqIHRoZSBmaXJzdCB0aW1lIHRoZXkgdmlzaXQgdGhlIHNpdGUuXG4gICAgICpcbiAgICAgKiBJZiB1c2VyIHByb3BlcnRpZXMgYXJlIHBhc3NlZCwgdGhleSBhcmUgYWxzbyBzZW50IHRvIHBvc3Rob2cuXG4gICAgICpcbiAgICAgKiAjIyMgVXNhZ2U6XG4gICAgICpcbiAgICAgKiAgICAgIHBvc3Rob2cuaWRlbnRpZnkoJ1t1c2VyIHVuaXF1ZSBpZF0nKVxuICAgICAqICAgICAgcG9zdGhvZy5pZGVudGlmeSgnW3VzZXIgdW5pcXVlIGlkXScsIHsgZW1haWw6ICdqb2huQGV4YW1wbGUuY29tJyB9KVxuICAgICAqICAgICAgcG9zdGhvZy5pZGVudGlmeSgnW3VzZXIgdW5pcXVlIGlkXScsIHt9LCB7IHJlZmVycmFsX2NvZGU6ICcxMjM0NScgfSlcbiAgICAgKlxuICAgICAqICMjIyBOb3RlczpcbiAgICAgKlxuICAgICAqIFlvdSBjYW4gY2FsbCB0aGlzIGZ1bmN0aW9uIHRvIG92ZXJ3cml0ZSBhIHByZXZpb3VzbHkgc2V0XG4gICAgICogdW5pcXVlIElEIGZvciB0aGUgY3VycmVudCB1c2VyLlxuICAgICAqXG4gICAgICogSWYgdGhlIHVzZXIgaGFzIGJlZW4gaWRlbnRpZmllZCAoJHVzZXJfc3RhdGUgaW4gcGVyc2lzdGVuY2UgaXMgc2V0IHRvICdpZGVudGlmaWVkJyksXG4gICAgICogdGhlbiBjYXB0dXJlIG9mICRpZGVudGlmeSBpcyBza2lwcGVkIHRvIGF2b2lkIG1lcmdpbmcgdXNlcnMuIEZvciBleGFtcGxlLFxuICAgICAqIGlmIHlvdXIgc3lzdGVtIGFsbG93cyBhbiBhZG1pbiB1c2VyIHRvIGltcGVyc29uYXRlIGFub3RoZXIgdXNlci5cbiAgICAgKlxuICAgICAqIFRoZW4gYSBzaW5nbGUgYnJvd3NlciBpbnN0YW5jZSBjYW4gaGF2ZTpcbiAgICAgKlxuICAgICAqICBgaWRlbnRpZnkoJ2EnKSAtPiBjYXB0dXJlKDEpIC0+IGlkZW50aWZ5KCdiJykgLT4gY2FwdHVyZSgyKWBcbiAgICAgKlxuICAgICAqIGFuZCBjYXB0dXJlIDEgYW5kIGNhcHR1cmUgMiB3aWxsIGhhdmUgdGhlIGNvcnJlY3QgZGlzdGluY3RfaWQuXG4gICAgICogYnV0IHVzZXJzIGEgYW5kIGIgd2lsbCBOT1QgYmUgbWVyZ2VkIGluIHBvc3Rob2cuXG4gICAgICpcbiAgICAgKiBIb3dldmVyLCBpZiByZXNldCBpcyBjYWxsZWQgdGhlbjpcbiAgICAgKlxuICAgICAqICBgaWRlbnRpZnkoJ2EnKSAtPiBjYXB0dXJlKDEpIC0+IHJlc2V0KCkgLT4gY2FwdHVyZSgyKSAtPiBpZGVudGlmeSgnYicpIC0+IGNhcHR1cmUoMylgXG4gICAgICpcbiAgICAgKiB1c2VycyBhIGFuZCBiIGFyZSBub3QgbWVyZ2VkLlxuICAgICAqIENhcHR1cmUgMSBpcyBhc3NvY2lhdGVkIHdpdGggdXNlciBhLlxuICAgICAqIEEgbmV3IGRpc3RpbmN0IGlkIGlzIGdlbmVyYXRlZCBmb3IgY2FwdHVyZSAyLlxuICAgICAqIHdoaWNoIGlzIG1lcmdlZCB3aXRoIHVzZXIgYi5cbiAgICAgKiBTbywgY2FwdHVyZSAyIGFuZCAzIGFyZSBhc3NvY2lhdGVkIHdpdGggdXNlciBiLlxuICAgICAqXG4gICAgICogSWYgeW91IHdhbnQgdG8gbWVyZ2UgdHdvIGlkZW50aWZpZWQgdXNlcnMsIHlvdSBjYW4gY2FsbCBwb3N0aG9nLmFsaWFzXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gW25ld19kaXN0aW5jdF9pZF0gQSBzdHJpbmcgdGhhdCB1bmlxdWVseSBpZGVudGlmaWVzIGEgdXNlci4gSWYgbm90IHByb3ZpZGVkLCB0aGUgZGlzdGluY3RfaWQgY3VycmVudGx5IGluIHRoZSBwZXJzaXN0ZW50IHN0b3JlIChjb29raWUgb3IgbG9jYWxTdG9yYWdlKSB3aWxsIGJlIHVzZWQuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFt1c2VyUHJvcGVydGllc1RvU2V0XSBPcHRpb25hbDogQW4gYXNzb2NpYXRpdmUgYXJyYXkgb2YgcHJvcGVydGllcyB0byBzdG9yZSBhYm91dCB0aGUgdXNlclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbdXNlclByb3BlcnRpZXNUb1NldE9uY2VdIE9wdGlvbmFsOiBBbiBhc3NvY2lhdGl2ZSBhcnJheSBvZiBwcm9wZXJ0aWVzIHRvIHN0b3JlIGFib3V0IHRoZSB1c2VyLiBJZiBwcm9wZXJ0eSBpcyBwcmV2aW91c2x5IHNldCwgdGhpcyBkb2VzIG5vdCBvdmVycmlkZSB0aGF0IHZhbHVlLlxuICAgICAqL1xuICAgIGlkZW50aWZ5KG5ld19kaXN0aW5jdF9pZD86IHN0cmluZywgdXNlclByb3BlcnRpZXNUb1NldD86IFByb3BlcnRpZXMsIHVzZXJQcm9wZXJ0aWVzVG9TZXRPbmNlPzogUHJvcGVydGllcyk6IHZvaWQge1xuICAgICAgICBpZiAoIXRoaXMuX19sb2FkZWQgfHwgIXRoaXMucGVyc2lzdGVuY2UpIHtcbiAgICAgICAgICAgIHJldHVybiBsb2dnZXIudW5pbml0aWFsaXplZFdhcm5pbmcoJ3Bvc3Rob2cuaWRlbnRpZnknKVxuICAgICAgICB9XG4gICAgICAgIGlmIChfaXNOdW1iZXIobmV3X2Rpc3RpbmN0X2lkKSkge1xuICAgICAgICAgICAgbmV3X2Rpc3RpbmN0X2lkID0gKG5ld19kaXN0aW5jdF9pZCBhcyBudW1iZXIpLnRvU3RyaW5nKClcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKFxuICAgICAgICAgICAgICAgICdUaGUgZmlyc3QgYXJndW1lbnQgdG8gcG9zdGhvZy5pZGVudGlmeSB3YXMgYSBudW1iZXIsIGJ1dCBpdCBzaG91bGQgYmUgYSBzdHJpbmcuIEl0IGhhcyBiZWVuIGNvbnZlcnRlZCB0byBhIHN0cmluZy4nXG4gICAgICAgICAgICApXG4gICAgICAgIH1cblxuICAgICAgICAvL2lmIHRoZSBuZXdfZGlzdGluY3RfaWQgaGFzIG5vdCBiZWVuIHNldCBpZ25vcmUgdGhlIGlkZW50aWZ5IGV2ZW50XG4gICAgICAgIGlmICghbmV3X2Rpc3RpbmN0X2lkKSB7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ1VuaXF1ZSB1c2VyIGlkIGhhcyBub3QgYmVlbiBzZXQgaW4gcG9zdGhvZy5pZGVudGlmeScpXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc0Rpc3RpbmN0SWRTdHJpbmdMaWtlKG5ld19kaXN0aW5jdF9pZCkpIHtcbiAgICAgICAgICAgIGxvZ2dlci5jcml0aWNhbChcbiAgICAgICAgICAgICAgICBgVGhlIHN0cmluZyBcIiR7bmV3X2Rpc3RpbmN0X2lkfVwiIHdhcyBzZXQgaW4gcG9zdGhvZy5pZGVudGlmeSB3aGljaCBpbmRpY2F0ZXMgYW4gZXJyb3IuIFRoaXMgSUQgc2hvdWxkIGJlIHVuaXF1ZSB0byB0aGUgdXNlciBhbmQgbm90IGEgaGFyZGNvZGVkIHN0cmluZy5gXG4gICAgICAgICAgICApXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHByZXZpb3VzX2Rpc3RpbmN0X2lkID0gdGhpcy5nZXRfZGlzdGluY3RfaWQoKVxuICAgICAgICB0aGlzLnJlZ2lzdGVyKHsgJHVzZXJfaWQ6IG5ld19kaXN0aW5jdF9pZCB9KVxuXG4gICAgICAgIGlmICghdGhpcy5nZXRfcHJvcGVydHkoJyRkZXZpY2VfaWQnKSkge1xuICAgICAgICAgICAgLy8gVGhlIHBlcnNpc3RlZCBkaXN0aW5jdCBpZCBtaWdodCBub3QgYWN0dWFsbHkgYmUgYSBkZXZpY2UgaWQgYXQgYWxsXG4gICAgICAgICAgICAvLyBpdCBtaWdodCBiZSBhIGRpc3RpbmN0IGlkIG9mIHRoZSB1c2VyIGZyb20gYmVmb3JlXG4gICAgICAgICAgICBjb25zdCBkZXZpY2VfaWQgPSBwcmV2aW91c19kaXN0aW5jdF9pZFxuICAgICAgICAgICAgdGhpcy5yZWdpc3Rlcl9vbmNlKFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgJGhhZF9wZXJzaXN0ZWRfZGlzdGluY3RfaWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICRkZXZpY2VfaWQ6IGRldmljZV9pZCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICcnXG4gICAgICAgICAgICApXG4gICAgICAgIH1cblxuICAgICAgICAvLyBpZiB0aGUgcHJldmlvdXMgZGlzdGluY3QgaWQgaGFkIGFuIGFsaWFzIHN0b3JlZCwgdGhlbiB3ZSBjbGVhciBpdFxuICAgICAgICBpZiAobmV3X2Rpc3RpbmN0X2lkICE9PSBwcmV2aW91c19kaXN0aW5jdF9pZCAmJiBuZXdfZGlzdGluY3RfaWQgIT09IHRoaXMuZ2V0X3Byb3BlcnR5KEFMSUFTX0lEX0tFWSkpIHtcbiAgICAgICAgICAgIHRoaXMudW5yZWdpc3RlcihBTElBU19JRF9LRVkpXG4gICAgICAgICAgICB0aGlzLnJlZ2lzdGVyKHsgZGlzdGluY3RfaWQ6IG5ld19kaXN0aW5jdF9pZCB9KVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgaXNLbm93bkFub255bW91cyA9IHRoaXMucGVyc2lzdGVuY2UuZ2V0X3VzZXJfc3RhdGUoKSA9PT0gJ2Fub255bW91cydcblxuICAgICAgICAvLyBzZW5kIGFuICRpZGVudGlmeSBldmVudCBhbnkgdGltZSB0aGUgZGlzdGluY3RfaWQgaXMgY2hhbmdpbmcgYW5kIHRoZSBvbGQgSUQgaXMgYW4gYW5veW1vdXMgSURcbiAgICAgICAgLy8gLSBsb2dpYyBvbiB0aGUgc2VydmVyIHdpbGwgZGV0ZXJtaW5lIHdoZXRoZXIgb3Igbm90IHRvIGRvIGFueXRoaW5nIHdpdGggaXQuXG4gICAgICAgIGlmIChuZXdfZGlzdGluY3RfaWQgIT09IHByZXZpb3VzX2Rpc3RpbmN0X2lkICYmIGlzS25vd25Bbm9ueW1vdXMpIHtcbiAgICAgICAgICAgIHRoaXMucGVyc2lzdGVuY2Uuc2V0X3VzZXJfc3RhdGUoJ2lkZW50aWZpZWQnKVxuXG4gICAgICAgICAgICAvLyBVcGRhdGUgY3VycmVudCB1c2VyIHByb3BlcnRpZXNcbiAgICAgICAgICAgIHRoaXMuc2V0UGVyc29uUHJvcGVydGllc0ZvckZsYWdzKHVzZXJQcm9wZXJ0aWVzVG9TZXQgfHwge30sIGZhbHNlKVxuXG4gICAgICAgICAgICB0aGlzLmNhcHR1cmUoXG4gICAgICAgICAgICAgICAgJyRpZGVudGlmeScsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBkaXN0aW5jdF9pZDogbmV3X2Rpc3RpbmN0X2lkLFxuICAgICAgICAgICAgICAgICAgICAkYW5vbl9kaXN0aW5jdF9pZDogcHJldmlvdXNfZGlzdGluY3RfaWQsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7ICRzZXQ6IHVzZXJQcm9wZXJ0aWVzVG9TZXQgfHwge30sICRzZXRfb25jZTogdXNlclByb3BlcnRpZXNUb1NldE9uY2UgfHwge30gfVxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgLy8gbGV0IHRoZSByZWxvYWQgZmVhdHVyZSBmbGFnIHJlcXVlc3Qga25vdyB0byBzZW5kIHRoaXMgcHJldmlvdXMgZGlzdGluY3QgaWRcbiAgICAgICAgICAgIC8vIGZvciBmbGFnIGNvbnNpc3RlbmN5XG4gICAgICAgICAgICB0aGlzLmZlYXR1cmVGbGFncy5zZXRBbm9ueW1vdXNEaXN0aW5jdElkKHByZXZpb3VzX2Rpc3RpbmN0X2lkKVxuICAgICAgICB9IGVsc2UgaWYgKHVzZXJQcm9wZXJ0aWVzVG9TZXQgfHwgdXNlclByb3BlcnRpZXNUb1NldE9uY2UpIHtcbiAgICAgICAgICAgIC8vIElmIHRoZSBkaXN0aW5jdF9pZCBpcyBub3QgY2hhbmdpbmcsIGJ1dCB3ZSBoYXZlIHVzZXIgcHJvcGVydGllcyB0byBzZXQsIHdlIGNhbiBnbyBmb3IgYSAkc2V0IGV2ZW50XG4gICAgICAgICAgICB0aGlzLnNldFBlcnNvblByb3BlcnRpZXModXNlclByb3BlcnRpZXNUb1NldCwgdXNlclByb3BlcnRpZXNUb1NldE9uY2UpXG4gICAgICAgIH1cblxuICAgICAgICAvLyBSZWxvYWQgYWN0aXZlIGZlYXR1cmUgZmxhZ3MgaWYgdGhlIHVzZXIgaWRlbnRpdHkgY2hhbmdlcy5cbiAgICAgICAgLy8gTm90ZSB3ZSBkb24ndCByZWxvYWQgdGhpcyBvbiBwcm9wZXJ0eSBjaGFuZ2VzIGFzIHRoZXNlIGdldCBwcm9jZXNzZWQgYXN5bmNcbiAgICAgICAgaWYgKG5ld19kaXN0aW5jdF9pZCAhPT0gcHJldmlvdXNfZGlzdGluY3RfaWQpIHtcbiAgICAgICAgICAgIHRoaXMucmVsb2FkRmVhdHVyZUZsYWdzKClcbiAgICAgICAgICAgIC8vIGFsc28gY2xlYXIgYW55IHN0b3JlZCBmbGFnIGNhbGxzXG4gICAgICAgICAgICB0aGlzLnVucmVnaXN0ZXIoRkxBR19DQUxMX1JFUE9SVEVEKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyBwcm9wZXJ0aWVzIGZvciB0aGUgUGVyc29uIGFzc29jaWF0ZWQgd2l0aCB0aGUgY3VycmVudCBkaXN0aW5jdF9pZC5cbiAgICAgKlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFt1c2VyUHJvcGVydGllc1RvU2V0XSBPcHRpb25hbDogQW4gYXNzb2NpYXRpdmUgYXJyYXkgb2YgcHJvcGVydGllcyB0byBzdG9yZSBhYm91dCB0aGUgdXNlclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbdXNlclByb3BlcnRpZXNUb1NldE9uY2VdIE9wdGlvbmFsOiBBbiBhc3NvY2lhdGl2ZSBhcnJheSBvZiBwcm9wZXJ0aWVzIHRvIHN0b3JlIGFib3V0IHRoZSB1c2VyLiBJZiBwcm9wZXJ0eSBpcyBwcmV2aW91c2x5IHNldCwgdGhpcyBkb2VzIG5vdCBvdmVycmlkZSB0aGF0IHZhbHVlLlxuICAgICAqL1xuICAgIHNldFBlcnNvblByb3BlcnRpZXModXNlclByb3BlcnRpZXNUb1NldD86IFByb3BlcnRpZXMsIHVzZXJQcm9wZXJ0aWVzVG9TZXRPbmNlPzogUHJvcGVydGllcyk6IHZvaWQge1xuICAgICAgICBpZiAoIXVzZXJQcm9wZXJ0aWVzVG9TZXQgJiYgIXVzZXJQcm9wZXJ0aWVzVG9TZXRPbmNlKSB7XG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFVwZGF0ZSBjdXJyZW50IHVzZXIgcHJvcGVydGllc1xuICAgICAgICB0aGlzLnNldFBlcnNvblByb3BlcnRpZXNGb3JGbGFncyh1c2VyUHJvcGVydGllc1RvU2V0IHx8IHt9KVxuXG4gICAgICAgIHRoaXMuY2FwdHVyZSgnJHNldCcsIHsgJHNldDogdXNlclByb3BlcnRpZXNUb1NldCB8fCB7fSwgJHNldF9vbmNlOiB1c2VyUHJvcGVydGllc1RvU2V0T25jZSB8fCB7fSB9KVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFscGhhIGZlYXR1cmU6IGRvbid0IHVzZSB1bmxlc3MgeW91IGtub3cgd2hhdCB5b3UncmUgZG9pbmchXG4gICAgICpcbiAgICAgKiBTZXRzIGdyb3VwIGFuYWx5dGljcyBpbmZvcm1hdGlvbiBmb3Igc3Vic2VxdWVudCBldmVudHMgYW5kIHJlbG9hZHMgZmVhdHVyZSBmbGFncy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBncm91cFR5cGUgR3JvdXAgdHlwZSAoZXhhbXBsZTogJ29yZ2FuaXphdGlvbicpXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGdyb3VwS2V5IEdyb3VwIGtleSAoZXhhbXBsZTogJ29yZzo6NScpXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGdyb3VwUHJvcGVydGllc1RvU2V0IE9wdGlvbmFsIHByb3BlcnRpZXMgdG8gc2V0IGZvciBncm91cFxuICAgICAqL1xuICAgIGdyb3VwKGdyb3VwVHlwZTogc3RyaW5nLCBncm91cEtleTogc3RyaW5nLCBncm91cFByb3BlcnRpZXNUb1NldD86IFByb3BlcnRpZXMpOiB2b2lkIHtcbiAgICAgICAgaWYgKCFncm91cFR5cGUgfHwgIWdyb3VwS2V5KSB7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ3Bvc3Rob2cuZ3JvdXAgcmVxdWlyZXMgYSBncm91cCB0eXBlIGFuZCBncm91cCBrZXknKVxuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBleGlzdGluZ0dyb3VwcyA9IHRoaXMuZ2V0R3JvdXBzKClcblxuICAgICAgICAvLyBpZiBncm91cCBrZXkgY2hhbmdlcywgcmVtb3ZlIHN0b3JlZCBncm91cCBwcm9wZXJ0aWVzXG4gICAgICAgIGlmIChleGlzdGluZ0dyb3Vwc1tncm91cFR5cGVdICE9PSBncm91cEtleSkge1xuICAgICAgICAgICAgdGhpcy5yZXNldEdyb3VwUHJvcGVydGllc0ZvckZsYWdzKGdyb3VwVHlwZSlcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucmVnaXN0ZXIoeyAkZ3JvdXBzOiB7IC4uLmV4aXN0aW5nR3JvdXBzLCBbZ3JvdXBUeXBlXTogZ3JvdXBLZXkgfSB9KVxuXG4gICAgICAgIGlmIChncm91cFByb3BlcnRpZXNUb1NldCkge1xuICAgICAgICAgICAgdGhpcy5jYXB0dXJlKCckZ3JvdXBpZGVudGlmeScsIHtcbiAgICAgICAgICAgICAgICAkZ3JvdXBfdHlwZTogZ3JvdXBUeXBlLFxuICAgICAgICAgICAgICAgICRncm91cF9rZXk6IGdyb3VwS2V5LFxuICAgICAgICAgICAgICAgICRncm91cF9zZXQ6IGdyb3VwUHJvcGVydGllc1RvU2V0LFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIHRoaXMuc2V0R3JvdXBQcm9wZXJ0aWVzRm9yRmxhZ3MoeyBbZ3JvdXBUeXBlXTogZ3JvdXBQcm9wZXJ0aWVzVG9TZXQgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIElmIGdyb3VwcyBjaGFuZ2UgYW5kIG5vIHByb3BlcnRpZXMgY2hhbmdlLCByZWxvYWQgZmVhdHVyZSBmbGFncy5cbiAgICAgICAgLy8gVGhlIHByb3BlcnR5IGNoYW5nZSByZWxvYWQgY2FzZSBpcyBoYW5kbGVkIGluIHNldEdyb3VwUHJvcGVydGllc0ZvckZsYWdzLlxuICAgICAgICBpZiAoZXhpc3RpbmdHcm91cHNbZ3JvdXBUeXBlXSAhPT0gZ3JvdXBLZXkgJiYgIWdyb3VwUHJvcGVydGllc1RvU2V0KSB7XG4gICAgICAgICAgICB0aGlzLnJlbG9hZEZlYXR1cmVGbGFncygpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXNldHMgb25seSB0aGUgZ3JvdXAgcHJvcGVydGllcyBvZiB0aGUgdXNlciBjdXJyZW50bHkgbG9nZ2VkIGluLlxuICAgICAqL1xuICAgIHJlc2V0R3JvdXBzKCk6IHZvaWQge1xuICAgICAgICB0aGlzLnJlZ2lzdGVyKHsgJGdyb3Vwczoge30gfSlcbiAgICAgICAgdGhpcy5yZXNldEdyb3VwUHJvcGVydGllc0ZvckZsYWdzKClcblxuICAgICAgICAvLyBJZiBncm91cHMgY2hhbmdlZCwgcmVsb2FkIGZlYXR1cmUgZmxhZ3MuXG4gICAgICAgIHRoaXMucmVsb2FkRmVhdHVyZUZsYWdzKClcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgb3ZlcnJpZGUgcGVyc29uIHByb3BlcnRpZXMgZm9yIGZlYXR1cmUgZmxhZ3MuXG4gICAgICogVGhpcyBpcyB1c2VkIHdoZW4gZGVhbGluZyB3aXRoIG5ldyBwZXJzb25zIC8gd2hlcmUgeW91IGRvbid0IHdhbnQgdG8gd2FpdCBmb3IgaW5nZXN0aW9uXG4gICAgICogdG8gdXBkYXRlIHVzZXIgcHJvcGVydGllcy5cbiAgICAgKi9cbiAgICBzZXRQZXJzb25Qcm9wZXJ0aWVzRm9yRmxhZ3MocHJvcGVydGllczogUHJvcGVydGllcywgcmVsb2FkRmVhdHVyZUZsYWdzID0gdHJ1ZSk6IHZvaWQge1xuICAgICAgICB0aGlzLmZlYXR1cmVGbGFncy5zZXRQZXJzb25Qcm9wZXJ0aWVzRm9yRmxhZ3MocHJvcGVydGllcywgcmVsb2FkRmVhdHVyZUZsYWdzKVxuICAgIH1cblxuICAgIHJlc2V0UGVyc29uUHJvcGVydGllc0ZvckZsYWdzKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmZlYXR1cmVGbGFncy5yZXNldFBlcnNvblByb3BlcnRpZXNGb3JGbGFncygpXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IG92ZXJyaWRlIGdyb3VwIHByb3BlcnRpZXMgZm9yIGZlYXR1cmUgZmxhZ3MuXG4gICAgICogVGhpcyBpcyB1c2VkIHdoZW4gZGVhbGluZyB3aXRoIG5ldyBncm91cHMgLyB3aGVyZSB5b3UgZG9uJ3Qgd2FudCB0byB3YWl0IGZvciBpbmdlc3Rpb25cbiAgICAgKiB0byB1cGRhdGUgcHJvcGVydGllcy5cbiAgICAgKiBUYWtlcyBpbiBhbiBvYmplY3QsIHRoZSBrZXkgb2Ygd2hpY2ggaXMgdGhlIGdyb3VwIHR5cGUuXG4gICAgICogRm9yIGV4YW1wbGU6XG4gICAgICogICAgIHNldEdyb3VwUHJvcGVydGllc0ZvckZsYWdzKHsnb3JnYW5pemF0aW9uJzogeyBuYW1lOiAnQ1laJywgZW1wbG95ZWVzOiAnMTEnIH0gfSlcbiAgICAgKi9cbiAgICBzZXRHcm91cFByb3BlcnRpZXNGb3JGbGFncyhwcm9wZXJ0aWVzOiB7IFt0eXBlOiBzdHJpbmddOiBQcm9wZXJ0aWVzIH0sIHJlbG9hZEZlYXR1cmVGbGFncyA9IHRydWUpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5mZWF0dXJlRmxhZ3Muc2V0R3JvdXBQcm9wZXJ0aWVzRm9yRmxhZ3MocHJvcGVydGllcywgcmVsb2FkRmVhdHVyZUZsYWdzKVxuICAgIH1cblxuICAgIHJlc2V0R3JvdXBQcm9wZXJ0aWVzRm9yRmxhZ3MoZ3JvdXBfdHlwZT86IHN0cmluZyk6IHZvaWQge1xuICAgICAgICB0aGlzLmZlYXR1cmVGbGFncy5yZXNldEdyb3VwUHJvcGVydGllc0ZvckZsYWdzKGdyb3VwX3R5cGUpXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2xlYXJzIHN1cGVyIHByb3BlcnRpZXMgYW5kIGdlbmVyYXRlcyBhIG5ldyByYW5kb20gZGlzdGluY3RfaWQgZm9yIHRoaXMgaW5zdGFuY2UuXG4gICAgICogVXNlZnVsIGZvciBjbGVhcmluZyBkYXRhIHdoZW4gYSB1c2VyIGxvZ3Mgb3V0LlxuICAgICAqL1xuICAgIHJlc2V0KHJlc2V0X2RldmljZV9pZD86IGJvb2xlYW4pOiB2b2lkIHtcbiAgICAgICAgaWYgKCF0aGlzLl9fbG9hZGVkKSB7XG4gICAgICAgICAgICByZXR1cm4gbG9nZ2VyLnVuaW5pdGlhbGl6ZWRXYXJuaW5nKCdwb3N0aG9nLnJlc2V0JylcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkZXZpY2VfaWQgPSB0aGlzLmdldF9wcm9wZXJ0eSgnJGRldmljZV9pZCcpXG4gICAgICAgIHRoaXMucGVyc2lzdGVuY2U/LmNsZWFyKClcbiAgICAgICAgdGhpcy5zZXNzaW9uUGVyc2lzdGVuY2U/LmNsZWFyKClcbiAgICAgICAgdGhpcy5wZXJzaXN0ZW5jZT8uc2V0X3VzZXJfc3RhdGUoJ2Fub255bW91cycpXG4gICAgICAgIHRoaXMuc2Vzc2lvbk1hbmFnZXI/LnJlc2V0U2Vzc2lvbklkKClcbiAgICAgICAgY29uc3QgdXVpZCA9IHRoaXMuY29uZmlnLmdldF9kZXZpY2VfaWQodXVpZHY3KCkpXG4gICAgICAgIHRoaXMucmVnaXN0ZXJfb25jZShcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBkaXN0aW5jdF9pZDogdXVpZCxcbiAgICAgICAgICAgICAgICAkZGV2aWNlX2lkOiByZXNldF9kZXZpY2VfaWQgPyB1dWlkIDogZGV2aWNlX2lkLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICcnXG4gICAgICAgIClcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBjdXJyZW50IGRpc3RpbmN0IGlkIG9mIHRoZSB1c2VyLiBUaGlzIGlzIGVpdGhlciB0aGUgaWQgYXV0b21hdGljYWxseVxuICAgICAqIGdlbmVyYXRlZCBieSB0aGUgbGlicmFyeSBvciB0aGUgaWQgdGhhdCBoYXMgYmVlbiBwYXNzZWQgYnkgYSBjYWxsIHRvIGlkZW50aWZ5KCkuXG4gICAgICpcbiAgICAgKiAjIyMgTm90ZXM6XG4gICAgICpcbiAgICAgKiBnZXRfZGlzdGluY3RfaWQoKSBjYW4gb25seSBiZSBjYWxsZWQgYWZ0ZXIgdGhlIFBvc3RIb2cgbGlicmFyeSBoYXMgZmluaXNoZWQgbG9hZGluZy5cbiAgICAgKiBpbml0KCkgaGFzIGEgbG9hZGVkIGZ1bmN0aW9uIGF2YWlsYWJsZSB0byBoYW5kbGUgdGhpcyBhdXRvbWF0aWNhbGx5LiBGb3IgZXhhbXBsZTpcbiAgICAgKlxuICAgICAqICAgICAvLyBzZXQgZGlzdGluY3RfaWQgYWZ0ZXIgdGhlIHBvc3Rob2cgbGlicmFyeSBoYXMgbG9hZGVkXG4gICAgICogICAgIHBvc3Rob2cuaW5pdCgnWU9VUiBQUk9KRUNUIFRPS0VOJywge1xuICAgICAqICAgICAgICAgbG9hZGVkOiBmdW5jdGlvbihwb3N0aG9nKSB7XG4gICAgICogICAgICAgICAgICAgZGlzdGluY3RfaWQgPSBwb3N0aG9nLmdldF9kaXN0aW5jdF9pZCgpO1xuICAgICAqICAgICAgICAgfVxuICAgICAqICAgICB9KTtcbiAgICAgKi9cbiAgICBnZXRfZGlzdGluY3RfaWQoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0X3Byb3BlcnR5KCdkaXN0aW5jdF9pZCcpXG4gICAgfVxuXG4gICAgZ2V0R3JvdXBzKCk6IFJlY29yZDxzdHJpbmcsIGFueT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRfcHJvcGVydHkoJyRncm91cHMnKSB8fCB7fVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGN1cnJlbnQgc2Vzc2lvbl9pZC5cbiAgICAgKlxuICAgICAqIE5PVEU6IFRoaXMgc2hvdWxkIG9ubHkgYmUgdXNlZCBmb3IgaW5mb3JtYXRpdmUgcHVycG9zZXMuXG4gICAgICogQW55IGFjdHVhbCBpbnRlcm5hbCB1c2UgY2FzZSBmb3IgdGhlIHNlc3Npb25faWQgc2hvdWxkIGJlIGhhbmRsZWQgYnkgdGhlIHNlc3Npb25NYW5hZ2VyLlxuICAgICAqL1xuXG4gICAgZ2V0X3Nlc3Npb25faWQoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2Vzc2lvbk1hbmFnZXI/LmNoZWNrQW5kR2V0U2Vzc2lvbkFuZFdpbmRvd0lkKHRydWUpLnNlc3Npb25JZCA/PyAnJ1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIFJlcGxheSB1cmwgZm9yIHRoZSBjdXJyZW50IHNlc3Npb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBPcHRpb25zIGZvciB0aGUgdXJsXG4gICAgICogQHBhcmFtIG9wdGlvbnMud2l0aFRpbWVzdGFtcCBXaGV0aGVyIHRvIGluY2x1ZGUgdGhlIHRpbWVzdGFtcCBpbiB0aGUgdXJsIChkZWZhdWx0cyB0byBmYWxzZSlcbiAgICAgKiBAcGFyYW0gb3B0aW9ucy50aW1lc3RhbXBMb29rQmFjayBIb3cgbWFueSBzZWNvbmRzIHRvIGxvb2sgYmFjayBmb3IgdGhlIHRpbWVzdGFtcCAoZGVmYXVsdHMgdG8gMTApXG4gICAgICovXG4gICAgZ2V0X3Nlc3Npb25fcmVwbGF5X3VybChvcHRpb25zPzogeyB3aXRoVGltZXN0YW1wPzogYm9vbGVhbjsgdGltZXN0YW1wTG9va0JhY2s/OiBudW1iZXIgfSk6IHN0cmluZyB7XG4gICAgICAgIGlmICghdGhpcy5zZXNzaW9uTWFuYWdlcikge1xuICAgICAgICAgICAgcmV0dXJuICcnXG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgeyBzZXNzaW9uSWQsIHNlc3Npb25TdGFydFRpbWVzdGFtcCB9ID0gdGhpcy5zZXNzaW9uTWFuYWdlci5jaGVja0FuZEdldFNlc3Npb25BbmRXaW5kb3dJZCh0cnVlKVxuICAgICAgICBsZXQgdXJsID0gdGhpcy5yZXF1ZXN0Um91dGVyLmVuZHBvaW50Rm9yKCd1aScsICcvcmVwbGF5LycgKyBzZXNzaW9uSWQpXG4gICAgICAgIGlmIChvcHRpb25zPy53aXRoVGltZXN0YW1wICYmIHNlc3Npb25TdGFydFRpbWVzdGFtcCkge1xuICAgICAgICAgICAgY29uc3QgTE9PS19CQUNLID0gb3B0aW9ucy50aW1lc3RhbXBMb29rQmFjayA/PyAxMFxuICAgICAgICAgICAgaWYgKCFzZXNzaW9uU3RhcnRUaW1lc3RhbXApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdXJsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZWNvcmRpbmdTdGFydFRpbWUgPSBNYXRoLm1heChcbiAgICAgICAgICAgICAgICBNYXRoLmZsb29yKChuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIHNlc3Npb25TdGFydFRpbWVzdGFtcCkgLyAxMDAwKSAtIExPT0tfQkFDSyxcbiAgICAgICAgICAgICAgICAwXG4gICAgICAgICAgICApXG4gICAgICAgICAgICB1cmwgKz0gYD90PSR7cmVjb3JkaW5nU3RhcnRUaW1lfWBcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB1cmxcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYW4gYWxpYXMsIHdoaWNoIFBvc3RIb2cgd2lsbCB1c2UgdG8gbGluayB0d28gZGlzdGluY3RfaWRzIGdvaW5nIGZvcndhcmQgKG5vdCByZXRyb2FjdGl2ZWx5KS5cbiAgICAgKiBNdWx0aXBsZSBhbGlhc2VzIGNhbiBtYXAgdG8gdGhlIHNhbWUgb3JpZ2luYWwgSUQsIGJ1dCBub3QgdmljZS12ZXJzYS4gQWxpYXNlcyBjYW4gYWxzbyBiZSBjaGFpbmVkIC0gdGhlXG4gICAgICogZm9sbG93aW5nIGlzIGEgdmFsaWQgc2NlbmFyaW86XG4gICAgICpcbiAgICAgKiAgICAgcG9zdGhvZy5hbGlhcygnbmV3X2lkJywgJ2V4aXN0aW5nX2lkJyk7XG4gICAgICogICAgIC4uLlxuICAgICAqICAgICBwb3N0aG9nLmFsaWFzKCduZXdlcl9pZCcsICduZXdfaWQnKTtcbiAgICAgKlxuICAgICAqIElmIHRoZSBvcmlnaW5hbCBJRCBpcyBub3QgcGFzc2VkIGluLCB3ZSB3aWxsIHVzZSB0aGUgY3VycmVudCBkaXN0aW5jdF9pZCAtIHByb2JhYmx5IHRoZSBhdXRvLWdlbmVyYXRlZCBHVUlELlxuICAgICAqXG4gICAgICogIyMjIE5vdGVzOlxuICAgICAqXG4gICAgICogVGhlIGJlc3QgcHJhY3RpY2UgaXMgdG8gY2FsbCBhbGlhcygpIHdoZW4gYSB1bmlxdWUgSUQgaXMgZmlyc3QgY3JlYXRlZCBmb3IgYSB1c2VyXG4gICAgICogKGUuZy4sIHdoZW4gYSB1c2VyIGZpcnN0IHJlZ2lzdGVycyBmb3IgYW4gYWNjb3VudCBhbmQgcHJvdmlkZXMgYW4gZW1haWwgYWRkcmVzcykuXG4gICAgICogYWxpYXMoKSBzaG91bGQgbmV2ZXIgYmUgY2FsbGVkIG1vcmUgdGhhbiBvbmNlIGZvciBhIGdpdmVuIHVzZXIsIGV4Y2VwdCB0b1xuICAgICAqIGNoYWluIGEgbmV3ZXIgSUQgdG8gYSBwcmV2aW91c2x5IG5ldyBJRCwgYXMgZGVzY3JpYmVkIGFib3ZlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGFsaWFzIEEgdW5pcXVlIGlkZW50aWZpZXIgdGhhdCB5b3Ugd2FudCB0byB1c2UgZm9yIHRoaXMgdXNlciBpbiB0aGUgZnV0dXJlLlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBbb3JpZ2luYWxdIFRoZSBjdXJyZW50IGlkZW50aWZpZXIgYmVpbmcgdXNlZCBmb3IgdGhpcyB1c2VyLlxuICAgICAqL1xuICAgIGFsaWFzKGFsaWFzOiBzdHJpbmcsIG9yaWdpbmFsPzogc3RyaW5nKTogQ2FwdHVyZVJlc3VsdCB8IHZvaWQgfCBudW1iZXIge1xuICAgICAgICAvLyBJZiB0aGUgJHBlb3BsZV9kaXN0aW5jdF9pZCBrZXkgZXhpc3RzIGluIHBlcnNpc3RlbmNlLCB0aGVyZSBoYXMgYmVlbiBhIHByZXZpb3VzXG4gICAgICAgIC8vIHBvc3Rob2cucGVvcGxlLmlkZW50aWZ5KCkgY2FsbCBtYWRlIGZvciB0aGlzIHVzZXIuIEl0IGlzIFZFUlkgQkFEIHRvIG1ha2UgYW4gYWxpYXMgd2l0aFxuICAgICAgICAvLyB0aGlzIElELCBhcyBpdCB3aWxsIGR1cGxpY2F0ZSB1c2Vycy5cbiAgICAgICAgaWYgKGFsaWFzID09PSB0aGlzLmdldF9wcm9wZXJ0eShQRU9QTEVfRElTVElOQ1RfSURfS0VZKSkge1xuICAgICAgICAgICAgbG9nZ2VyLmNyaXRpY2FsKCdBdHRlbXB0aW5nIHRvIGNyZWF0ZSBhbGlhcyBmb3IgZXhpc3RpbmcgUGVvcGxlIHVzZXIgLSBhYm9ydGluZy4nKVxuICAgICAgICAgICAgcmV0dXJuIC0yXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoX2lzVW5kZWZpbmVkKG9yaWdpbmFsKSkge1xuICAgICAgICAgICAgb3JpZ2luYWwgPSB0aGlzLmdldF9kaXN0aW5jdF9pZCgpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFsaWFzICE9PSBvcmlnaW5hbCkge1xuICAgICAgICAgICAgdGhpcy5fcmVnaXN0ZXJfc2luZ2xlKEFMSUFTX0lEX0tFWSwgYWxpYXMpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jYXB0dXJlKCckY3JlYXRlX2FsaWFzJywgeyBhbGlhczogYWxpYXMsIGRpc3RpbmN0X2lkOiBvcmlnaW5hbCB9KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ2FsaWFzIG1hdGNoZXMgY3VycmVudCBkaXN0aW5jdF9pZCAtIHNraXBwaW5nIGFwaSBjYWxsLicpXG4gICAgICAgICAgICB0aGlzLmlkZW50aWZ5KGFsaWFzKVxuICAgICAgICAgICAgcmV0dXJuIC0xXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgdGhlIGNvbmZpZ3VyYXRpb24gb2YgYSBwb3N0aG9nIGxpYnJhcnkgaW5zdGFuY2UuXG4gICAgICpcbiAgICAgKiBUaGUgZGVmYXVsdCBjb25maWcgaXM6XG4gICAgICpcbiAgICAgKiAgICAge1xuICAgICAqICAgICAgIC8vIFBvc3RIb2cgQVBJIGhvc3RcbiAgICAgKiAgICAgICBhcGlfaG9zdDogJ2h0dHBzOi8vYXBwLnBvc3Rob2cuY29tJyxcbiAgICAgKiAgICAgKlxuICAgICAqICAgICAgIC8vIFBvc3RIb2cgd2ViIGFwcCBob3N0LCBjdXJyZW50bHkgb25seSB1c2VkIGJ5IHRoZSBTZW50cnkgaW50ZWdyYXRpb24uXG4gICAgICogICAgICAgLy8gVGhpcyB3aWxsIG9ubHkgYmUgZGlmZmVyZW50IGZyb20gYXBpX2hvc3Qgd2hlbiB1c2luZyBhIHJldmVyc2UtcHJveGllZCBBUEkgaG9zdCBcdTIwMTMgaW4gdGhhdCBjYXNlXG4gICAgICogICAgICAgLy8gdGhlIG9yaWdpbmFsIHdlYiBhcHAgaG9zdCBuZWVkcyB0byBiZSBwYXNzZWQgaGVyZSBzbyB0aGF0IGxpbmtzIHRvIHRoZSB3ZWIgYXBwIGFyZSBzdGlsbCBjb252ZW5pZW50LlxuICAgICAqICAgICAgIHVpX2hvc3Q6ICdodHRwczovL2FwcC5wb3N0aG9nLmNvbScsXG4gICAgICpcbiAgICAgKiAgICAgICAvLyBBdXRvbWF0aWNhbGx5IGNhcHR1cmUgY2xpY2tzLCBmb3JtIHN1Ym1pc3Npb25zIGFuZCBjaGFuZ2UgZXZlbnRzXG4gICAgICogICAgICAgYXV0b2NhcHR1cmU6IHRydWVcbiAgICAgKlxuICAgICAqICAgICAgIC8vIENhcHR1cmUgcmFnZSBjbGlja3NcbiAgICAgKiAgICAgICByYWdlY2xpY2s6IHRydWVcbiAgICAgKlxuICAgICAqICAgICAgIC8vIHRyYW5zcG9ydCBmb3Igc2VuZGluZyByZXF1ZXN0cyAoJ1hIUicgb3IgJ3NlbmRCZWFjb24nKVxuICAgICAqICAgICAgIC8vIE5COiBzZW5kQmVhY29uIHNob3VsZCBvbmx5IGJlIHVzZWQgZm9yIHNjZW5hcmlvcyBzdWNoIGFzXG4gICAgICogICAgICAgLy8gcGFnZSB1bmxvYWQgd2hlcmUgYSBcImJlc3QtZWZmb3J0XCIgYXR0ZW1wdCB0byBzZW5kIGlzXG4gICAgICogICAgICAgLy8gYWNjZXB0YWJsZTsgdGhlIHNlbmRCZWFjb24gQVBJIGRvZXMgbm90IHN1cHBvcnQgY2FsbGJhY2tzXG4gICAgICogICAgICAgLy8gb3IgYW55IHdheSB0byBrbm93IHRoZSByZXN1bHQgb2YgdGhlIHJlcXVlc3QuIFBvc3RIb2dcbiAgICAgKiAgICAgICAvLyBjYXB0dXJpbmcgdmlhIHNlbmRCZWFjb24gd2lsbCBub3Qgc3VwcG9ydCBhbnkgZXZlbnQtXG4gICAgICogICAgICAgLy8gYmF0Y2hpbmcgb3IgcmV0cnkgbWVjaGFuaXNtcy5cbiAgICAgKiAgICAgICBhcGlfdHJhbnNwb3J0OiAnWEhSJ1xuICAgICAqXG4gICAgICogICAgICAgLy8gc3VwZXIgcHJvcGVydGllcyBjb29raWUgZXhwaXJhdGlvbiAoaW4gZGF5cylcbiAgICAgKiAgICAgICBjb29raWVfZXhwaXJhdGlvbjogMzY1XG4gICAgICpcbiAgICAgKiAgICAgICAvLyBzdXBlciBwcm9wZXJ0aWVzIHNwYW4gc3ViZG9tYWluc1xuICAgICAqICAgICAgIGNyb3NzX3N1YmRvbWFpbl9jb29raWU6IHRydWVcbiAgICAgKlxuICAgICAqICAgICAgIC8vIGRlYnVnIG1vZGVcbiAgICAgKiAgICAgICBkZWJ1ZzogZmFsc2VcbiAgICAgKlxuICAgICAqICAgICAgIC8vIGlmIHRoaXMgaXMgdHJ1ZSwgdGhlIHBvc3Rob2cgY29va2llIG9yIGxvY2FsU3RvcmFnZSBlbnRyeVxuICAgICAqICAgICAgIC8vIHdpbGwgYmUgZGVsZXRlZCwgYW5kIG5vIHVzZXIgcGVyc2lzdGVuY2Ugd2lsbCB0YWtlIHBsYWNlXG4gICAgICogICAgICAgZGlzYWJsZV9wZXJzaXN0ZW5jZTogZmFsc2VcbiAgICAgKlxuICAgICAqICAgICAgIC8vIGlmIHRoaXMgaXMgdHJ1ZSwgUG9zdEhvZyB3aWxsIGF1dG9tYXRpY2FsbHkgZGV0ZXJtaW5lXG4gICAgICogICAgICAgLy8gQ2l0eSwgUmVnaW9uIGFuZCBDb3VudHJ5IGRhdGEgdXNpbmcgdGhlIElQIGFkZHJlc3Mgb2ZcbiAgICAgKiAgICAgICAvL3RoZSBjbGllbnRcbiAgICAgKiAgICAgICBpcDogdHJ1ZVxuICAgICAqXG4gICAgICogICAgICAgLy8gb3B0IHVzZXJzIG91dCBvZiBjYXB0dXJpbmcgYnkgdGhpcyBQb3N0SG9nIGluc3RhbmNlIGJ5IGRlZmF1bHRcbiAgICAgKiAgICAgICBvcHRfb3V0X2NhcHR1cmluZ19ieV9kZWZhdWx0OiBmYWxzZVxuICAgICAqXG4gICAgICogICAgICAgLy8gb3B0IHVzZXJzIG91dCBvZiBicm93c2VyIGRhdGEgc3RvcmFnZSBieSB0aGlzIFBvc3RIb2cgaW5zdGFuY2UgYnkgZGVmYXVsdFxuICAgICAqICAgICAgIG9wdF9vdXRfcGVyc2lzdGVuY2VfYnlfZGVmYXVsdDogZmFsc2VcbiAgICAgKlxuICAgICAqICAgICAgIC8vIG9wdCBvdXQgb2YgdXNlciBhZ2VudCBmaWx0ZXJpbmcgc3VjaCBhcyBnb29nbGVib3Qgb3Igb3RoZXIgYm90c1xuICAgICAqICAgICAgIG9wdF9vdXRfdXNlcmFnZW50X2ZpbHRlcjogZmFsc2VcbiAgICAgKlxuICAgICAqICAgICAgIC8vIHBlcnNpc3RlbmNlIG1lY2hhbmlzbSB1c2VkIGJ5IG9wdC1pbi9vcHQtb3V0IG1ldGhvZHMgLSBjb29raWVcbiAgICAgKiAgICAgICAvLyBvciBsb2NhbFN0b3JhZ2UgLSBmYWxscyBiYWNrIHRvIGNvb2tpZSBpZiBsb2NhbFN0b3JhZ2UgaXMgdW5hdmFpbGFibGVcbiAgICAgKiAgICAgICBvcHRfb3V0X2NhcHR1cmluZ19wZXJzaXN0ZW5jZV90eXBlOiAnbG9jYWxTdG9yYWdlJ1xuICAgICAqXG4gICAgICogICAgICAgLy8gY3VzdG9taXplIHRoZSBuYW1lIG9mIGNvb2tpZS9sb2NhbFN0b3JhZ2Ugc2V0IGJ5IG9wdC1pbi9vcHQtb3V0IG1ldGhvZHNcbiAgICAgKiAgICAgICBvcHRfb3V0X2NhcHR1cmluZ19jb29raWVfcHJlZml4OiBudWxsXG4gICAgICpcbiAgICAgKiAgICAgICAvLyB0eXBlIG9mIHBlcnNpc3RlbnQgc3RvcmUgZm9yIHN1cGVyIHByb3BlcnRpZXMgKGNvb2tpZS9cbiAgICAgKiAgICAgICAvLyBsb2NhbFN0b3JhZ2UpIGlmIHNldCB0byAnbG9jYWxTdG9yYWdlJywgYW55IGV4aXN0aW5nXG4gICAgICogICAgICAgLy8gcG9zdGhvZyBjb29raWUgdmFsdWUgd2l0aCB0aGUgc2FtZSBwZXJzaXN0ZW5jZV9uYW1lXG4gICAgICogICAgICAgLy8gd2lsbCBiZSB0cmFuc2ZlcnJlZCB0byBsb2NhbFN0b3JhZ2UgYW5kIGRlbGV0ZWRcbiAgICAgKiAgICAgICBwZXJzaXN0ZW5jZTogJ2Nvb2tpZSdcbiAgICAgKlxuICAgICAqICAgICAgIC8vIG5hbWUgZm9yIHN1cGVyIHByb3BlcnRpZXMgcGVyc2lzdGVudCBzdG9yZVxuICAgICAqICAgICAgIHBlcnNpc3RlbmNlX25hbWU6ICcnXG4gICAgICpcbiAgICAgKiAgICAgICAvLyBkZXByZWNhdGVkLCB1c2UgcHJvcGVydHlfZGVueWxpc3QgaW5zdGVhZC5cbiAgICAgKiAgICAgICAvLyBuYW1lcyBvZiBwcm9wZXJ0aWVzL3N1cGVycHJvcGVydGllcyB3aGljaCBzaG91bGQgbmV2ZXJcbiAgICAgKiAgICAgICAvLyBiZSBzZW50IHdpdGggY2FwdHVyZSgpIGNhbGxzLlxuICAgICAqICAgICAgIHByb3BlcnR5X2JsYWNrbGlzdDogW11cbiAgICAgKlxuICAgICAqICAgICAgIC8vIG5hbWVzIG9mIHByb3BlcnRpZXMvc3VwZXJwcm9wZXJ0aWVzIHdoaWNoIHNob3VsZCBuZXZlclxuICAgICAqICAgICAgIC8vIGJlIHNlbnQgd2l0aCBjYXB0dXJlKCkgY2FsbHMuXG4gICAgICogICAgICAgcHJvcGVydHlfZGVueWxpc3Q6IFtdXG4gICAgICpcbiAgICAgKiAgICAgICAvLyBpZiB0aGlzIGlzIHRydWUsIHBvc3Rob2cgY29va2llcyB3aWxsIGJlIG1hcmtlZCBhc1xuICAgICAqICAgICAgIC8vIHNlY3VyZSwgbWVhbmluZyB0aGV5IHdpbGwgb25seSBiZSB0cmFuc21pdHRlZCBvdmVyIGh0dHBzXG4gICAgICogICAgICAgc2VjdXJlX2Nvb2tpZTogZmFsc2VcbiAgICAgKlxuICAgICAqICAgICAgIC8vIHNob3VsZCB3ZSBjYXB0dXJlIGEgcGFnZSB2aWV3IG9uIHBhZ2UgbG9hZFxuICAgICAqICAgICAgIGNhcHR1cmVfcGFnZXZpZXc6IHRydWVcbiAgICAgKlxuICAgICAqICAgICAgIC8vIGlmIHlvdSBzZXQgdXBncmFkZSB0byBiZSB0cnVlLCB0aGUgbGlicmFyeSB3aWxsIGNoZWNrIGZvclxuICAgICAqICAgICAgIC8vIGEgY29va2llIGZyb20gb3VyIG9sZCBqcyBsaWJyYXJ5IGFuZCBpbXBvcnQgc3VwZXJcbiAgICAgKiAgICAgICAvLyBwcm9wZXJ0aWVzIGZyb20gaXQsIHRoZW4gdGhlIG9sZCBjb29raWUgaXMgZGVsZXRlZFxuICAgICAqICAgICAgIC8vIFRoZSB1cGdyYWRlIGNvbmZpZyBvcHRpb24gb25seSB3b3JrcyBpbiB0aGUgaW5pdGlhbGl6YXRpb24sXG4gICAgICogICAgICAgLy8gc28gbWFrZSBzdXJlIHlvdSBzZXQgaXQgd2hlbiB5b3UgY3JlYXRlIHRoZSBsaWJyYXJ5LlxuICAgICAqICAgICAgIHVwZ3JhZGU6IGZhbHNlXG4gICAgICpcbiAgICAgKiAgICAgICAvLyBpZiB0aGlzIGlzIHRydWUsIHNlc3Npb24gcmVjb3JkaW5nIGlzIGFsd2F5cyBkaXNhYmxlZC5cbiAgICAgKiAgICAgICBkaXNhYmxlX3Nlc3Npb25fcmVjb3JkaW5nOiBmYWxzZSxcbiAgICAgKlxuICAgICAqICAgICAgIC8vIGV4dHJhIEhUVFAgcmVxdWVzdCBoZWFkZXJzIHRvIHNldCBmb3IgZWFjaCBBUEkgcmVxdWVzdCwgaW5cbiAgICAgKiAgICAgICAvLyB0aGUgZm9ybWF0IHsnSGVhZGVyLU5hbWUnOiB2YWx1ZX1cbiAgICAgKiAgICAgICByZXNwb25zZV9oZWFkZXJzOiB7fVxuICAgICAqXG4gICAgICogICAgICAgLy8gcHJvdG9jb2wgZm9yIGZldGNoaW5nIGluLWFwcCBtZXNzYWdlIHJlc291cmNlcywgZS5nLlxuICAgICAqICAgICAgIC8vICdodHRwczovLycgb3IgJ2h0dHA6Ly8nOyBkZWZhdWx0cyB0byAnLy8nICh3aGljaCBkZWZlcnMgdG8gdGhlXG4gICAgICogICAgICAgLy8gY3VycmVudCBwYWdlJ3MgcHJvdG9jb2wpXG4gICAgICogICAgICAgaW5hcHBfcHJvdG9jb2w6ICcvLydcbiAgICAgKlxuICAgICAqICAgICAgIC8vIHdoZXRoZXIgdG8gb3BlbiBpbi1hcHAgbWVzc2FnZSBsaW5rIGluIG5ldyB0YWIvd2luZG93XG4gICAgICogICAgICAgaW5hcHBfbGlua19uZXdfd2luZG93OiBmYWxzZVxuICAgICAqXG4gICAgICogICAgICAvLyBhIHNldCBvZiBycndlYiBjb25maWcgb3B0aW9ucyB0aGF0IFBvc3RIb2cgdXNlcnMgY2FuIGNvbmZpZ3VyZVxuICAgICAqICAgICAgLy8gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ycndlYi1pby9ycndlYi9ibG9iL21hc3Rlci9ndWlkZS5tZFxuICAgICAqICAgICAgc2Vzc2lvbl9yZWNvcmRpbmc6IHtcbiAgICAgKiAgICAgICAgIGJsb2NrQ2xhc3M6ICdwaC1uby1jYXB0dXJlJyxcbiAgICAgKiAgICAgICAgIGJsb2NrU2VsZWN0b3I6IG51bGwsXG4gICAgICogICAgICAgICBpZ25vcmVDbGFzczogJ3BoLWlnbm9yZS1pbnB1dCcsXG4gICAgICogICAgICAgICBtYXNrQWxsSW5wdXRzOiB0cnVlLFxuICAgICAqICAgICAgICAgbWFza0lucHV0T3B0aW9uczoge30sXG4gICAgICogICAgICAgICBtYXNrSW5wdXRGbjogbnVsbCxcbiAgICAgKiAgICAgICAgIHNsaW1ET01PcHRpb25zOiB7fSxcbiAgICAgKiAgICAgICAgIGNvbGxlY3RGb250czogZmFsc2VcbiAgICAgKiAgICAgIH1cbiAgICAgKlxuICAgICAqICAgICAgLy8gcHJldmVudCBhdXRvY2FwdHVyZSBmcm9tIGNhcHR1cmluZyBhbnkgYXR0cmlidXRlIG5hbWVzIG9uIGVsZW1lbnRzXG4gICAgICogICAgICBtYXNrX2FsbF9lbGVtZW50X2F0dHJpYnV0ZXM6IGZhbHNlXG4gICAgICpcbiAgICAgKiAgICAgIC8vIHByZXZlbnQgYXV0b2NhcHR1cmUgZnJvbSBjYXB0dXJpbmcgdGV4dENvbnRlbnQgb24gYWxsIGVsZW1lbnRzXG4gICAgICogICAgICBtYXNrX2FsbF90ZXh0OiBmYWxzZVxuICAgICAqXG4gICAgICogICAgICAvLyBBbm9ueW1vdXMgdXNlcnMgZ2V0IGEgcmFuZG9tIFVVSUQgYXMgdGhlaXIgZGV2aWNlIGJ5IGRlZmF1bHQuXG4gICAgICogICAgICAvLyBUaGlzIG9wdGlvbiBhbGxvd3Mgb3ZlcnJpZGluZyB0aGF0IG9wdGlvbi5cbiAgICAgKiAgICAgIGdldF9kZXZpY2VfaWQ6ICh1dWlkKSA9PiB1dWlkXG4gICAgICogICAgIH1cbiAgICAgKlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZyBBIGRpY3Rpb25hcnkgb2YgbmV3IGNvbmZpZ3VyYXRpb24gdmFsdWVzIHRvIHVwZGF0ZVxuICAgICAqL1xuXG4gICAgc2V0X2NvbmZpZyhjb25maWc6IFBhcnRpYWw8UG9zdEhvZ0NvbmZpZz4pOiB2b2lkIHtcbiAgICAgICAgY29uc3Qgb2xkQ29uZmlnID0geyAuLi50aGlzLmNvbmZpZyB9XG4gICAgICAgIGlmIChfaXNPYmplY3QoY29uZmlnKSkge1xuICAgICAgICAgICAgX2V4dGVuZCh0aGlzLmNvbmZpZywgY29uZmlnKVxuXG4gICAgICAgICAgICBpZiAoIXRoaXMuY29uZmlnLnBlcnNpc3RlbmNlX25hbWUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5wZXJzaXN0ZW5jZV9uYW1lID0gdGhpcy5jb25maWcuY29va2llX25hbWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGhpcy5jb25maWcuZGlzYWJsZV9wZXJzaXN0ZW5jZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLmRpc2FibGVfcGVyc2lzdGVuY2UgPSB0aGlzLmNvbmZpZy5kaXNhYmxlX2Nvb2tpZVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLnBlcnNpc3RlbmNlPy51cGRhdGVfY29uZmlnKHRoaXMuY29uZmlnLCBvbGRDb25maWcpXG4gICAgICAgICAgICB0aGlzLnNlc3Npb25QZXJzaXN0ZW5jZSA9XG4gICAgICAgICAgICAgICAgdGhpcy5jb25maWcucGVyc2lzdGVuY2UgPT09ICdzZXNzaW9uU3RvcmFnZSdcbiAgICAgICAgICAgICAgICAgICAgPyB0aGlzLnBlcnNpc3RlbmNlXG4gICAgICAgICAgICAgICAgICAgIDogbmV3IFBvc3RIb2dQZXJzaXN0ZW5jZSh7IC4uLnRoaXMuY29uZmlnLCBwZXJzaXN0ZW5jZTogJ3Nlc3Npb25TdG9yYWdlJyB9KVxuXG4gICAgICAgICAgICBpZiAobG9jYWxTdG9yZS5pc19zdXBwb3J0ZWQoKSAmJiBsb2NhbFN0b3JlLmdldCgncGhfZGVidWcnKSA9PT0gJ3RydWUnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb25maWcuZGVidWcgPSB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWcuZGVidWcpIHtcbiAgICAgICAgICAgICAgICBDb25maWcuREVCVUcgPSB0cnVlXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0aGlzLnNlc3Npb25SZWNvcmRpbmcgJiYgIV9pc1VuZGVmaW5lZChjb25maWcuZGlzYWJsZV9zZXNzaW9uX3JlY29yZGluZykpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkaXNhYmxlX3Nlc3Npb25fcmVjb3JkaW5nX2hhc19jaGFuZ2VkID1cbiAgICAgICAgICAgICAgICAgICAgb2xkQ29uZmlnLmRpc2FibGVfc2Vzc2lvbl9yZWNvcmRpbmcgIT09IGNvbmZpZy5kaXNhYmxlX3Nlc3Npb25fcmVjb3JkaW5nXG4gICAgICAgICAgICAgICAgLy8gaWYgb3B0aW5nIGJhY2sgaW4sIHRoaXMgY29uZmlnIG1pZ2h0IG5vdCBoYXZlIGNoYW5nZWRcbiAgICAgICAgICAgICAgICBjb25zdCB0cnlfZW5hYmxlX2FmdGVyX29wdF9pbiA9XG4gICAgICAgICAgICAgICAgICAgICF1c2VyT3B0ZWRPdXQodGhpcykgJiYgIWNvbmZpZy5kaXNhYmxlX3Nlc3Npb25fcmVjb3JkaW5nICYmICF0aGlzLnNlc3Npb25SZWNvcmRpbmcuc3RhcnRlZFxuXG4gICAgICAgICAgICAgICAgaWYgKGRpc2FibGVfc2Vzc2lvbl9yZWNvcmRpbmdfaGFzX2NoYW5nZWQgfHwgdHJ5X2VuYWJsZV9hZnRlcl9vcHRfaW4pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpZy5kaXNhYmxlX3Nlc3Npb25fcmVjb3JkaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlc3Npb25SZWNvcmRpbmcuc3RvcFJlY29yZGluZygpXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlc3Npb25SZWNvcmRpbmcuc3RhcnRSZWNvcmRpbmdJZkVuYWJsZWQoKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogdHVybnMgc2Vzc2lvbiByZWNvcmRpbmcgb24sIGFuZCB1cGRhdGVzIHRoZSBjb25maWcgb3B0aW9uXG4gICAgICogZGlzYWJsZV9zZXNzaW9uX3JlY29yZGluZyB0byBmYWxzZVxuICAgICAqL1xuICAgIHN0YXJ0U2Vzc2lvblJlY29yZGluZygpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5zZXRfY29uZmlnKHsgZGlzYWJsZV9zZXNzaW9uX3JlY29yZGluZzogZmFsc2UgfSlcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiB0dXJucyBzZXNzaW9uIHJlY29yZGluZyBvZmYsIGFuZCB1cGRhdGVzIHRoZSBjb25maWcgb3B0aW9uXG4gICAgICogZGlzYWJsZV9zZXNzaW9uX3JlY29yZGluZyB0byB0cnVlXG4gICAgICovXG4gICAgc3RvcFNlc3Npb25SZWNvcmRpbmcoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuc2V0X2NvbmZpZyh7IGRpc2FibGVfc2Vzc2lvbl9yZWNvcmRpbmc6IHRydWUgfSlcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiByZXR1cm5zIGEgYm9vbGVhbiBpbmRpY2F0aW5nIHdoZXRoZXIgc2Vzc2lvbiByZWNvcmRpbmdcbiAgICAgKiBpcyBjdXJyZW50bHkgcnVubmluZ1xuICAgICAqL1xuICAgIHNlc3Npb25SZWNvcmRpbmdTdGFydGVkKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gISF0aGlzLnNlc3Npb25SZWNvcmRpbmc/LnN0YXJ0ZWRcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiByZXR1cm5zIGEgYm9vbGVhbiBpbmRpY2F0aW5nIHdoZXRoZXIgdGhlIHRvb2xiYXIgbG9hZGVkXG4gICAgICogQHBhcmFtIHRvb2xiYXJQYXJhbXNcbiAgICAgKi9cblxuICAgIGxvYWRUb29sYmFyKHBhcmFtczogVG9vbGJhclBhcmFtcyk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy50b29sYmFyLmxvYWRUb29sYmFyKHBhcmFtcylcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSB2YWx1ZSBvZiB0aGUgc3VwZXIgcHJvcGVydHkgbmFtZWQgcHJvcGVydHlfbmFtZS4gSWYgbm8gc3VjaFxuICAgICAqIHByb3BlcnR5IGlzIHNldCwgZ2V0X3Byb3BlcnR5KCkgd2lsbCByZXR1cm4gdGhlIHVuZGVmaW5lZCB2YWx1ZS5cbiAgICAgKlxuICAgICAqICMjIyBOb3RlczpcbiAgICAgKlxuICAgICAqIGdldF9wcm9wZXJ0eSgpIGNhbiBvbmx5IGJlIGNhbGxlZCBhZnRlciB0aGUgUG9zdEhvZyBsaWJyYXJ5IGhhcyBmaW5pc2hlZCBsb2FkaW5nLlxuICAgICAqIGluaXQoKSBoYXMgYSBsb2FkZWQgZnVuY3Rpb24gYXZhaWxhYmxlIHRvIGhhbmRsZSB0aGlzIGF1dG9tYXRpY2FsbHkuIEZvciBleGFtcGxlOlxuICAgICAqXG4gICAgICogICAgIC8vIGdyYWIgdmFsdWUgZm9yICckdXNlcl9pZCcgYWZ0ZXIgdGhlIHBvc3Rob2cgbGlicmFyeSBoYXMgbG9hZGVkXG4gICAgICogICAgIHBvc3Rob2cuaW5pdCgnWU9VUiBQUk9KRUNUIFRPS0VOJywge1xuICAgICAqICAgICAgICAgbG9hZGVkOiBmdW5jdGlvbihwb3N0aG9nKSB7XG4gICAgICogICAgICAgICAgICAgdXNlcl9pZCA9IHBvc3Rob2cuZ2V0X3Byb3BlcnR5KCckdXNlcl9pZCcpO1xuICAgICAqICAgICAgICAgfVxuICAgICAqICAgICB9KTtcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0eV9uYW1lIFRoZSBuYW1lIG9mIHRoZSBzdXBlciBwcm9wZXJ0eSB5b3Ugd2FudCB0byByZXRyaWV2ZVxuICAgICAqL1xuICAgIGdldF9wcm9wZXJ0eShwcm9wZXJ0eV9uYW1lOiBzdHJpbmcpOiBQcm9wZXJ0eSB8IHVuZGVmaW5lZCB7XG4gICAgICAgIHJldHVybiB0aGlzLnBlcnNpc3RlbmNlPy5wcm9wc1twcm9wZXJ0eV9uYW1lXVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHZhbHVlIG9mIHRoZSBzZXNzaW9uIHN1cGVyIHByb3BlcnR5IG5hbWVkIHByb3BlcnR5X25hbWUuIElmIG5vIHN1Y2hcbiAgICAgKiBwcm9wZXJ0eSBpcyBzZXQsIGdldFNlc3Npb25Qcm9wZXJ0eSgpIHdpbGwgcmV0dXJuIHRoZSB1bmRlZmluZWQgdmFsdWUuXG4gICAgICpcbiAgICAgKiAjIyMgTm90ZXM6XG4gICAgICpcbiAgICAgKiBUaGlzIGlzIGJhc2VkIG9uIGJyb3dzZXItbGV2ZWwgYHNlc3Npb25TdG9yYWdlYCwgTk9UIHRoZSBQb3N0SG9nIHNlc3Npb24uXG4gICAgICogZ2V0U2Vzc2lvblByb3BlcnR5KCkgY2FuIG9ubHkgYmUgY2FsbGVkIGFmdGVyIHRoZSBQb3N0SG9nIGxpYnJhcnkgaGFzIGZpbmlzaGVkIGxvYWRpbmcuXG4gICAgICogaW5pdCgpIGhhcyBhIGxvYWRlZCBmdW5jdGlvbiBhdmFpbGFibGUgdG8gaGFuZGxlIHRoaXMgYXV0b21hdGljYWxseS4gRm9yIGV4YW1wbGU6XG4gICAgICpcbiAgICAgKiAgICAgLy8gZ3JhYiB2YWx1ZSBmb3IgJ3VzZXJfaWQnIGFmdGVyIHRoZSBwb3N0aG9nIGxpYnJhcnkgaGFzIGxvYWRlZFxuICAgICAqICAgICBwb3N0aG9nLmluaXQoJ1lPVVIgUFJPSkVDVCBUT0tFTicsIHtcbiAgICAgKiAgICAgICAgIGxvYWRlZDogZnVuY3Rpb24ocG9zdGhvZykge1xuICAgICAqICAgICAgICAgICAgIHVzZXJfaWQgPSBwb3N0aG9nLmdldFNlc3Npb25Qcm9wZXJ0eSgndXNlcl9pZCcpO1xuICAgICAqICAgICAgICAgfVxuICAgICAqICAgICB9KTtcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0eV9uYW1lIFRoZSBuYW1lIG9mIHRoZSBzZXNzaW9uIHN1cGVyIHByb3BlcnR5IHlvdSB3YW50IHRvIHJldHJpZXZlXG4gICAgICovXG4gICAgZ2V0U2Vzc2lvblByb3BlcnR5KHByb3BlcnR5X25hbWU6IHN0cmluZyk6IFByb3BlcnR5IHwgdW5kZWZpbmVkIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2Vzc2lvblBlcnNpc3RlbmNlPy5wcm9wc1twcm9wZXJ0eV9uYW1lXVxuICAgIH1cblxuICAgIHRvU3RyaW5nKCk6IHN0cmluZyB7XG4gICAgICAgIGxldCBuYW1lID0gdGhpcy5jb25maWcubmFtZSA/PyBQUklNQVJZX0lOU1RBTkNFX05BTUVcbiAgICAgICAgaWYgKG5hbWUgIT09IFBSSU1BUllfSU5TVEFOQ0VfTkFNRSkge1xuICAgICAgICAgICAgbmFtZSA9IFBSSU1BUllfSU5TVEFOQ0VfTkFNRSArICcuJyArIG5hbWVcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmFtZVxuICAgIH1cblxuICAgIC8vIHBlcmZvcm0gc29tZSBob3VzZWtlZXBpbmcgYXJvdW5kIEdEUFIgb3B0LWluL291dCBzdGF0ZVxuICAgIF9nZHByX2luaXQoKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGlzX2xvY2FsU3RvcmFnZV9yZXF1ZXN0ZWQgPSB0aGlzLmNvbmZpZy5vcHRfb3V0X2NhcHR1cmluZ19wZXJzaXN0ZW5jZV90eXBlID09PSAnbG9jYWxTdG9yYWdlJ1xuXG4gICAgICAgIC8vIHRyeSB0byBjb252ZXJ0IG9wdC1pbi9vdXQgY29va2llcyB0byBsb2NhbFN0b3JhZ2UgaWYgcG9zc2libGVcbiAgICAgICAgaWYgKGlzX2xvY2FsU3RvcmFnZV9yZXF1ZXN0ZWQgJiYgbG9jYWxTdG9yZS5pc19zdXBwb3J0ZWQoKSkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmhhc19vcHRlZF9pbl9jYXB0dXJpbmcoKSAmJiB0aGlzLmhhc19vcHRlZF9pbl9jYXB0dXJpbmcoeyBwZXJzaXN0ZW5jZV90eXBlOiAnY29va2llJyB9KSkge1xuICAgICAgICAgICAgICAgIHRoaXMub3B0X2luX2NhcHR1cmluZyh7IGVuYWJsZV9wZXJzaXN0ZW5jZTogZmFsc2UgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGhpcy5oYXNfb3B0ZWRfb3V0X2NhcHR1cmluZygpICYmIHRoaXMuaGFzX29wdGVkX291dF9jYXB0dXJpbmcoeyBwZXJzaXN0ZW5jZV90eXBlOiAnY29va2llJyB9KSkge1xuICAgICAgICAgICAgICAgIHRoaXMub3B0X291dF9jYXB0dXJpbmcoeyBjbGVhcl9wZXJzaXN0ZW5jZTogZmFsc2UgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY2xlYXJfb3B0X2luX291dF9jYXB0dXJpbmcoe1xuICAgICAgICAgICAgICAgIHBlcnNpc3RlbmNlX3R5cGU6ICdjb29raWUnLFxuICAgICAgICAgICAgICAgIGVuYWJsZV9wZXJzaXN0ZW5jZTogZmFsc2UsXG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gY2hlY2sgd2hldGhlciB0aGUgdXNlciBoYXMgYWxyZWFkeSBvcHRlZCBvdXQgLSBpZiBzbywgY2xlYXIgJiBkaXNhYmxlIHBlcnNpc3RlbmNlXG4gICAgICAgIGlmICh0aGlzLmhhc19vcHRlZF9vdXRfY2FwdHVyaW5nKCkpIHtcbiAgICAgICAgICAgIHRoaXMuX2dkcHJfdXBkYXRlX3BlcnNpc3RlbmNlKHsgY2xlYXJfcGVyc2lzdGVuY2U6IHRydWUgfSlcblxuICAgICAgICAgICAgLy8gY2hlY2sgd2hldGhlciB3ZSBzaG91bGQgb3B0IG91dCBieSBkZWZhdWx0XG4gICAgICAgICAgICAvLyBub3RlOiB3ZSBkb24ndCBjbGVhciBwZXJzaXN0ZW5jZSBoZXJlIGJ5IGRlZmF1bHQgc2luY2Ugb3B0LW91dCBkZWZhdWx0IHN0YXRlIGlzIG9mdGVuXG4gICAgICAgICAgICAvLyAgICAgICB1c2VkIGFzIGFuIGluaXRpYWwgc3RhdGUgd2hpbGUgR0RQUiBpbmZvcm1hdGlvbiBpcyBiZWluZyBjb2xsZWN0ZWRcbiAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICF0aGlzLmhhc19vcHRlZF9pbl9jYXB0dXJpbmcoKSAmJlxuICAgICAgICAgICAgKHRoaXMuY29uZmlnLm9wdF9vdXRfY2FwdHVyaW5nX2J5X2RlZmF1bHQgfHwgY29va2llU3RvcmUuZ2V0KCdwaF9vcHRvdXQnKSlcbiAgICAgICAgKSB7XG4gICAgICAgICAgICBjb29raWVTdG9yZS5yZW1vdmUoJ3BoX29wdG91dCcpXG4gICAgICAgICAgICB0aGlzLm9wdF9vdXRfY2FwdHVyaW5nKHtcbiAgICAgICAgICAgICAgICBjbGVhcl9wZXJzaXN0ZW5jZTogdGhpcy5jb25maWcub3B0X291dF9wZXJzaXN0ZW5jZV9ieV9kZWZhdWx0LFxuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEVuYWJsZSBvciBkaXNhYmxlIHBlcnNpc3RlbmNlIGJhc2VkIG9uIG9wdGlvbnNcbiAgICAgKiBvbmx5IGVuYWJsZS9kaXNhYmxlIGlmIHBlcnNpc3RlbmNlIGlzIG5vdCBhbHJlYWR5IGluIHRoaXMgc3RhdGVcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmNsZWFyX3BlcnNpc3RlbmNlXSBJZiB0cnVlLCB3aWxsIGRlbGV0ZSBhbGwgZGF0YSBzdG9yZWQgYnkgdGhlIHNkayBpbiBwZXJzaXN0ZW5jZSBhbmQgZGlzYWJsZSBpdFxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuZW5hYmxlX3BlcnNpc3RlbmNlXSBJZiB0cnVlLCB3aWxsIHJlLWVuYWJsZSBzZGsgcGVyc2lzdGVuY2VcbiAgICAgKi9cbiAgICBfZ2Rwcl91cGRhdGVfcGVyc2lzdGVuY2Uob3B0aW9uczogUGFydGlhbDxPcHRJbk91dENhcHR1cmluZ09wdGlvbnM+KTogdm9pZCB7XG4gICAgICAgIGxldCBkaXNhYmxlZFxuICAgICAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zWydjbGVhcl9wZXJzaXN0ZW5jZSddKSB7XG4gICAgICAgICAgICBkaXNhYmxlZCA9IHRydWVcbiAgICAgICAgfSBlbHNlIGlmIChvcHRpb25zICYmIG9wdGlvbnNbJ2VuYWJsZV9wZXJzaXN0ZW5jZSddKSB7XG4gICAgICAgICAgICBkaXNhYmxlZCA9IGZhbHNlXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdGhpcy5jb25maWcuZGlzYWJsZV9wZXJzaXN0ZW5jZSAmJiB0aGlzLnBlcnNpc3RlbmNlPy5kaXNhYmxlZCAhPT0gZGlzYWJsZWQpIHtcbiAgICAgICAgICAgIHRoaXMucGVyc2lzdGVuY2U/LnNldF9kaXNhYmxlZChkaXNhYmxlZClcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuY29uZmlnLmRpc2FibGVfcGVyc2lzdGVuY2UgJiYgdGhpcy5zZXNzaW9uUGVyc2lzdGVuY2U/LmRpc2FibGVkICE9PSBkaXNhYmxlZCkge1xuICAgICAgICAgICAgdGhpcy5zZXNzaW9uUGVyc2lzdGVuY2U/LnNldF9kaXNhYmxlZChkaXNhYmxlZClcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIGNhbGwgYSBiYXNlIGdkcHIgZnVuY3Rpb24gYWZ0ZXIgY29uc3RydWN0aW5nIHRoZSBhcHByb3ByaWF0ZSB0b2tlbiBhbmQgb3B0aW9ucyBhcmdzXG4gICAgX2dkcHJfY2FsbF9mdW5jPFIgPSBhbnk+KFxuICAgICAgICBmdW5jOiAodG9rZW46IHN0cmluZywgb3B0aW9uczogR0RQUk9wdGlvbnMpID0+IFIsXG4gICAgICAgIG9wdGlvbnM/OiBQYXJ0aWFsPE9wdEluT3V0Q2FwdHVyaW5nT3B0aW9ucz5cbiAgICApOiBSIHtcbiAgICAgICAgb3B0aW9ucyA9IF9leHRlbmQoXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY2FwdHVyZTogdGhpcy5jYXB0dXJlLmJpbmQodGhpcyksXG4gICAgICAgICAgICAgICAgcGVyc2lzdGVuY2VfdHlwZTogdGhpcy5jb25maWcub3B0X291dF9jYXB0dXJpbmdfcGVyc2lzdGVuY2VfdHlwZSxcbiAgICAgICAgICAgICAgICBjb29raWVfcHJlZml4OiB0aGlzLmNvbmZpZy5vcHRfb3V0X2NhcHR1cmluZ19jb29raWVfcHJlZml4LFxuICAgICAgICAgICAgICAgIGNvb2tpZV9leHBpcmF0aW9uOiB0aGlzLmNvbmZpZy5jb29raWVfZXhwaXJhdGlvbixcbiAgICAgICAgICAgICAgICBjcm9zc19zdWJkb21haW5fY29va2llOiB0aGlzLmNvbmZpZy5jcm9zc19zdWJkb21haW5fY29va2llLFxuICAgICAgICAgICAgICAgIHNlY3VyZV9jb29raWU6IHRoaXMuY29uZmlnLnNlY3VyZV9jb29raWUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb3B0aW9ucyB8fCB7fVxuICAgICAgICApXG5cbiAgICAgICAgLy8gY2hlY2sgaWYgbG9jYWxTdG9yYWdlIGNhbiBiZSB1c2VkIGZvciByZWNvcmRpbmcgb3B0IG91dCBzdGF0dXMsIGZhbGwgYmFjayB0byBjb29raWUgaWYgbm90XG4gICAgICAgIGlmICghbG9jYWxTdG9yZS5pc19zdXBwb3J0ZWQoKSAmJiBvcHRpb25zWydwZXJzaXN0ZW5jZV90eXBlJ10gPT09ICdsb2NhbFN0b3JhZ2UnKSB7XG4gICAgICAgICAgICBvcHRpb25zWydwZXJzaXN0ZW5jZV90eXBlJ10gPSAnY29va2llJ1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZ1bmModGhpcy5jb25maWcudG9rZW4sIHtcbiAgICAgICAgICAgIGNhcHR1cmU6IG9wdGlvbnNbJ2NhcHR1cmUnXSxcbiAgICAgICAgICAgIGNhcHR1cmVFdmVudE5hbWU6IG9wdGlvbnNbJ2NhcHR1cmVfZXZlbnRfbmFtZSddLFxuICAgICAgICAgICAgY2FwdHVyZVByb3BlcnRpZXM6IG9wdGlvbnNbJ2NhcHR1cmVfcHJvcGVydGllcyddLFxuICAgICAgICAgICAgcGVyc2lzdGVuY2VUeXBlOiBvcHRpb25zWydwZXJzaXN0ZW5jZV90eXBlJ10sXG4gICAgICAgICAgICBwZXJzaXN0ZW5jZVByZWZpeDogb3B0aW9uc1snY29va2llX3ByZWZpeCddLFxuICAgICAgICAgICAgY29va2llRXhwaXJhdGlvbjogb3B0aW9uc1snY29va2llX2V4cGlyYXRpb24nXSxcbiAgICAgICAgICAgIGNyb3NzU3ViZG9tYWluQ29va2llOiBvcHRpb25zWydjcm9zc19zdWJkb21haW5fY29va2llJ10sXG4gICAgICAgICAgICBzZWN1cmVDb29raWU6IG9wdGlvbnNbJ3NlY3VyZV9jb29raWUnXSxcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBPcHQgdGhlIHVzZXIgaW4gdG8gZGF0YSBjYXB0dXJpbmcgYW5kIGNvb2tpZXMvbG9jYWxzdG9yYWdlIGZvciB0aGlzIFBvc3RIb2cgaW5zdGFuY2VcbiAgICAgKlxuICAgICAqICMjIyBVc2FnZVxuICAgICAqXG4gICAgICogICAgIC8vIG9wdCB1c2VyIGluXG4gICAgICogICAgIHBvc3Rob2cub3B0X2luX2NhcHR1cmluZygpO1xuICAgICAqXG4gICAgICogICAgIC8vIG9wdCB1c2VyIGluIHdpdGggc3BlY2lmaWMgZXZlbnQgbmFtZSwgcHJvcGVydGllcywgY29va2llIGNvbmZpZ3VyYXRpb25cbiAgICAgKiAgICAgcG9zdGhvZy5vcHRfaW5fY2FwdHVyaW5nKHtcbiAgICAgKiAgICAgICAgIGNhcHR1cmVfZXZlbnRfbmFtZTogJ1VzZXIgb3B0ZWQgaW4nLFxuICAgICAqICAgICAgICAgY2FwdHVyZV9ldmVudF9wcm9wZXJ0aWVzOiB7XG4gICAgICogICAgICAgICAgICAgJ0VtYWlsJzogJ2pkb2VAZXhhbXBsZS5jb20nXG4gICAgICogICAgICAgICB9LFxuICAgICAqICAgICAgICAgY29va2llX2V4cGlyYXRpb246IDMwLFxuICAgICAqICAgICAgICAgc2VjdXJlX2Nvb2tpZTogdHJ1ZVxuICAgICAqICAgICB9KTtcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gQSBkaWN0aW9uYXJ5IG9mIGNvbmZpZyBvcHRpb25zIHRvIG92ZXJyaWRlXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbn0gW29wdGlvbnMuY2FwdHVyZV0gRnVuY3Rpb24gdXNlZCBmb3IgY2FwdHVyaW5nIGEgUG9zdEhvZyBldmVudCB0byByZWNvcmQgdGhlIG9wdC1pbiBhY3Rpb24gKGRlZmF1bHQgaXMgdGhpcyBQb3N0SG9nIGluc3RhbmNlJ3MgY2FwdHVyZSBtZXRob2QpXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLmNhcHR1cmVfZXZlbnRfbmFtZT0kb3B0X2luXSBFdmVudCBuYW1lIHRvIGJlIHVzZWQgZm9yIGNhcHR1cmluZyB0aGUgb3B0LWluIGFjdGlvblxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9ucy5jYXB0dXJlX3Byb3BlcnRpZXNdIFNldCBvZiBwcm9wZXJ0aWVzIHRvIGJlIGNhcHR1cmVkIGFsb25nIHdpdGggdGhlIG9wdC1pbiBhY3Rpb25cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmVuYWJsZV9wZXJzaXN0ZW5jZT10cnVlXSBJZiB0cnVlLCB3aWxsIHJlLWVuYWJsZSBzZGsgcGVyc2lzdGVuY2VcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMucGVyc2lzdGVuY2VfdHlwZT1sb2NhbFN0b3JhZ2VdIFBlcnNpc3RlbmNlIG1lY2hhbmlzbSB1c2VkIC0gY29va2llIG9yIGxvY2FsU3RvcmFnZSAtIGZhbGxzIGJhY2sgdG8gY29va2llIGlmIGxvY2FsU3RvcmFnZSBpcyB1bmF2YWlsYWJsZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5jb29raWVfcHJlZml4PV9fcGhfb3B0X2luX291dF0gQ3VzdG9tIHByZWZpeCB0byBiZSB1c2VkIGluIHRoZSBjb29raWUvbG9jYWxzdG9yYWdlIG5hbWVcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gW29wdGlvbnMuY29va2llX2V4cGlyYXRpb25dIE51bWJlciBvZiBkYXlzIHVudGlsIHRoZSBvcHQtaW4gY29va2llIGV4cGlyZXMgKG92ZXJyaWRlcyB2YWx1ZSBzcGVjaWZpZWQgaW4gdGhpcyBQb3N0SG9nIGluc3RhbmNlJ3MgY29uZmlnKVxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuY3Jvc3Nfc3ViZG9tYWluX2Nvb2tpZV0gV2hldGhlciB0aGUgb3B0LWluIGNvb2tpZSBpcyBzZXQgYXMgY3Jvc3Mtc3ViZG9tYWluIG9yIG5vdCAob3ZlcnJpZGVzIHZhbHVlIHNwZWNpZmllZCBpbiB0aGlzIFBvc3RIb2cgaW5zdGFuY2UncyBjb25maWcpXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5zZWN1cmVfY29va2llXSBXaGV0aGVyIHRoZSBvcHQtaW4gY29va2llIGlzIHNldCBhcyBzZWN1cmUgb3Igbm90IChvdmVycmlkZXMgdmFsdWUgc3BlY2lmaWVkIGluIHRoaXMgUG9zdEhvZyBpbnN0YW5jZSdzIGNvbmZpZylcbiAgICAgKi9cbiAgICBvcHRfaW5fY2FwdHVyaW5nKG9wdGlvbnM/OiBQYXJ0aWFsPE9wdEluT3V0Q2FwdHVyaW5nT3B0aW9ucz4pOiB2b2lkIHtcbiAgICAgICAgb3B0aW9ucyA9IF9leHRlbmQoXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZW5hYmxlX3BlcnNpc3RlbmNlOiB0cnVlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9wdGlvbnMgfHwge31cbiAgICAgICAgKVxuXG4gICAgICAgIHRoaXMuX2dkcHJfY2FsbF9mdW5jKG9wdEluLCBvcHRpb25zKVxuICAgICAgICB0aGlzLl9nZHByX3VwZGF0ZV9wZXJzaXN0ZW5jZShvcHRpb25zKVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE9wdCB0aGUgdXNlciBvdXQgb2YgZGF0YSBjYXB0dXJpbmcgYW5kIGNvb2tpZXMvbG9jYWxzdG9yYWdlIGZvciB0aGlzIFBvc3RIb2cgaW5zdGFuY2VcbiAgICAgKlxuICAgICAqICMjIyBVc2FnZVxuICAgICAqXG4gICAgICogICAgIC8vIG9wdCB1c2VyIG91dFxuICAgICAqICAgICBwb3N0aG9nLm9wdF9vdXRfY2FwdHVyaW5nKCk7XG4gICAgICpcbiAgICAgKiAgICAgLy8gb3B0IHVzZXIgb3V0IHdpdGggZGlmZmVyZW50IGNvb2tpZSBjb25maWd1cmF0aW9uIGZyb20gUG9zdEhvZyBpbnN0YW5jZVxuICAgICAqICAgICBwb3N0aG9nLm9wdF9vdXRfY2FwdHVyaW5nKHtcbiAgICAgKiAgICAgICAgIGNvb2tpZV9leHBpcmF0aW9uOiAzMCxcbiAgICAgKiAgICAgICAgIHNlY3VyZV9jb29raWU6IHRydWVcbiAgICAgKiAgICAgfSk7XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIEEgZGljdGlvbmFyeSBvZiBjb25maWcgb3B0aW9ucyB0byBvdmVycmlkZVxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuY2xlYXJfcGVyc2lzdGVuY2U9dHJ1ZV0gSWYgdHJ1ZSwgd2lsbCBkZWxldGUgYWxsIGRhdGEgc3RvcmVkIGJ5IHRoZSBzZGsgaW4gcGVyc2lzdGVuY2VcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMucGVyc2lzdGVuY2VfdHlwZT1sb2NhbFN0b3JhZ2VdIFBlcnNpc3RlbmNlIG1lY2hhbmlzbSB1c2VkIC0gY29va2llIG9yIGxvY2FsU3RvcmFnZSAtIGZhbGxzIGJhY2sgdG8gY29va2llIGlmIGxvY2FsU3RvcmFnZSBpcyB1bmF2YWlsYWJsZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5jb29raWVfcHJlZml4PV9fcGhfb3B0X2luX291dF0gQ3VzdG9tIHByZWZpeCB0byBiZSB1c2VkIGluIHRoZSBjb29raWUvbG9jYWxzdG9yYWdlIG5hbWVcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gW29wdGlvbnMuY29va2llX2V4cGlyYXRpb25dIE51bWJlciBvZiBkYXlzIHVudGlsIHRoZSBvcHQtaW4gY29va2llIGV4cGlyZXMgKG92ZXJyaWRlcyB2YWx1ZSBzcGVjaWZpZWQgaW4gdGhpcyBQb3N0SG9nIGluc3RhbmNlJ3MgY29uZmlnKVxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuY3Jvc3Nfc3ViZG9tYWluX2Nvb2tpZV0gV2hldGhlciB0aGUgb3B0LWluIGNvb2tpZSBpcyBzZXQgYXMgY3Jvc3Mtc3ViZG9tYWluIG9yIG5vdCAob3ZlcnJpZGVzIHZhbHVlIHNwZWNpZmllZCBpbiB0aGlzIFBvc3RIb2cgaW5zdGFuY2UncyBjb25maWcpXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5zZWN1cmVfY29va2llXSBXaGV0aGVyIHRoZSBvcHQtaW4gY29va2llIGlzIHNldCBhcyBzZWN1cmUgb3Igbm90IChvdmVycmlkZXMgdmFsdWUgc3BlY2lmaWVkIGluIHRoaXMgUG9zdEhvZyBpbnN0YW5jZSdzIGNvbmZpZylcbiAgICAgKi9cbiAgICBvcHRfb3V0X2NhcHR1cmluZyhvcHRpb25zPzogUGFydGlhbDxPcHRJbk91dENhcHR1cmluZ09wdGlvbnM+KTogdm9pZCB7XG4gICAgICAgIGNvbnN0IF9vcHRpb25zID0gX2V4dGVuZChcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjbGVhcl9wZXJzaXN0ZW5jZTogdHJ1ZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvcHRpb25zIHx8IHt9XG4gICAgICAgIClcblxuICAgICAgICB0aGlzLl9nZHByX2NhbGxfZnVuYyhvcHRPdXQsIF9vcHRpb25zKVxuICAgICAgICB0aGlzLl9nZHByX3VwZGF0ZV9wZXJzaXN0ZW5jZShfb3B0aW9ucylcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVjayB3aGV0aGVyIHRoZSB1c2VyIGhhcyBvcHRlZCBpbiB0byBkYXRhIGNhcHR1cmluZyBhbmQgY29va2llcy9sb2NhbHN0b3JhZ2UgZm9yIHRoaXMgUG9zdEhvZyBpbnN0YW5jZVxuICAgICAqXG4gICAgICogIyMjIFVzYWdlXG4gICAgICpcbiAgICAgKiAgICAgY29uc3QgaGFzX29wdGVkX2luID0gcG9zdGhvZy5oYXNfb3B0ZWRfaW5fY2FwdHVyaW5nKCk7XG4gICAgICogICAgIC8vIHVzZSBoYXNfb3B0ZWRfaW4gdmFsdWVcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gQSBkaWN0aW9uYXJ5IG9mIGNvbmZpZyBvcHRpb25zIHRvIG92ZXJyaWRlXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLnBlcnNpc3RlbmNlX3R5cGU9bG9jYWxTdG9yYWdlXSBQZXJzaXN0ZW5jZSBtZWNoYW5pc20gdXNlZCAtIGNvb2tpZSBvciBsb2NhbFN0b3JhZ2UgLSBmYWxscyBiYWNrIHRvIGNvb2tpZSBpZiBsb2NhbFN0b3JhZ2UgaXMgdW5hdmFpbGFibGVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMuY29va2llX3ByZWZpeD1fX3BoX29wdF9pbl9vdXRdIEN1c3RvbSBwcmVmaXggdG8gYmUgdXNlZCBpbiB0aGUgY29va2llL2xvY2Fsc3RvcmFnZSBuYW1lXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IGN1cnJlbnQgb3B0LWluIHN0YXR1c1xuICAgICAqL1xuICAgIGhhc19vcHRlZF9pbl9jYXB0dXJpbmcob3B0aW9ucz86IFBhcnRpYWw8T3B0SW5PdXRDYXB0dXJpbmdPcHRpb25zPik6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fZ2Rwcl9jYWxsX2Z1bmMoaGFzT3B0ZWRJbiwgb3B0aW9ucylcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVjayB3aGV0aGVyIHRoZSB1c2VyIGhhcyBvcHRlZCBvdXQgb2YgZGF0YSBjYXB0dXJpbmcgYW5kIGNvb2tpZXMvbG9jYWxzdG9yYWdlIGZvciB0aGlzIFBvc3RIb2cgaW5zdGFuY2VcbiAgICAgKlxuICAgICAqICMjIyBVc2FnZVxuICAgICAqXG4gICAgICogICAgIGNvbnN0IGhhc19vcHRlZF9vdXQgPSBwb3N0aG9nLmhhc19vcHRlZF9vdXRfY2FwdHVyaW5nKCk7XG4gICAgICogICAgIC8vIHVzZSBoYXNfb3B0ZWRfb3V0IHZhbHVlXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIEEgZGljdGlvbmFyeSBvZiBjb25maWcgb3B0aW9ucyB0byBvdmVycmlkZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5wZXJzaXN0ZW5jZV90eXBlPWxvY2FsU3RvcmFnZV0gUGVyc2lzdGVuY2UgbWVjaGFuaXNtIHVzZWQgLSBjb29raWUgb3IgbG9jYWxTdG9yYWdlIC0gZmFsbHMgYmFjayB0byBjb29raWUgaWYgbG9jYWxTdG9yYWdlIGlzIHVuYXZhaWxhYmxlXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLmNvb2tpZV9wcmVmaXg9X19waF9vcHRfaW5fb3V0XSBDdXN0b20gcHJlZml4IHRvIGJlIHVzZWQgaW4gdGhlIGNvb2tpZS9sb2NhbHN0b3JhZ2UgbmFtZVxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBjdXJyZW50IG9wdC1vdXQgc3RhdHVzXG4gICAgICovXG4gICAgaGFzX29wdGVkX291dF9jYXB0dXJpbmcob3B0aW9ucz86IFBhcnRpYWw8T3B0SW5PdXRDYXB0dXJpbmdPcHRpb25zPik6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fZ2Rwcl9jYWxsX2Z1bmMoaGFzT3B0ZWRPdXQsIG9wdGlvbnMpXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2xlYXIgdGhlIHVzZXIncyBvcHQgaW4vb3V0IHN0YXR1cyBvZiBkYXRhIGNhcHR1cmluZyBhbmQgY29va2llcy9sb2NhbHN0b3JhZ2UgZm9yIHRoaXMgUG9zdEhvZyBpbnN0YW5jZVxuICAgICAqXG4gICAgICogIyMjIFVzYWdlXG4gICAgICpcbiAgICAgKiAgICAgLy8gY2xlYXIgdXNlcidzIG9wdC1pbi9vdXQgc3RhdHVzXG4gICAgICogICAgIHBvc3Rob2cuY2xlYXJfb3B0X2luX291dF9jYXB0dXJpbmcoKTtcbiAgICAgKlxuICAgICAqICAgICAvLyBjbGVhciB1c2VyJ3Mgb3B0LWluL291dCBzdGF0dXMgd2l0aCBzcGVjaWZpYyBjb29raWUgY29uZmlndXJhdGlvbiAtIHNob3VsZCBtYXRjaFxuICAgICAqICAgICAvLyBjb25maWd1cmF0aW9uIHVzZWQgd2hlbiBvcHRfaW5fY2FwdHVyaW5nL29wdF9vdXRfY2FwdHVyaW5nIG1ldGhvZHMgd2VyZSBjYWxsZWQuXG4gICAgICogICAgIHBvc3Rob2cuY2xlYXJfb3B0X2luX291dF9jYXB0dXJpbmcoe1xuICAgICAqICAgICAgICAgY29va2llX2V4cGlyYXRpb246IDMwLFxuICAgICAqICAgICAgICAgc2VjdXJlX2Nvb2tpZTogdHJ1ZVxuICAgICAqICAgICB9KTtcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gQSBkaWN0aW9uYXJ5IG9mIGNvbmZpZyBvcHRpb25zIHRvIG92ZXJyaWRlXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5lbmFibGVfcGVyc2lzdGVuY2U9dHJ1ZV0gSWYgdHJ1ZSwgd2lsbCByZS1lbmFibGUgc2RrIHBlcnNpc3RlbmNlXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLnBlcnNpc3RlbmNlX3R5cGU9bG9jYWxTdG9yYWdlXSBQZXJzaXN0ZW5jZSBtZWNoYW5pc20gdXNlZCAtIGNvb2tpZSBvciBsb2NhbFN0b3JhZ2UgLSBmYWxscyBiYWNrIHRvIGNvb2tpZSBpZiBsb2NhbFN0b3JhZ2UgaXMgdW5hdmFpbGFibGVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMuY29va2llX3ByZWZpeD1fX3BoX29wdF9pbl9vdXRdIEN1c3RvbSBwcmVmaXggdG8gYmUgdXNlZCBpbiB0aGUgY29va2llL2xvY2Fsc3RvcmFnZSBuYW1lXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IFtvcHRpb25zLmNvb2tpZV9leHBpcmF0aW9uXSBOdW1iZXIgb2YgZGF5cyB1bnRpbCB0aGUgb3B0LWluIGNvb2tpZSBleHBpcmVzIChvdmVycmlkZXMgdmFsdWUgc3BlY2lmaWVkIGluIHRoaXMgUG9zdEhvZyBpbnN0YW5jZSdzIGNvbmZpZylcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmNyb3NzX3N1YmRvbWFpbl9jb29raWVdIFdoZXRoZXIgdGhlIG9wdC1pbiBjb29raWUgaXMgc2V0IGFzIGNyb3NzLXN1YmRvbWFpbiBvciBub3QgKG92ZXJyaWRlcyB2YWx1ZSBzcGVjaWZpZWQgaW4gdGhpcyBQb3N0SG9nIGluc3RhbmNlJ3MgY29uZmlnKVxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuc2VjdXJlX2Nvb2tpZV0gV2hldGhlciB0aGUgb3B0LWluIGNvb2tpZSBpcyBzZXQgYXMgc2VjdXJlIG9yIG5vdCAob3ZlcnJpZGVzIHZhbHVlIHNwZWNpZmllZCBpbiB0aGlzIFBvc3RIb2cgaW5zdGFuY2UncyBjb25maWcpXG4gICAgICovXG4gICAgY2xlYXJfb3B0X2luX291dF9jYXB0dXJpbmcob3B0aW9ucz86IFBhcnRpYWw8T3B0SW5PdXRDYXB0dXJpbmdPcHRpb25zPik6IHZvaWQge1xuICAgICAgICBjb25zdCBfb3B0aW9uczogUGFydGlhbDxPcHRJbk91dENhcHR1cmluZ09wdGlvbnM+ID0gX2V4dGVuZChcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBlbmFibGVfcGVyc2lzdGVuY2U6IHRydWUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb3B0aW9ucyA/PyB7fVxuICAgICAgICApXG4gICAgICAgIHRoaXMuX2dkcHJfY2FsbF9mdW5jKGNsZWFyT3B0SW5PdXQsIF9vcHRpb25zKVxuICAgICAgICB0aGlzLl9nZHByX3VwZGF0ZV9wZXJzaXN0ZW5jZShfb3B0aW9ucylcbiAgICB9XG5cbiAgICBkZWJ1ZyhkZWJ1Zz86IGJvb2xlYW4pOiB2b2lkIHtcbiAgICAgICAgaWYgKGRlYnVnID09PSBmYWxzZSkge1xuICAgICAgICAgICAgd2luZG93Py5jb25zb2xlLmxvZyhcIllvdSd2ZSBkaXNhYmxlZCBkZWJ1ZyBtb2RlLlwiKVxuICAgICAgICAgICAgbG9jYWxTdG9yYWdlICYmIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdwaF9kZWJ1ZycpXG4gICAgICAgICAgICB0aGlzLnNldF9jb25maWcoeyBkZWJ1ZzogZmFsc2UgfSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHdpbmRvdz8uY29uc29sZS5sb2coXG4gICAgICAgICAgICAgICAgXCJZb3UncmUgbm93IGluIGRlYnVnIG1vZGUuIEFsbCBjYWxscyB0byBQb3N0SG9nIHdpbGwgYmUgbG9nZ2VkIGluIHlvdXIgY29uc29sZS5cXG5Zb3UgY2FuIGRpc2FibGUgdGhpcyB3aXRoIGBwb3N0aG9nLmRlYnVnKGZhbHNlKWAuXCJcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZSAmJiBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgncGhfZGVidWcnLCAndHJ1ZScpXG4gICAgICAgICAgICB0aGlzLnNldF9jb25maWcoeyBkZWJ1ZzogdHJ1ZSB9KVxuICAgICAgICB9XG4gICAgfVxufVxuXG5fc2FmZXdyYXBfY2xhc3MoUG9zdEhvZywgWydpZGVudGlmeSddKVxuXG5jb25zdCBhZGRfZG9tX2xvYWRlZF9oYW5kbGVyID0gZnVuY3Rpb24gKCkge1xuICAgIC8vIENyb3NzIGJyb3dzZXIgRE9NIExvYWRlZCBzdXBwb3J0XG4gICAgZnVuY3Rpb24gZG9tX2xvYWRlZF9oYW5kbGVyKCkge1xuICAgICAgICAvLyBmdW5jdGlvbiBmbGFnIHNpbmNlIHdlIG9ubHkgd2FudCB0byBleGVjdXRlIHRoaXMgb25jZVxuICAgICAgICBpZiAoKGRvbV9sb2FkZWRfaGFuZGxlciBhcyBhbnkpLmRvbmUpIHtcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICAgIDsoZG9tX2xvYWRlZF9oYW5kbGVyIGFzIGFueSkuZG9uZSA9IHRydWVcblxuICAgICAgICBFTlFVRVVFX1JFUVVFU1RTID0gZmFsc2VcblxuICAgICAgICBfZWFjaChpbnN0YW5jZXMsIGZ1bmN0aW9uIChpbnN0OiBQb3N0SG9nKSB7XG4gICAgICAgICAgICBpbnN0Ll9kb21fbG9hZGVkKClcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBpZiAoZG9jdW1lbnQ/LmFkZEV2ZW50TGlzdGVuZXIpIHtcbiAgICAgICAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICdjb21wbGV0ZScpIHtcbiAgICAgICAgICAgIC8vIHNhZmFyaSA0IGNhbiBmaXJlIHRoZSBET01Db250ZW50TG9hZGVkIGV2ZW50IGJlZm9yZSBsb2FkaW5nIGFsbFxuICAgICAgICAgICAgLy8gZXh0ZXJuYWwgSlMgKGluY2x1ZGluZyB0aGlzIGZpbGUpLiB5b3Ugd2lsbCBzZWUgc29tZSBjb3B5cGFzdGFcbiAgICAgICAgICAgIC8vIG9uIHRoZSBpbnRlcm5ldCB0aGF0IGNoZWNrcyBmb3IgJ2NvbXBsZXRlJyBhbmQgJ2xvYWRlZCcsIGJ1dFxuICAgICAgICAgICAgLy8gJ2xvYWRlZCcgaXMgYW4gSUUgdGhpbmdcbiAgICAgICAgICAgIGRvbV9sb2FkZWRfaGFuZGxlcigpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZG9tX2xvYWRlZF9oYW5kbGVyLCBmYWxzZSlcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIGZhbGxiYWNrIGhhbmRsZXIsIGFsd2F5cyB3aWxsIHdvcmtcbiAgICBpZiAod2luZG93KSB7XG4gICAgICAgIF9yZWdpc3Rlcl9ldmVudCh3aW5kb3csICdsb2FkJywgZG9tX2xvYWRlZF9oYW5kbGVyLCB0cnVlKVxuICAgIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGluaXRfZnJvbV9zbmlwcGV0KCk6IHZvaWQge1xuICAgIGNvbnN0IHBvc3Rob2dNYWluID0gKGluc3RhbmNlc1tQUklNQVJZX0lOU1RBTkNFX05BTUVdID0gbmV3IFBvc3RIb2coKSlcblxuICAgIGNvbnN0IHNuaXBwZXRQb3N0SG9nID0gYXNzaWduYWJsZVdpbmRvd1sncG9zdGhvZyddXG5cbiAgICBpZiAoc25pcHBldFBvc3RIb2cpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBzbmlwcGV0IHVzZXMgc29tZSBjbGV2ZXIgdHJpY2tzIHRvIGFsbG93IGRlZmVycmVkIGxvYWRpbmcgb2YgYXJyYXkuanMgKHRoaXMgY29kZSlcbiAgICAgICAgICpcbiAgICAgICAgICogd2luZG93LnBvc3Rob2cgaXMgYW4gYXJyYXkgd2hpY2ggdGhlIHF1ZXVlIG9mIGNhbGxzIG1hZGUgYmVmb3JlIHRoZSBsaWIgaXMgbG9hZGVkXG4gICAgICAgICAqIEl0IGhhcyBtZXRob2RzIGF0dGFjaGVkIHRvIGl0IHRvIHNpbXVsYXRlIHRoZSBwb3N0aG9nIG9iamVjdCBzbyBmb3IgaW5zdGFuY2VcbiAgICAgICAgICpcbiAgICAgICAgICogd2luZG93LnBvc3Rob2cuaW5pdChcIlRPS0VOXCIsIHthcGlfaG9zdDogXCJmb29cIiB9KVxuICAgICAgICAgKiB3aW5kb3cucG9zdGhvZy5jYXB0dXJlKFwibXktZXZlbnRcIiwge2ZvbzogXCJiYXJcIiB9KVxuICAgICAgICAgKlxuICAgICAgICAgKiAuLi4gd2lsbCBtZWFuIHRoYXQgd2luZG93LnBvc3Rob2cgd2lsbCBsb29rIGxpa2UgdGhpczpcbiAgICAgICAgICogd2luZG93LnBvc3Rob2cgPT0gW1xuICAgICAgICAgKiAgW1wibXktZXZlbnRcIiwge2ZvbzogXCJiYXJcIn1dXG4gICAgICAgICAqIF1cbiAgICAgICAgICpcbiAgICAgICAgICogd2luZG93LnBvc3Rob2dbX2ldID09IFtcbiAgICAgICAgICogICBbXCJUT0tFTlwiLCB7YXBpX2hvc3Q6IFwiZm9vXCIgfSwgXCJwb3N0aG9nXCJdXG4gICAgICAgICAqIF1cbiAgICAgICAgICpcbiAgICAgICAgICogSWYgYSBuYW1lIGlzIGdpdmVuIHRvIHRoZSBpbml0IGZ1bmN0aW9uIHRoZW4gdGhlIHNhbWUgYXMgYWJvdmUgaXMgdHJ1ZSBidXQgYXMgYSBzdWItcHJvcGVydHkgb24gdGhlIG9iamVjdDpcbiAgICAgICAgICpcbiAgICAgICAgICogd2luZG93LnBvc3Rob2cuaW5pdChcIlRPS0VOXCIsIHt9LCBcInBoMlwiKVxuICAgICAgICAgKiB3aW5kb3cucG9zdGhvZy5waDIucGVvcGxlLnNldCh7Zm9vOiBcImJhclwifSlcbiAgICAgICAgICpcbiAgICAgICAgICogd2luZG93LnBvc3Rob2cucGgyID09IFtdXG4gICAgICAgICAqIHdpbmRvdy5wb3N0aG9nLnBlb3BsZSA9PSBbXG4gICAgICAgICAqICBbXCJzZXRcIiwge2ZvbzogXCJiYXJcIn1dXG4gICAgICAgICAqIF1cbiAgICAgICAgICpcbiAgICAgICAgICovXG5cbiAgICAgICAgLy8gQ2FsbCBhbGwgcHJlLWxvYWRlZCBpbml0IGNhbGxzIHByb3Blcmx5XG5cbiAgICAgICAgX2VhY2goc25pcHBldFBvc3RIb2dbJ19pJ10sIGZ1bmN0aW9uIChpdGVtOiBbdG9rZW46IHN0cmluZywgY29uZmlnOiBQYXJ0aWFsPFBvc3RIb2dDb25maWc+LCBuYW1lOiBzdHJpbmddKSB7XG4gICAgICAgICAgICBpZiAoaXRlbSAmJiBfaXNBcnJheShpdGVtKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGluc3RhbmNlID0gcG9zdGhvZ01haW4uaW5pdChpdGVtWzBdLCBpdGVtWzFdLCBpdGVtWzJdKVxuXG4gICAgICAgICAgICAgICAgY29uc3QgaW5zdGFuY2VTbmlwcGV0ID0gc25pcHBldFBvc3RIb2dbaXRlbVsyXV0gfHwgc25pcHBldFBvc3RIb2dcblxuICAgICAgICAgICAgICAgIGlmIChpbnN0YW5jZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBDcnVuY2ggdGhyb3VnaCB0aGUgcGVvcGxlIHF1ZXVlIGZpcnN0IC0gd2UgcXVldWUgdGhpcyBkYXRhIHVwICZcbiAgICAgICAgICAgICAgICAgICAgLy8gZmx1c2ggb24gaWRlbnRpZnksIHNvIGl0J3MgYmV0dGVyIHRvIGRvIGFsbCB0aGVzZSBvcGVyYXRpb25zIGZpcnN0XG4gICAgICAgICAgICAgICAgICAgIGluc3RhbmNlLl9leGVjdXRlX2FycmF5LmNhbGwoaW5zdGFuY2UucGVvcGxlLCBpbnN0YW5jZVNuaXBwZXQucGVvcGxlKVxuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZS5fZXhlY3V0ZV9hcnJheShpbnN0YW5jZVNuaXBwZXQpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIGFzc2lnbmFibGVXaW5kb3dbJ3Bvc3Rob2cnXSA9IHBvc3Rob2dNYWluXG5cbiAgICBhZGRfZG9tX2xvYWRlZF9oYW5kbGVyKClcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGluaXRfYXNfbW9kdWxlKCk6IFBvc3RIb2cge1xuICAgIGNvbnN0IHBvc3Rob2dNYWluID0gKGluc3RhbmNlc1tQUklNQVJZX0lOU1RBTkNFX05BTUVdID0gbmV3IFBvc3RIb2coKSlcblxuICAgIGFkZF9kb21fbG9hZGVkX2hhbmRsZXIoKVxuXG4gICAgcmV0dXJuIHBvc3Rob2dNYWluXG59XG4iLCAiLyoqXG4gKiBFeHRlbmQgU2VnbWVudCB3aXRoIGV4dHJhIFBvc3RIb2cgSlMgZnVuY3Rpb25hbGl0eS4gUmVxdWlyZWQgZm9yIHRoaW5ncyBsaWtlIFJlY29yZGluZ3MgYW5kIGZlYXR1cmUgZmxhZ3MgdG8gd29yayBjb3JyZWN0bHkuXG4gKlxuICogIyMjIFVzYWdlXG4gKlxuICogIGBgYGpzXG4gKiAgLy8gQWZ0ZXIgeW91ciBzdGFuZGFyZCBzZWdtZW50IGFueWFseXRpY3MgaW5zdGFsbFxuICogIGFuYWx5dGljcy5sb2FkKFwiR09FRGZBMjF6WlR0UjdjbHNCdUR2bUJLQXRBZFo2TnBcIik7XG4gKlxuICogIGFuYWx5dGljcy5yZWFkeSgoKSA9PiB7XG4gKiAgICBwb3N0aG9nLmluaXQoJzxwb3N0aG9nLWFwaS1rZXk+Jywge1xuICogICAgICBjYXB0dXJlX3BhZ2V2aWV3OiBmYWxzZSxcbiAqICAgICAgc2VnbWVudDogd2luZG93LmFuYWx5dGljcywgLy8gTk9URTogQmUgc3VyZSB0byB1c2Ugd2luZG93LmFuYWx5dGljcyBoZXJlIVxuICogICAgfSk7XG4gKiAgICB3aW5kb3cuYW5hbHl0aWNzLnBhZ2UoKTtcbiAqICB9KVxuICogIGBgYFxuICovXG5pbXBvcnQgeyBQb3N0SG9nIH0gZnJvbSAnLi4vcG9zdGhvZy1jb3JlJ1xuaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSAnLi4vdXRpbHMvbG9nZ2VyJ1xuXG4vLyBMb29zZWx5IGJhc2VkIG9uIGh0dHBzOi8vZ2l0aHViLmNvbS9zZWdtZW50aW8vYW5hbHl0aWNzLW5leHQvYmxvYi9tYXN0ZXIvcGFja2FnZXMvY29yZS9zcmMvcGx1Z2lucy9pbmRleC50c1xuaW50ZXJmYWNlIFNlZ21lbnRQbHVnaW5Db250ZXh0IHtcbiAgICBldmVudDoge1xuICAgICAgICBldmVudDogc3RyaW5nXG4gICAgICAgIHVzZXJJZD86IHN0cmluZ1xuICAgICAgICBhbm9ueW1vdXNJZD86IHN0cmluZ1xuICAgICAgICBwcm9wZXJ0aWVzOiBhbnlcbiAgICB9XG59XG5cbmludGVyZmFjZSBTZWdtZW50UGx1Z2luIHtcbiAgICBuYW1lOiBzdHJpbmdcbiAgICB2ZXJzaW9uOiBzdHJpbmdcbiAgICB0eXBlOiAnZW5yaWNobWVudCdcbiAgICBpc0xvYWRlZDogKCkgPT4gYm9vbGVhblxuICAgIGxvYWQ6IChjdHg6IFNlZ21lbnRQbHVnaW5Db250ZXh0LCBpbnN0YW5jZTogYW55LCBjb25maWc/OiBhbnkpID0+IFByb21pc2U8dW5rbm93bj5cbiAgICB1bmxvYWQ/OiAoY3R4OiBTZWdtZW50UGx1Z2luQ29udGV4dCwgaW5zdGFuY2U6IGFueSkgPT4gUHJvbWlzZTx1bmtub3duPiB8IHVua25vd25cbiAgICByZWFkeT86ICgpID0+IFByb21pc2U8dW5rbm93bj5cbiAgICB0cmFjaz86IChjdHg6IFNlZ21lbnRQbHVnaW5Db250ZXh0KSA9PiBQcm9taXNlPFNlZ21lbnRQbHVnaW5Db250ZXh0PiB8IFNlZ21lbnRQbHVnaW5Db250ZXh0XG4gICAgaWRlbnRpZnk/OiAoY3R4OiBTZWdtZW50UGx1Z2luQ29udGV4dCkgPT4gUHJvbWlzZTxTZWdtZW50UGx1Z2luQ29udGV4dD4gfCBTZWdtZW50UGx1Z2luQ29udGV4dFxuICAgIHBhZ2U/OiAoY3R4OiBTZWdtZW50UGx1Z2luQ29udGV4dCkgPT4gUHJvbWlzZTxTZWdtZW50UGx1Z2luQ29udGV4dD4gfCBTZWdtZW50UGx1Z2luQ29udGV4dFxuICAgIGdyb3VwPzogKGN0eDogU2VnbWVudFBsdWdpbkNvbnRleHQpID0+IFByb21pc2U8U2VnbWVudFBsdWdpbkNvbnRleHQ+IHwgU2VnbWVudFBsdWdpbkNvbnRleHRcbiAgICBhbGlhcz86IChjdHg6IFNlZ21lbnRQbHVnaW5Db250ZXh0KSA9PiBQcm9taXNlPFNlZ21lbnRQbHVnaW5Db250ZXh0PiB8IFNlZ21lbnRQbHVnaW5Db250ZXh0XG4gICAgc2NyZWVuPzogKGN0eDogU2VnbWVudFBsdWdpbkNvbnRleHQpID0+IFByb21pc2U8U2VnbWVudFBsdWdpbkNvbnRleHQ+IHwgU2VnbWVudFBsdWdpbkNvbnRleHRcbn1cblxuZXhwb3J0IGNvbnN0IGNyZWF0ZVNlZ21lbnRJbnRlZ3JhdGlvbiA9IChwb3N0aG9nOiBQb3N0SG9nKTogU2VnbWVudFBsdWdpbiA9PiB7XG4gICAgaWYgKCFQcm9taXNlIHx8ICFQcm9taXNlLnJlc29sdmUpIHtcbiAgICAgICAgbG9nZ2VyLndhcm4oJ1RoaXMgYnJvd3NlciBkb2VzIG5vdCBoYXZlIFByb21pc2Ugc3VwcG9ydCwgYW5kIGNhbiBub3QgdXNlIHRoZSBzZWdtZW50IGludGVncmF0aW9uJylcbiAgICB9XG5cbiAgICBjb25zdCBlbnJpY2hFdmVudCA9IChjdHg6IFNlZ21lbnRQbHVnaW5Db250ZXh0LCBldmVudE5hbWU6IHN0cmluZykgPT4ge1xuICAgICAgICBpZiAoIWN0eC5ldmVudC51c2VySWQgJiYgY3R4LmV2ZW50LmFub255bW91c0lkICE9PSBwb3N0aG9nLmdldF9kaXN0aW5jdF9pZCgpKSB7XG4gICAgICAgICAgICAvLyBUaGlzIGlzIG91ciBvbmx5IHdheSBvZiBkZXRlY3RpbmcgdGhhdCBzZWdtZW50J3MgYW5hbHl0aWNzLnJlc2V0KCkgaGFzIGJlZW4gY2FsbGVkIHNvIHdlIGFsc28gY2FsbCBpdFxuICAgICAgICAgICAgcG9zdGhvZy5yZXNldCgpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN0eC5ldmVudC51c2VySWQgJiYgY3R4LmV2ZW50LnVzZXJJZCAhPT0gcG9zdGhvZy5nZXRfZGlzdGluY3RfaWQoKSkge1xuICAgICAgICAgICAgcG9zdGhvZy5yZWdpc3Rlcih7XG4gICAgICAgICAgICAgICAgZGlzdGluY3RfaWQ6IGN0eC5ldmVudC51c2VySWQsXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgcG9zdGhvZy5yZWxvYWRGZWF0dXJlRmxhZ3MoKVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgYWRkaXRpb25hbFByb3BlcnRpZXMgPSBwb3N0aG9nLl9jYWxjdWxhdGVfZXZlbnRfcHJvcGVydGllcyhldmVudE5hbWUsIGN0eC5ldmVudC5wcm9wZXJ0aWVzKVxuICAgICAgICBjdHguZXZlbnQucHJvcGVydGllcyA9IE9iamVjdC5hc3NpZ24oe30sIGFkZGl0aW9uYWxQcm9wZXJ0aWVzLCBjdHguZXZlbnQucHJvcGVydGllcylcbiAgICAgICAgcmV0dXJuIGN0eFxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIG5hbWU6ICdQb3N0SG9nIEpTJyxcbiAgICAgICAgdHlwZTogJ2VucmljaG1lbnQnLFxuICAgICAgICB2ZXJzaW9uOiAnMS4wLjAnLFxuICAgICAgICBpc0xvYWRlZDogKCkgPT4gdHJ1ZSxcbiAgICAgICAgLy8gY2hlY2sgYW5kIGVhcmx5IHJldHVybiBhYm92ZVxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY29tcGF0L2NvbXBhdFxuICAgICAgICBsb2FkOiAoKSA9PiBQcm9taXNlLnJlc29sdmUoKSxcbiAgICAgICAgdHJhY2s6IChjdHgpID0+IGVucmljaEV2ZW50KGN0eCwgY3R4LmV2ZW50LmV2ZW50KSxcbiAgICAgICAgcGFnZTogKGN0eCkgPT4gZW5yaWNoRXZlbnQoY3R4LCAnJHBhZ2V2aWV3JyksXG4gICAgICAgIGlkZW50aWZ5OiAoY3R4KSA9PiBlbnJpY2hFdmVudChjdHgsICckaWRlbnRpZnknKSxcbiAgICAgICAgc2NyZWVuOiAoY3R4KSA9PiBlbnJpY2hFdmVudChjdHgsICckc2NyZWVuJyksXG4gICAgfVxufVxuIiwgIi8qKlxuICogSGF2aW5nIFN1cnZleSB0eXBlcyBpbiB0eXBlcy50cyB3YXMgY29uZnVzaW5nIHRzY1xuICogYW5kIGdlbmVyYXRpbmcgYW4gaW52YWxpZCBtb2R1bGUuZC50c1xuICogU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9Qb3N0SG9nL3Bvc3Rob2ctanMvaXNzdWVzLzY5OFxuICovXG5cbmV4cG9ydCBpbnRlcmZhY2UgU3VydmV5QXBwZWFyYW5jZSB7XG4gICAgLy8ga2VlcCBpbiBzeW5jIHdpdGggZnJvbnRlbmQvc3JjL3R5cGVzLnRzIC0+IFN1cnZleUFwcGVhcmFuY2VcbiAgICBiYWNrZ3JvdW5kQ29sb3I/OiBzdHJpbmdcbiAgICBzdWJtaXRCdXR0b25Db2xvcj86IHN0cmluZ1xuICAgIC8vIHRleHQgY29sb3IgaXMgZGVwcmVjYXRlZCwgdXNlIGF1dG8gY29udHJhc3QgdGV4dCBjb2xvciBpbnN0ZWFkXG4gICAgdGV4dENvbG9yPzogc3RyaW5nXG4gICAgLy8gZGVwcmVjYXRlIHN1Ym1pdCBidXR0b24gdGV4dCBldmVudHVhbGx5XG4gICAgc3VibWl0QnV0dG9uVGV4dD86IHN0cmluZ1xuICAgIGRlc2NyaXB0aW9uVGV4dENvbG9yPzogc3RyaW5nXG4gICAgcmF0aW5nQnV0dG9uQ29sb3I/OiBzdHJpbmdcbiAgICByYXRpbmdCdXR0b25BY3RpdmVDb2xvcj86IHN0cmluZ1xuICAgIHJhdGluZ0J1dHRvbkhvdmVyQ29sb3I/OiBzdHJpbmdcbiAgICB3aGl0ZUxhYmVsPzogYm9vbGVhblxuICAgIGF1dG9EaXNhcHBlYXI/OiBib29sZWFuXG4gICAgZGlzcGxheVRoYW5rWW91TWVzc2FnZT86IGJvb2xlYW5cbiAgICB0aGFua1lvdU1lc3NhZ2VIZWFkZXI/OiBzdHJpbmdcbiAgICB0aGFua1lvdU1lc3NhZ2VEZXNjcmlwdGlvbj86IHN0cmluZ1xuICAgIGJvcmRlckNvbG9yPzogc3RyaW5nXG4gICAgcG9zaXRpb24/OiAnbGVmdCcgfCAncmlnaHQnIHwgJ2NlbnRlcidcbiAgICBwbGFjZWhvbGRlcj86IHN0cmluZ1xuICAgIC8vIHdpZGdldCBvcHRpb25zXG4gICAgd2lkZ2V0VHlwZT86ICdidXR0b24nIHwgJ3RhYicgfCAnc2VsZWN0b3InXG4gICAgd2lkZ2V0U2VsZWN0b3I/OiBzdHJpbmdcbiAgICB3aWRnZXRMYWJlbD86IHN0cmluZ1xuICAgIHdpZGdldENvbG9yPzogc3RyaW5nXG4gICAgLy8gcXVlc3Rpb25hYmxlOiBOb3QgaW4gZnJvbnRlbmQvc3JjL3R5cGVzLnRzIC0+IFN1cnZleUFwcGVhcmFuY2UsIGJ1dCB1c2VkIGluIHNpdGUgYXBwXG4gICAgbWF4V2lkdGg/OiBzdHJpbmdcbiAgICB6SW5kZXg/OiBzdHJpbmdcbn1cblxuZXhwb3J0IGVudW0gU3VydmV5VHlwZSB7XG4gICAgUG9wb3ZlciA9ICdwb3BvdmVyJyxcbiAgICBBUEkgPSAnYXBpJyxcbiAgICBXaWRnZXQgPSAnd2lkZ2V0Jyxcbn1cblxuZXhwb3J0IHR5cGUgU3VydmV5UXVlc3Rpb24gPSBCYXNpY1N1cnZleVF1ZXN0aW9uIHwgTGlua1N1cnZleVF1ZXN0aW9uIHwgUmF0aW5nU3VydmV5UXVlc3Rpb24gfCBNdWx0aXBsZVN1cnZleVF1ZXN0aW9uXG5cbmludGVyZmFjZSBTdXJ2ZXlRdWVzdGlvbkJhc2Uge1xuICAgIHF1ZXN0aW9uOiBzdHJpbmdcbiAgICBkZXNjcmlwdGlvbj86IHN0cmluZyB8IG51bGxcbiAgICBvcHRpb25hbD86IGJvb2xlYW5cbiAgICBidXR0b25UZXh0Pzogc3RyaW5nXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmFzaWNTdXJ2ZXlRdWVzdGlvbiBleHRlbmRzIFN1cnZleVF1ZXN0aW9uQmFzZSB7XG4gICAgdHlwZTogU3VydmV5UXVlc3Rpb25UeXBlLk9wZW5cbn1cblxuZXhwb3J0IGludGVyZmFjZSBMaW5rU3VydmV5UXVlc3Rpb24gZXh0ZW5kcyBTdXJ2ZXlRdWVzdGlvbkJhc2Uge1xuICAgIHR5cGU6IFN1cnZleVF1ZXN0aW9uVHlwZS5MaW5rXG4gICAgbGluaz86IHN0cmluZyB8IG51bGxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBSYXRpbmdTdXJ2ZXlRdWVzdGlvbiBleHRlbmRzIFN1cnZleVF1ZXN0aW9uQmFzZSB7XG4gICAgdHlwZTogU3VydmV5UXVlc3Rpb25UeXBlLlJhdGluZ1xuICAgIGRpc3BsYXk6ICdudW1iZXInIHwgJ2Vtb2ppJ1xuICAgIHNjYWxlOiBudW1iZXJcbiAgICBsb3dlckJvdW5kTGFiZWw6IHN0cmluZ1xuICAgIHVwcGVyQm91bmRMYWJlbDogc3RyaW5nXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTXVsdGlwbGVTdXJ2ZXlRdWVzdGlvbiBleHRlbmRzIFN1cnZleVF1ZXN0aW9uQmFzZSB7XG4gICAgdHlwZTogU3VydmV5UXVlc3Rpb25UeXBlLlNpbmdsZUNob2ljZSB8IFN1cnZleVF1ZXN0aW9uVHlwZS5NdWx0aXBsZUNob2ljZVxuICAgIGNob2ljZXM6IHN0cmluZ1tdXG4gICAgaGFzT3BlbkNob2ljZT86IGJvb2xlYW5cbn1cblxuZXhwb3J0IGVudW0gU3VydmV5UXVlc3Rpb25UeXBlIHtcbiAgICBPcGVuID0gJ29wZW4nLFxuICAgIE11bHRpcGxlQ2hvaWNlID0gJ211bHRpcGxlX2Nob2ljZScsXG4gICAgU2luZ2xlQ2hvaWNlID0gJ3NpbmdsZV9jaG9pY2UnLFxuICAgIFJhdGluZyA9ICdyYXRpbmcnLFxuICAgIExpbmsgPSAnbGluaycsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3VydmV5UmVzcG9uc2Uge1xuICAgIHN1cnZleXM6IFN1cnZleVtdXG59XG5cbmV4cG9ydCB0eXBlIFN1cnZleUNhbGxiYWNrID0gKHN1cnZleXM6IFN1cnZleVtdKSA9PiB2b2lkXG5cbmV4cG9ydCB0eXBlIFN1cnZleVVybE1hdGNoVHlwZSA9ICdyZWdleCcgfCAnZXhhY3QnIHwgJ2ljb250YWlucydcblxuZXhwb3J0IGludGVyZmFjZSBTdXJ2ZXkge1xuICAgIC8vIFN5bmMgdGhpcyB3aXRoIHRoZSBiYWNrZW5kJ3MgU3VydmV5QVBJU2VyaWFsaXplciFcbiAgICBpZDogc3RyaW5nXG4gICAgbmFtZTogc3RyaW5nXG4gICAgZGVzY3JpcHRpb246IHN0cmluZ1xuICAgIHR5cGU6IFN1cnZleVR5cGVcbiAgICBsaW5rZWRfZmxhZ19rZXk6IHN0cmluZyB8IG51bGxcbiAgICB0YXJnZXRpbmdfZmxhZ19rZXk6IHN0cmluZyB8IG51bGxcbiAgICBxdWVzdGlvbnM6IFN1cnZleVF1ZXN0aW9uW11cbiAgICBhcHBlYXJhbmNlOiBTdXJ2ZXlBcHBlYXJhbmNlIHwgbnVsbFxuICAgIGNvbmRpdGlvbnM6IHtcbiAgICAgICAgdXJsPzogc3RyaW5nXG4gICAgICAgIHNlbGVjdG9yPzogc3RyaW5nXG4gICAgICAgIHNlZW5TdXJ2ZXlXYWl0UGVyaW9kSW5EYXlzPzogbnVtYmVyXG4gICAgICAgIHVybE1hdGNoVHlwZT86IFN1cnZleVVybE1hdGNoVHlwZVxuICAgIH0gfCBudWxsXG4gICAgc3RhcnRfZGF0ZTogc3RyaW5nIHwgbnVsbFxuICAgIGVuZF9kYXRlOiBzdHJpbmcgfCBudWxsXG59XG4iLCAiaW1wb3J0IHsgaW5pdF9hc19tb2R1bGUgfSBmcm9tICcuL3Bvc3Rob2ctY29yZSdcbmV4cG9ydCB7IFBvc3RIb2cgfSBmcm9tICcuL3Bvc3Rob2ctY29yZSdcbmV4cG9ydCAqIGZyb20gJy4vdHlwZXMnXG5leHBvcnQgKiBmcm9tICcuL3Bvc3Rob2ctc3VydmV5cy10eXBlcydcbmV4cG9ydCBjb25zdCBwb3N0aG9nID0gaW5pdF9hc19tb2R1bGUoKVxuZXhwb3J0IGRlZmF1bHQgcG9zdGhvZ1xuIiwgIlwidXNlIHN0cmljdFwiO1xuXG4oZnVuY3Rpb24oKSB7XG4gIHZhciBQb2x5ZmlsbEV2ZW50ID0gZXZlbnRDb25zdHJ1Y3RvcigpO1xuXG4gIGZ1bmN0aW9uIGV2ZW50Q29uc3RydWN0b3IoKSB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cuQ3VzdG9tRXZlbnQgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIHdpbmRvdy5DdXN0b21FdmVudDtcbiAgICAvLyBJRTw9OSBTdXBwb3J0XG4gICAgZnVuY3Rpb24gQ3VzdG9tRXZlbnQoZXZlbnQsIHBhcmFtcykge1xuICAgICAgcGFyYW1zID0gcGFyYW1zIHx8IHtidWJibGVzOiBmYWxzZSwgY2FuY2VsYWJsZTogZmFsc2UsIGRldGFpbDogdW5kZWZpbmVkfTtcbiAgICAgIHZhciBldnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnQ3VzdG9tRXZlbnQnKTtcbiAgICAgIGV2dC5pbml0Q3VzdG9tRXZlbnQoZXZlbnQsIHBhcmFtcy5idWJibGVzLCBwYXJhbXMuY2FuY2VsYWJsZSwgcGFyYW1zLmRldGFpbCk7XG4gICAgICByZXR1cm4gZXZ0O1xuICAgIH1cbiAgICBDdXN0b21FdmVudC5wcm90b3R5cGUgPSB3aW5kb3cuRXZlbnQucHJvdG90eXBlO1xuICAgIHJldHVybiBDdXN0b21FdmVudDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGJ1aWxkSGlkZGVuSW5wdXQobmFtZSwgdmFsdWUpIHtcbiAgICB2YXIgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gICAgaW5wdXQudHlwZSA9IFwiaGlkZGVuXCI7XG4gICAgaW5wdXQubmFtZSA9IG5hbWU7XG4gICAgaW5wdXQudmFsdWUgPSB2YWx1ZTtcbiAgICByZXR1cm4gaW5wdXQ7XG4gIH1cblxuICBmdW5jdGlvbiBoYW5kbGVDbGljayhlbGVtZW50LCB0YXJnZXRNb2RpZmllcktleSkge1xuICAgIHZhciB0byA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS10b1wiKSxcbiAgICAgICAgbWV0aG9kID0gYnVpbGRIaWRkZW5JbnB1dChcIl9tZXRob2RcIiwgZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLW1ldGhvZFwiKSksXG4gICAgICAgIGNzcmYgPSBidWlsZEhpZGRlbklucHV0KFwiX2NzcmZfdG9rZW5cIiwgZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLWNzcmZcIikpLFxuICAgICAgICBmb3JtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImZvcm1cIiksXG4gICAgICAgIHN1Ym1pdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKSxcbiAgICAgICAgdGFyZ2V0ID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJ0YXJnZXRcIik7XG5cbiAgICBmb3JtLm1ldGhvZCA9IChlbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtbWV0aG9kXCIpID09PSBcImdldFwiKSA/IFwiZ2V0XCIgOiBcInBvc3RcIjtcbiAgICBmb3JtLmFjdGlvbiA9IHRvO1xuICAgIGZvcm0uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuXG4gICAgaWYgKHRhcmdldCkgZm9ybS50YXJnZXQgPSB0YXJnZXQ7XG4gICAgZWxzZSBpZiAodGFyZ2V0TW9kaWZpZXJLZXkpIGZvcm0udGFyZ2V0ID0gXCJfYmxhbmtcIjtcblxuICAgIGZvcm0uYXBwZW5kQ2hpbGQoY3NyZik7XG4gICAgZm9ybS5hcHBlbmRDaGlsZChtZXRob2QpO1xuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZm9ybSk7XG5cbiAgICAvLyBJbnNlcnQgYSBidXR0b24gYW5kIGNsaWNrIGl0IGluc3RlYWQgb2YgdXNpbmcgYGZvcm0uc3VibWl0YFxuICAgIC8vIGJlY2F1c2UgdGhlIGBzdWJtaXRgIGZ1bmN0aW9uIGRvZXMgbm90IGVtaXQgYSBgc3VibWl0YCBldmVudC5cbiAgICBzdWJtaXQudHlwZSA9IFwic3VibWl0XCI7XG4gICAgZm9ybS5hcHBlbmRDaGlsZChzdWJtaXQpO1xuICAgIHN1Ym1pdC5jbGljaygpO1xuICB9XG5cbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbihlKSB7XG4gICAgdmFyIGVsZW1lbnQgPSBlLnRhcmdldDtcbiAgICBpZiAoZS5kZWZhdWx0UHJldmVudGVkKSByZXR1cm47XG5cbiAgICB3aGlsZSAoZWxlbWVudCAmJiBlbGVtZW50LmdldEF0dHJpYnV0ZSkge1xuICAgICAgdmFyIHBob2VuaXhMaW5rRXZlbnQgPSBuZXcgUG9seWZpbGxFdmVudCgncGhvZW5peC5saW5rLmNsaWNrJywge1xuICAgICAgICBcImJ1YmJsZXNcIjogdHJ1ZSwgXCJjYW5jZWxhYmxlXCI6IHRydWVcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIWVsZW1lbnQuZGlzcGF0Y2hFdmVudChwaG9lbml4TGlua0V2ZW50KSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS1tZXRob2RcIikpIHtcbiAgICAgICAgaGFuZGxlQ2xpY2soZWxlbWVudCwgZS5tZXRhS2V5IHx8IGUuc2hpZnRLZXkpO1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVsZW1lbnQgPSBlbGVtZW50LnBhcmVudE5vZGU7XG4gICAgICB9XG4gICAgfVxuICB9LCBmYWxzZSk7XG5cbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Bob2VuaXgubGluay5jbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgdmFyIG1lc3NhZ2UgPSBlLnRhcmdldC5nZXRBdHRyaWJ1dGUoXCJkYXRhLWNvbmZpcm1cIik7XG4gICAgaWYobWVzc2FnZSAmJiAhd2luZG93LmNvbmZpcm0obWVzc2FnZSkpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG4gIH0sIGZhbHNlKTtcbn0pKCk7XG4iLCAiLy8gd3JhcHMgdmFsdWUgaW4gY2xvc3VyZSBvciByZXR1cm5zIGNsb3N1cmVcbmV4cG9ydCBsZXQgY2xvc3VyZSA9ICh2YWx1ZSkgPT4ge1xuICBpZih0eXBlb2YgdmFsdWUgPT09IFwiZnVuY3Rpb25cIil7XG4gICAgcmV0dXJuIHZhbHVlXG4gIH0gZWxzZSB7XG4gICAgbGV0IGNsb3N1cmUgPSBmdW5jdGlvbiAoKXsgcmV0dXJuIHZhbHVlIH1cbiAgICByZXR1cm4gY2xvc3VyZVxuICB9XG59XG4iLCAiZXhwb3J0IGNvbnN0IGdsb2JhbFNlbGYgPSB0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiA/IHNlbGYgOiBudWxsXG5leHBvcnQgY29uc3QgcGh4V2luZG93ID0gdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiA/IHdpbmRvdyA6IG51bGxcbmV4cG9ydCBjb25zdCBnbG9iYWwgPSBnbG9iYWxTZWxmIHx8IHBoeFdpbmRvdyB8fCBnbG9iYWxcbmV4cG9ydCBjb25zdCBERUZBVUxUX1ZTTiA9IFwiMi4wLjBcIlxuZXhwb3J0IGNvbnN0IFNPQ0tFVF9TVEFURVMgPSB7Y29ubmVjdGluZzogMCwgb3BlbjogMSwgY2xvc2luZzogMiwgY2xvc2VkOiAzfVxuZXhwb3J0IGNvbnN0IERFRkFVTFRfVElNRU9VVCA9IDEwMDAwXG5leHBvcnQgY29uc3QgV1NfQ0xPU0VfTk9STUFMID0gMTAwMFxuZXhwb3J0IGNvbnN0IENIQU5ORUxfU1RBVEVTID0ge1xuICBjbG9zZWQ6IFwiY2xvc2VkXCIsXG4gIGVycm9yZWQ6IFwiZXJyb3JlZFwiLFxuICBqb2luZWQ6IFwiam9pbmVkXCIsXG4gIGpvaW5pbmc6IFwiam9pbmluZ1wiLFxuICBsZWF2aW5nOiBcImxlYXZpbmdcIixcbn1cbmV4cG9ydCBjb25zdCBDSEFOTkVMX0VWRU5UUyA9IHtcbiAgY2xvc2U6IFwicGh4X2Nsb3NlXCIsXG4gIGVycm9yOiBcInBoeF9lcnJvclwiLFxuICBqb2luOiBcInBoeF9qb2luXCIsXG4gIHJlcGx5OiBcInBoeF9yZXBseVwiLFxuICBsZWF2ZTogXCJwaHhfbGVhdmVcIlxufVxuXG5leHBvcnQgY29uc3QgVFJBTlNQT1JUUyA9IHtcbiAgbG9uZ3BvbGw6IFwibG9uZ3BvbGxcIixcbiAgd2Vic29ja2V0OiBcIndlYnNvY2tldFwiXG59XG5leHBvcnQgY29uc3QgWEhSX1NUQVRFUyA9IHtcbiAgY29tcGxldGU6IDRcbn1cbiIsICIvKipcbiAqIEluaXRpYWxpemVzIHRoZSBQdXNoXG4gKiBAcGFyYW0ge0NoYW5uZWx9IGNoYW5uZWwgLSBUaGUgQ2hhbm5lbFxuICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50IC0gVGhlIGV2ZW50LCBmb3IgZXhhbXBsZSBgXCJwaHhfam9pblwiYFxuICogQHBhcmFtIHtPYmplY3R9IHBheWxvYWQgLSBUaGUgcGF5bG9hZCwgZm9yIGV4YW1wbGUgYHt1c2VyX2lkOiAxMjN9YFxuICogQHBhcmFtIHtudW1iZXJ9IHRpbWVvdXQgLSBUaGUgcHVzaCB0aW1lb3V0IGluIG1pbGxpc2Vjb25kc1xuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQdXNoIHtcbiAgY29uc3RydWN0b3IoY2hhbm5lbCwgZXZlbnQsIHBheWxvYWQsIHRpbWVvdXQpe1xuICAgIHRoaXMuY2hhbm5lbCA9IGNoYW5uZWxcbiAgICB0aGlzLmV2ZW50ID0gZXZlbnRcbiAgICB0aGlzLnBheWxvYWQgPSBwYXlsb2FkIHx8IGZ1bmN0aW9uICgpeyByZXR1cm4ge30gfVxuICAgIHRoaXMucmVjZWl2ZWRSZXNwID0gbnVsbFxuICAgIHRoaXMudGltZW91dCA9IHRpbWVvdXRcbiAgICB0aGlzLnRpbWVvdXRUaW1lciA9IG51bGxcbiAgICB0aGlzLnJlY0hvb2tzID0gW11cbiAgICB0aGlzLnNlbnQgPSBmYWxzZVxuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB0aW1lb3V0XG4gICAqL1xuICByZXNlbmQodGltZW91dCl7XG4gICAgdGhpcy50aW1lb3V0ID0gdGltZW91dFxuICAgIHRoaXMucmVzZXQoKVxuICAgIHRoaXMuc2VuZCgpXG4gIH1cblxuICAvKipcbiAgICpcbiAgICovXG4gIHNlbmQoKXtcbiAgICBpZih0aGlzLmhhc1JlY2VpdmVkKFwidGltZW91dFwiKSl7IHJldHVybiB9XG4gICAgdGhpcy5zdGFydFRpbWVvdXQoKVxuICAgIHRoaXMuc2VudCA9IHRydWVcbiAgICB0aGlzLmNoYW5uZWwuc29ja2V0LnB1c2goe1xuICAgICAgdG9waWM6IHRoaXMuY2hhbm5lbC50b3BpYyxcbiAgICAgIGV2ZW50OiB0aGlzLmV2ZW50LFxuICAgICAgcGF5bG9hZDogdGhpcy5wYXlsb2FkKCksXG4gICAgICByZWY6IHRoaXMucmVmLFxuICAgICAgam9pbl9yZWY6IHRoaXMuY2hhbm5lbC5qb2luUmVmKClcbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gc3RhdHVzXG4gICAqIEBwYXJhbSB7Kn0gY2FsbGJhY2tcbiAgICovXG4gIHJlY2VpdmUoc3RhdHVzLCBjYWxsYmFjayl7XG4gICAgaWYodGhpcy5oYXNSZWNlaXZlZChzdGF0dXMpKXtcbiAgICAgIGNhbGxiYWNrKHRoaXMucmVjZWl2ZWRSZXNwLnJlc3BvbnNlKVxuICAgIH1cblxuICAgIHRoaXMucmVjSG9va3MucHVzaCh7c3RhdHVzLCBjYWxsYmFja30pXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcmVzZXQoKXtcbiAgICB0aGlzLmNhbmNlbFJlZkV2ZW50KClcbiAgICB0aGlzLnJlZiA9IG51bGxcbiAgICB0aGlzLnJlZkV2ZW50ID0gbnVsbFxuICAgIHRoaXMucmVjZWl2ZWRSZXNwID0gbnVsbFxuICAgIHRoaXMuc2VudCA9IGZhbHNlXG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIG1hdGNoUmVjZWl2ZSh7c3RhdHVzLCByZXNwb25zZSwgX3JlZn0pe1xuICAgIHRoaXMucmVjSG9va3MuZmlsdGVyKGggPT4gaC5zdGF0dXMgPT09IHN0YXR1cylcbiAgICAgIC5mb3JFYWNoKGggPT4gaC5jYWxsYmFjayhyZXNwb25zZSkpXG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGNhbmNlbFJlZkV2ZW50KCl7XG4gICAgaWYoIXRoaXMucmVmRXZlbnQpeyByZXR1cm4gfVxuICAgIHRoaXMuY2hhbm5lbC5vZmYodGhpcy5yZWZFdmVudClcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgY2FuY2VsVGltZW91dCgpe1xuICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVvdXRUaW1lcilcbiAgICB0aGlzLnRpbWVvdXRUaW1lciA9IG51bGxcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgc3RhcnRUaW1lb3V0KCl7XG4gICAgaWYodGhpcy50aW1lb3V0VGltZXIpeyB0aGlzLmNhbmNlbFRpbWVvdXQoKSB9XG4gICAgdGhpcy5yZWYgPSB0aGlzLmNoYW5uZWwuc29ja2V0Lm1ha2VSZWYoKVxuICAgIHRoaXMucmVmRXZlbnQgPSB0aGlzLmNoYW5uZWwucmVwbHlFdmVudE5hbWUodGhpcy5yZWYpXG5cbiAgICB0aGlzLmNoYW5uZWwub24odGhpcy5yZWZFdmVudCwgcGF5bG9hZCA9PiB7XG4gICAgICB0aGlzLmNhbmNlbFJlZkV2ZW50KClcbiAgICAgIHRoaXMuY2FuY2VsVGltZW91dCgpXG4gICAgICB0aGlzLnJlY2VpdmVkUmVzcCA9IHBheWxvYWRcbiAgICAgIHRoaXMubWF0Y2hSZWNlaXZlKHBheWxvYWQpXG4gICAgfSlcblxuICAgIHRoaXMudGltZW91dFRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLnRyaWdnZXIoXCJ0aW1lb3V0XCIsIHt9KVxuICAgIH0sIHRoaXMudGltZW91dClcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgaGFzUmVjZWl2ZWQoc3RhdHVzKXtcbiAgICByZXR1cm4gdGhpcy5yZWNlaXZlZFJlc3AgJiYgdGhpcy5yZWNlaXZlZFJlc3Auc3RhdHVzID09PSBzdGF0dXNcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdHJpZ2dlcihzdGF0dXMsIHJlc3BvbnNlKXtcbiAgICB0aGlzLmNoYW5uZWwudHJpZ2dlcih0aGlzLnJlZkV2ZW50LCB7c3RhdHVzLCByZXNwb25zZX0pXG4gIH1cbn1cbiIsICIvKipcbiAqXG4gKiBDcmVhdGVzIGEgdGltZXIgdGhhdCBhY2NlcHRzIGEgYHRpbWVyQ2FsY2AgZnVuY3Rpb24gdG8gcGVyZm9ybVxuICogY2FsY3VsYXRlZCB0aW1lb3V0IHJldHJpZXMsIHN1Y2ggYXMgZXhwb25lbnRpYWwgYmFja29mZi5cbiAqXG4gKiBAZXhhbXBsZVxuICogbGV0IHJlY29ubmVjdFRpbWVyID0gbmV3IFRpbWVyKCgpID0+IHRoaXMuY29ubmVjdCgpLCBmdW5jdGlvbih0cmllcyl7XG4gKiAgIHJldHVybiBbMTAwMCwgNTAwMCwgMTAwMDBdW3RyaWVzIC0gMV0gfHwgMTAwMDBcbiAqIH0pXG4gKiByZWNvbm5lY3RUaW1lci5zY2hlZHVsZVRpbWVvdXQoKSAvLyBmaXJlcyBhZnRlciAxMDAwXG4gKiByZWNvbm5lY3RUaW1lci5zY2hlZHVsZVRpbWVvdXQoKSAvLyBmaXJlcyBhZnRlciA1MDAwXG4gKiByZWNvbm5lY3RUaW1lci5yZXNldCgpXG4gKiByZWNvbm5lY3RUaW1lci5zY2hlZHVsZVRpbWVvdXQoKSAvLyBmaXJlcyBhZnRlciAxMDAwXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHRpbWVyQ2FsY1xuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUaW1lciB7XG4gIGNvbnN0cnVjdG9yKGNhbGxiYWNrLCB0aW1lckNhbGMpe1xuICAgIHRoaXMuY2FsbGJhY2sgPSBjYWxsYmFja1xuICAgIHRoaXMudGltZXJDYWxjID0gdGltZXJDYWxjXG4gICAgdGhpcy50aW1lciA9IG51bGxcbiAgICB0aGlzLnRyaWVzID0gMFxuICB9XG5cbiAgcmVzZXQoKXtcbiAgICB0aGlzLnRyaWVzID0gMFxuICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVyKVxuICB9XG5cbiAgLyoqXG4gICAqIENhbmNlbHMgYW55IHByZXZpb3VzIHNjaGVkdWxlVGltZW91dCBhbmQgc2NoZWR1bGVzIGNhbGxiYWNrXG4gICAqL1xuICBzY2hlZHVsZVRpbWVvdXQoKXtcbiAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lcilcblxuICAgIHRoaXMudGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMudHJpZXMgPSB0aGlzLnRyaWVzICsgMVxuICAgICAgdGhpcy5jYWxsYmFjaygpXG4gICAgfSwgdGhpcy50aW1lckNhbGModGhpcy50cmllcyArIDEpKVxuICB9XG59XG4iLCAiaW1wb3J0IHtjbG9zdXJlfSBmcm9tIFwiLi91dGlsc1wiXG5pbXBvcnQge1xuICBDSEFOTkVMX0VWRU5UUyxcbiAgQ0hBTk5FTF9TVEFURVMsXG59IGZyb20gXCIuL2NvbnN0YW50c1wiXG5cbmltcG9ydCBQdXNoIGZyb20gXCIuL3B1c2hcIlxuaW1wb3J0IFRpbWVyIGZyb20gXCIuL3RpbWVyXCJcblxuLyoqXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHRvcGljXG4gKiBAcGFyYW0geyhPYmplY3R8ZnVuY3Rpb24pfSBwYXJhbXNcbiAqIEBwYXJhbSB7U29ja2V0fSBzb2NrZXRcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2hhbm5lbCB7XG4gIGNvbnN0cnVjdG9yKHRvcGljLCBwYXJhbXMsIHNvY2tldCl7XG4gICAgdGhpcy5zdGF0ZSA9IENIQU5ORUxfU1RBVEVTLmNsb3NlZFxuICAgIHRoaXMudG9waWMgPSB0b3BpY1xuICAgIHRoaXMucGFyYW1zID0gY2xvc3VyZShwYXJhbXMgfHwge30pXG4gICAgdGhpcy5zb2NrZXQgPSBzb2NrZXRcbiAgICB0aGlzLmJpbmRpbmdzID0gW11cbiAgICB0aGlzLmJpbmRpbmdSZWYgPSAwXG4gICAgdGhpcy50aW1lb3V0ID0gdGhpcy5zb2NrZXQudGltZW91dFxuICAgIHRoaXMuam9pbmVkT25jZSA9IGZhbHNlXG4gICAgdGhpcy5qb2luUHVzaCA9IG5ldyBQdXNoKHRoaXMsIENIQU5ORUxfRVZFTlRTLmpvaW4sIHRoaXMucGFyYW1zLCB0aGlzLnRpbWVvdXQpXG4gICAgdGhpcy5wdXNoQnVmZmVyID0gW11cbiAgICB0aGlzLnN0YXRlQ2hhbmdlUmVmcyA9IFtdXG5cbiAgICB0aGlzLnJlam9pblRpbWVyID0gbmV3IFRpbWVyKCgpID0+IHtcbiAgICAgIGlmKHRoaXMuc29ja2V0LmlzQ29ubmVjdGVkKCkpeyB0aGlzLnJlam9pbigpIH1cbiAgICB9LCB0aGlzLnNvY2tldC5yZWpvaW5BZnRlck1zKVxuICAgIHRoaXMuc3RhdGVDaGFuZ2VSZWZzLnB1c2godGhpcy5zb2NrZXQub25FcnJvcigoKSA9PiB0aGlzLnJlam9pblRpbWVyLnJlc2V0KCkpKVxuICAgIHRoaXMuc3RhdGVDaGFuZ2VSZWZzLnB1c2godGhpcy5zb2NrZXQub25PcGVuKCgpID0+IHtcbiAgICAgIHRoaXMucmVqb2luVGltZXIucmVzZXQoKVxuICAgICAgaWYodGhpcy5pc0Vycm9yZWQoKSl7IHRoaXMucmVqb2luKCkgfVxuICAgIH0pXG4gICAgKVxuICAgIHRoaXMuam9pblB1c2gucmVjZWl2ZShcIm9rXCIsICgpID0+IHtcbiAgICAgIHRoaXMuc3RhdGUgPSBDSEFOTkVMX1NUQVRFUy5qb2luZWRcbiAgICAgIHRoaXMucmVqb2luVGltZXIucmVzZXQoKVxuICAgICAgdGhpcy5wdXNoQnVmZmVyLmZvckVhY2gocHVzaEV2ZW50ID0+IHB1c2hFdmVudC5zZW5kKCkpXG4gICAgICB0aGlzLnB1c2hCdWZmZXIgPSBbXVxuICAgIH0pXG4gICAgdGhpcy5qb2luUHVzaC5yZWNlaXZlKFwiZXJyb3JcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5zdGF0ZSA9IENIQU5ORUxfU1RBVEVTLmVycm9yZWRcbiAgICAgIGlmKHRoaXMuc29ja2V0LmlzQ29ubmVjdGVkKCkpeyB0aGlzLnJlam9pblRpbWVyLnNjaGVkdWxlVGltZW91dCgpIH1cbiAgICB9KVxuICAgIHRoaXMub25DbG9zZSgoKSA9PiB7XG4gICAgICB0aGlzLnJlam9pblRpbWVyLnJlc2V0KClcbiAgICAgIGlmKHRoaXMuc29ja2V0Lmhhc0xvZ2dlcigpKSB0aGlzLnNvY2tldC5sb2coXCJjaGFubmVsXCIsIGBjbG9zZSAke3RoaXMudG9waWN9ICR7dGhpcy5qb2luUmVmKCl9YClcbiAgICAgIHRoaXMuc3RhdGUgPSBDSEFOTkVMX1NUQVRFUy5jbG9zZWRcbiAgICAgIHRoaXMuc29ja2V0LnJlbW92ZSh0aGlzKVxuICAgIH0pXG4gICAgdGhpcy5vbkVycm9yKHJlYXNvbiA9PiB7XG4gICAgICBpZih0aGlzLnNvY2tldC5oYXNMb2dnZXIoKSkgdGhpcy5zb2NrZXQubG9nKFwiY2hhbm5lbFwiLCBgZXJyb3IgJHt0aGlzLnRvcGljfWAsIHJlYXNvbilcbiAgICAgIGlmKHRoaXMuaXNKb2luaW5nKCkpeyB0aGlzLmpvaW5QdXNoLnJlc2V0KCkgfVxuICAgICAgdGhpcy5zdGF0ZSA9IENIQU5ORUxfU1RBVEVTLmVycm9yZWRcbiAgICAgIGlmKHRoaXMuc29ja2V0LmlzQ29ubmVjdGVkKCkpeyB0aGlzLnJlam9pblRpbWVyLnNjaGVkdWxlVGltZW91dCgpIH1cbiAgICB9KVxuICAgIHRoaXMuam9pblB1c2gucmVjZWl2ZShcInRpbWVvdXRcIiwgKCkgPT4ge1xuICAgICAgaWYodGhpcy5zb2NrZXQuaGFzTG9nZ2VyKCkpIHRoaXMuc29ja2V0LmxvZyhcImNoYW5uZWxcIiwgYHRpbWVvdXQgJHt0aGlzLnRvcGljfSAoJHt0aGlzLmpvaW5SZWYoKX0pYCwgdGhpcy5qb2luUHVzaC50aW1lb3V0KVxuICAgICAgbGV0IGxlYXZlUHVzaCA9IG5ldyBQdXNoKHRoaXMsIENIQU5ORUxfRVZFTlRTLmxlYXZlLCBjbG9zdXJlKHt9KSwgdGhpcy50aW1lb3V0KVxuICAgICAgbGVhdmVQdXNoLnNlbmQoKVxuICAgICAgdGhpcy5zdGF0ZSA9IENIQU5ORUxfU1RBVEVTLmVycm9yZWRcbiAgICAgIHRoaXMuam9pblB1c2gucmVzZXQoKVxuICAgICAgaWYodGhpcy5zb2NrZXQuaXNDb25uZWN0ZWQoKSl7IHRoaXMucmVqb2luVGltZXIuc2NoZWR1bGVUaW1lb3V0KCkgfVxuICAgIH0pXG4gICAgdGhpcy5vbihDSEFOTkVMX0VWRU5UUy5yZXBseSwgKHBheWxvYWQsIHJlZikgPT4ge1xuICAgICAgdGhpcy50cmlnZ2VyKHRoaXMucmVwbHlFdmVudE5hbWUocmVmKSwgcGF5bG9hZClcbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqIEpvaW4gdGhlIGNoYW5uZWxcbiAgICogQHBhcmFtIHtpbnRlZ2VyfSB0aW1lb3V0XG4gICAqIEByZXR1cm5zIHtQdXNofVxuICAgKi9cbiAgam9pbih0aW1lb3V0ID0gdGhpcy50aW1lb3V0KXtcbiAgICBpZih0aGlzLmpvaW5lZE9uY2Upe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwidHJpZWQgdG8gam9pbiBtdWx0aXBsZSB0aW1lcy4gJ2pvaW4nIGNhbiBvbmx5IGJlIGNhbGxlZCBhIHNpbmdsZSB0aW1lIHBlciBjaGFubmVsIGluc3RhbmNlXCIpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMudGltZW91dCA9IHRpbWVvdXRcbiAgICAgIHRoaXMuam9pbmVkT25jZSA9IHRydWVcbiAgICAgIHRoaXMucmVqb2luKClcbiAgICAgIHJldHVybiB0aGlzLmpvaW5QdXNoXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEhvb2sgaW50byBjaGFubmVsIGNsb3NlXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gICAqL1xuICBvbkNsb3NlKGNhbGxiYWNrKXtcbiAgICB0aGlzLm9uKENIQU5ORUxfRVZFTlRTLmNsb3NlLCBjYWxsYmFjaylcbiAgfVxuXG4gIC8qKlxuICAgKiBIb29rIGludG8gY2hhbm5lbCBlcnJvcnNcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcbiAgICovXG4gIG9uRXJyb3IoY2FsbGJhY2spe1xuICAgIHJldHVybiB0aGlzLm9uKENIQU5ORUxfRVZFTlRTLmVycm9yLCByZWFzb24gPT4gY2FsbGJhY2socmVhc29uKSlcbiAgfVxuXG4gIC8qKlxuICAgKiBTdWJzY3JpYmVzIG9uIGNoYW5uZWwgZXZlbnRzXG4gICAqXG4gICAqIFN1YnNjcmlwdGlvbiByZXR1cm5zIGEgcmVmIGNvdW50ZXIsIHdoaWNoIGNhbiBiZSB1c2VkIGxhdGVyIHRvXG4gICAqIHVuc3Vic2NyaWJlIHRoZSBleGFjdCBldmVudCBsaXN0ZW5lclxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBjb25zdCByZWYxID0gY2hhbm5lbC5vbihcImV2ZW50XCIsIGRvX3N0dWZmKVxuICAgKiBjb25zdCByZWYyID0gY2hhbm5lbC5vbihcImV2ZW50XCIsIGRvX290aGVyX3N0dWZmKVxuICAgKiBjaGFubmVsLm9mZihcImV2ZW50XCIsIHJlZjEpXG4gICAqIC8vIFNpbmNlIHVuc3Vic2NyaXB0aW9uLCBkb19zdHVmZiB3b24ndCBmaXJlLFxuICAgKiAvLyB3aGlsZSBkb19vdGhlcl9zdHVmZiB3aWxsIGtlZXAgZmlyaW5nIG9uIHRoZSBcImV2ZW50XCJcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50XG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gICAqIEByZXR1cm5zIHtpbnRlZ2VyfSByZWZcbiAgICovXG4gIG9uKGV2ZW50LCBjYWxsYmFjayl7XG4gICAgbGV0IHJlZiA9IHRoaXMuYmluZGluZ1JlZisrXG4gICAgdGhpcy5iaW5kaW5ncy5wdXNoKHtldmVudCwgcmVmLCBjYWxsYmFja30pXG4gICAgcmV0dXJuIHJlZlxuICB9XG5cbiAgLyoqXG4gICAqIFVuc3Vic2NyaWJlcyBvZmYgb2YgY2hhbm5lbCBldmVudHNcbiAgICpcbiAgICogVXNlIHRoZSByZWYgcmV0dXJuZWQgZnJvbSBhIGNoYW5uZWwub24oKSB0byB1bnN1YnNjcmliZSBvbmVcbiAgICogaGFuZGxlciwgb3IgcGFzcyBub3RoaW5nIGZvciB0aGUgcmVmIHRvIHVuc3Vic2NyaWJlIGFsbFxuICAgKiBoYW5kbGVycyBmb3IgdGhlIGdpdmVuIGV2ZW50LlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiAvLyBVbnN1YnNjcmliZSB0aGUgZG9fc3R1ZmYgaGFuZGxlclxuICAgKiBjb25zdCByZWYxID0gY2hhbm5lbC5vbihcImV2ZW50XCIsIGRvX3N0dWZmKVxuICAgKiBjaGFubmVsLm9mZihcImV2ZW50XCIsIHJlZjEpXG4gICAqXG4gICAqIC8vIFVuc3Vic2NyaWJlIGFsbCBoYW5kbGVycyBmcm9tIGV2ZW50XG4gICAqIGNoYW5uZWwub2ZmKFwiZXZlbnRcIilcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50XG4gICAqIEBwYXJhbSB7aW50ZWdlcn0gcmVmXG4gICAqL1xuICBvZmYoZXZlbnQsIHJlZil7XG4gICAgdGhpcy5iaW5kaW5ncyA9IHRoaXMuYmluZGluZ3MuZmlsdGVyKChiaW5kKSA9PiB7XG4gICAgICByZXR1cm4gIShiaW5kLmV2ZW50ID09PSBldmVudCAmJiAodHlwZW9mIHJlZiA9PT0gXCJ1bmRlZmluZWRcIiB8fCByZWYgPT09IGJpbmQucmVmKSlcbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBjYW5QdXNoKCl7IHJldHVybiB0aGlzLnNvY2tldC5pc0Nvbm5lY3RlZCgpICYmIHRoaXMuaXNKb2luZWQoKSB9XG5cbiAgLyoqXG4gICAqIFNlbmRzIGEgbWVzc2FnZSBgZXZlbnRgIHRvIHBob2VuaXggd2l0aCB0aGUgcGF5bG9hZCBgcGF5bG9hZGAuXG4gICAqIFBob2VuaXggcmVjZWl2ZXMgdGhpcyBpbiB0aGUgYGhhbmRsZV9pbihldmVudCwgcGF5bG9hZCwgc29ja2V0KWBcbiAgICogZnVuY3Rpb24uIGlmIHBob2VuaXggcmVwbGllcyBvciBpdCB0aW1lcyBvdXQgKGRlZmF1bHQgMTAwMDBtcyksXG4gICAqIHRoZW4gb3B0aW9uYWxseSB0aGUgcmVwbHkgY2FuIGJlIHJlY2VpdmVkLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBjaGFubmVsLnB1c2goXCJldmVudFwiKVxuICAgKiAgIC5yZWNlaXZlKFwib2tcIiwgcGF5bG9hZCA9PiBjb25zb2xlLmxvZyhcInBob2VuaXggcmVwbGllZDpcIiwgcGF5bG9hZCkpXG4gICAqICAgLnJlY2VpdmUoXCJlcnJvclwiLCBlcnIgPT4gY29uc29sZS5sb2coXCJwaG9lbml4IGVycm9yZWRcIiwgZXJyKSlcbiAgICogICAucmVjZWl2ZShcInRpbWVvdXRcIiwgKCkgPT4gY29uc29sZS5sb2coXCJ0aW1lZCBvdXQgcHVzaGluZ1wiKSlcbiAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50XG4gICAqIEBwYXJhbSB7T2JqZWN0fSBwYXlsb2FkXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbdGltZW91dF1cbiAgICogQHJldHVybnMge1B1c2h9XG4gICAqL1xuICBwdXNoKGV2ZW50LCBwYXlsb2FkLCB0aW1lb3V0ID0gdGhpcy50aW1lb3V0KXtcbiAgICBwYXlsb2FkID0gcGF5bG9hZCB8fCB7fVxuICAgIGlmKCF0aGlzLmpvaW5lZE9uY2Upe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGB0cmllZCB0byBwdXNoICcke2V2ZW50fScgdG8gJyR7dGhpcy50b3BpY30nIGJlZm9yZSBqb2luaW5nLiBVc2UgY2hhbm5lbC5qb2luKCkgYmVmb3JlIHB1c2hpbmcgZXZlbnRzYClcbiAgICB9XG4gICAgbGV0IHB1c2hFdmVudCA9IG5ldyBQdXNoKHRoaXMsIGV2ZW50LCBmdW5jdGlvbiAoKXsgcmV0dXJuIHBheWxvYWQgfSwgdGltZW91dClcbiAgICBpZih0aGlzLmNhblB1c2goKSl7XG4gICAgICBwdXNoRXZlbnQuc2VuZCgpXG4gICAgfSBlbHNlIHtcbiAgICAgIHB1c2hFdmVudC5zdGFydFRpbWVvdXQoKVxuICAgICAgdGhpcy5wdXNoQnVmZmVyLnB1c2gocHVzaEV2ZW50KVxuICAgIH1cblxuICAgIHJldHVybiBwdXNoRXZlbnRcbiAgfVxuXG4gIC8qKiBMZWF2ZXMgdGhlIGNoYW5uZWxcbiAgICpcbiAgICogVW5zdWJzY3JpYmVzIGZyb20gc2VydmVyIGV2ZW50cywgYW5kXG4gICAqIGluc3RydWN0cyBjaGFubmVsIHRvIHRlcm1pbmF0ZSBvbiBzZXJ2ZXJcbiAgICpcbiAgICogVHJpZ2dlcnMgb25DbG9zZSgpIGhvb2tzXG4gICAqXG4gICAqIFRvIHJlY2VpdmUgbGVhdmUgYWNrbm93bGVkZ2VtZW50cywgdXNlIHRoZSBgcmVjZWl2ZWBcbiAgICogaG9vayB0byBiaW5kIHRvIHRoZSBzZXJ2ZXIgYWNrLCBpZTpcbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogY2hhbm5lbC5sZWF2ZSgpLnJlY2VpdmUoXCJva1wiLCAoKSA9PiBhbGVydChcImxlZnQhXCIpIClcbiAgICpcbiAgICogQHBhcmFtIHtpbnRlZ2VyfSB0aW1lb3V0XG4gICAqIEByZXR1cm5zIHtQdXNofVxuICAgKi9cbiAgbGVhdmUodGltZW91dCA9IHRoaXMudGltZW91dCl7XG4gICAgdGhpcy5yZWpvaW5UaW1lci5yZXNldCgpXG4gICAgdGhpcy5qb2luUHVzaC5jYW5jZWxUaW1lb3V0KClcblxuICAgIHRoaXMuc3RhdGUgPSBDSEFOTkVMX1NUQVRFUy5sZWF2aW5nXG4gICAgbGV0IG9uQ2xvc2UgPSAoKSA9PiB7XG4gICAgICBpZih0aGlzLnNvY2tldC5oYXNMb2dnZXIoKSkgdGhpcy5zb2NrZXQubG9nKFwiY2hhbm5lbFwiLCBgbGVhdmUgJHt0aGlzLnRvcGljfWApXG4gICAgICB0aGlzLnRyaWdnZXIoQ0hBTk5FTF9FVkVOVFMuY2xvc2UsIFwibGVhdmVcIilcbiAgICB9XG4gICAgbGV0IGxlYXZlUHVzaCA9IG5ldyBQdXNoKHRoaXMsIENIQU5ORUxfRVZFTlRTLmxlYXZlLCBjbG9zdXJlKHt9KSwgdGltZW91dClcbiAgICBsZWF2ZVB1c2gucmVjZWl2ZShcIm9rXCIsICgpID0+IG9uQ2xvc2UoKSlcbiAgICAgIC5yZWNlaXZlKFwidGltZW91dFwiLCAoKSA9PiBvbkNsb3NlKCkpXG4gICAgbGVhdmVQdXNoLnNlbmQoKVxuICAgIGlmKCF0aGlzLmNhblB1c2goKSl7IGxlYXZlUHVzaC50cmlnZ2VyKFwib2tcIiwge30pIH1cblxuICAgIHJldHVybiBsZWF2ZVB1c2hcbiAgfVxuXG4gIC8qKlxuICAgKiBPdmVycmlkYWJsZSBtZXNzYWdlIGhvb2tcbiAgICpcbiAgICogUmVjZWl2ZXMgYWxsIGV2ZW50cyBmb3Igc3BlY2lhbGl6ZWQgbWVzc2FnZSBoYW5kbGluZ1xuICAgKiBiZWZvcmUgZGlzcGF0Y2hpbmcgdG8gdGhlIGNoYW5uZWwgY2FsbGJhY2tzLlxuICAgKlxuICAgKiBNdXN0IHJldHVybiB0aGUgcGF5bG9hZCwgbW9kaWZpZWQgb3IgdW5tb2RpZmllZFxuICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnRcbiAgICogQHBhcmFtIHtPYmplY3R9IHBheWxvYWRcbiAgICogQHBhcmFtIHtpbnRlZ2VyfSByZWZcbiAgICogQHJldHVybnMge09iamVjdH1cbiAgICovXG4gIG9uTWVzc2FnZShfZXZlbnQsIHBheWxvYWQsIF9yZWYpeyByZXR1cm4gcGF5bG9hZCB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBpc01lbWJlcih0b3BpYywgZXZlbnQsIHBheWxvYWQsIGpvaW5SZWYpe1xuICAgIGlmKHRoaXMudG9waWMgIT09IHRvcGljKXsgcmV0dXJuIGZhbHNlIH1cblxuICAgIGlmKGpvaW5SZWYgJiYgam9pblJlZiAhPT0gdGhpcy5qb2luUmVmKCkpe1xuICAgICAgaWYodGhpcy5zb2NrZXQuaGFzTG9nZ2VyKCkpIHRoaXMuc29ja2V0LmxvZyhcImNoYW5uZWxcIiwgXCJkcm9wcGluZyBvdXRkYXRlZCBtZXNzYWdlXCIsIHt0b3BpYywgZXZlbnQsIHBheWxvYWQsIGpvaW5SZWZ9KVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBqb2luUmVmKCl7IHJldHVybiB0aGlzLmpvaW5QdXNoLnJlZiB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICByZWpvaW4odGltZW91dCA9IHRoaXMudGltZW91dCl7XG4gICAgaWYodGhpcy5pc0xlYXZpbmcoKSl7IHJldHVybiB9XG4gICAgdGhpcy5zb2NrZXQubGVhdmVPcGVuVG9waWModGhpcy50b3BpYylcbiAgICB0aGlzLnN0YXRlID0gQ0hBTk5FTF9TVEFURVMuam9pbmluZ1xuICAgIHRoaXMuam9pblB1c2gucmVzZW5kKHRpbWVvdXQpXG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHRyaWdnZXIoZXZlbnQsIHBheWxvYWQsIHJlZiwgam9pblJlZil7XG4gICAgbGV0IGhhbmRsZWRQYXlsb2FkID0gdGhpcy5vbk1lc3NhZ2UoZXZlbnQsIHBheWxvYWQsIHJlZiwgam9pblJlZilcbiAgICBpZihwYXlsb2FkICYmICFoYW5kbGVkUGF5bG9hZCl7IHRocm93IG5ldyBFcnJvcihcImNoYW5uZWwgb25NZXNzYWdlIGNhbGxiYWNrcyBtdXN0IHJldHVybiB0aGUgcGF5bG9hZCwgbW9kaWZpZWQgb3IgdW5tb2RpZmllZFwiKSB9XG5cbiAgICBsZXQgZXZlbnRCaW5kaW5ncyA9IHRoaXMuYmluZGluZ3MuZmlsdGVyKGJpbmQgPT4gYmluZC5ldmVudCA9PT0gZXZlbnQpXG5cbiAgICBmb3IobGV0IGkgPSAwOyBpIDwgZXZlbnRCaW5kaW5ncy5sZW5ndGg7IGkrKyl7XG4gICAgICBsZXQgYmluZCA9IGV2ZW50QmluZGluZ3NbaV1cbiAgICAgIGJpbmQuY2FsbGJhY2soaGFuZGxlZFBheWxvYWQsIHJlZiwgam9pblJlZiB8fCB0aGlzLmpvaW5SZWYoKSlcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHJlcGx5RXZlbnROYW1lKHJlZil7IHJldHVybiBgY2hhbl9yZXBseV8ke3JlZn1gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGlzQ2xvc2VkKCl7IHJldHVybiB0aGlzLnN0YXRlID09PSBDSEFOTkVMX1NUQVRFUy5jbG9zZWQgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgaXNFcnJvcmVkKCl7IHJldHVybiB0aGlzLnN0YXRlID09PSBDSEFOTkVMX1NUQVRFUy5lcnJvcmVkIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGlzSm9pbmVkKCl7IHJldHVybiB0aGlzLnN0YXRlID09PSBDSEFOTkVMX1NUQVRFUy5qb2luZWQgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgaXNKb2luaW5nKCl7IHJldHVybiB0aGlzLnN0YXRlID09PSBDSEFOTkVMX1NUQVRFUy5qb2luaW5nIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGlzTGVhdmluZygpeyByZXR1cm4gdGhpcy5zdGF0ZSA9PT0gQ0hBTk5FTF9TVEFURVMubGVhdmluZyB9XG59XG4iLCAiaW1wb3J0IHtcbiAgZ2xvYmFsLFxuICBYSFJfU1RBVEVTXG59IGZyb20gXCIuL2NvbnN0YW50c1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFqYXgge1xuXG4gIHN0YXRpYyByZXF1ZXN0KG1ldGhvZCwgZW5kUG9pbnQsIGFjY2VwdCwgYm9keSwgdGltZW91dCwgb250aW1lb3V0LCBjYWxsYmFjayl7XG4gICAgaWYoZ2xvYmFsLlhEb21haW5SZXF1ZXN0KXtcbiAgICAgIGxldCByZXEgPSBuZXcgZ2xvYmFsLlhEb21haW5SZXF1ZXN0KCkgLy8gSUU4LCBJRTlcbiAgICAgIHJldHVybiB0aGlzLnhkb21haW5SZXF1ZXN0KHJlcSwgbWV0aG9kLCBlbmRQb2ludCwgYm9keSwgdGltZW91dCwgb250aW1lb3V0LCBjYWxsYmFjaylcbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IHJlcSA9IG5ldyBnbG9iYWwuWE1MSHR0cFJlcXVlc3QoKSAvLyBJRTcrLCBGaXJlZm94LCBDaHJvbWUsIE9wZXJhLCBTYWZhcmlcbiAgICAgIHJldHVybiB0aGlzLnhoclJlcXVlc3QocmVxLCBtZXRob2QsIGVuZFBvaW50LCBhY2NlcHQsIGJvZHksIHRpbWVvdXQsIG9udGltZW91dCwgY2FsbGJhY2spXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIHhkb21haW5SZXF1ZXN0KHJlcSwgbWV0aG9kLCBlbmRQb2ludCwgYm9keSwgdGltZW91dCwgb250aW1lb3V0LCBjYWxsYmFjayl7XG4gICAgcmVxLnRpbWVvdXQgPSB0aW1lb3V0XG4gICAgcmVxLm9wZW4obWV0aG9kLCBlbmRQb2ludClcbiAgICByZXEub25sb2FkID0gKCkgPT4ge1xuICAgICAgbGV0IHJlc3BvbnNlID0gdGhpcy5wYXJzZUpTT04ocmVxLnJlc3BvbnNlVGV4dClcbiAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKHJlc3BvbnNlKVxuICAgIH1cbiAgICBpZihvbnRpbWVvdXQpeyByZXEub250aW1lb3V0ID0gb250aW1lb3V0IH1cblxuICAgIC8vIFdvcmsgYXJvdW5kIGJ1ZyBpbiBJRTkgdGhhdCByZXF1aXJlcyBhbiBhdHRhY2hlZCBvbnByb2dyZXNzIGhhbmRsZXJcbiAgICByZXEub25wcm9ncmVzcyA9ICgpID0+IHsgfVxuXG4gICAgcmVxLnNlbmQoYm9keSlcbiAgICByZXR1cm4gcmVxXG4gIH1cblxuICBzdGF0aWMgeGhyUmVxdWVzdChyZXEsIG1ldGhvZCwgZW5kUG9pbnQsIGFjY2VwdCwgYm9keSwgdGltZW91dCwgb250aW1lb3V0LCBjYWxsYmFjayl7XG4gICAgcmVxLm9wZW4obWV0aG9kLCBlbmRQb2ludCwgdHJ1ZSlcbiAgICByZXEudGltZW91dCA9IHRpbWVvdXRcbiAgICByZXEuc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtVHlwZVwiLCBhY2NlcHQpXG4gICAgcmVxLm9uZXJyb3IgPSAoKSA9PiBjYWxsYmFjayAmJiBjYWxsYmFjayhudWxsKVxuICAgIHJlcS5vbnJlYWR5c3RhdGVjaGFuZ2UgPSAoKSA9PiB7XG4gICAgICBpZihyZXEucmVhZHlTdGF0ZSA9PT0gWEhSX1NUQVRFUy5jb21wbGV0ZSAmJiBjYWxsYmFjayl7XG4gICAgICAgIGxldCByZXNwb25zZSA9IHRoaXMucGFyc2VKU09OKHJlcS5yZXNwb25zZVRleHQpXG4gICAgICAgIGNhbGxiYWNrKHJlc3BvbnNlKVxuICAgICAgfVxuICAgIH1cbiAgICBpZihvbnRpbWVvdXQpeyByZXEub250aW1lb3V0ID0gb250aW1lb3V0IH1cblxuICAgIHJlcS5zZW5kKGJvZHkpXG4gICAgcmV0dXJuIHJlcVxuICB9XG5cbiAgc3RhdGljIHBhcnNlSlNPTihyZXNwKXtcbiAgICBpZighcmVzcCB8fCByZXNwID09PSBcIlwiKXsgcmV0dXJuIG51bGwgfVxuXG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBKU09OLnBhcnNlKHJlc3ApXG4gICAgfSBjYXRjaCAoZSl7XG4gICAgICBjb25zb2xlICYmIGNvbnNvbGUubG9nKFwiZmFpbGVkIHRvIHBhcnNlIEpTT04gcmVzcG9uc2VcIiwgcmVzcClcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIHNlcmlhbGl6ZShvYmosIHBhcmVudEtleSl7XG4gICAgbGV0IHF1ZXJ5U3RyID0gW11cbiAgICBmb3IodmFyIGtleSBpbiBvYmope1xuICAgICAgaWYoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpeyBjb250aW51ZSB9XG4gICAgICBsZXQgcGFyYW1LZXkgPSBwYXJlbnRLZXkgPyBgJHtwYXJlbnRLZXl9WyR7a2V5fV1gIDoga2V5XG4gICAgICBsZXQgcGFyYW1WYWwgPSBvYmpba2V5XVxuICAgICAgaWYodHlwZW9mIHBhcmFtVmFsID09PSBcIm9iamVjdFwiKXtcbiAgICAgICAgcXVlcnlTdHIucHVzaCh0aGlzLnNlcmlhbGl6ZShwYXJhbVZhbCwgcGFyYW1LZXkpKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcXVlcnlTdHIucHVzaChlbmNvZGVVUklDb21wb25lbnQocGFyYW1LZXkpICsgXCI9XCIgKyBlbmNvZGVVUklDb21wb25lbnQocGFyYW1WYWwpKVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcXVlcnlTdHIuam9pbihcIiZcIilcbiAgfVxuXG4gIHN0YXRpYyBhcHBlbmRQYXJhbXModXJsLCBwYXJhbXMpe1xuICAgIGlmKE9iamVjdC5rZXlzKHBhcmFtcykubGVuZ3RoID09PSAwKXsgcmV0dXJuIHVybCB9XG5cbiAgICBsZXQgcHJlZml4ID0gdXJsLm1hdGNoKC9cXD8vKSA/IFwiJlwiIDogXCI/XCJcbiAgICByZXR1cm4gYCR7dXJsfSR7cHJlZml4fSR7dGhpcy5zZXJpYWxpemUocGFyYW1zKX1gXG4gIH1cbn1cbiIsICJpbXBvcnQge1xuICBTT0NLRVRfU1RBVEVTLFxuICBUUkFOU1BPUlRTXG59IGZyb20gXCIuL2NvbnN0YW50c1wiXG5cbmltcG9ydCBBamF4IGZyb20gXCIuL2FqYXhcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMb25nUG9sbCB7XG5cbiAgY29uc3RydWN0b3IoZW5kUG9pbnQpe1xuICAgIHRoaXMuZW5kUG9pbnQgPSBudWxsXG4gICAgdGhpcy50b2tlbiA9IG51bGxcbiAgICB0aGlzLnNraXBIZWFydGJlYXQgPSB0cnVlXG4gICAgdGhpcy5yZXFzID0gbmV3IFNldCgpXG4gICAgdGhpcy5hd2FpdGluZ0JhdGNoQWNrID0gZmFsc2VcbiAgICB0aGlzLmN1cnJlbnRCYXRjaCA9IG51bGxcbiAgICB0aGlzLmN1cnJlbnRCYXRjaFRpbWVyID0gbnVsbFxuICAgIHRoaXMuYmF0Y2hCdWZmZXIgPSBbXVxuICAgIHRoaXMub25vcGVuID0gZnVuY3Rpb24gKCl7IH0gLy8gbm9vcFxuICAgIHRoaXMub25lcnJvciA9IGZ1bmN0aW9uICgpeyB9IC8vIG5vb3BcbiAgICB0aGlzLm9ubWVzc2FnZSA9IGZ1bmN0aW9uICgpeyB9IC8vIG5vb3BcbiAgICB0aGlzLm9uY2xvc2UgPSBmdW5jdGlvbiAoKXsgfSAvLyBub29wXG4gICAgdGhpcy5wb2xsRW5kcG9pbnQgPSB0aGlzLm5vcm1hbGl6ZUVuZHBvaW50KGVuZFBvaW50KVxuICAgIHRoaXMucmVhZHlTdGF0ZSA9IFNPQ0tFVF9TVEFURVMuY29ubmVjdGluZ1xuICAgIHRoaXMucG9sbCgpXG4gIH1cblxuICBub3JtYWxpemVFbmRwb2ludChlbmRQb2ludCl7XG4gICAgcmV0dXJuIChlbmRQb2ludFxuICAgICAgLnJlcGxhY2UoXCJ3czovL1wiLCBcImh0dHA6Ly9cIilcbiAgICAgIC5yZXBsYWNlKFwid3NzOi8vXCIsIFwiaHR0cHM6Ly9cIilcbiAgICAgIC5yZXBsYWNlKG5ldyBSZWdFeHAoXCIoLiopXFwvXCIgKyBUUkFOU1BPUlRTLndlYnNvY2tldCksIFwiJDEvXCIgKyBUUkFOU1BPUlRTLmxvbmdwb2xsKSlcbiAgfVxuXG4gIGVuZHBvaW50VVJMKCl7XG4gICAgcmV0dXJuIEFqYXguYXBwZW5kUGFyYW1zKHRoaXMucG9sbEVuZHBvaW50LCB7dG9rZW46IHRoaXMudG9rZW59KVxuICB9XG5cbiAgY2xvc2VBbmRSZXRyeShjb2RlLCByZWFzb24sIHdhc0NsZWFuKXtcbiAgICB0aGlzLmNsb3NlKGNvZGUsIHJlYXNvbiwgd2FzQ2xlYW4pXG4gICAgdGhpcy5yZWFkeVN0YXRlID0gU09DS0VUX1NUQVRFUy5jb25uZWN0aW5nXG4gIH1cblxuICBvbnRpbWVvdXQoKXtcbiAgICB0aGlzLm9uZXJyb3IoXCJ0aW1lb3V0XCIpXG4gICAgdGhpcy5jbG9zZUFuZFJldHJ5KDEwMDUsIFwidGltZW91dFwiLCBmYWxzZSlcbiAgfVxuXG4gIGlzQWN0aXZlKCl7IHJldHVybiB0aGlzLnJlYWR5U3RhdGUgPT09IFNPQ0tFVF9TVEFURVMub3BlbiB8fCB0aGlzLnJlYWR5U3RhdGUgPT09IFNPQ0tFVF9TVEFURVMuY29ubmVjdGluZyB9XG5cbiAgcG9sbCgpe1xuICAgIHRoaXMuYWpheChcIkdFVFwiLCBcImFwcGxpY2F0aW9uL2pzb25cIiwgbnVsbCwgKCkgPT4gdGhpcy5vbnRpbWVvdXQoKSwgcmVzcCA9PiB7XG4gICAgICBpZihyZXNwKXtcbiAgICAgICAgdmFyIHtzdGF0dXMsIHRva2VuLCBtZXNzYWdlc30gPSByZXNwXG4gICAgICAgIHRoaXMudG9rZW4gPSB0b2tlblxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3RhdHVzID0gMFxuICAgICAgfVxuXG4gICAgICBzd2l0Y2goc3RhdHVzKXtcbiAgICAgICAgY2FzZSAyMDA6XG4gICAgICAgICAgbWVzc2FnZXMuZm9yRWFjaChtc2cgPT4ge1xuICAgICAgICAgICAgLy8gVGFza3MgYXJlIHdoYXQgdGhpbmdzIGxpa2UgZXZlbnQgaGFuZGxlcnMsIHNldFRpbWVvdXQgY2FsbGJhY2tzLFxuICAgICAgICAgICAgLy8gcHJvbWlzZSByZXNvbHZlcyBhbmQgbW9yZSBhcmUgcnVuIHdpdGhpbi5cbiAgICAgICAgICAgIC8vIEluIG1vZGVybiBicm93c2VycywgdGhlcmUgYXJlIHR3byBkaWZmZXJlbnQga2luZHMgb2YgdGFza3MsXG4gICAgICAgICAgICAvLyBtaWNyb3Rhc2tzIGFuZCBtYWNyb3Rhc2tzLlxuICAgICAgICAgICAgLy8gTWljcm90YXNrcyBhcmUgbWFpbmx5IHVzZWQgZm9yIFByb21pc2VzLCB3aGlsZSBtYWNyb3Rhc2tzIGFyZVxuICAgICAgICAgICAgLy8gdXNlZCBmb3IgZXZlcnl0aGluZyBlbHNlLlxuICAgICAgICAgICAgLy8gTWljcm90YXNrcyBhbHdheXMgaGF2ZSBwcmlvcml0eSBvdmVyIG1hY3JvdGFza3MuIElmIHRoZSBKUyBlbmdpbmVcbiAgICAgICAgICAgIC8vIGlzIGxvb2tpbmcgZm9yIGEgdGFzayB0byBydW4sIGl0IHdpbGwgYWx3YXlzIHRyeSB0byBlbXB0eSB0aGVcbiAgICAgICAgICAgIC8vIG1pY3JvdGFzayBxdWV1ZSBiZWZvcmUgYXR0ZW1wdGluZyB0byBydW4gYW55dGhpbmcgZnJvbSB0aGVcbiAgICAgICAgICAgIC8vIG1hY3JvdGFzayBxdWV1ZS5cbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAvLyBGb3IgdGhlIFdlYlNvY2tldCB0cmFuc3BvcnQsIG1lc3NhZ2VzIGFsd2F5cyBhcnJpdmUgaW4gdGhlaXIgb3duXG4gICAgICAgICAgICAvLyBldmVudC4gVGhpcyBtZWFucyB0aGF0IGlmIGFueSBwcm9taXNlcyBhcmUgcmVzb2x2ZWQgZnJvbSB3aXRoaW4sXG4gICAgICAgICAgICAvLyB0aGVpciBjYWxsYmFja3Mgd2lsbCBhbHdheXMgZmluaXNoIGV4ZWN1dGlvbiBieSB0aGUgdGltZSB0aGVcbiAgICAgICAgICAgIC8vIG5leHQgbWVzc2FnZSBldmVudCBoYW5kbGVyIGlzIHJ1bi5cbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAvLyBJbiBvcmRlciB0byBlbXVsYXRlIHRoaXMgYmVoYXZpb3VyLCB3ZSBuZWVkIHRvIG1ha2Ugc3VyZSBlYWNoXG4gICAgICAgICAgICAvLyBvbm1lc3NhZ2UgaGFuZGxlciBpcyBydW4gd2l0aGluIGl0cyBvd24gbWFjcm90YXNrLlxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLm9ubWVzc2FnZSh7ZGF0YTogbXNnfSksIDApXG4gICAgICAgICAgfSlcbiAgICAgICAgICB0aGlzLnBvbGwoKVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgMjA0OlxuICAgICAgICAgIHRoaXMucG9sbCgpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSA0MTA6XG4gICAgICAgICAgdGhpcy5yZWFkeVN0YXRlID0gU09DS0VUX1NUQVRFUy5vcGVuXG4gICAgICAgICAgdGhpcy5vbm9wZW4oe30pXG4gICAgICAgICAgdGhpcy5wb2xsKClcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlIDQwMzpcbiAgICAgICAgICB0aGlzLm9uZXJyb3IoNDAzKVxuICAgICAgICAgIHRoaXMuY2xvc2UoMTAwOCwgXCJmb3JiaWRkZW5cIiwgZmFsc2UpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICBjYXNlIDUwMDpcbiAgICAgICAgICB0aGlzLm9uZXJyb3IoNTAwKVxuICAgICAgICAgIHRoaXMuY2xvc2VBbmRSZXRyeSgxMDExLCBcImludGVybmFsIHNlcnZlciBlcnJvclwiLCA1MDApXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgZGVmYXVsdDogdGhyb3cgbmV3IEVycm9yKGB1bmhhbmRsZWQgcG9sbCBzdGF0dXMgJHtzdGF0dXN9YClcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgLy8gd2UgY29sbGVjdCBhbGwgcHVzaGVzIHdpdGhpbiB0aGUgY3VycmVudCBldmVudCBsb29wIGJ5XG4gIC8vIHNldFRpbWVvdXQgMCwgd2hpY2ggb3B0aW1pemVzIGJhY2stdG8tYmFjayBwcm9jZWR1cmFsXG4gIC8vIHB1c2hlcyBhZ2FpbnN0IGFuIGVtcHR5IGJ1ZmZlclxuICBzZW5kKGJvZHkpe1xuICAgIGlmKHRoaXMuY3VycmVudEJhdGNoKXtcbiAgICAgIHRoaXMuY3VycmVudEJhdGNoLnB1c2goYm9keSlcbiAgICB9IGVsc2UgaWYodGhpcy5hd2FpdGluZ0JhdGNoQWNrKXtcbiAgICAgIHRoaXMuYmF0Y2hCdWZmZXIucHVzaChib2R5KVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmN1cnJlbnRCYXRjaCA9IFtib2R5XVxuICAgICAgdGhpcy5jdXJyZW50QmF0Y2hUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0aGlzLmJhdGNoU2VuZCh0aGlzLmN1cnJlbnRCYXRjaClcbiAgICAgICAgdGhpcy5jdXJyZW50QmF0Y2ggPSBudWxsXG4gICAgICB9LCAwKVxuICAgIH1cbiAgfVxuXG4gIGJhdGNoU2VuZChtZXNzYWdlcyl7XG4gICAgdGhpcy5hd2FpdGluZ0JhdGNoQWNrID0gdHJ1ZVxuICAgIHRoaXMuYWpheChcIlBPU1RcIiwgXCJhcHBsaWNhdGlvbi94LW5kanNvblwiLCBtZXNzYWdlcy5qb2luKFwiXFxuXCIpLCAoKSA9PiB0aGlzLm9uZXJyb3IoXCJ0aW1lb3V0XCIpLCByZXNwID0+IHtcbiAgICAgIHRoaXMuYXdhaXRpbmdCYXRjaEFjayA9IGZhbHNlXG4gICAgICBpZighcmVzcCB8fCByZXNwLnN0YXR1cyAhPT0gMjAwKXtcbiAgICAgICAgdGhpcy5vbmVycm9yKHJlc3AgJiYgcmVzcC5zdGF0dXMpXG4gICAgICAgIHRoaXMuY2xvc2VBbmRSZXRyeSgxMDExLCBcImludGVybmFsIHNlcnZlciBlcnJvclwiLCBmYWxzZSlcbiAgICAgIH0gZWxzZSBpZih0aGlzLmJhdGNoQnVmZmVyLmxlbmd0aCA+IDApe1xuICAgICAgICB0aGlzLmJhdGNoU2VuZCh0aGlzLmJhdGNoQnVmZmVyKVxuICAgICAgICB0aGlzLmJhdGNoQnVmZmVyID0gW11cbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgY2xvc2UoY29kZSwgcmVhc29uLCB3YXNDbGVhbil7XG4gICAgZm9yKGxldCByZXEgb2YgdGhpcy5yZXFzKXsgcmVxLmFib3J0KCkgfVxuICAgIHRoaXMucmVhZHlTdGF0ZSA9IFNPQ0tFVF9TVEFURVMuY2xvc2VkXG4gICAgbGV0IG9wdHMgPSBPYmplY3QuYXNzaWduKHtjb2RlOiAxMDAwLCByZWFzb246IHVuZGVmaW5lZCwgd2FzQ2xlYW46IHRydWV9LCB7Y29kZSwgcmVhc29uLCB3YXNDbGVhbn0pXG4gICAgdGhpcy5iYXRjaEJ1ZmZlciA9IFtdXG4gICAgY2xlYXJUaW1lb3V0KHRoaXMuY3VycmVudEJhdGNoVGltZXIpXG4gICAgdGhpcy5jdXJyZW50QmF0Y2hUaW1lciA9IG51bGxcbiAgICBpZih0eXBlb2YoQ2xvc2VFdmVudCkgIT09IFwidW5kZWZpbmVkXCIpe1xuICAgICAgdGhpcy5vbmNsb3NlKG5ldyBDbG9zZUV2ZW50KFwiY2xvc2VcIiwgb3B0cykpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMub25jbG9zZShvcHRzKVxuICAgIH1cbiAgfVxuXG4gIGFqYXgobWV0aG9kLCBjb250ZW50VHlwZSwgYm9keSwgb25DYWxsZXJUaW1lb3V0LCBjYWxsYmFjayl7XG4gICAgbGV0IHJlcVxuICAgIGxldCBvbnRpbWVvdXQgPSAoKSA9PiB7XG4gICAgICB0aGlzLnJlcXMuZGVsZXRlKHJlcSlcbiAgICAgIG9uQ2FsbGVyVGltZW91dCgpXG4gICAgfVxuICAgIHJlcSA9IEFqYXgucmVxdWVzdChtZXRob2QsIHRoaXMuZW5kcG9pbnRVUkwoKSwgY29udGVudFR5cGUsIGJvZHksIHRoaXMudGltZW91dCwgb250aW1lb3V0LCByZXNwID0+IHtcbiAgICAgIHRoaXMucmVxcy5kZWxldGUocmVxKVxuICAgICAgaWYodGhpcy5pc0FjdGl2ZSgpKXsgY2FsbGJhY2socmVzcCkgfVxuICAgIH0pXG4gICAgdGhpcy5yZXFzLmFkZChyZXEpXG4gIH1cbn1cbiIsICIvKipcbiAqIEluaXRpYWxpemVzIHRoZSBQcmVzZW5jZVxuICogQHBhcmFtIHtDaGFubmVsfSBjaGFubmVsIC0gVGhlIENoYW5uZWxcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gVGhlIG9wdGlvbnMsXG4gKiAgICAgICAgZm9yIGV4YW1wbGUgYHtldmVudHM6IHtzdGF0ZTogXCJzdGF0ZVwiLCBkaWZmOiBcImRpZmZcIn19YFxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQcmVzZW5jZSB7XG5cbiAgY29uc3RydWN0b3IoY2hhbm5lbCwgb3B0cyA9IHt9KXtcbiAgICBsZXQgZXZlbnRzID0gb3B0cy5ldmVudHMgfHwge3N0YXRlOiBcInByZXNlbmNlX3N0YXRlXCIsIGRpZmY6IFwicHJlc2VuY2VfZGlmZlwifVxuICAgIHRoaXMuc3RhdGUgPSB7fVxuICAgIHRoaXMucGVuZGluZ0RpZmZzID0gW11cbiAgICB0aGlzLmNoYW5uZWwgPSBjaGFubmVsXG4gICAgdGhpcy5qb2luUmVmID0gbnVsbFxuICAgIHRoaXMuY2FsbGVyID0ge1xuICAgICAgb25Kb2luOiBmdW5jdGlvbiAoKXsgfSxcbiAgICAgIG9uTGVhdmU6IGZ1bmN0aW9uICgpeyB9LFxuICAgICAgb25TeW5jOiBmdW5jdGlvbiAoKXsgfVxuICAgIH1cblxuICAgIHRoaXMuY2hhbm5lbC5vbihldmVudHMuc3RhdGUsIG5ld1N0YXRlID0+IHtcbiAgICAgIGxldCB7b25Kb2luLCBvbkxlYXZlLCBvblN5bmN9ID0gdGhpcy5jYWxsZXJcblxuICAgICAgdGhpcy5qb2luUmVmID0gdGhpcy5jaGFubmVsLmpvaW5SZWYoKVxuICAgICAgdGhpcy5zdGF0ZSA9IFByZXNlbmNlLnN5bmNTdGF0ZSh0aGlzLnN0YXRlLCBuZXdTdGF0ZSwgb25Kb2luLCBvbkxlYXZlKVxuXG4gICAgICB0aGlzLnBlbmRpbmdEaWZmcy5mb3JFYWNoKGRpZmYgPT4ge1xuICAgICAgICB0aGlzLnN0YXRlID0gUHJlc2VuY2Uuc3luY0RpZmYodGhpcy5zdGF0ZSwgZGlmZiwgb25Kb2luLCBvbkxlYXZlKVxuICAgICAgfSlcbiAgICAgIHRoaXMucGVuZGluZ0RpZmZzID0gW11cbiAgICAgIG9uU3luYygpXG4gICAgfSlcblxuICAgIHRoaXMuY2hhbm5lbC5vbihldmVudHMuZGlmZiwgZGlmZiA9PiB7XG4gICAgICBsZXQge29uSm9pbiwgb25MZWF2ZSwgb25TeW5jfSA9IHRoaXMuY2FsbGVyXG5cbiAgICAgIGlmKHRoaXMuaW5QZW5kaW5nU3luY1N0YXRlKCkpe1xuICAgICAgICB0aGlzLnBlbmRpbmdEaWZmcy5wdXNoKGRpZmYpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnN0YXRlID0gUHJlc2VuY2Uuc3luY0RpZmYodGhpcy5zdGF0ZSwgZGlmZiwgb25Kb2luLCBvbkxlYXZlKVxuICAgICAgICBvblN5bmMoKVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICBvbkpvaW4oY2FsbGJhY2speyB0aGlzLmNhbGxlci5vbkpvaW4gPSBjYWxsYmFjayB9XG5cbiAgb25MZWF2ZShjYWxsYmFjayl7IHRoaXMuY2FsbGVyLm9uTGVhdmUgPSBjYWxsYmFjayB9XG5cbiAgb25TeW5jKGNhbGxiYWNrKXsgdGhpcy5jYWxsZXIub25TeW5jID0gY2FsbGJhY2sgfVxuXG4gIGxpc3QoYnkpeyByZXR1cm4gUHJlc2VuY2UubGlzdCh0aGlzLnN0YXRlLCBieSkgfVxuXG4gIGluUGVuZGluZ1N5bmNTdGF0ZSgpe1xuICAgIHJldHVybiAhdGhpcy5qb2luUmVmIHx8ICh0aGlzLmpvaW5SZWYgIT09IHRoaXMuY2hhbm5lbC5qb2luUmVmKCkpXG4gIH1cblxuICAvLyBsb3dlci1sZXZlbCBwdWJsaWMgc3RhdGljIEFQSVxuXG4gIC8qKlxuICAgKiBVc2VkIHRvIHN5bmMgdGhlIGxpc3Qgb2YgcHJlc2VuY2VzIG9uIHRoZSBzZXJ2ZXJcbiAgICogd2l0aCB0aGUgY2xpZW50J3Mgc3RhdGUuIEFuIG9wdGlvbmFsIGBvbkpvaW5gIGFuZCBgb25MZWF2ZWAgY2FsbGJhY2sgY2FuXG4gICAqIGJlIHByb3ZpZGVkIHRvIHJlYWN0IHRvIGNoYW5nZXMgaW4gdGhlIGNsaWVudCdzIGxvY2FsIHByZXNlbmNlcyBhY3Jvc3NcbiAgICogZGlzY29ubmVjdHMgYW5kIHJlY29ubmVjdHMgd2l0aCB0aGUgc2VydmVyLlxuICAgKlxuICAgKiBAcmV0dXJucyB7UHJlc2VuY2V9XG4gICAqL1xuICBzdGF0aWMgc3luY1N0YXRlKGN1cnJlbnRTdGF0ZSwgbmV3U3RhdGUsIG9uSm9pbiwgb25MZWF2ZSl7XG4gICAgbGV0IHN0YXRlID0gdGhpcy5jbG9uZShjdXJyZW50U3RhdGUpXG4gICAgbGV0IGpvaW5zID0ge31cbiAgICBsZXQgbGVhdmVzID0ge31cblxuICAgIHRoaXMubWFwKHN0YXRlLCAoa2V5LCBwcmVzZW5jZSkgPT4ge1xuICAgICAgaWYoIW5ld1N0YXRlW2tleV0pe1xuICAgICAgICBsZWF2ZXNba2V5XSA9IHByZXNlbmNlXG4gICAgICB9XG4gICAgfSlcbiAgICB0aGlzLm1hcChuZXdTdGF0ZSwgKGtleSwgbmV3UHJlc2VuY2UpID0+IHtcbiAgICAgIGxldCBjdXJyZW50UHJlc2VuY2UgPSBzdGF0ZVtrZXldXG4gICAgICBpZihjdXJyZW50UHJlc2VuY2Upe1xuICAgICAgICBsZXQgbmV3UmVmcyA9IG5ld1ByZXNlbmNlLm1ldGFzLm1hcChtID0+IG0ucGh4X3JlZilcbiAgICAgICAgbGV0IGN1clJlZnMgPSBjdXJyZW50UHJlc2VuY2UubWV0YXMubWFwKG0gPT4gbS5waHhfcmVmKVxuICAgICAgICBsZXQgam9pbmVkTWV0YXMgPSBuZXdQcmVzZW5jZS5tZXRhcy5maWx0ZXIobSA9PiBjdXJSZWZzLmluZGV4T2YobS5waHhfcmVmKSA8IDApXG4gICAgICAgIGxldCBsZWZ0TWV0YXMgPSBjdXJyZW50UHJlc2VuY2UubWV0YXMuZmlsdGVyKG0gPT4gbmV3UmVmcy5pbmRleE9mKG0ucGh4X3JlZikgPCAwKVxuICAgICAgICBpZihqb2luZWRNZXRhcy5sZW5ndGggPiAwKXtcbiAgICAgICAgICBqb2luc1trZXldID0gbmV3UHJlc2VuY2VcbiAgICAgICAgICBqb2luc1trZXldLm1ldGFzID0gam9pbmVkTWV0YXNcbiAgICAgICAgfVxuICAgICAgICBpZihsZWZ0TWV0YXMubGVuZ3RoID4gMCl7XG4gICAgICAgICAgbGVhdmVzW2tleV0gPSB0aGlzLmNsb25lKGN1cnJlbnRQcmVzZW5jZSlcbiAgICAgICAgICBsZWF2ZXNba2V5XS5tZXRhcyA9IGxlZnRNZXRhc1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBqb2luc1trZXldID0gbmV3UHJlc2VuY2VcbiAgICAgIH1cbiAgICB9KVxuICAgIHJldHVybiB0aGlzLnN5bmNEaWZmKHN0YXRlLCB7am9pbnM6IGpvaW5zLCBsZWF2ZXM6IGxlYXZlc30sIG9uSm9pbiwgb25MZWF2ZSlcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBVc2VkIHRvIHN5bmMgYSBkaWZmIG9mIHByZXNlbmNlIGpvaW4gYW5kIGxlYXZlXG4gICAqIGV2ZW50cyBmcm9tIHRoZSBzZXJ2ZXIsIGFzIHRoZXkgaGFwcGVuLiBMaWtlIGBzeW5jU3RhdGVgLCBgc3luY0RpZmZgXG4gICAqIGFjY2VwdHMgb3B0aW9uYWwgYG9uSm9pbmAgYW5kIGBvbkxlYXZlYCBjYWxsYmFja3MgdG8gcmVhY3QgdG8gYSB1c2VyXG4gICAqIGpvaW5pbmcgb3IgbGVhdmluZyBmcm9tIGEgZGV2aWNlLlxuICAgKlxuICAgKiBAcmV0dXJucyB7UHJlc2VuY2V9XG4gICAqL1xuICBzdGF0aWMgc3luY0RpZmYoc3RhdGUsIGRpZmYsIG9uSm9pbiwgb25MZWF2ZSl7XG4gICAgbGV0IHtqb2lucywgbGVhdmVzfSA9IHRoaXMuY2xvbmUoZGlmZilcbiAgICBpZighb25Kb2luKXsgb25Kb2luID0gZnVuY3Rpb24gKCl7IH0gfVxuICAgIGlmKCFvbkxlYXZlKXsgb25MZWF2ZSA9IGZ1bmN0aW9uICgpeyB9IH1cblxuICAgIHRoaXMubWFwKGpvaW5zLCAoa2V5LCBuZXdQcmVzZW5jZSkgPT4ge1xuICAgICAgbGV0IGN1cnJlbnRQcmVzZW5jZSA9IHN0YXRlW2tleV1cbiAgICAgIHN0YXRlW2tleV0gPSB0aGlzLmNsb25lKG5ld1ByZXNlbmNlKVxuICAgICAgaWYoY3VycmVudFByZXNlbmNlKXtcbiAgICAgICAgbGV0IGpvaW5lZFJlZnMgPSBzdGF0ZVtrZXldLm1ldGFzLm1hcChtID0+IG0ucGh4X3JlZilcbiAgICAgICAgbGV0IGN1ck1ldGFzID0gY3VycmVudFByZXNlbmNlLm1ldGFzLmZpbHRlcihtID0+IGpvaW5lZFJlZnMuaW5kZXhPZihtLnBoeF9yZWYpIDwgMClcbiAgICAgICAgc3RhdGVba2V5XS5tZXRhcy51bnNoaWZ0KC4uLmN1ck1ldGFzKVxuICAgICAgfVxuICAgICAgb25Kb2luKGtleSwgY3VycmVudFByZXNlbmNlLCBuZXdQcmVzZW5jZSlcbiAgICB9KVxuICAgIHRoaXMubWFwKGxlYXZlcywgKGtleSwgbGVmdFByZXNlbmNlKSA9PiB7XG4gICAgICBsZXQgY3VycmVudFByZXNlbmNlID0gc3RhdGVba2V5XVxuICAgICAgaWYoIWN1cnJlbnRQcmVzZW5jZSl7IHJldHVybiB9XG4gICAgICBsZXQgcmVmc1RvUmVtb3ZlID0gbGVmdFByZXNlbmNlLm1ldGFzLm1hcChtID0+IG0ucGh4X3JlZilcbiAgICAgIGN1cnJlbnRQcmVzZW5jZS5tZXRhcyA9IGN1cnJlbnRQcmVzZW5jZS5tZXRhcy5maWx0ZXIocCA9PiB7XG4gICAgICAgIHJldHVybiByZWZzVG9SZW1vdmUuaW5kZXhPZihwLnBoeF9yZWYpIDwgMFxuICAgICAgfSlcbiAgICAgIG9uTGVhdmUoa2V5LCBjdXJyZW50UHJlc2VuY2UsIGxlZnRQcmVzZW5jZSlcbiAgICAgIGlmKGN1cnJlbnRQcmVzZW5jZS5tZXRhcy5sZW5ndGggPT09IDApe1xuICAgICAgICBkZWxldGUgc3RhdGVba2V5XVxuICAgICAgfVxuICAgIH0pXG4gICAgcmV0dXJuIHN0YXRlXG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgYXJyYXkgb2YgcHJlc2VuY2VzLCB3aXRoIHNlbGVjdGVkIG1ldGFkYXRhLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gcHJlc2VuY2VzXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNob29zZXJcbiAgICpcbiAgICogQHJldHVybnMge1ByZXNlbmNlfVxuICAgKi9cbiAgc3RhdGljIGxpc3QocHJlc2VuY2VzLCBjaG9vc2VyKXtcbiAgICBpZighY2hvb3Nlcil7IGNob29zZXIgPSBmdW5jdGlvbiAoa2V5LCBwcmVzKXsgcmV0dXJuIHByZXMgfSB9XG5cbiAgICByZXR1cm4gdGhpcy5tYXAocHJlc2VuY2VzLCAoa2V5LCBwcmVzZW5jZSkgPT4ge1xuICAgICAgcmV0dXJuIGNob29zZXIoa2V5LCBwcmVzZW5jZSlcbiAgICB9KVxuICB9XG5cbiAgLy8gcHJpdmF0ZVxuXG4gIHN0YXRpYyBtYXAob2JqLCBmdW5jKXtcbiAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMob2JqKS5tYXAoa2V5ID0+IGZ1bmMoa2V5LCBvYmpba2V5XSkpXG4gIH1cblxuICBzdGF0aWMgY2xvbmUob2JqKXsgcmV0dXJuIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkob2JqKSkgfVxufVxuIiwgIi8qIFRoZSBkZWZhdWx0IHNlcmlhbGl6ZXIgZm9yIGVuY29kaW5nIGFuZCBkZWNvZGluZyBtZXNzYWdlcyAqL1xuaW1wb3J0IHtcbiAgQ0hBTk5FTF9FVkVOVFNcbn0gZnJvbSBcIi4vY29uc3RhbnRzXCJcblxuZXhwb3J0IGRlZmF1bHQge1xuICBIRUFERVJfTEVOR1RIOiAxLFxuICBNRVRBX0xFTkdUSDogNCxcbiAgS0lORFM6IHtwdXNoOiAwLCByZXBseTogMSwgYnJvYWRjYXN0OiAyfSxcblxuICBlbmNvZGUobXNnLCBjYWxsYmFjayl7XG4gICAgaWYobXNnLnBheWxvYWQuY29uc3RydWN0b3IgPT09IEFycmF5QnVmZmVyKXtcbiAgICAgIHJldHVybiBjYWxsYmFjayh0aGlzLmJpbmFyeUVuY29kZShtc2cpKVxuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgcGF5bG9hZCA9IFttc2cuam9pbl9yZWYsIG1zZy5yZWYsIG1zZy50b3BpYywgbXNnLmV2ZW50LCBtc2cucGF5bG9hZF1cbiAgICAgIHJldHVybiBjYWxsYmFjayhKU09OLnN0cmluZ2lmeShwYXlsb2FkKSlcbiAgICB9XG4gIH0sXG5cbiAgZGVjb2RlKHJhd1BheWxvYWQsIGNhbGxiYWNrKXtcbiAgICBpZihyYXdQYXlsb2FkLmNvbnN0cnVjdG9yID09PSBBcnJheUJ1ZmZlcil7XG4gICAgICByZXR1cm4gY2FsbGJhY2sodGhpcy5iaW5hcnlEZWNvZGUocmF3UGF5bG9hZCkpXG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCBbam9pbl9yZWYsIHJlZiwgdG9waWMsIGV2ZW50LCBwYXlsb2FkXSA9IEpTT04ucGFyc2UocmF3UGF5bG9hZClcbiAgICAgIHJldHVybiBjYWxsYmFjayh7am9pbl9yZWYsIHJlZiwgdG9waWMsIGV2ZW50LCBwYXlsb2FkfSlcbiAgICB9XG4gIH0sXG5cbiAgLy8gcHJpdmF0ZVxuXG4gIGJpbmFyeUVuY29kZShtZXNzYWdlKXtcbiAgICBsZXQge2pvaW5fcmVmLCByZWYsIGV2ZW50LCB0b3BpYywgcGF5bG9hZH0gPSBtZXNzYWdlXG4gICAgbGV0IG1ldGFMZW5ndGggPSB0aGlzLk1FVEFfTEVOR1RIICsgam9pbl9yZWYubGVuZ3RoICsgcmVmLmxlbmd0aCArIHRvcGljLmxlbmd0aCArIGV2ZW50Lmxlbmd0aFxuICAgIGxldCBoZWFkZXIgPSBuZXcgQXJyYXlCdWZmZXIodGhpcy5IRUFERVJfTEVOR1RIICsgbWV0YUxlbmd0aClcbiAgICBsZXQgdmlldyA9IG5ldyBEYXRhVmlldyhoZWFkZXIpXG4gICAgbGV0IG9mZnNldCA9IDBcblxuICAgIHZpZXcuc2V0VWludDgob2Zmc2V0KyssIHRoaXMuS0lORFMucHVzaCkgLy8ga2luZFxuICAgIHZpZXcuc2V0VWludDgob2Zmc2V0KyssIGpvaW5fcmVmLmxlbmd0aClcbiAgICB2aWV3LnNldFVpbnQ4KG9mZnNldCsrLCByZWYubGVuZ3RoKVxuICAgIHZpZXcuc2V0VWludDgob2Zmc2V0KyssIHRvcGljLmxlbmd0aClcbiAgICB2aWV3LnNldFVpbnQ4KG9mZnNldCsrLCBldmVudC5sZW5ndGgpXG4gICAgQXJyYXkuZnJvbShqb2luX3JlZiwgY2hhciA9PiB2aWV3LnNldFVpbnQ4KG9mZnNldCsrLCBjaGFyLmNoYXJDb2RlQXQoMCkpKVxuICAgIEFycmF5LmZyb20ocmVmLCBjaGFyID0+IHZpZXcuc2V0VWludDgob2Zmc2V0KyssIGNoYXIuY2hhckNvZGVBdCgwKSkpXG4gICAgQXJyYXkuZnJvbSh0b3BpYywgY2hhciA9PiB2aWV3LnNldFVpbnQ4KG9mZnNldCsrLCBjaGFyLmNoYXJDb2RlQXQoMCkpKVxuICAgIEFycmF5LmZyb20oZXZlbnQsIGNoYXIgPT4gdmlldy5zZXRVaW50OChvZmZzZXQrKywgY2hhci5jaGFyQ29kZUF0KDApKSlcblxuICAgIHZhciBjb21iaW5lZCA9IG5ldyBVaW50OEFycmF5KGhlYWRlci5ieXRlTGVuZ3RoICsgcGF5bG9hZC5ieXRlTGVuZ3RoKVxuICAgIGNvbWJpbmVkLnNldChuZXcgVWludDhBcnJheShoZWFkZXIpLCAwKVxuICAgIGNvbWJpbmVkLnNldChuZXcgVWludDhBcnJheShwYXlsb2FkKSwgaGVhZGVyLmJ5dGVMZW5ndGgpXG5cbiAgICByZXR1cm4gY29tYmluZWQuYnVmZmVyXG4gIH0sXG5cbiAgYmluYXJ5RGVjb2RlKGJ1ZmZlcil7XG4gICAgbGV0IHZpZXcgPSBuZXcgRGF0YVZpZXcoYnVmZmVyKVxuICAgIGxldCBraW5kID0gdmlldy5nZXRVaW50OCgwKVxuICAgIGxldCBkZWNvZGVyID0gbmV3IFRleHREZWNvZGVyKClcbiAgICBzd2l0Y2goa2luZCl7XG4gICAgICBjYXNlIHRoaXMuS0lORFMucHVzaDogcmV0dXJuIHRoaXMuZGVjb2RlUHVzaChidWZmZXIsIHZpZXcsIGRlY29kZXIpXG4gICAgICBjYXNlIHRoaXMuS0lORFMucmVwbHk6IHJldHVybiB0aGlzLmRlY29kZVJlcGx5KGJ1ZmZlciwgdmlldywgZGVjb2RlcilcbiAgICAgIGNhc2UgdGhpcy5LSU5EUy5icm9hZGNhc3Q6IHJldHVybiB0aGlzLmRlY29kZUJyb2FkY2FzdChidWZmZXIsIHZpZXcsIGRlY29kZXIpXG4gICAgfVxuICB9LFxuXG4gIGRlY29kZVB1c2goYnVmZmVyLCB2aWV3LCBkZWNvZGVyKXtcbiAgICBsZXQgam9pblJlZlNpemUgPSB2aWV3LmdldFVpbnQ4KDEpXG4gICAgbGV0IHRvcGljU2l6ZSA9IHZpZXcuZ2V0VWludDgoMilcbiAgICBsZXQgZXZlbnRTaXplID0gdmlldy5nZXRVaW50OCgzKVxuICAgIGxldCBvZmZzZXQgPSB0aGlzLkhFQURFUl9MRU5HVEggKyB0aGlzLk1FVEFfTEVOR1RIIC0gMSAvLyBwdXNoZXMgaGF2ZSBubyByZWZcbiAgICBsZXQgam9pblJlZiA9IGRlY29kZXIuZGVjb2RlKGJ1ZmZlci5zbGljZShvZmZzZXQsIG9mZnNldCArIGpvaW5SZWZTaXplKSlcbiAgICBvZmZzZXQgPSBvZmZzZXQgKyBqb2luUmVmU2l6ZVxuICAgIGxldCB0b3BpYyA9IGRlY29kZXIuZGVjb2RlKGJ1ZmZlci5zbGljZShvZmZzZXQsIG9mZnNldCArIHRvcGljU2l6ZSkpXG4gICAgb2Zmc2V0ID0gb2Zmc2V0ICsgdG9waWNTaXplXG4gICAgbGV0IGV2ZW50ID0gZGVjb2Rlci5kZWNvZGUoYnVmZmVyLnNsaWNlKG9mZnNldCwgb2Zmc2V0ICsgZXZlbnRTaXplKSlcbiAgICBvZmZzZXQgPSBvZmZzZXQgKyBldmVudFNpemVcbiAgICBsZXQgZGF0YSA9IGJ1ZmZlci5zbGljZShvZmZzZXQsIGJ1ZmZlci5ieXRlTGVuZ3RoKVxuICAgIHJldHVybiB7am9pbl9yZWY6IGpvaW5SZWYsIHJlZjogbnVsbCwgdG9waWM6IHRvcGljLCBldmVudDogZXZlbnQsIHBheWxvYWQ6IGRhdGF9XG4gIH0sXG5cbiAgZGVjb2RlUmVwbHkoYnVmZmVyLCB2aWV3LCBkZWNvZGVyKXtcbiAgICBsZXQgam9pblJlZlNpemUgPSB2aWV3LmdldFVpbnQ4KDEpXG4gICAgbGV0IHJlZlNpemUgPSB2aWV3LmdldFVpbnQ4KDIpXG4gICAgbGV0IHRvcGljU2l6ZSA9IHZpZXcuZ2V0VWludDgoMylcbiAgICBsZXQgZXZlbnRTaXplID0gdmlldy5nZXRVaW50OCg0KVxuICAgIGxldCBvZmZzZXQgPSB0aGlzLkhFQURFUl9MRU5HVEggKyB0aGlzLk1FVEFfTEVOR1RIXG4gICAgbGV0IGpvaW5SZWYgPSBkZWNvZGVyLmRlY29kZShidWZmZXIuc2xpY2Uob2Zmc2V0LCBvZmZzZXQgKyBqb2luUmVmU2l6ZSkpXG4gICAgb2Zmc2V0ID0gb2Zmc2V0ICsgam9pblJlZlNpemVcbiAgICBsZXQgcmVmID0gZGVjb2Rlci5kZWNvZGUoYnVmZmVyLnNsaWNlKG9mZnNldCwgb2Zmc2V0ICsgcmVmU2l6ZSkpXG4gICAgb2Zmc2V0ID0gb2Zmc2V0ICsgcmVmU2l6ZVxuICAgIGxldCB0b3BpYyA9IGRlY29kZXIuZGVjb2RlKGJ1ZmZlci5zbGljZShvZmZzZXQsIG9mZnNldCArIHRvcGljU2l6ZSkpXG4gICAgb2Zmc2V0ID0gb2Zmc2V0ICsgdG9waWNTaXplXG4gICAgbGV0IGV2ZW50ID0gZGVjb2Rlci5kZWNvZGUoYnVmZmVyLnNsaWNlKG9mZnNldCwgb2Zmc2V0ICsgZXZlbnRTaXplKSlcbiAgICBvZmZzZXQgPSBvZmZzZXQgKyBldmVudFNpemVcbiAgICBsZXQgZGF0YSA9IGJ1ZmZlci5zbGljZShvZmZzZXQsIGJ1ZmZlci5ieXRlTGVuZ3RoKVxuICAgIGxldCBwYXlsb2FkID0ge3N0YXR1czogZXZlbnQsIHJlc3BvbnNlOiBkYXRhfVxuICAgIHJldHVybiB7am9pbl9yZWY6IGpvaW5SZWYsIHJlZjogcmVmLCB0b3BpYzogdG9waWMsIGV2ZW50OiBDSEFOTkVMX0VWRU5UUy5yZXBseSwgcGF5bG9hZDogcGF5bG9hZH1cbiAgfSxcblxuICBkZWNvZGVCcm9hZGNhc3QoYnVmZmVyLCB2aWV3LCBkZWNvZGVyKXtcbiAgICBsZXQgdG9waWNTaXplID0gdmlldy5nZXRVaW50OCgxKVxuICAgIGxldCBldmVudFNpemUgPSB2aWV3LmdldFVpbnQ4KDIpXG4gICAgbGV0IG9mZnNldCA9IHRoaXMuSEVBREVSX0xFTkdUSCArIDJcbiAgICBsZXQgdG9waWMgPSBkZWNvZGVyLmRlY29kZShidWZmZXIuc2xpY2Uob2Zmc2V0LCBvZmZzZXQgKyB0b3BpY1NpemUpKVxuICAgIG9mZnNldCA9IG9mZnNldCArIHRvcGljU2l6ZVxuICAgIGxldCBldmVudCA9IGRlY29kZXIuZGVjb2RlKGJ1ZmZlci5zbGljZShvZmZzZXQsIG9mZnNldCArIGV2ZW50U2l6ZSkpXG4gICAgb2Zmc2V0ID0gb2Zmc2V0ICsgZXZlbnRTaXplXG4gICAgbGV0IGRhdGEgPSBidWZmZXIuc2xpY2Uob2Zmc2V0LCBidWZmZXIuYnl0ZUxlbmd0aClcblxuICAgIHJldHVybiB7am9pbl9yZWY6IG51bGwsIHJlZjogbnVsbCwgdG9waWM6IHRvcGljLCBldmVudDogZXZlbnQsIHBheWxvYWQ6IGRhdGF9XG4gIH1cbn1cbiIsICJpbXBvcnQge1xuICBnbG9iYWwsXG4gIHBoeFdpbmRvdyxcbiAgQ0hBTk5FTF9FVkVOVFMsXG4gIERFRkFVTFRfVElNRU9VVCxcbiAgREVGQVVMVF9WU04sXG4gIFNPQ0tFVF9TVEFURVMsXG4gIFRSQU5TUE9SVFMsXG4gIFdTX0NMT1NFX05PUk1BTFxufSBmcm9tIFwiLi9jb25zdGFudHNcIlxuXG5pbXBvcnQge1xuICBjbG9zdXJlXG59IGZyb20gXCIuL3V0aWxzXCJcblxuaW1wb3J0IEFqYXggZnJvbSBcIi4vYWpheFwiXG5pbXBvcnQgQ2hhbm5lbCBmcm9tIFwiLi9jaGFubmVsXCJcbmltcG9ydCBMb25nUG9sbCBmcm9tIFwiLi9sb25ncG9sbFwiXG5pbXBvcnQgU2VyaWFsaXplciBmcm9tIFwiLi9zZXJpYWxpemVyXCJcbmltcG9ydCBUaW1lciBmcm9tIFwiLi90aW1lclwiXG5cbi8qKiBJbml0aWFsaXplcyB0aGUgU29ja2V0ICpcbiAqXG4gKiBGb3IgSUU4IHN1cHBvcnQgdXNlIGFuIEVTNS1zaGltIChodHRwczovL2dpdGh1Yi5jb20vZXMtc2hpbXMvZXM1LXNoaW0pXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGVuZFBvaW50IC0gVGhlIHN0cmluZyBXZWJTb2NrZXQgZW5kcG9pbnQsIGllLCBgXCJ3czovL2V4YW1wbGUuY29tL3NvY2tldFwiYCxcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgXCJ3c3M6Ly9leGFtcGxlLmNvbVwiYFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBcIi9zb2NrZXRcImAgKGluaGVyaXRlZCBob3N0ICYgcHJvdG9jb2wpXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdHNdIC0gT3B0aW9uYWwgY29uZmlndXJhdGlvblxuICogQHBhcmFtIHtGdW5jdGlvbn0gW29wdHMudHJhbnNwb3J0XSAtIFRoZSBXZWJzb2NrZXQgVHJhbnNwb3J0LCBmb3IgZXhhbXBsZSBXZWJTb2NrZXQgb3IgUGhvZW5peC5Mb25nUG9sbC5cbiAqXG4gKiBEZWZhdWx0cyB0byBXZWJTb2NrZXQgd2l0aCBhdXRvbWF0aWMgTG9uZ1BvbGwgZmFsbGJhY2suXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb3B0cy5lbmNvZGVdIC0gVGhlIGZ1bmN0aW9uIHRvIGVuY29kZSBvdXRnb2luZyBtZXNzYWdlcy5cbiAqXG4gKiBEZWZhdWx0cyB0byBKU09OIGVuY29kZXIuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gW29wdHMuZGVjb2RlXSAtIFRoZSBmdW5jdGlvbiB0byBkZWNvZGUgaW5jb21pbmcgbWVzc2FnZXMuXG4gKlxuICogRGVmYXVsdHMgdG8gSlNPTjpcbiAqXG4gKiBgYGBqYXZhc2NyaXB0XG4gKiAocGF5bG9hZCwgY2FsbGJhY2spID0+IGNhbGxiYWNrKEpTT04ucGFyc2UocGF5bG9hZCkpXG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdHMudGltZW91dF0gLSBUaGUgZGVmYXVsdCB0aW1lb3V0IGluIG1pbGxpc2Vjb25kcyB0byB0cmlnZ2VyIHB1c2ggdGltZW91dHMuXG4gKlxuICogRGVmYXVsdHMgYERFRkFVTFRfVElNRU9VVGBcbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0cy5oZWFydGJlYXRJbnRlcnZhbE1zXSAtIFRoZSBtaWxsaXNlYyBpbnRlcnZhbCB0byBzZW5kIGEgaGVhcnRiZWF0IG1lc3NhZ2VcbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0cy5yZWNvbm5lY3RBZnRlck1zXSAtIFRoZSBvcHRpb25hbCBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIG1pbGxpc2VjXG4gKiBzb2NrZXQgcmVjb25uZWN0IGludGVydmFsLlxuICpcbiAqIERlZmF1bHRzIHRvIHN0ZXBwZWQgYmFja29mZiBvZjpcbiAqXG4gKiBgYGBqYXZhc2NyaXB0XG4gKiBmdW5jdGlvbih0cmllcyl7XG4gKiAgIHJldHVybiBbMTAsIDUwLCAxMDAsIDE1MCwgMjAwLCAyNTAsIDUwMCwgMTAwMCwgMjAwMF1bdHJpZXMgLSAxXSB8fCA1MDAwXG4gKiB9XG4gKiBgYGBgXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRzLnJlam9pbkFmdGVyTXNdIC0gVGhlIG9wdGlvbmFsIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgbWlsbGlzZWNcbiAqIHJlam9pbiBpbnRlcnZhbCBmb3IgaW5kaXZpZHVhbCBjaGFubmVscy5cbiAqXG4gKiBgYGBqYXZhc2NyaXB0XG4gKiBmdW5jdGlvbih0cmllcyl7XG4gKiAgIHJldHVybiBbMTAwMCwgMjAwMCwgNTAwMF1bdHJpZXMgLSAxXSB8fCAxMDAwMFxuICogfVxuICogYGBgYFxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtvcHRzLmxvZ2dlcl0gLSBUaGUgb3B0aW9uYWwgZnVuY3Rpb24gZm9yIHNwZWNpYWxpemVkIGxvZ2dpbmcsIGllOlxuICpcbiAqIGBgYGphdmFzY3JpcHRcbiAqIGZ1bmN0aW9uKGtpbmQsIG1zZywgZGF0YSkge1xuICogICBjb25zb2xlLmxvZyhgJHtraW5kfTogJHttc2d9YCwgZGF0YSlcbiAqIH1cbiAqIGBgYFxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0cy5sb25ncG9sbGVyVGltZW91dF0gLSBUaGUgbWF4aW11bSB0aW1lb3V0IG9mIGEgbG9uZyBwb2xsIEFKQVggcmVxdWVzdC5cbiAqXG4gKiBEZWZhdWx0cyB0byAyMHMgKGRvdWJsZSB0aGUgc2VydmVyIGxvbmcgcG9sbCB0aW1lcikuXG4gKlxuICogQHBhcmFtIHsoT2JqZWN0fGZ1bmN0aW9uKX0gW29wdHMucGFyYW1zXSAtIFRoZSBvcHRpb25hbCBwYXJhbXMgdG8gcGFzcyB3aGVuIGNvbm5lY3RpbmdcbiAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5iaW5hcnlUeXBlXSAtIFRoZSBiaW5hcnkgdHlwZSB0byB1c2UgZm9yIGJpbmFyeSBXZWJTb2NrZXQgZnJhbWVzLlxuICpcbiAqIERlZmF1bHRzIHRvIFwiYXJyYXlidWZmZXJcIlxuICpcbiAqIEBwYXJhbSB7dnNufSBbb3B0cy52c25dIC0gVGhlIHNlcmlhbGl6ZXIncyBwcm90b2NvbCB2ZXJzaW9uIHRvIHNlbmQgb24gY29ubmVjdC5cbiAqXG4gKiBEZWZhdWx0cyB0byBERUZBVUxUX1ZTTi5cbiovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTb2NrZXQge1xuICBjb25zdHJ1Y3RvcihlbmRQb2ludCwgb3B0cyA9IHt9KXtcbiAgICB0aGlzLnN0YXRlQ2hhbmdlQ2FsbGJhY2tzID0ge29wZW46IFtdLCBjbG9zZTogW10sIGVycm9yOiBbXSwgbWVzc2FnZTogW119XG4gICAgdGhpcy5jaGFubmVscyA9IFtdXG4gICAgdGhpcy5zZW5kQnVmZmVyID0gW11cbiAgICB0aGlzLnJlZiA9IDBcbiAgICB0aGlzLnRpbWVvdXQgPSBvcHRzLnRpbWVvdXQgfHwgREVGQVVMVF9USU1FT1VUXG4gICAgdGhpcy50cmFuc3BvcnQgPSBvcHRzLnRyYW5zcG9ydCB8fCBnbG9iYWwuV2ViU29ja2V0IHx8IExvbmdQb2xsXG4gICAgdGhpcy5lc3RhYmxpc2hlZENvbm5lY3Rpb25zID0gMFxuICAgIHRoaXMuZGVmYXVsdEVuY29kZXIgPSBTZXJpYWxpemVyLmVuY29kZS5iaW5kKFNlcmlhbGl6ZXIpXG4gICAgdGhpcy5kZWZhdWx0RGVjb2RlciA9IFNlcmlhbGl6ZXIuZGVjb2RlLmJpbmQoU2VyaWFsaXplcilcbiAgICB0aGlzLmNsb3NlV2FzQ2xlYW4gPSBmYWxzZVxuICAgIHRoaXMuYmluYXJ5VHlwZSA9IG9wdHMuYmluYXJ5VHlwZSB8fCBcImFycmF5YnVmZmVyXCJcbiAgICB0aGlzLmNvbm5lY3RDbG9jayA9IDFcbiAgICBpZih0aGlzLnRyYW5zcG9ydCAhPT0gTG9uZ1BvbGwpe1xuICAgICAgdGhpcy5lbmNvZGUgPSBvcHRzLmVuY29kZSB8fCB0aGlzLmRlZmF1bHRFbmNvZGVyXG4gICAgICB0aGlzLmRlY29kZSA9IG9wdHMuZGVjb2RlIHx8IHRoaXMuZGVmYXVsdERlY29kZXJcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5lbmNvZGUgPSB0aGlzLmRlZmF1bHRFbmNvZGVyXG4gICAgICB0aGlzLmRlY29kZSA9IHRoaXMuZGVmYXVsdERlY29kZXJcbiAgICB9XG4gICAgbGV0IGF3YWl0aW5nQ29ubmVjdGlvbk9uUGFnZVNob3cgPSBudWxsXG4gICAgaWYocGh4V2luZG93ICYmIHBoeFdpbmRvdy5hZGRFdmVudExpc3RlbmVyKXtcbiAgICAgIHBoeFdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicGFnZWhpZGVcIiwgX2UgPT4ge1xuICAgICAgICBpZih0aGlzLmNvbm4pe1xuICAgICAgICAgIHRoaXMuZGlzY29ubmVjdCgpXG4gICAgICAgICAgYXdhaXRpbmdDb25uZWN0aW9uT25QYWdlU2hvdyA9IHRoaXMuY29ubmVjdENsb2NrXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICBwaHhXaW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInBhZ2VzaG93XCIsIF9lID0+IHtcbiAgICAgICAgaWYoYXdhaXRpbmdDb25uZWN0aW9uT25QYWdlU2hvdyA9PT0gdGhpcy5jb25uZWN0Q2xvY2spe1xuICAgICAgICAgIGF3YWl0aW5nQ29ubmVjdGlvbk9uUGFnZVNob3cgPSBudWxsXG4gICAgICAgICAgdGhpcy5jb25uZWN0KClcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9XG4gICAgdGhpcy5oZWFydGJlYXRJbnRlcnZhbE1zID0gb3B0cy5oZWFydGJlYXRJbnRlcnZhbE1zIHx8IDMwMDAwXG4gICAgdGhpcy5yZWpvaW5BZnRlck1zID0gKHRyaWVzKSA9PiB7XG4gICAgICBpZihvcHRzLnJlam9pbkFmdGVyTXMpe1xuICAgICAgICByZXR1cm4gb3B0cy5yZWpvaW5BZnRlck1zKHRyaWVzKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFsxMDAwLCAyMDAwLCA1MDAwXVt0cmllcyAtIDFdIHx8IDEwMDAwXG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMucmVjb25uZWN0QWZ0ZXJNcyA9ICh0cmllcykgPT4ge1xuICAgICAgaWYob3B0cy5yZWNvbm5lY3RBZnRlck1zKXtcbiAgICAgICAgcmV0dXJuIG9wdHMucmVjb25uZWN0QWZ0ZXJNcyh0cmllcylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBbMTAsIDUwLCAxMDAsIDE1MCwgMjAwLCAyNTAsIDUwMCwgMTAwMCwgMjAwMF1bdHJpZXMgLSAxXSB8fCA1MDAwXG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMubG9nZ2VyID0gb3B0cy5sb2dnZXIgfHwgbnVsbFxuICAgIHRoaXMubG9uZ3BvbGxlclRpbWVvdXQgPSBvcHRzLmxvbmdwb2xsZXJUaW1lb3V0IHx8IDIwMDAwXG4gICAgdGhpcy5wYXJhbXMgPSBjbG9zdXJlKG9wdHMucGFyYW1zIHx8IHt9KVxuICAgIHRoaXMuZW5kUG9pbnQgPSBgJHtlbmRQb2ludH0vJHtUUkFOU1BPUlRTLndlYnNvY2tldH1gXG4gICAgdGhpcy52c24gPSBvcHRzLnZzbiB8fCBERUZBVUxUX1ZTTlxuICAgIHRoaXMuaGVhcnRiZWF0VGltZW91dFRpbWVyID0gbnVsbFxuICAgIHRoaXMuaGVhcnRiZWF0VGltZXIgPSBudWxsXG4gICAgdGhpcy5wZW5kaW5nSGVhcnRiZWF0UmVmID0gbnVsbFxuICAgIHRoaXMucmVjb25uZWN0VGltZXIgPSBuZXcgVGltZXIoKCkgPT4ge1xuICAgICAgdGhpcy50ZWFyZG93bigoKSA9PiB0aGlzLmNvbm5lY3QoKSlcbiAgICB9LCB0aGlzLnJlY29ubmVjdEFmdGVyTXMpXG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgTG9uZ1BvbGwgdHJhbnNwb3J0IHJlZmVyZW5jZVxuICAgKi9cbiAgZ2V0TG9uZ1BvbGxUcmFuc3BvcnQoKXsgcmV0dXJuIExvbmdQb2xsIH1cblxuICAvKipcbiAgICogRGlzY29ubmVjdHMgYW5kIHJlcGxhY2VzIHRoZSBhY3RpdmUgdHJhbnNwb3J0XG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IG5ld1RyYW5zcG9ydCAtIFRoZSBuZXcgdHJhbnNwb3J0IGNsYXNzIHRvIGluc3RhbnRpYXRlXG4gICAqXG4gICAqL1xuICByZXBsYWNlVHJhbnNwb3J0KG5ld1RyYW5zcG9ydCl7XG4gICAgdGhpcy5jb25uZWN0Q2xvY2srK1xuICAgIHRoaXMuY2xvc2VXYXNDbGVhbiA9IHRydWVcbiAgICB0aGlzLnJlY29ubmVjdFRpbWVyLnJlc2V0KClcbiAgICB0aGlzLnNlbmRCdWZmZXIgPSBbXVxuICAgIGlmKHRoaXMuY29ubil7XG4gICAgICB0aGlzLmNvbm4uY2xvc2UoKVxuICAgICAgdGhpcy5jb25uID0gbnVsbFxuICAgIH1cbiAgICB0aGlzLnRyYW5zcG9ydCA9IG5ld1RyYW5zcG9ydFxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIHNvY2tldCBwcm90b2NvbFxuICAgKlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfVxuICAgKi9cbiAgcHJvdG9jb2woKXsgcmV0dXJuIGxvY2F0aW9uLnByb3RvY29sLm1hdGNoKC9eaHR0cHMvKSA/IFwid3NzXCIgOiBcIndzXCIgfVxuXG4gIC8qKlxuICAgKiBUaGUgZnVsbHkgcXVhbGlmaWVkIHNvY2tldCB1cmxcbiAgICpcbiAgICogQHJldHVybnMge3N0cmluZ31cbiAgICovXG4gIGVuZFBvaW50VVJMKCl7XG4gICAgbGV0IHVyaSA9IEFqYXguYXBwZW5kUGFyYW1zKFxuICAgICAgQWpheC5hcHBlbmRQYXJhbXModGhpcy5lbmRQb2ludCwgdGhpcy5wYXJhbXMoKSksIHt2c246IHRoaXMudnNufSlcbiAgICBpZih1cmkuY2hhckF0KDApICE9PSBcIi9cIil7IHJldHVybiB1cmkgfVxuICAgIGlmKHVyaS5jaGFyQXQoMSkgPT09IFwiL1wiKXsgcmV0dXJuIGAke3RoaXMucHJvdG9jb2woKX06JHt1cml9YCB9XG5cbiAgICByZXR1cm4gYCR7dGhpcy5wcm90b2NvbCgpfTovLyR7bG9jYXRpb24uaG9zdH0ke3VyaX1gXG4gIH1cblxuICAvKipcbiAgICogRGlzY29ubmVjdHMgdGhlIHNvY2tldFxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0Nsb3NlRXZlbnQjU3RhdHVzX2NvZGVzIGZvciB2YWxpZCBzdGF0dXMgY29kZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIC0gT3B0aW9uYWwgY2FsbGJhY2sgd2hpY2ggaXMgY2FsbGVkIGFmdGVyIHNvY2tldCBpcyBkaXNjb25uZWN0ZWQuXG4gICAqIEBwYXJhbSB7aW50ZWdlcn0gY29kZSAtIEEgc3RhdHVzIGNvZGUgZm9yIGRpc2Nvbm5lY3Rpb24gKE9wdGlvbmFsKS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHJlYXNvbiAtIEEgdGV4dHVhbCBkZXNjcmlwdGlvbiBvZiB0aGUgcmVhc29uIHRvIGRpc2Nvbm5lY3QuIChPcHRpb25hbClcbiAgICovXG4gIGRpc2Nvbm5lY3QoY2FsbGJhY2ssIGNvZGUsIHJlYXNvbil7XG4gICAgdGhpcy5jb25uZWN0Q2xvY2srK1xuICAgIHRoaXMuY2xvc2VXYXNDbGVhbiA9IHRydWVcbiAgICB0aGlzLnJlY29ubmVjdFRpbWVyLnJlc2V0KClcbiAgICB0aGlzLnRlYXJkb3duKGNhbGxiYWNrLCBjb2RlLCByZWFzb24pXG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IHBhcmFtcyAtIFRoZSBwYXJhbXMgdG8gc2VuZCB3aGVuIGNvbm5lY3RpbmcsIGZvciBleGFtcGxlIGB7dXNlcl9pZDogdXNlclRva2VufWBcbiAgICpcbiAgICogUGFzc2luZyBwYXJhbXMgdG8gY29ubmVjdCBpcyBkZXByZWNhdGVkOyBwYXNzIHRoZW0gaW4gdGhlIFNvY2tldCBjb25zdHJ1Y3RvciBpbnN0ZWFkOlxuICAgKiBgbmV3IFNvY2tldChcIi9zb2NrZXRcIiwge3BhcmFtczoge3VzZXJfaWQ6IHVzZXJUb2tlbn19KWAuXG4gICAqL1xuICBjb25uZWN0KHBhcmFtcyl7XG4gICAgaWYocGFyYW1zKXtcbiAgICAgIGNvbnNvbGUgJiYgY29uc29sZS5sb2coXCJwYXNzaW5nIHBhcmFtcyB0byBjb25uZWN0IGlzIGRlcHJlY2F0ZWQuIEluc3RlYWQgcGFzcyA6cGFyYW1zIHRvIHRoZSBTb2NrZXQgY29uc3RydWN0b3JcIilcbiAgICAgIHRoaXMucGFyYW1zID0gY2xvc3VyZShwYXJhbXMpXG4gICAgfVxuICAgIGlmKHRoaXMuY29ubil7IHJldHVybiB9XG5cbiAgICB0aGlzLmNvbm5lY3RDbG9jaysrXG4gICAgdGhpcy5jbG9zZVdhc0NsZWFuID0gZmFsc2VcbiAgICB0aGlzLmNvbm4gPSBuZXcgdGhpcy50cmFuc3BvcnQodGhpcy5lbmRQb2ludFVSTCgpKVxuICAgIHRoaXMuY29ubi5iaW5hcnlUeXBlID0gdGhpcy5iaW5hcnlUeXBlXG4gICAgdGhpcy5jb25uLnRpbWVvdXQgPSB0aGlzLmxvbmdwb2xsZXJUaW1lb3V0XG4gICAgdGhpcy5jb25uLm9ub3BlbiA9ICgpID0+IHRoaXMub25Db25uT3BlbigpXG4gICAgdGhpcy5jb25uLm9uZXJyb3IgPSBlcnJvciA9PiB0aGlzLm9uQ29ubkVycm9yKGVycm9yKVxuICAgIHRoaXMuY29ubi5vbm1lc3NhZ2UgPSBldmVudCA9PiB0aGlzLm9uQ29ubk1lc3NhZ2UoZXZlbnQpXG4gICAgdGhpcy5jb25uLm9uY2xvc2UgPSBldmVudCA9PiB0aGlzLm9uQ29ubkNsb3NlKGV2ZW50KVxuICB9XG5cbiAgLyoqXG4gICAqIExvZ3MgdGhlIG1lc3NhZ2UuIE92ZXJyaWRlIGB0aGlzLmxvZ2dlcmAgZm9yIHNwZWNpYWxpemVkIGxvZ2dpbmcuIG5vb3BzIGJ5IGRlZmF1bHRcbiAgICogQHBhcmFtIHtzdHJpbmd9IGtpbmRcbiAgICogQHBhcmFtIHtzdHJpbmd9IG1zZ1xuICAgKiBAcGFyYW0ge09iamVjdH0gZGF0YVxuICAgKi9cbiAgbG9nKGtpbmQsIG1zZywgZGF0YSl7IHRoaXMubG9nZ2VyKGtpbmQsIG1zZywgZGF0YSkgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRydWUgaWYgYSBsb2dnZXIgaGFzIGJlZW4gc2V0IG9uIHRoaXMgc29ja2V0LlxuICAgKi9cbiAgaGFzTG9nZ2VyKCl7IHJldHVybiB0aGlzLmxvZ2dlciAhPT0gbnVsbCB9XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVycyBjYWxsYmFja3MgZm9yIGNvbm5lY3Rpb24gb3BlbiBldmVudHNcbiAgICpcbiAgICogQGV4YW1wbGUgc29ja2V0Lm9uT3BlbihmdW5jdGlvbigpeyBjb25zb2xlLmluZm8oXCJ0aGUgc29ja2V0IHdhcyBvcGVuZWRcIikgfSlcbiAgICpcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcbiAgICovXG4gIG9uT3BlbihjYWxsYmFjayl7XG4gICAgbGV0IHJlZiA9IHRoaXMubWFrZVJlZigpXG4gICAgdGhpcy5zdGF0ZUNoYW5nZUNhbGxiYWNrcy5vcGVuLnB1c2goW3JlZiwgY2FsbGJhY2tdKVxuICAgIHJldHVybiByZWZcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWdpc3RlcnMgY2FsbGJhY2tzIGZvciBjb25uZWN0aW9uIGNsb3NlIGV2ZW50c1xuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICAgKi9cbiAgb25DbG9zZShjYWxsYmFjayl7XG4gICAgbGV0IHJlZiA9IHRoaXMubWFrZVJlZigpXG4gICAgdGhpcy5zdGF0ZUNoYW5nZUNhbGxiYWNrcy5jbG9zZS5wdXNoKFtyZWYsIGNhbGxiYWNrXSlcbiAgICByZXR1cm4gcmVmXG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXJzIGNhbGxiYWNrcyBmb3IgY29ubmVjdGlvbiBlcnJvciBldmVudHNcbiAgICpcbiAgICogQGV4YW1wbGUgc29ja2V0Lm9uRXJyb3IoZnVuY3Rpb24oZXJyb3IpeyBhbGVydChcIkFuIGVycm9yIG9jY3VycmVkXCIpIH0pXG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gICAqL1xuICBvbkVycm9yKGNhbGxiYWNrKXtcbiAgICBsZXQgcmVmID0gdGhpcy5tYWtlUmVmKClcbiAgICB0aGlzLnN0YXRlQ2hhbmdlQ2FsbGJhY2tzLmVycm9yLnB1c2goW3JlZiwgY2FsbGJhY2tdKVxuICAgIHJldHVybiByZWZcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWdpc3RlcnMgY2FsbGJhY2tzIGZvciBjb25uZWN0aW9uIG1lc3NhZ2UgZXZlbnRzXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gICAqL1xuICBvbk1lc3NhZ2UoY2FsbGJhY2spe1xuICAgIGxldCByZWYgPSB0aGlzLm1ha2VSZWYoKVxuICAgIHRoaXMuc3RhdGVDaGFuZ2VDYWxsYmFja3MubWVzc2FnZS5wdXNoKFtyZWYsIGNhbGxiYWNrXSlcbiAgICByZXR1cm4gcmVmXG4gIH1cblxuICAvKipcbiAgICogUGluZ3MgdGhlIHNlcnZlciBhbmQgaW52b2tlcyB0aGUgY2FsbGJhY2sgd2l0aCB0aGUgUlRUIGluIG1pbGxpc2Vjb25kc1xuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICAgKlxuICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIHBpbmcgd2FzIHB1c2hlZCBvciBmYWxzZSBpZiB1bmFibGUgdG8gYmUgcHVzaGVkLlxuICAgKi9cbiAgcGluZyhjYWxsYmFjayl7XG4gICAgaWYoIXRoaXMuaXNDb25uZWN0ZWQoKSl7IHJldHVybiBmYWxzZSB9XG4gICAgbGV0IHJlZiA9IHRoaXMubWFrZVJlZigpXG4gICAgbGV0IHN0YXJ0VGltZSA9IERhdGUubm93KClcbiAgICB0aGlzLnB1c2goe3RvcGljOiBcInBob2VuaXhcIiwgZXZlbnQ6IFwiaGVhcnRiZWF0XCIsIHBheWxvYWQ6IHt9LCByZWY6IHJlZn0pXG4gICAgbGV0IG9uTXNnUmVmID0gdGhpcy5vbk1lc3NhZ2UobXNnID0+IHtcbiAgICAgIGlmKG1zZy5yZWYgPT09IHJlZil7XG4gICAgICAgIHRoaXMub2ZmKFtvbk1zZ1JlZl0pXG4gICAgICAgIGNhbGxiYWNrKERhdGUubm93KCkgLSBzdGFydFRpbWUpXG4gICAgICB9XG4gICAgfSlcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuXG4gIGNsZWFySGVhcnRiZWF0cygpe1xuICAgIGNsZWFyVGltZW91dCh0aGlzLmhlYXJ0YmVhdFRpbWVyKVxuICAgIGNsZWFyVGltZW91dCh0aGlzLmhlYXJ0YmVhdFRpbWVvdXRUaW1lcilcbiAgfVxuXG4gIG9uQ29ubk9wZW4oKXtcbiAgICBpZih0aGlzLmhhc0xvZ2dlcigpKSB0aGlzLmxvZyhcInRyYW5zcG9ydFwiLCBgY29ubmVjdGVkIHRvICR7dGhpcy5lbmRQb2ludFVSTCgpfWApXG4gICAgdGhpcy5jbG9zZVdhc0NsZWFuID0gZmFsc2VcbiAgICB0aGlzLmVzdGFibGlzaGVkQ29ubmVjdGlvbnMrK1xuICAgIHRoaXMuZmx1c2hTZW5kQnVmZmVyKClcbiAgICB0aGlzLnJlY29ubmVjdFRpbWVyLnJlc2V0KClcbiAgICB0aGlzLnJlc2V0SGVhcnRiZWF0KClcbiAgICB0aGlzLnN0YXRlQ2hhbmdlQ2FsbGJhY2tzLm9wZW4uZm9yRWFjaCgoWywgY2FsbGJhY2tdKSA9PiBjYWxsYmFjaygpKVxuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuXG4gIGhlYXJ0YmVhdFRpbWVvdXQoKXtcbiAgICBpZih0aGlzLnBlbmRpbmdIZWFydGJlYXRSZWYpe1xuICAgICAgdGhpcy5wZW5kaW5nSGVhcnRiZWF0UmVmID0gbnVsbFxuICAgICAgaWYodGhpcy5oYXNMb2dnZXIoKSl7IHRoaXMubG9nKFwidHJhbnNwb3J0XCIsIFwiaGVhcnRiZWF0IHRpbWVvdXQuIEF0dGVtcHRpbmcgdG8gcmUtZXN0YWJsaXNoIGNvbm5lY3Rpb25cIikgfVxuICAgICAgdGhpcy50cmlnZ2VyQ2hhbkVycm9yKClcbiAgICAgIHRoaXMuY2xvc2VXYXNDbGVhbiA9IGZhbHNlXG4gICAgICB0aGlzLnRlYXJkb3duKCgpID0+IHRoaXMucmVjb25uZWN0VGltZXIuc2NoZWR1bGVUaW1lb3V0KCksIFdTX0NMT1NFX05PUk1BTCwgXCJoZWFydGJlYXQgdGltZW91dFwiKVxuICAgIH1cbiAgfVxuXG4gIHJlc2V0SGVhcnRiZWF0KCl7XG4gICAgaWYodGhpcy5jb25uICYmIHRoaXMuY29ubi5za2lwSGVhcnRiZWF0KXsgcmV0dXJuIH1cbiAgICB0aGlzLnBlbmRpbmdIZWFydGJlYXRSZWYgPSBudWxsXG4gICAgdGhpcy5jbGVhckhlYXJ0YmVhdHMoKVxuICAgIHRoaXMuaGVhcnRiZWF0VGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHRoaXMuc2VuZEhlYXJ0YmVhdCgpLCB0aGlzLmhlYXJ0YmVhdEludGVydmFsTXMpXG4gIH1cblxuICB0ZWFyZG93bihjYWxsYmFjaywgY29kZSwgcmVhc29uKXtcbiAgICBpZighdGhpcy5jb25uKXtcbiAgICAgIHJldHVybiBjYWxsYmFjayAmJiBjYWxsYmFjaygpXG4gICAgfVxuXG4gICAgdGhpcy53YWl0Rm9yQnVmZmVyRG9uZSgoKSA9PiB7XG4gICAgICBpZih0aGlzLmNvbm4pe1xuICAgICAgICBpZihjb2RlKXsgdGhpcy5jb25uLmNsb3NlKGNvZGUsIHJlYXNvbiB8fCBcIlwiKSB9IGVsc2UgeyB0aGlzLmNvbm4uY2xvc2UoKSB9XG4gICAgICB9XG5cbiAgICAgIHRoaXMud2FpdEZvclNvY2tldENsb3NlZCgoKSA9PiB7XG4gICAgICAgIGlmKHRoaXMuY29ubil7XG4gICAgICAgICAgdGhpcy5jb25uLm9ub3BlbiA9IGZ1bmN0aW9uICgpeyB9IC8vIG5vb3BcbiAgICAgICAgICB0aGlzLmNvbm4ub25lcnJvciA9IGZ1bmN0aW9uICgpeyB9IC8vIG5vb3BcbiAgICAgICAgICB0aGlzLmNvbm4ub25tZXNzYWdlID0gZnVuY3Rpb24gKCl7IH0gLy8gbm9vcFxuICAgICAgICAgIHRoaXMuY29ubi5vbmNsb3NlID0gZnVuY3Rpb24gKCl7IH0gLy8gbm9vcFxuICAgICAgICAgIHRoaXMuY29ubiA9IG51bGxcbiAgICAgICAgfVxuXG4gICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKClcbiAgICAgIH0pXG4gICAgfSlcbiAgfVxuXG4gIHdhaXRGb3JCdWZmZXJEb25lKGNhbGxiYWNrLCB0cmllcyA9IDEpe1xuICAgIGlmKHRyaWVzID09PSA1IHx8ICF0aGlzLmNvbm4gfHwgIXRoaXMuY29ubi5idWZmZXJlZEFtb3VudCl7XG4gICAgICBjYWxsYmFjaygpXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMud2FpdEZvckJ1ZmZlckRvbmUoY2FsbGJhY2ssIHRyaWVzICsgMSlcbiAgICB9LCAxNTAgKiB0cmllcylcbiAgfVxuXG4gIHdhaXRGb3JTb2NrZXRDbG9zZWQoY2FsbGJhY2ssIHRyaWVzID0gMSl7XG4gICAgaWYodHJpZXMgPT09IDUgfHwgIXRoaXMuY29ubiB8fCB0aGlzLmNvbm4ucmVhZHlTdGF0ZSA9PT0gU09DS0VUX1NUQVRFUy5jbG9zZWQpe1xuICAgICAgY2FsbGJhY2soKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLndhaXRGb3JTb2NrZXRDbG9zZWQoY2FsbGJhY2ssIHRyaWVzICsgMSlcbiAgICB9LCAxNTAgKiB0cmllcylcbiAgfVxuXG4gIG9uQ29ubkNsb3NlKGV2ZW50KXtcbiAgICBsZXQgY2xvc2VDb2RlID0gZXZlbnQgJiYgZXZlbnQuY29kZVxuICAgIGlmKHRoaXMuaGFzTG9nZ2VyKCkpIHRoaXMubG9nKFwidHJhbnNwb3J0XCIsIFwiY2xvc2VcIiwgZXZlbnQpXG4gICAgdGhpcy50cmlnZ2VyQ2hhbkVycm9yKClcbiAgICB0aGlzLmNsZWFySGVhcnRiZWF0cygpXG4gICAgaWYoIXRoaXMuY2xvc2VXYXNDbGVhbiAmJiBjbG9zZUNvZGUgIT09IDEwMDApe1xuICAgICAgdGhpcy5yZWNvbm5lY3RUaW1lci5zY2hlZHVsZVRpbWVvdXQoKVxuICAgIH1cbiAgICB0aGlzLnN0YXRlQ2hhbmdlQ2FsbGJhY2tzLmNsb3NlLmZvckVhY2goKFssIGNhbGxiYWNrXSkgPT4gY2FsbGJhY2soZXZlbnQpKVxuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBvbkNvbm5FcnJvcihlcnJvcil7XG4gICAgaWYodGhpcy5oYXNMb2dnZXIoKSkgdGhpcy5sb2coXCJ0cmFuc3BvcnRcIiwgZXJyb3IpXG4gICAgbGV0IHRyYW5zcG9ydEJlZm9yZSA9IHRoaXMudHJhbnNwb3J0XG4gICAgbGV0IGVzdGFibGlzaGVkQmVmb3JlID0gdGhpcy5lc3RhYmxpc2hlZENvbm5lY3Rpb25zXG4gICAgdGhpcy5zdGF0ZUNoYW5nZUNhbGxiYWNrcy5lcnJvci5mb3JFYWNoKChbLCBjYWxsYmFja10pID0+IHtcbiAgICAgIGNhbGxiYWNrKGVycm9yLCB0cmFuc3BvcnRCZWZvcmUsIGVzdGFibGlzaGVkQmVmb3JlKVxuICAgIH0pXG4gICAgaWYodHJhbnNwb3J0QmVmb3JlID09PSB0aGlzLnRyYW5zcG9ydCB8fCBlc3RhYmxpc2hlZEJlZm9yZSA+IDApe1xuICAgICAgdGhpcy50cmlnZ2VyQ2hhbkVycm9yKClcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHRyaWdnZXJDaGFuRXJyb3IoKXtcbiAgICB0aGlzLmNoYW5uZWxzLmZvckVhY2goY2hhbm5lbCA9PiB7XG4gICAgICBpZighKGNoYW5uZWwuaXNFcnJvcmVkKCkgfHwgY2hhbm5lbC5pc0xlYXZpbmcoKSB8fCBjaGFubmVsLmlzQ2xvc2VkKCkpKXtcbiAgICAgICAgY2hhbm5lbC50cmlnZ2VyKENIQU5ORUxfRVZFTlRTLmVycm9yKVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICogQHJldHVybnMge3N0cmluZ31cbiAgICovXG4gIGNvbm5lY3Rpb25TdGF0ZSgpe1xuICAgIHN3aXRjaCh0aGlzLmNvbm4gJiYgdGhpcy5jb25uLnJlYWR5U3RhdGUpe1xuICAgICAgY2FzZSBTT0NLRVRfU1RBVEVTLmNvbm5lY3Rpbmc6IHJldHVybiBcImNvbm5lY3RpbmdcIlxuICAgICAgY2FzZSBTT0NLRVRfU1RBVEVTLm9wZW46IHJldHVybiBcIm9wZW5cIlxuICAgICAgY2FzZSBTT0NLRVRfU1RBVEVTLmNsb3Npbmc6IHJldHVybiBcImNsb3NpbmdcIlxuICAgICAgZGVmYXVsdDogcmV0dXJuIFwiY2xvc2VkXCJcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAqL1xuICBpc0Nvbm5lY3RlZCgpeyByZXR1cm4gdGhpcy5jb25uZWN0aW9uU3RhdGUoKSA9PT0gXCJvcGVuXCIgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKlxuICAgKiBAcGFyYW0ge0NoYW5uZWx9XG4gICAqL1xuICByZW1vdmUoY2hhbm5lbCl7XG4gICAgdGhpcy5vZmYoY2hhbm5lbC5zdGF0ZUNoYW5nZVJlZnMpXG4gICAgdGhpcy5jaGFubmVscyA9IHRoaXMuY2hhbm5lbHMuZmlsdGVyKGMgPT4gYy5qb2luUmVmKCkgIT09IGNoYW5uZWwuam9pblJlZigpKVxuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgYG9uT3BlbmAsIGBvbkNsb3NlYCwgYG9uRXJyb3IsYCBhbmQgYG9uTWVzc2FnZWAgcmVnaXN0cmF0aW9ucy5cbiAgICpcbiAgICogQHBhcmFtIHtyZWZzfSAtIGxpc3Qgb2YgcmVmcyByZXR1cm5lZCBieSBjYWxscyB0b1xuICAgKiAgICAgICAgICAgICAgICAgYG9uT3BlbmAsIGBvbkNsb3NlYCwgYG9uRXJyb3IsYCBhbmQgYG9uTWVzc2FnZWBcbiAgICovXG4gIG9mZihyZWZzKXtcbiAgICBmb3IobGV0IGtleSBpbiB0aGlzLnN0YXRlQ2hhbmdlQ2FsbGJhY2tzKXtcbiAgICAgIHRoaXMuc3RhdGVDaGFuZ2VDYWxsYmFja3Nba2V5XSA9IHRoaXMuc3RhdGVDaGFuZ2VDYWxsYmFja3Nba2V5XS5maWx0ZXIoKFtyZWZdKSA9PiB7XG4gICAgICAgIHJldHVybiByZWZzLmluZGV4T2YocmVmKSA9PT0gLTFcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEluaXRpYXRlcyBhIG5ldyBjaGFubmVsIGZvciB0aGUgZ2l2ZW4gdG9waWNcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRvcGljXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBjaGFuUGFyYW1zIC0gUGFyYW1ldGVycyBmb3IgdGhlIGNoYW5uZWxcbiAgICogQHJldHVybnMge0NoYW5uZWx9XG4gICAqL1xuICBjaGFubmVsKHRvcGljLCBjaGFuUGFyYW1zID0ge30pe1xuICAgIGxldCBjaGFuID0gbmV3IENoYW5uZWwodG9waWMsIGNoYW5QYXJhbXMsIHRoaXMpXG4gICAgdGhpcy5jaGFubmVscy5wdXNoKGNoYW4pXG4gICAgcmV0dXJuIGNoYW5cbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge09iamVjdH0gZGF0YVxuICAgKi9cbiAgcHVzaChkYXRhKXtcbiAgICBpZih0aGlzLmhhc0xvZ2dlcigpKXtcbiAgICAgIGxldCB7dG9waWMsIGV2ZW50LCBwYXlsb2FkLCByZWYsIGpvaW5fcmVmfSA9IGRhdGFcbiAgICAgIHRoaXMubG9nKFwicHVzaFwiLCBgJHt0b3BpY30gJHtldmVudH0gKCR7am9pbl9yZWZ9LCAke3JlZn0pYCwgcGF5bG9hZClcbiAgICB9XG5cbiAgICBpZih0aGlzLmlzQ29ubmVjdGVkKCkpe1xuICAgICAgdGhpcy5lbmNvZGUoZGF0YSwgcmVzdWx0ID0+IHRoaXMuY29ubi5zZW5kKHJlc3VsdCkpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2VuZEJ1ZmZlci5wdXNoKCgpID0+IHRoaXMuZW5jb2RlKGRhdGEsIHJlc3VsdCA9PiB0aGlzLmNvbm4uc2VuZChyZXN1bHQpKSlcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIHRoZSBuZXh0IG1lc3NhZ2UgcmVmLCBhY2NvdW50aW5nIGZvciBvdmVyZmxvd3NcbiAgICogQHJldHVybnMge3N0cmluZ31cbiAgICovXG4gIG1ha2VSZWYoKXtcbiAgICBsZXQgbmV3UmVmID0gdGhpcy5yZWYgKyAxXG4gICAgaWYobmV3UmVmID09PSB0aGlzLnJlZil7IHRoaXMucmVmID0gMCB9IGVsc2UgeyB0aGlzLnJlZiA9IG5ld1JlZiB9XG5cbiAgICByZXR1cm4gdGhpcy5yZWYudG9TdHJpbmcoKVxuICB9XG5cbiAgc2VuZEhlYXJ0YmVhdCgpe1xuICAgIGlmKHRoaXMucGVuZGluZ0hlYXJ0YmVhdFJlZiAmJiAhdGhpcy5pc0Nvbm5lY3RlZCgpKXsgcmV0dXJuIH1cbiAgICB0aGlzLnBlbmRpbmdIZWFydGJlYXRSZWYgPSB0aGlzLm1ha2VSZWYoKVxuICAgIHRoaXMucHVzaCh7dG9waWM6IFwicGhvZW5peFwiLCBldmVudDogXCJoZWFydGJlYXRcIiwgcGF5bG9hZDoge30sIHJlZjogdGhpcy5wZW5kaW5nSGVhcnRiZWF0UmVmfSlcbiAgICB0aGlzLmhlYXJ0YmVhdFRpbWVvdXRUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4gdGhpcy5oZWFydGJlYXRUaW1lb3V0KCksIHRoaXMuaGVhcnRiZWF0SW50ZXJ2YWxNcylcbiAgfVxuXG4gIGZsdXNoU2VuZEJ1ZmZlcigpe1xuICAgIGlmKHRoaXMuaXNDb25uZWN0ZWQoKSAmJiB0aGlzLnNlbmRCdWZmZXIubGVuZ3RoID4gMCl7XG4gICAgICB0aGlzLnNlbmRCdWZmZXIuZm9yRWFjaChjYWxsYmFjayA9PiBjYWxsYmFjaygpKVxuICAgICAgdGhpcy5zZW5kQnVmZmVyID0gW11cbiAgICB9XG4gIH1cblxuICBvbkNvbm5NZXNzYWdlKHJhd01lc3NhZ2Upe1xuICAgIHRoaXMuZGVjb2RlKHJhd01lc3NhZ2UuZGF0YSwgbXNnID0+IHtcbiAgICAgIGxldCB7dG9waWMsIGV2ZW50LCBwYXlsb2FkLCByZWYsIGpvaW5fcmVmfSA9IG1zZ1xuICAgICAgaWYocmVmICYmIHJlZiA9PT0gdGhpcy5wZW5kaW5nSGVhcnRiZWF0UmVmKXtcbiAgICAgICAgdGhpcy5jbGVhckhlYXJ0YmVhdHMoKVxuICAgICAgICB0aGlzLnBlbmRpbmdIZWFydGJlYXRSZWYgPSBudWxsXG4gICAgICAgIHRoaXMuaGVhcnRiZWF0VGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHRoaXMuc2VuZEhlYXJ0YmVhdCgpLCB0aGlzLmhlYXJ0YmVhdEludGVydmFsTXMpXG4gICAgICB9XG5cbiAgICAgIGlmKHRoaXMuaGFzTG9nZ2VyKCkpIHRoaXMubG9nKFwicmVjZWl2ZVwiLCBgJHtwYXlsb2FkLnN0YXR1cyB8fCBcIlwifSAke3RvcGljfSAke2V2ZW50fSAke3JlZiAmJiBcIihcIiArIHJlZiArIFwiKVwiIHx8IFwiXCJ9YCwgcGF5bG9hZClcblxuICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMuY2hhbm5lbHMubGVuZ3RoOyBpKyspe1xuICAgICAgICBjb25zdCBjaGFubmVsID0gdGhpcy5jaGFubmVsc1tpXVxuICAgICAgICBpZighY2hhbm5lbC5pc01lbWJlcih0b3BpYywgZXZlbnQsIHBheWxvYWQsIGpvaW5fcmVmKSl7IGNvbnRpbnVlIH1cbiAgICAgICAgY2hhbm5lbC50cmlnZ2VyKGV2ZW50LCBwYXlsb2FkLCByZWYsIGpvaW5fcmVmKVxuICAgICAgfVxuXG4gICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy5zdGF0ZUNoYW5nZUNhbGxiYWNrcy5tZXNzYWdlLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgbGV0IFssIGNhbGxiYWNrXSA9IHRoaXMuc3RhdGVDaGFuZ2VDYWxsYmFja3MubWVzc2FnZVtpXVxuICAgICAgICBjYWxsYmFjayhtc2cpXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIGxlYXZlT3BlblRvcGljKHRvcGljKXtcbiAgICBsZXQgZHVwQ2hhbm5lbCA9IHRoaXMuY2hhbm5lbHMuZmluZChjID0+IGMudG9waWMgPT09IHRvcGljICYmIChjLmlzSm9pbmVkKCkgfHwgYy5pc0pvaW5pbmcoKSkpXG4gICAgaWYoZHVwQ2hhbm5lbCl7XG4gICAgICBpZih0aGlzLmhhc0xvZ2dlcigpKSB0aGlzLmxvZyhcInRyYW5zcG9ydFwiLCBgbGVhdmluZyBkdXBsaWNhdGUgdG9waWMgXCIke3RvcGljfVwiYClcbiAgICAgIGR1cENoYW5uZWwubGVhdmUoKVxuICAgIH1cbiAgfVxufVxuIiwgImV4cG9ydCBjb25zdCBDT05TRUNVVElWRV9SRUxPQURTID0gXCJjb25zZWN1dGl2ZS1yZWxvYWRzXCJcbmV4cG9ydCBjb25zdCBNQVhfUkVMT0FEUyA9IDEwXG5leHBvcnQgY29uc3QgUkVMT0FEX0pJVFRFUl9NSU4gPSA1MDAwXG5leHBvcnQgY29uc3QgUkVMT0FEX0pJVFRFUl9NQVggPSAxMDAwMFxuZXhwb3J0IGNvbnN0IEZBSUxTQUZFX0pJVFRFUiA9IDMwMDAwXG5leHBvcnQgY29uc3QgUEhYX0VWRU5UX0NMQVNTRVMgPSBbXG4gIFwicGh4LWNsaWNrLWxvYWRpbmdcIiwgXCJwaHgtY2hhbmdlLWxvYWRpbmdcIiwgXCJwaHgtc3VibWl0LWxvYWRpbmdcIixcbiAgXCJwaHgta2V5ZG93bi1sb2FkaW5nXCIsIFwicGh4LWtleXVwLWxvYWRpbmdcIiwgXCJwaHgtYmx1ci1sb2FkaW5nXCIsIFwicGh4LWZvY3VzLWxvYWRpbmdcIlxuXVxuZXhwb3J0IGNvbnN0IFBIWF9DT01QT05FTlQgPSBcImRhdGEtcGh4LWNvbXBvbmVudFwiXG5leHBvcnQgY29uc3QgUEhYX0xJVkVfTElOSyA9IFwiZGF0YS1waHgtbGlua1wiXG5leHBvcnQgY29uc3QgUEhYX1RSQUNLX1NUQVRJQyA9IFwidHJhY2stc3RhdGljXCJcbmV4cG9ydCBjb25zdCBQSFhfTElOS19TVEFURSA9IFwiZGF0YS1waHgtbGluay1zdGF0ZVwiXG5leHBvcnQgY29uc3QgUEhYX1JFRiA9IFwiZGF0YS1waHgtcmVmXCJcbmV4cG9ydCBjb25zdCBQSFhfUkVGX1NSQyA9IFwiZGF0YS1waHgtcmVmLXNyY1wiXG5leHBvcnQgY29uc3QgUEhYX1RSQUNLX1VQTE9BRFMgPSBcInRyYWNrLXVwbG9hZHNcIlxuZXhwb3J0IGNvbnN0IFBIWF9VUExPQURfUkVGID0gXCJkYXRhLXBoeC11cGxvYWQtcmVmXCJcbmV4cG9ydCBjb25zdCBQSFhfUFJFRkxJR0hURURfUkVGUyA9IFwiZGF0YS1waHgtcHJlZmxpZ2h0ZWQtcmVmc1wiXG5leHBvcnQgY29uc3QgUEhYX0RPTkVfUkVGUyA9IFwiZGF0YS1waHgtZG9uZS1yZWZzXCJcbmV4cG9ydCBjb25zdCBQSFhfRFJPUF9UQVJHRVQgPSBcImRyb3AtdGFyZ2V0XCJcbmV4cG9ydCBjb25zdCBQSFhfQUNUSVZFX0VOVFJZX1JFRlMgPSBcImRhdGEtcGh4LWFjdGl2ZS1yZWZzXCJcbmV4cG9ydCBjb25zdCBQSFhfTElWRV9GSUxFX1VQREFURUQgPSBcInBoeDpsaXZlLWZpbGU6dXBkYXRlZFwiXG5leHBvcnQgY29uc3QgUEhYX1NLSVAgPSBcImRhdGEtcGh4LXNraXBcIlxuZXhwb3J0IGNvbnN0IFBIWF9QUlVORSA9IFwiZGF0YS1waHgtcHJ1bmVcIlxuZXhwb3J0IGNvbnN0IFBIWF9QQUdFX0xPQURJTkcgPSBcInBhZ2UtbG9hZGluZ1wiXG5leHBvcnQgY29uc3QgUEhYX0NPTk5FQ1RFRF9DTEFTUyA9IFwicGh4LWNvbm5lY3RlZFwiXG5leHBvcnQgY29uc3QgUEhYX0RJU0NPTk5FQ1RFRF9DTEFTUyA9IFwicGh4LWxvYWRpbmdcIlxuZXhwb3J0IGNvbnN0IFBIWF9OT19GRUVEQkFDS19DTEFTUyA9IFwicGh4LW5vLWZlZWRiYWNrXCJcbmV4cG9ydCBjb25zdCBQSFhfRVJST1JfQ0xBU1MgPSBcInBoeC1lcnJvclwiXG5leHBvcnQgY29uc3QgUEhYX1BBUkVOVF9JRCA9IFwiZGF0YS1waHgtcGFyZW50LWlkXCJcbmV4cG9ydCBjb25zdCBQSFhfTUFJTiA9IFwiZGF0YS1waHgtbWFpblwiXG5leHBvcnQgY29uc3QgUEhYX1JPT1RfSUQgPSBcImRhdGEtcGh4LXJvb3QtaWRcIlxuZXhwb3J0IGNvbnN0IFBIWF9UUklHR0VSX0FDVElPTiA9IFwidHJpZ2dlci1hY3Rpb25cIlxuZXhwb3J0IGNvbnN0IFBIWF9GRUVEQkFDS19GT1IgPSBcImZlZWRiYWNrLWZvclwiXG5leHBvcnQgY29uc3QgUEhYX0hBU19GT0NVU0VEID0gXCJwaHgtaGFzLWZvY3VzZWRcIlxuZXhwb3J0IGNvbnN0IEZPQ1VTQUJMRV9JTlBVVFMgPSBbXCJ0ZXh0XCIsIFwidGV4dGFyZWFcIiwgXCJudW1iZXJcIiwgXCJlbWFpbFwiLCBcInBhc3N3b3JkXCIsIFwic2VhcmNoXCIsIFwidGVsXCIsIFwidXJsXCIsIFwiZGF0ZVwiLCBcInRpbWVcIiwgXCJkYXRldGltZS1sb2NhbFwiLCBcImNvbG9yXCIsIFwicmFuZ2VcIl1cbmV4cG9ydCBjb25zdCBDSEVDS0FCTEVfSU5QVVRTID0gW1wiY2hlY2tib3hcIiwgXCJyYWRpb1wiXVxuZXhwb3J0IGNvbnN0IFBIWF9IQVNfU1VCTUlUVEVEID0gXCJwaHgtaGFzLXN1Ym1pdHRlZFwiXG5leHBvcnQgY29uc3QgUEhYX1NFU1NJT04gPSBcImRhdGEtcGh4LXNlc3Npb25cIlxuZXhwb3J0IGNvbnN0IFBIWF9WSUVXX1NFTEVDVE9SID0gYFske1BIWF9TRVNTSU9OfV1gXG5leHBvcnQgY29uc3QgUEhYX1NUSUNLWSA9IFwiZGF0YS1waHgtc3RpY2t5XCJcbmV4cG9ydCBjb25zdCBQSFhfU1RBVElDID0gXCJkYXRhLXBoeC1zdGF0aWNcIlxuZXhwb3J0IGNvbnN0IFBIWF9SRUFET05MWSA9IFwiZGF0YS1waHgtcmVhZG9ubHlcIlxuZXhwb3J0IGNvbnN0IFBIWF9ESVNBQkxFRCA9IFwiZGF0YS1waHgtZGlzYWJsZWRcIlxuZXhwb3J0IGNvbnN0IFBIWF9ESVNBQkxFX1dJVEggPSBcImRpc2FibGUtd2l0aFwiXG5leHBvcnQgY29uc3QgUEhYX0RJU0FCTEVfV0lUSF9SRVNUT1JFID0gXCJkYXRhLXBoeC1kaXNhYmxlLXdpdGgtcmVzdG9yZVwiXG5leHBvcnQgY29uc3QgUEhYX0hPT0sgPSBcImhvb2tcIlxuZXhwb3J0IGNvbnN0IFBIWF9ERUJPVU5DRSA9IFwiZGVib3VuY2VcIlxuZXhwb3J0IGNvbnN0IFBIWF9USFJPVFRMRSA9IFwidGhyb3R0bGVcIlxuZXhwb3J0IGNvbnN0IFBIWF9VUERBVEUgPSBcInVwZGF0ZVwiXG5leHBvcnQgY29uc3QgUEhYX1NUUkVBTSA9IFwic3RyZWFtXCJcbmV4cG9ydCBjb25zdCBQSFhfS0VZID0gXCJrZXlcIlxuZXhwb3J0IGNvbnN0IFBIWF9QUklWQVRFID0gXCJwaHhQcml2YXRlXCJcbmV4cG9ydCBjb25zdCBQSFhfQVVUT19SRUNPVkVSID0gXCJhdXRvLXJlY292ZXJcIlxuZXhwb3J0IGNvbnN0IFBIWF9MVl9ERUJVRyA9IFwicGh4OmxpdmUtc29ja2V0OmRlYnVnXCJcbmV4cG9ydCBjb25zdCBQSFhfTFZfUFJPRklMRSA9IFwicGh4OmxpdmUtc29ja2V0OnByb2ZpbGluZ1wiXG5leHBvcnQgY29uc3QgUEhYX0xWX0xBVEVOQ1lfU0lNID0gXCJwaHg6bGl2ZS1zb2NrZXQ6bGF0ZW5jeS1zaW1cIlxuZXhwb3J0IGNvbnN0IFBIWF9QUk9HUkVTUyA9IFwicHJvZ3Jlc3NcIlxuZXhwb3J0IGNvbnN0IFBIWF9NT1VOVEVEID0gXCJtb3VudGVkXCJcbmV4cG9ydCBjb25zdCBMT0FERVJfVElNRU9VVCA9IDFcbmV4cG9ydCBjb25zdCBCRUZPUkVfVU5MT0FEX0xPQURFUl9USU1FT1VUID0gMjAwXG5leHBvcnQgY29uc3QgQklORElOR19QUkVGSVggPSBcInBoeC1cIlxuZXhwb3J0IGNvbnN0IFBVU0hfVElNRU9VVCA9IDMwMDAwXG5leHBvcnQgY29uc3QgTElOS19IRUFERVIgPSBcIngtcmVxdWVzdGVkLXdpdGhcIlxuZXhwb3J0IGNvbnN0IFJFU1BPTlNFX1VSTF9IRUFERVIgPSBcIngtcmVzcG9uc2UtdXJsXCJcbmV4cG9ydCBjb25zdCBERUJPVU5DRV9UUklHR0VSID0gXCJkZWJvdW5jZS10cmlnZ2VyXCJcbmV4cG9ydCBjb25zdCBUSFJPVFRMRUQgPSBcInRocm90dGxlZFwiXG5leHBvcnQgY29uc3QgREVCT1VOQ0VfUFJFVl9LRVkgPSBcImRlYm91bmNlLXByZXYta2V5XCJcbmV4cG9ydCBjb25zdCBERUZBVUxUUyA9IHtcbiAgZGVib3VuY2U6IDMwMCxcbiAgdGhyb3R0bGU6IDMwMFxufVxuXG4vLyBSZW5kZXJlZFxuZXhwb3J0IGNvbnN0IERZTkFNSUNTID0gXCJkXCJcbmV4cG9ydCBjb25zdCBTVEFUSUMgPSBcInNcIlxuZXhwb3J0IGNvbnN0IENPTVBPTkVOVFMgPSBcImNcIlxuZXhwb3J0IGNvbnN0IEVWRU5UUyA9IFwiZVwiXG5leHBvcnQgY29uc3QgUkVQTFkgPSBcInJcIlxuZXhwb3J0IGNvbnN0IFRJVExFID0gXCJ0XCJcbmV4cG9ydCBjb25zdCBURU1QTEFURVMgPSBcInBcIlxuZXhwb3J0IGNvbnN0IFNUUkVBTSA9IFwic3RyZWFtXCJcbiIsICJpbXBvcnQge1xuICBsb2dFcnJvclxufSBmcm9tIFwiLi91dGlsc1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEVudHJ5VXBsb2FkZXIge1xuICBjb25zdHJ1Y3RvcihlbnRyeSwgY2h1bmtTaXplLCBsaXZlU29ja2V0KXtcbiAgICB0aGlzLmxpdmVTb2NrZXQgPSBsaXZlU29ja2V0XG4gICAgdGhpcy5lbnRyeSA9IGVudHJ5XG4gICAgdGhpcy5vZmZzZXQgPSAwXG4gICAgdGhpcy5jaHVua1NpemUgPSBjaHVua1NpemVcbiAgICB0aGlzLmNodW5rVGltZXIgPSBudWxsXG4gICAgdGhpcy51cGxvYWRDaGFubmVsID0gbGl2ZVNvY2tldC5jaGFubmVsKGBsdnU6JHtlbnRyeS5yZWZ9YCwge3Rva2VuOiBlbnRyeS5tZXRhZGF0YSgpfSlcbiAgfVxuXG4gIGVycm9yKHJlYXNvbil7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMuY2h1bmtUaW1lcilcbiAgICB0aGlzLnVwbG9hZENoYW5uZWwubGVhdmUoKVxuICAgIHRoaXMuZW50cnkuZXJyb3IocmVhc29uKVxuICB9XG5cbiAgdXBsb2FkKCl7XG4gICAgdGhpcy51cGxvYWRDaGFubmVsLm9uRXJyb3IocmVhc29uID0+IHRoaXMuZXJyb3IocmVhc29uKSlcbiAgICB0aGlzLnVwbG9hZENoYW5uZWwuam9pbigpXG4gICAgICAucmVjZWl2ZShcIm9rXCIsIF9kYXRhID0+IHRoaXMucmVhZE5leHRDaHVuaygpKVxuICAgICAgLnJlY2VpdmUoXCJlcnJvclwiLCByZWFzb24gPT4gdGhpcy5lcnJvcihyZWFzb24pKVxuICB9XG5cbiAgaXNEb25lKCl7IHJldHVybiB0aGlzLm9mZnNldCA+PSB0aGlzLmVudHJ5LmZpbGUuc2l6ZSB9XG5cbiAgcmVhZE5leHRDaHVuaygpe1xuICAgIGxldCByZWFkZXIgPSBuZXcgd2luZG93LkZpbGVSZWFkZXIoKVxuICAgIGxldCBibG9iID0gdGhpcy5lbnRyeS5maWxlLnNsaWNlKHRoaXMub2Zmc2V0LCB0aGlzLmNodW5rU2l6ZSArIHRoaXMub2Zmc2V0KVxuICAgIHJlYWRlci5vbmxvYWQgPSAoZSkgPT4ge1xuICAgICAgaWYoZS50YXJnZXQuZXJyb3IgPT09IG51bGwpe1xuICAgICAgICB0aGlzLm9mZnNldCArPSBlLnRhcmdldC5yZXN1bHQuYnl0ZUxlbmd0aFxuICAgICAgICB0aGlzLnB1c2hDaHVuayhlLnRhcmdldC5yZXN1bHQpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gbG9nRXJyb3IoXCJSZWFkIGVycm9yOiBcIiArIGUudGFyZ2V0LmVycm9yKVxuICAgICAgfVxuICAgIH1cbiAgICByZWFkZXIucmVhZEFzQXJyYXlCdWZmZXIoYmxvYilcbiAgfVxuXG4gIHB1c2hDaHVuayhjaHVuayl7XG4gICAgaWYoIXRoaXMudXBsb2FkQ2hhbm5lbC5pc0pvaW5lZCgpKXsgcmV0dXJuIH1cbiAgICB0aGlzLnVwbG9hZENoYW5uZWwucHVzaChcImNodW5rXCIsIGNodW5rKVxuICAgICAgLnJlY2VpdmUoXCJva1wiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuZW50cnkucHJvZ3Jlc3MoKHRoaXMub2Zmc2V0IC8gdGhpcy5lbnRyeS5maWxlLnNpemUpICogMTAwKVxuICAgICAgICBpZighdGhpcy5pc0RvbmUoKSl7XG4gICAgICAgICAgdGhpcy5jaHVua1RpbWVyID0gc2V0VGltZW91dCgoKSA9PiB0aGlzLnJlYWROZXh0Q2h1bmsoKSwgdGhpcy5saXZlU29ja2V0LmdldExhdGVuY3lTaW0oKSB8fCAwKVxuICAgICAgICB9XG4gICAgICB9KVxuICB9XG59XG4iLCAiaW1wb3J0IHtcbiAgUEhYX1ZJRVdfU0VMRUNUT1Jcbn0gZnJvbSBcIi4vY29uc3RhbnRzXCJcblxuaW1wb3J0IEVudHJ5VXBsb2FkZXIgZnJvbSBcIi4vZW50cnlfdXBsb2FkZXJcIlxuXG5leHBvcnQgbGV0IGxvZ0Vycm9yID0gKG1zZywgb2JqKSA9PiBjb25zb2xlLmVycm9yICYmIGNvbnNvbGUuZXJyb3IobXNnLCBvYmopXG5cbmV4cG9ydCBsZXQgaXNDaWQgPSAoY2lkKSA9PiB7XG4gIGxldCB0eXBlID0gdHlwZW9mKGNpZClcbiAgcmV0dXJuIHR5cGUgPT09IFwibnVtYmVyXCIgfHwgKHR5cGUgPT09IFwic3RyaW5nXCIgJiYgL14oMHxbMS05XVxcZCopJC8udGVzdChjaWQpKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZGV0ZWN0RHVwbGljYXRlSWRzKCl7XG4gIGxldCBpZHMgPSBuZXcgU2V0KClcbiAgbGV0IGVsZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIipbaWRdXCIpXG4gIGZvcihsZXQgaSA9IDAsIGxlbiA9IGVsZW1zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKXtcbiAgICBpZihpZHMuaGFzKGVsZW1zW2ldLmlkKSl7XG4gICAgICBjb25zb2xlLmVycm9yKGBNdWx0aXBsZSBJRHMgZGV0ZWN0ZWQ6ICR7ZWxlbXNbaV0uaWR9LiBFbnN1cmUgdW5pcXVlIGVsZW1lbnQgaWRzLmApXG4gICAgfSBlbHNlIHtcbiAgICAgIGlkcy5hZGQoZWxlbXNbaV0uaWQpXG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBsZXQgZGVidWcgPSAodmlldywga2luZCwgbXNnLCBvYmopID0+IHtcbiAgaWYodmlldy5saXZlU29ja2V0LmlzRGVidWdFbmFibGVkKCkpe1xuICAgIGNvbnNvbGUubG9nKGAke3ZpZXcuaWR9ICR7a2luZH06ICR7bXNnfSAtIGAsIG9iailcbiAgfVxufVxuXG4vLyB3cmFwcyB2YWx1ZSBpbiBjbG9zdXJlIG9yIHJldHVybnMgY2xvc3VyZVxuZXhwb3J0IGxldCBjbG9zdXJlID0gKHZhbCkgPT4gdHlwZW9mIHZhbCA9PT0gXCJmdW5jdGlvblwiID8gdmFsIDogZnVuY3Rpb24gKCl7IHJldHVybiB2YWwgfVxuXG5leHBvcnQgbGV0IGNsb25lID0gKG9iaikgPT4geyByZXR1cm4gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShvYmopKSB9XG5cbmV4cG9ydCBsZXQgY2xvc2VzdFBoeEJpbmRpbmcgPSAoZWwsIGJpbmRpbmcsIGJvcmRlckVsKSA9PiB7XG4gIGRvIHtcbiAgICBpZihlbC5tYXRjaGVzKGBbJHtiaW5kaW5nfV1gKSAmJiAhZWwuZGlzYWJsZWQpeyByZXR1cm4gZWwgfVxuICAgIGVsID0gZWwucGFyZW50RWxlbWVudCB8fCBlbC5wYXJlbnROb2RlXG4gIH0gd2hpbGUoZWwgIT09IG51bGwgJiYgZWwubm9kZVR5cGUgPT09IDEgJiYgISgoYm9yZGVyRWwgJiYgYm9yZGVyRWwuaXNTYW1lTm9kZShlbCkpIHx8IGVsLm1hdGNoZXMoUEhYX1ZJRVdfU0VMRUNUT1IpKSlcbiAgcmV0dXJuIG51bGxcbn1cblxuZXhwb3J0IGxldCBpc09iamVjdCA9IChvYmopID0+IHtcbiAgcmV0dXJuIG9iaiAhPT0gbnVsbCAmJiB0eXBlb2Ygb2JqID09PSBcIm9iamVjdFwiICYmICEob2JqIGluc3RhbmNlb2YgQXJyYXkpXG59XG5cbmV4cG9ydCBsZXQgaXNFcXVhbE9iaiA9IChvYmoxLCBvYmoyKSA9PiBKU09OLnN0cmluZ2lmeShvYmoxKSA9PT0gSlNPTi5zdHJpbmdpZnkob2JqMilcblxuZXhwb3J0IGxldCBpc0VtcHR5ID0gKG9iaikgPT4ge1xuICBmb3IobGV0IHggaW4gb2JqKXsgcmV0dXJuIGZhbHNlIH1cbiAgcmV0dXJuIHRydWVcbn1cblxuZXhwb3J0IGxldCBtYXliZSA9IChlbCwgY2FsbGJhY2spID0+IGVsICYmIGNhbGxiYWNrKGVsKVxuXG5leHBvcnQgbGV0IGNoYW5uZWxVcGxvYWRlciA9IGZ1bmN0aW9uIChlbnRyaWVzLCBvbkVycm9yLCByZXNwLCBsaXZlU29ja2V0KXtcbiAgZW50cmllcy5mb3JFYWNoKGVudHJ5ID0+IHtcbiAgICBsZXQgZW50cnlVcGxvYWRlciA9IG5ldyBFbnRyeVVwbG9hZGVyKGVudHJ5LCByZXNwLmNvbmZpZy5jaHVua19zaXplLCBsaXZlU29ja2V0KVxuICAgIGVudHJ5VXBsb2FkZXIudXBsb2FkKClcbiAgfSlcbn1cbiIsICJsZXQgQnJvd3NlciA9IHtcbiAgY2FuUHVzaFN0YXRlKCl7IHJldHVybiAodHlwZW9mIChoaXN0b3J5LnB1c2hTdGF0ZSkgIT09IFwidW5kZWZpbmVkXCIpIH0sXG5cbiAgZHJvcExvY2FsKGxvY2FsU3RvcmFnZSwgbmFtZXNwYWNlLCBzdWJrZXkpe1xuICAgIHJldHVybiBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSh0aGlzLmxvY2FsS2V5KG5hbWVzcGFjZSwgc3Via2V5KSlcbiAgfSxcblxuICB1cGRhdGVMb2NhbChsb2NhbFN0b3JhZ2UsIG5hbWVzcGFjZSwgc3Via2V5LCBpbml0aWFsLCBmdW5jKXtcbiAgICBsZXQgY3VycmVudCA9IHRoaXMuZ2V0TG9jYWwobG9jYWxTdG9yYWdlLCBuYW1lc3BhY2UsIHN1YmtleSlcbiAgICBsZXQga2V5ID0gdGhpcy5sb2NhbEtleShuYW1lc3BhY2UsIHN1YmtleSlcbiAgICBsZXQgbmV3VmFsID0gY3VycmVudCA9PT0gbnVsbCA/IGluaXRpYWwgOiBmdW5jKGN1cnJlbnQpXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LCBKU09OLnN0cmluZ2lmeShuZXdWYWwpKVxuICAgIHJldHVybiBuZXdWYWxcbiAgfSxcblxuICBnZXRMb2NhbChsb2NhbFN0b3JhZ2UsIG5hbWVzcGFjZSwgc3Via2V5KXtcbiAgICByZXR1cm4gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSh0aGlzLmxvY2FsS2V5KG5hbWVzcGFjZSwgc3Via2V5KSkpXG4gIH0sXG5cbiAgdXBkYXRlQ3VycmVudFN0YXRlKGNhbGxiYWNrKXtcbiAgICBpZighdGhpcy5jYW5QdXNoU3RhdGUoKSl7IHJldHVybiB9XG4gICAgaGlzdG9yeS5yZXBsYWNlU3RhdGUoY2FsbGJhY2soaGlzdG9yeS5zdGF0ZSB8fCB7fSksIFwiXCIsIHdpbmRvdy5sb2NhdGlvbi5ocmVmKVxuICB9LFxuXG4gIHB1c2hTdGF0ZShraW5kLCBtZXRhLCB0byl7XG4gICAgaWYodGhpcy5jYW5QdXNoU3RhdGUoKSl7XG4gICAgICBpZih0byAhPT0gd2luZG93LmxvY2F0aW9uLmhyZWYpe1xuICAgICAgICBpZihtZXRhLnR5cGUgPT0gXCJyZWRpcmVjdFwiICYmIG1ldGEuc2Nyb2xsKXtcbiAgICAgICAgICAvLyBJZiB3ZSdyZSByZWRpcmVjdGluZyBzdG9yZSB0aGUgY3VycmVudCBzY3JvbGxZIGZvciB0aGUgY3VycmVudCBoaXN0b3J5IHN0YXRlLlxuICAgICAgICAgIGxldCBjdXJyZW50U3RhdGUgPSBoaXN0b3J5LnN0YXRlIHx8IHt9XG4gICAgICAgICAgY3VycmVudFN0YXRlLnNjcm9sbCA9IG1ldGEuc2Nyb2xsXG4gICAgICAgICAgaGlzdG9yeS5yZXBsYWNlU3RhdGUoY3VycmVudFN0YXRlLCBcIlwiLCB3aW5kb3cubG9jYXRpb24uaHJlZilcbiAgICAgICAgfVxuXG4gICAgICAgIGRlbGV0ZSBtZXRhLnNjcm9sbCAvLyBPbmx5IHN0b3JlIHRoZSBzY3JvbGwgaW4gdGhlIHJlZGlyZWN0IGNhc2UuXG4gICAgICAgIGhpc3Rvcnlba2luZCArIFwiU3RhdGVcIl0obWV0YSwgXCJcIiwgdG8gfHwgbnVsbCkgLy8gSUUgd2lsbCBjb2VyY2UgdW5kZWZpbmVkIHRvIHN0cmluZ1xuICAgICAgICBsZXQgaGFzaEVsID0gdGhpcy5nZXRIYXNoVGFyZ2V0RWwod2luZG93LmxvY2F0aW9uLmhhc2gpXG5cbiAgICAgICAgaWYoaGFzaEVsKXtcbiAgICAgICAgICBoYXNoRWwuc2Nyb2xsSW50b1ZpZXcoKVxuICAgICAgICB9IGVsc2UgaWYobWV0YS50eXBlID09PSBcInJlZGlyZWN0XCIpe1xuICAgICAgICAgIHdpbmRvdy5zY3JvbGwoMCwgMClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJlZGlyZWN0KHRvKVxuICAgIH1cbiAgfSxcblxuICBzZXRDb29raWUobmFtZSwgdmFsdWUpe1xuICAgIGRvY3VtZW50LmNvb2tpZSA9IGAke25hbWV9PSR7dmFsdWV9YFxuICB9LFxuXG4gIGdldENvb2tpZShuYW1lKXtcbiAgICByZXR1cm4gZG9jdW1lbnQuY29va2llLnJlcGxhY2UobmV3IFJlZ0V4cChgKD86KD86XnwuKjtcXHMqKSR7bmFtZX1cXHMqXFw9XFxzKihbXjtdKikuKiQpfF4uKiRgKSwgXCIkMVwiKVxuICB9LFxuXG4gIHJlZGlyZWN0KHRvVVJMLCBmbGFzaCl7XG4gICAgaWYoZmxhc2gpeyBCcm93c2VyLnNldENvb2tpZShcIl9fcGhvZW5peF9mbGFzaF9fXCIsIGZsYXNoICsgXCI7IG1heC1hZ2U9NjAwMDA7IHBhdGg9L1wiKSB9XG4gICAgd2luZG93LmxvY2F0aW9uID0gdG9VUkxcbiAgfSxcblxuICBsb2NhbEtleShuYW1lc3BhY2UsIHN1YmtleSl7IHJldHVybiBgJHtuYW1lc3BhY2V9LSR7c3Via2V5fWAgfSxcblxuICBnZXRIYXNoVGFyZ2V0RWwobWF5YmVIYXNoKXtcbiAgICBsZXQgaGFzaCA9IG1heWJlSGFzaC50b1N0cmluZygpLnN1YnN0cmluZygxKVxuICAgIGlmKGhhc2ggPT09IFwiXCIpeyByZXR1cm4gfVxuICAgIHJldHVybiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChoYXNoKSB8fCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBhW25hbWU9XCIke2hhc2h9XCJdYClcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBCcm93c2VyXG4iLCAiaW1wb3J0IHtcbiAgQ0hFQ0tBQkxFX0lOUFVUUyxcbiAgREVCT1VOQ0VfUFJFVl9LRVksXG4gIERFQk9VTkNFX1RSSUdHRVIsXG4gIEZPQ1VTQUJMRV9JTlBVVFMsXG4gIFBIWF9DT01QT05FTlQsXG4gIFBIWF9FVkVOVF9DTEFTU0VTLFxuICBQSFhfSEFTX0ZPQ1VTRUQsXG4gIFBIWF9IQVNfU1VCTUlUVEVELFxuICBQSFhfTUFJTixcbiAgUEhYX05PX0ZFRURCQUNLX0NMQVNTLFxuICBQSFhfUEFSRU5UX0lELFxuICBQSFhfUFJJVkFURSxcbiAgUEhYX1JFRixcbiAgUEhYX1JFRl9TUkMsXG4gIFBIWF9ST09UX0lELFxuICBQSFhfU0VTU0lPTixcbiAgUEhYX1NUQVRJQyxcbiAgUEhYX1VQTE9BRF9SRUYsXG4gIFBIWF9WSUVXX1NFTEVDVE9SLFxuICBQSFhfU1RJQ0tZLFxuICBUSFJPVFRMRURcbn0gZnJvbSBcIi4vY29uc3RhbnRzXCJcblxuaW1wb3J0IHtcbiAgbG9nRXJyb3Jcbn0gZnJvbSBcIi4vdXRpbHNcIlxuXG5sZXQgRE9NID0ge1xuICBieUlkKGlkKXsgcmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKSB8fCBsb2dFcnJvcihgbm8gaWQgZm91bmQgZm9yICR7aWR9YCkgfSxcblxuICByZW1vdmVDbGFzcyhlbCwgY2xhc3NOYW1lKXtcbiAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKGNsYXNzTmFtZSlcbiAgICBpZihlbC5jbGFzc0xpc3QubGVuZ3RoID09PSAwKXsgZWwucmVtb3ZlQXR0cmlidXRlKFwiY2xhc3NcIikgfVxuICB9LFxuXG4gIGFsbChub2RlLCBxdWVyeSwgY2FsbGJhY2spe1xuICAgIGlmKCFub2RlKXsgcmV0dXJuIFtdIH1cbiAgICBsZXQgYXJyYXkgPSBBcnJheS5mcm9tKG5vZGUucXVlcnlTZWxlY3RvckFsbChxdWVyeSkpXG4gICAgcmV0dXJuIGNhbGxiYWNrID8gYXJyYXkuZm9yRWFjaChjYWxsYmFjaykgOiBhcnJheVxuICB9LFxuXG4gIGNoaWxkTm9kZUxlbmd0aChodG1sKXtcbiAgICBsZXQgdGVtcGxhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGVtcGxhdGVcIilcbiAgICB0ZW1wbGF0ZS5pbm5lckhUTUwgPSBodG1sXG4gICAgcmV0dXJuIHRlbXBsYXRlLmNvbnRlbnQuY2hpbGRFbGVtZW50Q291bnRcbiAgfSxcblxuICBpc1VwbG9hZElucHV0KGVsKXsgcmV0dXJuIGVsLnR5cGUgPT09IFwiZmlsZVwiICYmIGVsLmdldEF0dHJpYnV0ZShQSFhfVVBMT0FEX1JFRikgIT09IG51bGwgfSxcblxuICBmaW5kVXBsb2FkSW5wdXRzKG5vZGUpeyByZXR1cm4gdGhpcy5hbGwobm9kZSwgYGlucHV0W3R5cGU9XCJmaWxlXCJdWyR7UEhYX1VQTE9BRF9SRUZ9XWApIH0sXG5cbiAgZmluZENvbXBvbmVudE5vZGVMaXN0KG5vZGUsIGNpZCl7XG4gICAgcmV0dXJuIHRoaXMuZmlsdGVyV2l0aGluU2FtZUxpdmVWaWV3KHRoaXMuYWxsKG5vZGUsIGBbJHtQSFhfQ09NUE9ORU5UfT1cIiR7Y2lkfVwiXWApLCBub2RlKVxuICB9LFxuXG4gIGlzUGh4RGVzdHJveWVkKG5vZGUpe1xuICAgIHJldHVybiBub2RlLmlkICYmIERPTS5wcml2YXRlKG5vZGUsIFwiZGVzdHJveWVkXCIpID8gdHJ1ZSA6IGZhbHNlXG4gIH0sXG5cbiAgd2FudHNOZXdUYWIoZSl7XG4gICAgbGV0IHdhbnRzTmV3VGFiID0gZS5jdHJsS2V5IHx8IGUuc2hpZnRLZXkgfHwgZS5tZXRhS2V5IHx8IChlLmJ1dHRvbiAmJiBlLmJ1dHRvbiA9PT0gMSlcbiAgICByZXR1cm4gd2FudHNOZXdUYWIgfHwgZS50YXJnZXQuZ2V0QXR0cmlidXRlKFwidGFyZ2V0XCIpID09PSBcIl9ibGFua1wiXG4gIH0sXG5cbiAgaXNVbmxvYWRhYmxlRm9ybVN1Ym1pdChlKXtcbiAgICByZXR1cm4gIWUuZGVmYXVsdFByZXZlbnRlZCAmJiAhdGhpcy53YW50c05ld1RhYihlKVxuICB9LFxuXG4gIGlzTmV3UGFnZUhyZWYoaHJlZiwgY3VycmVudExvY2F0aW9uKXtcbiAgICBsZXQgdXJsXG4gICAgdHJ5IHtcbiAgICAgIHVybCA9IG5ldyBVUkwoaHJlZilcbiAgICB9IGNhdGNoKGUpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHVybCA9IG5ldyBVUkwoaHJlZiwgY3VycmVudExvY2F0aW9uKVxuICAgICAgfSBjYXRjaChlKSB7XG4gICAgICAgIC8vIGJhZCBVUkwsIGZhbGxiYWNrIHRvIGxldCBicm93c2VyIHRyeSBpdCBhcyBleHRlcm5hbFxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmKHVybC5ob3N0ID09PSBjdXJyZW50TG9jYXRpb24uaG9zdCAmJiB1cmwucHJvdG9jb2wgPT09IGN1cnJlbnRMb2NhdGlvbi5wcm90b2NvbCl7XG4gICAgICBpZih1cmwucGF0aG5hbWUgPT09IGN1cnJlbnRMb2NhdGlvbi5wYXRobmFtZSAmJiB1cmwuc2VhcmNoID09PSBjdXJyZW50TG9jYXRpb24uc2VhcmNoKXtcbiAgICAgICAgcmV0dXJuIHVybC5oYXNoID09PSBcIlwiICYmICF1cmwuaHJlZi5lbmRzV2l0aChcIiNcIilcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRydWVcbiAgfSxcblxuICBtYXJrUGh4Q2hpbGREZXN0cm95ZWQoZWwpe1xuICAgIGlmKHRoaXMuaXNQaHhDaGlsZChlbCkpeyBlbC5zZXRBdHRyaWJ1dGUoUEhYX1NFU1NJT04sIFwiXCIpIH1cbiAgICB0aGlzLnB1dFByaXZhdGUoZWwsIFwiZGVzdHJveWVkXCIsIHRydWUpXG4gIH0sXG5cbiAgZmluZFBoeENoaWxkcmVuSW5GcmFnbWVudChodG1sLCBwYXJlbnRJZCl7XG4gICAgbGV0IHRlbXBsYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRlbXBsYXRlXCIpXG4gICAgdGVtcGxhdGUuaW5uZXJIVE1MID0gaHRtbFxuICAgIHJldHVybiB0aGlzLmZpbmRQaHhDaGlsZHJlbih0ZW1wbGF0ZS5jb250ZW50LCBwYXJlbnRJZClcbiAgfSxcblxuICBpc0lnbm9yZWQoZWwsIHBoeFVwZGF0ZSl7XG4gICAgcmV0dXJuIChlbC5nZXRBdHRyaWJ1dGUocGh4VXBkYXRlKSB8fCBlbC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXBoeC11cGRhdGVcIikpID09PSBcImlnbm9yZVwiXG4gIH0sXG5cbiAgaXNQaHhVcGRhdGUoZWwsIHBoeFVwZGF0ZSwgdXBkYXRlVHlwZXMpe1xuICAgIHJldHVybiBlbC5nZXRBdHRyaWJ1dGUgJiYgdXBkYXRlVHlwZXMuaW5kZXhPZihlbC5nZXRBdHRyaWJ1dGUocGh4VXBkYXRlKSkgPj0gMFxuICB9LFxuXG4gIGZpbmRQaHhTdGlja3koZWwpeyByZXR1cm4gdGhpcy5hbGwoZWwsIGBbJHtQSFhfU1RJQ0tZfV1gKSB9LFxuXG4gIGZpbmRQaHhDaGlsZHJlbihlbCwgcGFyZW50SWQpe1xuICAgIHJldHVybiB0aGlzLmFsbChlbCwgYCR7UEhYX1ZJRVdfU0VMRUNUT1J9WyR7UEhYX1BBUkVOVF9JRH09XCIke3BhcmVudElkfVwiXWApXG4gIH0sXG5cbiAgZmluZFBhcmVudENJRHMobm9kZSwgY2lkcyl7XG4gICAgbGV0IGluaXRpYWwgPSBuZXcgU2V0KGNpZHMpXG4gICAgbGV0IHBhcmVudENpZHMgPVxuICAgICAgY2lkcy5yZWR1Y2UoKGFjYywgY2lkKSA9PiB7XG4gICAgICAgIGxldCBzZWxlY3RvciA9IGBbJHtQSFhfQ09NUE9ORU5UfT1cIiR7Y2lkfVwiXSBbJHtQSFhfQ09NUE9ORU5UfV1gXG5cbiAgICAgICAgdGhpcy5maWx0ZXJXaXRoaW5TYW1lTGl2ZVZpZXcodGhpcy5hbGwobm9kZSwgc2VsZWN0b3IpLCBub2RlKVxuICAgICAgICAgIC5tYXAoZWwgPT4gcGFyc2VJbnQoZWwuZ2V0QXR0cmlidXRlKFBIWF9DT01QT05FTlQpKSlcbiAgICAgICAgICAuZm9yRWFjaChjaGlsZENJRCA9PiBhY2MuZGVsZXRlKGNoaWxkQ0lEKSlcblxuICAgICAgICByZXR1cm4gYWNjXG4gICAgICB9LCBpbml0aWFsKVxuXG4gICAgcmV0dXJuIHBhcmVudENpZHMuc2l6ZSA9PT0gMCA/IG5ldyBTZXQoY2lkcykgOiBwYXJlbnRDaWRzXG4gIH0sXG5cbiAgZmlsdGVyV2l0aGluU2FtZUxpdmVWaWV3KG5vZGVzLCBwYXJlbnQpe1xuICAgIGlmKHBhcmVudC5xdWVyeVNlbGVjdG9yKFBIWF9WSUVXX1NFTEVDVE9SKSl7XG4gICAgICByZXR1cm4gbm9kZXMuZmlsdGVyKGVsID0+IHRoaXMud2l0aGluU2FtZUxpdmVWaWV3KGVsLCBwYXJlbnQpKVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbm9kZXNcbiAgICB9XG4gIH0sXG5cbiAgd2l0aGluU2FtZUxpdmVWaWV3KG5vZGUsIHBhcmVudCl7XG4gICAgd2hpbGUobm9kZSA9IG5vZGUucGFyZW50Tm9kZSl7XG4gICAgICBpZihub2RlLmlzU2FtZU5vZGUocGFyZW50KSl7IHJldHVybiB0cnVlIH1cbiAgICAgIGlmKG5vZGUuZ2V0QXR0cmlidXRlKFBIWF9TRVNTSU9OKSAhPT0gbnVsbCl7IHJldHVybiBmYWxzZSB9XG4gICAgfVxuICB9LFxuXG4gIHByaXZhdGUoZWwsIGtleSl7IHJldHVybiBlbFtQSFhfUFJJVkFURV0gJiYgZWxbUEhYX1BSSVZBVEVdW2tleV0gfSxcblxuICBkZWxldGVQcml2YXRlKGVsLCBrZXkpeyBlbFtQSFhfUFJJVkFURV0gJiYgZGVsZXRlIChlbFtQSFhfUFJJVkFURV1ba2V5XSkgfSxcblxuICBwdXRQcml2YXRlKGVsLCBrZXksIHZhbHVlKXtcbiAgICBpZighZWxbUEhYX1BSSVZBVEVdKXsgZWxbUEhYX1BSSVZBVEVdID0ge30gfVxuICAgIGVsW1BIWF9QUklWQVRFXVtrZXldID0gdmFsdWVcbiAgfSxcblxuICB1cGRhdGVQcml2YXRlKGVsLCBrZXksIGRlZmF1bHRWYWwsIHVwZGF0ZUZ1bmMpe1xuICAgIGxldCBleGlzdGluZyA9IHRoaXMucHJpdmF0ZShlbCwga2V5KVxuICAgIGlmKGV4aXN0aW5nID09PSB1bmRlZmluZWQpe1xuICAgICAgdGhpcy5wdXRQcml2YXRlKGVsLCBrZXksIHVwZGF0ZUZ1bmMoZGVmYXVsdFZhbCkpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucHV0UHJpdmF0ZShlbCwga2V5LCB1cGRhdGVGdW5jKGV4aXN0aW5nKSlcbiAgICB9XG4gIH0sXG5cbiAgY29weVByaXZhdGVzKHRhcmdldCwgc291cmNlKXtcbiAgICBpZihzb3VyY2VbUEhYX1BSSVZBVEVdKXtcbiAgICAgIHRhcmdldFtQSFhfUFJJVkFURV0gPSBzb3VyY2VbUEhYX1BSSVZBVEVdXG4gICAgfVxuICB9LFxuXG4gIHB1dFRpdGxlKHN0cil7XG4gICAgbGV0IHRpdGxlRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwidGl0bGVcIilcbiAgICBpZih0aXRsZUVsKXtcbiAgICAgIGxldCB7cHJlZml4LCBzdWZmaXh9ID0gdGl0bGVFbC5kYXRhc2V0XG4gICAgICBkb2N1bWVudC50aXRsZSA9IGAke3ByZWZpeCB8fCBcIlwifSR7c3RyfSR7c3VmZml4IHx8IFwiXCJ9YFxuICAgIH0gZWxzZSB7XG4gICAgICBkb2N1bWVudC50aXRsZSA9IHN0clxuICAgIH1cbiAgfSxcblxuICBkZWJvdW5jZShlbCwgZXZlbnQsIHBoeERlYm91bmNlLCBkZWZhdWx0RGVib3VuY2UsIHBoeFRocm90dGxlLCBkZWZhdWx0VGhyb3R0bGUsIGFzeW5jRmlsdGVyLCBjYWxsYmFjayl7XG4gICAgbGV0IGRlYm91bmNlID0gZWwuZ2V0QXR0cmlidXRlKHBoeERlYm91bmNlKVxuICAgIGxldCB0aHJvdHRsZSA9IGVsLmdldEF0dHJpYnV0ZShwaHhUaHJvdHRsZSlcbiAgICBpZihkZWJvdW5jZSA9PT0gXCJcIil7IGRlYm91bmNlID0gZGVmYXVsdERlYm91bmNlIH1cbiAgICBpZih0aHJvdHRsZSA9PT0gXCJcIil7IHRocm90dGxlID0gZGVmYXVsdFRocm90dGxlIH1cbiAgICBsZXQgdmFsdWUgPSBkZWJvdW5jZSB8fCB0aHJvdHRsZVxuICAgIHN3aXRjaCh2YWx1ZSl7XG4gICAgICBjYXNlIG51bGw6IHJldHVybiBjYWxsYmFjaygpXG5cbiAgICAgIGNhc2UgXCJibHVyXCI6XG4gICAgICAgIGlmKHRoaXMub25jZShlbCwgXCJkZWJvdW5jZS1ibHVyXCIpKXtcbiAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKFwiYmx1clwiLCAoKSA9PiBjYWxsYmFjaygpKVxuICAgICAgICB9XG4gICAgICAgIHJldHVyblxuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBsZXQgdGltZW91dCA9IHBhcnNlSW50KHZhbHVlKVxuICAgICAgICBsZXQgdHJpZ2dlciA9ICgpID0+IHRocm90dGxlID8gdGhpcy5kZWxldGVQcml2YXRlKGVsLCBUSFJPVFRMRUQpIDogY2FsbGJhY2soKVxuICAgICAgICBsZXQgY3VycmVudEN5Y2xlID0gdGhpcy5pbmNDeWNsZShlbCwgREVCT1VOQ0VfVFJJR0dFUiwgdHJpZ2dlcilcbiAgICAgICAgaWYoaXNOYU4odGltZW91dCkpeyByZXR1cm4gbG9nRXJyb3IoYGludmFsaWQgdGhyb3R0bGUvZGVib3VuY2UgdmFsdWU6ICR7dmFsdWV9YCkgfVxuICAgICAgICBpZih0aHJvdHRsZSl7XG4gICAgICAgICAgbGV0IG5ld0tleURvd24gPSBmYWxzZVxuICAgICAgICAgIGlmKGV2ZW50LnR5cGUgPT09IFwia2V5ZG93blwiKXtcbiAgICAgICAgICAgIGxldCBwcmV2S2V5ID0gdGhpcy5wcml2YXRlKGVsLCBERUJPVU5DRV9QUkVWX0tFWSlcbiAgICAgICAgICAgIHRoaXMucHV0UHJpdmF0ZShlbCwgREVCT1VOQ0VfUFJFVl9LRVksIGV2ZW50LmtleSlcbiAgICAgICAgICAgIG5ld0tleURvd24gPSBwcmV2S2V5ICE9PSBldmVudC5rZXlcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZighbmV3S2V5RG93biAmJiB0aGlzLnByaXZhdGUoZWwsIFRIUk9UVExFRCkpe1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKClcbiAgICAgICAgICAgIHRoaXMucHV0UHJpdmF0ZShlbCwgVEhST1RUTEVELCB0cnVlKVxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgIGlmKGFzeW5jRmlsdGVyKCkpeyB0aGlzLnRyaWdnZXJDeWNsZShlbCwgREVCT1VOQ0VfVFJJR0dFUikgfVxuICAgICAgICAgICAgfSwgdGltZW91dClcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBpZihhc3luY0ZpbHRlcigpKXsgdGhpcy50cmlnZ2VyQ3ljbGUoZWwsIERFQk9VTkNFX1RSSUdHRVIsIGN1cnJlbnRDeWNsZSkgfVxuICAgICAgICAgIH0sIHRpbWVvdXQpXG4gICAgICAgIH1cblxuICAgICAgICBsZXQgZm9ybSA9IGVsLmZvcm1cbiAgICAgICAgaWYoZm9ybSAmJiB0aGlzLm9uY2UoZm9ybSwgXCJiaW5kLWRlYm91bmNlXCIpKXtcbiAgICAgICAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKCkgPT4ge1xuICAgICAgICAgICAgQXJyYXkuZnJvbSgobmV3IEZvcm1EYXRhKGZvcm0pKS5lbnRyaWVzKCksIChbbmFtZV0pID0+IHtcbiAgICAgICAgICAgICAgbGV0IGlucHV0ID0gZm9ybS5xdWVyeVNlbGVjdG9yKGBbbmFtZT1cIiR7bmFtZX1cIl1gKVxuICAgICAgICAgICAgICB0aGlzLmluY0N5Y2xlKGlucHV0LCBERUJPVU5DRV9UUklHR0VSKVxuICAgICAgICAgICAgICB0aGlzLmRlbGV0ZVByaXZhdGUoaW5wdXQsIFRIUk9UVExFRClcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZih0aGlzLm9uY2UoZWwsIFwiYmluZC1kZWJvdW5jZVwiKSl7XG4gICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcihcImJsdXJcIiwgKCkgPT4gdGhpcy50cmlnZ2VyQ3ljbGUoZWwsIERFQk9VTkNFX1RSSUdHRVIpKVxuICAgICAgICB9XG4gICAgfVxuICB9LFxuXG4gIHRyaWdnZXJDeWNsZShlbCwga2V5LCBjdXJyZW50Q3ljbGUpe1xuICAgIGxldCBbY3ljbGUsIHRyaWdnZXJdID0gdGhpcy5wcml2YXRlKGVsLCBrZXkpXG4gICAgaWYoIWN1cnJlbnRDeWNsZSl7IGN1cnJlbnRDeWNsZSA9IGN5Y2xlIH1cbiAgICBpZihjdXJyZW50Q3ljbGUgPT09IGN5Y2xlKXtcbiAgICAgIHRoaXMuaW5jQ3ljbGUoZWwsIGtleSlcbiAgICAgIHRyaWdnZXIoKVxuICAgIH1cbiAgfSxcblxuICBvbmNlKGVsLCBrZXkpe1xuICAgIGlmKHRoaXMucHJpdmF0ZShlbCwga2V5KSA9PT0gdHJ1ZSl7IHJldHVybiBmYWxzZSB9XG4gICAgdGhpcy5wdXRQcml2YXRlKGVsLCBrZXksIHRydWUpXG4gICAgcmV0dXJuIHRydWVcbiAgfSxcblxuICBpbmNDeWNsZShlbCwga2V5LCB0cmlnZ2VyID0gZnVuY3Rpb24gKCl7IH0pe1xuICAgIGxldCBbY3VycmVudEN5Y2xlXSA9IHRoaXMucHJpdmF0ZShlbCwga2V5KSB8fCBbMCwgdHJpZ2dlcl1cbiAgICBjdXJyZW50Q3ljbGUrK1xuICAgIHRoaXMucHV0UHJpdmF0ZShlbCwga2V5LCBbY3VycmVudEN5Y2xlLCB0cmlnZ2VyXSlcbiAgICByZXR1cm4gY3VycmVudEN5Y2xlXG4gIH0sXG5cbiAgZGlzY2FyZEVycm9yKGNvbnRhaW5lciwgZWwsIHBoeEZlZWRiYWNrRm9yKXtcbiAgICBsZXQgZmllbGQgPSBlbC5nZXRBdHRyaWJ1dGUgJiYgZWwuZ2V0QXR0cmlidXRlKHBoeEZlZWRiYWNrRm9yKVxuICAgIC8vIFRPRE86IFJlbW92ZSBpZCBsb29rdXAgYWZ0ZXIgd2UgdXBkYXRlIFBob2VuaXggdG8gdXNlIGlucHV0X25hbWUgaW5zdGVhZCBvZiBpbnB1dF9pZFxuICAgIGxldCBpbnB1dCA9IGZpZWxkICYmIGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKGBbaWQ9XCIke2ZpZWxkfVwiXSwgW25hbWU9XCIke2ZpZWxkfVwiXSwgW25hbWU9XCIke2ZpZWxkfVtdXCJdYClcbiAgICBpZighaW5wdXQpeyByZXR1cm4gfVxuXG4gICAgaWYoISh0aGlzLnByaXZhdGUoaW5wdXQsIFBIWF9IQVNfRk9DVVNFRCkgfHwgdGhpcy5wcml2YXRlKGlucHV0LCBQSFhfSEFTX1NVQk1JVFRFRCkpKXtcbiAgICAgIGVsLmNsYXNzTGlzdC5hZGQoUEhYX05PX0ZFRURCQUNLX0NMQVNTKVxuICAgIH1cbiAgfSxcblxuICByZXNldEZvcm0oZm9ybSwgcGh4RmVlZGJhY2tGb3Ipe1xuICAgIEFycmF5LmZyb20oZm9ybS5lbGVtZW50cykuZm9yRWFjaChpbnB1dCA9PiB7XG4gICAgICBsZXQgcXVlcnkgPSBgWyR7cGh4RmVlZGJhY2tGb3J9PVwiJHtpbnB1dC5pZH1cIl0sXG4gICAgICAgICAgICAgICAgICAgWyR7cGh4RmVlZGJhY2tGb3J9PVwiJHtpbnB1dC5uYW1lfVwiXSxcbiAgICAgICAgICAgICAgICAgICBbJHtwaHhGZWVkYmFja0Zvcn09XCIke2lucHV0Lm5hbWUucmVwbGFjZSgvXFxbXFxdJC8sIFwiXCIpfVwiXWBcblxuICAgICAgdGhpcy5kZWxldGVQcml2YXRlKGlucHV0LCBQSFhfSEFTX0ZPQ1VTRUQpXG4gICAgICB0aGlzLmRlbGV0ZVByaXZhdGUoaW5wdXQsIFBIWF9IQVNfU1VCTUlUVEVEKVxuICAgICAgdGhpcy5hbGwoZG9jdW1lbnQsIHF1ZXJ5LCBmZWVkYmFja0VsID0+IHtcbiAgICAgICAgZmVlZGJhY2tFbC5jbGFzc0xpc3QuYWRkKFBIWF9OT19GRUVEQkFDS19DTEFTUylcbiAgICAgIH0pXG4gICAgfSlcbiAgfSxcblxuICBzaG93RXJyb3IoaW5wdXRFbCwgcGh4RmVlZGJhY2tGb3Ipe1xuICAgIGlmKGlucHV0RWwuaWQgfHwgaW5wdXRFbC5uYW1lKXtcbiAgICAgIHRoaXMuYWxsKGlucHV0RWwuZm9ybSwgYFske3BoeEZlZWRiYWNrRm9yfT1cIiR7aW5wdXRFbC5pZH1cIl0sIFske3BoeEZlZWRiYWNrRm9yfT1cIiR7aW5wdXRFbC5uYW1lfVwiXWAsIChlbCkgPT4ge1xuICAgICAgICB0aGlzLnJlbW92ZUNsYXNzKGVsLCBQSFhfTk9fRkVFREJBQ0tfQ0xBU1MpXG4gICAgICB9KVxuICAgIH1cbiAgfSxcblxuICBpc1BoeENoaWxkKG5vZGUpe1xuICAgIHJldHVybiBub2RlLmdldEF0dHJpYnV0ZSAmJiBub2RlLmdldEF0dHJpYnV0ZShQSFhfUEFSRU5UX0lEKVxuICB9LFxuXG4gIGlzUGh4U3RpY2t5KG5vZGUpe1xuICAgIHJldHVybiBub2RlLmdldEF0dHJpYnV0ZSAmJiBub2RlLmdldEF0dHJpYnV0ZShQSFhfU1RJQ0tZKSAhPT0gbnVsbFxuICB9LFxuXG4gIGZpcnN0UGh4Q2hpbGQoZWwpe1xuICAgIHJldHVybiB0aGlzLmlzUGh4Q2hpbGQoZWwpID8gZWwgOiB0aGlzLmFsbChlbCwgYFske1BIWF9QQVJFTlRfSUR9XWApWzBdXG4gIH0sXG5cbiAgZGlzcGF0Y2hFdmVudCh0YXJnZXQsIG5hbWUsIG9wdHMgPSB7fSl7XG4gICAgbGV0IGJ1YmJsZXMgPSBvcHRzLmJ1YmJsZXMgPT09IHVuZGVmaW5lZCA/IHRydWUgOiAhIW9wdHMuYnViYmxlc1xuICAgIGxldCBldmVudE9wdHMgPSB7YnViYmxlczogYnViYmxlcywgY2FuY2VsYWJsZTogdHJ1ZSwgZGV0YWlsOiBvcHRzLmRldGFpbCB8fCB7fX1cbiAgICBsZXQgZXZlbnQgPSBuYW1lID09PSBcImNsaWNrXCIgPyBuZXcgTW91c2VFdmVudChcImNsaWNrXCIsIGV2ZW50T3B0cykgOiBuZXcgQ3VzdG9tRXZlbnQobmFtZSwgZXZlbnRPcHRzKVxuICAgIHRhcmdldC5kaXNwYXRjaEV2ZW50KGV2ZW50KVxuICB9LFxuXG4gIGNsb25lTm9kZShub2RlLCBodG1sKXtcbiAgICBpZih0eXBlb2YgKGh0bWwpID09PSBcInVuZGVmaW5lZFwiKXtcbiAgICAgIHJldHVybiBub2RlLmNsb25lTm9kZSh0cnVlKVxuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgY2xvbmVkID0gbm9kZS5jbG9uZU5vZGUoZmFsc2UpXG4gICAgICBjbG9uZWQuaW5uZXJIVE1MID0gaHRtbFxuICAgICAgcmV0dXJuIGNsb25lZFxuICAgIH1cbiAgfSxcblxuICBtZXJnZUF0dHJzKHRhcmdldCwgc291cmNlLCBvcHRzID0ge30pe1xuICAgIGxldCBleGNsdWRlID0gb3B0cy5leGNsdWRlIHx8IFtdXG4gICAgbGV0IGlzSWdub3JlZCA9IG9wdHMuaXNJZ25vcmVkXG4gICAgbGV0IHNvdXJjZUF0dHJzID0gc291cmNlLmF0dHJpYnV0ZXNcbiAgICBmb3IobGV0IGkgPSBzb3VyY2VBdHRycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSl7XG4gICAgICBsZXQgbmFtZSA9IHNvdXJjZUF0dHJzW2ldLm5hbWVcbiAgICAgIGlmKGV4Y2x1ZGUuaW5kZXhPZihuYW1lKSA8IDApeyB0YXJnZXQuc2V0QXR0cmlidXRlKG5hbWUsIHNvdXJjZS5nZXRBdHRyaWJ1dGUobmFtZSkpIH1cbiAgICB9XG5cbiAgICBsZXQgdGFyZ2V0QXR0cnMgPSB0YXJnZXQuYXR0cmlidXRlc1xuICAgIGZvcihsZXQgaSA9IHRhcmdldEF0dHJzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKXtcbiAgICAgIGxldCBuYW1lID0gdGFyZ2V0QXR0cnNbaV0ubmFtZVxuICAgICAgaWYoaXNJZ25vcmVkKXtcbiAgICAgICAgaWYobmFtZS5zdGFydHNXaXRoKFwiZGF0YS1cIikgJiYgIXNvdXJjZS5oYXNBdHRyaWJ1dGUobmFtZSkpeyB0YXJnZXQucmVtb3ZlQXR0cmlidXRlKG5hbWUpIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmKCFzb3VyY2UuaGFzQXR0cmlidXRlKG5hbWUpKXsgdGFyZ2V0LnJlbW92ZUF0dHJpYnV0ZShuYW1lKSB9XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIG1lcmdlRm9jdXNlZElucHV0KHRhcmdldCwgc291cmNlKXtcbiAgICAvLyBza2lwIHNlbGVjdHMgYmVjYXVzZSBGRiB3aWxsIHJlc2V0IGhpZ2hsaWdodGVkIGluZGV4IGZvciBhbnkgc2V0QXR0cmlidXRlXG4gICAgaWYoISh0YXJnZXQgaW5zdGFuY2VvZiBIVE1MU2VsZWN0RWxlbWVudCkpeyBET00ubWVyZ2VBdHRycyh0YXJnZXQsIHNvdXJjZSwge2V4Y2x1ZGU6IFtcInZhbHVlXCJdfSkgfVxuICAgIGlmKHNvdXJjZS5yZWFkT25seSl7XG4gICAgICB0YXJnZXQuc2V0QXR0cmlidXRlKFwicmVhZG9ubHlcIiwgdHJ1ZSlcbiAgICB9IGVsc2Uge1xuICAgICAgdGFyZ2V0LnJlbW92ZUF0dHJpYnV0ZShcInJlYWRvbmx5XCIpXG4gICAgfVxuICB9LFxuXG4gIGhhc1NlbGVjdGlvblJhbmdlKGVsKXtcbiAgICByZXR1cm4gZWwuc2V0U2VsZWN0aW9uUmFuZ2UgJiYgKGVsLnR5cGUgPT09IFwidGV4dFwiIHx8IGVsLnR5cGUgPT09IFwidGV4dGFyZWFcIilcbiAgfSxcblxuICByZXN0b3JlRm9jdXMoZm9jdXNlZCwgc2VsZWN0aW9uU3RhcnQsIHNlbGVjdGlvbkVuZCl7XG4gICAgaWYoIURPTS5pc1RleHR1YWxJbnB1dChmb2N1c2VkKSl7IHJldHVybiB9XG4gICAgbGV0IHdhc0ZvY3VzZWQgPSBmb2N1c2VkLm1hdGNoZXMoXCI6Zm9jdXNcIilcbiAgICBpZihmb2N1c2VkLnJlYWRPbmx5KXsgZm9jdXNlZC5ibHVyKCkgfVxuICAgIGlmKCF3YXNGb2N1c2VkKXsgZm9jdXNlZC5mb2N1cygpIH1cbiAgICBpZih0aGlzLmhhc1NlbGVjdGlvblJhbmdlKGZvY3VzZWQpKXtcbiAgICAgIGZvY3VzZWQuc2V0U2VsZWN0aW9uUmFuZ2Uoc2VsZWN0aW9uU3RhcnQsIHNlbGVjdGlvbkVuZClcbiAgICB9XG4gIH0sXG5cbiAgaXNGb3JtSW5wdXQoZWwpeyByZXR1cm4gL14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWEpJC9pLnRlc3QoZWwudGFnTmFtZSkgJiYgZWwudHlwZSAhPT0gXCJidXR0b25cIiB9LFxuXG4gIHN5bmNBdHRyc1RvUHJvcHMoZWwpe1xuICAgIGlmKGVsIGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudCAmJiBDSEVDS0FCTEVfSU5QVVRTLmluZGV4T2YoZWwudHlwZS50b0xvY2FsZUxvd2VyQ2FzZSgpKSA+PSAwKXtcbiAgICAgIGVsLmNoZWNrZWQgPSBlbC5nZXRBdHRyaWJ1dGUoXCJjaGVja2VkXCIpICE9PSBudWxsXG4gICAgfVxuICB9LFxuXG4gIGlzVGV4dHVhbElucHV0KGVsKXsgcmV0dXJuIEZPQ1VTQUJMRV9JTlBVVFMuaW5kZXhPZihlbC50eXBlKSA+PSAwIH0sXG5cbiAgaXNOb3dUcmlnZ2VyRm9ybUV4dGVybmFsKGVsLCBwaHhUcmlnZ2VyRXh0ZXJuYWwpe1xuICAgIHJldHVybiBlbC5nZXRBdHRyaWJ1dGUgJiYgZWwuZ2V0QXR0cmlidXRlKHBoeFRyaWdnZXJFeHRlcm5hbCkgIT09IG51bGxcbiAgfSxcblxuICBzeW5jUGVuZGluZ1JlZihmcm9tRWwsIHRvRWwsIGRpc2FibGVXaXRoKXtcbiAgICBsZXQgcmVmID0gZnJvbUVsLmdldEF0dHJpYnV0ZShQSFhfUkVGKVxuICAgIGlmKHJlZiA9PT0gbnVsbCl7IHJldHVybiB0cnVlIH1cbiAgICBsZXQgcmVmU3JjID0gZnJvbUVsLmdldEF0dHJpYnV0ZShQSFhfUkVGX1NSQylcblxuICAgIGlmKERPTS5pc0Zvcm1JbnB1dChmcm9tRWwpIHx8IGZyb21FbC5nZXRBdHRyaWJ1dGUoZGlzYWJsZVdpdGgpICE9PSBudWxsKXtcbiAgICAgIGlmKERPTS5pc1VwbG9hZElucHV0KGZyb21FbCkpeyBET00ubWVyZ2VBdHRycyhmcm9tRWwsIHRvRWwsIHtpc0lnbm9yZWQ6IHRydWV9KSB9XG4gICAgICBET00ucHV0UHJpdmF0ZShmcm9tRWwsIFBIWF9SRUYsIHRvRWwpXG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9IGVsc2Uge1xuICAgICAgUEhYX0VWRU5UX0NMQVNTRVMuZm9yRWFjaChjbGFzc05hbWUgPT4ge1xuICAgICAgICBmcm9tRWwuY2xhc3NMaXN0LmNvbnRhaW5zKGNsYXNzTmFtZSkgJiYgdG9FbC5jbGFzc0xpc3QuYWRkKGNsYXNzTmFtZSlcbiAgICAgIH0pXG4gICAgICB0b0VsLnNldEF0dHJpYnV0ZShQSFhfUkVGLCByZWYpXG4gICAgICB0b0VsLnNldEF0dHJpYnV0ZShQSFhfUkVGX1NSQywgcmVmU3JjKVxuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gIH0sXG5cbiAgY2xlYW5DaGlsZE5vZGVzKGNvbnRhaW5lciwgcGh4VXBkYXRlKXtcbiAgICBpZihET00uaXNQaHhVcGRhdGUoY29udGFpbmVyLCBwaHhVcGRhdGUsIFtcImFwcGVuZFwiLCBcInByZXBlbmRcIl0pKXtcbiAgICAgIGxldCB0b1JlbW92ZSA9IFtdXG4gICAgICBjb250YWluZXIuY2hpbGROb2Rlcy5mb3JFYWNoKGNoaWxkTm9kZSA9PiB7XG4gICAgICAgIGlmKCFjaGlsZE5vZGUuaWQpe1xuICAgICAgICAgIC8vIFNraXAgd2FybmluZyBpZiBpdCdzIGFuIGVtcHR5IHRleHQgbm9kZSAoZS5nLiBhIG5ldy1saW5lKVxuICAgICAgICAgIGxldCBpc0VtcHR5VGV4dE5vZGUgPSBjaGlsZE5vZGUubm9kZVR5cGUgPT09IE5vZGUuVEVYVF9OT0RFICYmIGNoaWxkTm9kZS5ub2RlVmFsdWUudHJpbSgpID09PSBcIlwiXG4gICAgICAgICAgaWYoIWlzRW1wdHlUZXh0Tm9kZSl7XG4gICAgICAgICAgICBsb2dFcnJvcihcIm9ubHkgSFRNTCBlbGVtZW50IHRhZ3Mgd2l0aCBhbiBpZCBhcmUgYWxsb3dlZCBpbnNpZGUgY29udGFpbmVycyB3aXRoIHBoeC11cGRhdGUuXFxuXFxuXCIgK1xuICAgICAgICAgICAgICBgcmVtb3ZpbmcgaWxsZWdhbCBub2RlOiBcIiR7KGNoaWxkTm9kZS5vdXRlckhUTUwgfHwgY2hpbGROb2RlLm5vZGVWYWx1ZSkudHJpbSgpfVwiXFxuXFxuYClcbiAgICAgICAgICB9XG4gICAgICAgICAgdG9SZW1vdmUucHVzaChjaGlsZE5vZGUpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICB0b1JlbW92ZS5mb3JFYWNoKGNoaWxkTm9kZSA9PiBjaGlsZE5vZGUucmVtb3ZlKCkpXG4gICAgfVxuICB9LFxuXG4gIHJlcGxhY2VSb290Q29udGFpbmVyKGNvbnRhaW5lciwgdGFnTmFtZSwgYXR0cnMpe1xuICAgIGxldCByZXRhaW5lZEF0dHJzID0gbmV3IFNldChbXCJpZFwiLCBQSFhfU0VTU0lPTiwgUEhYX1NUQVRJQywgUEhYX01BSU4sIFBIWF9ST09UX0lEXSlcbiAgICBpZihjb250YWluZXIudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSB0YWdOYW1lLnRvTG93ZXJDYXNlKCkpe1xuICAgICAgQXJyYXkuZnJvbShjb250YWluZXIuYXR0cmlidXRlcylcbiAgICAgICAgLmZpbHRlcihhdHRyID0+ICFyZXRhaW5lZEF0dHJzLmhhcyhhdHRyLm5hbWUudG9Mb3dlckNhc2UoKSkpXG4gICAgICAgIC5mb3JFYWNoKGF0dHIgPT4gY29udGFpbmVyLnJlbW92ZUF0dHJpYnV0ZShhdHRyLm5hbWUpKVxuXG4gICAgICBPYmplY3Qua2V5cyhhdHRycylcbiAgICAgICAgLmZpbHRlcihuYW1lID0+ICFyZXRhaW5lZEF0dHJzLmhhcyhuYW1lLnRvTG93ZXJDYXNlKCkpKVxuICAgICAgICAuZm9yRWFjaChhdHRyID0+IGNvbnRhaW5lci5zZXRBdHRyaWJ1dGUoYXR0ciwgYXR0cnNbYXR0cl0pKVxuXG4gICAgICByZXR1cm4gY29udGFpbmVyXG5cbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IG5ld0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnTmFtZSlcbiAgICAgIE9iamVjdC5rZXlzKGF0dHJzKS5mb3JFYWNoKGF0dHIgPT4gbmV3Q29udGFpbmVyLnNldEF0dHJpYnV0ZShhdHRyLCBhdHRyc1thdHRyXSkpXG4gICAgICByZXRhaW5lZEF0dHJzLmZvckVhY2goYXR0ciA9PiBuZXdDb250YWluZXIuc2V0QXR0cmlidXRlKGF0dHIsIGNvbnRhaW5lci5nZXRBdHRyaWJ1dGUoYXR0cikpKVxuICAgICAgbmV3Q29udGFpbmVyLmlubmVySFRNTCA9IGNvbnRhaW5lci5pbm5lckhUTUxcbiAgICAgIGNvbnRhaW5lci5yZXBsYWNlV2l0aChuZXdDb250YWluZXIpXG4gICAgICByZXR1cm4gbmV3Q29udGFpbmVyXG4gICAgfVxuICB9LFxuXG4gIGdldFN0aWNreShlbCwgbmFtZSwgZGVmYXVsdFZhbCl7XG4gICAgbGV0IG9wID0gKERPTS5wcml2YXRlKGVsLCBcInN0aWNreVwiKSB8fCBbXSkuZmluZCgoW2V4aXN0aW5nTmFtZSwgXSkgPT4gbmFtZSA9PT0gZXhpc3RpbmdOYW1lKVxuICAgIGlmKG9wKXtcbiAgICAgIGxldCBbX25hbWUsIF9vcCwgc3Rhc2hlZFJlc3VsdF0gPSBvcFxuICAgICAgcmV0dXJuIHN0YXNoZWRSZXN1bHRcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHR5cGVvZihkZWZhdWx0VmFsKSA9PT0gXCJmdW5jdGlvblwiID8gZGVmYXVsdFZhbCgpIDogZGVmYXVsdFZhbFxuICAgIH1cbiAgfSxcblxuICBkZWxldGVTdGlja3koZWwsIG5hbWUpe1xuICAgIHRoaXMudXBkYXRlUHJpdmF0ZShlbCwgXCJzdGlja3lcIiwgW10sIG9wcyA9PiB7XG4gICAgICByZXR1cm4gb3BzLmZpbHRlcigoW2V4aXN0aW5nTmFtZSwgX10pID0+IGV4aXN0aW5nTmFtZSAhPT0gbmFtZSlcbiAgICB9KVxuICB9LFxuXG4gIHB1dFN0aWNreShlbCwgbmFtZSwgb3Ape1xuICAgIGxldCBzdGFzaGVkUmVzdWx0ID0gb3AoZWwpXG4gICAgdGhpcy51cGRhdGVQcml2YXRlKGVsLCBcInN0aWNreVwiLCBbXSwgb3BzID0+IHtcbiAgICAgIGxldCBleGlzdGluZ0luZGV4ID0gb3BzLmZpbmRJbmRleCgoW2V4aXN0aW5nTmFtZSwgXSkgPT4gbmFtZSA9PT0gZXhpc3RpbmdOYW1lKVxuICAgICAgaWYoZXhpc3RpbmdJbmRleCA+PSAwKXtcbiAgICAgICAgb3BzW2V4aXN0aW5nSW5kZXhdID0gW25hbWUsIG9wLCBzdGFzaGVkUmVzdWx0XVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgb3BzLnB1c2goW25hbWUsIG9wLCBzdGFzaGVkUmVzdWx0XSlcbiAgICAgIH1cbiAgICAgIHJldHVybiBvcHNcbiAgICB9KVxuICB9LFxuXG4gIGFwcGx5U3RpY2t5T3BlcmF0aW9ucyhlbCl7XG4gICAgbGV0IG9wcyA9IERPTS5wcml2YXRlKGVsLCBcInN0aWNreVwiKVxuICAgIGlmKCFvcHMpeyByZXR1cm4gfVxuXG4gICAgb3BzLmZvckVhY2goKFtuYW1lLCBvcCwgX3N0YXNoZWRdKSA9PiB0aGlzLnB1dFN0aWNreShlbCwgbmFtZSwgb3ApKVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IERPTSIsICJpbXBvcnQge1xuICBQSFhfQUNUSVZFX0VOVFJZX1JFRlMsXG4gIFBIWF9MSVZFX0ZJTEVfVVBEQVRFRCxcbiAgUEhYX1BSRUZMSUdIVEVEX1JFRlNcbn0gZnJvbSBcIi4vY29uc3RhbnRzXCJcblxuaW1wb3J0IHtcbiAgY2hhbm5lbFVwbG9hZGVyLFxuICBsb2dFcnJvclxufSBmcm9tIFwiLi91dGlsc1wiXG5cbmltcG9ydCBMaXZlVXBsb2FkZXIgZnJvbSBcIi4vbGl2ZV91cGxvYWRlclwiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFVwbG9hZEVudHJ5IHtcbiAgc3RhdGljIGlzQWN0aXZlKGZpbGVFbCwgZmlsZSl7XG4gICAgbGV0IGlzTmV3ID0gZmlsZS5fcGh4UmVmID09PSB1bmRlZmluZWRcbiAgICBsZXQgYWN0aXZlUmVmcyA9IGZpbGVFbC5nZXRBdHRyaWJ1dGUoUEhYX0FDVElWRV9FTlRSWV9SRUZTKS5zcGxpdChcIixcIilcbiAgICBsZXQgaXNBY3RpdmUgPSBhY3RpdmVSZWZzLmluZGV4T2YoTGl2ZVVwbG9hZGVyLmdlbkZpbGVSZWYoZmlsZSkpID49IDBcbiAgICByZXR1cm4gZmlsZS5zaXplID4gMCAmJiAoaXNOZXcgfHwgaXNBY3RpdmUpXG4gIH1cblxuICBzdGF0aWMgaXNQcmVmbGlnaHRlZChmaWxlRWwsIGZpbGUpe1xuICAgIGxldCBwcmVmbGlnaHRlZFJlZnMgPSBmaWxlRWwuZ2V0QXR0cmlidXRlKFBIWF9QUkVGTElHSFRFRF9SRUZTKS5zcGxpdChcIixcIilcbiAgICBsZXQgaXNQcmVmbGlnaHRlZCA9IHByZWZsaWdodGVkUmVmcy5pbmRleE9mKExpdmVVcGxvYWRlci5nZW5GaWxlUmVmKGZpbGUpKSA+PSAwXG4gICAgcmV0dXJuIGlzUHJlZmxpZ2h0ZWQgJiYgdGhpcy5pc0FjdGl2ZShmaWxlRWwsIGZpbGUpXG4gIH1cblxuICBjb25zdHJ1Y3RvcihmaWxlRWwsIGZpbGUsIHZpZXcpe1xuICAgIHRoaXMucmVmID0gTGl2ZVVwbG9hZGVyLmdlbkZpbGVSZWYoZmlsZSlcbiAgICB0aGlzLmZpbGVFbCA9IGZpbGVFbFxuICAgIHRoaXMuZmlsZSA9IGZpbGVcbiAgICB0aGlzLnZpZXcgPSB2aWV3XG4gICAgdGhpcy5tZXRhID0gbnVsbFxuICAgIHRoaXMuX2lzQ2FuY2VsbGVkID0gZmFsc2VcbiAgICB0aGlzLl9pc0RvbmUgPSBmYWxzZVxuICAgIHRoaXMuX3Byb2dyZXNzID0gMFxuICAgIHRoaXMuX2xhc3RQcm9ncmVzc1NlbnQgPSAtMVxuICAgIHRoaXMuX29uRG9uZSA9IGZ1bmN0aW9uICgpeyB9XG4gICAgdGhpcy5fb25FbFVwZGF0ZWQgPSB0aGlzLm9uRWxVcGRhdGVkLmJpbmQodGhpcylcbiAgICB0aGlzLmZpbGVFbC5hZGRFdmVudExpc3RlbmVyKFBIWF9MSVZFX0ZJTEVfVVBEQVRFRCwgdGhpcy5fb25FbFVwZGF0ZWQpXG4gIH1cblxuICBtZXRhZGF0YSgpeyByZXR1cm4gdGhpcy5tZXRhIH1cblxuICBwcm9ncmVzcyhwcm9ncmVzcyl7XG4gICAgdGhpcy5fcHJvZ3Jlc3MgPSBNYXRoLmZsb29yKHByb2dyZXNzKVxuICAgIGlmKHRoaXMuX3Byb2dyZXNzID4gdGhpcy5fbGFzdFByb2dyZXNzU2VudCl7XG4gICAgICBpZih0aGlzLl9wcm9ncmVzcyA+PSAxMDApe1xuICAgICAgICB0aGlzLl9wcm9ncmVzcyA9IDEwMFxuICAgICAgICB0aGlzLl9sYXN0UHJvZ3Jlc3NTZW50ID0gMTAwXG4gICAgICAgIHRoaXMuX2lzRG9uZSA9IHRydWVcbiAgICAgICAgdGhpcy52aWV3LnB1c2hGaWxlUHJvZ3Jlc3ModGhpcy5maWxlRWwsIHRoaXMucmVmLCAxMDAsICgpID0+IHtcbiAgICAgICAgICBMaXZlVXBsb2FkZXIudW50cmFja0ZpbGUodGhpcy5maWxlRWwsIHRoaXMuZmlsZSlcbiAgICAgICAgICB0aGlzLl9vbkRvbmUoKVxuICAgICAgICB9KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fbGFzdFByb2dyZXNzU2VudCA9IHRoaXMuX3Byb2dyZXNzXG4gICAgICAgIHRoaXMudmlldy5wdXNoRmlsZVByb2dyZXNzKHRoaXMuZmlsZUVsLCB0aGlzLnJlZiwgdGhpcy5fcHJvZ3Jlc3MpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgY2FuY2VsKCl7XG4gICAgdGhpcy5faXNDYW5jZWxsZWQgPSB0cnVlXG4gICAgdGhpcy5faXNEb25lID0gdHJ1ZVxuICAgIHRoaXMuX29uRG9uZSgpXG4gIH1cblxuICBpc0RvbmUoKXsgcmV0dXJuIHRoaXMuX2lzRG9uZSB9XG5cbiAgZXJyb3IocmVhc29uID0gXCJmYWlsZWRcIil7XG4gICAgdGhpcy5maWxlRWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihQSFhfTElWRV9GSUxFX1VQREFURUQsIHRoaXMuX29uRWxVcGRhdGVkKVxuICAgIHRoaXMudmlldy5wdXNoRmlsZVByb2dyZXNzKHRoaXMuZmlsZUVsLCB0aGlzLnJlZiwge2Vycm9yOiByZWFzb259KVxuICAgIExpdmVVcGxvYWRlci5jbGVhckZpbGVzKHRoaXMuZmlsZUVsKVxuICB9XG5cbiAgLy9wcml2YXRlXG5cbiAgb25Eb25lKGNhbGxiYWNrKXtcbiAgICB0aGlzLl9vbkRvbmUgPSAoKSA9PiB7XG4gICAgICB0aGlzLmZpbGVFbC5yZW1vdmVFdmVudExpc3RlbmVyKFBIWF9MSVZFX0ZJTEVfVVBEQVRFRCwgdGhpcy5fb25FbFVwZGF0ZWQpXG4gICAgICBjYWxsYmFjaygpXG4gICAgfVxuICB9XG5cbiAgb25FbFVwZGF0ZWQoKXtcbiAgICBsZXQgYWN0aXZlUmVmcyA9IHRoaXMuZmlsZUVsLmdldEF0dHJpYnV0ZShQSFhfQUNUSVZFX0VOVFJZX1JFRlMpLnNwbGl0KFwiLFwiKVxuICAgIGlmKGFjdGl2ZVJlZnMuaW5kZXhPZih0aGlzLnJlZikgPT09IC0xKXsgdGhpcy5jYW5jZWwoKSB9XG4gIH1cblxuICB0b1ByZWZsaWdodFBheWxvYWQoKXtcbiAgICByZXR1cm4ge1xuICAgICAgbGFzdF9tb2RpZmllZDogdGhpcy5maWxlLmxhc3RNb2RpZmllZCxcbiAgICAgIG5hbWU6IHRoaXMuZmlsZS5uYW1lLFxuICAgICAgcmVsYXRpdmVfcGF0aDogdGhpcy5maWxlLndlYmtpdFJlbGF0aXZlUGF0aCxcbiAgICAgIHNpemU6IHRoaXMuZmlsZS5zaXplLFxuICAgICAgdHlwZTogdGhpcy5maWxlLnR5cGUsXG4gICAgICByZWY6IHRoaXMucmVmXG4gICAgfVxuICB9XG5cbiAgdXBsb2FkZXIodXBsb2FkZXJzKXtcbiAgICBpZih0aGlzLm1ldGEudXBsb2FkZXIpe1xuICAgICAgbGV0IGNhbGxiYWNrID0gdXBsb2FkZXJzW3RoaXMubWV0YS51cGxvYWRlcl0gfHwgbG9nRXJyb3IoYG5vIHVwbG9hZGVyIGNvbmZpZ3VyZWQgZm9yICR7dGhpcy5tZXRhLnVwbG9hZGVyfWApXG4gICAgICByZXR1cm4ge25hbWU6IHRoaXMubWV0YS51cGxvYWRlciwgY2FsbGJhY2s6IGNhbGxiYWNrfVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4ge25hbWU6IFwiY2hhbm5lbFwiLCBjYWxsYmFjazogY2hhbm5lbFVwbG9hZGVyfVxuICAgIH1cbiAgfVxuXG4gIHppcFBvc3RGbGlnaHQocmVzcCl7XG4gICAgdGhpcy5tZXRhID0gcmVzcC5lbnRyaWVzW3RoaXMucmVmXVxuICAgIGlmKCF0aGlzLm1ldGEpeyBsb2dFcnJvcihgbm8gcHJlZmxpZ2h0IHVwbG9hZCByZXNwb25zZSByZXR1cm5lZCB3aXRoIHJlZiAke3RoaXMucmVmfWAsIHtpbnB1dDogdGhpcy5maWxlRWwsIHJlc3BvbnNlOiByZXNwfSkgfVxuICB9XG59XG4iLCAiaW1wb3J0IHtcbiAgUEhYX0RPTkVfUkVGUyxcbiAgUEhYX1BSRUZMSUdIVEVEX1JFRlMsXG4gIFBIWF9VUExPQURfUkVGXG59IGZyb20gXCIuL2NvbnN0YW50c1wiXG5cbmltcG9ydCB7XG59IGZyb20gXCIuL3V0aWxzXCJcblxuaW1wb3J0IERPTSBmcm9tIFwiLi9kb21cIlxuaW1wb3J0IFVwbG9hZEVudHJ5IGZyb20gXCIuL3VwbG9hZF9lbnRyeVwiXG5cbmxldCBsaXZlVXBsb2FkZXJGaWxlUmVmID0gMFxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMaXZlVXBsb2FkZXIge1xuICBzdGF0aWMgZ2VuRmlsZVJlZihmaWxlKXtcbiAgICBsZXQgcmVmID0gZmlsZS5fcGh4UmVmXG4gICAgaWYocmVmICE9PSB1bmRlZmluZWQpe1xuICAgICAgcmV0dXJuIHJlZlxuICAgIH0gZWxzZSB7XG4gICAgICBmaWxlLl9waHhSZWYgPSAobGl2ZVVwbG9hZGVyRmlsZVJlZisrKS50b1N0cmluZygpXG4gICAgICByZXR1cm4gZmlsZS5fcGh4UmVmXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGdldEVudHJ5RGF0YVVSTChpbnB1dEVsLCByZWYsIGNhbGxiYWNrKXtcbiAgICBsZXQgZmlsZSA9IHRoaXMuYWN0aXZlRmlsZXMoaW5wdXRFbCkuZmluZChmaWxlID0+IHRoaXMuZ2VuRmlsZVJlZihmaWxlKSA9PT0gcmVmKVxuICAgIGNhbGxiYWNrKFVSTC5jcmVhdGVPYmplY3RVUkwoZmlsZSkpXG4gIH1cblxuICBzdGF0aWMgaGFzVXBsb2Fkc0luUHJvZ3Jlc3MoZm9ybUVsKXtcbiAgICBsZXQgYWN0aXZlID0gMFxuICAgIERPTS5maW5kVXBsb2FkSW5wdXRzKGZvcm1FbCkuZm9yRWFjaChpbnB1dCA9PiB7XG4gICAgICBpZihpbnB1dC5nZXRBdHRyaWJ1dGUoUEhYX1BSRUZMSUdIVEVEX1JFRlMpICE9PSBpbnB1dC5nZXRBdHRyaWJ1dGUoUEhYX0RPTkVfUkVGUykpe1xuICAgICAgICBhY3RpdmUrK1xuICAgICAgfVxuICAgIH0pXG4gICAgcmV0dXJuIGFjdGl2ZSA+IDBcbiAgfVxuXG4gIHN0YXRpYyBzZXJpYWxpemVVcGxvYWRzKGlucHV0RWwpe1xuICAgIGxldCBmaWxlcyA9IHRoaXMuYWN0aXZlRmlsZXMoaW5wdXRFbClcbiAgICBsZXQgZmlsZURhdGEgPSB7fVxuICAgIGZpbGVzLmZvckVhY2goZmlsZSA9PiB7XG4gICAgICBsZXQgZW50cnkgPSB7cGF0aDogaW5wdXRFbC5uYW1lfVxuICAgICAgbGV0IHVwbG9hZFJlZiA9IGlucHV0RWwuZ2V0QXR0cmlidXRlKFBIWF9VUExPQURfUkVGKVxuICAgICAgZmlsZURhdGFbdXBsb2FkUmVmXSA9IGZpbGVEYXRhW3VwbG9hZFJlZl0gfHwgW11cbiAgICAgIGVudHJ5LnJlZiA9IHRoaXMuZ2VuRmlsZVJlZihmaWxlKVxuICAgICAgZW50cnkubGFzdF9tb2RpZmllZCA9IGZpbGUubGFzdE1vZGlmaWVkXG4gICAgICBlbnRyeS5uYW1lID0gZmlsZS5uYW1lIHx8IGVudHJ5LnJlZlxuICAgICAgZW50cnkucmVsYXRpdmVfcGF0aCA9IGZpbGUud2Via2l0UmVsYXRpdmVQYXRoXG4gICAgICBlbnRyeS50eXBlID0gZmlsZS50eXBlXG4gICAgICBlbnRyeS5zaXplID0gZmlsZS5zaXplXG4gICAgICBmaWxlRGF0YVt1cGxvYWRSZWZdLnB1c2goZW50cnkpXG4gICAgfSlcbiAgICByZXR1cm4gZmlsZURhdGFcbiAgfVxuXG4gIHN0YXRpYyBjbGVhckZpbGVzKGlucHV0RWwpe1xuICAgIGlucHV0RWwudmFsdWUgPSBudWxsXG4gICAgaW5wdXRFbC5yZW1vdmVBdHRyaWJ1dGUoUEhYX1VQTE9BRF9SRUYpXG4gICAgRE9NLnB1dFByaXZhdGUoaW5wdXRFbCwgXCJmaWxlc1wiLCBbXSlcbiAgfVxuXG4gIHN0YXRpYyB1bnRyYWNrRmlsZShpbnB1dEVsLCBmaWxlKXtcbiAgICBET00ucHV0UHJpdmF0ZShpbnB1dEVsLCBcImZpbGVzXCIsIERPTS5wcml2YXRlKGlucHV0RWwsIFwiZmlsZXNcIikuZmlsdGVyKGYgPT4gIU9iamVjdC5pcyhmLCBmaWxlKSkpXG4gIH1cblxuICBzdGF0aWMgdHJhY2tGaWxlcyhpbnB1dEVsLCBmaWxlcywgZGF0YVRyYW5zZmVyKXtcbiAgICBpZihpbnB1dEVsLmdldEF0dHJpYnV0ZShcIm11bHRpcGxlXCIpICE9PSBudWxsKXtcbiAgICAgIGxldCBuZXdGaWxlcyA9IGZpbGVzLmZpbHRlcihmaWxlID0+ICF0aGlzLmFjdGl2ZUZpbGVzKGlucHV0RWwpLmZpbmQoZiA9PiBPYmplY3QuaXMoZiwgZmlsZSkpKVxuICAgICAgRE9NLnB1dFByaXZhdGUoaW5wdXRFbCwgXCJmaWxlc1wiLCB0aGlzLmFjdGl2ZUZpbGVzKGlucHV0RWwpLmNvbmNhdChuZXdGaWxlcykpXG4gICAgICBpbnB1dEVsLnZhbHVlID0gbnVsbFxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBSZXNldCBpbnB1dEVsIGZpbGVzIHRvIGFsaWduIG91dHB1dCB3aXRoIHByb2dyYW1tYXRpYyBjaGFuZ2VzIChpLmUuIGRyYWcgYW5kIGRyb3ApXG4gICAgICBpZihkYXRhVHJhbnNmZXIgJiYgZGF0YVRyYW5zZmVyLmZpbGVzLmxlbmd0aCA+IDApeyBpbnB1dEVsLmZpbGVzID0gZGF0YVRyYW5zZmVyLmZpbGVzIH1cbiAgICAgIERPTS5wdXRQcml2YXRlKGlucHV0RWwsIFwiZmlsZXNcIiwgZmlsZXMpXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFjdGl2ZUZpbGVJbnB1dHMoZm9ybUVsKXtcbiAgICBsZXQgZmlsZUlucHV0cyA9IERPTS5maW5kVXBsb2FkSW5wdXRzKGZvcm1FbClcbiAgICByZXR1cm4gQXJyYXkuZnJvbShmaWxlSW5wdXRzKS5maWx0ZXIoZWwgPT4gZWwuZmlsZXMgJiYgdGhpcy5hY3RpdmVGaWxlcyhlbCkubGVuZ3RoID4gMClcbiAgfVxuXG4gIHN0YXRpYyBhY3RpdmVGaWxlcyhpbnB1dCl7XG4gICAgcmV0dXJuIChET00ucHJpdmF0ZShpbnB1dCwgXCJmaWxlc1wiKSB8fCBbXSkuZmlsdGVyKGYgPT4gVXBsb2FkRW50cnkuaXNBY3RpdmUoaW5wdXQsIGYpKVxuICB9XG5cbiAgc3RhdGljIGlucHV0c0F3YWl0aW5nUHJlZmxpZ2h0KGZvcm1FbCl7XG4gICAgbGV0IGZpbGVJbnB1dHMgPSBET00uZmluZFVwbG9hZElucHV0cyhmb3JtRWwpXG4gICAgcmV0dXJuIEFycmF5LmZyb20oZmlsZUlucHV0cykuZmlsdGVyKGlucHV0ID0+IHRoaXMuZmlsZXNBd2FpdGluZ1ByZWZsaWdodChpbnB1dCkubGVuZ3RoID4gMClcbiAgfVxuXG4gIHN0YXRpYyBmaWxlc0F3YWl0aW5nUHJlZmxpZ2h0KGlucHV0KXtcbiAgICByZXR1cm4gdGhpcy5hY3RpdmVGaWxlcyhpbnB1dCkuZmlsdGVyKGYgPT4gIVVwbG9hZEVudHJ5LmlzUHJlZmxpZ2h0ZWQoaW5wdXQsIGYpKVxuICB9XG5cbiAgY29uc3RydWN0b3IoaW5wdXRFbCwgdmlldywgb25Db21wbGV0ZSl7XG4gICAgdGhpcy52aWV3ID0gdmlld1xuICAgIHRoaXMub25Db21wbGV0ZSA9IG9uQ29tcGxldGVcbiAgICB0aGlzLl9lbnRyaWVzID1cbiAgICAgIEFycmF5LmZyb20oTGl2ZVVwbG9hZGVyLmZpbGVzQXdhaXRpbmdQcmVmbGlnaHQoaW5wdXRFbCkgfHwgW10pXG4gICAgICAgIC5tYXAoZmlsZSA9PiBuZXcgVXBsb2FkRW50cnkoaW5wdXRFbCwgZmlsZSwgdmlldykpXG5cbiAgICB0aGlzLm51bUVudHJpZXNJblByb2dyZXNzID0gdGhpcy5fZW50cmllcy5sZW5ndGhcbiAgfVxuXG4gIGVudHJpZXMoKXsgcmV0dXJuIHRoaXMuX2VudHJpZXMgfVxuXG4gIGluaXRBZGFwdGVyVXBsb2FkKHJlc3AsIG9uRXJyb3IsIGxpdmVTb2NrZXQpe1xuICAgIHRoaXMuX2VudHJpZXMgPVxuICAgICAgdGhpcy5fZW50cmllcy5tYXAoZW50cnkgPT4ge1xuICAgICAgICBlbnRyeS56aXBQb3N0RmxpZ2h0KHJlc3ApXG4gICAgICAgIGVudHJ5Lm9uRG9uZSgoKSA9PiB7XG4gICAgICAgICAgdGhpcy5udW1FbnRyaWVzSW5Qcm9ncmVzcy0tXG4gICAgICAgICAgaWYodGhpcy5udW1FbnRyaWVzSW5Qcm9ncmVzcyA9PT0gMCl7IHRoaXMub25Db21wbGV0ZSgpIH1cbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIGVudHJ5XG4gICAgICB9KVxuXG4gICAgbGV0IGdyb3VwZWRFbnRyaWVzID0gdGhpcy5fZW50cmllcy5yZWR1Y2UoKGFjYywgZW50cnkpID0+IHtcbiAgICAgIGxldCB7bmFtZSwgY2FsbGJhY2t9ID0gZW50cnkudXBsb2FkZXIobGl2ZVNvY2tldC51cGxvYWRlcnMpXG4gICAgICBhY2NbbmFtZV0gPSBhY2NbbmFtZV0gfHwge2NhbGxiYWNrOiBjYWxsYmFjaywgZW50cmllczogW119XG4gICAgICBhY2NbbmFtZV0uZW50cmllcy5wdXNoKGVudHJ5KVxuICAgICAgcmV0dXJuIGFjY1xuICAgIH0sIHt9KVxuXG4gICAgZm9yKGxldCBuYW1lIGluIGdyb3VwZWRFbnRyaWVzKXtcbiAgICAgIGxldCB7Y2FsbGJhY2ssIGVudHJpZXN9ID0gZ3JvdXBlZEVudHJpZXNbbmFtZV1cbiAgICAgIGNhbGxiYWNrKGVudHJpZXMsIG9uRXJyb3IsIHJlc3AsIGxpdmVTb2NrZXQpXG4gICAgfVxuICB9XG59XG4iLCAibGV0IEFSSUEgPSB7XG4gIGZvY3VzTWFpbigpe1xuICAgIGxldCB0YXJnZXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwibWFpbiBoMSwgbWFpbiwgaDFcIilcbiAgICBpZih0YXJnZXQpe1xuICAgICAgbGV0IG9yaWdUYWJJbmRleCA9IHRhcmdldC50YWJJbmRleFxuICAgICAgdGFyZ2V0LnRhYkluZGV4ID0gLTFcbiAgICAgIHRhcmdldC5mb2N1cygpXG4gICAgICB0YXJnZXQudGFiSW5kZXggPSBvcmlnVGFiSW5kZXhcbiAgICB9XG4gIH0sXG5cbiAgYW55T2YoaW5zdGFuY2UsIGNsYXNzZXMpeyByZXR1cm4gY2xhc3Nlcy5maW5kKG5hbWUgPT4gaW5zdGFuY2UgaW5zdGFuY2VvZiBuYW1lKSB9LFxuXG4gIGlzRm9jdXNhYmxlKGVsLCBpbnRlcmFjdGl2ZU9ubHkpe1xuICAgIHJldHVybihcbiAgICAgIChlbCBpbnN0YW5jZW9mIEhUTUxBbmNob3JFbGVtZW50ICYmIGVsLnJlbCAhPT0gXCJpZ25vcmVcIikgfHxcbiAgICAgIChlbCBpbnN0YW5jZW9mIEhUTUxBcmVhRWxlbWVudCAmJiBlbC5ocmVmICE9PSB1bmRlZmluZWQpIHx8XG4gICAgICAoIWVsLmRpc2FibGVkICYmICh0aGlzLmFueU9mKGVsLCBbSFRNTElucHV0RWxlbWVudCwgSFRNTFNlbGVjdEVsZW1lbnQsIEhUTUxUZXh0QXJlYUVsZW1lbnQsIEhUTUxCdXR0b25FbGVtZW50XSkpKSB8fFxuICAgICAgKGVsIGluc3RhbmNlb2YgSFRNTElGcmFtZUVsZW1lbnQpIHx8XG4gICAgICAoZWwudGFiSW5kZXggPiAwIHx8ICghaW50ZXJhY3RpdmVPbmx5ICYmIGVsLnRhYkluZGV4ID09PSAwICYmIGVsLmdldEF0dHJpYnV0ZShcInRhYmluZGV4XCIpICE9PSBudWxsICYmIGVsLmdldEF0dHJpYnV0ZShcImFyaWEtaGlkZGVuXCIpICE9PSBcInRydWVcIikpXG4gICAgKVxuICB9LFxuXG4gIGF0dGVtcHRGb2N1cyhlbCwgaW50ZXJhY3RpdmVPbmx5KXtcbiAgICBpZih0aGlzLmlzRm9jdXNhYmxlKGVsLCBpbnRlcmFjdGl2ZU9ubHkpKXsgdHJ5eyBlbC5mb2N1cygpIH0gY2F0Y2goZSl7fSB9XG4gICAgcmV0dXJuICEhZG9jdW1lbnQuYWN0aXZlRWxlbWVudCAmJiBkb2N1bWVudC5hY3RpdmVFbGVtZW50LmlzU2FtZU5vZGUoZWwpXG4gIH0sXG5cbiAgZm9jdXNGaXJzdEludGVyYWN0aXZlKGVsKXtcbiAgICBsZXQgY2hpbGQgPSBlbC5maXJzdEVsZW1lbnRDaGlsZFxuICAgIHdoaWxlKGNoaWxkKXtcbiAgICAgIGlmKHRoaXMuYXR0ZW1wdEZvY3VzKGNoaWxkLCB0cnVlKSB8fCB0aGlzLmZvY3VzRmlyc3RJbnRlcmFjdGl2ZShjaGlsZCwgdHJ1ZSkpe1xuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgfVxuICAgICAgY2hpbGQgPSBjaGlsZC5uZXh0RWxlbWVudFNpYmxpbmdcbiAgICB9XG4gIH0sXG5cbiAgZm9jdXNGaXJzdChlbCl7XG4gICAgbGV0IGNoaWxkID0gZWwuZmlyc3RFbGVtZW50Q2hpbGRcbiAgICB3aGlsZShjaGlsZCl7XG4gICAgICBpZih0aGlzLmF0dGVtcHRGb2N1cyhjaGlsZCkgfHwgdGhpcy5mb2N1c0ZpcnN0KGNoaWxkKSl7XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICB9XG4gICAgICBjaGlsZCA9IGNoaWxkLm5leHRFbGVtZW50U2libGluZ1xuICAgIH1cbiAgfSxcblxuICBmb2N1c0xhc3QoZWwpe1xuICAgIGxldCBjaGlsZCA9IGVsLmxhc3RFbGVtZW50Q2hpbGRcbiAgICB3aGlsZShjaGlsZCl7XG4gICAgICBpZih0aGlzLmF0dGVtcHRGb2N1cyhjaGlsZCkgfHwgdGhpcy5mb2N1c0xhc3QoY2hpbGQpKXtcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgIH1cbiAgICAgIGNoaWxkID0gY2hpbGQucHJldmlvdXNFbGVtZW50U2libGluZ1xuICAgIH1cbiAgfVxufVxuZXhwb3J0IGRlZmF1bHQgQVJJQSIsICJpbXBvcnQge1xuICBQSFhfQUNUSVZFX0VOVFJZX1JFRlMsXG4gIFBIWF9MSVZFX0ZJTEVfVVBEQVRFRCxcbiAgUEhYX1BSRUZMSUdIVEVEX1JFRlMsXG4gIFBIWF9VUExPQURfUkVGXG59IGZyb20gXCIuL2NvbnN0YW50c1wiXG5cbmltcG9ydCBMaXZlVXBsb2FkZXIgZnJvbSBcIi4vbGl2ZV91cGxvYWRlclwiXG5pbXBvcnQgQVJJQSBmcm9tIFwiLi9hcmlhXCJcblxubGV0IEhvb2tzID0ge1xuICBMaXZlRmlsZVVwbG9hZDoge1xuICAgIGFjdGl2ZVJlZnMoKXsgcmV0dXJuIHRoaXMuZWwuZ2V0QXR0cmlidXRlKFBIWF9BQ1RJVkVfRU5UUllfUkVGUykgfSxcblxuICAgIHByZWZsaWdodGVkUmVmcygpeyByZXR1cm4gdGhpcy5lbC5nZXRBdHRyaWJ1dGUoUEhYX1BSRUZMSUdIVEVEX1JFRlMpIH0sXG5cbiAgICBtb3VudGVkKCl7IHRoaXMucHJlZmxpZ2h0ZWRXYXMgPSB0aGlzLnByZWZsaWdodGVkUmVmcygpIH0sXG5cbiAgICB1cGRhdGVkKCl7XG4gICAgICBsZXQgbmV3UHJlZmxpZ2h0cyA9IHRoaXMucHJlZmxpZ2h0ZWRSZWZzKClcbiAgICAgIGlmKHRoaXMucHJlZmxpZ2h0ZWRXYXMgIT09IG5ld1ByZWZsaWdodHMpe1xuICAgICAgICB0aGlzLnByZWZsaWdodGVkV2FzID0gbmV3UHJlZmxpZ2h0c1xuICAgICAgICBpZihuZXdQcmVmbGlnaHRzID09PSBcIlwiKXtcbiAgICAgICAgICB0aGlzLl9fdmlldy5jYW5jZWxTdWJtaXQodGhpcy5lbC5mb3JtKVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmKHRoaXMuYWN0aXZlUmVmcygpID09PSBcIlwiKXsgdGhpcy5lbC52YWx1ZSA9IG51bGwgfVxuICAgICAgdGhpcy5lbC5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudChQSFhfTElWRV9GSUxFX1VQREFURUQpKVxuICAgIH1cbiAgfSxcblxuICBMaXZlSW1nUHJldmlldzoge1xuICAgIG1vdW50ZWQoKXtcbiAgICAgIHRoaXMucmVmID0gdGhpcy5lbC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXBoeC1lbnRyeS1yZWZcIilcbiAgICAgIHRoaXMuaW5wdXRFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuZWwuZ2V0QXR0cmlidXRlKFBIWF9VUExPQURfUkVGKSlcbiAgICAgIExpdmVVcGxvYWRlci5nZXRFbnRyeURhdGFVUkwodGhpcy5pbnB1dEVsLCB0aGlzLnJlZiwgdXJsID0+IHtcbiAgICAgICAgdGhpcy51cmwgPSB1cmxcbiAgICAgICAgdGhpcy5lbC5zcmMgPSB1cmxcbiAgICAgIH0pXG4gICAgfSxcbiAgICBkZXN0cm95ZWQoKXtcbiAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwodGhpcy51cmwpXG4gICAgfVxuICB9LFxuICBGb2N1c1dyYXA6IHtcbiAgICBtb3VudGVkKCl7XG4gICAgICB0aGlzLmZvY3VzU3RhcnQgPSB0aGlzLmVsLmZpcnN0RWxlbWVudENoaWxkXG4gICAgICB0aGlzLmZvY3VzRW5kID0gdGhpcy5lbC5sYXN0RWxlbWVudENoaWxkXG4gICAgICB0aGlzLmZvY3VzU3RhcnQuYWRkRXZlbnRMaXN0ZW5lcihcImZvY3VzXCIsICgpID0+IEFSSUEuZm9jdXNMYXN0KHRoaXMuZWwpKVxuICAgICAgdGhpcy5mb2N1c0VuZC5hZGRFdmVudExpc3RlbmVyKFwiZm9jdXNcIiwgKCkgPT4gQVJJQS5mb2N1c0ZpcnN0KHRoaXMuZWwpKVxuICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKFwicGh4OnNob3ctZW5kXCIsICgpID0+IHRoaXMuZWwuZm9jdXMoKSlcbiAgICAgIGlmKHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRoaXMuZWwpLmRpc3BsYXkgIT09IFwibm9uZVwiKXtcbiAgICAgICAgQVJJQS5mb2N1c0ZpcnN0KHRoaXMuZWwpXG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEhvb2tzXG4iLCAiaW1wb3J0IHtcbiAgbWF5YmVcbn0gZnJvbSBcIi4vdXRpbHNcIlxuXG5pbXBvcnQgRE9NIGZyb20gXCIuL2RvbVwiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIERPTVBvc3RNb3JwaFJlc3RvcmVyIHtcbiAgY29uc3RydWN0b3IoY29udGFpbmVyQmVmb3JlLCBjb250YWluZXJBZnRlciwgdXBkYXRlVHlwZSl7XG4gICAgbGV0IGlkc0JlZm9yZSA9IG5ldyBTZXQoKVxuICAgIGxldCBpZHNBZnRlciA9IG5ldyBTZXQoWy4uLmNvbnRhaW5lckFmdGVyLmNoaWxkcmVuXS5tYXAoY2hpbGQgPT4gY2hpbGQuaWQpKVxuXG4gICAgbGV0IGVsZW1lbnRzVG9Nb2RpZnkgPSBbXVxuXG4gICAgQXJyYXkuZnJvbShjb250YWluZXJCZWZvcmUuY2hpbGRyZW4pLmZvckVhY2goY2hpbGQgPT4ge1xuICAgICAgaWYoY2hpbGQuaWQpeyAvLyBhbGwgb2Ygb3VyIGNoaWxkcmVuIHNob3VsZCBiZSBlbGVtZW50cyB3aXRoIGlkc1xuICAgICAgICBpZHNCZWZvcmUuYWRkKGNoaWxkLmlkKVxuICAgICAgICBpZihpZHNBZnRlci5oYXMoY2hpbGQuaWQpKXtcbiAgICAgICAgICBsZXQgcHJldmlvdXNFbGVtZW50SWQgPSBjaGlsZC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nICYmIGNoaWxkLnByZXZpb3VzRWxlbWVudFNpYmxpbmcuaWRcbiAgICAgICAgICBlbGVtZW50c1RvTW9kaWZ5LnB1c2goe2VsZW1lbnRJZDogY2hpbGQuaWQsIHByZXZpb3VzRWxlbWVudElkOiBwcmV2aW91c0VsZW1lbnRJZH0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuXG4gICAgdGhpcy5jb250YWluZXJJZCA9IGNvbnRhaW5lckFmdGVyLmlkXG4gICAgdGhpcy51cGRhdGVUeXBlID0gdXBkYXRlVHlwZVxuICAgIHRoaXMuZWxlbWVudHNUb01vZGlmeSA9IGVsZW1lbnRzVG9Nb2RpZnlcbiAgICB0aGlzLmVsZW1lbnRJZHNUb0FkZCA9IFsuLi5pZHNBZnRlcl0uZmlsdGVyKGlkID0+ICFpZHNCZWZvcmUuaGFzKGlkKSlcbiAgfVxuXG4gIC8vIFdlIGRvIHRoZSBmb2xsb3dpbmcgdG8gb3B0aW1pemUgYXBwZW5kL3ByZXBlbmQgb3BlcmF0aW9uczpcbiAgLy8gICAxKSBUcmFjayBpZHMgb2YgbW9kaWZpZWQgZWxlbWVudHMgJiBvZiBuZXcgZWxlbWVudHNcbiAgLy8gICAyKSBBbGwgdGhlIG1vZGlmaWVkIGVsZW1lbnRzIGFyZSBwdXQgYmFjayBpbiB0aGUgY29ycmVjdCBwb3NpdGlvbiBpbiB0aGUgRE9NIHRyZWVcbiAgLy8gICAgICBieSBzdG9yaW5nIHRoZSBpZCBvZiB0aGVpciBwcmV2aW91cyBzaWJsaW5nXG4gIC8vICAgMykgTmV3IGVsZW1lbnRzIGFyZSBnb2luZyB0byBiZSBwdXQgaW4gdGhlIHJpZ2h0IHBsYWNlIGJ5IG1vcnBoZG9tIGR1cmluZyBhcHBlbmQuXG4gIC8vICAgICAgRm9yIHByZXBlbmQsIHdlIG1vdmUgdGhlbSB0byB0aGUgZmlyc3QgcG9zaXRpb24gaW4gdGhlIGNvbnRhaW5lclxuICBwZXJmb3JtKCl7XG4gICAgbGV0IGNvbnRhaW5lciA9IERPTS5ieUlkKHRoaXMuY29udGFpbmVySWQpXG4gICAgdGhpcy5lbGVtZW50c1RvTW9kaWZ5LmZvckVhY2goZWxlbWVudFRvTW9kaWZ5ID0+IHtcbiAgICAgIGlmKGVsZW1lbnRUb01vZGlmeS5wcmV2aW91c0VsZW1lbnRJZCl7XG4gICAgICAgIG1heWJlKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1lbnRUb01vZGlmeS5wcmV2aW91c0VsZW1lbnRJZCksIHByZXZpb3VzRWxlbSA9PiB7XG4gICAgICAgICAgbWF5YmUoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWxlbWVudFRvTW9kaWZ5LmVsZW1lbnRJZCksIGVsZW0gPT4ge1xuICAgICAgICAgICAgbGV0IGlzSW5SaWdodFBsYWNlID0gZWxlbS5wcmV2aW91c0VsZW1lbnRTaWJsaW5nICYmIGVsZW0ucHJldmlvdXNFbGVtZW50U2libGluZy5pZCA9PSBwcmV2aW91c0VsZW0uaWRcbiAgICAgICAgICAgIGlmKCFpc0luUmlnaHRQbGFjZSl7XG4gICAgICAgICAgICAgIHByZXZpb3VzRWxlbS5pbnNlcnRBZGphY2VudEVsZW1lbnQoXCJhZnRlcmVuZFwiLCBlbGVtKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBUaGlzIGlzIHRoZSBmaXJzdCBlbGVtZW50IGluIHRoZSBjb250YWluZXJcbiAgICAgICAgbWF5YmUoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWxlbWVudFRvTW9kaWZ5LmVsZW1lbnRJZCksIGVsZW0gPT4ge1xuICAgICAgICAgIGxldCBpc0luUmlnaHRQbGFjZSA9IGVsZW0ucHJldmlvdXNFbGVtZW50U2libGluZyA9PSBudWxsXG4gICAgICAgICAgaWYoIWlzSW5SaWdodFBsYWNlKXtcbiAgICAgICAgICAgIGNvbnRhaW5lci5pbnNlcnRBZGphY2VudEVsZW1lbnQoXCJhZnRlcmJlZ2luXCIsIGVsZW0pXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0pXG5cbiAgICBpZih0aGlzLnVwZGF0ZVR5cGUgPT0gXCJwcmVwZW5kXCIpe1xuICAgICAgdGhpcy5lbGVtZW50SWRzVG9BZGQucmV2ZXJzZSgpLmZvckVhY2goZWxlbUlkID0+IHtcbiAgICAgICAgbWF5YmUoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWxlbUlkKSwgZWxlbSA9PiBjb250YWluZXIuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KFwiYWZ0ZXJiZWdpblwiLCBlbGVtKSlcbiAgICAgIH0pXG4gICAgfVxuICB9XG59XG4iLCAidmFyIERPQ1VNRU5UX0ZSQUdNRU5UX05PREUgPSAxMTtcblxuZnVuY3Rpb24gbW9ycGhBdHRycyhmcm9tTm9kZSwgdG9Ob2RlKSB7XG4gICAgdmFyIHRvTm9kZUF0dHJzID0gdG9Ob2RlLmF0dHJpYnV0ZXM7XG4gICAgdmFyIGF0dHI7XG4gICAgdmFyIGF0dHJOYW1lO1xuICAgIHZhciBhdHRyTmFtZXNwYWNlVVJJO1xuICAgIHZhciBhdHRyVmFsdWU7XG4gICAgdmFyIGZyb21WYWx1ZTtcblxuICAgIC8vIGRvY3VtZW50LWZyYWdtZW50cyBkb250IGhhdmUgYXR0cmlidXRlcyBzbyBsZXRzIG5vdCBkbyBhbnl0aGluZ1xuICAgIGlmICh0b05vZGUubm9kZVR5cGUgPT09IERPQ1VNRU5UX0ZSQUdNRU5UX05PREUgfHwgZnJvbU5vZGUubm9kZVR5cGUgPT09IERPQ1VNRU5UX0ZSQUdNRU5UX05PREUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyB1cGRhdGUgYXR0cmlidXRlcyBvbiBvcmlnaW5hbCBET00gZWxlbWVudFxuICAgIGZvciAodmFyIGkgPSB0b05vZGVBdHRycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICBhdHRyID0gdG9Ob2RlQXR0cnNbaV07XG4gICAgICAgIGF0dHJOYW1lID0gYXR0ci5uYW1lO1xuICAgICAgICBhdHRyTmFtZXNwYWNlVVJJID0gYXR0ci5uYW1lc3BhY2VVUkk7XG4gICAgICAgIGF0dHJWYWx1ZSA9IGF0dHIudmFsdWU7XG5cbiAgICAgICAgaWYgKGF0dHJOYW1lc3BhY2VVUkkpIHtcbiAgICAgICAgICAgIGF0dHJOYW1lID0gYXR0ci5sb2NhbE5hbWUgfHwgYXR0ck5hbWU7XG4gICAgICAgICAgICBmcm9tVmFsdWUgPSBmcm9tTm9kZS5nZXRBdHRyaWJ1dGVOUyhhdHRyTmFtZXNwYWNlVVJJLCBhdHRyTmFtZSk7XG5cbiAgICAgICAgICAgIGlmIChmcm9tVmFsdWUgIT09IGF0dHJWYWx1ZSkge1xuICAgICAgICAgICAgICAgIGlmIChhdHRyLnByZWZpeCA9PT0gJ3htbG5zJyl7XG4gICAgICAgICAgICAgICAgICAgIGF0dHJOYW1lID0gYXR0ci5uYW1lOyAvLyBJdCdzIG5vdCBhbGxvd2VkIHRvIHNldCBhbiBhdHRyaWJ1dGUgd2l0aCB0aGUgWE1MTlMgbmFtZXNwYWNlIHdpdGhvdXQgc3BlY2lmeWluZyB0aGUgYHhtbG5zYCBwcmVmaXhcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZnJvbU5vZGUuc2V0QXR0cmlidXRlTlMoYXR0ck5hbWVzcGFjZVVSSSwgYXR0ck5hbWUsIGF0dHJWYWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmcm9tVmFsdWUgPSBmcm9tTm9kZS5nZXRBdHRyaWJ1dGUoYXR0ck5hbWUpO1xuXG4gICAgICAgICAgICBpZiAoZnJvbVZhbHVlICE9PSBhdHRyVmFsdWUpIHtcbiAgICAgICAgICAgICAgICBmcm9tTm9kZS5zZXRBdHRyaWJ1dGUoYXR0ck5hbWUsIGF0dHJWYWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBSZW1vdmUgYW55IGV4dHJhIGF0dHJpYnV0ZXMgZm91bmQgb24gdGhlIG9yaWdpbmFsIERPTSBlbGVtZW50IHRoYXRcbiAgICAvLyB3ZXJlbid0IGZvdW5kIG9uIHRoZSB0YXJnZXQgZWxlbWVudC5cbiAgICB2YXIgZnJvbU5vZGVBdHRycyA9IGZyb21Ob2RlLmF0dHJpYnV0ZXM7XG5cbiAgICBmb3IgKHZhciBkID0gZnJvbU5vZGVBdHRycy5sZW5ndGggLSAxOyBkID49IDA7IGQtLSkge1xuICAgICAgICBhdHRyID0gZnJvbU5vZGVBdHRyc1tkXTtcbiAgICAgICAgYXR0ck5hbWUgPSBhdHRyLm5hbWU7XG4gICAgICAgIGF0dHJOYW1lc3BhY2VVUkkgPSBhdHRyLm5hbWVzcGFjZVVSSTtcblxuICAgICAgICBpZiAoYXR0ck5hbWVzcGFjZVVSSSkge1xuICAgICAgICAgICAgYXR0ck5hbWUgPSBhdHRyLmxvY2FsTmFtZSB8fCBhdHRyTmFtZTtcblxuICAgICAgICAgICAgaWYgKCF0b05vZGUuaGFzQXR0cmlidXRlTlMoYXR0ck5hbWVzcGFjZVVSSSwgYXR0ck5hbWUpKSB7XG4gICAgICAgICAgICAgICAgZnJvbU5vZGUucmVtb3ZlQXR0cmlidXRlTlMoYXR0ck5hbWVzcGFjZVVSSSwgYXR0ck5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKCF0b05vZGUuaGFzQXR0cmlidXRlKGF0dHJOYW1lKSkge1xuICAgICAgICAgICAgICAgIGZyb21Ob2RlLnJlbW92ZUF0dHJpYnV0ZShhdHRyTmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5cbnZhciByYW5nZTsgLy8gQ3JlYXRlIGEgcmFuZ2Ugb2JqZWN0IGZvciBlZmZpY2VudGx5IHJlbmRlcmluZyBzdHJpbmdzIHRvIGVsZW1lbnRzLlxudmFyIE5TX1hIVE1MID0gJ2h0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwnO1xuXG52YXIgZG9jID0gdHlwZW9mIGRvY3VtZW50ID09PSAndW5kZWZpbmVkJyA/IHVuZGVmaW5lZCA6IGRvY3VtZW50O1xudmFyIEhBU19URU1QTEFURV9TVVBQT1JUID0gISFkb2MgJiYgJ2NvbnRlbnQnIGluIGRvYy5jcmVhdGVFbGVtZW50KCd0ZW1wbGF0ZScpO1xudmFyIEhBU19SQU5HRV9TVVBQT1JUID0gISFkb2MgJiYgZG9jLmNyZWF0ZVJhbmdlICYmICdjcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQnIGluIGRvYy5jcmVhdGVSYW5nZSgpO1xuXG5mdW5jdGlvbiBjcmVhdGVGcmFnbWVudEZyb21UZW1wbGF0ZShzdHIpIHtcbiAgICB2YXIgdGVtcGxhdGUgPSBkb2MuY3JlYXRlRWxlbWVudCgndGVtcGxhdGUnKTtcbiAgICB0ZW1wbGF0ZS5pbm5lckhUTUwgPSBzdHI7XG4gICAgcmV0dXJuIHRlbXBsYXRlLmNvbnRlbnQuY2hpbGROb2Rlc1swXTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlRnJhZ21lbnRGcm9tUmFuZ2Uoc3RyKSB7XG4gICAgaWYgKCFyYW5nZSkge1xuICAgICAgICByYW5nZSA9IGRvYy5jcmVhdGVSYW5nZSgpO1xuICAgICAgICByYW5nZS5zZWxlY3ROb2RlKGRvYy5ib2R5KTtcbiAgICB9XG5cbiAgICB2YXIgZnJhZ21lbnQgPSByYW5nZS5jcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQoc3RyKTtcbiAgICByZXR1cm4gZnJhZ21lbnQuY2hpbGROb2Rlc1swXTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlRnJhZ21lbnRGcm9tV3JhcChzdHIpIHtcbiAgICB2YXIgZnJhZ21lbnQgPSBkb2MuY3JlYXRlRWxlbWVudCgnYm9keScpO1xuICAgIGZyYWdtZW50LmlubmVySFRNTCA9IHN0cjtcbiAgICByZXR1cm4gZnJhZ21lbnQuY2hpbGROb2Rlc1swXTtcbn1cblxuLyoqXG4gKiBUaGlzIGlzIGFib3V0IHRoZSBzYW1lXG4gKiB2YXIgaHRtbCA9IG5ldyBET01QYXJzZXIoKS5wYXJzZUZyb21TdHJpbmcoc3RyLCAndGV4dC9odG1sJyk7XG4gKiByZXR1cm4gaHRtbC5ib2R5LmZpcnN0Q2hpbGQ7XG4gKlxuICogQG1ldGhvZCB0b0VsZW1lbnRcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqL1xuZnVuY3Rpb24gdG9FbGVtZW50KHN0cikge1xuICAgIHN0ciA9IHN0ci50cmltKCk7XG4gICAgaWYgKEhBU19URU1QTEFURV9TVVBQT1JUKSB7XG4gICAgICAvLyBhdm9pZCByZXN0cmljdGlvbnMgb24gY29udGVudCBmb3IgdGhpbmdzIGxpa2UgYDx0cj48dGg+SGk8L3RoPjwvdHI+YCB3aGljaFxuICAgICAgLy8gY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50IGRvZXNuJ3Qgc3VwcG9ydFxuICAgICAgLy8gPHRlbXBsYXRlPiBzdXBwb3J0IG5vdCBhdmFpbGFibGUgaW4gSUVcbiAgICAgIHJldHVybiBjcmVhdGVGcmFnbWVudEZyb21UZW1wbGF0ZShzdHIpO1xuICAgIH0gZWxzZSBpZiAoSEFTX1JBTkdFX1NVUFBPUlQpIHtcbiAgICAgIHJldHVybiBjcmVhdGVGcmFnbWVudEZyb21SYW5nZShzdHIpO1xuICAgIH1cblxuICAgIHJldHVybiBjcmVhdGVGcmFnbWVudEZyb21XcmFwKHN0cik7XG59XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIHR3byBub2RlJ3MgbmFtZXMgYXJlIHRoZSBzYW1lLlxuICpcbiAqIE5PVEU6IFdlIGRvbid0IGJvdGhlciBjaGVja2luZyBgbmFtZXNwYWNlVVJJYCBiZWNhdXNlIHlvdSB3aWxsIG5ldmVyIGZpbmQgdHdvIEhUTUwgZWxlbWVudHMgd2l0aCB0aGUgc2FtZVxuICogICAgICAgbm9kZU5hbWUgYW5kIGRpZmZlcmVudCBuYW1lc3BhY2UgVVJJcy5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGFcbiAqIEBwYXJhbSB7RWxlbWVudH0gYiBUaGUgdGFyZ2V0IGVsZW1lbnRcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGNvbXBhcmVOb2RlTmFtZXMoZnJvbUVsLCB0b0VsKSB7XG4gICAgdmFyIGZyb21Ob2RlTmFtZSA9IGZyb21FbC5ub2RlTmFtZTtcbiAgICB2YXIgdG9Ob2RlTmFtZSA9IHRvRWwubm9kZU5hbWU7XG4gICAgdmFyIGZyb21Db2RlU3RhcnQsIHRvQ29kZVN0YXJ0O1xuXG4gICAgaWYgKGZyb21Ob2RlTmFtZSA9PT0gdG9Ob2RlTmFtZSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBmcm9tQ29kZVN0YXJ0ID0gZnJvbU5vZGVOYW1lLmNoYXJDb2RlQXQoMCk7XG4gICAgdG9Db2RlU3RhcnQgPSB0b05vZGVOYW1lLmNoYXJDb2RlQXQoMCk7XG5cbiAgICAvLyBJZiB0aGUgdGFyZ2V0IGVsZW1lbnQgaXMgYSB2aXJ0dWFsIERPTSBub2RlIG9yIFNWRyBub2RlIHRoZW4gd2UgbWF5XG4gICAgLy8gbmVlZCB0byBub3JtYWxpemUgdGhlIHRhZyBuYW1lIGJlZm9yZSBjb21wYXJpbmcuIE5vcm1hbCBIVE1MIGVsZW1lbnRzIHRoYXQgYXJlXG4gICAgLy8gaW4gdGhlIFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbFwiXG4gICAgLy8gYXJlIGNvbnZlcnRlZCB0byB1cHBlciBjYXNlXG4gICAgaWYgKGZyb21Db2RlU3RhcnQgPD0gOTAgJiYgdG9Db2RlU3RhcnQgPj0gOTcpIHsgLy8gZnJvbSBpcyB1cHBlciBhbmQgdG8gaXMgbG93ZXJcbiAgICAgICAgcmV0dXJuIGZyb21Ob2RlTmFtZSA9PT0gdG9Ob2RlTmFtZS50b1VwcGVyQ2FzZSgpO1xuICAgIH0gZWxzZSBpZiAodG9Db2RlU3RhcnQgPD0gOTAgJiYgZnJvbUNvZGVTdGFydCA+PSA5NykgeyAvLyB0byBpcyB1cHBlciBhbmQgZnJvbSBpcyBsb3dlclxuICAgICAgICByZXR1cm4gdG9Ob2RlTmFtZSA9PT0gZnJvbU5vZGVOYW1lLnRvVXBwZXJDYXNlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDcmVhdGUgYW4gZWxlbWVudCwgb3B0aW9uYWxseSB3aXRoIGEga25vd24gbmFtZXNwYWNlIFVSSS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZSB0aGUgZWxlbWVudCBuYW1lLCBlLmcuICdkaXYnIG9yICdzdmcnXG4gKiBAcGFyYW0ge3N0cmluZ30gW25hbWVzcGFjZVVSSV0gdGhlIGVsZW1lbnQncyBuYW1lc3BhY2UgVVJJLCBpLmUuIHRoZSB2YWx1ZSBvZlxuICogaXRzIGB4bWxuc2AgYXR0cmlidXRlIG9yIGl0cyBpbmZlcnJlZCBuYW1lc3BhY2UuXG4gKlxuICogQHJldHVybiB7RWxlbWVudH1cbiAqL1xuZnVuY3Rpb24gY3JlYXRlRWxlbWVudE5TKG5hbWUsIG5hbWVzcGFjZVVSSSkge1xuICAgIHJldHVybiAhbmFtZXNwYWNlVVJJIHx8IG5hbWVzcGFjZVVSSSA9PT0gTlNfWEhUTUwgP1xuICAgICAgICBkb2MuY3JlYXRlRWxlbWVudChuYW1lKSA6XG4gICAgICAgIGRvYy5jcmVhdGVFbGVtZW50TlMobmFtZXNwYWNlVVJJLCBuYW1lKTtcbn1cblxuLyoqXG4gKiBDb3BpZXMgdGhlIGNoaWxkcmVuIG9mIG9uZSBET00gZWxlbWVudCB0byBhbm90aGVyIERPTSBlbGVtZW50XG4gKi9cbmZ1bmN0aW9uIG1vdmVDaGlsZHJlbihmcm9tRWwsIHRvRWwpIHtcbiAgICB2YXIgY3VyQ2hpbGQgPSBmcm9tRWwuZmlyc3RDaGlsZDtcbiAgICB3aGlsZSAoY3VyQ2hpbGQpIHtcbiAgICAgICAgdmFyIG5leHRDaGlsZCA9IGN1ckNoaWxkLm5leHRTaWJsaW5nO1xuICAgICAgICB0b0VsLmFwcGVuZENoaWxkKGN1ckNoaWxkKTtcbiAgICAgICAgY3VyQ2hpbGQgPSBuZXh0Q2hpbGQ7XG4gICAgfVxuICAgIHJldHVybiB0b0VsO1xufVxuXG5mdW5jdGlvbiBzeW5jQm9vbGVhbkF0dHJQcm9wKGZyb21FbCwgdG9FbCwgbmFtZSkge1xuICAgIGlmIChmcm9tRWxbbmFtZV0gIT09IHRvRWxbbmFtZV0pIHtcbiAgICAgICAgZnJvbUVsW25hbWVdID0gdG9FbFtuYW1lXTtcbiAgICAgICAgaWYgKGZyb21FbFtuYW1lXSkge1xuICAgICAgICAgICAgZnJvbUVsLnNldEF0dHJpYnV0ZShuYW1lLCAnJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmcm9tRWwucmVtb3ZlQXR0cmlidXRlKG5hbWUpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG52YXIgc3BlY2lhbEVsSGFuZGxlcnMgPSB7XG4gICAgT1BUSU9OOiBmdW5jdGlvbihmcm9tRWwsIHRvRWwpIHtcbiAgICAgICAgdmFyIHBhcmVudE5vZGUgPSBmcm9tRWwucGFyZW50Tm9kZTtcbiAgICAgICAgaWYgKHBhcmVudE5vZGUpIHtcbiAgICAgICAgICAgIHZhciBwYXJlbnROYW1lID0gcGFyZW50Tm9kZS5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpO1xuICAgICAgICAgICAgaWYgKHBhcmVudE5hbWUgPT09ICdPUFRHUk9VUCcpIHtcbiAgICAgICAgICAgICAgICBwYXJlbnROb2RlID0gcGFyZW50Tm9kZS5wYXJlbnROb2RlO1xuICAgICAgICAgICAgICAgIHBhcmVudE5hbWUgPSBwYXJlbnROb2RlICYmIHBhcmVudE5vZGUubm9kZU5hbWUudG9VcHBlckNhc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwYXJlbnROYW1lID09PSAnU0VMRUNUJyAmJiAhcGFyZW50Tm9kZS5oYXNBdHRyaWJ1dGUoJ211bHRpcGxlJykpIHtcbiAgICAgICAgICAgICAgICBpZiAoZnJvbUVsLmhhc0F0dHJpYnV0ZSgnc2VsZWN0ZWQnKSAmJiAhdG9FbC5zZWxlY3RlZCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBXb3JrYXJvdW5kIGZvciBNUyBFZGdlIGJ1ZyB3aGVyZSB0aGUgJ3NlbGVjdGVkJyBhdHRyaWJ1dGUgY2FuIG9ubHkgYmVcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVtb3ZlZCBpZiBzZXQgdG8gYSBub24tZW1wdHkgdmFsdWU6XG4gICAgICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1pY3Jvc29mdC5jb20vZW4tdXMvbWljcm9zb2Z0LWVkZ2UvcGxhdGZvcm0vaXNzdWVzLzEyMDg3Njc5L1xuICAgICAgICAgICAgICAgICAgICBmcm9tRWwuc2V0QXR0cmlidXRlKCdzZWxlY3RlZCcsICdzZWxlY3RlZCcpO1xuICAgICAgICAgICAgICAgICAgICBmcm9tRWwucmVtb3ZlQXR0cmlidXRlKCdzZWxlY3RlZCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBXZSBoYXZlIHRvIHJlc2V0IHNlbGVjdCBlbGVtZW50J3Mgc2VsZWN0ZWRJbmRleCB0byAtMSwgb3RoZXJ3aXNlIHNldHRpbmdcbiAgICAgICAgICAgICAgICAvLyBmcm9tRWwuc2VsZWN0ZWQgdXNpbmcgdGhlIHN5bmNCb29sZWFuQXR0clByb3AgYmVsb3cgaGFzIG5vIGVmZmVjdC5cbiAgICAgICAgICAgICAgICAvLyBUaGUgY29ycmVjdCBzZWxlY3RlZEluZGV4IHdpbGwgYmUgc2V0IGluIHRoZSBTRUxFQ1Qgc3BlY2lhbCBoYW5kbGVyIGJlbG93LlxuICAgICAgICAgICAgICAgIHBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCA9IC0xO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHN5bmNCb29sZWFuQXR0clByb3AoZnJvbUVsLCB0b0VsLCAnc2VsZWN0ZWQnKTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIFRoZSBcInZhbHVlXCIgYXR0cmlidXRlIGlzIHNwZWNpYWwgZm9yIHRoZSA8aW5wdXQ+IGVsZW1lbnQgc2luY2UgaXQgc2V0c1xuICAgICAqIHRoZSBpbml0aWFsIHZhbHVlLiBDaGFuZ2luZyB0aGUgXCJ2YWx1ZVwiIGF0dHJpYnV0ZSB3aXRob3V0IGNoYW5naW5nIHRoZVxuICAgICAqIFwidmFsdWVcIiBwcm9wZXJ0eSB3aWxsIGhhdmUgbm8gZWZmZWN0IHNpbmNlIGl0IGlzIG9ubHkgdXNlZCB0byB0aGUgc2V0IHRoZVxuICAgICAqIGluaXRpYWwgdmFsdWUuICBTaW1pbGFyIGZvciB0aGUgXCJjaGVja2VkXCIgYXR0cmlidXRlLCBhbmQgXCJkaXNhYmxlZFwiLlxuICAgICAqL1xuICAgIElOUFVUOiBmdW5jdGlvbihmcm9tRWwsIHRvRWwpIHtcbiAgICAgICAgc3luY0Jvb2xlYW5BdHRyUHJvcChmcm9tRWwsIHRvRWwsICdjaGVja2VkJyk7XG4gICAgICAgIHN5bmNCb29sZWFuQXR0clByb3AoZnJvbUVsLCB0b0VsLCAnZGlzYWJsZWQnKTtcblxuICAgICAgICBpZiAoZnJvbUVsLnZhbHVlICE9PSB0b0VsLnZhbHVlKSB7XG4gICAgICAgICAgICBmcm9tRWwudmFsdWUgPSB0b0VsLnZhbHVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0b0VsLmhhc0F0dHJpYnV0ZSgndmFsdWUnKSkge1xuICAgICAgICAgICAgZnJvbUVsLnJlbW92ZUF0dHJpYnV0ZSgndmFsdWUnKTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBURVhUQVJFQTogZnVuY3Rpb24oZnJvbUVsLCB0b0VsKSB7XG4gICAgICAgIHZhciBuZXdWYWx1ZSA9IHRvRWwudmFsdWU7XG4gICAgICAgIGlmIChmcm9tRWwudmFsdWUgIT09IG5ld1ZhbHVlKSB7XG4gICAgICAgICAgICBmcm9tRWwudmFsdWUgPSBuZXdWYWx1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBmaXJzdENoaWxkID0gZnJvbUVsLmZpcnN0Q2hpbGQ7XG4gICAgICAgIGlmIChmaXJzdENoaWxkKSB7XG4gICAgICAgICAgICAvLyBOZWVkZWQgZm9yIElFLiBBcHBhcmVudGx5IElFIHNldHMgdGhlIHBsYWNlaG9sZGVyIGFzIHRoZVxuICAgICAgICAgICAgLy8gbm9kZSB2YWx1ZSBhbmQgdmlzZSB2ZXJzYS4gVGhpcyBpZ25vcmVzIGFuIGVtcHR5IHVwZGF0ZS5cbiAgICAgICAgICAgIHZhciBvbGRWYWx1ZSA9IGZpcnN0Q2hpbGQubm9kZVZhbHVlO1xuXG4gICAgICAgICAgICBpZiAob2xkVmFsdWUgPT0gbmV3VmFsdWUgfHwgKCFuZXdWYWx1ZSAmJiBvbGRWYWx1ZSA9PSBmcm9tRWwucGxhY2Vob2xkZXIpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmaXJzdENoaWxkLm5vZGVWYWx1ZSA9IG5ld1ZhbHVlO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBTRUxFQ1Q6IGZ1bmN0aW9uKGZyb21FbCwgdG9FbCkge1xuICAgICAgICBpZiAoIXRvRWwuaGFzQXR0cmlidXRlKCdtdWx0aXBsZScpKSB7XG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWRJbmRleCA9IC0xO1xuICAgICAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICAgICAgLy8gV2UgaGF2ZSB0byBsb29wIHRocm91Z2ggY2hpbGRyZW4gb2YgZnJvbUVsLCBub3QgdG9FbCBzaW5jZSBub2RlcyBjYW4gYmUgbW92ZWRcbiAgICAgICAgICAgIC8vIGZyb20gdG9FbCB0byBmcm9tRWwgZGlyZWN0bHkgd2hlbiBtb3JwaGluZy5cbiAgICAgICAgICAgIC8vIEF0IHRoZSB0aW1lIHRoaXMgc3BlY2lhbCBoYW5kbGVyIGlzIGludm9rZWQsIGFsbCBjaGlsZHJlbiBoYXZlIGFscmVhZHkgYmVlbiBtb3JwaGVkXG4gICAgICAgICAgICAvLyBhbmQgYXBwZW5kZWQgdG8gLyByZW1vdmVkIGZyb20gZnJvbUVsLCBzbyB1c2luZyBmcm9tRWwgaGVyZSBpcyBzYWZlIGFuZCBjb3JyZWN0LlxuICAgICAgICAgICAgdmFyIGN1ckNoaWxkID0gZnJvbUVsLmZpcnN0Q2hpbGQ7XG4gICAgICAgICAgICB2YXIgb3B0Z3JvdXA7XG4gICAgICAgICAgICB2YXIgbm9kZU5hbWU7XG4gICAgICAgICAgICB3aGlsZShjdXJDaGlsZCkge1xuICAgICAgICAgICAgICAgIG5vZGVOYW1lID0gY3VyQ2hpbGQubm9kZU5hbWUgJiYgY3VyQ2hpbGQubm9kZU5hbWUudG9VcHBlckNhc2UoKTtcbiAgICAgICAgICAgICAgICBpZiAobm9kZU5hbWUgPT09ICdPUFRHUk9VUCcpIHtcbiAgICAgICAgICAgICAgICAgICAgb3B0Z3JvdXAgPSBjdXJDaGlsZDtcbiAgICAgICAgICAgICAgICAgICAgY3VyQ2hpbGQgPSBvcHRncm91cC5maXJzdENoaWxkO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChub2RlTmFtZSA9PT0gJ09QVElPTicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJDaGlsZC5oYXNBdHRyaWJ1dGUoJ3NlbGVjdGVkJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZEluZGV4ID0gaTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjdXJDaGlsZCA9IGN1ckNoaWxkLm5leHRTaWJsaW5nO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWN1ckNoaWxkICYmIG9wdGdyb3VwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJDaGlsZCA9IG9wdGdyb3VwLm5leHRTaWJsaW5nO1xuICAgICAgICAgICAgICAgICAgICAgICAgb3B0Z3JvdXAgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmcm9tRWwuc2VsZWN0ZWRJbmRleCA9IHNlbGVjdGVkSW5kZXg7XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG52YXIgRUxFTUVOVF9OT0RFID0gMTtcbnZhciBET0NVTUVOVF9GUkFHTUVOVF9OT0RFJDEgPSAxMTtcbnZhciBURVhUX05PREUgPSAzO1xudmFyIENPTU1FTlRfTk9ERSA9IDg7XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG5mdW5jdGlvbiBkZWZhdWx0R2V0Tm9kZUtleShub2RlKSB7XG4gIGlmIChub2RlKSB7XG4gICAgcmV0dXJuIChub2RlLmdldEF0dHJpYnV0ZSAmJiBub2RlLmdldEF0dHJpYnV0ZSgnaWQnKSkgfHwgbm9kZS5pZDtcbiAgfVxufVxuXG5mdW5jdGlvbiBtb3JwaGRvbUZhY3RvcnkobW9ycGhBdHRycykge1xuXG4gIHJldHVybiBmdW5jdGlvbiBtb3JwaGRvbShmcm9tTm9kZSwgdG9Ob2RlLCBvcHRpb25zKSB7XG4gICAgaWYgKCFvcHRpb25zKSB7XG4gICAgICBvcHRpb25zID0ge307XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiB0b05vZGUgPT09ICdzdHJpbmcnKSB7XG4gICAgICBpZiAoZnJvbU5vZGUubm9kZU5hbWUgPT09ICcjZG9jdW1lbnQnIHx8IGZyb21Ob2RlLm5vZGVOYW1lID09PSAnSFRNTCcgfHwgZnJvbU5vZGUubm9kZU5hbWUgPT09ICdCT0RZJykge1xuICAgICAgICB2YXIgdG9Ob2RlSHRtbCA9IHRvTm9kZTtcbiAgICAgICAgdG9Ob2RlID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ2h0bWwnKTtcbiAgICAgICAgdG9Ob2RlLmlubmVySFRNTCA9IHRvTm9kZUh0bWw7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0b05vZGUgPSB0b0VsZW1lbnQodG9Ob2RlKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRvTm9kZS5ub2RlVHlwZSA9PT0gRE9DVU1FTlRfRlJBR01FTlRfTk9ERSQxKSB7XG4gICAgICB0b05vZGUgPSB0b05vZGUuZmlyc3RFbGVtZW50Q2hpbGQ7XG4gICAgfVxuXG4gICAgdmFyIGdldE5vZGVLZXkgPSBvcHRpb25zLmdldE5vZGVLZXkgfHwgZGVmYXVsdEdldE5vZGVLZXk7XG4gICAgdmFyIG9uQmVmb3JlTm9kZUFkZGVkID0gb3B0aW9ucy5vbkJlZm9yZU5vZGVBZGRlZCB8fCBub29wO1xuICAgIHZhciBvbk5vZGVBZGRlZCA9IG9wdGlvbnMub25Ob2RlQWRkZWQgfHwgbm9vcDtcbiAgICB2YXIgb25CZWZvcmVFbFVwZGF0ZWQgPSBvcHRpb25zLm9uQmVmb3JlRWxVcGRhdGVkIHx8IG5vb3A7XG4gICAgdmFyIG9uRWxVcGRhdGVkID0gb3B0aW9ucy5vbkVsVXBkYXRlZCB8fCBub29wO1xuICAgIHZhciBvbkJlZm9yZU5vZGVEaXNjYXJkZWQgPSBvcHRpb25zLm9uQmVmb3JlTm9kZURpc2NhcmRlZCB8fCBub29wO1xuICAgIHZhciBvbk5vZGVEaXNjYXJkZWQgPSBvcHRpb25zLm9uTm9kZURpc2NhcmRlZCB8fCBub29wO1xuICAgIHZhciBvbkJlZm9yZUVsQ2hpbGRyZW5VcGRhdGVkID0gb3B0aW9ucy5vbkJlZm9yZUVsQ2hpbGRyZW5VcGRhdGVkIHx8IG5vb3A7XG4gICAgdmFyIHNraXBGcm9tQ2hpbGRyZW4gPSBvcHRpb25zLnNraXBGcm9tQ2hpbGRyZW4gfHwgbm9vcDtcbiAgICB2YXIgYWRkQ2hpbGQgPSBvcHRpb25zLmFkZENoaWxkIHx8IGZ1bmN0aW9uKHBhcmVudCwgY2hpbGQpeyByZXR1cm4gcGFyZW50LmFwcGVuZENoaWxkKGNoaWxkKTsgfTtcbiAgICB2YXIgY2hpbGRyZW5Pbmx5ID0gb3B0aW9ucy5jaGlsZHJlbk9ubHkgPT09IHRydWU7XG5cbiAgICAvLyBUaGlzIG9iamVjdCBpcyB1c2VkIGFzIGEgbG9va3VwIHRvIHF1aWNrbHkgZmluZCBhbGwga2V5ZWQgZWxlbWVudHMgaW4gdGhlIG9yaWdpbmFsIERPTSB0cmVlLlxuICAgIHZhciBmcm9tTm9kZXNMb29rdXAgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIHZhciBrZXllZFJlbW92YWxMaXN0ID0gW107XG5cbiAgICBmdW5jdGlvbiBhZGRLZXllZFJlbW92YWwoa2V5KSB7XG4gICAgICBrZXllZFJlbW92YWxMaXN0LnB1c2goa2V5KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB3YWxrRGlzY2FyZGVkQ2hpbGROb2Rlcyhub2RlLCBza2lwS2V5ZWROb2Rlcykge1xuICAgICAgaWYgKG5vZGUubm9kZVR5cGUgPT09IEVMRU1FTlRfTk9ERSkge1xuICAgICAgICB2YXIgY3VyQ2hpbGQgPSBub2RlLmZpcnN0Q2hpbGQ7XG4gICAgICAgIHdoaWxlIChjdXJDaGlsZCkge1xuXG4gICAgICAgICAgdmFyIGtleSA9IHVuZGVmaW5lZDtcblxuICAgICAgICAgIGlmIChza2lwS2V5ZWROb2RlcyAmJiAoa2V5ID0gZ2V0Tm9kZUtleShjdXJDaGlsZCkpKSB7XG4gICAgICAgICAgICAvLyBJZiB3ZSBhcmUgc2tpcHBpbmcga2V5ZWQgbm9kZXMgdGhlbiB3ZSBhZGQgdGhlIGtleVxuICAgICAgICAgICAgLy8gdG8gYSBsaXN0IHNvIHRoYXQgaXQgY2FuIGJlIGhhbmRsZWQgYXQgdGhlIHZlcnkgZW5kLlxuICAgICAgICAgICAgYWRkS2V5ZWRSZW1vdmFsKGtleSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIE9ubHkgcmVwb3J0IHRoZSBub2RlIGFzIGRpc2NhcmRlZCBpZiBpdCBpcyBub3Qga2V5ZWQuIFdlIGRvIHRoaXMgYmVjYXVzZVxuICAgICAgICAgICAgLy8gYXQgdGhlIGVuZCB3ZSBsb29wIHRocm91Z2ggYWxsIGtleWVkIGVsZW1lbnRzIHRoYXQgd2VyZSB1bm1hdGNoZWRcbiAgICAgICAgICAgIC8vIGFuZCB0aGVuIGRpc2NhcmQgdGhlbSBpbiBvbmUgZmluYWwgcGFzcy5cbiAgICAgICAgICAgIG9uTm9kZURpc2NhcmRlZChjdXJDaGlsZCk7XG4gICAgICAgICAgICBpZiAoY3VyQ2hpbGQuZmlyc3RDaGlsZCkge1xuICAgICAgICAgICAgICB3YWxrRGlzY2FyZGVkQ2hpbGROb2RlcyhjdXJDaGlsZCwgc2tpcEtleWVkTm9kZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGN1ckNoaWxkID0gY3VyQ2hpbGQubmV4dFNpYmxpbmc7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAqIFJlbW92ZXMgYSBET00gbm9kZSBvdXQgb2YgdGhlIG9yaWdpbmFsIERPTVxuICAgICpcbiAgICAqIEBwYXJhbSAge05vZGV9IG5vZGUgVGhlIG5vZGUgdG8gcmVtb3ZlXG4gICAgKiBAcGFyYW0gIHtOb2RlfSBwYXJlbnROb2RlIFRoZSBub2RlcyBwYXJlbnRcbiAgICAqIEBwYXJhbSAge0Jvb2xlYW59IHNraXBLZXllZE5vZGVzIElmIHRydWUgdGhlbiBlbGVtZW50cyB3aXRoIGtleXMgd2lsbCBiZSBza2lwcGVkIGFuZCBub3QgZGlzY2FyZGVkLlxuICAgICogQHJldHVybiB7dW5kZWZpbmVkfVxuICAgICovXG4gICAgZnVuY3Rpb24gcmVtb3ZlTm9kZShub2RlLCBwYXJlbnROb2RlLCBza2lwS2V5ZWROb2Rlcykge1xuICAgICAgaWYgKG9uQmVmb3JlTm9kZURpc2NhcmRlZChub2RlKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAocGFyZW50Tm9kZSkge1xuICAgICAgICBwYXJlbnROb2RlLnJlbW92ZUNoaWxkKG5vZGUpO1xuICAgICAgfVxuXG4gICAgICBvbk5vZGVEaXNjYXJkZWQobm9kZSk7XG4gICAgICB3YWxrRGlzY2FyZGVkQ2hpbGROb2Rlcyhub2RlLCBza2lwS2V5ZWROb2Rlcyk7XG4gICAgfVxuXG4gICAgLy8gLy8gVHJlZVdhbGtlciBpbXBsZW1lbnRhdGlvbiBpcyBubyBmYXN0ZXIsIGJ1dCBrZWVwaW5nIHRoaXMgYXJvdW5kIGluIGNhc2UgdGhpcyBjaGFuZ2VzIGluIHRoZSBmdXR1cmVcbiAgICAvLyBmdW5jdGlvbiBpbmRleFRyZWUocm9vdCkge1xuICAgIC8vICAgICB2YXIgdHJlZVdhbGtlciA9IGRvY3VtZW50LmNyZWF0ZVRyZWVXYWxrZXIoXG4gICAgLy8gICAgICAgICByb290LFxuICAgIC8vICAgICAgICAgTm9kZUZpbHRlci5TSE9XX0VMRU1FTlQpO1xuICAgIC8vXG4gICAgLy8gICAgIHZhciBlbDtcbiAgICAvLyAgICAgd2hpbGUoKGVsID0gdHJlZVdhbGtlci5uZXh0Tm9kZSgpKSkge1xuICAgIC8vICAgICAgICAgdmFyIGtleSA9IGdldE5vZGVLZXkoZWwpO1xuICAgIC8vICAgICAgICAgaWYgKGtleSkge1xuICAgIC8vICAgICAgICAgICAgIGZyb21Ob2Rlc0xvb2t1cFtrZXldID0gZWw7XG4gICAgLy8gICAgICAgICB9XG4gICAgLy8gICAgIH1cbiAgICAvLyB9XG5cbiAgICAvLyAvLyBOb2RlSXRlcmF0b3IgaW1wbGVtZW50YXRpb24gaXMgbm8gZmFzdGVyLCBidXQga2VlcGluZyB0aGlzIGFyb3VuZCBpbiBjYXNlIHRoaXMgY2hhbmdlcyBpbiB0aGUgZnV0dXJlXG4gICAgLy9cbiAgICAvLyBmdW5jdGlvbiBpbmRleFRyZWUobm9kZSkge1xuICAgIC8vICAgICB2YXIgbm9kZUl0ZXJhdG9yID0gZG9jdW1lbnQuY3JlYXRlTm9kZUl0ZXJhdG9yKG5vZGUsIE5vZGVGaWx0ZXIuU0hPV19FTEVNRU5UKTtcbiAgICAvLyAgICAgdmFyIGVsO1xuICAgIC8vICAgICB3aGlsZSgoZWwgPSBub2RlSXRlcmF0b3IubmV4dE5vZGUoKSkpIHtcbiAgICAvLyAgICAgICAgIHZhciBrZXkgPSBnZXROb2RlS2V5KGVsKTtcbiAgICAvLyAgICAgICAgIGlmIChrZXkpIHtcbiAgICAvLyAgICAgICAgICAgICBmcm9tTm9kZXNMb29rdXBba2V5XSA9IGVsO1xuICAgIC8vICAgICAgICAgfVxuICAgIC8vICAgICB9XG4gICAgLy8gfVxuXG4gICAgZnVuY3Rpb24gaW5kZXhUcmVlKG5vZGUpIHtcbiAgICAgIGlmIChub2RlLm5vZGVUeXBlID09PSBFTEVNRU5UX05PREUgfHwgbm9kZS5ub2RlVHlwZSA9PT0gRE9DVU1FTlRfRlJBR01FTlRfTk9ERSQxKSB7XG4gICAgICAgIHZhciBjdXJDaGlsZCA9IG5vZGUuZmlyc3RDaGlsZDtcbiAgICAgICAgd2hpbGUgKGN1ckNoaWxkKSB7XG4gICAgICAgICAgdmFyIGtleSA9IGdldE5vZGVLZXkoY3VyQ2hpbGQpO1xuICAgICAgICAgIGlmIChrZXkpIHtcbiAgICAgICAgICAgIGZyb21Ob2Rlc0xvb2t1cFtrZXldID0gY3VyQ2hpbGQ7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gV2FsayByZWN1cnNpdmVseVxuICAgICAgICAgIGluZGV4VHJlZShjdXJDaGlsZCk7XG5cbiAgICAgICAgICBjdXJDaGlsZCA9IGN1ckNoaWxkLm5leHRTaWJsaW5nO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaW5kZXhUcmVlKGZyb21Ob2RlKTtcblxuICAgIGZ1bmN0aW9uIGhhbmRsZU5vZGVBZGRlZChlbCkge1xuICAgICAgb25Ob2RlQWRkZWQoZWwpO1xuXG4gICAgICB2YXIgY3VyQ2hpbGQgPSBlbC5maXJzdENoaWxkO1xuICAgICAgd2hpbGUgKGN1ckNoaWxkKSB7XG4gICAgICAgIHZhciBuZXh0U2libGluZyA9IGN1ckNoaWxkLm5leHRTaWJsaW5nO1xuXG4gICAgICAgIHZhciBrZXkgPSBnZXROb2RlS2V5KGN1ckNoaWxkKTtcbiAgICAgICAgaWYgKGtleSkge1xuICAgICAgICAgIHZhciB1bm1hdGNoZWRGcm9tRWwgPSBmcm9tTm9kZXNMb29rdXBba2V5XTtcbiAgICAgICAgICAvLyBpZiB3ZSBmaW5kIGEgZHVwbGljYXRlICNpZCBub2RlIGluIGNhY2hlLCByZXBsYWNlIGBlbGAgd2l0aCBjYWNoZSB2YWx1ZVxuICAgICAgICAgIC8vIGFuZCBtb3JwaCBpdCB0byB0aGUgY2hpbGQgbm9kZS5cbiAgICAgICAgICBpZiAodW5tYXRjaGVkRnJvbUVsICYmIGNvbXBhcmVOb2RlTmFtZXMoY3VyQ2hpbGQsIHVubWF0Y2hlZEZyb21FbCkpIHtcbiAgICAgICAgICAgIGN1ckNoaWxkLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKHVubWF0Y2hlZEZyb21FbCwgY3VyQ2hpbGQpO1xuICAgICAgICAgICAgbW9ycGhFbCh1bm1hdGNoZWRGcm9tRWwsIGN1ckNoaWxkKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaGFuZGxlTm9kZUFkZGVkKGN1ckNoaWxkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gcmVjdXJzaXZlbHkgY2FsbCBmb3IgY3VyQ2hpbGQgYW5kIGl0J3MgY2hpbGRyZW4gdG8gc2VlIGlmIHdlIGZpbmQgc29tZXRoaW5nIGluXG4gICAgICAgICAgLy8gZnJvbU5vZGVzTG9va3VwXG4gICAgICAgICAgaGFuZGxlTm9kZUFkZGVkKGN1ckNoaWxkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGN1ckNoaWxkID0gbmV4dFNpYmxpbmc7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2xlYW51cEZyb21FbChmcm9tRWwsIGN1ckZyb21Ob2RlQ2hpbGQsIGN1ckZyb21Ob2RlS2V5KSB7XG4gICAgICAvLyBXZSBoYXZlIHByb2Nlc3NlZCBhbGwgb2YgdGhlIFwidG8gbm9kZXNcIi4gSWYgY3VyRnJvbU5vZGVDaGlsZCBpc1xuICAgICAgLy8gbm9uLW51bGwgdGhlbiB3ZSBzdGlsbCBoYXZlIHNvbWUgZnJvbSBub2RlcyBsZWZ0IG92ZXIgdGhhdCBuZWVkXG4gICAgICAvLyB0byBiZSByZW1vdmVkXG4gICAgICB3aGlsZSAoY3VyRnJvbU5vZGVDaGlsZCkge1xuICAgICAgICB2YXIgZnJvbU5leHRTaWJsaW5nID0gY3VyRnJvbU5vZGVDaGlsZC5uZXh0U2libGluZztcbiAgICAgICAgaWYgKChjdXJGcm9tTm9kZUtleSA9IGdldE5vZGVLZXkoY3VyRnJvbU5vZGVDaGlsZCkpKSB7XG4gICAgICAgICAgLy8gU2luY2UgdGhlIG5vZGUgaXMga2V5ZWQgaXQgbWlnaHQgYmUgbWF0Y2hlZCB1cCBsYXRlciBzbyB3ZSBkZWZlclxuICAgICAgICAgIC8vIHRoZSBhY3R1YWwgcmVtb3ZhbCB0byBsYXRlclxuICAgICAgICAgIGFkZEtleWVkUmVtb3ZhbChjdXJGcm9tTm9kZUtleSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gTk9URTogd2Ugc2tpcCBuZXN0ZWQga2V5ZWQgbm9kZXMgZnJvbSBiZWluZyByZW1vdmVkIHNpbmNlIHRoZXJlIGlzXG4gICAgICAgICAgLy8gICAgICAgc3RpbGwgYSBjaGFuY2UgdGhleSB3aWxsIGJlIG1hdGNoZWQgdXAgbGF0ZXJcbiAgICAgICAgICByZW1vdmVOb2RlKGN1ckZyb21Ob2RlQ2hpbGQsIGZyb21FbCwgdHJ1ZSAvKiBza2lwIGtleWVkIG5vZGVzICovKTtcbiAgICAgICAgfVxuICAgICAgICBjdXJGcm9tTm9kZUNoaWxkID0gZnJvbU5leHRTaWJsaW5nO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIG1vcnBoRWwoZnJvbUVsLCB0b0VsLCBjaGlsZHJlbk9ubHkpIHtcbiAgICAgIHZhciB0b0VsS2V5ID0gZ2V0Tm9kZUtleSh0b0VsKTtcblxuICAgICAgaWYgKHRvRWxLZXkpIHtcbiAgICAgICAgLy8gSWYgYW4gZWxlbWVudCB3aXRoIGFuIElEIGlzIGJlaW5nIG1vcnBoZWQgdGhlbiBpdCB3aWxsIGJlIGluIHRoZSBmaW5hbFxuICAgICAgICAvLyBET00gc28gY2xlYXIgaXQgb3V0IG9mIHRoZSBzYXZlZCBlbGVtZW50cyBjb2xsZWN0aW9uXG4gICAgICAgIGRlbGV0ZSBmcm9tTm9kZXNMb29rdXBbdG9FbEtleV07XG4gICAgICB9XG5cbiAgICAgIGlmICghY2hpbGRyZW5Pbmx5KSB7XG4gICAgICAgIC8vIG9wdGlvbmFsXG4gICAgICAgIGlmIChvbkJlZm9yZUVsVXBkYXRlZChmcm9tRWwsIHRvRWwpID09PSBmYWxzZSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHVwZGF0ZSBhdHRyaWJ1dGVzIG9uIG9yaWdpbmFsIERPTSBlbGVtZW50IGZpcnN0XG4gICAgICAgIG1vcnBoQXR0cnMoZnJvbUVsLCB0b0VsKTtcbiAgICAgICAgLy8gb3B0aW9uYWxcbiAgICAgICAgb25FbFVwZGF0ZWQoZnJvbUVsKTtcblxuICAgICAgICBpZiAob25CZWZvcmVFbENoaWxkcmVuVXBkYXRlZChmcm9tRWwsIHRvRWwpID09PSBmYWxzZSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoZnJvbUVsLm5vZGVOYW1lICE9PSAnVEVYVEFSRUEnKSB7XG4gICAgICAgIG1vcnBoQ2hpbGRyZW4oZnJvbUVsLCB0b0VsKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNwZWNpYWxFbEhhbmRsZXJzLlRFWFRBUkVBKGZyb21FbCwgdG9FbCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbW9ycGhDaGlsZHJlbihmcm9tRWwsIHRvRWwpIHtcbiAgICAgIHZhciBza2lwRnJvbSA9IHNraXBGcm9tQ2hpbGRyZW4oZnJvbUVsKTtcbiAgICAgIHZhciBjdXJUb05vZGVDaGlsZCA9IHRvRWwuZmlyc3RDaGlsZDtcbiAgICAgIHZhciBjdXJGcm9tTm9kZUNoaWxkID0gZnJvbUVsLmZpcnN0Q2hpbGQ7XG4gICAgICB2YXIgY3VyVG9Ob2RlS2V5O1xuICAgICAgdmFyIGN1ckZyb21Ob2RlS2V5O1xuXG4gICAgICB2YXIgZnJvbU5leHRTaWJsaW5nO1xuICAgICAgdmFyIHRvTmV4dFNpYmxpbmc7XG4gICAgICB2YXIgbWF0Y2hpbmdGcm9tRWw7XG5cbiAgICAgIC8vIHdhbGsgdGhlIGNoaWxkcmVuXG4gICAgICBvdXRlcjogd2hpbGUgKGN1clRvTm9kZUNoaWxkKSB7XG4gICAgICAgIHRvTmV4dFNpYmxpbmcgPSBjdXJUb05vZGVDaGlsZC5uZXh0U2libGluZztcbiAgICAgICAgY3VyVG9Ob2RlS2V5ID0gZ2V0Tm9kZUtleShjdXJUb05vZGVDaGlsZCk7XG5cbiAgICAgICAgLy8gd2FsayB0aGUgZnJvbU5vZGUgY2hpbGRyZW4gYWxsIHRoZSB3YXkgdGhyb3VnaFxuICAgICAgICB3aGlsZSAoIXNraXBGcm9tICYmIGN1ckZyb21Ob2RlQ2hpbGQpIHtcbiAgICAgICAgICBmcm9tTmV4dFNpYmxpbmcgPSBjdXJGcm9tTm9kZUNoaWxkLm5leHRTaWJsaW5nO1xuXG4gICAgICAgICAgaWYgKGN1clRvTm9kZUNoaWxkLmlzU2FtZU5vZGUgJiYgY3VyVG9Ob2RlQ2hpbGQuaXNTYW1lTm9kZShjdXJGcm9tTm9kZUNoaWxkKSkge1xuICAgICAgICAgICAgY3VyVG9Ob2RlQ2hpbGQgPSB0b05leHRTaWJsaW5nO1xuICAgICAgICAgICAgY3VyRnJvbU5vZGVDaGlsZCA9IGZyb21OZXh0U2libGluZztcbiAgICAgICAgICAgIGNvbnRpbnVlIG91dGVyO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGN1ckZyb21Ob2RlS2V5ID0gZ2V0Tm9kZUtleShjdXJGcm9tTm9kZUNoaWxkKTtcblxuICAgICAgICAgIHZhciBjdXJGcm9tTm9kZVR5cGUgPSBjdXJGcm9tTm9kZUNoaWxkLm5vZGVUeXBlO1xuXG4gICAgICAgICAgLy8gdGhpcyBtZWFucyBpZiB0aGUgY3VyRnJvbU5vZGVDaGlsZCBkb2VzbnQgaGF2ZSBhIG1hdGNoIHdpdGggdGhlIGN1clRvTm9kZUNoaWxkXG4gICAgICAgICAgdmFyIGlzQ29tcGF0aWJsZSA9IHVuZGVmaW5lZDtcblxuICAgICAgICAgIGlmIChjdXJGcm9tTm9kZVR5cGUgPT09IGN1clRvTm9kZUNoaWxkLm5vZGVUeXBlKSB7XG4gICAgICAgICAgICBpZiAoY3VyRnJvbU5vZGVUeXBlID09PSBFTEVNRU5UX05PREUpIHtcbiAgICAgICAgICAgICAgLy8gQm90aCBub2RlcyBiZWluZyBjb21wYXJlZCBhcmUgRWxlbWVudCBub2Rlc1xuXG4gICAgICAgICAgICAgIGlmIChjdXJUb05vZGVLZXkpIHtcbiAgICAgICAgICAgICAgICAvLyBUaGUgdGFyZ2V0IG5vZGUgaGFzIGEga2V5IHNvIHdlIHdhbnQgdG8gbWF0Y2ggaXQgdXAgd2l0aCB0aGUgY29ycmVjdCBlbGVtZW50XG4gICAgICAgICAgICAgICAgLy8gaW4gdGhlIG9yaWdpbmFsIERPTSB0cmVlXG4gICAgICAgICAgICAgICAgaWYgKGN1clRvTm9kZUtleSAhPT0gY3VyRnJvbU5vZGVLZXkpIHtcbiAgICAgICAgICAgICAgICAgIC8vIFRoZSBjdXJyZW50IGVsZW1lbnQgaW4gdGhlIG9yaWdpbmFsIERPTSB0cmVlIGRvZXMgbm90IGhhdmUgYSBtYXRjaGluZyBrZXkgc29cbiAgICAgICAgICAgICAgICAgIC8vIGxldCdzIGNoZWNrIG91ciBsb29rdXAgdG8gc2VlIGlmIHRoZXJlIGlzIGEgbWF0Y2hpbmcgZWxlbWVudCBpbiB0aGUgb3JpZ2luYWxcbiAgICAgICAgICAgICAgICAgIC8vIERPTSB0cmVlXG4gICAgICAgICAgICAgICAgICBpZiAoKG1hdGNoaW5nRnJvbUVsID0gZnJvbU5vZGVzTG9va3VwW2N1clRvTm9kZUtleV0pKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmcm9tTmV4dFNpYmxpbmcgPT09IG1hdGNoaW5nRnJvbUVsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgLy8gU3BlY2lhbCBjYXNlIGZvciBzaW5nbGUgZWxlbWVudCByZW1vdmFscy4gVG8gYXZvaWQgcmVtb3ZpbmcgdGhlIG9yaWdpbmFsXG4gICAgICAgICAgICAgICAgICAgICAgLy8gRE9NIG5vZGUgb3V0IG9mIHRoZSB0cmVlIChzaW5jZSB0aGF0IGNhbiBicmVhayBDU1MgdHJhbnNpdGlvbnMsIGV0Yy4pLFxuICAgICAgICAgICAgICAgICAgICAgIC8vIHdlIHdpbGwgaW5zdGVhZCBkaXNjYXJkIHRoZSBjdXJyZW50IG5vZGUgYW5kIHdhaXQgdW50aWwgdGhlIG5leHRcbiAgICAgICAgICAgICAgICAgICAgICAvLyBpdGVyYXRpb24gdG8gcHJvcGVybHkgbWF0Y2ggdXAgdGhlIGtleWVkIHRhcmdldCBlbGVtZW50IHdpdGggaXRzIG1hdGNoaW5nXG4gICAgICAgICAgICAgICAgICAgICAgLy8gZWxlbWVudCBpbiB0aGUgb3JpZ2luYWwgdHJlZVxuICAgICAgICAgICAgICAgICAgICAgIGlzQ29tcGF0aWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgIC8vIFdlIGZvdW5kIGEgbWF0Y2hpbmcga2V5ZWQgZWxlbWVudCBzb21ld2hlcmUgaW4gdGhlIG9yaWdpbmFsIERPTSB0cmVlLlxuICAgICAgICAgICAgICAgICAgICAgIC8vIExldCdzIG1vdmUgdGhlIG9yaWdpbmFsIERPTSBub2RlIGludG8gdGhlIGN1cnJlbnQgcG9zaXRpb24gYW5kIG1vcnBoXG4gICAgICAgICAgICAgICAgICAgICAgLy8gaXQuXG5cbiAgICAgICAgICAgICAgICAgICAgICAvLyBOT1RFOiBXZSB1c2UgaW5zZXJ0QmVmb3JlIGluc3RlYWQgb2YgcmVwbGFjZUNoaWxkIGJlY2F1c2Ugd2Ugd2FudCB0byBnbyB0aHJvdWdoXG4gICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIGByZW1vdmVOb2RlKClgIGZ1bmN0aW9uIGZvciB0aGUgbm9kZSB0aGF0IGlzIGJlaW5nIGRpc2NhcmRlZCBzbyB0aGF0XG4gICAgICAgICAgICAgICAgICAgICAgLy8gYWxsIGxpZmVjeWNsZSBob29rcyBhcmUgY29ycmVjdGx5IGludm9rZWRcbiAgICAgICAgICAgICAgICAgICAgICBmcm9tRWwuaW5zZXJ0QmVmb3JlKG1hdGNoaW5nRnJvbUVsLCBjdXJGcm9tTm9kZUNoaWxkKTtcblxuICAgICAgICAgICAgICAgICAgICAgIC8vIGZyb21OZXh0U2libGluZyA9IGN1ckZyb21Ob2RlQ2hpbGQubmV4dFNpYmxpbmc7XG5cbiAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VyRnJvbU5vZGVLZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpbmNlIHRoZSBub2RlIGlzIGtleWVkIGl0IG1pZ2h0IGJlIG1hdGNoZWQgdXAgbGF0ZXIgc28gd2UgZGVmZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoZSBhY3R1YWwgcmVtb3ZhbCB0byBsYXRlclxuICAgICAgICAgICAgICAgICAgICAgICAgYWRkS2V5ZWRSZW1vdmFsKGN1ckZyb21Ob2RlS2V5KTtcbiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTk9URTogd2Ugc2tpcCBuZXN0ZWQga2V5ZWQgbm9kZXMgZnJvbSBiZWluZyByZW1vdmVkIHNpbmNlIHRoZXJlIGlzXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICBzdGlsbCBhIGNoYW5jZSB0aGV5IHdpbGwgYmUgbWF0Y2hlZCB1cCBsYXRlclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlTm9kZShjdXJGcm9tTm9kZUNoaWxkLCBmcm9tRWwsIHRydWUgLyogc2tpcCBrZXllZCBub2RlcyAqLyk7XG4gICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgY3VyRnJvbU5vZGVDaGlsZCA9IG1hdGNoaW5nRnJvbUVsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBUaGUgbm9kZXMgYXJlIG5vdCBjb21wYXRpYmxlIHNpbmNlIHRoZSBcInRvXCIgbm9kZSBoYXMgYSBrZXkgYW5kIHRoZXJlXG4gICAgICAgICAgICAgICAgICAgIC8vIGlzIG5vIG1hdGNoaW5nIGtleWVkIG5vZGUgaW4gdGhlIHNvdXJjZSB0cmVlXG4gICAgICAgICAgICAgICAgICAgIGlzQ29tcGF0aWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChjdXJGcm9tTm9kZUtleSkge1xuICAgICAgICAgICAgICAgIC8vIFRoZSBvcmlnaW5hbCBoYXMgYSBrZXlcbiAgICAgICAgICAgICAgICBpc0NvbXBhdGlibGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGlzQ29tcGF0aWJsZSA9IGlzQ29tcGF0aWJsZSAhPT0gZmFsc2UgJiYgY29tcGFyZU5vZGVOYW1lcyhjdXJGcm9tTm9kZUNoaWxkLCBjdXJUb05vZGVDaGlsZCk7XG4gICAgICAgICAgICAgIGlmIChpc0NvbXBhdGlibGUpIHtcbiAgICAgICAgICAgICAgICAvLyBXZSBmb3VuZCBjb21wYXRpYmxlIERPTSBlbGVtZW50cyBzbyB0cmFuc2Zvcm1cbiAgICAgICAgICAgICAgICAvLyB0aGUgY3VycmVudCBcImZyb21cIiBub2RlIHRvIG1hdGNoIHRoZSBjdXJyZW50XG4gICAgICAgICAgICAgICAgLy8gdGFyZ2V0IERPTSBub2RlLlxuICAgICAgICAgICAgICAgIC8vIE1PUlBIXG4gICAgICAgICAgICAgICAgbW9ycGhFbChjdXJGcm9tTm9kZUNoaWxkLCBjdXJUb05vZGVDaGlsZCk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSBlbHNlIGlmIChjdXJGcm9tTm9kZVR5cGUgPT09IFRFWFRfTk9ERSB8fCBjdXJGcm9tTm9kZVR5cGUgPT0gQ09NTUVOVF9OT0RFKSB7XG4gICAgICAgICAgICAgIC8vIEJvdGggbm9kZXMgYmVpbmcgY29tcGFyZWQgYXJlIFRleHQgb3IgQ29tbWVudCBub2Rlc1xuICAgICAgICAgICAgICBpc0NvbXBhdGlibGUgPSB0cnVlO1xuICAgICAgICAgICAgICAvLyBTaW1wbHkgdXBkYXRlIG5vZGVWYWx1ZSBvbiB0aGUgb3JpZ2luYWwgbm9kZSB0b1xuICAgICAgICAgICAgICAvLyBjaGFuZ2UgdGhlIHRleHQgdmFsdWVcbiAgICAgICAgICAgICAgaWYgKGN1ckZyb21Ob2RlQ2hpbGQubm9kZVZhbHVlICE9PSBjdXJUb05vZGVDaGlsZC5ub2RlVmFsdWUpIHtcbiAgICAgICAgICAgICAgICBjdXJGcm9tTm9kZUNoaWxkLm5vZGVWYWx1ZSA9IGN1clRvTm9kZUNoaWxkLm5vZGVWYWx1ZTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGlzQ29tcGF0aWJsZSkge1xuICAgICAgICAgICAgLy8gQWR2YW5jZSBib3RoIHRoZSBcInRvXCIgY2hpbGQgYW5kIHRoZSBcImZyb21cIiBjaGlsZCBzaW5jZSB3ZSBmb3VuZCBhIG1hdGNoXG4gICAgICAgICAgICAvLyBOb3RoaW5nIGVsc2UgdG8gZG8gYXMgd2UgYWxyZWFkeSByZWN1cnNpdmVseSBjYWxsZWQgbW9ycGhDaGlsZHJlbiBhYm92ZVxuICAgICAgICAgICAgY3VyVG9Ob2RlQ2hpbGQgPSB0b05leHRTaWJsaW5nO1xuICAgICAgICAgICAgY3VyRnJvbU5vZGVDaGlsZCA9IGZyb21OZXh0U2libGluZztcbiAgICAgICAgICAgIGNvbnRpbnVlIG91dGVyO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIE5vIGNvbXBhdGlibGUgbWF0Y2ggc28gcmVtb3ZlIHRoZSBvbGQgbm9kZSBmcm9tIHRoZSBET00gYW5kIGNvbnRpbnVlIHRyeWluZyB0byBmaW5kIGFcbiAgICAgICAgICAvLyBtYXRjaCBpbiB0aGUgb3JpZ2luYWwgRE9NLiBIb3dldmVyLCB3ZSBvbmx5IGRvIHRoaXMgaWYgdGhlIGZyb20gbm9kZSBpcyBub3Qga2V5ZWRcbiAgICAgICAgICAvLyBzaW5jZSBpdCBpcyBwb3NzaWJsZSB0aGF0IGEga2V5ZWQgbm9kZSBtaWdodCBtYXRjaCB1cCB3aXRoIGEgbm9kZSBzb21ld2hlcmUgZWxzZSBpbiB0aGVcbiAgICAgICAgICAvLyB0YXJnZXQgdHJlZSBhbmQgd2UgZG9uJ3Qgd2FudCB0byBkaXNjYXJkIGl0IGp1c3QgeWV0IHNpbmNlIGl0IHN0aWxsIG1pZ2h0IGZpbmQgYVxuICAgICAgICAgIC8vIGhvbWUgaW4gdGhlIGZpbmFsIERPTSB0cmVlLiBBZnRlciBldmVyeXRoaW5nIGlzIGRvbmUgd2Ugd2lsbCByZW1vdmUgYW55IGtleWVkIG5vZGVzXG4gICAgICAgICAgLy8gdGhhdCBkaWRuJ3QgZmluZCBhIGhvbWVcbiAgICAgICAgICBpZiAoY3VyRnJvbU5vZGVLZXkpIHtcbiAgICAgICAgICAgIC8vIFNpbmNlIHRoZSBub2RlIGlzIGtleWVkIGl0IG1pZ2h0IGJlIG1hdGNoZWQgdXAgbGF0ZXIgc28gd2UgZGVmZXJcbiAgICAgICAgICAgIC8vIHRoZSBhY3R1YWwgcmVtb3ZhbCB0byBsYXRlclxuICAgICAgICAgICAgYWRkS2V5ZWRSZW1vdmFsKGN1ckZyb21Ob2RlS2V5KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gTk9URTogd2Ugc2tpcCBuZXN0ZWQga2V5ZWQgbm9kZXMgZnJvbSBiZWluZyByZW1vdmVkIHNpbmNlIHRoZXJlIGlzXG4gICAgICAgICAgICAvLyAgICAgICBzdGlsbCBhIGNoYW5jZSB0aGV5IHdpbGwgYmUgbWF0Y2hlZCB1cCBsYXRlclxuICAgICAgICAgICAgcmVtb3ZlTm9kZShjdXJGcm9tTm9kZUNoaWxkLCBmcm9tRWwsIHRydWUgLyogc2tpcCBrZXllZCBub2RlcyAqLyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY3VyRnJvbU5vZGVDaGlsZCA9IGZyb21OZXh0U2libGluZztcbiAgICAgICAgfSAvLyBFTkQ6IHdoaWxlKGN1ckZyb21Ob2RlQ2hpbGQpIHt9XG5cbiAgICAgICAgLy8gSWYgd2UgZ290IHRoaXMgZmFyIHRoZW4gd2UgZGlkIG5vdCBmaW5kIGEgY2FuZGlkYXRlIG1hdGNoIGZvclxuICAgICAgICAvLyBvdXIgXCJ0byBub2RlXCIgYW5kIHdlIGV4aGF1c3RlZCBhbGwgb2YgdGhlIGNoaWxkcmVuIFwiZnJvbVwiXG4gICAgICAgIC8vIG5vZGVzLiBUaGVyZWZvcmUsIHdlIHdpbGwganVzdCBhcHBlbmQgdGhlIGN1cnJlbnQgXCJ0b1wiIG5vZGVcbiAgICAgICAgLy8gdG8gdGhlIGVuZFxuICAgICAgICBpZiAoY3VyVG9Ob2RlS2V5ICYmIChtYXRjaGluZ0Zyb21FbCA9IGZyb21Ob2Rlc0xvb2t1cFtjdXJUb05vZGVLZXldKSAmJiBjb21wYXJlTm9kZU5hbWVzKG1hdGNoaW5nRnJvbUVsLCBjdXJUb05vZGVDaGlsZCkpIHtcbiAgICAgICAgICAvLyBNT1JQSFxuICAgICAgICAgIGlmKCFza2lwRnJvbSl7IGFkZENoaWxkKGZyb21FbCwgbWF0Y2hpbmdGcm9tRWwpOyB9XG4gICAgICAgICAgbW9ycGhFbChtYXRjaGluZ0Zyb21FbCwgY3VyVG9Ob2RlQ2hpbGQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciBvbkJlZm9yZU5vZGVBZGRlZFJlc3VsdCA9IG9uQmVmb3JlTm9kZUFkZGVkKGN1clRvTm9kZUNoaWxkKTtcbiAgICAgICAgICBpZiAob25CZWZvcmVOb2RlQWRkZWRSZXN1bHQgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICBpZiAob25CZWZvcmVOb2RlQWRkZWRSZXN1bHQpIHtcbiAgICAgICAgICAgICAgY3VyVG9Ob2RlQ2hpbGQgPSBvbkJlZm9yZU5vZGVBZGRlZFJlc3VsdDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGN1clRvTm9kZUNoaWxkLmFjdHVhbGl6ZSkge1xuICAgICAgICAgICAgICBjdXJUb05vZGVDaGlsZCA9IGN1clRvTm9kZUNoaWxkLmFjdHVhbGl6ZShmcm9tRWwub3duZXJEb2N1bWVudCB8fCBkb2MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYWRkQ2hpbGQoZnJvbUVsLCBjdXJUb05vZGVDaGlsZCk7XG4gICAgICAgICAgICBoYW5kbGVOb2RlQWRkZWQoY3VyVG9Ob2RlQ2hpbGQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGN1clRvTm9kZUNoaWxkID0gdG9OZXh0U2libGluZztcbiAgICAgICAgY3VyRnJvbU5vZGVDaGlsZCA9IGZyb21OZXh0U2libGluZztcbiAgICAgIH1cblxuICAgICAgY2xlYW51cEZyb21FbChmcm9tRWwsIGN1ckZyb21Ob2RlQ2hpbGQsIGN1ckZyb21Ob2RlS2V5KTtcblxuICAgICAgdmFyIHNwZWNpYWxFbEhhbmRsZXIgPSBzcGVjaWFsRWxIYW5kbGVyc1tmcm9tRWwubm9kZU5hbWVdO1xuICAgICAgaWYgKHNwZWNpYWxFbEhhbmRsZXIpIHtcbiAgICAgICAgc3BlY2lhbEVsSGFuZGxlcihmcm9tRWwsIHRvRWwpO1xuICAgICAgfVxuICAgIH0gLy8gRU5EOiBtb3JwaENoaWxkcmVuKC4uLilcblxuICAgIHZhciBtb3JwaGVkTm9kZSA9IGZyb21Ob2RlO1xuICAgIHZhciBtb3JwaGVkTm9kZVR5cGUgPSBtb3JwaGVkTm9kZS5ub2RlVHlwZTtcbiAgICB2YXIgdG9Ob2RlVHlwZSA9IHRvTm9kZS5ub2RlVHlwZTtcblxuICAgIGlmICghY2hpbGRyZW5Pbmx5KSB7XG4gICAgICAvLyBIYW5kbGUgdGhlIGNhc2Ugd2hlcmUgd2UgYXJlIGdpdmVuIHR3byBET00gbm9kZXMgdGhhdCBhcmUgbm90XG4gICAgICAvLyBjb21wYXRpYmxlIChlLmcuIDxkaXY+IC0tPiA8c3Bhbj4gb3IgPGRpdj4gLS0+IFRFWFQpXG4gICAgICBpZiAobW9ycGhlZE5vZGVUeXBlID09PSBFTEVNRU5UX05PREUpIHtcbiAgICAgICAgaWYgKHRvTm9kZVR5cGUgPT09IEVMRU1FTlRfTk9ERSkge1xuICAgICAgICAgIGlmICghY29tcGFyZU5vZGVOYW1lcyhmcm9tTm9kZSwgdG9Ob2RlKSkge1xuICAgICAgICAgICAgb25Ob2RlRGlzY2FyZGVkKGZyb21Ob2RlKTtcbiAgICAgICAgICAgIG1vcnBoZWROb2RlID0gbW92ZUNoaWxkcmVuKGZyb21Ob2RlLCBjcmVhdGVFbGVtZW50TlModG9Ob2RlLm5vZGVOYW1lLCB0b05vZGUubmFtZXNwYWNlVVJJKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIEdvaW5nIGZyb20gYW4gZWxlbWVudCBub2RlIHRvIGEgdGV4dCBub2RlXG4gICAgICAgICAgbW9ycGhlZE5vZGUgPSB0b05vZGU7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAobW9ycGhlZE5vZGVUeXBlID09PSBURVhUX05PREUgfHwgbW9ycGhlZE5vZGVUeXBlID09PSBDT01NRU5UX05PREUpIHsgLy8gVGV4dCBvciBjb21tZW50IG5vZGVcbiAgICAgICAgaWYgKHRvTm9kZVR5cGUgPT09IG1vcnBoZWROb2RlVHlwZSkge1xuICAgICAgICAgIGlmIChtb3JwaGVkTm9kZS5ub2RlVmFsdWUgIT09IHRvTm9kZS5ub2RlVmFsdWUpIHtcbiAgICAgICAgICAgIG1vcnBoZWROb2RlLm5vZGVWYWx1ZSA9IHRvTm9kZS5ub2RlVmFsdWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIG1vcnBoZWROb2RlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIFRleHQgbm9kZSB0byBzb21ldGhpbmcgZWxzZVxuICAgICAgICAgIG1vcnBoZWROb2RlID0gdG9Ob2RlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKG1vcnBoZWROb2RlID09PSB0b05vZGUpIHtcbiAgICAgIC8vIFRoZSBcInRvIG5vZGVcIiB3YXMgbm90IGNvbXBhdGlibGUgd2l0aCB0aGUgXCJmcm9tIG5vZGVcIiBzbyB3ZSBoYWQgdG9cbiAgICAgIC8vIHRvc3Mgb3V0IHRoZSBcImZyb20gbm9kZVwiIGFuZCB1c2UgdGhlIFwidG8gbm9kZVwiXG4gICAgICBvbk5vZGVEaXNjYXJkZWQoZnJvbU5vZGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodG9Ob2RlLmlzU2FtZU5vZGUgJiYgdG9Ob2RlLmlzU2FtZU5vZGUobW9ycGhlZE5vZGUpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgbW9ycGhFbChtb3JwaGVkTm9kZSwgdG9Ob2RlLCBjaGlsZHJlbk9ubHkpO1xuXG4gICAgICAvLyBXZSBub3cgbmVlZCB0byBsb29wIG92ZXIgYW55IGtleWVkIG5vZGVzIHRoYXQgbWlnaHQgbmVlZCB0byBiZVxuICAgICAgLy8gcmVtb3ZlZC4gV2Ugb25seSBkbyB0aGUgcmVtb3ZhbCBpZiB3ZSBrbm93IHRoYXQgdGhlIGtleWVkIG5vZGVcbiAgICAgIC8vIG5ldmVyIGZvdW5kIGEgbWF0Y2guIFdoZW4gYSBrZXllZCBub2RlIGlzIG1hdGNoZWQgdXAgd2UgcmVtb3ZlXG4gICAgICAvLyBpdCBvdXQgb2YgZnJvbU5vZGVzTG9va3VwIGFuZCB3ZSB1c2UgZnJvbU5vZGVzTG9va3VwIHRvIGRldGVybWluZVxuICAgICAgLy8gaWYgYSBrZXllZCBub2RlIGhhcyBiZWVuIG1hdGNoZWQgdXAgb3Igbm90XG4gICAgICBpZiAoa2V5ZWRSZW1vdmFsTGlzdCkge1xuICAgICAgICBmb3IgKHZhciBpPTAsIGxlbj1rZXllZFJlbW92YWxMaXN0Lmxlbmd0aDsgaTxsZW47IGkrKykge1xuICAgICAgICAgIHZhciBlbFRvUmVtb3ZlID0gZnJvbU5vZGVzTG9va3VwW2tleWVkUmVtb3ZhbExpc3RbaV1dO1xuICAgICAgICAgIGlmIChlbFRvUmVtb3ZlKSB7XG4gICAgICAgICAgICByZW1vdmVOb2RlKGVsVG9SZW1vdmUsIGVsVG9SZW1vdmUucGFyZW50Tm9kZSwgZmFsc2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICghY2hpbGRyZW5Pbmx5ICYmIG1vcnBoZWROb2RlICE9PSBmcm9tTm9kZSAmJiBmcm9tTm9kZS5wYXJlbnROb2RlKSB7XG4gICAgICBpZiAobW9ycGhlZE5vZGUuYWN0dWFsaXplKSB7XG4gICAgICAgIG1vcnBoZWROb2RlID0gbW9ycGhlZE5vZGUuYWN0dWFsaXplKGZyb21Ob2RlLm93bmVyRG9jdW1lbnQgfHwgZG9jKTtcbiAgICAgIH1cbiAgICAgIC8vIElmIHdlIGhhZCB0byBzd2FwIG91dCB0aGUgZnJvbSBub2RlIHdpdGggYSBuZXcgbm9kZSBiZWNhdXNlIHRoZSBvbGRcbiAgICAgIC8vIG5vZGUgd2FzIG5vdCBjb21wYXRpYmxlIHdpdGggdGhlIHRhcmdldCBub2RlIHRoZW4gd2UgbmVlZCB0b1xuICAgICAgLy8gcmVwbGFjZSB0aGUgb2xkIERPTSBub2RlIGluIHRoZSBvcmlnaW5hbCBET00gdHJlZS4gVGhpcyBpcyBvbmx5XG4gICAgICAvLyBwb3NzaWJsZSBpZiB0aGUgb3JpZ2luYWwgRE9NIG5vZGUgd2FzIHBhcnQgb2YgYSBET00gdHJlZSB3aGljaFxuICAgICAgLy8gd2Uga25vdyBpcyB0aGUgY2FzZSBpZiBpdCBoYXMgYSBwYXJlbnQgbm9kZS5cbiAgICAgIGZyb21Ob2RlLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKG1vcnBoZWROb2RlLCBmcm9tTm9kZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG1vcnBoZWROb2RlO1xuICB9O1xufVxuXG52YXIgbW9ycGhkb20gPSBtb3JwaGRvbUZhY3RvcnkobW9ycGhBdHRycyk7XG5cbmV4cG9ydCBkZWZhdWx0IG1vcnBoZG9tO1xuIiwgImltcG9ydCB7XG4gIFBIWF9DT01QT05FTlQsXG4gIFBIWF9ESVNBQkxFX1dJVEgsXG4gIFBIWF9GRUVEQkFDS19GT1IsXG4gIFBIWF9QUlVORSxcbiAgUEhYX1JPT1RfSUQsXG4gIFBIWF9TRVNTSU9OLFxuICBQSFhfU0tJUCxcbiAgUEhYX1NUQVRJQyxcbiAgUEhYX1RSSUdHRVJfQUNUSU9OLFxuICBQSFhfVVBEQVRFLFxuICBQSFhfU1RSRUFNLFxufSBmcm9tIFwiLi9jb25zdGFudHNcIlxuXG5pbXBvcnQge1xuICBkZXRlY3REdXBsaWNhdGVJZHMsXG4gIGlzQ2lkXG59IGZyb20gXCIuL3V0aWxzXCJcblxuaW1wb3J0IERPTSBmcm9tIFwiLi9kb21cIlxuaW1wb3J0IERPTVBvc3RNb3JwaFJlc3RvcmVyIGZyb20gXCIuL2RvbV9wb3N0X21vcnBoX3Jlc3RvcmVyXCJcbmltcG9ydCBtb3JwaGRvbSBmcm9tIFwibW9ycGhkb21cIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBET01QYXRjaCB7XG4gIHN0YXRpYyBwYXRjaEVsKGZyb21FbCwgdG9FbCwgYWN0aXZlRWxlbWVudCl7XG4gICAgbW9ycGhkb20oZnJvbUVsLCB0b0VsLCB7XG4gICAgICBjaGlsZHJlbk9ubHk6IGZhbHNlLFxuICAgICAgb25CZWZvcmVFbFVwZGF0ZWQ6IChmcm9tRWwsIHRvRWwpID0+IHtcbiAgICAgICAgaWYoYWN0aXZlRWxlbWVudCAmJiBhY3RpdmVFbGVtZW50LmlzU2FtZU5vZGUoZnJvbUVsKSAmJiBET00uaXNGb3JtSW5wdXQoZnJvbUVsKSl7XG4gICAgICAgICAgRE9NLm1lcmdlRm9jdXNlZElucHV0KGZyb21FbCwgdG9FbClcbiAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICBjb25zdHJ1Y3Rvcih2aWV3LCBjb250YWluZXIsIGlkLCBodG1sLCBzdHJlYW1zLCB0YXJnZXRDSUQpe1xuICAgIHRoaXMudmlldyA9IHZpZXdcbiAgICB0aGlzLmxpdmVTb2NrZXQgPSB2aWV3LmxpdmVTb2NrZXRcbiAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lclxuICAgIHRoaXMuaWQgPSBpZFxuICAgIHRoaXMucm9vdElEID0gdmlldy5yb290LmlkXG4gICAgdGhpcy5odG1sID0gaHRtbFxuICAgIHRoaXMuc3RyZWFtcyA9IHN0cmVhbXNcbiAgICB0aGlzLnN0cmVhbUluc2VydHMgPSB7fVxuICAgIHRoaXMudGFyZ2V0Q0lEID0gdGFyZ2V0Q0lEXG4gICAgdGhpcy5jaWRQYXRjaCA9IGlzQ2lkKHRoaXMudGFyZ2V0Q0lEKVxuICAgIHRoaXMucGVuZGluZ1JlbW92ZXMgPSBbXVxuICAgIHRoaXMucGh4UmVtb3ZlID0gdGhpcy5saXZlU29ja2V0LmJpbmRpbmcoXCJyZW1vdmVcIilcbiAgICB0aGlzLmNhbGxiYWNrcyA9IHtcbiAgICAgIGJlZm9yZWFkZGVkOiBbXSwgYmVmb3JldXBkYXRlZDogW10sIGJlZm9yZXBoeENoaWxkQWRkZWQ6IFtdLFxuICAgICAgYWZ0ZXJhZGRlZDogW10sIGFmdGVydXBkYXRlZDogW10sIGFmdGVyZGlzY2FyZGVkOiBbXSwgYWZ0ZXJwaHhDaGlsZEFkZGVkOiBbXSxcbiAgICAgIGFmdGVydHJhbnNpdGlvbnNEaXNjYXJkZWQ6IFtdXG4gICAgfVxuICB9XG5cbiAgYmVmb3JlKGtpbmQsIGNhbGxiYWNrKXsgdGhpcy5jYWxsYmFja3NbYGJlZm9yZSR7a2luZH1gXS5wdXNoKGNhbGxiYWNrKSB9XG4gIGFmdGVyKGtpbmQsIGNhbGxiYWNrKXsgdGhpcy5jYWxsYmFja3NbYGFmdGVyJHtraW5kfWBdLnB1c2goY2FsbGJhY2spIH1cblxuICB0cmFja0JlZm9yZShraW5kLCAuLi5hcmdzKXtcbiAgICB0aGlzLmNhbGxiYWNrc1tgYmVmb3JlJHtraW5kfWBdLmZvckVhY2goY2FsbGJhY2sgPT4gY2FsbGJhY2soLi4uYXJncykpXG4gIH1cblxuICB0cmFja0FmdGVyKGtpbmQsIC4uLmFyZ3Mpe1xuICAgIHRoaXMuY2FsbGJhY2tzW2BhZnRlciR7a2luZH1gXS5mb3JFYWNoKGNhbGxiYWNrID0+IGNhbGxiYWNrKC4uLmFyZ3MpKVxuICB9XG5cbiAgbWFya1BydW5hYmxlQ29udGVudEZvclJlbW92YWwoKXtcbiAgICBsZXQgcGh4VXBkYXRlID0gdGhpcy5saXZlU29ja2V0LmJpbmRpbmcoUEhYX1VQREFURSlcbiAgICBET00uYWxsKHRoaXMuY29udGFpbmVyLCBgWyR7cGh4VXBkYXRlfT0ke1BIWF9TVFJFQU19XWAsIGVsID0+IGVsLmlubmVySFRNTCA9IFwiXCIpXG4gICAgRE9NLmFsbCh0aGlzLmNvbnRhaW5lciwgYFske3BoeFVwZGF0ZX09YXBwZW5kXSA+ICosIFske3BoeFVwZGF0ZX09cHJlcGVuZF0gPiAqYCwgZWwgPT4ge1xuICAgICAgZWwuc2V0QXR0cmlidXRlKFBIWF9QUlVORSwgXCJcIilcbiAgICB9KVxuICB9XG5cbiAgcGVyZm9ybSgpe1xuICAgIGxldCB7dmlldywgbGl2ZVNvY2tldCwgY29udGFpbmVyLCBodG1sfSA9IHRoaXNcbiAgICBsZXQgdGFyZ2V0Q29udGFpbmVyID0gdGhpcy5pc0NJRFBhdGNoKCkgPyB0aGlzLnRhcmdldENJRENvbnRhaW5lcihodG1sKSA6IGNvbnRhaW5lclxuICAgIGlmKHRoaXMuaXNDSURQYXRjaCgpICYmICF0YXJnZXRDb250YWluZXIpeyByZXR1cm4gfVxuXG4gICAgbGV0IGZvY3VzZWQgPSBsaXZlU29ja2V0LmdldEFjdGl2ZUVsZW1lbnQoKVxuICAgIGxldCB7c2VsZWN0aW9uU3RhcnQsIHNlbGVjdGlvbkVuZH0gPSBmb2N1c2VkICYmIERPTS5oYXNTZWxlY3Rpb25SYW5nZShmb2N1c2VkKSA/IGZvY3VzZWQgOiB7fVxuICAgIGxldCBwaHhVcGRhdGUgPSBsaXZlU29ja2V0LmJpbmRpbmcoUEhYX1VQREFURSlcbiAgICBsZXQgcGh4RmVlZGJhY2tGb3IgPSBsaXZlU29ja2V0LmJpbmRpbmcoUEhYX0ZFRURCQUNLX0ZPUilcbiAgICBsZXQgZGlzYWJsZVdpdGggPSBsaXZlU29ja2V0LmJpbmRpbmcoUEhYX0RJU0FCTEVfV0lUSClcbiAgICBsZXQgcGh4VHJpZ2dlckV4dGVybmFsID0gbGl2ZVNvY2tldC5iaW5kaW5nKFBIWF9UUklHR0VSX0FDVElPTilcbiAgICBsZXQgYWRkZWQgPSBbXVxuICAgIGxldCB1cGRhdGVzID0gW11cbiAgICBsZXQgYXBwZW5kUHJlcGVuZFVwZGF0ZXMgPSBbXVxuXG4gICAgbGV0IGV4dGVybmFsRm9ybVRyaWdnZXJlZCA9IG51bGxcblxuICAgIGxldCBkaWZmSFRNTCA9IGxpdmVTb2NrZXQudGltZShcInByZW1vcnBoIGNvbnRhaW5lciBwcmVwXCIsICgpID0+IHtcbiAgICAgIHJldHVybiB0aGlzLmJ1aWxkRGlmZkhUTUwoY29udGFpbmVyLCBodG1sLCBwaHhVcGRhdGUsIHRhcmdldENvbnRhaW5lcilcbiAgICB9KVxuXG4gICAgdGhpcy50cmFja0JlZm9yZShcImFkZGVkXCIsIGNvbnRhaW5lcilcbiAgICB0aGlzLnRyYWNrQmVmb3JlKFwidXBkYXRlZFwiLCBjb250YWluZXIsIGNvbnRhaW5lcilcblxuICAgIGxpdmVTb2NrZXQudGltZShcIm1vcnBoZG9tXCIsICgpID0+IHtcbiAgICAgIHRoaXMuc3RyZWFtcy5mb3JFYWNoKChbaW5zZXJ0cywgZGVsZXRlSWRzXSkgPT4ge1xuICAgICAgICB0aGlzLnN0cmVhbUluc2VydHMgPSBPYmplY3QuYXNzaWduKHRoaXMuc3RyZWFtSW5zZXJ0cywgaW5zZXJ0cylcbiAgICAgICAgZGVsZXRlSWRzLmZvckVhY2goaWQgPT4ge1xuICAgICAgICAgIGxldCBjaGlsZCA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKGBbaWQ9XCIke2lkfVwiXWApXG4gICAgICAgICAgaWYoY2hpbGQpe1xuICAgICAgICAgICAgaWYoIXRoaXMubWF5YmVQZW5kaW5nUmVtb3ZlKGNoaWxkKSl7XG4gICAgICAgICAgICAgIGNoaWxkLnJlbW92ZSgpXG4gICAgICAgICAgICAgIHRoaXMub25Ob2RlRGlzY2FyZGVkKGNoaWxkKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgIH0pXG5cbiAgICAgIG1vcnBoZG9tKHRhcmdldENvbnRhaW5lciwgZGlmZkhUTUwsIHtcbiAgICAgICAgY2hpbGRyZW5Pbmx5OiB0YXJnZXRDb250YWluZXIuZ2V0QXR0cmlidXRlKFBIWF9DT01QT05FTlQpID09PSBudWxsLFxuICAgICAgICBnZXROb2RlS2V5OiAobm9kZSkgPT4ge1xuICAgICAgICAgIHJldHVybiBET00uaXNQaHhEZXN0cm95ZWQobm9kZSkgPyBudWxsIDogbm9kZS5pZFxuICAgICAgICB9LFxuICAgICAgICAvLyBza2lwIGluZGV4aW5nIGZyb20gY2hpbGRyZW4gd2hlbiBjb250YWluZXIgaXMgc3RyZWFtXG4gICAgICAgIHNraXBGcm9tQ2hpbGRyZW46IChmcm9tKSA9PiB7IHJldHVybiBmcm9tLmdldEF0dHJpYnV0ZShwaHhVcGRhdGUpID09PSBQSFhfU1RSRUFNIH0sXG4gICAgICAgIC8vIHRlbGwgbW9ycGhkb20gaG93IHRvIGFkZCBhIGNoaWxkXG4gICAgICAgIGFkZENoaWxkOiAocGFyZW50LCBjaGlsZCkgPT4ge1xuICAgICAgICAgIGxldCBzdHJlYW1BdCA9IGNoaWxkLmlkID8gdGhpcy5zdHJlYW1JbnNlcnRzW2NoaWxkLmlkXSA6IHVuZGVmaW5lZFxuICAgICAgICAgIGlmKHN0cmVhbUF0ID09PSB1bmRlZmluZWQpIHsgcmV0dXJuIHBhcmVudC5hcHBlbmRDaGlsZChjaGlsZCkgfVxuXG4gICAgICAgICAgLy8gc3RyZWFtaW5nXG4gICAgICAgICAgaWYoc3RyZWFtQXQgPT09IDApe1xuICAgICAgICAgICAgcGFyZW50Lmluc2VydEFkamFjZW50RWxlbWVudChcImFmdGVyYmVnaW5cIiwgY2hpbGQpXG4gICAgICAgICAgfSBlbHNlIGlmKHN0cmVhbUF0ID09PSAtMSl7XG4gICAgICAgICAgICBwYXJlbnQuYXBwZW5kQ2hpbGQoY2hpbGQpXG4gICAgICAgICAgfSBlbHNlIGlmKHN0cmVhbUF0ID4gMCl7XG4gICAgICAgICAgICBsZXQgc2libGluZyA9IEFycmF5LmZyb20ocGFyZW50LmNoaWxkcmVuKVtzdHJlYW1BdF1cbiAgICAgICAgICAgIHBhcmVudC5pbnNlcnRCZWZvcmUoY2hpbGQsIHNpYmxpbmcpXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBvbkJlZm9yZU5vZGVBZGRlZDogKGVsKSA9PiB7XG4gICAgICAgICAgdGhpcy50cmFja0JlZm9yZShcImFkZGVkXCIsIGVsKVxuICAgICAgICAgIHJldHVybiBlbFxuICAgICAgICB9LFxuICAgICAgICBvbk5vZGVBZGRlZDogKGVsKSA9PiB7XG4gICAgICAgICAgLy8gaGFjayB0byBmaXggU2FmYXJpIGhhbmRsaW5nIG9mIGltZyBzcmNzZXQgYW5kIHZpZGVvIHRhZ3NcbiAgICAgICAgICBpZihlbCBpbnN0YW5jZW9mIEhUTUxJbWFnZUVsZW1lbnQgJiYgZWwuc3Jjc2V0KXtcbiAgICAgICAgICAgIGVsLnNyY3NldCA9IGVsLnNyY3NldFxuICAgICAgICAgIH0gZWxzZSBpZihlbCBpbnN0YW5jZW9mIEhUTUxWaWRlb0VsZW1lbnQgJiYgZWwuYXV0b3BsYXkpe1xuICAgICAgICAgICAgZWwucGxheSgpXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmKERPTS5pc05vd1RyaWdnZXJGb3JtRXh0ZXJuYWwoZWwsIHBoeFRyaWdnZXJFeHRlcm5hbCkpe1xuICAgICAgICAgICAgZXh0ZXJuYWxGb3JtVHJpZ2dlcmVkID0gZWxcbiAgICAgICAgICB9XG4gICAgICAgICAgLy9pbnB1dCBoYW5kbGluZ1xuICAgICAgICAgIERPTS5kaXNjYXJkRXJyb3IodGFyZ2V0Q29udGFpbmVyLCBlbCwgcGh4RmVlZGJhY2tGb3IpXG4gICAgICAgICAgLy8gbmVzdGVkIHZpZXcgaGFuZGxpbmdcbiAgICAgICAgICBpZigoRE9NLmlzUGh4Q2hpbGQoZWwpICYmIHZpZXcub3duc0VsZW1lbnQoZWwpKSB8fCBET00uaXNQaHhTdGlja3koZWwpICYmIHZpZXcub3duc0VsZW1lbnQoZWwucGFyZW50Tm9kZSkpe1xuICAgICAgICAgICAgdGhpcy50cmFja0FmdGVyKFwicGh4Q2hpbGRBZGRlZFwiLCBlbClcbiAgICAgICAgICB9XG4gICAgICAgICAgYWRkZWQucHVzaChlbClcbiAgICAgICAgfSxcbiAgICAgICAgb25Ob2RlRGlzY2FyZGVkOiAoZWwpID0+IHRoaXMub25Ob2RlRGlzY2FyZGVkKGVsKSxcbiAgICAgICAgb25CZWZvcmVOb2RlRGlzY2FyZGVkOiAoZWwpID0+IHtcbiAgICAgICAgICBpZihlbC5nZXRBdHRyaWJ1dGUgJiYgZWwuZ2V0QXR0cmlidXRlKFBIWF9QUlVORSkgIT09IG51bGwpeyByZXR1cm4gdHJ1ZSB9XG4gICAgICAgICAgaWYoZWwucGFyZW50RWxlbWVudCAhPT0gbnVsbCAmJiBlbC5pZCAmJlxuICAgICAgICAgICAgIERPTS5pc1BoeFVwZGF0ZShlbC5wYXJlbnRFbGVtZW50LCBwaHhVcGRhdGUsIFtQSFhfU1RSRUFNLCBcImFwcGVuZFwiLCBcInByZXBlbmRcIl0pKXtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZih0aGlzLm1heWJlUGVuZGluZ1JlbW92ZShlbCkpeyByZXR1cm4gZmFsc2UgfVxuICAgICAgICAgIGlmKHRoaXMuc2tpcENJRFNpYmxpbmcoZWwpKXsgcmV0dXJuIGZhbHNlIH1cblxuICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgIH0sXG4gICAgICAgIG9uRWxVcGRhdGVkOiAoZWwpID0+IHtcbiAgICAgICAgICBpZihET00uaXNOb3dUcmlnZ2VyRm9ybUV4dGVybmFsKGVsLCBwaHhUcmlnZ2VyRXh0ZXJuYWwpKXtcbiAgICAgICAgICAgIGV4dGVybmFsRm9ybVRyaWdnZXJlZCA9IGVsXG4gICAgICAgICAgfVxuICAgICAgICAgIHVwZGF0ZXMucHVzaChlbClcbiAgICAgICAgICB0aGlzLm1heWJlUmVPcmRlclN0cmVhbShlbClcbiAgICAgICAgfSxcbiAgICAgICAgb25CZWZvcmVFbFVwZGF0ZWQ6IChmcm9tRWwsIHRvRWwpID0+IHtcbiAgICAgICAgICBET00uY2xlYW5DaGlsZE5vZGVzKHRvRWwsIHBoeFVwZGF0ZSlcbiAgICAgICAgICBpZih0aGlzLnNraXBDSURTaWJsaW5nKHRvRWwpKXsgcmV0dXJuIGZhbHNlIH1cbiAgICAgICAgICBpZihET00uaXNQaHhTdGlja3koZnJvbUVsKSl7IHJldHVybiBmYWxzZSB9XG4gICAgICAgICAgaWYoRE9NLmlzSWdub3JlZChmcm9tRWwsIHBoeFVwZGF0ZSkgfHwgKGZyb21FbC5mb3JtICYmIGZyb21FbC5mb3JtLmlzU2FtZU5vZGUoZXh0ZXJuYWxGb3JtVHJpZ2dlcmVkKSkpe1xuICAgICAgICAgICAgdGhpcy50cmFja0JlZm9yZShcInVwZGF0ZWRcIiwgZnJvbUVsLCB0b0VsKVxuICAgICAgICAgICAgRE9NLm1lcmdlQXR0cnMoZnJvbUVsLCB0b0VsLCB7aXNJZ25vcmVkOiB0cnVlfSlcbiAgICAgICAgICAgIHVwZGF0ZXMucHVzaChmcm9tRWwpXG4gICAgICAgICAgICBET00uYXBwbHlTdGlja3lPcGVyYXRpb25zKGZyb21FbClcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZihmcm9tRWwudHlwZSA9PT0gXCJudW1iZXJcIiAmJiAoZnJvbUVsLnZhbGlkaXR5ICYmIGZyb21FbC52YWxpZGl0eS5iYWRJbnB1dCkpeyByZXR1cm4gZmFsc2UgfVxuICAgICAgICAgIGlmKCFET00uc3luY1BlbmRpbmdSZWYoZnJvbUVsLCB0b0VsLCBkaXNhYmxlV2l0aCkpe1xuICAgICAgICAgICAgaWYoRE9NLmlzVXBsb2FkSW5wdXQoZnJvbUVsKSl7XG4gICAgICAgICAgICAgIHRoaXMudHJhY2tCZWZvcmUoXCJ1cGRhdGVkXCIsIGZyb21FbCwgdG9FbClcbiAgICAgICAgICAgICAgdXBkYXRlcy5wdXNoKGZyb21FbClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIERPTS5hcHBseVN0aWNreU9wZXJhdGlvbnMoZnJvbUVsKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gbmVzdGVkIHZpZXcgaGFuZGxpbmdcbiAgICAgICAgICBpZihET00uaXNQaHhDaGlsZCh0b0VsKSl7XG4gICAgICAgICAgICBsZXQgcHJldlNlc3Npb24gPSBmcm9tRWwuZ2V0QXR0cmlidXRlKFBIWF9TRVNTSU9OKVxuICAgICAgICAgICAgRE9NLm1lcmdlQXR0cnMoZnJvbUVsLCB0b0VsLCB7ZXhjbHVkZTogW1BIWF9TVEFUSUNdfSlcbiAgICAgICAgICAgIGlmKHByZXZTZXNzaW9uICE9PSBcIlwiKXsgZnJvbUVsLnNldEF0dHJpYnV0ZShQSFhfU0VTU0lPTiwgcHJldlNlc3Npb24pIH1cbiAgICAgICAgICAgIGZyb21FbC5zZXRBdHRyaWJ1dGUoUEhYX1JPT1RfSUQsIHRoaXMucm9vdElEKVxuICAgICAgICAgICAgRE9NLmFwcGx5U3RpY2t5T3BlcmF0aW9ucyhmcm9tRWwpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBpbnB1dCBoYW5kbGluZ1xuICAgICAgICAgIERPTS5jb3B5UHJpdmF0ZXModG9FbCwgZnJvbUVsKVxuICAgICAgICAgIERPTS5kaXNjYXJkRXJyb3IodGFyZ2V0Q29udGFpbmVyLCB0b0VsLCBwaHhGZWVkYmFja0ZvcilcblxuICAgICAgICAgIGxldCBpc0ZvY3VzZWRGb3JtRWwgPSBmb2N1c2VkICYmIGZyb21FbC5pc1NhbWVOb2RlKGZvY3VzZWQpICYmIERPTS5pc0Zvcm1JbnB1dChmcm9tRWwpXG4gICAgICAgICAgaWYoaXNGb2N1c2VkRm9ybUVsICYmIGZyb21FbC50eXBlICE9PSBcImhpZGRlblwiKXtcbiAgICAgICAgICAgIHRoaXMudHJhY2tCZWZvcmUoXCJ1cGRhdGVkXCIsIGZyb21FbCwgdG9FbClcbiAgICAgICAgICAgIERPTS5tZXJnZUZvY3VzZWRJbnB1dChmcm9tRWwsIHRvRWwpXG4gICAgICAgICAgICBET00uc3luY0F0dHJzVG9Qcm9wcyhmcm9tRWwpXG4gICAgICAgICAgICB1cGRhdGVzLnB1c2goZnJvbUVsKVxuICAgICAgICAgICAgRE9NLmFwcGx5U3RpY2t5T3BlcmF0aW9ucyhmcm9tRWwpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYoRE9NLmlzUGh4VXBkYXRlKHRvRWwsIHBoeFVwZGF0ZSwgW1wiYXBwZW5kXCIsIFwicHJlcGVuZFwiXSkpe1xuICAgICAgICAgICAgICBhcHBlbmRQcmVwZW5kVXBkYXRlcy5wdXNoKG5ldyBET01Qb3N0TW9ycGhSZXN0b3Jlcihmcm9tRWwsIHRvRWwsIHRvRWwuZ2V0QXR0cmlidXRlKHBoeFVwZGF0ZSkpKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgRE9NLnN5bmNBdHRyc1RvUHJvcHModG9FbClcbiAgICAgICAgICAgIERPTS5hcHBseVN0aWNreU9wZXJhdGlvbnModG9FbClcbiAgICAgICAgICAgIHRoaXMudHJhY2tCZWZvcmUoXCJ1cGRhdGVkXCIsIGZyb21FbCwgdG9FbClcbiAgICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH0pXG5cbiAgICBpZihsaXZlU29ja2V0LmlzRGVidWdFbmFibGVkKCkpeyBkZXRlY3REdXBsaWNhdGVJZHMoKSB9XG5cbiAgICBpZihhcHBlbmRQcmVwZW5kVXBkYXRlcy5sZW5ndGggPiAwKXtcbiAgICAgIGxpdmVTb2NrZXQudGltZShcInBvc3QtbW9ycGggYXBwZW5kL3ByZXBlbmQgcmVzdG9yYXRpb25cIiwgKCkgPT4ge1xuICAgICAgICBhcHBlbmRQcmVwZW5kVXBkYXRlcy5mb3JFYWNoKHVwZGF0ZSA9PiB1cGRhdGUucGVyZm9ybSgpKVxuICAgICAgfSlcbiAgICB9XG5cbiAgICBsaXZlU29ja2V0LnNpbGVuY2VFdmVudHMoKCkgPT4gRE9NLnJlc3RvcmVGb2N1cyhmb2N1c2VkLCBzZWxlY3Rpb25TdGFydCwgc2VsZWN0aW9uRW5kKSlcbiAgICBET00uZGlzcGF0Y2hFdmVudChkb2N1bWVudCwgXCJwaHg6dXBkYXRlXCIpXG4gICAgYWRkZWQuZm9yRWFjaChlbCA9PiB0aGlzLnRyYWNrQWZ0ZXIoXCJhZGRlZFwiLCBlbCkpXG4gICAgdXBkYXRlcy5mb3JFYWNoKGVsID0+IHRoaXMudHJhY2tBZnRlcihcInVwZGF0ZWRcIiwgZWwpKVxuXG4gICAgdGhpcy50cmFuc2l0aW9uUGVuZGluZ1JlbW92ZXMoKVxuXG4gICAgaWYoZXh0ZXJuYWxGb3JtVHJpZ2dlcmVkKXtcbiAgICAgIGxpdmVTb2NrZXQudW5sb2FkKClcbiAgICAgIGV4dGVybmFsRm9ybVRyaWdnZXJlZC5zdWJtaXQoKVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgb25Ob2RlRGlzY2FyZGVkKGVsKXtcbiAgICAvLyBuZXN0ZWQgdmlldyBoYW5kbGluZ1xuICAgIGlmKERPTS5pc1BoeENoaWxkKGVsKSB8fCBET00uaXNQaHhTdGlja3koZWwpKXsgdGhpcy5saXZlU29ja2V0LmRlc3Ryb3lWaWV3QnlFbChlbCkgfVxuICAgIHRoaXMudHJhY2tBZnRlcihcImRpc2NhcmRlZFwiLCBlbClcbiAgfVxuXG4gIG1heWJlUGVuZGluZ1JlbW92ZShub2RlKXtcbiAgICBpZihub2RlLmdldEF0dHJpYnV0ZSAmJiBub2RlLmdldEF0dHJpYnV0ZSh0aGlzLnBoeFJlbW92ZSkgIT09IG51bGwpe1xuICAgICAgdGhpcy5wZW5kaW5nUmVtb3Zlcy5wdXNoKG5vZGUpXG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gIH1cblxuICBtYXliZVJlT3JkZXJTdHJlYW0oZWwpe1xuICAgIGxldCBzdHJlYW1BdCA9IGVsLmlkID8gdGhpcy5zdHJlYW1JbnNlcnRzW2VsLmlkXSA6IHVuZGVmaW5lZFxuICAgIGlmKHN0cmVhbUF0ID09PSB1bmRlZmluZWQpeyByZXR1cm4gfVxuXG4gICAgaWYoc3RyZWFtQXQgPT09IDApe1xuICAgICAgZWwucGFyZW50RWxlbWVudC5pbnNlcnRCZWZvcmUoZWwsIGVsLnBhcmVudEVsZW1lbnQuZmlyc3RFbGVtZW50Q2hpbGQpXG4gICAgfSBlbHNlIGlmKHN0cmVhbUF0ID4gMCl7XG4gICAgICBsZXQgY2hpbGRyZW4gPSBBcnJheS5mcm9tKGVsLnBhcmVudEVsZW1lbnQuY2hpbGRyZW4pXG4gICAgICBsZXQgb2xkSW5kZXggPSBjaGlsZHJlbi5pbmRleE9mKGVsKVxuICAgICAgaWYoc3RyZWFtQXQgPj0gY2hpbGRyZW4ubGVuZ3RoIC0gMSl7XG4gICAgICAgIGVsLnBhcmVudEVsZW1lbnQuYXBwZW5kQ2hpbGQoZWwpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsZXQgc2libGluZyA9IGNoaWxkcmVuW3N0cmVhbUF0XVxuICAgICAgICBpZihvbGRJbmRleCA+IHN0cmVhbUF0KXtcbiAgICAgICAgICBlbC5wYXJlbnRFbGVtZW50Lmluc2VydEJlZm9yZShlbCwgc2libGluZylcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBlbC5wYXJlbnRFbGVtZW50Lmluc2VydEJlZm9yZShlbCwgc2libGluZy5uZXh0RWxlbWVudFNpYmxpbmcpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICB0cmFuc2l0aW9uUGVuZGluZ1JlbW92ZXMoKXtcbiAgICBsZXQge3BlbmRpbmdSZW1vdmVzLCBsaXZlU29ja2V0fSA9IHRoaXNcbiAgICBpZihwZW5kaW5nUmVtb3Zlcy5sZW5ndGggPiAwKXtcbiAgICAgIGxpdmVTb2NrZXQudHJhbnNpdGlvblJlbW92ZXMocGVuZGluZ1JlbW92ZXMpXG4gICAgICBsaXZlU29ja2V0LnJlcXVlc3RET01VcGRhdGUoKCkgPT4ge1xuICAgICAgICBwZW5kaW5nUmVtb3Zlcy5mb3JFYWNoKGVsID0+IHtcbiAgICAgICAgICBsZXQgY2hpbGQgPSBET00uZmlyc3RQaHhDaGlsZChlbClcbiAgICAgICAgICBpZihjaGlsZCl7IGxpdmVTb2NrZXQuZGVzdHJveVZpZXdCeUVsKGNoaWxkKSB9XG4gICAgICAgICAgZWwucmVtb3ZlKClcbiAgICAgICAgfSlcbiAgICAgICAgdGhpcy50cmFja0FmdGVyKFwidHJhbnNpdGlvbnNEaXNjYXJkZWRcIiwgcGVuZGluZ1JlbW92ZXMpXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIGlzQ0lEUGF0Y2goKXsgcmV0dXJuIHRoaXMuY2lkUGF0Y2ggfVxuXG4gIHNraXBDSURTaWJsaW5nKGVsKXtcbiAgICByZXR1cm4gZWwubm9kZVR5cGUgPT09IE5vZGUuRUxFTUVOVF9OT0RFICYmIGVsLmdldEF0dHJpYnV0ZShQSFhfU0tJUCkgIT09IG51bGxcbiAgfVxuXG4gIHRhcmdldENJRENvbnRhaW5lcihodG1sKXtcbiAgICBpZighdGhpcy5pc0NJRFBhdGNoKCkpeyByZXR1cm4gfVxuICAgIGxldCBbZmlyc3QsIC4uLnJlc3RdID0gRE9NLmZpbmRDb21wb25lbnROb2RlTGlzdCh0aGlzLmNvbnRhaW5lciwgdGhpcy50YXJnZXRDSUQpXG4gICAgaWYocmVzdC5sZW5ndGggPT09IDAgJiYgRE9NLmNoaWxkTm9kZUxlbmd0aChodG1sKSA9PT0gMSl7XG4gICAgICByZXR1cm4gZmlyc3RcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZpcnN0ICYmIGZpcnN0LnBhcmVudE5vZGVcbiAgICB9XG4gIH1cblxuICAvLyBidWlsZHMgSFRNTCBmb3IgbW9ycGhkb20gcGF0Y2hcbiAgLy8gLSBmb3IgZnVsbCBwYXRjaGVzIG9mIExpdmVWaWV3IG9yIGEgY29tcG9uZW50IHdpdGggYSBzaW5nbGVcbiAgLy8gICByb290IG5vZGUsIHNpbXBseSByZXR1cm5zIHRoZSBIVE1MXG4gIC8vIC0gZm9yIHBhdGNoZXMgb2YgYSBjb21wb25lbnQgd2l0aCBtdWx0aXBsZSByb290IG5vZGVzLCB0aGVcbiAgLy8gICBwYXJlbnQgbm9kZSBiZWNvbWVzIHRoZSB0YXJnZXQgY29udGFpbmVyIGFuZCBub24tY29tcG9uZW50XG4gIC8vICAgc2libGluZ3MgYXJlIG1hcmtlZCBhcyBza2lwLlxuICBidWlsZERpZmZIVE1MKGNvbnRhaW5lciwgaHRtbCwgcGh4VXBkYXRlLCB0YXJnZXRDb250YWluZXIpe1xuICAgIGxldCBpc0NJRFBhdGNoID0gdGhpcy5pc0NJRFBhdGNoKClcbiAgICBsZXQgaXNDSURXaXRoU2luZ2xlUm9vdCA9IGlzQ0lEUGF0Y2ggJiYgdGFyZ2V0Q29udGFpbmVyLmdldEF0dHJpYnV0ZShQSFhfQ09NUE9ORU5UKSA9PT0gdGhpcy50YXJnZXRDSUQudG9TdHJpbmcoKVxuICAgIGlmKCFpc0NJRFBhdGNoIHx8IGlzQ0lEV2l0aFNpbmdsZVJvb3Qpe1xuICAgICAgcmV0dXJuIGh0bWxcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gY29tcG9uZW50IHBhdGNoIHdpdGggbXVsdGlwbGUgQ0lEIHJvb3RzXG4gICAgICBsZXQgZGlmZkNvbnRhaW5lciA9IG51bGxcbiAgICAgIGxldCB0ZW1wbGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZW1wbGF0ZVwiKVxuICAgICAgZGlmZkNvbnRhaW5lciA9IERPTS5jbG9uZU5vZGUodGFyZ2V0Q29udGFpbmVyKVxuICAgICAgbGV0IFtmaXJzdENvbXBvbmVudCwgLi4ucmVzdF0gPSBET00uZmluZENvbXBvbmVudE5vZGVMaXN0KGRpZmZDb250YWluZXIsIHRoaXMudGFyZ2V0Q0lEKVxuICAgICAgdGVtcGxhdGUuaW5uZXJIVE1MID0gaHRtbFxuICAgICAgcmVzdC5mb3JFYWNoKGVsID0+IGVsLnJlbW92ZSgpKVxuICAgICAgQXJyYXkuZnJvbShkaWZmQ29udGFpbmVyLmNoaWxkTm9kZXMpLmZvckVhY2goY2hpbGQgPT4ge1xuICAgICAgICAvLyB3ZSBjYW4gb25seSBza2lwIHRyYWNrYWJsZSBub2RlcyB3aXRoIGFuIElEXG4gICAgICAgIGlmKGNoaWxkLmlkICYmIGNoaWxkLm5vZGVUeXBlID09PSBOb2RlLkVMRU1FTlRfTk9ERSAmJiBjaGlsZC5nZXRBdHRyaWJ1dGUoUEhYX0NPTVBPTkVOVCkgIT09IHRoaXMudGFyZ2V0Q0lELnRvU3RyaW5nKCkpe1xuICAgICAgICAgIGNoaWxkLnNldEF0dHJpYnV0ZShQSFhfU0tJUCwgXCJcIilcbiAgICAgICAgICBjaGlsZC5pbm5lckhUTUwgPSBcIlwiXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICBBcnJheS5mcm9tKHRlbXBsYXRlLmNvbnRlbnQuY2hpbGROb2RlcykuZm9yRWFjaChlbCA9PiBkaWZmQ29udGFpbmVyLmluc2VydEJlZm9yZShlbCwgZmlyc3RDb21wb25lbnQpKVxuICAgICAgZmlyc3RDb21wb25lbnQucmVtb3ZlKClcbiAgICAgIHJldHVybiBkaWZmQ29udGFpbmVyLm91dGVySFRNTFxuICAgIH1cbiAgfVxuXG4gIGluZGV4T2YocGFyZW50LCBjaGlsZCl7IHJldHVybiBBcnJheS5mcm9tKHBhcmVudC5jaGlsZHJlbikuaW5kZXhPZihjaGlsZCkgfVxufVxuIiwgImltcG9ydCB7XG4gIENPTVBPTkVOVFMsXG4gIERZTkFNSUNTLFxuICBURU1QTEFURVMsXG4gIEVWRU5UUyxcbiAgUEhYX0NPTVBPTkVOVCxcbiAgUEhYX1NLSVAsXG4gIFJFUExZLFxuICBTVEFUSUMsXG4gIFRJVExFLFxuICBTVFJFQU0sXG59IGZyb20gXCIuL2NvbnN0YW50c1wiXG5cbmltcG9ydCB7XG4gIGlzT2JqZWN0LFxuICBsb2dFcnJvcixcbiAgaXNDaWQsXG59IGZyb20gXCIuL3V0aWxzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUmVuZGVyZWQge1xuICBzdGF0aWMgZXh0cmFjdChkaWZmKXtcbiAgICBsZXQge1tSRVBMWV06IHJlcGx5LCBbRVZFTlRTXTogZXZlbnRzLCBbVElUTEVdOiB0aXRsZX0gPSBkaWZmXG4gICAgZGVsZXRlIGRpZmZbUkVQTFldXG4gICAgZGVsZXRlIGRpZmZbRVZFTlRTXVxuICAgIGRlbGV0ZSBkaWZmW1RJVExFXVxuICAgIHJldHVybiB7ZGlmZiwgdGl0bGUsIHJlcGx5OiByZXBseSB8fCBudWxsLCBldmVudHM6IGV2ZW50cyB8fCBbXX1cbiAgfVxuXG4gIGNvbnN0cnVjdG9yKHZpZXdJZCwgcmVuZGVyZWQpe1xuICAgIHRoaXMudmlld0lkID0gdmlld0lkXG4gICAgdGhpcy5yZW5kZXJlZCA9IHt9XG4gICAgdGhpcy5tZXJnZURpZmYocmVuZGVyZWQpXG4gIH1cblxuICBwYXJlbnRWaWV3SWQoKXsgcmV0dXJuIHRoaXMudmlld0lkIH1cblxuICB0b1N0cmluZyhvbmx5Q2lkcyl7XG4gICAgbGV0IFtzdHIsIHN0cmVhbXNdID0gdGhpcy5yZWN1cnNpdmVUb1N0cmluZyh0aGlzLnJlbmRlcmVkLCB0aGlzLnJlbmRlcmVkW0NPTVBPTkVOVFNdLCBvbmx5Q2lkcylcbiAgICByZXR1cm4gW3N0ciwgc3RyZWFtc11cbiAgfVxuXG4gIHJlY3Vyc2l2ZVRvU3RyaW5nKHJlbmRlcmVkLCBjb21wb25lbnRzID0gcmVuZGVyZWRbQ09NUE9ORU5UU10sIG9ubHlDaWRzKXtcbiAgICBvbmx5Q2lkcyA9IG9ubHlDaWRzID8gbmV3IFNldChvbmx5Q2lkcykgOiBudWxsXG4gICAgbGV0IG91dHB1dCA9IHtidWZmZXI6IFwiXCIsIGNvbXBvbmVudHM6IGNvbXBvbmVudHMsIG9ubHlDaWRzOiBvbmx5Q2lkcywgc3RyZWFtczogbmV3IFNldCgpfVxuICAgIHRoaXMudG9PdXRwdXRCdWZmZXIocmVuZGVyZWQsIG51bGwsIG91dHB1dClcbiAgICByZXR1cm4gW291dHB1dC5idWZmZXIsIG91dHB1dC5zdHJlYW1zXVxuICB9XG5cbiAgY29tcG9uZW50Q0lEcyhkaWZmKXsgcmV0dXJuIE9iamVjdC5rZXlzKGRpZmZbQ09NUE9ORU5UU10gfHwge30pLm1hcChpID0+IHBhcnNlSW50KGkpKSB9XG5cbiAgaXNDb21wb25lbnRPbmx5RGlmZihkaWZmKXtcbiAgICBpZighZGlmZltDT01QT05FTlRTXSl7IHJldHVybiBmYWxzZSB9XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKGRpZmYpLmxlbmd0aCA9PT0gMVxuICB9XG5cbiAgZ2V0Q29tcG9uZW50KGRpZmYsIGNpZCl7IHJldHVybiBkaWZmW0NPTVBPTkVOVFNdW2NpZF0gfVxuXG4gIG1lcmdlRGlmZihkaWZmKXtcbiAgICBsZXQgbmV3YyA9IGRpZmZbQ09NUE9ORU5UU11cbiAgICBsZXQgY2FjaGUgPSB7fVxuICAgIGRlbGV0ZSBkaWZmW0NPTVBPTkVOVFNdXG4gICAgdGhpcy5yZW5kZXJlZCA9IHRoaXMubXV0YWJsZU1lcmdlKHRoaXMucmVuZGVyZWQsIGRpZmYpXG4gICAgdGhpcy5yZW5kZXJlZFtDT01QT05FTlRTXSA9IHRoaXMucmVuZGVyZWRbQ09NUE9ORU5UU10gfHwge31cblxuICAgIGlmKG5ld2Mpe1xuICAgICAgbGV0IG9sZGMgPSB0aGlzLnJlbmRlcmVkW0NPTVBPTkVOVFNdXG5cbiAgICAgIGZvcihsZXQgY2lkIGluIG5ld2Mpe1xuICAgICAgICBuZXdjW2NpZF0gPSB0aGlzLmNhY2hlZEZpbmRDb21wb25lbnQoY2lkLCBuZXdjW2NpZF0sIG9sZGMsIG5ld2MsIGNhY2hlKVxuICAgICAgfVxuXG4gICAgICBmb3IobGV0IGNpZCBpbiBuZXdjKXsgb2xkY1tjaWRdID0gbmV3Y1tjaWRdIH1cbiAgICAgIGRpZmZbQ09NUE9ORU5UU10gPSBuZXdjXG4gICAgfVxuICB9XG5cbiAgY2FjaGVkRmluZENvbXBvbmVudChjaWQsIGNkaWZmLCBvbGRjLCBuZXdjLCBjYWNoZSl7XG4gICAgaWYoY2FjaGVbY2lkXSl7XG4gICAgICByZXR1cm4gY2FjaGVbY2lkXVxuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgbmRpZmYsIHN0YXQsIHNjaWQgPSBjZGlmZltTVEFUSUNdXG5cbiAgICAgIGlmKGlzQ2lkKHNjaWQpKXtcbiAgICAgICAgbGV0IHRkaWZmXG5cbiAgICAgICAgaWYoc2NpZCA+IDApe1xuICAgICAgICAgIHRkaWZmID0gdGhpcy5jYWNoZWRGaW5kQ29tcG9uZW50KHNjaWQsIG5ld2Nbc2NpZF0sIG9sZGMsIG5ld2MsIGNhY2hlKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRkaWZmID0gb2xkY1stc2NpZF1cbiAgICAgICAgfVxuXG4gICAgICAgIHN0YXQgPSB0ZGlmZltTVEFUSUNdXG4gICAgICAgIG5kaWZmID0gdGhpcy5jbG9uZU1lcmdlKHRkaWZmLCBjZGlmZilcbiAgICAgICAgbmRpZmZbU1RBVElDXSA9IHN0YXRcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5kaWZmID0gY2RpZmZbU1RBVElDXSAhPT0gdW5kZWZpbmVkID8gY2RpZmYgOiB0aGlzLmNsb25lTWVyZ2Uob2xkY1tjaWRdIHx8IHt9LCBjZGlmZilcbiAgICAgIH1cblxuICAgICAgY2FjaGVbY2lkXSA9IG5kaWZmXG4gICAgICByZXR1cm4gbmRpZmZcbiAgICB9XG4gIH1cblxuICBtdXRhYmxlTWVyZ2UodGFyZ2V0LCBzb3VyY2Upe1xuICAgIGlmKHNvdXJjZVtTVEFUSUNdICE9PSB1bmRlZmluZWQpe1xuICAgICAgcmV0dXJuIHNvdXJjZVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmRvTXV0YWJsZU1lcmdlKHRhcmdldCwgc291cmNlKVxuICAgICAgcmV0dXJuIHRhcmdldFxuICAgIH1cbiAgfVxuXG4gIGRvTXV0YWJsZU1lcmdlKHRhcmdldCwgc291cmNlKXtcbiAgICBmb3IobGV0IGtleSBpbiBzb3VyY2Upe1xuICAgICAgbGV0IHZhbCA9IHNvdXJjZVtrZXldXG4gICAgICBsZXQgdGFyZ2V0VmFsID0gdGFyZ2V0W2tleV1cbiAgICAgIGxldCBpc09ialZhbCA9IGlzT2JqZWN0KHZhbClcbiAgICAgIGlmKGlzT2JqVmFsICYmIHZhbFtTVEFUSUNdID09PSB1bmRlZmluZWQgJiYgaXNPYmplY3QodGFyZ2V0VmFsKSl7XG4gICAgICAgIHRoaXMuZG9NdXRhYmxlTWVyZ2UodGFyZ2V0VmFsLCB2YWwpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0YXJnZXRba2V5XSA9IHZhbFxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGNsb25lTWVyZ2UodGFyZ2V0LCBzb3VyY2Upe1xuICAgIGxldCBtZXJnZWQgPSB7Li4udGFyZ2V0LCAuLi5zb3VyY2V9XG4gICAgZm9yKGxldCBrZXkgaW4gbWVyZ2VkKXtcbiAgICAgIGxldCB2YWwgPSBzb3VyY2Vba2V5XVxuICAgICAgbGV0IHRhcmdldFZhbCA9IHRhcmdldFtrZXldXG4gICAgICBpZihpc09iamVjdCh2YWwpICYmIHZhbFtTVEFUSUNdID09PSB1bmRlZmluZWQgJiYgaXNPYmplY3QodGFyZ2V0VmFsKSl7XG4gICAgICAgIG1lcmdlZFtrZXldID0gdGhpcy5jbG9uZU1lcmdlKHRhcmdldFZhbCwgdmFsKVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbWVyZ2VkXG4gIH1cblxuICBjb21wb25lbnRUb1N0cmluZyhjaWQpe1xuICAgIGxldCBbc3RyLCBzdHJlYW1zXSA9IHRoaXMucmVjdXJzaXZlQ0lEVG9TdHJpbmcodGhpcy5yZW5kZXJlZFtDT01QT05FTlRTXSwgY2lkKVxuICAgIHJldHVybiBbc3RyLCBzdHJlYW1zXVxuICB9XG5cbiAgcHJ1bmVDSURzKGNpZHMpe1xuICAgIGNpZHMuZm9yRWFjaChjaWQgPT4gZGVsZXRlIHRoaXMucmVuZGVyZWRbQ09NUE9ORU5UU11bY2lkXSlcbiAgfVxuXG4gIC8vIHByaXZhdGVcblxuICBnZXQoKXsgcmV0dXJuIHRoaXMucmVuZGVyZWQgfVxuXG4gIGlzTmV3RmluZ2VycHJpbnQoZGlmZiA9IHt9KXsgcmV0dXJuICEhZGlmZltTVEFUSUNdIH1cblxuICB0ZW1wbGF0ZVN0YXRpYyhwYXJ0LCB0ZW1wbGF0ZXMpe1xuICAgIGlmKHR5cGVvZiAocGFydCkgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgIHJldHVybiB0ZW1wbGF0ZXNbcGFydF1cbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHBhcnRcbiAgICB9XG4gIH1cblxuICB0b091dHB1dEJ1ZmZlcihyZW5kZXJlZCwgdGVtcGxhdGVzLCBvdXRwdXQpe1xuICAgIGlmKHJlbmRlcmVkW0RZTkFNSUNTXSl7IHJldHVybiB0aGlzLmNvbXByZWhlbnNpb25Ub0J1ZmZlcihyZW5kZXJlZCwgdGVtcGxhdGVzLCBvdXRwdXQpIH1cbiAgICBsZXQge1tTVEFUSUNdOiBzdGF0aWNzfSA9IHJlbmRlcmVkXG4gICAgc3RhdGljcyA9IHRoaXMudGVtcGxhdGVTdGF0aWMoc3RhdGljcywgdGVtcGxhdGVzKVxuXG4gICAgb3V0cHV0LmJ1ZmZlciArPSBzdGF0aWNzWzBdXG4gICAgZm9yKGxldCBpID0gMTsgaSA8IHN0YXRpY3MubGVuZ3RoOyBpKyspe1xuICAgICAgdGhpcy5keW5hbWljVG9CdWZmZXIocmVuZGVyZWRbaSAtIDFdLCB0ZW1wbGF0ZXMsIG91dHB1dClcbiAgICAgIG91dHB1dC5idWZmZXIgKz0gc3RhdGljc1tpXVxuICAgIH1cbiAgfVxuXG4gIGNvbXByZWhlbnNpb25Ub0J1ZmZlcihyZW5kZXJlZCwgdGVtcGxhdGVzLCBvdXRwdXQpe1xuICAgIGxldCB7W0RZTkFNSUNTXTogZHluYW1pY3MsIFtTVEFUSUNdOiBzdGF0aWNzLCBbU1RSRUFNXTogc3RyZWFtfSA9IHJlbmRlcmVkXG4gICAgbGV0IFtfaW5zZXJ0cywgZGVsZXRlSWRzXSA9IHN0cmVhbSB8fCBbe30sIFtdXVxuICAgIHN0YXRpY3MgPSB0aGlzLnRlbXBsYXRlU3RhdGljKHN0YXRpY3MsIHRlbXBsYXRlcylcbiAgICBsZXQgY29tcFRlbXBsYXRlcyA9IHRlbXBsYXRlcyB8fCByZW5kZXJlZFtURU1QTEFURVNdXG4gICAgZm9yKGxldCBkID0gMDsgZCA8IGR5bmFtaWNzLmxlbmd0aDsgZCsrKXtcbiAgICAgIGxldCBkeW5hbWljID0gZHluYW1pY3NbZF1cbiAgICAgIG91dHB1dC5idWZmZXIgKz0gc3RhdGljc1swXVxuICAgICAgZm9yKGxldCBpID0gMTsgaSA8IHN0YXRpY3MubGVuZ3RoOyBpKyspe1xuICAgICAgICB0aGlzLmR5bmFtaWNUb0J1ZmZlcihkeW5hbWljW2kgLSAxXSwgY29tcFRlbXBsYXRlcywgb3V0cHV0KVxuICAgICAgICBvdXRwdXQuYnVmZmVyICs9IHN0YXRpY3NbaV1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZihzdHJlYW0gIT09IHVuZGVmaW5lZCAmJiAocmVuZGVyZWRbRFlOQU1JQ1NdLmxlbmd0aCA+IDAgfHwgZGVsZXRlSWRzLmxlbmd0aCA+IDApKXtcbiAgICAgIHJlbmRlcmVkW0RZTkFNSUNTXSA9IFtdXG4gICAgICBvdXRwdXQuc3RyZWFtcy5hZGQoc3RyZWFtKVxuICAgIH1cbiAgfVxuXG4gIGR5bmFtaWNUb0J1ZmZlcihyZW5kZXJlZCwgdGVtcGxhdGVzLCBvdXRwdXQpe1xuICAgIGlmKHR5cGVvZiAocmVuZGVyZWQpID09PSBcIm51bWJlclwiKXtcbiAgICAgIGxldCBbc3RyLCBzdHJlYW1zXSA9IHRoaXMucmVjdXJzaXZlQ0lEVG9TdHJpbmcob3V0cHV0LmNvbXBvbmVudHMsIHJlbmRlcmVkLCBvdXRwdXQub25seUNpZHMpXG4gICAgICBvdXRwdXQuYnVmZmVyICs9IHN0clxuICAgICAgb3V0cHV0LnN0cmVhbXMgPSBuZXcgU2V0KFsuLi5vdXRwdXQuc3RyZWFtcywgLi4uc3RyZWFtc10pXG4gICAgfSBlbHNlIGlmKGlzT2JqZWN0KHJlbmRlcmVkKSl7XG4gICAgICB0aGlzLnRvT3V0cHV0QnVmZmVyKHJlbmRlcmVkLCB0ZW1wbGF0ZXMsIG91dHB1dClcbiAgICB9IGVsc2Uge1xuICAgICAgb3V0cHV0LmJ1ZmZlciArPSByZW5kZXJlZFxuICAgIH1cbiAgfVxuXG4gIHJlY3Vyc2l2ZUNJRFRvU3RyaW5nKGNvbXBvbmVudHMsIGNpZCwgb25seUNpZHMpe1xuICAgIGxldCBjb21wb25lbnQgPSBjb21wb25lbnRzW2NpZF0gfHwgbG9nRXJyb3IoYG5vIGNvbXBvbmVudCBmb3IgQ0lEICR7Y2lkfWAsIGNvbXBvbmVudHMpXG4gICAgbGV0IHRlbXBsYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRlbXBsYXRlXCIpXG4gICAgbGV0IFtodG1sLCBzdHJlYW1zXSA9IHRoaXMucmVjdXJzaXZlVG9TdHJpbmcoY29tcG9uZW50LCBjb21wb25lbnRzLCBvbmx5Q2lkcylcbiAgICB0ZW1wbGF0ZS5pbm5lckhUTUwgPSBodG1sXG4gICAgbGV0IGNvbnRhaW5lciA9IHRlbXBsYXRlLmNvbnRlbnRcbiAgICBsZXQgc2tpcCA9IG9ubHlDaWRzICYmICFvbmx5Q2lkcy5oYXMoY2lkKVxuXG4gICAgbGV0IFtoYXNDaGlsZE5vZGVzLCBoYXNDaGlsZENvbXBvbmVudHNdID1cbiAgICAgIEFycmF5LmZyb20oY29udGFpbmVyLmNoaWxkTm9kZXMpLnJlZHVjZSgoW2hhc05vZGVzLCBoYXNDb21wb25lbnRzXSwgY2hpbGQsIGkpID0+IHtcbiAgICAgICAgaWYoY2hpbGQubm9kZVR5cGUgPT09IE5vZGUuRUxFTUVOVF9OT0RFKXtcbiAgICAgICAgICBpZihjaGlsZC5nZXRBdHRyaWJ1dGUoUEhYX0NPTVBPTkVOVCkpe1xuICAgICAgICAgICAgcmV0dXJuIFtoYXNOb2RlcywgdHJ1ZV1cbiAgICAgICAgICB9XG4gICAgICAgICAgY2hpbGQuc2V0QXR0cmlidXRlKFBIWF9DT01QT05FTlQsIGNpZClcbiAgICAgICAgICBpZighY2hpbGQuaWQpeyBjaGlsZC5pZCA9IGAke3RoaXMucGFyZW50Vmlld0lkKCl9LSR7Y2lkfS0ke2l9YCB9XG4gICAgICAgICAgaWYoc2tpcCl7XG4gICAgICAgICAgICBjaGlsZC5zZXRBdHRyaWJ1dGUoUEhYX1NLSVAsIFwiXCIpXG4gICAgICAgICAgICBjaGlsZC5pbm5lckhUTUwgPSBcIlwiXG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBbdHJ1ZSwgaGFzQ29tcG9uZW50c11cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZihjaGlsZC5ub2RlVmFsdWUudHJpbSgpICE9PSBcIlwiKXtcbiAgICAgICAgICAgIGxvZ0Vycm9yKFwib25seSBIVE1MIGVsZW1lbnQgdGFncyBhcmUgYWxsb3dlZCBhdCB0aGUgcm9vdCBvZiBjb21wb25lbnRzLlxcblxcblwiICtcbiAgICAgICAgICAgICAgYGdvdDogXCIke2NoaWxkLm5vZGVWYWx1ZS50cmltKCl9XCJcXG5cXG5gICtcbiAgICAgICAgICAgICAgXCJ3aXRoaW46XFxuXCIsIHRlbXBsYXRlLmlubmVySFRNTC50cmltKCkpXG4gICAgICAgICAgICBjaGlsZC5yZXBsYWNlV2l0aCh0aGlzLmNyZWF0ZVNwYW4oY2hpbGQubm9kZVZhbHVlLCBjaWQpKVxuICAgICAgICAgICAgcmV0dXJuIFt0cnVlLCBoYXNDb21wb25lbnRzXVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjaGlsZC5yZW1vdmUoKVxuICAgICAgICAgICAgcmV0dXJuIFtoYXNOb2RlcywgaGFzQ29tcG9uZW50c11cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sIFtmYWxzZSwgZmFsc2VdKVxuXG4gICAgaWYoIWhhc0NoaWxkTm9kZXMgJiYgIWhhc0NoaWxkQ29tcG9uZW50cyl7XG4gICAgICBsb2dFcnJvcihcImV4cGVjdGVkIGF0IGxlYXN0IG9uZSBIVE1MIGVsZW1lbnQgdGFnIGluc2lkZSBhIGNvbXBvbmVudCwgYnV0IHRoZSBjb21wb25lbnQgaXMgZW1wdHk6XFxuXCIsXG4gICAgICAgIHRlbXBsYXRlLmlubmVySFRNTC50cmltKCkpXG4gICAgICByZXR1cm4gW3RoaXMuY3JlYXRlU3BhbihcIlwiLCBjaWQpLm91dGVySFRNTCwgc3RyZWFtc11cbiAgICB9IGVsc2UgaWYoIWhhc0NoaWxkTm9kZXMgJiYgaGFzQ2hpbGRDb21wb25lbnRzKXtcbiAgICAgIGxvZ0Vycm9yKFwiZXhwZWN0ZWQgYXQgbGVhc3Qgb25lIEhUTUwgZWxlbWVudCB0YWcgZGlyZWN0bHkgaW5zaWRlIGEgY29tcG9uZW50LCBidXQgb25seSBzdWJjb21wb25lbnRzIHdlcmUgZm91bmQuIEEgY29tcG9uZW50IG11c3QgcmVuZGVyIGF0IGxlYXN0IG9uZSBIVE1MIHRhZyBkaXJlY3RseSBpbnNpZGUgaXRzZWxmLlwiLFxuICAgICAgICB0ZW1wbGF0ZS5pbm5lckhUTUwudHJpbSgpKVxuICAgICAgcmV0dXJuIFt0ZW1wbGF0ZS5pbm5lckhUTUwsIHN0cmVhbXNdXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBbdGVtcGxhdGUuaW5uZXJIVE1MLCBzdHJlYW1zXVxuICAgIH1cbiAgfVxuXG4gIGNyZWF0ZVNwYW4odGV4dCwgY2lkKXtcbiAgICBsZXQgc3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpXG4gICAgc3Bhbi5pbm5lclRleHQgPSB0ZXh0XG4gICAgc3Bhbi5zZXRBdHRyaWJ1dGUoUEhYX0NPTVBPTkVOVCwgY2lkKVxuICAgIHJldHVybiBzcGFuXG4gIH1cbn1cbiIsICJsZXQgdmlld0hvb2tJRCA9IDFcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFZpZXdIb29rIHtcbiAgc3RhdGljIG1ha2VJRCgpeyByZXR1cm4gdmlld0hvb2tJRCsrIH1cbiAgc3RhdGljIGVsZW1lbnRJRChlbCl7IHJldHVybiBlbC5waHhIb29rSWQgfVxuXG4gIGNvbnN0cnVjdG9yKHZpZXcsIGVsLCBjYWxsYmFja3Mpe1xuICAgIHRoaXMuX192aWV3ID0gdmlld1xuICAgIHRoaXMubGl2ZVNvY2tldCA9IHZpZXcubGl2ZVNvY2tldFxuICAgIHRoaXMuX19jYWxsYmFja3MgPSBjYWxsYmFja3NcbiAgICB0aGlzLl9fbGlzdGVuZXJzID0gbmV3IFNldCgpXG4gICAgdGhpcy5fX2lzRGlzY29ubmVjdGVkID0gZmFsc2VcbiAgICB0aGlzLmVsID0gZWxcbiAgICB0aGlzLmVsLnBoeEhvb2tJZCA9IHRoaXMuY29uc3RydWN0b3IubWFrZUlEKClcbiAgICBmb3IobGV0IGtleSBpbiB0aGlzLl9fY2FsbGJhY2tzKXsgdGhpc1trZXldID0gdGhpcy5fX2NhbGxiYWNrc1trZXldIH1cbiAgfVxuXG4gIF9fbW91bnRlZCgpeyB0aGlzLm1vdW50ZWQgJiYgdGhpcy5tb3VudGVkKCkgfVxuICBfX3VwZGF0ZWQoKXsgdGhpcy51cGRhdGVkICYmIHRoaXMudXBkYXRlZCgpIH1cbiAgX19iZWZvcmVVcGRhdGUoKXsgdGhpcy5iZWZvcmVVcGRhdGUgJiYgdGhpcy5iZWZvcmVVcGRhdGUoKSB9XG4gIF9fZGVzdHJveWVkKCl7IHRoaXMuZGVzdHJveWVkICYmIHRoaXMuZGVzdHJveWVkKCkgfVxuICBfX3JlY29ubmVjdGVkKCl7XG4gICAgaWYodGhpcy5fX2lzRGlzY29ubmVjdGVkKXtcbiAgICAgIHRoaXMuX19pc0Rpc2Nvbm5lY3RlZCA9IGZhbHNlXG4gICAgICB0aGlzLnJlY29ubmVjdGVkICYmIHRoaXMucmVjb25uZWN0ZWQoKVxuICAgIH1cbiAgfVxuICBfX2Rpc2Nvbm5lY3RlZCgpe1xuICAgIHRoaXMuX19pc0Rpc2Nvbm5lY3RlZCA9IHRydWVcbiAgICB0aGlzLmRpc2Nvbm5lY3RlZCAmJiB0aGlzLmRpc2Nvbm5lY3RlZCgpXG4gIH1cblxuICBwdXNoRXZlbnQoZXZlbnQsIHBheWxvYWQgPSB7fSwgb25SZXBseSA9IGZ1bmN0aW9uICgpeyB9KXtcbiAgICByZXR1cm4gdGhpcy5fX3ZpZXcucHVzaEhvb2tFdmVudChudWxsLCBldmVudCwgcGF5bG9hZCwgb25SZXBseSlcbiAgfVxuXG4gIHB1c2hFdmVudFRvKHBoeFRhcmdldCwgZXZlbnQsIHBheWxvYWQgPSB7fSwgb25SZXBseSA9IGZ1bmN0aW9uICgpeyB9KXtcbiAgICByZXR1cm4gdGhpcy5fX3ZpZXcud2l0aGluVGFyZ2V0cyhwaHhUYXJnZXQsICh2aWV3LCB0YXJnZXRDdHgpID0+IHtcbiAgICAgIHJldHVybiB2aWV3LnB1c2hIb29rRXZlbnQodGFyZ2V0Q3R4LCBldmVudCwgcGF5bG9hZCwgb25SZXBseSlcbiAgICB9KVxuICB9XG5cbiAgaGFuZGxlRXZlbnQoZXZlbnQsIGNhbGxiYWNrKXtcbiAgICBsZXQgY2FsbGJhY2tSZWYgPSAoY3VzdG9tRXZlbnQsIGJ5cGFzcykgPT4gYnlwYXNzID8gZXZlbnQgOiBjYWxsYmFjayhjdXN0b21FdmVudC5kZXRhaWwpXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoYHBoeDoke2V2ZW50fWAsIGNhbGxiYWNrUmVmKVxuICAgIHRoaXMuX19saXN0ZW5lcnMuYWRkKGNhbGxiYWNrUmVmKVxuICAgIHJldHVybiBjYWxsYmFja1JlZlxuICB9XG5cbiAgcmVtb3ZlSGFuZGxlRXZlbnQoY2FsbGJhY2tSZWYpe1xuICAgIGxldCBldmVudCA9IGNhbGxiYWNrUmVmKG51bGwsIHRydWUpXG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoYHBoeDoke2V2ZW50fWAsIGNhbGxiYWNrUmVmKVxuICAgIHRoaXMuX19saXN0ZW5lcnMuZGVsZXRlKGNhbGxiYWNrUmVmKVxuICB9XG5cbiAgdXBsb2FkKG5hbWUsIGZpbGVzKXtcbiAgICByZXR1cm4gdGhpcy5fX3ZpZXcuZGlzcGF0Y2hVcGxvYWRzKG5hbWUsIGZpbGVzKVxuICB9XG5cbiAgdXBsb2FkVG8ocGh4VGFyZ2V0LCBuYW1lLCBmaWxlcyl7XG4gICAgcmV0dXJuIHRoaXMuX192aWV3LndpdGhpblRhcmdldHMocGh4VGFyZ2V0LCB2aWV3ID0+IHZpZXcuZGlzcGF0Y2hVcGxvYWRzKG5hbWUsIGZpbGVzKSlcbiAgfVxuXG4gIF9fY2xlYW51cF9fKCl7XG4gICAgdGhpcy5fX2xpc3RlbmVycy5mb3JFYWNoKGNhbGxiYWNrUmVmID0+IHRoaXMucmVtb3ZlSGFuZGxlRXZlbnQoY2FsbGJhY2tSZWYpKVxuICB9XG59XG4iLCAiaW1wb3J0IERPTSBmcm9tIFwiLi9kb21cIlxuaW1wb3J0IEFSSUEgZnJvbSBcIi4vYXJpYVwiXG5cbmxldCBmb2N1c1N0YWNrID0gbnVsbFxuXG5sZXQgSlMgPSB7XG4gIGV4ZWMoZXZlbnRUeXBlLCBwaHhFdmVudCwgdmlldywgc291cmNlRWwsIGRlZmF1bHRzKXtcbiAgICBsZXQgW2RlZmF1bHRLaW5kLCBkZWZhdWx0QXJnc10gPSBkZWZhdWx0cyB8fCBbbnVsbCwge31dXG4gICAgbGV0IGNvbW1hbmRzID0gcGh4RXZlbnQuY2hhckF0KDApID09PSBcIltcIiA/XG4gICAgICBKU09OLnBhcnNlKHBoeEV2ZW50KSA6IFtbZGVmYXVsdEtpbmQsIGRlZmF1bHRBcmdzXV1cblxuICAgIGNvbW1hbmRzLmZvckVhY2goKFtraW5kLCBhcmdzXSkgPT4ge1xuICAgICAgaWYoa2luZCA9PT0gZGVmYXVsdEtpbmQgJiYgZGVmYXVsdEFyZ3MuZGF0YSl7XG4gICAgICAgIGFyZ3MuZGF0YSA9IE9iamVjdC5hc3NpZ24oYXJncy5kYXRhIHx8IHt9LCBkZWZhdWx0QXJncy5kYXRhKVxuICAgICAgfVxuICAgICAgdGhpcy5maWx0ZXJUb0Vscyhzb3VyY2VFbCwgYXJncykuZm9yRWFjaChlbCA9PiB7XG4gICAgICAgIHRoaXNbYGV4ZWNfJHtraW5kfWBdKGV2ZW50VHlwZSwgcGh4RXZlbnQsIHZpZXcsIHNvdXJjZUVsLCBlbCwgYXJncylcbiAgICAgIH0pXG4gICAgfSlcbiAgfSxcblxuICBpc1Zpc2libGUoZWwpe1xuICAgIHJldHVybiAhIShlbC5vZmZzZXRXaWR0aCB8fCBlbC5vZmZzZXRIZWlnaHQgfHwgZWwuZ2V0Q2xpZW50UmVjdHMoKS5sZW5ndGggPiAwKVxuICB9LFxuXG4gIC8vIHByaXZhdGVcblxuICAvLyBjb21tYW5kc1xuXG4gIGV4ZWNfZGlzcGF0Y2goZXZlbnRUeXBlLCBwaHhFdmVudCwgdmlldywgc291cmNlRWwsIGVsLCB7dG8sIGV2ZW50LCBkZXRhaWwsIGJ1YmJsZXN9KXtcbiAgICBkZXRhaWwgPSBkZXRhaWwgfHwge31cbiAgICBkZXRhaWwuZGlzcGF0Y2hlciA9IHNvdXJjZUVsXG4gICAgRE9NLmRpc3BhdGNoRXZlbnQoZWwsIGV2ZW50LCB7ZGV0YWlsLCBidWJibGVzfSlcbiAgfSxcblxuICBleGVjX3B1c2goZXZlbnRUeXBlLCBwaHhFdmVudCwgdmlldywgc291cmNlRWwsIGVsLCBhcmdzKXtcbiAgICBpZighdmlldy5pc0Nvbm5lY3RlZCgpKXsgcmV0dXJuIH1cblxuICAgIGxldCB7ZXZlbnQsIGRhdGEsIHRhcmdldCwgcGFnZV9sb2FkaW5nLCBsb2FkaW5nLCB2YWx1ZSwgZGlzcGF0Y2hlcn0gPSBhcmdzXG4gICAgbGV0IHB1c2hPcHRzID0ge2xvYWRpbmcsIHZhbHVlLCB0YXJnZXQsIHBhZ2VfbG9hZGluZzogISFwYWdlX2xvYWRpbmd9XG4gICAgbGV0IHRhcmdldFNyYyA9IGV2ZW50VHlwZSA9PT0gXCJjaGFuZ2VcIiAmJiBkaXNwYXRjaGVyID8gZGlzcGF0Y2hlciA6IHNvdXJjZUVsXG4gICAgbGV0IHBoeFRhcmdldCA9IHRhcmdldCB8fCB0YXJnZXRTcmMuZ2V0QXR0cmlidXRlKHZpZXcuYmluZGluZyhcInRhcmdldFwiKSkgfHwgdGFyZ2V0U3JjXG4gICAgdmlldy53aXRoaW5UYXJnZXRzKHBoeFRhcmdldCwgKHRhcmdldFZpZXcsIHRhcmdldEN0eCkgPT4ge1xuICAgICAgaWYoZXZlbnRUeXBlID09PSBcImNoYW5nZVwiKXtcbiAgICAgICAgbGV0IHtuZXdDaWQsIF90YXJnZXQsIGNhbGxiYWNrfSA9IGFyZ3NcbiAgICAgICAgX3RhcmdldCA9IF90YXJnZXQgfHwgKERPTS5pc0Zvcm1JbnB1dChzb3VyY2VFbCkgPyBzb3VyY2VFbC5uYW1lIDogdW5kZWZpbmVkKVxuICAgICAgICBpZihfdGFyZ2V0KXsgcHVzaE9wdHMuX3RhcmdldCA9IF90YXJnZXQgfVxuICAgICAgICB0YXJnZXRWaWV3LnB1c2hJbnB1dChzb3VyY2VFbCwgdGFyZ2V0Q3R4LCBuZXdDaWQsIGV2ZW50IHx8IHBoeEV2ZW50LCBwdXNoT3B0cywgY2FsbGJhY2spXG4gICAgICB9IGVsc2UgaWYoZXZlbnRUeXBlID09PSBcInN1Ym1pdFwiKXtcbiAgICAgICAgbGV0IHtzdWJtaXR0ZXJ9ID0gYXJnc1xuICAgICAgICB0YXJnZXRWaWV3LnN1Ym1pdEZvcm0oc291cmNlRWwsIHRhcmdldEN0eCwgZXZlbnQgfHwgcGh4RXZlbnQsIHN1Ym1pdHRlciwgcHVzaE9wdHMpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0YXJnZXRWaWV3LnB1c2hFdmVudChldmVudFR5cGUsIHNvdXJjZUVsLCB0YXJnZXRDdHgsIGV2ZW50IHx8IHBoeEV2ZW50LCBkYXRhLCBwdXNoT3B0cylcbiAgICAgIH1cbiAgICB9KVxuICB9LFxuXG4gIGV4ZWNfbmF2aWdhdGUoZXZlbnRUeXBlLCBwaHhFdmVudCwgdmlldywgc291cmNlRWwsIGVsLCB7aHJlZiwgcmVwbGFjZX0pe1xuICAgIHZpZXcubGl2ZVNvY2tldC5oaXN0b3J5UmVkaXJlY3QoaHJlZiwgcmVwbGFjZSA/IFwicmVwbGFjZVwiIDogXCJwdXNoXCIpXG4gIH0sXG5cbiAgZXhlY19wYXRjaChldmVudFR5cGUsIHBoeEV2ZW50LCB2aWV3LCBzb3VyY2VFbCwgZWwsIHtocmVmLCByZXBsYWNlfSl7XG4gICAgdmlldy5saXZlU29ja2V0LnB1c2hIaXN0b3J5UGF0Y2goaHJlZiwgcmVwbGFjZSA/IFwicmVwbGFjZVwiIDogXCJwdXNoXCIsIHNvdXJjZUVsKVxuICB9LFxuXG4gIGV4ZWNfZm9jdXMoZXZlbnRUeXBlLCBwaHhFdmVudCwgdmlldywgc291cmNlRWwsIGVsKXtcbiAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IEFSSUEuYXR0ZW1wdEZvY3VzKGVsKSlcbiAgfSxcblxuICBleGVjX2ZvY3VzX2ZpcnN0KGV2ZW50VHlwZSwgcGh4RXZlbnQsIHZpZXcsIHNvdXJjZUVsLCBlbCl7XG4gICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiBBUklBLmZvY3VzRmlyc3RJbnRlcmFjdGl2ZShlbCkgfHwgQVJJQS5mb2N1c0ZpcnN0KGVsKSlcbiAgfSxcblxuICBleGVjX3B1c2hfZm9jdXMoZXZlbnRUeXBlLCBwaHhFdmVudCwgdmlldywgc291cmNlRWwsIGVsKXtcbiAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IGZvY3VzU3RhY2sgPSBlbCB8fCBzb3VyY2VFbClcbiAgfSxcblxuICBleGVjX3BvcF9mb2N1cyhldmVudFR5cGUsIHBoeEV2ZW50LCB2aWV3LCBzb3VyY2VFbCwgZWwpe1xuICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgaWYoZm9jdXNTdGFjayl7IGZvY3VzU3RhY2suZm9jdXMoKSB9XG4gICAgICBmb2N1c1N0YWNrID0gbnVsbFxuICAgIH0pXG4gIH0sXG5cbiAgZXhlY19hZGRfY2xhc3MoZXZlbnRUeXBlLCBwaHhFdmVudCwgdmlldywgc291cmNlRWwsIGVsLCB7bmFtZXMsIHRyYW5zaXRpb24sIHRpbWV9KXtcbiAgICB0aGlzLmFkZE9yUmVtb3ZlQ2xhc3NlcyhlbCwgbmFtZXMsIFtdLCB0cmFuc2l0aW9uLCB0aW1lLCB2aWV3KVxuICB9LFxuXG4gIGV4ZWNfcmVtb3ZlX2NsYXNzKGV2ZW50VHlwZSwgcGh4RXZlbnQsIHZpZXcsIHNvdXJjZUVsLCBlbCwge25hbWVzLCB0cmFuc2l0aW9uLCB0aW1lfSl7XG4gICAgdGhpcy5hZGRPclJlbW92ZUNsYXNzZXMoZWwsIFtdLCBuYW1lcywgdHJhbnNpdGlvbiwgdGltZSwgdmlldylcbiAgfSxcblxuICBleGVjX3RyYW5zaXRpb24oZXZlbnRUeXBlLCBwaHhFdmVudCwgdmlldywgc291cmNlRWwsIGVsLCB7dGltZSwgdHJhbnNpdGlvbn0pe1xuICAgIHRoaXMuYWRkT3JSZW1vdmVDbGFzc2VzKGVsLCBbXSwgW10sIHRyYW5zaXRpb24sIHRpbWUsIHZpZXcpXG4gIH0sXG5cbiAgZXhlY190b2dnbGUoZXZlbnRUeXBlLCBwaHhFdmVudCwgdmlldywgc291cmNlRWwsIGVsLCB7ZGlzcGxheSwgaW5zLCBvdXRzLCB0aW1lfSl7XG4gICAgdGhpcy50b2dnbGUoZXZlbnRUeXBlLCB2aWV3LCBlbCwgZGlzcGxheSwgaW5zLCBvdXRzLCB0aW1lKVxuICB9LFxuXG4gIGV4ZWNfc2hvdyhldmVudFR5cGUsIHBoeEV2ZW50LCB2aWV3LCBzb3VyY2VFbCwgZWwsIHtkaXNwbGF5LCB0cmFuc2l0aW9uLCB0aW1lfSl7XG4gICAgdGhpcy5zaG93KGV2ZW50VHlwZSwgdmlldywgZWwsIGRpc3BsYXksIHRyYW5zaXRpb24sIHRpbWUpXG4gIH0sXG5cbiAgZXhlY19oaWRlKGV2ZW50VHlwZSwgcGh4RXZlbnQsIHZpZXcsIHNvdXJjZUVsLCBlbCwge2Rpc3BsYXksIHRyYW5zaXRpb24sIHRpbWV9KXtcbiAgICB0aGlzLmhpZGUoZXZlbnRUeXBlLCB2aWV3LCBlbCwgZGlzcGxheSwgdHJhbnNpdGlvbiwgdGltZSlcbiAgfSxcblxuICBleGVjX3NldF9hdHRyKGV2ZW50VHlwZSwgcGh4RXZlbnQsIHZpZXcsIHNvdXJjZUVsLCBlbCwge2F0dHI6IFthdHRyLCB2YWxdfSl7XG4gICAgdGhpcy5zZXRPclJlbW92ZUF0dHJzKGVsLCBbW2F0dHIsIHZhbF1dLCBbXSlcbiAgfSxcblxuICBleGVjX3JlbW92ZV9hdHRyKGV2ZW50VHlwZSwgcGh4RXZlbnQsIHZpZXcsIHNvdXJjZUVsLCBlbCwge2F0dHJ9KXtcbiAgICB0aGlzLnNldE9yUmVtb3ZlQXR0cnMoZWwsIFtdLCBbYXR0cl0pXG4gIH0sXG5cbiAgLy8gdXRpbHMgZm9yIGNvbW1hbmRzXG5cbiAgc2hvdyhldmVudFR5cGUsIHZpZXcsIGVsLCBkaXNwbGF5LCB0cmFuc2l0aW9uLCB0aW1lKXtcbiAgICBpZighdGhpcy5pc1Zpc2libGUoZWwpKXtcbiAgICAgIHRoaXMudG9nZ2xlKGV2ZW50VHlwZSwgdmlldywgZWwsIGRpc3BsYXksIHRyYW5zaXRpb24sIG51bGwsIHRpbWUpXG4gICAgfVxuICB9LFxuXG4gIGhpZGUoZXZlbnRUeXBlLCB2aWV3LCBlbCwgZGlzcGxheSwgdHJhbnNpdGlvbiwgdGltZSl7XG4gICAgaWYodGhpcy5pc1Zpc2libGUoZWwpKXtcbiAgICAgIHRoaXMudG9nZ2xlKGV2ZW50VHlwZSwgdmlldywgZWwsIGRpc3BsYXksIG51bGwsIHRyYW5zaXRpb24sIHRpbWUpXG4gICAgfVxuICB9LFxuXG4gIHRvZ2dsZShldmVudFR5cGUsIHZpZXcsIGVsLCBkaXNwbGF5LCBpbnMsIG91dHMsIHRpbWUpe1xuICAgIGxldCBbaW5DbGFzc2VzLCBpblN0YXJ0Q2xhc3NlcywgaW5FbmRDbGFzc2VzXSA9IGlucyB8fCBbW10sIFtdLCBbXV1cbiAgICBsZXQgW291dENsYXNzZXMsIG91dFN0YXJ0Q2xhc3Nlcywgb3V0RW5kQ2xhc3Nlc10gPSBvdXRzIHx8IFtbXSwgW10sIFtdXVxuICAgIGlmKGluQ2xhc3Nlcy5sZW5ndGggPiAwIHx8IG91dENsYXNzZXMubGVuZ3RoID4gMCl7XG4gICAgICBpZih0aGlzLmlzVmlzaWJsZShlbCkpe1xuICAgICAgICBsZXQgb25TdGFydCA9ICgpID0+IHtcbiAgICAgICAgICB0aGlzLmFkZE9yUmVtb3ZlQ2xhc3NlcyhlbCwgb3V0U3RhcnRDbGFzc2VzLCBpbkNsYXNzZXMuY29uY2F0KGluU3RhcnRDbGFzc2VzKS5jb25jYXQoaW5FbmRDbGFzc2VzKSlcbiAgICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuYWRkT3JSZW1vdmVDbGFzc2VzKGVsLCBvdXRDbGFzc2VzLCBbXSlcbiAgICAgICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gdGhpcy5hZGRPclJlbW92ZUNsYXNzZXMoZWwsIG91dEVuZENsYXNzZXMsIG91dFN0YXJ0Q2xhc3NlcykpXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBlbC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcInBoeDpoaWRlLXN0YXJ0XCIpKVxuICAgICAgICB2aWV3LnRyYW5zaXRpb24odGltZSwgb25TdGFydCwgKCkgPT4ge1xuICAgICAgICAgIHRoaXMuYWRkT3JSZW1vdmVDbGFzc2VzKGVsLCBbXSwgb3V0Q2xhc3Nlcy5jb25jYXQob3V0RW5kQ2xhc3NlcykpXG4gICAgICAgICAgRE9NLnB1dFN0aWNreShlbCwgXCJ0b2dnbGVcIiwgY3VycmVudEVsID0+IGN1cnJlbnRFbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCIpXG4gICAgICAgICAgZWwuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoXCJwaHg6aGlkZS1lbmRcIikpXG4gICAgICAgIH0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZihldmVudFR5cGUgPT09IFwicmVtb3ZlXCIpeyByZXR1cm4gfVxuICAgICAgICBsZXQgb25TdGFydCA9ICgpID0+IHtcbiAgICAgICAgICB0aGlzLmFkZE9yUmVtb3ZlQ2xhc3NlcyhlbCwgaW5TdGFydENsYXNzZXMsIG91dENsYXNzZXMuY29uY2F0KG91dFN0YXJ0Q2xhc3NlcykuY29uY2F0KG91dEVuZENsYXNzZXMpKVxuICAgICAgICAgIGxldCBzdGlja3lEaXNwbGF5ID0gZGlzcGxheSB8fCB0aGlzLmRlZmF1bHREaXNwbGF5KGVsKVxuICAgICAgICAgIERPTS5wdXRTdGlja3koZWwsIFwidG9nZ2xlXCIsIGN1cnJlbnRFbCA9PiBjdXJyZW50RWwuc3R5bGUuZGlzcGxheSA9IHN0aWNreURpc3BsYXkpXG4gICAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmFkZE9yUmVtb3ZlQ2xhc3NlcyhlbCwgaW5DbGFzc2VzLCBbXSlcbiAgICAgICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gdGhpcy5hZGRPclJlbW92ZUNsYXNzZXMoZWwsIGluRW5kQ2xhc3NlcywgaW5TdGFydENsYXNzZXMpKVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgZWwuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoXCJwaHg6c2hvdy1zdGFydFwiKSlcbiAgICAgICAgdmlldy50cmFuc2l0aW9uKHRpbWUsIG9uU3RhcnQsICgpID0+IHtcbiAgICAgICAgICB0aGlzLmFkZE9yUmVtb3ZlQ2xhc3NlcyhlbCwgW10sIGluQ2xhc3Nlcy5jb25jYXQoaW5FbmRDbGFzc2VzKSlcbiAgICAgICAgICBlbC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcInBoeDpzaG93LWVuZFwiKSlcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYodGhpcy5pc1Zpc2libGUoZWwpKXtcbiAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgICAgZWwuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoXCJwaHg6aGlkZS1zdGFydFwiKSlcbiAgICAgICAgICBET00ucHV0U3RpY2t5KGVsLCBcInRvZ2dsZVwiLCBjdXJyZW50RWwgPT4gY3VycmVudEVsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIilcbiAgICAgICAgICBlbC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcInBoeDpoaWRlLWVuZFwiKSlcbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICAgIGVsLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwicGh4OnNob3ctc3RhcnRcIikpXG4gICAgICAgICAgbGV0IHN0aWNreURpc3BsYXkgPSBkaXNwbGF5IHx8IHRoaXMuZGVmYXVsdERpc3BsYXkoZWwpXG4gICAgICAgICAgRE9NLnB1dFN0aWNreShlbCwgXCJ0b2dnbGVcIiwgY3VycmVudEVsID0+IGN1cnJlbnRFbC5zdHlsZS5kaXNwbGF5ID0gc3RpY2t5RGlzcGxheSlcbiAgICAgICAgICBlbC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcInBoeDpzaG93LWVuZFwiKSlcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgYWRkT3JSZW1vdmVDbGFzc2VzKGVsLCBhZGRzLCByZW1vdmVzLCB0cmFuc2l0aW9uLCB0aW1lLCB2aWV3KXtcbiAgICBsZXQgW3RyYW5zaXRpb25fcnVuLCB0cmFuc2l0aW9uX3N0YXJ0LCB0cmFuc2l0aW9uX2VuZF0gPSB0cmFuc2l0aW9uIHx8IFtbXSwgW10sIFtdXVxuICAgIGlmKHRyYW5zaXRpb25fcnVuLmxlbmd0aCA+IDApe1xuICAgICAgbGV0IG9uU3RhcnQgPSAoKSA9PiB0aGlzLmFkZE9yUmVtb3ZlQ2xhc3NlcyhlbCwgdHJhbnNpdGlvbl9zdGFydC5jb25jYXQodHJhbnNpdGlvbl9ydW4pLCBbXSlcbiAgICAgIGxldCBvbkRvbmUgPSAoKSA9PiB0aGlzLmFkZE9yUmVtb3ZlQ2xhc3NlcyhlbCwgYWRkcy5jb25jYXQodHJhbnNpdGlvbl9lbmQpLCByZW1vdmVzLmNvbmNhdCh0cmFuc2l0aW9uX3J1bikuY29uY2F0KHRyYW5zaXRpb25fc3RhcnQpKVxuICAgICAgcmV0dXJuIHZpZXcudHJhbnNpdGlvbih0aW1lLCBvblN0YXJ0LCBvbkRvbmUpXG4gICAgfVxuICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgbGV0IFtwcmV2QWRkcywgcHJldlJlbW92ZXNdID0gRE9NLmdldFN0aWNreShlbCwgXCJjbGFzc2VzXCIsIFtbXSwgW11dKVxuICAgICAgbGV0IGtlZXBBZGRzID0gYWRkcy5maWx0ZXIobmFtZSA9PiBwcmV2QWRkcy5pbmRleE9mKG5hbWUpIDwgMCAmJiAhZWwuY2xhc3NMaXN0LmNvbnRhaW5zKG5hbWUpKVxuICAgICAgbGV0IGtlZXBSZW1vdmVzID0gcmVtb3Zlcy5maWx0ZXIobmFtZSA9PiBwcmV2UmVtb3Zlcy5pbmRleE9mKG5hbWUpIDwgMCAmJiBlbC5jbGFzc0xpc3QuY29udGFpbnMobmFtZSkpXG4gICAgICBsZXQgbmV3QWRkcyA9IHByZXZBZGRzLmZpbHRlcihuYW1lID0+IHJlbW92ZXMuaW5kZXhPZihuYW1lKSA8IDApLmNvbmNhdChrZWVwQWRkcylcbiAgICAgIGxldCBuZXdSZW1vdmVzID0gcHJldlJlbW92ZXMuZmlsdGVyKG5hbWUgPT4gYWRkcy5pbmRleE9mKG5hbWUpIDwgMCkuY29uY2F0KGtlZXBSZW1vdmVzKVxuXG4gICAgICBET00ucHV0U3RpY2t5KGVsLCBcImNsYXNzZXNcIiwgY3VycmVudEVsID0+IHtcbiAgICAgICAgY3VycmVudEVsLmNsYXNzTGlzdC5yZW1vdmUoLi4ubmV3UmVtb3ZlcylcbiAgICAgICAgY3VycmVudEVsLmNsYXNzTGlzdC5hZGQoLi4ubmV3QWRkcylcbiAgICAgICAgcmV0dXJuIFtuZXdBZGRzLCBuZXdSZW1vdmVzXVxuICAgICAgfSlcbiAgICB9KVxuICB9LFxuXG4gIHNldE9yUmVtb3ZlQXR0cnMoZWwsIHNldHMsIHJlbW92ZXMpe1xuICAgIGxldCBbcHJldlNldHMsIHByZXZSZW1vdmVzXSA9IERPTS5nZXRTdGlja3koZWwsIFwiYXR0cnNcIiwgW1tdLCBbXV0pXG5cbiAgICBsZXQgYWx0ZXJlZEF0dHJzID0gc2V0cy5tYXAoKFthdHRyLCBfdmFsXSkgPT4gYXR0cikuY29uY2F0KHJlbW92ZXMpO1xuICAgIGxldCBuZXdTZXRzID0gcHJldlNldHMuZmlsdGVyKChbYXR0ciwgX3ZhbF0pID0+ICFhbHRlcmVkQXR0cnMuaW5jbHVkZXMoYXR0cikpLmNvbmNhdChzZXRzKTtcbiAgICBsZXQgbmV3UmVtb3ZlcyA9IHByZXZSZW1vdmVzLmZpbHRlcigoYXR0cikgPT4gIWFsdGVyZWRBdHRycy5pbmNsdWRlcyhhdHRyKSkuY29uY2F0KHJlbW92ZXMpO1xuXG4gICAgRE9NLnB1dFN0aWNreShlbCwgXCJhdHRyc1wiLCBjdXJyZW50RWwgPT4ge1xuICAgICAgbmV3UmVtb3Zlcy5mb3JFYWNoKGF0dHIgPT4gY3VycmVudEVsLnJlbW92ZUF0dHJpYnV0ZShhdHRyKSlcbiAgICAgIG5ld1NldHMuZm9yRWFjaCgoW2F0dHIsIHZhbF0pID0+IGN1cnJlbnRFbC5zZXRBdHRyaWJ1dGUoYXR0ciwgdmFsKSlcbiAgICAgIHJldHVybiBbbmV3U2V0cywgbmV3UmVtb3Zlc11cbiAgICB9KVxuICB9LFxuXG4gIGhhc0FsbENsYXNzZXMoZWwsIGNsYXNzZXMpeyByZXR1cm4gY2xhc3Nlcy5ldmVyeShuYW1lID0+IGVsLmNsYXNzTGlzdC5jb250YWlucyhuYW1lKSkgfSxcblxuICBpc1RvZ2dsZWRPdXQoZWwsIG91dENsYXNzZXMpe1xuICAgIHJldHVybiAhdGhpcy5pc1Zpc2libGUoZWwpIHx8IHRoaXMuaGFzQWxsQ2xhc3NlcyhlbCwgb3V0Q2xhc3NlcylcbiAgfSxcblxuICBmaWx0ZXJUb0Vscyhzb3VyY2VFbCwge3RvfSl7XG4gICAgcmV0dXJuIHRvID8gRE9NLmFsbChkb2N1bWVudCwgdG8pIDogW3NvdXJjZUVsXVxuICB9LFxuXG4gIGRlZmF1bHREaXNwbGF5KGVsKXtcbiAgICByZXR1cm4ge3RyOiBcInRhYmxlLXJvd1wiLCB0ZDogXCJ0YWJsZS1jZWxsXCJ9W2VsLnRhZ05hbWUudG9Mb3dlckNhc2UoKV0gfHwgXCJibG9ja1wiXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgSlNcbiIsICJpbXBvcnQge1xuICBCRUZPUkVfVU5MT0FEX0xPQURFUl9USU1FT1VULFxuICBDSEVDS0FCTEVfSU5QVVRTLFxuICBDT05TRUNVVElWRV9SRUxPQURTLFxuICBQSFhfQVVUT19SRUNPVkVSLFxuICBQSFhfQ09NUE9ORU5ULFxuICBQSFhfQ09OTkVDVEVEX0NMQVNTLFxuICBQSFhfRElTQUJMRV9XSVRILFxuICBQSFhfRElTQUJMRV9XSVRIX1JFU1RPUkUsXG4gIFBIWF9ESVNBQkxFRCxcbiAgUEhYX0RJU0NPTk5FQ1RFRF9DTEFTUyxcbiAgUEhYX0VWRU5UX0NMQVNTRVMsXG4gIFBIWF9FUlJPUl9DTEFTUyxcbiAgUEhYX0ZFRURCQUNLX0ZPUixcbiAgUEhYX0hBU19TVUJNSVRURUQsXG4gIFBIWF9IT09LLFxuICBQSFhfUEFHRV9MT0FESU5HLFxuICBQSFhfUEFSRU5UX0lELFxuICBQSFhfUFJPR1JFU1MsXG4gIFBIWF9SRUFET05MWSxcbiAgUEhYX1JFRixcbiAgUEhYX1JFRl9TUkMsXG4gIFBIWF9ST09UX0lELFxuICBQSFhfU0VTU0lPTixcbiAgUEhYX1NUQVRJQyxcbiAgUEhYX1RSQUNLX1NUQVRJQyxcbiAgUEhYX1RSQUNLX1VQTE9BRFMsXG4gIFBIWF9VUERBVEUsXG4gIFBIWF9VUExPQURfUkVGLFxuICBQSFhfVklFV19TRUxFQ1RPUixcbiAgUEhYX01BSU4sXG4gIFBIWF9NT1VOVEVELFxuICBQVVNIX1RJTUVPVVQsXG59IGZyb20gXCIuL2NvbnN0YW50c1wiXG5cbmltcG9ydCB7XG4gIGNsb25lLFxuICBjbG9zZXN0UGh4QmluZGluZyxcbiAgaXNFbXB0eSxcbiAgaXNFcXVhbE9iaixcbiAgbG9nRXJyb3IsXG4gIG1heWJlLFxuICBpc0NpZCxcbn0gZnJvbSBcIi4vdXRpbHNcIlxuXG5pbXBvcnQgQnJvd3NlciBmcm9tIFwiLi9icm93c2VyXCJcbmltcG9ydCBET00gZnJvbSBcIi4vZG9tXCJcbmltcG9ydCBET01QYXRjaCBmcm9tIFwiLi9kb21fcGF0Y2hcIlxuaW1wb3J0IExpdmVVcGxvYWRlciBmcm9tIFwiLi9saXZlX3VwbG9hZGVyXCJcbmltcG9ydCBSZW5kZXJlZCBmcm9tIFwiLi9yZW5kZXJlZFwiXG5pbXBvcnQgVmlld0hvb2sgZnJvbSBcIi4vdmlld19ob29rXCJcbmltcG9ydCBKUyBmcm9tIFwiLi9qc1wiXG5cbmxldCBzZXJpYWxpemVGb3JtID0gKGZvcm0sIG1ldGFkYXRhLCBvbmx5TmFtZXMgPSBbXSkgPT4ge1xuICBsZXQge3N1Ym1pdHRlciwgLi4ubWV0YX0gPSBtZXRhZGF0YVxuXG4gIC8vIFRPRE86IFJlcGxhY2Ugd2l0aCBgbmV3IEZvcm1EYXRhKGZvcm0sIHN1Ym1pdHRlcilgIHdoZW4gc3VwcG9ydGVkIGJ5IGxhdGVzdCBicm93c2VycyxcbiAgLy8gICAgICAgYW5kIG1lbnRpb24gYGZvcm1kYXRhLXN1Ym1pdHRlci1wb2x5ZmlsbGAgaW4gdGhlIGRvY3MuXG4gIGxldCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YShmb3JtKVxuXG4gIC8vIFRPRE86IFJlbW92ZSB3aGVuIEZvcm1EYXRhIGNvbnN0cnVjdG9yIHN1cHBvcnRzIHRoZSBzdWJtaXR0ZXIgYXJndW1lbnQuXG4gIGlmIChzdWJtaXR0ZXIgJiYgc3VibWl0dGVyLmZvcm0gJiYgc3VibWl0dGVyLmZvcm0gPT09IGZvcm0pe1xuICAgIGZvcm1EYXRhLmFwcGVuZChzdWJtaXR0ZXIubmFtZSwgc3VibWl0dGVyLnZhbHVlKVxuICB9XG5cbiAgbGV0IHRvUmVtb3ZlID0gW11cblxuICBmb3JtRGF0YS5mb3JFYWNoKCh2YWwsIGtleSwgX2luZGV4KSA9PiB7XG4gICAgaWYodmFsIGluc3RhbmNlb2YgRmlsZSl7IHRvUmVtb3ZlLnB1c2goa2V5KSB9XG4gIH0pXG5cbiAgLy8gQ2xlYW51cCBhZnRlciBidWlsZGluZyBmaWxlRGF0YVxuICB0b1JlbW92ZS5mb3JFYWNoKGtleSA9PiBmb3JtRGF0YS5kZWxldGUoa2V5KSlcblxuICBsZXQgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpXG4gIGZvcihsZXQgW2tleSwgdmFsXSBvZiBmb3JtRGF0YS5lbnRyaWVzKCkpe1xuICAgIGlmKG9ubHlOYW1lcy5sZW5ndGggPT09IDAgfHwgb25seU5hbWVzLmluZGV4T2Yoa2V5KSA+PSAwKXtcbiAgICAgIHBhcmFtcy5hcHBlbmQoa2V5LCB2YWwpXG4gICAgfVxuICB9XG4gIGZvcihsZXQgbWV0YUtleSBpbiBtZXRhKXsgcGFyYW1zLmFwcGVuZChtZXRhS2V5LCBtZXRhW21ldGFLZXldKSB9XG5cbiAgcmV0dXJuIHBhcmFtcy50b1N0cmluZygpXG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFZpZXcge1xuICBjb25zdHJ1Y3RvcihlbCwgbGl2ZVNvY2tldCwgcGFyZW50VmlldywgZmxhc2gsIGxpdmVSZWZlcmVyKXtcbiAgICB0aGlzLmlzRGVhZCA9IGZhbHNlXG4gICAgdGhpcy5saXZlU29ja2V0ID0gbGl2ZVNvY2tldFxuICAgIHRoaXMuZmxhc2ggPSBmbGFzaFxuICAgIHRoaXMucGFyZW50ID0gcGFyZW50Vmlld1xuICAgIHRoaXMucm9vdCA9IHBhcmVudFZpZXcgPyBwYXJlbnRWaWV3LnJvb3QgOiB0aGlzXG4gICAgdGhpcy5lbCA9IGVsXG4gICAgdGhpcy5pZCA9IHRoaXMuZWwuaWRcbiAgICB0aGlzLnJlZiA9IDBcbiAgICB0aGlzLmNoaWxkSm9pbnMgPSAwXG4gICAgdGhpcy5sb2FkZXJUaW1lciA9IG51bGxcbiAgICB0aGlzLnBlbmRpbmdEaWZmcyA9IFtdXG4gICAgdGhpcy5wcnVuaW5nQ0lEcyA9IFtdXG4gICAgdGhpcy5yZWRpcmVjdCA9IGZhbHNlXG4gICAgdGhpcy5ocmVmID0gbnVsbFxuICAgIHRoaXMuam9pbkNvdW50ID0gdGhpcy5wYXJlbnQgPyB0aGlzLnBhcmVudC5qb2luQ291bnQgLSAxIDogMFxuICAgIHRoaXMuam9pblBlbmRpbmcgPSB0cnVlXG4gICAgdGhpcy5kZXN0cm95ZWQgPSBmYWxzZVxuICAgIHRoaXMuam9pbkNhbGxiYWNrID0gZnVuY3Rpb24ob25Eb25lKXsgb25Eb25lICYmIG9uRG9uZSgpIH1cbiAgICB0aGlzLnN0b3BDYWxsYmFjayA9IGZ1bmN0aW9uKCl7IH1cbiAgICB0aGlzLnBlbmRpbmdKb2luT3BzID0gdGhpcy5wYXJlbnQgPyBudWxsIDogW11cbiAgICB0aGlzLnZpZXdIb29rcyA9IHt9XG4gICAgdGhpcy51cGxvYWRlcnMgPSB7fVxuICAgIHRoaXMuZm9ybVN1Ym1pdHMgPSBbXVxuICAgIHRoaXMuY2hpbGRyZW4gPSB0aGlzLnBhcmVudCA/IG51bGwgOiB7fVxuICAgIHRoaXMucm9vdC5jaGlsZHJlblt0aGlzLmlkXSA9IHt9XG4gICAgdGhpcy5jaGFubmVsID0gdGhpcy5saXZlU29ja2V0LmNoYW5uZWwoYGx2OiR7dGhpcy5pZH1gLCAoKSA9PiB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICByZWRpcmVjdDogdGhpcy5yZWRpcmVjdCA/IHRoaXMuaHJlZiA6IHVuZGVmaW5lZCxcbiAgICAgICAgdXJsOiB0aGlzLnJlZGlyZWN0ID8gdW5kZWZpbmVkIDogdGhpcy5ocmVmIHx8IHVuZGVmaW5lZCxcbiAgICAgICAgcGFyYW1zOiB0aGlzLmNvbm5lY3RQYXJhbXMobGl2ZVJlZmVyZXIpLFxuICAgICAgICBzZXNzaW9uOiB0aGlzLmdldFNlc3Npb24oKSxcbiAgICAgICAgc3RhdGljOiB0aGlzLmdldFN0YXRpYygpLFxuICAgICAgICBmbGFzaDogdGhpcy5mbGFzaCxcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgc2V0SHJlZihocmVmKXsgdGhpcy5ocmVmID0gaHJlZiB9XG5cbiAgc2V0UmVkaXJlY3QoaHJlZil7XG4gICAgdGhpcy5yZWRpcmVjdCA9IHRydWVcbiAgICB0aGlzLmhyZWYgPSBocmVmXG4gIH1cblxuICBpc01haW4oKXsgcmV0dXJuIHRoaXMuZWwuaGFzQXR0cmlidXRlKFBIWF9NQUlOKSB9XG5cbiAgY29ubmVjdFBhcmFtcyhsaXZlUmVmZXJlcil7XG4gICAgbGV0IHBhcmFtcyA9IHRoaXMubGl2ZVNvY2tldC5wYXJhbXModGhpcy5lbClcbiAgICBsZXQgbWFuaWZlc3QgPVxuICAgICAgRE9NLmFsbChkb2N1bWVudCwgYFske3RoaXMuYmluZGluZyhQSFhfVFJBQ0tfU1RBVElDKX1dYClcbiAgICAgICAgLm1hcChub2RlID0+IG5vZGUuc3JjIHx8IG5vZGUuaHJlZikuZmlsdGVyKHVybCA9PiB0eXBlb2YgKHVybCkgPT09IFwic3RyaW5nXCIpXG5cbiAgICBpZihtYW5pZmVzdC5sZW5ndGggPiAwKXsgcGFyYW1zW1wiX3RyYWNrX3N0YXRpY1wiXSA9IG1hbmlmZXN0IH1cbiAgICBwYXJhbXNbXCJfbW91bnRzXCJdID0gdGhpcy5qb2luQ291bnRcbiAgICBwYXJhbXNbXCJfbGl2ZV9yZWZlcmVyXCJdID0gbGl2ZVJlZmVyZXJcblxuICAgIHJldHVybiBwYXJhbXNcbiAgfVxuXG4gIGlzQ29ubmVjdGVkKCl7IHJldHVybiB0aGlzLmNoYW5uZWwuY2FuUHVzaCgpIH1cblxuICBnZXRTZXNzaW9uKCl7IHJldHVybiB0aGlzLmVsLmdldEF0dHJpYnV0ZShQSFhfU0VTU0lPTikgfVxuXG4gIGdldFN0YXRpYygpe1xuICAgIGxldCB2YWwgPSB0aGlzLmVsLmdldEF0dHJpYnV0ZShQSFhfU1RBVElDKVxuICAgIHJldHVybiB2YWwgPT09IFwiXCIgPyBudWxsIDogdmFsXG4gIH1cblxuICBkZXN0cm95KGNhbGxiYWNrID0gZnVuY3Rpb24gKCl7IH0pe1xuICAgIHRoaXMuZGVzdHJveUFsbENoaWxkcmVuKClcbiAgICB0aGlzLmRlc3Ryb3llZCA9IHRydWVcbiAgICBkZWxldGUgdGhpcy5yb290LmNoaWxkcmVuW3RoaXMuaWRdXG4gICAgaWYodGhpcy5wYXJlbnQpeyBkZWxldGUgdGhpcy5yb290LmNoaWxkcmVuW3RoaXMucGFyZW50LmlkXVt0aGlzLmlkXSB9XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMubG9hZGVyVGltZXIpXG4gICAgbGV0IG9uRmluaXNoZWQgPSAoKSA9PiB7XG4gICAgICBjYWxsYmFjaygpXG4gICAgICBmb3IobGV0IGlkIGluIHRoaXMudmlld0hvb2tzKXtcbiAgICAgICAgdGhpcy5kZXN0cm95SG9vayh0aGlzLnZpZXdIb29rc1tpZF0pXG4gICAgICB9XG4gICAgfVxuXG4gICAgRE9NLm1hcmtQaHhDaGlsZERlc3Ryb3llZCh0aGlzLmVsKVxuXG4gICAgdGhpcy5sb2coXCJkZXN0cm95ZWRcIiwgKCkgPT4gW1widGhlIGNoaWxkIGhhcyBiZWVuIHJlbW92ZWQgZnJvbSB0aGUgcGFyZW50XCJdKVxuICAgIHRoaXMuY2hhbm5lbC5sZWF2ZSgpXG4gICAgICAucmVjZWl2ZShcIm9rXCIsIG9uRmluaXNoZWQpXG4gICAgICAucmVjZWl2ZShcImVycm9yXCIsIG9uRmluaXNoZWQpXG4gICAgICAucmVjZWl2ZShcInRpbWVvdXRcIiwgb25GaW5pc2hlZClcbiAgfVxuXG4gIHNldENvbnRhaW5lckNsYXNzZXMoLi4uY2xhc3Nlcyl7XG4gICAgdGhpcy5lbC5jbGFzc0xpc3QucmVtb3ZlKFxuICAgICAgUEhYX0NPTk5FQ1RFRF9DTEFTUyxcbiAgICAgIFBIWF9ESVNDT05ORUNURURfQ0xBU1MsXG4gICAgICBQSFhfRVJST1JfQ0xBU1NcbiAgICApXG4gICAgdGhpcy5lbC5jbGFzc0xpc3QuYWRkKC4uLmNsYXNzZXMpXG4gIH1cblxuICBzaG93TG9hZGVyKHRpbWVvdXQpe1xuICAgIGNsZWFyVGltZW91dCh0aGlzLmxvYWRlclRpbWVyKVxuICAgIGlmKHRpbWVvdXQpe1xuICAgICAgdGhpcy5sb2FkZXJUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4gdGhpcy5zaG93TG9hZGVyKCksIHRpbWVvdXQpXG4gICAgfSBlbHNlIHtcbiAgICAgIGZvcihsZXQgaWQgaW4gdGhpcy52aWV3SG9va3MpeyB0aGlzLnZpZXdIb29rc1tpZF0uX19kaXNjb25uZWN0ZWQoKSB9XG4gICAgICB0aGlzLnNldENvbnRhaW5lckNsYXNzZXMoUEhYX0RJU0NPTk5FQ1RFRF9DTEFTUylcbiAgICB9XG4gIH1cblxuICBleGVjQWxsKGJpbmRpbmcpe1xuICAgIERPTS5hbGwodGhpcy5lbCwgYFske2JpbmRpbmd9XWAsIGVsID0+IHRoaXMubGl2ZVNvY2tldC5leGVjSlMoZWwsIGVsLmdldEF0dHJpYnV0ZShiaW5kaW5nKSkpXG4gIH1cblxuICBoaWRlTG9hZGVyKCl7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMubG9hZGVyVGltZXIpXG4gICAgdGhpcy5zZXRDb250YWluZXJDbGFzc2VzKFBIWF9DT05ORUNURURfQ0xBU1MpXG4gICAgdGhpcy5leGVjQWxsKHRoaXMuYmluZGluZyhcImNvbm5lY3RlZFwiKSlcbiAgfVxuXG4gIHRyaWdnZXJSZWNvbm5lY3RlZCgpe1xuICAgIGZvcihsZXQgaWQgaW4gdGhpcy52aWV3SG9va3MpeyB0aGlzLnZpZXdIb29rc1tpZF0uX19yZWNvbm5lY3RlZCgpIH1cbiAgfVxuXG4gIGxvZyhraW5kLCBtc2dDYWxsYmFjayl7XG4gICAgdGhpcy5saXZlU29ja2V0LmxvZyh0aGlzLCBraW5kLCBtc2dDYWxsYmFjaylcbiAgfVxuXG4gIHRyYW5zaXRpb24odGltZSwgb25TdGFydCwgb25Eb25lID0gZnVuY3Rpb24oKXt9KXtcbiAgICB0aGlzLmxpdmVTb2NrZXQudHJhbnNpdGlvbih0aW1lLCBvblN0YXJ0LCBvbkRvbmUpXG4gIH1cblxuICB3aXRoaW5UYXJnZXRzKHBoeFRhcmdldCwgY2FsbGJhY2spe1xuICAgIGlmKHBoeFRhcmdldCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50IHx8IHBoeFRhcmdldCBpbnN0YW5jZW9mIFNWR0VsZW1lbnQpe1xuICAgICAgcmV0dXJuIHRoaXMubGl2ZVNvY2tldC5vd25lcihwaHhUYXJnZXQsIHZpZXcgPT4gY2FsbGJhY2sodmlldywgcGh4VGFyZ2V0KSlcbiAgICB9XG5cbiAgICBpZihpc0NpZChwaHhUYXJnZXQpKXtcbiAgICAgIGxldCB0YXJnZXRzID0gRE9NLmZpbmRDb21wb25lbnROb2RlTGlzdCh0aGlzLmVsLCBwaHhUYXJnZXQpXG4gICAgICBpZih0YXJnZXRzLmxlbmd0aCA9PT0gMCl7XG4gICAgICAgIGxvZ0Vycm9yKGBubyBjb21wb25lbnQgZm91bmQgbWF0Y2hpbmcgcGh4LXRhcmdldCBvZiAke3BoeFRhcmdldH1gKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2FsbGJhY2sodGhpcywgcGFyc2VJbnQocGh4VGFyZ2V0KSlcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IHRhcmdldHMgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwocGh4VGFyZ2V0KSlcbiAgICAgIGlmKHRhcmdldHMubGVuZ3RoID09PSAwKXsgbG9nRXJyb3IoYG5vdGhpbmcgZm91bmQgbWF0Y2hpbmcgdGhlIHBoeC10YXJnZXQgc2VsZWN0b3IgXCIke3BoeFRhcmdldH1cImApIH1cbiAgICAgIHRhcmdldHMuZm9yRWFjaCh0YXJnZXQgPT4gdGhpcy5saXZlU29ja2V0Lm93bmVyKHRhcmdldCwgdmlldyA9PiBjYWxsYmFjayh2aWV3LCB0YXJnZXQpKSlcbiAgICB9XG4gIH1cblxuICBhcHBseURpZmYodHlwZSwgcmF3RGlmZiwgY2FsbGJhY2spe1xuICAgIHRoaXMubG9nKHR5cGUsICgpID0+IFtcIlwiLCBjbG9uZShyYXdEaWZmKV0pXG4gICAgbGV0IHtkaWZmLCByZXBseSwgZXZlbnRzLCB0aXRsZX0gPSBSZW5kZXJlZC5leHRyYWN0KHJhd0RpZmYpXG4gICAgY2FsbGJhY2soe2RpZmYsIHJlcGx5LCBldmVudHN9KVxuICAgIGlmKHRpdGxlKXsgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiBET00ucHV0VGl0bGUodGl0bGUpKSB9XG4gIH1cblxuICBvbkpvaW4ocmVzcCl7XG4gICAgbGV0IHtyZW5kZXJlZCwgY29udGFpbmVyfSA9IHJlc3BcbiAgICBpZihjb250YWluZXIpe1xuICAgICAgbGV0IFt0YWcsIGF0dHJzXSA9IGNvbnRhaW5lclxuICAgICAgdGhpcy5lbCA9IERPTS5yZXBsYWNlUm9vdENvbnRhaW5lcih0aGlzLmVsLCB0YWcsIGF0dHJzKVxuICAgIH1cbiAgICB0aGlzLmNoaWxkSm9pbnMgPSAwXG4gICAgdGhpcy5qb2luUGVuZGluZyA9IHRydWVcbiAgICB0aGlzLmZsYXNoID0gbnVsbFxuXG4gICAgQnJvd3Nlci5kcm9wTG9jYWwodGhpcy5saXZlU29ja2V0LmxvY2FsU3RvcmFnZSwgd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLCBDT05TRUNVVElWRV9SRUxPQURTKVxuICAgIHRoaXMuYXBwbHlEaWZmKFwibW91bnRcIiwgcmVuZGVyZWQsICh7ZGlmZiwgZXZlbnRzfSkgPT4ge1xuICAgICAgdGhpcy5yZW5kZXJlZCA9IG5ldyBSZW5kZXJlZCh0aGlzLmlkLCBkaWZmKVxuICAgICAgbGV0IFtodG1sLCBzdHJlYW1zXSA9IHRoaXMucmVuZGVyQ29udGFpbmVyKG51bGwsIFwiam9pblwiKVxuICAgICAgdGhpcy5kcm9wUGVuZGluZ1JlZnMoKVxuICAgICAgbGV0IGZvcm1zID0gdGhpcy5mb3Jtc0ZvclJlY292ZXJ5KGh0bWwpXG4gICAgICB0aGlzLmpvaW5Db3VudCsrXG5cbiAgICAgIGlmKGZvcm1zLmxlbmd0aCA+IDApe1xuICAgICAgICBmb3Jtcy5mb3JFYWNoKChbZm9ybSwgbmV3Rm9ybSwgbmV3Q2lkXSwgaSkgPT4ge1xuICAgICAgICAgIHRoaXMucHVzaEZvcm1SZWNvdmVyeShmb3JtLCBuZXdDaWQsIHJlc3AgPT4ge1xuICAgICAgICAgICAgaWYoaSA9PT0gZm9ybXMubGVuZ3RoIC0gMSl7XG4gICAgICAgICAgICAgIHRoaXMub25Kb2luQ29tcGxldGUocmVzcCwgaHRtbCwgc3RyZWFtcywgZXZlbnRzKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLm9uSm9pbkNvbXBsZXRlKHJlc3AsIGh0bWwsIHN0cmVhbXMsIGV2ZW50cylcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgZHJvcFBlbmRpbmdSZWZzKCl7XG4gICAgRE9NLmFsbChkb2N1bWVudCwgYFske1BIWF9SRUZfU1JDfT1cIiR7dGhpcy5pZH1cIl1bJHtQSFhfUkVGfV1gLCBlbCA9PiB7XG4gICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoUEhYX1JFRilcbiAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZShQSFhfUkVGX1NSQylcbiAgICB9KVxuICB9XG5cbiAgb25Kb2luQ29tcGxldGUoe2xpdmVfcGF0Y2h9LCBodG1sLCBzdHJlYW1zLCBldmVudHMpe1xuICAgIC8vIEluIG9yZGVyIHRvIHByb3ZpZGUgYSBiZXR0ZXIgZXhwZXJpZW5jZSwgd2Ugd2FudCB0byBqb2luXG4gICAgLy8gYWxsIExpdmVWaWV3cyBmaXJzdCBhbmQgb25seSB0aGVuIGFwcGx5IHRoZWlyIHBhdGNoZXMuXG4gICAgaWYodGhpcy5qb2luQ291bnQgPiAxIHx8ICh0aGlzLnBhcmVudCAmJiAhdGhpcy5wYXJlbnQuaXNKb2luUGVuZGluZygpKSl7XG4gICAgICByZXR1cm4gdGhpcy5hcHBseUpvaW5QYXRjaChsaXZlX3BhdGNoLCBodG1sLCBzdHJlYW1zLCBldmVudHMpXG4gICAgfVxuXG4gICAgLy8gT25lIGRvd25zaWRlIG9mIHRoaXMgYXBwcm9hY2ggaXMgdGhhdCB3ZSBuZWVkIHRvIGZpbmQgcGh4Q2hpbGRyZW5cbiAgICAvLyBpbiB0aGUgaHRtbCBmcmFnbWVudCwgaW5zdGVhZCBvZiBkaXJlY3RseSBvbiB0aGUgRE9NLiBUaGUgZnJhZ21lbnRcbiAgICAvLyBhbHNvIGRvZXMgbm90IGluY2x1ZGUgUEhYX1NUQVRJQywgc28gd2UgbmVlZCB0byBjb3B5IGl0IG92ZXIgZnJvbVxuICAgIC8vIHRoZSBET00uXG4gICAgbGV0IG5ld0NoaWxkcmVuID0gRE9NLmZpbmRQaHhDaGlsZHJlbkluRnJhZ21lbnQoaHRtbCwgdGhpcy5pZCkuZmlsdGVyKHRvRWwgPT4ge1xuICAgICAgbGV0IGZyb21FbCA9IHRvRWwuaWQgJiYgdGhpcy5lbC5xdWVyeVNlbGVjdG9yKGBbaWQ9XCIke3RvRWwuaWR9XCJdYClcbiAgICAgIGxldCBwaHhTdGF0aWMgPSBmcm9tRWwgJiYgZnJvbUVsLmdldEF0dHJpYnV0ZShQSFhfU1RBVElDKVxuICAgICAgaWYocGh4U3RhdGljKXsgdG9FbC5zZXRBdHRyaWJ1dGUoUEhYX1NUQVRJQywgcGh4U3RhdGljKSB9XG4gICAgICByZXR1cm4gdGhpcy5qb2luQ2hpbGQodG9FbClcbiAgICB9KVxuXG4gICAgaWYobmV3Q2hpbGRyZW4ubGVuZ3RoID09PSAwKXtcbiAgICAgIGlmKHRoaXMucGFyZW50KXtcbiAgICAgICAgdGhpcy5yb290LnBlbmRpbmdKb2luT3BzLnB1c2goW3RoaXMsICgpID0+IHRoaXMuYXBwbHlKb2luUGF0Y2gobGl2ZV9wYXRjaCwgaHRtbCwgc3RyZWFtcywgZXZlbnRzKV0pXG4gICAgICAgIHRoaXMucGFyZW50LmFja0pvaW4odGhpcylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMub25BbGxDaGlsZEpvaW5zQ29tcGxldGUoKVxuICAgICAgICB0aGlzLmFwcGx5Sm9pblBhdGNoKGxpdmVfcGF0Y2gsIGh0bWwsIHN0cmVhbXMsIGV2ZW50cylcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yb290LnBlbmRpbmdKb2luT3BzLnB1c2goW3RoaXMsICgpID0+IHRoaXMuYXBwbHlKb2luUGF0Y2gobGl2ZV9wYXRjaCwgaHRtbCwgc3RyZWFtcywgZXZlbnRzKV0pXG4gICAgfVxuICB9XG5cbiAgYXR0YWNoVHJ1ZURvY0VsKCl7XG4gICAgdGhpcy5lbCA9IERPTS5ieUlkKHRoaXMuaWQpXG4gICAgdGhpcy5lbC5zZXRBdHRyaWJ1dGUoUEhYX1JPT1RfSUQsIHRoaXMucm9vdC5pZClcbiAgfVxuXG4gIGV4ZWNOZXdNb3VudGVkKCl7XG4gICAgRE9NLmFsbCh0aGlzLmVsLCBgWyR7dGhpcy5iaW5kaW5nKFBIWF9IT09LKX1dLCBbZGF0YS1waHgtJHtQSFhfSE9PS31dYCwgaG9va0VsID0+IHtcbiAgICAgIHRoaXMubWF5YmVBZGROZXdIb29rKGhvb2tFbClcbiAgICB9KVxuICAgIERPTS5hbGwodGhpcy5lbCwgYFske3RoaXMuYmluZGluZyhQSFhfTU9VTlRFRCl9XWAsIGVsID0+IHRoaXMubWF5YmVNb3VudGVkKGVsKSlcbiAgfVxuXG4gIGFwcGx5Sm9pblBhdGNoKGxpdmVfcGF0Y2gsIGh0bWwsIHN0cmVhbXMsIGV2ZW50cyl7XG4gICAgdGhpcy5hdHRhY2hUcnVlRG9jRWwoKVxuICAgIGxldCBwYXRjaCA9IG5ldyBET01QYXRjaCh0aGlzLCB0aGlzLmVsLCB0aGlzLmlkLCBodG1sLCBzdHJlYW1zLCBudWxsKVxuICAgIHBhdGNoLm1hcmtQcnVuYWJsZUNvbnRlbnRGb3JSZW1vdmFsKClcbiAgICB0aGlzLnBlcmZvcm1QYXRjaChwYXRjaCwgZmFsc2UpXG4gICAgdGhpcy5qb2luTmV3Q2hpbGRyZW4oKVxuICAgIHRoaXMuZXhlY05ld01vdW50ZWQoKVxuXG4gICAgdGhpcy5qb2luUGVuZGluZyA9IGZhbHNlXG4gICAgdGhpcy5saXZlU29ja2V0LmRpc3BhdGNoRXZlbnRzKGV2ZW50cylcbiAgICB0aGlzLmFwcGx5UGVuZGluZ1VwZGF0ZXMoKVxuXG4gICAgaWYobGl2ZV9wYXRjaCl7XG4gICAgICBsZXQge2tpbmQsIHRvfSA9IGxpdmVfcGF0Y2hcbiAgICAgIHRoaXMubGl2ZVNvY2tldC5oaXN0b3J5UGF0Y2godG8sIGtpbmQpXG4gICAgfVxuICAgIHRoaXMuaGlkZUxvYWRlcigpXG4gICAgaWYodGhpcy5qb2luQ291bnQgPiAxKXsgdGhpcy50cmlnZ2VyUmVjb25uZWN0ZWQoKSB9XG4gICAgdGhpcy5zdG9wQ2FsbGJhY2soKVxuICB9XG5cbiAgdHJpZ2dlckJlZm9yZVVwZGF0ZUhvb2soZnJvbUVsLCB0b0VsKXtcbiAgICB0aGlzLmxpdmVTb2NrZXQudHJpZ2dlckRPTShcIm9uQmVmb3JlRWxVcGRhdGVkXCIsIFtmcm9tRWwsIHRvRWxdKVxuICAgIGxldCBob29rID0gdGhpcy5nZXRIb29rKGZyb21FbClcbiAgICBsZXQgaXNJZ25vcmVkID0gaG9vayAmJiBET00uaXNJZ25vcmVkKGZyb21FbCwgdGhpcy5iaW5kaW5nKFBIWF9VUERBVEUpKVxuICAgIGlmKGhvb2sgJiYgIWZyb21FbC5pc0VxdWFsTm9kZSh0b0VsKSAmJiAhKGlzSWdub3JlZCAmJiBpc0VxdWFsT2JqKGZyb21FbC5kYXRhc2V0LCB0b0VsLmRhdGFzZXQpKSl7XG4gICAgICBob29rLl9fYmVmb3JlVXBkYXRlKClcbiAgICAgIHJldHVybiBob29rXG4gICAgfVxuICB9XG5cbiAgbWF5YmVNb3VudGVkKGVsKXtcbiAgICBsZXQgcGh4TW91bnRlZCA9IGVsLmdldEF0dHJpYnV0ZSh0aGlzLmJpbmRpbmcoUEhYX01PVU5URUQpKVxuICAgIGxldCBoYXNCZWVuSW52b2tlZCA9IHBoeE1vdW50ZWQgJiYgRE9NLnByaXZhdGUoZWwsIFwibW91bnRlZFwiKVxuICAgIGlmKHBoeE1vdW50ZWQgJiYgIWhhc0JlZW5JbnZva2VkKXtcbiAgICAgIHRoaXMubGl2ZVNvY2tldC5leGVjSlMoZWwsIHBoeE1vdW50ZWQpXG4gICAgICBET00ucHV0UHJpdmF0ZShlbCwgXCJtb3VudGVkXCIsIHRydWUpXG4gICAgfVxuICB9XG5cbiAgbWF5YmVBZGROZXdIb29rKGVsLCBmb3JjZSl7XG4gICAgbGV0IG5ld0hvb2sgPSB0aGlzLmFkZEhvb2soZWwpXG4gICAgaWYobmV3SG9vayl7IG5ld0hvb2suX19tb3VudGVkKCkgfVxuICB9XG5cbiAgcGVyZm9ybVBhdGNoKHBhdGNoLCBwcnVuZUNpZHMpe1xuICAgIGxldCByZW1vdmVkRWxzID0gW11cbiAgICBsZXQgcGh4Q2hpbGRyZW5BZGRlZCA9IGZhbHNlXG4gICAgbGV0IHVwZGF0ZWRIb29rSWRzID0gbmV3IFNldCgpXG5cbiAgICBwYXRjaC5hZnRlcihcImFkZGVkXCIsIGVsID0+IHtcbiAgICAgIHRoaXMubGl2ZVNvY2tldC50cmlnZ2VyRE9NKFwib25Ob2RlQWRkZWRcIiwgW2VsXSlcbiAgICAgIHRoaXMubWF5YmVBZGROZXdIb29rKGVsKVxuICAgICAgaWYoZWwuZ2V0QXR0cmlidXRlKXsgdGhpcy5tYXliZU1vdW50ZWQoZWwpIH1cbiAgICB9KVxuXG4gICAgcGF0Y2guYWZ0ZXIoXCJwaHhDaGlsZEFkZGVkXCIsIGVsID0+IHtcbiAgICAgIGlmKERPTS5pc1BoeFN0aWNreShlbCkpe1xuICAgICAgICB0aGlzLmxpdmVTb2NrZXQuam9pblJvb3RWaWV3cygpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwaHhDaGlsZHJlbkFkZGVkID0gdHJ1ZVxuICAgICAgfVxuICAgIH0pXG5cbiAgICBwYXRjaC5iZWZvcmUoXCJ1cGRhdGVkXCIsIChmcm9tRWwsIHRvRWwpID0+IHtcbiAgICAgIGxldCBob29rID0gdGhpcy50cmlnZ2VyQmVmb3JlVXBkYXRlSG9vayhmcm9tRWwsIHRvRWwpXG4gICAgICBpZihob29rKXsgdXBkYXRlZEhvb2tJZHMuYWRkKGZyb21FbC5pZCkgfVxuICAgIH0pXG5cbiAgICBwYXRjaC5hZnRlcihcInVwZGF0ZWRcIiwgZWwgPT4ge1xuICAgICAgaWYodXBkYXRlZEhvb2tJZHMuaGFzKGVsLmlkKSl7IHRoaXMuZ2V0SG9vayhlbCkuX191cGRhdGVkKCkgfVxuICAgIH0pXG5cbiAgICBwYXRjaC5hZnRlcihcImRpc2NhcmRlZFwiLCAoZWwpID0+IHtcbiAgICAgIGlmKGVsLm5vZGVUeXBlID09PSBOb2RlLkVMRU1FTlRfTk9ERSl7IHJlbW92ZWRFbHMucHVzaChlbCkgfVxuICAgIH0pXG5cbiAgICBwYXRjaC5hZnRlcihcInRyYW5zaXRpb25zRGlzY2FyZGVkXCIsIGVscyA9PiB0aGlzLmFmdGVyRWxlbWVudHNSZW1vdmVkKGVscywgcHJ1bmVDaWRzKSlcbiAgICBwYXRjaC5wZXJmb3JtKClcbiAgICB0aGlzLmFmdGVyRWxlbWVudHNSZW1vdmVkKHJlbW92ZWRFbHMsIHBydW5lQ2lkcylcblxuICAgIHJldHVybiBwaHhDaGlsZHJlbkFkZGVkXG4gIH1cblxuICBhZnRlckVsZW1lbnRzUmVtb3ZlZChlbGVtZW50cywgcHJ1bmVDaWRzKXtcbiAgICBsZXQgZGVzdHJveWVkQ0lEcyA9IFtdXG4gICAgZWxlbWVudHMuZm9yRWFjaChwYXJlbnQgPT4ge1xuICAgICAgbGV0IGNvbXBvbmVudHMgPSBET00uYWxsKHBhcmVudCwgYFske1BIWF9DT01QT05FTlR9XWApXG4gICAgICBsZXQgaG9va3MgPSBET00uYWxsKHBhcmVudCwgYFske3RoaXMuYmluZGluZyhQSFhfSE9PSyl9XWApXG4gICAgICBjb21wb25lbnRzLmNvbmNhdChwYXJlbnQpLmZvckVhY2goZWwgPT4ge1xuICAgICAgICBsZXQgY2lkID0gdGhpcy5jb21wb25lbnRJRChlbClcbiAgICAgICAgaWYoaXNDaWQoY2lkKSAmJiBkZXN0cm95ZWRDSURzLmluZGV4T2YoY2lkKSA9PT0gLTEpeyBkZXN0cm95ZWRDSURzLnB1c2goY2lkKSB9XG4gICAgICB9KVxuICAgICAgaG9va3MuY29uY2F0KHBhcmVudCkuZm9yRWFjaChob29rRWwgPT4ge1xuICAgICAgICBsZXQgaG9vayA9IHRoaXMuZ2V0SG9vayhob29rRWwpXG4gICAgICAgIGhvb2sgJiYgdGhpcy5kZXN0cm95SG9vayhob29rKVxuICAgICAgfSlcbiAgICB9KVxuICAgIC8vIFdlIHNob3VsZCBub3QgcHJ1bmVDaWRzIG9uIGpvaW5zLiBPdGhlcndpc2UsIGluIGNhc2Ugb2ZcbiAgICAvLyByZWpvaW5zLCB3ZSBtYXkgbm90aWZ5IGNpZHMgdGhhdCBubyBsb25nZXIgYmVsb25nIHRvIHRoZVxuICAgIC8vIGN1cnJlbnQgTGl2ZVZpZXcgdG8gYmUgcmVtb3ZlZC5cbiAgICBpZihwcnVuZUNpZHMpe1xuICAgICAgdGhpcy5tYXliZVB1c2hDb21wb25lbnRzRGVzdHJveWVkKGRlc3Ryb3llZENJRHMpXG4gICAgfVxuICB9XG5cbiAgam9pbk5ld0NoaWxkcmVuKCl7XG4gICAgRE9NLmZpbmRQaHhDaGlsZHJlbih0aGlzLmVsLCB0aGlzLmlkKS5mb3JFYWNoKGVsID0+IHRoaXMuam9pbkNoaWxkKGVsKSlcbiAgfVxuXG4gIGdldENoaWxkQnlJZChpZCl7IHJldHVybiB0aGlzLnJvb3QuY2hpbGRyZW5bdGhpcy5pZF1baWRdIH1cblxuICBnZXREZXNjZW5kZW50QnlFbChlbCl7XG4gICAgaWYoZWwuaWQgPT09IHRoaXMuaWQpe1xuICAgICAgcmV0dXJuIHRoaXNcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMuY2hpbGRyZW5bZWwuZ2V0QXR0cmlidXRlKFBIWF9QQVJFTlRfSUQpXVtlbC5pZF1cbiAgICB9XG4gIH1cblxuICBkZXN0cm95RGVzY2VuZGVudChpZCl7XG4gICAgZm9yKGxldCBwYXJlbnRJZCBpbiB0aGlzLnJvb3QuY2hpbGRyZW4pe1xuICAgICAgZm9yKGxldCBjaGlsZElkIGluIHRoaXMucm9vdC5jaGlsZHJlbltwYXJlbnRJZF0pe1xuICAgICAgICBpZihjaGlsZElkID09PSBpZCl7IHJldHVybiB0aGlzLnJvb3QuY2hpbGRyZW5bcGFyZW50SWRdW2NoaWxkSWRdLmRlc3Ryb3koKSB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgam9pbkNoaWxkKGVsKXtcbiAgICBsZXQgY2hpbGQgPSB0aGlzLmdldENoaWxkQnlJZChlbC5pZClcbiAgICBpZighY2hpbGQpe1xuICAgICAgbGV0IHZpZXcgPSBuZXcgVmlldyhlbCwgdGhpcy5saXZlU29ja2V0LCB0aGlzKVxuICAgICAgdGhpcy5yb290LmNoaWxkcmVuW3RoaXMuaWRdW3ZpZXcuaWRdID0gdmlld1xuICAgICAgdmlldy5qb2luKClcbiAgICAgIHRoaXMuY2hpbGRKb2lucysrXG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgfVxuXG4gIGlzSm9pblBlbmRpbmcoKXsgcmV0dXJuIHRoaXMuam9pblBlbmRpbmcgfVxuXG4gIGFja0pvaW4oX2NoaWxkKXtcbiAgICB0aGlzLmNoaWxkSm9pbnMtLVxuXG4gICAgaWYodGhpcy5jaGlsZEpvaW5zID09PSAwKXtcbiAgICAgIGlmKHRoaXMucGFyZW50KXtcbiAgICAgICAgdGhpcy5wYXJlbnQuYWNrSm9pbih0aGlzKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5vbkFsbENoaWxkSm9pbnNDb21wbGV0ZSgpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgb25BbGxDaGlsZEpvaW5zQ29tcGxldGUoKXtcbiAgICB0aGlzLmpvaW5DYWxsYmFjaygoKSA9PiB7XG4gICAgICB0aGlzLnBlbmRpbmdKb2luT3BzLmZvckVhY2goKFt2aWV3LCBvcF0pID0+IHtcbiAgICAgICAgaWYoIXZpZXcuaXNEZXN0cm95ZWQoKSl7IG9wKCkgfVxuICAgICAgfSlcbiAgICAgIHRoaXMucGVuZGluZ0pvaW5PcHMgPSBbXVxuICAgIH0pXG4gIH1cblxuICB1cGRhdGUoZGlmZiwgZXZlbnRzKXtcbiAgICBpZih0aGlzLmlzSm9pblBlbmRpbmcoKSB8fCAodGhpcy5saXZlU29ja2V0Lmhhc1BlbmRpbmdMaW5rKCkgJiYgdGhpcy5yb290LmlzTWFpbigpKSl7XG4gICAgICByZXR1cm4gdGhpcy5wZW5kaW5nRGlmZnMucHVzaCh7ZGlmZiwgZXZlbnRzfSlcbiAgICB9XG5cbiAgICB0aGlzLnJlbmRlcmVkLm1lcmdlRGlmZihkaWZmKVxuICAgIGxldCBwaHhDaGlsZHJlbkFkZGVkID0gZmFsc2VcblxuICAgIC8vIFdoZW4gdGhlIGRpZmYgb25seSBjb250YWlucyBjb21wb25lbnQgZGlmZnMsIHRoZW4gd2FsayBjb21wb25lbnRzXG4gICAgLy8gYW5kIHBhdGNoIG9ubHkgdGhlIHBhcmVudCBjb21wb25lbnQgY29udGFpbmVycyBmb3VuZCBpbiB0aGUgZGlmZi5cbiAgICAvLyBPdGhlcndpc2UsIHBhdGNoIGVudGlyZSBMViBjb250YWluZXIuXG4gICAgaWYodGhpcy5yZW5kZXJlZC5pc0NvbXBvbmVudE9ubHlEaWZmKGRpZmYpKXtcbiAgICAgIHRoaXMubGl2ZVNvY2tldC50aW1lKFwiY29tcG9uZW50IHBhdGNoIGNvbXBsZXRlXCIsICgpID0+IHtcbiAgICAgICAgbGV0IHBhcmVudENpZHMgPSBET00uZmluZFBhcmVudENJRHModGhpcy5lbCwgdGhpcy5yZW5kZXJlZC5jb21wb25lbnRDSURzKGRpZmYpKVxuICAgICAgICBwYXJlbnRDaWRzLmZvckVhY2gocGFyZW50Q0lEID0+IHtcbiAgICAgICAgICBpZih0aGlzLmNvbXBvbmVudFBhdGNoKHRoaXMucmVuZGVyZWQuZ2V0Q29tcG9uZW50KGRpZmYsIHBhcmVudENJRCksIHBhcmVudENJRCkpeyBwaHhDaGlsZHJlbkFkZGVkID0gdHJ1ZSB9XG4gICAgICAgIH0pXG4gICAgICB9KVxuICAgIH0gZWxzZSBpZighaXNFbXB0eShkaWZmKSl7XG4gICAgICB0aGlzLmxpdmVTb2NrZXQudGltZShcImZ1bGwgcGF0Y2ggY29tcGxldGVcIiwgKCkgPT4ge1xuICAgICAgICBsZXQgW2h0bWwsIHN0cmVhbXNdID0gdGhpcy5yZW5kZXJDb250YWluZXIoZGlmZiwgXCJ1cGRhdGVcIilcbiAgICAgICAgbGV0IHBhdGNoID0gbmV3IERPTVBhdGNoKHRoaXMsIHRoaXMuZWwsIHRoaXMuaWQsIGh0bWwsIHN0cmVhbXMsIG51bGwpXG4gICAgICAgIHBoeENoaWxkcmVuQWRkZWQgPSB0aGlzLnBlcmZvcm1QYXRjaChwYXRjaCwgdHJ1ZSlcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgdGhpcy5saXZlU29ja2V0LmRpc3BhdGNoRXZlbnRzKGV2ZW50cylcbiAgICBpZihwaHhDaGlsZHJlbkFkZGVkKXsgdGhpcy5qb2luTmV3Q2hpbGRyZW4oKSB9XG4gIH1cblxuICByZW5kZXJDb250YWluZXIoZGlmZiwga2luZCl7XG4gICAgcmV0dXJuIHRoaXMubGl2ZVNvY2tldC50aW1lKGB0b1N0cmluZyBkaWZmICgke2tpbmR9KWAsICgpID0+IHtcbiAgICAgIGxldCB0YWcgPSB0aGlzLmVsLnRhZ05hbWVcbiAgICAgIC8vIERvbid0IHNraXAgYW55IGNvbXBvbmVudCBpbiB0aGUgZGlmZiBub3IgYW55IG1hcmtlZCBhcyBwcnVuZWRcbiAgICAgIC8vIChhcyB0aGV5IG1heSBoYXZlIGJlZW4gYWRkZWQgYmFjaylcbiAgICAgIGxldCBjaWRzID0gZGlmZiA/IHRoaXMucmVuZGVyZWQuY29tcG9uZW50Q0lEcyhkaWZmKS5jb25jYXQodGhpcy5wcnVuaW5nQ0lEcykgOiBudWxsXG4gICAgICBsZXQgW2h0bWwsIHN0cmVhbXNdID0gdGhpcy5yZW5kZXJlZC50b1N0cmluZyhjaWRzKVxuICAgICAgcmV0dXJuIFtgPCR7dGFnfT4ke2h0bWx9PC8ke3RhZ30+YCwgc3RyZWFtc11cbiAgICB9KVxuICB9XG5cbiAgY29tcG9uZW50UGF0Y2goZGlmZiwgY2lkKXtcbiAgICBpZihpc0VtcHR5KGRpZmYpKSByZXR1cm4gZmFsc2VcbiAgICBsZXQgW2h0bWwsIHN0cmVhbXNdID0gdGhpcy5yZW5kZXJlZC5jb21wb25lbnRUb1N0cmluZyhjaWQpXG4gICAgbGV0IHBhdGNoID0gbmV3IERPTVBhdGNoKHRoaXMsIHRoaXMuZWwsIHRoaXMuaWQsIGh0bWwsIHN0cmVhbXMsIGNpZClcbiAgICBsZXQgY2hpbGRyZW5BZGRlZCA9IHRoaXMucGVyZm9ybVBhdGNoKHBhdGNoLCB0cnVlKVxuICAgIHJldHVybiBjaGlsZHJlbkFkZGVkXG4gIH1cblxuICBnZXRIb29rKGVsKXsgcmV0dXJuIHRoaXMudmlld0hvb2tzW1ZpZXdIb29rLmVsZW1lbnRJRChlbCldIH1cblxuICBhZGRIb29rKGVsKXtcbiAgICBpZihWaWV3SG9vay5lbGVtZW50SUQoZWwpIHx8ICFlbC5nZXRBdHRyaWJ1dGUpeyByZXR1cm4gfVxuICAgIGxldCBob29rTmFtZSA9IGVsLmdldEF0dHJpYnV0ZShgZGF0YS1waHgtJHtQSFhfSE9PS31gKSB8fCBlbC5nZXRBdHRyaWJ1dGUodGhpcy5iaW5kaW5nKFBIWF9IT09LKSlcbiAgICBpZihob29rTmFtZSAmJiAhdGhpcy5vd25zRWxlbWVudChlbCkpeyByZXR1cm4gfVxuICAgIGxldCBjYWxsYmFja3MgPSB0aGlzLmxpdmVTb2NrZXQuZ2V0SG9va0NhbGxiYWNrcyhob29rTmFtZSlcblxuICAgIGlmKGNhbGxiYWNrcyl7XG4gICAgICBpZighZWwuaWQpeyBsb2dFcnJvcihgbm8gRE9NIElEIGZvciBob29rIFwiJHtob29rTmFtZX1cIi4gSG9va3MgcmVxdWlyZSBhIHVuaXF1ZSBJRCBvbiBlYWNoIGVsZW1lbnQuYCwgZWwpIH1cbiAgICAgIGxldCBob29rID0gbmV3IFZpZXdIb29rKHRoaXMsIGVsLCBjYWxsYmFja3MpXG4gICAgICB0aGlzLnZpZXdIb29rc1tWaWV3SG9vay5lbGVtZW50SUQoaG9vay5lbCldID0gaG9va1xuICAgICAgcmV0dXJuIGhvb2tcbiAgICB9IGVsc2UgaWYoaG9va05hbWUgIT09IG51bGwpe1xuICAgICAgbG9nRXJyb3IoYHVua25vd24gaG9vayBmb3VuZCBmb3IgXCIke2hvb2tOYW1lfVwiYCwgZWwpXG4gICAgfVxuICB9XG5cbiAgZGVzdHJveUhvb2soaG9vayl7XG4gICAgaG9vay5fX2Rlc3Ryb3llZCgpXG4gICAgaG9vay5fX2NsZWFudXBfXygpXG4gICAgZGVsZXRlIHRoaXMudmlld0hvb2tzW1ZpZXdIb29rLmVsZW1lbnRJRChob29rLmVsKV1cbiAgfVxuXG4gIGFwcGx5UGVuZGluZ1VwZGF0ZXMoKXtcbiAgICB0aGlzLnBlbmRpbmdEaWZmcy5mb3JFYWNoKCh7ZGlmZiwgZXZlbnRzfSkgPT4gdGhpcy51cGRhdGUoZGlmZiwgZXZlbnRzKSlcbiAgICB0aGlzLnBlbmRpbmdEaWZmcyA9IFtdXG4gICAgdGhpcy5lYWNoQ2hpbGQoY2hpbGQgPT4gY2hpbGQuYXBwbHlQZW5kaW5nVXBkYXRlcygpKVxuICB9XG5cbiAgZWFjaENoaWxkKGNhbGxiYWNrKXtcbiAgICBsZXQgY2hpbGRyZW4gPSB0aGlzLnJvb3QuY2hpbGRyZW5bdGhpcy5pZF0gfHwge31cbiAgICBmb3IobGV0IGlkIGluIGNoaWxkcmVuKXsgY2FsbGJhY2sodGhpcy5nZXRDaGlsZEJ5SWQoaWQpKSB9XG4gIH1cblxuICBvbkNoYW5uZWwoZXZlbnQsIGNiKXtcbiAgICB0aGlzLmxpdmVTb2NrZXQub25DaGFubmVsKHRoaXMuY2hhbm5lbCwgZXZlbnQsIHJlc3AgPT4ge1xuICAgICAgaWYodGhpcy5pc0pvaW5QZW5kaW5nKCkpe1xuICAgICAgICB0aGlzLnJvb3QucGVuZGluZ0pvaW5PcHMucHVzaChbdGhpcywgKCkgPT4gY2IocmVzcCldKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5saXZlU29ja2V0LnJlcXVlc3RET01VcGRhdGUoKCkgPT4gY2IocmVzcCkpXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIGJpbmRDaGFubmVsKCl7XG4gICAgLy8gVGhlIGRpZmYgZXZlbnQgc2hvdWxkIGJlIGhhbmRsZWQgYnkgdGhlIHJlZ3VsYXIgdXBkYXRlIG9wZXJhdGlvbnMuXG4gICAgLy8gQWxsIG90aGVyIG9wZXJhdGlvbnMgYXJlIHF1ZXVlZCB0byBiZSBhcHBsaWVkIG9ubHkgYWZ0ZXIgam9pbi5cbiAgICB0aGlzLmxpdmVTb2NrZXQub25DaGFubmVsKHRoaXMuY2hhbm5lbCwgXCJkaWZmXCIsIChyYXdEaWZmKSA9PiB7XG4gICAgICB0aGlzLmxpdmVTb2NrZXQucmVxdWVzdERPTVVwZGF0ZSgoKSA9PiB7XG4gICAgICAgIHRoaXMuYXBwbHlEaWZmKFwidXBkYXRlXCIsIHJhd0RpZmYsICh7ZGlmZiwgZXZlbnRzfSkgPT4gdGhpcy51cGRhdGUoZGlmZiwgZXZlbnRzKSlcbiAgICAgIH0pXG4gICAgfSlcbiAgICB0aGlzLm9uQ2hhbm5lbChcInJlZGlyZWN0XCIsICh7dG8sIGZsYXNofSkgPT4gdGhpcy5vblJlZGlyZWN0KHt0bywgZmxhc2h9KSlcbiAgICB0aGlzLm9uQ2hhbm5lbChcImxpdmVfcGF0Y2hcIiwgKHJlZGlyKSA9PiB0aGlzLm9uTGl2ZVBhdGNoKHJlZGlyKSlcbiAgICB0aGlzLm9uQ2hhbm5lbChcImxpdmVfcmVkaXJlY3RcIiwgKHJlZGlyKSA9PiB0aGlzLm9uTGl2ZVJlZGlyZWN0KHJlZGlyKSlcbiAgICB0aGlzLmNoYW5uZWwub25FcnJvcihyZWFzb24gPT4gdGhpcy5vbkVycm9yKHJlYXNvbikpXG4gICAgdGhpcy5jaGFubmVsLm9uQ2xvc2UocmVhc29uID0+IHRoaXMub25DbG9zZShyZWFzb24pKVxuICB9XG5cbiAgZGVzdHJveUFsbENoaWxkcmVuKCl7IHRoaXMuZWFjaENoaWxkKGNoaWxkID0+IGNoaWxkLmRlc3Ryb3koKSkgfVxuXG4gIG9uTGl2ZVJlZGlyZWN0KHJlZGlyKXtcbiAgICBsZXQge3RvLCBraW5kLCBmbGFzaH0gPSByZWRpclxuICAgIGxldCB1cmwgPSB0aGlzLmV4cGFuZFVSTCh0bylcbiAgICB0aGlzLmxpdmVTb2NrZXQuaGlzdG9yeVJlZGlyZWN0KHVybCwga2luZCwgZmxhc2gpXG4gIH1cblxuICBvbkxpdmVQYXRjaChyZWRpcil7XG4gICAgbGV0IHt0bywga2luZH0gPSByZWRpclxuICAgIHRoaXMuaHJlZiA9IHRoaXMuZXhwYW5kVVJMKHRvKVxuICAgIHRoaXMubGl2ZVNvY2tldC5oaXN0b3J5UGF0Y2godG8sIGtpbmQpXG4gIH1cblxuICBleHBhbmRVUkwodG8pe1xuICAgIHJldHVybiB0by5zdGFydHNXaXRoKFwiL1wiKSA/IGAke3dpbmRvdy5sb2NhdGlvbi5wcm90b2NvbH0vLyR7d2luZG93LmxvY2F0aW9uLmhvc3R9JHt0b31gIDogdG9cbiAgfVxuXG4gIG9uUmVkaXJlY3Qoe3RvLCBmbGFzaH0peyB0aGlzLmxpdmVTb2NrZXQucmVkaXJlY3QodG8sIGZsYXNoKSB9XG5cbiAgaXNEZXN0cm95ZWQoKXsgcmV0dXJuIHRoaXMuZGVzdHJveWVkIH1cblxuICBqb2luRGVhZCgpeyB0aGlzLmlzRGVhZCA9IHRydWUgfVxuXG4gIGpvaW4oY2FsbGJhY2spe1xuICAgIHRoaXMuc2hvd0xvYWRlcih0aGlzLmxpdmVTb2NrZXQubG9hZGVyVGltZW91dClcbiAgICB0aGlzLmJpbmRDaGFubmVsKClcbiAgICBpZih0aGlzLmlzTWFpbigpKXtcbiAgICAgIHRoaXMuc3RvcENhbGxiYWNrID0gdGhpcy5saXZlU29ja2V0LndpdGhQYWdlTG9hZGluZyh7dG86IHRoaXMuaHJlZiwga2luZDogXCJpbml0aWFsXCJ9KVxuICAgIH1cbiAgICB0aGlzLmpvaW5DYWxsYmFjayA9IChvbkRvbmUpID0+IHtcbiAgICAgIG9uRG9uZSA9IG9uRG9uZSB8fCBmdW5jdGlvbigpe31cbiAgICAgIGNhbGxiYWNrID8gY2FsbGJhY2sodGhpcy5qb2luQ291bnQsIG9uRG9uZSkgOiBvbkRvbmUoKVxuICAgIH1cbiAgICB0aGlzLmxpdmVTb2NrZXQud3JhcFB1c2godGhpcywge3RpbWVvdXQ6IGZhbHNlfSwgKCkgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuY2hhbm5lbC5qb2luKClcbiAgICAgICAgLnJlY2VpdmUoXCJva1wiLCBkYXRhID0+IHtcbiAgICAgICAgICBpZighdGhpcy5pc0Rlc3Ryb3llZCgpKXtcbiAgICAgICAgICAgIHRoaXMubGl2ZVNvY2tldC5yZXF1ZXN0RE9NVXBkYXRlKCgpID0+IHRoaXMub25Kb2luKGRhdGEpKVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgLnJlY2VpdmUoXCJlcnJvclwiLCByZXNwID0+ICF0aGlzLmlzRGVzdHJveWVkKCkgJiYgdGhpcy5vbkpvaW5FcnJvcihyZXNwKSlcbiAgICAgICAgLnJlY2VpdmUoXCJ0aW1lb3V0XCIsICgpID0+ICF0aGlzLmlzRGVzdHJveWVkKCkgJiYgdGhpcy5vbkpvaW5FcnJvcih7cmVhc29uOiBcInRpbWVvdXRcIn0pKVxuICAgIH0pXG4gIH1cblxuICBvbkpvaW5FcnJvcihyZXNwKXtcbiAgICBpZihyZXNwLnJlYXNvbiA9PT0gXCJyZWxvYWRcIil7XG4gICAgICB0aGlzLmxvZyhcImVycm9yXCIsICgpID0+IFtgZmFpbGVkIG1vdW50IHdpdGggJHtyZXNwLnN0YXR1c30uIEZhbGxpbmcgYmFjayB0byBwYWdlIHJlcXVlc3RgLCByZXNwXSlcbiAgICAgIHJldHVybiB0aGlzLm9uUmVkaXJlY3Qoe3RvOiB0aGlzLmhyZWZ9KVxuICAgIH0gZWxzZSBpZihyZXNwLnJlYXNvbiA9PT0gXCJ1bmF1dGhvcml6ZWRcIiB8fCByZXNwLnJlYXNvbiA9PT0gXCJzdGFsZVwiKXtcbiAgICAgIHRoaXMubG9nKFwiZXJyb3JcIiwgKCkgPT4gW1widW5hdXRob3JpemVkIGxpdmVfcmVkaXJlY3QuIEZhbGxpbmcgYmFjayB0byBwYWdlIHJlcXVlc3RcIiwgcmVzcF0pXG4gICAgICByZXR1cm4gdGhpcy5vblJlZGlyZWN0KHt0bzogdGhpcy5ocmVmfSlcbiAgICB9XG4gICAgaWYocmVzcC5yZWRpcmVjdCB8fCByZXNwLmxpdmVfcmVkaXJlY3Qpe1xuICAgICAgdGhpcy5qb2luUGVuZGluZyA9IGZhbHNlXG4gICAgICB0aGlzLmNoYW5uZWwubGVhdmUoKVxuICAgIH1cbiAgICBpZihyZXNwLnJlZGlyZWN0KXsgcmV0dXJuIHRoaXMub25SZWRpcmVjdChyZXNwLnJlZGlyZWN0KSB9XG4gICAgaWYocmVzcC5saXZlX3JlZGlyZWN0KXsgcmV0dXJuIHRoaXMub25MaXZlUmVkaXJlY3QocmVzcC5saXZlX3JlZGlyZWN0KSB9XG4gICAgdGhpcy5sb2coXCJlcnJvclwiLCAoKSA9PiBbXCJ1bmFibGUgdG8gam9pblwiLCByZXNwXSlcbiAgICBpZih0aGlzLmxpdmVTb2NrZXQuaXNDb25uZWN0ZWQoKSl7IHRoaXMubGl2ZVNvY2tldC5yZWxvYWRXaXRoSml0dGVyKHRoaXMpIH1cbiAgfVxuXG4gIG9uQ2xvc2UocmVhc29uKXtcbiAgICBpZih0aGlzLmlzRGVzdHJveWVkKCkpeyByZXR1cm4gfVxuICAgIGlmKHRoaXMubGl2ZVNvY2tldC5oYXNQZW5kaW5nTGluaygpICYmIHJlYXNvbiAhPT0gXCJsZWF2ZVwiKXtcbiAgICAgIHJldHVybiB0aGlzLmxpdmVTb2NrZXQucmVsb2FkV2l0aEppdHRlcih0aGlzKVxuICAgIH1cbiAgICB0aGlzLmRlc3Ryb3lBbGxDaGlsZHJlbigpXG4gICAgdGhpcy5saXZlU29ja2V0LmRyb3BBY3RpdmVFbGVtZW50KHRoaXMpXG4gICAgLy8gZG9jdW1lbnQuYWN0aXZlRWxlbWVudCBjYW4gYmUgbnVsbCBpbiBJbnRlcm5ldCBFeHBsb3JlciAxMVxuICAgIGlmKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpeyBkb2N1bWVudC5hY3RpdmVFbGVtZW50LmJsdXIoKSB9XG4gICAgaWYodGhpcy5saXZlU29ja2V0LmlzVW5sb2FkZWQoKSl7XG4gICAgICB0aGlzLnNob3dMb2FkZXIoQkVGT1JFX1VOTE9BRF9MT0FERVJfVElNRU9VVClcbiAgICB9XG4gIH1cblxuICBvbkVycm9yKHJlYXNvbil7XG4gICAgdGhpcy5vbkNsb3NlKHJlYXNvbilcbiAgICBpZih0aGlzLmxpdmVTb2NrZXQuaXNDb25uZWN0ZWQoKSl7IHRoaXMubG9nKFwiZXJyb3JcIiwgKCkgPT4gW1widmlldyBjcmFzaGVkXCIsIHJlYXNvbl0pIH1cbiAgICBpZighdGhpcy5saXZlU29ja2V0LmlzVW5sb2FkZWQoKSl7IHRoaXMuZGlzcGxheUVycm9yKCkgfVxuICB9XG5cbiAgZGlzcGxheUVycm9yKCl7XG4gICAgaWYodGhpcy5pc01haW4oKSl7IERPTS5kaXNwYXRjaEV2ZW50KHdpbmRvdywgXCJwaHg6cGFnZS1sb2FkaW5nLXN0YXJ0XCIsIHtkZXRhaWw6IHt0bzogdGhpcy5ocmVmLCBraW5kOiBcImVycm9yXCJ9fSkgfVxuICAgIHRoaXMuc2hvd0xvYWRlcigpXG4gICAgdGhpcy5zZXRDb250YWluZXJDbGFzc2VzKFBIWF9ESVNDT05ORUNURURfQ0xBU1MsIFBIWF9FUlJPUl9DTEFTUylcbiAgICB0aGlzLmV4ZWNBbGwodGhpcy5iaW5kaW5nKFwiZGlzY29ubmVjdGVkXCIpKVxuICB9XG5cbiAgcHVzaFdpdGhSZXBseShyZWZHZW5lcmF0b3IsIGV2ZW50LCBwYXlsb2FkLCBvblJlcGx5ID0gZnVuY3Rpb24gKCl7IH0pe1xuICAgIGlmKCF0aGlzLmlzQ29ubmVjdGVkKCkpeyByZXR1cm4gfVxuXG4gICAgbGV0IFtyZWYsIFtlbF0sIG9wdHNdID0gcmVmR2VuZXJhdG9yID8gcmVmR2VuZXJhdG9yKCkgOiBbbnVsbCwgW10sIHt9XVxuICAgIGxldCBvbkxvYWRpbmdEb25lID0gZnVuY3Rpb24oKXsgfVxuICAgIGlmKG9wdHMucGFnZV9sb2FkaW5nIHx8IChlbCAmJiAoZWwuZ2V0QXR0cmlidXRlKHRoaXMuYmluZGluZyhQSFhfUEFHRV9MT0FESU5HKSkgIT09IG51bGwpKSl7XG4gICAgICBvbkxvYWRpbmdEb25lID0gdGhpcy5saXZlU29ja2V0LndpdGhQYWdlTG9hZGluZyh7a2luZDogXCJlbGVtZW50XCIsIHRhcmdldDogZWx9KVxuICAgIH1cblxuICAgIGlmKHR5cGVvZiAocGF5bG9hZC5jaWQpICE9PSBcIm51bWJlclwiKXsgZGVsZXRlIHBheWxvYWQuY2lkIH1cbiAgICByZXR1cm4gKFxuICAgICAgdGhpcy5saXZlU29ja2V0LndyYXBQdXNoKHRoaXMsIHt0aW1lb3V0OiB0cnVlfSwgKCkgPT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5jaGFubmVsLnB1c2goZXZlbnQsIHBheWxvYWQsIFBVU0hfVElNRU9VVCkucmVjZWl2ZShcIm9rXCIsIHJlc3AgPT4ge1xuICAgICAgICAgIGxldCBmaW5pc2ggPSAoaG9va1JlcGx5KSA9PiB7XG4gICAgICAgICAgICBpZihyZXNwLnJlZGlyZWN0KXsgdGhpcy5vblJlZGlyZWN0KHJlc3AucmVkaXJlY3QpIH1cbiAgICAgICAgICAgIGlmKHJlc3AubGl2ZV9wYXRjaCl7IHRoaXMub25MaXZlUGF0Y2gocmVzcC5saXZlX3BhdGNoKSB9XG4gICAgICAgICAgICBpZihyZXNwLmxpdmVfcmVkaXJlY3QpeyB0aGlzLm9uTGl2ZVJlZGlyZWN0KHJlc3AubGl2ZV9yZWRpcmVjdCkgfVxuICAgICAgICAgICAgaWYocmVmICE9PSBudWxsKXsgdGhpcy51bmRvUmVmcyhyZWYpIH1cbiAgICAgICAgICAgIG9uTG9hZGluZ0RvbmUoKVxuICAgICAgICAgICAgb25SZXBseShyZXNwLCBob29rUmVwbHkpXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmKHJlc3AuZGlmZil7XG4gICAgICAgICAgICB0aGlzLmxpdmVTb2NrZXQucmVxdWVzdERPTVVwZGF0ZSgoKSA9PiB7XG4gICAgICAgICAgICAgIHRoaXMuYXBwbHlEaWZmKFwidXBkYXRlXCIsIHJlc3AuZGlmZiwgKHtkaWZmLCByZXBseSwgZXZlbnRzfSkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlKGRpZmYsIGV2ZW50cylcbiAgICAgICAgICAgICAgICBmaW5pc2gocmVwbHkpXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmaW5pc2gobnVsbClcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICB9KVxuICAgIClcbiAgfVxuXG4gIHVuZG9SZWZzKHJlZil7XG4gICAgaWYoIXRoaXMuaXNDb25uZWN0ZWQoKSl7IHJldHVybiB9IC8vIGV4aXQgaWYgZXh0ZXJuYWwgZm9ybSB0cmlnZ2VyZWRcblxuICAgIERPTS5hbGwoZG9jdW1lbnQsIGBbJHtQSFhfUkVGX1NSQ309XCIke3RoaXMuaWR9XCJdWyR7UEhYX1JFRn09XCIke3JlZn1cIl1gLCBlbCA9PiB7XG4gICAgICBsZXQgZGlzYWJsZWRWYWwgPSBlbC5nZXRBdHRyaWJ1dGUoUEhYX0RJU0FCTEVEKVxuICAgICAgLy8gcmVtb3ZlIHJlZnNcbiAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZShQSFhfUkVGKVxuICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKFBIWF9SRUZfU1JDKVxuICAgICAgLy8gcmVzdG9yZSBpbnB1dHNcbiAgICAgIGlmKGVsLmdldEF0dHJpYnV0ZShQSFhfUkVBRE9OTFkpICE9PSBudWxsKXtcbiAgICAgICAgZWwucmVhZE9ubHkgPSBmYWxzZVxuICAgICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoUEhYX1JFQURPTkxZKVxuICAgICAgfVxuICAgICAgaWYoZGlzYWJsZWRWYWwgIT09IG51bGwpe1xuICAgICAgICBlbC5kaXNhYmxlZCA9IGRpc2FibGVkVmFsID09PSBcInRydWVcIiA/IHRydWUgOiBmYWxzZVxuICAgICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoUEhYX0RJU0FCTEVEKVxuICAgICAgfVxuICAgICAgLy8gcmVtb3ZlIGNsYXNzZXNcbiAgICAgIFBIWF9FVkVOVF9DTEFTU0VTLmZvckVhY2goY2xhc3NOYW1lID0+IERPTS5yZW1vdmVDbGFzcyhlbCwgY2xhc3NOYW1lKSlcbiAgICAgIC8vIHJlc3RvcmUgZGlzYWJsZXNcbiAgICAgIGxldCBkaXNhYmxlUmVzdG9yZSA9IGVsLmdldEF0dHJpYnV0ZShQSFhfRElTQUJMRV9XSVRIX1JFU1RPUkUpXG4gICAgICBpZihkaXNhYmxlUmVzdG9yZSAhPT0gbnVsbCl7XG4gICAgICAgIGVsLmlubmVyVGV4dCA9IGRpc2FibGVSZXN0b3JlXG4gICAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZShQSFhfRElTQUJMRV9XSVRIX1JFU1RPUkUpXG4gICAgICB9XG4gICAgICBsZXQgdG9FbCA9IERPTS5wcml2YXRlKGVsLCBQSFhfUkVGKVxuICAgICAgaWYodG9FbCl7XG4gICAgICAgIGxldCBob29rID0gdGhpcy50cmlnZ2VyQmVmb3JlVXBkYXRlSG9vayhlbCwgdG9FbClcbiAgICAgICAgRE9NUGF0Y2gucGF0Y2hFbChlbCwgdG9FbCwgdGhpcy5saXZlU29ja2V0LmdldEFjdGl2ZUVsZW1lbnQoKSlcbiAgICAgICAgaWYoaG9vayl7IGhvb2suX191cGRhdGVkKCkgfVxuICAgICAgICBET00uZGVsZXRlUHJpdmF0ZShlbCwgUEhYX1JFRilcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgcHV0UmVmKGVsZW1lbnRzLCBldmVudCwgb3B0cyA9IHt9KXtcbiAgICBsZXQgbmV3UmVmID0gdGhpcy5yZWYrK1xuICAgIGxldCBkaXNhYmxlV2l0aCA9IHRoaXMuYmluZGluZyhQSFhfRElTQUJMRV9XSVRIKVxuICAgIGlmKG9wdHMubG9hZGluZyl7IGVsZW1lbnRzID0gZWxlbWVudHMuY29uY2F0KERPTS5hbGwoZG9jdW1lbnQsIG9wdHMubG9hZGluZykpfVxuXG4gICAgZWxlbWVudHMuZm9yRWFjaChlbCA9PiB7XG4gICAgICBlbC5jbGFzc0xpc3QuYWRkKGBwaHgtJHtldmVudH0tbG9hZGluZ2ApXG4gICAgICBlbC5zZXRBdHRyaWJ1dGUoUEhYX1JFRiwgbmV3UmVmKVxuICAgICAgZWwuc2V0QXR0cmlidXRlKFBIWF9SRUZfU1JDLCB0aGlzLmVsLmlkKVxuICAgICAgbGV0IGRpc2FibGVUZXh0ID0gZWwuZ2V0QXR0cmlidXRlKGRpc2FibGVXaXRoKVxuICAgICAgaWYoZGlzYWJsZVRleHQgIT09IG51bGwpe1xuICAgICAgICBpZighZWwuZ2V0QXR0cmlidXRlKFBIWF9ESVNBQkxFX1dJVEhfUkVTVE9SRSkpe1xuICAgICAgICAgIGVsLnNldEF0dHJpYnV0ZShQSFhfRElTQUJMRV9XSVRIX1JFU1RPUkUsIGVsLmlubmVyVGV4dClcbiAgICAgICAgfVxuICAgICAgICBpZihkaXNhYmxlVGV4dCAhPT0gXCJcIil7IGVsLmlubmVyVGV4dCA9IGRpc2FibGVUZXh0IH1cbiAgICAgICAgZWwuc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgXCJcIilcbiAgICAgIH1cbiAgICB9KVxuICAgIHJldHVybiBbbmV3UmVmLCBlbGVtZW50cywgb3B0c11cbiAgfVxuXG4gIGNvbXBvbmVudElEKGVsKXtcbiAgICBsZXQgY2lkID0gZWwuZ2V0QXR0cmlidXRlICYmIGVsLmdldEF0dHJpYnV0ZShQSFhfQ09NUE9ORU5UKVxuICAgIHJldHVybiBjaWQgPyBwYXJzZUludChjaWQpIDogbnVsbFxuICB9XG5cbiAgdGFyZ2V0Q29tcG9uZW50SUQodGFyZ2V0LCB0YXJnZXRDdHgsIG9wdHMgPSB7fSl7XG4gICAgaWYoaXNDaWQodGFyZ2V0Q3R4KSl7IHJldHVybiB0YXJnZXRDdHggfVxuXG4gICAgbGV0IGNpZE9yU2VsZWN0b3IgPSB0YXJnZXQuZ2V0QXR0cmlidXRlKHRoaXMuYmluZGluZyhcInRhcmdldFwiKSlcbiAgICBpZihpc0NpZChjaWRPclNlbGVjdG9yKSl7XG4gICAgICByZXR1cm4gcGFyc2VJbnQoY2lkT3JTZWxlY3RvcilcbiAgICB9IGVsc2UgaWYodGFyZ2V0Q3R4ICYmIChjaWRPclNlbGVjdG9yICE9PSBudWxsIHx8IG9wdHMudGFyZ2V0KSl7XG4gICAgICByZXR1cm4gdGhpcy5jbG9zZXN0Q29tcG9uZW50SUQodGFyZ2V0Q3R4KVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cbiAgfVxuXG4gIGNsb3Nlc3RDb21wb25lbnRJRCh0YXJnZXRDdHgpe1xuICAgIGlmKGlzQ2lkKHRhcmdldEN0eCkpe1xuICAgICAgcmV0dXJuIHRhcmdldEN0eFxuICAgIH0gZWxzZSBpZih0YXJnZXRDdHgpe1xuICAgICAgcmV0dXJuIG1heWJlKHRhcmdldEN0eC5jbG9zZXN0KGBbJHtQSFhfQ09NUE9ORU5UfV1gKSwgZWwgPT4gdGhpcy5vd25zRWxlbWVudChlbCkgJiYgdGhpcy5jb21wb25lbnRJRChlbCkpXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuICB9XG5cbiAgcHVzaEhvb2tFdmVudCh0YXJnZXRDdHgsIGV2ZW50LCBwYXlsb2FkLCBvblJlcGx5KXtcbiAgICBpZighdGhpcy5pc0Nvbm5lY3RlZCgpKXtcbiAgICAgIHRoaXMubG9nKFwiaG9va1wiLCAoKSA9PiBbXCJ1bmFibGUgdG8gcHVzaCBob29rIGV2ZW50LiBMaXZlVmlldyBub3QgY29ubmVjdGVkXCIsIGV2ZW50LCBwYXlsb2FkXSlcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICBsZXQgW3JlZiwgZWxzLCBvcHRzXSA9IHRoaXMucHV0UmVmKFtdLCBcImhvb2tcIilcbiAgICB0aGlzLnB1c2hXaXRoUmVwbHkoKCkgPT4gW3JlZiwgZWxzLCBvcHRzXSwgXCJldmVudFwiLCB7XG4gICAgICB0eXBlOiBcImhvb2tcIixcbiAgICAgIGV2ZW50OiBldmVudCxcbiAgICAgIHZhbHVlOiBwYXlsb2FkLFxuICAgICAgY2lkOiB0aGlzLmNsb3Nlc3RDb21wb25lbnRJRCh0YXJnZXRDdHgpXG4gICAgfSwgKHJlc3AsIHJlcGx5KSA9PiBvblJlcGx5KHJlcGx5LCByZWYpKVxuXG4gICAgcmV0dXJuIHJlZlxuICB9XG5cbiAgZXh0cmFjdE1ldGEoZWwsIG1ldGEsIHZhbHVlKXtcbiAgICBsZXQgcHJlZml4ID0gdGhpcy5iaW5kaW5nKFwidmFsdWUtXCIpXG4gICAgZm9yKGxldCBpID0gMDsgaSA8IGVsLmF0dHJpYnV0ZXMubGVuZ3RoOyBpKyspe1xuICAgICAgaWYoIW1ldGEpeyBtZXRhID0ge30gfVxuICAgICAgbGV0IG5hbWUgPSBlbC5hdHRyaWJ1dGVzW2ldLm5hbWVcbiAgICAgIGlmKG5hbWUuc3RhcnRzV2l0aChwcmVmaXgpKXsgbWV0YVtuYW1lLnJlcGxhY2UocHJlZml4LCBcIlwiKV0gPSBlbC5nZXRBdHRyaWJ1dGUobmFtZSkgfVxuICAgIH1cbiAgICBpZihlbC52YWx1ZSAhPT0gdW5kZWZpbmVkKXtcbiAgICAgIGlmKCFtZXRhKXsgbWV0YSA9IHt9IH1cbiAgICAgIG1ldGEudmFsdWUgPSBlbC52YWx1ZVxuXG4gICAgICBpZihlbC50YWdOYW1lID09PSBcIklOUFVUXCIgJiYgQ0hFQ0tBQkxFX0lOUFVUUy5pbmRleE9mKGVsLnR5cGUpID49IDAgJiYgIWVsLmNoZWNrZWQpe1xuICAgICAgICBkZWxldGUgbWV0YS52YWx1ZVxuICAgICAgfVxuICAgIH1cbiAgICBpZih2YWx1ZSl7XG4gICAgICBpZighbWV0YSl7IG1ldGEgPSB7fSB9XG4gICAgICBmb3IobGV0IGtleSBpbiB2YWx1ZSl7IG1ldGFba2V5XSA9IHZhbHVlW2tleV0gfVxuICAgIH1cbiAgICByZXR1cm4gbWV0YVxuICB9XG5cbiAgcHVzaEV2ZW50KHR5cGUsIGVsLCB0YXJnZXRDdHgsIHBoeEV2ZW50LCBtZXRhLCBvcHRzID0ge30pe1xuICAgIHRoaXMucHVzaFdpdGhSZXBseSgoKSA9PiB0aGlzLnB1dFJlZihbZWxdLCB0eXBlLCBvcHRzKSwgXCJldmVudFwiLCB7XG4gICAgICB0eXBlOiB0eXBlLFxuICAgICAgZXZlbnQ6IHBoeEV2ZW50LFxuICAgICAgdmFsdWU6IHRoaXMuZXh0cmFjdE1ldGEoZWwsIG1ldGEsIG9wdHMudmFsdWUpLFxuICAgICAgY2lkOiB0aGlzLnRhcmdldENvbXBvbmVudElEKGVsLCB0YXJnZXRDdHgsIG9wdHMpXG4gICAgfSlcbiAgfVxuXG4gIHB1c2hGaWxlUHJvZ3Jlc3MoZmlsZUVsLCBlbnRyeVJlZiwgcHJvZ3Jlc3MsIG9uUmVwbHkgPSBmdW5jdGlvbiAoKXsgfSl7XG4gICAgdGhpcy5saXZlU29ja2V0LndpdGhpbk93bmVycyhmaWxlRWwuZm9ybSwgKHZpZXcsIHRhcmdldEN0eCkgPT4ge1xuICAgICAgdmlldy5wdXNoV2l0aFJlcGx5KG51bGwsIFwicHJvZ3Jlc3NcIiwge1xuICAgICAgICBldmVudDogZmlsZUVsLmdldEF0dHJpYnV0ZSh2aWV3LmJpbmRpbmcoUEhYX1BST0dSRVNTKSksXG4gICAgICAgIHJlZjogZmlsZUVsLmdldEF0dHJpYnV0ZShQSFhfVVBMT0FEX1JFRiksXG4gICAgICAgIGVudHJ5X3JlZjogZW50cnlSZWYsXG4gICAgICAgIHByb2dyZXNzOiBwcm9ncmVzcyxcbiAgICAgICAgY2lkOiB2aWV3LnRhcmdldENvbXBvbmVudElEKGZpbGVFbC5mb3JtLCB0YXJnZXRDdHgpXG4gICAgICB9LCBvblJlcGx5KVxuICAgIH0pXG4gIH1cblxuICBwdXNoSW5wdXQoaW5wdXRFbCwgdGFyZ2V0Q3R4LCBmb3JjZUNpZCwgcGh4RXZlbnQsIG9wdHMsIGNhbGxiYWNrKXtcbiAgICBsZXQgdXBsb2Fkc1xuICAgIGxldCBjaWQgPSBpc0NpZChmb3JjZUNpZCkgPyBmb3JjZUNpZCA6IHRoaXMudGFyZ2V0Q29tcG9uZW50SUQoaW5wdXRFbC5mb3JtLCB0YXJnZXRDdHgpXG4gICAgbGV0IHJlZkdlbmVyYXRvciA9ICgpID0+IHRoaXMucHV0UmVmKFtpbnB1dEVsLCBpbnB1dEVsLmZvcm1dLCBcImNoYW5nZVwiLCBvcHRzKVxuICAgIGxldCBmb3JtRGF0YVxuICAgIGlmKGlucHV0RWwuZ2V0QXR0cmlidXRlKHRoaXMuYmluZGluZyhcImNoYW5nZVwiKSkpe1xuICAgICAgZm9ybURhdGEgPSBzZXJpYWxpemVGb3JtKGlucHV0RWwuZm9ybSwge190YXJnZXQ6IG9wdHMuX3RhcmdldH0sIFtpbnB1dEVsLm5hbWVdKVxuICAgIH0gZWxzZSB7XG4gICAgICBmb3JtRGF0YSA9IHNlcmlhbGl6ZUZvcm0oaW5wdXRFbC5mb3JtLCB7X3RhcmdldDogb3B0cy5fdGFyZ2V0fSlcbiAgICB9XG4gICAgaWYoRE9NLmlzVXBsb2FkSW5wdXQoaW5wdXRFbCkgJiYgaW5wdXRFbC5maWxlcyAmJiBpbnB1dEVsLmZpbGVzLmxlbmd0aCA+IDApe1xuICAgICAgTGl2ZVVwbG9hZGVyLnRyYWNrRmlsZXMoaW5wdXRFbCwgQXJyYXkuZnJvbShpbnB1dEVsLmZpbGVzKSlcbiAgICB9XG4gICAgdXBsb2FkcyA9IExpdmVVcGxvYWRlci5zZXJpYWxpemVVcGxvYWRzKGlucHV0RWwpXG4gICAgbGV0IGV2ZW50ID0ge1xuICAgICAgdHlwZTogXCJmb3JtXCIsXG4gICAgICBldmVudDogcGh4RXZlbnQsXG4gICAgICB2YWx1ZTogZm9ybURhdGEsXG4gICAgICB1cGxvYWRzOiB1cGxvYWRzLFxuICAgICAgY2lkOiBjaWRcbiAgICB9XG4gICAgdGhpcy5wdXNoV2l0aFJlcGx5KHJlZkdlbmVyYXRvciwgXCJldmVudFwiLCBldmVudCwgcmVzcCA9PiB7XG4gICAgICBET00uc2hvd0Vycm9yKGlucHV0RWwsIHRoaXMubGl2ZVNvY2tldC5iaW5kaW5nKFBIWF9GRUVEQkFDS19GT1IpKVxuICAgICAgaWYoRE9NLmlzVXBsb2FkSW5wdXQoaW5wdXRFbCkgJiYgaW5wdXRFbC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXBoeC1hdXRvLXVwbG9hZFwiKSAhPT0gbnVsbCl7XG4gICAgICAgIGlmKExpdmVVcGxvYWRlci5maWxlc0F3YWl0aW5nUHJlZmxpZ2h0KGlucHV0RWwpLmxlbmd0aCA+IDApe1xuICAgICAgICAgIGxldCBbcmVmLCBfZWxzXSA9IHJlZkdlbmVyYXRvcigpXG4gICAgICAgICAgdGhpcy51cGxvYWRGaWxlcyhpbnB1dEVsLmZvcm0sIHRhcmdldEN0eCwgcmVmLCBjaWQsIChfdXBsb2FkcykgPT4ge1xuICAgICAgICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2socmVzcClcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlckF3YWl0aW5nU3VibWl0KGlucHV0RWwuZm9ybSlcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjayhyZXNwKVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICB0cmlnZ2VyQXdhaXRpbmdTdWJtaXQoZm9ybUVsKXtcbiAgICBsZXQgYXdhaXRpbmdTdWJtaXQgPSB0aGlzLmdldFNjaGVkdWxlZFN1Ym1pdChmb3JtRWwpXG4gICAgaWYoYXdhaXRpbmdTdWJtaXQpe1xuICAgICAgbGV0IFtfZWwsIF9yZWYsIF9vcHRzLCBjYWxsYmFja10gPSBhd2FpdGluZ1N1Ym1pdFxuICAgICAgdGhpcy5jYW5jZWxTdWJtaXQoZm9ybUVsKVxuICAgICAgY2FsbGJhY2soKVxuICAgIH1cbiAgfVxuXG4gIGdldFNjaGVkdWxlZFN1Ym1pdChmb3JtRWwpe1xuICAgIHJldHVybiB0aGlzLmZvcm1TdWJtaXRzLmZpbmQoKFtlbCwgX3JlZiwgX29wdHMsIF9jYWxsYmFja10pID0+IGVsLmlzU2FtZU5vZGUoZm9ybUVsKSlcbiAgfVxuXG4gIHNjaGVkdWxlU3VibWl0KGZvcm1FbCwgcmVmLCBvcHRzLCBjYWxsYmFjayl7XG4gICAgaWYodGhpcy5nZXRTY2hlZHVsZWRTdWJtaXQoZm9ybUVsKSl7IHJldHVybiB0cnVlIH1cbiAgICB0aGlzLmZvcm1TdWJtaXRzLnB1c2goW2Zvcm1FbCwgcmVmLCBvcHRzLCBjYWxsYmFja10pXG4gIH1cblxuICBjYW5jZWxTdWJtaXQoZm9ybUVsKXtcbiAgICB0aGlzLmZvcm1TdWJtaXRzID0gdGhpcy5mb3JtU3VibWl0cy5maWx0ZXIoKFtlbCwgcmVmLCBfY2FsbGJhY2tdKSA9PiB7XG4gICAgICBpZihlbC5pc1NhbWVOb2RlKGZvcm1FbCkpe1xuICAgICAgICB0aGlzLnVuZG9SZWZzKHJlZilcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICBkaXNhYmxlRm9ybShmb3JtRWwsIG9wdHMgPSB7fSl7XG4gICAgbGV0IGZpbHRlcklnbm9yZWQgPSBlbCA9PiB7XG4gICAgICBsZXQgdXNlcklnbm9yZWQgPSBjbG9zZXN0UGh4QmluZGluZyhlbCwgYCR7dGhpcy5iaW5kaW5nKFBIWF9VUERBVEUpfT1pZ25vcmVgLCBlbC5mb3JtKVxuICAgICAgcmV0dXJuICEodXNlcklnbm9yZWQgfHwgY2xvc2VzdFBoeEJpbmRpbmcoZWwsIFwiZGF0YS1waHgtdXBkYXRlPWlnbm9yZVwiLCBlbC5mb3JtKSlcbiAgICB9XG4gICAgbGV0IGZpbHRlckRpc2FibGVzID0gZWwgPT4ge1xuICAgICAgcmV0dXJuIGVsLmhhc0F0dHJpYnV0ZSh0aGlzLmJpbmRpbmcoUEhYX0RJU0FCTEVfV0lUSCkpXG4gICAgfVxuICAgIGxldCBmaWx0ZXJCdXR0b24gPSBlbCA9PiBlbC50YWdOYW1lID09IFwiQlVUVE9OXCJcblxuICAgIGxldCBmaWx0ZXJJbnB1dCA9IGVsID0+IFtcIklOUFVUXCIsIFwiVEVYVEFSRUFcIiwgXCJTRUxFQ1RcIl0uaW5jbHVkZXMoZWwudGFnTmFtZSlcblxuICAgIGxldCBmb3JtRWxlbWVudHMgPSBBcnJheS5mcm9tKGZvcm1FbC5lbGVtZW50cylcbiAgICBsZXQgZGlzYWJsZXMgPSBmb3JtRWxlbWVudHMuZmlsdGVyKGZpbHRlckRpc2FibGVzKVxuICAgIGxldCBidXR0b25zID0gZm9ybUVsZW1lbnRzLmZpbHRlcihmaWx0ZXJCdXR0b24pLmZpbHRlcihmaWx0ZXJJZ25vcmVkKVxuICAgIGxldCBpbnB1dHMgPSBmb3JtRWxlbWVudHMuZmlsdGVyKGZpbHRlcklucHV0KS5maWx0ZXIoZmlsdGVySWdub3JlZClcblxuICAgIGJ1dHRvbnMuZm9yRWFjaChidXR0b24gPT4ge1xuICAgICAgYnV0dG9uLnNldEF0dHJpYnV0ZShQSFhfRElTQUJMRUQsIGJ1dHRvbi5kaXNhYmxlZClcbiAgICAgIGJ1dHRvbi5kaXNhYmxlZCA9IHRydWVcbiAgICB9KVxuICAgIGlucHV0cy5mb3JFYWNoKGlucHV0ID0+IHtcbiAgICAgIGlucHV0LnNldEF0dHJpYnV0ZShQSFhfUkVBRE9OTFksIGlucHV0LnJlYWRPbmx5KVxuICAgICAgaW5wdXQucmVhZE9ubHkgPSB0cnVlXG4gICAgICBpZihpbnB1dC5maWxlcyl7XG4gICAgICAgIGlucHV0LnNldEF0dHJpYnV0ZShQSFhfRElTQUJMRUQsIGlucHV0LmRpc2FibGVkKVxuICAgICAgICBpbnB1dC5kaXNhYmxlZCA9IHRydWVcbiAgICAgIH1cbiAgICB9KVxuICAgIGZvcm1FbC5zZXRBdHRyaWJ1dGUodGhpcy5iaW5kaW5nKFBIWF9QQUdFX0xPQURJTkcpLCBcIlwiKVxuICAgIHJldHVybiB0aGlzLnB1dFJlZihbZm9ybUVsXS5jb25jYXQoZGlzYWJsZXMpLmNvbmNhdChidXR0b25zKS5jb25jYXQoaW5wdXRzKSwgXCJzdWJtaXRcIiwgb3B0cylcbiAgfVxuXG4gIHB1c2hGb3JtU3VibWl0KGZvcm1FbCwgdGFyZ2V0Q3R4LCBwaHhFdmVudCwgc3VibWl0dGVyLCBvcHRzLCBvblJlcGx5KXtcbiAgICBsZXQgcmVmR2VuZXJhdG9yID0gKCkgPT4gdGhpcy5kaXNhYmxlRm9ybShmb3JtRWwsIG9wdHMpXG4gICAgbGV0IGNpZCA9IHRoaXMudGFyZ2V0Q29tcG9uZW50SUQoZm9ybUVsLCB0YXJnZXRDdHgpXG4gICAgaWYoTGl2ZVVwbG9hZGVyLmhhc1VwbG9hZHNJblByb2dyZXNzKGZvcm1FbCkpe1xuICAgICAgbGV0IFtyZWYsIF9lbHNdID0gcmVmR2VuZXJhdG9yKClcbiAgICAgIGxldCBwdXNoID0gKCkgPT4gdGhpcy5wdXNoRm9ybVN1Ym1pdChmb3JtRWwsIHN1Ym1pdHRlciwgdGFyZ2V0Q3R4LCBwaHhFdmVudCwgb3B0cywgb25SZXBseSlcbiAgICAgIHJldHVybiB0aGlzLnNjaGVkdWxlU3VibWl0KGZvcm1FbCwgcmVmLCBvcHRzLCBwdXNoKVxuICAgIH0gZWxzZSBpZihMaXZlVXBsb2FkZXIuaW5wdXRzQXdhaXRpbmdQcmVmbGlnaHQoZm9ybUVsKS5sZW5ndGggPiAwKXtcbiAgICAgIGxldCBbcmVmLCBlbHNdID0gcmVmR2VuZXJhdG9yKClcbiAgICAgIGxldCBwcm94eVJlZkdlbiA9ICgpID0+IFtyZWYsIGVscywgb3B0c11cbiAgICAgIHRoaXMudXBsb2FkRmlsZXMoZm9ybUVsLCB0YXJnZXRDdHgsIHJlZiwgY2lkLCAoX3VwbG9hZHMpID0+IHtcbiAgICAgICAgbGV0IGZvcm1EYXRhID0gc2VyaWFsaXplRm9ybShmb3JtRWwsIHtzdWJtaXR0ZXJ9KVxuICAgICAgICB0aGlzLnB1c2hXaXRoUmVwbHkocHJveHlSZWZHZW4sIFwiZXZlbnRcIiwge1xuICAgICAgICAgIHR5cGU6IFwiZm9ybVwiLFxuICAgICAgICAgIGV2ZW50OiBwaHhFdmVudCxcbiAgICAgICAgICB2YWx1ZTogZm9ybURhdGEsXG4gICAgICAgICAgY2lkOiBjaWRcbiAgICAgICAgfSwgb25SZXBseSlcbiAgICAgIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCBmb3JtRGF0YSA9IHNlcmlhbGl6ZUZvcm0oZm9ybUVsLCB7c3VibWl0dGVyfSlcbiAgICAgIHRoaXMucHVzaFdpdGhSZXBseShyZWZHZW5lcmF0b3IsIFwiZXZlbnRcIiwge1xuICAgICAgICB0eXBlOiBcImZvcm1cIixcbiAgICAgICAgZXZlbnQ6IHBoeEV2ZW50LFxuICAgICAgICB2YWx1ZTogZm9ybURhdGEsXG4gICAgICAgIGNpZDogY2lkXG4gICAgICB9LCBvblJlcGx5KVxuICAgIH1cbiAgfVxuXG4gIHVwbG9hZEZpbGVzKGZvcm1FbCwgdGFyZ2V0Q3R4LCByZWYsIGNpZCwgb25Db21wbGV0ZSl7XG4gICAgbGV0IGpvaW5Db3VudEF0VXBsb2FkID0gdGhpcy5qb2luQ291bnRcbiAgICBsZXQgaW5wdXRFbHMgPSBMaXZlVXBsb2FkZXIuYWN0aXZlRmlsZUlucHV0cyhmb3JtRWwpXG4gICAgbGV0IG51bUZpbGVJbnB1dHNJblByb2dyZXNzID0gaW5wdXRFbHMubGVuZ3RoXG5cbiAgICAvLyBnZXQgZWFjaCBmaWxlIGlucHV0XG4gICAgaW5wdXRFbHMuZm9yRWFjaChpbnB1dEVsID0+IHtcbiAgICAgIGxldCB1cGxvYWRlciA9IG5ldyBMaXZlVXBsb2FkZXIoaW5wdXRFbCwgdGhpcywgKCkgPT4ge1xuICAgICAgICBudW1GaWxlSW5wdXRzSW5Qcm9ncmVzcy0tXG4gICAgICAgIGlmKG51bUZpbGVJbnB1dHNJblByb2dyZXNzID09PSAwKXsgb25Db21wbGV0ZSgpIH1cbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLnVwbG9hZGVyc1tpbnB1dEVsXSA9IHVwbG9hZGVyXG4gICAgICBsZXQgZW50cmllcyA9IHVwbG9hZGVyLmVudHJpZXMoKS5tYXAoZW50cnkgPT4gZW50cnkudG9QcmVmbGlnaHRQYXlsb2FkKCkpXG5cbiAgICAgIGxldCBwYXlsb2FkID0ge1xuICAgICAgICByZWY6IGlucHV0RWwuZ2V0QXR0cmlidXRlKFBIWF9VUExPQURfUkVGKSxcbiAgICAgICAgZW50cmllczogZW50cmllcyxcbiAgICAgICAgY2lkOiB0aGlzLnRhcmdldENvbXBvbmVudElEKGlucHV0RWwuZm9ybSwgdGFyZ2V0Q3R4KVxuICAgICAgfVxuXG4gICAgICB0aGlzLmxvZyhcInVwbG9hZFwiLCAoKSA9PiBbXCJzZW5kaW5nIHByZWZsaWdodCByZXF1ZXN0XCIsIHBheWxvYWRdKVxuXG4gICAgICB0aGlzLnB1c2hXaXRoUmVwbHkobnVsbCwgXCJhbGxvd191cGxvYWRcIiwgcGF5bG9hZCwgcmVzcCA9PiB7XG4gICAgICAgIHRoaXMubG9nKFwidXBsb2FkXCIsICgpID0+IFtcImdvdCBwcmVmbGlnaHQgcmVzcG9uc2VcIiwgcmVzcF0pXG4gICAgICAgIGlmKHJlc3AuZXJyb3Ipe1xuICAgICAgICAgIHRoaXMudW5kb1JlZnMocmVmKVxuICAgICAgICAgIGxldCBbZW50cnlfcmVmLCByZWFzb25dID0gcmVzcC5lcnJvclxuICAgICAgICAgIHRoaXMubG9nKFwidXBsb2FkXCIsICgpID0+IFtgZXJyb3IgZm9yIGVudHJ5ICR7ZW50cnlfcmVmfWAsIHJlYXNvbl0pXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbGV0IG9uRXJyb3IgPSAoY2FsbGJhY2spID0+IHtcbiAgICAgICAgICAgIHRoaXMuY2hhbm5lbC5vbkVycm9yKCgpID0+IHtcbiAgICAgICAgICAgICAgaWYodGhpcy5qb2luQ291bnQgPT09IGpvaW5Db3VudEF0VXBsb2FkKXsgY2FsbGJhY2soKSB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgICB1cGxvYWRlci5pbml0QWRhcHRlclVwbG9hZChyZXNwLCBvbkVycm9yLCB0aGlzLmxpdmVTb2NrZXQpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfSlcbiAgfVxuXG4gIGRpc3BhdGNoVXBsb2FkcyhuYW1lLCBmaWxlc09yQmxvYnMpe1xuICAgIGxldCBpbnB1dHMgPSBET00uZmluZFVwbG9hZElucHV0cyh0aGlzLmVsKS5maWx0ZXIoZWwgPT4gZWwubmFtZSA9PT0gbmFtZSlcbiAgICBpZihpbnB1dHMubGVuZ3RoID09PSAwKXsgbG9nRXJyb3IoYG5vIGxpdmUgZmlsZSBpbnB1dHMgZm91bmQgbWF0Y2hpbmcgdGhlIG5hbWUgXCIke25hbWV9XCJgKSB9XG4gICAgZWxzZSBpZihpbnB1dHMubGVuZ3RoID4gMSl7IGxvZ0Vycm9yKGBkdXBsaWNhdGUgbGl2ZSBmaWxlIGlucHV0cyBmb3VuZCBtYXRjaGluZyB0aGUgbmFtZSBcIiR7bmFtZX1cImApIH1cbiAgICBlbHNlIHsgRE9NLmRpc3BhdGNoRXZlbnQoaW5wdXRzWzBdLCBQSFhfVFJBQ0tfVVBMT0FEUywge2RldGFpbDoge2ZpbGVzOiBmaWxlc09yQmxvYnN9fSkgfVxuICB9XG5cbiAgcHVzaEZvcm1SZWNvdmVyeShmb3JtLCBuZXdDaWQsIGNhbGxiYWNrKXtcbiAgICB0aGlzLmxpdmVTb2NrZXQud2l0aGluT3duZXJzKGZvcm0sICh2aWV3LCB0YXJnZXRDdHgpID0+IHtcbiAgICAgIGxldCBpbnB1dCA9IEFycmF5LmZyb20oZm9ybS5lbGVtZW50cykuZmluZChlbCA9PiB7XG4gICAgICAgIHJldHVybiBET00uaXNGb3JtSW5wdXQoZWwpICYmIGVsLnR5cGUgIT09IFwiaGlkZGVuXCIgJiYgIWVsLmhhc0F0dHJpYnV0ZSh0aGlzLmJpbmRpbmcoXCJjaGFuZ2VcIikpXG4gICAgICB9KVxuICAgICAgbGV0IHBoeEV2ZW50ID0gZm9ybS5nZXRBdHRyaWJ1dGUodGhpcy5iaW5kaW5nKFBIWF9BVVRPX1JFQ09WRVIpKSB8fCBmb3JtLmdldEF0dHJpYnV0ZSh0aGlzLmJpbmRpbmcoXCJjaGFuZ2VcIikpXG5cbiAgICAgIEpTLmV4ZWMoXCJjaGFuZ2VcIiwgcGh4RXZlbnQsIHZpZXcsIGlucHV0LCBbXCJwdXNoXCIsIHtfdGFyZ2V0OiBpbnB1dC5uYW1lLCBuZXdDaWQ6IG5ld0NpZCwgY2FsbGJhY2s6IGNhbGxiYWNrfV0pXG4gICAgfSlcbiAgfVxuXG4gIHB1c2hMaW5rUGF0Y2goaHJlZiwgdGFyZ2V0RWwsIGNhbGxiYWNrKXtcbiAgICBsZXQgbGlua1JlZiA9IHRoaXMubGl2ZVNvY2tldC5zZXRQZW5kaW5nTGluayhocmVmKVxuICAgIGxldCByZWZHZW4gPSB0YXJnZXRFbCA/ICgpID0+IHRoaXMucHV0UmVmKFt0YXJnZXRFbF0sIFwiY2xpY2tcIikgOiBudWxsXG4gICAgbGV0IGZhbGxiYWNrID0gKCkgPT4gdGhpcy5saXZlU29ja2V0LnJlZGlyZWN0KHdpbmRvdy5sb2NhdGlvbi5ocmVmKVxuXG4gICAgbGV0IHB1c2ggPSB0aGlzLnB1c2hXaXRoUmVwbHkocmVmR2VuLCBcImxpdmVfcGF0Y2hcIiwge3VybDogaHJlZn0sIHJlc3AgPT4ge1xuICAgICAgdGhpcy5saXZlU29ja2V0LnJlcXVlc3RET01VcGRhdGUoKCkgPT4ge1xuICAgICAgICBpZihyZXNwLmxpbmtfcmVkaXJlY3Qpe1xuICAgICAgICAgIHRoaXMubGl2ZVNvY2tldC5yZXBsYWNlTWFpbihocmVmLCBudWxsLCBjYWxsYmFjaywgbGlua1JlZilcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZih0aGlzLmxpdmVTb2NrZXQuY29tbWl0UGVuZGluZ0xpbmsobGlua1JlZikpe1xuICAgICAgICAgICAgdGhpcy5ocmVmID0gaHJlZlxuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLmFwcGx5UGVuZGluZ1VwZGF0ZXMoKVxuICAgICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKGxpbmtSZWYpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfSlcblxuICAgIGlmKHB1c2gpe1xuICAgICAgcHVzaC5yZWNlaXZlKFwidGltZW91dFwiLCBmYWxsYmFjaylcbiAgICB9IGVsc2Uge1xuICAgICAgZmFsbGJhY2soKVxuICAgIH1cbiAgfVxuXG4gIGZvcm1zRm9yUmVjb3ZlcnkoaHRtbCl7XG4gICAgaWYodGhpcy5qb2luQ291bnQgPT09IDApeyByZXR1cm4gW10gfVxuXG4gICAgbGV0IHBoeENoYW5nZSA9IHRoaXMuYmluZGluZyhcImNoYW5nZVwiKVxuICAgIGxldCB0ZW1wbGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZW1wbGF0ZVwiKVxuICAgIHRlbXBsYXRlLmlubmVySFRNTCA9IGh0bWxcblxuICAgIHJldHVybiAoXG4gICAgICBET00uYWxsKHRoaXMuZWwsIGBmb3JtWyR7cGh4Q2hhbmdlfV1gKVxuICAgICAgICAuZmlsdGVyKGZvcm0gPT4gZm9ybS5pZCAmJiB0aGlzLm93bnNFbGVtZW50KGZvcm0pKVxuICAgICAgICAuZmlsdGVyKGZvcm0gPT4gZm9ybS5lbGVtZW50cy5sZW5ndGggPiAwKVxuICAgICAgICAuZmlsdGVyKGZvcm0gPT4gZm9ybS5nZXRBdHRyaWJ1dGUodGhpcy5iaW5kaW5nKFBIWF9BVVRPX1JFQ09WRVIpKSAhPT0gXCJpZ25vcmVcIilcbiAgICAgICAgLm1hcChmb3JtID0+IHtcbiAgICAgICAgICBsZXQgbmV3Rm9ybSA9IHRlbXBsYXRlLmNvbnRlbnQucXVlcnlTZWxlY3RvcihgZm9ybVtpZD1cIiR7Zm9ybS5pZH1cIl1bJHtwaHhDaGFuZ2V9PVwiJHtmb3JtLmdldEF0dHJpYnV0ZShwaHhDaGFuZ2UpfVwiXWApXG4gICAgICAgICAgaWYobmV3Rm9ybSl7XG4gICAgICAgICAgICByZXR1cm4gW2Zvcm0sIG5ld0Zvcm0sIHRoaXMudGFyZ2V0Q29tcG9uZW50SUQobmV3Rm9ybSldXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBbZm9ybSwgbnVsbCwgbnVsbF1cbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIC5maWx0ZXIoKFtmb3JtLCBuZXdGb3JtLCBuZXdDaWRdKSA9PiBuZXdGb3JtKVxuICAgIClcbiAgfVxuXG4gIG1heWJlUHVzaENvbXBvbmVudHNEZXN0cm95ZWQoZGVzdHJveWVkQ0lEcyl7XG4gICAgbGV0IHdpbGxEZXN0cm95Q0lEcyA9IGRlc3Ryb3llZENJRHMuZmlsdGVyKGNpZCA9PiB7XG4gICAgICByZXR1cm4gRE9NLmZpbmRDb21wb25lbnROb2RlTGlzdCh0aGlzLmVsLCBjaWQpLmxlbmd0aCA9PT0gMFxuICAgIH0pXG4gICAgaWYod2lsbERlc3Ryb3lDSURzLmxlbmd0aCA+IDApe1xuICAgICAgdGhpcy5wcnVuaW5nQ0lEcy5wdXNoKC4uLndpbGxEZXN0cm95Q0lEcylcblxuICAgICAgdGhpcy5wdXNoV2l0aFJlcGx5KG51bGwsIFwiY2lkc193aWxsX2Rlc3Ryb3lcIiwge2NpZHM6IHdpbGxEZXN0cm95Q0lEc30sICgpID0+IHtcbiAgICAgICAgLy8gVGhlIGNpZHMgYXJlIGVpdGhlciBiYWNrIG9uIHRoZSBwYWdlIG9yIHRoZXkgd2lsbCBiZSBmdWxseSByZW1vdmVkLFxuICAgICAgICAvLyBzbyB3ZSBjYW4gcmVtb3ZlIHRoZW0gZnJvbSB0aGUgcHJ1bmluZ0NJRHMuXG4gICAgICAgIHRoaXMucHJ1bmluZ0NJRHMgPSB0aGlzLnBydW5pbmdDSURzLmZpbHRlcihjaWQgPT4gd2lsbERlc3Ryb3lDSURzLmluZGV4T2YoY2lkKSAhPT0gLTEpXG5cbiAgICAgICAgLy8gU2VlIGlmIGFueSBvZiB0aGUgY2lkcyB3ZSB3YW50ZWQgdG8gZGVzdHJveSB3ZXJlIGFkZGVkIGJhY2ssXG4gICAgICAgIC8vIGlmIHRoZXkgd2VyZSBhZGRlZCBiYWNrLCB3ZSBkb24ndCBhY3R1YWxseSBkZXN0cm95IHRoZW0uXG4gICAgICAgIGxldCBjb21wbGV0ZWx5RGVzdHJveUNJRHMgPSB3aWxsRGVzdHJveUNJRHMuZmlsdGVyKGNpZCA9PiB7XG4gICAgICAgICAgcmV0dXJuIERPTS5maW5kQ29tcG9uZW50Tm9kZUxpc3QodGhpcy5lbCwgY2lkKS5sZW5ndGggPT09IDBcbiAgICAgICAgfSlcblxuICAgICAgICBpZihjb21wbGV0ZWx5RGVzdHJveUNJRHMubGVuZ3RoID4gMCl7XG4gICAgICAgICAgdGhpcy5wdXNoV2l0aFJlcGx5KG51bGwsIFwiY2lkc19kZXN0cm95ZWRcIiwge2NpZHM6IGNvbXBsZXRlbHlEZXN0cm95Q0lEc30sIChyZXNwKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVkLnBydW5lQ0lEcyhyZXNwLmNpZHMpXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICBvd25zRWxlbWVudChlbCl7XG4gICAgbGV0IHBhcmVudFZpZXdFbCA9IGVsLmNsb3Nlc3QoUEhYX1ZJRVdfU0VMRUNUT1IpXG4gICAgcmV0dXJuIGVsLmdldEF0dHJpYnV0ZShQSFhfUEFSRU5UX0lEKSA9PT0gdGhpcy5pZCB8fFxuICAgICAgKHBhcmVudFZpZXdFbCAmJiBwYXJlbnRWaWV3RWwuaWQgPT09IHRoaXMuaWQpIHx8XG4gICAgICAoIXBhcmVudFZpZXdFbCAmJiB0aGlzLmlzRGVhZClcbiAgfVxuXG4gIHN1Ym1pdEZvcm0oZm9ybSwgdGFyZ2V0Q3R4LCBwaHhFdmVudCwgc3VibWl0dGVyLCBvcHRzID0ge30pe1xuICAgIERPTS5wdXRQcml2YXRlKGZvcm0sIFBIWF9IQVNfU1VCTUlUVEVELCB0cnVlKVxuICAgIGxldCBwaHhGZWVkYmFjayA9IHRoaXMubGl2ZVNvY2tldC5iaW5kaW5nKFBIWF9GRUVEQkFDS19GT1IpXG4gICAgbGV0IGlucHV0cyA9IEFycmF5LmZyb20oZm9ybS5lbGVtZW50cylcbiAgICBpbnB1dHMuZm9yRWFjaChpbnB1dCA9PiBET00ucHV0UHJpdmF0ZShpbnB1dCwgUEhYX0hBU19TVUJNSVRURUQsIHRydWUpKVxuICAgIHRoaXMubGl2ZVNvY2tldC5ibHVyQWN0aXZlRWxlbWVudCh0aGlzKVxuICAgIHRoaXMucHVzaEZvcm1TdWJtaXQoZm9ybSwgdGFyZ2V0Q3R4LCBwaHhFdmVudCwgc3VibWl0dGVyLCBvcHRzLCAoKSA9PiB7XG4gICAgICBpbnB1dHMuZm9yRWFjaChpbnB1dCA9PiBET00uc2hvd0Vycm9yKGlucHV0LCBwaHhGZWVkYmFjaykpXG4gICAgICB0aGlzLmxpdmVTb2NrZXQucmVzdG9yZVByZXZpb3VzbHlBY3RpdmVGb2N1cygpXG4gICAgfSlcbiAgfVxuXG4gIGJpbmRpbmcoa2luZCl7IHJldHVybiB0aGlzLmxpdmVTb2NrZXQuYmluZGluZyhraW5kKSB9XG59XG4iLCAiLyoqIEluaXRpYWxpemVzIHRoZSBMaXZlU29ja2V0XG4gKlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBlbmRQb2ludCAtIFRoZSBzdHJpbmcgV2ViU29ja2V0IGVuZHBvaW50LCBpZSwgYFwid3NzOi8vZXhhbXBsZS5jb20vbGl2ZVwiYCxcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgXCIvbGl2ZVwiYCAoaW5oZXJpdGVkIGhvc3QgJiBwcm90b2NvbClcbiAqIEBwYXJhbSB7UGhvZW5peC5Tb2NrZXR9IHNvY2tldCAtIHRoZSByZXF1aXJlZCBQaG9lbml4IFNvY2tldCBjbGFzcyBpbXBvcnRlZCBmcm9tIFwicGhvZW5peFwiLiBGb3IgZXhhbXBsZTpcbiAqXG4gKiAgICAgaW1wb3J0IHtTb2NrZXR9IGZyb20gXCJwaG9lbml4XCJcbiAqICAgICBpbXBvcnQge0xpdmVTb2NrZXR9IGZyb20gXCJwaG9lbml4X2xpdmVfdmlld1wiXG4gKiAgICAgbGV0IGxpdmVTb2NrZXQgPSBuZXcgTGl2ZVNvY2tldChcIi9saXZlXCIsIFNvY2tldCwgey4uLn0pXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRzXSAtIE9wdGlvbmFsIGNvbmZpZ3VyYXRpb24uIE91dHNpZGUgb2Yga2V5cyBsaXN0ZWQgYmVsb3csIGFsbFxuICogY29uZmlndXJhdGlvbiBpcyBwYXNzZWQgZGlyZWN0bHkgdG8gdGhlIFBob2VuaXggU29ja2V0IGNvbnN0cnVjdG9yLlxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRzLmRlZmF1bHRzXSAtIFRoZSBvcHRpb25hbCBkZWZhdWx0cyB0byB1c2UgZm9yIHZhcmlvdXMgYmluZGluZ3MsXG4gKiBzdWNoIGFzIGBwaHgtZGVib3VuY2VgLiBTdXBwb3J0cyB0aGUgZm9sbG93aW5nIGtleXM6XG4gKlxuICogICAtIGRlYm91bmNlIC0gdGhlIG1pbGxpc2Vjb25kIHBoeC1kZWJvdW5jZSB0aW1lLiBEZWZhdWx0cyAzMDBcbiAqICAgLSB0aHJvdHRsZSAtIHRoZSBtaWxsaXNlY29uZCBwaHgtdGhyb3R0bGUgdGltZS4gRGVmYXVsdHMgMzAwXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gW29wdHMucGFyYW1zXSAtIFRoZSBvcHRpb25hbCBmdW5jdGlvbiBmb3IgcGFzc2luZyBjb25uZWN0IHBhcmFtcy5cbiAqIFRoZSBmdW5jdGlvbiByZWNlaXZlcyB0aGUgZWxlbWVudCBhc3NvY2lhdGVkIHdpdGggYSBnaXZlbiBMaXZlVmlldy4gRm9yIGV4YW1wbGU6XG4gKlxuICogICAgIChlbCkgPT4ge3ZpZXc6IGVsLmdldEF0dHJpYnV0ZShcImRhdGEtbXktdmlldy1uYW1lXCIsIHRva2VuOiB3aW5kb3cubXlUb2tlbn1cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gW29wdHMuYmluZGluZ1ByZWZpeF0gLSBUaGUgb3B0aW9uYWwgcHJlZml4IHRvIHVzZSBmb3IgYWxsIHBoeCBET00gYW5ub3RhdGlvbnMuXG4gKiBEZWZhdWx0cyB0byBcInBoeC1cIi5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0cy5ob29rc10gLSBUaGUgb3B0aW9uYWwgb2JqZWN0IGZvciByZWZlcmVuY2luZyBMaXZlVmlldyBob29rIGNhbGxiYWNrcy5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0cy51cGxvYWRlcnNdIC0gVGhlIG9wdGlvbmFsIG9iamVjdCBmb3IgcmVmZXJlbmNpbmcgTGl2ZVZpZXcgdXBsb2FkZXIgY2FsbGJhY2tzLlxuICogQHBhcmFtIHtpbnRlZ2VyfSBbb3B0cy5sb2FkZXJUaW1lb3V0XSAtIFRoZSBvcHRpb25hbCBkZWxheSBpbiBtaWxsaXNlY29uZHMgdG8gd2FpdCBiZWZvcmUgYXBwbHlcbiAqIGxvYWRpbmcgc3RhdGVzLlxuICogQHBhcmFtIHtpbnRlZ2VyfSBbb3B0cy5tYXhSZWxvYWRzXSAtIFRoZSBtYXhpbXVtIHJlbG9hZHMgYmVmb3JlIGVudGVyaW5nIGZhaWxzYWZlIG1vZGUuXG4gKiBAcGFyYW0ge2ludGVnZXJ9IFtvcHRzLnJlbG9hZEppdHRlck1pbl0gLSBUaGUgbWluaW11bSB0aW1lIGJldHdlZW4gbm9ybWFsIHJlbG9hZCBhdHRlbXB0cy5cbiAqIEBwYXJhbSB7aW50ZWdlcn0gW29wdHMucmVsb2FkSml0dGVyTWF4XSAtIFRoZSBtYXhpbXVtIHRpbWUgYmV0d2VlbiBub3JtYWwgcmVsb2FkIGF0dGVtcHRzLlxuICogQHBhcmFtIHtpbnRlZ2VyfSBbb3B0cy5mYWlsc2FmZUppdHRlcl0gLSBUaGUgdGltZSBiZXR3ZWVuIHJlbG9hZCBhdHRlbXB0cyBpbiBmYWlsc2FmZSBtb2RlLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gW29wdHMudmlld0xvZ2dlcl0gLSBUaGUgb3B0aW9uYWwgZnVuY3Rpb24gdG8gbG9nIGRlYnVnIGluZm9ybWF0aW9uLiBGb3IgZXhhbXBsZTpcbiAqXG4gKiAgICAgKHZpZXcsIGtpbmQsIG1zZywgb2JqKSA9PiBjb25zb2xlLmxvZyhgJHt2aWV3LmlkfSAke2tpbmR9OiAke21zZ30gLSBgLCBvYmopXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRzLm1ldGFkYXRhXSAtIFRoZSBvcHRpb25hbCBvYmplY3QgbWFwcGluZyBldmVudCBuYW1lcyB0byBmdW5jdGlvbnMgZm9yXG4gKiBwb3B1bGF0aW5nIGV2ZW50IG1ldGFkYXRhLiBGb3IgZXhhbXBsZTpcbiAqXG4gKiAgICAgbWV0YWRhdGE6IHtcbiAqICAgICAgIGNsaWNrOiAoZSwgZWwpID0+IHtcbiAqICAgICAgICAgcmV0dXJuIHtcbiAqICAgICAgICAgICBjdHJsS2V5OiBlLmN0cmxLZXksXG4gKiAgICAgICAgICAgbWV0YUtleTogZS5tZXRhS2V5LFxuICogICAgICAgICAgIGRldGFpbDogZS5kZXRhaWwgfHwgMSxcbiAqICAgICAgICAgfVxuICogICAgICAgfSxcbiAqICAgICAgIGtleWRvd246IChlLCBlbCkgPT4ge1xuICogICAgICAgICByZXR1cm4ge1xuICogICAgICAgICAgIGtleTogZS5rZXksXG4gKiAgICAgICAgICAgY3RybEtleTogZS5jdHJsS2V5LFxuICogICAgICAgICAgIG1ldGFLZXk6IGUubWV0YUtleSxcbiAqICAgICAgICAgICBzaGlmdEtleTogZS5zaGlmdEtleVxuICogICAgICAgICB9XG4gKiAgICAgICB9XG4gKiAgICAgfVxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRzLnNlc3Npb25TdG9yYWdlXSAtIEFuIG9wdGlvbmFsIFN0b3JhZ2UgY29tcGF0aWJsZSBvYmplY3RcbiAqIFVzZWZ1bCB3aGVuIExpdmVWaWV3IHdvbid0IGhhdmUgYWNjZXNzIHRvIGBzZXNzaW9uU3RvcmFnZWAuICBGb3IgZXhhbXBsZSwgVGhpcyBjb3VsZFxuICogaGFwcGVuIGlmIGEgc2l0ZSBsb2FkcyBhIGNyb3NzLWRvbWFpbiBMaXZlVmlldyBpbiBhbiBpZnJhbWUuICBFeGFtcGxlIHVzYWdlOlxuICpcbiAqICAgICBjbGFzcyBJbk1lbW9yeVN0b3JhZ2Uge1xuICogICAgICAgY29uc3RydWN0b3IoKSB7IHRoaXMuc3RvcmFnZSA9IHt9IH1cbiAqICAgICAgIGdldEl0ZW0oa2V5TmFtZSkgeyByZXR1cm4gdGhpcy5zdG9yYWdlW2tleU5hbWVdIHx8IG51bGwgfVxuICogICAgICAgcmVtb3ZlSXRlbShrZXlOYW1lKSB7IGRlbGV0ZSB0aGlzLnN0b3JhZ2Vba2V5TmFtZV0gfVxuICogICAgICAgc2V0SXRlbShrZXlOYW1lLCBrZXlWYWx1ZSkgeyB0aGlzLnN0b3JhZ2Vba2V5TmFtZV0gPSBrZXlWYWx1ZSB9XG4gKiAgICAgfVxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0cy5sb2NhbFN0b3JhZ2VdIC0gQW4gb3B0aW9uYWwgU3RvcmFnZSBjb21wYXRpYmxlIG9iamVjdFxuICogVXNlZnVsIGZvciB3aGVuIExpdmVWaWV3IHdvbid0IGhhdmUgYWNjZXNzIHRvIGBsb2NhbFN0b3JhZ2VgLlxuICogU2VlIGBvcHRzLnNlc3Npb25TdG9yYWdlYCBmb3IgZXhhbXBsZXMuXG4qL1xuXG5pbXBvcnQge1xuICBCSU5ESU5HX1BSRUZJWCxcbiAgQ09OU0VDVVRJVkVfUkVMT0FEUyxcbiAgREVGQVVMVFMsXG4gIEZBSUxTQUZFX0pJVFRFUixcbiAgTE9BREVSX1RJTUVPVVQsXG4gIE1BWF9SRUxPQURTLFxuICBQSFhfREVCT1VOQ0UsXG4gIFBIWF9EUk9QX1RBUkdFVCxcbiAgUEhYX0hBU19GT0NVU0VELFxuICBQSFhfS0VZLFxuICBQSFhfTElOS19TVEFURSxcbiAgUEhYX0xJVkVfTElOSyxcbiAgUEhYX0xWX0RFQlVHLFxuICBQSFhfTFZfTEFURU5DWV9TSU0sXG4gIFBIWF9MVl9QUk9GSUxFLFxuICBQSFhfTUFJTixcbiAgUEhYX1BBUkVOVF9JRCxcbiAgUEhYX1ZJRVdfU0VMRUNUT1IsXG4gIFBIWF9ST09UX0lELFxuICBQSFhfVEhST1RUTEUsXG4gIFBIWF9UUkFDS19VUExPQURTLFxuICBQSFhfU0VTU0lPTixcbiAgUEhYX0ZFRURCQUNLX0ZPUixcbiAgUkVMT0FEX0pJVFRFUl9NSU4sXG4gIFJFTE9BRF9KSVRURVJfTUFYLFxufSBmcm9tIFwiLi9jb25zdGFudHNcIlxuXG5pbXBvcnQge1xuICBjbG9uZSxcbiAgY2xvc2VzdFBoeEJpbmRpbmcsXG4gIGNsb3N1cmUsXG4gIGRlYnVnLFxuICBpc09iamVjdCxcbiAgbWF5YmVcbn0gZnJvbSBcIi4vdXRpbHNcIlxuXG5pbXBvcnQgQnJvd3NlciBmcm9tIFwiLi9icm93c2VyXCJcbmltcG9ydCBET00gZnJvbSBcIi4vZG9tXCJcbmltcG9ydCBIb29rcyBmcm9tIFwiLi9ob29rc1wiXG5pbXBvcnQgTGl2ZVVwbG9hZGVyIGZyb20gXCIuL2xpdmVfdXBsb2FkZXJcIlxuaW1wb3J0IFZpZXcgZnJvbSBcIi4vdmlld1wiXG5pbXBvcnQgSlMgZnJvbSBcIi4vanNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMaXZlU29ja2V0IHtcbiAgY29uc3RydWN0b3IodXJsLCBwaHhTb2NrZXQsIG9wdHMgPSB7fSl7XG4gICAgdGhpcy51bmxvYWRlZCA9IGZhbHNlXG4gICAgaWYoIXBoeFNvY2tldCB8fCBwaHhTb2NrZXQuY29uc3RydWN0b3IubmFtZSA9PT0gXCJPYmplY3RcIil7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFxuICAgICAgYSBwaG9lbml4IFNvY2tldCBtdXN0IGJlIHByb3ZpZGVkIGFzIHRoZSBzZWNvbmQgYXJndW1lbnQgdG8gdGhlIExpdmVTb2NrZXQgY29uc3RydWN0b3IuIEZvciBleGFtcGxlOlxuXG4gICAgICAgICAgaW1wb3J0IHtTb2NrZXR9IGZyb20gXCJwaG9lbml4XCJcbiAgICAgICAgICBpbXBvcnQge0xpdmVTb2NrZXR9IGZyb20gXCJwaG9lbml4X2xpdmVfdmlld1wiXG4gICAgICAgICAgbGV0IGxpdmVTb2NrZXQgPSBuZXcgTGl2ZVNvY2tldChcIi9saXZlXCIsIFNvY2tldCwgey4uLn0pXG4gICAgICBgKVxuICAgIH1cbiAgICB0aGlzLnNvY2tldCA9IG5ldyBwaHhTb2NrZXQodXJsLCBvcHRzKVxuICAgIHRoaXMuYmluZGluZ1ByZWZpeCA9IG9wdHMuYmluZGluZ1ByZWZpeCB8fCBCSU5ESU5HX1BSRUZJWFxuICAgIHRoaXMub3B0cyA9IG9wdHNcbiAgICB0aGlzLnBhcmFtcyA9IGNsb3N1cmUob3B0cy5wYXJhbXMgfHwge30pXG4gICAgdGhpcy52aWV3TG9nZ2VyID0gb3B0cy52aWV3TG9nZ2VyXG4gICAgdGhpcy5tZXRhZGF0YUNhbGxiYWNrcyA9IG9wdHMubWV0YWRhdGEgfHwge31cbiAgICB0aGlzLmRlZmF1bHRzID0gT2JqZWN0LmFzc2lnbihjbG9uZShERUZBVUxUUyksIG9wdHMuZGVmYXVsdHMgfHwge30pXG4gICAgdGhpcy5hY3RpdmVFbGVtZW50ID0gbnVsbFxuICAgIHRoaXMucHJldkFjdGl2ZSA9IG51bGxcbiAgICB0aGlzLnNpbGVuY2VkID0gZmFsc2VcbiAgICB0aGlzLm1haW4gPSBudWxsXG4gICAgdGhpcy5vdXRnb2luZ01haW5FbCA9IG51bGxcbiAgICB0aGlzLmNsaWNrU3RhcnRlZEF0VGFyZ2V0ID0gbnVsbFxuICAgIHRoaXMubGlua1JlZiA9IDFcbiAgICB0aGlzLnJvb3RzID0ge31cbiAgICB0aGlzLmhyZWYgPSB3aW5kb3cubG9jYXRpb24uaHJlZlxuICAgIHRoaXMucGVuZGluZ0xpbmsgPSBudWxsXG4gICAgdGhpcy5jdXJyZW50TG9jYXRpb24gPSBjbG9uZSh3aW5kb3cubG9jYXRpb24pXG4gICAgdGhpcy5ob29rcyA9IG9wdHMuaG9va3MgfHwge31cbiAgICB0aGlzLnVwbG9hZGVycyA9IG9wdHMudXBsb2FkZXJzIHx8IHt9XG4gICAgdGhpcy5sb2FkZXJUaW1lb3V0ID0gb3B0cy5sb2FkZXJUaW1lb3V0IHx8IExPQURFUl9USU1FT1VUXG4gICAgdGhpcy5yZWxvYWRXaXRoSml0dGVyVGltZXIgPSBudWxsXG4gICAgdGhpcy5tYXhSZWxvYWRzID0gb3B0cy5tYXhSZWxvYWRzIHx8IE1BWF9SRUxPQURTXG4gICAgdGhpcy5yZWxvYWRKaXR0ZXJNaW4gPSBvcHRzLnJlbG9hZEppdHRlck1pbiB8fCBSRUxPQURfSklUVEVSX01JTlxuICAgIHRoaXMucmVsb2FkSml0dGVyTWF4ID0gb3B0cy5yZWxvYWRKaXR0ZXJNYXggfHwgUkVMT0FEX0pJVFRFUl9NQVhcbiAgICB0aGlzLmZhaWxzYWZlSml0dGVyID0gb3B0cy5mYWlsc2FmZUppdHRlciB8fCBGQUlMU0FGRV9KSVRURVJcbiAgICB0aGlzLmxvY2FsU3RvcmFnZSA9IG9wdHMubG9jYWxTdG9yYWdlIHx8IHdpbmRvdy5sb2NhbFN0b3JhZ2VcbiAgICB0aGlzLnNlc3Npb25TdG9yYWdlID0gb3B0cy5zZXNzaW9uU3RvcmFnZSB8fCB3aW5kb3cuc2Vzc2lvblN0b3JhZ2VcbiAgICB0aGlzLmJvdW5kVG9wTGV2ZWxFdmVudHMgPSBmYWxzZVxuICAgIHRoaXMuZG9tQ2FsbGJhY2tzID0gT2JqZWN0LmFzc2lnbih7b25Ob2RlQWRkZWQ6IGNsb3N1cmUoKSwgb25CZWZvcmVFbFVwZGF0ZWQ6IGNsb3N1cmUoKX0sIG9wdHMuZG9tIHx8IHt9KVxuICAgIHRoaXMudHJhbnNpdGlvbnMgPSBuZXcgVHJhbnNpdGlvblNldCgpXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJwYWdlaGlkZVwiLCBfZSA9PiB7XG4gICAgICB0aGlzLnVubG9hZGVkID0gdHJ1ZVxuICAgIH0pXG4gICAgdGhpcy5zb2NrZXQub25PcGVuKCgpID0+IHtcbiAgICAgIGlmKHRoaXMuaXNVbmxvYWRlZCgpKXtcbiAgICAgICAgLy8gcmVsb2FkIHBhZ2UgaWYgYmVpbmcgcmVzdG9yZWQgZnJvbSBiYWNrL2ZvcndhcmQgY2FjaGUgYW5kIGJyb3dzZXIgZG9lcyBub3QgZW1pdCBcInBhZ2VzaG93XCJcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIC8vIHB1YmxpY1xuXG4gIGlzUHJvZmlsZUVuYWJsZWQoKXsgcmV0dXJuIHRoaXMuc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShQSFhfTFZfUFJPRklMRSkgPT09IFwidHJ1ZVwiIH1cblxuICBpc0RlYnVnRW5hYmxlZCgpeyByZXR1cm4gdGhpcy5zZXNzaW9uU3RvcmFnZS5nZXRJdGVtKFBIWF9MVl9ERUJVRykgPT09IFwidHJ1ZVwiIH1cblxuICBpc0RlYnVnRGlzYWJsZWQoKXsgcmV0dXJuIHRoaXMuc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShQSFhfTFZfREVCVUcpID09PSBcImZhbHNlXCIgfVxuXG4gIGVuYWJsZURlYnVnKCl7IHRoaXMuc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShQSFhfTFZfREVCVUcsIFwidHJ1ZVwiKSB9XG5cbiAgZW5hYmxlUHJvZmlsaW5nKCl7IHRoaXMuc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShQSFhfTFZfUFJPRklMRSwgXCJ0cnVlXCIpIH1cblxuICBkaXNhYmxlRGVidWcoKXsgdGhpcy5zZXNzaW9uU3RvcmFnZS5zZXRJdGVtKFBIWF9MVl9ERUJVRywgXCJmYWxzZVwiKSB9XG5cbiAgZGlzYWJsZVByb2ZpbGluZygpeyB0aGlzLnNlc3Npb25TdG9yYWdlLnJlbW92ZUl0ZW0oUEhYX0xWX1BST0ZJTEUpIH1cblxuICBlbmFibGVMYXRlbmN5U2ltKHVwcGVyQm91bmRNcyl7XG4gICAgdGhpcy5lbmFibGVEZWJ1ZygpXG4gICAgY29uc29sZS5sb2coXCJsYXRlbmN5IHNpbXVsYXRvciBlbmFibGVkIGZvciB0aGUgZHVyYXRpb24gb2YgdGhpcyBicm93c2VyIHNlc3Npb24uIENhbGwgZGlzYWJsZUxhdGVuY3lTaW0oKSB0byBkaXNhYmxlXCIpXG4gICAgdGhpcy5zZXNzaW9uU3RvcmFnZS5zZXRJdGVtKFBIWF9MVl9MQVRFTkNZX1NJTSwgdXBwZXJCb3VuZE1zKVxuICB9XG5cbiAgZGlzYWJsZUxhdGVuY3lTaW0oKXsgdGhpcy5zZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKFBIWF9MVl9MQVRFTkNZX1NJTSkgfVxuXG4gIGdldExhdGVuY3lTaW0oKXtcbiAgICBsZXQgc3RyID0gdGhpcy5zZXNzaW9uU3RvcmFnZS5nZXRJdGVtKFBIWF9MVl9MQVRFTkNZX1NJTSlcbiAgICByZXR1cm4gc3RyID8gcGFyc2VJbnQoc3RyKSA6IG51bGxcbiAgfVxuXG4gIGdldFNvY2tldCgpeyByZXR1cm4gdGhpcy5zb2NrZXQgfVxuXG4gIGNvbm5lY3QoKXtcbiAgICAvLyBlbmFibGUgZGVidWcgYnkgZGVmYXVsdCBpZiBvbiBsb2NhbGhvc3QgYW5kIG5vdCBleHBsaWNpdGx5IGRpc2FibGVkXG4gICAgaWYod2luZG93LmxvY2F0aW9uLmhvc3RuYW1lID09PSBcImxvY2FsaG9zdFwiICYmICF0aGlzLmlzRGVidWdEaXNhYmxlZCgpKXsgdGhpcy5lbmFibGVEZWJ1ZygpIH1cbiAgICBsZXQgZG9Db25uZWN0ID0gKCkgPT4ge1xuICAgICAgaWYodGhpcy5qb2luUm9vdFZpZXdzKCkpe1xuICAgICAgICB0aGlzLmJpbmRUb3BMZXZlbEV2ZW50cygpXG4gICAgICAgIHRoaXMuc29ja2V0LmNvbm5lY3QoKVxuICAgICAgfSBlbHNlIGlmKHRoaXMubWFpbil7XG4gICAgICAgIHRoaXMuc29ja2V0LmNvbm5lY3QoKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5iaW5kVG9wTGV2ZWxFdmVudHMoe2RlYWQ6IHRydWV9KVxuICAgICAgfVxuICAgICAgdGhpcy5qb2luRGVhZFZpZXcoKVxuICAgIH1cbiAgICBpZihbXCJjb21wbGV0ZVwiLCBcImxvYWRlZFwiLCBcImludGVyYWN0aXZlXCJdLmluZGV4T2YoZG9jdW1lbnQucmVhZHlTdGF0ZSkgPj0gMCl7XG4gICAgICBkb0Nvbm5lY3QoKVxuICAgIH0gZWxzZSB7XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCAoKSA9PiBkb0Nvbm5lY3QoKSlcbiAgICB9XG4gIH1cblxuICBkaXNjb25uZWN0KGNhbGxiYWNrKXtcbiAgICBjbGVhclRpbWVvdXQodGhpcy5yZWxvYWRXaXRoSml0dGVyVGltZXIpXG4gICAgdGhpcy5zb2NrZXQuZGlzY29ubmVjdChjYWxsYmFjaylcbiAgfVxuXG4gIHJlcGxhY2VUcmFuc3BvcnQodHJhbnNwb3J0KXtcbiAgICBjbGVhclRpbWVvdXQodGhpcy5yZWxvYWRXaXRoSml0dGVyVGltZXIpXG4gICAgdGhpcy5zb2NrZXQucmVwbGFjZVRyYW5zcG9ydCh0cmFuc3BvcnQpXG4gICAgdGhpcy5jb25uZWN0KClcbiAgfVxuXG4gIGV4ZWNKUyhlbCwgZW5jb2RlZEpTLCBldmVudFR5cGUgPSBudWxsKXtcbiAgICB0aGlzLm93bmVyKGVsLCB2aWV3ID0+IEpTLmV4ZWMoZXZlbnRUeXBlLCBlbmNvZGVkSlMsIHZpZXcsIGVsKSlcbiAgfVxuXG4gIC8vIHByaXZhdGVcblxuICB1bmxvYWQoKXtcbiAgICBpZih0aGlzLnVubG9hZGVkKXsgcmV0dXJuIH1cbiAgICBpZih0aGlzLm1haW4gJiYgdGhpcy5pc0Nvbm5lY3RlZCgpKXsgdGhpcy5sb2codGhpcy5tYWluLCBcInNvY2tldFwiLCAoKSA9PiBbXCJkaXNjb25uZWN0IGZvciBwYWdlIG5hdlwiXSkgfVxuICAgIHRoaXMudW5sb2FkZWQgPSB0cnVlXG4gICAgdGhpcy5kZXN0cm95QWxsVmlld3MoKVxuICAgIHRoaXMuZGlzY29ubmVjdCgpXG4gIH1cblxuICB0cmlnZ2VyRE9NKGtpbmQsIGFyZ3MpeyB0aGlzLmRvbUNhbGxiYWNrc1traW5kXSguLi5hcmdzKSB9XG5cbiAgdGltZShuYW1lLCBmdW5jKXtcbiAgICBpZighdGhpcy5pc1Byb2ZpbGVFbmFibGVkKCkgfHwgIWNvbnNvbGUudGltZSl7IHJldHVybiBmdW5jKCkgfVxuICAgIGNvbnNvbGUudGltZShuYW1lKVxuICAgIGxldCByZXN1bHQgPSBmdW5jKClcbiAgICBjb25zb2xlLnRpbWVFbmQobmFtZSlcbiAgICByZXR1cm4gcmVzdWx0XG4gIH1cblxuICBsb2codmlldywga2luZCwgbXNnQ2FsbGJhY2spe1xuICAgIGlmKHRoaXMudmlld0xvZ2dlcil7XG4gICAgICBsZXQgW21zZywgb2JqXSA9IG1zZ0NhbGxiYWNrKClcbiAgICAgIHRoaXMudmlld0xvZ2dlcih2aWV3LCBraW5kLCBtc2csIG9iailcbiAgICB9IGVsc2UgaWYodGhpcy5pc0RlYnVnRW5hYmxlZCgpKXtcbiAgICAgIGxldCBbbXNnLCBvYmpdID0gbXNnQ2FsbGJhY2soKVxuICAgICAgZGVidWcodmlldywga2luZCwgbXNnLCBvYmopXG4gICAgfVxuICB9XG5cbiAgcmVxdWVzdERPTVVwZGF0ZShjYWxsYmFjayl7XG4gICAgdGhpcy50cmFuc2l0aW9ucy5hZnRlcihjYWxsYmFjaylcbiAgfVxuXG4gIHRyYW5zaXRpb24odGltZSwgb25TdGFydCwgb25Eb25lID0gZnVuY3Rpb24oKXt9KXtcbiAgICB0aGlzLnRyYW5zaXRpb25zLmFkZFRyYW5zaXRpb24odGltZSwgb25TdGFydCwgb25Eb25lKVxuICB9XG5cbiAgb25DaGFubmVsKGNoYW5uZWwsIGV2ZW50LCBjYil7XG4gICAgY2hhbm5lbC5vbihldmVudCwgZGF0YSA9PiB7XG4gICAgICBsZXQgbGF0ZW5jeSA9IHRoaXMuZ2V0TGF0ZW5jeVNpbSgpXG4gICAgICBpZighbGF0ZW5jeSl7XG4gICAgICAgIGNiKGRhdGEpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IGNiKGRhdGEpLCBsYXRlbmN5KVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICB3cmFwUHVzaCh2aWV3LCBvcHRzLCBwdXNoKXtcbiAgICBsZXQgbGF0ZW5jeSA9IHRoaXMuZ2V0TGF0ZW5jeVNpbSgpXG4gICAgbGV0IG9sZEpvaW5Db3VudCA9IHZpZXcuam9pbkNvdW50XG4gICAgaWYoIWxhdGVuY3kpe1xuICAgICAgaWYodGhpcy5pc0Nvbm5lY3RlZCgpICYmIG9wdHMudGltZW91dCl7XG4gICAgICAgIHJldHVybiBwdXNoKCkucmVjZWl2ZShcInRpbWVvdXRcIiwgKCkgPT4ge1xuICAgICAgICAgIGlmKHZpZXcuam9pbkNvdW50ID09PSBvbGRKb2luQ291bnQgJiYgIXZpZXcuaXNEZXN0cm95ZWQoKSl7XG4gICAgICAgICAgICB0aGlzLnJlbG9hZFdpdGhKaXR0ZXIodmlldywgKCkgPT4ge1xuICAgICAgICAgICAgICB0aGlzLmxvZyh2aWV3LCBcInRpbWVvdXRcIiwgKCkgPT4gW1wicmVjZWl2ZWQgdGltZW91dCB3aGlsZSBjb21tdW5pY2F0aW5nIHdpdGggc2VydmVyLiBGYWxsaW5nIGJhY2sgdG8gaGFyZCByZWZyZXNoIGZvciByZWNvdmVyeVwiXSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHB1c2goKVxuICAgICAgfVxuICAgIH1cblxuICAgIGxldCBmYWtlUHVzaCA9IHtcbiAgICAgIHJlY2VpdmVzOiBbXSxcbiAgICAgIHJlY2VpdmUoa2luZCwgY2IpeyB0aGlzLnJlY2VpdmVzLnB1c2goW2tpbmQsIGNiXSkgfVxuICAgIH1cbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGlmKHZpZXcuaXNEZXN0cm95ZWQoKSl7IHJldHVybiB9XG4gICAgICBmYWtlUHVzaC5yZWNlaXZlcy5yZWR1Y2UoKGFjYywgW2tpbmQsIGNiXSkgPT4gYWNjLnJlY2VpdmUoa2luZCwgY2IpLCBwdXNoKCkpXG4gICAgfSwgbGF0ZW5jeSlcbiAgICByZXR1cm4gZmFrZVB1c2hcbiAgfVxuXG4gIHJlbG9hZFdpdGhKaXR0ZXIodmlldywgbG9nKXtcbiAgICBjbGVhclRpbWVvdXQodGhpcy5yZWxvYWRXaXRoSml0dGVyVGltZXIpXG4gICAgdGhpcy5kaXNjb25uZWN0KClcbiAgICBsZXQgbWluTXMgPSB0aGlzLnJlbG9hZEppdHRlck1pblxuICAgIGxldCBtYXhNcyA9IHRoaXMucmVsb2FkSml0dGVyTWF4XG4gICAgbGV0IGFmdGVyTXMgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAobWF4TXMgLSBtaW5NcyArIDEpKSArIG1pbk1zXG4gICAgbGV0IHRyaWVzID0gQnJvd3Nlci51cGRhdGVMb2NhbCh0aGlzLmxvY2FsU3RvcmFnZSwgd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLCBDT05TRUNVVElWRV9SRUxPQURTLCAwLCBjb3VudCA9PiBjb3VudCArIDEpXG4gICAgaWYodHJpZXMgPiB0aGlzLm1heFJlbG9hZHMpe1xuICAgICAgYWZ0ZXJNcyA9IHRoaXMuZmFpbHNhZmVKaXR0ZXJcbiAgICB9XG4gICAgdGhpcy5yZWxvYWRXaXRoSml0dGVyVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIC8vIGlmIHZpZXcgaGFzIHJlY292ZXJlZCwgc3VjaCBhcyB0cmFuc3BvcnQgcmVwbGFjZWQsIHRoZW4gY2FuY2VsXG4gICAgICBpZih2aWV3LmlzRGVzdHJveWVkKCkgfHwgdmlldy5pc0Nvbm5lY3RlZCgpKXsgcmV0dXJuIH1cbiAgICAgIHZpZXcuZGVzdHJveSgpXG4gICAgICBsb2cgPyBsb2coKSA6IHRoaXMubG9nKHZpZXcsIFwiam9pblwiLCAoKSA9PiBbYGVuY291bnRlcmVkICR7dHJpZXN9IGNvbnNlY3V0aXZlIHJlbG9hZHNgXSlcbiAgICAgIGlmKHRyaWVzID4gdGhpcy5tYXhSZWxvYWRzKXtcbiAgICAgICAgdGhpcy5sb2codmlldywgXCJqb2luXCIsICgpID0+IFtgZXhjZWVkZWQgJHt0aGlzLm1heFJlbG9hZHN9IGNvbnNlY3V0aXZlIHJlbG9hZHMuIEVudGVyaW5nIGZhaWxzYWZlIG1vZGVgXSlcbiAgICAgIH1cbiAgICAgIGlmKHRoaXMuaGFzUGVuZGluZ0xpbmsoKSl7XG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbiA9IHRoaXMucGVuZGluZ0xpbmtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKVxuICAgICAgfVxuICAgIH0sIGFmdGVyTXMpXG4gIH1cblxuICBnZXRIb29rQ2FsbGJhY2tzKG5hbWUpe1xuICAgIHJldHVybiBuYW1lICYmIG5hbWUuc3RhcnRzV2l0aChcIlBob2VuaXguXCIpID8gSG9va3NbbmFtZS5zcGxpdChcIi5cIilbMV1dIDogdGhpcy5ob29rc1tuYW1lXVxuICB9XG5cbiAgaXNVbmxvYWRlZCgpeyByZXR1cm4gdGhpcy51bmxvYWRlZCB9XG5cbiAgaXNDb25uZWN0ZWQoKXsgcmV0dXJuIHRoaXMuc29ja2V0LmlzQ29ubmVjdGVkKCkgfVxuXG4gIGdldEJpbmRpbmdQcmVmaXgoKXsgcmV0dXJuIHRoaXMuYmluZGluZ1ByZWZpeCB9XG5cbiAgYmluZGluZyhraW5kKXsgcmV0dXJuIGAke3RoaXMuZ2V0QmluZGluZ1ByZWZpeCgpfSR7a2luZH1gIH1cblxuICBjaGFubmVsKHRvcGljLCBwYXJhbXMpeyByZXR1cm4gdGhpcy5zb2NrZXQuY2hhbm5lbCh0b3BpYywgcGFyYW1zKSB9XG5cbiAgam9pbkRlYWRWaWV3KCl7XG4gICAgbGV0IGJvZHkgPSBkb2N1bWVudC5ib2R5XG4gICAgaWYoYm9keSAmJiAhdGhpcy5pc1BoeFZpZXcoYm9keSkgJiYgIXRoaXMuaXNQaHhWaWV3KGRvY3VtZW50LmZpcnN0RWxlbWVudENoaWxkKSl7XG4gICAgICBsZXQgdmlldyA9IHRoaXMubmV3Um9vdFZpZXcoYm9keSlcbiAgICAgIHZpZXcuc2V0SHJlZih0aGlzLmdldEhyZWYoKSlcbiAgICAgIHZpZXcuam9pbkRlYWQoKVxuICAgICAgaWYoIXRoaXMubWFpbil7IHRoaXMubWFpbiA9IHZpZXcgfVxuICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB2aWV3LmV4ZWNOZXdNb3VudGVkKCkpXG4gICAgfVxuICB9XG5cbiAgam9pblJvb3RWaWV3cygpe1xuICAgIGxldCByb290c0ZvdW5kID0gZmFsc2VcbiAgICBET00uYWxsKGRvY3VtZW50LCBgJHtQSFhfVklFV19TRUxFQ1RPUn06bm90KFske1BIWF9QQVJFTlRfSUR9XSlgLCByb290RWwgPT4ge1xuICAgICAgaWYoIXRoaXMuZ2V0Um9vdEJ5SWQocm9vdEVsLmlkKSl7XG4gICAgICAgIGxldCB2aWV3ID0gdGhpcy5uZXdSb290Vmlldyhyb290RWwpXG4gICAgICAgIHZpZXcuc2V0SHJlZih0aGlzLmdldEhyZWYoKSlcbiAgICAgICAgdmlldy5qb2luKClcbiAgICAgICAgaWYocm9vdEVsLmhhc0F0dHJpYnV0ZShQSFhfTUFJTikpeyB0aGlzLm1haW4gPSB2aWV3IH1cbiAgICAgIH1cbiAgICAgIHJvb3RzRm91bmQgPSB0cnVlXG4gICAgfSlcbiAgICByZXR1cm4gcm9vdHNGb3VuZFxuICB9XG5cbiAgcmVkaXJlY3QodG8sIGZsYXNoKXtcbiAgICB0aGlzLnVubG9hZCgpXG4gICAgQnJvd3Nlci5yZWRpcmVjdCh0bywgZmxhc2gpXG4gIH1cblxuICByZXBsYWNlTWFpbihocmVmLCBmbGFzaCwgY2FsbGJhY2sgPSBudWxsLCBsaW5rUmVmID0gdGhpcy5zZXRQZW5kaW5nTGluayhocmVmKSl7XG4gICAgbGV0IGxpdmVSZWZlcmVyID0gdGhpcy5jdXJyZW50TG9jYXRpb24uaHJlZlxuICAgIHRoaXMub3V0Z29pbmdNYWluRWwgPSB0aGlzLm91dGdvaW5nTWFpbkVsIHx8IHRoaXMubWFpbi5lbFxuICAgIGxldCBuZXdNYWluRWwgPSBET00uY2xvbmVOb2RlKHRoaXMub3V0Z29pbmdNYWluRWwsIFwiXCIpXG4gICAgdGhpcy5tYWluLnNob3dMb2FkZXIodGhpcy5sb2FkZXJUaW1lb3V0KVxuICAgIHRoaXMubWFpbi5kZXN0cm95KClcblxuICAgIHRoaXMubWFpbiA9IHRoaXMubmV3Um9vdFZpZXcobmV3TWFpbkVsLCBmbGFzaCwgbGl2ZVJlZmVyZXIpXG4gICAgdGhpcy5tYWluLnNldFJlZGlyZWN0KGhyZWYpXG4gICAgdGhpcy50cmFuc2l0aW9uUmVtb3ZlcygpXG4gICAgdGhpcy5tYWluLmpvaW4oKGpvaW5Db3VudCwgb25Eb25lKSA9PiB7XG4gICAgICBpZihqb2luQ291bnQgPT09IDEgJiYgdGhpcy5jb21taXRQZW5kaW5nTGluayhsaW5rUmVmKSl7XG4gICAgICAgIHRoaXMucmVxdWVzdERPTVVwZGF0ZSgoKSA9PiB7XG4gICAgICAgICAgRE9NLmZpbmRQaHhTdGlja3koZG9jdW1lbnQpLmZvckVhY2goZWwgPT4gbmV3TWFpbkVsLmFwcGVuZENoaWxkKGVsKSlcbiAgICAgICAgICB0aGlzLm91dGdvaW5nTWFpbkVsLnJlcGxhY2VXaXRoKG5ld01haW5FbClcbiAgICAgICAgICB0aGlzLm91dGdvaW5nTWFpbkVsID0gbnVsbFxuICAgICAgICAgIGNhbGxiYWNrICYmIHJlcXVlc3RBbmltYXRpb25GcmFtZShjYWxsYmFjaylcbiAgICAgICAgICBvbkRvbmUoKVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICB0cmFuc2l0aW9uUmVtb3ZlcyhlbGVtZW50cyl7XG4gICAgbGV0IHJlbW92ZUF0dHIgPSB0aGlzLmJpbmRpbmcoXCJyZW1vdmVcIilcbiAgICBlbGVtZW50cyA9IGVsZW1lbnRzIHx8IERPTS5hbGwoZG9jdW1lbnQsIGBbJHtyZW1vdmVBdHRyfV1gKVxuICAgIGVsZW1lbnRzLmZvckVhY2goZWwgPT4ge1xuICAgICAgaWYoZG9jdW1lbnQuYm9keS5jb250YWlucyhlbCkpeyAvLyBza2lwIGNoaWxkcmVuIGFscmVhZHkgcmVtb3ZlZFxuICAgICAgICB0aGlzLmV4ZWNKUyhlbCwgZWwuZ2V0QXR0cmlidXRlKHJlbW92ZUF0dHIpLCBcInJlbW92ZVwiKVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICBpc1BoeFZpZXcoZWwpeyByZXR1cm4gZWwuZ2V0QXR0cmlidXRlICYmIGVsLmdldEF0dHJpYnV0ZShQSFhfU0VTU0lPTikgIT09IG51bGwgfVxuXG4gIG5ld1Jvb3RWaWV3KGVsLCBmbGFzaCwgbGl2ZVJlZmVyZXIpe1xuICAgIGxldCB2aWV3ID0gbmV3IFZpZXcoZWwsIHRoaXMsIG51bGwsIGZsYXNoLCBsaXZlUmVmZXJlcilcbiAgICB0aGlzLnJvb3RzW3ZpZXcuaWRdID0gdmlld1xuICAgIHJldHVybiB2aWV3XG4gIH1cblxuICBvd25lcihjaGlsZEVsLCBjYWxsYmFjayl7XG4gICAgbGV0IHZpZXcgPSBtYXliZShjaGlsZEVsLmNsb3Nlc3QoUEhYX1ZJRVdfU0VMRUNUT1IpLCBlbCA9PiB0aGlzLmdldFZpZXdCeUVsKGVsKSkgfHwgdGhpcy5tYWluXG4gICAgaWYodmlldyl7IGNhbGxiYWNrKHZpZXcpIH1cbiAgfVxuXG4gIHdpdGhpbk93bmVycyhjaGlsZEVsLCBjYWxsYmFjayl7XG4gICAgdGhpcy5vd25lcihjaGlsZEVsLCB2aWV3ID0+IGNhbGxiYWNrKHZpZXcsIGNoaWxkRWwpKVxuICB9XG5cbiAgZ2V0Vmlld0J5RWwoZWwpe1xuICAgIGxldCByb290SWQgPSBlbC5nZXRBdHRyaWJ1dGUoUEhYX1JPT1RfSUQpXG4gICAgcmV0dXJuIG1heWJlKHRoaXMuZ2V0Um9vdEJ5SWQocm9vdElkKSwgcm9vdCA9PiByb290LmdldERlc2NlbmRlbnRCeUVsKGVsKSlcbiAgfVxuXG4gIGdldFJvb3RCeUlkKGlkKXsgcmV0dXJuIHRoaXMucm9vdHNbaWRdIH1cblxuICBkZXN0cm95QWxsVmlld3MoKXtcbiAgICBmb3IobGV0IGlkIGluIHRoaXMucm9vdHMpe1xuICAgICAgdGhpcy5yb290c1tpZF0uZGVzdHJveSgpXG4gICAgICBkZWxldGUgdGhpcy5yb290c1tpZF1cbiAgICB9XG4gICAgdGhpcy5tYWluID0gbnVsbFxuICB9XG5cbiAgZGVzdHJveVZpZXdCeUVsKGVsKXtcbiAgICBsZXQgcm9vdCA9IHRoaXMuZ2V0Um9vdEJ5SWQoZWwuZ2V0QXR0cmlidXRlKFBIWF9ST09UX0lEKSlcbiAgICBpZihyb290ICYmIHJvb3QuaWQgPT09IGVsLmlkKXtcbiAgICAgIHJvb3QuZGVzdHJveSgpXG4gICAgICBkZWxldGUgdGhpcy5yb290c1tyb290LmlkXVxuICAgIH0gZWxzZSBpZihyb290KXtcbiAgICAgIHJvb3QuZGVzdHJveURlc2NlbmRlbnQoZWwuaWQpXG4gICAgfVxuICB9XG5cbiAgc2V0QWN0aXZlRWxlbWVudCh0YXJnZXQpe1xuICAgIGlmKHRoaXMuYWN0aXZlRWxlbWVudCA9PT0gdGFyZ2V0KXsgcmV0dXJuIH1cbiAgICB0aGlzLmFjdGl2ZUVsZW1lbnQgPSB0YXJnZXRcbiAgICBsZXQgY2FuY2VsID0gKCkgPT4ge1xuICAgICAgaWYodGFyZ2V0ID09PSB0aGlzLmFjdGl2ZUVsZW1lbnQpeyB0aGlzLmFjdGl2ZUVsZW1lbnQgPSBudWxsIH1cbiAgICAgIHRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCB0aGlzKVxuICAgICAgdGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLCB0aGlzKVxuICAgIH1cbiAgICB0YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgY2FuY2VsKVxuICAgIHRhcmdldC5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIiwgY2FuY2VsKVxuICB9XG5cbiAgZ2V0QWN0aXZlRWxlbWVudCgpe1xuICAgIGlmKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgPT09IGRvY3VtZW50LmJvZHkpe1xuICAgICAgcmV0dXJuIHRoaXMuYWN0aXZlRWxlbWVudCB8fCBkb2N1bWVudC5hY3RpdmVFbGVtZW50XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgY2FuIGJlIG51bGwgaW4gSW50ZXJuZXQgRXhwbG9yZXIgMTFcbiAgICAgIHJldHVybiBkb2N1bWVudC5hY3RpdmVFbGVtZW50IHx8IGRvY3VtZW50LmJvZHlcbiAgICB9XG4gIH1cblxuICBkcm9wQWN0aXZlRWxlbWVudCh2aWV3KXtcbiAgICBpZih0aGlzLnByZXZBY3RpdmUgJiYgdmlldy5vd25zRWxlbWVudCh0aGlzLnByZXZBY3RpdmUpKXtcbiAgICAgIHRoaXMucHJldkFjdGl2ZSA9IG51bGxcbiAgICB9XG4gIH1cblxuICByZXN0b3JlUHJldmlvdXNseUFjdGl2ZUZvY3VzKCl7XG4gICAgaWYodGhpcy5wcmV2QWN0aXZlICYmIHRoaXMucHJldkFjdGl2ZSAhPT0gZG9jdW1lbnQuYm9keSl7XG4gICAgICB0aGlzLnByZXZBY3RpdmUuZm9jdXMoKVxuICAgIH1cbiAgfVxuXG4gIGJsdXJBY3RpdmVFbGVtZW50KCl7XG4gICAgdGhpcy5wcmV2QWN0aXZlID0gdGhpcy5nZXRBY3RpdmVFbGVtZW50KClcbiAgICBpZih0aGlzLnByZXZBY3RpdmUgIT09IGRvY3VtZW50LmJvZHkpeyB0aGlzLnByZXZBY3RpdmUuYmx1cigpIH1cbiAgfVxuXG4gIGJpbmRUb3BMZXZlbEV2ZW50cyh7ZGVhZH0gPSB7fSl7XG4gICAgaWYodGhpcy5ib3VuZFRvcExldmVsRXZlbnRzKXsgcmV0dXJuIH1cblxuICAgIHRoaXMuYm91bmRUb3BMZXZlbEV2ZW50cyA9IHRydWVcbiAgICAvLyBlbnRlciBmYWlsc2FmZSByZWxvYWQgaWYgc2VydmVyIGhhcyBnb25lIGF3YXkgaW50ZW50aW9uYWxseSwgc3VjaCBhcyBcImRpc2Nvbm5lY3RcIiBicm9hZGNhc3RcbiAgICB0aGlzLnNvY2tldC5vbkNsb3NlKGV2ZW50ID0+IHtcbiAgICAgIC8vIHVubG9hZCB3aGVuIG5hdmlnYXRpbmcgaHJlZiBvciBmb3JtIHN1Ym1pdCAoc3VjaCBhcyBmb3IgZmlyZWZveClcbiAgICAgIGlmKGV2ZW50ICYmIGV2ZW50LmNvZGUgPT09IDEwMDEpeyByZXR1cm4gdGhpcy51bmxvYWQoKSB9XG4gICAgICAvLyBmYWlsc2FmZSByZWxvYWQgaWYgbm9ybWFsIGNsb3N1cmUgYW5kIHdlIHN0aWxsIGhhdmUgYSBtYWluIExWXG4gICAgICBpZihldmVudCAmJiBldmVudC5jb2RlID09PSAxMDAwICYmIHRoaXMubWFpbil7IHJldHVybiB0aGlzLnJlbG9hZFdpdGhKaXR0ZXIodGhpcy5tYWluKSB9XG4gICAgfSlcbiAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKXsgfSkgLy8gZW5zdXJlIGFsbCBjbGljayBldmVudHMgYnViYmxlIGZvciBtb2JpbGUgU2FmYXJpXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJwYWdlc2hvd1wiLCBlID0+IHtcbiAgICAgIGlmKGUucGVyc2lzdGVkKXsgLy8gcmVsb2FkIHBhZ2UgaWYgYmVpbmcgcmVzdG9yZWQgZnJvbSBiYWNrL2ZvcndhcmQgY2FjaGVcbiAgICAgICAgdGhpcy5nZXRTb2NrZXQoKS5kaXNjb25uZWN0KClcbiAgICAgICAgdGhpcy53aXRoUGFnZUxvYWRpbmcoe3RvOiB3aW5kb3cubG9jYXRpb24uaHJlZiwga2luZDogXCJyZWRpcmVjdFwifSlcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpXG4gICAgICB9XG4gICAgfSwgdHJ1ZSlcbiAgICBpZighZGVhZCl7IHRoaXMuYmluZE5hdigpIH1cbiAgICB0aGlzLmJpbmRDbGlja3MoKVxuICAgIGlmKCFkZWFkKXsgdGhpcy5iaW5kRm9ybXMoKSB9XG4gICAgdGhpcy5iaW5kKHtrZXl1cDogXCJrZXl1cFwiLCBrZXlkb3duOiBcImtleWRvd25cIn0sIChlLCB0eXBlLCB2aWV3LCB0YXJnZXRFbCwgcGh4RXZlbnQsIGV2ZW50VGFyZ2V0KSA9PiB7XG4gICAgICBsZXQgbWF0Y2hLZXkgPSB0YXJnZXRFbC5nZXRBdHRyaWJ1dGUodGhpcy5iaW5kaW5nKFBIWF9LRVkpKVxuICAgICAgbGV0IHByZXNzZWRLZXkgPSBlLmtleSAmJiBlLmtleS50b0xvd2VyQ2FzZSgpIC8vIGNocm9tZSBjbGlja2VkIGF1dG9jb21wbGV0ZXMgc2VuZCBhIGtleWRvd24gd2l0aG91dCBrZXlcbiAgICAgIGlmKG1hdGNoS2V5ICYmIG1hdGNoS2V5LnRvTG93ZXJDYXNlKCkgIT09IHByZXNzZWRLZXkpeyByZXR1cm4gfVxuXG4gICAgICBsZXQgZGF0YSA9IHtrZXk6IGUua2V5LCAuLi50aGlzLmV2ZW50TWV0YSh0eXBlLCBlLCB0YXJnZXRFbCl9XG4gICAgICBKUy5leGVjKHR5cGUsIHBoeEV2ZW50LCB2aWV3LCB0YXJnZXRFbCwgW1wicHVzaFwiLCB7ZGF0YX1dKVxuICAgIH0pXG4gICAgdGhpcy5iaW5kKHtibHVyOiBcImZvY3Vzb3V0XCIsIGZvY3VzOiBcImZvY3VzaW5cIn0sIChlLCB0eXBlLCB2aWV3LCB0YXJnZXRFbCwgcGh4RXZlbnQsIGV2ZW50VGFyZ2V0KSA9PiB7XG4gICAgICBpZighZXZlbnRUYXJnZXQpe1xuICAgICAgICBsZXQgZGF0YSA9IHtrZXk6IGUua2V5LCAuLi50aGlzLmV2ZW50TWV0YSh0eXBlLCBlLCB0YXJnZXRFbCl9XG4gICAgICAgIEpTLmV4ZWModHlwZSwgcGh4RXZlbnQsIHZpZXcsIHRhcmdldEVsLCBbXCJwdXNoXCIsIHtkYXRhfV0pXG4gICAgICB9XG4gICAgfSlcbiAgICB0aGlzLmJpbmQoe2JsdXI6IFwiYmx1clwiLCBmb2N1czogXCJmb2N1c1wifSwgKGUsIHR5cGUsIHZpZXcsIHRhcmdldEVsLCB0YXJnZXRDdHgsIHBoeEV2ZW50LCBwaHhUYXJnZXQpID0+IHtcbiAgICAgIC8vIGJsdXIgYW5kIGZvY3VzIGFyZSB0cmlnZ2VyZWQgb24gZG9jdW1lbnQgYW5kIHdpbmRvdy4gRGlzY2FyZCBvbmUgdG8gYXZvaWQgZHVwc1xuICAgICAgaWYocGh4VGFyZ2V0ID09PSBcIndpbmRvd1wiKXtcbiAgICAgICAgbGV0IGRhdGEgPSB0aGlzLmV2ZW50TWV0YSh0eXBlLCBlLCB0YXJnZXRFbClcbiAgICAgICAgSlMuZXhlYyh0eXBlLCBwaHhFdmVudCwgdmlldywgdGFyZ2V0RWwsIFtcInB1c2hcIiwge2RhdGF9XSlcbiAgICAgIH1cbiAgICB9KVxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiZHJhZ292ZXJcIiwgZSA9PiBlLnByZXZlbnREZWZhdWx0KCkpXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJkcm9wXCIsIGUgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICBsZXQgZHJvcFRhcmdldElkID0gbWF5YmUoY2xvc2VzdFBoeEJpbmRpbmcoZS50YXJnZXQsIHRoaXMuYmluZGluZyhQSFhfRFJPUF9UQVJHRVQpKSwgdHJ1ZVRhcmdldCA9PiB7XG4gICAgICAgIHJldHVybiB0cnVlVGFyZ2V0LmdldEF0dHJpYnV0ZSh0aGlzLmJpbmRpbmcoUEhYX0RST1BfVEFSR0VUKSlcbiAgICAgIH0pXG4gICAgICBsZXQgZHJvcFRhcmdldCA9IGRyb3BUYXJnZXRJZCAmJiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChkcm9wVGFyZ2V0SWQpXG4gICAgICBsZXQgZmlsZXMgPSBBcnJheS5mcm9tKGUuZGF0YVRyYW5zZmVyLmZpbGVzIHx8IFtdKVxuICAgICAgaWYoIWRyb3BUYXJnZXQgfHwgZHJvcFRhcmdldC5kaXNhYmxlZCB8fCBmaWxlcy5sZW5ndGggPT09IDAgfHwgIShkcm9wVGFyZ2V0LmZpbGVzIGluc3RhbmNlb2YgRmlsZUxpc3QpKXsgcmV0dXJuIH1cblxuICAgICAgTGl2ZVVwbG9hZGVyLnRyYWNrRmlsZXMoZHJvcFRhcmdldCwgZmlsZXMsIGUuZGF0YVRyYW5zZmVyKVxuICAgICAgZHJvcFRhcmdldC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcImlucHV0XCIsIHtidWJibGVzOiB0cnVlfSkpXG4gICAgfSlcbiAgICB0aGlzLm9uKFBIWF9UUkFDS19VUExPQURTLCBlID0+IHtcbiAgICAgIGxldCB1cGxvYWRUYXJnZXQgPSBlLnRhcmdldFxuICAgICAgaWYoIURPTS5pc1VwbG9hZElucHV0KHVwbG9hZFRhcmdldCkpeyByZXR1cm4gfVxuICAgICAgbGV0IGZpbGVzID0gQXJyYXkuZnJvbShlLmRldGFpbC5maWxlcyB8fCBbXSkuZmlsdGVyKGYgPT4gZiBpbnN0YW5jZW9mIEZpbGUgfHwgZiBpbnN0YW5jZW9mIEJsb2IpXG4gICAgICBMaXZlVXBsb2FkZXIudHJhY2tGaWxlcyh1cGxvYWRUYXJnZXQsIGZpbGVzKVxuICAgICAgdXBsb2FkVGFyZ2V0LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwiaW5wdXRcIiwge2J1YmJsZXM6IHRydWV9KSlcbiAgICB9KVxuICB9XG5cbiAgZXZlbnRNZXRhKGV2ZW50TmFtZSwgZSwgdGFyZ2V0RWwpe1xuICAgIGxldCBjYWxsYmFjayA9IHRoaXMubWV0YWRhdGFDYWxsYmFja3NbZXZlbnROYW1lXVxuICAgIHJldHVybiBjYWxsYmFjayA/IGNhbGxiYWNrKGUsIHRhcmdldEVsKSA6IHt9XG4gIH1cblxuICBzZXRQZW5kaW5nTGluayhocmVmKXtcbiAgICB0aGlzLmxpbmtSZWYrK1xuICAgIHRoaXMucGVuZGluZ0xpbmsgPSBocmVmXG4gICAgcmV0dXJuIHRoaXMubGlua1JlZlxuICB9XG5cbiAgY29tbWl0UGVuZGluZ0xpbmsobGlua1JlZil7XG4gICAgaWYodGhpcy5saW5rUmVmICE9PSBsaW5rUmVmKXtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmhyZWYgPSB0aGlzLnBlbmRpbmdMaW5rXG4gICAgICB0aGlzLnBlbmRpbmdMaW5rID0gbnVsbFxuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gIH1cblxuICBnZXRIcmVmKCl7IHJldHVybiB0aGlzLmhyZWYgfVxuXG4gIGhhc1BlbmRpbmdMaW5rKCl7IHJldHVybiAhIXRoaXMucGVuZGluZ0xpbmsgfVxuXG4gIGJpbmQoZXZlbnRzLCBjYWxsYmFjayl7XG4gICAgZm9yKGxldCBldmVudCBpbiBldmVudHMpe1xuICAgICAgbGV0IGJyb3dzZXJFdmVudE5hbWUgPSBldmVudHNbZXZlbnRdXG5cbiAgICAgIHRoaXMub24oYnJvd3NlckV2ZW50TmFtZSwgZSA9PiB7XG4gICAgICAgIGxldCBiaW5kaW5nID0gdGhpcy5iaW5kaW5nKGV2ZW50KVxuICAgICAgICBsZXQgd2luZG93QmluZGluZyA9IHRoaXMuYmluZGluZyhgd2luZG93LSR7ZXZlbnR9YClcbiAgICAgICAgbGV0IHRhcmdldFBoeEV2ZW50ID0gZS50YXJnZXQuZ2V0QXR0cmlidXRlICYmIGUudGFyZ2V0LmdldEF0dHJpYnV0ZShiaW5kaW5nKVxuICAgICAgICBpZih0YXJnZXRQaHhFdmVudCl7XG4gICAgICAgICAgdGhpcy5kZWJvdW5jZShlLnRhcmdldCwgZSwgYnJvd3NlckV2ZW50TmFtZSwgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy53aXRoaW5Pd25lcnMoZS50YXJnZXQsIHZpZXcgPT4ge1xuICAgICAgICAgICAgICBjYWxsYmFjayhlLCBldmVudCwgdmlldywgZS50YXJnZXQsIHRhcmdldFBoeEV2ZW50LCBudWxsKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIERPTS5hbGwoZG9jdW1lbnQsIGBbJHt3aW5kb3dCaW5kaW5nfV1gLCBlbCA9PiB7XG4gICAgICAgICAgICBsZXQgcGh4RXZlbnQgPSBlbC5nZXRBdHRyaWJ1dGUod2luZG93QmluZGluZylcbiAgICAgICAgICAgIHRoaXMuZGVib3VuY2UoZWwsIGUsIGJyb3dzZXJFdmVudE5hbWUsICgpID0+IHtcbiAgICAgICAgICAgICAgdGhpcy53aXRoaW5Pd25lcnMoZWwsIHZpZXcgPT4ge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGUsIGV2ZW50LCB2aWV3LCBlbCwgcGh4RXZlbnQsIFwid2luZG93XCIpXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgYmluZENsaWNrcygpe1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZSA9PiB0aGlzLmNsaWNrU3RhcnRlZEF0VGFyZ2V0ID0gZS50YXJnZXQpXG4gICAgdGhpcy5iaW5kQ2xpY2soXCJjbGlja1wiLCBcImNsaWNrXCIsIGZhbHNlKVxuICAgIHRoaXMuYmluZENsaWNrKFwibW91c2Vkb3duXCIsIFwiY2FwdHVyZS1jbGlja1wiLCB0cnVlKVxuICB9XG5cbiAgYmluZENsaWNrKGV2ZW50TmFtZSwgYmluZGluZ05hbWUsIGNhcHR1cmUpe1xuICAgIGxldCBjbGljayA9IHRoaXMuYmluZGluZyhiaW5kaW5nTmFtZSlcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGUgPT4ge1xuICAgICAgbGV0IHRhcmdldCA9IG51bGxcbiAgICAgIGlmKGNhcHR1cmUpe1xuICAgICAgICB0YXJnZXQgPSBlLnRhcmdldC5tYXRjaGVzKGBbJHtjbGlja31dYCkgPyBlLnRhcmdldCA6IGUudGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoYFske2NsaWNrfV1gKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGV0IGNsaWNrU3RhcnRlZEF0VGFyZ2V0ID0gdGhpcy5jbGlja1N0YXJ0ZWRBdFRhcmdldCB8fCBlLnRhcmdldFxuICAgICAgICB0YXJnZXQgPSBjbG9zZXN0UGh4QmluZGluZyhjbGlja1N0YXJ0ZWRBdFRhcmdldCwgY2xpY2spXG4gICAgICAgIHRoaXMuZGlzcGF0Y2hDbGlja0F3YXkoZSwgY2xpY2tTdGFydGVkQXRUYXJnZXQpXG4gICAgICAgIHRoaXMuY2xpY2tTdGFydGVkQXRUYXJnZXQgPSBudWxsXG4gICAgICB9XG4gICAgICBsZXQgcGh4RXZlbnQgPSB0YXJnZXQgJiYgdGFyZ2V0LmdldEF0dHJpYnV0ZShjbGljaylcbiAgICAgIGlmKCFwaHhFdmVudCl7XG4gICAgICAgIGxldCBocmVmID0gZS50YXJnZXQgaW5zdGFuY2VvZiBIVE1MQW5jaG9yRWxlbWVudCA/IGUudGFyZ2V0LmdldEF0dHJpYnV0ZShcImhyZWZcIikgOiBudWxsXG4gICAgICAgIGlmKCFjYXB0dXJlICYmIGhyZWYgIT09IG51bGwgJiYgIURPTS53YW50c05ld1RhYihlKSAmJiBET00uaXNOZXdQYWdlSHJlZihocmVmLCB3aW5kb3cubG9jYXRpb24pKXtcbiAgICAgICAgICB0aGlzLnVubG9hZCgpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBpZih0YXJnZXQuZ2V0QXR0cmlidXRlKFwiaHJlZlwiKSA9PT0gXCIjXCIpeyBlLnByZXZlbnREZWZhdWx0KCkgfVxuXG4gICAgICB0aGlzLmRlYm91bmNlKHRhcmdldCwgZSwgXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMud2l0aGluT3duZXJzKHRhcmdldCwgdmlldyA9PiB7XG4gICAgICAgICAgSlMuZXhlYyhcImNsaWNrXCIsIHBoeEV2ZW50LCB2aWV3LCB0YXJnZXQsIFtcInB1c2hcIiwge2RhdGE6IHRoaXMuZXZlbnRNZXRhKFwiY2xpY2tcIiwgZSwgdGFyZ2V0KX1dKVxuICAgICAgICB9KVxuICAgICAgfSlcbiAgICB9LCBjYXB0dXJlKVxuICB9XG5cbiAgZGlzcGF0Y2hDbGlja0F3YXkoZSwgY2xpY2tTdGFydGVkQXQpe1xuICAgIGxldCBwaHhDbGlja0F3YXkgPSB0aGlzLmJpbmRpbmcoXCJjbGljay1hd2F5XCIpXG4gICAgRE9NLmFsbChkb2N1bWVudCwgYFske3BoeENsaWNrQXdheX1dYCwgZWwgPT4ge1xuICAgICAgaWYoIShlbC5pc1NhbWVOb2RlKGNsaWNrU3RhcnRlZEF0KSB8fCBlbC5jb250YWlucyhjbGlja1N0YXJ0ZWRBdCkpKXtcbiAgICAgICAgdGhpcy53aXRoaW5Pd25lcnMoZS50YXJnZXQsIHZpZXcgPT4ge1xuICAgICAgICAgIGxldCBwaHhFdmVudCA9IGVsLmdldEF0dHJpYnV0ZShwaHhDbGlja0F3YXkpXG4gICAgICAgICAgaWYoSlMuaXNWaXNpYmxlKGVsKSl7XG4gICAgICAgICAgICBKUy5leGVjKFwiY2xpY2tcIiwgcGh4RXZlbnQsIHZpZXcsIGVsLCBbXCJwdXNoXCIsIHtkYXRhOiB0aGlzLmV2ZW50TWV0YShcImNsaWNrXCIsIGUsIGUudGFyZ2V0KX1dKVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgYmluZE5hdigpe1xuICAgIGlmKCFCcm93c2VyLmNhblB1c2hTdGF0ZSgpKXsgcmV0dXJuIH1cbiAgICBpZihoaXN0b3J5LnNjcm9sbFJlc3RvcmF0aW9uKXsgaGlzdG9yeS5zY3JvbGxSZXN0b3JhdGlvbiA9IFwibWFudWFsXCIgfVxuICAgIGxldCBzY3JvbGxUaW1lciA9IG51bGxcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCBfZSA9PiB7XG4gICAgICBjbGVhclRpbWVvdXQoc2Nyb2xsVGltZXIpXG4gICAgICBzY3JvbGxUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBCcm93c2VyLnVwZGF0ZUN1cnJlbnRTdGF0ZShzdGF0ZSA9PiBPYmplY3QuYXNzaWduKHN0YXRlLCB7c2Nyb2xsOiB3aW5kb3cuc2Nyb2xsWX0pKVxuICAgICAgfSwgMTAwKVxuICAgIH0pXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJwb3BzdGF0ZVwiLCBldmVudCA9PiB7XG4gICAgICBpZighdGhpcy5yZWdpc3Rlck5ld0xvY2F0aW9uKHdpbmRvdy5sb2NhdGlvbikpeyByZXR1cm4gfVxuICAgICAgbGV0IHt0eXBlLCBpZCwgcm9vdCwgc2Nyb2xsfSA9IGV2ZW50LnN0YXRlIHx8IHt9XG4gICAgICBsZXQgaHJlZiA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmXG5cbiAgICAgIHRoaXMucmVxdWVzdERPTVVwZGF0ZSgoKSA9PiB7XG4gICAgICAgIGlmKHRoaXMubWFpbi5pc0Nvbm5lY3RlZCgpICYmICh0eXBlID09PSBcInBhdGNoXCIgJiYgaWQgPT09IHRoaXMubWFpbi5pZCkpe1xuICAgICAgICAgIHRoaXMubWFpbi5wdXNoTGlua1BhdGNoKGhyZWYsIG51bGwsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMubWF5YmVTY3JvbGwoc2Nyb2xsKVxuICAgICAgICAgIH0pXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5yZXBsYWNlTWFpbihocmVmLCBudWxsLCAoKSA9PiB7XG4gICAgICAgICAgICBpZihyb290KXsgdGhpcy5yZXBsYWNlUm9vdEhpc3RvcnkoKSB9XG4gICAgICAgICAgICB0aGlzLm1heWJlU2Nyb2xsKHNjcm9sbClcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH0sIGZhbHNlKVxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZSA9PiB7XG4gICAgICBsZXQgdGFyZ2V0ID0gY2xvc2VzdFBoeEJpbmRpbmcoZS50YXJnZXQsIFBIWF9MSVZFX0xJTkspXG4gICAgICBsZXQgdHlwZSA9IHRhcmdldCAmJiB0YXJnZXQuZ2V0QXR0cmlidXRlKFBIWF9MSVZFX0xJTkspXG4gICAgICBpZighdHlwZSB8fCAhdGhpcy5pc0Nvbm5lY3RlZCgpIHx8ICF0aGlzLm1haW4gfHwgRE9NLndhbnRzTmV3VGFiKGUpKXsgcmV0dXJuIH1cblxuICAgICAgbGV0IGhyZWYgPSB0YXJnZXQuaHJlZlxuICAgICAgbGV0IGxpbmtTdGF0ZSA9IHRhcmdldC5nZXRBdHRyaWJ1dGUoUEhYX0xJTktfU1RBVEUpXG4gICAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICAgIGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCkgLy8gZG8gbm90IGJ1YmJsZSBjbGljayB0byByZWd1bGFyIHBoeC1jbGljayBiaW5kaW5nc1xuICAgICAgaWYodGhpcy5wZW5kaW5nTGluayA9PT0gaHJlZil7IHJldHVybiB9XG5cbiAgICAgIHRoaXMucmVxdWVzdERPTVVwZGF0ZSgoKSA9PiB7XG4gICAgICAgIGlmKHR5cGUgPT09IFwicGF0Y2hcIil7XG4gICAgICAgICAgdGhpcy5wdXNoSGlzdG9yeVBhdGNoKGhyZWYsIGxpbmtTdGF0ZSwgdGFyZ2V0KVxuICAgICAgICB9IGVsc2UgaWYodHlwZSA9PT0gXCJyZWRpcmVjdFwiKXtcbiAgICAgICAgICB0aGlzLmhpc3RvcnlSZWRpcmVjdChocmVmLCBsaW5rU3RhdGUpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBleHBlY3RlZCAke1BIWF9MSVZFX0xJTkt9IHRvIGJlIFwicGF0Y2hcIiBvciBcInJlZGlyZWN0XCIsIGdvdDogJHt0eXBlfWApXG4gICAgICAgIH1cbiAgICAgICAgbGV0IHBoeENsaWNrID0gdGFyZ2V0LmdldEF0dHJpYnV0ZSh0aGlzLmJpbmRpbmcoXCJjbGlja1wiKSlcbiAgICAgICAgaWYocGh4Q2xpY2spe1xuICAgICAgICAgIHRoaXMucmVxdWVzdERPTVVwZGF0ZSgoKSA9PiB0aGlzLmV4ZWNKUyh0YXJnZXQsIHBoeENsaWNrLCBcImNsaWNrXCIpKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH0sIGZhbHNlKVxuICB9XG5cbiAgbWF5YmVTY3JvbGwoc2Nyb2xsKSB7XG4gICAgaWYodHlwZW9mKHNjcm9sbCkgPT09IFwibnVtYmVyXCIpe1xuICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgd2luZG93LnNjcm9sbFRvKDAsIHNjcm9sbClcbiAgICAgIH0pIC8vIHRoZSBib2R5IG5lZWRzIHRvIHJlbmRlciBiZWZvcmUgd2Ugc2Nyb2xsLlxuICAgIH1cbiAgfVxuXG4gIGRpc3BhdGNoRXZlbnQoZXZlbnQsIHBheWxvYWQgPSB7fSl7XG4gICAgRE9NLmRpc3BhdGNoRXZlbnQod2luZG93LCBgcGh4OiR7ZXZlbnR9YCwge2RldGFpbDogcGF5bG9hZH0pXG4gIH1cblxuICBkaXNwYXRjaEV2ZW50cyhldmVudHMpe1xuICAgIGV2ZW50cy5mb3JFYWNoKChbZXZlbnQsIHBheWxvYWRdKSA9PiB0aGlzLmRpc3BhdGNoRXZlbnQoZXZlbnQsIHBheWxvYWQpKVxuICB9XG5cbiAgd2l0aFBhZ2VMb2FkaW5nKGluZm8sIGNhbGxiYWNrKXtcbiAgICBET00uZGlzcGF0Y2hFdmVudCh3aW5kb3csIFwicGh4OnBhZ2UtbG9hZGluZy1zdGFydFwiLCB7ZGV0YWlsOiBpbmZvfSlcbiAgICBsZXQgZG9uZSA9ICgpID0+IERPTS5kaXNwYXRjaEV2ZW50KHdpbmRvdywgXCJwaHg6cGFnZS1sb2FkaW5nLXN0b3BcIiwge2RldGFpbDogaW5mb30pXG4gICAgcmV0dXJuIGNhbGxiYWNrID8gY2FsbGJhY2soZG9uZSkgOiBkb25lXG4gIH1cblxuICBwdXNoSGlzdG9yeVBhdGNoKGhyZWYsIGxpbmtTdGF0ZSwgdGFyZ2V0RWwpe1xuICAgIGlmKCF0aGlzLmlzQ29ubmVjdGVkKCkpeyByZXR1cm4gQnJvd3Nlci5yZWRpcmVjdChocmVmKSB9XG5cbiAgICB0aGlzLndpdGhQYWdlTG9hZGluZyh7dG86IGhyZWYsIGtpbmQ6IFwicGF0Y2hcIn0sIGRvbmUgPT4ge1xuICAgICAgdGhpcy5tYWluLnB1c2hMaW5rUGF0Y2goaHJlZiwgdGFyZ2V0RWwsIGxpbmtSZWYgPT4ge1xuICAgICAgICB0aGlzLmhpc3RvcnlQYXRjaChocmVmLCBsaW5rU3RhdGUsIGxpbmtSZWYpXG4gICAgICAgIGRvbmUoKVxuICAgICAgfSlcbiAgICB9KVxuICB9XG5cbiAgaGlzdG9yeVBhdGNoKGhyZWYsIGxpbmtTdGF0ZSwgbGlua1JlZiA9IHRoaXMuc2V0UGVuZGluZ0xpbmsoaHJlZikpe1xuICAgIGlmKCF0aGlzLmNvbW1pdFBlbmRpbmdMaW5rKGxpbmtSZWYpKXsgcmV0dXJuIH1cblxuICAgIEJyb3dzZXIucHVzaFN0YXRlKGxpbmtTdGF0ZSwge3R5cGU6IFwicGF0Y2hcIiwgaWQ6IHRoaXMubWFpbi5pZH0sIGhyZWYpXG4gICAgdGhpcy5yZWdpc3Rlck5ld0xvY2F0aW9uKHdpbmRvdy5sb2NhdGlvbilcbiAgfVxuXG4gIGhpc3RvcnlSZWRpcmVjdChocmVmLCBsaW5rU3RhdGUsIGZsYXNoKXtcbiAgICAvLyBjb252ZXJ0IHRvIGZ1bGwgaHJlZiBpZiBvbmx5IHBhdGggcHJlZml4XG4gICAgaWYoIXRoaXMuaXNDb25uZWN0ZWQoKSl7IHJldHVybiBCcm93c2VyLnJlZGlyZWN0KGhyZWYsIGZsYXNoKSB9XG4gICAgaWYoL15cXC8kfF5cXC9bXlxcL10rLiokLy50ZXN0KGhyZWYpKXtcbiAgICAgIGxldCB7cHJvdG9jb2wsIGhvc3R9ID0gd2luZG93LmxvY2F0aW9uXG4gICAgICBocmVmID0gYCR7cHJvdG9jb2x9Ly8ke2hvc3R9JHtocmVmfWBcbiAgICB9XG4gICAgbGV0IHNjcm9sbCA9IHdpbmRvdy5zY3JvbGxZXG4gICAgdGhpcy53aXRoUGFnZUxvYWRpbmcoe3RvOiBocmVmLCBraW5kOiBcInJlZGlyZWN0XCJ9LCBkb25lID0+IHtcbiAgICAgIHRoaXMucmVwbGFjZU1haW4oaHJlZiwgZmxhc2gsICgpID0+IHtcbiAgICAgICAgQnJvd3Nlci5wdXNoU3RhdGUobGlua1N0YXRlLCB7dHlwZTogXCJyZWRpcmVjdFwiLCBpZDogdGhpcy5tYWluLmlkLCBzY3JvbGw6IHNjcm9sbH0sIGhyZWYpXG4gICAgICAgIHRoaXMucmVnaXN0ZXJOZXdMb2NhdGlvbih3aW5kb3cubG9jYXRpb24pXG4gICAgICAgIGRvbmUoKVxuICAgICAgfSlcbiAgICB9KVxuICB9XG5cbiAgcmVwbGFjZVJvb3RIaXN0b3J5KCl7XG4gICAgQnJvd3Nlci5wdXNoU3RhdGUoXCJyZXBsYWNlXCIsIHtyb290OiB0cnVlLCB0eXBlOiBcInBhdGNoXCIsIGlkOiB0aGlzLm1haW4uaWR9KVxuICB9XG5cbiAgcmVnaXN0ZXJOZXdMb2NhdGlvbihuZXdMb2NhdGlvbil7XG4gICAgbGV0IHtwYXRobmFtZSwgc2VhcmNofSA9IHRoaXMuY3VycmVudExvY2F0aW9uXG4gICAgaWYocGF0aG5hbWUgKyBzZWFyY2ggPT09IG5ld0xvY2F0aW9uLnBhdGhuYW1lICsgbmV3TG9jYXRpb24uc2VhcmNoKXtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmN1cnJlbnRMb2NhdGlvbiA9IGNsb25lKG5ld0xvY2F0aW9uKVxuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gIH1cblxuICBiaW5kRm9ybXMoKXtcbiAgICBsZXQgaXRlcmF0aW9ucyA9IDBcbiAgICBsZXQgZXh0ZXJuYWxGb3JtU3VibWl0dGVkID0gZmFsc2VcblxuICAgIC8vIGRpc2FibGUgZm9ybXMgb24gc3VibWl0IHRoYXQgdHJhY2sgcGh4LWNoYW5nZSBidXQgcGVyZm9ybSBleHRlcm5hbCBzdWJtaXRcbiAgICB0aGlzLm9uKFwic3VibWl0XCIsIGUgPT4ge1xuICAgICAgbGV0IHBoeFN1Ym1pdCA9IGUudGFyZ2V0LmdldEF0dHJpYnV0ZSh0aGlzLmJpbmRpbmcoXCJzdWJtaXRcIikpXG4gICAgICBsZXQgcGh4Q2hhbmdlID0gZS50YXJnZXQuZ2V0QXR0cmlidXRlKHRoaXMuYmluZGluZyhcImNoYW5nZVwiKSlcbiAgICAgIGlmKCFleHRlcm5hbEZvcm1TdWJtaXR0ZWQgJiYgcGh4Q2hhbmdlICYmICFwaHhTdWJtaXQpe1xuICAgICAgICBleHRlcm5hbEZvcm1TdWJtaXR0ZWQgPSB0cnVlXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgICAgICB0aGlzLndpdGhpbk93bmVycyhlLnRhcmdldCwgdmlldyA9PiB7XG4gICAgICAgICAgdmlldy5kaXNhYmxlRm9ybShlLnRhcmdldClcbiAgICAgICAgICAvLyBzYWZhcmkgbmVlZHMgbmV4dCB0aWNrXG4gICAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgICAgICBpZihET00uaXNVbmxvYWRhYmxlRm9ybVN1Ym1pdChlKSl7IHRoaXMudW5sb2FkKCkgfVxuICAgICAgICAgICAgZS50YXJnZXQuc3VibWl0KClcbiAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0sIHRydWUpXG5cbiAgICB0aGlzLm9uKFwic3VibWl0XCIsIGUgPT4ge1xuICAgICAgbGV0IHBoeEV2ZW50ID0gZS50YXJnZXQuZ2V0QXR0cmlidXRlKHRoaXMuYmluZGluZyhcInN1Ym1pdFwiKSlcbiAgICAgIGlmKCFwaHhFdmVudCl7XG4gICAgICAgIGlmKERPTS5pc1VubG9hZGFibGVGb3JtU3VibWl0KGUpKXsgdGhpcy51bmxvYWQoKSB9XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICBlLnRhcmdldC5kaXNhYmxlZCA9IHRydWVcbiAgICAgIHRoaXMud2l0aGluT3duZXJzKGUudGFyZ2V0LCB2aWV3ID0+IHtcbiAgICAgICAgSlMuZXhlYyhcInN1Ym1pdFwiLCBwaHhFdmVudCwgdmlldywgZS50YXJnZXQsIFtcInB1c2hcIiwge3N1Ym1pdHRlcjogZS5zdWJtaXR0ZXJ9XSlcbiAgICAgIH0pXG4gICAgfSwgZmFsc2UpXG5cbiAgICBmb3IobGV0IHR5cGUgb2YgW1wiY2hhbmdlXCIsIFwiaW5wdXRcIl0pe1xuICAgICAgdGhpcy5vbih0eXBlLCBlID0+IHtcbiAgICAgICAgbGV0IHBoeENoYW5nZSA9IHRoaXMuYmluZGluZyhcImNoYW5nZVwiKVxuICAgICAgICBsZXQgaW5wdXQgPSBlLnRhcmdldFxuICAgICAgICBsZXQgaW5wdXRFdmVudCA9IGlucHV0LmdldEF0dHJpYnV0ZShwaHhDaGFuZ2UpXG4gICAgICAgIGxldCBmb3JtRXZlbnQgPSBpbnB1dC5mb3JtICYmIGlucHV0LmZvcm0uZ2V0QXR0cmlidXRlKHBoeENoYW5nZSlcbiAgICAgICAgbGV0IHBoeEV2ZW50ID0gaW5wdXRFdmVudCB8fCBmb3JtRXZlbnRcbiAgICAgICAgaWYoIXBoeEV2ZW50KXsgcmV0dXJuIH1cbiAgICAgICAgaWYoaW5wdXQudHlwZSA9PT0gXCJudW1iZXJcIiAmJiBpbnB1dC52YWxpZGl0eSAmJiBpbnB1dC52YWxpZGl0eS5iYWRJbnB1dCl7IHJldHVybiB9XG5cbiAgICAgICAgbGV0IGRpc3BhdGNoZXIgPSBpbnB1dEV2ZW50ID8gaW5wdXQgOiBpbnB1dC5mb3JtXG4gICAgICAgIGxldCBjdXJyZW50SXRlcmF0aW9ucyA9IGl0ZXJhdGlvbnNcbiAgICAgICAgaXRlcmF0aW9ucysrXG4gICAgICAgIGxldCB7YXQ6IGF0LCB0eXBlOiBsYXN0VHlwZX0gPSBET00ucHJpdmF0ZShpbnB1dCwgXCJwcmV2LWl0ZXJhdGlvblwiKSB8fCB7fVxuICAgICAgICAvLyBkZXRlY3QgZHVwIGJlY2F1c2Ugc29tZSBicm93c2VycyBkaXNwYXRjaCBib3RoIFwiaW5wdXRcIiBhbmQgXCJjaGFuZ2VcIlxuICAgICAgICBpZihhdCA9PT0gY3VycmVudEl0ZXJhdGlvbnMgLSAxICYmIHR5cGUgIT09IGxhc3RUeXBlKXsgcmV0dXJuIH1cblxuICAgICAgICBET00ucHV0UHJpdmF0ZShpbnB1dCwgXCJwcmV2LWl0ZXJhdGlvblwiLCB7YXQ6IGN1cnJlbnRJdGVyYXRpb25zLCB0eXBlOiB0eXBlfSlcblxuICAgICAgICB0aGlzLmRlYm91bmNlKGlucHV0LCBlLCB0eXBlLCAoKSA9PiB7XG4gICAgICAgICAgdGhpcy53aXRoaW5Pd25lcnMoZGlzcGF0Y2hlciwgdmlldyA9PiB7XG4gICAgICAgICAgICBET00ucHV0UHJpdmF0ZShpbnB1dCwgUEhYX0hBU19GT0NVU0VELCB0cnVlKVxuICAgICAgICAgICAgaWYoIURPTS5pc1RleHR1YWxJbnB1dChpbnB1dCkpe1xuICAgICAgICAgICAgICB0aGlzLnNldEFjdGl2ZUVsZW1lbnQoaW5wdXQpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBKUy5leGVjKFwiY2hhbmdlXCIsIHBoeEV2ZW50LCB2aWV3LCBpbnB1dCwgW1wicHVzaFwiLCB7X3RhcmdldDogZS50YXJnZXQubmFtZSwgZGlzcGF0Y2hlcjogZGlzcGF0Y2hlcn1dKVxuICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICB9LCBmYWxzZSlcbiAgICB9XG4gICAgdGhpcy5vbihcInJlc2V0XCIsIChlKSA9PiB7XG4gICAgICBsZXQgZm9ybSA9IGUudGFyZ2V0XG4gICAgICBET00ucmVzZXRGb3JtKGZvcm0sIHRoaXMuYmluZGluZyhQSFhfRkVFREJBQ0tfRk9SKSlcbiAgICAgIGxldCBpbnB1dCA9IEFycmF5LmZyb20oZm9ybS5lbGVtZW50cykuZmluZChlbCA9PiBlbC50eXBlID09PSBcInJlc2V0XCIpXG4gICAgICAvLyB3YWl0IHVudGlsIG5leHQgdGljayB0byBnZXQgdXBkYXRlZCBpbnB1dCB2YWx1ZVxuICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgIGlucHV0LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwiaW5wdXRcIiwge2J1YmJsZXM6IHRydWUsIGNhbmNlbGFibGU6IGZhbHNlfSkpXG4gICAgICB9KVxuICAgIH0pXG4gIH1cblxuICBkZWJvdW5jZShlbCwgZXZlbnQsIGV2ZW50VHlwZSwgY2FsbGJhY2spe1xuICAgIGlmKGV2ZW50VHlwZSA9PT0gXCJibHVyXCIgfHwgZXZlbnRUeXBlID09PSBcImZvY3Vzb3V0XCIpeyByZXR1cm4gY2FsbGJhY2soKSB9XG5cbiAgICBsZXQgcGh4RGVib3VuY2UgPSB0aGlzLmJpbmRpbmcoUEhYX0RFQk9VTkNFKVxuICAgIGxldCBwaHhUaHJvdHRsZSA9IHRoaXMuYmluZGluZyhQSFhfVEhST1RUTEUpXG4gICAgbGV0IGRlZmF1bHREZWJvdW5jZSA9IHRoaXMuZGVmYXVsdHMuZGVib3VuY2UudG9TdHJpbmcoKVxuICAgIGxldCBkZWZhdWx0VGhyb3R0bGUgPSB0aGlzLmRlZmF1bHRzLnRocm90dGxlLnRvU3RyaW5nKClcblxuICAgIHRoaXMud2l0aGluT3duZXJzKGVsLCB2aWV3ID0+IHtcbiAgICAgIGxldCBhc3luY0ZpbHRlciA9ICgpID0+ICF2aWV3LmlzRGVzdHJveWVkKCkgJiYgZG9jdW1lbnQuYm9keS5jb250YWlucyhlbClcbiAgICAgIERPTS5kZWJvdW5jZShlbCwgZXZlbnQsIHBoeERlYm91bmNlLCBkZWZhdWx0RGVib3VuY2UsIHBoeFRocm90dGxlLCBkZWZhdWx0VGhyb3R0bGUsIGFzeW5jRmlsdGVyLCAoKSA9PiB7XG4gICAgICAgIGNhbGxiYWNrKClcbiAgICAgIH0pXG4gICAgfSlcbiAgfVxuXG4gIHNpbGVuY2VFdmVudHMoY2FsbGJhY2spe1xuICAgIHRoaXMuc2lsZW5jZWQgPSB0cnVlXG4gICAgY2FsbGJhY2soKVxuICAgIHRoaXMuc2lsZW5jZWQgPSBmYWxzZVxuICB9XG5cbiAgb24oZXZlbnQsIGNhbGxiYWNrKXtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgZSA9PiB7XG4gICAgICBpZighdGhpcy5zaWxlbmNlZCl7IGNhbGxiYWNrKGUpIH1cbiAgICB9KVxuICB9XG59XG5cbmNsYXNzIFRyYW5zaXRpb25TZXQge1xuICBjb25zdHJ1Y3Rvcigpe1xuICAgIHRoaXMudHJhbnNpdGlvbnMgPSBuZXcgU2V0KClcbiAgICB0aGlzLnBlbmRpbmdPcHMgPSBbXVxuICB9XG5cbiAgcmVzZXQoKXtcbiAgICB0aGlzLnRyYW5zaXRpb25zLmZvckVhY2godGltZXIgPT4ge1xuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVyKVxuICAgICAgdGhpcy50cmFuc2l0aW9ucy5kZWxldGUodGltZXIpXG4gICAgfSlcbiAgICB0aGlzLmZsdXNoUGVuZGluZ09wcygpXG4gIH1cblxuICBhZnRlcihjYWxsYmFjayl7XG4gICAgaWYodGhpcy5zaXplKCkgPT09IDApe1xuICAgICAgY2FsbGJhY2soKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnB1c2hQZW5kaW5nT3AoY2FsbGJhY2spXG4gICAgfVxuICB9XG5cbiAgYWRkVHJhbnNpdGlvbih0aW1lLCBvblN0YXJ0LCBvbkRvbmUpe1xuICAgIG9uU3RhcnQoKVxuICAgIGxldCB0aW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy50cmFuc2l0aW9ucy5kZWxldGUodGltZXIpXG4gICAgICBvbkRvbmUoKVxuICAgICAgdGhpcy5mbHVzaFBlbmRpbmdPcHMoKVxuICAgIH0sIHRpbWUpXG4gICAgdGhpcy50cmFuc2l0aW9ucy5hZGQodGltZXIpXG4gIH1cblxuICBwdXNoUGVuZGluZ09wKG9wKXsgdGhpcy5wZW5kaW5nT3BzLnB1c2gob3ApIH1cblxuICBzaXplKCl7IHJldHVybiB0aGlzLnRyYW5zaXRpb25zLnNpemUgfVxuXG4gIGZsdXNoUGVuZGluZ09wcygpe1xuICAgIGlmKHRoaXMuc2l6ZSgpID4gMCl7IHJldHVybiB9XG4gICAgbGV0IG9wID0gdGhpcy5wZW5kaW5nT3BzLnNoaWZ0KClcbiAgICBpZihvcCl7XG4gICAgICBvcCgpXG4gICAgICB0aGlzLmZsdXNoUGVuZGluZ09wcygpXG4gICAgfVxuICB9XG59XG4iLCAiLy8gV2UgaW1wb3J0IHRoZSBDU1Mgd2hpY2ggaXMgZXh0cmFjdGVkIHRvIGl0cyBvd24gZmlsZSBieSBlc2J1aWxkLlxuLy8gUmVtb3ZlIHRoaXMgbGluZSBpZiB5b3UgYWRkIGEgeW91ciBvd24gQ1NTIGJ1aWxkIHBpcGVsaW5lIChlLmcgcG9zdGNzcykuXG5pbXBvcnQgXCIuLi9jc3MvYXBwLmNzc1wiXG4vLyBJbXBvcnQgdGhlIGRhcmsgbW9kZSB0b2dnbGUgc2NyaXB0XG5pbXBvcnQgXCIuL2RhcmtfbW9kZVwiXG5cbi8vIEFkZGluZyBQb3N0SG9nIGpzIGxpYnJhcnkgZ29vZGllc1xuaW1wb3J0IHBvc3Rob2cgZnJvbSBcInBvc3Rob2ctanNcIlxuXG5wb3N0aG9nLmluaXQoJ3BoY19CeWFnb2JhNlRTNlVCWjRBQU1PU1k1TlpwYmFFVUpsdE1LSDlDc1prdjRsJywgeyBhcGlfaG9zdDogJ2h0dHBzOi8vYXBwLnBvc3Rob2cuY29tJyB9KVxuXG4vLyBJZiB5b3Ugd2FudCB0byB1c2UgUGhvZW5peCBjaGFubmVscywgcnVuIGBtaXggaGVscCBwaHguZ2VuLmNoYW5uZWxgXG4vLyB0byBnZXQgc3RhcnRlZCBhbmQgdGhlbiB1bmNvbW1lbnQgdGhlIGxpbmUgYmVsb3cuXG4vLyBpbXBvcnQgXCIuL3VzZXJfc29ja2V0LmpzXCJcblxuLy8gWW91IGNhbiBpbmNsdWRlIGRlcGVuZGVuY2llcyBpbiB0d28gd2F5cy5cbi8vXG4vLyBUaGUgc2ltcGxlc3Qgb3B0aW9uIGlzIHRvIHB1dCB0aGVtIGluIGFzc2V0cy92ZW5kb3IgYW5kXG4vLyBpbXBvcnQgdGhlbSB1c2luZyByZWxhdGl2ZSBwYXRoczpcbi8vXG4vLyAgICAgaW1wb3J0IFwiLi4vdmVuZG9yL3NvbWUtcGFja2FnZS5qc1wiXG4vL1xuLy8gQWx0ZXJuYXRpdmVseSwgeW91IGNhbiBgbnBtIGluc3RhbGwgc29tZS1wYWNrYWdlIC0tcHJlZml4IGFzc2V0c2AgYW5kIGltcG9ydFxuLy8gdGhlbSB1c2luZyBhIHBhdGggc3RhcnRpbmcgd2l0aCB0aGUgcGFja2FnZSBuYW1lOlxuLy9cbi8vICAgICBpbXBvcnQgXCJzb21lLXBhY2thZ2VcIlxuLy9cblxuLy8gSW5jbHVkZSBwaG9lbml4X2h0bWwgdG8gaGFuZGxlIG1ldGhvZD1QVVQvREVMRVRFIGluIGZvcm1zIGFuZCBidXR0b25zLlxuaW1wb3J0IFwicGhvZW5peF9odG1sXCJcbi8vIEVzdGFibGlzaCBQaG9lbml4IFNvY2tldCBhbmQgTGl2ZVZpZXcgY29uZmlndXJhdGlvbi5cbmltcG9ydCB7U29ja2V0fSBmcm9tIFwicGhvZW5peFwiXG5pbXBvcnQge0xpdmVTb2NrZXR9IGZyb20gXCJwaG9lbml4X2xpdmVfdmlld1wiXG5pbXBvcnQgdG9wYmFyIGZyb20gXCIuLi92ZW5kb3IvdG9wYmFyXCJcblxubGV0IGNzcmZUb2tlbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJtZXRhW25hbWU9J2NzcmYtdG9rZW4nXVwiKS5nZXRBdHRyaWJ1dGUoXCJjb250ZW50XCIpXG5sZXQgbGl2ZVNvY2tldCA9IG5ldyBMaXZlU29ja2V0KFwiL2xpdmVcIiwgU29ja2V0LCB7cGFyYW1zOiB7X2NzcmZfdG9rZW46IGNzcmZUb2tlbn19KVxuXG4vLyBDYXB0dXJlIHNlYXJjaGVzIGZvciBQb3N0SG9nIGN1c3RvbSBldmVudFxubGV0IHNlYXJjaFRpbWVvdXQ7XG5cbi8vIEF0dGFjaCBldmVudCBsaXN0ZW5lciB0byB0aGUgc2VhcmNoIGlucHV0IGZvciBQb3N0SG9nIGN1c3RvbSBldmVudFxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgaWYgKGV2ZW50LnRhcmdldC5tYXRjaGVzKCcuc2VhcmNoLWJveC1kZWZhdWx0JykpIHtcbiAgICBjb25zdCBzZWFyY2hRdWVyeSA9IGV2ZW50LnRhcmdldC52YWx1ZTtcbiAgICBcbiAgICAvLyBDbGVhciB0aGUgcHJldmlvdXMgdGltZW91dFxuICAgIGNsZWFyVGltZW91dChzZWFyY2hUaW1lb3V0KTtcbiAgICBcbiAgICAvLyBTZXQgYSBuZXcgdGltZW91dCB0byBjYXB0dXJlIHRoZSBldmVudCBhZnRlciA1IHNlY29uZHMgb2YgaW5hY3Rpdml0eVxuICAgIHNlYXJjaFRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgcG9zdGhvZy5jYXB0dXJlKCd1c2VkX3NlYXJjaCcsIHsgcXVlcnk6IHNlYXJjaFF1ZXJ5IH0pO1xuICAgIH0sIDUwMDApO1xuICB9XG59LCBmYWxzZSk7XG5cbi8vIFRyaWdnZXIgZm9yIFBvc3RIb2cgc3VydmV5czpcblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uICgpIHtcbiAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgY29uc3Qgc3VydmV5SDEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc3VydmV5LWgxJyk7XG4gICAgaWYgKHN1cnZleUgxKSB7XG4gICAgICBzdXJ2ZXlIMS5jbGFzc0xpc3QuYWRkKCdkZWxheWVkLXN1cnZleScpO1xuICAgIH1cbiAgfSwgMTIwMDAwKTsgLy8gMiBtaW51dGVzXG59KTtcblxuXG4vLyBTaG93IHByb2dyZXNzIGJhciBvbiBsaXZlIG5hdmlnYXRpb24gYW5kIGZvcm0gc3VibWl0cywgaWYgc3RpbGwgbG9hZGluZyBhZnRlciA1MDBtc1xudG9wYmFyLmNvbmZpZyh7YmFyQ29sb3JzOiB7MDogXCIjMjlkXCJ9LCBzaGFkb3dDb2xvcjogXCJyZ2JhKDAsIDAsIDAsIC4zKVwifSlcbmxldCB0b3BCYXJTY2hlZHVsZWQgPSB1bmRlZmluZWRcblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJwaHg6cGFnZS1sb2FkaW5nLXN0YXJ0XCIsICgpID0+IHtcbiAgaWYoIXRvcEJhclNjaGVkdWxlZCkge1xuICAgIHRvcEJhclNjaGVkdWxlZCA9IHNldFRpbWVvdXQoKCkgPT4gdG9wYmFyLnNob3coKSwgNTAwKVxuICB9XG59KVxuXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInBoeDpwYWdlLWxvYWRpbmctc3RvcFwiLCAoKSA9PiB7XG4gIGNsZWFyVGltZW91dCh0b3BCYXJTY2hlZHVsZWQpXG4gIHRvcEJhclNjaGVkdWxlZCA9IHVuZGVmaW5lZFxuICB0b3BiYXIuaGlkZSgpXG59KVxuXG4vLyBjb25uZWN0IGlmIHRoZXJlIGFyZSBhbnkgTGl2ZVZpZXdzIG9uIHRoZSBwYWdlXG5saXZlU29ja2V0LmNvbm5lY3QoKVxuXG4vLyBleHBvc2UgbGl2ZVNvY2tldCBvbiB3aW5kb3cgZm9yIHdlYiBjb25zb2xlIGRlYnVnIGxvZ3MgYW5kIGxhdGVuY3kgc2ltdWxhdGlvbjpcbmxpdmVTb2NrZXQuZW5hYmxlRGVidWcoKVxuLy8gPj4gbGl2ZVNvY2tldC5lbmFibGVMYXRlbmN5U2ltKDEwMDApICAvLyBlbmFibGVkIGZvciBkdXJhdGlvbiBvZiBicm93c2VyIHNlc3Npb25cbi8vID4+IGxpdmVTb2NrZXQuZGlzYWJsZUxhdGVuY3lTaW0oKVxud2luZG93LmxpdmVTb2NrZXQgPSBsaXZlU29ja2V0XG5cbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQU1BLE1B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
