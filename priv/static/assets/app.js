(() => {
  var __create = Object.create;
  var __defProp = Object.defineProperty;
  var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
  var __getOwnPropNames = Object.getOwnPropertyNames;
  var __getOwnPropSymbols = Object.getOwnPropertySymbols;
  var __getProtoOf = Object.getPrototypeOf;
  var __hasOwnProp = Object.prototype.hasOwnProperty;
  var __propIsEnum = Object.prototype.propertyIsEnumerable;
  var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
  var __spreadValues = (a2, b2) => {
    for (var prop in b2 || (b2 = {}))
      if (__hasOwnProp.call(b2, prop))
        __defNormalProp(a2, prop, b2[prop]);
    if (__getOwnPropSymbols)
      for (var prop of __getOwnPropSymbols(b2)) {
        if (__propIsEnum.call(b2, prop))
          __defNormalProp(a2, prop, b2[prop]);
      }
    return a2;
  };
  var __objRest = (source, exclude) => {
    var target = {};
    for (var prop in source)
      if (__hasOwnProp.call(source, prop) && exclude.indexOf(prop) < 0)
        target[prop] = source[prop];
    if (source != null && __getOwnPropSymbols)
      for (var prop of __getOwnPropSymbols(source)) {
        if (exclude.indexOf(prop) < 0 && __propIsEnum.call(source, prop))
          target[prop] = source[prop];
      }
    return target;
  };
  var __commonJS = (cb, mod) => function __require() {
    return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
  };
  var __copyProps = (to, from, except, desc) => {
    if (from && typeof from === "object" || typeof from === "function") {
      for (let key of __getOwnPropNames(from))
        if (!__hasOwnProp.call(to, key) && key !== except)
          __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
    }
    return to;
  };
  var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target, mod));

  // vendor/topbar.js
  var require_topbar = __commonJS({
    "vendor/topbar.js"(exports, module) {
      (function(window2, document2) {
        "use strict";
        (function() {
          var lastTime = 0;
          var vendors = ["ms", "moz", "webkit", "o"];
          for (var x2 = 0; x2 < vendors.length && !window2.requestAnimationFrame; ++x2) {
            window2.requestAnimationFrame = window2[vendors[x2] + "RequestAnimationFrame"];
            window2.cancelAnimationFrame = window2[vendors[x2] + "CancelAnimationFrame"] || window2[vendors[x2] + "CancelRequestAnimationFrame"];
          }
          if (!window2.requestAnimationFrame)
            window2.requestAnimationFrame = function(callback, element) {
              var currTime = new Date().getTime();
              var timeToCall = Math.max(0, 16 - (currTime - lastTime));
              var id = window2.setTimeout(function() {
                callback(currTime + timeToCall);
              }, timeToCall);
              lastTime = currTime + timeToCall;
              return id;
            };
          if (!window2.cancelAnimationFrame)
            window2.cancelAnimationFrame = function(id) {
              clearTimeout(id);
            };
        })();
        var canvas, progressTimerId, fadeTimerId, currentProgress, showing, addEvent = function(elem, type, handler) {
          if (elem.addEventListener)
            elem.addEventListener(type, handler, false);
          else if (elem.attachEvent)
            elem.attachEvent("on" + type, handler);
          else
            elem["on" + type] = handler;
        }, options = {
          autoRun: true,
          barThickness: 3,
          barColors: {
            0: "rgba(26,  188, 156, .9)",
            ".25": "rgba(52,  152, 219, .9)",
            ".50": "rgba(241, 196, 15,  .9)",
            ".75": "rgba(230, 126, 34,  .9)",
            "1.0": "rgba(211, 84,  0,   .9)"
          },
          shadowBlur: 10,
          shadowColor: "rgba(0,   0,   0,   .6)",
          className: null
        }, repaint = function() {
          canvas.width = window2.innerWidth;
          canvas.height = options.barThickness * 5;
          var ctx = canvas.getContext("2d");
          ctx.shadowBlur = options.shadowBlur;
          ctx.shadowColor = options.shadowColor;
          var lineGradient = ctx.createLinearGradient(0, 0, canvas.width, 0);
          for (var stop in options.barColors)
            lineGradient.addColorStop(stop, options.barColors[stop]);
          ctx.lineWidth = options.barThickness;
          ctx.beginPath();
          ctx.moveTo(0, options.barThickness / 2);
          ctx.lineTo(Math.ceil(currentProgress * canvas.width), options.barThickness / 2);
          ctx.strokeStyle = lineGradient;
          ctx.stroke();
        }, createCanvas = function() {
          canvas = document2.createElement("canvas");
          var style = canvas.style;
          style.position = "fixed";
          style.top = style.left = style.right = style.margin = style.padding = 0;
          style.zIndex = 100001;
          style.display = "none";
          if (options.className)
            canvas.classList.add(options.className);
          document2.body.appendChild(canvas);
          addEvent(window2, "resize", repaint);
        }, topbar2 = {
          config: function(opts) {
            for (var key in opts)
              if (options.hasOwnProperty(key))
                options[key] = opts[key];
          },
          show: function() {
            if (showing)
              return;
            showing = true;
            if (fadeTimerId !== null)
              window2.cancelAnimationFrame(fadeTimerId);
            if (!canvas)
              createCanvas();
            canvas.style.opacity = 1;
            canvas.style.display = "block";
            topbar2.progress(0);
            if (options.autoRun) {
              (function loop() {
                progressTimerId = window2.requestAnimationFrame(loop);
                topbar2.progress("+" + 0.05 * Math.pow(1 - Math.sqrt(currentProgress), 2));
              })();
            }
          },
          progress: function(to) {
            if (typeof to === "undefined")
              return currentProgress;
            if (typeof to === "string") {
              to = (to.indexOf("+") >= 0 || to.indexOf("-") >= 0 ? currentProgress : 0) + parseFloat(to);
            }
            currentProgress = to > 1 ? 1 : to;
            repaint();
            return currentProgress;
          },
          hide: function() {
            if (!showing)
              return;
            showing = false;
            if (progressTimerId != null) {
              window2.cancelAnimationFrame(progressTimerId);
              progressTimerId = null;
            }
            (function loop() {
              if (topbar2.progress("+.1") >= 1) {
                canvas.style.opacity -= 0.05;
                if (canvas.style.opacity <= 0.05) {
                  canvas.style.display = "none";
                  fadeTimerId = null;
                  return;
                }
              }
              fadeTimerId = window2.requestAnimationFrame(loop);
            })();
          }
        };
        if (typeof module === "object" && typeof module.exports === "object") {
          module.exports = topbar2;
        } else if (typeof define === "function" && define.amd) {
          define(function() {
            return topbar2;
          });
        } else {
          this.topbar = topbar2;
        }
      }).call(exports, window, document);
    }
  });

  // js/dark_mode.js
  function setDarkModePreference(isDarkMode) {
    localStorage.setItem("darkMode", isDarkMode ? "true" : "false");
    document.cookie = "darkModePreference=" + (isDarkMode ? "true" : "false") + ";path=/";
    var bodyElement = document.body;
    var lightModeToggle = document.getElementById("light-mode-toggle");
    var darkModeToggle = document.getElementById("dark-mode-toggle");
    if (isDarkMode) {
      bodyElement.classList.add("dark-mode");
      lightModeToggle.style.display = "none";
      darkModeToggle.style.display = "block";
    } else {
      bodyElement.classList.remove("dark-mode");
      lightModeToggle.style.display = "block";
      darkModeToggle.style.display = "none";
    }
  }
  function toggleDarkMode() {
    var isDarkMode = localStorage.getItem("darkMode") === "true";
    setDarkModePreference(!isDarkMode);
  }
  var darkModeIcon = document.getElementById("dark-mode-icon");
  if (darkModeIcon) {
    darkModeIcon.addEventListener("click", toggleDarkMode);
  }
  var initialDarkMode = localStorage.getItem("darkMode") === "true";
  setDarkModePreference(initialDarkMode);
  window.getCookie = function(name) {
    const value = "; " + document.cookie;
    const parts = value.split("; " + name + "=");
    if (parts.length === 2)
      return parts.pop().split(";").shift();
    return null;
  };

  // ../node_modules/posthog-js/dist/es.js
  function e(e6, t2) {
    var n2 = Object.keys(e6);
    if (Object.getOwnPropertySymbols) {
      var r2 = Object.getOwnPropertySymbols(e6);
      t2 && (r2 = r2.filter(function(t3) {
        return Object.getOwnPropertyDescriptor(e6, t3).enumerable;
      })), n2.push.apply(n2, r2);
    }
    return n2;
  }
  function t(t2) {
    for (var n2 = 1; n2 < arguments.length; n2++) {
      var r2 = arguments[n2] != null ? arguments[n2] : {};
      n2 % 2 ? e(Object(r2), true).forEach(function(e6) {
        s(t2, e6, r2[e6]);
      }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(t2, Object.getOwnPropertyDescriptors(r2)) : e(Object(r2)).forEach(function(e6) {
        Object.defineProperty(t2, e6, Object.getOwnPropertyDescriptor(r2, e6));
      });
    }
    return t2;
  }
  function n(e6) {
    return n = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(e7) {
      return typeof e7;
    } : function(e7) {
      return e7 && typeof Symbol == "function" && e7.constructor === Symbol && e7 !== Symbol.prototype ? "symbol" : typeof e7;
    }, n(e6);
  }
  function r(e6, t2) {
    if (!(e6 instanceof t2))
      throw new TypeError("Cannot call a class as a function");
  }
  function i(e6, t2) {
    for (var n2 = 0; n2 < t2.length; n2++) {
      var r2 = t2[n2];
      r2.enumerable = r2.enumerable || false, r2.configurable = true, "value" in r2 && (r2.writable = true), Object.defineProperty(e6, r2.key, r2);
    }
  }
  function o(e6, t2, n2) {
    return t2 && i(e6.prototype, t2), n2 && i(e6, n2), Object.defineProperty(e6, "prototype", { writable: false }), e6;
  }
  function s(e6, t2, n2) {
    return t2 in e6 ? Object.defineProperty(e6, t2, { value: n2, enumerable: true, configurable: true, writable: true }) : e6[t2] = n2, e6;
  }
  function a(e6, t2) {
    if (typeof t2 != "function" && t2 !== null)
      throw new TypeError("Super expression must either be null or a function");
    e6.prototype = Object.create(t2 && t2.prototype, { constructor: { value: e6, writable: true, configurable: true } }), Object.defineProperty(e6, "prototype", { writable: false }), t2 && l(e6, t2);
  }
  function u(e6) {
    return u = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(e7) {
      return e7.__proto__ || Object.getPrototypeOf(e7);
    }, u(e6);
  }
  function l(e6, t2) {
    return l = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e7, t3) {
      return e7.__proto__ = t3, e7;
    }, l(e6, t2);
  }
  function c(e6, t2) {
    if (e6 == null)
      return {};
    var n2, r2, i2 = function(e7, t3) {
      if (e7 == null)
        return {};
      var n3, r3, i3 = {}, o3 = Object.keys(e7);
      for (r3 = 0; r3 < o3.length; r3++)
        n3 = o3[r3], t3.indexOf(n3) >= 0 || (i3[n3] = e7[n3]);
      return i3;
    }(e6, t2);
    if (Object.getOwnPropertySymbols) {
      var o2 = Object.getOwnPropertySymbols(e6);
      for (r2 = 0; r2 < o2.length; r2++)
        n2 = o2[r2], t2.indexOf(n2) >= 0 || Object.prototype.propertyIsEnumerable.call(e6, n2) && (i2[n2] = e6[n2]);
    }
    return i2;
  }
  function d(e6, t2) {
    if (t2 && (typeof t2 == "object" || typeof t2 == "function"))
      return t2;
    if (t2 !== void 0)
      throw new TypeError("Derived constructors may only return object or undefined");
    return function(e7) {
      if (e7 === void 0)
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
      return e7;
    }(e6);
  }
  function h(e6) {
    var t2 = function() {
      if (typeof Reflect == "undefined" || !Reflect.construct)
        return false;
      if (Reflect.construct.sham)
        return false;
      if (typeof Proxy == "function")
        return true;
      try {
        return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
        })), true;
      } catch (e7) {
        return false;
      }
    }();
    return function() {
      var n2, r2 = u(e6);
      if (t2) {
        var i2 = u(this).constructor;
        n2 = Reflect.construct(r2, arguments, i2);
      } else
        n2 = r2.apply(this, arguments);
      return d(this, n2);
    };
  }
  function f(e6, t2) {
    return function(e7) {
      if (Array.isArray(e7))
        return e7;
    }(e6) || function(e7, t3) {
      var n2 = e7 == null ? null : typeof Symbol != "undefined" && e7[Symbol.iterator] || e7["@@iterator"];
      if (n2 == null)
        return;
      var r2, i2, o2 = [], s2 = true, a2 = false;
      try {
        for (n2 = n2.call(e7); !(s2 = (r2 = n2.next()).done) && (o2.push(r2.value), !t3 || o2.length !== t3); s2 = true)
          ;
      } catch (e8) {
        a2 = true, i2 = e8;
      } finally {
        try {
          s2 || n2.return == null || n2.return();
        } finally {
          if (a2)
            throw i2;
        }
      }
      return o2;
    }(e6, t2) || g(e6, t2) || function() {
      throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
    }();
  }
  function p(e6) {
    return function(e7) {
      if (Array.isArray(e7))
        return _(e7);
    }(e6) || function(e7) {
      if (typeof Symbol != "undefined" && e7[Symbol.iterator] != null || e7["@@iterator"] != null)
        return Array.from(e7);
    }(e6) || g(e6) || function() {
      throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
    }();
  }
  function g(e6, t2) {
    if (e6) {
      if (typeof e6 == "string")
        return _(e6, t2);
      var n2 = Object.prototype.toString.call(e6).slice(8, -1);
      return n2 === "Object" && e6.constructor && (n2 = e6.constructor.name), n2 === "Map" || n2 === "Set" ? Array.from(e6) : n2 === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n2) ? _(e6, t2) : void 0;
    }
  }
  function _(e6, t2) {
    (t2 == null || t2 > e6.length) && (t2 = e6.length);
    for (var n2 = 0, r2 = new Array(t2); n2 < t2; n2++)
      r2[n2] = e6[n2];
    return r2;
  }
  function v(e6, t2) {
    var n2 = typeof Symbol != "undefined" && e6[Symbol.iterator] || e6["@@iterator"];
    if (!n2) {
      if (Array.isArray(e6) || (n2 = g(e6)) || t2 && e6 && typeof e6.length == "number") {
        n2 && (e6 = n2);
        var r2 = 0, i2 = function() {
        };
        return { s: i2, n: function() {
          return r2 >= e6.length ? { done: true } : { done: false, value: e6[r2++] };
        }, e: function(e7) {
          throw e7;
        }, f: i2 };
      }
      throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
    }
    var o2, s2 = true, a2 = false;
    return { s: function() {
      n2 = n2.call(e6);
    }, n: function() {
      var e7 = n2.next();
      return s2 = e7.done, e7;
    }, e: function(e7) {
      a2 = true, o2 = e7;
    }, f: function() {
      try {
        s2 || n2.return == null || n2.return();
      } finally {
        if (a2)
          throw o2;
      }
    } };
  }
  var m = { DEBUG: false, LIB_VERSION: "1.111.2" };
  var y = Array.isArray;
  var b = Object.prototype;
  var w = b.hasOwnProperty;
  var k = b.toString;
  var S = y || function(e6) {
    return k.call(e6) === "[object Array]";
  };
  var F = function(e6) {
    return k.call(e6) === "[object Uint8Array]";
  };
  var R = function(e6) {
    return typeof e6 == "function";
  };
  var P = function(e6) {
    return e6 === Object(e6) && !S(e6);
  };
  var x = function(e6) {
    return e6 === void 0;
  };
  var E = function(e6) {
    return k.call(e6) == "[object String]";
  };
  var I = function(e6) {
    return e6 === null;
  };
  var C = function(e6) {
    return x(e6) || I(e6);
  };
  var T = function(e6) {
    return k.call(e6) == "[object Number]";
  };
  var $ = function(e6) {
    return k.call(e6) === "[object Boolean]";
  };
  var O = function(e6) {
    return e6 instanceof FormData;
  };
  var A = typeof window != "undefined" ? window : void 0;
  var q = typeof globalThis != "undefined" ? globalThis : A;
  var M = Array.prototype;
  var D = M.forEach;
  var N = M.indexOf;
  var L = q == null ? void 0 : q.navigator;
  var B = q == null ? void 0 : q.document;
  var H = q == null ? void 0 : q.location;
  var j = q == null ? void 0 : q.fetch;
  var U = q == null ? void 0 : q.XMLHttpRequest;
  var V = L == null ? void 0 : L.userAgent;
  var W = A != null ? A : {};
  var z = "[PostHog.js]";
  var G = { _log: function(e6) {
    if (A && (m.DEBUG || W.POSTHOG_DEBUG) && !x(A.console) && A.console) {
      for (var t2 = ("__rrweb_original__" in A.console[e6]) ? A.console[e6].__rrweb_original__ : A.console[e6], n2 = arguments.length, r2 = new Array(n2 > 1 ? n2 - 1 : 0), i2 = 1; i2 < n2; i2++)
        r2[i2 - 1] = arguments[i2];
      t2.apply(void 0, [z].concat(r2));
    }
  }, info: function() {
    for (var e6 = arguments.length, t2 = new Array(e6), n2 = 0; n2 < e6; n2++)
      t2[n2] = arguments[n2];
    G._log.apply(G, ["log"].concat(t2));
  }, warn: function() {
    for (var e6 = arguments.length, t2 = new Array(e6), n2 = 0; n2 < e6; n2++)
      t2[n2] = arguments[n2];
    G._log.apply(G, ["warn"].concat(t2));
  }, error: function() {
    for (var e6 = arguments.length, t2 = new Array(e6), n2 = 0; n2 < e6; n2++)
      t2[n2] = arguments[n2];
    G._log.apply(G, ["error"].concat(t2));
  }, critical: function() {
    for (var e6, t2 = arguments.length, n2 = new Array(t2), r2 = 0; r2 < t2; r2++)
      n2[r2] = arguments[r2];
    (e6 = console).error.apply(e6, [z].concat(n2));
  }, uninitializedWarning: function(e6) {
    G.error("You must initialize PostHog before calling ".concat(e6));
  } };
  var Q = {};
  var Y = function(e6) {
    return e6.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g, "");
  };
  function J(e6, t2, n2) {
    if (S(e6)) {
      if (D && e6.forEach === D)
        e6.forEach(t2, n2);
      else if ("length" in e6 && e6.length === +e6.length) {
        for (var r2 = 0, i2 = e6.length; r2 < i2; r2++)
          if (r2 in e6 && t2.call(n2, e6[r2], r2) === Q)
            return;
      }
    }
  }
  function K(e6, t2, n2) {
    if (!C(e6)) {
      if (S(e6))
        return J(e6, t2, n2);
      if (O(e6)) {
        var r2, i2 = v(e6.entries());
        try {
          for (i2.s(); !(r2 = i2.n()).done; ) {
            var o2 = r2.value;
            if (t2.call(n2, o2[1], o2[0]) === Q)
              return;
          }
        } catch (e7) {
          i2.e(e7);
        } finally {
          i2.f();
        }
      } else
        for (var s2 in e6)
          if (w.call(e6, s2) && t2.call(n2, e6[s2], s2) === Q)
            return;
    }
  }
  var X = function(e6) {
    for (var t2 = arguments.length, n2 = new Array(t2 > 1 ? t2 - 1 : 0), r2 = 1; r2 < t2; r2++)
      n2[r2 - 1] = arguments[r2];
    return J(n2, function(t3) {
      for (var n3 in t3)
        t3[n3] !== void 0 && (e6[n3] = t3[n3]);
    }), e6;
  };
  function Z(e6, t2) {
    return e6.indexOf(t2) !== -1;
  }
  function ee(e6) {
    for (var t2 = Object.keys(e6), n2 = t2.length, r2 = new Array(n2); n2--; )
      r2[n2] = [t2[n2], e6[t2[n2]]];
    return r2;
  }
  var te = function() {
    return Date.now = Date.now || function() {
      return +new Date();
    }, Date.now();
  };
  var ne = function(e6) {
    try {
      return e6();
    } catch (e7) {
      return;
    }
  };
  var re = function(e6) {
    return function() {
      try {
        for (var t2 = arguments.length, n2 = new Array(t2), r2 = 0; r2 < t2; r2++)
          n2[r2] = arguments[r2];
        return e6.apply(this, n2);
      } catch (e7) {
        G.critical("Implementation error. Please turn on debug mode and open a ticket on https://app.posthog.com/home#panel=support%3Asupport%3A."), G.critical(e7);
      }
    };
  };
  var ie = function(e6) {
    var t2 = {};
    return K(e6, function(e7, n2) {
      E(e7) && e7.length > 0 && (t2[n2] = e7);
    }), t2;
  };
  function oe(e6, t2) {
    return n2 = e6, r2 = function(e7) {
      return E(e7) && !I(t2) ? e7.slice(0, t2) : e7;
    }, i2 = /* @__PURE__ */ new Set(), function e7(t3, n3) {
      return t3 !== Object(t3) ? r2 ? r2(t3, n3) : t3 : i2.has(t3) ? void 0 : (i2.add(t3), S(t3) ? (o2 = [], J(t3, function(t4) {
        o2.push(e7(t4));
      })) : (o2 = {}, K(t3, function(t4, n4) {
        i2.has(t4) || (o2[n4] = e7(t4, n4));
      })), o2);
      var o2;
    }(n2);
    var n2, r2, i2;
  }
  function se(e6) {
    var t2, n2, r2, i2, o2, s2 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=", a2 = 0, u2 = 0, l2 = "", c2 = [];
    if (!e6)
      return e6;
    e6 = ae(e6);
    do {
      t2 = (o2 = e6.charCodeAt(a2++) << 16 | e6.charCodeAt(a2++) << 8 | e6.charCodeAt(a2++)) >> 18 & 63, n2 = o2 >> 12 & 63, r2 = o2 >> 6 & 63, i2 = 63 & o2, c2[u2++] = s2.charAt(t2) + s2.charAt(n2) + s2.charAt(r2) + s2.charAt(i2);
    } while (a2 < e6.length);
    switch (l2 = c2.join(""), e6.length % 3) {
      case 1:
        l2 = l2.slice(0, -2) + "==";
        break;
      case 2:
        l2 = l2.slice(0, -1) + "=";
    }
    return l2;
  }
  var ae = function(e6) {
    var t2, n2, r2, i2, o2 = "";
    for (t2 = n2 = 0, r2 = (e6 = (e6 + "").replace(/\r\n/g, "\n").replace(/\r/g, "\n")).length, i2 = 0; i2 < r2; i2++) {
      var s2 = e6.charCodeAt(i2), a2 = null;
      s2 < 128 ? n2++ : a2 = s2 > 127 && s2 < 2048 ? String.fromCharCode(s2 >> 6 | 192, 63 & s2 | 128) : String.fromCharCode(s2 >> 12 | 224, s2 >> 6 & 63 | 128, 63 & s2 | 128), I(a2) || (n2 > t2 && (o2 += e6.substring(t2, n2)), o2 += a2, t2 = n2 = i2 + 1);
    }
    return n2 > t2 && (o2 += e6.substring(t2, e6.length)), o2;
  };
  var ue = function() {
    function e6(t2) {
      return t2 && (t2.preventDefault = e6.preventDefault, t2.stopPropagation = e6.stopPropagation), t2;
    }
    return e6.preventDefault = function() {
      this.returnValue = false;
    }, e6.stopPropagation = function() {
      this.cancelBubble = true;
    }, function(t2, n2, r2, i2, o2) {
      if (t2)
        if (t2.addEventListener && !i2)
          t2.addEventListener(n2, r2, !!o2);
        else {
          var s2 = "on" + n2, a2 = t2[s2];
          t2[s2] = function(t3, n3, r3) {
            return function(i3) {
              if (i3 = i3 || e6(A == null ? void 0 : A.event)) {
                var o3, s3 = true;
                R(r3) && (o3 = r3(i3));
                var a3 = n3.call(t3, i3);
                return o3 !== false && a3 !== false || (s3 = false), s3;
              }
            };
          }(t2, r2, a2);
        }
      else
        G.error("No valid element provided to register_event");
    };
  }();
  function le(e6, t2) {
    var n2 = function() {
      if (!B)
        return t2("document not found");
      var n3 = B.createElement("script");
      n3.type = "text/javascript", n3.src = e6, n3.onload = function(e7) {
        return t2(void 0, e7);
      }, n3.onerror = function(e7) {
        return t2(e7);
      };
      var r2, i2 = B.querySelectorAll("body > script");
      i2.length > 0 ? (r2 = i2[0].parentNode) === null || r2 === void 0 || r2.insertBefore(n3, i2[0]) : B.body.appendChild(n3);
    };
    B != null && B.body ? n2() : B == null || B.addEventListener("DOMContentLoaded", n2);
  }
  function ce(e6) {
    return e6 ? Y(e6).split(/\s+/) : [];
  }
  function de(e6) {
    var t2 = "";
    switch (n(e6.className)) {
      case "string":
        t2 = e6.className;
        break;
      case "object":
        t2 = ("baseVal" in e6.className ? e6.className.baseVal : null) || e6.getAttribute("class") || "";
        break;
      default:
        t2 = "";
    }
    return ce(t2);
  }
  function he(e6) {
    return C(e6) ? null : Y(e6).split(/(\s+)/).filter(Se).join("").replace(/[\r\n]/g, " ").replace(/[ ]+/g, " ").substring(0, 255);
  }
  function fe(e6) {
    var t2 = "";
    return we(e6) && !ke(e6) && e6.childNodes && e6.childNodes.length && K(e6.childNodes, function(e7) {
      var n2;
      _e(e7) && e7.textContent && (t2 += (n2 = he(e7.textContent)) !== null && n2 !== void 0 ? n2 : "");
    }), Y(t2);
  }
  function pe(e6) {
    return !!e6 && e6.nodeType === 1;
  }
  function ge(e6, t2) {
    return !!e6 && !!e6.tagName && e6.tagName.toLowerCase() === t2.toLowerCase();
  }
  function _e(e6) {
    return !!e6 && e6.nodeType === 3;
  }
  function ve(e6) {
    return !!e6 && e6.nodeType === 11;
  }
  var me = ["a", "button", "form", "input", "select", "textarea", "label"];
  function ye(e6) {
    var t2 = e6.parentNode;
    return !(!t2 || !pe(t2)) && t2;
  }
  function be(e6, t2) {
    var r2 = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : void 0, i2 = arguments.length > 3 ? arguments[3] : void 0, o2 = arguments.length > 4 ? arguments[4] : void 0;
    if (!A || !e6 || ge(e6, "html") || !pe(e6))
      return false;
    if (r2 != null && r2.url_allowlist) {
      var s2 = A.location.href, a2 = r2.url_allowlist;
      if (a2 && !a2.some(function(e7) {
        return s2.match(e7);
      }))
        return false;
    }
    if (r2 != null && r2.dom_event_allowlist) {
      var u2 = r2.dom_event_allowlist;
      if (u2 && !u2.some(function(e7) {
        return t2.type === e7;
      }))
        return false;
    }
    for (var l2 = false, c2 = [e6], d2 = true, h2 = e6; h2.parentNode && !ge(h2, "body"); )
      if (ve(h2.parentNode))
        c2.push(h2.parentNode.host), h2 = h2.parentNode.host;
      else {
        if (!(d2 = ye(h2)))
          break;
        if (i2 || me.indexOf(d2.tagName.toLowerCase()) > -1)
          l2 = true;
        else {
          var f2 = A.getComputedStyle(d2);
          f2 && f2.getPropertyValue("cursor") === "pointer" && (l2 = true);
        }
        c2.push(d2), h2 = d2;
      }
    if (!function(e7, t3) {
      var r3 = t3 == null ? void 0 : t3.element_allowlist;
      if (x(r3))
        return true;
      var i3, o3 = v(e7);
      try {
        var s3 = function() {
          var e8 = i3.value;
          if (r3.some(function(t4) {
            return e8.tagName.toLowerCase() === t4;
          }))
            return { v: true };
        };
        for (o3.s(); !(i3 = o3.n()).done; ) {
          var a3 = s3();
          if (n(a3) === "object")
            return a3.v;
        }
      } catch (e8) {
        o3.e(e8);
      } finally {
        o3.f();
      }
      return false;
    }(c2, r2))
      return false;
    if (!function(e7, t3) {
      var r3 = t3 == null ? void 0 : t3.css_selector_allowlist;
      if (x(r3))
        return true;
      var i3, o3 = v(e7);
      try {
        var s3 = function() {
          var e8 = i3.value;
          if (r3.some(function(t4) {
            return e8.matches(t4);
          }))
            return { v: true };
        };
        for (o3.s(); !(i3 = o3.n()).done; ) {
          var a3 = s3();
          if (n(a3) === "object")
            return a3.v;
        }
      } catch (e8) {
        o3.e(e8);
      } finally {
        o3.f();
      }
      return false;
    }(c2, r2))
      return false;
    var p2 = A.getComputedStyle(e6);
    if (p2 && p2.getPropertyValue("cursor") === "pointer" && t2.type === "click")
      return true;
    var g2 = e6.tagName.toLowerCase();
    switch (g2) {
      case "html":
        return false;
      case "form":
        return (o2 || ["submit"]).indexOf(t2.type) >= 0;
      case "input":
      case "select":
      case "textarea":
        return (o2 || ["change", "click"]).indexOf(t2.type) >= 0;
      default:
        return l2 ? (o2 || ["click"]).indexOf(t2.type) >= 0 : (o2 || ["click"]).indexOf(t2.type) >= 0 && (me.indexOf(g2) > -1 || e6.getAttribute("contenteditable") === "true");
    }
  }
  function we(e6) {
    for (var t2 = e6; t2.parentNode && !ge(t2, "body"); t2 = t2.parentNode) {
      var n2 = de(t2);
      if (Z(n2, "ph-sensitive") || Z(n2, "ph-no-capture"))
        return false;
    }
    if (Z(de(e6), "ph-include"))
      return true;
    var r2 = e6.type || "";
    if (E(r2))
      switch (r2.toLowerCase()) {
        case "hidden":
        case "password":
          return false;
      }
    var i2 = e6.name || e6.id || "";
    if (E(i2)) {
      if (/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(i2.replace(/[^a-zA-Z0-9]/g, "")))
        return false;
    }
    return true;
  }
  function ke(e6) {
    return !!(ge(e6, "input") && !["button", "checkbox", "submit", "reset"].includes(e6.type) || ge(e6, "select") || ge(e6, "textarea") || e6.getAttribute("contenteditable") === "true");
  }
  function Se(e6) {
    if (C(e6))
      return false;
    if (E(e6)) {
      e6 = Y(e6);
      if (/^(?:(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11}))$/.test((e6 || "").replace(/[- ]/g, "")))
        return false;
      if (/(^\d{3}-?\d{2}-?\d{4}$)/.test(e6))
        return false;
    }
    return true;
  }
  function Fe(e6) {
    var t2 = fe(e6);
    return Se(t2 = "".concat(t2, " ").concat(Re(e6)).trim()) ? t2 : "";
  }
  function Re(e6) {
    var t2 = "";
    return e6 && e6.childNodes && e6.childNodes.length && K(e6.childNodes, function(e7) {
      var n2;
      if (e7 && ((n2 = e7.tagName) === null || n2 === void 0 ? void 0 : n2.toLowerCase()) === "span")
        try {
          var r2 = fe(e7);
          t2 = "".concat(t2, " ").concat(r2).trim(), e7.childNodes && e7.childNodes.length && (t2 = "".concat(t2, " ").concat(Re(e7)).trim());
        } catch (e8) {
          G.error(e8);
        }
    }), t2;
  }
  function Pe(e6) {
    return function(e7) {
      var n2 = e7.map(function(e8) {
        var n3, r2, i2 = "";
        if (e8.tag_name && (i2 += e8.tag_name), e8.attr_class) {
          e8.attr_class.sort();
          var o2, s2 = v(e8.attr_class);
          try {
            for (s2.s(); !(o2 = s2.n()).done; ) {
              var a2 = o2.value;
              i2 += ".".concat(a2.replace(/"/g, ""));
            }
          } catch (e9) {
            s2.e(e9);
          } finally {
            s2.f();
          }
        }
        var u2 = t(t(t(t({}, e8.text ? { text: e8.text } : {}), {}, { "nth-child": (n3 = e8.nth_child) !== null && n3 !== void 0 ? n3 : 0, "nth-of-type": (r2 = e8.nth_of_type) !== null && r2 !== void 0 ? r2 : 0 }, e8.href ? { href: e8.href } : {}), e8.attr_id ? { attr_id: e8.attr_id } : {}), e8.attributes), l2 = {};
        return ee(u2).sort(function(e9, t2) {
          var n4 = f(e9, 1)[0], r3 = f(t2, 1)[0];
          return n4.localeCompare(r3);
        }).forEach(function(e9) {
          var t2 = f(e9, 2), n4 = t2[0], r3 = t2[1];
          return l2[xe(n4.toString())] = xe(r3.toString());
        }), i2 += ":", i2 += ee(u2).map(function(e9) {
          var t2 = f(e9, 2), n4 = t2[0], r3 = t2[1];
          return "".concat(n4, '="').concat(r3, '"');
        }).join("");
      });
      return n2.join(";");
    }(function(e7) {
      return e7.map(function(e8) {
        var t2, n2, r2 = { text: (t2 = e8.$el_text) === null || t2 === void 0 ? void 0 : t2.slice(0, 400), tag_name: e8.tag_name, href: (n2 = e8.attr__href) === null || n2 === void 0 ? void 0 : n2.slice(0, 2048), attr_class: Ee(e8), attr_id: e8.attr__id, nth_child: e8.nth_child, nth_of_type: e8.nth_of_type, attributes: {} };
        return ee(e8).filter(function(e9) {
          return f(e9, 1)[0].indexOf("attr__") === 0;
        }).forEach(function(e9) {
          var t3 = f(e9, 2), n3 = t3[0], i2 = t3[1];
          return r2.attributes[n3] = i2;
        }), r2;
      });
    }(e6));
  }
  function xe(e6) {
    return e6.replace(/"|\\"/g, '\\"');
  }
  function Ee(e6) {
    var t2 = e6.attr__class;
    return t2 ? S(t2) ? t2 : ce(t2) : void 0;
  }
  var Ie = function() {
    function e6(t2) {
      r(this, e6), this.clicks = [], this.enabled = t2;
    }
    return o(e6, [{ key: "isRageClick", value: function(e7, t2, n2) {
      if (!this.enabled)
        return false;
      var r2 = this.clicks[this.clicks.length - 1];
      if (r2 && Math.abs(e7 - r2.x) + Math.abs(t2 - r2.y) < 30 && n2 - r2.timestamp < 1e3) {
        if (this.clicks.push({ x: e7, y: t2, timestamp: n2 }), this.clicks.length === 3)
          return true;
      } else
        this.clicks = [{ x: e7, y: t2, timestamp: n2 }];
      return false;
    } }]), e6;
  }();
  var Ce = "$people_distinct_id";
  var Te = "__alias";
  var $e = "__timers";
  var Oe = "$autocapture_disabled_server_side";
  var Ae = "$session_recording_enabled_server_side";
  var qe = "$console_log_recording_enabled_server_side";
  var Me = "$session_recording_recorder_version_server_side";
  var De = "$session_recording_network_payload_capture";
  var Ne = "$session_recording_canvas_recording";
  var Le = "$sesid";
  var Be = "$session_is_sampled";
  var He = "$enabled_feature_flags";
  var je = "$early_access_features";
  var Ue = "$stored_person_properties";
  var Ve = "$stored_group_properties";
  var We = "$surveys";
  var ze = "$flag_call_reported";
  var Ge = "$user_state";
  var Qe = "$posthog_quota_limited";
  var Ye = "$client_session_props";
  var Je = [Ce, Te, "__cmpns", $e, Ae, Le, He, Ge, Qe, je, Ve, Ue, We, ze, Ye];
  var Ke = "$copy_autocapture";
  function Xe(e6, t2) {
    return t2.length > e6 ? t2.slice(0, e6) + "..." : t2;
  }
  var Ze = { _initializedTokens: [], _isDisabledServerSide: null, _isAutocaptureEnabled: false, _setIsAutocaptureEnabled: function(e6) {
    var t2, n2 = I(this._isDisabledServerSide) ? !((t2 = e6.persistence) === null || t2 === void 0 || !t2.props[Oe]) : this._isDisabledServerSide, r2 = !!e6.config.autocapture;
    this._isAutocaptureEnabled = r2 && !n2;
  }, _previousElementSibling: function(e6) {
    if (e6.previousElementSibling)
      return e6.previousElementSibling;
    var t2 = e6;
    do {
      t2 = t2.previousSibling;
    } while (t2 && !pe(t2));
    return t2;
  }, _getAugmentPropertiesFromElement: function(e6) {
    if (!we(e6))
      return {};
    var t2 = {};
    return K(e6.attributes, function(e7) {
      if (e7.name.indexOf("data-ph-capture-attribute") === 0) {
        var n2 = e7.name.replace("data-ph-capture-attribute-", ""), r2 = e7.value;
        n2 && r2 && Se(r2) && (t2[n2] = r2);
      }
    }), t2;
  }, _getPropertiesFromElement: function(e6, t2, n2) {
    var r2, i2 = e6.tagName.toLowerCase(), o2 = { tag_name: i2 };
    me.indexOf(i2) > -1 && !n2 && (i2.toLowerCase() === "a" || i2.toLowerCase() === "button" ? o2.$el_text = Xe(1024, Fe(e6)) : o2.$el_text = Xe(1024, fe(e6)));
    var s2 = de(e6);
    s2.length > 0 && (o2.classes = s2.filter(function(e7) {
      return e7 !== "";
    }));
    var a2 = (r2 = this.config) === null || r2 === void 0 ? void 0 : r2.element_attribute_ignorelist;
    K(e6.attributes, function(n3) {
      var r3;
      if ((!ke(e6) || ["name", "id", "class"].indexOf(n3.name) !== -1) && ((a2 == null || !a2.includes(n3.name)) && !t2 && Se(n3.value) && (r3 = n3.name, !E(r3) || r3.substring(0, 10) !== "_ngcontent" && r3.substring(0, 7) !== "_nghost"))) {
        var i3 = n3.value;
        n3.name === "class" && (i3 = ce(i3).join(" ")), o2["attr__" + n3.name] = Xe(1024, i3);
      }
    });
    for (var u2 = 1, l2 = 1, c2 = e6; c2 = this._previousElementSibling(c2); )
      u2++, c2.tagName === e6.tagName && l2++;
    return o2.nth_child = u2, o2.nth_of_type = l2, o2;
  }, _getDefaultProperties: function(e6) {
    return { $event_type: e6, $ce_version: 1 };
  }, _extractCustomPropertyValue: function(e6) {
    var t2 = [];
    return K(B == null ? void 0 : B.querySelectorAll(e6.css_selector), function(e7) {
      var n2;
      ["input", "select"].indexOf(e7.tagName.toLowerCase()) > -1 ? n2 = e7.value : e7.textContent && (n2 = e7.textContent), Se(n2) && t2.push(n2);
    }), t2.join(", ");
  }, _getCustomProperties: function(e6) {
    var t2 = this, n2 = {};
    return K(this._customProperties, function(r2) {
      K(r2.event_selectors, function(i2) {
        K(B == null ? void 0 : B.querySelectorAll(i2), function(i3) {
          Z(e6, i3) && we(i3) && (n2[r2.name] = t2._extractCustomPropertyValue(r2));
        });
      });
    }), n2;
  }, _getEventTarget: function(e6) {
    return x(e6.target) ? e6.srcElement || null : (t2 = e6.target) !== null && t2 !== void 0 && t2.shadowRoot ? e6.composedPath()[0] || null : e6.target || null;
    var t2;
  }, _captureEvent: function(e6, t2) {
    var n2, r2 = this, i2 = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : "$autocapture", o2 = arguments.length > 3 ? arguments[3] : void 0, s2 = this._getEventTarget(e6);
    (_e(s2) && (s2 = s2.parentNode || null), i2 === "$autocapture" && e6.type === "click" && e6 instanceof MouseEvent) && ((n2 = this.rageclicks) !== null && n2 !== void 0 && n2.isRageClick(e6.clientX, e6.clientY, new Date().getTime()) && this._captureEvent(e6, t2, "$rageclick"));
    var a2 = i2 === Ke;
    if (s2 && be(s2, e6, this.config, a2, a2 ? ["copy", "cut"] : void 0)) {
      for (var u2, l2, c2 = [s2], d2 = s2; d2.parentNode && !ge(d2, "body"); )
        ve(d2.parentNode) ? (c2.push(d2.parentNode.host), d2 = d2.parentNode.host) : (c2.push(d2.parentNode), d2 = d2.parentNode);
      var h2, f2 = [], p2 = {}, g2 = false;
      if (K(c2, function(e7) {
        var n3 = we(e7);
        e7.tagName.toLowerCase() === "a" && (h2 = e7.getAttribute("href"), h2 = n3 && Se(h2) && h2), Z(de(e7), "ph-no-capture") && (g2 = true), f2.push(r2._getPropertiesFromElement(e7, t2.config.mask_all_element_attributes, t2.config.mask_all_text));
        var i3 = r2._getAugmentPropertiesFromElement(e7);
        X(p2, i3);
      }), t2.config.mask_all_text || (s2.tagName.toLowerCase() === "a" || s2.tagName.toLowerCase() === "button" ? f2[0].$el_text = Fe(s2) : f2[0].$el_text = fe(s2)), h2 && (f2[0].attr__href = h2), g2)
        return false;
      var _2 = X(this._getDefaultProperties(e6.type), t2.elementsChainAsString ? { $elements_chain: Pe(f2) } : { $elements: f2 }, (u2 = f2[0]) !== null && u2 !== void 0 && u2.$el_text ? { $el_text: (l2 = f2[0]) === null || l2 === void 0 ? void 0 : l2.$el_text } : {}, this._getCustomProperties(c2), p2, o2 || {});
      if (i2 === Ke) {
        var v2, m2 = he(A == null || (v2 = A.getSelection()) === null || v2 === void 0 ? void 0 : v2.toString()), y2 = e6.type || "clipboard";
        if (!m2)
          return false;
        _2.$selected_content = m2, _2.$copy_type = y2;
      }
      return t2.capture(i2, _2), true;
    }
  }, _navigate: function(e6) {
    A && (A.location.href = e6);
  }, _addDomEventHandlers: function(e6) {
    var t2 = this;
    if (A && B) {
      var n2 = function(n3) {
        n3 = n3 || (A == null ? void 0 : A.event), t2._captureEvent(n3, e6);
      }, r2 = function(n3) {
        n3 = n3 || (A == null ? void 0 : A.event), t2._captureEvent(n3, e6, Ke);
      };
      ue(B, "submit", n2, false, true), ue(B, "change", n2, false, true), ue(B, "click", n2, false, true), P(e6.config.autocapture) && e6.config.autocapture.capture_copied_text && (ue(B, "copy", r2, false, true), ue(B, "cut", r2, false, true));
    }
  }, _customProperties: [], rageclicks: null, config: void 0, init: function(e6) {
    var t2;
    $(e6.__autocapture) || (this.config = e6.__autocapture), (t2 = this.config) !== null && t2 !== void 0 && t2.url_allowlist && (this.config.url_allowlist = this.config.url_allowlist.map(function(e7) {
      return new RegExp(e7);
    })), this.rageclicks = new Ie(e6.config.rageclick);
  }, afterDecideResponse: function(e6, t2) {
    var n2 = t2.config.token;
    this._initializedTokens.indexOf(n2) > -1 ? G.info('autocapture already initialized for token "' + n2 + '"') : (t2.persistence && t2.persistence.register(s({}, Oe, !!e6.autocapture_opt_out)), this._isDisabledServerSide = !!e6.autocapture_opt_out, this._setIsAutocaptureEnabled(t2), this._initializedTokens.push(n2), e6 && e6.config && e6.config.enable_collect_everything && this._isAutocaptureEnabled ? (e6.custom_properties && (this._customProperties = e6.custom_properties), this._addDomEventHandlers(t2)) : t2.__autocapture = false);
  }, enabledForProject: function(e6, t2, n2) {
    if (!e6)
      return true;
    t2 = x(t2) ? 10 : t2, n2 = x(n2) ? 10 : n2;
    for (var r2 = 0, i2 = 0; i2 < e6.length; i2++)
      r2 += e6.charCodeAt(i2);
    return r2 % t2 < n2;
  }, isBrowserSupported: function() {
    return R(B == null ? void 0 : B.querySelectorAll);
  } };
  !function(e6) {
    for (var t2 in e6)
      R(e6[t2]) && (e6[t2] = e6[t2].bind(e6));
  }(Ze), function(e6) {
    for (var t2 in e6)
      R(e6[t2]) && (e6[t2] = re(e6[t2]));
  }(Ze);
  var et = "$active_feature_flags";
  var tt = "$override_feature_flags";
  var nt = "$feature_flag_payloads";
  var rt = function(e6) {
    var t2, n2 = {}, r2 = v(ee(e6 || {}));
    try {
      for (r2.s(); !(t2 = r2.n()).done; ) {
        var i2 = f(t2.value, 2), o2 = i2[0], s2 = i2[1];
        s2 && (n2[o2] = s2);
      }
    } catch (e7) {
      r2.e(e7);
    } finally {
      r2.f();
    }
    return n2;
  };
  var it = function() {
    function e6(t2) {
      r(this, e6), this.instance = t2, this._override_warning = false, this.featureFlagEventHandlers = [], this.reloadFeatureFlagsQueued = false, this.reloadFeatureFlagsInAction = false;
    }
    return o(e6, [{ key: "getFlags", value: function() {
      return Object.keys(this.getFlagVariants());
    } }, { key: "getFlagVariants", value: function() {
      var e7 = this.instance.get_property(He), t2 = this.instance.get_property(tt);
      if (!t2)
        return e7 || {};
      for (var n2 = X({}, e7), r2 = Object.keys(t2), i2 = 0; i2 < r2.length; i2++)
        t2[r2[i2]] === false ? delete n2[r2[i2]] : n2[r2[i2]] = t2[r2[i2]];
      return this._override_warning || (G.warn(" Overriding feature flags!", { enabledFlags: e7, overriddenFlags: t2, finalFlags: n2 }), this._override_warning = true), n2;
    } }, { key: "getFlagPayloads", value: function() {
      return this.instance.get_property(nt) || {};
    } }, { key: "reloadFeatureFlags", value: function() {
      this.reloadFeatureFlagsQueued || (this.reloadFeatureFlagsQueued = true, this._startReloadTimer());
    } }, { key: "setAnonymousDistinctId", value: function(e7) {
      this.$anon_distinct_id = e7;
    } }, { key: "setReloadingPaused", value: function(e7) {
      this.reloadFeatureFlagsInAction = e7;
    } }, { key: "resetRequestQueue", value: function() {
      this.reloadFeatureFlagsQueued = false;
    } }, { key: "_startReloadTimer", value: function() {
      var e7 = this;
      this.reloadFeatureFlagsQueued && !this.reloadFeatureFlagsInAction && setTimeout(function() {
        !e7.reloadFeatureFlagsInAction && e7.reloadFeatureFlagsQueued && (e7.reloadFeatureFlagsQueued = false, e7._reloadFeatureFlagsRequest());
      }, 5);
    } }, { key: "_reloadFeatureFlagsRequest", value: function() {
      var e7 = this;
      if (!this.instance.config.advanced_disable_feature_flags) {
        this.setReloadingPaused(true);
        var t2 = this.instance.config.token, n2 = this.instance.get_property(Ue), r2 = this.instance.get_property(Ve), i2 = se(JSON.stringify({ token: t2, distinct_id: this.instance.get_distinct_id(), groups: this.instance.getGroups(), $anon_distinct_id: this.$anon_distinct_id, person_properties: n2, group_properties: r2, disable_flags: this.instance.config.advanced_disable_feature_flags || void 0 }));
        this.instance._send_request(this.instance.requestRouter.endpointFor("api", "/decide/?v=3"), { data: i2 }, { method: "POST" }, function(t3) {
          e7.$anon_distinct_id = void 0, e7.receivedFeatureFlags(t3), e7.setReloadingPaused(false), e7._startReloadTimer();
        });
      }
    } }, { key: "getFeatureFlag", value: function(e7) {
      var t2 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
      if (this.instance.decideEndpointWasHit || this.getFlags() && this.getFlags().length > 0) {
        var n2, r2 = this.getFlagVariants()[e7], i2 = "".concat(r2), o2 = this.instance.get_property(ze) || {};
        if (t2.send_event || !("send_event" in t2)) {
          if (!(e7 in o2) || !o2[e7].includes(i2))
            S(o2[e7]) ? o2[e7].push(i2) : o2[e7] = [i2], (n2 = this.instance.persistence) === null || n2 === void 0 || n2.register(s({}, ze, o2)), this.instance.capture("$feature_flag_called", { $feature_flag: e7, $feature_flag_response: r2 });
        }
        return r2;
      }
      G.warn('getFeatureFlag for key "' + e7 + `" failed. Feature flags didn't load in time.`);
    } }, { key: "getFeatureFlagPayload", value: function(e7) {
      return this.getFlagPayloads()[e7];
    } }, { key: "isFeatureEnabled", value: function(e7) {
      var t2 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
      if (this.instance.decideEndpointWasHit || this.getFlags() && this.getFlags().length > 0)
        return !!this.getFeatureFlag(e7, t2);
      G.warn('isFeatureEnabled for key "' + e7 + `" failed. Feature flags didn't load in time.`);
    } }, { key: "addFeatureFlagsHandler", value: function(e7) {
      this.featureFlagEventHandlers.push(e7);
    } }, { key: "removeFeatureFlagsHandler", value: function(e7) {
      this.featureFlagEventHandlers = this.featureFlagEventHandlers.filter(function(t2) {
        return t2 !== e7;
      });
    } }, { key: "receivedFeatureFlags", value: function(e7) {
      if (this.instance.persistence) {
        this.instance.decideEndpointWasHit = true;
        var n2 = this.getFlagVariants(), r2 = this.getFlagPayloads();
        !function(e8, n3) {
          var r3 = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {}, i2 = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : {}, o2 = e8.featureFlags, a2 = e8.featureFlagPayloads;
          if (o2)
            if (S(o2)) {
              var u2, l2 = {};
              if (o2)
                for (var c2 = 0; c2 < o2.length; c2++)
                  l2[o2[c2]] = true;
              n3 && n3.register((s(u2 = {}, et, o2), s(u2, He, l2), u2));
            } else {
              var d2, h2 = o2, f2 = a2;
              e8.errorsWhileComputingFlags && (h2 = t(t({}, r3), h2), f2 = t(t({}, i2), f2)), n3 && n3.register((s(d2 = {}, et, Object.keys(rt(h2))), s(d2, He, h2 || {}), s(d2, nt, f2 || {}), d2));
            }
        }(e7, this.instance.persistence, n2, r2), this._fireFeatureFlagsCallbacks();
      }
    } }, { key: "override", value: function(e7) {
      if (!this.instance.__loaded || !this.instance.persistence)
        return G.uninitializedWarning("posthog.feature_flags.override");
      if (this._override_warning = false, e7 === false)
        this.instance.persistence.unregister(tt);
      else if (S(e7)) {
        for (var t2 = {}, n2 = 0; n2 < e7.length; n2++)
          t2[e7[n2]] = true;
        this.instance.persistence.register(s({}, tt, t2));
      } else
        this.instance.persistence.register(s({}, tt, e7));
    } }, { key: "onFeatureFlags", value: function(e7) {
      var t2 = this;
      if (this.addFeatureFlagsHandler(e7), this.instance.decideEndpointWasHit) {
        var n2 = this._prepareFeatureFlagsForCallbacks(), r2 = n2.flags, i2 = n2.flagVariants;
        e7(r2, i2);
      }
      return function() {
        return t2.removeFeatureFlagsHandler(e7);
      };
    } }, { key: "updateEarlyAccessFeatureEnrollment", value: function(e7, n2) {
      var r2, i2, o2 = s({}, "$feature_enrollment/".concat(e7), n2);
      this.instance.capture("$feature_enrollment_update", { $feature_flag: e7, $feature_enrollment: n2, $set: o2 }), this.setPersonPropertiesForFlags(o2, false);
      var a2 = t(t({}, this.getFlagVariants()), {}, s({}, e7, n2));
      (r2 = this.instance.persistence) === null || r2 === void 0 || r2.register((s(i2 = {}, et, Object.keys(rt(a2))), s(i2, He, a2), i2)), this._fireFeatureFlagsCallbacks();
    } }, { key: "getEarlyAccessFeatures", value: function(e7) {
      var t2 = this, n2 = arguments.length > 1 && arguments[1] !== void 0 && arguments[1], r2 = this.instance.get_property(je);
      if (r2 && !n2)
        return e7(r2);
      this.instance._send_request(this.instance.requestRouter.endpointFor("api", "/api/early_access_features/?token=".concat(this.instance.config.token)), {}, { method: "GET" }, function(n3) {
        var r3, i2 = n3.earlyAccessFeatures;
        return (r3 = t2.instance.persistence) === null || r3 === void 0 || r3.register(s({}, je, i2)), e7(i2);
      });
    } }, { key: "_prepareFeatureFlagsForCallbacks", value: function() {
      var e7 = this.getFlags(), t2 = this.getFlagVariants();
      return { flags: e7.filter(function(e8) {
        return t2[e8];
      }), flagVariants: Object.keys(t2).filter(function(e8) {
        return t2[e8];
      }).reduce(function(e8, n2) {
        return e8[n2] = t2[n2], e8;
      }, {}) };
    } }, { key: "_fireFeatureFlagsCallbacks", value: function() {
      var e7 = this._prepareFeatureFlagsForCallbacks(), t2 = e7.flags, n2 = e7.flagVariants;
      this.featureFlagEventHandlers.forEach(function(e8) {
        return e8(t2, n2);
      });
    } }, { key: "setPersonPropertiesForFlags", value: function(e7) {
      var n2 = !(arguments.length > 1 && arguments[1] !== void 0) || arguments[1], r2 = this.instance.get_property(Ue) || {};
      this.instance.register(s({}, Ue, t(t({}, r2), e7))), n2 && this.instance.reloadFeatureFlags();
    } }, { key: "resetPersonPropertiesForFlags", value: function() {
      this.instance.unregister(Ue);
    } }, { key: "setGroupPropertiesForFlags", value: function(e7) {
      var n2 = !(arguments.length > 1 && arguments[1] !== void 0) || arguments[1], r2 = this.instance.get_property(Ve) || {};
      Object.keys(r2).length !== 0 && Object.keys(r2).forEach(function(n3) {
        r2[n3] = t(t({}, r2[n3]), e7[n3]), delete e7[n3];
      }), this.instance.register(s({}, Ve, t(t({}, r2), e7))), n2 && this.instance.reloadFeatureFlags();
    } }, { key: "resetGroupPropertiesForFlags", value: function(e7) {
      if (e7) {
        var n2 = this.instance.get_property(Ve) || {};
        this.instance.register(s({}, Ve, t(t({}, n2), {}, s({}, e7, {}))));
      } else
        this.instance.unregister(Ve);
    } }]), e6;
  }();
  Math.trunc || (Math.trunc = function(e6) {
    return e6 < 0 ? Math.ceil(e6) : Math.floor(e6);
  }), Number.isInteger || (Number.isInteger = function(e6) {
    return T(e6) && isFinite(e6) && Math.floor(e6) === e6;
  });
  var ot = "0123456789abcdef";
  var st = function() {
    function e6(t2) {
      if (r(this, e6), this.bytes = t2, t2.length !== 16)
        throw new TypeError("not 128-bit length");
    }
    return o(e6, [{ key: "toString", value: function() {
      for (var e7 = "", t2 = 0; t2 < this.bytes.length; t2++)
        e7 = e7 + ot.charAt(this.bytes[t2] >>> 4) + ot.charAt(15 & this.bytes[t2]), t2 !== 3 && t2 !== 5 && t2 !== 7 && t2 !== 9 || (e7 += "-");
      if (e7.length !== 36)
        throw new Error("Invalid UUIDv7 was generated");
      return e7;
    } }, { key: "clone", value: function() {
      return new e6(this.bytes.slice(0));
    } }, { key: "equals", value: function(e7) {
      return this.compareTo(e7) === 0;
    } }, { key: "compareTo", value: function(e7) {
      for (var t2 = 0; t2 < 16; t2++) {
        var n2 = this.bytes[t2] - e7.bytes[t2];
        if (n2 !== 0)
          return Math.sign(n2);
      }
      return 0;
    } }], [{ key: "fromFieldsV7", value: function(t2, n2, r2, i2) {
      if (!Number.isInteger(t2) || !Number.isInteger(n2) || !Number.isInteger(r2) || !Number.isInteger(i2) || t2 < 0 || n2 < 0 || r2 < 0 || i2 < 0 || t2 > 281474976710655 || n2 > 4095 || r2 > 1073741823 || i2 > 4294967295)
        throw new RangeError("invalid field value");
      var o2 = new Uint8Array(16);
      return o2[0] = t2 / Math.pow(2, 40), o2[1] = t2 / Math.pow(2, 32), o2[2] = t2 / Math.pow(2, 24), o2[3] = t2 / Math.pow(2, 16), o2[4] = t2 / Math.pow(2, 8), o2[5] = t2, o2[6] = 112 | n2 >>> 8, o2[7] = n2, o2[8] = 128 | r2 >>> 24, o2[9] = r2 >>> 16, o2[10] = r2 >>> 8, o2[11] = r2, o2[12] = i2 >>> 24, o2[13] = i2 >>> 16, o2[14] = i2 >>> 8, o2[15] = i2, new e6(o2);
    } }]), e6;
  }();
  var at = function() {
    function e6() {
      r(this, e6), s(this, "timestamp", 0), s(this, "counter", 0), s(this, "random", new ct());
    }
    return o(e6, [{ key: "generate", value: function() {
      var e7 = this.generateOrAbort();
      if (x(e7)) {
        this.timestamp = 0;
        var t2 = this.generateOrAbort();
        if (x(t2))
          throw new Error("Could not generate UUID after timestamp reset");
        return t2;
      }
      return e7;
    } }, { key: "generateOrAbort", value: function() {
      var e7 = Date.now();
      if (e7 > this.timestamp)
        this.timestamp = e7, this.resetCounter();
      else {
        if (!(e7 + 1e4 > this.timestamp))
          return;
        this.counter++, this.counter > 4398046511103 && (this.timestamp++, this.resetCounter());
      }
      return st.fromFieldsV7(this.timestamp, Math.trunc(this.counter / Math.pow(2, 30)), this.counter & Math.pow(2, 30) - 1, this.random.nextUint32());
    } }, { key: "resetCounter", value: function() {
      this.counter = 1024 * this.random.nextUint32() + (1023 & this.random.nextUint32());
    } }]), e6;
  }();
  var ut = function(e6) {
    if (typeof UUIDV7_DENY_WEAK_RNG != "undefined" && UUIDV7_DENY_WEAK_RNG)
      throw new Error("no cryptographically strong RNG available");
    for (var t2 = 0; t2 < e6.length; t2++)
      e6[t2] = 65536 * Math.trunc(65536 * Math.random()) + Math.trunc(65536 * Math.random());
    return e6;
  };
  A && !x(A.crypto) && crypto.getRandomValues && (ut = function(e6) {
    return crypto.getRandomValues(e6);
  });
  var lt;
  var ct = function() {
    function e6() {
      r(this, e6), s(this, "buffer", new Uint32Array(8)), s(this, "cursor", 1 / 0);
    }
    return o(e6, [{ key: "nextUint32", value: function() {
      return this.cursor >= this.buffer.length && (ut(this.buffer), this.cursor = 0), this.buffer[this.cursor++];
    } }]), e6;
  }();
  var dt = function() {
    return ht().toString();
  };
  var ht = function() {
    return (lt || (lt = new at())).generate();
  };
  var ft = "Thu, 01 Jan 1970 00:00:00 GMT";
  var pt = "";
  var gt = /[a-z0-9][a-z0-9-]+\.[a-z]{2,}$/i;
  function _t(e6, t2) {
    if (t2) {
      var n2 = function(e7) {
        var t3 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : B;
        if (pt)
          return pt;
        if (!t3)
          return "";
        if (["localhost", "127.0.0.1"].includes(e7))
          return "";
        for (var n3 = e7.split("."), r3 = Math.min(n3.length, 8), i2 = "dmn_chk_" + dt(), o2 = new RegExp("(^|;)\\s*" + i2 + "=1"); !pt && r3--; ) {
          var s2 = n3.slice(r3).join("."), a2 = i2 + "=1;domain=." + s2;
          t3.cookie = a2, o2.test(t3.cookie) && (t3.cookie = a2 + ";expires=" + ft, pt = s2);
        }
        return pt;
      }(e6);
      if (!n2) {
        var r2 = function(e7) {
          var t3 = e7.match(gt);
          return t3 ? t3[0] : "";
        }(e6);
        r2 !== n2 && G.info("Warning: cookie subdomain discovery mismatch", r2, n2), n2 = r2;
      }
      return n2 ? "; domain=." + n2 : "";
    }
    return "";
  }
  var vt;
  var mt = { is_supported: function() {
    return !!B;
  }, error: function(e6) {
    G.error("cookieStore error: " + e6);
  }, get: function(e6) {
    if (B) {
      try {
        for (var t2 = e6 + "=", n2 = B.cookie.split(";").filter(function(e7) {
          return e7.length;
        }), r2 = 0; r2 < n2.length; r2++) {
          for (var i2 = n2[r2]; i2.charAt(0) == " "; )
            i2 = i2.substring(1, i2.length);
          if (i2.indexOf(t2) === 0)
            return decodeURIComponent(i2.substring(t2.length, i2.length));
        }
      } catch (e7) {
      }
      return null;
    }
  }, parse: function(e6) {
    var t2;
    try {
      t2 = JSON.parse(mt.get(e6)) || {};
    } catch (e7) {
    }
    return t2;
  }, set: function(e6, t2, n2, r2, i2) {
    if (B)
      try {
        var o2 = "", s2 = "", a2 = _t(B.location.hostname, r2);
        if (n2) {
          var u2 = new Date();
          u2.setTime(u2.getTime() + 24 * n2 * 60 * 60 * 1e3), o2 = "; expires=" + u2.toUTCString();
        }
        i2 && (s2 = "; secure");
        var l2 = e6 + "=" + encodeURIComponent(JSON.stringify(t2)) + o2 + "; SameSite=Lax; path=/" + a2 + s2;
        return l2.length > 3686.4 && G.warn("cookieStore warning: large cookie, len=" + l2.length), B.cookie = l2, l2;
      } catch (e7) {
        return;
      }
  }, remove: function(e6, t2) {
    try {
      mt.set(e6, "", -1, t2);
    } catch (e7) {
      return;
    }
  } };
  var yt = null;
  var bt = { is_supported: function() {
    if (!I(yt))
      return yt;
    var e6 = true;
    if (x(A))
      e6 = false;
    else
      try {
        var t2 = "__mplssupport__";
        bt.set(t2, "xyz"), bt.get(t2) !== '"xyz"' && (e6 = false), bt.remove(t2);
      } catch (t3) {
        e6 = false;
      }
    return e6 || G.error("localStorage unsupported; falling back to cookie store"), yt = e6, e6;
  }, error: function(e6) {
    G.error("localStorage error: " + e6);
  }, get: function(e6) {
    try {
      return A == null ? void 0 : A.localStorage.getItem(e6);
    } catch (e7) {
      bt.error(e7);
    }
    return null;
  }, parse: function(e6) {
    try {
      return JSON.parse(bt.get(e6)) || {};
    } catch (e7) {
    }
    return null;
  }, set: function(e6, t2) {
    try {
      A == null || A.localStorage.setItem(e6, JSON.stringify(t2));
    } catch (e7) {
      bt.error(e7);
    }
  }, remove: function(e6) {
    try {
      A == null || A.localStorage.removeItem(e6);
    } catch (e7) {
      bt.error(e7);
    }
  } };
  var wt = ["distinct_id", Le, Be];
  var kt = t(t({}, bt), {}, { parse: function(e6) {
    try {
      var t2 = {};
      try {
        t2 = mt.parse(e6) || {};
      } catch (e7) {
      }
      var n2 = X(t2, JSON.parse(bt.get(e6) || "{}"));
      return bt.set(e6, n2), n2;
    } catch (e7) {
    }
    return null;
  }, set: function(e6, t2, n2, r2, i2) {
    try {
      bt.set(e6, t2);
      var o2 = {};
      wt.forEach(function(e7) {
        t2[e7] && (o2[e7] = t2[e7]);
      }), Object.keys(o2).length && mt.set(e6, o2, n2, r2, i2);
    } catch (e7) {
      bt.error(e7);
    }
  }, remove: function(e6, t2) {
    try {
      A == null || A.localStorage.removeItem(e6), mt.remove(e6, t2);
    } catch (e7) {
      bt.error(e7);
    }
  } });
  var St = {};
  var Ft = { is_supported: function() {
    return true;
  }, error: function(e6) {
    G.error("memoryStorage error: " + e6);
  }, get: function(e6) {
    return St[e6] || null;
  }, parse: function(e6) {
    return St[e6] || null;
  }, set: function(e6, t2) {
    St[e6] = t2;
  }, remove: function(e6) {
    delete St[e6];
  } };
  var Rt = null;
  var Pt = { is_supported: function() {
    if (!I(Rt))
      return Rt;
    if (Rt = true, x(A))
      Rt = false;
    else
      try {
        var e6 = "__support__";
        Pt.set(e6, "xyz"), Pt.get(e6) !== '"xyz"' && (Rt = false), Pt.remove(e6);
      } catch (e7) {
        Rt = false;
      }
    return Rt;
  }, error: function(e6) {
    G.error("sessionStorage error: ", e6);
  }, get: function(e6) {
    try {
      return A == null ? void 0 : A.sessionStorage.getItem(e6);
    } catch (e7) {
      Pt.error(e7);
    }
    return null;
  }, parse: function(e6) {
    try {
      return JSON.parse(Pt.get(e6)) || null;
    } catch (e7) {
    }
    return null;
  }, set: function(e6, t2) {
    try {
      A == null || A.sessionStorage.setItem(e6, JSON.stringify(t2));
    } catch (e7) {
      Pt.error(e7);
    }
  }, remove: function(e6) {
    try {
      A == null || A.sessionStorage.removeItem(e6);
    } catch (e7) {
      Pt.error(e7);
    }
  } };
  var xt = ["localhost", "127.0.0.1"];
  var Et = !(!U || !("withCredentials" in new U())) || !!j;
  var It = function(e6) {
    var t2 = B == null ? void 0 : B.createElement("a");
    return x(t2) ? null : (t2.href = e6, t2);
  };
  var Ct = function(e6, t2) {
    return !!function(e7) {
      try {
        new RegExp(e7);
      } catch (e8) {
        return false;
      }
      return true;
    }(t2) && new RegExp(t2).test(e6);
  };
  var Tt = function(e6) {
    var t2, n2, r2 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : "&", i2 = [];
    return K(e6, function(e7, r3) {
      x(e7) || x(r3) || r3 === "undefined" || (t2 = encodeURIComponent(function(e8) {
        return e8 instanceof File;
      }(e7) ? e7.name : e7.toString()), n2 = encodeURIComponent(r3), i2[i2.length] = n2 + "=" + t2);
    }), i2.join(r2);
  };
  var $t = function(e6, t2) {
    for (var n2, r2 = ((e6.split("#")[0] || "").split("?")[1] || "").split("&"), i2 = 0; i2 < r2.length; i2++) {
      var o2 = r2[i2].split("=");
      if (o2[0] === t2) {
        n2 = o2;
        break;
      }
    }
    if (!S(n2) || n2.length < 2)
      return "";
    var s2 = n2[1];
    try {
      s2 = decodeURIComponent(s2);
    } catch (e7) {
      G.error("Skipping decoding for malformed query param: " + s2);
    }
    return s2.replace(/\+/g, " ");
  };
  var Ot = function(e6, t2) {
    var n2 = e6.match(new RegExp(t2 + "=([^&]*)"));
    return n2 ? n2[1] : null;
  };
  var At = "Mobile";
  var qt = "iOS";
  var Mt = "Android";
  var Dt = "Tablet";
  var Nt = Mt + " " + Dt;
  var Lt = "iPad";
  var Bt = "Apple";
  var Ht = Bt + " Watch";
  var jt = "Safari";
  var Ut = "BlackBerry";
  var Vt = "Samsung";
  var Wt = Vt + "Browser";
  var zt = Vt + " Internet";
  var Gt = "Chrome";
  var Qt = Gt + " OS";
  var Yt = Gt + " " + qt;
  var Jt = "Internet Explorer";
  var Kt = Jt + " " + At;
  var Xt = "Opera";
  var Zt = Xt + " Mini";
  var en = "Edge";
  var tn = "Microsoft " + en;
  var nn = "Firefox";
  var rn = nn + " " + qt;
  var on = "Nintendo";
  var sn = "PlayStation";
  var an = "Xbox";
  var un = Mt + " " + At;
  var ln = At + " " + jt;
  var cn = "Windows";
  var dn = cn + " Phone";
  var hn = "Nokia";
  var fn = "Ouya";
  var pn = "Generic";
  var gn = pn + " " + At.toLowerCase();
  var _n = pn + " " + Dt.toLowerCase();
  var vn = "Konqueror";
  var mn = "(\\d+(\\.\\d+)?)";
  var yn = new RegExp("Version/" + mn);
  var bn = new RegExp(an, "i");
  var wn = new RegExp(sn + " \\w+", "i");
  var kn = new RegExp(on + " \\w+", "i");
  var Sn = new RegExp(Ut + "|PlayBook|BB10", "i");
  var Fn = { "NT3.51": "NT 3.11", "NT4.0": "NT 4.0", "5.0": "2000", 5.1: "XP", 5.2: "XP", "6.0": "Vista", 6.1: "7", 6.2: "8", 6.3: "8.1", 6.4: "10", "10.0": "10" };
  var Rn = function(e6, t2) {
    return t2 && Z(t2, Bt) || function(e7) {
      return Z(e7, jt) && !Z(e7, Gt) && !Z(e7, Mt);
    }(e6);
  };
  var Pn = function(e6, t2, n2) {
    return n2 ? Xt : (t2 = t2 || "", Z(e6, " OPR/") && Z(e6, "Mini") ? Zt : Z(e6, " OPR/") ? Xt : Sn.test(e6) ? Ut : Z(e6, "IE" + At) || Z(e6, "WPDesktop") ? Kt : Z(e6, Wt) ? zt : Z(e6, en) || Z(e6, "Edg/") ? tn : Z(e6, "FBIOS") ? "Facebook " + At : Z(e6, Gt) ? Gt : Z(e6, "CriOS") ? Yt : Z(e6, "UCWEB") || Z(e6, "UCBrowser") ? "UC Browser" : Z(e6, "FxiOS") ? rn : Z(e6, Mt) ? un : Z(e6.toLowerCase(), vn.toLowerCase()) ? vn : Rn(e6, t2) ? Z(e6, At) ? ln : jt : Z(e6, nn) ? nn : Z(e6, "MSIE") || Z(e6, "Trident/") ? Jt : Z(e6, "Gecko") ? nn : "");
  };
  var xn = (s(vt = {}, Kt, [new RegExp("rv:" + mn)]), s(vt, tn, [new RegExp(en + "?\\/" + mn)]), s(vt, Gt, [new RegExp(Gt + "/" + mn)]), s(vt, Yt, [new RegExp("CriOS\\/" + mn)]), s(vt, "UC Browser", [new RegExp("(UCBrowser|UCWEB)\\/" + mn)]), s(vt, jt, [yn]), s(vt, ln, [yn]), s(vt, Xt, [new RegExp("(Opera|OPR)\\/" + mn)]), s(vt, nn, [new RegExp(nn + "\\/" + mn)]), s(vt, rn, [new RegExp("FxiOS\\/" + mn)]), s(vt, vn, [new RegExp("Konqueror[:/]?" + mn, "i")]), s(vt, Ut, [new RegExp(Ut + " " + mn), yn]), s(vt, un, [new RegExp("android\\s" + mn)]), s(vt, zt, [new RegExp(Wt + "\\/" + mn)]), s(vt, Jt, [new RegExp("(rv:|MSIE )" + mn)]), s(vt, "Mozilla", [new RegExp("rv:" + mn)]), vt);
  var En = [[new RegExp(an + "; " + an + " (.*?)[);]", "i"), function(e6) {
    return [an, e6 && e6[1] || ""];
  }], [new RegExp(on, "i"), [on, ""]], [new RegExp(sn, "i"), [sn, ""]], [Sn, [Ut, ""]], [new RegExp(cn, "i"), function(e6, t2) {
    if (/Phone/.test(t2) || /WPDesktop/.test(t2))
      return [dn, ""];
    if (new RegExp(At).test(t2) && !/IEMobile\b/.test(t2))
      return [cn + " " + At, ""];
    var n2 = /Windows NT ([0-9.]+)/i.exec(t2);
    if (n2 && n2[1]) {
      var r2 = n2[1], i2 = Fn[r2] || "";
      return /arm/i.test(t2) && (i2 = "RT"), [cn, i2];
    }
    return [cn, ""];
  }], [/((iPhone|iPad|iPod).*?OS (\d+)_(\d+)_?(\d+)?|iPhone)/, function(e6) {
    if (e6 && e6[3]) {
      var t2 = [e6[3], e6[4], e6[5] || "0"];
      return [qt, t2.join(".")];
    }
    return [qt, ""];
  }], [/(watch.*\/(\d+\.\d+\.\d+)|watch os,(\d+\.\d+),)/i, function(e6) {
    var t2 = "";
    return e6 && e6.length >= 3 && (t2 = x(e6[2]) ? e6[3] : e6[2]), ["watchOS", t2];
  }], [new RegExp("(" + Mt + " (\\d+)\\.(\\d+)\\.?(\\d+)?|" + Mt + ")", "i"), function(e6) {
    if (e6 && e6[2]) {
      var t2 = [e6[2], e6[3], e6[4] || "0"];
      return [Mt, t2.join(".")];
    }
    return [Mt, ""];
  }], [/Mac OS X (\d+)[_.](\d+)[_.]?(\d+)?/i, function(e6) {
    var t2 = ["Mac OS X", ""];
    if (e6 && e6[1]) {
      var n2 = [e6[1], e6[2], e6[3] || "0"];
      t2[1] = n2.join(".");
    }
    return t2;
  }], [/Mac/i, ["Mac OS X", ""]], [/CrOS/, [Qt, ""]], [/Linux|debian/i, ["Linux", ""]]];
  var In = function(e6) {
    return kn.test(e6) ? on : wn.test(e6) ? sn : bn.test(e6) ? an : new RegExp(fn, "i").test(e6) ? fn : new RegExp("(" + dn + "|WPDesktop)", "i").test(e6) ? dn : /iPad/.test(e6) ? Lt : /iPod/.test(e6) ? "iPod Touch" : /iPhone/.test(e6) ? "iPhone" : /(watch)(?: ?os[,/]|\d,\d\/)[\d.]+/i.test(e6) ? Ht : Sn.test(e6) ? Ut : /(kobo)\s(ereader|touch)/i.test(e6) ? "Kobo" : new RegExp(hn, "i").test(e6) ? hn : /(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i.test(e6) || /(kf[a-z]+)( bui|\)).+silk\//i.test(e6) ? "Kindle Fire" : /(Android|ZTE)/i.test(e6) ? !new RegExp(At).test(e6) || /(9138B|TB782B|Nexus [97]|pixel c|HUAWEISHT|BTV|noble nook|smart ultra 6)/i.test(e6) ? /pixel[\daxl ]{1,6}/i.test(e6) && !/pixel c/i.test(e6) || /(huaweimed-al00|tah-|APA|SM-G92|i980|zte|U304AA)/i.test(e6) || /lmy47v/i.test(e6) && !/QTAQZ3/i.test(e6) ? Mt : Nt : Mt : new RegExp("(pda|" + At + ")", "i").test(e6) ? gn : new RegExp(Dt, "i").test(e6) && !new RegExp(Dt + " pc", "i").test(e6) ? _n : "";
  };
  var Cn = "https?://(.*)";
  var Tn = { campaignParams: function(e6) {
    var t2 = ["utm_source", "utm_medium", "utm_campaign", "utm_content", "utm_term", "gclid", "gad_source", "gbraid", "wbraid", "fbclid", "msclkid"].concat(e6 || []), n2 = {};
    return K(t2, function(e7) {
      var t3 = B ? $t(B.URL, e7) : "";
      t3.length && (n2[e7] = t3);
    }), n2;
  }, searchEngine: function() {
    var e6 = B == null ? void 0 : B.referrer;
    return e6 ? e6.search(Cn + "google.([^/?]*)") === 0 ? "google" : e6.search(Cn + "bing.com") === 0 ? "bing" : e6.search(Cn + "yahoo.com") === 0 ? "yahoo" : e6.search(Cn + "duckduckgo.com") === 0 ? "duckduckgo" : null : null;
  }, searchInfo: function() {
    var e6 = Tn.searchEngine(), t2 = e6 != "yahoo" ? "q" : "p", n2 = {};
    if (!I(e6)) {
      n2.$search_engine = e6;
      var r2 = B ? $t(B.referrer, t2) : "";
      r2.length && (n2.ph_keyword = r2);
    }
    return n2;
  }, browser: Pn, browserVersion: function(e6, t2, n2) {
    var r2 = Pn(e6, t2, n2), i2 = xn[r2];
    if (x(i2))
      return null;
    for (var o2 = 0; o2 < i2.length; o2++) {
      var s2 = i2[o2], a2 = e6.match(s2);
      if (a2)
        return parseFloat(a2[a2.length - 2]);
    }
    return null;
  }, browserLanguage: function() {
    return navigator.language || navigator.userLanguage;
  }, os: function(e6) {
    for (var t2 = 0; t2 < En.length; t2++) {
      var n2 = f(En[t2], 2), r2 = n2[0], i2 = n2[1], o2 = r2.exec(e6), s2 = o2 && (R(i2) ? i2(o2, e6) : i2);
      if (s2)
        return s2;
    }
    return ["", ""];
  }, device: In, deviceType: function(e6) {
    var t2 = In(e6);
    return t2 === Lt || t2 === Nt || t2 === "Kobo" || t2 === "Kindle Fire" || t2 === _n ? Dt : t2 === on || t2 === an || t2 === sn || t2 === fn ? "Console" : t2 === Ht ? "Wearable" : t2 ? At : "Desktop";
  }, referrer: function() {
    return (B == null ? void 0 : B.referrer) || "$direct";
  }, referringDomain: function() {
    var e6;
    return B != null && B.referrer && ((e6 = It(B.referrer)) === null || e6 === void 0 ? void 0 : e6.host) || "$direct";
  }, properties: function() {
    if (!V)
      return {};
    var e6 = f(Tn.os(V), 2), t2 = e6[0], n2 = e6[1];
    return X(ie({ $os: t2, $os_version: n2, $browser: Tn.browser(V, navigator.vendor, W.opera), $device: Tn.device(V), $device_type: Tn.deviceType(V) }), { $current_url: H == null ? void 0 : H.href, $host: H == null ? void 0 : H.host, $pathname: H == null ? void 0 : H.pathname, $raw_user_agent: V.length > 1e3 ? V.substring(0, 997) + "..." : V, $browser_version: Tn.browserVersion(V, navigator.vendor, W.opera), $browser_language: Tn.browserLanguage(), $screen_height: A == null ? void 0 : A.screen.height, $screen_width: A == null ? void 0 : A.screen.width, $viewport_height: A == null ? void 0 : A.innerHeight, $viewport_width: A == null ? void 0 : A.innerWidth, $lib: "web", $lib_version: m.LIB_VERSION, $insert_id: Math.random().toString(36).substring(2, 10) + Math.random().toString(36).substring(2, 10), $time: te() / 1e3 });
  }, people_properties: function() {
    if (!V)
      return {};
    var e6 = f(Tn.os(V), 2), t2 = e6[0], n2 = e6[1];
    return X(ie({ $os: t2, $os_version: n2, $browser: Tn.browser(V, navigator.vendor, W.opera) }), { $browser_version: Tn.browserVersion(V, navigator.vendor, W.opera) });
  } };
  var $n = ["cookie", "localstorage", "localstorage+cookie", "sessionstorage", "memory"];
  var On = function() {
    function e6(t2) {
      r(this, e6), this.config = t2, this.props = {}, this.campaign_params_saved = false, this.name = function(e7) {
        var t3 = "";
        return e7.token && (t3 = e7.token.replace(/\+/g, "PL").replace(/\//g, "SL").replace(/=/g, "EQ")), e7.persistence_name ? "ph_" + e7.persistence_name : "ph_" + t3 + "_posthog";
      }(t2), this.storage = this.buildStorage(t2), this.load(), this.update_config(t2, t2), this.save();
    }
    return o(e6, [{ key: "buildStorage", value: function(e7) {
      $n.indexOf(e7.persistence.toLowerCase()) === -1 && (G.critical("Unknown persistence type " + e7.persistence + "; falling back to localStorage+cookie"), e7.persistence = "localStorage+cookie");
      var t2 = e7.persistence.toLowerCase();
      return t2 === "localstorage" && bt.is_supported() ? bt : t2 === "localstorage+cookie" && kt.is_supported() ? kt : t2 === "sessionstorage" && Pt.is_supported() ? Pt : t2 === "memory" ? Ft : t2 === "cookie" ? mt : kt.is_supported() ? kt : mt;
    } }, { key: "properties", value: function() {
      var e7 = {};
      return K(this.props, function(t2, n2) {
        if (n2 === He && P(t2))
          for (var r2 = Object.keys(t2), i2 = 0; i2 < r2.length; i2++)
            e7["$feature/".concat(r2[i2])] = t2[r2[i2]];
        else
          s2 = n2, a2 = false, (I(o2 = Je) ? a2 : N && o2.indexOf === N ? o2.indexOf(s2) != -1 : (K(o2, function(e8) {
            if (a2 || (a2 = e8 === s2))
              return Q;
          }), a2)) || (e7[n2] = t2);
        var o2, s2, a2;
      }), e7;
    } }, { key: "load", value: function() {
      if (!this.disabled) {
        var e7 = this.storage.parse(this.name);
        e7 && (this.props = X({}, e7));
      }
    } }, { key: "save", value: function() {
      this.disabled || this.storage.set(this.name, this.props, this.expire_days, this.cross_subdomain, this.secure);
    } }, { key: "remove", value: function() {
      this.storage.remove(this.name, false), this.storage.remove(this.name, true);
    } }, { key: "clear", value: function() {
      this.remove(), this.props = {};
    } }, { key: "register_once", value: function(e7, t2, n2) {
      var r2 = this;
      if (P(e7)) {
        x(t2) && (t2 = "None"), this.expire_days = x(n2) ? this.default_expiry : n2;
        var i2 = false;
        if (K(e7, function(e8, n3) {
          r2.props.hasOwnProperty(n3) && r2.props[n3] !== t2 || (r2.props[n3] = e8, i2 = true);
        }), i2)
          return this.save(), true;
      }
      return false;
    } }, { key: "register", value: function(e7, t2) {
      var n2 = this;
      if (P(e7)) {
        this.expire_days = x(t2) ? this.default_expiry : t2;
        var r2 = false;
        if (K(e7, function(t3, i2) {
          e7.hasOwnProperty(i2) && n2.props[i2] !== t3 && (n2.props[i2] = t3, r2 = true);
        }), r2)
          return this.save(), true;
      }
      return false;
    } }, { key: "unregister", value: function(e7) {
      e7 in this.props && (delete this.props[e7], this.save());
    } }, { key: "update_campaign_params", value: function() {
      this.campaign_params_saved || (this.register(Tn.campaignParams(this.config.custom_campaign_params)), this.campaign_params_saved = true);
    } }, { key: "update_search_keyword", value: function() {
      this.register(Tn.searchInfo());
    } }, { key: "update_referrer_info", value: function() {
      this.register({ $referrer: this.props.$referrer || Tn.referrer(), $referring_domain: this.props.$referring_domain || Tn.referringDomain() });
    } }, { key: "get_referrer_info", value: function() {
      return ie({ $referrer: this.props.$referrer, $referring_domain: this.props.$referring_domain });
    } }, { key: "safe_merge", value: function(e7) {
      return K(this.props, function(t2, n2) {
        n2 in e7 || (e7[n2] = t2);
      }), e7;
    } }, { key: "update_config", value: function(e7, t2) {
      if (this.default_expiry = this.expire_days = e7.cookie_expiration, this.set_disabled(e7.disable_persistence), this.set_cross_subdomain(e7.cross_subdomain_cookie), this.set_secure(e7.secure_cookie), e7.persistence !== t2.persistence) {
        var n2 = this.buildStorage(e7), r2 = this.props;
        this.clear(), this.storage = n2, this.props = r2, this.save();
      }
    } }, { key: "set_disabled", value: function(e7) {
      this.disabled = e7, this.disabled ? this.remove() : this.save();
    } }, { key: "set_cross_subdomain", value: function(e7) {
      e7 !== this.cross_subdomain && (this.cross_subdomain = e7, this.remove(), this.save());
    } }, { key: "get_cross_subdomain", value: function() {
      return !!this.cross_subdomain;
    } }, { key: "set_secure", value: function(e7) {
      e7 !== this.secure && (this.secure = e7, this.remove(), this.save());
    } }, { key: "set_event_timer", value: function(e7, t2) {
      var n2 = this.props[$e] || {};
      n2[e7] = t2, this.props[$e] = n2, this.save();
    } }, { key: "remove_event_timer", value: function(e7) {
      var t2 = (this.props[$e] || {})[e7];
      return x(t2) || (delete this.props[$e][e7], this.save()), t2;
    } }, { key: "get_user_state", value: function() {
      return this.props[Ge] || "anonymous";
    } }, { key: "set_user_state", value: function(e7) {
      this.props[Ge] = e7, this.save();
    } }, { key: "get_quota_limits", value: function() {
      return this.props[Qe] || {};
    } }, { key: "set_quota_limits", value: function(e7) {
      this.props[Qe] = e7, this.save();
    } }]), e6;
  }();
  var An = 2;
  var qn = 4;
  var Mn = o(function e2(t2) {
    var n2, i2, o2 = this, a2 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
    r(this, e2), s(this, "bucketSize", 100), s(this, "refillRate", 10), s(this, "mutationBuckets", {}), s(this, "loggedTracker", {}), s(this, "refillBuckets", function() {
      Object.keys(o2.mutationBuckets).forEach(function(e6) {
        o2.mutationBuckets[e6] = o2.mutationBuckets[e6] + o2.refillRate, o2.mutationBuckets[e6] >= o2.bucketSize && delete o2.mutationBuckets[e6];
      });
    }), s(this, "getNodeOrRelevantParent", function(e6) {
      var t3 = o2.rrweb.mirror.getNode(e6);
      if ((t3 == null ? void 0 : t3.nodeName) !== "svg" && t3 instanceof Element) {
        var n3 = t3.closest("svg");
        if (n3)
          return [o2.rrweb.mirror.getId(n3), n3];
      }
      return [e6, t3];
    }), s(this, "numberOfChanges", function(e6) {
      var t3, n3, r2, i3, o3, s2, a3, u2;
      return ((t3 = (n3 = e6.removes) === null || n3 === void 0 ? void 0 : n3.length) !== null && t3 !== void 0 ? t3 : 0) + ((r2 = (i3 = e6.attributes) === null || i3 === void 0 ? void 0 : i3.length) !== null && r2 !== void 0 ? r2 : 0) + ((o3 = (s2 = e6.texts) === null || s2 === void 0 ? void 0 : s2.length) !== null && o3 !== void 0 ? o3 : 0) + ((a3 = (u2 = e6.adds) === null || u2 === void 0 ? void 0 : u2.length) !== null && a3 !== void 0 ? a3 : 0);
    }), s(this, "throttleMutations", function(e6) {
      if (e6.type !== 3 || e6.data.source !== 0)
        return e6;
      var t3 = e6.data, n3 = o2.numberOfChanges(t3);
      t3.attributes && (t3.attributes = t3.attributes.filter(function(e7) {
        var t4, n4, r3, i3 = f(o2.getNodeOrRelevantParent(e7.id), 2), s2 = i3[0], a3 = i3[1];
        if (o2.mutationBuckets[s2] === 0)
          return false;
        (o2.mutationBuckets[s2] = (t4 = o2.mutationBuckets[s2]) !== null && t4 !== void 0 ? t4 : o2.bucketSize, o2.mutationBuckets[s2] = Math.max(o2.mutationBuckets[s2] - 1, 0), o2.mutationBuckets[s2] === 0) && (o2.loggedTracker[s2] || (o2.loggedTracker[s2] = true, (n4 = (r3 = o2.options).onBlockedNode) === null || n4 === void 0 || n4.call(r3, s2, a3)));
        return e7;
      }));
      var r2 = o2.numberOfChanges(t3);
      return r2 !== 0 || n3 === r2 ? e6 : void 0;
    }), this.rrweb = t2, this.options = a2, this.refillRate = (n2 = this.options.refillRate) !== null && n2 !== void 0 ? n2 : this.refillRate, this.bucketSize = (i2 = this.options.bucketSize) !== null && i2 !== void 0 ? i2 : this.bucketSize, setInterval(function() {
      o2.refillBuckets();
    }, 1e3);
  });
  var Dn = function(e6) {
    return e6[e6.DomContentLoaded = 0] = "DomContentLoaded", e6[e6.Load = 1] = "Load", e6[e6.FullSnapshot = 2] = "FullSnapshot", e6[e6.IncrementalSnapshot = 3] = "IncrementalSnapshot", e6[e6.Meta = 4] = "Meta", e6[e6.Custom = 5] = "Custom", e6[e6.Plugin = 6] = "Plugin", e6;
  }(Dn || {});
  var Nn = { initiatorTypes: ["audio", "beacon", "body", "css", "early-hint", "embed", "fetch", "frame", "iframe", "icon", "image", "img", "input", "link", "navigation", "object", "ping", "script", "track", "video", "xmlhttprequest"], maskRequestFn: function(e6) {
    return e6;
  }, recordHeaders: false, recordBody: false, recordInitialRequests: false, recordPerformance: false, performanceEntryTypeToObserve: ["first-input", "navigation", "paint", "resource"], payloadSizeLimitBytes: 1e6 };
  var Ln = ["authorization", "x-forwarded-for", "authorization", "cookie", "set-cookie", "x-api-key", "x-real-ip", "remote-addr", "forwarded", "proxy-authorization", "x-csrf-token", "x-csrftoken", "x-xsrf-token"];
  var Bn = ["/s/", "/e/", "/i/"];
  function Hn(e6, t2, n2, r2) {
    if (C(e6))
      return e6;
    var i2 = (t2 == null ? void 0 : t2["content-length"]) || function(e7) {
      return new Blob([e7]).size;
    }(e6);
    return E(i2) && (i2 = parseInt(i2)), i2 > n2 ? "[SessionReplay] ".concat(r2, " body too large to record (").concat(i2, " bytes)") : e6;
  }
  var jn = function(e6, n2) {
    var r2, i2, o2, s2 = e6.session_recording, a2 = s2.recordHeaders !== false && n2.recordHeaders, u2 = s2.recordBody !== false && n2.recordBody, l2 = s2.recordPerformance !== false && n2.recordPerformance, c2 = (r2 = s2, o2 = Math.min(1e6, (i2 = r2.payloadSizeLimitBytes) !== null && i2 !== void 0 ? i2 : 1e6), function(e7) {
      return e7 != null && e7.requestBody && (e7.requestBody = Hn(e7.requestBody, e7.requestHeaders, o2, "Request")), e7 != null && e7.responseBody && (e7.responseBody = Hn(e7.responseBody, e7.responseHeaders, o2, "Response")), e7;
    }), d2 = function(e7) {
      return c2(function(e8) {
        var t3 = It(e8.name);
        if (!(t3 && t3.pathname && Bn.some(function(e9) {
          return t3.pathname.indexOf(e9) === 0;
        })))
          return e8;
      }((t2 = e7, Object.keys((n3 = t2.requestHeaders) !== null && n3 !== void 0 ? n3 : {}).forEach(function(e8) {
        var n4;
        Ln.includes(e8.toLowerCase()) && ((n4 = t2.requestHeaders) === null || n4 === void 0 || delete n4[e8]);
      }), t2)));
      var t2, n3;
    }, h2 = R(e6.session_recording.maskNetworkRequestFn);
    return h2 && R(e6.session_recording.maskCapturedNetworkRequestFn) && G.warn("Both `maskNetworkRequestFn` and `maskCapturedNetworkRequestFn` are defined. `maskNetworkRequestFn` will be ignored."), h2 && (e6.session_recording.maskCapturedNetworkRequestFn = function(n3) {
      var r3 = e6.session_recording.maskNetworkRequestFn({ url: n3.name });
      return t(t({}, n3), {}, { name: r3 == null ? void 0 : r3.url });
    }), s2.maskRequestFn = R(e6.session_recording.maskCapturedNetworkRequestFn) ? function(t2) {
      var n3, r3, i3, o3 = d2(t2);
      return o3 && (n3 = (r3 = (i3 = e6.session_recording).maskCapturedNetworkRequestFn) === null || r3 === void 0 ? void 0 : r3.call(i3, o3)) !== null && n3 !== void 0 ? n3 : void 0;
    } : void 0, s2.maskRequestFn || (s2.maskRequestFn = d2), t(t(t({}, Nn), s2), {}, { recordHeaders: a2, recordBody: u2, recordPerformance: l2, recordInitialRequests: l2 });
  };
  var Un = "__ph_opt_in_out_";
  function Vn(e6, t2) {
    Xn(true, e6, t2);
  }
  function Wn(e6, t2) {
    Xn(false, e6, t2);
  }
  function zn(e6, t2) {
    return Kn(e6, t2) === "1";
  }
  function Gn(e6, t2) {
    return !!function(e7) {
      if (e7 && e7.respectDnt) {
        var t3 = e7 && e7.window || A, n2 = t3 == null ? void 0 : t3.navigator, r2 = false;
        return K([n2 == null ? void 0 : n2.doNotTrack, n2.msDoNotTrack, t3.doNotTrack], function(e8) {
          Z([true, 1, "1", "yes"], e8) && (r2 = true);
        }), r2;
      }
      return false;
    }(t2) || Kn(e6, t2) === "0";
  }
  function Qn(e6, t2) {
    Yn(t2 = t2 || {}).remove(Jn(e6, t2), !!t2.crossSubdomainCookie);
  }
  function Yn(e6) {
    return (e6 = e6 || {}).persistenceType === "localStorage" ? bt : e6.persistenceType === "localStorage+cookie" ? kt : mt;
  }
  function Jn(e6, t2) {
    return ((t2 = t2 || {}).persistencePrefix || Un) + e6;
  }
  function Kn(e6, t2) {
    return Yn(t2).get(Jn(e6, t2));
  }
  function Xn(e6, t2, n2) {
    E(t2) && t2.length ? (Yn(n2 = n2 || {}).set(Jn(t2, n2), e6 ? 1 : 0, T(n2.cookieExpiration) ? n2.cookieExpiration : null, n2.crossSubdomainCookie, n2.secureCookie), n2.capture && e6 && n2.capture(n2.captureEventName || "$opt_in", n2.captureProperties || {}, { send_instantly: true })) : G.error("gdpr." + (e6 ? "optIn" : "optOut") + " called with an invalid token");
  }
  function Zn(e6) {
    var t2 = false;
    try {
      var n2 = e6.config.token, r2 = e6.config.respect_dnt, i2 = e6.config.opt_out_capturing_persistence_type, o2 = e6.config.opt_out_capturing_cookie_prefix || void 0, s2 = e6.config.window;
      n2 && (t2 = Gn(n2, { respectDnt: r2, persistenceType: i2, persistencePrefix: o2, window: s2 }));
    } catch (e7) {
      G.error("Unexpected error when checking capturing opt-out status: " + e7);
    }
    return t2;
  }
  var er;
  var tr = 3e5;
  var nr = tr;
  !function(e6) {
    e6[e6.Mutation = 0] = "Mutation", e6[e6.MouseMove = 1] = "MouseMove", e6[e6.MouseInteraction = 2] = "MouseInteraction", e6[e6.Scroll = 3] = "Scroll", e6[e6.ViewportResize = 4] = "ViewportResize", e6[e6.Input = 5] = "Input", e6[e6.TouchMove = 6] = "TouchMove", e6[e6.MediaInteraction = 7] = "MediaInteraction", e6[e6.StyleSheetRule = 8] = "StyleSheetRule", e6[e6.CanvasMutation = 9] = "CanvasMutation", e6[e6.Font = 10] = "Font", e6[e6.Log = 11] = "Log", e6[e6.Drag = 12] = "Drag", e6[e6.StyleDeclaration = 13] = "StyleDeclaration", e6[e6.Selection = 14] = "Selection", e6[e6.AdoptedStyleSheet = 15] = "AdoptedStyleSheet";
  }(er || (er = {}));
  var rr = [er.MouseMove, er.MouseInteraction, er.Scroll, er.ViewportResize, er.Input, er.TouchMove, er.MediaInteraction, er.Drag];
  var ir = function(e6) {
    return { rrwebMethod: e6, enqueuedAt: Date.now(), attempt: 1 };
  };
  var or = "[SessionRecording]";
  var sr = function() {
    function e6(t2) {
      var n2 = this;
      if (r(this, e6), s(this, "queuedRRWebEvents", []), s(this, "isIdle", false), s(this, "_linkedFlagSeen", false), s(this, "_lastActivityTimestamp", Date.now()), s(this, "windowId", null), s(this, "sessionId", null), s(this, "_linkedFlag", null), s(this, "_sampleRate", null), s(this, "_minimumDuration", null), s(this, "_forceAllowLocalhostNetworkCapture", false), this.instance = t2, this._captureStarted = false, this._endpoint = "/s/", this.stopRrweb = void 0, this.receivedDecide = false, A == null || A.addEventListener("beforeunload", function() {
        n2._flushBuffer();
      }), A == null || A.addEventListener("offline", function() {
        n2._tryAddCustomEvent("browser offline", {});
      }), A == null || A.addEventListener("online", function() {
        n2._tryAddCustomEvent("browser online", {});
      }), !this.instance.sessionManager)
        throw G.error(or + " started without valid sessionManager"), new Error(or + " started without valid sessionManager. This is a bug.");
      this.buffer = this.clearBuffer();
    }
    return o(e6, [{ key: "started", get: function() {
      return this._captureStarted;
    } }, { key: "sessionManager", get: function() {
      if (!this.instance.sessionManager)
        throw G.error(or + " started without valid sessionManager"), new Error(or + " started without valid sessionManager. This is a bug.");
      return this.instance.sessionManager;
    } }, { key: "isSampled", get: function() {
      return T(this._sampleRate) ? this.instance.get_property(Be) : null;
    } }, { key: "sessionDuration", get: function() {
      var e7, t2, n2 = (e7 = this.buffer) === null || e7 === void 0 ? void 0 : e7.data[((t2 = this.buffer) === null || t2 === void 0 ? void 0 : t2.data.length) - 1], r2 = this.sessionManager.checkAndGetSessionAndWindowId(true).sessionStartTimestamp;
      return n2 ? n2.timestamp - r2 : null;
    } }, { key: "isRecordingEnabled", get: function() {
      var e7 = !!this.instance.get_property(Ae), t2 = !this.instance.config.disable_session_recording;
      return A && e7 && t2;
    } }, { key: "isConsoleLogCaptureEnabled", get: function() {
      var e7 = !!this.instance.get_property(qe), t2 = this.instance.config.enable_recording_console_log;
      return t2 != null ? t2 : e7;
    } }, { key: "canvasRecording", get: function() {
      var e7 = this.instance.get_property(Ne);
      return e7 && e7.fps && e7.quality ? { enabled: e7.enabled, fps: e7.fps, quality: e7.quality } : void 0;
    } }, { key: "recordingVersion", get: function() {
      var e7, t2 = this.instance.get_property(Me);
      return ((e7 = this.instance.config.session_recording) === null || e7 === void 0 ? void 0 : e7.recorderVersion) || t2 || "v1";
    } }, { key: "networkPayloadCapture", get: function() {
      var e7, t2, n2 = this.instance.get_property(De), r2 = { recordHeaders: (e7 = this.instance.config.session_recording) === null || e7 === void 0 ? void 0 : e7.recordHeaders, recordBody: (t2 = this.instance.config.session_recording) === null || t2 === void 0 ? void 0 : t2.recordBody }, i2 = (r2 == null ? void 0 : r2.recordHeaders) || (n2 == null ? void 0 : n2.recordHeaders), o2 = (r2 == null ? void 0 : r2.recordBody) || (n2 == null ? void 0 : n2.recordBody), s2 = this.instance.config.capture_performance || (n2 == null ? void 0 : n2.capturePerformance);
      return i2 || o2 || s2 ? { recordHeaders: i2, recordBody: o2, recordPerformance: s2 } : void 0;
    } }, { key: "status", get: function() {
      return this.receivedDecide ? this.isRecordingEnabled ? C(this._linkedFlag) || this._linkedFlagSeen ? $(this.isSampled) ? this.isSampled ? "sampled" : "disabled" : "active" : "buffering" : "disabled" : "buffering";
    } }, { key: "startRecordingIfEnabled", value: function() {
      this.isRecordingEnabled ? (this._startCapture(), G.info(or + " started")) : (this.stopRecording(), this.clearBuffer());
    } }, { key: "stopRecording", value: function() {
      this._captureStarted && this.stopRrweb && (this.stopRrweb(), this.stopRrweb = void 0, this._captureStarted = false, G.info(or + " stopped"));
    } }, { key: "makeSamplingDecision", value: function(e7) {
      var t2, n2 = this.sessionId !== e7;
      if (T(this._sampleRate)) {
        var r2, i2 = this.isSampled;
        if (n2 || !$(i2))
          r2 = Math.random() < this._sampleRate;
        else
          r2 = i2;
        r2 || G.warn(or + " Sample rate (".concat(this._sampleRate, ") has determined that this sessionId (").concat(e7, ") will not be sent to the server.")), (t2 = this.instance.persistence) === null || t2 === void 0 || t2.register(s({}, Be, r2));
      } else {
        var o2;
        (o2 = this.instance.persistence) === null || o2 === void 0 || o2.register(s({}, Be, null));
      }
    } }, { key: "afterDecideResponse", value: function(e7) {
      var n2, r2, i2, o2, a2, u2, l2, c2, d2, h2, f2, p2 = this;
      this.instance.persistence && this.instance.persistence.register((s(f2 = {}, Ae, !!e7.sessionRecording), s(f2, qe, (a2 = e7.sessionRecording) === null || a2 === void 0 ? void 0 : a2.consoleLogRecordingEnabled), s(f2, Me, (u2 = e7.sessionRecording) === null || u2 === void 0 ? void 0 : u2.recorderVersion), s(f2, De, t({ capturePerformance: e7.capturePerformance }, (l2 = e7.sessionRecording) === null || l2 === void 0 ? void 0 : l2.networkPayloadCapture)), s(f2, Ne, { enabled: (c2 = e7.sessionRecording) === null || c2 === void 0 ? void 0 : c2.recordCanvas, fps: (d2 = e7.sessionRecording) === null || d2 === void 0 ? void 0 : d2.canvasFps, quality: (h2 = e7.sessionRecording) === null || h2 === void 0 ? void 0 : h2.canvasQuality }), f2));
      var g2 = (n2 = e7.sessionRecording) === null || n2 === void 0 ? void 0 : n2.sampleRate;
      this._sampleRate = C(g2) ? null : parseFloat(g2);
      var _2, v2 = (r2 = e7.sessionRecording) === null || r2 === void 0 ? void 0 : r2.minimumDurationMilliseconds;
      (this._minimumDuration = x(v2) ? null : v2, this._linkedFlag = ((i2 = e7.sessionRecording) === null || i2 === void 0 ? void 0 : i2.linkedFlag) || null, (o2 = e7.sessionRecording) !== null && o2 !== void 0 && o2.endpoint) && (this._endpoint = (_2 = e7.sessionRecording) === null || _2 === void 0 ? void 0 : _2.endpoint);
      if (T(this._sampleRate) && this.sessionManager.onSessionId(function(e8) {
        p2.makeSamplingDecision(e8);
      }), !C(this._linkedFlag)) {
        var m2, y2, b2 = E(this._linkedFlag) ? this._linkedFlag : (m2 = this._linkedFlag) === null || m2 === void 0 ? void 0 : m2.flag, w2 = E(this._linkedFlag) ? null : (y2 = this._linkedFlag) === null || y2 === void 0 ? void 0 : y2.variant;
        this.instance.onFeatureFlags(function(e8, t2) {
          var n3 = P(t2) && b2 in t2, r3 = w2 ? t2[b2] === w2 : n3;
          r3 && G.info(or + " linked flag matched", { linkedFlag: b2, linkedVariant: w2 }), p2._linkedFlagSeen = r3;
        });
      }
      this.receivedDecide = true, this.startRecordingIfEnabled();
    } }, { key: "log", value: function(e7) {
      var t2, n2 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : "log";
      (t2 = this.instance.sessionRecording) === null || t2 === void 0 || t2.onRRwebEmit({ type: 6, data: { plugin: "rrweb/console@1", payload: { level: n2, trace: [], payload: [JSON.stringify(e7)] } }, timestamp: te() });
    } }, { key: "_startCapture", value: function() {
      var e7 = this;
      if (!x(Object.assign) && !(this._captureStarted || this.instance.config.disable_session_recording || Zn(this.instance))) {
        this._captureStarted = true, this.sessionManager.checkAndGetSessionAndWindowId();
        var t2 = this.recordingVersion === "v2" ? "recorder-v2.js" : "recorder.js";
        this.instance.__loaded_recorder_version !== this.recordingVersion ? le(this.instance.requestRouter.endpointFor("assets", "/static/".concat(t2, "?v=").concat(m.LIB_VERSION)), function(n2) {
          if (n2)
            return G.error(or + " could not load ".concat(t2), n2);
          e7._onScriptLoaded();
        }) : this._onScriptLoaded();
      }
    } }, { key: "_isInteractiveEvent", value: function(e7) {
      var t2;
      return e7.type === 3 && rr.indexOf((t2 = e7.data) === null || t2 === void 0 ? void 0 : t2.source) !== -1;
    } }, { key: "_updateWindowAndSessionIds", value: function(e7) {
      var t2 = this._isInteractiveEvent(e7);
      t2 || this.isIdle || e7.timestamp - this._lastActivityTimestamp > nr && (this.isIdle = true, this._tryAddCustomEvent("sessionIdle", { reason: "user inactivity", timeSinceLastActive: e7.timestamp - this._lastActivityTimestamp, threshold: nr }));
      var n2 = false;
      if (t2 && (this._lastActivityTimestamp = e7.timestamp, this.isIdle && (this.isIdle = false, this._tryAddCustomEvent("sessionNoLongerIdle", { reason: "user activity", type: e7.type }), n2 = true)), !this.isIdle) {
        var r2 = this.sessionManager.checkAndGetSessionAndWindowId(!t2, e7.timestamp), i2 = r2.windowId, o2 = r2.sessionId, s2 = this.sessionId !== o2, a2 = this.windowId !== i2;
        this.windowId = i2, this.sessionId = o2, (n2 || [An, qn].indexOf(e7.type) === -1 && (a2 || s2)) && this._tryTakeFullSnapshot();
      }
    } }, { key: "_tryRRWebMethod", value: function(e7) {
      try {
        return e7.rrwebMethod(), true;
      } catch (t2) {
        return G.warn(or + " could not emit queued rrweb event.", t2), this.queuedRRWebEvents.length < 10 && this.queuedRRWebEvents.push({ enqueuedAt: e7.enqueuedAt || Date.now(), attempt: e7.attempt++, rrwebMethod: e7.rrwebMethod }), false;
      }
    } }, { key: "_tryAddCustomEvent", value: function(e7, t2) {
      var n2 = this;
      return this._tryRRWebMethod(ir(function() {
        return n2.rrwebRecord.addCustomEvent(e7, t2);
      }));
    } }, { key: "_tryTakeFullSnapshot", value: function() {
      var e7 = this;
      return this._tryRRWebMethod(ir(function() {
        return e7.rrwebRecord.takeFullSnapshot();
      }));
    } }, { key: "_onScriptLoaded", value: function() {
      var e7, n2 = this, r2 = { blockClass: "ph-no-capture", blockSelector: void 0, ignoreClass: "ph-ignore-input", maskTextClass: "ph-mask", maskTextSelector: void 0, maskTextFn: void 0, maskAllInputs: true, maskInputOptions: {}, maskInputFn: void 0, slimDOMOptions: {}, collectFonts: false, inlineStylesheet: true, recordCrossOriginIframes: false };
      this.rrwebRecord = A.rrweb ? A.rrweb.record : A.rrwebRecord;
      for (var i2 = this.instance.config.session_recording, o2 = 0, s2 = Object.entries(i2 || {}); o2 < s2.length; o2++) {
        var a2 = f(s2[o2], 2), u2 = a2[0], l2 = a2[1];
        u2 in r2 && (r2[u2] = l2);
      }
      if (this.canvasRecording && this.canvasRecording.enabled && (r2.recordCanvas = true, r2.sampling = { canvas: this.canvasRecording.fps }, r2.dataURLOptions = { type: "image/webp", quality: this.canvasRecording.quality }), this.rrwebRecord) {
        this.mutationRateLimiter = (e7 = this.mutationRateLimiter) !== null && e7 !== void 0 ? e7 : new Mn(this.rrwebRecord, { onBlockedNode: function(e8, t2) {
          var r3 = "Too many mutations on node '".concat(e8, "'. Rate limiting. This could be due to SVG animations or something similar");
          G.info(r3, { node: t2 }), n2.log(or + " " + r3, "warn");
        } }), this._scheduleFullSnapshot();
        var c2 = this._gatherRRWebPlugins();
        this.stopRrweb = this.rrwebRecord(t({ emit: function(e8) {
          n2.onRRwebEmit(e8);
        }, plugins: c2 }, r2)), this.instance._addCaptureHook(function(e8) {
          try {
            if (e8 === "$pageview") {
              var t2 = A ? n2._maskUrl(A.location.href) : "";
              if (!t2)
                return;
              n2._tryAddCustomEvent("$pageview", { href: t2 }), n2._tryTakeFullSnapshot();
            }
          } catch (e9) {
            G.error("Could not add $pageview to rrweb session", e9);
          }
        }), this._lastActivityTimestamp = Date.now(), this.isIdle = false, this._tryAddCustomEvent("$session_options", { sessionRecordingOptions: r2, activePlugins: c2.map(function(e8) {
          return e8 == null ? void 0 : e8.name;
        }) }), this._tryAddCustomEvent("$posthog_config", { config: this.instance.config });
      } else
        G.error(or + "onScriptLoaded was called but rrwebRecord is not available. This indicates something has gone wrong.");
    } }, { key: "_scheduleFullSnapshot", value: function() {
      var e7 = this;
      this._fullSnapshotTimer && clearInterval(this._fullSnapshotTimer), this._fullSnapshotTimer = setInterval(function() {
        e7._tryTakeFullSnapshot();
      }, tr);
    } }, { key: "_gatherRRWebPlugins", value: function() {
      var e7 = [];
      (W.rrwebConsoleRecord && this.isConsoleLogCaptureEnabled && e7.push(W.rrwebConsoleRecord.getRecordConsolePlugin()), this.networkPayloadCapture && R(W.getRecordNetworkPlugin)) && (!xt.includes(location.hostname) || this._forceAllowLocalhostNetworkCapture ? e7.push(W.getRecordNetworkPlugin(jn(this.instance.config, this.networkPayloadCapture))) : G.info(or + " NetworkCapture not started because we are on localhost."));
      return e7;
    } }, { key: "onRRwebEmit", value: function(e7) {
      if (this._processQueuedEvents(), e7 && P(e7)) {
        if (e7.type === Dn.Meta) {
          var t2 = this._maskUrl(e7.data.href);
          if (!t2)
            return;
          e7.data.href = t2;
        }
        e7.type === Dn.FullSnapshot && this._scheduleFullSnapshot();
        var n2 = this.mutationRateLimiter ? this.mutationRateLimiter.throttleMutations(e7) : e7;
        if (n2) {
          var r2 = function(e8) {
            var t3 = e8;
            if (t3 && P(t3) && t3.type === 6 && P(t3.data) && t3.data.plugin === "rrweb/console@1") {
              t3.data.payload.payload.length > 10 && (t3.data.payload.payload = t3.data.payload.payload.slice(0, 10), t3.data.payload.payload.push("...[truncated]"));
              for (var n3 = [], r3 = 0; r3 < t3.data.payload.payload.length; r3++)
                t3.data.payload.payload[r3] && t3.data.payload.payload[r3].length > 2e3 ? n3.push(t3.data.payload.payload[r3].slice(0, 2e3) + "...[truncated]") : n3.push(t3.data.payload.payload[r3]);
              return t3.data.payload.payload = n3, e8;
            }
            return e8;
          }(n2), i2 = JSON.stringify(r2).length;
          if (this._updateWindowAndSessionIds(r2), !this.isIdle || r2.type === Dn.Custom) {
            var o2 = { $snapshot_bytes: i2, $snapshot_data: r2, $session_id: this.sessionId, $window_id: this.windowId };
            this.status !== "disabled" ? this._captureSnapshotBuffered(o2) : this.clearBuffer();
          }
        }
      }
    } }, { key: "_processQueuedEvents", value: function() {
      var e7 = this;
      if (this.queuedRRWebEvents.length) {
        var t2 = p(this.queuedRRWebEvents);
        this.queuedRRWebEvents = [], t2.forEach(function(n2) {
          Date.now() - n2.enqueuedAt > 2e3 ? e7._tryAddCustomEvent("rrwebQueueTimeout", { enqueuedAt: n2.enqueuedAt, attempt: n2.attempt, queueLength: t2.length }) : e7._tryRRWebMethod(n2) && e7._tryAddCustomEvent("rrwebQueueSuccess", { enqueuedAt: n2.enqueuedAt, attempt: n2.attempt, queueLength: t2.length });
        });
      }
    } }, { key: "_maskUrl", value: function(e7) {
      var t2 = this.instance.config.session_recording;
      if (t2.maskNetworkRequestFn) {
        var n2, r2 = { url: e7 };
        return (n2 = r2 = t2.maskNetworkRequestFn(r2)) === null || n2 === void 0 ? void 0 : n2.url;
      }
      return e7;
    } }, { key: "clearBuffer", value: function() {
      return this.buffer = void 0, { size: 0, data: [], sessionId: this.sessionId, windowId: this.windowId };
    } }, { key: "_flushBuffer", value: function() {
      var e7 = this;
      this.flushBufferTimer && (clearTimeout(this.flushBufferTimer), this.flushBufferTimer = void 0);
      var t2 = this._minimumDuration, n2 = this.sessionDuration, r2 = T(n2) && n2 >= 0, i2 = T(t2) && r2 && n2 < t2;
      return this.status === "buffering" || i2 ? (this.flushBufferTimer = setTimeout(function() {
        e7._flushBuffer();
      }, 2e3), this.buffer || this.clearBuffer()) : this.buffer && this.buffer.data.length !== 0 ? (this._captureSnapshot({ $snapshot_bytes: this.buffer.size, $snapshot_data: this.buffer.data, $session_id: this.buffer.sessionId, $window_id: this.buffer.windowId }), this.clearBuffer()) : this.buffer || this.clearBuffer();
    } }, { key: "_captureSnapshotBuffered", value: function(e7) {
      var t2, n2 = this, r2 = 2 + (((t2 = this.buffer) === null || t2 === void 0 ? void 0 : t2.data.length) || 0);
      (!this.buffer || this.buffer.size + e7.$snapshot_bytes + r2 > 943718.4 || this.buffer.sessionId && this.buffer.sessionId !== this.sessionId) && (this.buffer = this._flushBuffer()), I(this.buffer.sessionId) && !I(this.sessionId) && (this.buffer.sessionId = this.sessionId, this.buffer.windowId = this.windowId), this.buffer.size += e7.$snapshot_bytes, this.buffer.data.push(e7.$snapshot_data), this.flushBufferTimer || (this.flushBufferTimer = setTimeout(function() {
        n2._flushBuffer();
      }, 2e3));
    } }, { key: "_captureSnapshot", value: function(e7) {
      this.instance.capture("$snapshot", e7, { method: "POST", _url: this.instance.requestRouter.endpointFor("api", this._endpoint), _noTruncate: true, _batchKey: "recordings", _metrics: { rrweb_full_snapshot: e7.$snapshot_data.type === An } });
    } }]), e6;
  }();
  var ar = function() {
    function e6(t2) {
      r(this, e6), this.instance = t2, this.instance.decideEndpointWasHit = this.instance._hasBootstrappedFeatureFlags();
    }
    return o(e6, [{ key: "call", value: function() {
      var e7 = this, t2 = se(JSON.stringify({ token: this.instance.config.token, distinct_id: this.instance.get_distinct_id(), groups: this.instance.getGroups(), person_properties: this.instance.get_property(Ue), group_properties: this.instance.get_property(Ve), disable_flags: this.instance.config.advanced_disable_feature_flags || this.instance.config.advanced_disable_feature_flags_on_first_load || void 0 }));
      this.instance._send_request(this.instance.requestRouter.endpointFor("api", "/decide/?v=3"), { data: t2, verbose: true }, { method: "POST" }, function(t3) {
        return e7.parseDecideResponse(t3);
      });
    } }, { key: "parseDecideResponse", value: function(e7) {
      var t2, n2 = this;
      if (this.instance.featureFlags.setReloadingPaused(false), this.instance.featureFlags._startReloadTimer(), (e7 == null ? void 0 : e7.status) !== 0) {
        if (!B || !B.body)
          return G.info("document not ready yet, trying again in 500 milliseconds..."), void setTimeout(function() {
            n2.parseDecideResponse(e7);
          }, 500);
        this.instance.toolbar.afterDecideResponse(e7), (t2 = this.instance.sessionRecording) === null || t2 === void 0 || t2.afterDecideResponse(e7), Ze.afterDecideResponse(e7, this.instance), this.instance._afterDecideResponse(e7), this.instance.config.advanced_disable_feature_flags_on_first_load || this.instance.config.advanced_disable_feature_flags || this.instance.featureFlags.receivedFeatureFlags(e7);
        var r2 = A == null ? void 0 : A.extendPostHogWithSurveys;
        e7.surveys && !r2 && le(this.instance.requestRouter.endpointFor("assets", "/static/surveys.js"), function(e8) {
          if (e8)
            return G.error("Could not load surveys script", e8);
          A.extendPostHogWithSurveys(n2.instance);
        });
        var i2 = A == null ? void 0 : A.extendPostHogWithExceptionAutoCapture;
        if (e7.autocaptureExceptions && e7.autocaptureExceptions && x(i2) && le(this.instance.requestRouter.endpointFor("assets", "/static/exception-autocapture.js"), function(t3) {
          if (t3)
            return G.error("Could not load exception autocapture script", t3);
          A.extendPostHogWithExceptionAutocapture(n2.instance, e7);
        }), e7.siteApps)
          if (this.instance.config.opt_in_site_apps) {
            var o2, s2 = v(e7.siteApps);
            try {
              var a2 = function() {
                var e8 = o2.value, t3 = e8.id, r3 = e8.url, i3 = n2.instance.requestRouter.endpointFor("api", r3);
                W["__$$ph_site_app_".concat(t3)] = n2.instance, le(i3, function(e9) {
                  e9 && G.error("Error while initializing PostHog app with config id ".concat(t3), e9);
                });
              };
              for (s2.s(); !(o2 = s2.n()).done; )
                a2();
            } catch (e8) {
              s2.e(e8);
            } finally {
              s2.f();
            }
          } else
            e7.siteApps.length > 0 && G.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.');
      } else
        G.error("Failed to fetch feature flags from PostHog.");
    } }]), e6;
  }();
  var ur = ["source"];
  var lr = A != null && A.location ? Ot(A.location.hash, "__posthog") || Ot(location.hash, "state") : null;
  var cr = function() {
    function e6(t2) {
      r(this, e6), this.instance = t2;
    }
    return o(e6, [{ key: "afterDecideResponse", value: function(e7) {
      var n2 = e7.toolbarParams || e7.editorParams || (e7.toolbarVersion ? { toolbarVersion: e7.toolbarVersion } : {});
      e7.isAuthenticated && n2.toolbarVersion && n2.toolbarVersion.indexOf("toolbar") === 0 && this.loadToolbar(t({}, n2));
    } }, { key: "maybeLoadToolbar", value: function() {
      var e7, t2, n2 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : void 0, r2 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : void 0, i2 = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : void 0;
      if (!A || !B)
        return false;
      n2 = (e7 = n2) !== null && e7 !== void 0 ? e7 : A.location, i2 = (t2 = i2) !== null && t2 !== void 0 ? t2 : A.history;
      try {
        if (!r2) {
          try {
            A.localStorage.setItem("test", "test"), A.localStorage.removeItem("test");
          } catch (e8) {
            return false;
          }
          r2 = A == null ? void 0 : A.localStorage;
        }
        var o2, s2 = lr || Ot(n2.hash, "__posthog") || Ot(n2.hash, "state"), a2 = s2 ? ne(function() {
          return JSON.parse(atob(decodeURIComponent(s2)));
        }) || ne(function() {
          return JSON.parse(decodeURIComponent(s2));
        }) : null;
        return a2 && a2.action === "ph_authorize" ? ((o2 = a2).source = "url", o2 && Object.keys(o2).length > 0 && (a2.desiredHash ? n2.hash = a2.desiredHash : i2 ? i2.replaceState("", B.title, n2.pathname + n2.search) : n2.hash = "")) : ((o2 = JSON.parse(r2.getItem("_postHogToolbarParams") || "{}")).source = "localstorage", delete o2.userIntent), !(!o2.token || this.instance.config.token !== o2.token) && (this.loadToolbar(o2), true);
      } catch (e8) {
        return false;
      }
    } }, { key: "loadToolbar", value: function(e7) {
      var n2 = this;
      if (!A || W._postHogToolbarLoaded)
        return false;
      W._postHogToolbarLoaded = true;
      var r2 = 3e5, i2 = Math.floor(Date.now() / r2) * r2, o2 = this.instance.requestRouter.endpointFor("assets", "/static/toolbar.js?t=".concat(i2)), s2 = this.instance.requestRouter.region === "custom" && this.instance.config.advanced_disable_toolbar_metrics, a2 = t(t({ token: this.instance.config.token }, e7), {}, { apiURL: this.instance.requestRouter.endpointFor("ui") }, s2 ? { instrument: false } : {});
      a2.source;
      var u2 = c(a2, ur);
      return A.localStorage.setItem("_postHogToolbarParams", JSON.stringify(u2)), le(o2, function(e8) {
        e8 ? G.error("Failed to load toolbar", e8) : (W.ph_load_toolbar || W.ph_load_editor)(a2, n2.instance);
      }), ue(A, "turbolinks:load", function() {
        W._postHogToolbarLoaded = false, n2.loadToolbar(a2);
      }), true;
    } }, { key: "_loadEditor", value: function(e7) {
      return this.loadToolbar(e7);
    } }, { key: "maybeLoadEditor", value: function() {
      var e7 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : void 0, t2 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : void 0, n2 = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : void 0;
      return this.maybeLoadToolbar(e7, t2, n2);
    } }]), e6;
  }();
  var dr = function() {
    function e6() {
      var t2 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : 3e3;
      r(this, e6), this.isPolling = true, this._event_queue = [], this._empty_queue_count = 0, this._poller = void 0, this._pollInterval = t2;
    }
    return o(e6, [{ key: "setPollInterval", value: function(e7) {
      this._pollInterval = e7, this.isPolling && this.poll();
    } }, { key: "poll", value: function() {
    } }, { key: "unload", value: function() {
    } }, { key: "getTime", value: function() {
      return new Date().getTime();
    } }]), e6;
  }();
  var hr = function(e6) {
    a(i2, dr);
    var n2 = h(i2);
    function i2(e7) {
      var t2, o2 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 3e3;
      return r(this, i2), (t2 = n2.call(this, o2)).handlePollRequest = e7, t2;
    }
    return o(i2, [{ key: "enqueue", value: function(e7, t2, n3) {
      this._event_queue.push({ url: e7, data: t2, options: n3 }), this.isPolling || (this.isPolling = true, this.poll());
    } }, { key: "poll", value: function() {
      var e7 = this;
      clearTimeout(this._poller), this._poller = setTimeout(function() {
        if (e7._event_queue.length > 0) {
          var t2 = e7.formatQueue(), n3 = function(n4) {
            var r3 = t2[n4], i3 = r3.url, o2 = r3.data, s2 = r3.options;
            K(o2, function(t3, n5) {
              o2[n5].offset = Math.abs(o2[n5].timestamp - e7.getTime()), delete o2[n5].timestamp;
            }), e7.handlePollRequest(i3, o2, s2);
          };
          for (var r2 in t2)
            n3(r2);
          e7._event_queue.length = 0, e7._empty_queue_count = 0;
        } else
          e7._empty_queue_count++;
        e7._empty_queue_count > 4 && (e7.isPolling = false, e7._empty_queue_count = 0), e7.isPolling && e7.poll();
      }, this._pollInterval);
    } }, { key: "unload", value: function() {
      var e7 = this;
      clearTimeout(this._poller);
      var n3 = this._event_queue.length > 0 ? this.formatQueue() : {};
      this._event_queue.length = 0;
      var r2 = Object.values(n3);
      [].concat(p(r2.filter(function(e8) {
        return e8.url.indexOf("/e") === 0;
      })), p(r2.filter(function(e8) {
        return e8.url.indexOf("/e") !== 0;
      }))).map(function(n4) {
        var r3 = n4.url, i3 = n4.data, o2 = n4.options;
        e7.handlePollRequest(r3, i3, t(t({}, o2), {}, { transport: "sendBeacon" }));
      });
    } }, { key: "formatQueue", value: function() {
      var e7 = {};
      return K(this._event_queue, function(t2) {
        var n3 = t2.url, r2 = t2.data, i3 = t2.options, o2 = (i3 ? i3._batchKey : null) || n3;
        x(e7[o2]) && (e7[o2] = { data: [], url: n3, options: i3 }), i3 && e7[o2].options && e7[o2].options._metrics && !e7[o2].options._metrics.rrweb_full_snapshot && (e7[o2].options._metrics.rrweb_full_snapshot = i3._metrics.rrweb_full_snapshot), e7[o2].data.push(r2);
      }), e7;
    } }]), i2;
  }();
  var fr = Uint8Array;
  var pr = Uint16Array;
  var gr = Uint32Array;
  var _r = new fr([0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0, 0, 0, 0]);
  var vr = new fr([0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13, 0, 0]);
  var mr = new fr([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]);
  var yr = function(e6, t2) {
    for (var n2 = new pr(31), r2 = 0; r2 < 31; ++r2)
      n2[r2] = t2 += 1 << e6[r2 - 1];
    var i2 = new gr(n2[30]);
    for (r2 = 1; r2 < 30; ++r2)
      for (var o2 = n2[r2]; o2 < n2[r2 + 1]; ++o2)
        i2[o2] = o2 - n2[r2] << 5 | r2;
    return [n2, i2];
  };
  var br = yr(_r, 2);
  var wr = br[0];
  var kr = br[1];
  wr[28] = 258, kr[258] = 28;
  for (Sr = yr(vr, 0)[1], Fr = new pr(32768), Rr = 0; Rr < 32768; ++Rr) {
    Pr = (43690 & Rr) >>> 1 | (21845 & Rr) << 1;
    Pr = (61680 & (Pr = (52428 & Pr) >>> 2 | (13107 & Pr) << 2)) >>> 4 | (3855 & Pr) << 4, Fr[Rr] = ((65280 & Pr) >>> 8 | (255 & Pr) << 8) >>> 1;
  }
  var Pr;
  var Sr;
  var Fr;
  var Rr;
  var xr = function(e6, t2, n2) {
    for (var r2 = e6.length, i2 = 0, o2 = new pr(t2); i2 < r2; ++i2)
      ++o2[e6[i2] - 1];
    var s2, a2 = new pr(t2);
    for (i2 = 0; i2 < t2; ++i2)
      a2[i2] = a2[i2 - 1] + o2[i2 - 1] << 1;
    if (n2) {
      s2 = new pr(1 << t2);
      var u2 = 15 - t2;
      for (i2 = 0; i2 < r2; ++i2)
        if (e6[i2])
          for (var l2 = i2 << 4 | e6[i2], c2 = t2 - e6[i2], d2 = a2[e6[i2] - 1]++ << c2, h2 = d2 | (1 << c2) - 1; d2 <= h2; ++d2)
            s2[Fr[d2] >>> u2] = l2;
    } else
      for (s2 = new pr(r2), i2 = 0; i2 < r2; ++i2)
        s2[i2] = Fr[a2[e6[i2] - 1]++] >>> 15 - e6[i2];
    return s2;
  };
  var Er = new fr(288);
  for (Rr = 0; Rr < 144; ++Rr)
    Er[Rr] = 8;
  for (Rr = 144; Rr < 256; ++Rr)
    Er[Rr] = 9;
  for (Rr = 256; Rr < 280; ++Rr)
    Er[Rr] = 7;
  for (Rr = 280; Rr < 288; ++Rr)
    Er[Rr] = 8;
  var Ir = new fr(32);
  for (Rr = 0; Rr < 32; ++Rr)
    Ir[Rr] = 5;
  var Cr;
  var Tr = xr(Er, 9, 0);
  var $r = xr(Ir, 5, 0);
  var Or = function(e6) {
    return (e6 / 8 >> 0) + (7 & e6 && 1);
  };
  var Ar = function(e6, t2, n2) {
    (t2 == null || t2 < 0) && (t2 = 0), (n2 == null || n2 > e6.length) && (n2 = e6.length);
    var r2 = new (e6 instanceof pr ? pr : e6 instanceof gr ? gr : fr)(n2 - t2);
    return r2.set(e6.subarray(t2, n2)), r2;
  };
  var qr = function(e6, t2, n2) {
    n2 <<= 7 & t2;
    var r2 = t2 / 8 >> 0;
    e6[r2] |= n2, e6[r2 + 1] |= n2 >>> 8;
  };
  var Mr = function(e6, t2, n2) {
    n2 <<= 7 & t2;
    var r2 = t2 / 8 >> 0;
    e6[r2] |= n2, e6[r2 + 1] |= n2 >>> 8, e6[r2 + 2] |= n2 >>> 16;
  };
  var Dr = function(e6, t2) {
    for (var n2 = [], r2 = 0; r2 < e6.length; ++r2)
      e6[r2] && n2.push({ s: r2, f: e6[r2] });
    var i2 = n2.length, o2 = n2.slice();
    if (!i2)
      return [new fr(0), 0];
    if (i2 == 1) {
      var s2 = new fr(n2[0].s + 1);
      return s2[n2[0].s] = 1, [s2, 1];
    }
    n2.sort(function(e7, t3) {
      return e7.f - t3.f;
    }), n2.push({ s: -1, f: 25001 });
    var a2 = n2[0], u2 = n2[1], l2 = 0, c2 = 1, d2 = 2;
    for (n2[0] = { s: -1, f: a2.f + u2.f, l: a2, r: u2 }; c2 != i2 - 1; )
      a2 = n2[n2[l2].f < n2[d2].f ? l2++ : d2++], u2 = n2[l2 != c2 && n2[l2].f < n2[d2].f ? l2++ : d2++], n2[c2++] = { s: -1, f: a2.f + u2.f, l: a2, r: u2 };
    var h2 = o2[0].s;
    for (r2 = 1; r2 < i2; ++r2)
      o2[r2].s > h2 && (h2 = o2[r2].s);
    var f2 = new pr(h2 + 1), p2 = Nr(n2[c2 - 1], f2, 0);
    if (p2 > t2) {
      r2 = 0;
      var g2 = 0, _2 = p2 - t2, v2 = 1 << _2;
      for (o2.sort(function(e7, t3) {
        return f2[t3.s] - f2[e7.s] || e7.f - t3.f;
      }); r2 < i2; ++r2) {
        var m2 = o2[r2].s;
        if (!(f2[m2] > t2))
          break;
        g2 += v2 - (1 << p2 - f2[m2]), f2[m2] = t2;
      }
      for (g2 >>>= _2; g2 > 0; ) {
        var y2 = o2[r2].s;
        f2[y2] < t2 ? g2 -= 1 << t2 - f2[y2]++ - 1 : ++r2;
      }
      for (; r2 >= 0 && g2; --r2) {
        var b2 = o2[r2].s;
        f2[b2] == t2 && (--f2[b2], ++g2);
      }
      p2 = t2;
    }
    return [new fr(f2), p2];
  };
  var Nr = function e3(t2, n2, r2) {
    return t2.s == -1 ? Math.max(e3(t2.l, n2, r2 + 1), e3(t2.r, n2, r2 + 1)) : n2[t2.s] = r2;
  };
  var Lr = function(e6) {
    for (var t2 = e6.length; t2 && !e6[--t2]; )
      ;
    for (var n2 = new pr(++t2), r2 = 0, i2 = e6[0], o2 = 1, s2 = function(e7) {
      n2[r2++] = e7;
    }, a2 = 1; a2 <= t2; ++a2)
      if (e6[a2] == i2 && a2 != t2)
        ++o2;
      else {
        if (!i2 && o2 > 2) {
          for (; o2 > 138; o2 -= 138)
            s2(32754);
          o2 > 2 && (s2(o2 > 10 ? o2 - 11 << 5 | 28690 : o2 - 3 << 5 | 12305), o2 = 0);
        } else if (o2 > 3) {
          for (s2(i2), --o2; o2 > 6; o2 -= 6)
            s2(8304);
          o2 > 2 && (s2(o2 - 3 << 5 | 8208), o2 = 0);
        }
        for (; o2--; )
          s2(i2);
        o2 = 1, i2 = e6[a2];
      }
    return [n2.subarray(0, r2), t2];
  };
  var Br = function(e6, t2) {
    for (var n2 = 0, r2 = 0; r2 < t2.length; ++r2)
      n2 += e6[r2] * t2[r2];
    return n2;
  };
  var Hr = function(e6, t2, n2) {
    var r2 = n2.length, i2 = Or(t2 + 2);
    e6[i2] = 255 & r2, e6[i2 + 1] = r2 >>> 8, e6[i2 + 2] = 255 ^ e6[i2], e6[i2 + 3] = 255 ^ e6[i2 + 1];
    for (var o2 = 0; o2 < r2; ++o2)
      e6[i2 + o2 + 4] = n2[o2];
    return 8 * (i2 + 4 + r2);
  };
  var jr = function(e6, t2, n2, r2, i2, o2, s2, a2, u2, l2, c2) {
    qr(t2, c2++, n2), ++i2[256];
    for (var d2 = Dr(i2, 15), h2 = d2[0], f2 = d2[1], p2 = Dr(o2, 15), g2 = p2[0], _2 = p2[1], v2 = Lr(h2), m2 = v2[0], y2 = v2[1], b2 = Lr(g2), w2 = b2[0], k2 = b2[1], S2 = new pr(19), F2 = 0; F2 < m2.length; ++F2)
      S2[31 & m2[F2]]++;
    for (F2 = 0; F2 < w2.length; ++F2)
      S2[31 & w2[F2]]++;
    for (var R2 = Dr(S2, 7), P2 = R2[0], x2 = R2[1], E2 = 19; E2 > 4 && !P2[mr[E2 - 1]]; --E2)
      ;
    var I2, C2, T2, $2, O2 = l2 + 5 << 3, A2 = Br(i2, Er) + Br(o2, Ir) + s2, q2 = Br(i2, h2) + Br(o2, g2) + s2 + 14 + 3 * E2 + Br(S2, P2) + (2 * S2[16] + 3 * S2[17] + 7 * S2[18]);
    if (O2 <= A2 && O2 <= q2)
      return Hr(t2, c2, e6.subarray(u2, u2 + l2));
    if (qr(t2, c2, 1 + (q2 < A2)), c2 += 2, q2 < A2) {
      I2 = xr(h2, f2, 0), C2 = h2, T2 = xr(g2, _2, 0), $2 = g2;
      var M2 = xr(P2, x2, 0);
      qr(t2, c2, y2 - 257), qr(t2, c2 + 5, k2 - 1), qr(t2, c2 + 10, E2 - 4), c2 += 14;
      for (F2 = 0; F2 < E2; ++F2)
        qr(t2, c2 + 3 * F2, P2[mr[F2]]);
      c2 += 3 * E2;
      for (var D2 = [m2, w2], N2 = 0; N2 < 2; ++N2) {
        var L2 = D2[N2];
        for (F2 = 0; F2 < L2.length; ++F2) {
          var B2 = 31 & L2[F2];
          qr(t2, c2, M2[B2]), c2 += P2[B2], B2 > 15 && (qr(t2, c2, L2[F2] >>> 5 & 127), c2 += L2[F2] >>> 12);
        }
      }
    } else
      I2 = Tr, C2 = Er, T2 = $r, $2 = Ir;
    for (F2 = 0; F2 < a2; ++F2)
      if (r2[F2] > 255) {
        B2 = r2[F2] >>> 18 & 31;
        Mr(t2, c2, I2[B2 + 257]), c2 += C2[B2 + 257], B2 > 7 && (qr(t2, c2, r2[F2] >>> 23 & 31), c2 += _r[B2]);
        var H2 = 31 & r2[F2];
        Mr(t2, c2, T2[H2]), c2 += $2[H2], H2 > 3 && (Mr(t2, c2, r2[F2] >>> 5 & 8191), c2 += vr[H2]);
      } else
        Mr(t2, c2, I2[r2[F2]]), c2 += C2[r2[F2]];
    return Mr(t2, c2, I2[256]), c2 + C2[256];
  };
  var Ur = new gr([65540, 131080, 131088, 131104, 262176, 1048704, 1048832, 2114560, 2117632]);
  var Vr = new fr(0);
  var Wr = function() {
    for (var e6 = new gr(256), t2 = 0; t2 < 256; ++t2) {
      for (var n2 = t2, r2 = 9; --r2; )
        n2 = (1 & n2 && 3988292384) ^ n2 >>> 1;
      e6[t2] = n2;
    }
    return e6;
  }();
  var zr = function() {
    var e6 = 4294967295;
    return { p: function(t2) {
      for (var n2 = e6, r2 = 0; r2 < t2.length; ++r2)
        n2 = Wr[255 & n2 ^ t2[r2]] ^ n2 >>> 8;
      e6 = n2;
    }, d: function() {
      return 4294967295 ^ e6;
    } };
  };
  var Gr = function(e6, t2, n2, r2, i2) {
    return function(e7, t3, n3, r3, i3, o2) {
      var s2 = e7.length, a2 = new fr(r3 + s2 + 5 * (1 + Math.floor(s2 / 7e3)) + i3), u2 = a2.subarray(r3, a2.length - i3), l2 = 0;
      if (!t3 || s2 < 8)
        for (var c2 = 0; c2 <= s2; c2 += 65535) {
          var d2 = c2 + 65535;
          d2 < s2 ? l2 = Hr(u2, l2, e7.subarray(c2, d2)) : (u2[c2] = o2, l2 = Hr(u2, l2, e7.subarray(c2, s2)));
        }
      else {
        for (var h2 = Ur[t3 - 1], f2 = h2 >>> 13, p2 = 8191 & h2, g2 = (1 << n3) - 1, _2 = new pr(32768), v2 = new pr(g2 + 1), m2 = Math.ceil(n3 / 3), y2 = 2 * m2, b2 = function(t4) {
          return (e7[t4] ^ e7[t4 + 1] << m2 ^ e7[t4 + 2] << y2) & g2;
        }, w2 = new gr(25e3), k2 = new pr(288), S2 = new pr(32), F2 = 0, R2 = 0, P2 = (c2 = 0, 0), x2 = 0, E2 = 0; c2 < s2; ++c2) {
          var I2 = b2(c2), C2 = 32767 & c2, T2 = v2[I2];
          if (_2[C2] = T2, v2[I2] = C2, x2 <= c2) {
            var $2 = s2 - c2;
            if ((F2 > 7e3 || P2 > 24576) && $2 > 423) {
              l2 = jr(e7, u2, 0, w2, k2, S2, R2, P2, E2, c2 - E2, l2), P2 = F2 = R2 = 0, E2 = c2;
              for (var O2 = 0; O2 < 286; ++O2)
                k2[O2] = 0;
              for (O2 = 0; O2 < 30; ++O2)
                S2[O2] = 0;
            }
            var A2 = 2, q2 = 0, M2 = p2, D2 = C2 - T2 & 32767;
            if ($2 > 2 && I2 == b2(c2 - D2))
              for (var N2 = Math.min(f2, $2) - 1, L2 = Math.min(32767, c2), B2 = Math.min(258, $2); D2 <= L2 && --M2 && C2 != T2; ) {
                if (e7[c2 + A2] == e7[c2 + A2 - D2]) {
                  for (var H2 = 0; H2 < B2 && e7[c2 + H2] == e7[c2 + H2 - D2]; ++H2)
                    ;
                  if (H2 > A2) {
                    if (A2 = H2, q2 = D2, H2 > N2)
                      break;
                    var j2 = Math.min(D2, H2 - 2), U2 = 0;
                    for (O2 = 0; O2 < j2; ++O2) {
                      var V2 = c2 - D2 + O2 + 32768 & 32767, W2 = V2 - _2[V2] + 32768 & 32767;
                      W2 > U2 && (U2 = W2, T2 = V2);
                    }
                  }
                }
                D2 += (C2 = T2) - (T2 = _2[C2]) + 32768 & 32767;
              }
            if (q2) {
              w2[P2++] = 268435456 | kr[A2] << 18 | Sr[q2];
              var z2 = 31 & kr[A2], G2 = 31 & Sr[q2];
              R2 += _r[z2] + vr[G2], ++k2[257 + z2], ++S2[G2], x2 = c2 + A2, ++F2;
            } else
              w2[P2++] = e7[c2], ++k2[e7[c2]];
          }
        }
        l2 = jr(e7, u2, o2, w2, k2, S2, R2, P2, E2, c2 - E2, l2), o2 || (l2 = Hr(u2, l2, Vr));
      }
      return Ar(a2, 0, r3 + Or(l2) + i3);
    }(e6, t2.level == null ? 6 : t2.level, t2.mem == null ? Math.ceil(1.5 * Math.max(8, Math.min(13, Math.log(e6.length)))) : 12 + t2.mem, n2, r2, !i2);
  };
  var Qr = function(e6, t2, n2) {
    for (; n2; ++t2)
      e6[t2] = n2, n2 >>>= 8;
  };
  var Yr = function(e6, t2) {
    var n2 = t2.filename;
    if (e6[0] = 31, e6[1] = 139, e6[2] = 8, e6[8] = t2.level < 2 ? 4 : t2.level == 9 ? 2 : 0, e6[9] = 3, t2.mtime != 0 && Qr(e6, 4, Math.floor(new Date(t2.mtime || Date.now()) / 1e3)), n2) {
      e6[3] = 8;
      for (var r2 = 0; r2 <= n2.length; ++r2)
        e6[r2 + 10] = n2.charCodeAt(r2);
    }
  };
  var Jr = function(e6) {
    return 10 + (e6.filename && e6.filename.length + 1 || 0);
  };
  function Kr(e6, t2) {
    t2 === void 0 && (t2 = {});
    var n2 = zr(), r2 = e6.length;
    n2.p(e6);
    var i2 = Gr(e6, t2, Jr(t2), 8), o2 = i2.length;
    return Yr(i2, t2), Qr(i2, o2 - 8, n2.d()), Qr(i2, o2 - 4, r2), i2;
  }
  function Xr(e6, t2) {
    var n2 = e6.length;
    if (!t2 && typeof TextEncoder != "undefined")
      return new TextEncoder().encode(e6);
    for (var r2 = new fr(e6.length + (e6.length >>> 1)), i2 = 0, o2 = function(e7) {
      r2[i2++] = e7;
    }, s2 = 0; s2 < n2; ++s2) {
      if (i2 + 5 > r2.length) {
        var a2 = new fr(i2 + 8 + (n2 - s2 << 1));
        a2.set(r2), r2 = a2;
      }
      var u2 = e6.charCodeAt(s2);
      u2 < 128 || t2 ? o2(u2) : u2 < 2048 ? (o2(192 | u2 >>> 6), o2(128 | 63 & u2)) : u2 > 55295 && u2 < 57344 ? (o2(240 | (u2 = 65536 + (1047552 & u2) | 1023 & e6.charCodeAt(++s2)) >>> 18), o2(128 | u2 >>> 12 & 63), o2(128 | u2 >>> 6 & 63), o2(128 | 63 & u2)) : (o2(224 | u2 >>> 12), o2(128 | u2 >>> 6 & 63), o2(128 | 63 & u2));
    }
    return Ar(r2, 0, i2);
  }
  !function(e6) {
    e6.GZipJS = "gzip-js", e6.Base64 = "base64";
  }(Cr || (Cr = {}));
  var Zr = function(e6, t2, n2) {
    var r2 = t2 || {};
    r2.ip = n2.ip ? 1 : 0, r2._ = new Date().getTime().toString(), r2.ver = m.LIB_VERSION;
    var i2 = e6.split("?");
    if (i2.length > 1) {
      var o2, s2 = v(i2[1].split("&"));
      try {
        for (s2.s(); !(o2 = s2.n()).done; ) {
          var a2 = o2.value.split("=")[0];
          x(r2[a2]) || delete r2[a2];
        }
      } catch (e7) {
        s2.e(e7);
      } finally {
        s2.f();
      }
    }
    var u2 = e6.indexOf("?") > -1 ? "&" : "?";
    return e6 + u2 + Tt(r2);
  };
  var ei = function e4(t2, n2) {
    if (n2.blob && t2.buffer)
      return new Blob([F(t2) ? t2 : t2.buffer], { type: "text/plain" });
    if (n2.sendBeacon || n2.blob) {
      var r2 = e4(t2, { method: "POST" });
      return new Blob([r2], { type: "application/x-www-form-urlencoded" });
    }
    return n2.method !== "POST" ? null : (i2 = S(t2) || F(t2) ? "data=" + encodeURIComponent(t2) : "data=" + encodeURIComponent(t2.data), "compression" in t2 && t2.compression && (i2 += "&compression=" + t2.compression), i2);
    var i2;
  };
  var ti = function(e6) {
    if (j && e6.options.transport === "fetch") {
      var n2, r2 = ei(e6.data, e6.options), i2 = new Headers();
      K(i2, function(e7, t2) {
        i2.append(t2, e7);
      }), e6.options.method !== "POST" || e6.options.blob || i2.append("Content-Type", "application/x-www-form-urlencoded");
      var o2 = e6.url;
      return T(e6.retriesPerformedSoFar) && e6.retriesPerformedSoFar > 0 && (o2 = Zr(o2, { retry_count: e6.retriesPerformedSoFar }, {})), void j(o2, { method: ((n2 = e6.options) === null || n2 === void 0 ? void 0 : n2.method) || "GET", headers: i2, keepalive: e6.options.method === "POST", body: r2 }).then(function(n3) {
        var r3 = n3.status;
        return n3.text().then(function(n4) {
          var o3, s2;
          if ((o3 = e6.onResponse) === null || o3 === void 0 || o3.call(e6, { statusCode: r3, responseText: n4 }), r3 !== 200)
            R(e6.onError) && e6.onError({ statusCode: r3, responseText: n4 }), (r3 < 400 || r3 > 500) && e6.retryQueue.enqueue(t(t({}, e6), {}, { headers: i2, retriesPerformedSoFar: (e6.retriesPerformedSoFar || 0) + 1 })), (s2 = e6.callback) === null || s2 === void 0 || s2.call(e6, { status: 0 });
          else
            try {
              var a2;
              (a2 = e6.callback) === null || a2 === void 0 || a2.call(e6, JSON.parse(n4));
            } catch (e7) {
              G.error(e7);
            }
        });
      }).catch(function(t2) {
        var n3;
        G.error(t2), (n3 = e6.callback) === null || n3 === void 0 || n3.call(e6, { status: 0 });
      });
    }
    return ni(e6);
  };
  var ni = function(e6) {
    var t2 = e6.url, n2 = e6.data, r2 = e6.headers, i2 = e6.options, o2 = e6.callback, s2 = e6.retriesPerformedSoFar, a2 = e6.retryQueue, u2 = e6.onError, l2 = e6.timeout, c2 = l2 === void 0 ? 6e4 : l2, d2 = e6.onResponse;
    T(s2) && s2 > 0 && (t2 = Zr(t2, { retry_count: s2 }, {}));
    var h2 = new XMLHttpRequest();
    h2.open(i2.method || "GET", t2, true);
    var f2 = ei(n2, i2);
    K(r2, function(e7, t3) {
      h2.setRequestHeader(t3, e7);
    }), i2.method !== "POST" || i2.blob || h2.setRequestHeader("Content-Type", "application/x-www-form-urlencoded"), h2.timeout = c2, h2.withCredentials = true, h2.onreadystatechange = function() {
      if (h2.readyState === 4) {
        var e7 = { statusCode: h2.status, responseText: h2.responseText };
        if (d2 == null || d2(e7), h2.status === 200) {
          if (o2) {
            var l3;
            try {
              l3 = JSON.parse(h2.responseText);
            } catch (e8) {
              return void G.error(e8);
            }
            o2(l3);
          }
        } else
          R(u2) && u2(e7), (h2.status < 400 || h2.status > 500) && a2.enqueue({ url: t2, data: n2, options: i2, headers: r2, retriesPerformedSoFar: (s2 || 0) + 1, callback: o2 }), o2 == null || o2({ status: 0 });
      }
    }, h2.send(f2);
  };
  var ri;
  var ii = function(e6) {
    a(i2, dr);
    var n2 = h(i2);
    function i2(e7, t2) {
      var o2;
      return r(this, i2), (o2 = n2.call(this)).isPolling = false, o2.queue = [], o2.areWeOnline = true, o2.onRequestError = e7, o2.rateLimiter = t2, !x(A) && "onLine" in A.navigator && (o2.areWeOnline = A.navigator.onLine, A.addEventListener("online", function() {
        o2._handleWeAreNowOnline();
      }), A.addEventListener("offline", function() {
        o2.areWeOnline = false;
      })), o2;
    }
    return o(i2, [{ key: "enqueue", value: function(e7) {
      var t2 = e7.retriesPerformedSoFar || 0;
      if (!(t2 >= 10)) {
        var n3 = function(e8) {
          var t3 = 3e3 * Math.pow(2, e8), n4 = t3 / 2, r3 = Math.min(18e5, t3), i4 = (Math.random() - 0.5) * (r3 - n4);
          return Math.ceil(r3 + i4);
        }(t2), r2 = new Date(Date.now() + n3);
        this.queue.push({ retryAt: r2, requestData: e7 });
        var i3 = "Enqueued failed request for retry in ".concat(n3);
        navigator.onLine || (i3 += " (Browser is offline)"), G.warn(i3), this.isPolling || (this.isPolling = true, this.poll());
      }
    } }, { key: "poll", value: function() {
      var e7 = this;
      this._poller && clearTimeout(this._poller), this._poller = setTimeout(function() {
        e7.areWeOnline && e7.queue.length > 0 && e7.flush(), e7.poll();
      }, this._pollInterval);
    } }, { key: "flush", value: function() {
      var e7 = new Date(Date.now()), t2 = this.queue.filter(function(t3) {
        return t3.retryAt < e7;
      });
      if (t2.length > 0) {
        this.queue = this.queue.filter(function(t3) {
          return t3.retryAt >= e7;
        });
        var n3, r2 = v(t2);
        try {
          for (r2.s(); !(n3 = r2.n()).done; ) {
            var i3 = n3.value.requestData;
            this._executeXhrRequest(i3);
          }
        } catch (e8) {
          r2.e(e8);
        } finally {
          r2.f();
        }
      }
    } }, { key: "unload", value: function() {
      this._poller && (clearTimeout(this._poller), this._poller = void 0);
      var e7, n3 = v(this.queue);
      try {
        for (n3.s(); !(e7 = n3.n()).done; ) {
          var r2 = e7.value.requestData, i3 = r2.url, o2 = r2.data, s2 = r2.options;
          if (this.rateLimiter.isRateLimited(s2._batchKey))
            G.warn("[RetryQueue] is quota limited. Dropping request.");
          else
            try {
              A == null || A.navigator.sendBeacon(i3, ei(o2, t(t({}, s2), {}, { sendBeacon: true })));
            } catch (e8) {
              G.error(e8);
            }
        }
      } catch (e8) {
        n3.e(e8);
      } finally {
        n3.f();
      }
      this.queue = [];
    } }, { key: "_executeXhrRequest", value: function(e7) {
      var t2 = e7.url, n3 = e7.data, r2 = e7.options, i3 = e7.headers, o2 = e7.callback, s2 = e7.retriesPerformedSoFar;
      this.rateLimiter.isRateLimited(r2._batchKey) || ti({ url: t2, data: n3 || {}, options: r2 || {}, headers: i3 || {}, retriesPerformedSoFar: s2 || 0, callback: o2, retryQueue: this, onError: this.onRequestError, onResponse: this.rateLimiter.checkForLimiting });
    } }, { key: "_handleWeAreNowOnline", value: function() {
      this.areWeOnline = true, this.flush();
    } }]), i2;
  }();
  var oi = 1800;
  var si = function() {
    function e6(t2, n2, i2, o2) {
      r(this, e6), s(this, "_sessionIdChangedHandlers", []), this.config = t2, this.persistence = n2, this._windowId = void 0, this._sessionId = void 0, this._sessionStartTimestamp = null, this._sessionActivityTimestamp = null, this._sessionIdGenerator = i2 || dt, this._windowIdGenerator = o2 || dt;
      var a2 = t2.persistence_name || t2.token, u2 = t2.session_idle_timeout_seconds || oi;
      if (T(u2) ? u2 > oi ? G.warn("session_idle_timeout_seconds cannot be  greater than 30 minutes. Using 30 minutes instead.") : u2 < 60 && G.warn("session_idle_timeout_seconds cannot be less than 60 seconds. Using 60 seconds instead.") : (G.warn("session_idle_timeout_seconds must be a number. Defaulting to 30 minutes."), u2 = oi), this._sessionTimeoutMs = 1e3 * Math.min(Math.max(u2, 60), oi), this._window_id_storage_key = "ph_" + a2 + "_window_id", this._primary_window_exists_storage_key = "ph_" + a2 + "_primary_window_exists", this._canUseSessionStorage()) {
        var l2 = Pt.parse(this._window_id_storage_key), c2 = Pt.parse(this._primary_window_exists_storage_key);
        l2 && !c2 ? this._windowId = l2 : Pt.remove(this._window_id_storage_key), Pt.set(this._primary_window_exists_storage_key, true);
      }
      this._listenToReloadWindow();
    }
    return o(e6, [{ key: "onSessionId", value: function(e7) {
      var t2 = this;
      return x(this._sessionIdChangedHandlers) && (this._sessionIdChangedHandlers = []), this._sessionIdChangedHandlers.push(e7), this._sessionId && e7(this._sessionId, this._windowId), function() {
        t2._sessionIdChangedHandlers = t2._sessionIdChangedHandlers.filter(function(t3) {
          return t3 !== e7;
        });
      };
    } }, { key: "_canUseSessionStorage", value: function() {
      return this.config.persistence !== "memory" && !this.persistence.disabled && Pt.is_supported();
    } }, { key: "_setWindowId", value: function(e7) {
      e7 !== this._windowId && (this._windowId = e7, this._canUseSessionStorage() && Pt.set(this._window_id_storage_key, e7));
    } }, { key: "_getWindowId", value: function() {
      return this._windowId ? this._windowId : this._canUseSessionStorage() ? Pt.parse(this._window_id_storage_key) : null;
    } }, { key: "_setSessionId", value: function(e7, t2, n2) {
      e7 === this._sessionId && t2 === this._sessionActivityTimestamp && n2 === this._sessionStartTimestamp || (this._sessionStartTimestamp = n2, this._sessionActivityTimestamp = t2, this._sessionId = e7, this.persistence.register(s({}, Le, [t2, e7, n2])));
    } }, { key: "_getSessionId", value: function() {
      if (this._sessionId && this._sessionActivityTimestamp && this._sessionStartTimestamp)
        return [this._sessionActivityTimestamp, this._sessionId, this._sessionStartTimestamp];
      var e7 = this.persistence.props[Le];
      return S(e7) && e7.length === 2 && e7.push(e7[0]), e7 || [0, null, 0];
    } }, { key: "resetSessionId", value: function() {
      this._setSessionId(null, null, null);
    } }, { key: "_listenToReloadWindow", value: function() {
      var e7 = this;
      A == null || A.addEventListener("beforeunload", function() {
        e7._canUseSessionStorage() && Pt.remove(e7._primary_window_exists_storage_key);
      });
    } }, { key: "checkAndGetSessionAndWindowId", value: function() {
      var e7 = arguments.length > 0 && arguments[0] !== void 0 && arguments[0], t2 = (arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : null) || new Date().getTime(), n2 = f(this._getSessionId(), 3), r2 = n2[0], i2 = n2[1], o2 = n2[2], s2 = this._getWindowId(), a2 = o2 && o2 > 0 && Math.abs(t2 - o2) > 864e5, u2 = false, l2 = !i2, c2 = !e7 && Math.abs(t2 - r2) > this._sessionTimeoutMs;
      l2 || c2 || a2 ? (i2 = this._sessionIdGenerator(), s2 = this._windowIdGenerator(), G.info("[SessionId] new session ID generated", { sessionId: i2, windowId: s2, changeReason: { noSessionId: l2, activityTimeout: c2, sessionPastMaximumLength: a2 } }), o2 = t2, u2 = true) : s2 || (s2 = this._windowIdGenerator(), u2 = true);
      var d2 = r2 === 0 || !e7 || a2 ? t2 : r2, h2 = o2 === 0 ? new Date().getTime() : o2;
      return this._setWindowId(s2), this._setSessionId(i2, d2, h2), u2 && this._sessionIdChangedHandlers.forEach(function(e8) {
        return e8(i2, s2);
      }), { sessionId: i2, windowId: s2, sessionStartTimestamp: h2 };
    } }]), e6;
  }();
  !function(e6) {
    e6.US = "us", e6.EU = "eu", e6.CUSTOM = "custom";
  }(ri || (ri = {}));
  var ai = function() {
    function e6(t2) {
      r(this, e6), s(this, "_regionCache", {}), this.instance = t2;
    }
    return o(e6, [{ key: "apiHost", get: function() {
      return this.instance.config.api_host.trim().replace(/\/$/, "");
    } }, { key: "uiHost", get: function() {
      var e7;
      return (e7 = this.instance.config.ui_host) === null || e7 === void 0 ? void 0 : e7.replace(/\/$/, "");
    } }, { key: "region", get: function() {
      return this._regionCache[this.apiHost] || (/https:\/\/(app|us|us-assets)(\.i)?\.posthog\.com/i.test(this.apiHost) ? this._regionCache[this.apiHost] = ri.US : /https:\/\/(eu|eu-assets)(\.i)?\.posthog\.com/i.test(this.apiHost) ? this._regionCache[this.apiHost] = ri.EU : this._regionCache[this.apiHost] = ri.CUSTOM), this._regionCache[this.apiHost];
    } }, { key: "endpointFor", value: function(e7) {
      var t2 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : "";
      if (t2 && (t2 = t2[0] === "/" ? t2 : "/".concat(t2)), e7 === "ui")
        return (this.uiHost || this.apiHost) + t2;
      if (this.region === ri.CUSTOM)
        return this.apiHost + t2;
      var n2 = "i.posthog.com" + t2;
      switch (e7) {
        case "assets":
          return "https://".concat(this.region, "-assets.").concat(n2);
        case "api":
          return "https://".concat(this.region, ".").concat(n2);
      }
    } }]), e6;
  }();
  var ui = o(function e5(t2, n2, i2, o2) {
    r(this, e5), this.name = "posthog-js", this.setupOnce = function(e6) {
      e6(function(e7) {
        var r2, s2, a2, u2, l2;
        if (e7.level !== "error" || !t2.__loaded)
          return e7;
        e7.tags || (e7.tags = {});
        var c2 = t2.requestRouter.endpointFor("ui", "/person/" + t2.get_distinct_id());
        e7.tags["PostHog Person URL"] = c2, t2.sessionRecordingStarted() && (e7.tags["PostHog Recording URL"] = t2.get_session_replay_url({ withTimestamp: true }));
        var d2 = ((r2 = e7.exception) === null || r2 === void 0 ? void 0 : r2.values) || [], h2 = { $exception_message: (s2 = d2[0]) === null || s2 === void 0 ? void 0 : s2.value, $exception_type: (a2 = d2[0]) === null || a2 === void 0 ? void 0 : a2.type, $exception_personURL: c2, $sentry_event_id: e7.event_id, $sentry_exception: e7.exception, $sentry_exception_message: (u2 = d2[0]) === null || u2 === void 0 ? void 0 : u2.value, $sentry_exception_type: (l2 = d2[0]) === null || l2 === void 0 ? void 0 : l2.type, $sentry_tags: e7.tags };
        return n2 && i2 && (h2.$sentry_url = (o2 || "https://sentry.io/organizations/") + n2 + "/issues/?project=" + i2 + "&query=" + e7.event_id), t2.capture("$exception", h2), e7;
      });
    };
  });
  var li = function() {
    function e6(t2) {
      var n2 = this;
      r(this, e6), s(this, "_hasSeenPageView", false), s(this, "_updateScrollData", function() {
        var e7, t3, r2, i2;
        n2._pageViewData || (n2._pageViewData = n2._createPageViewData());
        var o2 = n2._pageViewData, s2 = n2._scrollY(), a2 = n2._scrollHeight(), u2 = n2._contentY(), l2 = n2._contentHeight();
        o2.lastScrollY = s2, o2.maxScrollY = Math.max(s2, (e7 = o2.maxScrollY) !== null && e7 !== void 0 ? e7 : 0), o2.maxScrollHeight = Math.max(a2, (t3 = o2.maxScrollHeight) !== null && t3 !== void 0 ? t3 : 0), o2.lastContentY = u2, o2.maxContentY = Math.max(u2, (r2 = o2.maxContentY) !== null && r2 !== void 0 ? r2 : 0), o2.maxContentHeight = Math.max(l2, (i2 = o2.maxContentHeight) !== null && i2 !== void 0 ? i2 : 0);
      }), this._instance = t2;
    }
    return o(e6, [{ key: "_createPageViewData", value: function() {
      var e7;
      return { pathname: (e7 = A == null ? void 0 : A.location.pathname) !== null && e7 !== void 0 ? e7 : "" };
    } }, { key: "doPageView", value: function() {
      var e7, n2;
      return this._hasSeenPageView ? (n2 = this._pageViewData, this._pageViewData = this._createPageViewData()) : (this._hasSeenPageView = true, n2 = void 0, this._pageViewData || (this._pageViewData = this._createPageViewData())), setTimeout(this._updateScrollData, 0), t({ $prev_pageview_pathname: (e7 = n2) === null || e7 === void 0 ? void 0 : e7.pathname }, this._calculatePrevPageScrollProperties(n2));
    } }, { key: "doPageLeave", value: function() {
      var e7 = this._pageViewData;
      return t({ $prev_pageview_pathname: e7 == null ? void 0 : e7.pathname }, this._calculatePrevPageScrollProperties(e7));
    } }, { key: "_calculatePrevPageScrollProperties", value: function(e7) {
      if (!e7 || e7.maxScrollHeight == null || e7.lastScrollY == null || e7.maxScrollY == null || e7.maxContentHeight == null || e7.lastContentY == null || e7.maxContentY == null)
        return {};
      var t2 = e7.maxScrollHeight, n2 = e7.lastScrollY, r2 = e7.maxScrollY, i2 = e7.maxContentHeight, o2 = e7.lastContentY, s2 = e7.maxContentY;
      return t2 = Math.ceil(t2), n2 = Math.ceil(n2), r2 = Math.ceil(r2), i2 = Math.ceil(i2), o2 = Math.ceil(o2), s2 = Math.ceil(s2), { $prev_pageview_last_scroll: n2, $prev_pageview_last_scroll_percentage: t2 <= 1 ? 1 : ci(n2 / t2, 0, 1), $prev_pageview_max_scroll: r2, $prev_pageview_max_scroll_percentage: t2 <= 1 ? 1 : ci(r2 / t2, 0, 1), $prev_pageview_last_content: o2, $prev_pageview_last_content_percentage: i2 <= 1 ? 1 : ci(o2 / i2, 0, 1), $prev_pageview_max_content: s2, $prev_pageview_max_content_percentage: i2 <= 1 ? 1 : ci(s2 / i2, 0, 1) };
    } }, { key: "startMeasuringScrollPosition", value: function() {
      A == null || A.addEventListener("scroll", this._updateScrollData, true), A == null || A.addEventListener("scrollend", this._updateScrollData, true), A == null || A.addEventListener("resize", this._updateScrollData);
    } }, { key: "stopMeasuringScrollPosition", value: function() {
      A == null || A.removeEventListener("scroll", this._updateScrollData), A == null || A.removeEventListener("scrollend", this._updateScrollData), A == null || A.removeEventListener("resize", this._updateScrollData);
    } }, { key: "_scrollElement", value: function() {
      if (!this._instance.config.scroll_root_selector)
        return A == null ? void 0 : A.document.documentElement;
      var e7, t2 = v(S(this._instance.config.scroll_root_selector) ? this._instance.config.scroll_root_selector : [this._instance.config.scroll_root_selector]);
      try {
        for (t2.s(); !(e7 = t2.n()).done; ) {
          var n2 = e7.value, r2 = A == null ? void 0 : A.document.querySelector(n2);
          if (r2)
            return r2;
        }
      } catch (e8) {
        t2.e(e8);
      } finally {
        t2.f();
      }
    } }, { key: "_scrollHeight", value: function() {
      var e7 = this._scrollElement();
      return e7 ? Math.max(0, e7.scrollHeight - e7.clientHeight) : 0;
    } }, { key: "_scrollY", value: function() {
      if (this._instance.config.scroll_root_selector) {
        var e7 = this._scrollElement();
        return e7 && e7.scrollTop || 0;
      }
      return A && (A.scrollY || A.pageYOffset || A.document.documentElement.scrollTop) || 0;
    } }, { key: "_contentHeight", value: function() {
      var e7 = this._scrollElement();
      return (e7 == null ? void 0 : e7.scrollHeight) || 0;
    } }, { key: "_contentY", value: function() {
      var e7 = this._scrollElement(), t2 = (e7 == null ? void 0 : e7.clientHeight) || 0;
      return this._scrollY() + t2;
    } }]), e6;
  }();
  function ci(e6, t2, n2) {
    return Math.max(t2, Math.min(e6, n2));
  }
  var di;
  var hi;
  var fi;
  var pi = { icontains: function(e6) {
    return !!A && A.location.href.toLowerCase().indexOf(e6.toLowerCase()) > -1;
  }, regex: function(e6) {
    return !!A && Ct(A.location.href, e6);
  }, exact: function(e6) {
    return (A == null ? void 0 : A.location.href) === e6;
  } };
  var gi = function() {
    function e6(t2) {
      r(this, e6), this.instance = t2;
    }
    return o(e6, [{ key: "getSurveys", value: function(e7) {
      var t2 = this, n2 = arguments.length > 1 && arguments[1] !== void 0 && arguments[1], r2 = this.instance.get_property(We);
      if (r2 && !n2)
        return e7(r2);
      this.instance._send_request(this.instance.requestRouter.endpointFor("api", "/api/surveys/?token=".concat(this.instance.config.token)), {}, { method: "GET" }, function(n3) {
        var r3, i2 = n3.surveys || [];
        return (r3 = t2.instance.persistence) === null || r3 === void 0 || r3.register(s({}, We, i2)), e7(i2);
      });
    } }, { key: "getActiveMatchingSurveys", value: function(e7) {
      var t2 = this, n2 = arguments.length > 1 && arguments[1] !== void 0 && arguments[1];
      this.getSurveys(function(n3) {
        var r2 = n3.filter(function(e8) {
          return !(!e8.start_date || e8.end_date);
        }).filter(function(e8) {
          var t3, n4, r3, i2;
          if (!e8.conditions)
            return true;
          var o2 = (t3 = e8.conditions) === null || t3 === void 0 || !t3.url || pi[(n4 = (r3 = e8.conditions) === null || r3 === void 0 ? void 0 : r3.urlMatchType) !== null && n4 !== void 0 ? n4 : "icontains"](e8.conditions.url), s2 = (i2 = e8.conditions) === null || i2 === void 0 || !i2.selector || (B == null ? void 0 : B.querySelector(e8.conditions.selector));
          return o2 && s2;
        }).filter(function(e8) {
          if (!e8.linked_flag_key && !e8.targeting_flag_key)
            return true;
          var n4 = !e8.linked_flag_key || t2.instance.featureFlags.isFeatureEnabled(e8.linked_flag_key), r3 = !e8.targeting_flag_key || t2.instance.featureFlags.isFeatureEnabled(e8.targeting_flag_key);
          return n4 && r3;
        });
        return e7(r2);
      }, n2);
    } }]), e6;
  }();
  var _i = function() {
    function e6() {
      var t2 = this;
      r(this, e6), s(this, "limits", {}), s(this, "checkForLimiting", function(e7) {
        var n2 = e7.responseText;
        if (n2 && n2.length)
          try {
            (JSON.parse(n2).quota_limited || []).forEach(function(e8) {
              G.info("[RateLimiter] ".concat(e8 || "events", " is quota limited.")), t2.limits[e8] = new Date().getTime() + 6e4;
            });
          } catch (e8) {
            return void G.warn('[RateLimiter] could not rate limit - continuing. Error: "'.concat(e8 == null ? void 0 : e8.message, '"'), { text: n2 });
          }
      });
    }
    return o(e6, [{ key: "isRateLimited", value: function(e7) {
      var t2 = this.limits[e7 || "events"] || false;
      return t2 !== false && new Date().getTime() < t2;
    } }]), e6;
  }();
  var vi = function() {
    return t({ initialPathName: (H == null ? void 0 : H.pathname) || "", referringDomain: Tn.referringDomain() }, Tn.campaignParams());
  };
  var mi = function() {
    function e6(t2, n2, i2) {
      var o2 = this;
      r(this, e6), s(this, "_onSessionIdCallback", function(e7) {
        var t3 = o2._getStoredProps();
        if (!t3 || t3.sessionId !== e7) {
          var n3 = { sessionId: e7, props: o2._sessionSourceParamGenerator() };
          o2._persistence.register(s({}, Ye, n3));
        }
      }), this._sessionIdManager = t2, this._persistence = n2, this._sessionSourceParamGenerator = i2 || vi, this._sessionIdManager.onSessionId(this._onSessionIdCallback);
    }
    return o(e6, [{ key: "_getStoredProps", value: function() {
      return this._persistence.props[Ye];
    } }, { key: "getSessionProps", value: function() {
      var e7, t2 = (e7 = this._getStoredProps()) === null || e7 === void 0 ? void 0 : e7.props;
      return t2 ? { $client_session_initial_referring_host: t2.referringDomain, $client_session_initial_pathname: t2.initialPathName, $client_session_initial_utm_source: t2.utm_source, $client_session_initial_utm_campaign: t2.utm_campaign, $client_session_initial_utm_medium: t2.utm_medium, $client_session_initial_utm_content: t2.utm_content, $client_session_initial_utm_term: t2.utm_term } : {};
    } }]), e6;
  }();
  var yi = ["ahrefsbot", "ahrefssiteaudit", "applebot", "baiduspider", "bingbot", "bingpreview", "bot.htm", "bot.php", "crawler", "duckduckbot", "facebookexternal", "facebookcatalog", "gptbot", "http://yandex.com/bots", "hubspot", "ia_archiver", "linkedinbot", "mj12bot", "msnbot", "nessus", "petalbot", "pinterest", "prerender", "rogerbot", "screaming frog", "semrushbot", "sitebulb", "slurp", "turnitin", "twitterbot", "vercelbot", "yahoo! slurp", "yandexbot", "adsbot-google", "apis-google", "duplexweb-google", "feedfetcher-google", "google favicon", "google web preview", "google-read-aloud", "googlebot", "googleweblight", "mediapartners-google", "storebot-google"];
  var bi = function(e6, t2) {
    if (!e6)
      return false;
    var n2 = e6.toLowerCase();
    return yi.concat(t2 || []).some(function(e7) {
      var t3 = e7.toLowerCase();
      return n2.includes ? n2.includes(t3) : n2.indexOf(t3) !== -1;
    });
  };
  !function(e6) {
    e6[e6.INIT_MODULE = 0] = "INIT_MODULE", e6[e6.INIT_SNIPPET = 1] = "INIT_SNIPPET";
  }(di || (di = {}));
  var wi = function() {
  };
  var ki = {};
  var Si = "posthog";
  var Fi = !Et && (V == null ? void 0 : V.indexOf("MSIE")) === -1 && (V == null ? void 0 : V.indexOf("Mozilla")) === -1;
  var Ri = function() {
    var e6, t2, n2;
    return { api_host: "https://app.posthog.com", api_method: "POST", api_transport: "XHR", ui_host: null, token: "", autocapture: true, rageclick: true, cross_subdomain_cookie: (t2 = B == null ? void 0 : B.location, n2 = t2 == null ? void 0 : t2.hostname, !!E(n2) && n2.split(".").slice(-2).join(".") !== "herokuapp.com"), persistence: "localStorage+cookie", persistence_name: "", cookie_name: "", loaded: wi, store_google: true, custom_campaign_params: [], custom_blocked_useragents: [], save_referrer: true, capture_pageview: true, capture_pageleave: true, debug: false, verbose: false, cookie_expiration: 365, upgrade: false, disable_session_recording: false, disable_persistence: false, disable_cookie: false, enable_recording_console_log: void 0, secure_cookie: (A == null || (e6 = A.location) === null || e6 === void 0 ? void 0 : e6.protocol) === "https:", ip: true, opt_out_capturing_by_default: false, opt_out_persistence_by_default: false, opt_out_useragent_filter: false, opt_out_capturing_persistence_type: "localStorage", opt_out_capturing_cookie_prefix: null, opt_in_site_apps: false, property_blacklist: [], property_denylist: [], respect_dnt: false, sanitize_properties: null, request_headers: {}, inapp_protocol: "//", inapp_link_new_window: false, request_batching: true, properties_string_max_length: 65535, session_recording: {}, mask_all_element_attributes: false, mask_all_text: false, advanced_disable_decide: false, advanced_disable_feature_flags: false, advanced_disable_feature_flags_on_first_load: false, advanced_disable_toolbar_metrics: false, on_request_error: function(e7) {
      var t3 = "Bad HTTP status: " + e7.statusCode + " " + e7.responseText;
      G.error(t3);
    }, get_device_id: function(e7) {
      return e7;
    }, _onCapture: wi, capture_performance: void 0, name: "posthog", bootstrap: {}, disable_compression: false, session_idle_timeout_seconds: 1800 };
  };
  var Pi = function(e6, t2, n2, r2) {
    var i2, o2 = n2 !== Si && fi ? n2 ? fi[n2] : void 0 : fi, s2 = { initComplete: false, syncCode: false }, a2 = function(e7) {
      return function(t3) {
        s2[e7] || (s2[e7] = true, s2.initComplete && s2.syncCode && (r2 == null || r2(t3)));
      };
    };
    if (o2 && hi === di.INIT_MODULE)
      i2 = o2;
    else {
      if (o2 && !S(o2))
        return void G.error("You have already initialized " + n2);
      i2 = new Ei();
    }
    if (i2._init(e6, t2, n2, a2("initComplete")), i2.toolbar.maybeLoadToolbar(), i2.sessionRecording = new sr(i2), i2.sessionRecording.startRecordingIfEnabled(), i2.config.disable_scroll_properties || i2.pageViewManager.startMeasuringScrollPosition(), i2.__autocapture = i2.config.autocapture, Ze._setIsAutocaptureEnabled(i2), Ze._isAutocaptureEnabled) {
      i2.__autocapture = i2.config.autocapture;
      Ze.enabledForProject(i2.config.token, 100, 100) ? Ze.isBrowserSupported() ? Ze.init(i2) : (i2.__autocapture = false, G.info("Disabling Automatic Event Collection because this browser is not supported")) : (i2.__autocapture = false, G.info("Not in active bucket: disabling Automatic Event Collection."));
    }
    return m.DEBUG = m.DEBUG || i2.config.debug, !x(o2) && S(o2) && (i2._execute_array.call(i2.people, o2.people), i2._execute_array(o2)), a2("syncCode")(i2), i2;
  };
  var xi = function() {
    function e6() {
      r(this, e6), s(this, "__forceAllowLocalhost", false);
    }
    return o(e6, [{ key: "_forceAllowLocalhost", get: function() {
      return this.__forceAllowLocalhost;
    }, set: function(e7) {
      G.error("WebPerformanceObserver is deprecated and has no impact on network capture. Use `_forceAllowLocalhostNetworkCapture` on `posthog.sessionRecording`"), this.__forceAllowLocalhost = e7;
    } }]), e6;
  }();
  var Ei = function() {
    function e6() {
      var t2 = this;
      r(this, e6), s(this, "webPerformance", new xi()), this.config = Ri(), this.compression = {}, this.decideEndpointWasHit = false, this.SentryIntegration = ui, this.segmentIntegration = function() {
        return function(e7) {
          Promise && Promise.resolve || G.warn("This browser does not have Promise support, and can not use the segment integration");
          var t3 = function(t4, n2) {
            t4.event.userId || t4.event.anonymousId === e7.get_distinct_id() || e7.reset(), t4.event.userId && t4.event.userId !== e7.get_distinct_id() && (e7.register({ distinct_id: t4.event.userId }), e7.reloadFeatureFlags());
            var r2 = e7._calculate_event_properties(n2, t4.event.properties);
            return t4.event.properties = Object.assign({}, r2, t4.event.properties), t4;
          };
          return { name: "PostHog JS", type: "enrichment", version: "1.0.0", isLoaded: function() {
            return true;
          }, load: function() {
            return Promise.resolve();
          }, track: function(e8) {
            return t3(e8, e8.event.event);
          }, page: function(e8) {
            return t3(e8, "$pageview");
          }, identify: function(e8) {
            return t3(e8, "$identify");
          }, screen: function(e8) {
            return t3(e8, "$screen");
          } };
        }(t2);
      }, this.__captureHooks = [], this.__request_queue = [], this.__loaded = false, this.__loaded_recorder_version = void 0, this.__autocapture = void 0, this.analyticsDefaultEndpoint = "/e/", this.elementsChainAsString = false, this.featureFlags = new it(this), this.toolbar = new cr(this), this.pageViewManager = new li(this), this.surveys = new gi(this), this.rateLimiter = new _i(), this.requestRouter = new ai(this), this.people = { set: function(e7, n2, r2) {
        var i2 = E(e7) ? s({}, e7, n2) : e7;
        t2.setPersonProperties(i2), r2 == null || r2({});
      }, set_once: function(e7, n2, r2) {
        var i2 = E(e7) ? s({}, e7, n2) : e7;
        t2.setPersonProperties(void 0, i2), r2 == null || r2({});
      } };
    }
    return o(e6, [{ key: "init", value: function(e7, t2, n2) {
      if (x(n2))
        G.critical("You must name your new library: init(token, config, name)");
      else if (x(e7) || function(e8) {
        return E(e8) && e8.trim().length === 0;
      }(e7))
        G.critical("You must provide a token to initialize posthog");
      else {
        if (n2 !== Si) {
          var r2 = Pi(e7, t2, n2, function(e8) {
            fi[n2] = e8, e8._loaded();
          });
          return fi[n2] = r2, r2;
        }
        G.critical("You must initialize the main posthog object right after you include the PostHog js snippet");
      }
    } }, { key: "_init", value: function(e7) {
      var n2, r2, i2, o2 = this, s2 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {}, a2 = arguments.length > 2 ? arguments[2] : void 0, u2 = arguments.length > 3 ? arguments[3] : void 0;
      this.__loaded = true, this.config = {}, this._triggered_notifs = [];
      var l2, c2 = { segmentRegister: false, syncCode: false }, d2 = function(e8) {
        return function() {
          c2[e8] || (c2[e8] = true, c2.segmentRegister && c2.syncCode && (u2 == null || u2(o2)));
        };
      };
      (s2.request_headers = s2.request_headers || s2.xhr_headers, this.set_config(X({}, Ri(), s2, { name: a2, token: e7 })), A != null && (n2 = A.rrweb) !== null && n2 !== void 0 && n2.record || A != null && A.rrwebRecord) && (this.__loaded_recorder_version = A == null || (l2 = A.rrweb) === null || l2 === void 0 ? void 0 : l2.version);
      if (this.persistence = new On(this.config), this.sessionPersistence = this.config.persistence === "sessionStorage" ? this.persistence : new On(t(t({}, this.config), {}, { persistence: "sessionStorage" })), this._requestQueue = new hr(this._handle_queued_event.bind(this)), this._retryQueue = new ii(this.config.on_request_error, this.rateLimiter), this.__captureHooks = [], this.__request_queue = [], this.sessionManager = new si(this.config, this.persistence), this.sessionPropsManager = new mi(this.sessionManager, this.persistence), this._gdpr_init(), s2.segment ? (this.config.get_device_id = function() {
        return s2.segment.user().anonymousId();
      }, s2.segment.user().id() && (this.register({ distinct_id: s2.segment.user().id() }), this.persistence.set_user_state("identified")), s2.segment.register(this.segmentIntegration()).then(d2("segmentRegister"))) : d2("segmentRegister")(), ((r2 = s2.bootstrap) === null || r2 === void 0 ? void 0 : r2.distinctID) !== void 0) {
        var h2, f2, p2 = this.config.get_device_id(dt()), g2 = (h2 = s2.bootstrap) !== null && h2 !== void 0 && h2.isIdentifiedID ? p2 : s2.bootstrap.distinctID;
        this.persistence.set_user_state((f2 = s2.bootstrap) !== null && f2 !== void 0 && f2.isIdentifiedID ? "identified" : "anonymous"), this.register({ distinct_id: s2.bootstrap.distinctID, $device_id: g2 });
      }
      if (this._hasBootstrappedFeatureFlags()) {
        var _2, v2, m2 = Object.keys(((_2 = s2.bootstrap) === null || _2 === void 0 ? void 0 : _2.featureFlags) || {}).filter(function(e8) {
          var t2, n3;
          return !((t2 = s2.bootstrap) === null || t2 === void 0 || (n3 = t2.featureFlags) === null || n3 === void 0 || !n3[e8]);
        }).reduce(function(e8, t2) {
          var n3, r3;
          return e8[t2] = ((n3 = s2.bootstrap) === null || n3 === void 0 || (r3 = n3.featureFlags) === null || r3 === void 0 ? void 0 : r3[t2]) || false, e8;
        }, {}), y2 = Object.keys(((v2 = s2.bootstrap) === null || v2 === void 0 ? void 0 : v2.featureFlagPayloads) || {}).filter(function(e8) {
          return m2[e8];
        }).reduce(function(e8, t2) {
          var n3, r3, i3, o3;
          (n3 = s2.bootstrap) !== null && n3 !== void 0 && (r3 = n3.featureFlagPayloads) !== null && r3 !== void 0 && r3[t2] && (e8[t2] = (i3 = s2.bootstrap) === null || i3 === void 0 || (o3 = i3.featureFlagPayloads) === null || o3 === void 0 ? void 0 : o3[t2]);
          return e8;
        }, {});
        this.featureFlags.receivedFeatureFlags({ featureFlags: m2, featureFlagPayloads: y2 });
      }
      if (!this.get_distinct_id()) {
        var b2 = this.config.get_device_id(dt());
        this.register_once({ distinct_id: b2, $device_id: b2 }, ""), this.persistence.set_user_state("anonymous");
      }
      A == null || (i2 = A.addEventListener) === null || i2 === void 0 || i2.call(A, "onpagehide" in self ? "pagehide" : "unload", this._handle_unload.bind(this)), d2("syncCode")();
    } }, { key: "_afterDecideResponse", value: function(e7) {
      var t2;
      if (this.compression = {}, e7.supportedCompression && !this.config.disable_compression) {
        var n2, r2 = {}, i2 = v(e7.supportedCompression);
        try {
          for (i2.s(); !(n2 = i2.n()).done; ) {
            r2[n2.value] = true;
          }
        } catch (e8) {
          i2.e(e8);
        } finally {
          i2.f();
        }
        this.compression = r2;
      }
      (t2 = e7.analytics) !== null && t2 !== void 0 && t2.endpoint && (this.analyticsDefaultEndpoint = e7.analytics.endpoint), e7.elementsChainAsString && (this.elementsChainAsString = e7.elementsChainAsString);
    } }, { key: "_loaded", value: function() {
      var e7 = this.config.advanced_disable_decide;
      e7 || this.featureFlags.setReloadingPaused(true);
      try {
        this.config.loaded(this);
      } catch (e8) {
        G.critical("`loaded` function failed", e8);
      }
      this._start_queue_if_opted_in(), this.config.capture_pageview && B && this.capture("$pageview", { title: B.title }, { send_instantly: true }), e7 || (new ar(this).call(), this.featureFlags.resetRequestQueue());
    } }, { key: "_start_queue_if_opted_in", value: function() {
      var e7;
      this.has_opted_out_capturing() || this.config.request_batching && ((e7 = this._requestQueue) === null || e7 === void 0 || e7.poll());
    } }, { key: "_dom_loaded", value: function() {
      var e7 = this;
      this.has_opted_out_capturing() || J(this.__request_queue, function(t2) {
        e7._send_request.apply(e7, p(t2));
      }), this.__request_queue = [], this._start_queue_if_opted_in();
    } }, { key: "_handle_unload", value: function() {
      var e7, t2;
      this.config.request_batching ? (this.config.capture_pageview && this.config.capture_pageleave && this.capture("$pageleave"), (e7 = this._requestQueue) === null || e7 === void 0 || e7.unload(), (t2 = this._retryQueue) === null || t2 === void 0 || t2.unload()) : this.config.capture_pageview && this.config.capture_pageleave && this.capture("$pageleave", null, { transport: "sendBeacon" });
    } }, { key: "_handle_queued_event", value: function(e7, t2, n2) {
      var r2 = JSON.stringify(t2);
      this.__compress_and_send_json_request(e7, r2, n2 || ki, wi);
    } }, { key: "__compress_and_send_json_request", value: function(e7, n2, r2, i2) {
      var o2 = function(e8, n3, r3) {
        return e8 === Cr.GZipJS ? [Kr(Xr(n3), { mtime: 0 }), t(t({}, r3), {}, { blob: true, urlQueryArgs: { compression: Cr.GZipJS } })] : [{ data: se(n3) }, r3];
      }(this.compression[Cr.GZipJS] ? Cr.GZipJS : Cr.Base64, n2, r2), s2 = f(o2, 2), a2 = s2[0], u2 = s2[1];
      this._send_request(e7, a2, u2, i2);
    } }, { key: "_send_request", value: function(e7, n2, r2, i2) {
      if (this.__loaded && this._retryQueue && !this.rateLimiter.isRateLimited(r2._batchKey))
        if (Fi)
          this.__request_queue.push([e7, n2, r2, i2]);
        else {
          var o2 = { method: this.config.api_method, transport: this.config.api_transport, verbose: this.config.verbose };
          r2 = X(o2, r2 || {}), Et || (r2.method = "GET");
          var s2 = A && "sendBeacon" in A.navigator && r2.transport === "sendBeacon";
          if (e7 = Zr(e7, r2.urlQueryArgs || {}, { ip: this.config.ip }), s2)
            try {
              A == null || A.navigator.sendBeacon(e7, ei(n2, t(t({}, r2), {}, { sendBeacon: true })));
            } catch (e8) {
            }
          else if (Et || !B)
            try {
              ti({ url: e7, data: n2, headers: this.config.request_headers, options: r2, callback: i2, retriesPerformedSoFar: 0, retryQueue: this._retryQueue, onError: this.config.on_request_error, onResponse: this.rateLimiter.checkForLimiting });
            } catch (e8) {
              G.error(e8);
            }
          else {
            var a2, u2 = B.createElement("script");
            u2.type = "text/javascript", u2.async = true, u2.defer = true, u2.src = e7;
            var l2 = B.getElementsByTagName("script")[0];
            (a2 = l2.parentNode) === null || a2 === void 0 || a2.insertBefore(u2, l2);
          }
        }
    } }, { key: "_execute_array", value: function(e7) {
      var t2, n2 = this, r2 = [], i2 = [], o2 = [];
      J(e7, function(e8) {
        e8 && (t2 = e8[0], S(t2) ? o2.push(e8) : R(e8) ? e8.call(n2) : S(e8) && t2 === "alias" ? r2.push(e8) : S(e8) && t2.indexOf("capture") !== -1 && R(n2[t2]) ? o2.push(e8) : i2.push(e8));
      });
      var s2 = function(e8, t3) {
        J(e8, function(e9) {
          if (S(e9[0])) {
            var n3 = t3;
            K(e9, function(e10) {
              n3 = n3[e10[0]].apply(n3, e10.slice(1));
            });
          } else
            this[e9[0]].apply(this, e9.slice(1));
        }, t3);
      };
      s2(r2, this), s2(i2, this), s2(o2, this);
    } }, { key: "_hasBootstrappedFeatureFlags", value: function() {
      var e7, t2;
      return ((e7 = this.config.bootstrap) === null || e7 === void 0 ? void 0 : e7.featureFlags) && Object.keys((t2 = this.config.bootstrap) === null || t2 === void 0 ? void 0 : t2.featureFlags).length > 0 || false;
    } }, { key: "push", value: function(e7) {
      this._execute_array([e7]);
    } }, { key: "capture", value: function(e7, n2) {
      var r2, i2 = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : ki;
      if (!this.__loaded || !this.sessionPersistence || !this._requestQueue)
        return G.uninitializedWarning("posthog.capture");
      if (!Zn(this)) {
        var o2 = (i2 = i2 || ki).transport;
        if (o2 && (i2.transport = o2), !x(e7) && E(e7)) {
          if (!V || this.config.opt_out_useragent_filter || !bi(V, this.config.custom_blocked_useragents)) {
            this.sessionPersistence.update_search_keyword(), this.config.store_google && this.sessionPersistence.update_campaign_params(), this.config.save_referrer && this.sessionPersistence.update_referrer_info();
            var s2 = { uuid: dt(), event: e7, properties: this._calculate_event_properties(e7, n2 || {}) };
            e7 === "$identify" && (s2.$set = i2.$set, s2.$set_once = i2.$set_once), (s2 = oe(s2, i2._noTruncate ? null : this.config.properties_string_max_length)).timestamp = i2.timestamp || new Date(), x(i2.timestamp) || (s2.properties.$event_time_override_provided = true, s2.properties.$event_time_override_system_time = new Date());
            var a2 = t(t({}, s2.properties.$set), s2.$set);
            (function(e8) {
              if (P(e8)) {
                for (var t2 in e8)
                  if (w.call(e8, t2))
                    return false;
                return true;
              }
              return false;
            })(a2) || this.setPersonPropertiesForFlags(a2), G.info("send", s2);
            var u2 = JSON.stringify(s2), l2 = (r2 = i2._url) !== null && r2 !== void 0 ? r2 : this.requestRouter.endpointFor("api", this.analyticsDefaultEndpoint), c2 = i2 !== ki;
            return !this.config.request_batching || c2 && !i2._batchKey || i2.send_instantly ? this.__compress_and_send_json_request(l2, u2, i2) : this._requestQueue.enqueue(l2, s2, i2), this._invokeCaptureHooks(e7, s2), s2;
          }
        } else
          G.error("No event name provided to posthog.capture");
      }
    } }, { key: "_addCaptureHook", value: function(e7) {
      this.__captureHooks.push(e7);
    } }, { key: "_invokeCaptureHooks", value: function(e7, t2) {
      this.config._onCapture(e7, t2), K(this.__captureHooks, function(t3) {
        return t3(e7);
      });
    } }, { key: "_calculate_event_properties", value: function(e7, n2) {
      if (!this.persistence || !this.sessionPersistence)
        return n2;
      var r2 = this.persistence.remove_event_timer(e7), i2 = t({}, n2);
      if (i2.token = this.config.token, e7 === "$snapshot") {
        var o2 = t(t({}, this.persistence.properties()), this.sessionPersistence.properties());
        return i2.distinct_id = o2.distinct_id, i2;
      }
      var s2 = Tn.properties();
      if (this.sessionManager) {
        var a2 = this.sessionManager.checkAndGetSessionAndWindowId(), u2 = a2.sessionId, l2 = a2.windowId;
        i2.$session_id = u2, i2.$window_id = l2;
      }
      if (this.sessionPropsManager && this.config.__preview_send_client_session_params && (e7 === "$pageview" || e7 === "$pageleave" || e7 === "$autocapture")) {
        var c2 = this.sessionPropsManager.getSessionProps();
        i2 = X(i2, c2);
      }
      if (!this.config.disable_scroll_properties) {
        var d2 = {};
        e7 === "$pageview" ? d2 = this.pageViewManager.doPageView() : e7 === "$pageleave" && (d2 = this.pageViewManager.doPageLeave()), i2 = X(i2, d2);
      }
      if (e7 === "$pageview" && B && (i2.title = B.title), e7 === "$performance_event") {
        var h2 = this.persistence.properties();
        return i2.distinct_id = h2.distinct_id, i2.$current_url = s2.$current_url, i2;
      }
      if (!x(r2)) {
        var f2 = new Date().getTime() - r2;
        i2.$duration = parseFloat((f2 / 1e3).toFixed(3));
      }
      (V && this.config.opt_out_useragent_filter && (i2.$browser_type = bi(V, this.config.custom_blocked_useragents) ? "bot" : "browser"), i2 = X({}, Tn.properties(), this.persistence.properties(), this.sessionPersistence.properties(), i2), S(this.config.property_denylist) && S(this.config.property_blacklist)) ? K([].concat(p(this.config.property_blacklist), p(this.config.property_denylist)), function(e8) {
        delete i2[e8];
      }) : G.error("Invalid value for property_denylist config: " + this.config.property_denylist + " or property_blacklist config: " + this.config.property_blacklist);
      var g2 = this.config.sanitize_properties;
      return g2 && (i2 = g2(i2, e7)), i2;
    } }, { key: "register", value: function(e7, t2) {
      var n2;
      (n2 = this.persistence) === null || n2 === void 0 || n2.register(e7, t2);
    } }, { key: "register_once", value: function(e7, t2, n2) {
      var r2;
      (r2 = this.persistence) === null || r2 === void 0 || r2.register_once(e7, t2, n2);
    } }, { key: "register_for_session", value: function(e7) {
      var t2;
      (t2 = this.sessionPersistence) === null || t2 === void 0 || t2.register(e7);
    } }, { key: "unregister", value: function(e7) {
      var t2;
      (t2 = this.persistence) === null || t2 === void 0 || t2.unregister(e7);
    } }, { key: "unregister_for_session", value: function(e7) {
      var t2;
      (t2 = this.sessionPersistence) === null || t2 === void 0 || t2.unregister(e7);
    } }, { key: "_register_single", value: function(e7, t2) {
      this.register(s({}, e7, t2));
    } }, { key: "getFeatureFlag", value: function(e7, t2) {
      return this.featureFlags.getFeatureFlag(e7, t2);
    } }, { key: "getFeatureFlagPayload", value: function(e7) {
      var t2 = this.featureFlags.getFeatureFlagPayload(e7);
      try {
        return JSON.parse(t2);
      } catch (e8) {
        return t2;
      }
    } }, { key: "isFeatureEnabled", value: function(e7, t2) {
      return this.featureFlags.isFeatureEnabled(e7, t2);
    } }, { key: "reloadFeatureFlags", value: function() {
      this.featureFlags.reloadFeatureFlags();
    } }, { key: "updateEarlyAccessFeatureEnrollment", value: function(e7, t2) {
      this.featureFlags.updateEarlyAccessFeatureEnrollment(e7, t2);
    } }, { key: "getEarlyAccessFeatures", value: function(e7) {
      var t2 = arguments.length > 1 && arguments[1] !== void 0 && arguments[1];
      return this.featureFlags.getEarlyAccessFeatures(e7, t2);
    } }, { key: "onFeatureFlags", value: function(e7) {
      return this.featureFlags.onFeatureFlags(e7);
    } }, { key: "onSessionId", value: function(e7) {
      var t2, n2;
      return (t2 = (n2 = this.sessionManager) === null || n2 === void 0 ? void 0 : n2.onSessionId(e7)) !== null && t2 !== void 0 ? t2 : function() {
      };
    } }, { key: "getSurveys", value: function(e7) {
      var t2 = arguments.length > 1 && arguments[1] !== void 0 && arguments[1];
      this.surveys.getSurveys(e7, t2);
    } }, { key: "getActiveMatchingSurveys", value: function(e7) {
      var t2 = arguments.length > 1 && arguments[1] !== void 0 && arguments[1];
      this.surveys.getActiveMatchingSurveys(e7, t2);
    } }, { key: "identify", value: function(e7, t2, n2) {
      if (!this.__loaded || !this.persistence)
        return G.uninitializedWarning("posthog.identify");
      if (T(e7) && (e7 = e7.toString(), G.warn("The first argument to posthog.identify was a number, but it should be a string. It has been converted to a string.")), e7)
        if (["distinct_id", "distinctid"].includes(e7.toLowerCase()))
          G.critical('The string "'.concat(e7, '" was set in posthog.identify which indicates an error. This ID should be unique to the user and not a hardcoded string.'));
        else {
          var r2 = this.get_distinct_id();
          if (this.register({ $user_id: e7 }), !this.get_property("$device_id")) {
            var i2 = r2;
            this.register_once({ $had_persisted_distinct_id: true, $device_id: i2 }, "");
          }
          e7 !== r2 && e7 !== this.get_property(Te) && (this.unregister(Te), this.register({ distinct_id: e7 }));
          var o2 = this.persistence.get_user_state() === "anonymous";
          e7 !== r2 && o2 ? (this.persistence.set_user_state("identified"), this.setPersonPropertiesForFlags(t2 || {}, false), this.capture("$identify", { distinct_id: e7, $anon_distinct_id: r2 }, { $set: t2 || {}, $set_once: n2 || {} }), this.featureFlags.setAnonymousDistinctId(r2)) : (t2 || n2) && this.setPersonProperties(t2, n2), e7 !== r2 && (this.reloadFeatureFlags(), this.unregister(ze));
        }
      else
        G.error("Unique user id has not been set in posthog.identify");
    } }, { key: "setPersonProperties", value: function(e7, t2) {
      (e7 || t2) && (this.setPersonPropertiesForFlags(e7 || {}), this.capture("$set", { $set: e7 || {}, $set_once: t2 || {} }));
    } }, { key: "group", value: function(e7, n2, r2) {
      if (e7 && n2) {
        var i2 = this.getGroups();
        i2[e7] !== n2 && this.resetGroupPropertiesForFlags(e7), this.register({ $groups: t(t({}, i2), {}, s({}, e7, n2)) }), r2 && (this.capture("$groupidentify", { $group_type: e7, $group_key: n2, $group_set: r2 }), this.setGroupPropertiesForFlags(s({}, e7, r2))), i2[e7] === n2 || r2 || this.reloadFeatureFlags();
      } else
        G.error("posthog.group requires a group type and group key");
    } }, { key: "resetGroups", value: function() {
      this.register({ $groups: {} }), this.resetGroupPropertiesForFlags(), this.reloadFeatureFlags();
    } }, { key: "setPersonPropertiesForFlags", value: function(e7) {
      var t2 = !(arguments.length > 1 && arguments[1] !== void 0) || arguments[1];
      this.featureFlags.setPersonPropertiesForFlags(e7, t2);
    } }, { key: "resetPersonPropertiesForFlags", value: function() {
      this.featureFlags.resetPersonPropertiesForFlags();
    } }, { key: "setGroupPropertiesForFlags", value: function(e7) {
      var t2 = !(arguments.length > 1 && arguments[1] !== void 0) || arguments[1];
      this.featureFlags.setGroupPropertiesForFlags(e7, t2);
    } }, { key: "resetGroupPropertiesForFlags", value: function(e7) {
      this.featureFlags.resetGroupPropertiesForFlags(e7);
    } }, { key: "reset", value: function(e7) {
      var t2, n2, r2, i2;
      if (!this.__loaded)
        return G.uninitializedWarning("posthog.reset");
      var o2 = this.get_property("$device_id");
      (t2 = this.persistence) === null || t2 === void 0 || t2.clear(), (n2 = this.sessionPersistence) === null || n2 === void 0 || n2.clear(), (r2 = this.persistence) === null || r2 === void 0 || r2.set_user_state("anonymous"), (i2 = this.sessionManager) === null || i2 === void 0 || i2.resetSessionId();
      var s2 = this.config.get_device_id(dt());
      this.register_once({ distinct_id: s2, $device_id: e7 ? s2 : o2 }, "");
    } }, { key: "get_distinct_id", value: function() {
      return this.get_property("distinct_id");
    } }, { key: "getGroups", value: function() {
      return this.get_property("$groups") || {};
    } }, { key: "get_session_id", value: function() {
      var e7, t2;
      return (e7 = (t2 = this.sessionManager) === null || t2 === void 0 ? void 0 : t2.checkAndGetSessionAndWindowId(true).sessionId) !== null && e7 !== void 0 ? e7 : "";
    } }, { key: "get_session_replay_url", value: function(e7) {
      if (!this.sessionManager)
        return "";
      var t2 = this.sessionManager.checkAndGetSessionAndWindowId(true), n2 = t2.sessionId, r2 = t2.sessionStartTimestamp, i2 = this.requestRouter.endpointFor("ui", "/replay/" + n2);
      if (e7 != null && e7.withTimestamp && r2) {
        var o2, s2 = (o2 = e7.timestampLookBack) !== null && o2 !== void 0 ? o2 : 10;
        if (!r2)
          return i2;
        var a2 = Math.max(Math.floor((new Date().getTime() - r2) / 1e3) - s2, 0);
        i2 += "?t=".concat(a2);
      }
      return i2;
    } }, { key: "alias", value: function(e7, t2) {
      return e7 === this.get_property(Ce) ? (G.critical("Attempting to create alias for existing People user - aborting."), -2) : (x(t2) && (t2 = this.get_distinct_id()), e7 !== t2 ? (this._register_single(Te, e7), this.capture("$create_alias", { alias: e7, distinct_id: t2 })) : (G.warn("alias matches current distinct_id - skipping api call."), this.identify(e7), -1));
    } }, { key: "set_config", value: function(e7) {
      var n2, r2 = t({}, this.config);
      if (P(e7) && (X(this.config, e7), this.config.persistence_name || (this.config.persistence_name = this.config.cookie_name), this.config.disable_persistence || (this.config.disable_persistence = this.config.disable_cookie), (n2 = this.persistence) === null || n2 === void 0 || n2.update_config(this.config, r2), this.sessionPersistence = this.config.persistence === "sessionStorage" ? this.persistence : new On(t(t({}, this.config), {}, { persistence: "sessionStorage" })), bt.is_supported() && bt.get("ph_debug") === "true" && (this.config.debug = true), this.config.debug && (m.DEBUG = true), this.sessionRecording && !x(e7.disable_session_recording))) {
        var i2 = r2.disable_session_recording !== e7.disable_session_recording, o2 = !Zn(this) && !e7.disable_session_recording && !this.sessionRecording.started;
        (i2 || o2) && (e7.disable_session_recording ? this.sessionRecording.stopRecording() : this.sessionRecording.startRecordingIfEnabled());
      }
    } }, { key: "startSessionRecording", value: function() {
      this.set_config({ disable_session_recording: false });
    } }, { key: "stopSessionRecording", value: function() {
      this.set_config({ disable_session_recording: true });
    } }, { key: "sessionRecordingStarted", value: function() {
      var e7;
      return !((e7 = this.sessionRecording) === null || e7 === void 0 || !e7.started);
    } }, { key: "loadToolbar", value: function(e7) {
      return this.toolbar.loadToolbar(e7);
    } }, { key: "get_property", value: function(e7) {
      var t2;
      return (t2 = this.persistence) === null || t2 === void 0 ? void 0 : t2.props[e7];
    } }, { key: "getSessionProperty", value: function(e7) {
      var t2;
      return (t2 = this.sessionPersistence) === null || t2 === void 0 ? void 0 : t2.props[e7];
    } }, { key: "toString", value: function() {
      var e7, t2 = (e7 = this.config.name) !== null && e7 !== void 0 ? e7 : Si;
      return t2 !== Si && (t2 = Si + "." + t2), t2;
    } }, { key: "_gdpr_init", value: function() {
      this.config.opt_out_capturing_persistence_type === "localStorage" && bt.is_supported() && (!this.has_opted_in_capturing() && this.has_opted_in_capturing({ persistence_type: "cookie" }) && this.opt_in_capturing({ enable_persistence: false }), !this.has_opted_out_capturing() && this.has_opted_out_capturing({ persistence_type: "cookie" }) && this.opt_out_capturing({ clear_persistence: false }), this.clear_opt_in_out_capturing({ persistence_type: "cookie", enable_persistence: false })), this.has_opted_out_capturing() ? this._gdpr_update_persistence({ clear_persistence: true }) : this.has_opted_in_capturing() || !this.config.opt_out_capturing_by_default && !mt.get("ph_optout") || (mt.remove("ph_optout"), this.opt_out_capturing({ clear_persistence: this.config.opt_out_persistence_by_default }));
    } }, { key: "_gdpr_update_persistence", value: function(e7) {
      var t2, n2, r2, i2, o2;
      if (e7 && e7.clear_persistence)
        r2 = true;
      else {
        if (!e7 || !e7.enable_persistence)
          return;
        r2 = false;
      }
      this.config.disable_persistence || ((t2 = this.persistence) === null || t2 === void 0 ? void 0 : t2.disabled) === r2 || ((i2 = this.persistence) === null || i2 === void 0 || i2.set_disabled(r2));
      this.config.disable_persistence || ((n2 = this.sessionPersistence) === null || n2 === void 0 ? void 0 : n2.disabled) === r2 || ((o2 = this.sessionPersistence) === null || o2 === void 0 || o2.set_disabled(r2));
    } }, { key: "_gdpr_call_func", value: function(e7, t2) {
      return t2 = X({ capture: this.capture.bind(this), persistence_type: this.config.opt_out_capturing_persistence_type, cookie_prefix: this.config.opt_out_capturing_cookie_prefix, cookie_expiration: this.config.cookie_expiration, cross_subdomain_cookie: this.config.cross_subdomain_cookie, secure_cookie: this.config.secure_cookie }, t2 || {}), bt.is_supported() || t2.persistence_type !== "localStorage" || (t2.persistence_type = "cookie"), e7(this.config.token, { capture: t2.capture, captureEventName: t2.capture_event_name, captureProperties: t2.capture_properties, persistenceType: t2.persistence_type, persistencePrefix: t2.cookie_prefix, cookieExpiration: t2.cookie_expiration, crossSubdomainCookie: t2.cross_subdomain_cookie, secureCookie: t2.secure_cookie });
    } }, { key: "opt_in_capturing", value: function(e7) {
      e7 = X({ enable_persistence: true }, e7 || {}), this._gdpr_call_func(Vn, e7), this._gdpr_update_persistence(e7);
    } }, { key: "opt_out_capturing", value: function(e7) {
      var t2 = X({ clear_persistence: true }, e7 || {});
      this._gdpr_call_func(Wn, t2), this._gdpr_update_persistence(t2);
    } }, { key: "has_opted_in_capturing", value: function(e7) {
      return this._gdpr_call_func(zn, e7);
    } }, { key: "has_opted_out_capturing", value: function(e7) {
      return this._gdpr_call_func(Gn, e7);
    } }, { key: "clear_opt_in_out_capturing", value: function(e7) {
      var t2 = X({ enable_persistence: true }, e7 != null ? e7 : {});
      this._gdpr_call_func(Qn, t2), this._gdpr_update_persistence(t2);
    } }, { key: "debug", value: function(e7) {
      e7 === false ? (A == null || A.console.log("You've disabled debug mode."), localStorage && localStorage.removeItem("ph_debug"), this.set_config({ debug: false })) : (A == null || A.console.log("You're now in debug mode. All calls to PostHog will be logged in your console.\nYou can disable this with `posthog.debug(false)`."), localStorage && localStorage.setItem("ph_debug", "true"), this.set_config({ debug: true }));
    } }]), e6;
  }();
  !function(e6, t2) {
    for (var n2 = 0; n2 < t2.length; n2++)
      e6.prototype[t2[n2]] = re(e6.prototype[t2[n2]]);
  }(Ei, ["identify"]);
  var Ii;
  var Ci;
  var Ti = {};
  var $i = function() {
    fi.init = function(e6, t2, n2) {
      if (n2)
        return fi[n2] || (fi[n2] = Ti[n2] = Pi(e6 || "", t2 || {}, n2, function(e7) {
          fi[n2] = Ti[n2] = e7, e7._loaded();
        })), fi[n2];
      var r2 = fi;
      return Ti[Si] ? r2 = Ti[Si] : e6 && (r2 = Pi(e6, t2 || {}, Si, function(e7) {
        Ti[Si] = e7, e7._loaded();
      }), Ti[Si] = r2), fi = r2, hi === di.INIT_SNIPPET && (W[Si] = fi), K(Ti, function(e7, t3) {
        t3 !== Si && (fi[t3] = e7);
      }), r2;
    };
  };
  !function(e6) {
    e6.Popover = "popover", e6.API = "api", e6.Widget = "widget";
  }(Ii || (Ii = {})), function(e6) {
    e6.Open = "open", e6.MultipleChoice = "multiple_choice", e6.SingleChoice = "single_choice", e6.Rating = "rating", e6.Link = "link";
  }(Ci || (Ci = {}));
  var Oi = (hi = di.INIT_MODULE, fi = new Ei(), $i(), fi.init(), function() {
    function e6() {
      e6.done || (e6.done = true, Fi = false, K(Ti, function(e7) {
        e7._dom_loaded();
      }));
    }
    B != null && B.addEventListener && (B.readyState === "complete" ? e6() : B.addEventListener("DOMContentLoaded", e6, false)), A && ue(A, "load", e6, true);
  }(), fi);

  // ../deps/phoenix_html/priv/static/phoenix_html.js
  (function() {
    var PolyfillEvent = eventConstructor();
    function eventConstructor() {
      if (typeof window.CustomEvent === "function")
        return window.CustomEvent;
      function CustomEvent2(event, params) {
        params = params || { bubbles: false, cancelable: false, detail: void 0 };
        var evt = document.createEvent("CustomEvent");
        evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);
        return evt;
      }
      CustomEvent2.prototype = window.Event.prototype;
      return CustomEvent2;
    }
    function buildHiddenInput(name, value) {
      var input = document.createElement("input");
      input.type = "hidden";
      input.name = name;
      input.value = value;
      return input;
    }
    function handleClick(element, targetModifierKey) {
      var to = element.getAttribute("data-to"), method = buildHiddenInput("_method", element.getAttribute("data-method")), csrf = buildHiddenInput("_csrf_token", element.getAttribute("data-csrf")), form = document.createElement("form"), submit = document.createElement("input"), target = element.getAttribute("target");
      form.method = element.getAttribute("data-method") === "get" ? "get" : "post";
      form.action = to;
      form.style.display = "none";
      if (target)
        form.target = target;
      else if (targetModifierKey)
        form.target = "_blank";
      form.appendChild(csrf);
      form.appendChild(method);
      document.body.appendChild(form);
      submit.type = "submit";
      form.appendChild(submit);
      submit.click();
    }
    window.addEventListener("click", function(e6) {
      var element = e6.target;
      if (e6.defaultPrevented)
        return;
      while (element && element.getAttribute) {
        var phoenixLinkEvent = new PolyfillEvent("phoenix.link.click", {
          "bubbles": true,
          "cancelable": true
        });
        if (!element.dispatchEvent(phoenixLinkEvent)) {
          e6.preventDefault();
          e6.stopImmediatePropagation();
          return false;
        }
        if (element.getAttribute("data-method")) {
          handleClick(element, e6.metaKey || e6.shiftKey);
          e6.preventDefault();
          return false;
        } else {
          element = element.parentNode;
        }
      }
    }, false);
    window.addEventListener("phoenix.link.click", function(e6) {
      var message = e6.target.getAttribute("data-confirm");
      if (message && !window.confirm(message)) {
        e6.preventDefault();
      }
    }, false);
  })();

  // ../deps/phoenix/priv/static/phoenix.mjs
  var closure = (value) => {
    if (typeof value === "function") {
      return value;
    } else {
      let closure22 = function() {
        return value;
      };
      return closure22;
    }
  };
  var globalSelf = typeof self !== "undefined" ? self : null;
  var phxWindow = typeof window !== "undefined" ? window : null;
  var global = globalSelf || phxWindow || global;
  var DEFAULT_VSN = "2.0.0";
  var SOCKET_STATES = { connecting: 0, open: 1, closing: 2, closed: 3 };
  var DEFAULT_TIMEOUT = 1e4;
  var WS_CLOSE_NORMAL = 1e3;
  var CHANNEL_STATES = {
    closed: "closed",
    errored: "errored",
    joined: "joined",
    joining: "joining",
    leaving: "leaving"
  };
  var CHANNEL_EVENTS = {
    close: "phx_close",
    error: "phx_error",
    join: "phx_join",
    reply: "phx_reply",
    leave: "phx_leave"
  };
  var TRANSPORTS = {
    longpoll: "longpoll",
    websocket: "websocket"
  };
  var XHR_STATES = {
    complete: 4
  };
  var Push = class {
    constructor(channel, event, payload, timeout) {
      this.channel = channel;
      this.event = event;
      this.payload = payload || function() {
        return {};
      };
      this.receivedResp = null;
      this.timeout = timeout;
      this.timeoutTimer = null;
      this.recHooks = [];
      this.sent = false;
    }
    resend(timeout) {
      this.timeout = timeout;
      this.reset();
      this.send();
    }
    send() {
      if (this.hasReceived("timeout")) {
        return;
      }
      this.startTimeout();
      this.sent = true;
      this.channel.socket.push({
        topic: this.channel.topic,
        event: this.event,
        payload: this.payload(),
        ref: this.ref,
        join_ref: this.channel.joinRef()
      });
    }
    receive(status, callback) {
      if (this.hasReceived(status)) {
        callback(this.receivedResp.response);
      }
      this.recHooks.push({ status, callback });
      return this;
    }
    reset() {
      this.cancelRefEvent();
      this.ref = null;
      this.refEvent = null;
      this.receivedResp = null;
      this.sent = false;
    }
    matchReceive({ status, response, _ref }) {
      this.recHooks.filter((h2) => h2.status === status).forEach((h2) => h2.callback(response));
    }
    cancelRefEvent() {
      if (!this.refEvent) {
        return;
      }
      this.channel.off(this.refEvent);
    }
    cancelTimeout() {
      clearTimeout(this.timeoutTimer);
      this.timeoutTimer = null;
    }
    startTimeout() {
      if (this.timeoutTimer) {
        this.cancelTimeout();
      }
      this.ref = this.channel.socket.makeRef();
      this.refEvent = this.channel.replyEventName(this.ref);
      this.channel.on(this.refEvent, (payload) => {
        this.cancelRefEvent();
        this.cancelTimeout();
        this.receivedResp = payload;
        this.matchReceive(payload);
      });
      this.timeoutTimer = setTimeout(() => {
        this.trigger("timeout", {});
      }, this.timeout);
    }
    hasReceived(status) {
      return this.receivedResp && this.receivedResp.status === status;
    }
    trigger(status, response) {
      this.channel.trigger(this.refEvent, { status, response });
    }
  };
  var Timer = class {
    constructor(callback, timerCalc) {
      this.callback = callback;
      this.timerCalc = timerCalc;
      this.timer = null;
      this.tries = 0;
    }
    reset() {
      this.tries = 0;
      clearTimeout(this.timer);
    }
    scheduleTimeout() {
      clearTimeout(this.timer);
      this.timer = setTimeout(() => {
        this.tries = this.tries + 1;
        this.callback();
      }, this.timerCalc(this.tries + 1));
    }
  };
  var Channel = class {
    constructor(topic, params, socket) {
      this.state = CHANNEL_STATES.closed;
      this.topic = topic;
      this.params = closure(params || {});
      this.socket = socket;
      this.bindings = [];
      this.bindingRef = 0;
      this.timeout = this.socket.timeout;
      this.joinedOnce = false;
      this.joinPush = new Push(this, CHANNEL_EVENTS.join, this.params, this.timeout);
      this.pushBuffer = [];
      this.stateChangeRefs = [];
      this.rejoinTimer = new Timer(() => {
        if (this.socket.isConnected()) {
          this.rejoin();
        }
      }, this.socket.rejoinAfterMs);
      this.stateChangeRefs.push(this.socket.onError(() => this.rejoinTimer.reset()));
      this.stateChangeRefs.push(this.socket.onOpen(() => {
        this.rejoinTimer.reset();
        if (this.isErrored()) {
          this.rejoin();
        }
      }));
      this.joinPush.receive("ok", () => {
        this.state = CHANNEL_STATES.joined;
        this.rejoinTimer.reset();
        this.pushBuffer.forEach((pushEvent) => pushEvent.send());
        this.pushBuffer = [];
      });
      this.joinPush.receive("error", () => {
        this.state = CHANNEL_STATES.errored;
        if (this.socket.isConnected()) {
          this.rejoinTimer.scheduleTimeout();
        }
      });
      this.onClose(() => {
        this.rejoinTimer.reset();
        if (this.socket.hasLogger())
          this.socket.log("channel", `close ${this.topic} ${this.joinRef()}`);
        this.state = CHANNEL_STATES.closed;
        this.socket.remove(this);
      });
      this.onError((reason) => {
        if (this.socket.hasLogger())
          this.socket.log("channel", `error ${this.topic}`, reason);
        if (this.isJoining()) {
          this.joinPush.reset();
        }
        this.state = CHANNEL_STATES.errored;
        if (this.socket.isConnected()) {
          this.rejoinTimer.scheduleTimeout();
        }
      });
      this.joinPush.receive("timeout", () => {
        if (this.socket.hasLogger())
          this.socket.log("channel", `timeout ${this.topic} (${this.joinRef()})`, this.joinPush.timeout);
        let leavePush = new Push(this, CHANNEL_EVENTS.leave, closure({}), this.timeout);
        leavePush.send();
        this.state = CHANNEL_STATES.errored;
        this.joinPush.reset();
        if (this.socket.isConnected()) {
          this.rejoinTimer.scheduleTimeout();
        }
      });
      this.on(CHANNEL_EVENTS.reply, (payload, ref) => {
        this.trigger(this.replyEventName(ref), payload);
      });
    }
    join(timeout = this.timeout) {
      if (this.joinedOnce) {
        throw new Error("tried to join multiple times. 'join' can only be called a single time per channel instance");
      } else {
        this.timeout = timeout;
        this.joinedOnce = true;
        this.rejoin();
        return this.joinPush;
      }
    }
    onClose(callback) {
      this.on(CHANNEL_EVENTS.close, callback);
    }
    onError(callback) {
      return this.on(CHANNEL_EVENTS.error, (reason) => callback(reason));
    }
    on(event, callback) {
      let ref = this.bindingRef++;
      this.bindings.push({ event, ref, callback });
      return ref;
    }
    off(event, ref) {
      this.bindings = this.bindings.filter((bind) => {
        return !(bind.event === event && (typeof ref === "undefined" || ref === bind.ref));
      });
    }
    canPush() {
      return this.socket.isConnected() && this.isJoined();
    }
    push(event, payload, timeout = this.timeout) {
      payload = payload || {};
      if (!this.joinedOnce) {
        throw new Error(`tried to push '${event}' to '${this.topic}' before joining. Use channel.join() before pushing events`);
      }
      let pushEvent = new Push(this, event, function() {
        return payload;
      }, timeout);
      if (this.canPush()) {
        pushEvent.send();
      } else {
        pushEvent.startTimeout();
        this.pushBuffer.push(pushEvent);
      }
      return pushEvent;
    }
    leave(timeout = this.timeout) {
      this.rejoinTimer.reset();
      this.joinPush.cancelTimeout();
      this.state = CHANNEL_STATES.leaving;
      let onClose = () => {
        if (this.socket.hasLogger())
          this.socket.log("channel", `leave ${this.topic}`);
        this.trigger(CHANNEL_EVENTS.close, "leave");
      };
      let leavePush = new Push(this, CHANNEL_EVENTS.leave, closure({}), timeout);
      leavePush.receive("ok", () => onClose()).receive("timeout", () => onClose());
      leavePush.send();
      if (!this.canPush()) {
        leavePush.trigger("ok", {});
      }
      return leavePush;
    }
    onMessage(_event, payload, _ref) {
      return payload;
    }
    isMember(topic, event, payload, joinRef) {
      if (this.topic !== topic) {
        return false;
      }
      if (joinRef && joinRef !== this.joinRef()) {
        if (this.socket.hasLogger())
          this.socket.log("channel", "dropping outdated message", { topic, event, payload, joinRef });
        return false;
      } else {
        return true;
      }
    }
    joinRef() {
      return this.joinPush.ref;
    }
    rejoin(timeout = this.timeout) {
      if (this.isLeaving()) {
        return;
      }
      this.socket.leaveOpenTopic(this.topic);
      this.state = CHANNEL_STATES.joining;
      this.joinPush.resend(timeout);
    }
    trigger(event, payload, ref, joinRef) {
      let handledPayload = this.onMessage(event, payload, ref, joinRef);
      if (payload && !handledPayload) {
        throw new Error("channel onMessage callbacks must return the payload, modified or unmodified");
      }
      let eventBindings = this.bindings.filter((bind) => bind.event === event);
      for (let i2 = 0; i2 < eventBindings.length; i2++) {
        let bind = eventBindings[i2];
        bind.callback(handledPayload, ref, joinRef || this.joinRef());
      }
    }
    replyEventName(ref) {
      return `chan_reply_${ref}`;
    }
    isClosed() {
      return this.state === CHANNEL_STATES.closed;
    }
    isErrored() {
      return this.state === CHANNEL_STATES.errored;
    }
    isJoined() {
      return this.state === CHANNEL_STATES.joined;
    }
    isJoining() {
      return this.state === CHANNEL_STATES.joining;
    }
    isLeaving() {
      return this.state === CHANNEL_STATES.leaving;
    }
  };
  var Ajax = class {
    static request(method, endPoint, accept, body, timeout, ontimeout, callback) {
      if (global.XDomainRequest) {
        let req = new global.XDomainRequest();
        return this.xdomainRequest(req, method, endPoint, body, timeout, ontimeout, callback);
      } else {
        let req = new global.XMLHttpRequest();
        return this.xhrRequest(req, method, endPoint, accept, body, timeout, ontimeout, callback);
      }
    }
    static xdomainRequest(req, method, endPoint, body, timeout, ontimeout, callback) {
      req.timeout = timeout;
      req.open(method, endPoint);
      req.onload = () => {
        let response = this.parseJSON(req.responseText);
        callback && callback(response);
      };
      if (ontimeout) {
        req.ontimeout = ontimeout;
      }
      req.onprogress = () => {
      };
      req.send(body);
      return req;
    }
    static xhrRequest(req, method, endPoint, accept, body, timeout, ontimeout, callback) {
      req.open(method, endPoint, true);
      req.timeout = timeout;
      req.setRequestHeader("Content-Type", accept);
      req.onerror = () => callback && callback(null);
      req.onreadystatechange = () => {
        if (req.readyState === XHR_STATES.complete && callback) {
          let response = this.parseJSON(req.responseText);
          callback(response);
        }
      };
      if (ontimeout) {
        req.ontimeout = ontimeout;
      }
      req.send(body);
      return req;
    }
    static parseJSON(resp) {
      if (!resp || resp === "") {
        return null;
      }
      try {
        return JSON.parse(resp);
      } catch (e6) {
        console && console.log("failed to parse JSON response", resp);
        return null;
      }
    }
    static serialize(obj, parentKey) {
      let queryStr = [];
      for (var key in obj) {
        if (!Object.prototype.hasOwnProperty.call(obj, key)) {
          continue;
        }
        let paramKey = parentKey ? `${parentKey}[${key}]` : key;
        let paramVal = obj[key];
        if (typeof paramVal === "object") {
          queryStr.push(this.serialize(paramVal, paramKey));
        } else {
          queryStr.push(encodeURIComponent(paramKey) + "=" + encodeURIComponent(paramVal));
        }
      }
      return queryStr.join("&");
    }
    static appendParams(url, params) {
      if (Object.keys(params).length === 0) {
        return url;
      }
      let prefix = url.match(/\?/) ? "&" : "?";
      return `${url}${prefix}${this.serialize(params)}`;
    }
  };
  var LongPoll = class {
    constructor(endPoint) {
      this.endPoint = null;
      this.token = null;
      this.skipHeartbeat = true;
      this.reqs = /* @__PURE__ */ new Set();
      this.awaitingBatchAck = false;
      this.currentBatch = null;
      this.currentBatchTimer = null;
      this.batchBuffer = [];
      this.onopen = function() {
      };
      this.onerror = function() {
      };
      this.onmessage = function() {
      };
      this.onclose = function() {
      };
      this.pollEndpoint = this.normalizeEndpoint(endPoint);
      this.readyState = SOCKET_STATES.connecting;
      this.poll();
    }
    normalizeEndpoint(endPoint) {
      return endPoint.replace("ws://", "http://").replace("wss://", "https://").replace(new RegExp("(.*)/" + TRANSPORTS.websocket), "$1/" + TRANSPORTS.longpoll);
    }
    endpointURL() {
      return Ajax.appendParams(this.pollEndpoint, { token: this.token });
    }
    closeAndRetry(code, reason, wasClean) {
      this.close(code, reason, wasClean);
      this.readyState = SOCKET_STATES.connecting;
    }
    ontimeout() {
      this.onerror("timeout");
      this.closeAndRetry(1005, "timeout", false);
    }
    isActive() {
      return this.readyState === SOCKET_STATES.open || this.readyState === SOCKET_STATES.connecting;
    }
    poll() {
      this.ajax("GET", "application/json", null, () => this.ontimeout(), (resp) => {
        if (resp) {
          var { status, token, messages } = resp;
          this.token = token;
        } else {
          status = 0;
        }
        switch (status) {
          case 200:
            messages.forEach((msg) => {
              setTimeout(() => this.onmessage({ data: msg }), 0);
            });
            this.poll();
            break;
          case 204:
            this.poll();
            break;
          case 410:
            this.readyState = SOCKET_STATES.open;
            this.onopen({});
            this.poll();
            break;
          case 403:
            this.onerror(403);
            this.close(1008, "forbidden", false);
            break;
          case 0:
          case 500:
            this.onerror(500);
            this.closeAndRetry(1011, "internal server error", 500);
            break;
          default:
            throw new Error(`unhandled poll status ${status}`);
        }
      });
    }
    send(body) {
      if (this.currentBatch) {
        this.currentBatch.push(body);
      } else if (this.awaitingBatchAck) {
        this.batchBuffer.push(body);
      } else {
        this.currentBatch = [body];
        this.currentBatchTimer = setTimeout(() => {
          this.batchSend(this.currentBatch);
          this.currentBatch = null;
        }, 0);
      }
    }
    batchSend(messages) {
      this.awaitingBatchAck = true;
      this.ajax("POST", "application/x-ndjson", messages.join("\n"), () => this.onerror("timeout"), (resp) => {
        this.awaitingBatchAck = false;
        if (!resp || resp.status !== 200) {
          this.onerror(resp && resp.status);
          this.closeAndRetry(1011, "internal server error", false);
        } else if (this.batchBuffer.length > 0) {
          this.batchSend(this.batchBuffer);
          this.batchBuffer = [];
        }
      });
    }
    close(code, reason, wasClean) {
      for (let req of this.reqs) {
        req.abort();
      }
      this.readyState = SOCKET_STATES.closed;
      let opts = Object.assign({ code: 1e3, reason: void 0, wasClean: true }, { code, reason, wasClean });
      this.batchBuffer = [];
      clearTimeout(this.currentBatchTimer);
      this.currentBatchTimer = null;
      if (typeof CloseEvent !== "undefined") {
        this.onclose(new CloseEvent("close", opts));
      } else {
        this.onclose(opts);
      }
    }
    ajax(method, contentType, body, onCallerTimeout, callback) {
      let req;
      let ontimeout = () => {
        this.reqs.delete(req);
        onCallerTimeout();
      };
      req = Ajax.request(method, this.endpointURL(), contentType, body, this.timeout, ontimeout, (resp) => {
        this.reqs.delete(req);
        if (this.isActive()) {
          callback(resp);
        }
      });
      this.reqs.add(req);
    }
  };
  var serializer_default = {
    HEADER_LENGTH: 1,
    META_LENGTH: 4,
    KINDS: { push: 0, reply: 1, broadcast: 2 },
    encode(msg, callback) {
      if (msg.payload.constructor === ArrayBuffer) {
        return callback(this.binaryEncode(msg));
      } else {
        let payload = [msg.join_ref, msg.ref, msg.topic, msg.event, msg.payload];
        return callback(JSON.stringify(payload));
      }
    },
    decode(rawPayload, callback) {
      if (rawPayload.constructor === ArrayBuffer) {
        return callback(this.binaryDecode(rawPayload));
      } else {
        let [join_ref, ref, topic, event, payload] = JSON.parse(rawPayload);
        return callback({ join_ref, ref, topic, event, payload });
      }
    },
    binaryEncode(message) {
      let { join_ref, ref, event, topic, payload } = message;
      let metaLength = this.META_LENGTH + join_ref.length + ref.length + topic.length + event.length;
      let header = new ArrayBuffer(this.HEADER_LENGTH + metaLength);
      let view = new DataView(header);
      let offset = 0;
      view.setUint8(offset++, this.KINDS.push);
      view.setUint8(offset++, join_ref.length);
      view.setUint8(offset++, ref.length);
      view.setUint8(offset++, topic.length);
      view.setUint8(offset++, event.length);
      Array.from(join_ref, (char) => view.setUint8(offset++, char.charCodeAt(0)));
      Array.from(ref, (char) => view.setUint8(offset++, char.charCodeAt(0)));
      Array.from(topic, (char) => view.setUint8(offset++, char.charCodeAt(0)));
      Array.from(event, (char) => view.setUint8(offset++, char.charCodeAt(0)));
      var combined = new Uint8Array(header.byteLength + payload.byteLength);
      combined.set(new Uint8Array(header), 0);
      combined.set(new Uint8Array(payload), header.byteLength);
      return combined.buffer;
    },
    binaryDecode(buffer) {
      let view = new DataView(buffer);
      let kind = view.getUint8(0);
      let decoder = new TextDecoder();
      switch (kind) {
        case this.KINDS.push:
          return this.decodePush(buffer, view, decoder);
        case this.KINDS.reply:
          return this.decodeReply(buffer, view, decoder);
        case this.KINDS.broadcast:
          return this.decodeBroadcast(buffer, view, decoder);
      }
    },
    decodePush(buffer, view, decoder) {
      let joinRefSize = view.getUint8(1);
      let topicSize = view.getUint8(2);
      let eventSize = view.getUint8(3);
      let offset = this.HEADER_LENGTH + this.META_LENGTH - 1;
      let joinRef = decoder.decode(buffer.slice(offset, offset + joinRefSize));
      offset = offset + joinRefSize;
      let topic = decoder.decode(buffer.slice(offset, offset + topicSize));
      offset = offset + topicSize;
      let event = decoder.decode(buffer.slice(offset, offset + eventSize));
      offset = offset + eventSize;
      let data = buffer.slice(offset, buffer.byteLength);
      return { join_ref: joinRef, ref: null, topic, event, payload: data };
    },
    decodeReply(buffer, view, decoder) {
      let joinRefSize = view.getUint8(1);
      let refSize = view.getUint8(2);
      let topicSize = view.getUint8(3);
      let eventSize = view.getUint8(4);
      let offset = this.HEADER_LENGTH + this.META_LENGTH;
      let joinRef = decoder.decode(buffer.slice(offset, offset + joinRefSize));
      offset = offset + joinRefSize;
      let ref = decoder.decode(buffer.slice(offset, offset + refSize));
      offset = offset + refSize;
      let topic = decoder.decode(buffer.slice(offset, offset + topicSize));
      offset = offset + topicSize;
      let event = decoder.decode(buffer.slice(offset, offset + eventSize));
      offset = offset + eventSize;
      let data = buffer.slice(offset, buffer.byteLength);
      let payload = { status: event, response: data };
      return { join_ref: joinRef, ref, topic, event: CHANNEL_EVENTS.reply, payload };
    },
    decodeBroadcast(buffer, view, decoder) {
      let topicSize = view.getUint8(1);
      let eventSize = view.getUint8(2);
      let offset = this.HEADER_LENGTH + 2;
      let topic = decoder.decode(buffer.slice(offset, offset + topicSize));
      offset = offset + topicSize;
      let event = decoder.decode(buffer.slice(offset, offset + eventSize));
      offset = offset + eventSize;
      let data = buffer.slice(offset, buffer.byteLength);
      return { join_ref: null, ref: null, topic, event, payload: data };
    }
  };
  var Socket = class {
    constructor(endPoint, opts = {}) {
      this.stateChangeCallbacks = { open: [], close: [], error: [], message: [] };
      this.channels = [];
      this.sendBuffer = [];
      this.ref = 0;
      this.timeout = opts.timeout || DEFAULT_TIMEOUT;
      this.transport = opts.transport || global.WebSocket || LongPoll;
      this.establishedConnections = 0;
      this.defaultEncoder = serializer_default.encode.bind(serializer_default);
      this.defaultDecoder = serializer_default.decode.bind(serializer_default);
      this.closeWasClean = false;
      this.binaryType = opts.binaryType || "arraybuffer";
      this.connectClock = 1;
      if (this.transport !== LongPoll) {
        this.encode = opts.encode || this.defaultEncoder;
        this.decode = opts.decode || this.defaultDecoder;
      } else {
        this.encode = this.defaultEncoder;
        this.decode = this.defaultDecoder;
      }
      let awaitingConnectionOnPageShow = null;
      if (phxWindow && phxWindow.addEventListener) {
        phxWindow.addEventListener("pagehide", (_e2) => {
          if (this.conn) {
            this.disconnect();
            awaitingConnectionOnPageShow = this.connectClock;
          }
        });
        phxWindow.addEventListener("pageshow", (_e2) => {
          if (awaitingConnectionOnPageShow === this.connectClock) {
            awaitingConnectionOnPageShow = null;
            this.connect();
          }
        });
      }
      this.heartbeatIntervalMs = opts.heartbeatIntervalMs || 3e4;
      this.rejoinAfterMs = (tries) => {
        if (opts.rejoinAfterMs) {
          return opts.rejoinAfterMs(tries);
        } else {
          return [1e3, 2e3, 5e3][tries - 1] || 1e4;
        }
      };
      this.reconnectAfterMs = (tries) => {
        if (opts.reconnectAfterMs) {
          return opts.reconnectAfterMs(tries);
        } else {
          return [10, 50, 100, 150, 200, 250, 500, 1e3, 2e3][tries - 1] || 5e3;
        }
      };
      this.logger = opts.logger || null;
      this.longpollerTimeout = opts.longpollerTimeout || 2e4;
      this.params = closure(opts.params || {});
      this.endPoint = `${endPoint}/${TRANSPORTS.websocket}`;
      this.vsn = opts.vsn || DEFAULT_VSN;
      this.heartbeatTimeoutTimer = null;
      this.heartbeatTimer = null;
      this.pendingHeartbeatRef = null;
      this.reconnectTimer = new Timer(() => {
        this.teardown(() => this.connect());
      }, this.reconnectAfterMs);
    }
    getLongPollTransport() {
      return LongPoll;
    }
    replaceTransport(newTransport) {
      this.connectClock++;
      this.closeWasClean = true;
      this.reconnectTimer.reset();
      this.sendBuffer = [];
      if (this.conn) {
        this.conn.close();
        this.conn = null;
      }
      this.transport = newTransport;
    }
    protocol() {
      return location.protocol.match(/^https/) ? "wss" : "ws";
    }
    endPointURL() {
      let uri = Ajax.appendParams(Ajax.appendParams(this.endPoint, this.params()), { vsn: this.vsn });
      if (uri.charAt(0) !== "/") {
        return uri;
      }
      if (uri.charAt(1) === "/") {
        return `${this.protocol()}:${uri}`;
      }
      return `${this.protocol()}://${location.host}${uri}`;
    }
    disconnect(callback, code, reason) {
      this.connectClock++;
      this.closeWasClean = true;
      this.reconnectTimer.reset();
      this.teardown(callback, code, reason);
    }
    connect(params) {
      if (params) {
        console && console.log("passing params to connect is deprecated. Instead pass :params to the Socket constructor");
        this.params = closure(params);
      }
      if (this.conn) {
        return;
      }
      this.connectClock++;
      this.closeWasClean = false;
      this.conn = new this.transport(this.endPointURL());
      this.conn.binaryType = this.binaryType;
      this.conn.timeout = this.longpollerTimeout;
      this.conn.onopen = () => this.onConnOpen();
      this.conn.onerror = (error) => this.onConnError(error);
      this.conn.onmessage = (event) => this.onConnMessage(event);
      this.conn.onclose = (event) => this.onConnClose(event);
    }
    log(kind, msg, data) {
      this.logger(kind, msg, data);
    }
    hasLogger() {
      return this.logger !== null;
    }
    onOpen(callback) {
      let ref = this.makeRef();
      this.stateChangeCallbacks.open.push([ref, callback]);
      return ref;
    }
    onClose(callback) {
      let ref = this.makeRef();
      this.stateChangeCallbacks.close.push([ref, callback]);
      return ref;
    }
    onError(callback) {
      let ref = this.makeRef();
      this.stateChangeCallbacks.error.push([ref, callback]);
      return ref;
    }
    onMessage(callback) {
      let ref = this.makeRef();
      this.stateChangeCallbacks.message.push([ref, callback]);
      return ref;
    }
    ping(callback) {
      if (!this.isConnected()) {
        return false;
      }
      let ref = this.makeRef();
      let startTime = Date.now();
      this.push({ topic: "phoenix", event: "heartbeat", payload: {}, ref });
      let onMsgRef = this.onMessage((msg) => {
        if (msg.ref === ref) {
          this.off([onMsgRef]);
          callback(Date.now() - startTime);
        }
      });
      return true;
    }
    clearHeartbeats() {
      clearTimeout(this.heartbeatTimer);
      clearTimeout(this.heartbeatTimeoutTimer);
    }
    onConnOpen() {
      if (this.hasLogger())
        this.log("transport", `connected to ${this.endPointURL()}`);
      this.closeWasClean = false;
      this.establishedConnections++;
      this.flushSendBuffer();
      this.reconnectTimer.reset();
      this.resetHeartbeat();
      this.stateChangeCallbacks.open.forEach(([, callback]) => callback());
    }
    heartbeatTimeout() {
      if (this.pendingHeartbeatRef) {
        this.pendingHeartbeatRef = null;
        if (this.hasLogger()) {
          this.log("transport", "heartbeat timeout. Attempting to re-establish connection");
        }
        this.triggerChanError();
        this.closeWasClean = false;
        this.teardown(() => this.reconnectTimer.scheduleTimeout(), WS_CLOSE_NORMAL, "heartbeat timeout");
      }
    }
    resetHeartbeat() {
      if (this.conn && this.conn.skipHeartbeat) {
        return;
      }
      this.pendingHeartbeatRef = null;
      this.clearHeartbeats();
      this.heartbeatTimer = setTimeout(() => this.sendHeartbeat(), this.heartbeatIntervalMs);
    }
    teardown(callback, code, reason) {
      if (!this.conn) {
        return callback && callback();
      }
      this.waitForBufferDone(() => {
        if (this.conn) {
          if (code) {
            this.conn.close(code, reason || "");
          } else {
            this.conn.close();
          }
        }
        this.waitForSocketClosed(() => {
          if (this.conn) {
            this.conn.onopen = function() {
            };
            this.conn.onerror = function() {
            };
            this.conn.onmessage = function() {
            };
            this.conn.onclose = function() {
            };
            this.conn = null;
          }
          callback && callback();
        });
      });
    }
    waitForBufferDone(callback, tries = 1) {
      if (tries === 5 || !this.conn || !this.conn.bufferedAmount) {
        callback();
        return;
      }
      setTimeout(() => {
        this.waitForBufferDone(callback, tries + 1);
      }, 150 * tries);
    }
    waitForSocketClosed(callback, tries = 1) {
      if (tries === 5 || !this.conn || this.conn.readyState === SOCKET_STATES.closed) {
        callback();
        return;
      }
      setTimeout(() => {
        this.waitForSocketClosed(callback, tries + 1);
      }, 150 * tries);
    }
    onConnClose(event) {
      let closeCode = event && event.code;
      if (this.hasLogger())
        this.log("transport", "close", event);
      this.triggerChanError();
      this.clearHeartbeats();
      if (!this.closeWasClean && closeCode !== 1e3) {
        this.reconnectTimer.scheduleTimeout();
      }
      this.stateChangeCallbacks.close.forEach(([, callback]) => callback(event));
    }
    onConnError(error) {
      if (this.hasLogger())
        this.log("transport", error);
      let transportBefore = this.transport;
      let establishedBefore = this.establishedConnections;
      this.stateChangeCallbacks.error.forEach(([, callback]) => {
        callback(error, transportBefore, establishedBefore);
      });
      if (transportBefore === this.transport || establishedBefore > 0) {
        this.triggerChanError();
      }
    }
    triggerChanError() {
      this.channels.forEach((channel) => {
        if (!(channel.isErrored() || channel.isLeaving() || channel.isClosed())) {
          channel.trigger(CHANNEL_EVENTS.error);
        }
      });
    }
    connectionState() {
      switch (this.conn && this.conn.readyState) {
        case SOCKET_STATES.connecting:
          return "connecting";
        case SOCKET_STATES.open:
          return "open";
        case SOCKET_STATES.closing:
          return "closing";
        default:
          return "closed";
      }
    }
    isConnected() {
      return this.connectionState() === "open";
    }
    remove(channel) {
      this.off(channel.stateChangeRefs);
      this.channels = this.channels.filter((c2) => c2.joinRef() !== channel.joinRef());
    }
    off(refs) {
      for (let key in this.stateChangeCallbacks) {
        this.stateChangeCallbacks[key] = this.stateChangeCallbacks[key].filter(([ref]) => {
          return refs.indexOf(ref) === -1;
        });
      }
    }
    channel(topic, chanParams = {}) {
      let chan = new Channel(topic, chanParams, this);
      this.channels.push(chan);
      return chan;
    }
    push(data) {
      if (this.hasLogger()) {
        let { topic, event, payload, ref, join_ref } = data;
        this.log("push", `${topic} ${event} (${join_ref}, ${ref})`, payload);
      }
      if (this.isConnected()) {
        this.encode(data, (result) => this.conn.send(result));
      } else {
        this.sendBuffer.push(() => this.encode(data, (result) => this.conn.send(result)));
      }
    }
    makeRef() {
      let newRef = this.ref + 1;
      if (newRef === this.ref) {
        this.ref = 0;
      } else {
        this.ref = newRef;
      }
      return this.ref.toString();
    }
    sendHeartbeat() {
      if (this.pendingHeartbeatRef && !this.isConnected()) {
        return;
      }
      this.pendingHeartbeatRef = this.makeRef();
      this.push({ topic: "phoenix", event: "heartbeat", payload: {}, ref: this.pendingHeartbeatRef });
      this.heartbeatTimeoutTimer = setTimeout(() => this.heartbeatTimeout(), this.heartbeatIntervalMs);
    }
    flushSendBuffer() {
      if (this.isConnected() && this.sendBuffer.length > 0) {
        this.sendBuffer.forEach((callback) => callback());
        this.sendBuffer = [];
      }
    }
    onConnMessage(rawMessage) {
      this.decode(rawMessage.data, (msg) => {
        let { topic, event, payload, ref, join_ref } = msg;
        if (ref && ref === this.pendingHeartbeatRef) {
          this.clearHeartbeats();
          this.pendingHeartbeatRef = null;
          this.heartbeatTimer = setTimeout(() => this.sendHeartbeat(), this.heartbeatIntervalMs);
        }
        if (this.hasLogger())
          this.log("receive", `${payload.status || ""} ${topic} ${event} ${ref && "(" + ref + ")" || ""}`, payload);
        for (let i2 = 0; i2 < this.channels.length; i2++) {
          const channel = this.channels[i2];
          if (!channel.isMember(topic, event, payload, join_ref)) {
            continue;
          }
          channel.trigger(event, payload, ref, join_ref);
        }
        for (let i2 = 0; i2 < this.stateChangeCallbacks.message.length; i2++) {
          let [, callback] = this.stateChangeCallbacks.message[i2];
          callback(msg);
        }
      });
    }
    leaveOpenTopic(topic) {
      let dupChannel = this.channels.find((c2) => c2.topic === topic && (c2.isJoined() || c2.isJoining()));
      if (dupChannel) {
        if (this.hasLogger())
          this.log("transport", `leaving duplicate topic "${topic}"`);
        dupChannel.leave();
      }
    }
  };

  // ../deps/phoenix_live_view/priv/static/phoenix_live_view.esm.js
  var CONSECUTIVE_RELOADS = "consecutive-reloads";
  var MAX_RELOADS = 10;
  var RELOAD_JITTER_MIN = 5e3;
  var RELOAD_JITTER_MAX = 1e4;
  var FAILSAFE_JITTER = 3e4;
  var PHX_EVENT_CLASSES = [
    "phx-click-loading",
    "phx-change-loading",
    "phx-submit-loading",
    "phx-keydown-loading",
    "phx-keyup-loading",
    "phx-blur-loading",
    "phx-focus-loading"
  ];
  var PHX_COMPONENT = "data-phx-component";
  var PHX_LIVE_LINK = "data-phx-link";
  var PHX_TRACK_STATIC = "track-static";
  var PHX_LINK_STATE = "data-phx-link-state";
  var PHX_REF = "data-phx-ref";
  var PHX_REF_SRC = "data-phx-ref-src";
  var PHX_TRACK_UPLOADS = "track-uploads";
  var PHX_UPLOAD_REF = "data-phx-upload-ref";
  var PHX_PREFLIGHTED_REFS = "data-phx-preflighted-refs";
  var PHX_DONE_REFS = "data-phx-done-refs";
  var PHX_DROP_TARGET = "drop-target";
  var PHX_ACTIVE_ENTRY_REFS = "data-phx-active-refs";
  var PHX_LIVE_FILE_UPDATED = "phx:live-file:updated";
  var PHX_SKIP = "data-phx-skip";
  var PHX_PRUNE = "data-phx-prune";
  var PHX_PAGE_LOADING = "page-loading";
  var PHX_CONNECTED_CLASS = "phx-connected";
  var PHX_DISCONNECTED_CLASS = "phx-loading";
  var PHX_NO_FEEDBACK_CLASS = "phx-no-feedback";
  var PHX_ERROR_CLASS = "phx-error";
  var PHX_PARENT_ID = "data-phx-parent-id";
  var PHX_MAIN = "data-phx-main";
  var PHX_ROOT_ID = "data-phx-root-id";
  var PHX_TRIGGER_ACTION = "trigger-action";
  var PHX_FEEDBACK_FOR = "feedback-for";
  var PHX_HAS_FOCUSED = "phx-has-focused";
  var FOCUSABLE_INPUTS = ["text", "textarea", "number", "email", "password", "search", "tel", "url", "date", "time", "datetime-local", "color", "range"];
  var CHECKABLE_INPUTS = ["checkbox", "radio"];
  var PHX_HAS_SUBMITTED = "phx-has-submitted";
  var PHX_SESSION = "data-phx-session";
  var PHX_VIEW_SELECTOR = `[${PHX_SESSION}]`;
  var PHX_STICKY = "data-phx-sticky";
  var PHX_STATIC = "data-phx-static";
  var PHX_READONLY = "data-phx-readonly";
  var PHX_DISABLED = "data-phx-disabled";
  var PHX_DISABLE_WITH = "disable-with";
  var PHX_DISABLE_WITH_RESTORE = "data-phx-disable-with-restore";
  var PHX_HOOK = "hook";
  var PHX_DEBOUNCE = "debounce";
  var PHX_THROTTLE = "throttle";
  var PHX_UPDATE = "update";
  var PHX_STREAM = "stream";
  var PHX_KEY = "key";
  var PHX_PRIVATE = "phxPrivate";
  var PHX_AUTO_RECOVER = "auto-recover";
  var PHX_LV_DEBUG = "phx:live-socket:debug";
  var PHX_LV_PROFILE = "phx:live-socket:profiling";
  var PHX_LV_LATENCY_SIM = "phx:live-socket:latency-sim";
  var PHX_PROGRESS = "progress";
  var PHX_MOUNTED = "mounted";
  var LOADER_TIMEOUT = 1;
  var BEFORE_UNLOAD_LOADER_TIMEOUT = 200;
  var BINDING_PREFIX = "phx-";
  var PUSH_TIMEOUT = 3e4;
  var DEBOUNCE_TRIGGER = "debounce-trigger";
  var THROTTLED = "throttled";
  var DEBOUNCE_PREV_KEY = "debounce-prev-key";
  var DEFAULTS = {
    debounce: 300,
    throttle: 300
  };
  var DYNAMICS = "d";
  var STATIC = "s";
  var COMPONENTS = "c";
  var EVENTS = "e";
  var REPLY = "r";
  var TITLE = "t";
  var TEMPLATES = "p";
  var STREAM = "stream";
  var EntryUploader = class {
    constructor(entry, chunkSize, liveSocket2) {
      this.liveSocket = liveSocket2;
      this.entry = entry;
      this.offset = 0;
      this.chunkSize = chunkSize;
      this.chunkTimer = null;
      this.uploadChannel = liveSocket2.channel(`lvu:${entry.ref}`, { token: entry.metadata() });
    }
    error(reason) {
      clearTimeout(this.chunkTimer);
      this.uploadChannel.leave();
      this.entry.error(reason);
    }
    upload() {
      this.uploadChannel.onError((reason) => this.error(reason));
      this.uploadChannel.join().receive("ok", (_data) => this.readNextChunk()).receive("error", (reason) => this.error(reason));
    }
    isDone() {
      return this.offset >= this.entry.file.size;
    }
    readNextChunk() {
      let reader = new window.FileReader();
      let blob = this.entry.file.slice(this.offset, this.chunkSize + this.offset);
      reader.onload = (e6) => {
        if (e6.target.error === null) {
          this.offset += e6.target.result.byteLength;
          this.pushChunk(e6.target.result);
        } else {
          return logError("Read error: " + e6.target.error);
        }
      };
      reader.readAsArrayBuffer(blob);
    }
    pushChunk(chunk) {
      if (!this.uploadChannel.isJoined()) {
        return;
      }
      this.uploadChannel.push("chunk", chunk).receive("ok", () => {
        this.entry.progress(this.offset / this.entry.file.size * 100);
        if (!this.isDone()) {
          this.chunkTimer = setTimeout(() => this.readNextChunk(), this.liveSocket.getLatencySim() || 0);
        }
      });
    }
  };
  var logError = (msg, obj) => console.error && console.error(msg, obj);
  var isCid = (cid) => {
    let type = typeof cid;
    return type === "number" || type === "string" && /^(0|[1-9]\d*)$/.test(cid);
  };
  function detectDuplicateIds() {
    let ids = /* @__PURE__ */ new Set();
    let elems = document.querySelectorAll("*[id]");
    for (let i2 = 0, len = elems.length; i2 < len; i2++) {
      if (ids.has(elems[i2].id)) {
        console.error(`Multiple IDs detected: ${elems[i2].id}. Ensure unique element ids.`);
      } else {
        ids.add(elems[i2].id);
      }
    }
  }
  var debug = (view, kind, msg, obj) => {
    if (view.liveSocket.isDebugEnabled()) {
      console.log(`${view.id} ${kind}: ${msg} - `, obj);
    }
  };
  var closure2 = (val) => typeof val === "function" ? val : function() {
    return val;
  };
  var clone = (obj) => {
    return JSON.parse(JSON.stringify(obj));
  };
  var closestPhxBinding = (el, binding, borderEl) => {
    do {
      if (el.matches(`[${binding}]`) && !el.disabled) {
        return el;
      }
      el = el.parentElement || el.parentNode;
    } while (el !== null && el.nodeType === 1 && !(borderEl && borderEl.isSameNode(el) || el.matches(PHX_VIEW_SELECTOR)));
    return null;
  };
  var isObject = (obj) => {
    return obj !== null && typeof obj === "object" && !(obj instanceof Array);
  };
  var isEqualObj = (obj1, obj2) => JSON.stringify(obj1) === JSON.stringify(obj2);
  var isEmpty = (obj) => {
    for (let x2 in obj) {
      return false;
    }
    return true;
  };
  var maybe = (el, callback) => el && callback(el);
  var channelUploader = function(entries, onError, resp, liveSocket2) {
    entries.forEach((entry) => {
      let entryUploader = new EntryUploader(entry, resp.config.chunk_size, liveSocket2);
      entryUploader.upload();
    });
  };
  var Browser = {
    canPushState() {
      return typeof history.pushState !== "undefined";
    },
    dropLocal(localStorage2, namespace, subkey) {
      return localStorage2.removeItem(this.localKey(namespace, subkey));
    },
    updateLocal(localStorage2, namespace, subkey, initial, func) {
      let current = this.getLocal(localStorage2, namespace, subkey);
      let key = this.localKey(namespace, subkey);
      let newVal = current === null ? initial : func(current);
      localStorage2.setItem(key, JSON.stringify(newVal));
      return newVal;
    },
    getLocal(localStorage2, namespace, subkey) {
      return JSON.parse(localStorage2.getItem(this.localKey(namespace, subkey)));
    },
    updateCurrentState(callback) {
      if (!this.canPushState()) {
        return;
      }
      history.replaceState(callback(history.state || {}), "", window.location.href);
    },
    pushState(kind, meta, to) {
      if (this.canPushState()) {
        if (to !== window.location.href) {
          if (meta.type == "redirect" && meta.scroll) {
            let currentState = history.state || {};
            currentState.scroll = meta.scroll;
            history.replaceState(currentState, "", window.location.href);
          }
          delete meta.scroll;
          history[kind + "State"](meta, "", to || null);
          let hashEl = this.getHashTargetEl(window.location.hash);
          if (hashEl) {
            hashEl.scrollIntoView();
          } else if (meta.type === "redirect") {
            window.scroll(0, 0);
          }
        }
      } else {
        this.redirect(to);
      }
    },
    setCookie(name, value) {
      document.cookie = `${name}=${value}`;
    },
    getCookie(name) {
      return document.cookie.replace(new RegExp(`(?:(?:^|.*;s*)${name}s*=s*([^;]*).*$)|^.*$`), "$1");
    },
    redirect(toURL, flash) {
      if (flash) {
        Browser.setCookie("__phoenix_flash__", flash + "; max-age=60000; path=/");
      }
      window.location = toURL;
    },
    localKey(namespace, subkey) {
      return `${namespace}-${subkey}`;
    },
    getHashTargetEl(maybeHash) {
      let hash = maybeHash.toString().substring(1);
      if (hash === "") {
        return;
      }
      return document.getElementById(hash) || document.querySelector(`a[name="${hash}"]`);
    }
  };
  var browser_default = Browser;
  var DOM = {
    byId(id) {
      return document.getElementById(id) || logError(`no id found for ${id}`);
    },
    removeClass(el, className) {
      el.classList.remove(className);
      if (el.classList.length === 0) {
        el.removeAttribute("class");
      }
    },
    all(node, query, callback) {
      if (!node) {
        return [];
      }
      let array = Array.from(node.querySelectorAll(query));
      return callback ? array.forEach(callback) : array;
    },
    childNodeLength(html) {
      let template = document.createElement("template");
      template.innerHTML = html;
      return template.content.childElementCount;
    },
    isUploadInput(el) {
      return el.type === "file" && el.getAttribute(PHX_UPLOAD_REF) !== null;
    },
    findUploadInputs(node) {
      return this.all(node, `input[type="file"][${PHX_UPLOAD_REF}]`);
    },
    findComponentNodeList(node, cid) {
      return this.filterWithinSameLiveView(this.all(node, `[${PHX_COMPONENT}="${cid}"]`), node);
    },
    isPhxDestroyed(node) {
      return node.id && DOM.private(node, "destroyed") ? true : false;
    },
    wantsNewTab(e6) {
      let wantsNewTab = e6.ctrlKey || e6.shiftKey || e6.metaKey || e6.button && e6.button === 1;
      return wantsNewTab || e6.target.getAttribute("target") === "_blank";
    },
    isUnloadableFormSubmit(e6) {
      return !e6.defaultPrevented && !this.wantsNewTab(e6);
    },
    isNewPageHref(href, currentLocation) {
      let url;
      try {
        url = new URL(href);
      } catch (e6) {
        try {
          url = new URL(href, currentLocation);
        } catch (e22) {
          return true;
        }
      }
      if (url.host === currentLocation.host && url.protocol === currentLocation.protocol) {
        if (url.pathname === currentLocation.pathname && url.search === currentLocation.search) {
          return url.hash === "" && !url.href.endsWith("#");
        }
      }
      return true;
    },
    markPhxChildDestroyed(el) {
      if (this.isPhxChild(el)) {
        el.setAttribute(PHX_SESSION, "");
      }
      this.putPrivate(el, "destroyed", true);
    },
    findPhxChildrenInFragment(html, parentId) {
      let template = document.createElement("template");
      template.innerHTML = html;
      return this.findPhxChildren(template.content, parentId);
    },
    isIgnored(el, phxUpdate) {
      return (el.getAttribute(phxUpdate) || el.getAttribute("data-phx-update")) === "ignore";
    },
    isPhxUpdate(el, phxUpdate, updateTypes) {
      return el.getAttribute && updateTypes.indexOf(el.getAttribute(phxUpdate)) >= 0;
    },
    findPhxSticky(el) {
      return this.all(el, `[${PHX_STICKY}]`);
    },
    findPhxChildren(el, parentId) {
      return this.all(el, `${PHX_VIEW_SELECTOR}[${PHX_PARENT_ID}="${parentId}"]`);
    },
    findParentCIDs(node, cids) {
      let initial = new Set(cids);
      let parentCids = cids.reduce((acc, cid) => {
        let selector = `[${PHX_COMPONENT}="${cid}"] [${PHX_COMPONENT}]`;
        this.filterWithinSameLiveView(this.all(node, selector), node).map((el) => parseInt(el.getAttribute(PHX_COMPONENT))).forEach((childCID) => acc.delete(childCID));
        return acc;
      }, initial);
      return parentCids.size === 0 ? new Set(cids) : parentCids;
    },
    filterWithinSameLiveView(nodes, parent) {
      if (parent.querySelector(PHX_VIEW_SELECTOR)) {
        return nodes.filter((el) => this.withinSameLiveView(el, parent));
      } else {
        return nodes;
      }
    },
    withinSameLiveView(node, parent) {
      while (node = node.parentNode) {
        if (node.isSameNode(parent)) {
          return true;
        }
        if (node.getAttribute(PHX_SESSION) !== null) {
          return false;
        }
      }
    },
    private(el, key) {
      return el[PHX_PRIVATE] && el[PHX_PRIVATE][key];
    },
    deletePrivate(el, key) {
      el[PHX_PRIVATE] && delete el[PHX_PRIVATE][key];
    },
    putPrivate(el, key, value) {
      if (!el[PHX_PRIVATE]) {
        el[PHX_PRIVATE] = {};
      }
      el[PHX_PRIVATE][key] = value;
    },
    updatePrivate(el, key, defaultVal, updateFunc) {
      let existing = this.private(el, key);
      if (existing === void 0) {
        this.putPrivate(el, key, updateFunc(defaultVal));
      } else {
        this.putPrivate(el, key, updateFunc(existing));
      }
    },
    copyPrivates(target, source) {
      if (source[PHX_PRIVATE]) {
        target[PHX_PRIVATE] = source[PHX_PRIVATE];
      }
    },
    putTitle(str) {
      let titleEl = document.querySelector("title");
      if (titleEl) {
        let { prefix, suffix } = titleEl.dataset;
        document.title = `${prefix || ""}${str}${suffix || ""}`;
      } else {
        document.title = str;
      }
    },
    debounce(el, event, phxDebounce, defaultDebounce, phxThrottle, defaultThrottle, asyncFilter, callback) {
      let debounce = el.getAttribute(phxDebounce);
      let throttle = el.getAttribute(phxThrottle);
      if (debounce === "") {
        debounce = defaultDebounce;
      }
      if (throttle === "") {
        throttle = defaultThrottle;
      }
      let value = debounce || throttle;
      switch (value) {
        case null:
          return callback();
        case "blur":
          if (this.once(el, "debounce-blur")) {
            el.addEventListener("blur", () => callback());
          }
          return;
        default:
          let timeout = parseInt(value);
          let trigger = () => throttle ? this.deletePrivate(el, THROTTLED) : callback();
          let currentCycle = this.incCycle(el, DEBOUNCE_TRIGGER, trigger);
          if (isNaN(timeout)) {
            return logError(`invalid throttle/debounce value: ${value}`);
          }
          if (throttle) {
            let newKeyDown = false;
            if (event.type === "keydown") {
              let prevKey = this.private(el, DEBOUNCE_PREV_KEY);
              this.putPrivate(el, DEBOUNCE_PREV_KEY, event.key);
              newKeyDown = prevKey !== event.key;
            }
            if (!newKeyDown && this.private(el, THROTTLED)) {
              return false;
            } else {
              callback();
              this.putPrivate(el, THROTTLED, true);
              setTimeout(() => {
                if (asyncFilter()) {
                  this.triggerCycle(el, DEBOUNCE_TRIGGER);
                }
              }, timeout);
            }
          } else {
            setTimeout(() => {
              if (asyncFilter()) {
                this.triggerCycle(el, DEBOUNCE_TRIGGER, currentCycle);
              }
            }, timeout);
          }
          let form = el.form;
          if (form && this.once(form, "bind-debounce")) {
            form.addEventListener("submit", () => {
              Array.from(new FormData(form).entries(), ([name]) => {
                let input = form.querySelector(`[name="${name}"]`);
                this.incCycle(input, DEBOUNCE_TRIGGER);
                this.deletePrivate(input, THROTTLED);
              });
            });
          }
          if (this.once(el, "bind-debounce")) {
            el.addEventListener("blur", () => this.triggerCycle(el, DEBOUNCE_TRIGGER));
          }
      }
    },
    triggerCycle(el, key, currentCycle) {
      let [cycle, trigger] = this.private(el, key);
      if (!currentCycle) {
        currentCycle = cycle;
      }
      if (currentCycle === cycle) {
        this.incCycle(el, key);
        trigger();
      }
    },
    once(el, key) {
      if (this.private(el, key) === true) {
        return false;
      }
      this.putPrivate(el, key, true);
      return true;
    },
    incCycle(el, key, trigger = function() {
    }) {
      let [currentCycle] = this.private(el, key) || [0, trigger];
      currentCycle++;
      this.putPrivate(el, key, [currentCycle, trigger]);
      return currentCycle;
    },
    discardError(container, el, phxFeedbackFor) {
      let field = el.getAttribute && el.getAttribute(phxFeedbackFor);
      let input = field && container.querySelector(`[id="${field}"], [name="${field}"], [name="${field}[]"]`);
      if (!input) {
        return;
      }
      if (!(this.private(input, PHX_HAS_FOCUSED) || this.private(input, PHX_HAS_SUBMITTED))) {
        el.classList.add(PHX_NO_FEEDBACK_CLASS);
      }
    },
    resetForm(form, phxFeedbackFor) {
      Array.from(form.elements).forEach((input) => {
        let query = `[${phxFeedbackFor}="${input.id}"],
                   [${phxFeedbackFor}="${input.name}"],
                   [${phxFeedbackFor}="${input.name.replace(/\[\]$/, "")}"]`;
        this.deletePrivate(input, PHX_HAS_FOCUSED);
        this.deletePrivate(input, PHX_HAS_SUBMITTED);
        this.all(document, query, (feedbackEl) => {
          feedbackEl.classList.add(PHX_NO_FEEDBACK_CLASS);
        });
      });
    },
    showError(inputEl, phxFeedbackFor) {
      if (inputEl.id || inputEl.name) {
        this.all(inputEl.form, `[${phxFeedbackFor}="${inputEl.id}"], [${phxFeedbackFor}="${inputEl.name}"]`, (el) => {
          this.removeClass(el, PHX_NO_FEEDBACK_CLASS);
        });
      }
    },
    isPhxChild(node) {
      return node.getAttribute && node.getAttribute(PHX_PARENT_ID);
    },
    isPhxSticky(node) {
      return node.getAttribute && node.getAttribute(PHX_STICKY) !== null;
    },
    firstPhxChild(el) {
      return this.isPhxChild(el) ? el : this.all(el, `[${PHX_PARENT_ID}]`)[0];
    },
    dispatchEvent(target, name, opts = {}) {
      let bubbles = opts.bubbles === void 0 ? true : !!opts.bubbles;
      let eventOpts = { bubbles, cancelable: true, detail: opts.detail || {} };
      let event = name === "click" ? new MouseEvent("click", eventOpts) : new CustomEvent(name, eventOpts);
      target.dispatchEvent(event);
    },
    cloneNode(node, html) {
      if (typeof html === "undefined") {
        return node.cloneNode(true);
      } else {
        let cloned = node.cloneNode(false);
        cloned.innerHTML = html;
        return cloned;
      }
    },
    mergeAttrs(target, source, opts = {}) {
      let exclude = opts.exclude || [];
      let isIgnored = opts.isIgnored;
      let sourceAttrs = source.attributes;
      for (let i2 = sourceAttrs.length - 1; i2 >= 0; i2--) {
        let name = sourceAttrs[i2].name;
        if (exclude.indexOf(name) < 0) {
          target.setAttribute(name, source.getAttribute(name));
        }
      }
      let targetAttrs = target.attributes;
      for (let i2 = targetAttrs.length - 1; i2 >= 0; i2--) {
        let name = targetAttrs[i2].name;
        if (isIgnored) {
          if (name.startsWith("data-") && !source.hasAttribute(name)) {
            target.removeAttribute(name);
          }
        } else {
          if (!source.hasAttribute(name)) {
            target.removeAttribute(name);
          }
        }
      }
    },
    mergeFocusedInput(target, source) {
      if (!(target instanceof HTMLSelectElement)) {
        DOM.mergeAttrs(target, source, { exclude: ["value"] });
      }
      if (source.readOnly) {
        target.setAttribute("readonly", true);
      } else {
        target.removeAttribute("readonly");
      }
    },
    hasSelectionRange(el) {
      return el.setSelectionRange && (el.type === "text" || el.type === "textarea");
    },
    restoreFocus(focused, selectionStart, selectionEnd) {
      if (!DOM.isTextualInput(focused)) {
        return;
      }
      let wasFocused = focused.matches(":focus");
      if (focused.readOnly) {
        focused.blur();
      }
      if (!wasFocused) {
        focused.focus();
      }
      if (this.hasSelectionRange(focused)) {
        focused.setSelectionRange(selectionStart, selectionEnd);
      }
    },
    isFormInput(el) {
      return /^(?:input|select|textarea)$/i.test(el.tagName) && el.type !== "button";
    },
    syncAttrsToProps(el) {
      if (el instanceof HTMLInputElement && CHECKABLE_INPUTS.indexOf(el.type.toLocaleLowerCase()) >= 0) {
        el.checked = el.getAttribute("checked") !== null;
      }
    },
    isTextualInput(el) {
      return FOCUSABLE_INPUTS.indexOf(el.type) >= 0;
    },
    isNowTriggerFormExternal(el, phxTriggerExternal) {
      return el.getAttribute && el.getAttribute(phxTriggerExternal) !== null;
    },
    syncPendingRef(fromEl, toEl, disableWith) {
      let ref = fromEl.getAttribute(PHX_REF);
      if (ref === null) {
        return true;
      }
      let refSrc = fromEl.getAttribute(PHX_REF_SRC);
      if (DOM.isFormInput(fromEl) || fromEl.getAttribute(disableWith) !== null) {
        if (DOM.isUploadInput(fromEl)) {
          DOM.mergeAttrs(fromEl, toEl, { isIgnored: true });
        }
        DOM.putPrivate(fromEl, PHX_REF, toEl);
        return false;
      } else {
        PHX_EVENT_CLASSES.forEach((className) => {
          fromEl.classList.contains(className) && toEl.classList.add(className);
        });
        toEl.setAttribute(PHX_REF, ref);
        toEl.setAttribute(PHX_REF_SRC, refSrc);
        return true;
      }
    },
    cleanChildNodes(container, phxUpdate) {
      if (DOM.isPhxUpdate(container, phxUpdate, ["append", "prepend"])) {
        let toRemove = [];
        container.childNodes.forEach((childNode) => {
          if (!childNode.id) {
            let isEmptyTextNode = childNode.nodeType === Node.TEXT_NODE && childNode.nodeValue.trim() === "";
            if (!isEmptyTextNode) {
              logError(`only HTML element tags with an id are allowed inside containers with phx-update.

removing illegal node: "${(childNode.outerHTML || childNode.nodeValue).trim()}"

`);
            }
            toRemove.push(childNode);
          }
        });
        toRemove.forEach((childNode) => childNode.remove());
      }
    },
    replaceRootContainer(container, tagName, attrs) {
      let retainedAttrs = /* @__PURE__ */ new Set(["id", PHX_SESSION, PHX_STATIC, PHX_MAIN, PHX_ROOT_ID]);
      if (container.tagName.toLowerCase() === tagName.toLowerCase()) {
        Array.from(container.attributes).filter((attr) => !retainedAttrs.has(attr.name.toLowerCase())).forEach((attr) => container.removeAttribute(attr.name));
        Object.keys(attrs).filter((name) => !retainedAttrs.has(name.toLowerCase())).forEach((attr) => container.setAttribute(attr, attrs[attr]));
        return container;
      } else {
        let newContainer = document.createElement(tagName);
        Object.keys(attrs).forEach((attr) => newContainer.setAttribute(attr, attrs[attr]));
        retainedAttrs.forEach((attr) => newContainer.setAttribute(attr, container.getAttribute(attr)));
        newContainer.innerHTML = container.innerHTML;
        container.replaceWith(newContainer);
        return newContainer;
      }
    },
    getSticky(el, name, defaultVal) {
      let op = (DOM.private(el, "sticky") || []).find(([existingName]) => name === existingName);
      if (op) {
        let [_name, _op, stashedResult] = op;
        return stashedResult;
      } else {
        return typeof defaultVal === "function" ? defaultVal() : defaultVal;
      }
    },
    deleteSticky(el, name) {
      this.updatePrivate(el, "sticky", [], (ops) => {
        return ops.filter(([existingName, _2]) => existingName !== name);
      });
    },
    putSticky(el, name, op) {
      let stashedResult = op(el);
      this.updatePrivate(el, "sticky", [], (ops) => {
        let existingIndex = ops.findIndex(([existingName]) => name === existingName);
        if (existingIndex >= 0) {
          ops[existingIndex] = [name, op, stashedResult];
        } else {
          ops.push([name, op, stashedResult]);
        }
        return ops;
      });
    },
    applyStickyOperations(el) {
      let ops = DOM.private(el, "sticky");
      if (!ops) {
        return;
      }
      ops.forEach(([name, op, _stashed]) => this.putSticky(el, name, op));
    }
  };
  var dom_default = DOM;
  var UploadEntry = class {
    static isActive(fileEl, file) {
      let isNew = file._phxRef === void 0;
      let activeRefs = fileEl.getAttribute(PHX_ACTIVE_ENTRY_REFS).split(",");
      let isActive = activeRefs.indexOf(LiveUploader.genFileRef(file)) >= 0;
      return file.size > 0 && (isNew || isActive);
    }
    static isPreflighted(fileEl, file) {
      let preflightedRefs = fileEl.getAttribute(PHX_PREFLIGHTED_REFS).split(",");
      let isPreflighted = preflightedRefs.indexOf(LiveUploader.genFileRef(file)) >= 0;
      return isPreflighted && this.isActive(fileEl, file);
    }
    constructor(fileEl, file, view) {
      this.ref = LiveUploader.genFileRef(file);
      this.fileEl = fileEl;
      this.file = file;
      this.view = view;
      this.meta = null;
      this._isCancelled = false;
      this._isDone = false;
      this._progress = 0;
      this._lastProgressSent = -1;
      this._onDone = function() {
      };
      this._onElUpdated = this.onElUpdated.bind(this);
      this.fileEl.addEventListener(PHX_LIVE_FILE_UPDATED, this._onElUpdated);
    }
    metadata() {
      return this.meta;
    }
    progress(progress) {
      this._progress = Math.floor(progress);
      if (this._progress > this._lastProgressSent) {
        if (this._progress >= 100) {
          this._progress = 100;
          this._lastProgressSent = 100;
          this._isDone = true;
          this.view.pushFileProgress(this.fileEl, this.ref, 100, () => {
            LiveUploader.untrackFile(this.fileEl, this.file);
            this._onDone();
          });
        } else {
          this._lastProgressSent = this._progress;
          this.view.pushFileProgress(this.fileEl, this.ref, this._progress);
        }
      }
    }
    cancel() {
      this._isCancelled = true;
      this._isDone = true;
      this._onDone();
    }
    isDone() {
      return this._isDone;
    }
    error(reason = "failed") {
      this.fileEl.removeEventListener(PHX_LIVE_FILE_UPDATED, this._onElUpdated);
      this.view.pushFileProgress(this.fileEl, this.ref, { error: reason });
      LiveUploader.clearFiles(this.fileEl);
    }
    onDone(callback) {
      this._onDone = () => {
        this.fileEl.removeEventListener(PHX_LIVE_FILE_UPDATED, this._onElUpdated);
        callback();
      };
    }
    onElUpdated() {
      let activeRefs = this.fileEl.getAttribute(PHX_ACTIVE_ENTRY_REFS).split(",");
      if (activeRefs.indexOf(this.ref) === -1) {
        this.cancel();
      }
    }
    toPreflightPayload() {
      return {
        last_modified: this.file.lastModified,
        name: this.file.name,
        relative_path: this.file.webkitRelativePath,
        size: this.file.size,
        type: this.file.type,
        ref: this.ref
      };
    }
    uploader(uploaders) {
      if (this.meta.uploader) {
        let callback = uploaders[this.meta.uploader] || logError(`no uploader configured for ${this.meta.uploader}`);
        return { name: this.meta.uploader, callback };
      } else {
        return { name: "channel", callback: channelUploader };
      }
    }
    zipPostFlight(resp) {
      this.meta = resp.entries[this.ref];
      if (!this.meta) {
        logError(`no preflight upload response returned with ref ${this.ref}`, { input: this.fileEl, response: resp });
      }
    }
  };
  var liveUploaderFileRef = 0;
  var LiveUploader = class {
    static genFileRef(file) {
      let ref = file._phxRef;
      if (ref !== void 0) {
        return ref;
      } else {
        file._phxRef = (liveUploaderFileRef++).toString();
        return file._phxRef;
      }
    }
    static getEntryDataURL(inputEl, ref, callback) {
      let file = this.activeFiles(inputEl).find((file2) => this.genFileRef(file2) === ref);
      callback(URL.createObjectURL(file));
    }
    static hasUploadsInProgress(formEl) {
      let active = 0;
      dom_default.findUploadInputs(formEl).forEach((input) => {
        if (input.getAttribute(PHX_PREFLIGHTED_REFS) !== input.getAttribute(PHX_DONE_REFS)) {
          active++;
        }
      });
      return active > 0;
    }
    static serializeUploads(inputEl) {
      let files = this.activeFiles(inputEl);
      let fileData = {};
      files.forEach((file) => {
        let entry = { path: inputEl.name };
        let uploadRef = inputEl.getAttribute(PHX_UPLOAD_REF);
        fileData[uploadRef] = fileData[uploadRef] || [];
        entry.ref = this.genFileRef(file);
        entry.last_modified = file.lastModified;
        entry.name = file.name || entry.ref;
        entry.relative_path = file.webkitRelativePath;
        entry.type = file.type;
        entry.size = file.size;
        fileData[uploadRef].push(entry);
      });
      return fileData;
    }
    static clearFiles(inputEl) {
      inputEl.value = null;
      inputEl.removeAttribute(PHX_UPLOAD_REF);
      dom_default.putPrivate(inputEl, "files", []);
    }
    static untrackFile(inputEl, file) {
      dom_default.putPrivate(inputEl, "files", dom_default.private(inputEl, "files").filter((f2) => !Object.is(f2, file)));
    }
    static trackFiles(inputEl, files, dataTransfer) {
      if (inputEl.getAttribute("multiple") !== null) {
        let newFiles = files.filter((file) => !this.activeFiles(inputEl).find((f2) => Object.is(f2, file)));
        dom_default.putPrivate(inputEl, "files", this.activeFiles(inputEl).concat(newFiles));
        inputEl.value = null;
      } else {
        if (dataTransfer && dataTransfer.files.length > 0) {
          inputEl.files = dataTransfer.files;
        }
        dom_default.putPrivate(inputEl, "files", files);
      }
    }
    static activeFileInputs(formEl) {
      let fileInputs = dom_default.findUploadInputs(formEl);
      return Array.from(fileInputs).filter((el) => el.files && this.activeFiles(el).length > 0);
    }
    static activeFiles(input) {
      return (dom_default.private(input, "files") || []).filter((f2) => UploadEntry.isActive(input, f2));
    }
    static inputsAwaitingPreflight(formEl) {
      let fileInputs = dom_default.findUploadInputs(formEl);
      return Array.from(fileInputs).filter((input) => this.filesAwaitingPreflight(input).length > 0);
    }
    static filesAwaitingPreflight(input) {
      return this.activeFiles(input).filter((f2) => !UploadEntry.isPreflighted(input, f2));
    }
    constructor(inputEl, view, onComplete) {
      this.view = view;
      this.onComplete = onComplete;
      this._entries = Array.from(LiveUploader.filesAwaitingPreflight(inputEl) || []).map((file) => new UploadEntry(inputEl, file, view));
      this.numEntriesInProgress = this._entries.length;
    }
    entries() {
      return this._entries;
    }
    initAdapterUpload(resp, onError, liveSocket2) {
      this._entries = this._entries.map((entry) => {
        entry.zipPostFlight(resp);
        entry.onDone(() => {
          this.numEntriesInProgress--;
          if (this.numEntriesInProgress === 0) {
            this.onComplete();
          }
        });
        return entry;
      });
      let groupedEntries = this._entries.reduce((acc, entry) => {
        let { name, callback } = entry.uploader(liveSocket2.uploaders);
        acc[name] = acc[name] || { callback, entries: [] };
        acc[name].entries.push(entry);
        return acc;
      }, {});
      for (let name in groupedEntries) {
        let { callback, entries } = groupedEntries[name];
        callback(entries, onError, resp, liveSocket2);
      }
    }
  };
  var ARIA = {
    focusMain() {
      let target = document.querySelector("main h1, main, h1");
      if (target) {
        let origTabIndex = target.tabIndex;
        target.tabIndex = -1;
        target.focus();
        target.tabIndex = origTabIndex;
      }
    },
    anyOf(instance, classes) {
      return classes.find((name) => instance instanceof name);
    },
    isFocusable(el, interactiveOnly) {
      return el instanceof HTMLAnchorElement && el.rel !== "ignore" || el instanceof HTMLAreaElement && el.href !== void 0 || !el.disabled && this.anyOf(el, [HTMLInputElement, HTMLSelectElement, HTMLTextAreaElement, HTMLButtonElement]) || el instanceof HTMLIFrameElement || (el.tabIndex > 0 || !interactiveOnly && el.tabIndex === 0 && el.getAttribute("tabindex") !== null && el.getAttribute("aria-hidden") !== "true");
    },
    attemptFocus(el, interactiveOnly) {
      if (this.isFocusable(el, interactiveOnly)) {
        try {
          el.focus();
        } catch (e6) {
        }
      }
      return !!document.activeElement && document.activeElement.isSameNode(el);
    },
    focusFirstInteractive(el) {
      let child = el.firstElementChild;
      while (child) {
        if (this.attemptFocus(child, true) || this.focusFirstInteractive(child, true)) {
          return true;
        }
        child = child.nextElementSibling;
      }
    },
    focusFirst(el) {
      let child = el.firstElementChild;
      while (child) {
        if (this.attemptFocus(child) || this.focusFirst(child)) {
          return true;
        }
        child = child.nextElementSibling;
      }
    },
    focusLast(el) {
      let child = el.lastElementChild;
      while (child) {
        if (this.attemptFocus(child) || this.focusLast(child)) {
          return true;
        }
        child = child.previousElementSibling;
      }
    }
  };
  var aria_default = ARIA;
  var Hooks = {
    LiveFileUpload: {
      activeRefs() {
        return this.el.getAttribute(PHX_ACTIVE_ENTRY_REFS);
      },
      preflightedRefs() {
        return this.el.getAttribute(PHX_PREFLIGHTED_REFS);
      },
      mounted() {
        this.preflightedWas = this.preflightedRefs();
      },
      updated() {
        let newPreflights = this.preflightedRefs();
        if (this.preflightedWas !== newPreflights) {
          this.preflightedWas = newPreflights;
          if (newPreflights === "") {
            this.__view.cancelSubmit(this.el.form);
          }
        }
        if (this.activeRefs() === "") {
          this.el.value = null;
        }
        this.el.dispatchEvent(new CustomEvent(PHX_LIVE_FILE_UPDATED));
      }
    },
    LiveImgPreview: {
      mounted() {
        this.ref = this.el.getAttribute("data-phx-entry-ref");
        this.inputEl = document.getElementById(this.el.getAttribute(PHX_UPLOAD_REF));
        LiveUploader.getEntryDataURL(this.inputEl, this.ref, (url) => {
          this.url = url;
          this.el.src = url;
        });
      },
      destroyed() {
        URL.revokeObjectURL(this.url);
      }
    },
    FocusWrap: {
      mounted() {
        this.focusStart = this.el.firstElementChild;
        this.focusEnd = this.el.lastElementChild;
        this.focusStart.addEventListener("focus", () => aria_default.focusLast(this.el));
        this.focusEnd.addEventListener("focus", () => aria_default.focusFirst(this.el));
        this.el.addEventListener("phx:show-end", () => this.el.focus());
        if (window.getComputedStyle(this.el).display !== "none") {
          aria_default.focusFirst(this.el);
        }
      }
    }
  };
  var hooks_default = Hooks;
  var DOMPostMorphRestorer = class {
    constructor(containerBefore, containerAfter, updateType) {
      let idsBefore = /* @__PURE__ */ new Set();
      let idsAfter = new Set([...containerAfter.children].map((child) => child.id));
      let elementsToModify = [];
      Array.from(containerBefore.children).forEach((child) => {
        if (child.id) {
          idsBefore.add(child.id);
          if (idsAfter.has(child.id)) {
            let previousElementId = child.previousElementSibling && child.previousElementSibling.id;
            elementsToModify.push({ elementId: child.id, previousElementId });
          }
        }
      });
      this.containerId = containerAfter.id;
      this.updateType = updateType;
      this.elementsToModify = elementsToModify;
      this.elementIdsToAdd = [...idsAfter].filter((id) => !idsBefore.has(id));
    }
    perform() {
      let container = dom_default.byId(this.containerId);
      this.elementsToModify.forEach((elementToModify) => {
        if (elementToModify.previousElementId) {
          maybe(document.getElementById(elementToModify.previousElementId), (previousElem) => {
            maybe(document.getElementById(elementToModify.elementId), (elem) => {
              let isInRightPlace = elem.previousElementSibling && elem.previousElementSibling.id == previousElem.id;
              if (!isInRightPlace) {
                previousElem.insertAdjacentElement("afterend", elem);
              }
            });
          });
        } else {
          maybe(document.getElementById(elementToModify.elementId), (elem) => {
            let isInRightPlace = elem.previousElementSibling == null;
            if (!isInRightPlace) {
              container.insertAdjacentElement("afterbegin", elem);
            }
          });
        }
      });
      if (this.updateType == "prepend") {
        this.elementIdsToAdd.reverse().forEach((elemId) => {
          maybe(document.getElementById(elemId), (elem) => container.insertAdjacentElement("afterbegin", elem));
        });
      }
    }
  };
  var DOCUMENT_FRAGMENT_NODE = 11;
  function morphAttrs(fromNode, toNode) {
    var toNodeAttrs = toNode.attributes;
    var attr;
    var attrName;
    var attrNamespaceURI;
    var attrValue;
    var fromValue;
    if (toNode.nodeType === DOCUMENT_FRAGMENT_NODE || fromNode.nodeType === DOCUMENT_FRAGMENT_NODE) {
      return;
    }
    for (var i2 = toNodeAttrs.length - 1; i2 >= 0; i2--) {
      attr = toNodeAttrs[i2];
      attrName = attr.name;
      attrNamespaceURI = attr.namespaceURI;
      attrValue = attr.value;
      if (attrNamespaceURI) {
        attrName = attr.localName || attrName;
        fromValue = fromNode.getAttributeNS(attrNamespaceURI, attrName);
        if (fromValue !== attrValue) {
          if (attr.prefix === "xmlns") {
            attrName = attr.name;
          }
          fromNode.setAttributeNS(attrNamespaceURI, attrName, attrValue);
        }
      } else {
        fromValue = fromNode.getAttribute(attrName);
        if (fromValue !== attrValue) {
          fromNode.setAttribute(attrName, attrValue);
        }
      }
    }
    var fromNodeAttrs = fromNode.attributes;
    for (var d2 = fromNodeAttrs.length - 1; d2 >= 0; d2--) {
      attr = fromNodeAttrs[d2];
      attrName = attr.name;
      attrNamespaceURI = attr.namespaceURI;
      if (attrNamespaceURI) {
        attrName = attr.localName || attrName;
        if (!toNode.hasAttributeNS(attrNamespaceURI, attrName)) {
          fromNode.removeAttributeNS(attrNamespaceURI, attrName);
        }
      } else {
        if (!toNode.hasAttribute(attrName)) {
          fromNode.removeAttribute(attrName);
        }
      }
    }
  }
  var range;
  var NS_XHTML = "http://www.w3.org/1999/xhtml";
  var doc = typeof document === "undefined" ? void 0 : document;
  var HAS_TEMPLATE_SUPPORT = !!doc && "content" in doc.createElement("template");
  var HAS_RANGE_SUPPORT = !!doc && doc.createRange && "createContextualFragment" in doc.createRange();
  function createFragmentFromTemplate(str) {
    var template = doc.createElement("template");
    template.innerHTML = str;
    return template.content.childNodes[0];
  }
  function createFragmentFromRange(str) {
    if (!range) {
      range = doc.createRange();
      range.selectNode(doc.body);
    }
    var fragment = range.createContextualFragment(str);
    return fragment.childNodes[0];
  }
  function createFragmentFromWrap(str) {
    var fragment = doc.createElement("body");
    fragment.innerHTML = str;
    return fragment.childNodes[0];
  }
  function toElement(str) {
    str = str.trim();
    if (HAS_TEMPLATE_SUPPORT) {
      return createFragmentFromTemplate(str);
    } else if (HAS_RANGE_SUPPORT) {
      return createFragmentFromRange(str);
    }
    return createFragmentFromWrap(str);
  }
  function compareNodeNames(fromEl, toEl) {
    var fromNodeName = fromEl.nodeName;
    var toNodeName = toEl.nodeName;
    var fromCodeStart, toCodeStart;
    if (fromNodeName === toNodeName) {
      return true;
    }
    fromCodeStart = fromNodeName.charCodeAt(0);
    toCodeStart = toNodeName.charCodeAt(0);
    if (fromCodeStart <= 90 && toCodeStart >= 97) {
      return fromNodeName === toNodeName.toUpperCase();
    } else if (toCodeStart <= 90 && fromCodeStart >= 97) {
      return toNodeName === fromNodeName.toUpperCase();
    } else {
      return false;
    }
  }
  function createElementNS(name, namespaceURI) {
    return !namespaceURI || namespaceURI === NS_XHTML ? doc.createElement(name) : doc.createElementNS(namespaceURI, name);
  }
  function moveChildren(fromEl, toEl) {
    var curChild = fromEl.firstChild;
    while (curChild) {
      var nextChild = curChild.nextSibling;
      toEl.appendChild(curChild);
      curChild = nextChild;
    }
    return toEl;
  }
  function syncBooleanAttrProp(fromEl, toEl, name) {
    if (fromEl[name] !== toEl[name]) {
      fromEl[name] = toEl[name];
      if (fromEl[name]) {
        fromEl.setAttribute(name, "");
      } else {
        fromEl.removeAttribute(name);
      }
    }
  }
  var specialElHandlers = {
    OPTION: function(fromEl, toEl) {
      var parentNode = fromEl.parentNode;
      if (parentNode) {
        var parentName = parentNode.nodeName.toUpperCase();
        if (parentName === "OPTGROUP") {
          parentNode = parentNode.parentNode;
          parentName = parentNode && parentNode.nodeName.toUpperCase();
        }
        if (parentName === "SELECT" && !parentNode.hasAttribute("multiple")) {
          if (fromEl.hasAttribute("selected") && !toEl.selected) {
            fromEl.setAttribute("selected", "selected");
            fromEl.removeAttribute("selected");
          }
          parentNode.selectedIndex = -1;
        }
      }
      syncBooleanAttrProp(fromEl, toEl, "selected");
    },
    INPUT: function(fromEl, toEl) {
      syncBooleanAttrProp(fromEl, toEl, "checked");
      syncBooleanAttrProp(fromEl, toEl, "disabled");
      if (fromEl.value !== toEl.value) {
        fromEl.value = toEl.value;
      }
      if (!toEl.hasAttribute("value")) {
        fromEl.removeAttribute("value");
      }
    },
    TEXTAREA: function(fromEl, toEl) {
      var newValue = toEl.value;
      if (fromEl.value !== newValue) {
        fromEl.value = newValue;
      }
      var firstChild = fromEl.firstChild;
      if (firstChild) {
        var oldValue = firstChild.nodeValue;
        if (oldValue == newValue || !newValue && oldValue == fromEl.placeholder) {
          return;
        }
        firstChild.nodeValue = newValue;
      }
    },
    SELECT: function(fromEl, toEl) {
      if (!toEl.hasAttribute("multiple")) {
        var selectedIndex = -1;
        var i2 = 0;
        var curChild = fromEl.firstChild;
        var optgroup;
        var nodeName;
        while (curChild) {
          nodeName = curChild.nodeName && curChild.nodeName.toUpperCase();
          if (nodeName === "OPTGROUP") {
            optgroup = curChild;
            curChild = optgroup.firstChild;
          } else {
            if (nodeName === "OPTION") {
              if (curChild.hasAttribute("selected")) {
                selectedIndex = i2;
                break;
              }
              i2++;
            }
            curChild = curChild.nextSibling;
            if (!curChild && optgroup) {
              curChild = optgroup.nextSibling;
              optgroup = null;
            }
          }
        }
        fromEl.selectedIndex = selectedIndex;
      }
    }
  };
  var ELEMENT_NODE = 1;
  var DOCUMENT_FRAGMENT_NODE$1 = 11;
  var TEXT_NODE = 3;
  var COMMENT_NODE = 8;
  function noop() {
  }
  function defaultGetNodeKey(node) {
    if (node) {
      return node.getAttribute && node.getAttribute("id") || node.id;
    }
  }
  function morphdomFactory(morphAttrs2) {
    return function morphdom2(fromNode, toNode, options) {
      if (!options) {
        options = {};
      }
      if (typeof toNode === "string") {
        if (fromNode.nodeName === "#document" || fromNode.nodeName === "HTML" || fromNode.nodeName === "BODY") {
          var toNodeHtml = toNode;
          toNode = doc.createElement("html");
          toNode.innerHTML = toNodeHtml;
        } else {
          toNode = toElement(toNode);
        }
      } else if (toNode.nodeType === DOCUMENT_FRAGMENT_NODE$1) {
        toNode = toNode.firstElementChild;
      }
      var getNodeKey = options.getNodeKey || defaultGetNodeKey;
      var onBeforeNodeAdded = options.onBeforeNodeAdded || noop;
      var onNodeAdded = options.onNodeAdded || noop;
      var onBeforeElUpdated = options.onBeforeElUpdated || noop;
      var onElUpdated = options.onElUpdated || noop;
      var onBeforeNodeDiscarded = options.onBeforeNodeDiscarded || noop;
      var onNodeDiscarded = options.onNodeDiscarded || noop;
      var onBeforeElChildrenUpdated = options.onBeforeElChildrenUpdated || noop;
      var skipFromChildren = options.skipFromChildren || noop;
      var addChild = options.addChild || function(parent, child) {
        return parent.appendChild(child);
      };
      var childrenOnly = options.childrenOnly === true;
      var fromNodesLookup = /* @__PURE__ */ Object.create(null);
      var keyedRemovalList = [];
      function addKeyedRemoval(key) {
        keyedRemovalList.push(key);
      }
      function walkDiscardedChildNodes(node, skipKeyedNodes) {
        if (node.nodeType === ELEMENT_NODE) {
          var curChild = node.firstChild;
          while (curChild) {
            var key = void 0;
            if (skipKeyedNodes && (key = getNodeKey(curChild))) {
              addKeyedRemoval(key);
            } else {
              onNodeDiscarded(curChild);
              if (curChild.firstChild) {
                walkDiscardedChildNodes(curChild, skipKeyedNodes);
              }
            }
            curChild = curChild.nextSibling;
          }
        }
      }
      function removeNode(node, parentNode, skipKeyedNodes) {
        if (onBeforeNodeDiscarded(node) === false) {
          return;
        }
        if (parentNode) {
          parentNode.removeChild(node);
        }
        onNodeDiscarded(node);
        walkDiscardedChildNodes(node, skipKeyedNodes);
      }
      function indexTree(node) {
        if (node.nodeType === ELEMENT_NODE || node.nodeType === DOCUMENT_FRAGMENT_NODE$1) {
          var curChild = node.firstChild;
          while (curChild) {
            var key = getNodeKey(curChild);
            if (key) {
              fromNodesLookup[key] = curChild;
            }
            indexTree(curChild);
            curChild = curChild.nextSibling;
          }
        }
      }
      indexTree(fromNode);
      function handleNodeAdded(el) {
        onNodeAdded(el);
        var curChild = el.firstChild;
        while (curChild) {
          var nextSibling = curChild.nextSibling;
          var key = getNodeKey(curChild);
          if (key) {
            var unmatchedFromEl = fromNodesLookup[key];
            if (unmatchedFromEl && compareNodeNames(curChild, unmatchedFromEl)) {
              curChild.parentNode.replaceChild(unmatchedFromEl, curChild);
              morphEl(unmatchedFromEl, curChild);
            } else {
              handleNodeAdded(curChild);
            }
          } else {
            handleNodeAdded(curChild);
          }
          curChild = nextSibling;
        }
      }
      function cleanupFromEl(fromEl, curFromNodeChild, curFromNodeKey) {
        while (curFromNodeChild) {
          var fromNextSibling = curFromNodeChild.nextSibling;
          if (curFromNodeKey = getNodeKey(curFromNodeChild)) {
            addKeyedRemoval(curFromNodeKey);
          } else {
            removeNode(curFromNodeChild, fromEl, true);
          }
          curFromNodeChild = fromNextSibling;
        }
      }
      function morphEl(fromEl, toEl, childrenOnly2) {
        var toElKey = getNodeKey(toEl);
        if (toElKey) {
          delete fromNodesLookup[toElKey];
        }
        if (!childrenOnly2) {
          if (onBeforeElUpdated(fromEl, toEl) === false) {
            return;
          }
          morphAttrs2(fromEl, toEl);
          onElUpdated(fromEl);
          if (onBeforeElChildrenUpdated(fromEl, toEl) === false) {
            return;
          }
        }
        if (fromEl.nodeName !== "TEXTAREA") {
          morphChildren(fromEl, toEl);
        } else {
          specialElHandlers.TEXTAREA(fromEl, toEl);
        }
      }
      function morphChildren(fromEl, toEl) {
        var skipFrom = skipFromChildren(fromEl);
        var curToNodeChild = toEl.firstChild;
        var curFromNodeChild = fromEl.firstChild;
        var curToNodeKey;
        var curFromNodeKey;
        var fromNextSibling;
        var toNextSibling;
        var matchingFromEl;
        outer:
          while (curToNodeChild) {
            toNextSibling = curToNodeChild.nextSibling;
            curToNodeKey = getNodeKey(curToNodeChild);
            while (!skipFrom && curFromNodeChild) {
              fromNextSibling = curFromNodeChild.nextSibling;
              if (curToNodeChild.isSameNode && curToNodeChild.isSameNode(curFromNodeChild)) {
                curToNodeChild = toNextSibling;
                curFromNodeChild = fromNextSibling;
                continue outer;
              }
              curFromNodeKey = getNodeKey(curFromNodeChild);
              var curFromNodeType = curFromNodeChild.nodeType;
              var isCompatible = void 0;
              if (curFromNodeType === curToNodeChild.nodeType) {
                if (curFromNodeType === ELEMENT_NODE) {
                  if (curToNodeKey) {
                    if (curToNodeKey !== curFromNodeKey) {
                      if (matchingFromEl = fromNodesLookup[curToNodeKey]) {
                        if (fromNextSibling === matchingFromEl) {
                          isCompatible = false;
                        } else {
                          fromEl.insertBefore(matchingFromEl, curFromNodeChild);
                          if (curFromNodeKey) {
                            addKeyedRemoval(curFromNodeKey);
                          } else {
                            removeNode(curFromNodeChild, fromEl, true);
                          }
                          curFromNodeChild = matchingFromEl;
                        }
                      } else {
                        isCompatible = false;
                      }
                    }
                  } else if (curFromNodeKey) {
                    isCompatible = false;
                  }
                  isCompatible = isCompatible !== false && compareNodeNames(curFromNodeChild, curToNodeChild);
                  if (isCompatible) {
                    morphEl(curFromNodeChild, curToNodeChild);
                  }
                } else if (curFromNodeType === TEXT_NODE || curFromNodeType == COMMENT_NODE) {
                  isCompatible = true;
                  if (curFromNodeChild.nodeValue !== curToNodeChild.nodeValue) {
                    curFromNodeChild.nodeValue = curToNodeChild.nodeValue;
                  }
                }
              }
              if (isCompatible) {
                curToNodeChild = toNextSibling;
                curFromNodeChild = fromNextSibling;
                continue outer;
              }
              if (curFromNodeKey) {
                addKeyedRemoval(curFromNodeKey);
              } else {
                removeNode(curFromNodeChild, fromEl, true);
              }
              curFromNodeChild = fromNextSibling;
            }
            if (curToNodeKey && (matchingFromEl = fromNodesLookup[curToNodeKey]) && compareNodeNames(matchingFromEl, curToNodeChild)) {
              if (!skipFrom) {
                addChild(fromEl, matchingFromEl);
              }
              morphEl(matchingFromEl, curToNodeChild);
            } else {
              var onBeforeNodeAddedResult = onBeforeNodeAdded(curToNodeChild);
              if (onBeforeNodeAddedResult !== false) {
                if (onBeforeNodeAddedResult) {
                  curToNodeChild = onBeforeNodeAddedResult;
                }
                if (curToNodeChild.actualize) {
                  curToNodeChild = curToNodeChild.actualize(fromEl.ownerDocument || doc);
                }
                addChild(fromEl, curToNodeChild);
                handleNodeAdded(curToNodeChild);
              }
            }
            curToNodeChild = toNextSibling;
            curFromNodeChild = fromNextSibling;
          }
        cleanupFromEl(fromEl, curFromNodeChild, curFromNodeKey);
        var specialElHandler = specialElHandlers[fromEl.nodeName];
        if (specialElHandler) {
          specialElHandler(fromEl, toEl);
        }
      }
      var morphedNode = fromNode;
      var morphedNodeType = morphedNode.nodeType;
      var toNodeType = toNode.nodeType;
      if (!childrenOnly) {
        if (morphedNodeType === ELEMENT_NODE) {
          if (toNodeType === ELEMENT_NODE) {
            if (!compareNodeNames(fromNode, toNode)) {
              onNodeDiscarded(fromNode);
              morphedNode = moveChildren(fromNode, createElementNS(toNode.nodeName, toNode.namespaceURI));
            }
          } else {
            morphedNode = toNode;
          }
        } else if (morphedNodeType === TEXT_NODE || morphedNodeType === COMMENT_NODE) {
          if (toNodeType === morphedNodeType) {
            if (morphedNode.nodeValue !== toNode.nodeValue) {
              morphedNode.nodeValue = toNode.nodeValue;
            }
            return morphedNode;
          } else {
            morphedNode = toNode;
          }
        }
      }
      if (morphedNode === toNode) {
        onNodeDiscarded(fromNode);
      } else {
        if (toNode.isSameNode && toNode.isSameNode(morphedNode)) {
          return;
        }
        morphEl(morphedNode, toNode, childrenOnly);
        if (keyedRemovalList) {
          for (var i2 = 0, len = keyedRemovalList.length; i2 < len; i2++) {
            var elToRemove = fromNodesLookup[keyedRemovalList[i2]];
            if (elToRemove) {
              removeNode(elToRemove, elToRemove.parentNode, false);
            }
          }
        }
      }
      if (!childrenOnly && morphedNode !== fromNode && fromNode.parentNode) {
        if (morphedNode.actualize) {
          morphedNode = morphedNode.actualize(fromNode.ownerDocument || doc);
        }
        fromNode.parentNode.replaceChild(morphedNode, fromNode);
      }
      return morphedNode;
    };
  }
  var morphdom = morphdomFactory(morphAttrs);
  var morphdom_esm_default = morphdom;
  var DOMPatch = class {
    static patchEl(fromEl, toEl, activeElement) {
      morphdom_esm_default(fromEl, toEl, {
        childrenOnly: false,
        onBeforeElUpdated: (fromEl2, toEl2) => {
          if (activeElement && activeElement.isSameNode(fromEl2) && dom_default.isFormInput(fromEl2)) {
            dom_default.mergeFocusedInput(fromEl2, toEl2);
            return false;
          }
        }
      });
    }
    constructor(view, container, id, html, streams, targetCID) {
      this.view = view;
      this.liveSocket = view.liveSocket;
      this.container = container;
      this.id = id;
      this.rootID = view.root.id;
      this.html = html;
      this.streams = streams;
      this.streamInserts = {};
      this.targetCID = targetCID;
      this.cidPatch = isCid(this.targetCID);
      this.pendingRemoves = [];
      this.phxRemove = this.liveSocket.binding("remove");
      this.callbacks = {
        beforeadded: [],
        beforeupdated: [],
        beforephxChildAdded: [],
        afteradded: [],
        afterupdated: [],
        afterdiscarded: [],
        afterphxChildAdded: [],
        aftertransitionsDiscarded: []
      };
    }
    before(kind, callback) {
      this.callbacks[`before${kind}`].push(callback);
    }
    after(kind, callback) {
      this.callbacks[`after${kind}`].push(callback);
    }
    trackBefore(kind, ...args) {
      this.callbacks[`before${kind}`].forEach((callback) => callback(...args));
    }
    trackAfter(kind, ...args) {
      this.callbacks[`after${kind}`].forEach((callback) => callback(...args));
    }
    markPrunableContentForRemoval() {
      let phxUpdate = this.liveSocket.binding(PHX_UPDATE);
      dom_default.all(this.container, `[${phxUpdate}=${PHX_STREAM}]`, (el) => el.innerHTML = "");
      dom_default.all(this.container, `[${phxUpdate}=append] > *, [${phxUpdate}=prepend] > *`, (el) => {
        el.setAttribute(PHX_PRUNE, "");
      });
    }
    perform() {
      let { view, liveSocket: liveSocket2, container, html } = this;
      let targetContainer = this.isCIDPatch() ? this.targetCIDContainer(html) : container;
      if (this.isCIDPatch() && !targetContainer) {
        return;
      }
      let focused = liveSocket2.getActiveElement();
      let { selectionStart, selectionEnd } = focused && dom_default.hasSelectionRange(focused) ? focused : {};
      let phxUpdate = liveSocket2.binding(PHX_UPDATE);
      let phxFeedbackFor = liveSocket2.binding(PHX_FEEDBACK_FOR);
      let disableWith = liveSocket2.binding(PHX_DISABLE_WITH);
      let phxTriggerExternal = liveSocket2.binding(PHX_TRIGGER_ACTION);
      let added = [];
      let updates = [];
      let appendPrependUpdates = [];
      let externalFormTriggered = null;
      let diffHTML = liveSocket2.time("premorph container prep", () => {
        return this.buildDiffHTML(container, html, phxUpdate, targetContainer);
      });
      this.trackBefore("added", container);
      this.trackBefore("updated", container, container);
      liveSocket2.time("morphdom", () => {
        this.streams.forEach(([inserts, deleteIds]) => {
          this.streamInserts = Object.assign(this.streamInserts, inserts);
          deleteIds.forEach((id) => {
            let child = container.querySelector(`[id="${id}"]`);
            if (child) {
              if (!this.maybePendingRemove(child)) {
                child.remove();
                this.onNodeDiscarded(child);
              }
            }
          });
        });
        morphdom_esm_default(targetContainer, diffHTML, {
          childrenOnly: targetContainer.getAttribute(PHX_COMPONENT) === null,
          getNodeKey: (node) => {
            return dom_default.isPhxDestroyed(node) ? null : node.id;
          },
          skipFromChildren: (from) => {
            return from.getAttribute(phxUpdate) === PHX_STREAM;
          },
          addChild: (parent, child) => {
            let streamAt = child.id ? this.streamInserts[child.id] : void 0;
            if (streamAt === void 0) {
              return parent.appendChild(child);
            }
            if (streamAt === 0) {
              parent.insertAdjacentElement("afterbegin", child);
            } else if (streamAt === -1) {
              parent.appendChild(child);
            } else if (streamAt > 0) {
              let sibling = Array.from(parent.children)[streamAt];
              parent.insertBefore(child, sibling);
            }
          },
          onBeforeNodeAdded: (el) => {
            this.trackBefore("added", el);
            return el;
          },
          onNodeAdded: (el) => {
            if (el instanceof HTMLImageElement && el.srcset) {
              el.srcset = el.srcset;
            } else if (el instanceof HTMLVideoElement && el.autoplay) {
              el.play();
            }
            if (dom_default.isNowTriggerFormExternal(el, phxTriggerExternal)) {
              externalFormTriggered = el;
            }
            dom_default.discardError(targetContainer, el, phxFeedbackFor);
            if (dom_default.isPhxChild(el) && view.ownsElement(el) || dom_default.isPhxSticky(el) && view.ownsElement(el.parentNode)) {
              this.trackAfter("phxChildAdded", el);
            }
            added.push(el);
          },
          onNodeDiscarded: (el) => this.onNodeDiscarded(el),
          onBeforeNodeDiscarded: (el) => {
            if (el.getAttribute && el.getAttribute(PHX_PRUNE) !== null) {
              return true;
            }
            if (el.parentElement !== null && el.id && dom_default.isPhxUpdate(el.parentElement, phxUpdate, [PHX_STREAM, "append", "prepend"])) {
              return false;
            }
            if (this.maybePendingRemove(el)) {
              return false;
            }
            if (this.skipCIDSibling(el)) {
              return false;
            }
            return true;
          },
          onElUpdated: (el) => {
            if (dom_default.isNowTriggerFormExternal(el, phxTriggerExternal)) {
              externalFormTriggered = el;
            }
            updates.push(el);
            this.maybeReOrderStream(el);
          },
          onBeforeElUpdated: (fromEl, toEl) => {
            dom_default.cleanChildNodes(toEl, phxUpdate);
            if (this.skipCIDSibling(toEl)) {
              return false;
            }
            if (dom_default.isPhxSticky(fromEl)) {
              return false;
            }
            if (dom_default.isIgnored(fromEl, phxUpdate) || fromEl.form && fromEl.form.isSameNode(externalFormTriggered)) {
              this.trackBefore("updated", fromEl, toEl);
              dom_default.mergeAttrs(fromEl, toEl, { isIgnored: true });
              updates.push(fromEl);
              dom_default.applyStickyOperations(fromEl);
              return false;
            }
            if (fromEl.type === "number" && (fromEl.validity && fromEl.validity.badInput)) {
              return false;
            }
            if (!dom_default.syncPendingRef(fromEl, toEl, disableWith)) {
              if (dom_default.isUploadInput(fromEl)) {
                this.trackBefore("updated", fromEl, toEl);
                updates.push(fromEl);
              }
              dom_default.applyStickyOperations(fromEl);
              return false;
            }
            if (dom_default.isPhxChild(toEl)) {
              let prevSession = fromEl.getAttribute(PHX_SESSION);
              dom_default.mergeAttrs(fromEl, toEl, { exclude: [PHX_STATIC] });
              if (prevSession !== "") {
                fromEl.setAttribute(PHX_SESSION, prevSession);
              }
              fromEl.setAttribute(PHX_ROOT_ID, this.rootID);
              dom_default.applyStickyOperations(fromEl);
              return false;
            }
            dom_default.copyPrivates(toEl, fromEl);
            dom_default.discardError(targetContainer, toEl, phxFeedbackFor);
            let isFocusedFormEl = focused && fromEl.isSameNode(focused) && dom_default.isFormInput(fromEl);
            if (isFocusedFormEl && fromEl.type !== "hidden") {
              this.trackBefore("updated", fromEl, toEl);
              dom_default.mergeFocusedInput(fromEl, toEl);
              dom_default.syncAttrsToProps(fromEl);
              updates.push(fromEl);
              dom_default.applyStickyOperations(fromEl);
              return false;
            } else {
              if (dom_default.isPhxUpdate(toEl, phxUpdate, ["append", "prepend"])) {
                appendPrependUpdates.push(new DOMPostMorphRestorer(fromEl, toEl, toEl.getAttribute(phxUpdate)));
              }
              dom_default.syncAttrsToProps(toEl);
              dom_default.applyStickyOperations(toEl);
              this.trackBefore("updated", fromEl, toEl);
              return true;
            }
          }
        });
      });
      if (liveSocket2.isDebugEnabled()) {
        detectDuplicateIds();
      }
      if (appendPrependUpdates.length > 0) {
        liveSocket2.time("post-morph append/prepend restoration", () => {
          appendPrependUpdates.forEach((update) => update.perform());
        });
      }
      liveSocket2.silenceEvents(() => dom_default.restoreFocus(focused, selectionStart, selectionEnd));
      dom_default.dispatchEvent(document, "phx:update");
      added.forEach((el) => this.trackAfter("added", el));
      updates.forEach((el) => this.trackAfter("updated", el));
      this.transitionPendingRemoves();
      if (externalFormTriggered) {
        liveSocket2.unload();
        externalFormTriggered.submit();
      }
      return true;
    }
    onNodeDiscarded(el) {
      if (dom_default.isPhxChild(el) || dom_default.isPhxSticky(el)) {
        this.liveSocket.destroyViewByEl(el);
      }
      this.trackAfter("discarded", el);
    }
    maybePendingRemove(node) {
      if (node.getAttribute && node.getAttribute(this.phxRemove) !== null) {
        this.pendingRemoves.push(node);
        return true;
      } else {
        return false;
      }
    }
    maybeReOrderStream(el) {
      let streamAt = el.id ? this.streamInserts[el.id] : void 0;
      if (streamAt === void 0) {
        return;
      }
      if (streamAt === 0) {
        el.parentElement.insertBefore(el, el.parentElement.firstElementChild);
      } else if (streamAt > 0) {
        let children = Array.from(el.parentElement.children);
        let oldIndex = children.indexOf(el);
        if (streamAt >= children.length - 1) {
          el.parentElement.appendChild(el);
        } else {
          let sibling = children[streamAt];
          if (oldIndex > streamAt) {
            el.parentElement.insertBefore(el, sibling);
          } else {
            el.parentElement.insertBefore(el, sibling.nextElementSibling);
          }
        }
      }
    }
    transitionPendingRemoves() {
      let { pendingRemoves, liveSocket: liveSocket2 } = this;
      if (pendingRemoves.length > 0) {
        liveSocket2.transitionRemoves(pendingRemoves);
        liveSocket2.requestDOMUpdate(() => {
          pendingRemoves.forEach((el) => {
            let child = dom_default.firstPhxChild(el);
            if (child) {
              liveSocket2.destroyViewByEl(child);
            }
            el.remove();
          });
          this.trackAfter("transitionsDiscarded", pendingRemoves);
        });
      }
    }
    isCIDPatch() {
      return this.cidPatch;
    }
    skipCIDSibling(el) {
      return el.nodeType === Node.ELEMENT_NODE && el.getAttribute(PHX_SKIP) !== null;
    }
    targetCIDContainer(html) {
      if (!this.isCIDPatch()) {
        return;
      }
      let [first, ...rest] = dom_default.findComponentNodeList(this.container, this.targetCID);
      if (rest.length === 0 && dom_default.childNodeLength(html) === 1) {
        return first;
      } else {
        return first && first.parentNode;
      }
    }
    buildDiffHTML(container, html, phxUpdate, targetContainer) {
      let isCIDPatch = this.isCIDPatch();
      let isCIDWithSingleRoot = isCIDPatch && targetContainer.getAttribute(PHX_COMPONENT) === this.targetCID.toString();
      if (!isCIDPatch || isCIDWithSingleRoot) {
        return html;
      } else {
        let diffContainer = null;
        let template = document.createElement("template");
        diffContainer = dom_default.cloneNode(targetContainer);
        let [firstComponent, ...rest] = dom_default.findComponentNodeList(diffContainer, this.targetCID);
        template.innerHTML = html;
        rest.forEach((el) => el.remove());
        Array.from(diffContainer.childNodes).forEach((child) => {
          if (child.id && child.nodeType === Node.ELEMENT_NODE && child.getAttribute(PHX_COMPONENT) !== this.targetCID.toString()) {
            child.setAttribute(PHX_SKIP, "");
            child.innerHTML = "";
          }
        });
        Array.from(template.content.childNodes).forEach((el) => diffContainer.insertBefore(el, firstComponent));
        firstComponent.remove();
        return diffContainer.outerHTML;
      }
    }
    indexOf(parent, child) {
      return Array.from(parent.children).indexOf(child);
    }
  };
  var Rendered = class {
    static extract(diff) {
      let { [REPLY]: reply, [EVENTS]: events, [TITLE]: title } = diff;
      delete diff[REPLY];
      delete diff[EVENTS];
      delete diff[TITLE];
      return { diff, title, reply: reply || null, events: events || [] };
    }
    constructor(viewId, rendered) {
      this.viewId = viewId;
      this.rendered = {};
      this.mergeDiff(rendered);
    }
    parentViewId() {
      return this.viewId;
    }
    toString(onlyCids) {
      let [str, streams] = this.recursiveToString(this.rendered, this.rendered[COMPONENTS], onlyCids);
      return [str, streams];
    }
    recursiveToString(rendered, components = rendered[COMPONENTS], onlyCids) {
      onlyCids = onlyCids ? new Set(onlyCids) : null;
      let output = { buffer: "", components, onlyCids, streams: /* @__PURE__ */ new Set() };
      this.toOutputBuffer(rendered, null, output);
      return [output.buffer, output.streams];
    }
    componentCIDs(diff) {
      return Object.keys(diff[COMPONENTS] || {}).map((i2) => parseInt(i2));
    }
    isComponentOnlyDiff(diff) {
      if (!diff[COMPONENTS]) {
        return false;
      }
      return Object.keys(diff).length === 1;
    }
    getComponent(diff, cid) {
      return diff[COMPONENTS][cid];
    }
    mergeDiff(diff) {
      let newc = diff[COMPONENTS];
      let cache = {};
      delete diff[COMPONENTS];
      this.rendered = this.mutableMerge(this.rendered, diff);
      this.rendered[COMPONENTS] = this.rendered[COMPONENTS] || {};
      if (newc) {
        let oldc = this.rendered[COMPONENTS];
        for (let cid in newc) {
          newc[cid] = this.cachedFindComponent(cid, newc[cid], oldc, newc, cache);
        }
        for (let cid in newc) {
          oldc[cid] = newc[cid];
        }
        diff[COMPONENTS] = newc;
      }
    }
    cachedFindComponent(cid, cdiff, oldc, newc, cache) {
      if (cache[cid]) {
        return cache[cid];
      } else {
        let ndiff, stat, scid = cdiff[STATIC];
        if (isCid(scid)) {
          let tdiff;
          if (scid > 0) {
            tdiff = this.cachedFindComponent(scid, newc[scid], oldc, newc, cache);
          } else {
            tdiff = oldc[-scid];
          }
          stat = tdiff[STATIC];
          ndiff = this.cloneMerge(tdiff, cdiff);
          ndiff[STATIC] = stat;
        } else {
          ndiff = cdiff[STATIC] !== void 0 ? cdiff : this.cloneMerge(oldc[cid] || {}, cdiff);
        }
        cache[cid] = ndiff;
        return ndiff;
      }
    }
    mutableMerge(target, source) {
      if (source[STATIC] !== void 0) {
        return source;
      } else {
        this.doMutableMerge(target, source);
        return target;
      }
    }
    doMutableMerge(target, source) {
      for (let key in source) {
        let val = source[key];
        let targetVal = target[key];
        let isObjVal = isObject(val);
        if (isObjVal && val[STATIC] === void 0 && isObject(targetVal)) {
          this.doMutableMerge(targetVal, val);
        } else {
          target[key] = val;
        }
      }
    }
    cloneMerge(target, source) {
      let merged = __spreadValues(__spreadValues({}, target), source);
      for (let key in merged) {
        let val = source[key];
        let targetVal = target[key];
        if (isObject(val) && val[STATIC] === void 0 && isObject(targetVal)) {
          merged[key] = this.cloneMerge(targetVal, val);
        }
      }
      return merged;
    }
    componentToString(cid) {
      let [str, streams] = this.recursiveCIDToString(this.rendered[COMPONENTS], cid);
      return [str, streams];
    }
    pruneCIDs(cids) {
      cids.forEach((cid) => delete this.rendered[COMPONENTS][cid]);
    }
    get() {
      return this.rendered;
    }
    isNewFingerprint(diff = {}) {
      return !!diff[STATIC];
    }
    templateStatic(part, templates) {
      if (typeof part === "number") {
        return templates[part];
      } else {
        return part;
      }
    }
    toOutputBuffer(rendered, templates, output) {
      if (rendered[DYNAMICS]) {
        return this.comprehensionToBuffer(rendered, templates, output);
      }
      let { [STATIC]: statics } = rendered;
      statics = this.templateStatic(statics, templates);
      output.buffer += statics[0];
      for (let i2 = 1; i2 < statics.length; i2++) {
        this.dynamicToBuffer(rendered[i2 - 1], templates, output);
        output.buffer += statics[i2];
      }
    }
    comprehensionToBuffer(rendered, templates, output) {
      let { [DYNAMICS]: dynamics, [STATIC]: statics, [STREAM]: stream } = rendered;
      let [_inserts, deleteIds] = stream || [{}, []];
      statics = this.templateStatic(statics, templates);
      let compTemplates = templates || rendered[TEMPLATES];
      for (let d2 = 0; d2 < dynamics.length; d2++) {
        let dynamic = dynamics[d2];
        output.buffer += statics[0];
        for (let i2 = 1; i2 < statics.length; i2++) {
          this.dynamicToBuffer(dynamic[i2 - 1], compTemplates, output);
          output.buffer += statics[i2];
        }
      }
      if (stream !== void 0 && (rendered[DYNAMICS].length > 0 || deleteIds.length > 0)) {
        rendered[DYNAMICS] = [];
        output.streams.add(stream);
      }
    }
    dynamicToBuffer(rendered, templates, output) {
      if (typeof rendered === "number") {
        let [str, streams] = this.recursiveCIDToString(output.components, rendered, output.onlyCids);
        output.buffer += str;
        output.streams = /* @__PURE__ */ new Set([...output.streams, ...streams]);
      } else if (isObject(rendered)) {
        this.toOutputBuffer(rendered, templates, output);
      } else {
        output.buffer += rendered;
      }
    }
    recursiveCIDToString(components, cid, onlyCids) {
      let component = components[cid] || logError(`no component for CID ${cid}`, components);
      let template = document.createElement("template");
      let [html, streams] = this.recursiveToString(component, components, onlyCids);
      template.innerHTML = html;
      let container = template.content;
      let skip = onlyCids && !onlyCids.has(cid);
      let [hasChildNodes, hasChildComponents] = Array.from(container.childNodes).reduce(([hasNodes, hasComponents], child, i2) => {
        if (child.nodeType === Node.ELEMENT_NODE) {
          if (child.getAttribute(PHX_COMPONENT)) {
            return [hasNodes, true];
          }
          child.setAttribute(PHX_COMPONENT, cid);
          if (!child.id) {
            child.id = `${this.parentViewId()}-${cid}-${i2}`;
          }
          if (skip) {
            child.setAttribute(PHX_SKIP, "");
            child.innerHTML = "";
          }
          return [true, hasComponents];
        } else {
          if (child.nodeValue.trim() !== "") {
            logError(`only HTML element tags are allowed at the root of components.

got: "${child.nodeValue.trim()}"

within:
`, template.innerHTML.trim());
            child.replaceWith(this.createSpan(child.nodeValue, cid));
            return [true, hasComponents];
          } else {
            child.remove();
            return [hasNodes, hasComponents];
          }
        }
      }, [false, false]);
      if (!hasChildNodes && !hasChildComponents) {
        logError("expected at least one HTML element tag inside a component, but the component is empty:\n", template.innerHTML.trim());
        return [this.createSpan("", cid).outerHTML, streams];
      } else if (!hasChildNodes && hasChildComponents) {
        logError("expected at least one HTML element tag directly inside a component, but only subcomponents were found. A component must render at least one HTML tag directly inside itself.", template.innerHTML.trim());
        return [template.innerHTML, streams];
      } else {
        return [template.innerHTML, streams];
      }
    }
    createSpan(text, cid) {
      let span = document.createElement("span");
      span.innerText = text;
      span.setAttribute(PHX_COMPONENT, cid);
      return span;
    }
  };
  var viewHookID = 1;
  var ViewHook = class {
    static makeID() {
      return viewHookID++;
    }
    static elementID(el) {
      return el.phxHookId;
    }
    constructor(view, el, callbacks) {
      this.__view = view;
      this.liveSocket = view.liveSocket;
      this.__callbacks = callbacks;
      this.__listeners = /* @__PURE__ */ new Set();
      this.__isDisconnected = false;
      this.el = el;
      this.el.phxHookId = this.constructor.makeID();
      for (let key in this.__callbacks) {
        this[key] = this.__callbacks[key];
      }
    }
    __mounted() {
      this.mounted && this.mounted();
    }
    __updated() {
      this.updated && this.updated();
    }
    __beforeUpdate() {
      this.beforeUpdate && this.beforeUpdate();
    }
    __destroyed() {
      this.destroyed && this.destroyed();
    }
    __reconnected() {
      if (this.__isDisconnected) {
        this.__isDisconnected = false;
        this.reconnected && this.reconnected();
      }
    }
    __disconnected() {
      this.__isDisconnected = true;
      this.disconnected && this.disconnected();
    }
    pushEvent(event, payload = {}, onReply = function() {
    }) {
      return this.__view.pushHookEvent(null, event, payload, onReply);
    }
    pushEventTo(phxTarget, event, payload = {}, onReply = function() {
    }) {
      return this.__view.withinTargets(phxTarget, (view, targetCtx) => {
        return view.pushHookEvent(targetCtx, event, payload, onReply);
      });
    }
    handleEvent(event, callback) {
      let callbackRef = (customEvent, bypass) => bypass ? event : callback(customEvent.detail);
      window.addEventListener(`phx:${event}`, callbackRef);
      this.__listeners.add(callbackRef);
      return callbackRef;
    }
    removeHandleEvent(callbackRef) {
      let event = callbackRef(null, true);
      window.removeEventListener(`phx:${event}`, callbackRef);
      this.__listeners.delete(callbackRef);
    }
    upload(name, files) {
      return this.__view.dispatchUploads(name, files);
    }
    uploadTo(phxTarget, name, files) {
      return this.__view.withinTargets(phxTarget, (view) => view.dispatchUploads(name, files));
    }
    __cleanup__() {
      this.__listeners.forEach((callbackRef) => this.removeHandleEvent(callbackRef));
    }
  };
  var focusStack = null;
  var JS = {
    exec(eventType, phxEvent, view, sourceEl, defaults) {
      let [defaultKind, defaultArgs] = defaults || [null, {}];
      let commands = phxEvent.charAt(0) === "[" ? JSON.parse(phxEvent) : [[defaultKind, defaultArgs]];
      commands.forEach(([kind, args]) => {
        if (kind === defaultKind && defaultArgs.data) {
          args.data = Object.assign(args.data || {}, defaultArgs.data);
        }
        this.filterToEls(sourceEl, args).forEach((el) => {
          this[`exec_${kind}`](eventType, phxEvent, view, sourceEl, el, args);
        });
      });
    },
    isVisible(el) {
      return !!(el.offsetWidth || el.offsetHeight || el.getClientRects().length > 0);
    },
    exec_dispatch(eventType, phxEvent, view, sourceEl, el, { to, event, detail, bubbles }) {
      detail = detail || {};
      detail.dispatcher = sourceEl;
      dom_default.dispatchEvent(el, event, { detail, bubbles });
    },
    exec_push(eventType, phxEvent, view, sourceEl, el, args) {
      if (!view.isConnected()) {
        return;
      }
      let { event, data, target, page_loading, loading, value, dispatcher } = args;
      let pushOpts = { loading, value, target, page_loading: !!page_loading };
      let targetSrc = eventType === "change" && dispatcher ? dispatcher : sourceEl;
      let phxTarget = target || targetSrc.getAttribute(view.binding("target")) || targetSrc;
      view.withinTargets(phxTarget, (targetView, targetCtx) => {
        if (eventType === "change") {
          let { newCid, _target, callback } = args;
          _target = _target || (dom_default.isFormInput(sourceEl) ? sourceEl.name : void 0);
          if (_target) {
            pushOpts._target = _target;
          }
          targetView.pushInput(sourceEl, targetCtx, newCid, event || phxEvent, pushOpts, callback);
        } else if (eventType === "submit") {
          let { submitter } = args;
          targetView.submitForm(sourceEl, targetCtx, event || phxEvent, submitter, pushOpts);
        } else {
          targetView.pushEvent(eventType, sourceEl, targetCtx, event || phxEvent, data, pushOpts);
        }
      });
    },
    exec_navigate(eventType, phxEvent, view, sourceEl, el, { href, replace }) {
      view.liveSocket.historyRedirect(href, replace ? "replace" : "push");
    },
    exec_patch(eventType, phxEvent, view, sourceEl, el, { href, replace }) {
      view.liveSocket.pushHistoryPatch(href, replace ? "replace" : "push", sourceEl);
    },
    exec_focus(eventType, phxEvent, view, sourceEl, el) {
      window.requestAnimationFrame(() => aria_default.attemptFocus(el));
    },
    exec_focus_first(eventType, phxEvent, view, sourceEl, el) {
      window.requestAnimationFrame(() => aria_default.focusFirstInteractive(el) || aria_default.focusFirst(el));
    },
    exec_push_focus(eventType, phxEvent, view, sourceEl, el) {
      window.requestAnimationFrame(() => focusStack = el || sourceEl);
    },
    exec_pop_focus(eventType, phxEvent, view, sourceEl, el) {
      window.requestAnimationFrame(() => {
        if (focusStack) {
          focusStack.focus();
        }
        focusStack = null;
      });
    },
    exec_add_class(eventType, phxEvent, view, sourceEl, el, { names, transition, time }) {
      this.addOrRemoveClasses(el, names, [], transition, time, view);
    },
    exec_remove_class(eventType, phxEvent, view, sourceEl, el, { names, transition, time }) {
      this.addOrRemoveClasses(el, [], names, transition, time, view);
    },
    exec_transition(eventType, phxEvent, view, sourceEl, el, { time, transition }) {
      this.addOrRemoveClasses(el, [], [], transition, time, view);
    },
    exec_toggle(eventType, phxEvent, view, sourceEl, el, { display, ins, outs, time }) {
      this.toggle(eventType, view, el, display, ins, outs, time);
    },
    exec_show(eventType, phxEvent, view, sourceEl, el, { display, transition, time }) {
      this.show(eventType, view, el, display, transition, time);
    },
    exec_hide(eventType, phxEvent, view, sourceEl, el, { display, transition, time }) {
      this.hide(eventType, view, el, display, transition, time);
    },
    exec_set_attr(eventType, phxEvent, view, sourceEl, el, { attr: [attr, val] }) {
      this.setOrRemoveAttrs(el, [[attr, val]], []);
    },
    exec_remove_attr(eventType, phxEvent, view, sourceEl, el, { attr }) {
      this.setOrRemoveAttrs(el, [], [attr]);
    },
    show(eventType, view, el, display, transition, time) {
      if (!this.isVisible(el)) {
        this.toggle(eventType, view, el, display, transition, null, time);
      }
    },
    hide(eventType, view, el, display, transition, time) {
      if (this.isVisible(el)) {
        this.toggle(eventType, view, el, display, null, transition, time);
      }
    },
    toggle(eventType, view, el, display, ins, outs, time) {
      let [inClasses, inStartClasses, inEndClasses] = ins || [[], [], []];
      let [outClasses, outStartClasses, outEndClasses] = outs || [[], [], []];
      if (inClasses.length > 0 || outClasses.length > 0) {
        if (this.isVisible(el)) {
          let onStart = () => {
            this.addOrRemoveClasses(el, outStartClasses, inClasses.concat(inStartClasses).concat(inEndClasses));
            window.requestAnimationFrame(() => {
              this.addOrRemoveClasses(el, outClasses, []);
              window.requestAnimationFrame(() => this.addOrRemoveClasses(el, outEndClasses, outStartClasses));
            });
          };
          el.dispatchEvent(new Event("phx:hide-start"));
          view.transition(time, onStart, () => {
            this.addOrRemoveClasses(el, [], outClasses.concat(outEndClasses));
            dom_default.putSticky(el, "toggle", (currentEl) => currentEl.style.display = "none");
            el.dispatchEvent(new Event("phx:hide-end"));
          });
        } else {
          if (eventType === "remove") {
            return;
          }
          let onStart = () => {
            this.addOrRemoveClasses(el, inStartClasses, outClasses.concat(outStartClasses).concat(outEndClasses));
            let stickyDisplay = display || this.defaultDisplay(el);
            dom_default.putSticky(el, "toggle", (currentEl) => currentEl.style.display = stickyDisplay);
            window.requestAnimationFrame(() => {
              this.addOrRemoveClasses(el, inClasses, []);
              window.requestAnimationFrame(() => this.addOrRemoveClasses(el, inEndClasses, inStartClasses));
            });
          };
          el.dispatchEvent(new Event("phx:show-start"));
          view.transition(time, onStart, () => {
            this.addOrRemoveClasses(el, [], inClasses.concat(inEndClasses));
            el.dispatchEvent(new Event("phx:show-end"));
          });
        }
      } else {
        if (this.isVisible(el)) {
          window.requestAnimationFrame(() => {
            el.dispatchEvent(new Event("phx:hide-start"));
            dom_default.putSticky(el, "toggle", (currentEl) => currentEl.style.display = "none");
            el.dispatchEvent(new Event("phx:hide-end"));
          });
        } else {
          window.requestAnimationFrame(() => {
            el.dispatchEvent(new Event("phx:show-start"));
            let stickyDisplay = display || this.defaultDisplay(el);
            dom_default.putSticky(el, "toggle", (currentEl) => currentEl.style.display = stickyDisplay);
            el.dispatchEvent(new Event("phx:show-end"));
          });
        }
      }
    },
    addOrRemoveClasses(el, adds, removes, transition, time, view) {
      let [transition_run, transition_start, transition_end] = transition || [[], [], []];
      if (transition_run.length > 0) {
        let onStart = () => this.addOrRemoveClasses(el, transition_start.concat(transition_run), []);
        let onDone = () => this.addOrRemoveClasses(el, adds.concat(transition_end), removes.concat(transition_run).concat(transition_start));
        return view.transition(time, onStart, onDone);
      }
      window.requestAnimationFrame(() => {
        let [prevAdds, prevRemoves] = dom_default.getSticky(el, "classes", [[], []]);
        let keepAdds = adds.filter((name) => prevAdds.indexOf(name) < 0 && !el.classList.contains(name));
        let keepRemoves = removes.filter((name) => prevRemoves.indexOf(name) < 0 && el.classList.contains(name));
        let newAdds = prevAdds.filter((name) => removes.indexOf(name) < 0).concat(keepAdds);
        let newRemoves = prevRemoves.filter((name) => adds.indexOf(name) < 0).concat(keepRemoves);
        dom_default.putSticky(el, "classes", (currentEl) => {
          currentEl.classList.remove(...newRemoves);
          currentEl.classList.add(...newAdds);
          return [newAdds, newRemoves];
        });
      });
    },
    setOrRemoveAttrs(el, sets, removes) {
      let [prevSets, prevRemoves] = dom_default.getSticky(el, "attrs", [[], []]);
      let alteredAttrs = sets.map(([attr, _val]) => attr).concat(removes);
      let newSets = prevSets.filter(([attr, _val]) => !alteredAttrs.includes(attr)).concat(sets);
      let newRemoves = prevRemoves.filter((attr) => !alteredAttrs.includes(attr)).concat(removes);
      dom_default.putSticky(el, "attrs", (currentEl) => {
        newRemoves.forEach((attr) => currentEl.removeAttribute(attr));
        newSets.forEach(([attr, val]) => currentEl.setAttribute(attr, val));
        return [newSets, newRemoves];
      });
    },
    hasAllClasses(el, classes) {
      return classes.every((name) => el.classList.contains(name));
    },
    isToggledOut(el, outClasses) {
      return !this.isVisible(el) || this.hasAllClasses(el, outClasses);
    },
    filterToEls(sourceEl, { to }) {
      return to ? dom_default.all(document, to) : [sourceEl];
    },
    defaultDisplay(el) {
      return { tr: "table-row", td: "table-cell" }[el.tagName.toLowerCase()] || "block";
    }
  };
  var js_default = JS;
  var serializeForm = (form, metadata, onlyNames = []) => {
    let _a = metadata, { submitter } = _a, meta = __objRest(_a, ["submitter"]);
    let formData = new FormData(form);
    if (submitter && submitter.form && submitter.form === form) {
      formData.append(submitter.name, submitter.value);
    }
    let toRemove = [];
    formData.forEach((val, key, _index) => {
      if (val instanceof File) {
        toRemove.push(key);
      }
    });
    toRemove.forEach((key) => formData.delete(key));
    let params = new URLSearchParams();
    for (let [key, val] of formData.entries()) {
      if (onlyNames.length === 0 || onlyNames.indexOf(key) >= 0) {
        params.append(key, val);
      }
    }
    for (let metaKey in meta) {
      params.append(metaKey, meta[metaKey]);
    }
    return params.toString();
  };
  var View = class {
    constructor(el, liveSocket2, parentView, flash, liveReferer) {
      this.isDead = false;
      this.liveSocket = liveSocket2;
      this.flash = flash;
      this.parent = parentView;
      this.root = parentView ? parentView.root : this;
      this.el = el;
      this.id = this.el.id;
      this.ref = 0;
      this.childJoins = 0;
      this.loaderTimer = null;
      this.pendingDiffs = [];
      this.pruningCIDs = [];
      this.redirect = false;
      this.href = null;
      this.joinCount = this.parent ? this.parent.joinCount - 1 : 0;
      this.joinPending = true;
      this.destroyed = false;
      this.joinCallback = function(onDone) {
        onDone && onDone();
      };
      this.stopCallback = function() {
      };
      this.pendingJoinOps = this.parent ? null : [];
      this.viewHooks = {};
      this.uploaders = {};
      this.formSubmits = [];
      this.children = this.parent ? null : {};
      this.root.children[this.id] = {};
      this.channel = this.liveSocket.channel(`lv:${this.id}`, () => {
        return {
          redirect: this.redirect ? this.href : void 0,
          url: this.redirect ? void 0 : this.href || void 0,
          params: this.connectParams(liveReferer),
          session: this.getSession(),
          static: this.getStatic(),
          flash: this.flash
        };
      });
    }
    setHref(href) {
      this.href = href;
    }
    setRedirect(href) {
      this.redirect = true;
      this.href = href;
    }
    isMain() {
      return this.el.hasAttribute(PHX_MAIN);
    }
    connectParams(liveReferer) {
      let params = this.liveSocket.params(this.el);
      let manifest = dom_default.all(document, `[${this.binding(PHX_TRACK_STATIC)}]`).map((node) => node.src || node.href).filter((url) => typeof url === "string");
      if (manifest.length > 0) {
        params["_track_static"] = manifest;
      }
      params["_mounts"] = this.joinCount;
      params["_live_referer"] = liveReferer;
      return params;
    }
    isConnected() {
      return this.channel.canPush();
    }
    getSession() {
      return this.el.getAttribute(PHX_SESSION);
    }
    getStatic() {
      let val = this.el.getAttribute(PHX_STATIC);
      return val === "" ? null : val;
    }
    destroy(callback = function() {
    }) {
      this.destroyAllChildren();
      this.destroyed = true;
      delete this.root.children[this.id];
      if (this.parent) {
        delete this.root.children[this.parent.id][this.id];
      }
      clearTimeout(this.loaderTimer);
      let onFinished = () => {
        callback();
        for (let id in this.viewHooks) {
          this.destroyHook(this.viewHooks[id]);
        }
      };
      dom_default.markPhxChildDestroyed(this.el);
      this.log("destroyed", () => ["the child has been removed from the parent"]);
      this.channel.leave().receive("ok", onFinished).receive("error", onFinished).receive("timeout", onFinished);
    }
    setContainerClasses(...classes) {
      this.el.classList.remove(PHX_CONNECTED_CLASS, PHX_DISCONNECTED_CLASS, PHX_ERROR_CLASS);
      this.el.classList.add(...classes);
    }
    showLoader(timeout) {
      clearTimeout(this.loaderTimer);
      if (timeout) {
        this.loaderTimer = setTimeout(() => this.showLoader(), timeout);
      } else {
        for (let id in this.viewHooks) {
          this.viewHooks[id].__disconnected();
        }
        this.setContainerClasses(PHX_DISCONNECTED_CLASS);
      }
    }
    execAll(binding) {
      dom_default.all(this.el, `[${binding}]`, (el) => this.liveSocket.execJS(el, el.getAttribute(binding)));
    }
    hideLoader() {
      clearTimeout(this.loaderTimer);
      this.setContainerClasses(PHX_CONNECTED_CLASS);
      this.execAll(this.binding("connected"));
    }
    triggerReconnected() {
      for (let id in this.viewHooks) {
        this.viewHooks[id].__reconnected();
      }
    }
    log(kind, msgCallback) {
      this.liveSocket.log(this, kind, msgCallback);
    }
    transition(time, onStart, onDone = function() {
    }) {
      this.liveSocket.transition(time, onStart, onDone);
    }
    withinTargets(phxTarget, callback) {
      if (phxTarget instanceof HTMLElement || phxTarget instanceof SVGElement) {
        return this.liveSocket.owner(phxTarget, (view) => callback(view, phxTarget));
      }
      if (isCid(phxTarget)) {
        let targets = dom_default.findComponentNodeList(this.el, phxTarget);
        if (targets.length === 0) {
          logError(`no component found matching phx-target of ${phxTarget}`);
        } else {
          callback(this, parseInt(phxTarget));
        }
      } else {
        let targets = Array.from(document.querySelectorAll(phxTarget));
        if (targets.length === 0) {
          logError(`nothing found matching the phx-target selector "${phxTarget}"`);
        }
        targets.forEach((target) => this.liveSocket.owner(target, (view) => callback(view, target)));
      }
    }
    applyDiff(type, rawDiff, callback) {
      this.log(type, () => ["", clone(rawDiff)]);
      let { diff, reply, events, title } = Rendered.extract(rawDiff);
      callback({ diff, reply, events });
      if (title) {
        window.requestAnimationFrame(() => dom_default.putTitle(title));
      }
    }
    onJoin(resp) {
      let { rendered, container } = resp;
      if (container) {
        let [tag, attrs] = container;
        this.el = dom_default.replaceRootContainer(this.el, tag, attrs);
      }
      this.childJoins = 0;
      this.joinPending = true;
      this.flash = null;
      browser_default.dropLocal(this.liveSocket.localStorage, window.location.pathname, CONSECUTIVE_RELOADS);
      this.applyDiff("mount", rendered, ({ diff, events }) => {
        this.rendered = new Rendered(this.id, diff);
        let [html, streams] = this.renderContainer(null, "join");
        this.dropPendingRefs();
        let forms = this.formsForRecovery(html);
        this.joinCount++;
        if (forms.length > 0) {
          forms.forEach(([form, newForm, newCid], i2) => {
            this.pushFormRecovery(form, newCid, (resp2) => {
              if (i2 === forms.length - 1) {
                this.onJoinComplete(resp2, html, streams, events);
              }
            });
          });
        } else {
          this.onJoinComplete(resp, html, streams, events);
        }
      });
    }
    dropPendingRefs() {
      dom_default.all(document, `[${PHX_REF_SRC}="${this.id}"][${PHX_REF}]`, (el) => {
        el.removeAttribute(PHX_REF);
        el.removeAttribute(PHX_REF_SRC);
      });
    }
    onJoinComplete({ live_patch }, html, streams, events) {
      if (this.joinCount > 1 || this.parent && !this.parent.isJoinPending()) {
        return this.applyJoinPatch(live_patch, html, streams, events);
      }
      let newChildren = dom_default.findPhxChildrenInFragment(html, this.id).filter((toEl) => {
        let fromEl = toEl.id && this.el.querySelector(`[id="${toEl.id}"]`);
        let phxStatic = fromEl && fromEl.getAttribute(PHX_STATIC);
        if (phxStatic) {
          toEl.setAttribute(PHX_STATIC, phxStatic);
        }
        return this.joinChild(toEl);
      });
      if (newChildren.length === 0) {
        if (this.parent) {
          this.root.pendingJoinOps.push([this, () => this.applyJoinPatch(live_patch, html, streams, events)]);
          this.parent.ackJoin(this);
        } else {
          this.onAllChildJoinsComplete();
          this.applyJoinPatch(live_patch, html, streams, events);
        }
      } else {
        this.root.pendingJoinOps.push([this, () => this.applyJoinPatch(live_patch, html, streams, events)]);
      }
    }
    attachTrueDocEl() {
      this.el = dom_default.byId(this.id);
      this.el.setAttribute(PHX_ROOT_ID, this.root.id);
    }
    execNewMounted() {
      dom_default.all(this.el, `[${this.binding(PHX_HOOK)}], [data-phx-${PHX_HOOK}]`, (hookEl) => {
        this.maybeAddNewHook(hookEl);
      });
      dom_default.all(this.el, `[${this.binding(PHX_MOUNTED)}]`, (el) => this.maybeMounted(el));
    }
    applyJoinPatch(live_patch, html, streams, events) {
      this.attachTrueDocEl();
      let patch = new DOMPatch(this, this.el, this.id, html, streams, null);
      patch.markPrunableContentForRemoval();
      this.performPatch(patch, false);
      this.joinNewChildren();
      this.execNewMounted();
      this.joinPending = false;
      this.liveSocket.dispatchEvents(events);
      this.applyPendingUpdates();
      if (live_patch) {
        let { kind, to } = live_patch;
        this.liveSocket.historyPatch(to, kind);
      }
      this.hideLoader();
      if (this.joinCount > 1) {
        this.triggerReconnected();
      }
      this.stopCallback();
    }
    triggerBeforeUpdateHook(fromEl, toEl) {
      this.liveSocket.triggerDOM("onBeforeElUpdated", [fromEl, toEl]);
      let hook = this.getHook(fromEl);
      let isIgnored = hook && dom_default.isIgnored(fromEl, this.binding(PHX_UPDATE));
      if (hook && !fromEl.isEqualNode(toEl) && !(isIgnored && isEqualObj(fromEl.dataset, toEl.dataset))) {
        hook.__beforeUpdate();
        return hook;
      }
    }
    maybeMounted(el) {
      let phxMounted = el.getAttribute(this.binding(PHX_MOUNTED));
      let hasBeenInvoked = phxMounted && dom_default.private(el, "mounted");
      if (phxMounted && !hasBeenInvoked) {
        this.liveSocket.execJS(el, phxMounted);
        dom_default.putPrivate(el, "mounted", true);
      }
    }
    maybeAddNewHook(el, force) {
      let newHook = this.addHook(el);
      if (newHook) {
        newHook.__mounted();
      }
    }
    performPatch(patch, pruneCids) {
      let removedEls = [];
      let phxChildrenAdded = false;
      let updatedHookIds = /* @__PURE__ */ new Set();
      patch.after("added", (el) => {
        this.liveSocket.triggerDOM("onNodeAdded", [el]);
        this.maybeAddNewHook(el);
        if (el.getAttribute) {
          this.maybeMounted(el);
        }
      });
      patch.after("phxChildAdded", (el) => {
        if (dom_default.isPhxSticky(el)) {
          this.liveSocket.joinRootViews();
        } else {
          phxChildrenAdded = true;
        }
      });
      patch.before("updated", (fromEl, toEl) => {
        let hook = this.triggerBeforeUpdateHook(fromEl, toEl);
        if (hook) {
          updatedHookIds.add(fromEl.id);
        }
      });
      patch.after("updated", (el) => {
        if (updatedHookIds.has(el.id)) {
          this.getHook(el).__updated();
        }
      });
      patch.after("discarded", (el) => {
        if (el.nodeType === Node.ELEMENT_NODE) {
          removedEls.push(el);
        }
      });
      patch.after("transitionsDiscarded", (els) => this.afterElementsRemoved(els, pruneCids));
      patch.perform();
      this.afterElementsRemoved(removedEls, pruneCids);
      return phxChildrenAdded;
    }
    afterElementsRemoved(elements, pruneCids) {
      let destroyedCIDs = [];
      elements.forEach((parent) => {
        let components = dom_default.all(parent, `[${PHX_COMPONENT}]`);
        let hooks = dom_default.all(parent, `[${this.binding(PHX_HOOK)}]`);
        components.concat(parent).forEach((el) => {
          let cid = this.componentID(el);
          if (isCid(cid) && destroyedCIDs.indexOf(cid) === -1) {
            destroyedCIDs.push(cid);
          }
        });
        hooks.concat(parent).forEach((hookEl) => {
          let hook = this.getHook(hookEl);
          hook && this.destroyHook(hook);
        });
      });
      if (pruneCids) {
        this.maybePushComponentsDestroyed(destroyedCIDs);
      }
    }
    joinNewChildren() {
      dom_default.findPhxChildren(this.el, this.id).forEach((el) => this.joinChild(el));
    }
    getChildById(id) {
      return this.root.children[this.id][id];
    }
    getDescendentByEl(el) {
      if (el.id === this.id) {
        return this;
      } else {
        return this.children[el.getAttribute(PHX_PARENT_ID)][el.id];
      }
    }
    destroyDescendent(id) {
      for (let parentId in this.root.children) {
        for (let childId in this.root.children[parentId]) {
          if (childId === id) {
            return this.root.children[parentId][childId].destroy();
          }
        }
      }
    }
    joinChild(el) {
      let child = this.getChildById(el.id);
      if (!child) {
        let view = new View(el, this.liveSocket, this);
        this.root.children[this.id][view.id] = view;
        view.join();
        this.childJoins++;
        return true;
      }
    }
    isJoinPending() {
      return this.joinPending;
    }
    ackJoin(_child) {
      this.childJoins--;
      if (this.childJoins === 0) {
        if (this.parent) {
          this.parent.ackJoin(this);
        } else {
          this.onAllChildJoinsComplete();
        }
      }
    }
    onAllChildJoinsComplete() {
      this.joinCallback(() => {
        this.pendingJoinOps.forEach(([view, op]) => {
          if (!view.isDestroyed()) {
            op();
          }
        });
        this.pendingJoinOps = [];
      });
    }
    update(diff, events) {
      if (this.isJoinPending() || this.liveSocket.hasPendingLink() && this.root.isMain()) {
        return this.pendingDiffs.push({ diff, events });
      }
      this.rendered.mergeDiff(diff);
      let phxChildrenAdded = false;
      if (this.rendered.isComponentOnlyDiff(diff)) {
        this.liveSocket.time("component patch complete", () => {
          let parentCids = dom_default.findParentCIDs(this.el, this.rendered.componentCIDs(diff));
          parentCids.forEach((parentCID) => {
            if (this.componentPatch(this.rendered.getComponent(diff, parentCID), parentCID)) {
              phxChildrenAdded = true;
            }
          });
        });
      } else if (!isEmpty(diff)) {
        this.liveSocket.time("full patch complete", () => {
          let [html, streams] = this.renderContainer(diff, "update");
          let patch = new DOMPatch(this, this.el, this.id, html, streams, null);
          phxChildrenAdded = this.performPatch(patch, true);
        });
      }
      this.liveSocket.dispatchEvents(events);
      if (phxChildrenAdded) {
        this.joinNewChildren();
      }
    }
    renderContainer(diff, kind) {
      return this.liveSocket.time(`toString diff (${kind})`, () => {
        let tag = this.el.tagName;
        let cids = diff ? this.rendered.componentCIDs(diff).concat(this.pruningCIDs) : null;
        let [html, streams] = this.rendered.toString(cids);
        return [`<${tag}>${html}</${tag}>`, streams];
      });
    }
    componentPatch(diff, cid) {
      if (isEmpty(diff))
        return false;
      let [html, streams] = this.rendered.componentToString(cid);
      let patch = new DOMPatch(this, this.el, this.id, html, streams, cid);
      let childrenAdded = this.performPatch(patch, true);
      return childrenAdded;
    }
    getHook(el) {
      return this.viewHooks[ViewHook.elementID(el)];
    }
    addHook(el) {
      if (ViewHook.elementID(el) || !el.getAttribute) {
        return;
      }
      let hookName = el.getAttribute(`data-phx-${PHX_HOOK}`) || el.getAttribute(this.binding(PHX_HOOK));
      if (hookName && !this.ownsElement(el)) {
        return;
      }
      let callbacks = this.liveSocket.getHookCallbacks(hookName);
      if (callbacks) {
        if (!el.id) {
          logError(`no DOM ID for hook "${hookName}". Hooks require a unique ID on each element.`, el);
        }
        let hook = new ViewHook(this, el, callbacks);
        this.viewHooks[ViewHook.elementID(hook.el)] = hook;
        return hook;
      } else if (hookName !== null) {
        logError(`unknown hook found for "${hookName}"`, el);
      }
    }
    destroyHook(hook) {
      hook.__destroyed();
      hook.__cleanup__();
      delete this.viewHooks[ViewHook.elementID(hook.el)];
    }
    applyPendingUpdates() {
      this.pendingDiffs.forEach(({ diff, events }) => this.update(diff, events));
      this.pendingDiffs = [];
      this.eachChild((child) => child.applyPendingUpdates());
    }
    eachChild(callback) {
      let children = this.root.children[this.id] || {};
      for (let id in children) {
        callback(this.getChildById(id));
      }
    }
    onChannel(event, cb) {
      this.liveSocket.onChannel(this.channel, event, (resp) => {
        if (this.isJoinPending()) {
          this.root.pendingJoinOps.push([this, () => cb(resp)]);
        } else {
          this.liveSocket.requestDOMUpdate(() => cb(resp));
        }
      });
    }
    bindChannel() {
      this.liveSocket.onChannel(this.channel, "diff", (rawDiff) => {
        this.liveSocket.requestDOMUpdate(() => {
          this.applyDiff("update", rawDiff, ({ diff, events }) => this.update(diff, events));
        });
      });
      this.onChannel("redirect", ({ to, flash }) => this.onRedirect({ to, flash }));
      this.onChannel("live_patch", (redir) => this.onLivePatch(redir));
      this.onChannel("live_redirect", (redir) => this.onLiveRedirect(redir));
      this.channel.onError((reason) => this.onError(reason));
      this.channel.onClose((reason) => this.onClose(reason));
    }
    destroyAllChildren() {
      this.eachChild((child) => child.destroy());
    }
    onLiveRedirect(redir) {
      let { to, kind, flash } = redir;
      let url = this.expandURL(to);
      this.liveSocket.historyRedirect(url, kind, flash);
    }
    onLivePatch(redir) {
      let { to, kind } = redir;
      this.href = this.expandURL(to);
      this.liveSocket.historyPatch(to, kind);
    }
    expandURL(to) {
      return to.startsWith("/") ? `${window.location.protocol}//${window.location.host}${to}` : to;
    }
    onRedirect({ to, flash }) {
      this.liveSocket.redirect(to, flash);
    }
    isDestroyed() {
      return this.destroyed;
    }
    joinDead() {
      this.isDead = true;
    }
    join(callback) {
      this.showLoader(this.liveSocket.loaderTimeout);
      this.bindChannel();
      if (this.isMain()) {
        this.stopCallback = this.liveSocket.withPageLoading({ to: this.href, kind: "initial" });
      }
      this.joinCallback = (onDone) => {
        onDone = onDone || function() {
        };
        callback ? callback(this.joinCount, onDone) : onDone();
      };
      this.liveSocket.wrapPush(this, { timeout: false }, () => {
        return this.channel.join().receive("ok", (data) => {
          if (!this.isDestroyed()) {
            this.liveSocket.requestDOMUpdate(() => this.onJoin(data));
          }
        }).receive("error", (resp) => !this.isDestroyed() && this.onJoinError(resp)).receive("timeout", () => !this.isDestroyed() && this.onJoinError({ reason: "timeout" }));
      });
    }
    onJoinError(resp) {
      if (resp.reason === "reload") {
        this.log("error", () => [`failed mount with ${resp.status}. Falling back to page request`, resp]);
        return this.onRedirect({ to: this.href });
      } else if (resp.reason === "unauthorized" || resp.reason === "stale") {
        this.log("error", () => ["unauthorized live_redirect. Falling back to page request", resp]);
        return this.onRedirect({ to: this.href });
      }
      if (resp.redirect || resp.live_redirect) {
        this.joinPending = false;
        this.channel.leave();
      }
      if (resp.redirect) {
        return this.onRedirect(resp.redirect);
      }
      if (resp.live_redirect) {
        return this.onLiveRedirect(resp.live_redirect);
      }
      this.log("error", () => ["unable to join", resp]);
      if (this.liveSocket.isConnected()) {
        this.liveSocket.reloadWithJitter(this);
      }
    }
    onClose(reason) {
      if (this.isDestroyed()) {
        return;
      }
      if (this.liveSocket.hasPendingLink() && reason !== "leave") {
        return this.liveSocket.reloadWithJitter(this);
      }
      this.destroyAllChildren();
      this.liveSocket.dropActiveElement(this);
      if (document.activeElement) {
        document.activeElement.blur();
      }
      if (this.liveSocket.isUnloaded()) {
        this.showLoader(BEFORE_UNLOAD_LOADER_TIMEOUT);
      }
    }
    onError(reason) {
      this.onClose(reason);
      if (this.liveSocket.isConnected()) {
        this.log("error", () => ["view crashed", reason]);
      }
      if (!this.liveSocket.isUnloaded()) {
        this.displayError();
      }
    }
    displayError() {
      if (this.isMain()) {
        dom_default.dispatchEvent(window, "phx:page-loading-start", { detail: { to: this.href, kind: "error" } });
      }
      this.showLoader();
      this.setContainerClasses(PHX_DISCONNECTED_CLASS, PHX_ERROR_CLASS);
      this.execAll(this.binding("disconnected"));
    }
    pushWithReply(refGenerator, event, payload, onReply = function() {
    }) {
      if (!this.isConnected()) {
        return;
      }
      let [ref, [el], opts] = refGenerator ? refGenerator() : [null, [], {}];
      let onLoadingDone = function() {
      };
      if (opts.page_loading || el && el.getAttribute(this.binding(PHX_PAGE_LOADING)) !== null) {
        onLoadingDone = this.liveSocket.withPageLoading({ kind: "element", target: el });
      }
      if (typeof payload.cid !== "number") {
        delete payload.cid;
      }
      return this.liveSocket.wrapPush(this, { timeout: true }, () => {
        return this.channel.push(event, payload, PUSH_TIMEOUT).receive("ok", (resp) => {
          let finish = (hookReply) => {
            if (resp.redirect) {
              this.onRedirect(resp.redirect);
            }
            if (resp.live_patch) {
              this.onLivePatch(resp.live_patch);
            }
            if (resp.live_redirect) {
              this.onLiveRedirect(resp.live_redirect);
            }
            if (ref !== null) {
              this.undoRefs(ref);
            }
            onLoadingDone();
            onReply(resp, hookReply);
          };
          if (resp.diff) {
            this.liveSocket.requestDOMUpdate(() => {
              this.applyDiff("update", resp.diff, ({ diff, reply, events }) => {
                this.update(diff, events);
                finish(reply);
              });
            });
          } else {
            finish(null);
          }
        });
      });
    }
    undoRefs(ref) {
      if (!this.isConnected()) {
        return;
      }
      dom_default.all(document, `[${PHX_REF_SRC}="${this.id}"][${PHX_REF}="${ref}"]`, (el) => {
        let disabledVal = el.getAttribute(PHX_DISABLED);
        el.removeAttribute(PHX_REF);
        el.removeAttribute(PHX_REF_SRC);
        if (el.getAttribute(PHX_READONLY) !== null) {
          el.readOnly = false;
          el.removeAttribute(PHX_READONLY);
        }
        if (disabledVal !== null) {
          el.disabled = disabledVal === "true" ? true : false;
          el.removeAttribute(PHX_DISABLED);
        }
        PHX_EVENT_CLASSES.forEach((className) => dom_default.removeClass(el, className));
        let disableRestore = el.getAttribute(PHX_DISABLE_WITH_RESTORE);
        if (disableRestore !== null) {
          el.innerText = disableRestore;
          el.removeAttribute(PHX_DISABLE_WITH_RESTORE);
        }
        let toEl = dom_default.private(el, PHX_REF);
        if (toEl) {
          let hook = this.triggerBeforeUpdateHook(el, toEl);
          DOMPatch.patchEl(el, toEl, this.liveSocket.getActiveElement());
          if (hook) {
            hook.__updated();
          }
          dom_default.deletePrivate(el, PHX_REF);
        }
      });
    }
    putRef(elements, event, opts = {}) {
      let newRef = this.ref++;
      let disableWith = this.binding(PHX_DISABLE_WITH);
      if (opts.loading) {
        elements = elements.concat(dom_default.all(document, opts.loading));
      }
      elements.forEach((el) => {
        el.classList.add(`phx-${event}-loading`);
        el.setAttribute(PHX_REF, newRef);
        el.setAttribute(PHX_REF_SRC, this.el.id);
        let disableText = el.getAttribute(disableWith);
        if (disableText !== null) {
          if (!el.getAttribute(PHX_DISABLE_WITH_RESTORE)) {
            el.setAttribute(PHX_DISABLE_WITH_RESTORE, el.innerText);
          }
          if (disableText !== "") {
            el.innerText = disableText;
          }
          el.setAttribute("disabled", "");
        }
      });
      return [newRef, elements, opts];
    }
    componentID(el) {
      let cid = el.getAttribute && el.getAttribute(PHX_COMPONENT);
      return cid ? parseInt(cid) : null;
    }
    targetComponentID(target, targetCtx, opts = {}) {
      if (isCid(targetCtx)) {
        return targetCtx;
      }
      let cidOrSelector = target.getAttribute(this.binding("target"));
      if (isCid(cidOrSelector)) {
        return parseInt(cidOrSelector);
      } else if (targetCtx && (cidOrSelector !== null || opts.target)) {
        return this.closestComponentID(targetCtx);
      } else {
        return null;
      }
    }
    closestComponentID(targetCtx) {
      if (isCid(targetCtx)) {
        return targetCtx;
      } else if (targetCtx) {
        return maybe(targetCtx.closest(`[${PHX_COMPONENT}]`), (el) => this.ownsElement(el) && this.componentID(el));
      } else {
        return null;
      }
    }
    pushHookEvent(targetCtx, event, payload, onReply) {
      if (!this.isConnected()) {
        this.log("hook", () => ["unable to push hook event. LiveView not connected", event, payload]);
        return false;
      }
      let [ref, els, opts] = this.putRef([], "hook");
      this.pushWithReply(() => [ref, els, opts], "event", {
        type: "hook",
        event,
        value: payload,
        cid: this.closestComponentID(targetCtx)
      }, (resp, reply) => onReply(reply, ref));
      return ref;
    }
    extractMeta(el, meta, value) {
      let prefix = this.binding("value-");
      for (let i2 = 0; i2 < el.attributes.length; i2++) {
        if (!meta) {
          meta = {};
        }
        let name = el.attributes[i2].name;
        if (name.startsWith(prefix)) {
          meta[name.replace(prefix, "")] = el.getAttribute(name);
        }
      }
      if (el.value !== void 0) {
        if (!meta) {
          meta = {};
        }
        meta.value = el.value;
        if (el.tagName === "INPUT" && CHECKABLE_INPUTS.indexOf(el.type) >= 0 && !el.checked) {
          delete meta.value;
        }
      }
      if (value) {
        if (!meta) {
          meta = {};
        }
        for (let key in value) {
          meta[key] = value[key];
        }
      }
      return meta;
    }
    pushEvent(type, el, targetCtx, phxEvent, meta, opts = {}) {
      this.pushWithReply(() => this.putRef([el], type, opts), "event", {
        type,
        event: phxEvent,
        value: this.extractMeta(el, meta, opts.value),
        cid: this.targetComponentID(el, targetCtx, opts)
      });
    }
    pushFileProgress(fileEl, entryRef, progress, onReply = function() {
    }) {
      this.liveSocket.withinOwners(fileEl.form, (view, targetCtx) => {
        view.pushWithReply(null, "progress", {
          event: fileEl.getAttribute(view.binding(PHX_PROGRESS)),
          ref: fileEl.getAttribute(PHX_UPLOAD_REF),
          entry_ref: entryRef,
          progress,
          cid: view.targetComponentID(fileEl.form, targetCtx)
        }, onReply);
      });
    }
    pushInput(inputEl, targetCtx, forceCid, phxEvent, opts, callback) {
      let uploads;
      let cid = isCid(forceCid) ? forceCid : this.targetComponentID(inputEl.form, targetCtx);
      let refGenerator = () => this.putRef([inputEl, inputEl.form], "change", opts);
      let formData;
      if (inputEl.getAttribute(this.binding("change"))) {
        formData = serializeForm(inputEl.form, { _target: opts._target }, [inputEl.name]);
      } else {
        formData = serializeForm(inputEl.form, { _target: opts._target });
      }
      if (dom_default.isUploadInput(inputEl) && inputEl.files && inputEl.files.length > 0) {
        LiveUploader.trackFiles(inputEl, Array.from(inputEl.files));
      }
      uploads = LiveUploader.serializeUploads(inputEl);
      let event = {
        type: "form",
        event: phxEvent,
        value: formData,
        uploads,
        cid
      };
      this.pushWithReply(refGenerator, "event", event, (resp) => {
        dom_default.showError(inputEl, this.liveSocket.binding(PHX_FEEDBACK_FOR));
        if (dom_default.isUploadInput(inputEl) && inputEl.getAttribute("data-phx-auto-upload") !== null) {
          if (LiveUploader.filesAwaitingPreflight(inputEl).length > 0) {
            let [ref, _els] = refGenerator();
            this.uploadFiles(inputEl.form, targetCtx, ref, cid, (_uploads) => {
              callback && callback(resp);
              this.triggerAwaitingSubmit(inputEl.form);
            });
          }
        } else {
          callback && callback(resp);
        }
      });
    }
    triggerAwaitingSubmit(formEl) {
      let awaitingSubmit = this.getScheduledSubmit(formEl);
      if (awaitingSubmit) {
        let [_el, _ref, _opts, callback] = awaitingSubmit;
        this.cancelSubmit(formEl);
        callback();
      }
    }
    getScheduledSubmit(formEl) {
      return this.formSubmits.find(([el, _ref, _opts, _callback]) => el.isSameNode(formEl));
    }
    scheduleSubmit(formEl, ref, opts, callback) {
      if (this.getScheduledSubmit(formEl)) {
        return true;
      }
      this.formSubmits.push([formEl, ref, opts, callback]);
    }
    cancelSubmit(formEl) {
      this.formSubmits = this.formSubmits.filter(([el, ref, _callback]) => {
        if (el.isSameNode(formEl)) {
          this.undoRefs(ref);
          return false;
        } else {
          return true;
        }
      });
    }
    disableForm(formEl, opts = {}) {
      let filterIgnored = (el) => {
        let userIgnored = closestPhxBinding(el, `${this.binding(PHX_UPDATE)}=ignore`, el.form);
        return !(userIgnored || closestPhxBinding(el, "data-phx-update=ignore", el.form));
      };
      let filterDisables = (el) => {
        return el.hasAttribute(this.binding(PHX_DISABLE_WITH));
      };
      let filterButton = (el) => el.tagName == "BUTTON";
      let filterInput = (el) => ["INPUT", "TEXTAREA", "SELECT"].includes(el.tagName);
      let formElements = Array.from(formEl.elements);
      let disables = formElements.filter(filterDisables);
      let buttons = formElements.filter(filterButton).filter(filterIgnored);
      let inputs = formElements.filter(filterInput).filter(filterIgnored);
      buttons.forEach((button) => {
        button.setAttribute(PHX_DISABLED, button.disabled);
        button.disabled = true;
      });
      inputs.forEach((input) => {
        input.setAttribute(PHX_READONLY, input.readOnly);
        input.readOnly = true;
        if (input.files) {
          input.setAttribute(PHX_DISABLED, input.disabled);
          input.disabled = true;
        }
      });
      formEl.setAttribute(this.binding(PHX_PAGE_LOADING), "");
      return this.putRef([formEl].concat(disables).concat(buttons).concat(inputs), "submit", opts);
    }
    pushFormSubmit(formEl, targetCtx, phxEvent, submitter, opts, onReply) {
      let refGenerator = () => this.disableForm(formEl, opts);
      let cid = this.targetComponentID(formEl, targetCtx);
      if (LiveUploader.hasUploadsInProgress(formEl)) {
        let [ref, _els] = refGenerator();
        let push = () => this.pushFormSubmit(formEl, submitter, targetCtx, phxEvent, opts, onReply);
        return this.scheduleSubmit(formEl, ref, opts, push);
      } else if (LiveUploader.inputsAwaitingPreflight(formEl).length > 0) {
        let [ref, els] = refGenerator();
        let proxyRefGen = () => [ref, els, opts];
        this.uploadFiles(formEl, targetCtx, ref, cid, (_uploads) => {
          let formData = serializeForm(formEl, { submitter });
          this.pushWithReply(proxyRefGen, "event", {
            type: "form",
            event: phxEvent,
            value: formData,
            cid
          }, onReply);
        });
      } else {
        let formData = serializeForm(formEl, { submitter });
        this.pushWithReply(refGenerator, "event", {
          type: "form",
          event: phxEvent,
          value: formData,
          cid
        }, onReply);
      }
    }
    uploadFiles(formEl, targetCtx, ref, cid, onComplete) {
      let joinCountAtUpload = this.joinCount;
      let inputEls = LiveUploader.activeFileInputs(formEl);
      let numFileInputsInProgress = inputEls.length;
      inputEls.forEach((inputEl) => {
        let uploader = new LiveUploader(inputEl, this, () => {
          numFileInputsInProgress--;
          if (numFileInputsInProgress === 0) {
            onComplete();
          }
        });
        this.uploaders[inputEl] = uploader;
        let entries = uploader.entries().map((entry) => entry.toPreflightPayload());
        let payload = {
          ref: inputEl.getAttribute(PHX_UPLOAD_REF),
          entries,
          cid: this.targetComponentID(inputEl.form, targetCtx)
        };
        this.log("upload", () => ["sending preflight request", payload]);
        this.pushWithReply(null, "allow_upload", payload, (resp) => {
          this.log("upload", () => ["got preflight response", resp]);
          if (resp.error) {
            this.undoRefs(ref);
            let [entry_ref, reason] = resp.error;
            this.log("upload", () => [`error for entry ${entry_ref}`, reason]);
          } else {
            let onError = (callback) => {
              this.channel.onError(() => {
                if (this.joinCount === joinCountAtUpload) {
                  callback();
                }
              });
            };
            uploader.initAdapterUpload(resp, onError, this.liveSocket);
          }
        });
      });
    }
    dispatchUploads(name, filesOrBlobs) {
      let inputs = dom_default.findUploadInputs(this.el).filter((el) => el.name === name);
      if (inputs.length === 0) {
        logError(`no live file inputs found matching the name "${name}"`);
      } else if (inputs.length > 1) {
        logError(`duplicate live file inputs found matching the name "${name}"`);
      } else {
        dom_default.dispatchEvent(inputs[0], PHX_TRACK_UPLOADS, { detail: { files: filesOrBlobs } });
      }
    }
    pushFormRecovery(form, newCid, callback) {
      this.liveSocket.withinOwners(form, (view, targetCtx) => {
        let input = Array.from(form.elements).find((el) => {
          return dom_default.isFormInput(el) && el.type !== "hidden" && !el.hasAttribute(this.binding("change"));
        });
        let phxEvent = form.getAttribute(this.binding(PHX_AUTO_RECOVER)) || form.getAttribute(this.binding("change"));
        js_default.exec("change", phxEvent, view, input, ["push", { _target: input.name, newCid, callback }]);
      });
    }
    pushLinkPatch(href, targetEl, callback) {
      let linkRef = this.liveSocket.setPendingLink(href);
      let refGen = targetEl ? () => this.putRef([targetEl], "click") : null;
      let fallback = () => this.liveSocket.redirect(window.location.href);
      let push = this.pushWithReply(refGen, "live_patch", { url: href }, (resp) => {
        this.liveSocket.requestDOMUpdate(() => {
          if (resp.link_redirect) {
            this.liveSocket.replaceMain(href, null, callback, linkRef);
          } else {
            if (this.liveSocket.commitPendingLink(linkRef)) {
              this.href = href;
            }
            this.applyPendingUpdates();
            callback && callback(linkRef);
          }
        });
      });
      if (push) {
        push.receive("timeout", fallback);
      } else {
        fallback();
      }
    }
    formsForRecovery(html) {
      if (this.joinCount === 0) {
        return [];
      }
      let phxChange = this.binding("change");
      let template = document.createElement("template");
      template.innerHTML = html;
      return dom_default.all(this.el, `form[${phxChange}]`).filter((form) => form.id && this.ownsElement(form)).filter((form) => form.elements.length > 0).filter((form) => form.getAttribute(this.binding(PHX_AUTO_RECOVER)) !== "ignore").map((form) => {
        let newForm = template.content.querySelector(`form[id="${form.id}"][${phxChange}="${form.getAttribute(phxChange)}"]`);
        if (newForm) {
          return [form, newForm, this.targetComponentID(newForm)];
        } else {
          return [form, null, null];
        }
      }).filter(([form, newForm, newCid]) => newForm);
    }
    maybePushComponentsDestroyed(destroyedCIDs) {
      let willDestroyCIDs = destroyedCIDs.filter((cid) => {
        return dom_default.findComponentNodeList(this.el, cid).length === 0;
      });
      if (willDestroyCIDs.length > 0) {
        this.pruningCIDs.push(...willDestroyCIDs);
        this.pushWithReply(null, "cids_will_destroy", { cids: willDestroyCIDs }, () => {
          this.pruningCIDs = this.pruningCIDs.filter((cid) => willDestroyCIDs.indexOf(cid) !== -1);
          let completelyDestroyCIDs = willDestroyCIDs.filter((cid) => {
            return dom_default.findComponentNodeList(this.el, cid).length === 0;
          });
          if (completelyDestroyCIDs.length > 0) {
            this.pushWithReply(null, "cids_destroyed", { cids: completelyDestroyCIDs }, (resp) => {
              this.rendered.pruneCIDs(resp.cids);
            });
          }
        });
      }
    }
    ownsElement(el) {
      let parentViewEl = el.closest(PHX_VIEW_SELECTOR);
      return el.getAttribute(PHX_PARENT_ID) === this.id || parentViewEl && parentViewEl.id === this.id || !parentViewEl && this.isDead;
    }
    submitForm(form, targetCtx, phxEvent, submitter, opts = {}) {
      dom_default.putPrivate(form, PHX_HAS_SUBMITTED, true);
      let phxFeedback = this.liveSocket.binding(PHX_FEEDBACK_FOR);
      let inputs = Array.from(form.elements);
      inputs.forEach((input) => dom_default.putPrivate(input, PHX_HAS_SUBMITTED, true));
      this.liveSocket.blurActiveElement(this);
      this.pushFormSubmit(form, targetCtx, phxEvent, submitter, opts, () => {
        inputs.forEach((input) => dom_default.showError(input, phxFeedback));
        this.liveSocket.restorePreviouslyActiveFocus();
      });
    }
    binding(kind) {
      return this.liveSocket.binding(kind);
    }
  };
  var LiveSocket = class {
    constructor(url, phxSocket, opts = {}) {
      this.unloaded = false;
      if (!phxSocket || phxSocket.constructor.name === "Object") {
        throw new Error(`
      a phoenix Socket must be provided as the second argument to the LiveSocket constructor. For example:

          import {Socket} from "phoenix"
          import {LiveSocket} from "phoenix_live_view"
          let liveSocket = new LiveSocket("/live", Socket, {...})
      `);
      }
      this.socket = new phxSocket(url, opts);
      this.bindingPrefix = opts.bindingPrefix || BINDING_PREFIX;
      this.opts = opts;
      this.params = closure2(opts.params || {});
      this.viewLogger = opts.viewLogger;
      this.metadataCallbacks = opts.metadata || {};
      this.defaults = Object.assign(clone(DEFAULTS), opts.defaults || {});
      this.activeElement = null;
      this.prevActive = null;
      this.silenced = false;
      this.main = null;
      this.outgoingMainEl = null;
      this.clickStartedAtTarget = null;
      this.linkRef = 1;
      this.roots = {};
      this.href = window.location.href;
      this.pendingLink = null;
      this.currentLocation = clone(window.location);
      this.hooks = opts.hooks || {};
      this.uploaders = opts.uploaders || {};
      this.loaderTimeout = opts.loaderTimeout || LOADER_TIMEOUT;
      this.reloadWithJitterTimer = null;
      this.maxReloads = opts.maxReloads || MAX_RELOADS;
      this.reloadJitterMin = opts.reloadJitterMin || RELOAD_JITTER_MIN;
      this.reloadJitterMax = opts.reloadJitterMax || RELOAD_JITTER_MAX;
      this.failsafeJitter = opts.failsafeJitter || FAILSAFE_JITTER;
      this.localStorage = opts.localStorage || window.localStorage;
      this.sessionStorage = opts.sessionStorage || window.sessionStorage;
      this.boundTopLevelEvents = false;
      this.domCallbacks = Object.assign({ onNodeAdded: closure2(), onBeforeElUpdated: closure2() }, opts.dom || {});
      this.transitions = new TransitionSet();
      window.addEventListener("pagehide", (_e2) => {
        this.unloaded = true;
      });
      this.socket.onOpen(() => {
        if (this.isUnloaded()) {
          window.location.reload();
        }
      });
    }
    isProfileEnabled() {
      return this.sessionStorage.getItem(PHX_LV_PROFILE) === "true";
    }
    isDebugEnabled() {
      return this.sessionStorage.getItem(PHX_LV_DEBUG) === "true";
    }
    isDebugDisabled() {
      return this.sessionStorage.getItem(PHX_LV_DEBUG) === "false";
    }
    enableDebug() {
      this.sessionStorage.setItem(PHX_LV_DEBUG, "true");
    }
    enableProfiling() {
      this.sessionStorage.setItem(PHX_LV_PROFILE, "true");
    }
    disableDebug() {
      this.sessionStorage.setItem(PHX_LV_DEBUG, "false");
    }
    disableProfiling() {
      this.sessionStorage.removeItem(PHX_LV_PROFILE);
    }
    enableLatencySim(upperBoundMs) {
      this.enableDebug();
      console.log("latency simulator enabled for the duration of this browser session. Call disableLatencySim() to disable");
      this.sessionStorage.setItem(PHX_LV_LATENCY_SIM, upperBoundMs);
    }
    disableLatencySim() {
      this.sessionStorage.removeItem(PHX_LV_LATENCY_SIM);
    }
    getLatencySim() {
      let str = this.sessionStorage.getItem(PHX_LV_LATENCY_SIM);
      return str ? parseInt(str) : null;
    }
    getSocket() {
      return this.socket;
    }
    connect() {
      if (window.location.hostname === "localhost" && !this.isDebugDisabled()) {
        this.enableDebug();
      }
      let doConnect = () => {
        if (this.joinRootViews()) {
          this.bindTopLevelEvents();
          this.socket.connect();
        } else if (this.main) {
          this.socket.connect();
        } else {
          this.bindTopLevelEvents({ dead: true });
        }
        this.joinDeadView();
      };
      if (["complete", "loaded", "interactive"].indexOf(document.readyState) >= 0) {
        doConnect();
      } else {
        document.addEventListener("DOMContentLoaded", () => doConnect());
      }
    }
    disconnect(callback) {
      clearTimeout(this.reloadWithJitterTimer);
      this.socket.disconnect(callback);
    }
    replaceTransport(transport) {
      clearTimeout(this.reloadWithJitterTimer);
      this.socket.replaceTransport(transport);
      this.connect();
    }
    execJS(el, encodedJS, eventType = null) {
      this.owner(el, (view) => js_default.exec(eventType, encodedJS, view, el));
    }
    unload() {
      if (this.unloaded) {
        return;
      }
      if (this.main && this.isConnected()) {
        this.log(this.main, "socket", () => ["disconnect for page nav"]);
      }
      this.unloaded = true;
      this.destroyAllViews();
      this.disconnect();
    }
    triggerDOM(kind, args) {
      this.domCallbacks[kind](...args);
    }
    time(name, func) {
      if (!this.isProfileEnabled() || !console.time) {
        return func();
      }
      console.time(name);
      let result = func();
      console.timeEnd(name);
      return result;
    }
    log(view, kind, msgCallback) {
      if (this.viewLogger) {
        let [msg, obj] = msgCallback();
        this.viewLogger(view, kind, msg, obj);
      } else if (this.isDebugEnabled()) {
        let [msg, obj] = msgCallback();
        debug(view, kind, msg, obj);
      }
    }
    requestDOMUpdate(callback) {
      this.transitions.after(callback);
    }
    transition(time, onStart, onDone = function() {
    }) {
      this.transitions.addTransition(time, onStart, onDone);
    }
    onChannel(channel, event, cb) {
      channel.on(event, (data) => {
        let latency = this.getLatencySim();
        if (!latency) {
          cb(data);
        } else {
          setTimeout(() => cb(data), latency);
        }
      });
    }
    wrapPush(view, opts, push) {
      let latency = this.getLatencySim();
      let oldJoinCount = view.joinCount;
      if (!latency) {
        if (this.isConnected() && opts.timeout) {
          return push().receive("timeout", () => {
            if (view.joinCount === oldJoinCount && !view.isDestroyed()) {
              this.reloadWithJitter(view, () => {
                this.log(view, "timeout", () => ["received timeout while communicating with server. Falling back to hard refresh for recovery"]);
              });
            }
          });
        } else {
          return push();
        }
      }
      let fakePush = {
        receives: [],
        receive(kind, cb) {
          this.receives.push([kind, cb]);
        }
      };
      setTimeout(() => {
        if (view.isDestroyed()) {
          return;
        }
        fakePush.receives.reduce((acc, [kind, cb]) => acc.receive(kind, cb), push());
      }, latency);
      return fakePush;
    }
    reloadWithJitter(view, log) {
      clearTimeout(this.reloadWithJitterTimer);
      this.disconnect();
      let minMs = this.reloadJitterMin;
      let maxMs = this.reloadJitterMax;
      let afterMs = Math.floor(Math.random() * (maxMs - minMs + 1)) + minMs;
      let tries = browser_default.updateLocal(this.localStorage, window.location.pathname, CONSECUTIVE_RELOADS, 0, (count) => count + 1);
      if (tries > this.maxReloads) {
        afterMs = this.failsafeJitter;
      }
      this.reloadWithJitterTimer = setTimeout(() => {
        if (view.isDestroyed() || view.isConnected()) {
          return;
        }
        view.destroy();
        log ? log() : this.log(view, "join", () => [`encountered ${tries} consecutive reloads`]);
        if (tries > this.maxReloads) {
          this.log(view, "join", () => [`exceeded ${this.maxReloads} consecutive reloads. Entering failsafe mode`]);
        }
        if (this.hasPendingLink()) {
          window.location = this.pendingLink;
        } else {
          window.location.reload();
        }
      }, afterMs);
    }
    getHookCallbacks(name) {
      return name && name.startsWith("Phoenix.") ? hooks_default[name.split(".")[1]] : this.hooks[name];
    }
    isUnloaded() {
      return this.unloaded;
    }
    isConnected() {
      return this.socket.isConnected();
    }
    getBindingPrefix() {
      return this.bindingPrefix;
    }
    binding(kind) {
      return `${this.getBindingPrefix()}${kind}`;
    }
    channel(topic, params) {
      return this.socket.channel(topic, params);
    }
    joinDeadView() {
      let body = document.body;
      if (body && !this.isPhxView(body) && !this.isPhxView(document.firstElementChild)) {
        let view = this.newRootView(body);
        view.setHref(this.getHref());
        view.joinDead();
        if (!this.main) {
          this.main = view;
        }
        window.requestAnimationFrame(() => view.execNewMounted());
      }
    }
    joinRootViews() {
      let rootsFound = false;
      dom_default.all(document, `${PHX_VIEW_SELECTOR}:not([${PHX_PARENT_ID}])`, (rootEl) => {
        if (!this.getRootById(rootEl.id)) {
          let view = this.newRootView(rootEl);
          view.setHref(this.getHref());
          view.join();
          if (rootEl.hasAttribute(PHX_MAIN)) {
            this.main = view;
          }
        }
        rootsFound = true;
      });
      return rootsFound;
    }
    redirect(to, flash) {
      this.unload();
      browser_default.redirect(to, flash);
    }
    replaceMain(href, flash, callback = null, linkRef = this.setPendingLink(href)) {
      let liveReferer = this.currentLocation.href;
      this.outgoingMainEl = this.outgoingMainEl || this.main.el;
      let newMainEl = dom_default.cloneNode(this.outgoingMainEl, "");
      this.main.showLoader(this.loaderTimeout);
      this.main.destroy();
      this.main = this.newRootView(newMainEl, flash, liveReferer);
      this.main.setRedirect(href);
      this.transitionRemoves();
      this.main.join((joinCount, onDone) => {
        if (joinCount === 1 && this.commitPendingLink(linkRef)) {
          this.requestDOMUpdate(() => {
            dom_default.findPhxSticky(document).forEach((el) => newMainEl.appendChild(el));
            this.outgoingMainEl.replaceWith(newMainEl);
            this.outgoingMainEl = null;
            callback && requestAnimationFrame(callback);
            onDone();
          });
        }
      });
    }
    transitionRemoves(elements) {
      let removeAttr = this.binding("remove");
      elements = elements || dom_default.all(document, `[${removeAttr}]`);
      elements.forEach((el) => {
        if (document.body.contains(el)) {
          this.execJS(el, el.getAttribute(removeAttr), "remove");
        }
      });
    }
    isPhxView(el) {
      return el.getAttribute && el.getAttribute(PHX_SESSION) !== null;
    }
    newRootView(el, flash, liveReferer) {
      let view = new View(el, this, null, flash, liveReferer);
      this.roots[view.id] = view;
      return view;
    }
    owner(childEl, callback) {
      let view = maybe(childEl.closest(PHX_VIEW_SELECTOR), (el) => this.getViewByEl(el)) || this.main;
      if (view) {
        callback(view);
      }
    }
    withinOwners(childEl, callback) {
      this.owner(childEl, (view) => callback(view, childEl));
    }
    getViewByEl(el) {
      let rootId = el.getAttribute(PHX_ROOT_ID);
      return maybe(this.getRootById(rootId), (root) => root.getDescendentByEl(el));
    }
    getRootById(id) {
      return this.roots[id];
    }
    destroyAllViews() {
      for (let id in this.roots) {
        this.roots[id].destroy();
        delete this.roots[id];
      }
      this.main = null;
    }
    destroyViewByEl(el) {
      let root = this.getRootById(el.getAttribute(PHX_ROOT_ID));
      if (root && root.id === el.id) {
        root.destroy();
        delete this.roots[root.id];
      } else if (root) {
        root.destroyDescendent(el.id);
      }
    }
    setActiveElement(target) {
      if (this.activeElement === target) {
        return;
      }
      this.activeElement = target;
      let cancel = () => {
        if (target === this.activeElement) {
          this.activeElement = null;
        }
        target.removeEventListener("mouseup", this);
        target.removeEventListener("touchend", this);
      };
      target.addEventListener("mouseup", cancel);
      target.addEventListener("touchend", cancel);
    }
    getActiveElement() {
      if (document.activeElement === document.body) {
        return this.activeElement || document.activeElement;
      } else {
        return document.activeElement || document.body;
      }
    }
    dropActiveElement(view) {
      if (this.prevActive && view.ownsElement(this.prevActive)) {
        this.prevActive = null;
      }
    }
    restorePreviouslyActiveFocus() {
      if (this.prevActive && this.prevActive !== document.body) {
        this.prevActive.focus();
      }
    }
    blurActiveElement() {
      this.prevActive = this.getActiveElement();
      if (this.prevActive !== document.body) {
        this.prevActive.blur();
      }
    }
    bindTopLevelEvents({ dead } = {}) {
      if (this.boundTopLevelEvents) {
        return;
      }
      this.boundTopLevelEvents = true;
      this.socket.onClose((event) => {
        if (event && event.code === 1001) {
          return this.unload();
        }
        if (event && event.code === 1e3 && this.main) {
          return this.reloadWithJitter(this.main);
        }
      });
      document.body.addEventListener("click", function() {
      });
      window.addEventListener("pageshow", (e6) => {
        if (e6.persisted) {
          this.getSocket().disconnect();
          this.withPageLoading({ to: window.location.href, kind: "redirect" });
          window.location.reload();
        }
      }, true);
      if (!dead) {
        this.bindNav();
      }
      this.bindClicks();
      if (!dead) {
        this.bindForms();
      }
      this.bind({ keyup: "keyup", keydown: "keydown" }, (e6, type, view, targetEl, phxEvent, eventTarget) => {
        let matchKey = targetEl.getAttribute(this.binding(PHX_KEY));
        let pressedKey = e6.key && e6.key.toLowerCase();
        if (matchKey && matchKey.toLowerCase() !== pressedKey) {
          return;
        }
        let data = __spreadValues({ key: e6.key }, this.eventMeta(type, e6, targetEl));
        js_default.exec(type, phxEvent, view, targetEl, ["push", { data }]);
      });
      this.bind({ blur: "focusout", focus: "focusin" }, (e6, type, view, targetEl, phxEvent, eventTarget) => {
        if (!eventTarget) {
          let data = __spreadValues({ key: e6.key }, this.eventMeta(type, e6, targetEl));
          js_default.exec(type, phxEvent, view, targetEl, ["push", { data }]);
        }
      });
      this.bind({ blur: "blur", focus: "focus" }, (e6, type, view, targetEl, targetCtx, phxEvent, phxTarget) => {
        if (phxTarget === "window") {
          let data = this.eventMeta(type, e6, targetEl);
          js_default.exec(type, phxEvent, view, targetEl, ["push", { data }]);
        }
      });
      window.addEventListener("dragover", (e6) => e6.preventDefault());
      window.addEventListener("drop", (e6) => {
        e6.preventDefault();
        let dropTargetId = maybe(closestPhxBinding(e6.target, this.binding(PHX_DROP_TARGET)), (trueTarget) => {
          return trueTarget.getAttribute(this.binding(PHX_DROP_TARGET));
        });
        let dropTarget = dropTargetId && document.getElementById(dropTargetId);
        let files = Array.from(e6.dataTransfer.files || []);
        if (!dropTarget || dropTarget.disabled || files.length === 0 || !(dropTarget.files instanceof FileList)) {
          return;
        }
        LiveUploader.trackFiles(dropTarget, files, e6.dataTransfer);
        dropTarget.dispatchEvent(new Event("input", { bubbles: true }));
      });
      this.on(PHX_TRACK_UPLOADS, (e6) => {
        let uploadTarget = e6.target;
        if (!dom_default.isUploadInput(uploadTarget)) {
          return;
        }
        let files = Array.from(e6.detail.files || []).filter((f2) => f2 instanceof File || f2 instanceof Blob);
        LiveUploader.trackFiles(uploadTarget, files);
        uploadTarget.dispatchEvent(new Event("input", { bubbles: true }));
      });
    }
    eventMeta(eventName, e6, targetEl) {
      let callback = this.metadataCallbacks[eventName];
      return callback ? callback(e6, targetEl) : {};
    }
    setPendingLink(href) {
      this.linkRef++;
      this.pendingLink = href;
      return this.linkRef;
    }
    commitPendingLink(linkRef) {
      if (this.linkRef !== linkRef) {
        return false;
      } else {
        this.href = this.pendingLink;
        this.pendingLink = null;
        return true;
      }
    }
    getHref() {
      return this.href;
    }
    hasPendingLink() {
      return !!this.pendingLink;
    }
    bind(events, callback) {
      for (let event in events) {
        let browserEventName = events[event];
        this.on(browserEventName, (e6) => {
          let binding = this.binding(event);
          let windowBinding = this.binding(`window-${event}`);
          let targetPhxEvent = e6.target.getAttribute && e6.target.getAttribute(binding);
          if (targetPhxEvent) {
            this.debounce(e6.target, e6, browserEventName, () => {
              this.withinOwners(e6.target, (view) => {
                callback(e6, event, view, e6.target, targetPhxEvent, null);
              });
            });
          } else {
            dom_default.all(document, `[${windowBinding}]`, (el) => {
              let phxEvent = el.getAttribute(windowBinding);
              this.debounce(el, e6, browserEventName, () => {
                this.withinOwners(el, (view) => {
                  callback(e6, event, view, el, phxEvent, "window");
                });
              });
            });
          }
        });
      }
    }
    bindClicks() {
      window.addEventListener("click", (e6) => this.clickStartedAtTarget = e6.target);
      this.bindClick("click", "click", false);
      this.bindClick("mousedown", "capture-click", true);
    }
    bindClick(eventName, bindingName, capture) {
      let click = this.binding(bindingName);
      window.addEventListener(eventName, (e6) => {
        let target = null;
        if (capture) {
          target = e6.target.matches(`[${click}]`) ? e6.target : e6.target.querySelector(`[${click}]`);
        } else {
          let clickStartedAtTarget = this.clickStartedAtTarget || e6.target;
          target = closestPhxBinding(clickStartedAtTarget, click);
          this.dispatchClickAway(e6, clickStartedAtTarget);
          this.clickStartedAtTarget = null;
        }
        let phxEvent = target && target.getAttribute(click);
        if (!phxEvent) {
          let href = e6.target instanceof HTMLAnchorElement ? e6.target.getAttribute("href") : null;
          if (!capture && href !== null && !dom_default.wantsNewTab(e6) && dom_default.isNewPageHref(href, window.location)) {
            this.unload();
          }
          return;
        }
        if (target.getAttribute("href") === "#") {
          e6.preventDefault();
        }
        this.debounce(target, e6, "click", () => {
          this.withinOwners(target, (view) => {
            js_default.exec("click", phxEvent, view, target, ["push", { data: this.eventMeta("click", e6, target) }]);
          });
        });
      }, capture);
    }
    dispatchClickAway(e6, clickStartedAt) {
      let phxClickAway = this.binding("click-away");
      dom_default.all(document, `[${phxClickAway}]`, (el) => {
        if (!(el.isSameNode(clickStartedAt) || el.contains(clickStartedAt))) {
          this.withinOwners(e6.target, (view) => {
            let phxEvent = el.getAttribute(phxClickAway);
            if (js_default.isVisible(el)) {
              js_default.exec("click", phxEvent, view, el, ["push", { data: this.eventMeta("click", e6, e6.target) }]);
            }
          });
        }
      });
    }
    bindNav() {
      if (!browser_default.canPushState()) {
        return;
      }
      if (history.scrollRestoration) {
        history.scrollRestoration = "manual";
      }
      let scrollTimer = null;
      window.addEventListener("scroll", (_e2) => {
        clearTimeout(scrollTimer);
        scrollTimer = setTimeout(() => {
          browser_default.updateCurrentState((state) => Object.assign(state, { scroll: window.scrollY }));
        }, 100);
      });
      window.addEventListener("popstate", (event) => {
        if (!this.registerNewLocation(window.location)) {
          return;
        }
        let { type, id, root, scroll } = event.state || {};
        let href = window.location.href;
        this.requestDOMUpdate(() => {
          if (this.main.isConnected() && (type === "patch" && id === this.main.id)) {
            this.main.pushLinkPatch(href, null, () => {
              this.maybeScroll(scroll);
            });
          } else {
            this.replaceMain(href, null, () => {
              if (root) {
                this.replaceRootHistory();
              }
              this.maybeScroll(scroll);
            });
          }
        });
      }, false);
      window.addEventListener("click", (e6) => {
        let target = closestPhxBinding(e6.target, PHX_LIVE_LINK);
        let type = target && target.getAttribute(PHX_LIVE_LINK);
        if (!type || !this.isConnected() || !this.main || dom_default.wantsNewTab(e6)) {
          return;
        }
        let href = target.href;
        let linkState = target.getAttribute(PHX_LINK_STATE);
        e6.preventDefault();
        e6.stopImmediatePropagation();
        if (this.pendingLink === href) {
          return;
        }
        this.requestDOMUpdate(() => {
          if (type === "patch") {
            this.pushHistoryPatch(href, linkState, target);
          } else if (type === "redirect") {
            this.historyRedirect(href, linkState);
          } else {
            throw new Error(`expected ${PHX_LIVE_LINK} to be "patch" or "redirect", got: ${type}`);
          }
          let phxClick = target.getAttribute(this.binding("click"));
          if (phxClick) {
            this.requestDOMUpdate(() => this.execJS(target, phxClick, "click"));
          }
        });
      }, false);
    }
    maybeScroll(scroll) {
      if (typeof scroll === "number") {
        requestAnimationFrame(() => {
          window.scrollTo(0, scroll);
        });
      }
    }
    dispatchEvent(event, payload = {}) {
      dom_default.dispatchEvent(window, `phx:${event}`, { detail: payload });
    }
    dispatchEvents(events) {
      events.forEach(([event, payload]) => this.dispatchEvent(event, payload));
    }
    withPageLoading(info, callback) {
      dom_default.dispatchEvent(window, "phx:page-loading-start", { detail: info });
      let done = () => dom_default.dispatchEvent(window, "phx:page-loading-stop", { detail: info });
      return callback ? callback(done) : done;
    }
    pushHistoryPatch(href, linkState, targetEl) {
      if (!this.isConnected()) {
        return browser_default.redirect(href);
      }
      this.withPageLoading({ to: href, kind: "patch" }, (done) => {
        this.main.pushLinkPatch(href, targetEl, (linkRef) => {
          this.historyPatch(href, linkState, linkRef);
          done();
        });
      });
    }
    historyPatch(href, linkState, linkRef = this.setPendingLink(href)) {
      if (!this.commitPendingLink(linkRef)) {
        return;
      }
      browser_default.pushState(linkState, { type: "patch", id: this.main.id }, href);
      this.registerNewLocation(window.location);
    }
    historyRedirect(href, linkState, flash) {
      if (!this.isConnected()) {
        return browser_default.redirect(href, flash);
      }
      if (/^\/$|^\/[^\/]+.*$/.test(href)) {
        let { protocol, host } = window.location;
        href = `${protocol}//${host}${href}`;
      }
      let scroll = window.scrollY;
      this.withPageLoading({ to: href, kind: "redirect" }, (done) => {
        this.replaceMain(href, flash, () => {
          browser_default.pushState(linkState, { type: "redirect", id: this.main.id, scroll }, href);
          this.registerNewLocation(window.location);
          done();
        });
      });
    }
    replaceRootHistory() {
      browser_default.pushState("replace", { root: true, type: "patch", id: this.main.id });
    }
    registerNewLocation(newLocation) {
      let { pathname, search } = this.currentLocation;
      if (pathname + search === newLocation.pathname + newLocation.search) {
        return false;
      } else {
        this.currentLocation = clone(newLocation);
        return true;
      }
    }
    bindForms() {
      let iterations = 0;
      let externalFormSubmitted = false;
      this.on("submit", (e6) => {
        let phxSubmit = e6.target.getAttribute(this.binding("submit"));
        let phxChange = e6.target.getAttribute(this.binding("change"));
        if (!externalFormSubmitted && phxChange && !phxSubmit) {
          externalFormSubmitted = true;
          e6.preventDefault();
          this.withinOwners(e6.target, (view) => {
            view.disableForm(e6.target);
            window.requestAnimationFrame(() => {
              if (dom_default.isUnloadableFormSubmit(e6)) {
                this.unload();
              }
              e6.target.submit();
            });
          });
        }
      }, true);
      this.on("submit", (e6) => {
        let phxEvent = e6.target.getAttribute(this.binding("submit"));
        if (!phxEvent) {
          if (dom_default.isUnloadableFormSubmit(e6)) {
            this.unload();
          }
          return;
        }
        e6.preventDefault();
        e6.target.disabled = true;
        this.withinOwners(e6.target, (view) => {
          js_default.exec("submit", phxEvent, view, e6.target, ["push", { submitter: e6.submitter }]);
        });
      }, false);
      for (let type of ["change", "input"]) {
        this.on(type, (e6) => {
          let phxChange = this.binding("change");
          let input = e6.target;
          let inputEvent = input.getAttribute(phxChange);
          let formEvent = input.form && input.form.getAttribute(phxChange);
          let phxEvent = inputEvent || formEvent;
          if (!phxEvent) {
            return;
          }
          if (input.type === "number" && input.validity && input.validity.badInput) {
            return;
          }
          let dispatcher = inputEvent ? input : input.form;
          let currentIterations = iterations;
          iterations++;
          let { at: at2, type: lastType } = dom_default.private(input, "prev-iteration") || {};
          if (at2 === currentIterations - 1 && type !== lastType) {
            return;
          }
          dom_default.putPrivate(input, "prev-iteration", { at: currentIterations, type });
          this.debounce(input, e6, type, () => {
            this.withinOwners(dispatcher, (view) => {
              dom_default.putPrivate(input, PHX_HAS_FOCUSED, true);
              if (!dom_default.isTextualInput(input)) {
                this.setActiveElement(input);
              }
              js_default.exec("change", phxEvent, view, input, ["push", { _target: e6.target.name, dispatcher }]);
            });
          });
        }, false);
      }
      this.on("reset", (e6) => {
        let form = e6.target;
        dom_default.resetForm(form, this.binding(PHX_FEEDBACK_FOR));
        let input = Array.from(form.elements).find((el) => el.type === "reset");
        window.requestAnimationFrame(() => {
          input.dispatchEvent(new Event("input", { bubbles: true, cancelable: false }));
        });
      });
    }
    debounce(el, event, eventType, callback) {
      if (eventType === "blur" || eventType === "focusout") {
        return callback();
      }
      let phxDebounce = this.binding(PHX_DEBOUNCE);
      let phxThrottle = this.binding(PHX_THROTTLE);
      let defaultDebounce = this.defaults.debounce.toString();
      let defaultThrottle = this.defaults.throttle.toString();
      this.withinOwners(el, (view) => {
        let asyncFilter = () => !view.isDestroyed() && document.body.contains(el);
        dom_default.debounce(el, event, phxDebounce, defaultDebounce, phxThrottle, defaultThrottle, asyncFilter, () => {
          callback();
        });
      });
    }
    silenceEvents(callback) {
      this.silenced = true;
      callback();
      this.silenced = false;
    }
    on(event, callback) {
      window.addEventListener(event, (e6) => {
        if (!this.silenced) {
          callback(e6);
        }
      });
    }
  };
  var TransitionSet = class {
    constructor() {
      this.transitions = /* @__PURE__ */ new Set();
      this.pendingOps = [];
    }
    reset() {
      this.transitions.forEach((timer) => {
        clearTimeout(timer);
        this.transitions.delete(timer);
      });
      this.flushPendingOps();
    }
    after(callback) {
      if (this.size() === 0) {
        callback();
      } else {
        this.pushPendingOp(callback);
      }
    }
    addTransition(time, onStart, onDone) {
      onStart();
      let timer = setTimeout(() => {
        this.transitions.delete(timer);
        onDone();
        this.flushPendingOps();
      }, time);
      this.transitions.add(timer);
    }
    pushPendingOp(op) {
      this.pendingOps.push(op);
    }
    size() {
      return this.transitions.size;
    }
    flushPendingOps() {
      if (this.size() > 0) {
        return;
      }
      let op = this.pendingOps.shift();
      if (op) {
        op();
        this.flushPendingOps();
      }
    }
  };

  // js/app.js
  var import_topbar = __toESM(require_topbar());
  Oi.init("phc_Byagoba6TS6UBZ4AAMOSY5NZpbaEUJltMKH9CsZkv4l", { api_host: "https://app.posthog.com" });
  var csrfToken = document.querySelector("meta[name='csrf-token']").getAttribute("content");
  var liveSocket = new LiveSocket("/live", Socket, { params: { _csrf_token: csrfToken } });
  var searchTimeout;
  document.addEventListener("input", function(event) {
    if (event.target.matches(".search-box-default")) {
      const searchQuery = event.target.value;
      clearTimeout(searchTimeout);
      searchTimeout = setTimeout(function() {
        Oi.capture("used_search", { query: searchQuery });
      }, 5e3);
    }
  }, false);
  import_topbar.default.config({ barColors: { 0: "#29d" }, shadowColor: "rgba(0, 0, 0, .3)" });
  var topBarScheduled = void 0;
  window.addEventListener("phx:page-loading-start", () => {
    if (!topBarScheduled) {
      topBarScheduled = setTimeout(() => import_topbar.default.show(), 500);
    }
  });
  window.addEventListener("phx:page-loading-stop", () => {
    clearTimeout(topBarScheduled);
    topBarScheduled = void 0;
    import_topbar.default.hide();
  });
  liveSocket.connect();
  liveSocket.enableDebug();
  window.liveSocket = liveSocket;
})();
/**
 * @license MIT
 * topbar 1.0.0, 2021-01-06
 * https://buunguyen.github.io/topbar
 * Copyright (c) 2021 Buu Nguyen
 */
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vLi4vYXNzZXRzL3ZlbmRvci90b3BiYXIuanMiLCAiLi4vLi4vLi4vYXNzZXRzL2pzL2RhcmtfbW9kZS5qcyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1qcy9zcmMvY29uZmlnLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9wb3N0aG9nLWpzL3NyYy91dGlscy90eXBlLXV0aWxzLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9wb3N0aG9nLWpzL3NyYy91dGlscy9nbG9iYWxzLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9wb3N0aG9nLWpzL3NyYy91dGlscy9sb2dnZXIudHMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Bvc3Rob2ctanMvc3JjL3V0aWxzL2luZGV4LnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9wb3N0aG9nLWpzL3NyYy9hdXRvY2FwdHVyZS11dGlscy50cyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1qcy9zcmMvZXh0ZW5zaW9ucy9yYWdlY2xpY2sudHMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Bvc3Rob2ctanMvc3JjL2NvbnN0YW50cy50cyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1qcy9zcmMvYXV0b2NhcHR1cmUudHMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Bvc3Rob2ctanMvc3JjL3Bvc3Rob2ctZmVhdHVyZWZsYWdzLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9wb3N0aG9nLWpzL3NyYy91dWlkdjcudHMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Bvc3Rob2ctanMvc3JjL3N0b3JhZ2UudHMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Bvc3Rob2ctanMvc3JjL3V0aWxzL3JlcXVlc3QtdXRpbHMudHMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Bvc3Rob2ctanMvc3JjL3V0aWxzL3VzZXItYWdlbnQtdXRpbHMudHMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Bvc3Rob2ctanMvc3JjL3V0aWxzL2V2ZW50LXV0aWxzLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9wb3N0aG9nLWpzL3NyYy9wb3N0aG9nLXBlcnNpc3RlbmNlLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9wb3N0aG9nLWpzL3NyYy9leHRlbnNpb25zL3JlcGxheS9zZXNzaW9ucmVjb3JkaW5nLXV0aWxzLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9wb3N0aG9nLWpzL25vZGVfbW9kdWxlcy8ucG5wbS9AcnJ3ZWIrdHlwZXNAMi4wLjAtYWxwaGEuMTEvbm9kZV9tb2R1bGVzL0BycndlYi90eXBlcy9kaXN0L3R5cGVzLmpzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9wb3N0aG9nLWpzL3NyYy9leHRlbnNpb25zL3JlcGxheS9jb25maWcudHMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Bvc3Rob2ctanMvc3JjL2dkcHItdXRpbHMudHMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Bvc3Rob2ctanMvc3JjL2V4dGVuc2lvbnMvcmVwbGF5L3Nlc3Npb25yZWNvcmRpbmcudHMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Bvc3Rob2ctanMvc3JjL2RlY2lkZS50cyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1qcy9zcmMvZXh0ZW5zaW9ucy90b29sYmFyLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9wb3N0aG9nLWpzL3NyYy9iYXNlLXJlcXVlc3QtcXVldWUudHMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Bvc3Rob2ctanMvc3JjL3JlcXVlc3QtcXVldWUudHMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Bvc3Rob2ctanMvbm9kZV9tb2R1bGVzLy5wbnBtL2ZmbGF0ZUAwLjQuOC9ub2RlX21vZHVsZXMvZmZsYXRlL2VzbS9icm93c2VyLmpzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9wb3N0aG9nLWpzL3NyYy90eXBlcy50cyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1qcy9zcmMvc2VuZC1yZXF1ZXN0LnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9wb3N0aG9nLWpzL3NyYy9yZXRyeS1xdWV1ZS50cyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1qcy9zcmMvdXRpbHMvcmVxdWVzdC1yb3V0ZXIudHMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Bvc3Rob2ctanMvc3JjL3Nlc3Npb25pZC50cyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1qcy9zcmMvZXh0ZW5zaW9ucy9zZW50cnktaW50ZWdyYXRpb24udHMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Bvc3Rob2ctanMvc3JjL3BhZ2Utdmlldy50cyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1qcy9zcmMvcG9zdGhvZy1zdXJ2ZXlzLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9wb3N0aG9nLWpzL3NyYy9wb3N0aG9nLWNvcmUudHMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Bvc3Rob2ctanMvc3JjL3JhdGUtbGltaXRlci50cyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1qcy9zcmMvc2Vzc2lvbi1wcm9wcy50cyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1qcy9zcmMvdXRpbHMvYmxvY2tlZC11YXMudHMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Bvc3Rob2ctanMvc3JjL2V4dGVuc2lvbnMvc2VnbWVudC1pbnRlZ3JhdGlvbi50cyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1qcy9zcmMvY29tcHJlc3Npb24udHMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Bvc3Rob2ctanMvc3JjL3Bvc3Rob2ctc3VydmV5cy10eXBlcy50cyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1qcy9zcmMvbG9hZGVyLW1vZHVsZS50cyIsICIuLi8uLi8uLi9kZXBzL3Bob2VuaXhfaHRtbC9wcml2L3N0YXRpYy9waG9lbml4X2h0bWwuanMiLCAiLi4vLi4vLi4vZGVwcy9waG9lbml4L2Fzc2V0cy9qcy9waG9lbml4L3V0aWxzLmpzIiwgIi4uLy4uLy4uL2RlcHMvcGhvZW5peC9hc3NldHMvanMvcGhvZW5peC9jb25zdGFudHMuanMiLCAiLi4vLi4vLi4vZGVwcy9waG9lbml4L2Fzc2V0cy9qcy9waG9lbml4L3B1c2guanMiLCAiLi4vLi4vLi4vZGVwcy9waG9lbml4L2Fzc2V0cy9qcy9waG9lbml4L3RpbWVyLmpzIiwgIi4uLy4uLy4uL2RlcHMvcGhvZW5peC9hc3NldHMvanMvcGhvZW5peC9jaGFubmVsLmpzIiwgIi4uLy4uLy4uL2RlcHMvcGhvZW5peC9hc3NldHMvanMvcGhvZW5peC9hamF4LmpzIiwgIi4uLy4uLy4uL2RlcHMvcGhvZW5peC9hc3NldHMvanMvcGhvZW5peC9sb25ncG9sbC5qcyIsICIuLi8uLi8uLi9kZXBzL3Bob2VuaXgvYXNzZXRzL2pzL3Bob2VuaXgvcHJlc2VuY2UuanMiLCAiLi4vLi4vLi4vZGVwcy9waG9lbml4L2Fzc2V0cy9qcy9waG9lbml4L3NlcmlhbGl6ZXIuanMiLCAiLi4vLi4vLi4vZGVwcy9waG9lbml4L2Fzc2V0cy9qcy9waG9lbml4L3NvY2tldC5qcyIsICIuLi8uLi8uLi9kZXBzL3Bob2VuaXhfbGl2ZV92aWV3L2Fzc2V0cy9qcy9waG9lbml4X2xpdmVfdmlldy9jb25zdGFudHMuanMiLCAiLi4vLi4vLi4vZGVwcy9waG9lbml4X2xpdmVfdmlldy9hc3NldHMvanMvcGhvZW5peF9saXZlX3ZpZXcvZW50cnlfdXBsb2FkZXIuanMiLCAiLi4vLi4vLi4vZGVwcy9waG9lbml4X2xpdmVfdmlldy9hc3NldHMvanMvcGhvZW5peF9saXZlX3ZpZXcvdXRpbHMuanMiLCAiLi4vLi4vLi4vZGVwcy9waG9lbml4X2xpdmVfdmlldy9hc3NldHMvanMvcGhvZW5peF9saXZlX3ZpZXcvYnJvd3Nlci5qcyIsICIuLi8uLi8uLi9kZXBzL3Bob2VuaXhfbGl2ZV92aWV3L2Fzc2V0cy9qcy9waG9lbml4X2xpdmVfdmlldy9kb20uanMiLCAiLi4vLi4vLi4vZGVwcy9waG9lbml4X2xpdmVfdmlldy9hc3NldHMvanMvcGhvZW5peF9saXZlX3ZpZXcvdXBsb2FkX2VudHJ5LmpzIiwgIi4uLy4uLy4uL2RlcHMvcGhvZW5peF9saXZlX3ZpZXcvYXNzZXRzL2pzL3Bob2VuaXhfbGl2ZV92aWV3L2xpdmVfdXBsb2FkZXIuanMiLCAiLi4vLi4vLi4vZGVwcy9waG9lbml4X2xpdmVfdmlldy9hc3NldHMvanMvcGhvZW5peF9saXZlX3ZpZXcvYXJpYS5qcyIsICIuLi8uLi8uLi9kZXBzL3Bob2VuaXhfbGl2ZV92aWV3L2Fzc2V0cy9qcy9waG9lbml4X2xpdmVfdmlldy9ob29rcy5qcyIsICIuLi8uLi8uLi9kZXBzL3Bob2VuaXhfbGl2ZV92aWV3L2Fzc2V0cy9qcy9waG9lbml4X2xpdmVfdmlldy9kb21fcG9zdF9tb3JwaF9yZXN0b3Jlci5qcyIsICIuLi8uLi8uLi9kZXBzL3Bob2VuaXhfbGl2ZV92aWV3L2Fzc2V0cy9ub2RlX21vZHVsZXMvbW9ycGhkb20vZGlzdC9tb3JwaGRvbS1lc20uanMiLCAiLi4vLi4vLi4vZGVwcy9waG9lbml4X2xpdmVfdmlldy9hc3NldHMvanMvcGhvZW5peF9saXZlX3ZpZXcvZG9tX3BhdGNoLmpzIiwgIi4uLy4uLy4uL2RlcHMvcGhvZW5peF9saXZlX3ZpZXcvYXNzZXRzL2pzL3Bob2VuaXhfbGl2ZV92aWV3L3JlbmRlcmVkLmpzIiwgIi4uLy4uLy4uL2RlcHMvcGhvZW5peF9saXZlX3ZpZXcvYXNzZXRzL2pzL3Bob2VuaXhfbGl2ZV92aWV3L3ZpZXdfaG9vay5qcyIsICIuLi8uLi8uLi9kZXBzL3Bob2VuaXhfbGl2ZV92aWV3L2Fzc2V0cy9qcy9waG9lbml4X2xpdmVfdmlldy9qcy5qcyIsICIuLi8uLi8uLi9kZXBzL3Bob2VuaXhfbGl2ZV92aWV3L2Fzc2V0cy9qcy9waG9lbml4X2xpdmVfdmlldy92aWV3LmpzIiwgIi4uLy4uLy4uL2RlcHMvcGhvZW5peF9saXZlX3ZpZXcvYXNzZXRzL2pzL3Bob2VuaXhfbGl2ZV92aWV3L2xpdmVfc29ja2V0LmpzIiwgIi4uLy4uLy4uL2Fzc2V0cy9qcy9hcHAuanMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbIi8qKlxuICogQGxpY2Vuc2UgTUlUXG4gKiB0b3BiYXIgMS4wLjAsIDIwMjEtMDEtMDZcbiAqIGh0dHBzOi8vYnV1bmd1eWVuLmdpdGh1Yi5pby90b3BiYXJcbiAqIENvcHlyaWdodCAoYykgMjAyMSBCdXUgTmd1eWVuXG4gKi9cbihmdW5jdGlvbiAod2luZG93LCBkb2N1bWVudCkge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICAvLyBodHRwczovL2dpc3QuZ2l0aHViLmNvbS9wYXVsaXJpc2gvMTU3OTY3MVxuICAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBsYXN0VGltZSA9IDA7XG4gICAgdmFyIHZlbmRvcnMgPSBbXCJtc1wiLCBcIm1velwiLCBcIndlYmtpdFwiLCBcIm9cIl07XG4gICAgZm9yICh2YXIgeCA9IDA7IHggPCB2ZW5kb3JzLmxlbmd0aCAmJiAhd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZTsgKyt4KSB7XG4gICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lID1cbiAgICAgICAgd2luZG93W3ZlbmRvcnNbeF0gKyBcIlJlcXVlc3RBbmltYXRpb25GcmFtZVwiXTtcbiAgICAgIHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZSA9XG4gICAgICAgIHdpbmRvd1t2ZW5kb3JzW3hdICsgXCJDYW5jZWxBbmltYXRpb25GcmFtZVwiXSB8fFxuICAgICAgICB3aW5kb3dbdmVuZG9yc1t4XSArIFwiQ2FuY2VsUmVxdWVzdEFuaW1hdGlvbkZyYW1lXCJdO1xuICAgIH1cbiAgICBpZiAoIXdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUpXG4gICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lID0gZnVuY3Rpb24gKGNhbGxiYWNrLCBlbGVtZW50KSB7XG4gICAgICAgIHZhciBjdXJyVGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgICAgICB2YXIgdGltZVRvQ2FsbCA9IE1hdGgubWF4KDAsIDE2IC0gKGN1cnJUaW1lIC0gbGFzdFRpbWUpKTtcbiAgICAgICAgdmFyIGlkID0gd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGNhbGxiYWNrKGN1cnJUaW1lICsgdGltZVRvQ2FsbCk7XG4gICAgICAgIH0sIHRpbWVUb0NhbGwpO1xuICAgICAgICBsYXN0VGltZSA9IGN1cnJUaW1lICsgdGltZVRvQ2FsbDtcbiAgICAgICAgcmV0dXJuIGlkO1xuICAgICAgfTtcbiAgICBpZiAoIXdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZSlcbiAgICAgIHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZSA9IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICBjbGVhclRpbWVvdXQoaWQpO1xuICAgICAgfTtcbiAgfSkoKTtcblxuICB2YXIgY2FudmFzLFxuICAgIHByb2dyZXNzVGltZXJJZCxcbiAgICBmYWRlVGltZXJJZCxcbiAgICBjdXJyZW50UHJvZ3Jlc3MsXG4gICAgc2hvd2luZyxcbiAgICBhZGRFdmVudCA9IGZ1bmN0aW9uIChlbGVtLCB0eXBlLCBoYW5kbGVyKSB7XG4gICAgICBpZiAoZWxlbS5hZGRFdmVudExpc3RlbmVyKSBlbGVtLmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgaGFuZGxlciwgZmFsc2UpO1xuICAgICAgZWxzZSBpZiAoZWxlbS5hdHRhY2hFdmVudCkgZWxlbS5hdHRhY2hFdmVudChcIm9uXCIgKyB0eXBlLCBoYW5kbGVyKTtcbiAgICAgIGVsc2UgZWxlbVtcIm9uXCIgKyB0eXBlXSA9IGhhbmRsZXI7XG4gICAgfSxcbiAgICBvcHRpb25zID0ge1xuICAgICAgYXV0b1J1bjogdHJ1ZSxcbiAgICAgIGJhclRoaWNrbmVzczogMyxcbiAgICAgIGJhckNvbG9yczoge1xuICAgICAgICAwOiBcInJnYmEoMjYsICAxODgsIDE1NiwgLjkpXCIsXG4gICAgICAgIFwiLjI1XCI6IFwicmdiYSg1MiwgIDE1MiwgMjE5LCAuOSlcIixcbiAgICAgICAgXCIuNTBcIjogXCJyZ2JhKDI0MSwgMTk2LCAxNSwgIC45KVwiLFxuICAgICAgICBcIi43NVwiOiBcInJnYmEoMjMwLCAxMjYsIDM0LCAgLjkpXCIsXG4gICAgICAgIFwiMS4wXCI6IFwicmdiYSgyMTEsIDg0LCAgMCwgICAuOSlcIixcbiAgICAgIH0sXG4gICAgICBzaGFkb3dCbHVyOiAxMCxcbiAgICAgIHNoYWRvd0NvbG9yOiBcInJnYmEoMCwgICAwLCAgIDAsICAgLjYpXCIsXG4gICAgICBjbGFzc05hbWU6IG51bGwsXG4gICAgfSxcbiAgICByZXBhaW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgY2FudmFzLndpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XG4gICAgICBjYW52YXMuaGVpZ2h0ID0gb3B0aW9ucy5iYXJUaGlja25lc3MgKiA1OyAvLyBuZWVkIHNwYWNlIGZvciBzaGFkb3dcblxuICAgICAgdmFyIGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XG4gICAgICBjdHguc2hhZG93Qmx1ciA9IG9wdGlvbnMuc2hhZG93Qmx1cjtcbiAgICAgIGN0eC5zaGFkb3dDb2xvciA9IG9wdGlvbnMuc2hhZG93Q29sb3I7XG5cbiAgICAgIHZhciBsaW5lR3JhZGllbnQgPSBjdHguY3JlYXRlTGluZWFyR3JhZGllbnQoMCwgMCwgY2FudmFzLndpZHRoLCAwKTtcbiAgICAgIGZvciAodmFyIHN0b3AgaW4gb3B0aW9ucy5iYXJDb2xvcnMpXG4gICAgICAgIGxpbmVHcmFkaWVudC5hZGRDb2xvclN0b3Aoc3RvcCwgb3B0aW9ucy5iYXJDb2xvcnNbc3RvcF0pO1xuICAgICAgY3R4LmxpbmVXaWR0aCA9IG9wdGlvbnMuYmFyVGhpY2tuZXNzO1xuICAgICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgY3R4Lm1vdmVUbygwLCBvcHRpb25zLmJhclRoaWNrbmVzcyAvIDIpO1xuICAgICAgY3R4LmxpbmVUbyhcbiAgICAgICAgTWF0aC5jZWlsKGN1cnJlbnRQcm9ncmVzcyAqIGNhbnZhcy53aWR0aCksXG4gICAgICAgIG9wdGlvbnMuYmFyVGhpY2tuZXNzIC8gMlxuICAgICAgKTtcbiAgICAgIGN0eC5zdHJva2VTdHlsZSA9IGxpbmVHcmFkaWVudDtcbiAgICAgIGN0eC5zdHJva2UoKTtcbiAgICB9LFxuICAgIGNyZWF0ZUNhbnZhcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7XG4gICAgICB2YXIgc3R5bGUgPSBjYW52YXMuc3R5bGU7XG4gICAgICBzdHlsZS5wb3NpdGlvbiA9IFwiZml4ZWRcIjtcbiAgICAgIHN0eWxlLnRvcCA9IHN0eWxlLmxlZnQgPSBzdHlsZS5yaWdodCA9IHN0eWxlLm1hcmdpbiA9IHN0eWxlLnBhZGRpbmcgPSAwO1xuICAgICAgc3R5bGUuekluZGV4ID0gMTAwMDAxO1xuICAgICAgc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgaWYgKG9wdGlvbnMuY2xhc3NOYW1lKSBjYW52YXMuY2xhc3NMaXN0LmFkZChvcHRpb25zLmNsYXNzTmFtZSk7XG4gICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGNhbnZhcyk7XG4gICAgICBhZGRFdmVudCh3aW5kb3csIFwicmVzaXplXCIsIHJlcGFpbnQpO1xuICAgIH0sXG4gICAgdG9wYmFyID0ge1xuICAgICAgY29uZmlnOiBmdW5jdGlvbiAob3B0cykge1xuICAgICAgICBmb3IgKHZhciBrZXkgaW4gb3B0cylcbiAgICAgICAgICBpZiAob3B0aW9ucy5oYXNPd25Qcm9wZXJ0eShrZXkpKSBvcHRpb25zW2tleV0gPSBvcHRzW2tleV07XG4gICAgICB9LFxuICAgICAgc2hvdzogZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoc2hvd2luZykgcmV0dXJuO1xuICAgICAgICBzaG93aW5nID0gdHJ1ZTtcbiAgICAgICAgaWYgKGZhZGVUaW1lcklkICE9PSBudWxsKSB3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUoZmFkZVRpbWVySWQpO1xuICAgICAgICBpZiAoIWNhbnZhcykgY3JlYXRlQ2FudmFzKCk7XG4gICAgICAgIGNhbnZhcy5zdHlsZS5vcGFjaXR5ID0gMTtcbiAgICAgICAgY2FudmFzLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgIHRvcGJhci5wcm9ncmVzcygwKTtcbiAgICAgICAgaWYgKG9wdGlvbnMuYXV0b1J1bikge1xuICAgICAgICAgIChmdW5jdGlvbiBsb29wKCkge1xuICAgICAgICAgICAgcHJvZ3Jlc3NUaW1lcklkID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShsb29wKTtcbiAgICAgICAgICAgIHRvcGJhci5wcm9ncmVzcyhcbiAgICAgICAgICAgICAgXCIrXCIgKyAwLjA1ICogTWF0aC5wb3coMSAtIE1hdGguc3FydChjdXJyZW50UHJvZ3Jlc3MpLCAyKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9KSgpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgcHJvZ3Jlc3M6IGZ1bmN0aW9uICh0bykge1xuICAgICAgICBpZiAodHlwZW9mIHRvID09PSBcInVuZGVmaW5lZFwiKSByZXR1cm4gY3VycmVudFByb2dyZXNzO1xuICAgICAgICBpZiAodHlwZW9mIHRvID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgdG8gPVxuICAgICAgICAgICAgKHRvLmluZGV4T2YoXCIrXCIpID49IDAgfHwgdG8uaW5kZXhPZihcIi1cIikgPj0gMFxuICAgICAgICAgICAgICA/IGN1cnJlbnRQcm9ncmVzc1xuICAgICAgICAgICAgICA6IDApICsgcGFyc2VGbG9hdCh0byk7XG4gICAgICAgIH1cbiAgICAgICAgY3VycmVudFByb2dyZXNzID0gdG8gPiAxID8gMSA6IHRvO1xuICAgICAgICByZXBhaW50KCk7XG4gICAgICAgIHJldHVybiBjdXJyZW50UHJvZ3Jlc3M7XG4gICAgICB9LFxuICAgICAgaGlkZTogZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXNob3dpbmcpIHJldHVybjtcbiAgICAgICAgc2hvd2luZyA9IGZhbHNlO1xuICAgICAgICBpZiAocHJvZ3Jlc3NUaW1lcklkICE9IG51bGwpIHtcbiAgICAgICAgICB3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUocHJvZ3Jlc3NUaW1lcklkKTtcbiAgICAgICAgICBwcm9ncmVzc1RpbWVySWQgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIChmdW5jdGlvbiBsb29wKCkge1xuICAgICAgICAgIGlmICh0b3BiYXIucHJvZ3Jlc3MoXCIrLjFcIikgPj0gMSkge1xuICAgICAgICAgICAgY2FudmFzLnN0eWxlLm9wYWNpdHkgLT0gMC4wNTtcbiAgICAgICAgICAgIGlmIChjYW52YXMuc3R5bGUub3BhY2l0eSA8PSAwLjA1KSB7XG4gICAgICAgICAgICAgIGNhbnZhcy5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgICAgIGZhZGVUaW1lcklkID0gbnVsbDtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBmYWRlVGltZXJJZCA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUobG9vcCk7XG4gICAgICAgIH0pKCk7XG4gICAgICB9LFxuICAgIH07XG5cbiAgaWYgKHR5cGVvZiBtb2R1bGUgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcIm9iamVjdFwiKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSB0b3BiYXI7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQpIHtcbiAgICBkZWZpbmUoZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRvcGJhcjtcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLnRvcGJhciA9IHRvcGJhcjtcbiAgfVxufS5jYWxsKHRoaXMsIHdpbmRvdywgZG9jdW1lbnQpKTtcbiIsICIvLyBGdW5jdGlvbiB0byByZWFkIHRoZSB2YWx1ZSBvZiBhIGNvb2tpZSBieSBpdHMgbmFtZVxuZnVuY3Rpb24gZ2V0Q29va2llKG5hbWUpIHtcbiAgY29uc3QgdmFsdWUgPSAnOyAnICsgZG9jdW1lbnQuY29va2llO1xuICBjb25zdCBwYXJ0cyA9IHZhbHVlLnNwbGl0KCc7ICcgKyBuYW1lICsgJz0nKTtcbiAgaWYgKHBhcnRzLmxlbmd0aCA9PT0gMikgcmV0dXJuIHBhcnRzLnBvcCgpLnNwbGl0KCc7Jykuc2hpZnQoKTtcbiAgcmV0dXJuIG51bGw7XG59XG5cbi8vIEZ1bmN0aW9uIHRvIHNldCBkYXJrIG1vZGUgYmFzZWQgb24gdGhlIHVzZXIncyBwcmVmZXJlbmNlXG5mdW5jdGlvbiBzZXREYXJrTW9kZVByZWZlcmVuY2UoaXNEYXJrTW9kZSkge1xuICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZGFya01vZGUnLCBpc0RhcmtNb2RlID8gJ3RydWUnIDogJ2ZhbHNlJyk7XG4gIC8vIFNldCBhIGNvb2tpZSBmb3IgdGhlIGRhcmsgbW9kZSBwcmVmZXJlbmNlXG4gIGRvY3VtZW50LmNvb2tpZSA9ICdkYXJrTW9kZVByZWZlcmVuY2U9JyArIChpc0RhcmtNb2RlID8gJ3RydWUnIDogJ2ZhbHNlJykgKyAnO3BhdGg9Lyc7XG4gIHZhciBib2R5RWxlbWVudCA9IGRvY3VtZW50LmJvZHk7IC8vIFVzZSAnZG9jdW1lbnQuYm9keScgaW5zdGVhZCBvZiAnZ2V0RWxlbWVudEJ5SWQnXG4gIHZhciBsaWdodE1vZGVUb2dnbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGlnaHQtbW9kZS10b2dnbGUnKTtcbiAgdmFyIGRhcmtNb2RlVG9nZ2xlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RhcmstbW9kZS10b2dnbGUnKTtcbiAgaWYgKGlzRGFya01vZGUpIHtcbiAgICBib2R5RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdkYXJrLW1vZGUnKTtcbiAgICBsaWdodE1vZGVUb2dnbGUuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICBkYXJrTW9kZVRvZ2dsZS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgfSBlbHNlIHtcbiAgICBib2R5RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdkYXJrLW1vZGUnKTtcbiAgICBsaWdodE1vZGVUb2dnbGUuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgZGFya01vZGVUb2dnbGUuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgfVxufVxuXG4vLyBGdW5jdGlvbiB0byB0b2dnbGUgZGFyayBtb2RlXG5mdW5jdGlvbiB0b2dnbGVEYXJrTW9kZSgpIHtcbiAgLy8gQ2hlY2sgaWYgZGFyayBtb2RlIGlzIGN1cnJlbnRseSBlbmFibGVkXG4gIHZhciBpc0RhcmtNb2RlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2RhcmtNb2RlJykgPT09ICd0cnVlJztcbiAgLy8gVG9nZ2xlIHRoZSBkYXJrIG1vZGUgcHJlZmVyZW5jZSBhbmQgdXBkYXRlIHRoZSBVSVxuICBzZXREYXJrTW9kZVByZWZlcmVuY2UoIWlzRGFya01vZGUpO1xufVxuXG4vLyBBdHRhY2ggdGhlIHRvZ2dsZURhcmtNb2RlIGZ1bmN0aW9uIHRvIHRoZSBjbGljayBldmVudCBvZiB0aGUgZGFyayBtb2RlIGljb25cbnZhciBkYXJrTW9kZUljb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGFyay1tb2RlLWljb24nKTtcbmlmIChkYXJrTW9kZUljb24pIHtcbiAgZGFya01vZGVJY29uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdG9nZ2xlRGFya01vZGUpO1xufVxuXG4vLyBTZXQgdGhlIGluaXRpYWwgZGFyayBtb2RlIHByZWZlcmVuY2UgYmFzZWQgb24gbG9jYWxTdG9yYWdlXG52YXIgaW5pdGlhbERhcmtNb2RlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2RhcmtNb2RlJykgPT09ICd0cnVlJztcbnNldERhcmtNb2RlUHJlZmVyZW5jZShpbml0aWFsRGFya01vZGUpO1xuXG53aW5kb3cuZ2V0Q29va2llID0gZnVuY3Rpb24obmFtZSkge1xuICBjb25zdCB2YWx1ZSA9ICc7ICcgKyBkb2N1bWVudC5jb29raWU7XG4gIGNvbnN0IHBhcnRzID0gdmFsdWUuc3BsaXQoJzsgJyArIG5hbWUgKyAnPScpO1xuICBpZiAocGFydHMubGVuZ3RoID09PSAyKSByZXR1cm4gcGFydHMucG9wKCkuc3BsaXQoJzsnKS5zaGlmdCgpO1xuICByZXR1cm4gbnVsbDtcbn07XG4iLCAiaW1wb3J0IHsgdmVyc2lvbiB9IGZyb20gJy4uL3BhY2thZ2UuanNvbidcblxuLy8gb3ZlcnJpZGVuIGluIHBvc3Rob2ctY29yZSxcbi8vIGUuZy4gICAgIENvbmZpZy5ERUJVRyA9IENvbmZpZy5ERUJVRyB8fCBpbnN0YW5jZS5jb25maWcuZGVidWdcbmNvbnN0IENvbmZpZyA9IHtcbiAgICBERUJVRzogZmFsc2UsXG4gICAgTElCX1ZFUlNJT046IHZlcnNpb24sXG59XG5cbmV4cG9ydCBkZWZhdWx0IENvbmZpZ1xuIiwgIi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwb3N0aG9nLWpzL25vLWRpcmVjdC1hcnJheS1jaGVja1xuY29uc3QgbmF0aXZlSXNBcnJheSA9IEFycmF5LmlzQXJyYXlcbmNvbnN0IE9ialByb3RvID0gT2JqZWN0LnByb3RvdHlwZVxuZXhwb3J0IGNvbnN0IGhhc093blByb3BlcnR5ID0gT2JqUHJvdG8uaGFzT3duUHJvcGVydHlcbmNvbnN0IHRvU3RyaW5nID0gT2JqUHJvdG8udG9TdHJpbmdcblxuZXhwb3J0IGNvbnN0IF9pc0FycmF5ID1cbiAgICBuYXRpdmVJc0FycmF5IHx8XG4gICAgZnVuY3Rpb24gKG9iajogYW55KTogb2JqIGlzIGFueVtdIHtcbiAgICAgICAgcmV0dXJuIHRvU3RyaW5nLmNhbGwob2JqKSA9PT0gJ1tvYmplY3QgQXJyYXldJ1xuICAgIH1cbmV4cG9ydCBjb25zdCBfaXNVaW50OEFycmF5ID0gZnVuY3Rpb24gKHg6IHVua25vd24pOiB4IGlzIFVpbnQ4QXJyYXkge1xuICAgIHJldHVybiB0b1N0cmluZy5jYWxsKHgpID09PSAnW29iamVjdCBVaW50OEFycmF5XSdcbn1cbi8vIGZyb20gYSBjb21tZW50IG9uIGh0dHA6Ly9kYmoub3JnL2Riai8/cD0yODZcbi8vIGZhaWxzIG9uIG9ubHkgb25lIHZlcnkgcmFyZSBhbmQgZGVsaWJlcmF0ZSBjdXN0b20gb2JqZWN0OlxuLy8gbGV0IGJvbWIgPSB7IHRvU3RyaW5nIDogdW5kZWZpbmVkLCB2YWx1ZU9mOiBmdW5jdGlvbihvKSB7IHJldHVybiBcImZ1bmN0aW9uIEJPTUJBIVwiOyB9fTtcbmV4cG9ydCBjb25zdCBfaXNGdW5jdGlvbiA9IGZ1bmN0aW9uIChmOiBhbnkpOiBmIGlzICguLi5hcmdzOiBhbnlbXSkgPT4gYW55IHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcG9zdGhvZy1qcy9uby1kaXJlY3QtZnVuY3Rpb24tY2hlY2tcbiAgICByZXR1cm4gdHlwZW9mIGYgPT09ICdmdW5jdGlvbidcbn1cbi8vIFVuZGVyc2NvcmUgQWRkb25zXG5leHBvcnQgY29uc3QgX2lzT2JqZWN0ID0gZnVuY3Rpb24gKHg6IHVua25vd24pOiB4IGlzIFJlY29yZDxzdHJpbmcsIGFueT4ge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwb3N0aG9nLWpzL25vLWRpcmVjdC1vYmplY3QtY2hlY2tcbiAgICByZXR1cm4geCA9PT0gT2JqZWN0KHgpICYmICFfaXNBcnJheSh4KVxufVxuZXhwb3J0IGNvbnN0IF9pc0VtcHR5T2JqZWN0ID0gZnVuY3Rpb24gKHg6IHVua25vd24pOiB4IGlzIFJlY29yZDxzdHJpbmcsIGFueT4ge1xuICAgIGlmIChfaXNPYmplY3QoeCkpIHtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4geCkge1xuICAgICAgICAgICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwoeCwga2V5KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICAgIHJldHVybiBmYWxzZVxufVxuZXhwb3J0IGNvbnN0IF9pc1VuZGVmaW5lZCA9IGZ1bmN0aW9uICh4OiB1bmtub3duKTogeCBpcyB1bmRlZmluZWQge1xuICAgIHJldHVybiB4ID09PSB2b2lkIDBcbn1cblxuZXhwb3J0IGNvbnN0IF9pc1N0cmluZyA9IGZ1bmN0aW9uICh4OiB1bmtub3duKTogeCBpcyBzdHJpbmcge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwb3N0aG9nLWpzL25vLWRpcmVjdC1zdHJpbmctY2hlY2tcbiAgICByZXR1cm4gdG9TdHJpbmcuY2FsbCh4KSA9PSAnW29iamVjdCBTdHJpbmddJ1xufVxuXG5leHBvcnQgY29uc3QgX2lzRW1wdHlTdHJpbmcgPSBmdW5jdGlvbiAoeDogdW5rbm93bik6IGJvb2xlYW4ge1xuICAgIHJldHVybiBfaXNTdHJpbmcoeCkgJiYgeC50cmltKCkubGVuZ3RoID09PSAwXG59XG5cbmV4cG9ydCBjb25zdCBfaXNOdWxsID0gZnVuY3Rpb24gKHg6IHVua25vd24pOiB4IGlzIG51bGwge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwb3N0aG9nLWpzL25vLWRpcmVjdC1udWxsLWNoZWNrXG4gICAgcmV0dXJuIHggPT09IG51bGxcbn1cblxuLypcbiAgICBzb21ldGltZXMgeW91IHdhbnQgdG8gY2hlY2sgaWYgc29tZXRoaW5nIGlzIG51bGwgb3IgdW5kZWZpbmVkXG4gICAgdGhhdCdzIHdoYXQgdGhpcyBpcyBmb3JcbiAqL1xuZXhwb3J0IGNvbnN0IF9pc051bGxpc2ggPSBmdW5jdGlvbiAoeDogdW5rbm93bik6IHggaXMgbnVsbCB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIF9pc1VuZGVmaW5lZCh4KSB8fCBfaXNOdWxsKHgpXG59XG5cbmV4cG9ydCBjb25zdCBfaXNEYXRlID0gZnVuY3Rpb24gKHg6IHVua25vd24pOiB4IGlzIERhdGUge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwb3N0aG9nLWpzL25vLWRpcmVjdC1kYXRlLWNoZWNrXG4gICAgcmV0dXJuIHRvU3RyaW5nLmNhbGwoeCkgPT0gJ1tvYmplY3QgRGF0ZV0nXG59XG5leHBvcnQgY29uc3QgX2lzTnVtYmVyID0gZnVuY3Rpb24gKHg6IHVua25vd24pOiB4IGlzIG51bWJlciB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHBvc3Rob2ctanMvbm8tZGlyZWN0LW51bWJlci1jaGVja1xuICAgIHJldHVybiB0b1N0cmluZy5jYWxsKHgpID09ICdbb2JqZWN0IE51bWJlcl0nXG59XG5leHBvcnQgY29uc3QgX2lzQm9vbGVhbiA9IGZ1bmN0aW9uICh4OiB1bmtub3duKTogeCBpcyBib29sZWFuIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcG9zdGhvZy1qcy9uby1kaXJlY3QtYm9vbGVhbi1jaGVja1xuICAgIHJldHVybiB0b1N0cmluZy5jYWxsKHgpID09PSAnW29iamVjdCBCb29sZWFuXSdcbn1cblxuZXhwb3J0IGNvbnN0IF9pc0RvY3VtZW50ID0gKHg6IHVua25vd24pOiB4IGlzIERvY3VtZW50ID0+IHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcG9zdGhvZy1qcy9uby1kaXJlY3QtZG9jdW1lbnQtY2hlY2tcbiAgICByZXR1cm4geCBpbnN0YW5jZW9mIERvY3VtZW50XG59XG5cbmV4cG9ydCBjb25zdCBfaXNGb3JtRGF0YSA9ICh4OiB1bmtub3duKTogeCBpcyBGb3JtRGF0YSA9PiB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHBvc3Rob2ctanMvbm8tZGlyZWN0LWZvcm0tZGF0YS1jaGVja1xuICAgIHJldHVybiB4IGluc3RhbmNlb2YgRm9ybURhdGFcbn1cblxuZXhwb3J0IGNvbnN0IF9pc0ZpbGUgPSAoeDogdW5rbm93bik6IHggaXMgRmlsZSA9PiB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHBvc3Rob2ctanMvbm8tZGlyZWN0LWZpbGUtY2hlY2tcbiAgICByZXR1cm4geCBpbnN0YW5jZW9mIEZpbGVcbn1cbiIsICIvKlxuICogR2xvYmFsIGhlbHBlcnMgdG8gcHJvdGVjdCBhY2Nlc3MgdG8gYnJvd3NlciBnbG9iYWxzIGluIGEgd2F5IHRoYXQgaXMgc2FmZXIgZm9yIGRpZmZlcmVudCB0YXJnZXRzXG4gKiBsaWtlIERPTSwgU1NSLCBXZWIgd29ya2VycyBldGMuXG4gKlxuICogTk9URTogVHlwaWNhbGx5IHdlIHdhbnQgdGhlIFwid2luZG93XCIgYnV0IGdsb2JhbFRoaXMgd29ya3MgZm9yIGJvdGggdGhlIHR5cGljYWwgYnJvd3NlciBjb250ZXh0IGFzXG4gKiB3ZWxsIGFzIG90aGVyIGNvbnRleHRzIHN1Y2ggYXMgdGhlIHdlYiB3b3JrZXIgY29udGV4dC4gV2luZG93IGlzIHN0aWxsIGV4cG9ydGVkIGZvciBhbnkgYml0cyB0aGF0IGV4cGxpY2l0bHkgcmVxdWlyZSBpdC5cbiAqIElmIGluIGRvdWJ0IC0gZXhwb3J0IHRoZSBnbG9iYWwgeW91IG5lZWQgZnJvbSB0aGlzIGZpbGUgYW5kIHVzZSB0aGF0IGFzIGFuIG9wdGlvbmFsIHZhbHVlLiBUaGlzIHdheSB0aGUgY29kZSBwYXRoIGlzIGZvcmNlZFxuICogdG8gaGFuZGxlIHRoZSBjYXNlIHdoZXJlIHRoZSBnbG9iYWwgaXMgbm90IGF2YWlsYWJsZS5cbiAqL1xuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzXG5jb25zdCB3aW46IChXaW5kb3cgJiB0eXBlb2YgZ2xvYmFsVGhpcykgfCB1bmRlZmluZWQgPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHVuZGVmaW5lZFxuXG5jb25zdCBnbG9iYWw6IHR5cGVvZiBnbG9iYWxUaGlzIHwgdW5kZWZpbmVkID0gdHlwZW9mIGdsb2JhbFRoaXMgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsVGhpcyA6IHdpblxuXG5leHBvcnQgY29uc3QgQXJyYXlQcm90byA9IEFycmF5LnByb3RvdHlwZVxuZXhwb3J0IGNvbnN0IG5hdGl2ZUZvckVhY2ggPSBBcnJheVByb3RvLmZvckVhY2hcbmV4cG9ydCBjb25zdCBuYXRpdmVJbmRleE9mID0gQXJyYXlQcm90by5pbmRleE9mXG5cbmNvbnN0IG5hdmlnYXRvciA9IGdsb2JhbD8ubmF2aWdhdG9yXG5leHBvcnQgY29uc3QgZG9jdW1lbnQgPSBnbG9iYWw/LmRvY3VtZW50XG5leHBvcnQgY29uc3QgbG9jYXRpb24gPSBnbG9iYWw/LmxvY2F0aW9uXG5leHBvcnQgY29uc3QgZmV0Y2ggPSBnbG9iYWw/LmZldGNoXG5leHBvcnQgY29uc3QgWE1MSHR0cFJlcXVlc3QgPSBnbG9iYWw/LlhNTEh0dHBSZXF1ZXN0XG5leHBvcnQgY29uc3QgdXNlckFnZW50ID0gbmF2aWdhdG9yPy51c2VyQWdlbnRcbmV4cG9ydCBjb25zdCBhc3NpZ25hYmxlV2luZG93OiBXaW5kb3cgJiB0eXBlb2YgZ2xvYmFsVGhpcyAmIFJlY29yZDxzdHJpbmcsIGFueT4gPSB3aW4gPz8gKHt9IGFzIGFueSlcblxuZXhwb3J0IHsgd2luIGFzIHdpbmRvdyB9XG4iLCAiaW1wb3J0IENvbmZpZyBmcm9tICcuLi9jb25maWcnXG5pbXBvcnQgeyBfaXNVbmRlZmluZWQgfSBmcm9tICcuL3R5cGUtdXRpbHMnXG5pbXBvcnQgeyBhc3NpZ25hYmxlV2luZG93LCB3aW5kb3cgfSBmcm9tICcuL2dsb2JhbHMnXG5cbmNvbnN0IExPR0dFUl9QUkVGSVggPSAnW1Bvc3RIb2cuanNdJ1xuZXhwb3J0IGNvbnN0IGxvZ2dlciA9IHtcbiAgICBfbG9nOiAobGV2ZWw6ICdsb2cnIHwgJ3dhcm4nIHwgJ2Vycm9yJywgLi4uYXJnczogYW55W10pID0+IHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgd2luZG93ICYmXG4gICAgICAgICAgICAoQ29uZmlnLkRFQlVHIHx8IGFzc2lnbmFibGVXaW5kb3cuUE9TVEhPR19ERUJVRykgJiZcbiAgICAgICAgICAgICFfaXNVbmRlZmluZWQod2luZG93LmNvbnNvbGUpICYmXG4gICAgICAgICAgICB3aW5kb3cuY29uc29sZVxuICAgICAgICApIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbnNvbGVMb2cgPVxuICAgICAgICAgICAgICAgICdfX3Jyd2ViX29yaWdpbmFsX18nIGluIHdpbmRvdy5jb25zb2xlW2xldmVsXVxuICAgICAgICAgICAgICAgICAgICA/ICh3aW5kb3cuY29uc29sZVtsZXZlbF0gYXMgYW55KVsnX19ycndlYl9vcmlnaW5hbF9fJ11cbiAgICAgICAgICAgICAgICAgICAgOiB3aW5kb3cuY29uc29sZVtsZXZlbF1cblxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgICAgICAgIGNvbnNvbGVMb2coTE9HR0VSX1BSRUZJWCwgLi4uYXJncylcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBpbmZvOiAoLi4uYXJnczogYW55W10pID0+IHtcbiAgICAgICAgbG9nZ2VyLl9sb2coJ2xvZycsIC4uLmFyZ3MpXG4gICAgfSxcblxuICAgIHdhcm46ICguLi5hcmdzOiBhbnlbXSkgPT4ge1xuICAgICAgICBsb2dnZXIuX2xvZygnd2FybicsIC4uLmFyZ3MpXG4gICAgfSxcblxuICAgIGVycm9yOiAoLi4uYXJnczogYW55W10pID0+IHtcbiAgICAgICAgbG9nZ2VyLl9sb2coJ2Vycm9yJywgLi4uYXJncylcbiAgICB9LFxuXG4gICAgY3JpdGljYWw6ICguLi5hcmdzOiBhbnlbXSkgPT4ge1xuICAgICAgICAvLyBDcml0aWNhbCBlcnJvcnMgYXJlIGFsd2F5cyBsb2dnZWQgdG8gdGhlIGNvbnNvbGVcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgICAgY29uc29sZS5lcnJvcihMT0dHRVJfUFJFRklYLCAuLi5hcmdzKVxuICAgIH0sXG5cbiAgICB1bmluaXRpYWxpemVkV2FybmluZzogKG1ldGhvZE5hbWU6IHN0cmluZykgPT4ge1xuICAgICAgICBsb2dnZXIuZXJyb3IoYFlvdSBtdXN0IGluaXRpYWxpemUgUG9zdEhvZyBiZWZvcmUgY2FsbGluZyAke21ldGhvZE5hbWV9YClcbiAgICB9LFxufVxuIiwgImltcG9ydCB7IEJyZWFrZXIsIEV2ZW50SGFuZGxlciwgUHJvcGVydGllcyB9IGZyb20gJy4uL3R5cGVzJ1xuaW1wb3J0IHtcbiAgICBfaXNBcnJheSxcbiAgICBfaXNEYXRlLFxuICAgIF9pc0Zvcm1EYXRhLFxuICAgIF9pc0Z1bmN0aW9uLFxuICAgIF9pc051bGwsXG4gICAgX2lzTnVsbGlzaCxcbiAgICBfaXNPYmplY3QsXG4gICAgX2lzU3RyaW5nLFxuICAgIGhhc093blByb3BlcnR5LFxufSBmcm9tICcuL3R5cGUtdXRpbHMnXG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tICcuL2xvZ2dlcidcbmltcG9ydCB7IHdpbmRvdywgZG9jdW1lbnQsIG5hdGl2ZUZvckVhY2gsIG5hdGl2ZUluZGV4T2YgfSBmcm9tICcuL2dsb2JhbHMnXG5cbmNvbnN0IGJyZWFrZXI6IEJyZWFrZXIgPSB7fVxuXG4vLyBVTkRFUlNDT1JFXG4vLyBFbWJlZCBwYXJ0IG9mIHRoZSBVbmRlcnNjb3JlIExpYnJhcnlcbmV4cG9ydCBjb25zdCBfdHJpbSA9IGZ1bmN0aW9uIChzdHI6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHN0ci5yZXBsYWNlKC9eW1xcc1xcdUZFRkZcXHhBMF0rfFtcXHNcXHVGRUZGXFx4QTBdKyQvZywgJycpXG59XG5cbmV4cG9ydCBjb25zdCBfYmluZF9pbnN0YW5jZV9tZXRob2RzID0gZnVuY3Rpb24gKG9iajogUmVjb3JkPHN0cmluZywgYW55Pik6IHZvaWQge1xuICAgIGZvciAoY29uc3QgZnVuYyBpbiBvYmopIHtcbiAgICAgICAgaWYgKF9pc0Z1bmN0aW9uKG9ialtmdW5jXSkpIHtcbiAgICAgICAgICAgIG9ialtmdW5jXSA9IG9ialtmdW5jXS5iaW5kKG9iailcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF9lYWNoQXJyYXk8RSA9IGFueT4oXG4gICAgb2JqOiBFW10gfCBudWxsIHwgdW5kZWZpbmVkLFxuICAgIGl0ZXJhdG9yOiAodmFsdWU6IEUsIGtleTogbnVtYmVyKSA9PiB2b2lkIHwgQnJlYWtlcixcbiAgICB0aGlzQXJnPzogYW55XG4pOiB2b2lkIHtcbiAgICBpZiAoX2lzQXJyYXkob2JqKSkge1xuICAgICAgICBpZiAobmF0aXZlRm9yRWFjaCAmJiBvYmouZm9yRWFjaCA9PT0gbmF0aXZlRm9yRWFjaCkge1xuICAgICAgICAgICAgb2JqLmZvckVhY2goaXRlcmF0b3IsIHRoaXNBcmcpXG4gICAgICAgIH0gZWxzZSBpZiAoJ2xlbmd0aCcgaW4gb2JqICYmIG9iai5sZW5ndGggPT09ICtvYmoubGVuZ3RoKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMCwgbCA9IG9iai5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoaSBpbiBvYmogJiYgaXRlcmF0b3IuY2FsbCh0aGlzQXJnLCBvYmpbaV0sIGkpID09PSBicmVha2VyKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cblxuLyoqXG4gKiBAcGFyYW0geyo9fSBvYmpcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oLi4uKik9fSBpdGVyYXRvclxuICogQHBhcmFtIHtPYmplY3Q9fSB0aGlzQXJnXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBfZWFjaChvYmo6IGFueSwgaXRlcmF0b3I6ICh2YWx1ZTogYW55LCBrZXk6IGFueSkgPT4gdm9pZCB8IEJyZWFrZXIsIHRoaXNBcmc/OiBhbnkpOiB2b2lkIHtcbiAgICBpZiAoX2lzTnVsbGlzaChvYmopKSB7XG4gICAgICAgIHJldHVyblxuICAgIH1cbiAgICBpZiAoX2lzQXJyYXkob2JqKSkge1xuICAgICAgICByZXR1cm4gX2VhY2hBcnJheShvYmosIGl0ZXJhdG9yLCB0aGlzQXJnKVxuICAgIH1cbiAgICBpZiAoX2lzRm9ybURhdGEob2JqKSkge1xuICAgICAgICBmb3IgKGNvbnN0IHBhaXIgb2Ygb2JqLmVudHJpZXMoKSkge1xuICAgICAgICAgICAgaWYgKGl0ZXJhdG9yLmNhbGwodGhpc0FyZywgcGFpclsxXSwgcGFpclswXSkgPT09IGJyZWFrZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm5cbiAgICB9XG4gICAgZm9yIChjb25zdCBrZXkgaW4gb2JqKSB7XG4gICAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkge1xuICAgICAgICAgICAgaWYgKGl0ZXJhdG9yLmNhbGwodGhpc0FyZywgb2JqW2tleV0sIGtleSkgPT09IGJyZWFrZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cblxuZXhwb3J0IGNvbnN0IF9leHRlbmQgPSBmdW5jdGlvbiAob2JqOiBSZWNvcmQ8c3RyaW5nLCBhbnk+LCAuLi5hcmdzOiBSZWNvcmQ8c3RyaW5nLCBhbnk+W10pOiBSZWNvcmQ8c3RyaW5nLCBhbnk+IHtcbiAgICBfZWFjaEFycmF5KGFyZ3MsIGZ1bmN0aW9uIChzb3VyY2UpIHtcbiAgICAgICAgZm9yIChjb25zdCBwcm9wIGluIHNvdXJjZSkge1xuICAgICAgICAgICAgaWYgKHNvdXJjZVtwcm9wXSAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgICAgb2JqW3Byb3BdID0gc291cmNlW3Byb3BdXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KVxuICAgIHJldHVybiBvYmpcbn1cblxuZXhwb3J0IGNvbnN0IF9pbmNsdWRlID0gZnVuY3Rpb24gKFxuICAgIG9iajogbnVsbCB8IHN0cmluZyB8IEFycmF5PGFueT4gfCBSZWNvcmQ8c3RyaW5nLCBhbnk+LFxuICAgIHRhcmdldDogYW55XG4pOiBib29sZWFuIHwgQnJlYWtlciB7XG4gICAgbGV0IGZvdW5kID0gZmFsc2VcbiAgICBpZiAoX2lzTnVsbChvYmopKSB7XG4gICAgICAgIHJldHVybiBmb3VuZFxuICAgIH1cbiAgICBpZiAobmF0aXZlSW5kZXhPZiAmJiBvYmouaW5kZXhPZiA9PT0gbmF0aXZlSW5kZXhPZikge1xuICAgICAgICByZXR1cm4gb2JqLmluZGV4T2YodGFyZ2V0KSAhPSAtMVxuICAgIH1cbiAgICBfZWFjaChvYmosIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBpZiAoZm91bmQgfHwgKGZvdW5kID0gdmFsdWUgPT09IHRhcmdldCkpIHtcbiAgICAgICAgICAgIHJldHVybiBicmVha2VyXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuXG4gICAgfSlcbiAgICByZXR1cm4gZm91bmRcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF9pbmNsdWRlczxUID0gYW55PihzdHI6IFRbXSB8IHN0cmluZywgbmVlZGxlOiBUKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIChzdHIgYXMgYW55KS5pbmRleE9mKG5lZWRsZSkgIT09IC0xXG59XG5cbi8qKlxuICogT2JqZWN0LmVudHJpZXMoKSBwb2x5ZmlsbFxuICogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvT2JqZWN0L2VudHJpZXNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIF9lbnRyaWVzPFQgPSBhbnk+KG9iajogUmVjb3JkPHN0cmluZywgVD4pOiBbc3RyaW5nLCBUXVtdIHtcbiAgICBjb25zdCBvd25Qcm9wcyA9IE9iamVjdC5rZXlzKG9iailcbiAgICBsZXQgaSA9IG93blByb3BzLmxlbmd0aFxuICAgIGNvbnN0IHJlc0FycmF5ID0gbmV3IEFycmF5KGkpIC8vIHByZWFsbG9jYXRlIHRoZSBBcnJheVxuXG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgICByZXNBcnJheVtpXSA9IFtvd25Qcm9wc1tpXSwgb2JqW293blByb3BzW2ldXV1cbiAgICB9XG4gICAgcmV0dXJuIHJlc0FycmF5XG59XG5cbmV4cG9ydCBjb25zdCBfaXNWYWxpZFJlZ2V4ID0gZnVuY3Rpb24gKHN0cjogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgdHJ5IHtcbiAgICAgICAgbmV3IFJlZ0V4cChzdHIpXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIHJldHVybiB0cnVlXG59XG5cbmV4cG9ydCBjb25zdCBfZW5jb2RlRGF0ZXMgPSBmdW5jdGlvbiAob2JqOiBQcm9wZXJ0aWVzKTogUHJvcGVydGllcyB7XG4gICAgX2VhY2gob2JqLCBmdW5jdGlvbiAodiwgaykge1xuICAgICAgICBpZiAoX2lzRGF0ZSh2KSkge1xuICAgICAgICAgICAgb2JqW2tdID0gX2Zvcm1hdERhdGUodilcbiAgICAgICAgfSBlbHNlIGlmIChfaXNPYmplY3QodikpIHtcbiAgICAgICAgICAgIG9ialtrXSA9IF9lbmNvZGVEYXRlcyh2KSAvLyByZWN1cnNlXG4gICAgICAgIH1cbiAgICB9KVxuICAgIHJldHVybiBvYmpcbn1cblxuZXhwb3J0IGNvbnN0IF90aW1lc3RhbXAgPSBmdW5jdGlvbiAoKTogbnVtYmVyIHtcbiAgICBEYXRlLm5vdyA9XG4gICAgICAgIERhdGUubm93IHx8XG4gICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiArbmV3IERhdGUoKVxuICAgICAgICB9XG4gICAgcmV0dXJuIERhdGUubm93KClcbn1cblxuZXhwb3J0IGNvbnN0IF9mb3JtYXREYXRlID0gZnVuY3Rpb24gKGQ6IERhdGUpOiBzdHJpbmcge1xuICAgIC8vIFlZWVktTU0tRERUSEg6TU06U1MgaW4gVVRDXG4gICAgZnVuY3Rpb24gcGFkKG46IG51bWJlcikge1xuICAgICAgICByZXR1cm4gbiA8IDEwID8gJzAnICsgbiA6IG5cbiAgICB9XG4gICAgcmV0dXJuIChcbiAgICAgICAgZC5nZXRVVENGdWxsWWVhcigpICtcbiAgICAgICAgJy0nICtcbiAgICAgICAgcGFkKGQuZ2V0VVRDTW9udGgoKSArIDEpICtcbiAgICAgICAgJy0nICtcbiAgICAgICAgcGFkKGQuZ2V0VVRDRGF0ZSgpKSArXG4gICAgICAgICdUJyArXG4gICAgICAgIHBhZChkLmdldFVUQ0hvdXJzKCkpICtcbiAgICAgICAgJzonICtcbiAgICAgICAgcGFkKGQuZ2V0VVRDTWludXRlcygpKSArXG4gICAgICAgICc6JyArXG4gICAgICAgIHBhZChkLmdldFVUQ1NlY29uZHMoKSlcbiAgICApXG59XG5cbmV4cG9ydCBjb25zdCBfdHJ5ID0gZnVuY3Rpb24gPFQ+KGZuOiAoKSA9PiBUKTogVCB8IHVuZGVmaW5lZCB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGZuKClcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWRcbiAgICB9XG59XG5cbmV4cG9ydCBjb25zdCBfc2FmZXdyYXAgPSBmdW5jdGlvbiA8RiBleHRlbmRzICguLi5hcmdzOiBhbnlbXSkgPT4gYW55ID0gKC4uLmFyZ3M6IGFueVtdKSA9PiBhbnk+KGY6IEYpOiBGIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKC4uLmFyZ3MpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvYmFuLXRzLWNvbW1lbnRcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgIHJldHVybiBmLmFwcGx5KHRoaXMsIGFyZ3MpXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGxvZ2dlci5jcml0aWNhbChcbiAgICAgICAgICAgICAgICAnSW1wbGVtZW50YXRpb24gZXJyb3IuIFBsZWFzZSB0dXJuIG9uIGRlYnVnIG1vZGUgYW5kIG9wZW4gYSB0aWNrZXQgb24gaHR0cHM6Ly9hcHAucG9zdGhvZy5jb20vaG9tZSNwYW5lbD1zdXBwb3J0JTNBc3VwcG9ydCUzQS4nXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBsb2dnZXIuY3JpdGljYWwoZSlcbiAgICAgICAgfVxuICAgIH0gYXMgRlxufVxuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2Jhbi10eXBlc1xuZXhwb3J0IGNvbnN0IF9zYWZld3JhcF9jbGFzcyA9IGZ1bmN0aW9uIChrbGFzczogRnVuY3Rpb24sIGZ1bmN0aW9uczogc3RyaW5nW10pOiB2b2lkIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZ1bmN0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICBrbGFzcy5wcm90b3R5cGVbZnVuY3Rpb25zW2ldXSA9IF9zYWZld3JhcChrbGFzcy5wcm90b3R5cGVbZnVuY3Rpb25zW2ldXSlcbiAgICB9XG59XG5cbmV4cG9ydCBjb25zdCBfc2FmZXdyYXBfaW5zdGFuY2VfbWV0aG9kcyA9IGZ1bmN0aW9uIChvYmo6IFJlY29yZDxzdHJpbmcsIGFueT4pOiB2b2lkIHtcbiAgICBmb3IgKGNvbnN0IGZ1bmMgaW4gb2JqKSB7XG4gICAgICAgIGlmIChfaXNGdW5jdGlvbihvYmpbZnVuY10pKSB7XG4gICAgICAgICAgICBvYmpbZnVuY10gPSBfc2FmZXdyYXAob2JqW2Z1bmNdKVxuICAgICAgICB9XG4gICAgfVxufVxuXG5leHBvcnQgY29uc3QgX3N0cmlwX2VtcHR5X3Byb3BlcnRpZXMgPSBmdW5jdGlvbiAocDogUHJvcGVydGllcyk6IFByb3BlcnRpZXMge1xuICAgIGNvbnN0IHJldDogUHJvcGVydGllcyA9IHt9XG4gICAgX2VhY2gocCwgZnVuY3Rpb24gKHYsIGspIHtcbiAgICAgICAgaWYgKF9pc1N0cmluZyh2KSAmJiB2Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHJldFtrXSA9IHZcbiAgICAgICAgfVxuICAgIH0pXG4gICAgcmV0dXJuIHJldFxufVxuXG4vKipcbiAqIERlZXAgY29waWVzIGFuIG9iamVjdC5cbiAqIEl0IGhhbmRsZXMgY3ljbGVzIGJ5IHJlcGxhY2luZyBhbGwgcmVmZXJlbmNlcyB0byB0aGVtIHdpdGggYHVuZGVmaW5lZGBcbiAqIEFsc28gc3VwcG9ydHMgY3VzdG9taXppbmcgbmF0aXZlIHZhbHVlc1xuICpcbiAqIEBwYXJhbSB2YWx1ZVxuICogQHBhcmFtIGN1c3RvbWl6ZXJcbiAqIEByZXR1cm5zIHt7fXx1bmRlZmluZWR8Kn1cbiAqL1xuZnVuY3Rpb24gZGVlcENpcmN1bGFyQ29weTxUIGV4dGVuZHMgUmVjb3JkPHN0cmluZywgYW55PiA9IFJlY29yZDxzdHJpbmcsIGFueT4+KFxuICAgIHZhbHVlOiBULFxuICAgIGN1c3RvbWl6ZXI/OiA8SyBleHRlbmRzIGtleW9mIFQgPSBrZXlvZiBUPih2YWx1ZTogVFtLXSwga2V5PzogSykgPT4gVFtLXVxuKTogVCB8IHVuZGVmaW5lZCB7XG4gICAgY29uc3QgQ09QWV9JTl9QUk9HUkVTU19TRVQgPSBuZXcgU2V0KClcblxuICAgIGZ1bmN0aW9uIGludGVybmFsRGVlcENpcmN1bGFyQ29weSh2YWx1ZTogVCwga2V5Pzogc3RyaW5nKTogVCB8IHVuZGVmaW5lZCB7XG4gICAgICAgIGlmICh2YWx1ZSAhPT0gT2JqZWN0KHZhbHVlKSkgcmV0dXJuIGN1c3RvbWl6ZXIgPyBjdXN0b21pemVyKHZhbHVlIGFzIGFueSwga2V5KSA6IHZhbHVlIC8vIHByaW1pdGl2ZSB2YWx1ZVxuXG4gICAgICAgIGlmIChDT1BZX0lOX1BST0dSRVNTX1NFVC5oYXModmFsdWUpKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgICAgIENPUFlfSU5fUFJPR1JFU1NfU0VULmFkZCh2YWx1ZSlcbiAgICAgICAgbGV0IHJlc3VsdDogVFxuXG4gICAgICAgIGlmIChfaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IFtdIGFzIGFueSBhcyBUXG4gICAgICAgICAgICBfZWFjaEFycmF5KHZhbHVlLCAoaXQpID0+IHtcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChpbnRlcm5hbERlZXBDaXJjdWxhckNvcHkoaXQpKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHt9IGFzIFRcbiAgICAgICAgICAgIF9lYWNoKHZhbHVlLCAodmFsLCBrZXkpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIUNPUFlfSU5fUFJPR1JFU1NfU0VULmhhcyh2YWwpKSB7XG4gICAgICAgICAgICAgICAgICAgIDsocmVzdWx0IGFzIGFueSlba2V5XSA9IGludGVybmFsRGVlcENpcmN1bGFyQ29weSh2YWwsIGtleSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHRcbiAgICB9XG4gICAgcmV0dXJuIGludGVybmFsRGVlcENpcmN1bGFyQ29weSh2YWx1ZSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF9jb3B5QW5kVHJ1bmNhdGVTdHJpbmdzPFQgZXh0ZW5kcyBSZWNvcmQ8c3RyaW5nLCBhbnk+ID0gUmVjb3JkPHN0cmluZywgYW55Pj4oXG4gICAgb2JqZWN0OiBULFxuICAgIG1heFN0cmluZ0xlbmd0aDogbnVtYmVyIHwgbnVsbFxuKTogVCB7XG4gICAgcmV0dXJuIGRlZXBDaXJjdWxhckNvcHkob2JqZWN0LCAodmFsdWU6IGFueSkgPT4ge1xuICAgICAgICBpZiAoX2lzU3RyaW5nKHZhbHVlKSAmJiAhX2lzTnVsbChtYXhTdHJpbmdMZW5ndGgpKSB7XG4gICAgICAgICAgICByZXR1cm4gKHZhbHVlIGFzIHN0cmluZykuc2xpY2UoMCwgbWF4U3RyaW5nTGVuZ3RoKVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZVxuICAgIH0pIGFzIFRcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF9iYXNlNjRFbmNvZGUoZGF0YTogbnVsbCk6IG51bGxcbmV4cG9ydCBmdW5jdGlvbiBfYmFzZTY0RW5jb2RlKGRhdGE6IHVuZGVmaW5lZCk6IHVuZGVmaW5lZFxuZXhwb3J0IGZ1bmN0aW9uIF9iYXNlNjRFbmNvZGUoZGF0YTogc3RyaW5nKTogc3RyaW5nXG5leHBvcnQgZnVuY3Rpb24gX2Jhc2U2NEVuY29kZShkYXRhOiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkKTogc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZCB7XG4gICAgY29uc3QgYjY0ID0gJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky89J1xuICAgIGxldCBvMSxcbiAgICAgICAgbzIsXG4gICAgICAgIG8zLFxuICAgICAgICBoMSxcbiAgICAgICAgaDIsXG4gICAgICAgIGgzLFxuICAgICAgICBoNCxcbiAgICAgICAgYml0cyxcbiAgICAgICAgaSA9IDAsXG4gICAgICAgIGFjID0gMCxcbiAgICAgICAgZW5jID0gJydcbiAgICBjb25zdCB0bXBfYXJyOiBzdHJpbmdbXSA9IFtdXG5cbiAgICBpZiAoIWRhdGEpIHtcbiAgICAgICAgcmV0dXJuIGRhdGFcbiAgICB9XG5cbiAgICBkYXRhID0gX3V0ZjhFbmNvZGUoZGF0YSlcblxuICAgIGRvIHtcbiAgICAgICAgLy8gcGFjayB0aHJlZSBvY3RldHMgaW50byBmb3VyIGhleGV0c1xuICAgICAgICBvMSA9IGRhdGEuY2hhckNvZGVBdChpKyspXG4gICAgICAgIG8yID0gZGF0YS5jaGFyQ29kZUF0KGkrKylcbiAgICAgICAgbzMgPSBkYXRhLmNoYXJDb2RlQXQoaSsrKVxuXG4gICAgICAgIGJpdHMgPSAobzEgPDwgMTYpIHwgKG8yIDw8IDgpIHwgbzNcblxuICAgICAgICBoMSA9IChiaXRzID4+IDE4KSAmIDB4M2ZcbiAgICAgICAgaDIgPSAoYml0cyA+PiAxMikgJiAweDNmXG4gICAgICAgIGgzID0gKGJpdHMgPj4gNikgJiAweDNmXG4gICAgICAgIGg0ID0gYml0cyAmIDB4M2ZcblxuICAgICAgICAvLyB1c2UgaGV4ZXRzIHRvIGluZGV4IGludG8gYjY0LCBhbmQgYXBwZW5kIHJlc3VsdCB0byBlbmNvZGVkIHN0cmluZ1xuICAgICAgICB0bXBfYXJyW2FjKytdID0gYjY0LmNoYXJBdChoMSkgKyBiNjQuY2hhckF0KGgyKSArIGI2NC5jaGFyQXQoaDMpICsgYjY0LmNoYXJBdChoNClcbiAgICB9IHdoaWxlIChpIDwgZGF0YS5sZW5ndGgpXG5cbiAgICBlbmMgPSB0bXBfYXJyLmpvaW4oJycpXG5cbiAgICBzd2l0Y2ggKGRhdGEubGVuZ3RoICUgMykge1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICBlbmMgPSBlbmMuc2xpY2UoMCwgLTIpICsgJz09J1xuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgZW5jID0gZW5jLnNsaWNlKDAsIC0xKSArICc9J1xuICAgICAgICAgICAgYnJlYWtcbiAgICB9XG5cbiAgICByZXR1cm4gZW5jXG59XG5cbmV4cG9ydCBjb25zdCBfdXRmOEVuY29kZSA9IGZ1bmN0aW9uIChzdHJpbmc6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgc3RyaW5nID0gKHN0cmluZyArICcnKS5yZXBsYWNlKC9cXHJcXG4vZywgJ1xcbicpLnJlcGxhY2UoL1xcci9nLCAnXFxuJylcblxuICAgIGxldCB1dGZ0ZXh0ID0gJycsXG4gICAgICAgIHN0YXJ0LFxuICAgICAgICBlbmRcbiAgICBsZXQgc3RyaW5nbCA9IDAsXG4gICAgICAgIG5cblxuICAgIHN0YXJ0ID0gZW5kID0gMFxuICAgIHN0cmluZ2wgPSBzdHJpbmcubGVuZ3RoXG5cbiAgICBmb3IgKG4gPSAwOyBuIDwgc3RyaW5nbDsgbisrKSB7XG4gICAgICAgIGNvbnN0IGMxID0gc3RyaW5nLmNoYXJDb2RlQXQobilcbiAgICAgICAgbGV0IGVuYyA9IG51bGxcblxuICAgICAgICBpZiAoYzEgPCAxMjgpIHtcbiAgICAgICAgICAgIGVuZCsrXG4gICAgICAgIH0gZWxzZSBpZiAoYzEgPiAxMjcgJiYgYzEgPCAyMDQ4KSB7XG4gICAgICAgICAgICBlbmMgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKChjMSA+PiA2KSB8IDE5MiwgKGMxICYgNjMpIHwgMTI4KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZW5jID0gU3RyaW5nLmZyb21DaGFyQ29kZSgoYzEgPj4gMTIpIHwgMjI0LCAoKGMxID4+IDYpICYgNjMpIHwgMTI4LCAoYzEgJiA2MykgfCAxMjgpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFfaXNOdWxsKGVuYykpIHtcbiAgICAgICAgICAgIGlmIChlbmQgPiBzdGFydCkge1xuICAgICAgICAgICAgICAgIHV0ZnRleHQgKz0gc3RyaW5nLnN1YnN0cmluZyhzdGFydCwgZW5kKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdXRmdGV4dCArPSBlbmNcbiAgICAgICAgICAgIHN0YXJ0ID0gZW5kID0gbiArIDFcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmIChlbmQgPiBzdGFydCkge1xuICAgICAgICB1dGZ0ZXh0ICs9IHN0cmluZy5zdWJzdHJpbmcoc3RhcnQsIHN0cmluZy5sZW5ndGgpXG4gICAgfVxuXG4gICAgcmV0dXJuIHV0ZnRleHRcbn1cblxuZXhwb3J0IGNvbnN0IF9yZWdpc3Rlcl9ldmVudCA9IChmdW5jdGlvbiAoKSB7XG4gICAgLy8gd3JpdHRlbiBieSBEZWFuIEVkd2FyZHMsIDIwMDVcbiAgICAvLyB3aXRoIGlucHV0IGZyb20gVGlubyBaaWpkZWwgLSBjcmlzcEB4czRhbGwubmxcbiAgICAvLyB3aXRoIGlucHV0IGZyb20gQ2FybCBTdmVycmUgLSBtYWlsQGNhcmxzdmVycmUuY29tXG4gICAgLy8gd2l0aCBpbnB1dCBmcm9tIFBvc3RIb2dcbiAgICAvLyBodHRwOi8vZGVhbi5lZHdhcmRzLm5hbWUvd2VibG9nLzIwMDUvMTAvYWRkLWV2ZW50L1xuICAgIC8vIGh0dHBzOi8vZ2lzdC5naXRodWIuY29tLzE5MzA0NDBcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBlbGVtZW50XG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGVcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKC4uLiopfSBoYW5kbGVyXG4gICAgICogQHBhcmFtIHtib29sZWFuPX0gb2xkU2Nob29sXG4gICAgICogQHBhcmFtIHtib29sZWFuPX0gdXNlQ2FwdHVyZVxuICAgICAqL1xuICAgIGNvbnN0IHJlZ2lzdGVyX2V2ZW50ID0gZnVuY3Rpb24gKFxuICAgICAgICBlbGVtZW50OiBFbGVtZW50IHwgV2luZG93IHwgRG9jdW1lbnQgfCBOb2RlLFxuICAgICAgICB0eXBlOiBzdHJpbmcsXG4gICAgICAgIGhhbmRsZXI6IEV2ZW50SGFuZGxlcixcbiAgICAgICAgb2xkU2Nob29sPzogYm9vbGVhbixcbiAgICAgICAgdXNlQ2FwdHVyZT86IGJvb2xlYW5cbiAgICApIHtcbiAgICAgICAgaWYgKCFlbGVtZW50KSB7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ05vIHZhbGlkIGVsZW1lbnQgcHJvdmlkZWQgdG8gcmVnaXN0ZXJfZXZlbnQnKVxuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZWxlbWVudC5hZGRFdmVudExpc3RlbmVyICYmICFvbGRTY2hvb2wpIHtcbiAgICAgICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBoYW5kbGVyLCAhIXVzZUNhcHR1cmUpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBvbnR5cGUgPSAnb24nICsgdHlwZVxuICAgICAgICAgICAgY29uc3Qgb2xkX2hhbmRsZXIgPSAoZWxlbWVudCBhcyBhbnkpW29udHlwZV0gLy8gY2FuIGJlIHVuZGVmaW5lZFxuICAgICAgICAgICAgOyhlbGVtZW50IGFzIGFueSlbb250eXBlXSA9IG1ha2VIYW5kbGVyKGVsZW1lbnQsIGhhbmRsZXIsIG9sZF9oYW5kbGVyKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbWFrZUhhbmRsZXIoXG4gICAgICAgIGVsZW1lbnQ6IEVsZW1lbnQgfCBXaW5kb3cgfCBEb2N1bWVudCB8IE5vZGUsXG4gICAgICAgIG5ld19oYW5kbGVyOiBFdmVudEhhbmRsZXIsXG4gICAgICAgIG9sZF9oYW5kbGVyczogRXZlbnRIYW5kbGVyXG4gICAgKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoZXZlbnQ6IEV2ZW50KTogYm9vbGVhbiB8IHZvaWQge1xuICAgICAgICAgICAgZXZlbnQgPSBldmVudCB8fCBmaXhFdmVudCh3aW5kb3c/LmV2ZW50KVxuXG4gICAgICAgICAgICAvLyB0aGlzIGJhc2ljYWxseSBoYXBwZW5zIGluIGZpcmVmb3ggd2hlbmV2ZXIgYW5vdGhlciBzY3JpcHRcbiAgICAgICAgICAgIC8vIG92ZXJ3cml0ZXMgdGhlIG9ubG9hZCBjYWxsYmFjayBhbmQgZG9lc24ndCBwYXNzIHRoZSBldmVudFxuICAgICAgICAgICAgLy8gb2JqZWN0IHRvIHByZXZpb3VzbHkgZGVmaW5lZCBjYWxsYmFja3MuICBBbGwgdGhlIGJyb3dzZXJzXG4gICAgICAgICAgICAvLyB0aGF0IGRvbid0IGRlZmluZSB3aW5kb3cuZXZlbnQgaW1wbGVtZW50IGFkZEV2ZW50TGlzdGVuZXJcbiAgICAgICAgICAgIC8vIHNvIHRoZSBkb21fbG9hZGVkIGhhbmRsZXIgd2lsbCBzdGlsbCBiZSBmaXJlZCBhcyB1c3VhbC5cbiAgICAgICAgICAgIGlmICghZXZlbnQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxldCByZXQgPSB0cnVlXG4gICAgICAgICAgICBsZXQgb2xkX3Jlc3VsdDogYW55XG5cbiAgICAgICAgICAgIGlmIChfaXNGdW5jdGlvbihvbGRfaGFuZGxlcnMpKSB7XG4gICAgICAgICAgICAgICAgb2xkX3Jlc3VsdCA9IG9sZF9oYW5kbGVycyhldmVudClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG5ld19yZXN1bHQgPSBuZXdfaGFuZGxlci5jYWxsKGVsZW1lbnQsIGV2ZW50KVxuXG4gICAgICAgICAgICBpZiAoZmFsc2UgPT09IG9sZF9yZXN1bHQgfHwgZmFsc2UgPT09IG5ld19yZXN1bHQpIHtcbiAgICAgICAgICAgICAgICByZXQgPSBmYWxzZVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gcmV0XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBmaXhFdmVudChldmVudDogRXZlbnQgfCB1bmRlZmluZWQpOiBFdmVudCB8IHVuZGVmaW5lZCB7XG4gICAgICAgIGlmIChldmVudCkge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQgPSBmaXhFdmVudC5wcmV2ZW50RGVmYXVsdFxuICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uID0gZml4RXZlbnQuc3RvcFByb3BhZ2F0aW9uXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGV2ZW50XG4gICAgfVxuICAgIGZpeEV2ZW50LnByZXZlbnREZWZhdWx0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICA7KHRoaXMgYXMgYW55IGFzIEV2ZW50KS5yZXR1cm5WYWx1ZSA9IGZhbHNlXG4gICAgfVxuICAgIGZpeEV2ZW50LnN0b3BQcm9wYWdhdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgOyh0aGlzIGFzIGFueSBhcyBFdmVudCkuY2FuY2VsQnViYmxlID0gdHJ1ZVxuICAgIH1cblxuICAgIHJldHVybiByZWdpc3Rlcl9ldmVudFxufSkoKVxuXG5leHBvcnQgZnVuY3Rpb24gbG9hZFNjcmlwdChzY3JpcHRVcmxUb0xvYWQ6IHN0cmluZywgY2FsbGJhY2s6IChlcnJvcj86IHN0cmluZyB8IEV2ZW50LCBldmVudD86IEV2ZW50KSA9PiB2b2lkKTogdm9pZCB7XG4gICAgY29uc3QgYWRkU2NyaXB0ID0gKCkgPT4ge1xuICAgICAgICBpZiAoIWRvY3VtZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soJ2RvY3VtZW50IG5vdCBmb3VuZCcpXG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc2NyaXB0VGFnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0JylcbiAgICAgICAgc2NyaXB0VGFnLnR5cGUgPSAndGV4dC9qYXZhc2NyaXB0J1xuICAgICAgICBzY3JpcHRUYWcuc3JjID0gc2NyaXB0VXJsVG9Mb2FkXG4gICAgICAgIHNjcmlwdFRhZy5vbmxvYWQgPSAoZXZlbnQpID0+IGNhbGxiYWNrKHVuZGVmaW5lZCwgZXZlbnQpXG4gICAgICAgIHNjcmlwdFRhZy5vbmVycm9yID0gKGVycm9yKSA9PiBjYWxsYmFjayhlcnJvcilcblxuICAgICAgICBjb25zdCBzY3JpcHRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnYm9keSA+IHNjcmlwdCcpXG4gICAgICAgIGlmIChzY3JpcHRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHNjcmlwdHNbMF0ucGFyZW50Tm9kZT8uaW5zZXJ0QmVmb3JlKHNjcmlwdFRhZywgc2NyaXB0c1swXSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIEluIGV4Y2VwdGlvbmFsIHNpdHVhdGlvbnMgdGhpcyBjYWxsIG1pZ2h0IGxvYWQgYmVmb3JlIHRoZSBET00gaXMgZnVsbHkgcmVhZHkuXG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHNjcmlwdFRhZylcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmIChkb2N1bWVudD8uYm9keSkge1xuICAgICAgICBhZGRTY3JpcHQoKVxuICAgIH0gZWxzZSB7XG4gICAgICAgIGRvY3VtZW50Py5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgYWRkU2NyaXB0KVxuICAgIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzQ3Jvc3NEb21haW5Db29raWUoZG9jdW1lbnRMb2NhdGlvbjogTG9jYXRpb24gfCB1bmRlZmluZWQpIHtcbiAgICBjb25zdCBob3N0bmFtZSA9IGRvY3VtZW50TG9jYXRpb24/Lmhvc3RuYW1lXG5cbiAgICBpZiAoIV9pc1N0cmluZyhob3N0bmFtZSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIC8vIHNwbGl0IGFuZCBzbGljZSBpc24ndCBhIGdyZWF0IHdheSB0byBtYXRjaCBhcmJpdHJhcnkgZG9tYWlucyxcbiAgICAvLyBidXQgaXQncyBnb29kIGVub3VnaCBmb3IgZW5zdXJpbmcgd2Ugb25seSBtYXRjaCBoZXJva3VhcHAuY29tIHdoZW4gaXQgaXMgdGhlIFRMRFxuICAgIC8vIGZvciB0aGUgaG9zdG5hbWVcbiAgICByZXR1cm4gaG9zdG5hbWUuc3BsaXQoJy4nKS5zbGljZSgtMikuam9pbignLicpICE9PSAnaGVyb2t1YXBwLmNvbSdcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzRGlzdGluY3RJZFN0cmluZ0xpa2UodmFsdWU6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBbJ2Rpc3RpbmN0X2lkJywgJ2Rpc3RpbmN0aWQnXS5pbmNsdWRlcyh2YWx1ZS50b0xvd2VyQ2FzZSgpKVxufVxuIiwgImltcG9ydCB7IEF1dG9jYXB0dXJlQ29uZmlnLCBQcm9wZXJ0aWVzIH0gZnJvbSAnLi90eXBlcydcbmltcG9ydCB7IF9lYWNoLCBfZW50cmllcywgX2luY2x1ZGVzLCBfdHJpbSB9IGZyb20gJy4vdXRpbHMnXG5cbmltcG9ydCB7IF9pc0FycmF5LCBfaXNOdWxsaXNoLCBfaXNTdHJpbmcsIF9pc1VuZGVmaW5lZCB9IGZyb20gJy4vdXRpbHMvdHlwZS11dGlscydcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJy4vdXRpbHMvbG9nZ2VyJ1xuaW1wb3J0IHsgd2luZG93IH0gZnJvbSAnLi91dGlscy9nbG9iYWxzJ1xuXG5leHBvcnQgZnVuY3Rpb24gc3BsaXRDbGFzc1N0cmluZyhzOiBzdHJpbmcpOiBzdHJpbmdbXSB7XG4gICAgcmV0dXJuIHMgPyBfdHJpbShzKS5zcGxpdCgvXFxzKy8pIDogW11cbn1cblxuLypcbiAqIEdldCB0aGUgY2xhc3NOYW1lIG9mIGFuIGVsZW1lbnQsIGFjY291bnRpbmcgZm9yIGVkZ2UgY2FzZXMgd2hlcmUgZWxlbWVudC5jbGFzc05hbWUgaXMgYW4gb2JqZWN0XG4gKlxuICogQmVjYXVzZSB0aGlzIGlzIGEgc3RyaW5nIGl0IGNhbiBjb250YWluIHVuZXhwZWN0ZWQgY2hhcmFjdGVyc1xuICogU28sIHRoaXMgbWV0aG9kIHNhZmVseSBzcGxpdHMgdGhlIGNsYXNzTmFtZSBhbmQgcmV0dXJucyB0aGF0IGFycmF5LlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q2xhc3NOYW1lcyhlbDogRWxlbWVudCk6IHN0cmluZ1tdIHtcbiAgICBsZXQgY2xhc3NOYW1lID0gJydcbiAgICBzd2l0Y2ggKHR5cGVvZiBlbC5jbGFzc05hbWUpIHtcbiAgICAgICAgY2FzZSAnc3RyaW5nJzpcbiAgICAgICAgICAgIGNsYXNzTmFtZSA9IGVsLmNsYXNzTmFtZVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgLy8gVE9ETzogd2hlbiBpcyB0aGlzIGV2ZXIgdXNlZD9cbiAgICAgICAgY2FzZSAnb2JqZWN0JzogLy8gaGFuZGxlIGNhc2VzIHdoZXJlIGNsYXNzTmFtZSBtaWdodCBiZSBTVkdBbmltYXRlZFN0cmluZyBvciBzb21lIG90aGVyIHR5cGVcbiAgICAgICAgICAgIGNsYXNzTmFtZSA9XG4gICAgICAgICAgICAgICAgKCdiYXNlVmFsJyBpbiBlbC5jbGFzc05hbWUgPyAoZWwuY2xhc3NOYW1lIGFzIGFueSkuYmFzZVZhbCA6IG51bGwpIHx8IGVsLmdldEF0dHJpYnV0ZSgnY2xhc3MnKSB8fCAnJ1xuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGNsYXNzTmFtZSA9ICcnXG4gICAgfVxuXG4gICAgcmV0dXJuIHNwbGl0Q2xhc3NTdHJpbmcoY2xhc3NOYW1lKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gbWFrZVNhZmVUZXh0KHM6IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQpOiBzdHJpbmcgfCBudWxsIHtcbiAgICBpZiAoX2lzTnVsbGlzaChzKSkge1xuICAgICAgICByZXR1cm4gbnVsbFxuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICAgIF90cmltKHMpXG4gICAgICAgICAgICAvLyBzY3J1YiBwb3RlbnRpYWxseSBzZW5zaXRpdmUgdmFsdWVzXG4gICAgICAgICAgICAuc3BsaXQoLyhcXHMrKS8pXG4gICAgICAgICAgICAuZmlsdGVyKHNob3VsZENhcHR1cmVWYWx1ZSlcbiAgICAgICAgICAgIC5qb2luKCcnKVxuICAgICAgICAgICAgLy8gbm9ybWFsaXplIHdoaXRlc3BhY2VcbiAgICAgICAgICAgIC5yZXBsYWNlKC9bXFxyXFxuXS9nLCAnICcpXG4gICAgICAgICAgICAucmVwbGFjZSgvWyBdKy9nLCAnICcpXG4gICAgICAgICAgICAvLyB0cnVuY2F0ZVxuICAgICAgICAgICAgLnN1YnN0cmluZygwLCAyNTUpXG4gICAgKVxufVxuXG4vKlxuICogR2V0IHRoZSBkaXJlY3QgdGV4dCBjb250ZW50IG9mIGFuIGVsZW1lbnQsIHByb3RlY3RpbmcgYWdhaW5zdCBzZW5zaXRpdmUgZGF0YSBjb2xsZWN0aW9uLlxuICogQ29uY2F0cyB0ZXh0Q29udGVudCBvZiBlYWNoIG9mIHRoZSBlbGVtZW50J3MgdGV4dCBub2RlIGNoaWxkcmVuOyB0aGlzIGF2b2lkcyBwb3RlbnRpYWxcbiAqIGNvbGxlY3Rpb24gb2Ygc2Vuc2l0aXZlIGRhdGEgdGhhdCBjb3VsZCBoYXBwZW4gaWYgd2UgdXNlZCBlbGVtZW50LnRleHRDb250ZW50IGFuZCB0aGVcbiAqIGVsZW1lbnQgaGFkIHNlbnNpdGl2ZSBjaGlsZCBlbGVtZW50cywgc2luY2UgZWxlbWVudC50ZXh0Q29udGVudCBpbmNsdWRlcyBjaGlsZCBjb250ZW50LlxuICogU2NydWJzIHZhbHVlcyB0aGF0IGxvb2sgbGlrZSB0aGV5IGNvdWxkIGJlIHNlbnNpdGl2ZSAoaS5lLiBjYyBvciBzc24gbnVtYmVyKS5cbiAqIEBwYXJhbSB7RWxlbWVudH0gZWwgLSBlbGVtZW50IHRvIGdldCB0aGUgdGV4dCBvZlxuICogQHJldHVybnMge3N0cmluZ30gdGhlIGVsZW1lbnQncyBkaXJlY3QgdGV4dCBjb250ZW50XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRTYWZlVGV4dChlbDogRWxlbWVudCk6IHN0cmluZyB7XG4gICAgbGV0IGVsVGV4dCA9ICcnXG5cbiAgICBpZiAoc2hvdWxkQ2FwdHVyZUVsZW1lbnQoZWwpICYmICFpc1NlbnNpdGl2ZUVsZW1lbnQoZWwpICYmIGVsLmNoaWxkTm9kZXMgJiYgZWwuY2hpbGROb2Rlcy5sZW5ndGgpIHtcbiAgICAgICAgX2VhY2goZWwuY2hpbGROb2RlcywgZnVuY3Rpb24gKGNoaWxkKSB7XG4gICAgICAgICAgICBpZiAoaXNUZXh0Tm9kZShjaGlsZCkgJiYgY2hpbGQudGV4dENvbnRlbnQpIHtcbiAgICAgICAgICAgICAgICBlbFRleHQgKz0gbWFrZVNhZmVUZXh0KGNoaWxkLnRleHRDb250ZW50KSA/PyAnJ1xuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIHJldHVybiBfdHJpbShlbFRleHQpXG59XG5cbi8qXG4gKiBDaGVjayB3aGV0aGVyIGFuIGVsZW1lbnQgaGFzIG5vZGVUeXBlIE5vZGUuRUxFTUVOVF9OT0RFXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsIC0gZWxlbWVudCB0byBjaGVja1xuICogQHJldHVybnMge2Jvb2xlYW59IHdoZXRoZXIgZWwgaXMgb2YgdGhlIGNvcnJlY3Qgbm9kZVR5cGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzRWxlbWVudE5vZGUoZWw6IE5vZGUgfCBFbGVtZW50IHwgdW5kZWZpbmVkIHwgbnVsbCk6IGVsIGlzIEVsZW1lbnQge1xuICAgIHJldHVybiAhIWVsICYmIGVsLm5vZGVUeXBlID09PSAxIC8vIE5vZGUuRUxFTUVOVF9OT0RFIC0gdXNlIGludGVnZXIgY29uc3RhbnQgZm9yIGJyb3dzZXIgcG9ydGFiaWxpdHlcbn1cblxuLypcbiAqIENoZWNrIHdoZXRoZXIgYW4gZWxlbWVudCBpcyBvZiBhIGdpdmVuIHRhZyB0eXBlLlxuICogRHVlIHRvIHBvdGVudGlhbCByZWZlcmVuY2UgZGlzY3JlcGFuY2llcyAoc3VjaCBhcyB0aGUgd2ViY29tcG9uZW50cy5qcyBwb2x5ZmlsbCksXG4gKiB3ZSB3YW50IHRvIG1hdGNoIHRhZ05hbWVzIGluc3RlYWQgb2Ygc3BlY2lmaWMgcmVmZXJlbmNlcyBiZWNhdXNlIHNvbWV0aGluZyBsaWtlXG4gKiBlbGVtZW50ID09PSBkb2N1bWVudC5ib2R5IHdvbid0IGFsd2F5cyB3b3JrIGJlY2F1c2UgZWxlbWVudCBtaWdodCBub3QgYmUgYSBuYXRpdmVcbiAqIGVsZW1lbnQuXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsIC0gZWxlbWVudCB0byBjaGVja1xuICogQHBhcmFtIHtzdHJpbmd9IHRhZyAtIHRhZyBuYW1lIChlLmcuLCBcImRpdlwiKVxuICogQHJldHVybnMge2Jvb2xlYW59IHdoZXRoZXIgZWwgaXMgb2YgdGhlIGdpdmVuIHRhZyB0eXBlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1RhZyhlbDogRWxlbWVudCB8IHVuZGVmaW5lZCB8IG51bGwsIHRhZzogc3RyaW5nKTogZWwgaXMgSFRNTEVsZW1lbnQge1xuICAgIHJldHVybiAhIWVsICYmICEhZWwudGFnTmFtZSAmJiBlbC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09IHRhZy50b0xvd2VyQ2FzZSgpXG59XG5cbi8qXG4gKiBDaGVjayB3aGV0aGVyIGFuIGVsZW1lbnQgaGFzIG5vZGVUeXBlIE5vZGUuVEVYVF9OT0RFXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsIC0gZWxlbWVudCB0byBjaGVja1xuICogQHJldHVybnMge2Jvb2xlYW59IHdoZXRoZXIgZWwgaXMgb2YgdGhlIGNvcnJlY3Qgbm9kZVR5cGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzVGV4dE5vZGUoZWw6IEVsZW1lbnQgfCB1bmRlZmluZWQgfCBudWxsKTogZWwgaXMgSFRNTEVsZW1lbnQge1xuICAgIHJldHVybiAhIWVsICYmIGVsLm5vZGVUeXBlID09PSAzIC8vIE5vZGUuVEVYVF9OT0RFIC0gdXNlIGludGVnZXIgY29uc3RhbnQgZm9yIGJyb3dzZXIgcG9ydGFiaWxpdHlcbn1cblxuLypcbiAqIENoZWNrIHdoZXRoZXIgYW4gZWxlbWVudCBoYXMgbm9kZVR5cGUgTm9kZS5ET0NVTUVOVF9GUkFHTUVOVF9OT0RFXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsIC0gZWxlbWVudCB0byBjaGVja1xuICogQHJldHVybnMge2Jvb2xlYW59IHdoZXRoZXIgZWwgaXMgb2YgdGhlIGNvcnJlY3Qgbm9kZVR5cGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzRG9jdW1lbnRGcmFnbWVudChlbDogRWxlbWVudCB8IFBhcmVudE5vZGUgfCB1bmRlZmluZWQgfCBudWxsKTogZWwgaXMgRG9jdW1lbnRGcmFnbWVudCB7XG4gICAgcmV0dXJuICEhZWwgJiYgZWwubm9kZVR5cGUgPT09IDExIC8vIE5vZGUuRE9DVU1FTlRfRlJBR01FTlRfTk9ERSAtIHVzZSBpbnRlZ2VyIGNvbnN0YW50IGZvciBicm93c2VyIHBvcnRhYmlsaXR5XG59XG5cbmV4cG9ydCBjb25zdCBhdXRvY2FwdHVyZUNvbXBhdGlibGVFbGVtZW50cyA9IFsnYScsICdidXR0b24nLCAnZm9ybScsICdpbnB1dCcsICdzZWxlY3QnLCAndGV4dGFyZWEnLCAnbGFiZWwnXVxuXG4vKlxuIGlmIHRoZXJlIGlzIG5vIGNvbmZpZywgdGhlbiBhbGwgZWxlbWVudHMgYXJlIGFsbG93ZWRcbiBpZiB0aGVyZSBpcyBhIGNvbmZpZywgYW5kIHRoZXJlIGlzIGFuIGFsbG93IGxpc3QsIHRoZW4gb25seSBlbGVtZW50cyBpbiB0aGUgYWxsb3cgbGlzdCBhcmUgYWxsb3dlZFxuIGFzc3VtZXMgdGhhdCBzb21lIG90aGVyIGNvZGUgaXMgY2hlY2tpbmcgdGhpcyBlbGVtZW50J3MgcGFyZW50c1xuICovXG5mdW5jdGlvbiBjaGVja0lmRWxlbWVudFRyZWVQYXNzZXNFbGVtZW50QWxsb3dMaXN0KFxuICAgIGVsZW1lbnRzOiBFbGVtZW50W10sXG4gICAgYXV0b2NhcHR1cmVDb25maWc6IEF1dG9jYXB0dXJlQ29uZmlnIHwgdW5kZWZpbmVkXG4pOiBib29sZWFuIHtcbiAgICBjb25zdCBhbGxvd2xpc3QgPSBhdXRvY2FwdHVyZUNvbmZpZz8uZWxlbWVudF9hbGxvd2xpc3RcbiAgICBpZiAoX2lzVW5kZWZpbmVkKGFsbG93bGlzdCkpIHtcbiAgICAgICAgLy8gZXZlcnl0aGluZyBpcyBhbGxvd2VkLCB3aGVuIHRoZXJlIGlzIG5vIGFsbG93IGxpc3RcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG5cbiAgICAvLyBjaGVjayBlYWNoIGVsZW1lbnQgaW4gdGhlIHRyZWVcbiAgICAvLyBpZiBhbnkgb2YgdGhlIGVsZW1lbnRzIGFyZSBpbiB0aGUgYWxsb3cgbGlzdCwgdGhlbiB0aGUgdHJlZSBpcyBhbGxvd2VkXG4gICAgZm9yIChjb25zdCBlbCBvZiBlbGVtZW50cykge1xuICAgICAgICBpZiAoYWxsb3dsaXN0LnNvbWUoKGVsZW1lbnRUeXBlKSA9PiBlbC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09IGVsZW1lbnRUeXBlKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIG90aGVyd2lzZSB0aGVyZSBpcyBhbiBhbGxvdyBsaXN0IGFuZCB0aGlzIGVsZW1lbnQgdHJlZSBkaWRuJ3QgbWF0Y2ggaXRcbiAgICByZXR1cm4gZmFsc2Vcbn1cblxuLypcbiBpZiB0aGVyZSBpcyBubyBjb25maWcsIHRoZW4gYWxsIGVsZW1lbnRzIGFyZSBhbGxvd2VkXG4gaWYgdGhlcmUgaXMgYSBjb25maWcsIGFuZCB0aGVyZSBpcyBhbiBhbGxvdyBsaXN0LCB0aGVuXG4gb25seSBlbGVtZW50cyB0aGF0IG1hdGNoIHRoZSBjc3Mgc2VsZWN0b3IgaW4gdGhlIGFsbG93IGxpc3QgYXJlIGFsbG93ZWRcbiBhc3N1bWVzIHRoYXQgc29tZSBvdGhlciBjb2RlIGlzIGNoZWNraW5nIHRoaXMgZWxlbWVudCdzIHBhcmVudHNcbiAqL1xuZnVuY3Rpb24gY2hlY2tJZkVsZW1lbnRUcmVlUGFzc2VzQ1NTU2VsZWN0b3JBbGxvd0xpc3QoXG4gICAgZWxlbWVudHM6IEVsZW1lbnRbXSxcbiAgICBhdXRvY2FwdHVyZUNvbmZpZzogQXV0b2NhcHR1cmVDb25maWcgfCB1bmRlZmluZWRcbik6IGJvb2xlYW4ge1xuICAgIGNvbnN0IGFsbG93bGlzdCA9IGF1dG9jYXB0dXJlQ29uZmlnPy5jc3Nfc2VsZWN0b3JfYWxsb3dsaXN0XG4gICAgaWYgKF9pc1VuZGVmaW5lZChhbGxvd2xpc3QpKSB7XG4gICAgICAgIC8vIGV2ZXJ5dGhpbmcgaXMgYWxsb3dlZCwgd2hlbiB0aGVyZSBpcyBubyBhbGxvdyBsaXN0XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuXG4gICAgLy8gY2hlY2sgZWFjaCBlbGVtZW50IGluIHRoZSB0cmVlXG4gICAgLy8gaWYgYW55IG9mIHRoZSBlbGVtZW50cyBhcmUgaW4gdGhlIGFsbG93IGxpc3QsIHRoZW4gdGhlIHRyZWUgaXMgYWxsb3dlZFxuICAgIGZvciAoY29uc3QgZWwgb2YgZWxlbWVudHMpIHtcbiAgICAgICAgaWYgKGFsbG93bGlzdC5zb21lKChzZWxlY3RvcikgPT4gZWwubWF0Y2hlcyhzZWxlY3RvcikpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gb3RoZXJ3aXNlIHRoZXJlIGlzIGFuIGFsbG93IGxpc3QgYW5kIHRoaXMgZWxlbWVudCB0cmVlIGRpZG4ndCBtYXRjaCBpdFxuICAgIHJldHVybiBmYWxzZVxufVxuXG5mdW5jdGlvbiBnZXRQYXJlbnRFbGVtZW50KGN1ckVsOiBFbGVtZW50KTogRWxlbWVudCB8IGZhbHNlIHtcbiAgICBjb25zdCBwYXJlbnROb2RlID0gY3VyRWwucGFyZW50Tm9kZVxuICAgIGlmICghcGFyZW50Tm9kZSB8fCAhaXNFbGVtZW50Tm9kZShwYXJlbnROb2RlKSkgcmV0dXJuIGZhbHNlXG4gICAgcmV0dXJuIHBhcmVudE5vZGVcbn1cblxuLypcbiAqIENoZWNrIHdoZXRoZXIgYSBET00gZXZlbnQgc2hvdWxkIGJlIFwiY2FwdHVyZWRcIiBvciBpZiBpdCBtYXkgY29udGFpbiBzZW50aXRpdmUgZGF0YVxuICogdXNpbmcgYSB2YXJpZXR5IG9mIGhldXJpc3RpY3MuXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsIC0gZWxlbWVudCB0byBjaGVja1xuICogQHBhcmFtIHtFdmVudH0gZXZlbnQgLSBldmVudCB0byBjaGVja1xuICogQHBhcmFtIHtPYmplY3R9IGF1dG9jYXB0dXJlQ29uZmlnIC0gYXV0b2NhcHR1cmUgY29uZmlnXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGNhcHR1cmVPbkFueUVsZW1lbnQgLSB3aGV0aGVyIHRvIGNhcHR1cmUgb24gYW55IGVsZW1lbnQsIGNsaXBib2FyZCBhdXRvY2FwdHVyZSBkb2Vzbid0IHJlc3RyaWN0IHRvIFwiY2xpY2thYmxlXCIgZWxlbWVudHNcbiAqIEBwYXJhbSB7c3RyaW5nW119IGFsbG93ZWRFdmVudFR5cGVzIC0gZXZlbnQgdHlwZXMgdG8gY2FwdHVyZSwgbm9ybWFsbHkganVzdCAnY2xpY2snLCBidXQgc29tZSBhdXRvY2FwdHVyZSB0eXBlcyByZWFjdCB0byBkaWZmZXJlbnQgZXZlbnRzLCBzb21lIGVsZW1lbnRzIGhhdmUgZml4ZWQgZXZlbnRzIChlLmcuLCBmb3JtIGhhcyBcInN1Ym1pdFwiKVxuICogQHJldHVybnMge2Jvb2xlYW59IHdoZXRoZXIgdGhlIGV2ZW50IHNob3VsZCBiZSBjYXB0dXJlZFxuICovXG5leHBvcnQgZnVuY3Rpb24gc2hvdWxkQ2FwdHVyZURvbUV2ZW50KFxuICAgIGVsOiBFbGVtZW50LFxuICAgIGV2ZW50OiBFdmVudCxcbiAgICBhdXRvY2FwdHVyZUNvbmZpZzogQXV0b2NhcHR1cmVDb25maWcgfCB1bmRlZmluZWQgPSB1bmRlZmluZWQsXG4gICAgY2FwdHVyZU9uQW55RWxlbWVudD86IGJvb2xlYW4sXG4gICAgYWxsb3dlZEV2ZW50VHlwZXM/OiBzdHJpbmdbXVxuKTogYm9vbGVhbiB7XG4gICAgaWYgKCF3aW5kb3cgfHwgIWVsIHx8IGlzVGFnKGVsLCAnaHRtbCcpIHx8ICFpc0VsZW1lbnROb2RlKGVsKSkge1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG5cbiAgICBpZiAoYXV0b2NhcHR1cmVDb25maWc/LnVybF9hbGxvd2xpc3QpIHtcbiAgICAgICAgY29uc3QgdXJsID0gd2luZG93LmxvY2F0aW9uLmhyZWZcbiAgICAgICAgY29uc3QgYWxsb3dsaXN0ID0gYXV0b2NhcHR1cmVDb25maWcudXJsX2FsbG93bGlzdFxuICAgICAgICBpZiAoYWxsb3dsaXN0ICYmICFhbGxvd2xpc3Quc29tZSgocmVnZXgpID0+IHVybC5tYXRjaChyZWdleCkpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmIChhdXRvY2FwdHVyZUNvbmZpZz8uZG9tX2V2ZW50X2FsbG93bGlzdCkge1xuICAgICAgICBjb25zdCBhbGxvd2xpc3QgPSBhdXRvY2FwdHVyZUNvbmZpZy5kb21fZXZlbnRfYWxsb3dsaXN0XG4gICAgICAgIGlmIChhbGxvd2xpc3QgJiYgIWFsbG93bGlzdC5zb21lKChldmVudFR5cGUpID0+IGV2ZW50LnR5cGUgPT09IGV2ZW50VHlwZSkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgbGV0IHBhcmVudElzVXNlZnVsRWxlbWVudCA9IGZhbHNlXG4gICAgY29uc3QgdGFyZ2V0RWxlbWVudExpc3Q6IEVsZW1lbnRbXSA9IFtlbF1cbiAgICBsZXQgcGFyZW50Tm9kZTogRWxlbWVudCB8IGJvb2xlYW4gPSB0cnVlXG4gICAgbGV0IGN1ckVsOiBFbGVtZW50ID0gZWxcbiAgICB3aGlsZSAoY3VyRWwucGFyZW50Tm9kZSAmJiAhaXNUYWcoY3VyRWwsICdib2R5JykpIHtcbiAgICAgICAgLy8gSWYgZWxlbWVudCBpcyBhIHNoYWRvdyByb290LCB3ZSBza2lwIGl0XG4gICAgICAgIGlmIChpc0RvY3VtZW50RnJhZ21lbnQoY3VyRWwucGFyZW50Tm9kZSkpIHtcbiAgICAgICAgICAgIHRhcmdldEVsZW1lbnRMaXN0LnB1c2goKGN1ckVsLnBhcmVudE5vZGUgYXMgYW55KS5ob3N0KVxuICAgICAgICAgICAgY3VyRWwgPSAoY3VyRWwucGFyZW50Tm9kZSBhcyBhbnkpLmhvc3RcbiAgICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgIH1cbiAgICAgICAgcGFyZW50Tm9kZSA9IGdldFBhcmVudEVsZW1lbnQoY3VyRWwpXG4gICAgICAgIGlmICghcGFyZW50Tm9kZSkgYnJlYWtcbiAgICAgICAgaWYgKGNhcHR1cmVPbkFueUVsZW1lbnQgfHwgYXV0b2NhcHR1cmVDb21wYXRpYmxlRWxlbWVudHMuaW5kZXhPZihwYXJlbnROb2RlLnRhZ05hbWUudG9Mb3dlckNhc2UoKSkgPiAtMSkge1xuICAgICAgICAgICAgcGFyZW50SXNVc2VmdWxFbGVtZW50ID0gdHJ1ZVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgY29tcFN0eWxlcyA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHBhcmVudE5vZGUpXG4gICAgICAgICAgICBpZiAoY29tcFN0eWxlcyAmJiBjb21wU3R5bGVzLmdldFByb3BlcnR5VmFsdWUoJ2N1cnNvcicpID09PSAncG9pbnRlcicpIHtcbiAgICAgICAgICAgICAgICBwYXJlbnRJc1VzZWZ1bEVsZW1lbnQgPSB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0YXJnZXRFbGVtZW50TGlzdC5wdXNoKHBhcmVudE5vZGUpXG4gICAgICAgIGN1ckVsID0gcGFyZW50Tm9kZVxuICAgIH1cblxuICAgIGlmICghY2hlY2tJZkVsZW1lbnRUcmVlUGFzc2VzRWxlbWVudEFsbG93TGlzdCh0YXJnZXRFbGVtZW50TGlzdCwgYXV0b2NhcHR1cmVDb25maWcpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cblxuICAgIGlmICghY2hlY2tJZkVsZW1lbnRUcmVlUGFzc2VzQ1NTU2VsZWN0b3JBbGxvd0xpc3QodGFyZ2V0RWxlbWVudExpc3QsIGF1dG9jYXB0dXJlQ29uZmlnKSkge1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG5cbiAgICBjb25zdCBjb21wU3R5bGVzID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZWwpXG4gICAgaWYgKGNvbXBTdHlsZXMgJiYgY29tcFN0eWxlcy5nZXRQcm9wZXJ0eVZhbHVlKCdjdXJzb3InKSA9PT0gJ3BvaW50ZXInICYmIGV2ZW50LnR5cGUgPT09ICdjbGljaycpIHtcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG5cbiAgICBjb25zdCB0YWcgPSBlbC50YWdOYW1lLnRvTG93ZXJDYXNlKClcbiAgICBzd2l0Y2ggKHRhZykge1xuICAgICAgICBjYXNlICdodG1sJzpcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICBjYXNlICdmb3JtJzpcbiAgICAgICAgICAgIHJldHVybiAoYWxsb3dlZEV2ZW50VHlwZXMgfHwgWydzdWJtaXQnXSkuaW5kZXhPZihldmVudC50eXBlKSA+PSAwXG4gICAgICAgIGNhc2UgJ2lucHV0JzpcbiAgICAgICAgY2FzZSAnc2VsZWN0JzpcbiAgICAgICAgY2FzZSAndGV4dGFyZWEnOlxuICAgICAgICAgICAgcmV0dXJuIChhbGxvd2VkRXZlbnRUeXBlcyB8fCBbJ2NoYW5nZScsICdjbGljayddKS5pbmRleE9mKGV2ZW50LnR5cGUpID49IDBcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGlmIChwYXJlbnRJc1VzZWZ1bEVsZW1lbnQpIHJldHVybiAoYWxsb3dlZEV2ZW50VHlwZXMgfHwgWydjbGljayddKS5pbmRleE9mKGV2ZW50LnR5cGUpID49IDBcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgKGFsbG93ZWRFdmVudFR5cGVzIHx8IFsnY2xpY2snXSkuaW5kZXhPZihldmVudC50eXBlKSA+PSAwICYmXG4gICAgICAgICAgICAgICAgKGF1dG9jYXB0dXJlQ29tcGF0aWJsZUVsZW1lbnRzLmluZGV4T2YodGFnKSA+IC0xIHx8IGVsLmdldEF0dHJpYnV0ZSgnY29udGVudGVkaXRhYmxlJykgPT09ICd0cnVlJylcbiAgICAgICAgICAgIClcbiAgICB9XG59XG5cbi8qXG4gKiBDaGVjayB3aGV0aGVyIGEgRE9NIGVsZW1lbnQgc2hvdWxkIGJlIFwiY2FwdHVyZWRcIiBvciBpZiBpdCBtYXkgY29udGFpbiBzZW50aXRpdmUgZGF0YVxuICogdXNpbmcgYSB2YXJpZXR5IG9mIGhldXJpc3RpY3MuXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsIC0gZWxlbWVudCB0byBjaGVja1xuICogQHJldHVybnMge2Jvb2xlYW59IHdoZXRoZXIgdGhlIGVsZW1lbnQgc2hvdWxkIGJlIGNhcHR1cmVkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzaG91bGRDYXB0dXJlRWxlbWVudChlbDogRWxlbWVudCk6IGJvb2xlYW4ge1xuICAgIGZvciAobGV0IGN1ckVsID0gZWw7IGN1ckVsLnBhcmVudE5vZGUgJiYgIWlzVGFnKGN1ckVsLCAnYm9keScpOyBjdXJFbCA9IGN1ckVsLnBhcmVudE5vZGUgYXMgRWxlbWVudCkge1xuICAgICAgICBjb25zdCBjbGFzc2VzID0gZ2V0Q2xhc3NOYW1lcyhjdXJFbClcbiAgICAgICAgaWYgKF9pbmNsdWRlcyhjbGFzc2VzLCAncGgtc2Vuc2l0aXZlJykgfHwgX2luY2x1ZGVzKGNsYXNzZXMsICdwaC1uby1jYXB0dXJlJykpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgaWYgKF9pbmNsdWRlcyhnZXRDbGFzc05hbWVzKGVsKSwgJ3BoLWluY2x1ZGUnKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cblxuICAgIC8vIGRvbid0IGluY2x1ZGUgaGlkZGVuIG9yIHBhc3N3b3JkIGZpZWxkc1xuICAgIGNvbnN0IHR5cGUgPSAoZWwgYXMgSFRNTElucHV0RWxlbWVudCkudHlwZSB8fCAnJ1xuICAgIGlmIChfaXNTdHJpbmcodHlwZSkpIHtcbiAgICAgICAgLy8gaXQncyBwb3NzaWJsZSBmb3IgZWwudHlwZSB0byBiZSBhIERPTSBlbGVtZW50IGlmIGVsIGlzIGEgZm9ybSB3aXRoIGEgY2hpbGQgaW5wdXRbbmFtZT1cInR5cGVcIl1cbiAgICAgICAgc3dpdGNoICh0eXBlLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICAgIGNhc2UgJ2hpZGRlbic6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgICBjYXNlICdwYXNzd29yZCc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBmaWx0ZXIgb3V0IGRhdGEgZnJvbSBmaWVsZHMgdGhhdCBsb29rIGxpa2Ugc2Vuc2l0aXZlIGZpZWxkc1xuICAgIGNvbnN0IG5hbWUgPSAoZWwgYXMgSFRNTElucHV0RWxlbWVudCkubmFtZSB8fCBlbC5pZCB8fCAnJ1xuICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vcG9zdGhvZy9wb3N0aG9nLWpzL2lzc3Vlcy8xNjVcbiAgICAvLyBVbmRlciBzcGVjaWZpYyBjaXJjdW1zdGFuY2VzIGEgYnVnIGNhdXNlZCAucmVwbGFjZSB0byBiZSBjYWxsZWQgb24gYSBET00gZWxlbWVudFxuICAgIC8vIGluc3RlYWQgb2YgYSBzdHJpbmcsIHJlbW92aW5nIHRoZSBlbGVtZW50IGZyb20gdGhlIHBhZ2UuIEVuc3VyZSB0aGlzIGlzc3VlIGlzIG1pdGlnYXRlZC5cbiAgICBpZiAoX2lzU3RyaW5nKG5hbWUpKSB7XG4gICAgICAgIC8vIGl0J3MgcG9zc2libGUgZm9yIGVsLm5hbWUgb3IgZWwuaWQgdG8gYmUgYSBET00gZWxlbWVudCBpZiBlbCBpcyBhIGZvcm0gd2l0aCBhIGNoaWxkIGlucHV0W25hbWU9XCJuYW1lXCJdXG4gICAgICAgIGNvbnN0IHNlbnNpdGl2ZU5hbWVSZWdleCA9XG4gICAgICAgICAgICAvXmNjfGNhcmRudW18Y2NudW18Y3JlZGl0Y2FyZHxjc2N8Y3ZjfGN2dnxleHB8cGFzc3xwd2R8cm91dGluZ3xzZWNjb2RlfHNlY3VyaXR5Y29kZXxzZWN1cml0eW51bXxzb2NpYWxzZWN8c29jc2VjfHNzbi9pXG4gICAgICAgIGlmIChzZW5zaXRpdmVOYW1lUmVnZXgudGVzdChuYW1lLnJlcGxhY2UoL1teYS16QS1aMC05XS9nLCAnJykpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0cnVlXG59XG5cbi8qXG4gKiBDaGVjayB3aGV0aGVyIGEgRE9NIGVsZW1lbnQgaXMgJ3NlbnNpdGl2ZScgYW5kIHdlIHNob3VsZCBvbmx5IGNhcHR1cmUgbGltaXRlZCBkYXRhXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsIC0gZWxlbWVudCB0byBjaGVja1xuICogQHJldHVybnMge2Jvb2xlYW59IHdoZXRoZXIgdGhlIGVsZW1lbnQgc2hvdWxkIGJlIGNhcHR1cmVkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1NlbnNpdGl2ZUVsZW1lbnQoZWw6IEVsZW1lbnQpOiBib29sZWFuIHtcbiAgICAvLyBkb24ndCBzZW5kIGRhdGEgZnJvbSBpbnB1dHMgb3Igc2ltaWxhciBlbGVtZW50cyBzaW5jZSB0aGVyZSB3aWxsIGFsd2F5cyBiZVxuICAgIC8vIGEgcmlzayBvZiBjbGllbnRzaWRlIGphdmFzY3JpcHQgcGxhY2luZyBzZW5zaXRpdmUgZGF0YSBpbiBhdHRyaWJ1dGVzXG4gICAgY29uc3QgYWxsb3dlZElucHV0VHlwZXMgPSBbJ2J1dHRvbicsICdjaGVja2JveCcsICdzdWJtaXQnLCAncmVzZXQnXVxuICAgIGlmIChcbiAgICAgICAgKGlzVGFnKGVsLCAnaW5wdXQnKSAmJiAhYWxsb3dlZElucHV0VHlwZXMuaW5jbHVkZXMoKGVsIGFzIEhUTUxJbnB1dEVsZW1lbnQpLnR5cGUpKSB8fFxuICAgICAgICBpc1RhZyhlbCwgJ3NlbGVjdCcpIHx8XG4gICAgICAgIGlzVGFnKGVsLCAndGV4dGFyZWEnKSB8fFxuICAgICAgICBlbC5nZXRBdHRyaWJ1dGUoJ2NvbnRlbnRlZGl0YWJsZScpID09PSAndHJ1ZSdcbiAgICApIHtcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlXG59XG5cbi8qXG4gKiBDaGVjayB3aGV0aGVyIGEgc3RyaW5nIHZhbHVlIHNob3VsZCBiZSBcImNhcHR1cmVkXCIgb3IgaWYgaXQgbWF5IGNvbnRhaW4gc2VudGl0aXZlIGRhdGFcbiAqIHVzaW5nIGEgdmFyaWV0eSBvZiBoZXVyaXN0aWNzLlxuICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlIC0gc3RyaW5nIHZhbHVlIHRvIGNoZWNrXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gd2hldGhlciB0aGUgZWxlbWVudCBzaG91bGQgYmUgY2FwdHVyZWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNob3VsZENhcHR1cmVWYWx1ZSh2YWx1ZTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgaWYgKF9pc051bGxpc2godmFsdWUpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cblxuICAgIGlmIChfaXNTdHJpbmcodmFsdWUpKSB7XG4gICAgICAgIHZhbHVlID0gX3RyaW0odmFsdWUpXG5cbiAgICAgICAgLy8gY2hlY2sgdG8gc2VlIGlmIGlucHV0IHZhbHVlIGxvb2tzIGxpa2UgYSBjcmVkaXQgY2FyZCBudW1iZXJcbiAgICAgICAgLy8gc2VlOiBodHRwczovL3d3dy5zYWZhcmlib29rc29ubGluZS5jb20vbGlicmFyeS92aWV3L3JlZ3VsYXItZXhwcmVzc2lvbnMtY29va2Jvb2svOTc4MTQ0OTMyNzQ1My9jaDA0czIwLmh0bWxcbiAgICAgICAgY29uc3QgY2NSZWdleCA9XG4gICAgICAgICAgICAvXig/Oig0WzAtOV17MTJ9KD86WzAtOV17M30pPyl8KDVbMS01XVswLTldezE0fSl8KDYoPzowMTF8NVswLTldezJ9KVswLTldezEyfSl8KDNbNDddWzAtOV17MTN9KXwoMyg/OjBbMC01XXxbNjhdWzAtOV0pWzAtOV17MTF9KXwoKD86MjEzMXwxODAwfDM1WzAtOV17M30pWzAtOV17MTF9KSkkL1xuICAgICAgICBpZiAoY2NSZWdleC50ZXN0KCh2YWx1ZSB8fCAnJykucmVwbGFjZSgvWy0gXS9nLCAnJykpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGNoZWNrIHRvIHNlZSBpZiBpbnB1dCB2YWx1ZSBsb29rcyBsaWtlIGEgc29jaWFsIHNlY3VyaXR5IG51bWJlclxuICAgICAgICBjb25zdCBzc25SZWdleCA9IC8oXlxcZHszfS0/XFxkezJ9LT9cXGR7NH0kKS9cbiAgICAgICAgaWYgKHNzblJlZ2V4LnRlc3QodmFsdWUpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0cnVlXG59XG5cbi8qXG4gKiBDaGVjayB3aGV0aGVyIGFuIGF0dHJpYnV0ZSBuYW1lIGlzIGFuIEFuZ3VsYXIgc3R5bGUgYXR0ciAoZWl0aGVyIF9uZ2NvbnRlbnQgb3IgX25naG9zdClcbiAqIFRoZXNlIHVwZGF0ZSBvbiBlYWNoIGJ1aWxkIGFuZCBsZWFkIHRvIG5vaXNlIGluIHRoZSBlbGVtZW50IGNoYWluXG4gKiBNb3JlIGRldGFpbHMgb24gdGhlIGF0dHJpYnV0ZXMgaGVyZTogaHR0cHM6Ly9hbmd1bGFyLmlvL2d1aWRlL3ZpZXctZW5jYXBzdWxhdGlvblxuICogQHBhcmFtIHtzdHJpbmd9IGF0dHJpYnV0ZU5hbWUgLSBzdHJpbmcgdmFsdWUgdG8gY2hlY2tcbiAqIEByZXR1cm5zIHtib29sZWFufSB3aGV0aGVyIHRoZSBlbGVtZW50IGlzIGFuIGFuZ3VsYXIgdGFnXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0FuZ3VsYXJTdHlsZUF0dHIoYXR0cmlidXRlTmFtZTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgaWYgKF9pc1N0cmluZyhhdHRyaWJ1dGVOYW1lKSkge1xuICAgICAgICByZXR1cm4gYXR0cmlidXRlTmFtZS5zdWJzdHJpbmcoMCwgMTApID09PSAnX25nY29udGVudCcgfHwgYXR0cmlidXRlTmFtZS5zdWJzdHJpbmcoMCwgNykgPT09ICdfbmdob3N0J1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2Vcbn1cblxuLypcbiAqIEl0ZXJhdGUgdGhyb3VnaCBjaGlsZHJlbiBvZiBhIHRhcmdldCBlbGVtZW50IGxvb2tpbmcgZm9yIHNwYW4gdGFnc1xuICogYW5kIHJldHVybiB0aGUgdGV4dCBjb250ZW50IG9mIHRoZSBzcGFuIHRhZ3MsIHNlcGFyYXRlZCBieSBzcGFjZXMsXG4gKiBhbG9uZyB3aXRoIHRoZSBkaXJlY3QgdGV4dCBjb250ZW50IG9mIHRoZSB0YXJnZXQgZWxlbWVudFxuICogQHBhcmFtIHtFbGVtZW50fSB0YXJnZXQgLSBlbGVtZW50IHRvIGNoZWNrXG4gKiBAcmV0dXJucyB7c3RyaW5nfSB0ZXh0IGNvbnRlbnQgb2YgdGhlIHRhcmdldCBlbGVtZW50IGFuZCBpdHMgY2hpbGQgc3BhbiB0YWdzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXREaXJlY3RBbmROZXN0ZWRTcGFuVGV4dCh0YXJnZXQ6IEVsZW1lbnQpOiBzdHJpbmcge1xuICAgIGxldCB0ZXh0ID0gZ2V0U2FmZVRleHQodGFyZ2V0KVxuICAgIHRleHQgPSBgJHt0ZXh0fSAke2dldE5lc3RlZFNwYW5UZXh0KHRhcmdldCl9YC50cmltKClcbiAgICByZXR1cm4gc2hvdWxkQ2FwdHVyZVZhbHVlKHRleHQpID8gdGV4dCA6ICcnXG59XG5cbi8qXG4gKiBJdGVyYXRlIHRocm91Z2ggY2hpbGRyZW4gb2YgYSB0YXJnZXQgZWxlbWVudCBsb29raW5nIGZvciBzcGFuIHRhZ3NcbiAqIGFuZCByZXR1cm4gdGhlIHRleHQgY29udGVudCBvZiB0aGUgc3BhbiB0YWdzLCBzZXBhcmF0ZWQgYnkgc3BhY2VzXG4gKiBAcGFyYW0ge0VsZW1lbnR9IHRhcmdldCAtIGVsZW1lbnQgdG8gY2hlY2tcbiAqIEByZXR1cm5zIHtzdHJpbmd9IHRleHQgY29udGVudCBvZiBzcGFuIHRhZ3NcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldE5lc3RlZFNwYW5UZXh0KHRhcmdldDogRWxlbWVudCk6IHN0cmluZyB7XG4gICAgbGV0IHRleHQgPSAnJ1xuICAgIGlmICh0YXJnZXQgJiYgdGFyZ2V0LmNoaWxkTm9kZXMgJiYgdGFyZ2V0LmNoaWxkTm9kZXMubGVuZ3RoKSB7XG4gICAgICAgIF9lYWNoKHRhcmdldC5jaGlsZE5vZGVzLCBmdW5jdGlvbiAoY2hpbGQpIHtcbiAgICAgICAgICAgIGlmIChjaGlsZCAmJiBjaGlsZC50YWdOYW1lPy50b0xvd2VyQ2FzZSgpID09PSAnc3BhbicpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzcGFuVGV4dCA9IGdldFNhZmVUZXh0KGNoaWxkKVxuICAgICAgICAgICAgICAgICAgICB0ZXh0ID0gYCR7dGV4dH0gJHtzcGFuVGV4dH1gLnRyaW0oKVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGlsZC5jaGlsZE5vZGVzICYmIGNoaWxkLmNoaWxkTm9kZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0ID0gYCR7dGV4dH0gJHtnZXROZXN0ZWRTcGFuVGV4dChjaGlsZCl9YC50cmltKClcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKGUpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH1cbiAgICByZXR1cm4gdGV4dFxufVxuXG4vKlxuQmFjayBpbiB0aGUgZGF5IHN0b3JpbmcgZXZlbnRzIGluIFBvc3RncmVzIHdlIHVzZSBFbGVtZW50cyBmb3IgYXV0b2NhcHR1cmUgZXZlbnRzLlxuTm93IHdlJ3JlIHVzaW5nIGVsZW1lbnRzX2NoYWluLiBXZSB1c2VkIHRvIGRvIHRoaXMgcGFyc2luZy9wcm9jZXNzaW5nIGR1cmluZyBpbmdlc3Rpb24uXG5UaGlzIGNvZGUgaXMganVzdCBjb3BpZWQgb3ZlciBmcm9tIGluZ2VzdGlvbiwgYnV0IHdlIHNob3VsZCBvcHRpbWl6ZSBpdFxudG8gY3JlYXRlIGVsZW1lbnRzX2NoYWluIHN0cmluZyBkaXJlY3RseS5cbiovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RWxlbWVudHNDaGFpblN0cmluZyhlbGVtZW50czogUHJvcGVydGllc1tdKTogc3RyaW5nIHtcbiAgICByZXR1cm4gZWxlbWVudHNUb1N0cmluZyhleHRyYWN0RWxlbWVudHMoZWxlbWVudHMpKVxufVxuXG4vLyBUaGlzIGludGVyZmFjZSBpcyBjYWxsZWQgJ0VsZW1lbnQnIGluIHBsdWdpbi1zY2FmZm9sZCBodHRwczovL2dpdGh1Yi5jb20vUG9zdEhvZy9wbHVnaW4tc2NhZmZvbGQvYmxvYi9iMDdkM2I4Nzk3OTZlY2M3ZTIyZGViNzFiZjYyNzY5NGJhMDUzODZiL3NyYy90eXBlcy50cyNMMjAwXG4vLyBIb3dldmVyICdFbGVtZW50JyBpcyBhIERPTSBFbGVtZW50IHdoZW4gcnVuIGluIHRoZSBicm93c2VyLCBzbyB3ZSBoYXZlIHRvIHJlbmFtZSBpdFxuaW50ZXJmYWNlIFBIRWxlbWVudCB7XG4gICAgdGV4dD86IHN0cmluZ1xuICAgIHRhZ19uYW1lPzogc3RyaW5nXG4gICAgaHJlZj86IHN0cmluZ1xuICAgIGF0dHJfaWQ/OiBzdHJpbmdcbiAgICBhdHRyX2NsYXNzPzogc3RyaW5nW11cbiAgICBudGhfY2hpbGQ/OiBudW1iZXJcbiAgICBudGhfb2ZfdHlwZT86IG51bWJlclxuICAgIGF0dHJpYnV0ZXM/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+XG4gICAgZXZlbnRfaWQ/OiBudW1iZXJcbiAgICBvcmRlcj86IG51bWJlclxuICAgIGdyb3VwX2lkPzogbnVtYmVyXG59XG5cbmZ1bmN0aW9uIGVzY2FwZVF1b3RlcyhpbnB1dDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gaW5wdXQucmVwbGFjZSgvXCJ8XFxcXFwiL2csICdcXFxcXCInKVxufVxuXG5mdW5jdGlvbiBlbGVtZW50c1RvU3RyaW5nKGVsZW1lbnRzOiBQSEVsZW1lbnRbXSk6IHN0cmluZyB7XG4gICAgY29uc3QgcmV0ID0gZWxlbWVudHMubWFwKChlbGVtZW50KSA9PiB7XG4gICAgICAgIGxldCBlbF9zdHJpbmcgPSAnJ1xuICAgICAgICBpZiAoZWxlbWVudC50YWdfbmFtZSkge1xuICAgICAgICAgICAgZWxfc3RyaW5nICs9IGVsZW1lbnQudGFnX25hbWVcbiAgICAgICAgfVxuICAgICAgICBpZiAoZWxlbWVudC5hdHRyX2NsYXNzKSB7XG4gICAgICAgICAgICBlbGVtZW50LmF0dHJfY2xhc3Muc29ydCgpXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHNpbmdsZV9jbGFzcyBvZiBlbGVtZW50LmF0dHJfY2xhc3MpIHtcbiAgICAgICAgICAgICAgICBlbF9zdHJpbmcgKz0gYC4ke3NpbmdsZV9jbGFzcy5yZXBsYWNlKC9cIi9nLCAnJyl9YFxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGF0dHJpYnV0ZXM6IFJlY29yZDxzdHJpbmcsIGFueT4gPSB7XG4gICAgICAgICAgICAuLi4oZWxlbWVudC50ZXh0ID8geyB0ZXh0OiBlbGVtZW50LnRleHQgfSA6IHt9KSxcbiAgICAgICAgICAgICdudGgtY2hpbGQnOiBlbGVtZW50Lm50aF9jaGlsZCA/PyAwLFxuICAgICAgICAgICAgJ250aC1vZi10eXBlJzogZWxlbWVudC5udGhfb2ZfdHlwZSA/PyAwLFxuICAgICAgICAgICAgLi4uKGVsZW1lbnQuaHJlZiA/IHsgaHJlZjogZWxlbWVudC5ocmVmIH0gOiB7fSksXG4gICAgICAgICAgICAuLi4oZWxlbWVudC5hdHRyX2lkID8geyBhdHRyX2lkOiBlbGVtZW50LmF0dHJfaWQgfSA6IHt9KSxcbiAgICAgICAgICAgIC4uLmVsZW1lbnQuYXR0cmlidXRlcyxcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzb3J0ZWRBdHRyaWJ1dGVzOiBSZWNvcmQ8c3RyaW5nLCBhbnk+ID0ge31cbiAgICAgICAgX2VudHJpZXMoYXR0cmlidXRlcylcbiAgICAgICAgICAgIC5zb3J0KChbYV0sIFtiXSkgPT4gYS5sb2NhbGVDb21wYXJlKGIpKVxuICAgICAgICAgICAgLmZvckVhY2goXG4gICAgICAgICAgICAgICAgKFtrZXksIHZhbHVlXSkgPT4gKHNvcnRlZEF0dHJpYnV0ZXNbZXNjYXBlUXVvdGVzKGtleS50b1N0cmluZygpKV0gPSBlc2NhcGVRdW90ZXModmFsdWUudG9TdHJpbmcoKSkpXG4gICAgICAgICAgICApXG4gICAgICAgIGVsX3N0cmluZyArPSAnOidcbiAgICAgICAgZWxfc3RyaW5nICs9IF9lbnRyaWVzKGF0dHJpYnV0ZXMpXG4gICAgICAgICAgICAubWFwKChba2V5LCB2YWx1ZV0pID0+IGAke2tleX09XCIke3ZhbHVlfVwiYClcbiAgICAgICAgICAgIC5qb2luKCcnKVxuICAgICAgICByZXR1cm4gZWxfc3RyaW5nXG4gICAgfSlcbiAgICByZXR1cm4gcmV0LmpvaW4oJzsnKVxufVxuXG5mdW5jdGlvbiBleHRyYWN0RWxlbWVudHMoZWxlbWVudHM6IFByb3BlcnRpZXNbXSk6IFBIRWxlbWVudFtdIHtcbiAgICByZXR1cm4gZWxlbWVudHMubWFwKChlbCkgPT4ge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IHtcbiAgICAgICAgICAgIHRleHQ6IGVsWyckZWxfdGV4dCddPy5zbGljZSgwLCA0MDApLFxuICAgICAgICAgICAgdGFnX25hbWU6IGVsWyd0YWdfbmFtZSddLFxuICAgICAgICAgICAgaHJlZjogZWxbJ2F0dHJfX2hyZWYnXT8uc2xpY2UoMCwgMjA0OCksXG4gICAgICAgICAgICBhdHRyX2NsYXNzOiBleHRyYWN0QXR0ckNsYXNzKGVsKSxcbiAgICAgICAgICAgIGF0dHJfaWQ6IGVsWydhdHRyX19pZCddLFxuICAgICAgICAgICAgbnRoX2NoaWxkOiBlbFsnbnRoX2NoaWxkJ10sXG4gICAgICAgICAgICBudGhfb2ZfdHlwZTogZWxbJ250aF9vZl90eXBlJ10sXG4gICAgICAgICAgICBhdHRyaWJ1dGVzOiB7fSBhcyB7IFtpZDogc3RyaW5nXTogYW55IH0sXG4gICAgICAgIH1cbiAgICAgICAgX2VudHJpZXMoZWwpXG4gICAgICAgICAgICAuZmlsdGVyKChba2V5XSkgPT4ga2V5LmluZGV4T2YoJ2F0dHJfXycpID09PSAwKVxuICAgICAgICAgICAgLmZvckVhY2goKFtrZXksIHZhbHVlXSkgPT4gKHJlc3BvbnNlLmF0dHJpYnV0ZXNba2V5XSA9IHZhbHVlKSlcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlXG4gICAgfSlcbn1cblxuZnVuY3Rpb24gZXh0cmFjdEF0dHJDbGFzcyhlbDogUHJvcGVydGllcyk6IFBIRWxlbWVudFsnYXR0cl9jbGFzcyddIHtcbiAgICBjb25zdCBhdHRyX2NsYXNzID0gZWxbJ2F0dHJfX2NsYXNzJ11cbiAgICBpZiAoIWF0dHJfY2xhc3MpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgIH0gZWxzZSBpZiAoX2lzQXJyYXkoYXR0cl9jbGFzcykpIHtcbiAgICAgICAgcmV0dXJuIGF0dHJfY2xhc3NcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gc3BsaXRDbGFzc1N0cmluZyhhdHRyX2NsYXNzKVxuICAgIH1cbn1cbiIsICIvLyBOYWl2ZSByYWdlIGNsaWNrIGltcGxlbWVudGF0aW9uOiBJZiBtb3VzZSBoYXMgbm90IG1vdmVkIHRoYW4gUkFHRV9DTElDS19USFJFU0hPTERfUFhcbi8vIG92ZXIgUkFHRV9DTElDS19DTElDS19DT1VOVCBjbGlja3Mgd2l0aCBtYXggUkFHRV9DTElDS19USU1FT1VUX01TIGJldHdlZW4gY2xpY2tzLCBpdCdzXG4vLyBjb3VudGVkIGFzIGEgcmFnZSBjbGlja1xuXG5jb25zdCBSQUdFX0NMSUNLX1RIUkVTSE9MRF9QWCA9IDMwXG5jb25zdCBSQUdFX0NMSUNLX1RJTUVPVVRfTVMgPSAxMDAwXG5jb25zdCBSQUdFX0NMSUNLX0NMSUNLX0NPVU5UID0gM1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSYWdlQ2xpY2sge1xuICAgIGNsaWNrczogeyB4OiBudW1iZXI7IHk6IG51bWJlcjsgdGltZXN0YW1wOiBudW1iZXIgfVtdXG4gICAgZW5hYmxlZDogYm9vbGVhblxuXG4gICAgY29uc3RydWN0b3IoZW5hYmxlZDogYm9vbGVhbikge1xuICAgICAgICB0aGlzLmNsaWNrcyA9IFtdXG4gICAgICAgIHRoaXMuZW5hYmxlZCA9IGVuYWJsZWRcbiAgICB9XG5cbiAgICBpc1JhZ2VDbGljayh4OiBudW1iZXIsIHk6IG51bWJlciwgdGltZXN0YW1wOiBudW1iZXIpOiBib29sZWFuIHtcbiAgICAgICAgaWYgKCF0aGlzLmVuYWJsZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbGFzdENsaWNrID0gdGhpcy5jbGlja3NbdGhpcy5jbGlja3MubGVuZ3RoIC0gMV1cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgbGFzdENsaWNrICYmXG4gICAgICAgICAgICBNYXRoLmFicyh4IC0gbGFzdENsaWNrLngpICsgTWF0aC5hYnMoeSAtIGxhc3RDbGljay55KSA8IFJBR0VfQ0xJQ0tfVEhSRVNIT0xEX1BYICYmXG4gICAgICAgICAgICB0aW1lc3RhbXAgLSBsYXN0Q2xpY2sudGltZXN0YW1wIDwgUkFHRV9DTElDS19USU1FT1VUX01TXG4gICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy5jbGlja3MucHVzaCh7IHgsIHksIHRpbWVzdGFtcCB9KVxuXG4gICAgICAgICAgICBpZiAodGhpcy5jbGlja3MubGVuZ3RoID09PSBSQUdFX0NMSUNLX0NMSUNLX0NPVU5UKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuY2xpY2tzID0gW3sgeCwgeSwgdGltZXN0YW1wIH1dXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG59XG4iLCAiLypcbiAqIENvbnN0YW50c1xuICovXG5cbi8qIFBST1BFUlRZIEtFWVMgKi9cblxuLy8gVGhpcyBrZXkgaXMgZGVwcmVjYXRlZCwgYnV0IHdlIHdhbnQgdG8gY2hlY2sgZm9yIGl0IHRvIHNlZSB3aGV0aGVyIGFsaWFzaW5nIGlzIGFsbG93ZWQuXG5leHBvcnQgY29uc3QgUEVPUExFX0RJU1RJTkNUX0lEX0tFWSA9ICckcGVvcGxlX2Rpc3RpbmN0X2lkJ1xuZXhwb3J0IGNvbnN0IERJU1RJTkNUX0lEID0gJ2Rpc3RpbmN0X2lkJ1xuZXhwb3J0IGNvbnN0IEFMSUFTX0lEX0tFWSA9ICdfX2FsaWFzJ1xuZXhwb3J0IGNvbnN0IENBTVBBSUdOX0lEU19LRVkgPSAnX19jbXBucydcbmV4cG9ydCBjb25zdCBFVkVOVF9USU1FUlNfS0VZID0gJ19fdGltZXJzJ1xuZXhwb3J0IGNvbnN0IEFVVE9DQVBUVVJFX0RJU0FCTEVEX1NFUlZFUl9TSURFID0gJyRhdXRvY2FwdHVyZV9kaXNhYmxlZF9zZXJ2ZXJfc2lkZSdcbmV4cG9ydCBjb25zdCBTRVNTSU9OX1JFQ09SRElOR19FTkFCTEVEX1NFUlZFUl9TSURFID0gJyRzZXNzaW9uX3JlY29yZGluZ19lbmFibGVkX3NlcnZlcl9zaWRlJ1xuZXhwb3J0IGNvbnN0IENPTlNPTEVfTE9HX1JFQ09SRElOR19FTkFCTEVEX1NFUlZFUl9TSURFID0gJyRjb25zb2xlX2xvZ19yZWNvcmRpbmdfZW5hYmxlZF9zZXJ2ZXJfc2lkZSdcbmV4cG9ydCBjb25zdCBTRVNTSU9OX1JFQ09SRElOR19SRUNPUkRFUl9WRVJTSU9OX1NFUlZFUl9TSURFID0gJyRzZXNzaW9uX3JlY29yZGluZ19yZWNvcmRlcl92ZXJzaW9uX3NlcnZlcl9zaWRlJyAvLyBmb2xsb3dzIHJyd2ViIHZlcnNpb25pbmdcbmV4cG9ydCBjb25zdCBTRVNTSU9OX1JFQ09SRElOR19ORVRXT1JLX1BBWUxPQURfQ0FQVFVSRSA9ICckc2Vzc2lvbl9yZWNvcmRpbmdfbmV0d29ya19wYXlsb2FkX2NhcHR1cmUnXG5leHBvcnQgY29uc3QgU0VTU0lPTl9SRUNPUkRJTkdfQ0FOVkFTX1JFQ09SRElORyA9ICckc2Vzc2lvbl9yZWNvcmRpbmdfY2FudmFzX3JlY29yZGluZydcbmV4cG9ydCBjb25zdCBTRVNTSU9OX0lEID0gJyRzZXNpZCdcbmV4cG9ydCBjb25zdCBTRVNTSU9OX1JFQ09SRElOR19JU19TQU1QTEVEID0gJyRzZXNzaW9uX2lzX3NhbXBsZWQnXG5leHBvcnQgY29uc3QgRU5BQkxFRF9GRUFUVVJFX0ZMQUdTID0gJyRlbmFibGVkX2ZlYXR1cmVfZmxhZ3MnXG5leHBvcnQgY29uc3QgUEVSU0lTVEVOQ0VfRUFSTFlfQUNDRVNTX0ZFQVRVUkVTID0gJyRlYXJseV9hY2Nlc3NfZmVhdHVyZXMnXG5leHBvcnQgY29uc3QgU1RPUkVEX1BFUlNPTl9QUk9QRVJUSUVTX0tFWSA9ICckc3RvcmVkX3BlcnNvbl9wcm9wZXJ0aWVzJ1xuZXhwb3J0IGNvbnN0IFNUT1JFRF9HUk9VUF9QUk9QRVJUSUVTX0tFWSA9ICckc3RvcmVkX2dyb3VwX3Byb3BlcnRpZXMnXG5leHBvcnQgY29uc3QgU1VSVkVZUyA9ICckc3VydmV5cydcbmV4cG9ydCBjb25zdCBGTEFHX0NBTExfUkVQT1JURUQgPSAnJGZsYWdfY2FsbF9yZXBvcnRlZCdcbmV4cG9ydCBjb25zdCBVU0VSX1NUQVRFID0gJyR1c2VyX3N0YXRlJ1xuZXhwb3J0IGNvbnN0IFBPU1RIT0dfUVVPVEFfTElNSVRFRCA9ICckcG9zdGhvZ19xdW90YV9saW1pdGVkJ1xuZXhwb3J0IGNvbnN0IENMSUVOVF9TRVNTSU9OX1BST1BTID0gJyRjbGllbnRfc2Vzc2lvbl9wcm9wcydcblxuLy8gVGhlc2UgYXJlIHByb3BlcnRpZXMgdGhhdCBhcmUgcmVzZXJ2ZWQgYW5kIHdpbGwgbm90IGJlIGF1dG9tYXRpY2FsbHkgaW5jbHVkZWQgaW4gZXZlbnRzXG5leHBvcnQgY29uc3QgUEVSU0lTVEVOQ0VfUkVTRVJWRURfUFJPUEVSVElFUyA9IFtcbiAgICBQRU9QTEVfRElTVElOQ1RfSURfS0VZLFxuICAgIEFMSUFTX0lEX0tFWSxcbiAgICBDQU1QQUlHTl9JRFNfS0VZLFxuICAgIEVWRU5UX1RJTUVSU19LRVksXG4gICAgU0VTU0lPTl9SRUNPUkRJTkdfRU5BQkxFRF9TRVJWRVJfU0lERSxcbiAgICBTRVNTSU9OX0lELFxuICAgIEVOQUJMRURfRkVBVFVSRV9GTEFHUyxcbiAgICBVU0VSX1NUQVRFLFxuICAgIFBPU1RIT0dfUVVPVEFfTElNSVRFRCxcbiAgICBQRVJTSVNURU5DRV9FQVJMWV9BQ0NFU1NfRkVBVFVSRVMsXG4gICAgU1RPUkVEX0dST1VQX1BST1BFUlRJRVNfS0VZLFxuICAgIFNUT1JFRF9QRVJTT05fUFJPUEVSVElFU19LRVksXG4gICAgU1VSVkVZUyxcbiAgICBGTEFHX0NBTExfUkVQT1JURUQsXG4gICAgQ0xJRU5UX1NFU1NJT05fUFJPUFMsXG5dXG4iLCAiaW1wb3J0IHsgX2JpbmRfaW5zdGFuY2VfbWV0aG9kcywgX2VhY2gsIF9leHRlbmQsIF9pbmNsdWRlcywgX3JlZ2lzdGVyX2V2ZW50LCBfc2FmZXdyYXBfaW5zdGFuY2VfbWV0aG9kcyB9IGZyb20gJy4vdXRpbHMnXG5pbXBvcnQge1xuICAgIGF1dG9jYXB0dXJlQ29tcGF0aWJsZUVsZW1lbnRzLFxuICAgIGdldENsYXNzTmFtZXMsXG4gICAgZ2V0RGlyZWN0QW5kTmVzdGVkU3BhblRleHQsXG4gICAgZ2V0RWxlbWVudHNDaGFpblN0cmluZyxcbiAgICBnZXRTYWZlVGV4dCxcbiAgICBpc0FuZ3VsYXJTdHlsZUF0dHIsXG4gICAgaXNEb2N1bWVudEZyYWdtZW50LFxuICAgIGlzRWxlbWVudE5vZGUsXG4gICAgaXNTZW5zaXRpdmVFbGVtZW50LFxuICAgIGlzVGFnLFxuICAgIGlzVGV4dE5vZGUsXG4gICAgbWFrZVNhZmVUZXh0LFxuICAgIHNob3VsZENhcHR1cmVEb21FdmVudCxcbiAgICBzaG91bGRDYXB0dXJlRWxlbWVudCxcbiAgICBzaG91bGRDYXB0dXJlVmFsdWUsXG4gICAgc3BsaXRDbGFzc1N0cmluZyxcbn0gZnJvbSAnLi9hdXRvY2FwdHVyZS11dGlscydcbmltcG9ydCBSYWdlQ2xpY2sgZnJvbSAnLi9leHRlbnNpb25zL3JhZ2VjbGljaydcbmltcG9ydCB7IEF1dG9jYXB0dXJlQ29uZmlnLCBBdXRvQ2FwdHVyZUN1c3RvbVByb3BlcnR5LCBEZWNpZGVSZXNwb25zZSwgUHJvcGVydGllcyB9IGZyb20gJy4vdHlwZXMnXG5pbXBvcnQgeyBQb3N0SG9nIH0gZnJvbSAnLi9wb3N0aG9nLWNvcmUnXG5pbXBvcnQgeyBBVVRPQ0FQVFVSRV9ESVNBQkxFRF9TRVJWRVJfU0lERSB9IGZyb20gJy4vY29uc3RhbnRzJ1xuXG5pbXBvcnQgeyBfaXNCb29sZWFuLCBfaXNGdW5jdGlvbiwgX2lzTnVsbCwgX2lzT2JqZWN0LCBfaXNVbmRlZmluZWQgfSBmcm9tICcuL3V0aWxzL3R5cGUtdXRpbHMnXG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tICcuL3V0aWxzL2xvZ2dlcidcbmltcG9ydCB7IGRvY3VtZW50LCB3aW5kb3cgfSBmcm9tICcuL3V0aWxzL2dsb2JhbHMnXG5cbmNvbnN0IENPUFlfQVVUT0NBUFRVUkVfRVZFTlQgPSAnJGNvcHlfYXV0b2NhcHR1cmUnXG5cbmZ1bmN0aW9uIGxpbWl0VGV4dChsZW5ndGg6IG51bWJlciwgdGV4dDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBpZiAodGV4dC5sZW5ndGggPiBsZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIHRleHQuc2xpY2UoMCwgbGVuZ3RoKSArICcuLi4nXG4gICAgfVxuICAgIHJldHVybiB0ZXh0XG59XG5cbmNvbnN0IGF1dG9jYXB0dXJlID0ge1xuICAgIF9pbml0aWFsaXplZFRva2VuczogW10gYXMgc3RyaW5nW10sXG4gICAgX2lzRGlzYWJsZWRTZXJ2ZXJTaWRlOiBudWxsIGFzIGJvb2xlYW4gfCBudWxsLFxuICAgIF9pc0F1dG9jYXB0dXJlRW5hYmxlZDogZmFsc2UgYXMgYm9vbGVhbixcblxuICAgIF9zZXRJc0F1dG9jYXB0dXJlRW5hYmxlZDogZnVuY3Rpb24gKGluc3RhbmNlOiBQb3N0SG9nKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGRpc2FibGVkX3NlcnZlcl9zaWRlID0gX2lzTnVsbCh0aGlzLl9pc0Rpc2FibGVkU2VydmVyU2lkZSlcbiAgICAgICAgICAgID8gISFpbnN0YW5jZS5wZXJzaXN0ZW5jZT8ucHJvcHNbQVVUT0NBUFRVUkVfRElTQUJMRURfU0VSVkVSX1NJREVdXG4gICAgICAgICAgICA6IHRoaXMuX2lzRGlzYWJsZWRTZXJ2ZXJTaWRlXG4gICAgICAgIGNvbnN0IGVuYWJsZWRfY2xpZW50X3NpZGUgPSAhIWluc3RhbmNlLmNvbmZpZy5hdXRvY2FwdHVyZVxuICAgICAgICB0aGlzLl9pc0F1dG9jYXB0dXJlRW5hYmxlZCA9IGVuYWJsZWRfY2xpZW50X3NpZGUgJiYgIWRpc2FibGVkX3NlcnZlcl9zaWRlXG4gICAgfSxcblxuICAgIF9wcmV2aW91c0VsZW1lbnRTaWJsaW5nOiBmdW5jdGlvbiAoZWw6IEVsZW1lbnQpOiBFbGVtZW50IHwgbnVsbCB7XG4gICAgICAgIGlmIChlbC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nKSB7XG4gICAgICAgICAgICByZXR1cm4gZWwucHJldmlvdXNFbGVtZW50U2libGluZ1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGV0IF9lbDogRWxlbWVudCB8IG51bGwgPSBlbFxuICAgICAgICAgICAgZG8ge1xuICAgICAgICAgICAgICAgIF9lbCA9IF9lbC5wcmV2aW91c1NpYmxpbmcgYXMgRWxlbWVudCB8IG51bGwgLy8gcmVzb2x2ZXMgdG8gQ2hpbGROb2RlLT5Ob2RlLCB3aGljaCBpcyBFbGVtZW50J3MgcGFyZW50IGNsYXNzXG4gICAgICAgICAgICB9IHdoaWxlIChfZWwgJiYgIWlzRWxlbWVudE5vZGUoX2VsKSlcbiAgICAgICAgICAgIHJldHVybiBfZWxcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBfZ2V0QXVnbWVudFByb3BlcnRpZXNGcm9tRWxlbWVudDogZnVuY3Rpb24gKGVsZW06IEVsZW1lbnQpOiBQcm9wZXJ0aWVzIHtcbiAgICAgICAgY29uc3Qgc2hvdWxkQ2FwdHVyZUVsID0gc2hvdWxkQ2FwdHVyZUVsZW1lbnQoZWxlbSlcbiAgICAgICAgaWYgKCFzaG91bGRDYXB0dXJlRWwpIHtcbiAgICAgICAgICAgIHJldHVybiB7fVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcHJvcHM6IFByb3BlcnRpZXMgPSB7fVxuXG4gICAgICAgIF9lYWNoKGVsZW0uYXR0cmlidXRlcywgZnVuY3Rpb24gKGF0dHI6IEF0dHIpIHtcbiAgICAgICAgICAgIGlmIChhdHRyLm5hbWUuaW5kZXhPZignZGF0YS1waC1jYXB0dXJlLWF0dHJpYnV0ZScpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcHJvcGVydHlLZXkgPSBhdHRyLm5hbWUucmVwbGFjZSgnZGF0YS1waC1jYXB0dXJlLWF0dHJpYnV0ZS0nLCAnJylcbiAgICAgICAgICAgICAgICBjb25zdCBwcm9wZXJ0eVZhbHVlID0gYXR0ci52YWx1ZVxuICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0eUtleSAmJiBwcm9wZXJ0eVZhbHVlICYmIHNob3VsZENhcHR1cmVWYWx1ZShwcm9wZXJ0eVZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICBwcm9wc1twcm9wZXJ0eUtleV0gPSBwcm9wZXJ0eVZhbHVlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gcHJvcHNcbiAgICB9LFxuXG4gICAgX2dldFByb3BlcnRpZXNGcm9tRWxlbWVudDogZnVuY3Rpb24gKGVsZW06IEVsZW1lbnQsIG1hc2tJbnB1dHM6IGJvb2xlYW4sIG1hc2tUZXh0OiBib29sZWFuKTogUHJvcGVydGllcyB7XG4gICAgICAgIGNvbnN0IHRhZ19uYW1lID0gZWxlbS50YWdOYW1lLnRvTG93ZXJDYXNlKClcbiAgICAgICAgY29uc3QgcHJvcHM6IFByb3BlcnRpZXMgPSB7XG4gICAgICAgICAgICB0YWdfbmFtZTogdGFnX25hbWUsXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGF1dG9jYXB0dXJlQ29tcGF0aWJsZUVsZW1lbnRzLmluZGV4T2YodGFnX25hbWUpID4gLTEgJiYgIW1hc2tUZXh0KSB7XG4gICAgICAgICAgICBpZiAodGFnX25hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ2EnIHx8IHRhZ19uYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdidXR0b24nKSB7XG4gICAgICAgICAgICAgICAgcHJvcHNbJyRlbF90ZXh0J10gPSBsaW1pdFRleHQoMTAyNCwgZ2V0RGlyZWN0QW5kTmVzdGVkU3BhblRleHQoZWxlbSkpXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHByb3BzWyckZWxfdGV4dCddID0gbGltaXRUZXh0KDEwMjQsIGdldFNhZmVUZXh0KGVsZW0pKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY2xhc3NlcyA9IGdldENsYXNzTmFtZXMoZWxlbSlcbiAgICAgICAgaWYgKGNsYXNzZXMubGVuZ3RoID4gMClcbiAgICAgICAgICAgIHByb3BzWydjbGFzc2VzJ10gPSBjbGFzc2VzLmZpbHRlcihmdW5jdGlvbiAoYykge1xuICAgICAgICAgICAgICAgIHJldHVybiBjICE9PSAnJ1xuICAgICAgICAgICAgfSlcblxuICAgICAgICAvLyBjYXB0dXJlIHRoZSBkZW55IGxpc3QgaGVyZSBiZWNhdXNlIHRoaXMgbm90LWEtY2xhc3MgY2xhc3MgbWFrZXMgaXQgdHJpY2t5IHRvIHVzZSB0aGlzLmNvbmZpZyBpbiB0aGUgZnVuY3Rpb24gYmVsb3dcbiAgICAgICAgY29uc3QgZWxlbWVudEF0dHJpYnV0ZUlnbm9yZWxpc3QgPSB0aGlzLmNvbmZpZz8uZWxlbWVudF9hdHRyaWJ1dGVfaWdub3JlbGlzdFxuICAgICAgICBfZWFjaChlbGVtLmF0dHJpYnV0ZXMsIGZ1bmN0aW9uIChhdHRyOiBBdHRyKSB7XG4gICAgICAgICAgICAvLyBPbmx5IGNhcHR1cmUgYXR0cmlidXRlcyB3ZSBrbm93IGFyZSBzYWZlXG4gICAgICAgICAgICBpZiAoaXNTZW5zaXRpdmVFbGVtZW50KGVsZW0pICYmIFsnbmFtZScsICdpZCcsICdjbGFzcyddLmluZGV4T2YoYXR0ci5uYW1lKSA9PT0gLTEpIHJldHVyblxuXG4gICAgICAgICAgICBpZiAoZWxlbWVudEF0dHJpYnV0ZUlnbm9yZWxpc3Q/LmluY2x1ZGVzKGF0dHIubmFtZSkpIHJldHVyblxuXG4gICAgICAgICAgICBpZiAoIW1hc2tJbnB1dHMgJiYgc2hvdWxkQ2FwdHVyZVZhbHVlKGF0dHIudmFsdWUpICYmICFpc0FuZ3VsYXJTdHlsZUF0dHIoYXR0ci5uYW1lKSkge1xuICAgICAgICAgICAgICAgIGxldCB2YWx1ZSA9IGF0dHIudmFsdWVcbiAgICAgICAgICAgICAgICBpZiAoYXR0ci5uYW1lID09PSAnY2xhc3MnKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGh0bWwgYXR0cmlidXRlcyBjYW4gX3RlY2huaWNhbGx5XyBjb250YWluIGxpbmVicmVha3MsXG4gICAgICAgICAgICAgICAgICAgIC8vIGJ1dCB3ZSdyZSB2ZXJ5IGludG9sZXJhbnQgb2YgdGhlbSBpbiB0aGUgY2xhc3Mgc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAvLyBzbyB3ZSBzdHJpcCB0aGVtLlxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHNwbGl0Q2xhc3NTdHJpbmcodmFsdWUpLmpvaW4oJyAnKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwcm9wc1snYXR0cl9fJyArIGF0dHIubmFtZV0gPSBsaW1pdFRleHQoMTAyNCwgdmFsdWUpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG5cbiAgICAgICAgbGV0IG50aENoaWxkID0gMVxuICAgICAgICBsZXQgbnRoT2ZUeXBlID0gMVxuICAgICAgICBsZXQgY3VycmVudEVsZW06IEVsZW1lbnQgfCBudWxsID0gZWxlbVxuICAgICAgICB3aGlsZSAoKGN1cnJlbnRFbGVtID0gdGhpcy5fcHJldmlvdXNFbGVtZW50U2libGluZyhjdXJyZW50RWxlbSkpKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbmQtYXNzaWduXG4gICAgICAgICAgICBudGhDaGlsZCsrXG4gICAgICAgICAgICBpZiAoY3VycmVudEVsZW0udGFnTmFtZSA9PT0gZWxlbS50YWdOYW1lKSB7XG4gICAgICAgICAgICAgICAgbnRoT2ZUeXBlKytcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBwcm9wc1snbnRoX2NoaWxkJ10gPSBudGhDaGlsZFxuICAgICAgICBwcm9wc1snbnRoX29mX3R5cGUnXSA9IG50aE9mVHlwZVxuXG4gICAgICAgIHJldHVybiBwcm9wc1xuICAgIH0sXG5cbiAgICBfZ2V0RGVmYXVsdFByb3BlcnRpZXM6IGZ1bmN0aW9uIChldmVudFR5cGU6IHN0cmluZyk6IFByb3BlcnRpZXMge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgJGV2ZW50X3R5cGU6IGV2ZW50VHlwZSxcbiAgICAgICAgICAgICRjZV92ZXJzaW9uOiAxLFxuICAgICAgICB9XG4gICAgfSxcblxuICAgIF9leHRyYWN0Q3VzdG9tUHJvcGVydHlWYWx1ZTogZnVuY3Rpb24gKGN1c3RvbVByb3BlcnR5OiBBdXRvQ2FwdHVyZUN1c3RvbVByb3BlcnR5KTogc3RyaW5nIHtcbiAgICAgICAgY29uc3QgcHJvcFZhbHVlczogc3RyaW5nW10gPSBbXVxuICAgICAgICBfZWFjaChkb2N1bWVudD8ucXVlcnlTZWxlY3RvckFsbChjdXN0b21Qcm9wZXJ0eVsnY3NzX3NlbGVjdG9yJ10pLCBmdW5jdGlvbiAobWF0Y2hlZEVsZW0pIHtcbiAgICAgICAgICAgIGxldCB2YWx1ZVxuXG4gICAgICAgICAgICBpZiAoWydpbnB1dCcsICdzZWxlY3QnXS5pbmRleE9mKG1hdGNoZWRFbGVtLnRhZ05hbWUudG9Mb3dlckNhc2UoKSkgPiAtMSkge1xuICAgICAgICAgICAgICAgIHZhbHVlID0gbWF0Y2hlZEVsZW1bJ3ZhbHVlJ11cbiAgICAgICAgICAgIH0gZWxzZSBpZiAobWF0Y2hlZEVsZW1bJ3RleHRDb250ZW50J10pIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IG1hdGNoZWRFbGVtWyd0ZXh0Q29udGVudCddXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChzaG91bGRDYXB0dXJlVmFsdWUodmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgcHJvcFZhbHVlcy5wdXNoKHZhbHVlKVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gcHJvcFZhbHVlcy5qb2luKCcsICcpXG4gICAgfSxcblxuICAgIC8vIFRPRE86IGRlbGV0ZSBjdXN0b21fcHJvcGVydGllcyBhZnRlciBjaGFuZ2VsZXNzIHR5cGVzY3JpcHQgcmVmYWN0b3JcbiAgICBfZ2V0Q3VzdG9tUHJvcGVydGllczogZnVuY3Rpb24gKHRhcmdldEVsZW1lbnRMaXN0OiBFbGVtZW50W10pOiBQcm9wZXJ0aWVzIHtcbiAgICAgICAgY29uc3QgcHJvcHM6IFByb3BlcnRpZXMgPSB7fSAvLyB3aWxsIGJlIGRlbGV0ZWRcbiAgICAgICAgX2VhY2godGhpcy5fY3VzdG9tUHJvcGVydGllcywgKGN1c3RvbVByb3BlcnR5KSA9PiB7XG4gICAgICAgICAgICBfZWFjaChjdXN0b21Qcm9wZXJ0eVsnZXZlbnRfc2VsZWN0b3JzJ10sIChldmVudFNlbGVjdG9yKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXZlbnRFbGVtZW50cyA9IGRvY3VtZW50Py5xdWVyeVNlbGVjdG9yQWxsKGV2ZW50U2VsZWN0b3IpXG4gICAgICAgICAgICAgICAgX2VhY2goZXZlbnRFbGVtZW50cywgKGV2ZW50RWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoX2luY2x1ZGVzKHRhcmdldEVsZW1lbnRMaXN0LCBldmVudEVsZW1lbnQpICYmIHNob3VsZENhcHR1cmVFbGVtZW50KGV2ZW50RWxlbWVudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3BzW2N1c3RvbVByb3BlcnR5WyduYW1lJ11dID0gdGhpcy5fZXh0cmFjdEN1c3RvbVByb3BlcnR5VmFsdWUoY3VzdG9tUHJvcGVydHkpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIHByb3BzXG4gICAgfSxcblxuICAgIF9nZXRFdmVudFRhcmdldDogZnVuY3Rpb24gKGU6IEV2ZW50KTogRWxlbWVudCB8IG51bGwge1xuICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvRXZlbnQvdGFyZ2V0I0NvbXBhdGliaWxpdHlfbm90ZXNcbiAgICAgICAgaWYgKF9pc1VuZGVmaW5lZChlLnRhcmdldCkpIHtcbiAgICAgICAgICAgIHJldHVybiAoZS5zcmNFbGVtZW50IGFzIEVsZW1lbnQpIHx8IG51bGxcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmICgoZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQpPy5zaGFkb3dSb290KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChlLmNvbXBvc2VkUGF0aCgpWzBdIGFzIEVsZW1lbnQpIHx8IG51bGxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAoZS50YXJnZXQgYXMgRWxlbWVudCkgfHwgbnVsbFxuICAgICAgICB9XG4gICAgfSxcblxuICAgIF9jYXB0dXJlRXZlbnQ6IGZ1bmN0aW9uIChcbiAgICAgICAgZTogRXZlbnQsXG4gICAgICAgIGluc3RhbmNlOiBQb3N0SG9nLFxuICAgICAgICBldmVudE5hbWUgPSAnJGF1dG9jYXB0dXJlJyxcbiAgICAgICAgZXh0cmFQcm9wcz86IFByb3BlcnRpZXNcbiAgICApOiBib29sZWFuIHwgdm9pZCB7XG4gICAgICAgIC8qKiogRG9uJ3QgbWVzcyB3aXRoIHRoaXMgY29kZSB3aXRob3V0IHJ1bm5pbmcgSUU4IHRlc3RzIG9uIGl0ICoqKi9cbiAgICAgICAgbGV0IHRhcmdldCA9IHRoaXMuX2dldEV2ZW50VGFyZ2V0KGUpXG4gICAgICAgIGlmIChpc1RleHROb2RlKHRhcmdldCkpIHtcbiAgICAgICAgICAgIC8vIGRlZmVhdCBTYWZhcmkgYnVnIChzZWU6IGh0dHA6Ly93d3cucXVpcmtzbW9kZS5vcmcvanMvZXZlbnRzX3Byb3BlcnRpZXMuaHRtbClcbiAgICAgICAgICAgIHRhcmdldCA9ICh0YXJnZXQucGFyZW50Tm9kZSB8fCBudWxsKSBhcyBFbGVtZW50IHwgbnVsbFxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGV2ZW50TmFtZSA9PT0gJyRhdXRvY2FwdHVyZScgJiYgZS50eXBlID09PSAnY2xpY2snICYmIGUgaW5zdGFuY2VvZiBNb3VzZUV2ZW50KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5yYWdlY2xpY2tzPy5pc1JhZ2VDbGljayhlLmNsaWVudFgsIGUuY2xpZW50WSwgbmV3IERhdGUoKS5nZXRUaW1lKCkpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fY2FwdHVyZUV2ZW50KGUsIGluc3RhbmNlLCAnJHJhZ2VjbGljaycpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBpc0NvcHlBdXRvY2FwdHVyZSA9IGV2ZW50TmFtZSA9PT0gQ09QWV9BVVRPQ0FQVFVSRV9FVkVOVFxuICAgICAgICBpZiAoXG4gICAgICAgICAgICB0YXJnZXQgJiZcbiAgICAgICAgICAgIHNob3VsZENhcHR1cmVEb21FdmVudChcbiAgICAgICAgICAgICAgICB0YXJnZXQsXG4gICAgICAgICAgICAgICAgZSxcbiAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZyxcbiAgICAgICAgICAgICAgICAvLyBtb3N0bHkgdGhpcyBtZXRob2QgY2FyZXMgYWJvdXQgdGhlIHRhcmdldCBlbGVtZW50LCBidXQgaW4gdGhlIGNhc2Ugb2YgY29weSBldmVudHMsXG4gICAgICAgICAgICAgICAgLy8gd2Ugd2FudCBzb21lIG9mIHRoZSB3b3JrIHRoaXMgY2hlY2sgZG9lcyB3aXRob3V0IGluc2lzdGluZyBvbiB0aGUgdGFyZ2V0IGVsZW1lbnQncyB0eXBlXG4gICAgICAgICAgICAgICAgaXNDb3B5QXV0b2NhcHR1cmUsXG4gICAgICAgICAgICAgICAgLy8gd2UgYWxzbyBkb24ndCB3YW50IHRvIHJlc3RyaWN0IGNvcHkgY2hlY2tzIHRvIGNsaWNrcyxcbiAgICAgICAgICAgICAgICAvLyBzbyB3ZSBwYXNzIHRoYXQga25vd2xlZGdlIGluIGhlcmUsIHJhdGhlciB0aGFuIGFkZCB0aGUgbG9naWMgaW5zaWRlIHRoZSBjaGVja1xuICAgICAgICAgICAgICAgIGlzQ29weUF1dG9jYXB0dXJlID8gWydjb3B5JywgJ2N1dCddIDogdW5kZWZpbmVkXG4gICAgICAgICAgICApXG4gICAgICAgICkge1xuICAgICAgICAgICAgY29uc3QgdGFyZ2V0RWxlbWVudExpc3QgPSBbdGFyZ2V0XVxuICAgICAgICAgICAgbGV0IGN1ckVsID0gdGFyZ2V0XG4gICAgICAgICAgICB3aGlsZSAoY3VyRWwucGFyZW50Tm9kZSAmJiAhaXNUYWcoY3VyRWwsICdib2R5JykpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNEb2N1bWVudEZyYWdtZW50KGN1ckVsLnBhcmVudE5vZGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldEVsZW1lbnRMaXN0LnB1c2goKGN1ckVsLnBhcmVudE5vZGUgYXMgYW55KS5ob3N0KVxuICAgICAgICAgICAgICAgICAgICBjdXJFbCA9IChjdXJFbC5wYXJlbnROb2RlIGFzIGFueSkuaG9zdFxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0YXJnZXRFbGVtZW50TGlzdC5wdXNoKGN1ckVsLnBhcmVudE5vZGUgYXMgRWxlbWVudClcbiAgICAgICAgICAgICAgICBjdXJFbCA9IGN1ckVsLnBhcmVudE5vZGUgYXMgRWxlbWVudFxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBlbGVtZW50c0pzb246IFByb3BlcnRpZXNbXSA9IFtdXG4gICAgICAgICAgICBjb25zdCBhdXRvY2FwdHVyZUF1Z21lbnRQcm9wZXJ0aWVzOiBQcm9wZXJ0aWVzID0ge31cbiAgICAgICAgICAgIGxldCBocmVmLFxuICAgICAgICAgICAgICAgIGV4cGxpY2l0Tm9DYXB0dXJlID0gZmFsc2VcbiAgICAgICAgICAgIF9lYWNoKHRhcmdldEVsZW1lbnRMaXN0LCAoZWwpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzaG91bGRDYXB0dXJlRWwgPSBzaG91bGRDYXB0dXJlRWxlbWVudChlbClcblxuICAgICAgICAgICAgICAgIC8vIGlmIHRoZSBlbGVtZW50IG9yIGEgcGFyZW50IGVsZW1lbnQgaXMgYW4gYW5jaG9yIHRhZ1xuICAgICAgICAgICAgICAgIC8vIGluY2x1ZGUgdGhlIGhyZWYgYXMgYSBwcm9wZXJ0eVxuICAgICAgICAgICAgICAgIGlmIChlbC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdhJykge1xuICAgICAgICAgICAgICAgICAgICBocmVmID0gZWwuZ2V0QXR0cmlidXRlKCdocmVmJylcbiAgICAgICAgICAgICAgICAgICAgaHJlZiA9IHNob3VsZENhcHR1cmVFbCAmJiBzaG91bGRDYXB0dXJlVmFsdWUoaHJlZikgJiYgaHJlZlxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIGFsbG93IHVzZXJzIHRvIHByb2dyYW1tYXRpY2FsbHkgcHJldmVudCBjYXB0dXJpbmcgb2YgZWxlbWVudHMgYnkgYWRkaW5nIGNsYXNzICdwaC1uby1jYXB0dXJlJ1xuICAgICAgICAgICAgICAgIGNvbnN0IGNsYXNzZXMgPSBnZXRDbGFzc05hbWVzKGVsKVxuICAgICAgICAgICAgICAgIGlmIChfaW5jbHVkZXMoY2xhc3NlcywgJ3BoLW5vLWNhcHR1cmUnKSkge1xuICAgICAgICAgICAgICAgICAgICBleHBsaWNpdE5vQ2FwdHVyZSA9IHRydWVcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBlbGVtZW50c0pzb24ucHVzaChcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZ2V0UHJvcGVydGllc0Zyb21FbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgZWwsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZS5jb25maWcubWFza19hbGxfZWxlbWVudF9hdHRyaWJ1dGVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2UuY29uZmlnLm1hc2tfYWxsX3RleHRcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIClcblxuICAgICAgICAgICAgICAgIGNvbnN0IGF1Z21lbnRQcm9wZXJ0aWVzID0gdGhpcy5fZ2V0QXVnbWVudFByb3BlcnRpZXNGcm9tRWxlbWVudChlbClcbiAgICAgICAgICAgICAgICBfZXh0ZW5kKGF1dG9jYXB0dXJlQXVnbWVudFByb3BlcnRpZXMsIGF1Z21lbnRQcm9wZXJ0aWVzKVxuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgaWYgKCFpbnN0YW5jZS5jb25maWcubWFza19hbGxfdGV4dCkge1xuICAgICAgICAgICAgICAgIC8vIGlmIHRoZSBlbGVtZW50IGlzIGEgYnV0dG9uIG9yIGFuY2hvciB0YWcgZ2V0IHRoZSBzcGFuIHRleHQgZnJvbSBhbnlcbiAgICAgICAgICAgICAgICAvLyBjaGlsZHJlbiBhbmQgaW5jbHVkZSBpdCBhcy93aXRoIHRoZSB0ZXh0IHByb3BlcnR5IG9uIHRoZSBwYXJlbnQgZWxlbWVudFxuICAgICAgICAgICAgICAgIGlmICh0YXJnZXQudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnYScgfHwgdGFyZ2V0LnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ2J1dHRvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudHNKc29uWzBdWyckZWxfdGV4dCddID0gZ2V0RGlyZWN0QW5kTmVzdGVkU3BhblRleHQodGFyZ2V0KVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzSnNvblswXVsnJGVsX3RleHQnXSA9IGdldFNhZmVUZXh0KHRhcmdldClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChocmVmKSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudHNKc29uWzBdWydhdHRyX19ocmVmJ10gPSBocmVmXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChleHBsaWNpdE5vQ2FwdHVyZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBwcm9wcyA9IF9leHRlbmQoXG4gICAgICAgICAgICAgICAgdGhpcy5fZ2V0RGVmYXVsdFByb3BlcnRpZXMoZS50eXBlKSxcbiAgICAgICAgICAgICAgICBpbnN0YW5jZS5lbGVtZW50c0NoYWluQXNTdHJpbmdcbiAgICAgICAgICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICRlbGVtZW50c19jaGFpbjogZ2V0RWxlbWVudHNDaGFpblN0cmluZyhlbGVtZW50c0pzb24pLFxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICRlbGVtZW50czogZWxlbWVudHNKc29uLFxuICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZWxlbWVudHNKc29uWzBdPy5bJyRlbF90ZXh0J10gPyB7ICRlbF90ZXh0OiBlbGVtZW50c0pzb25bMF0/LlsnJGVsX3RleHQnXSB9IDoge30sXG4gICAgICAgICAgICAgICAgdGhpcy5fZ2V0Q3VzdG9tUHJvcGVydGllcyh0YXJnZXRFbGVtZW50TGlzdCksXG4gICAgICAgICAgICAgICAgYXV0b2NhcHR1cmVBdWdtZW50UHJvcGVydGllcyxcbiAgICAgICAgICAgICAgICBleHRyYVByb3BzIHx8IHt9XG4gICAgICAgICAgICApXG5cbiAgICAgICAgICAgIGlmIChldmVudE5hbWUgPT09IENPUFlfQVVUT0NBUFRVUkVfRVZFTlQpIHtcbiAgICAgICAgICAgICAgICAvLyB5b3UgY2FuJ3QgcmVhZCB0aGUgZGF0YSBmcm9tIHRoZSBjbGlwYm9hcmQgZXZlbnQsXG4gICAgICAgICAgICAgICAgLy8gYnV0IHlvdSBjYW4gZ3Vlc3MgdGhhdCB5b3UgY2FuIHJlYWQgaXQgZnJvbSB0aGUgd2luZG93J3MgY3VycmVudCBzZWxlY3Rpb25cbiAgICAgICAgICAgICAgICBjb25zdCBzZWxlY3RlZENvbnRlbnQgPSBtYWtlU2FmZVRleHQod2luZG93Py5nZXRTZWxlY3Rpb24oKT8udG9TdHJpbmcoKSlcbiAgICAgICAgICAgICAgICBjb25zdCBjbGlwVHlwZSA9IChlIGFzIENsaXBib2FyZEV2ZW50KS50eXBlIHx8ICdjbGlwYm9hcmQnXG4gICAgICAgICAgICAgICAgaWYgKCFzZWxlY3RlZENvbnRlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHByb3BzWyckc2VsZWN0ZWRfY29udGVudCddID0gc2VsZWN0ZWRDb250ZW50XG4gICAgICAgICAgICAgICAgcHJvcHNbJyRjb3B5X3R5cGUnXSA9IGNsaXBUeXBlXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGluc3RhbmNlLmNhcHR1cmUoZXZlbnROYW1lLCBwcm9wcylcbiAgICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLy8gb25seSByZWFzb24gaXMgdG8gc3R1YiBmb3IgdW5pdCB0ZXN0c1xuICAgIC8vIHNpbmNlIHlvdSBjYW4ndCBvdmVycmlkZSB3aW5kb3cubG9jYXRpb24gcHJvcHNcbiAgICBfbmF2aWdhdGU6IGZ1bmN0aW9uIChocmVmOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgaWYgKCF3aW5kb3cpIHtcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gaHJlZlxuICAgIH0sXG5cbiAgICBfYWRkRG9tRXZlbnRIYW5kbGVyczogZnVuY3Rpb24gKGluc3RhbmNlOiBQb3N0SG9nKTogdm9pZCB7XG4gICAgICAgIGlmICghd2luZG93IHx8ICFkb2N1bWVudCkge1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaGFuZGxlciA9IChlOiBFdmVudCkgPT4ge1xuICAgICAgICAgICAgZSA9IGUgfHwgd2luZG93Py5ldmVudFxuICAgICAgICAgICAgdGhpcy5fY2FwdHVyZUV2ZW50KGUsIGluc3RhbmNlKVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY29waWVkVGV4dEhhbmRsZXIgPSAoZTogRXZlbnQpID0+IHtcbiAgICAgICAgICAgIGUgPSBlIHx8IHdpbmRvdz8uZXZlbnRcbiAgICAgICAgICAgIHRoaXMuX2NhcHR1cmVFdmVudChlLCBpbnN0YW5jZSwgQ09QWV9BVVRPQ0FQVFVSRV9FVkVOVClcbiAgICAgICAgfVxuXG4gICAgICAgIF9yZWdpc3Rlcl9ldmVudChkb2N1bWVudCwgJ3N1Ym1pdCcsIGhhbmRsZXIsIGZhbHNlLCB0cnVlKVxuICAgICAgICBfcmVnaXN0ZXJfZXZlbnQoZG9jdW1lbnQsICdjaGFuZ2UnLCBoYW5kbGVyLCBmYWxzZSwgdHJ1ZSlcbiAgICAgICAgX3JlZ2lzdGVyX2V2ZW50KGRvY3VtZW50LCAnY2xpY2snLCBoYW5kbGVyLCBmYWxzZSwgdHJ1ZSlcblxuICAgICAgICBpZiAoX2lzT2JqZWN0KGluc3RhbmNlLmNvbmZpZy5hdXRvY2FwdHVyZSkgJiYgaW5zdGFuY2UuY29uZmlnLmF1dG9jYXB0dXJlLmNhcHR1cmVfY29waWVkX3RleHQpIHtcbiAgICAgICAgICAgIF9yZWdpc3Rlcl9ldmVudChkb2N1bWVudCwgJ2NvcHknLCBjb3BpZWRUZXh0SGFuZGxlciwgZmFsc2UsIHRydWUpXG4gICAgICAgICAgICBfcmVnaXN0ZXJfZXZlbnQoZG9jdW1lbnQsICdjdXQnLCBjb3BpZWRUZXh0SGFuZGxlciwgZmFsc2UsIHRydWUpXG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgX2N1c3RvbVByb3BlcnRpZXM6IFtdIGFzIEF1dG9DYXB0dXJlQ3VzdG9tUHJvcGVydHlbXSxcbiAgICByYWdlY2xpY2tzOiBudWxsIGFzIFJhZ2VDbGljayB8IG51bGwsXG4gICAgY29uZmlnOiB1bmRlZmluZWQgYXMgQXV0b2NhcHR1cmVDb25maWcgfCB1bmRlZmluZWQsXG5cbiAgICBpbml0OiBmdW5jdGlvbiAoaW5zdGFuY2U6IFBvc3RIb2cpOiB2b2lkIHtcbiAgICAgICAgaWYgKCFfaXNCb29sZWFuKGluc3RhbmNlLl9fYXV0b2NhcHR1cmUpKSB7XG4gICAgICAgICAgICB0aGlzLmNvbmZpZyA9IGluc3RhbmNlLl9fYXV0b2NhcHR1cmVcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHByZWNvbXBpbGUgdGhlIHJlZ2V4XG4gICAgICAgIGlmICh0aGlzLmNvbmZpZz8udXJsX2FsbG93bGlzdCkge1xuICAgICAgICAgICAgdGhpcy5jb25maWcudXJsX2FsbG93bGlzdCA9IHRoaXMuY29uZmlnLnVybF9hbGxvd2xpc3QubWFwKCh1cmwpID0+IG5ldyBSZWdFeHAodXJsKSlcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucmFnZWNsaWNrcyA9IG5ldyBSYWdlQ2xpY2soaW5zdGFuY2UuY29uZmlnLnJhZ2VjbGljaylcbiAgICB9LFxuXG4gICAgYWZ0ZXJEZWNpZGVSZXNwb25zZTogZnVuY3Rpb24gKHJlc3BvbnNlOiBEZWNpZGVSZXNwb25zZSwgaW5zdGFuY2U6IFBvc3RIb2cpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgdG9rZW4gPSBpbnN0YW5jZS5jb25maWcudG9rZW5cbiAgICAgICAgaWYgKHRoaXMuX2luaXRpYWxpemVkVG9rZW5zLmluZGV4T2YodG9rZW4pID4gLTEpIHtcbiAgICAgICAgICAgIGxvZ2dlci5pbmZvKCdhdXRvY2FwdHVyZSBhbHJlYWR5IGluaXRpYWxpemVkIGZvciB0b2tlbiBcIicgKyB0b2tlbiArICdcIicpXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpbnN0YW5jZS5wZXJzaXN0ZW5jZSkge1xuICAgICAgICAgICAgaW5zdGFuY2UucGVyc2lzdGVuY2UucmVnaXN0ZXIoe1xuICAgICAgICAgICAgICAgIFtBVVRPQ0FQVFVSRV9ESVNBQkxFRF9TRVJWRVJfU0lERV06ICEhcmVzcG9uc2VbJ2F1dG9jYXB0dXJlX29wdF9vdXQnXSxcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgLy8gc3RvcmUgdGhpcyBpbi1tZW1vcnkgaW5jYXNlIHBlcnNpc3RlbmNlIGlzIGRpc2FibGVkXG4gICAgICAgIHRoaXMuX2lzRGlzYWJsZWRTZXJ2ZXJTaWRlID0gISFyZXNwb25zZVsnYXV0b2NhcHR1cmVfb3B0X291dCddXG5cbiAgICAgICAgdGhpcy5fc2V0SXNBdXRvY2FwdHVyZUVuYWJsZWQoaW5zdGFuY2UpXG5cbiAgICAgICAgdGhpcy5faW5pdGlhbGl6ZWRUb2tlbnMucHVzaCh0b2tlbilcblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICByZXNwb25zZSAmJlxuICAgICAgICAgICAgcmVzcG9uc2VbJ2NvbmZpZyddICYmXG4gICAgICAgICAgICByZXNwb25zZVsnY29uZmlnJ11bJ2VuYWJsZV9jb2xsZWN0X2V2ZXJ5dGhpbmcnXSAmJlxuICAgICAgICAgICAgdGhpcy5faXNBdXRvY2FwdHVyZUVuYWJsZWRcbiAgICAgICAgKSB7XG4gICAgICAgICAgICAvLyBUT0RPOiBkZWxldGUgY3VzdG9tX3Byb3BlcnRpZXMgYWZ0ZXIgY2hhbmdlbGVzcyB0eXBlc2NyaXB0IHJlZmFjdG9yXG4gICAgICAgICAgICBpZiAocmVzcG9uc2VbJ2N1c3RvbV9wcm9wZXJ0aWVzJ10pIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9jdXN0b21Qcm9wZXJ0aWVzID0gcmVzcG9uc2VbJ2N1c3RvbV9wcm9wZXJ0aWVzJ11cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX2FkZERvbUV2ZW50SGFuZGxlcnMoaW5zdGFuY2UpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpbnN0YW5jZVsnX19hdXRvY2FwdHVyZSddID0gZmFsc2VcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICAvLyB0aGlzIGlzIGEgbWVjaGFuaXNtIHRvIHJhbXAgdXAgQ0Ugd2l0aCBubyBzZXJ2ZXItc2lkZSBpbnRlcmFjdGlvbi5cbiAgICAvLyB3aGVuIENFIGlzIGFjdGl2ZSwgZXZlcnkgcGFnZSBsb2FkIHJlc3VsdHMgaW4gYSBkZWNpZGUgcmVxdWVzdC4gd2VcbiAgICAvLyBuZWVkIHRvIGdlbnRseSByYW1wIHRoaXMgdXAsIHNvIHdlIGRvbid0IG92ZXJsb2FkIGRlY2lkZS4gdGhpcyBkZWNpZGVzXG4gICAgLy8gZGV0ZXJtaW5pc3RpY2FsbHkgaWYgQ0UgaXMgZW5hYmxlZCBmb3IgdGhpcyBwcm9qZWN0IGJ5IG1vZGRpbmcgdGhlIGNoYXJcbiAgICAvLyB2YWx1ZSBvZiB0aGUgcHJvamVjdCB0b2tlbi5cbiAgICBlbmFibGVkRm9yUHJvamVjdDogZnVuY3Rpb24gKFxuICAgICAgICB0b2tlbjogc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZCxcbiAgICAgICAgbnVtQnVja2V0czogbnVtYmVyLFxuICAgICAgICBudW1FbmFibGVkQnVja2V0czogbnVtYmVyXG4gICAgKTogYm9vbGVhbiB7XG4gICAgICAgIGlmICghdG9rZW4pIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgbnVtQnVja2V0cyA9ICFfaXNVbmRlZmluZWQobnVtQnVja2V0cykgPyBudW1CdWNrZXRzIDogMTBcbiAgICAgICAgbnVtRW5hYmxlZEJ1Y2tldHMgPSAhX2lzVW5kZWZpbmVkKG51bUVuYWJsZWRCdWNrZXRzKSA/IG51bUVuYWJsZWRCdWNrZXRzIDogMTBcbiAgICAgICAgbGV0IGNoYXJDb2RlU3VtID0gMFxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRva2VuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjaGFyQ29kZVN1bSArPSB0b2tlbi5jaGFyQ29kZUF0KGkpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNoYXJDb2RlU3VtICUgbnVtQnVja2V0cyA8IG51bUVuYWJsZWRCdWNrZXRzXG4gICAgfSxcblxuICAgIGlzQnJvd3NlclN1cHBvcnRlZDogZnVuY3Rpb24gKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gX2lzRnVuY3Rpb24oZG9jdW1lbnQ/LnF1ZXJ5U2VsZWN0b3JBbGwpXG4gICAgfSxcbn1cblxuX2JpbmRfaW5zdGFuY2VfbWV0aG9kcyhhdXRvY2FwdHVyZSlcbl9zYWZld3JhcF9pbnN0YW5jZV9tZXRob2RzKGF1dG9jYXB0dXJlKVxuXG5leHBvcnQgeyBhdXRvY2FwdHVyZSB9XG4iLCAiaW1wb3J0IHsgX2Jhc2U2NEVuY29kZSwgX2VudHJpZXMsIF9leHRlbmQgfSBmcm9tICcuL3V0aWxzJ1xuaW1wb3J0IHsgUG9zdEhvZyB9IGZyb20gJy4vcG9zdGhvZy1jb3JlJ1xuaW1wb3J0IHtcbiAgICBEZWNpZGVSZXNwb25zZSxcbiAgICBGZWF0dXJlRmxhZ3NDYWxsYmFjayxcbiAgICBFYXJseUFjY2Vzc0ZlYXR1cmVDYWxsYmFjayxcbiAgICBFYXJseUFjY2Vzc0ZlYXR1cmVSZXNwb25zZSxcbiAgICBQcm9wZXJ0aWVzLFxuICAgIEpzb25UeXBlLFxufSBmcm9tICcuL3R5cGVzJ1xuaW1wb3J0IHsgUG9zdEhvZ1BlcnNpc3RlbmNlIH0gZnJvbSAnLi9wb3N0aG9nLXBlcnNpc3RlbmNlJ1xuXG5pbXBvcnQge1xuICAgIFBFUlNJU1RFTkNFX0VBUkxZX0FDQ0VTU19GRUFUVVJFUyxcbiAgICBFTkFCTEVEX0ZFQVRVUkVfRkxBR1MsXG4gICAgU1RPUkVEX0dST1VQX1BST1BFUlRJRVNfS0VZLFxuICAgIFNUT1JFRF9QRVJTT05fUFJPUEVSVElFU19LRVksXG4gICAgRkxBR19DQUxMX1JFUE9SVEVELFxufSBmcm9tICcuL2NvbnN0YW50cydcblxuaW1wb3J0IHsgX2lzQXJyYXkgfSBmcm9tICcuL3V0aWxzL3R5cGUtdXRpbHMnXG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tICcuL3V0aWxzL2xvZ2dlcidcblxuY29uc3QgUEVSU0lTVEVOQ0VfQUNUSVZFX0ZFQVRVUkVfRkxBR1MgPSAnJGFjdGl2ZV9mZWF0dXJlX2ZsYWdzJ1xuY29uc3QgUEVSU0lTVEVOQ0VfT1ZFUlJJREVfRkVBVFVSRV9GTEFHUyA9ICckb3ZlcnJpZGVfZmVhdHVyZV9mbGFncydcbmNvbnN0IFBFUlNJU1RFTkNFX0ZFQVRVUkVfRkxBR19QQVlMT0FEUyA9ICckZmVhdHVyZV9mbGFnX3BheWxvYWRzJ1xuXG5leHBvcnQgY29uc3QgZmlsdGVyQWN0aXZlRmVhdHVyZUZsYWdzID0gKGZlYXR1cmVGbGFncz86IFJlY29yZDxzdHJpbmcsIHN0cmluZyB8IGJvb2xlYW4+KSA9PiB7XG4gICAgY29uc3QgYWN0aXZlRmVhdHVyZUZsYWdzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmcgfCBib29sZWFuPiA9IHt9XG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgX2VudHJpZXMoZmVhdHVyZUZsYWdzIHx8IHt9KSkge1xuICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgIGFjdGl2ZUZlYXR1cmVGbGFnc1trZXldID0gdmFsdWVcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYWN0aXZlRmVhdHVyZUZsYWdzXG59XG5cbmV4cG9ydCBjb25zdCBwYXJzZUZlYXR1cmVGbGFnRGVjaWRlUmVzcG9uc2UgPSAoXG4gICAgcmVzcG9uc2U6IFBhcnRpYWw8RGVjaWRlUmVzcG9uc2U+LFxuICAgIHBlcnNpc3RlbmNlOiBQb3N0SG9nUGVyc2lzdGVuY2UsXG4gICAgY3VycmVudEZsYWdzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmcgfCBib29sZWFuPiA9IHt9LFxuICAgIGN1cnJlbnRGbGFnUGF5bG9hZHM6IFJlY29yZDxzdHJpbmcsIEpzb25UeXBlPiA9IHt9XG4pID0+IHtcbiAgICBjb25zdCBmbGFncyA9IHJlc3BvbnNlWydmZWF0dXJlRmxhZ3MnXVxuICAgIGNvbnN0IGZsYWdQYXlsb2FkcyA9IHJlc3BvbnNlWydmZWF0dXJlRmxhZ1BheWxvYWRzJ11cbiAgICBpZiAoZmxhZ3MpIHtcbiAgICAgICAgLy8gdXNpbmcgdGhlIHYxIGFwaVxuICAgICAgICBpZiAoX2lzQXJyYXkoZmxhZ3MpKSB7XG4gICAgICAgICAgICBjb25zdCAkZW5hYmxlZF9mZWF0dXJlX2ZsYWdzOiBSZWNvcmQ8c3RyaW5nLCBib29sZWFuPiA9IHt9XG4gICAgICAgICAgICBpZiAoZmxhZ3MpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZsYWdzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICRlbmFibGVkX2ZlYXR1cmVfZmxhZ3NbZmxhZ3NbaV1dID0gdHJ1ZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBlcnNpc3RlbmNlICYmXG4gICAgICAgICAgICAgICAgcGVyc2lzdGVuY2UucmVnaXN0ZXIoe1xuICAgICAgICAgICAgICAgICAgICBbUEVSU0lTVEVOQ0VfQUNUSVZFX0ZFQVRVUkVfRkxBR1NdOiBmbGFncyxcbiAgICAgICAgICAgICAgICAgICAgW0VOQUJMRURfRkVBVFVSRV9GTEFHU106ICRlbmFibGVkX2ZlYXR1cmVfZmxhZ3MsXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIHVzaW5nIHRoZSB2MisgYXBpXG4gICAgICAgICAgICBsZXQgbmV3RmVhdHVyZUZsYWdzID0gZmxhZ3NcbiAgICAgICAgICAgIGxldCBuZXdGZWF0dXJlRmxhZ1BheWxvYWRzID0gZmxhZ1BheWxvYWRzXG4gICAgICAgICAgICBpZiAocmVzcG9uc2UuZXJyb3JzV2hpbGVDb21wdXRpbmdGbGFncykge1xuICAgICAgICAgICAgICAgIC8vIGlmIG5vdCBhbGwgZmxhZ3Mgd2VyZSBjb21wdXRlZCwgd2UgdXBzZXJ0IGZsYWdzIGluc3RlYWQgb2YgcmVwbGFjaW5nIHRoZW1cbiAgICAgICAgICAgICAgICBuZXdGZWF0dXJlRmxhZ3MgPSB7IC4uLmN1cnJlbnRGbGFncywgLi4ubmV3RmVhdHVyZUZsYWdzIH1cbiAgICAgICAgICAgICAgICBuZXdGZWF0dXJlRmxhZ1BheWxvYWRzID0geyAuLi5jdXJyZW50RmxhZ1BheWxvYWRzLCAuLi5uZXdGZWF0dXJlRmxhZ1BheWxvYWRzIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBlcnNpc3RlbmNlICYmXG4gICAgICAgICAgICAgICAgcGVyc2lzdGVuY2UucmVnaXN0ZXIoe1xuICAgICAgICAgICAgICAgICAgICBbUEVSU0lTVEVOQ0VfQUNUSVZFX0ZFQVRVUkVfRkxBR1NdOiBPYmplY3Qua2V5cyhmaWx0ZXJBY3RpdmVGZWF0dXJlRmxhZ3MobmV3RmVhdHVyZUZsYWdzKSksXG4gICAgICAgICAgICAgICAgICAgIFtFTkFCTEVEX0ZFQVRVUkVfRkxBR1NdOiBuZXdGZWF0dXJlRmxhZ3MgfHwge30sXG4gICAgICAgICAgICAgICAgICAgIFtQRVJTSVNURU5DRV9GRUFUVVJFX0ZMQUdfUEFZTE9BRFNdOiBuZXdGZWF0dXJlRmxhZ1BheWxvYWRzIHx8IHt9LFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBQb3N0SG9nRmVhdHVyZUZsYWdzIHtcbiAgICBpbnN0YW5jZTogUG9zdEhvZ1xuICAgIF9vdmVycmlkZV93YXJuaW5nOiBib29sZWFuXG4gICAgZmVhdHVyZUZsYWdFdmVudEhhbmRsZXJzOiBGZWF0dXJlRmxhZ3NDYWxsYmFja1tdXG4gICAgcmVsb2FkRmVhdHVyZUZsYWdzUXVldWVkOiBib29sZWFuXG4gICAgcmVsb2FkRmVhdHVyZUZsYWdzSW5BY3Rpb246IGJvb2xlYW5cbiAgICAkYW5vbl9kaXN0aW5jdF9pZDogc3RyaW5nIHwgdW5kZWZpbmVkXG5cbiAgICBjb25zdHJ1Y3RvcihpbnN0YW5jZTogUG9zdEhvZykge1xuICAgICAgICB0aGlzLmluc3RhbmNlID0gaW5zdGFuY2VcbiAgICAgICAgdGhpcy5fb3ZlcnJpZGVfd2FybmluZyA9IGZhbHNlXG4gICAgICAgIHRoaXMuZmVhdHVyZUZsYWdFdmVudEhhbmRsZXJzID0gW11cblxuICAgICAgICB0aGlzLnJlbG9hZEZlYXR1cmVGbGFnc1F1ZXVlZCA9IGZhbHNlXG4gICAgICAgIHRoaXMucmVsb2FkRmVhdHVyZUZsYWdzSW5BY3Rpb24gPSBmYWxzZVxuICAgIH1cblxuICAgIGdldEZsYWdzKCk6IHN0cmluZ1tdIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHRoaXMuZ2V0RmxhZ1ZhcmlhbnRzKCkpXG4gICAgfVxuXG4gICAgZ2V0RmxhZ1ZhcmlhbnRzKCk6IFJlY29yZDxzdHJpbmcsIHN0cmluZyB8IGJvb2xlYW4+IHtcbiAgICAgICAgY29uc3QgZW5hYmxlZEZsYWdzID0gdGhpcy5pbnN0YW5jZS5nZXRfcHJvcGVydHkoRU5BQkxFRF9GRUFUVVJFX0ZMQUdTKVxuICAgICAgICBjb25zdCBvdmVycmlkZGVuRmxhZ3MgPSB0aGlzLmluc3RhbmNlLmdldF9wcm9wZXJ0eShQRVJTSVNURU5DRV9PVkVSUklERV9GRUFUVVJFX0ZMQUdTKVxuICAgICAgICBpZiAoIW92ZXJyaWRkZW5GbGFncykge1xuICAgICAgICAgICAgcmV0dXJuIGVuYWJsZWRGbGFncyB8fCB7fVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZmluYWxGbGFncyA9IF9leHRlbmQoe30sIGVuYWJsZWRGbGFncylcbiAgICAgICAgY29uc3Qgb3ZlcnJpZGRlbktleXMgPSBPYmplY3Qua2V5cyhvdmVycmlkZGVuRmxhZ3MpXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb3ZlcnJpZGRlbktleXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChvdmVycmlkZGVuRmxhZ3Nbb3ZlcnJpZGRlbktleXNbaV1dID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBmaW5hbEZsYWdzW292ZXJyaWRkZW5LZXlzW2ldXVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBmaW5hbEZsYWdzW292ZXJyaWRkZW5LZXlzW2ldXSA9IG92ZXJyaWRkZW5GbGFnc1tvdmVycmlkZGVuS2V5c1tpXV1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuX292ZXJyaWRlX3dhcm5pbmcpIHtcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKCcgT3ZlcnJpZGluZyBmZWF0dXJlIGZsYWdzIScsIHtcbiAgICAgICAgICAgICAgICBlbmFibGVkRmxhZ3MsXG4gICAgICAgICAgICAgICAgb3ZlcnJpZGRlbkZsYWdzLFxuICAgICAgICAgICAgICAgIGZpbmFsRmxhZ3MsXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgdGhpcy5fb3ZlcnJpZGVfd2FybmluZyA9IHRydWVcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmluYWxGbGFnc1xuICAgIH1cblxuICAgIGdldEZsYWdQYXlsb2FkcygpOiBSZWNvcmQ8c3RyaW5nLCBKc29uVHlwZT4ge1xuICAgICAgICBjb25zdCBmbGFnUGF5bG9hZHMgPSB0aGlzLmluc3RhbmNlLmdldF9wcm9wZXJ0eShQRVJTSVNURU5DRV9GRUFUVVJFX0ZMQUdfUEFZTE9BRFMpXG4gICAgICAgIHJldHVybiBmbGFnUGF5bG9hZHMgfHwge31cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZWxvYWRzIGZlYXR1cmUgZmxhZ3MgYXN5bmNocm9ub3VzbHkuXG4gICAgICpcbiAgICAgKiBDb25zdHJhaW50czpcbiAgICAgKlxuICAgICAqIDEuIEF2b2lkIHBhcmFsbGVsIHJlcXVlc3RzXG4gICAgICogMi4gRGVsYXkgYSBmZXcgbWlsbGlzZWNvbmRzIGFmdGVyIGVhY2ggcmVsb2FkRmVhdHVyZUZsYWdzIGNhbGwgdG8gYmF0Y2ggc3Vic2VxdWVudCBjaGFuZ2VzIHRvZ2V0aGVyXG4gICAgICogMy4gRG9uJ3QgY2FsbCB0aGlzIGR1cmluZyBpbml0aWFsIGxvYWQgKGFzIC9kZWNpZGUgd2lsbCBiZSBjYWxsZWQgaW5zdGVhZCksIHNlZSBwb3N0aG9nLWNvcmUuanNcbiAgICAgKi9cbiAgICByZWxvYWRGZWF0dXJlRmxhZ3MoKTogdm9pZCB7XG4gICAgICAgIGlmICghdGhpcy5yZWxvYWRGZWF0dXJlRmxhZ3NRdWV1ZWQpIHtcbiAgICAgICAgICAgIHRoaXMucmVsb2FkRmVhdHVyZUZsYWdzUXVldWVkID0gdHJ1ZVxuICAgICAgICAgICAgdGhpcy5fc3RhcnRSZWxvYWRUaW1lcigpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzZXRBbm9ueW1vdXNEaXN0aW5jdElkKGFub25fZGlzdGluY3RfaWQ6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICB0aGlzLiRhbm9uX2Rpc3RpbmN0X2lkID0gYW5vbl9kaXN0aW5jdF9pZFxuICAgIH1cblxuICAgIHNldFJlbG9hZGluZ1BhdXNlZChpc1BhdXNlZDogYm9vbGVhbik6IHZvaWQge1xuICAgICAgICB0aGlzLnJlbG9hZEZlYXR1cmVGbGFnc0luQWN0aW9uID0gaXNQYXVzZWRcbiAgICB9XG5cbiAgICByZXNldFJlcXVlc3RRdWV1ZSgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5yZWxvYWRGZWF0dXJlRmxhZ3NRdWV1ZWQgPSBmYWxzZVxuICAgIH1cblxuICAgIF9zdGFydFJlbG9hZFRpbWVyKCk6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy5yZWxvYWRGZWF0dXJlRmxhZ3NRdWV1ZWQgJiYgIXRoaXMucmVsb2FkRmVhdHVyZUZsYWdzSW5BY3Rpb24pIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5yZWxvYWRGZWF0dXJlRmxhZ3NJbkFjdGlvbiAmJiB0aGlzLnJlbG9hZEZlYXR1cmVGbGFnc1F1ZXVlZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbG9hZEZlYXR1cmVGbGFnc1F1ZXVlZCA9IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3JlbG9hZEZlYXR1cmVGbGFnc1JlcXVlc3QoKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIDUpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBfcmVsb2FkRmVhdHVyZUZsYWdzUmVxdWVzdCgpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMuaW5zdGFuY2UuY29uZmlnLmFkdmFuY2VkX2Rpc2FibGVfZmVhdHVyZV9mbGFncykge1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnNldFJlbG9hZGluZ1BhdXNlZCh0cnVlKVxuICAgICAgICBjb25zdCB0b2tlbiA9IHRoaXMuaW5zdGFuY2UuY29uZmlnLnRva2VuXG4gICAgICAgIGNvbnN0IHBlcnNvblByb3BlcnRpZXMgPSB0aGlzLmluc3RhbmNlLmdldF9wcm9wZXJ0eShTVE9SRURfUEVSU09OX1BST1BFUlRJRVNfS0VZKVxuICAgICAgICBjb25zdCBncm91cFByb3BlcnRpZXMgPSB0aGlzLmluc3RhbmNlLmdldF9wcm9wZXJ0eShTVE9SRURfR1JPVVBfUFJPUEVSVElFU19LRVkpXG4gICAgICAgIGNvbnN0IGpzb25fZGF0YSA9IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgIHRva2VuOiB0b2tlbixcbiAgICAgICAgICAgIGRpc3RpbmN0X2lkOiB0aGlzLmluc3RhbmNlLmdldF9kaXN0aW5jdF9pZCgpLFxuICAgICAgICAgICAgZ3JvdXBzOiB0aGlzLmluc3RhbmNlLmdldEdyb3VwcygpLFxuICAgICAgICAgICAgJGFub25fZGlzdGluY3RfaWQ6IHRoaXMuJGFub25fZGlzdGluY3RfaWQsXG4gICAgICAgICAgICBwZXJzb25fcHJvcGVydGllczogcGVyc29uUHJvcGVydGllcyxcbiAgICAgICAgICAgIGdyb3VwX3Byb3BlcnRpZXM6IGdyb3VwUHJvcGVydGllcyxcbiAgICAgICAgICAgIGRpc2FibGVfZmxhZ3M6IHRoaXMuaW5zdGFuY2UuY29uZmlnLmFkdmFuY2VkX2Rpc2FibGVfZmVhdHVyZV9mbGFncyB8fCB1bmRlZmluZWQsXG4gICAgICAgIH0pXG5cbiAgICAgICAgY29uc3QgZW5jb2RlZF9kYXRhID0gX2Jhc2U2NEVuY29kZShqc29uX2RhdGEpXG4gICAgICAgIHRoaXMuaW5zdGFuY2UuX3NlbmRfcmVxdWVzdChcbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2UucmVxdWVzdFJvdXRlci5lbmRwb2ludEZvcignYXBpJywgJy9kZWNpZGUvP3Y9MycpLFxuICAgICAgICAgICAgeyBkYXRhOiBlbmNvZGVkX2RhdGEgfSxcbiAgICAgICAgICAgIHsgbWV0aG9kOiAnUE9TVCcgfSxcbiAgICAgICAgICAgIChyZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIHJlc2V0IGFub25fZGlzdGluY3RfaWQgYWZ0ZXIgYXQgbGVhc3QgYSBzaW5nbGUgcmVxdWVzdCB3aXRoIGl0XG4gICAgICAgICAgICAgICAgLy8gbWFrZXMgaXQgdGhyb3VnaFxuICAgICAgICAgICAgICAgIHRoaXMuJGFub25fZGlzdGluY3RfaWQgPSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICB0aGlzLnJlY2VpdmVkRmVhdHVyZUZsYWdzKHJlc3BvbnNlIGFzIERlY2lkZVJlc3BvbnNlKVxuXG4gICAgICAgICAgICAgICAgLy8gOlRSSUNLWTogUmVsb2FkIC0gc3RhcnQgYW5vdGhlciByZXF1ZXN0IGlmIHF1ZXVlZCFcbiAgICAgICAgICAgICAgICB0aGlzLnNldFJlbG9hZGluZ1BhdXNlZChmYWxzZSlcbiAgICAgICAgICAgICAgICB0aGlzLl9zdGFydFJlbG9hZFRpbWVyKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgIH1cblxuICAgIC8qXG4gICAgICogR2V0IGZlYXR1cmUgZmxhZydzIHZhbHVlIGZvciB1c2VyLlxuICAgICAqXG4gICAgICogIyMjIFVzYWdlOlxuICAgICAqXG4gICAgICogICAgIGlmKHBvc3Rob2cuZ2V0RmVhdHVyZUZsYWcoJ215LWZsYWcnKSA9PT0gJ3NvbWUtdmFyaWFudCcpIHsgLy8gZG8gc29tZXRoaW5nIH1cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fFN0cmluZ30ga2V5IEtleSBvZiB0aGUgZmVhdHVyZSBmbGFnLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fFN0cmluZ30gb3B0aW9ucyAob3B0aW9uYWwpIElmIHtzZW5kX2V2ZW50OiBmYWxzZX0sIHdlIHdvbid0IHNlbmQgYW4gJGZlYXR1cmVfZmxhZ19jYWxsIGV2ZW50IHRvIFBvc3RIb2cuXG4gICAgICovXG4gICAgZ2V0RmVhdHVyZUZsYWcoa2V5OiBzdHJpbmcsIG9wdGlvbnM6IHsgc2VuZF9ldmVudD86IGJvb2xlYW4gfSA9IHt9KTogYm9vbGVhbiB8IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gICAgICAgIGlmICghdGhpcy5pbnN0YW5jZS5kZWNpZGVFbmRwb2ludFdhc0hpdCAmJiAhKHRoaXMuZ2V0RmxhZ3MoKSAmJiB0aGlzLmdldEZsYWdzKCkubGVuZ3RoID4gMCkpIHtcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKCdnZXRGZWF0dXJlRmxhZyBmb3Iga2V5IFwiJyArIGtleSArICdcIiBmYWlsZWQuIEZlYXR1cmUgZmxhZ3MgZGlkblxcJ3QgbG9hZCBpbiB0aW1lLicpXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkXG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZmxhZ1ZhbHVlID0gdGhpcy5nZXRGbGFnVmFyaWFudHMoKVtrZXldXG4gICAgICAgIGNvbnN0IGZsYWdSZXBvcnRWYWx1ZSA9IGAke2ZsYWdWYWx1ZX1gXG4gICAgICAgIGNvbnN0IGZsYWdDYWxsUmVwb3J0ZWQ6IFJlY29yZDxzdHJpbmcsIHN0cmluZ1tdPiA9IHRoaXMuaW5zdGFuY2UuZ2V0X3Byb3BlcnR5KEZMQUdfQ0FMTF9SRVBPUlRFRCkgfHwge31cblxuICAgICAgICBpZiAob3B0aW9ucy5zZW5kX2V2ZW50IHx8ICEoJ3NlbmRfZXZlbnQnIGluIG9wdGlvbnMpKSB7XG4gICAgICAgICAgICBpZiAoIShrZXkgaW4gZmxhZ0NhbGxSZXBvcnRlZCkgfHwgIWZsYWdDYWxsUmVwb3J0ZWRba2V5XS5pbmNsdWRlcyhmbGFnUmVwb3J0VmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgaWYgKF9pc0FycmF5KGZsYWdDYWxsUmVwb3J0ZWRba2V5XSkpIHtcbiAgICAgICAgICAgICAgICAgICAgZmxhZ0NhbGxSZXBvcnRlZFtrZXldLnB1c2goZmxhZ1JlcG9ydFZhbHVlKVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGZsYWdDYWxsUmVwb3J0ZWRba2V5XSA9IFtmbGFnUmVwb3J0VmFsdWVdXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuaW5zdGFuY2UucGVyc2lzdGVuY2U/LnJlZ2lzdGVyKHsgW0ZMQUdfQ0FMTF9SRVBPUlRFRF06IGZsYWdDYWxsUmVwb3J0ZWQgfSlcblxuICAgICAgICAgICAgICAgIHRoaXMuaW5zdGFuY2UuY2FwdHVyZSgnJGZlYXR1cmVfZmxhZ19jYWxsZWQnLCB7ICRmZWF0dXJlX2ZsYWc6IGtleSwgJGZlYXR1cmVfZmxhZ19yZXNwb25zZTogZmxhZ1ZhbHVlIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZsYWdWYWx1ZVxuICAgIH1cblxuICAgIGdldEZlYXR1cmVGbGFnUGF5bG9hZChrZXk6IHN0cmluZyk6IEpzb25UeXBlIHtcbiAgICAgICAgY29uc3QgcGF5bG9hZHMgPSB0aGlzLmdldEZsYWdQYXlsb2FkcygpXG4gICAgICAgIHJldHVybiBwYXlsb2Fkc1trZXldXG4gICAgfVxuXG4gICAgLypcbiAgICAgKiBTZWUgaWYgZmVhdHVyZSBmbGFnIGlzIGVuYWJsZWQgZm9yIHVzZXIuXG4gICAgICpcbiAgICAgKiAjIyMgVXNhZ2U6XG4gICAgICpcbiAgICAgKiAgICAgaWYocG9zdGhvZy5pc0ZlYXR1cmVFbmFibGVkKCdiZXRhLWZlYXR1cmUnKSkgeyAvLyBkbyBzb21ldGhpbmcgfVxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R8U3RyaW5nfSBrZXkgS2V5IG9mIHRoZSBmZWF0dXJlIGZsYWcuXG4gICAgICogQHBhcmFtIHtPYmplY3R8U3RyaW5nfSBvcHRpb25zIChvcHRpb25hbCkgSWYge3NlbmRfZXZlbnQ6IGZhbHNlfSwgd2Ugd29uJ3Qgc2VuZCBhbiAkZmVhdHVyZV9mbGFnX2NhbGwgZXZlbnQgdG8gUG9zdEhvZy5cbiAgICAgKi9cbiAgICBpc0ZlYXR1cmVFbmFibGVkKGtleTogc3RyaW5nLCBvcHRpb25zOiB7IHNlbmRfZXZlbnQ/OiBib29sZWFuIH0gPSB7fSk6IGJvb2xlYW4gfCB1bmRlZmluZWQge1xuICAgICAgICBpZiAoIXRoaXMuaW5zdGFuY2UuZGVjaWRlRW5kcG9pbnRXYXNIaXQgJiYgISh0aGlzLmdldEZsYWdzKCkgJiYgdGhpcy5nZXRGbGFncygpLmxlbmd0aCA+IDApKSB7XG4gICAgICAgICAgICBsb2dnZXIud2FybignaXNGZWF0dXJlRW5hYmxlZCBmb3Iga2V5IFwiJyArIGtleSArICdcIiBmYWlsZWQuIEZlYXR1cmUgZmxhZ3MgZGlkblxcJ3QgbG9hZCBpbiB0aW1lLicpXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICEhdGhpcy5nZXRGZWF0dXJlRmxhZyhrZXksIG9wdGlvbnMpXG4gICAgfVxuXG4gICAgYWRkRmVhdHVyZUZsYWdzSGFuZGxlcihoYW5kbGVyOiBGZWF0dXJlRmxhZ3NDYWxsYmFjayk6IHZvaWQge1xuICAgICAgICB0aGlzLmZlYXR1cmVGbGFnRXZlbnRIYW5kbGVycy5wdXNoKGhhbmRsZXIpXG4gICAgfVxuXG4gICAgcmVtb3ZlRmVhdHVyZUZsYWdzSGFuZGxlcihoYW5kbGVyOiBGZWF0dXJlRmxhZ3NDYWxsYmFjayk6IHZvaWQge1xuICAgICAgICB0aGlzLmZlYXR1cmVGbGFnRXZlbnRIYW5kbGVycyA9IHRoaXMuZmVhdHVyZUZsYWdFdmVudEhhbmRsZXJzLmZpbHRlcigoaCkgPT4gaCAhPT0gaGFuZGxlcilcbiAgICB9XG5cbiAgICByZWNlaXZlZEZlYXR1cmVGbGFncyhyZXNwb25zZTogUGFydGlhbDxEZWNpZGVSZXNwb25zZT4pOiB2b2lkIHtcbiAgICAgICAgaWYgKCF0aGlzLmluc3RhbmNlLnBlcnNpc3RlbmNlKSB7XG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmluc3RhbmNlLmRlY2lkZUVuZHBvaW50V2FzSGl0ID0gdHJ1ZVxuICAgICAgICBjb25zdCBjdXJyZW50RmxhZ3MgPSB0aGlzLmdldEZsYWdWYXJpYW50cygpXG4gICAgICAgIGNvbnN0IGN1cnJlbnRGbGFnUGF5bG9hZHMgPSB0aGlzLmdldEZsYWdQYXlsb2FkcygpXG4gICAgICAgIHBhcnNlRmVhdHVyZUZsYWdEZWNpZGVSZXNwb25zZShyZXNwb25zZSwgdGhpcy5pbnN0YW5jZS5wZXJzaXN0ZW5jZSwgY3VycmVudEZsYWdzLCBjdXJyZW50RmxhZ1BheWxvYWRzKVxuICAgICAgICB0aGlzLl9maXJlRmVhdHVyZUZsYWdzQ2FsbGJhY2tzKClcbiAgICB9XG5cbiAgICAvKlxuICAgICAqIE92ZXJyaWRlIGZlYXR1cmUgZmxhZ3MgZm9yIGRlYnVnZ2luZy5cbiAgICAgKlxuICAgICAqICMjIyBVc2FnZTpcbiAgICAgKlxuICAgICAqICAgICAtIHBvc3Rob2cuZmVhdHVyZV9mbGFncy5vdmVycmlkZShmYWxzZSlcbiAgICAgKiAgICAgLSBwb3N0aG9nLmZlYXR1cmVfZmxhZ3Mub3ZlcnJpZGUoWydiZXRhLWZlYXR1cmUnXSlcbiAgICAgKiAgICAgLSBwb3N0aG9nLmZlYXR1cmVfZmxhZ3Mub3ZlcnJpZGUoeydiZXRhLWZlYXR1cmUnOiAndmFyaWFudCcsICdvdGhlci1mZWF0dXJlJzogVHJ1ZX0pXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdHxBcnJheXxTdHJpbmd9IGZsYWdzIEZsYWdzIHRvIG92ZXJyaWRlIHdpdGguXG4gICAgICovXG4gICAgb3ZlcnJpZGUoZmxhZ3M6IGJvb2xlYW4gfCBzdHJpbmdbXSB8IFJlY29yZDxzdHJpbmcsIHN0cmluZyB8IGJvb2xlYW4+KTogdm9pZCB7XG4gICAgICAgIGlmICghdGhpcy5pbnN0YW5jZS5fX2xvYWRlZCB8fCAhdGhpcy5pbnN0YW5jZS5wZXJzaXN0ZW5jZSkge1xuICAgICAgICAgICAgcmV0dXJuIGxvZ2dlci51bmluaXRpYWxpemVkV2FybmluZygncG9zdGhvZy5mZWF0dXJlX2ZsYWdzLm92ZXJyaWRlJylcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX292ZXJyaWRlX3dhcm5pbmcgPSBmYWxzZVxuXG4gICAgICAgIGlmIChmbGFncyA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2UucGVyc2lzdGVuY2UudW5yZWdpc3RlcihQRVJTSVNURU5DRV9PVkVSUklERV9GRUFUVVJFX0ZMQUdTKVxuICAgICAgICB9IGVsc2UgaWYgKF9pc0FycmF5KGZsYWdzKSkge1xuICAgICAgICAgICAgY29uc3QgZmxhZ3NPYmo6IFJlY29yZDxzdHJpbmcsIHN0cmluZyB8IGJvb2xlYW4+ID0ge31cbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZmxhZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBmbGFnc09ialtmbGFnc1tpXV0gPSB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmluc3RhbmNlLnBlcnNpc3RlbmNlLnJlZ2lzdGVyKHsgW1BFUlNJU1RFTkNFX09WRVJSSURFX0ZFQVRVUkVfRkxBR1NdOiBmbGFnc09iaiB9KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZS5wZXJzaXN0ZW5jZS5yZWdpc3Rlcih7IFtQRVJTSVNURU5DRV9PVkVSUklERV9GRUFUVVJFX0ZMQUdTXTogZmxhZ3MgfSlcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKlxuICAgICAqIFJlZ2lzdGVyIGFuIGV2ZW50IGxpc3RlbmVyIHRoYXQgcnVucyB3aGVuIGZlYXR1cmUgZmxhZ3MgYmVjb21lIGF2YWlsYWJsZSBvciB3aGVuIHRoZXkgY2hhbmdlLlxuICAgICAqIElmIHRoZXJlIGFyZSBmbGFncywgdGhlIGxpc3RlbmVyIGlzIGNhbGxlZCBpbW1lZGlhdGVseSBpbiBhZGRpdGlvbiB0byBiZWluZyBjYWxsZWQgb24gZnV0dXJlIGNoYW5nZXMuXG4gICAgICpcbiAgICAgKiAjIyMgVXNhZ2U6XG4gICAgICpcbiAgICAgKiAgICAgcG9zdGhvZy5vbkZlYXR1cmVGbGFncyhmdW5jdGlvbihmZWF0dXJlRmxhZ3MpIHsgLy8gZG8gc29tZXRoaW5nIH0pXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2FsbGJhY2tdIFRoZSBjYWxsYmFjayBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZCBvbmNlIHRoZSBmZWF0dXJlIGZsYWdzIGFyZSByZWFkeSBvciB3aGVuIHRoZXkgYXJlIHVwZGF0ZWQuXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJdCdsbCByZXR1cm4gYSBsaXN0IG9mIGZlYXR1cmUgZmxhZ3MgZW5hYmxlZCBmb3IgdGhlIHVzZXIuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBBIGZ1bmN0aW9uIHRoYXQgY2FuIGJlIGNhbGxlZCB0byB1bnN1YnNjcmliZSB0aGUgbGlzdGVuZXIuIFVzZWQgYnkgdXNlRWZmZWN0IHdoZW4gdGhlIGNvbXBvbmVudCB1bm1vdW50cy5cbiAgICAgKi9cbiAgICBvbkZlYXR1cmVGbGFncyhjYWxsYmFjazogRmVhdHVyZUZsYWdzQ2FsbGJhY2spOiAoKSA9PiB2b2lkIHtcbiAgICAgICAgdGhpcy5hZGRGZWF0dXJlRmxhZ3NIYW5kbGVyKGNhbGxiYWNrKVxuICAgICAgICBpZiAodGhpcy5pbnN0YW5jZS5kZWNpZGVFbmRwb2ludFdhc0hpdCkge1xuICAgICAgICAgICAgY29uc3QgeyBmbGFncywgZmxhZ1ZhcmlhbnRzIH0gPSB0aGlzLl9wcmVwYXJlRmVhdHVyZUZsYWdzRm9yQ2FsbGJhY2tzKClcbiAgICAgICAgICAgIGNhbGxiYWNrKGZsYWdzLCBmbGFnVmFyaWFudHMpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICgpID0+IHRoaXMucmVtb3ZlRmVhdHVyZUZsYWdzSGFuZGxlcihjYWxsYmFjaylcbiAgICB9XG5cbiAgICB1cGRhdGVFYXJseUFjY2Vzc0ZlYXR1cmVFbnJvbGxtZW50KGtleTogc3RyaW5nLCBpc0Vucm9sbGVkOiBib29sZWFuKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGVucm9sbG1lbnRQZXJzb25Qcm9wID0ge1xuICAgICAgICAgICAgW2AkZmVhdHVyZV9lbnJvbGxtZW50LyR7a2V5fWBdOiBpc0Vucm9sbGVkLFxuICAgICAgICB9XG4gICAgICAgIHRoaXMuaW5zdGFuY2UuY2FwdHVyZSgnJGZlYXR1cmVfZW5yb2xsbWVudF91cGRhdGUnLCB7XG4gICAgICAgICAgICAkZmVhdHVyZV9mbGFnOiBrZXksXG4gICAgICAgICAgICAkZmVhdHVyZV9lbnJvbGxtZW50OiBpc0Vucm9sbGVkLFxuICAgICAgICAgICAgJHNldDogZW5yb2xsbWVudFBlcnNvblByb3AsXG4gICAgICAgIH0pXG4gICAgICAgIHRoaXMuc2V0UGVyc29uUHJvcGVydGllc0ZvckZsYWdzKGVucm9sbG1lbnRQZXJzb25Qcm9wLCBmYWxzZSlcblxuICAgICAgICBjb25zdCBuZXdGbGFncyA9IHsgLi4udGhpcy5nZXRGbGFnVmFyaWFudHMoKSwgW2tleV06IGlzRW5yb2xsZWQgfVxuICAgICAgICB0aGlzLmluc3RhbmNlLnBlcnNpc3RlbmNlPy5yZWdpc3Rlcih7XG4gICAgICAgICAgICBbUEVSU0lTVEVOQ0VfQUNUSVZFX0ZFQVRVUkVfRkxBR1NdOiBPYmplY3Qua2V5cyhmaWx0ZXJBY3RpdmVGZWF0dXJlRmxhZ3MobmV3RmxhZ3MpKSxcbiAgICAgICAgICAgIFtFTkFCTEVEX0ZFQVRVUkVfRkxBR1NdOiBuZXdGbGFncyxcbiAgICAgICAgfSlcbiAgICAgICAgdGhpcy5fZmlyZUZlYXR1cmVGbGFnc0NhbGxiYWNrcygpXG4gICAgfVxuXG4gICAgZ2V0RWFybHlBY2Nlc3NGZWF0dXJlcyhjYWxsYmFjazogRWFybHlBY2Nlc3NGZWF0dXJlQ2FsbGJhY2ssIGZvcmNlX3JlbG9hZCA9IGZhbHNlKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nX2Vhcmx5X2FjY2Vzc19mZWF0dXJlcyA9IHRoaXMuaW5zdGFuY2UuZ2V0X3Byb3BlcnR5KFBFUlNJU1RFTkNFX0VBUkxZX0FDQ0VTU19GRUFUVVJFUylcblxuICAgICAgICBpZiAoIWV4aXN0aW5nX2Vhcmx5X2FjY2Vzc19mZWF0dXJlcyB8fCBmb3JjZV9yZWxvYWQpIHtcbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2UuX3NlbmRfcmVxdWVzdChcbiAgICAgICAgICAgICAgICB0aGlzLmluc3RhbmNlLnJlcXVlc3RSb3V0ZXIuZW5kcG9pbnRGb3IoXG4gICAgICAgICAgICAgICAgICAgICdhcGknLFxuICAgICAgICAgICAgICAgICAgICBgL2FwaS9lYXJseV9hY2Nlc3NfZmVhdHVyZXMvP3Rva2VuPSR7dGhpcy5pbnN0YW5jZS5jb25maWcudG9rZW59YFxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAge30sXG4gICAgICAgICAgICAgICAgeyBtZXRob2Q6ICdHRVQnIH0sXG4gICAgICAgICAgICAgICAgKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVhcmx5QWNjZXNzRmVhdHVyZXMgPSAocmVzcG9uc2UgYXMgRWFybHlBY2Nlc3NGZWF0dXJlUmVzcG9uc2UpLmVhcmx5QWNjZXNzRmVhdHVyZXNcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnN0YW5jZS5wZXJzaXN0ZW5jZT8ucmVnaXN0ZXIoeyBbUEVSU0lTVEVOQ0VfRUFSTFlfQUNDRVNTX0ZFQVRVUkVTXTogZWFybHlBY2Nlc3NGZWF0dXJlcyB9KVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soZWFybHlBY2Nlc3NGZWF0dXJlcylcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soZXhpc3RpbmdfZWFybHlfYWNjZXNzX2ZlYXR1cmVzKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgX3ByZXBhcmVGZWF0dXJlRmxhZ3NGb3JDYWxsYmFja3MoKTogeyBmbGFnczogc3RyaW5nW107IGZsYWdWYXJpYW50czogUmVjb3JkPHN0cmluZywgc3RyaW5nIHwgYm9vbGVhbj4gfSB7XG4gICAgICAgIGNvbnN0IGZsYWdzID0gdGhpcy5nZXRGbGFncygpXG4gICAgICAgIGNvbnN0IGZsYWdWYXJpYW50cyA9IHRoaXMuZ2V0RmxhZ1ZhcmlhbnRzKClcblxuICAgICAgICAvLyBSZXR1cm4gdHJ1dGh5XG4gICAgICAgIGNvbnN0IHRydXRoeUZsYWdzID0gZmxhZ3MuZmlsdGVyKChmbGFnKSA9PiBmbGFnVmFyaWFudHNbZmxhZ10pXG4gICAgICAgIGNvbnN0IHRydXRoeUZsYWdWYXJpYW50cyA9IE9iamVjdC5rZXlzKGZsYWdWYXJpYW50cylcbiAgICAgICAgICAgIC5maWx0ZXIoKHZhcmlhbnRLZXkpID0+IGZsYWdWYXJpYW50c1t2YXJpYW50S2V5XSlcbiAgICAgICAgICAgIC5yZWR1Y2UoKHJlczogUmVjb3JkPHN0cmluZywgc3RyaW5nIHwgYm9vbGVhbj4sIGtleSkgPT4ge1xuICAgICAgICAgICAgICAgIHJlc1trZXldID0gZmxhZ1ZhcmlhbnRzW2tleV1cbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzXG4gICAgICAgICAgICB9LCB7fSlcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZmxhZ3M6IHRydXRoeUZsYWdzLFxuICAgICAgICAgICAgZmxhZ1ZhcmlhbnRzOiB0cnV0aHlGbGFnVmFyaWFudHMsXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBfZmlyZUZlYXR1cmVGbGFnc0NhbGxiYWNrcygpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgeyBmbGFncywgZmxhZ1ZhcmlhbnRzIH0gPSB0aGlzLl9wcmVwYXJlRmVhdHVyZUZsYWdzRm9yQ2FsbGJhY2tzKClcbiAgICAgICAgdGhpcy5mZWF0dXJlRmxhZ0V2ZW50SGFuZGxlcnMuZm9yRWFjaCgoaGFuZGxlcikgPT4gaGFuZGxlcihmbGFncywgZmxhZ1ZhcmlhbnRzKSlcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgb3ZlcnJpZGUgcGVyc29uIHByb3BlcnRpZXMgZm9yIGZlYXR1cmUgZmxhZ3MuXG4gICAgICogVGhpcyBpcyB1c2VkIHdoZW4gZGVhbGluZyB3aXRoIG5ldyBwZXJzb25zIC8gd2hlcmUgeW91IGRvbid0IHdhbnQgdG8gd2FpdCBmb3IgaW5nZXN0aW9uXG4gICAgICogdG8gdXBkYXRlIHVzZXIgcHJvcGVydGllcy5cbiAgICAgKi9cbiAgICBzZXRQZXJzb25Qcm9wZXJ0aWVzRm9yRmxhZ3MocHJvcGVydGllczogUHJvcGVydGllcywgcmVsb2FkRmVhdHVyZUZsYWdzID0gdHJ1ZSk6IHZvaWQge1xuICAgICAgICAvLyBHZXQgcGVyc2lzdGVkIHBlcnNvbiBwcm9wZXJ0aWVzXG4gICAgICAgIGNvbnN0IGV4aXN0aW5nUHJvcGVydGllcyA9IHRoaXMuaW5zdGFuY2UuZ2V0X3Byb3BlcnR5KFNUT1JFRF9QRVJTT05fUFJPUEVSVElFU19LRVkpIHx8IHt9XG5cbiAgICAgICAgdGhpcy5pbnN0YW5jZS5yZWdpc3Rlcih7XG4gICAgICAgICAgICBbU1RPUkVEX1BFUlNPTl9QUk9QRVJUSUVTX0tFWV06IHtcbiAgICAgICAgICAgICAgICAuLi5leGlzdGluZ1Byb3BlcnRpZXMsXG4gICAgICAgICAgICAgICAgLi4ucHJvcGVydGllcyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pXG5cbiAgICAgICAgaWYgKHJlbG9hZEZlYXR1cmVGbGFncykge1xuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZS5yZWxvYWRGZWF0dXJlRmxhZ3MoKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVzZXRQZXJzb25Qcm9wZXJ0aWVzRm9yRmxhZ3MoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuaW5zdGFuY2UudW5yZWdpc3RlcihTVE9SRURfUEVSU09OX1BST1BFUlRJRVNfS0VZKVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCBvdmVycmlkZSBncm91cCBwcm9wZXJ0aWVzIGZvciBmZWF0dXJlIGZsYWdzLlxuICAgICAqIFRoaXMgaXMgdXNlZCB3aGVuIGRlYWxpbmcgd2l0aCBuZXcgZ3JvdXBzIC8gd2hlcmUgeW91IGRvbid0IHdhbnQgdG8gd2FpdCBmb3IgaW5nZXN0aW9uXG4gICAgICogdG8gdXBkYXRlIHByb3BlcnRpZXMuXG4gICAgICogVGFrZXMgaW4gYW4gb2JqZWN0LCB0aGUga2V5IG9mIHdoaWNoIGlzIHRoZSBncm91cCB0eXBlLlxuICAgICAqIEZvciBleGFtcGxlOlxuICAgICAqICAgICBzZXRHcm91cFByb3BlcnRpZXNGb3JGbGFncyh7J29yZ2FuaXphdGlvbic6IHsgbmFtZTogJ0NZWicsIGVtcGxveWVlczogJzExJyB9IH0pXG4gICAgICovXG4gICAgc2V0R3JvdXBQcm9wZXJ0aWVzRm9yRmxhZ3MocHJvcGVydGllczogeyBbdHlwZTogc3RyaW5nXTogUHJvcGVydGllcyB9LCByZWxvYWRGZWF0dXJlRmxhZ3MgPSB0cnVlKTogdm9pZCB7XG4gICAgICAgIC8vIEdldCBwZXJzaXN0ZWQgZ3JvdXAgcHJvcGVydGllc1xuICAgICAgICBjb25zdCBleGlzdGluZ1Byb3BlcnRpZXMgPSB0aGlzLmluc3RhbmNlLmdldF9wcm9wZXJ0eShTVE9SRURfR1JPVVBfUFJPUEVSVElFU19LRVkpIHx8IHt9XG5cbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKGV4aXN0aW5nUHJvcGVydGllcykubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICBPYmplY3Qua2V5cyhleGlzdGluZ1Byb3BlcnRpZXMpLmZvckVhY2goKGdyb3VwVHlwZSkgPT4ge1xuICAgICAgICAgICAgICAgIGV4aXN0aW5nUHJvcGVydGllc1tncm91cFR5cGVdID0ge1xuICAgICAgICAgICAgICAgICAgICAuLi5leGlzdGluZ1Byb3BlcnRpZXNbZ3JvdXBUeXBlXSxcbiAgICAgICAgICAgICAgICAgICAgLi4ucHJvcGVydGllc1tncm91cFR5cGVdLFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBkZWxldGUgcHJvcGVydGllc1tncm91cFR5cGVdXG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5pbnN0YW5jZS5yZWdpc3Rlcih7XG4gICAgICAgICAgICBbU1RPUkVEX0dST1VQX1BST1BFUlRJRVNfS0VZXToge1xuICAgICAgICAgICAgICAgIC4uLmV4aXN0aW5nUHJvcGVydGllcyxcbiAgICAgICAgICAgICAgICAuLi5wcm9wZXJ0aWVzLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSlcblxuICAgICAgICBpZiAocmVsb2FkRmVhdHVyZUZsYWdzKSB7XG4gICAgICAgICAgICB0aGlzLmluc3RhbmNlLnJlbG9hZEZlYXR1cmVGbGFncygpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXNldEdyb3VwUHJvcGVydGllc0ZvckZsYWdzKGdyb3VwX3R5cGU/OiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgaWYgKGdyb3VwX3R5cGUpIHtcbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nUHJvcGVydGllcyA9IHRoaXMuaW5zdGFuY2UuZ2V0X3Byb3BlcnR5KFNUT1JFRF9HUk9VUF9QUk9QRVJUSUVTX0tFWSkgfHwge31cbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2UucmVnaXN0ZXIoe1xuICAgICAgICAgICAgICAgIFtTVE9SRURfR1JPVVBfUFJPUEVSVElFU19LRVldOiB7IC4uLmV4aXN0aW5nUHJvcGVydGllcywgW2dyb3VwX3R5cGVdOiB7fSB9LFxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2UudW5yZWdpc3RlcihTVE9SRURfR1JPVVBfUFJPUEVSVElFU19LRVkpXG4gICAgICAgIH1cbiAgICB9XG59XG4iLCAiLyoqXG4gKiB1dWlkdjc6IEFuIGV4cGVyaW1lbnRhbCBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgcHJvcG9zZWQgVVVJRCBWZXJzaW9uIDdcbiAqXG4gKiBAbGljZW5zZSBBcGFjaGUtMi4wXG4gKiBAY29weXJpZ2h0IDIwMjEtMjAyMyBMaW9zS1xuICogQHBhY2thZ2VEb2N1bWVudGF0aW9uXG4gKlxuICogZnJvbSBodHRwczovL2dpdGh1Yi5jb20vTGlvc0svdXVpZHY3L2Jsb2IvZTUwMTQ2MmVhM2QyMzI0MWRlMTMxOTJjZWFlNzI2OTU2ZjliM2I3ZC9zcmMvaW5kZXgudHNcbiAqL1xuXG4vLyBwb2x5ZmlsbCBmb3IgSUUxMVxuaW1wb3J0IHsgd2luZG93IH0gZnJvbSAnLi91dGlscy9nbG9iYWxzJ1xuXG5pbXBvcnQgeyBfaXNOdW1iZXIsIF9pc1VuZGVmaW5lZCB9IGZyb20gJy4vdXRpbHMvdHlwZS11dGlscydcblxuaWYgKCFNYXRoLnRydW5jKSB7XG4gICAgTWF0aC50cnVuYyA9IGZ1bmN0aW9uICh2KSB7XG4gICAgICAgIHJldHVybiB2IDwgMCA/IE1hdGguY2VpbCh2KSA6IE1hdGguZmxvb3IodilcbiAgICB9XG59XG5cbi8vIHBvbHlmaWxsIGZvciBJRTExXG5pZiAoIU51bWJlci5pc0ludGVnZXIpIHtcbiAgICBOdW1iZXIuaXNJbnRlZ2VyID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiBfaXNOdW1iZXIodmFsdWUpICYmIGlzRmluaXRlKHZhbHVlKSAmJiBNYXRoLmZsb29yKHZhbHVlKSA9PT0gdmFsdWVcbiAgICB9XG59XG5cbmNvbnN0IERJR0lUUyA9ICcwMTIzNDU2Nzg5YWJjZGVmJ1xuXG4vKiogUmVwcmVzZW50cyBhIFVVSUQgYXMgYSAxNi1ieXRlIGJ5dGUgYXJyYXkuICovXG5leHBvcnQgY2xhc3MgVVVJRCB7XG4gICAgLyoqIEBwYXJhbSBieXRlcyAtIFRoZSAxNi1ieXRlIGJ5dGUgYXJyYXkgcmVwcmVzZW50YXRpb24uICovXG4gICAgY29uc3RydWN0b3IocmVhZG9ubHkgYnl0ZXM6IFJlYWRvbmx5PFVpbnQ4QXJyYXk+KSB7XG4gICAgICAgIGlmIChieXRlcy5sZW5ndGggIT09IDE2KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdub3QgMTI4LWJpdCBsZW5ndGgnKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQnVpbGRzIGEgYnl0ZSBhcnJheSBmcm9tIFVVSUR2NyBmaWVsZCB2YWx1ZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdW5peFRzTXMgLSBBIDQ4LWJpdCBgdW5peF90c19tc2AgZmllbGQgdmFsdWUuXG4gICAgICogQHBhcmFtIHJhbmRBIC0gQSAxMi1iaXQgYHJhbmRfYWAgZmllbGQgdmFsdWUuXG4gICAgICogQHBhcmFtIHJhbmRCSGkgLSBUaGUgaGlnaGVyIDMwIGJpdHMgb2YgNjItYml0IGByYW5kX2JgIGZpZWxkIHZhbHVlLlxuICAgICAqIEBwYXJhbSByYW5kQkxvIC0gVGhlIGxvd2VyIDMyIGJpdHMgb2YgNjItYml0IGByYW5kX2JgIGZpZWxkIHZhbHVlLlxuICAgICAqL1xuICAgIHN0YXRpYyBmcm9tRmllbGRzVjcodW5peFRzTXM6IG51bWJlciwgcmFuZEE6IG51bWJlciwgcmFuZEJIaTogbnVtYmVyLCByYW5kQkxvOiBudW1iZXIpOiBVVUlEIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgIU51bWJlci5pc0ludGVnZXIodW5peFRzTXMpIHx8XG4gICAgICAgICAgICAhTnVtYmVyLmlzSW50ZWdlcihyYW5kQSkgfHxcbiAgICAgICAgICAgICFOdW1iZXIuaXNJbnRlZ2VyKHJhbmRCSGkpIHx8XG4gICAgICAgICAgICAhTnVtYmVyLmlzSW50ZWdlcihyYW5kQkxvKSB8fFxuICAgICAgICAgICAgdW5peFRzTXMgPCAwIHx8XG4gICAgICAgICAgICByYW5kQSA8IDAgfHxcbiAgICAgICAgICAgIHJhbmRCSGkgPCAwIHx8XG4gICAgICAgICAgICByYW5kQkxvIDwgMCB8fFxuICAgICAgICAgICAgdW5peFRzTXMgPiAweGZmZmZfZmZmZl9mZmZmIHx8XG4gICAgICAgICAgICByYW5kQSA+IDB4ZmZmIHx8XG4gICAgICAgICAgICByYW5kQkhpID4gMHgzZmZmX2ZmZmYgfHxcbiAgICAgICAgICAgIHJhbmRCTG8gPiAweGZmZmZfZmZmZlxuICAgICAgICApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdpbnZhbGlkIGZpZWxkIHZhbHVlJylcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoMTYpXG4gICAgICAgIGJ5dGVzWzBdID0gdW5peFRzTXMgLyAyICoqIDQwXG4gICAgICAgIGJ5dGVzWzFdID0gdW5peFRzTXMgLyAyICoqIDMyXG4gICAgICAgIGJ5dGVzWzJdID0gdW5peFRzTXMgLyAyICoqIDI0XG4gICAgICAgIGJ5dGVzWzNdID0gdW5peFRzTXMgLyAyICoqIDE2XG4gICAgICAgIGJ5dGVzWzRdID0gdW5peFRzTXMgLyAyICoqIDhcbiAgICAgICAgYnl0ZXNbNV0gPSB1bml4VHNNc1xuICAgICAgICBieXRlc1s2XSA9IDB4NzAgfCAocmFuZEEgPj4+IDgpXG4gICAgICAgIGJ5dGVzWzddID0gcmFuZEFcbiAgICAgICAgYnl0ZXNbOF0gPSAweDgwIHwgKHJhbmRCSGkgPj4+IDI0KVxuICAgICAgICBieXRlc1s5XSA9IHJhbmRCSGkgPj4+IDE2XG4gICAgICAgIGJ5dGVzWzEwXSA9IHJhbmRCSGkgPj4+IDhcbiAgICAgICAgYnl0ZXNbMTFdID0gcmFuZEJIaVxuICAgICAgICBieXRlc1sxMl0gPSByYW5kQkxvID4+PiAyNFxuICAgICAgICBieXRlc1sxM10gPSByYW5kQkxvID4+PiAxNlxuICAgICAgICBieXRlc1sxNF0gPSByYW5kQkxvID4+PiA4XG4gICAgICAgIGJ5dGVzWzE1XSA9IHJhbmRCTG9cbiAgICAgICAgcmV0dXJuIG5ldyBVVUlEKGJ5dGVzKVxuICAgIH1cblxuICAgIC8qKiBAcmV0dXJucyBUaGUgOC00LTQtNC0xMiBjYW5vbmljYWwgaGV4YWRlY2ltYWwgc3RyaW5nIHJlcHJlc2VudGF0aW9uLiAqL1xuICAgIHRvU3RyaW5nKCk6IHN0cmluZyB7XG4gICAgICAgIGxldCB0ZXh0ID0gJydcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmJ5dGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB0ZXh0ID0gdGV4dCArIERJR0lUUy5jaGFyQXQodGhpcy5ieXRlc1tpXSA+Pj4gNCkgKyBESUdJVFMuY2hhckF0KHRoaXMuYnl0ZXNbaV0gJiAweGYpXG4gICAgICAgICAgICBpZiAoaSA9PT0gMyB8fCBpID09PSA1IHx8IGkgPT09IDcgfHwgaSA9PT0gOSkge1xuICAgICAgICAgICAgICAgIHRleHQgKz0gJy0nXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGV4dC5sZW5ndGggIT09IDM2KSB7XG4gICAgICAgICAgICAvLyBXZSBzYXcgb25lIGN1c3RvbWVyIHdob3NlIGJ1bmRsaW5nIGNvZGUgd2FzIG1hbmdsaW5nIHRoZSBVVUlEIGdlbmVyYXRpb25cbiAgICAgICAgICAgIC8vIHJhdGhlciB0aGFuIGFjY2VwdCBhIGJhZCBVVUlELCB3ZSB0aHJvdyBhbiBlcnJvciBoZXJlLlxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIFVVSUR2NyB3YXMgZ2VuZXJhdGVkJylcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGV4dFxuICAgIH1cblxuICAgIC8qKiBDcmVhdGVzIGFuIG9iamVjdCBmcm9tIGB0aGlzYC4gKi9cbiAgICBjbG9uZSgpOiBVVUlEIHtcbiAgICAgICAgcmV0dXJuIG5ldyBVVUlEKHRoaXMuYnl0ZXMuc2xpY2UoMCkpXG4gICAgfVxuXG4gICAgLyoqIFJldHVybnMgdHJ1ZSBpZiBgdGhpc2AgaXMgZXF1aXZhbGVudCB0byBgb3RoZXJgLiAqL1xuICAgIGVxdWFscyhvdGhlcjogVVVJRCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5jb21wYXJlVG8ob3RoZXIpID09PSAwXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIG5lZ2F0aXZlIGludGVnZXIsIHplcm8sIG9yIHBvc2l0aXZlIGludGVnZXIgaWYgYHRoaXNgIGlzIGxlc3NcbiAgICAgKiB0aGFuLCBlcXVhbCB0bywgb3IgZ3JlYXRlciB0aGFuIGBvdGhlcmAsIHJlc3BlY3RpdmVseS5cbiAgICAgKi9cbiAgICBjb21wYXJlVG8ob3RoZXI6IFVVSUQpOiBudW1iZXIge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDE2OyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGRpZmYgPSB0aGlzLmJ5dGVzW2ldIC0gb3RoZXIuYnl0ZXNbaV1cbiAgICAgICAgICAgIGlmIChkaWZmICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIE1hdGguc2lnbihkaWZmKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiAwXG4gICAgfVxufVxuXG4vKiogRW5jYXBzdWxhdGVzIHRoZSBtb25vdG9uaWMgY291bnRlciBzdGF0ZS4gKi9cbmNsYXNzIFY3R2VuZXJhdG9yIHtcbiAgICBwcml2YXRlIHRpbWVzdGFtcCA9IDBcbiAgICBwcml2YXRlIGNvdW50ZXIgPSAwXG4gICAgcHJpdmF0ZSByZWFkb25seSByYW5kb20gPSBuZXcgRGVmYXVsdFJhbmRvbSgpXG5cbiAgICAvKipcbiAgICAgKiBHZW5lcmF0ZXMgYSBuZXcgVVVJRHY3IG9iamVjdCBmcm9tIHRoZSBjdXJyZW50IHRpbWVzdGFtcCwgb3IgcmVzZXRzIHRoZVxuICAgICAqIGdlbmVyYXRvciB1cG9uIHNpZ25pZmljYW50IHRpbWVzdGFtcCByb2xsYmFjay5cbiAgICAgKlxuICAgICAqIFRoaXMgbWV0aG9kIHJldHVybnMgbW9ub3RvbmljYWxseSBpbmNyZWFzaW5nIFVVSURzIHVubGVzcyB0aGUgdXAtdG8tZGF0ZVxuICAgICAqIHRpbWVzdGFtcCBpcyBzaWduaWZpY2FudGx5IChieSB0ZW4gc2Vjb25kcyBvciBtb3JlKSBzbWFsbGVyIHRoYW4gdGhlIG9uZVxuICAgICAqIGVtYmVkZGVkIGluIHRoZSBpbW1lZGlhdGVseSBwcmVjZWRpbmcgVVVJRC4gSWYgc3VjaCBhIHNpZ25pZmljYW50IGNsb2NrXG4gICAgICogcm9sbGJhY2sgaXMgZGV0ZWN0ZWQsIHRoaXMgbWV0aG9kIHJlc2V0cyB0aGUgZ2VuZXJhdG9yIGFuZCByZXR1cm5zIGEgbmV3XG4gICAgICogVVVJRCBiYXNlZCBvbiB0aGUgY3VycmVudCB0aW1lc3RhbXAuXG4gICAgICovXG4gICAgZ2VuZXJhdGUoKTogVVVJRCB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy5nZW5lcmF0ZU9yQWJvcnQoKVxuICAgICAgICBpZiAoIV9pc1VuZGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gcmVzZXQgc3RhdGUgYW5kIHJlc3VtZVxuICAgICAgICAgICAgdGhpcy50aW1lc3RhbXAgPSAwXG4gICAgICAgICAgICBjb25zdCB2YWx1ZUFmdGVyUmVzZXQgPSB0aGlzLmdlbmVyYXRlT3JBYm9ydCgpXG4gICAgICAgICAgICBpZiAoX2lzVW5kZWZpbmVkKHZhbHVlQWZ0ZXJSZXNldCkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NvdWxkIG5vdCBnZW5lcmF0ZSBVVUlEIGFmdGVyIHRpbWVzdGFtcCByZXNldCcpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdmFsdWVBZnRlclJlc2V0XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZW5lcmF0ZXMgYSBuZXcgVVVJRHY3IG9iamVjdCBmcm9tIHRoZSBjdXJyZW50IHRpbWVzdGFtcCwgb3IgcmV0dXJuc1xuICAgICAqIGB1bmRlZmluZWRgIHVwb24gc2lnbmlmaWNhbnQgdGltZXN0YW1wIHJvbGxiYWNrLlxuICAgICAqXG4gICAgICogVGhpcyBtZXRob2QgcmV0dXJucyBtb25vdG9uaWNhbGx5IGluY3JlYXNpbmcgVVVJRHMgdW5sZXNzIHRoZSB1cC10by1kYXRlXG4gICAgICogdGltZXN0YW1wIGlzIHNpZ25pZmljYW50bHkgKGJ5IHRlbiBzZWNvbmRzIG9yIG1vcmUpIHNtYWxsZXIgdGhhbiB0aGUgb25lXG4gICAgICogZW1iZWRkZWQgaW4gdGhlIGltbWVkaWF0ZWx5IHByZWNlZGluZyBVVUlELiBJZiBzdWNoIGEgc2lnbmlmaWNhbnQgY2xvY2tcbiAgICAgKiByb2xsYmFjayBpcyBkZXRlY3RlZCwgdGhpcyBtZXRob2QgYWJvcnRzIGFuZCByZXR1cm5zIGB1bmRlZmluZWRgLlxuICAgICAqL1xuICAgIGdlbmVyYXRlT3JBYm9ydCgpOiBVVUlEIHwgdW5kZWZpbmVkIHtcbiAgICAgICAgY29uc3QgTUFYX0NPVU5URVIgPSAweDNmZl9mZmZmX2ZmZmZcbiAgICAgICAgY29uc3QgUk9MTEJBQ0tfQUxMT1dBTkNFID0gMTBfMDAwIC8vIDEwIHNlY29uZHNcblxuICAgICAgICBjb25zdCB0cyA9IERhdGUubm93KClcbiAgICAgICAgaWYgKHRzID4gdGhpcy50aW1lc3RhbXApIHtcbiAgICAgICAgICAgIHRoaXMudGltZXN0YW1wID0gdHNcbiAgICAgICAgICAgIHRoaXMucmVzZXRDb3VudGVyKClcbiAgICAgICAgfSBlbHNlIGlmICh0cyArIFJPTExCQUNLX0FMTE9XQU5DRSA+IHRoaXMudGltZXN0YW1wKSB7XG4gICAgICAgICAgICAvLyBnbyBvbiB3aXRoIHByZXZpb3VzIHRpbWVzdGFtcCBpZiBuZXcgb25lIGlzIG5vdCBtdWNoIHNtYWxsZXJcbiAgICAgICAgICAgIHRoaXMuY291bnRlcisrXG4gICAgICAgICAgICBpZiAodGhpcy5jb3VudGVyID4gTUFYX0NPVU5URVIpIHtcbiAgICAgICAgICAgICAgICAvLyBpbmNyZW1lbnQgdGltZXN0YW1wIGF0IGNvdW50ZXIgb3ZlcmZsb3dcbiAgICAgICAgICAgICAgICB0aGlzLnRpbWVzdGFtcCsrXG4gICAgICAgICAgICAgICAgdGhpcy5yZXNldENvdW50ZXIoKVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gYWJvcnQgaWYgY2xvY2sgd2VudCBiYWNrd2FyZHMgdG8gdW5iZWFyYWJsZSBleHRlbnRcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWRcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBVVUlELmZyb21GaWVsZHNWNyhcbiAgICAgICAgICAgIHRoaXMudGltZXN0YW1wLFxuICAgICAgICAgICAgTWF0aC50cnVuYyh0aGlzLmNvdW50ZXIgLyAyICoqIDMwKSxcbiAgICAgICAgICAgIHRoaXMuY291bnRlciAmICgyICoqIDMwIC0gMSksXG4gICAgICAgICAgICB0aGlzLnJhbmRvbS5uZXh0VWludDMyKClcbiAgICAgICAgKVxuICAgIH1cblxuICAgIC8qKiBJbml0aWFsaXplcyB0aGUgY291bnRlciBhdCBhIDQyLWJpdCByYW5kb20gaW50ZWdlci4gKi9cbiAgICBwcml2YXRlIHJlc2V0Q291bnRlcigpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5jb3VudGVyID0gdGhpcy5yYW5kb20ubmV4dFVpbnQzMigpICogMHg0MDAgKyAodGhpcy5yYW5kb20ubmV4dFVpbnQzMigpICYgMHgzZmYpXG4gICAgfVxufVxuXG4vKiogQSBnbG9iYWwgZmxhZyB0byBmb3JjZSB1c2Ugb2YgY3J5cHRvZ3JhcGhpY2FsbHkgc3Ryb25nIFJORy4gKi9cbmRlY2xhcmUgY29uc3QgVVVJRFY3X0RFTllfV0VBS19STkc6IGJvb2xlYW5cblxuLyoqIFN0b3JlcyBgY3J5cHRvLmdldFJhbmRvbVZhbHVlcygpYCBhdmFpbGFibGUgaW4gdGhlIGVudmlyb25tZW50LiAqL1xubGV0IGdldFJhbmRvbVZhbHVlczogPFQgZXh0ZW5kcyBVaW50OEFycmF5IHwgVWludDMyQXJyYXk+KGJ1ZmZlcjogVCkgPT4gVCA9IChidWZmZXIpID0+IHtcbiAgICAvLyBmYWxsIGJhY2sgb24gTWF0aC5yYW5kb20oKSB1bmxlc3MgdGhlIGZsYWcgaXMgc2V0IHRvIHRydWVcbiAgICAvLyBUUklDS1k6IGRvbid0IHVzZSB0aGUgX2lzVW5kZWZpbmVkIG1ldGhvZCBoZXJlIGFzIGNhbid0IHBhc3MgdGhlIHJlZmVyZW5jZVxuICAgIGlmICh0eXBlb2YgVVVJRFY3X0RFTllfV0VBS19STkcgIT09ICd1bmRlZmluZWQnICYmIFVVSURWN19ERU5ZX1dFQUtfUk5HKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignbm8gY3J5cHRvZ3JhcGhpY2FsbHkgc3Ryb25nIFJORyBhdmFpbGFibGUnKVxuICAgIH1cblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYnVmZmVyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGJ1ZmZlcltpXSA9IE1hdGgudHJ1bmMoTWF0aC5yYW5kb20oKSAqIDB4MV8wMDAwKSAqIDB4MV8wMDAwICsgTWF0aC50cnVuYyhNYXRoLnJhbmRvbSgpICogMHgxXzAwMDApXG4gICAgfVxuICAgIHJldHVybiBidWZmZXJcbn1cblxuLy8gZGV0ZWN0IFdlYiBDcnlwdG8gQVBJXG5pZiAod2luZG93ICYmICFfaXNVbmRlZmluZWQod2luZG93LmNyeXB0bykgJiYgY3J5cHRvLmdldFJhbmRvbVZhbHVlcykge1xuICAgIGdldFJhbmRvbVZhbHVlcyA9IChidWZmZXIpID0+IGNyeXB0by5nZXRSYW5kb21WYWx1ZXMoYnVmZmVyKVxufVxuXG4vKipcbiAqIFdyYXBzIGBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKClgIGFuZCBjb21wYXRpYmxlcyB0byBlbmFibGUgYnVmZmVyaW5nOyB0aGlzXG4gKiB1c2VzIGEgc21hbGwgYnVmZmVyIGJ5IGRlZmF1bHQgdG8gYXZvaWQgdW5iZWFyYWJsZSB0aHJvdWdocHV0IGRlY2xpbmUgaW4gc29tZVxuICogZW52aXJvbm1lbnRzIGFzIHdlbGwgYXMgdGhlIHdhc3RlIG9mIHRpbWUgYW5kIHNwYWNlIGZvciB1bnVzZWQgdmFsdWVzLlxuICovXG5jbGFzcyBEZWZhdWx0UmFuZG9tIHtcbiAgICBwcml2YXRlIHJlYWRvbmx5IGJ1ZmZlciA9IG5ldyBVaW50MzJBcnJheSg4KVxuICAgIHByaXZhdGUgY3Vyc29yID0gSW5maW5pdHlcbiAgICBuZXh0VWludDMyKCk6IG51bWJlciB7XG4gICAgICAgIGlmICh0aGlzLmN1cnNvciA+PSB0aGlzLmJ1ZmZlci5sZW5ndGgpIHtcbiAgICAgICAgICAgIGdldFJhbmRvbVZhbHVlcyh0aGlzLmJ1ZmZlcilcbiAgICAgICAgICAgIHRoaXMuY3Vyc29yID0gMFxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmJ1ZmZlclt0aGlzLmN1cnNvcisrXVxuICAgIH1cbn1cblxubGV0IGRlZmF1bHRHZW5lcmF0b3I6IFY3R2VuZXJhdG9yIHwgdW5kZWZpbmVkXG5cbi8qKlxuICogR2VuZXJhdGVzIGEgVVVJRHY3IHN0cmluZy5cbiAqXG4gKiBAcmV0dXJucyBUaGUgOC00LTQtNC0xMiBjYW5vbmljYWwgaGV4YWRlY2ltYWwgc3RyaW5nIHJlcHJlc2VudGF0aW9uXG4gKiAoXCJ4eHh4eHh4eC14eHh4LXh4eHgteHh4eC14eHh4eHh4eHh4eHhcIikuXG4gKi9cbmV4cG9ydCBjb25zdCB1dWlkdjcgPSAoKTogc3RyaW5nID0+IHV1aWR2N29iaigpLnRvU3RyaW5nKClcblxuLyoqIEdlbmVyYXRlcyBhIFVVSUR2NyBvYmplY3QuICovXG5jb25zdCB1dWlkdjdvYmogPSAoKTogVVVJRCA9PiAoZGVmYXVsdEdlbmVyYXRvciB8fCAoZGVmYXVsdEdlbmVyYXRvciA9IG5ldyBWN0dlbmVyYXRvcigpKSkuZ2VuZXJhdGUoKVxuIiwgImltcG9ydCB7IF9leHRlbmQgfSBmcm9tICcuL3V0aWxzJ1xuaW1wb3J0IHsgUGVyc2lzdGVudFN0b3JlLCBQcm9wZXJ0aWVzIH0gZnJvbSAnLi90eXBlcydcbmltcG9ydCB7IERJU1RJTkNUX0lELCBTRVNTSU9OX0lELCBTRVNTSU9OX1JFQ09SRElOR19JU19TQU1QTEVEIH0gZnJvbSAnLi9jb25zdGFudHMnXG5cbmltcG9ydCB7IF9pc051bGwsIF9pc1VuZGVmaW5lZCB9IGZyb20gJy4vdXRpbHMvdHlwZS11dGlscydcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJy4vdXRpbHMvbG9nZ2VyJ1xuaW1wb3J0IHsgd2luZG93LCBkb2N1bWVudCB9IGZyb20gJy4vdXRpbHMvZ2xvYmFscydcbmltcG9ydCB7IHV1aWR2NyB9IGZyb20gJy4vdXVpZHY3J1xuXG5jb25zdCBZMTk3MCA9ICdUaHUsIDAxIEphbiAxOTcwIDAwOjAwOjAwIEdNVCdcbi8vIHdlIHN0b3JlIHRoZSBkaXNjb3ZlcmVkIHN1YmRvbWFpbiBpbiBtZW1vcnkgYmVjYXVzZSBpdCBtaWdodCBiZSByZWFkIG11bHRpcGxlIHRpbWVzXG5sZXQgZmlyc3ROb25QdWJsaWNTdWJEb21haW4gPSAnJ1xuXG4vLyBoZWxwZXIgdG8gYWxsb3cgdGVzdHMgdG8gY2xlYXIgdGhpcyBcImNhY2hlXCJcbmV4cG9ydCBjb25zdCByZXNldFN1YkRvbWFpbkNhY2hlID0gKCkgPT4ge1xuICAgIGZpcnN0Tm9uUHVibGljU3ViRG9tYWluID0gJydcbn1cblxuLyoqXG4gKiBCcm93c2VycyBkb24ndCBvZmZlciBhIHdheSB0byBjaGVjayBpZiBzb21ldGhpbmcgaXMgYSBwdWJsaWMgc3VmZml4XG4gKiBlLmcuIGAuY29tLmF1YCwgYC5pb2AsIGAub3JnLnVrYFxuICpcbiAqIEJ1dCB0aGV5IGRvIHJlamVjdCBjb29raWVzIHNldCBvbiBwdWJsaWMgc3VmZml4ZXNcbiAqIFNldHRpbmcgYSBjb29raWUgb24gYC5jby51a2Agd291bGQgbWVhbiBpdCB3YXMgc2VudCBmb3IgZXZlcnkgYC5jby51a2Agc2l0ZSB2aXNpdGVkXG4gKlxuICogU28sIHdlIGNhbiB1c2UgdGhpcyB0byBjaGVjayBpZiBhIGRvbWFpbiBpcyBhIHB1YmxpYyBzdWZmaXhcbiAqIGJ5IHRyeWluZyB0byBzZXQgYSBjb29raWUgb24gYSBzdWJkb21haW4gb2YgdGhlIHByb3ZpZGVkIGhvc3RuYW1lXG4gKiB1bnRpbCB0aGUgYnJvd3NlciBhY2NlcHRzIGl0XG4gKlxuICogaW5zcGlyZWQgYnkgaHR0cHM6Ly9naXRodWIuY29tL0FuZ3VzRnUvYnJvd3Nlci1yb290LWRvbWFpblxuICovXG5leHBvcnQgZnVuY3Rpb24gc2Vla0ZpcnN0Tm9uUHVibGljU3ViRG9tYWluKGhvc3RuYW1lOiBzdHJpbmcsIGNvb2tpZUphciA9IGRvY3VtZW50KTogc3RyaW5nIHtcbiAgICBpZiAoZmlyc3ROb25QdWJsaWNTdWJEb21haW4pIHtcbiAgICAgICAgcmV0dXJuIGZpcnN0Tm9uUHVibGljU3ViRG9tYWluXG4gICAgfVxuXG4gICAgaWYgKCFjb29raWVKYXIpIHtcbiAgICAgICAgcmV0dXJuICcnXG4gICAgfVxuICAgIGlmIChbJ2xvY2FsaG9zdCcsICcxMjcuMC4wLjEnXS5pbmNsdWRlcyhob3N0bmFtZSkpIHJldHVybiAnJ1xuXG4gICAgY29uc3QgbGlzdCA9IGhvc3RuYW1lLnNwbGl0KCcuJylcbiAgICBsZXQgbGVuID0gTWF0aC5taW4obGlzdC5sZW5ndGgsIDgpIC8vIHBhcmFub2lhIC0gd2Uga25vdyB0aGlzIG51bWJlciBzaG91bGQgYmUgc21hbGxcbiAgICBjb25zdCBrZXkgPSAnZG1uX2Noa18nICsgdXVpZHY3KClcbiAgICBjb25zdCBSID0gbmV3IFJlZ0V4cCgnKF58OylcXFxccyonICsga2V5ICsgJz0xJylcblxuICAgIHdoaWxlICghZmlyc3ROb25QdWJsaWNTdWJEb21haW4gJiYgbGVuLS0pIHtcbiAgICAgICAgY29uc3QgY2FuZGlkYXRlID0gbGlzdC5zbGljZShsZW4pLmpvaW4oJy4nKVxuICAgICAgICBjb25zdCBjYW5kaWRhdGVDb29raWVWYWx1ZSA9IGtleSArICc9MTtkb21haW49LicgKyBjYW5kaWRhdGVcblxuICAgICAgICAvLyB0cnkgdG8gc2V0IGNvb2tpZVxuICAgICAgICBjb29raWVKYXIuY29va2llID0gY2FuZGlkYXRlQ29va2llVmFsdWVcblxuICAgICAgICBpZiAoUi50ZXN0KGNvb2tpZUphci5jb29raWUpKSB7XG4gICAgICAgICAgICAvLyB0aGUgY29va2llIHdhcyBhY2NlcHRlZCBieSB0aGUgYnJvd3NlciwgcmVtb3ZlIHRoZSB0ZXN0IGNvb2tpZVxuICAgICAgICAgICAgY29va2llSmFyLmNvb2tpZSA9IGNhbmRpZGF0ZUNvb2tpZVZhbHVlICsgJztleHBpcmVzPScgKyBZMTk3MFxuICAgICAgICAgICAgZmlyc3ROb25QdWJsaWNTdWJEb21haW4gPSBjYW5kaWRhdGVcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBmaXJzdE5vblB1YmxpY1N1YkRvbWFpblxufVxuXG5jb25zdCBET01BSU5fTUFUQ0hfUkVHRVggPSAvW2EtejAtOV1bYS16MC05LV0rXFwuW2Etel17Mix9JC9pXG5jb25zdCBvcmlnaW5hbENvb2tpZURvbWFpbkZuID0gKGhvc3RuYW1lOiBzdHJpbmcpOiBzdHJpbmcgPT4ge1xuICAgIGNvbnN0IG1hdGNoZXMgPSBob3N0bmFtZS5tYXRjaChET01BSU5fTUFUQ0hfUkVHRVgpXG4gICAgcmV0dXJuIG1hdGNoZXMgPyBtYXRjaGVzWzBdIDogJydcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNob29zZUNvb2tpZURvbWFpbihob3N0bmFtZTogc3RyaW5nLCBjcm9zc19zdWJkb21haW46IGJvb2xlYW4gfCB1bmRlZmluZWQpOiBzdHJpbmcge1xuICAgIGlmIChjcm9zc19zdWJkb21haW4pIHtcbiAgICAgICAgLy8gTk9URTogQ291bGQgd2UgdXNlIHRoaXMgZm9yIGNyb3NzIGRvbWFpbiB0cmFja2luZz9cbiAgICAgICAgbGV0IG1hdGNoZWRTdWJEb21haW4gPSBzZWVrRmlyc3ROb25QdWJsaWNTdWJEb21haW4oaG9zdG5hbWUpXG5cbiAgICAgICAgaWYgKCFtYXRjaGVkU3ViRG9tYWluKSB7XG4gICAgICAgICAgICBjb25zdCBvcmlnaW5hbE1hdGNoID0gb3JpZ2luYWxDb29raWVEb21haW5Gbihob3N0bmFtZSlcbiAgICAgICAgICAgIGlmIChvcmlnaW5hbE1hdGNoICE9PSBtYXRjaGVkU3ViRG9tYWluKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmluZm8oJ1dhcm5pbmc6IGNvb2tpZSBzdWJkb21haW4gZGlzY292ZXJ5IG1pc21hdGNoJywgb3JpZ2luYWxNYXRjaCwgbWF0Y2hlZFN1YkRvbWFpbilcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG1hdGNoZWRTdWJEb21haW4gPSBvcmlnaW5hbE1hdGNoXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbWF0Y2hlZFN1YkRvbWFpbiA/ICc7IGRvbWFpbj0uJyArIG1hdGNoZWRTdWJEb21haW4gOiAnJ1xuICAgIH1cbiAgICByZXR1cm4gJydcbn1cblxuLy8gTWV0aG9kcyBwYXJ0aWFsbHkgYm9ycm93ZWQgZnJvbSBxdWlya3Ntb2RlLm9yZy9qcy9jb29raWVzLmh0bWxcbmV4cG9ydCBjb25zdCBjb29raWVTdG9yZTogUGVyc2lzdGVudFN0b3JlID0ge1xuICAgIGlzX3N1cHBvcnRlZDogKCkgPT4gISFkb2N1bWVudCxcblxuICAgIGVycm9yOiBmdW5jdGlvbiAobXNnKSB7XG4gICAgICAgIGxvZ2dlci5lcnJvcignY29va2llU3RvcmUgZXJyb3I6ICcgKyBtc2cpXG4gICAgfSxcblxuICAgIGdldDogZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgaWYgKCFkb2N1bWVudCkge1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgbmFtZUVRID0gbmFtZSArICc9J1xuICAgICAgICAgICAgY29uc3QgY2EgPSBkb2N1bWVudC5jb29raWUuc3BsaXQoJzsnKS5maWx0ZXIoKHgpID0+IHgubGVuZ3RoKVxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjYS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGxldCBjID0gY2FbaV1cbiAgICAgICAgICAgICAgICB3aGlsZSAoYy5jaGFyQXQoMCkgPT0gJyAnKSB7XG4gICAgICAgICAgICAgICAgICAgIGMgPSBjLnN1YnN0cmluZygxLCBjLmxlbmd0aClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGMuaW5kZXhPZihuYW1lRVEpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQoYy5zdWJzdHJpbmcobmFtZUVRLmxlbmd0aCwgYy5sZW5ndGgpKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7fVxuICAgICAgICByZXR1cm4gbnVsbFxuICAgIH0sXG5cbiAgICBwYXJzZTogZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgbGV0IGNvb2tpZVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29va2llID0gSlNPTi5wYXJzZShjb29raWVTdG9yZS5nZXQobmFtZSkpIHx8IHt9XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgLy8gbm9vcFxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb29raWVcbiAgICB9LFxuXG4gICAgc2V0OiBmdW5jdGlvbiAobmFtZSwgdmFsdWUsIGRheXMsIGNyb3NzX3N1YmRvbWFpbiwgaXNfc2VjdXJlKSB7XG4gICAgICAgIGlmICghZG9jdW1lbnQpIHtcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBsZXQgZXhwaXJlcyA9ICcnLFxuICAgICAgICAgICAgICAgIHNlY3VyZSA9ICcnXG5cbiAgICAgICAgICAgIGNvbnN0IGNkb21haW4gPSBjaG9vc2VDb29raWVEb21haW4oZG9jdW1lbnQubG9jYXRpb24uaG9zdG5hbWUsIGNyb3NzX3N1YmRvbWFpbilcblxuICAgICAgICAgICAgaWYgKGRheXMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoKVxuICAgICAgICAgICAgICAgIGRhdGUuc2V0VGltZShkYXRlLmdldFRpbWUoKSArIGRheXMgKiAyNCAqIDYwICogNjAgKiAxMDAwKVxuICAgICAgICAgICAgICAgIGV4cGlyZXMgPSAnOyBleHBpcmVzPScgKyBkYXRlLnRvVVRDU3RyaW5nKClcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGlzX3NlY3VyZSkge1xuICAgICAgICAgICAgICAgIHNlY3VyZSA9ICc7IHNlY3VyZSdcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgbmV3X2Nvb2tpZV92YWwgPVxuICAgICAgICAgICAgICAgIG5hbWUgK1xuICAgICAgICAgICAgICAgICc9JyArXG4gICAgICAgICAgICAgICAgZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KHZhbHVlKSkgK1xuICAgICAgICAgICAgICAgIGV4cGlyZXMgK1xuICAgICAgICAgICAgICAgICc7IFNhbWVTaXRlPUxheDsgcGF0aD0vJyArXG4gICAgICAgICAgICAgICAgY2RvbWFpbiArXG4gICAgICAgICAgICAgICAgc2VjdXJlXG5cbiAgICAgICAgICAgIC8vIDQwOTYgYnl0ZXMgaXMgdGhlIHNpemUgYXQgd2hpY2ggc29tZSBicm93c2VycyAoZS5nLiBmaXJlZm94KSB3aWxsIG5vdCBzdG9yZSBhIGNvb2tpZSwgd2FybiBzbGlnaHRseSBiZWZvcmUgdGhhdFxuICAgICAgICAgICAgaWYgKG5ld19jb29raWVfdmFsLmxlbmd0aCA+IDQwOTYgKiAwLjkpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIud2FybignY29va2llU3RvcmUgd2FybmluZzogbGFyZ2UgY29va2llLCBsZW49JyArIG5ld19jb29raWVfdmFsLmxlbmd0aClcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZG9jdW1lbnQuY29va2llID0gbmV3X2Nvb2tpZV92YWxcbiAgICAgICAgICAgIHJldHVybiBuZXdfY29va2llX3ZhbFxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgfSxcblxuICAgIHJlbW92ZTogZnVuY3Rpb24gKG5hbWUsIGNyb3NzX3N1YmRvbWFpbikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29va2llU3RvcmUuc2V0KG5hbWUsICcnLCAtMSwgY3Jvc3Nfc3ViZG9tYWluKVxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgfSxcbn1cblxubGV0IF9sb2NhbFN0b3JhZ2Vfc3VwcG9ydGVkOiBib29sZWFuIHwgbnVsbCA9IG51bGxcblxuZXhwb3J0IGNvbnN0IGxvY2FsU3RvcmU6IFBlcnNpc3RlbnRTdG9yZSA9IHtcbiAgICBpc19zdXBwb3J0ZWQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCFfaXNOdWxsKF9sb2NhbFN0b3JhZ2Vfc3VwcG9ydGVkKSkge1xuICAgICAgICAgICAgcmV0dXJuIF9sb2NhbFN0b3JhZ2Vfc3VwcG9ydGVkXG4gICAgICAgIH1cblxuICAgICAgICBsZXQgc3VwcG9ydGVkID0gdHJ1ZVxuICAgICAgICBpZiAoIV9pc1VuZGVmaW5lZCh3aW5kb3cpKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9ICdfX21wbHNzdXBwb3J0X18nLFxuICAgICAgICAgICAgICAgICAgICB2YWwgPSAneHl6J1xuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmUuc2V0KGtleSwgdmFsKVxuICAgICAgICAgICAgICAgIGlmIChsb2NhbFN0b3JlLmdldChrZXkpICE9PSAnXCJ4eXpcIicpIHtcbiAgICAgICAgICAgICAgICAgICAgc3VwcG9ydGVkID0gZmFsc2VcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yZS5yZW1vdmUoa2V5KVxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgc3VwcG9ydGVkID0gZmFsc2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHN1cHBvcnRlZCA9IGZhbHNlXG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFzdXBwb3J0ZWQpIHtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcignbG9jYWxTdG9yYWdlIHVuc3VwcG9ydGVkOyBmYWxsaW5nIGJhY2sgdG8gY29va2llIHN0b3JlJylcbiAgICAgICAgfVxuXG4gICAgICAgIF9sb2NhbFN0b3JhZ2Vfc3VwcG9ydGVkID0gc3VwcG9ydGVkXG4gICAgICAgIHJldHVybiBzdXBwb3J0ZWRcbiAgICB9LFxuXG4gICAgZXJyb3I6IGZ1bmN0aW9uIChtc2cpIHtcbiAgICAgICAgbG9nZ2VyLmVycm9yKCdsb2NhbFN0b3JhZ2UgZXJyb3I6ICcgKyBtc2cpXG4gICAgfSxcblxuICAgIGdldDogZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiB3aW5kb3c/LmxvY2FsU3RvcmFnZS5nZXRJdGVtKG5hbWUpXG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgbG9jYWxTdG9yZS5lcnJvcihlcnIpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGxcbiAgICB9LFxuXG4gICAgcGFyc2U6IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShsb2NhbFN0b3JlLmdldChuYW1lKSkgfHwge31cbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAvLyBub29wXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGxcbiAgICB9LFxuXG4gICAgc2V0OiBmdW5jdGlvbiAobmFtZSwgdmFsdWUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHdpbmRvdz8ubG9jYWxTdG9yYWdlLnNldEl0ZW0obmFtZSwgSlNPTi5zdHJpbmdpZnkodmFsdWUpKVxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIGxvY2FsU3RvcmUuZXJyb3IoZXJyKVxuICAgICAgICB9XG4gICAgfSxcblxuICAgIHJlbW92ZTogZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHdpbmRvdz8ubG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0obmFtZSlcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBsb2NhbFN0b3JlLmVycm9yKGVycilcbiAgICAgICAgfVxuICAgIH0sXG59XG5cbi8vIFVzZSBsb2NhbHN0b3JhZ2UgZm9yIG1vc3QgZGF0YSBidXQgc3RpbGwgdXNlIGNvb2tpZSBmb3IgQ09PS0lFX1BFUlNJU1RFRF9QUk9QRVJUSUVTXG4vLyBUaGlzIHNvbHZlcyBpc3N1ZXMgd2l0aCBjb29raWVzIGhhdmluZyB0b28gbXVjaCBkYXRhIGluIHRoZW0gY2F1c2luZyBoZWFkZXJzIHRvbyBsYXJnZVxuLy8gQWxzbyBtYWtlcyBzdXJlIHdlIGRvbid0IGhhdmUgdG8gc2VuZCBhIHRvbiBvZiBkYXRhIHRvIHRoZSBzZXJ2ZXJcbmNvbnN0IENPT0tJRV9QRVJTSVNURURfUFJPUEVSVElFUyA9IFtESVNUSU5DVF9JRCwgU0VTU0lPTl9JRCwgU0VTU0lPTl9SRUNPUkRJTkdfSVNfU0FNUExFRF1cblxuZXhwb3J0IGNvbnN0IGxvY2FsUGx1c0Nvb2tpZVN0b3JlOiBQZXJzaXN0ZW50U3RvcmUgPSB7XG4gICAgLi4ubG9jYWxTdG9yZSxcbiAgICBwYXJzZTogZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGxldCBleHRlbmQ6IFByb3BlcnRpZXMgPSB7fVxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAvLyBTZWUgaWYgdGhlcmUncyBhIGNvb2tpZSBzdG9yZWQgd2l0aCBkYXRhLlxuICAgICAgICAgICAgICAgIGV4dGVuZCA9IGNvb2tpZVN0b3JlLnBhcnNlKG5hbWUpIHx8IHt9XG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHt9XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IF9leHRlbmQoZXh0ZW5kLCBKU09OLnBhcnNlKGxvY2FsU3RvcmUuZ2V0KG5hbWUpIHx8ICd7fScpKVxuICAgICAgICAgICAgbG9jYWxTdG9yZS5zZXQobmFtZSwgdmFsdWUpXG4gICAgICAgICAgICByZXR1cm4gdmFsdWVcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAvLyBub29wXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGxcbiAgICB9LFxuXG4gICAgc2V0OiBmdW5jdGlvbiAobmFtZSwgdmFsdWUsIGRheXMsIGNyb3NzX3N1YmRvbWFpbiwgaXNfc2VjdXJlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBsb2NhbFN0b3JlLnNldChuYW1lLCB2YWx1ZSlcbiAgICAgICAgICAgIGNvbnN0IGNvb2tpZVBlcnNpc3RlZFByb3BlcnRpZXM6IFJlY29yZDxzdHJpbmcsIGFueT4gPSB7fVxuICAgICAgICAgICAgQ09PS0lFX1BFUlNJU1RFRF9QUk9QRVJUSUVTLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh2YWx1ZVtrZXldKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvb2tpZVBlcnNpc3RlZFByb3BlcnRpZXNba2V5XSA9IHZhbHVlW2tleV1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMoY29va2llUGVyc2lzdGVkUHJvcGVydGllcykubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgY29va2llU3RvcmUuc2V0KG5hbWUsIGNvb2tpZVBlcnNpc3RlZFByb3BlcnRpZXMsIGRheXMsIGNyb3NzX3N1YmRvbWFpbiwgaXNfc2VjdXJlKVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIGxvY2FsU3RvcmUuZXJyb3IoZXJyKVxuICAgICAgICB9XG4gICAgfSxcblxuICAgIHJlbW92ZTogZnVuY3Rpb24gKG5hbWUsIGNyb3NzX3N1YmRvbWFpbikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgd2luZG93Py5sb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShuYW1lKVxuICAgICAgICAgICAgY29va2llU3RvcmUucmVtb3ZlKG5hbWUsIGNyb3NzX3N1YmRvbWFpbilcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBsb2NhbFN0b3JlLmVycm9yKGVycilcbiAgICAgICAgfVxuICAgIH0sXG59XG5cbmNvbnN0IG1lbW9yeVN0b3JhZ2U6IFByb3BlcnRpZXMgPSB7fVxuXG4vLyBTdG9yYWdlIHRoYXQgb25seSBsYXN0cyB0aGUgbGVuZ3RoIG9mIHRoZSBwYWdldmlldyBpZiB3ZSBkb24ndCB3YW50IHRvIHVzZSBjb29raWVzXG5leHBvcnQgY29uc3QgbWVtb3J5U3RvcmU6IFBlcnNpc3RlbnRTdG9yZSA9IHtcbiAgICBpc19zdXBwb3J0ZWQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICB9LFxuXG4gICAgZXJyb3I6IGZ1bmN0aW9uIChtc2cpIHtcbiAgICAgICAgbG9nZ2VyLmVycm9yKCdtZW1vcnlTdG9yYWdlIGVycm9yOiAnICsgbXNnKVxuICAgIH0sXG5cbiAgICBnZXQ6IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIHJldHVybiBtZW1vcnlTdG9yYWdlW25hbWVdIHx8IG51bGxcbiAgICB9LFxuXG4gICAgcGFyc2U6IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIHJldHVybiBtZW1vcnlTdG9yYWdlW25hbWVdIHx8IG51bGxcbiAgICB9LFxuXG4gICAgc2V0OiBmdW5jdGlvbiAobmFtZSwgdmFsdWUpIHtcbiAgICAgICAgbWVtb3J5U3RvcmFnZVtuYW1lXSA9IHZhbHVlXG4gICAgfSxcblxuICAgIHJlbW92ZTogZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgZGVsZXRlIG1lbW9yeVN0b3JhZ2VbbmFtZV1cbiAgICB9LFxufVxuXG5sZXQgc2Vzc2lvblN0b3JhZ2VTdXBwb3J0ZWQ6IGJvb2xlYW4gfCBudWxsID0gbnVsbFxuZXhwb3J0IGNvbnN0IHJlc2V0U2Vzc2lvblN0b3JhZ2VTdXBwb3J0ZWQgPSAoKSA9PiB7XG4gICAgc2Vzc2lvblN0b3JhZ2VTdXBwb3J0ZWQgPSBudWxsXG59XG4vLyBTdG9yYWdlIHRoYXQgb25seSBsYXN0cyB0aGUgbGVuZ3RoIG9mIGEgdGFiL3dpbmRvdy4gU3Vydml2ZXMgcGFnZSByZWZyZXNoZXNcbmV4cG9ydCBjb25zdCBzZXNzaW9uU3RvcmU6IFBlcnNpc3RlbnRTdG9yZSA9IHtcbiAgICBpc19zdXBwb3J0ZWQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCFfaXNOdWxsKHNlc3Npb25TdG9yYWdlU3VwcG9ydGVkKSkge1xuICAgICAgICAgICAgcmV0dXJuIHNlc3Npb25TdG9yYWdlU3VwcG9ydGVkXG4gICAgICAgIH1cbiAgICAgICAgc2Vzc2lvblN0b3JhZ2VTdXBwb3J0ZWQgPSB0cnVlXG4gICAgICAgIGlmICghX2lzVW5kZWZpbmVkKHdpbmRvdykpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gJ19fc3VwcG9ydF9fJyxcbiAgICAgICAgICAgICAgICAgICAgdmFsID0gJ3h5eidcbiAgICAgICAgICAgICAgICBzZXNzaW9uU3RvcmUuc2V0KGtleSwgdmFsKVxuICAgICAgICAgICAgICAgIGlmIChzZXNzaW9uU3RvcmUuZ2V0KGtleSkgIT09ICdcInh5elwiJykge1xuICAgICAgICAgICAgICAgICAgICBzZXNzaW9uU3RvcmFnZVN1cHBvcnRlZCA9IGZhbHNlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHNlc3Npb25TdG9yZS5yZW1vdmUoa2V5KVxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2VTdXBwb3J0ZWQgPSBmYWxzZVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2VTdXBwb3J0ZWQgPSBmYWxzZVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzZXNzaW9uU3RvcmFnZVN1cHBvcnRlZFxuICAgIH0sXG5cbiAgICBlcnJvcjogZnVuY3Rpb24gKG1zZykge1xuICAgICAgICBsb2dnZXIuZXJyb3IoJ3Nlc3Npb25TdG9yYWdlIGVycm9yOiAnLCBtc2cpXG4gICAgfSxcblxuICAgIGdldDogZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiB3aW5kb3c/LnNlc3Npb25TdG9yYWdlLmdldEl0ZW0obmFtZSlcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBzZXNzaW9uU3RvcmUuZXJyb3IoZXJyKVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsXG4gICAgfSxcblxuICAgIHBhcnNlOiBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2Uoc2Vzc2lvblN0b3JlLmdldChuYW1lKSkgfHwgbnVsbFxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIC8vIG5vb3BcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbFxuICAgIH0sXG5cbiAgICBzZXQ6IGZ1bmN0aW9uIChuYW1lLCB2YWx1ZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgd2luZG93Py5zZXNzaW9uU3RvcmFnZS5zZXRJdGVtKG5hbWUsIEpTT04uc3RyaW5naWZ5KHZhbHVlKSlcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBzZXNzaW9uU3RvcmUuZXJyb3IoZXJyKVxuICAgICAgICB9XG4gICAgfSxcblxuICAgIHJlbW92ZTogZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHdpbmRvdz8uc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbShuYW1lKVxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHNlc3Npb25TdG9yZS5lcnJvcihlcnIpXG4gICAgICAgIH1cbiAgICB9LFxufVxuIiwgImltcG9ydCB7IF9lYWNoLCBfaXNWYWxpZFJlZ2V4IH0gZnJvbSAnLi8nXG5cbmltcG9ydCB7IF9pc0FycmF5LCBfaXNGaWxlLCBfaXNVbmRlZmluZWQgfSBmcm9tICcuL3R5cGUtdXRpbHMnXG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tICcuL2xvZ2dlcidcbmltcG9ydCB7IGRvY3VtZW50LCBmZXRjaCwgWE1MSHR0cFJlcXVlc3QgfSBmcm9tICcuL2dsb2JhbHMnXG5cbmNvbnN0IGxvY2FsRG9tYWlucyA9IFsnbG9jYWxob3N0JywgJzEyNy4wLjAuMSddXG5cbmV4cG9ydCBjb25zdCBTVVBQT1JUU19YSFIgPSAhIShYTUxIdHRwUmVxdWVzdCAmJiAnd2l0aENyZWRlbnRpYWxzJyBpbiBuZXcgWE1MSHR0cFJlcXVlc3QoKSlcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjb21wYXQvY29tcGF0XG5leHBvcnQgY29uc3QgU1VQUE9SVFNfUkVRVUVTVCA9IFNVUFBPUlRTX1hIUiB8fCAhIWZldGNoXG5cbi8qKlxuICogSUUxMSBkb2Vzbid0IHN1cHBvcnQgYG5ldyBVUkxgXG4gKiBzbyB3ZSBjYW4gY3JlYXRlIGFuIGFuY2hvciBlbGVtZW50IGFuZCB1c2UgdGhhdCB0byBwYXJzZSB0aGUgVVJMXG4gKiB0aGVyZSdzIGEgbG90IG9mIG92ZXJsYXAgYmV0d2VlbiBIVE1MSHlwZXJsaW5rRWxlbWVudFV0aWxzIGFuZCBVUkxcbiAqIG1lYW5pbmcgdXNlZnVsIHByb3BlcnRpZXMgbGlrZSBgcGF0aG5hbWVgIGFyZSBhdmFpbGFibGUgb24gYm90aFxuICovXG5leHBvcnQgY29uc3QgY29udmVydFRvVVJMID0gKHVybDogc3RyaW5nKTogSFRNTEFuY2hvckVsZW1lbnQgfCBudWxsID0+IHtcbiAgICBjb25zdCBsb2NhdGlvbiA9IGRvY3VtZW50Py5jcmVhdGVFbGVtZW50KCdhJylcbiAgICBpZiAoX2lzVW5kZWZpbmVkKGxvY2F0aW9uKSkge1xuICAgICAgICByZXR1cm4gbnVsbFxuICAgIH1cblxuICAgIGxvY2F0aW9uLmhyZWYgPSB1cmxcbiAgICByZXR1cm4gbG9jYXRpb25cbn1cblxuZXhwb3J0IGNvbnN0IF9pc1VybE1hdGNoaW5nUmVnZXggPSBmdW5jdGlvbiAodXJsOiBzdHJpbmcsIHBhdHRlcm46IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIGlmICghX2lzVmFsaWRSZWdleChwYXR0ZXJuKSkgcmV0dXJuIGZhbHNlXG4gICAgcmV0dXJuIG5ldyBSZWdFeHAocGF0dGVybikudGVzdCh1cmwpXG59XG5cbmV4cG9ydCBjb25zdCBfZm9ybURhdGFUb1F1ZXJ5ID0gZnVuY3Rpb24gKGZvcm1kYXRhOiBSZWNvcmQ8c3RyaW5nLCBhbnk+IHwgRm9ybURhdGEsIGFyZ19zZXBhcmF0b3IgPSAnJicpOiBzdHJpbmcge1xuICAgIGxldCB1c2VfdmFsOiBzdHJpbmdcbiAgICBsZXQgdXNlX2tleTogc3RyaW5nXG4gICAgY29uc3QgdHBoX2Fycjogc3RyaW5nW10gPSBbXVxuXG4gICAgX2VhY2goZm9ybWRhdGEsIGZ1bmN0aW9uICh2YWw6IEZpbGUgfCBzdHJpbmcgfCB1bmRlZmluZWQsIGtleTogc3RyaW5nIHwgdW5kZWZpbmVkKSB7XG4gICAgICAgIC8vIHRoZSBrZXkgbWlnaHQgYmUgbGl0ZXJhbGx5IHRoZSBzdHJpbmcgdW5kZWZpbmVkIGZvciBlLmcuIGlmIHt1bmRlZmluZWQ6ICdzb21ldGhpbmcnfVxuICAgICAgICBpZiAoX2lzVW5kZWZpbmVkKHZhbCkgfHwgX2lzVW5kZWZpbmVkKGtleSkgfHwga2V5ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cblxuICAgICAgICB1c2VfdmFsID0gZW5jb2RlVVJJQ29tcG9uZW50KF9pc0ZpbGUodmFsKSA/IHZhbC5uYW1lIDogdmFsLnRvU3RyaW5nKCkpXG4gICAgICAgIHVzZV9rZXkgPSBlbmNvZGVVUklDb21wb25lbnQoa2V5KVxuICAgICAgICB0cGhfYXJyW3RwaF9hcnIubGVuZ3RoXSA9IHVzZV9rZXkgKyAnPScgKyB1c2VfdmFsXG4gICAgfSlcblxuICAgIHJldHVybiB0cGhfYXJyLmpvaW4oYXJnX3NlcGFyYXRvcilcbn1cblxuZXhwb3J0IGNvbnN0IF9nZXRRdWVyeVBhcmFtID0gZnVuY3Rpb24gKHVybDogc3RyaW5nLCBwYXJhbTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCB3aXRob3V0SGFzaDogc3RyaW5nID0gdXJsLnNwbGl0KCcjJylbMF0gfHwgJydcbiAgICBjb25zdCBxdWVyeVBhcmFtczogc3RyaW5nID0gd2l0aG91dEhhc2guc3BsaXQoJz8nKVsxXSB8fCAnJ1xuXG4gICAgY29uc3QgcXVlcnlQYXJ0cyA9IHF1ZXJ5UGFyYW1zLnNwbGl0KCcmJylcbiAgICBsZXQga2V5VmFsdWVQYWlyXG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHF1ZXJ5UGFydHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgcGFydHMgPSBxdWVyeVBhcnRzW2ldLnNwbGl0KCc9JylcbiAgICAgICAgaWYgKHBhcnRzWzBdID09PSBwYXJhbSkge1xuICAgICAgICAgICAga2V5VmFsdWVQYWlyID0gcGFydHNcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIV9pc0FycmF5KGtleVZhbHVlUGFpcikgfHwga2V5VmFsdWVQYWlyLmxlbmd0aCA8IDIpIHtcbiAgICAgICAgcmV0dXJuICcnXG4gICAgfSBlbHNlIHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IGtleVZhbHVlUGFpclsxXVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmVzdWx0ID0gZGVjb2RlVVJJQ29tcG9uZW50KHJlc3VsdClcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ1NraXBwaW5nIGRlY29kaW5nIGZvciBtYWxmb3JtZWQgcXVlcnkgcGFyYW06ICcgKyByZXN1bHQpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdC5yZXBsYWNlKC9cXCsvZywgJyAnKVxuICAgIH1cbn1cblxuZXhwb3J0IGNvbnN0IF9nZXRIYXNoUGFyYW0gPSBmdW5jdGlvbiAoaGFzaDogc3RyaW5nLCBwYXJhbTogc3RyaW5nKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgY29uc3QgbWF0Y2hlcyA9IGhhc2gubWF0Y2gobmV3IFJlZ0V4cChwYXJhbSArICc9KFteJl0qKScpKVxuICAgIHJldHVybiBtYXRjaGVzID8gbWF0Y2hlc1sxXSA6IG51bGxcbn1cblxuZXhwb3J0IGNvbnN0IGlzTG9jYWxob3N0ID0gKCk6IGJvb2xlYW4gPT4ge1xuICAgIHJldHVybiBsb2NhbERvbWFpbnMuaW5jbHVkZXMobG9jYXRpb24uaG9zdG5hbWUpXG59XG4iLCAiaW1wb3J0IHsgX2luY2x1ZGVzIH0gZnJvbSAnLi9pbmRleCdcbmltcG9ydCB7IF9pc0Z1bmN0aW9uLCBfaXNVbmRlZmluZWQgfSBmcm9tICcuL3R5cGUtdXRpbHMnXG5cbi8qKlxuICogdGhpcyBkZXZpY2UgZGV0ZWN0aW9uIGNvZGUgaXMgKGF0IHRpbWUgb2Ygd3JpdGluZykgYWJvdXQgMyUgb2YgdGhlIHNpemUgb2YgdGhlIGVudGlyZSBsaWJyYXJ5XG4gKiB0aGlzIGlzIG1vc3RseSBiZWNhdXNlIHRoZSBpZGVudGlmaWVycyB1c2VyIGluIHJlZ2V4ZXMgYW5kIHJlc3VsdHMgY2FuJ3QgYmUgbWluaWZpZWQgYXdheSBzaW5jZVxuICogdGhleSBoYXZlIG1lYW5pbmdcbiAqXG4gKiBzbywgdGhlcmUgYXJlIHNvbWUgcHJlLXVnbGlmeWluZyBjaG9pY2VzIGluIHRoZSBjb2RlIHRvIGhlbHAgcmVkdWNlIHRoZSBzaXplXG4gKiBlLmcuIG1hbnkgcmVwZWF0ZWQgc3RyaW5ncyBhcmUgc3RvcmVkIGFzIHZhcmlhYmxlcyBhbmQgdGhlbiBvbGQtZmFzaGlvbmVkIGNvbmNhdGVuYXRlZCB0b2dldGhlclxuICpcbiAqIFRMO0RSIGhlcmUgYmUgZHJhZ29uc1xuICovXG5jb25zdCBGQUNFQk9PSyA9ICdGYWNlYm9vaydcbmNvbnN0IE1PQklMRSA9ICdNb2JpbGUnXG5jb25zdCBJT1MgPSAnaU9TJ1xuY29uc3QgQU5EUk9JRCA9ICdBbmRyb2lkJ1xuY29uc3QgVEFCTEVUID0gJ1RhYmxldCdcbmNvbnN0IEFORFJPSURfVEFCTEVUID0gQU5EUk9JRCArICcgJyArIFRBQkxFVFxuY29uc3QgSVBBRCA9ICdpUGFkJ1xuY29uc3QgQVBQTEUgPSAnQXBwbGUnXG5jb25zdCBBUFBMRV9XQVRDSCA9IEFQUExFICsgJyBXYXRjaCdcbmNvbnN0IFNBRkFSSSA9ICdTYWZhcmknXG5jb25zdCBCTEFDS0JFUlJZID0gJ0JsYWNrQmVycnknXG5jb25zdCBTQU1TVU5HID0gJ1NhbXN1bmcnXG5jb25zdCBTQU1TVU5HX0JST1dTRVIgPSBTQU1TVU5HICsgJ0Jyb3dzZXInXG5jb25zdCBTQU1TVU5HX0lOVEVSTkVUID0gU0FNU1VORyArICcgSW50ZXJuZXQnXG5jb25zdCBDSFJPTUUgPSAnQ2hyb21lJ1xuY29uc3QgQ0hST01FX09TID0gQ0hST01FICsgJyBPUydcbmNvbnN0IENIUk9NRV9JT1MgPSBDSFJPTUUgKyAnICcgKyBJT1NcbmNvbnN0IElOVEVSTkVUX0VYUExPUkVSID0gJ0ludGVybmV0IEV4cGxvcmVyJ1xuY29uc3QgSU5URVJORVRfRVhQTE9SRVJfTU9CSUxFID0gSU5URVJORVRfRVhQTE9SRVIgKyAnICcgKyBNT0JJTEVcbmNvbnN0IE9QRVJBID0gJ09wZXJhJ1xuY29uc3QgT1BFUkFfTUlOSSA9IE9QRVJBICsgJyBNaW5pJ1xuY29uc3QgRURHRSA9ICdFZGdlJ1xuY29uc3QgTUlDUk9TT0ZUX0VER0UgPSAnTWljcm9zb2Z0ICcgKyBFREdFXG5jb25zdCBGSVJFRk9YID0gJ0ZpcmVmb3gnXG5jb25zdCBGSVJFRk9YX0lPUyA9IEZJUkVGT1ggKyAnICcgKyBJT1NcbmNvbnN0IE5JTlRFTkRPID0gJ05pbnRlbmRvJ1xuY29uc3QgUExBWVNUQVRJT04gPSAnUGxheVN0YXRpb24nXG5jb25zdCBYQk9YID0gJ1hib3gnXG5jb25zdCBBTkRST0lEX01PQklMRSA9IEFORFJPSUQgKyAnICcgKyBNT0JJTEVcbmNvbnN0IE1PQklMRV9TQUZBUkkgPSBNT0JJTEUgKyAnICcgKyBTQUZBUklcbmNvbnN0IFdJTkRPV1MgPSAnV2luZG93cydcbmNvbnN0IFdJTkRPV1NfUEhPTkUgPSBXSU5ET1dTICsgJyBQaG9uZSdcbmNvbnN0IE5PS0lBID0gJ05va2lhJ1xuY29uc3QgT1VZQSA9ICdPdXlhJ1xuY29uc3QgR0VORVJJQyA9ICdHZW5lcmljJ1xuY29uc3QgR0VORVJJQ19NT0JJTEUgPSBHRU5FUklDICsgJyAnICsgTU9CSUxFLnRvTG93ZXJDYXNlKClcbmNvbnN0IEdFTkVSSUNfVEFCTEVUID0gR0VORVJJQyArICcgJyArIFRBQkxFVC50b0xvd2VyQ2FzZSgpXG5jb25zdCBLT05RVUVST1IgPSAnS29ucXVlcm9yJ1xuXG5jb25zdCBCUk9XU0VSX1ZFUlNJT05fUkVHRVhfU1VGRklYID0gJyhcXFxcZCsoXFxcXC5cXFxcZCspPyknXG5jb25zdCBERUZBVUxUX0JST1dTRVJfVkVSU0lPTl9SRUdFWCA9IG5ldyBSZWdFeHAoJ1ZlcnNpb24vJyArIEJST1dTRVJfVkVSU0lPTl9SRUdFWF9TVUZGSVgpXG5cbmNvbnN0IFhCT1hfUkVHRVggPSBuZXcgUmVnRXhwKFhCT1gsICdpJylcbmNvbnN0IFBMQVlTVEFUSU9OX1JFR0VYID0gbmV3IFJlZ0V4cChQTEFZU1RBVElPTiArICcgXFxcXHcrJywgJ2knKVxuY29uc3QgTklOVEVORE9fUkVHRVggPSBuZXcgUmVnRXhwKE5JTlRFTkRPICsgJyBcXFxcdysnLCAnaScpXG5jb25zdCBCTEFDS0JFUlJZX1JFR0VYID0gbmV3IFJlZ0V4cChCTEFDS0JFUlJZICsgJ3xQbGF5Qm9va3xCQjEwJywgJ2knKVxuXG5jb25zdCB3aW5kb3dzVmVyc2lvbk1hcDogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgICAnTlQzLjUxJzogJ05UIDMuMTEnLFxuICAgICdOVDQuMCc6ICdOVCA0LjAnLFxuICAgICc1LjAnOiAnMjAwMCcsXG4gICAgJzUuMSc6ICdYUCcsXG4gICAgJzUuMic6ICdYUCcsXG4gICAgJzYuMCc6ICdWaXN0YScsXG4gICAgJzYuMSc6ICc3JyxcbiAgICAnNi4yJzogJzgnLFxuICAgICc2LjMnOiAnOC4xJyxcbiAgICAnNi40JzogJzEwJyxcbiAgICAnMTAuMCc6ICcxMCcsXG59XG5cbi8qKlxuICogU2FmYXJpIGRldGVjdGlvbiB0dXJucyBvdXQgdG8gYmUgY29tcGxpY2F0ZWQuIEZvciBlLmcuIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yOTY5NjUwOVxuICogV2UgY2FuIGJlIHNsaWdodGx5IGxvb3NlIGJlY2F1c2Ugc29tZSBvcHRpb25zIGhhdmUgYmVlbiBydWxlZCBvdXQgKGUuZy4gZmlyZWZveCBvbiBpT1MpXG4gKiBiZWZvcmUgdGhpcyBjaGVjayBpcyBtYWRlXG4gKi9cbmZ1bmN0aW9uIGlzU2FmYXJpKHVzZXJBZ2VudDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIF9pbmNsdWRlcyh1c2VyQWdlbnQsIFNBRkFSSSkgJiYgIV9pbmNsdWRlcyh1c2VyQWdlbnQsIENIUk9NRSkgJiYgIV9pbmNsdWRlcyh1c2VyQWdlbnQsIEFORFJPSUQpXG59XG5cbmNvbnN0IHNhZmFyaUNoZWNrID0gKHVhOiBzdHJpbmcsIHZlbmRvcj86IHN0cmluZykgPT4gKHZlbmRvciAmJiBfaW5jbHVkZXModmVuZG9yLCBBUFBMRSkpIHx8IGlzU2FmYXJpKHVhKVxuXG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gZGV0ZWN0cyB3aGljaCBicm93c2VyIGlzIHJ1bm5pbmcgdGhpcyBzY3JpcHQuXG4gKiBUaGUgb3JkZXIgb2YgdGhlIGNoZWNrcyBhcmUgaW1wb3J0YW50IHNpbmNlIG1hbnkgdXNlciBhZ2VudHNcbiAqIGluY2x1ZGUga2V5d29yZHMgdXNlZCBpbiBsYXRlciBjaGVja3MuXG4gKi9cbmV4cG9ydCBjb25zdCBkZXRlY3RCcm93c2VyID0gZnVuY3Rpb24gKHVzZXJfYWdlbnQ6IHN0cmluZywgdmVuZG9yOiBzdHJpbmcgfCB1bmRlZmluZWQsIG9wZXJhPzogYW55KTogc3RyaW5nIHtcbiAgICBpZiAob3BlcmEpIHtcbiAgICAgICAgcmV0dXJuIE9QRVJBXG4gICAgfVxuICAgIHZlbmRvciA9IHZlbmRvciB8fCAnJyAvLyB2ZW5kb3IgaXMgdW5kZWZpbmVkIGZvciBhdCBsZWFzdCBJRTlcblxuICAgIGlmIChfaW5jbHVkZXModXNlcl9hZ2VudCwgJyBPUFIvJykgJiYgX2luY2x1ZGVzKHVzZXJfYWdlbnQsICdNaW5pJykpIHtcbiAgICAgICAgcmV0dXJuIE9QRVJBX01JTklcbiAgICB9IGVsc2UgaWYgKF9pbmNsdWRlcyh1c2VyX2FnZW50LCAnIE9QUi8nKSkge1xuICAgICAgICByZXR1cm4gT1BFUkFcbiAgICB9IGVsc2UgaWYgKEJMQUNLQkVSUllfUkVHRVgudGVzdCh1c2VyX2FnZW50KSkge1xuICAgICAgICByZXR1cm4gQkxBQ0tCRVJSWVxuICAgIH0gZWxzZSBpZiAoX2luY2x1ZGVzKHVzZXJfYWdlbnQsICdJRScgKyBNT0JJTEUpIHx8IF9pbmNsdWRlcyh1c2VyX2FnZW50LCAnV1BEZXNrdG9wJykpIHtcbiAgICAgICAgcmV0dXJuIElOVEVSTkVUX0VYUExPUkVSX01PQklMRVxuICAgIH1cbiAgICAvLyBodHRwczovL2RldmVsb3Blci5zYW1zdW5nLmNvbS9pbnRlcm5ldC91c2VyLWFnZW50LXN0cmluZy1mb3JtYXRcbiAgICBlbHNlIGlmIChfaW5jbHVkZXModXNlcl9hZ2VudCwgU0FNU1VOR19CUk9XU0VSKSkge1xuICAgICAgICByZXR1cm4gU0FNU1VOR19JTlRFUk5FVFxuICAgIH0gZWxzZSBpZiAoX2luY2x1ZGVzKHVzZXJfYWdlbnQsIEVER0UpIHx8IF9pbmNsdWRlcyh1c2VyX2FnZW50LCAnRWRnLycpKSB7XG4gICAgICAgIHJldHVybiBNSUNST1NPRlRfRURHRVxuICAgIH0gZWxzZSBpZiAoX2luY2x1ZGVzKHVzZXJfYWdlbnQsICdGQklPUycpKSB7XG4gICAgICAgIHJldHVybiBGQUNFQk9PSyArICcgJyArIE1PQklMRVxuICAgIH0gZWxzZSBpZiAoX2luY2x1ZGVzKHVzZXJfYWdlbnQsIENIUk9NRSkpIHtcbiAgICAgICAgcmV0dXJuIENIUk9NRVxuICAgIH0gZWxzZSBpZiAoX2luY2x1ZGVzKHVzZXJfYWdlbnQsICdDcmlPUycpKSB7XG4gICAgICAgIHJldHVybiBDSFJPTUVfSU9TXG4gICAgfSBlbHNlIGlmIChfaW5jbHVkZXModXNlcl9hZ2VudCwgJ1VDV0VCJykgfHwgX2luY2x1ZGVzKHVzZXJfYWdlbnQsICdVQ0Jyb3dzZXInKSkge1xuICAgICAgICByZXR1cm4gJ1VDIEJyb3dzZXInXG4gICAgfSBlbHNlIGlmIChfaW5jbHVkZXModXNlcl9hZ2VudCwgJ0Z4aU9TJykpIHtcbiAgICAgICAgcmV0dXJuIEZJUkVGT1hfSU9TXG4gICAgfSBlbHNlIGlmIChfaW5jbHVkZXModXNlcl9hZ2VudCwgQU5EUk9JRCkpIHtcbiAgICAgICAgcmV0dXJuIEFORFJPSURfTU9CSUxFXG4gICAgfSBlbHNlIGlmIChfaW5jbHVkZXModXNlcl9hZ2VudC50b0xvd2VyQ2FzZSgpLCBLT05RVUVST1IudG9Mb3dlckNhc2UoKSkpIHtcbiAgICAgICAgcmV0dXJuIEtPTlFVRVJPUlxuICAgIH0gZWxzZSBpZiAoc2FmYXJpQ2hlY2sodXNlcl9hZ2VudCwgdmVuZG9yKSkge1xuICAgICAgICByZXR1cm4gX2luY2x1ZGVzKHVzZXJfYWdlbnQsIE1PQklMRSkgPyBNT0JJTEVfU0FGQVJJIDogU0FGQVJJXG4gICAgfSBlbHNlIGlmIChfaW5jbHVkZXModXNlcl9hZ2VudCwgRklSRUZPWCkpIHtcbiAgICAgICAgcmV0dXJuIEZJUkVGT1hcbiAgICB9IGVsc2UgaWYgKF9pbmNsdWRlcyh1c2VyX2FnZW50LCAnTVNJRScpIHx8IF9pbmNsdWRlcyh1c2VyX2FnZW50LCAnVHJpZGVudC8nKSkge1xuICAgICAgICByZXR1cm4gSU5URVJORVRfRVhQTE9SRVJcbiAgICB9IGVsc2UgaWYgKF9pbmNsdWRlcyh1c2VyX2FnZW50LCAnR2Vja28nKSkge1xuICAgICAgICByZXR1cm4gRklSRUZPWFxuICAgIH1cblxuICAgIHJldHVybiAnJ1xufVxuXG5jb25zdCB2ZXJzaW9uUmVnZXhlczogUmVjb3JkPHN0cmluZywgUmVnRXhwW10+ID0ge1xuICAgIFtJTlRFUk5FVF9FWFBMT1JFUl9NT0JJTEVdOiBbbmV3IFJlZ0V4cCgncnY6JyArIEJST1dTRVJfVkVSU0lPTl9SRUdFWF9TVUZGSVgpXSxcbiAgICBbTUlDUk9TT0ZUX0VER0VdOiBbbmV3IFJlZ0V4cChFREdFICsgJz9cXFxcLycgKyBCUk9XU0VSX1ZFUlNJT05fUkVHRVhfU1VGRklYKV0sXG4gICAgW0NIUk9NRV06IFtuZXcgUmVnRXhwKENIUk9NRSArICcvJyArIEJST1dTRVJfVkVSU0lPTl9SRUdFWF9TVUZGSVgpXSxcbiAgICBbQ0hST01FX0lPU106IFtuZXcgUmVnRXhwKCdDcmlPU1xcXFwvJyArIEJST1dTRVJfVkVSU0lPTl9SRUdFWF9TVUZGSVgpXSxcbiAgICAnVUMgQnJvd3Nlcic6IFtuZXcgUmVnRXhwKCcoVUNCcm93c2VyfFVDV0VCKVxcXFwvJyArIEJST1dTRVJfVkVSU0lPTl9SRUdFWF9TVUZGSVgpXSxcbiAgICBbU0FGQVJJXTogW0RFRkFVTFRfQlJPV1NFUl9WRVJTSU9OX1JFR0VYXSxcbiAgICBbTU9CSUxFX1NBRkFSSV06IFtERUZBVUxUX0JST1dTRVJfVkVSU0lPTl9SRUdFWF0sXG4gICAgW09QRVJBXTogW25ldyBSZWdFeHAoJygnICsgT1BFUkEgKyAnfE9QUilcXFxcLycgKyBCUk9XU0VSX1ZFUlNJT05fUkVHRVhfU1VGRklYKV0sXG4gICAgW0ZJUkVGT1hdOiBbbmV3IFJlZ0V4cChGSVJFRk9YICsgJ1xcXFwvJyArIEJST1dTRVJfVkVSU0lPTl9SRUdFWF9TVUZGSVgpXSxcbiAgICBbRklSRUZPWF9JT1NdOiBbbmV3IFJlZ0V4cCgnRnhpT1NcXFxcLycgKyBCUk9XU0VSX1ZFUlNJT05fUkVHRVhfU1VGRklYKV0sXG4gICAgW0tPTlFVRVJPUl06IFtuZXcgUmVnRXhwKCdLb25xdWVyb3JbOi9dPycgKyBCUk9XU0VSX1ZFUlNJT05fUkVHRVhfU1VGRklYLCAnaScpXSxcbiAgICAvLyBub3QgZXZlcnkgYmxhY2tiZXJyeSB1c2VyIGFnZW50IGhhcyB0aGUgdmVyc2lvbiBhZnRlciB0aGUgbmFtZVxuICAgIFtCTEFDS0JFUlJZXTogW25ldyBSZWdFeHAoQkxBQ0tCRVJSWSArICcgJyArIEJST1dTRVJfVkVSU0lPTl9SRUdFWF9TVUZGSVgpLCBERUZBVUxUX0JST1dTRVJfVkVSU0lPTl9SRUdFWF0sXG4gICAgW0FORFJPSURfTU9CSUxFXTogW25ldyBSZWdFeHAoJ2FuZHJvaWRcXFxccycgKyBCUk9XU0VSX1ZFUlNJT05fUkVHRVhfU1VGRklYKV0sXG4gICAgW1NBTVNVTkdfSU5URVJORVRdOiBbbmV3IFJlZ0V4cChTQU1TVU5HX0JST1dTRVIgKyAnXFxcXC8nICsgQlJPV1NFUl9WRVJTSU9OX1JFR0VYX1NVRkZJWCldLFxuICAgIFtJTlRFUk5FVF9FWFBMT1JFUl06IFtuZXcgUmVnRXhwKCcocnY6fE1TSUUgKScgKyBCUk9XU0VSX1ZFUlNJT05fUkVHRVhfU1VGRklYKV0sXG4gICAgTW96aWxsYTogW25ldyBSZWdFeHAoJ3J2OicgKyBCUk9XU0VSX1ZFUlNJT05fUkVHRVhfU1VGRklYKV0sXG59XG5cbi8qKlxuICogVGhpcyBmdW5jdGlvbiBkZXRlY3RzIHdoaWNoIGJyb3dzZXIgdmVyc2lvbiBpcyBydW5uaW5nIHRoaXMgc2NyaXB0LFxuICogcGFyc2luZyBtYWpvciBhbmQgbWlub3IgdmVyc2lvbiAoZS5nLiwgNDIuMSkuIFVzZXIgYWdlbnQgc3RyaW5ncyBmcm9tOlxuICogaHR0cDovL3d3dy51c2VyYWdlbnRzdHJpbmcuY29tL3BhZ2VzL3VzZXJhZ2VudHN0cmluZy5waHBcbiAqXG4gKiBgbmF2aWdhdG9yLnZlbmRvcmAgaXMgcGFzc2VkIGluIGFuZCB1c2VkIHRvIGhlbHAgd2l0aCBkZXRlY3RpbmcgY2VydGFpbiBicm93c2Vyc1xuICogTkIgYG5hdmlnYXRvci52ZW5kb3JgIGlzIGRlcHJlY2F0ZWQgYW5kIG5vdCBwcmVzZW50IGluIGV2ZXJ5IGJyb3dzZXJcbiAqL1xuZXhwb3J0IGNvbnN0IGRldGVjdEJyb3dzZXJWZXJzaW9uID0gZnVuY3Rpb24gKFxuICAgIHVzZXJBZ2VudDogc3RyaW5nLFxuICAgIHZlbmRvcjogc3RyaW5nIHwgdW5kZWZpbmVkLFxuICAgIG9wZXJhOiBzdHJpbmdcbik6IG51bWJlciB8IG51bGwge1xuICAgIGNvbnN0IGJyb3dzZXIgPSBkZXRlY3RCcm93c2VyKHVzZXJBZ2VudCwgdmVuZG9yLCBvcGVyYSlcbiAgICBjb25zdCByZWdleGVzOiBSZWdFeHBbXSB8IHVuZGVmaW5lZCA9IHZlcnNpb25SZWdleGVzW2Jyb3dzZXIgYXMga2V5b2YgdHlwZW9mIHZlcnNpb25SZWdleGVzXVxuICAgIGlmIChfaXNVbmRlZmluZWQocmVnZXhlcykpIHtcbiAgICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlZ2V4ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgcmVnZXggPSByZWdleGVzW2ldXG4gICAgICAgIGNvbnN0IG1hdGNoZXMgPSB1c2VyQWdlbnQubWF0Y2gocmVnZXgpXG4gICAgICAgIGlmIChtYXRjaGVzKSB7XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VGbG9hdChtYXRjaGVzW21hdGNoZXMubGVuZ3RoIC0gMl0pXG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbn1cblxuLy8gdG8gYXZvaWQgcmVwZWF0aW5nIHJlZ2V4ZXMgb3IgY2FsbGluZyB0aGVtIHR3aWNlLCB3ZSBoYXZlIGFuIGFycmF5IG9mIG1hdGNoZXNcbi8vIHRoZSBmaXJzdCByZWdleCB0aGF0IG1hdGNoZXMgdXNlcyBpdHMgbWF0Y2hlciBmdW5jdGlvbiB0byByZXR1cm4gdGhlIHJlc3VsdFxuY29uc3Qgb3NNYXRjaGVyczogW1xuICAgIFJlZ0V4cCxcbiAgICBbc3RyaW5nLCBzdHJpbmddIHwgKChtYXRjaDogUmVnRXhwTWF0Y2hBcnJheSB8IG51bGwsIHVzZXJfYWdlbnQ6IHN0cmluZykgPT4gW3N0cmluZywgc3RyaW5nXSlcbl1bXSA9IFtcbiAgICBbXG4gICAgICAgIG5ldyBSZWdFeHAoWEJPWCArICc7ICcgKyBYQk9YICsgJyAoLio/KVspO10nLCAnaScpLFxuICAgICAgICAobWF0Y2gpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBbWEJPWCwgKG1hdGNoICYmIG1hdGNoWzFdKSB8fCAnJ11cbiAgICAgICAgfSxcbiAgICBdLFxuICAgIFtuZXcgUmVnRXhwKE5JTlRFTkRPLCAnaScpLCBbTklOVEVORE8sICcnXV0sXG4gICAgW25ldyBSZWdFeHAoUExBWVNUQVRJT04sICdpJyksIFtQTEFZU1RBVElPTiwgJyddXSxcbiAgICBbQkxBQ0tCRVJSWV9SRUdFWCwgW0JMQUNLQkVSUlksICcnXV0sXG4gICAgW1xuICAgICAgICBuZXcgUmVnRXhwKFdJTkRPV1MsICdpJyksXG4gICAgICAgIChfLCB1c2VyX2FnZW50KSA9PiB7XG4gICAgICAgICAgICBpZiAoL1Bob25lLy50ZXN0KHVzZXJfYWdlbnQpIHx8IC9XUERlc2t0b3AvLnRlc3QodXNlcl9hZ2VudCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gW1dJTkRPV1NfUEhPTkUsICcnXVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gbm90IGFsbCBKUyB2ZXJzaW9ucyBzdXBwb3J0IG5lZ2F0aXZlIGxvb2tiZWhpbmQsIHNvIHdlIG5lZWQgdHdvIGNoZWNrcyBoZXJlXG4gICAgICAgICAgICBpZiAobmV3IFJlZ0V4cChNT0JJTEUpLnRlc3QodXNlcl9hZ2VudCkgJiYgIS9JRU1vYmlsZVxcYi8udGVzdCh1c2VyX2FnZW50KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBbV0lORE9XUyArICcgJyArIE1PQklMRSwgJyddXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBtYXRjaCA9IC9XaW5kb3dzIE5UIChbMC05Ll0rKS9pLmV4ZWModXNlcl9hZ2VudClcbiAgICAgICAgICAgIGlmIChtYXRjaCAmJiBtYXRjaFsxXSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHZlcnNpb24gPSBtYXRjaFsxXVxuICAgICAgICAgICAgICAgIGxldCBvc1ZlcnNpb24gPSB3aW5kb3dzVmVyc2lvbk1hcFt2ZXJzaW9uXSB8fCAnJ1xuICAgICAgICAgICAgICAgIGlmICgvYXJtL2kudGVzdCh1c2VyX2FnZW50KSkge1xuICAgICAgICAgICAgICAgICAgICBvc1ZlcnNpb24gPSAnUlQnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBbV0lORE9XUywgb3NWZXJzaW9uXVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFtXSU5ET1dTLCAnJ11cbiAgICAgICAgfSxcbiAgICBdLFxuICAgIFtcbiAgICAgICAgLygoaVBob25lfGlQYWR8aVBvZCkuKj9PUyAoXFxkKylfKFxcZCspXz8oXFxkKyk/fGlQaG9uZSkvLFxuICAgICAgICAobWF0Y2gpID0+IHtcbiAgICAgICAgICAgIGlmIChtYXRjaCAmJiBtYXRjaFszXSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHZlcnNpb25QYXJ0cyA9IFttYXRjaFszXSwgbWF0Y2hbNF0sIG1hdGNoWzVdIHx8ICcwJ11cbiAgICAgICAgICAgICAgICByZXR1cm4gW0lPUywgdmVyc2lvblBhcnRzLmpvaW4oJy4nKV1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBbSU9TLCAnJ11cbiAgICAgICAgfSxcbiAgICBdLFxuICAgIFtcbiAgICAgICAgLyh3YXRjaC4qXFwvKFxcZCtcXC5cXGQrXFwuXFxkKyl8d2F0Y2ggb3MsKFxcZCtcXC5cXGQrKSwpL2ksXG4gICAgICAgIChtYXRjaCkgPT4ge1xuICAgICAgICAgICAgLy8gZS5nLiBXYXRjaDQsMy81LjMuOCAoMTZVNjgwKVxuICAgICAgICAgICAgbGV0IHZlcnNpb24gPSAnJ1xuICAgICAgICAgICAgaWYgKG1hdGNoICYmIG1hdGNoLmxlbmd0aCA+PSAzKSB7XG4gICAgICAgICAgICAgICAgdmVyc2lvbiA9IF9pc1VuZGVmaW5lZChtYXRjaFsyXSkgPyBtYXRjaFszXSA6IG1hdGNoWzJdXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gWyd3YXRjaE9TJywgdmVyc2lvbl1cbiAgICAgICAgfSxcbiAgICBdLFxuICAgIFtcbiAgICAgICAgbmV3IFJlZ0V4cCgnKCcgKyBBTkRST0lEICsgJyAoXFxcXGQrKVxcXFwuKFxcXFxkKylcXFxcLj8oXFxcXGQrKT98JyArIEFORFJPSUQgKyAnKScsICdpJyksXG4gICAgICAgIChtYXRjaCkgPT4ge1xuICAgICAgICAgICAgaWYgKG1hdGNoICYmIG1hdGNoWzJdKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdmVyc2lvblBhcnRzID0gW21hdGNoWzJdLCBtYXRjaFszXSwgbWF0Y2hbNF0gfHwgJzAnXVxuICAgICAgICAgICAgICAgIHJldHVybiBbQU5EUk9JRCwgdmVyc2lvblBhcnRzLmpvaW4oJy4nKV1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBbQU5EUk9JRCwgJyddXG4gICAgICAgIH0sXG4gICAgXSxcbiAgICBbXG4gICAgICAgIC9NYWMgT1MgWCAoXFxkKylbXy5dKFxcZCspW18uXT8oXFxkKyk/L2ksXG4gICAgICAgIChtYXRjaCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0OiBbc3RyaW5nLCBzdHJpbmddID0gWydNYWMgT1MgWCcsICcnXVxuICAgICAgICAgICAgaWYgKG1hdGNoICYmIG1hdGNoWzFdKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdmVyc2lvblBhcnRzID0gW21hdGNoWzFdLCBtYXRjaFsyXSwgbWF0Y2hbM10gfHwgJzAnXVxuICAgICAgICAgICAgICAgIHJlc3VsdFsxXSA9IHZlcnNpb25QYXJ0cy5qb2luKCcuJylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHRcbiAgICAgICAgfSxcbiAgICBdLFxuICAgIFtcbiAgICAgICAgL01hYy9pLFxuICAgICAgICAvLyBtb3AgdXAgYSBmZXcgbm9uLXN0YW5kYXJkIFVBcyB0aGF0IHNob3VsZCBtYXRjaCBtYWNcbiAgICAgICAgWydNYWMgT1MgWCcsICcnXSxcbiAgICBdLFxuICAgIFsvQ3JPUy8sIFtDSFJPTUVfT1MsICcnXV0sXG4gICAgWy9MaW51eHxkZWJpYW4vaSwgWydMaW51eCcsICcnXV0sXG5dXG5cbmV4cG9ydCBjb25zdCBkZXRlY3RPUyA9IGZ1bmN0aW9uICh1c2VyX2FnZW50OiBzdHJpbmcpOiBbc3RyaW5nLCBzdHJpbmddIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG9zTWF0Y2hlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgW3JnZXgsIHJlc3VsdE9yRm5dID0gb3NNYXRjaGVyc1tpXVxuICAgICAgICBjb25zdCBtYXRjaCA9IHJnZXguZXhlYyh1c2VyX2FnZW50KVxuICAgICAgICBjb25zdCByZXN1bHQgPSBtYXRjaCAmJiAoX2lzRnVuY3Rpb24ocmVzdWx0T3JGbikgPyByZXN1bHRPckZuKG1hdGNoLCB1c2VyX2FnZW50KSA6IHJlc3VsdE9yRm4pXG4gICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHRcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gWycnLCAnJ11cbn1cblxuZXhwb3J0IGNvbnN0IGRldGVjdERldmljZSA9IGZ1bmN0aW9uICh1c2VyX2FnZW50OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGlmIChOSU5URU5ET19SRUdFWC50ZXN0KHVzZXJfYWdlbnQpKSB7XG4gICAgICAgIHJldHVybiBOSU5URU5ET1xuICAgIH0gZWxzZSBpZiAoUExBWVNUQVRJT05fUkVHRVgudGVzdCh1c2VyX2FnZW50KSkge1xuICAgICAgICByZXR1cm4gUExBWVNUQVRJT05cbiAgICB9IGVsc2UgaWYgKFhCT1hfUkVHRVgudGVzdCh1c2VyX2FnZW50KSkge1xuICAgICAgICByZXR1cm4gWEJPWFxuICAgIH0gZWxzZSBpZiAobmV3IFJlZ0V4cChPVVlBLCAnaScpLnRlc3QodXNlcl9hZ2VudCkpIHtcbiAgICAgICAgcmV0dXJuIE9VWUFcbiAgICB9IGVsc2UgaWYgKG5ldyBSZWdFeHAoJygnICsgV0lORE9XU19QSE9ORSArICd8V1BEZXNrdG9wKScsICdpJykudGVzdCh1c2VyX2FnZW50KSkge1xuICAgICAgICByZXR1cm4gV0lORE9XU19QSE9ORVxuICAgIH0gZWxzZSBpZiAoL2lQYWQvLnRlc3QodXNlcl9hZ2VudCkpIHtcbiAgICAgICAgcmV0dXJuIElQQURcbiAgICB9IGVsc2UgaWYgKC9pUG9kLy50ZXN0KHVzZXJfYWdlbnQpKSB7XG4gICAgICAgIHJldHVybiAnaVBvZCBUb3VjaCdcbiAgICB9IGVsc2UgaWYgKC9pUGhvbmUvLnRlc3QodXNlcl9hZ2VudCkpIHtcbiAgICAgICAgcmV0dXJuICdpUGhvbmUnXG4gICAgfSBlbHNlIGlmICgvKHdhdGNoKSg/OiA/b3NbLC9dfFxcZCxcXGRcXC8pW1xcZC5dKy9pLnRlc3QodXNlcl9hZ2VudCkpIHtcbiAgICAgICAgcmV0dXJuIEFQUExFX1dBVENIXG4gICAgfSBlbHNlIGlmIChCTEFDS0JFUlJZX1JFR0VYLnRlc3QodXNlcl9hZ2VudCkpIHtcbiAgICAgICAgcmV0dXJuIEJMQUNLQkVSUllcbiAgICB9IGVsc2UgaWYgKC8oa29ibylcXHMoZXJlYWRlcnx0b3VjaCkvaS50ZXN0KHVzZXJfYWdlbnQpKSB7XG4gICAgICAgIHJldHVybiAnS29ibydcbiAgICB9IGVsc2UgaWYgKG5ldyBSZWdFeHAoTk9LSUEsICdpJykudGVzdCh1c2VyX2FnZW50KSkge1xuICAgICAgICByZXR1cm4gTk9LSUFcbiAgICB9IGVsc2UgaWYgKFxuICAgICAgICAvLyBLaW5kbGUgRmlyZSB3aXRob3V0IFNpbGsgLyBFY2hvIFNob3dcbiAgICAgICAgLyhrZlthLXpdezJ9d2l8YWVvW2Mtcl17Mn0pKCBidWl8XFwpKS9pLnRlc3QodXNlcl9hZ2VudCkgfHxcbiAgICAgICAgLy8gS2luZGxlIEZpcmUgSERcbiAgICAgICAgLyhrZlthLXpdKykoIGJ1aXxcXCkpLitzaWxrXFwvL2kudGVzdCh1c2VyX2FnZW50KVxuICAgICkge1xuICAgICAgICByZXR1cm4gJ0tpbmRsZSBGaXJlJ1xuICAgIH0gZWxzZSBpZiAoLyhBbmRyb2lkfFpURSkvaS50ZXN0KHVzZXJfYWdlbnQpKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgICFuZXcgUmVnRXhwKE1PQklMRSkudGVzdCh1c2VyX2FnZW50KSB8fFxuICAgICAgICAgICAgLyg5MTM4QnxUQjc4MkJ8TmV4dXMgWzk3XXxwaXhlbCBjfEhVQVdFSVNIVHxCVFZ8bm9ibGUgbm9va3xzbWFydCB1bHRyYSA2KS9pLnRlc3QodXNlcl9hZ2VudClcbiAgICAgICAgKSB7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgKC9waXhlbFtcXGRheGwgXXsxLDZ9L2kudGVzdCh1c2VyX2FnZW50KSAmJiAhL3BpeGVsIGMvaS50ZXN0KHVzZXJfYWdlbnQpKSB8fFxuICAgICAgICAgICAgICAgIC8oaHVhd2VpbWVkLWFsMDB8dGFoLXxBUEF8U00tRzkyfGk5ODB8enRlfFUzMDRBQSkvaS50ZXN0KHVzZXJfYWdlbnQpIHx8XG4gICAgICAgICAgICAgICAgKC9sbXk0N3YvaS50ZXN0KHVzZXJfYWdlbnQpICYmICEvUVRBUVozL2kudGVzdCh1c2VyX2FnZW50KSlcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHJldHVybiBBTkRST0lEXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gQU5EUk9JRF9UQUJMRVRcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBBTkRST0lEXG4gICAgICAgIH1cbiAgICB9IGVsc2UgaWYgKG5ldyBSZWdFeHAoJyhwZGF8JyArIE1PQklMRSArICcpJywgJ2knKS50ZXN0KHVzZXJfYWdlbnQpKSB7XG4gICAgICAgIHJldHVybiBHRU5FUklDX01PQklMRVxuICAgIH0gZWxzZSBpZiAobmV3IFJlZ0V4cChUQUJMRVQsICdpJykudGVzdCh1c2VyX2FnZW50KSAmJiAhbmV3IFJlZ0V4cChUQUJMRVQgKyAnIHBjJywgJ2knKS50ZXN0KHVzZXJfYWdlbnQpKSB7XG4gICAgICAgIHJldHVybiBHRU5FUklDX1RBQkxFVFxuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAnJ1xuICAgIH1cbn1cblxuZXhwb3J0IGNvbnN0IGRldGVjdERldmljZVR5cGUgPSBmdW5jdGlvbiAodXNlcl9hZ2VudDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCBkZXZpY2UgPSBkZXRlY3REZXZpY2UodXNlcl9hZ2VudClcbiAgICBpZiAoXG4gICAgICAgIGRldmljZSA9PT0gSVBBRCB8fFxuICAgICAgICBkZXZpY2UgPT09IEFORFJPSURfVEFCTEVUIHx8XG4gICAgICAgIGRldmljZSA9PT0gJ0tvYm8nIHx8XG4gICAgICAgIGRldmljZSA9PT0gJ0tpbmRsZSBGaXJlJyB8fFxuICAgICAgICBkZXZpY2UgPT09IEdFTkVSSUNfVEFCTEVUXG4gICAgKSB7XG4gICAgICAgIHJldHVybiBUQUJMRVRcbiAgICB9IGVsc2UgaWYgKGRldmljZSA9PT0gTklOVEVORE8gfHwgZGV2aWNlID09PSBYQk9YIHx8IGRldmljZSA9PT0gUExBWVNUQVRJT04gfHwgZGV2aWNlID09PSBPVVlBKSB7XG4gICAgICAgIHJldHVybiAnQ29uc29sZSdcbiAgICB9IGVsc2UgaWYgKGRldmljZSA9PT0gQVBQTEVfV0FUQ0gpIHtcbiAgICAgICAgcmV0dXJuICdXZWFyYWJsZSdcbiAgICB9IGVsc2UgaWYgKGRldmljZSkge1xuICAgICAgICByZXR1cm4gTU9CSUxFXG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuICdEZXNrdG9wJ1xuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBfZ2V0UXVlcnlQYXJhbSwgY29udmVydFRvVVJMIH0gZnJvbSAnLi9yZXF1ZXN0LXV0aWxzJ1xuaW1wb3J0IHsgX2lzTnVsbCB9IGZyb20gJy4vdHlwZS11dGlscydcbmltcG9ydCB7IFByb3BlcnRpZXMgfSBmcm9tICcuLi90eXBlcydcbmltcG9ydCBDb25maWcgZnJvbSAnLi4vY29uZmlnJ1xuaW1wb3J0IHsgX2VhY2gsIF9leHRlbmQsIF9zdHJpcF9lbXB0eV9wcm9wZXJ0aWVzLCBfdGltZXN0YW1wIH0gZnJvbSAnLi9pbmRleCdcbmltcG9ydCB7IGFzc2lnbmFibGVXaW5kb3csIGRvY3VtZW50LCBsb2NhdGlvbiwgdXNlckFnZW50LCB3aW5kb3cgfSBmcm9tICcuL2dsb2JhbHMnXG5pbXBvcnQgeyBkZXRlY3RCcm93c2VyLCBkZXRlY3RCcm93c2VyVmVyc2lvbiwgZGV0ZWN0RGV2aWNlLCBkZXRlY3REZXZpY2VUeXBlLCBkZXRlY3RPUyB9IGZyb20gJy4vdXNlci1hZ2VudC11dGlscydcblxuY29uc3QgVVJMX1JFR0VYX1BSRUZJWCA9ICdodHRwcz86Ly8oLiopJ1xuXG5leHBvcnQgY29uc3QgX2luZm8gPSB7XG4gICAgY2FtcGFpZ25QYXJhbXM6IGZ1bmN0aW9uIChjdXN0b21QYXJhbXM/OiBzdHJpbmdbXSk6IFJlY29yZDxzdHJpbmcsIGFueT4ge1xuICAgICAgICAvLyBTaG91bGQgYmUga2VwdCBpbiBzeW5jIHdpdGggaHR0cHM6Ly9naXRodWIuY29tL1Bvc3RIb2cvcG9zdGhvZy9ibG9iL21hc3Rlci9wbHVnaW4tc2VydmVyL3NyYy91dGlscy9kYi91dGlscy50cyNMNjBcbiAgICAgICAgY29uc3QgY2FtcGFpZ25fa2V5d29yZHMgPSBbXG4gICAgICAgICAgICAndXRtX3NvdXJjZScsXG4gICAgICAgICAgICAndXRtX21lZGl1bScsXG4gICAgICAgICAgICAndXRtX2NhbXBhaWduJyxcbiAgICAgICAgICAgICd1dG1fY29udGVudCcsXG4gICAgICAgICAgICAndXRtX3Rlcm0nLFxuICAgICAgICAgICAgJ2djbGlkJyxcbiAgICAgICAgICAgICdnYWRfc291cmNlJyxcbiAgICAgICAgICAgICdnYnJhaWQnLFxuICAgICAgICAgICAgJ3dicmFpZCcsXG4gICAgICAgICAgICAnZmJjbGlkJyxcbiAgICAgICAgICAgICdtc2Nsa2lkJyxcbiAgICAgICAgXS5jb25jYXQoY3VzdG9tUGFyYW1zIHx8IFtdKVxuXG4gICAgICAgIGNvbnN0IHBhcmFtczogUmVjb3JkPHN0cmluZywgYW55PiA9IHt9XG4gICAgICAgIF9lYWNoKGNhbXBhaWduX2tleXdvcmRzLCBmdW5jdGlvbiAoa3drZXkpIHtcbiAgICAgICAgICAgIGNvbnN0IGt3ID0gZG9jdW1lbnQgPyBfZ2V0UXVlcnlQYXJhbShkb2N1bWVudC5VUkwsIGt3a2V5KSA6ICcnXG4gICAgICAgICAgICBpZiAoa3cubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgcGFyYW1zW2t3a2V5XSA9IGt3XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG5cbiAgICAgICAgcmV0dXJuIHBhcmFtc1xuICAgIH0sXG5cbiAgICBzZWFyY2hFbmdpbmU6IGZ1bmN0aW9uICgpOiBzdHJpbmcgfCBudWxsIHtcbiAgICAgICAgY29uc3QgcmVmZXJyZXIgPSBkb2N1bWVudD8ucmVmZXJyZXJcbiAgICAgICAgaWYgKCFyZWZlcnJlcikge1xuICAgICAgICAgICAgcmV0dXJuIG51bGxcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChyZWZlcnJlci5zZWFyY2goVVJMX1JFR0VYX1BSRUZJWCArICdnb29nbGUuKFteLz9dKiknKSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAnZ29vZ2xlJ1xuICAgICAgICAgICAgfSBlbHNlIGlmIChyZWZlcnJlci5zZWFyY2goVVJMX1JFR0VYX1BSRUZJWCArICdiaW5nLmNvbScpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICdiaW5nJ1xuICAgICAgICAgICAgfSBlbHNlIGlmIChyZWZlcnJlci5zZWFyY2goVVJMX1JFR0VYX1BSRUZJWCArICd5YWhvby5jb20nKSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAneWFob28nXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHJlZmVycmVyLnNlYXJjaChVUkxfUkVHRVhfUFJFRklYICsgJ2R1Y2tkdWNrZ28uY29tJykgPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gJ2R1Y2tkdWNrZ28nXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgc2VhcmNoSW5mbzogZnVuY3Rpb24gKCk6IFJlY29yZDxzdHJpbmcsIGFueT4ge1xuICAgICAgICBjb25zdCBzZWFyY2ggPSBfaW5mby5zZWFyY2hFbmdpbmUoKSxcbiAgICAgICAgICAgIHBhcmFtID0gc2VhcmNoICE9ICd5YWhvbycgPyAncScgOiAncCcsXG4gICAgICAgICAgICByZXQ6IFJlY29yZDxzdHJpbmcsIGFueT4gPSB7fVxuXG4gICAgICAgIGlmICghX2lzTnVsbChzZWFyY2gpKSB7XG4gICAgICAgICAgICByZXRbJyRzZWFyY2hfZW5naW5lJ10gPSBzZWFyY2hcblxuICAgICAgICAgICAgY29uc3Qga2V5d29yZCA9IGRvY3VtZW50ID8gX2dldFF1ZXJ5UGFyYW0oZG9jdW1lbnQucmVmZXJyZXIsIHBhcmFtKSA6ICcnXG4gICAgICAgICAgICBpZiAoa2V5d29yZC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICByZXRbJ3BoX2tleXdvcmQnXSA9IGtleXdvcmRcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXRcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogVGhpcyBmdW5jdGlvbiBkZXRlY3RzIHdoaWNoIGJyb3dzZXIgaXMgcnVubmluZyB0aGlzIHNjcmlwdC5cbiAgICAgKiBUaGUgb3JkZXIgb2YgdGhlIGNoZWNrcyBhcmUgaW1wb3J0YW50IHNpbmNlIG1hbnkgdXNlciBhZ2VudHNcbiAgICAgKiBpbmNsdWRlIGtleXdvcmRzIHVzZWQgaW4gbGF0ZXIgY2hlY2tzLlxuICAgICAqL1xuICAgIGJyb3dzZXI6IGRldGVjdEJyb3dzZXIsXG5cbiAgICAvKipcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIGRldGVjdHMgd2hpY2ggYnJvd3NlciB2ZXJzaW9uIGlzIHJ1bm5pbmcgdGhpcyBzY3JpcHQsXG4gICAgICogcGFyc2luZyBtYWpvciBhbmQgbWlub3IgdmVyc2lvbiAoZS5nLiwgNDIuMSkuIFVzZXIgYWdlbnQgc3RyaW5ncyBmcm9tOlxuICAgICAqIGh0dHA6Ly93d3cudXNlcmFnZW50c3RyaW5nLmNvbS9wYWdlcy91c2VyYWdlbnRzdHJpbmcucGhwXG4gICAgICpcbiAgICAgKiBgbmF2aWdhdG9yLnZlbmRvcmAgaXMgcGFzc2VkIGluIGFuZCB1c2VkIHRvIGhlbHAgd2l0aCBkZXRlY3RpbmcgY2VydGFpbiBicm93c2Vyc1xuICAgICAqIE5CIGBuYXZpZ2F0b3IudmVuZG9yYCBpcyBkZXByZWNhdGVkIGFuZCBub3QgcHJlc2VudCBpbiBldmVyeSBicm93c2VyXG4gICAgICovXG4gICAgYnJvd3NlclZlcnNpb246IGRldGVjdEJyb3dzZXJWZXJzaW9uLFxuXG4gICAgYnJvd3Nlckxhbmd1YWdlOiBmdW5jdGlvbiAoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIG5hdmlnYXRvci5sYW5ndWFnZSB8fCAvLyBBbnkgbW9kZXJuIGJyb3dzZXJcbiAgICAgICAgICAgIChuYXZpZ2F0b3IgYXMgUmVjb3JkPHN0cmluZywgYW55PikudXNlckxhbmd1YWdlIC8vIElFMTFcbiAgICAgICAgKVxuICAgIH0sXG5cbiAgICBvczogZGV0ZWN0T1MsXG5cbiAgICBkZXZpY2U6IGRldGVjdERldmljZSxcblxuICAgIGRldmljZVR5cGU6IGRldGVjdERldmljZVR5cGUsXG5cbiAgICByZWZlcnJlcjogZnVuY3Rpb24gKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBkb2N1bWVudD8ucmVmZXJyZXIgfHwgJyRkaXJlY3QnXG4gICAgfSxcblxuICAgIHJlZmVycmluZ0RvbWFpbjogZnVuY3Rpb24gKCk6IHN0cmluZyB7XG4gICAgICAgIGlmICghZG9jdW1lbnQ/LnJlZmVycmVyKSB7XG4gICAgICAgICAgICByZXR1cm4gJyRkaXJlY3QnXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbnZlcnRUb1VSTChkb2N1bWVudC5yZWZlcnJlcik/Lmhvc3QgfHwgJyRkaXJlY3QnXG4gICAgfSxcblxuICAgIHByb3BlcnRpZXM6IGZ1bmN0aW9uICgpOiBQcm9wZXJ0aWVzIHtcbiAgICAgICAgaWYgKCF1c2VyQWdlbnQpIHtcbiAgICAgICAgICAgIHJldHVybiB7fVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IFtvc19uYW1lLCBvc192ZXJzaW9uXSA9IF9pbmZvLm9zKHVzZXJBZ2VudClcbiAgICAgICAgcmV0dXJuIF9leHRlbmQoXG4gICAgICAgICAgICBfc3RyaXBfZW1wdHlfcHJvcGVydGllcyh7XG4gICAgICAgICAgICAgICAgJG9zOiBvc19uYW1lLFxuICAgICAgICAgICAgICAgICRvc192ZXJzaW9uOiBvc192ZXJzaW9uLFxuICAgICAgICAgICAgICAgICRicm93c2VyOiBfaW5mby5icm93c2VyKHVzZXJBZ2VudCwgbmF2aWdhdG9yLnZlbmRvciwgYXNzaWduYWJsZVdpbmRvdy5vcGVyYSksXG4gICAgICAgICAgICAgICAgJGRldmljZTogX2luZm8uZGV2aWNlKHVzZXJBZ2VudCksXG4gICAgICAgICAgICAgICAgJGRldmljZV90eXBlOiBfaW5mby5kZXZpY2VUeXBlKHVzZXJBZ2VudCksXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAkY3VycmVudF91cmw6IGxvY2F0aW9uPy5ocmVmLFxuICAgICAgICAgICAgICAgICRob3N0OiBsb2NhdGlvbj8uaG9zdCxcbiAgICAgICAgICAgICAgICAkcGF0aG5hbWU6IGxvY2F0aW9uPy5wYXRobmFtZSxcbiAgICAgICAgICAgICAgICAkcmF3X3VzZXJfYWdlbnQ6IHVzZXJBZ2VudC5sZW5ndGggPiAxMDAwID8gdXNlckFnZW50LnN1YnN0cmluZygwLCA5OTcpICsgJy4uLicgOiB1c2VyQWdlbnQsXG4gICAgICAgICAgICAgICAgJGJyb3dzZXJfdmVyc2lvbjogX2luZm8uYnJvd3NlclZlcnNpb24odXNlckFnZW50LCBuYXZpZ2F0b3IudmVuZG9yLCBhc3NpZ25hYmxlV2luZG93Lm9wZXJhKSxcbiAgICAgICAgICAgICAgICAkYnJvd3Nlcl9sYW5ndWFnZTogX2luZm8uYnJvd3Nlckxhbmd1YWdlKCksXG4gICAgICAgICAgICAgICAgJHNjcmVlbl9oZWlnaHQ6IHdpbmRvdz8uc2NyZWVuLmhlaWdodCxcbiAgICAgICAgICAgICAgICAkc2NyZWVuX3dpZHRoOiB3aW5kb3c/LnNjcmVlbi53aWR0aCxcbiAgICAgICAgICAgICAgICAkdmlld3BvcnRfaGVpZ2h0OiB3aW5kb3c/LmlubmVySGVpZ2h0LFxuICAgICAgICAgICAgICAgICR2aWV3cG9ydF93aWR0aDogd2luZG93Py5pbm5lcldpZHRoLFxuICAgICAgICAgICAgICAgICRsaWI6ICd3ZWInLFxuICAgICAgICAgICAgICAgICRsaWJfdmVyc2lvbjogQ29uZmlnLkxJQl9WRVJTSU9OLFxuICAgICAgICAgICAgICAgICRpbnNlcnRfaWQ6IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZygyLCAxMCkgKyBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMiwgMTApLFxuICAgICAgICAgICAgICAgICR0aW1lOiBfdGltZXN0YW1wKCkgLyAxMDAwLCAvLyBlcG9jaCB0aW1lIGluIHNlY29uZHNcbiAgICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgIH0sXG5cbiAgICBwZW9wbGVfcHJvcGVydGllczogZnVuY3Rpb24gKCk6IFByb3BlcnRpZXMge1xuICAgICAgICBpZiAoIXVzZXJBZ2VudCkge1xuICAgICAgICAgICAgcmV0dXJuIHt9XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBbb3NfbmFtZSwgb3NfdmVyc2lvbl0gPSBfaW5mby5vcyh1c2VyQWdlbnQpXG4gICAgICAgIHJldHVybiBfZXh0ZW5kKFxuICAgICAgICAgICAgX3N0cmlwX2VtcHR5X3Byb3BlcnRpZXMoe1xuICAgICAgICAgICAgICAgICRvczogb3NfbmFtZSxcbiAgICAgICAgICAgICAgICAkb3NfdmVyc2lvbjogb3NfdmVyc2lvbixcbiAgICAgICAgICAgICAgICAkYnJvd3NlcjogX2luZm8uYnJvd3Nlcih1c2VyQWdlbnQsIG5hdmlnYXRvci52ZW5kb3IsIGFzc2lnbmFibGVXaW5kb3cub3BlcmEpLFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgJGJyb3dzZXJfdmVyc2lvbjogX2luZm8uYnJvd3NlclZlcnNpb24odXNlckFnZW50LCBuYXZpZ2F0b3IudmVuZG9yLCBhc3NpZ25hYmxlV2luZG93Lm9wZXJhKSxcbiAgICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgIH0sXG59XG4iLCAiLyogZXNsaW50IGNhbWVsY2FzZTogXCJvZmZcIiAqL1xuXG5pbXBvcnQgeyBfZWFjaCwgX2V4dGVuZCwgX2luY2x1ZGUsIF9zdHJpcF9lbXB0eV9wcm9wZXJ0aWVzIH0gZnJvbSAnLi91dGlscydcbmltcG9ydCB7IGNvb2tpZVN0b3JlLCBsb2NhbFN0b3JlLCBsb2NhbFBsdXNDb29raWVTdG9yZSwgbWVtb3J5U3RvcmUsIHNlc3Npb25TdG9yZSB9IGZyb20gJy4vc3RvcmFnZSdcbmltcG9ydCB7IFBlcnNpc3RlbnRTdG9yZSwgUG9zdEhvZ0NvbmZpZywgUHJvcGVydGllcyB9IGZyb20gJy4vdHlwZXMnXG5pbXBvcnQge1xuICAgIFBFUlNJU1RFTkNFX1JFU0VSVkVEX1BST1BFUlRJRVMsXG4gICAgRVZFTlRfVElNRVJTX0tFWSxcbiAgICBFTkFCTEVEX0ZFQVRVUkVfRkxBR1MsXG4gICAgUE9TVEhPR19RVU9UQV9MSU1JVEVELFxuICAgIFVTRVJfU1RBVEUsXG59IGZyb20gJy4vY29uc3RhbnRzJ1xuXG5pbXBvcnQgeyBfaXNPYmplY3QsIF9pc1VuZGVmaW5lZCB9IGZyb20gJy4vdXRpbHMvdHlwZS11dGlscydcbmltcG9ydCB7IF9pbmZvIH0gZnJvbSAnLi91dGlscy9ldmVudC11dGlscydcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJy4vdXRpbHMvbG9nZ2VyJ1xuXG5jb25zdCBDQVNFX0lOU0VOU0lUSVZFX1BFUlNJU1RFTkNFX1RZUEVTOiByZWFkb25seSBMb3dlcmNhc2U8UG9zdEhvZ0NvbmZpZ1sncGVyc2lzdGVuY2UnXT5bXSA9IFtcbiAgICAnY29va2llJyxcbiAgICAnbG9jYWxzdG9yYWdlJyxcbiAgICAnbG9jYWxzdG9yYWdlK2Nvb2tpZScsXG4gICAgJ3Nlc3Npb25zdG9yYWdlJyxcbiAgICAnbWVtb3J5Jyxcbl1cblxuY29uc3QgcGFyc2VOYW1lID0gKGNvbmZpZzogUG9zdEhvZ0NvbmZpZyk6IHN0cmluZyA9PiB7XG4gICAgbGV0IHRva2VuID0gJydcbiAgICBpZiAoY29uZmlnWyd0b2tlbiddKSB7XG4gICAgICAgIHRva2VuID0gY29uZmlnWyd0b2tlbiddLnJlcGxhY2UoL1xcKy9nLCAnUEwnKS5yZXBsYWNlKC9cXC8vZywgJ1NMJykucmVwbGFjZSgvPS9nLCAnRVEnKVxuICAgIH1cblxuICAgIGlmIChjb25maWdbJ3BlcnNpc3RlbmNlX25hbWUnXSkge1xuICAgICAgICByZXR1cm4gJ3BoXycgKyBjb25maWdbJ3BlcnNpc3RlbmNlX25hbWUnXVxuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAncGhfJyArIHRva2VuICsgJ19wb3N0aG9nJ1xuICAgIH1cbn1cblxuLyoqXG4gKiBQb3N0SG9nIFBlcnNpc3RlbmNlIE9iamVjdFxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmV4cG9ydCBjbGFzcyBQb3N0SG9nUGVyc2lzdGVuY2Uge1xuICAgIHByaXZhdGUgY29uZmlnOiBQb3N0SG9nQ29uZmlnXG4gICAgcHJvcHM6IFByb3BlcnRpZXNcbiAgICBzdG9yYWdlOiBQZXJzaXN0ZW50U3RvcmVcbiAgICBjYW1wYWlnbl9wYXJhbXNfc2F2ZWQ6IGJvb2xlYW5cbiAgICBuYW1lOiBzdHJpbmdcbiAgICBkaXNhYmxlZDogYm9vbGVhbiB8IHVuZGVmaW5lZFxuICAgIHNlY3VyZTogYm9vbGVhbiB8IHVuZGVmaW5lZFxuICAgIGV4cGlyZV9kYXlzOiBudW1iZXIgfCB1bmRlZmluZWRcbiAgICBkZWZhdWx0X2V4cGlyeTogbnVtYmVyIHwgdW5kZWZpbmVkXG4gICAgY3Jvc3Nfc3ViZG9tYWluOiBib29sZWFuIHwgdW5kZWZpbmVkXG5cbiAgICBjb25zdHJ1Y3Rvcihjb25maWc6IFBvc3RIb2dDb25maWcpIHtcbiAgICAgICAgdGhpcy5jb25maWcgPSBjb25maWdcbiAgICAgICAgdGhpcy5wcm9wcyA9IHt9XG4gICAgICAgIHRoaXMuY2FtcGFpZ25fcGFyYW1zX3NhdmVkID0gZmFsc2VcbiAgICAgICAgdGhpcy5uYW1lID0gcGFyc2VOYW1lKGNvbmZpZylcbiAgICAgICAgdGhpcy5zdG9yYWdlID0gdGhpcy5idWlsZFN0b3JhZ2UoY29uZmlnKVxuICAgICAgICB0aGlzLmxvYWQoKVxuICAgICAgICB0aGlzLnVwZGF0ZV9jb25maWcoY29uZmlnLCBjb25maWcpXG4gICAgICAgIHRoaXMuc2F2ZSgpXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBidWlsZFN0b3JhZ2UoY29uZmlnOiBQb3N0SG9nQ29uZmlnKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIENBU0VfSU5TRU5TSVRJVkVfUEVSU0lTVEVOQ0VfVFlQRVMuaW5kZXhPZihcbiAgICAgICAgICAgICAgICBjb25maWdbJ3BlcnNpc3RlbmNlJ10udG9Mb3dlckNhc2UoKSBhcyBMb3dlcmNhc2U8UG9zdEhvZ0NvbmZpZ1sncGVyc2lzdGVuY2UnXT5cbiAgICAgICAgICAgICkgPT09IC0xXG4gICAgICAgICkge1xuICAgICAgICAgICAgbG9nZ2VyLmNyaXRpY2FsKFxuICAgICAgICAgICAgICAgICdVbmtub3duIHBlcnNpc3RlbmNlIHR5cGUgJyArIGNvbmZpZ1sncGVyc2lzdGVuY2UnXSArICc7IGZhbGxpbmcgYmFjayB0byBsb2NhbFN0b3JhZ2UrY29va2llJ1xuICAgICAgICAgICAgKVxuICAgICAgICAgICAgY29uZmlnWydwZXJzaXN0ZW5jZSddID0gJ2xvY2FsU3RvcmFnZStjb29raWUnXG4gICAgICAgIH1cblxuICAgICAgICBsZXQgc3RvcmU6IFBlcnNpc3RlbnRTdG9yZVxuICAgICAgICAvLyBXZSBoYW5kbGUgc3RvcmFnZSB0eXBlIGluIGEgY2FzZS1pbnNlbnNpdGl2ZSB3YXkgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5XG4gICAgICAgIGNvbnN0IHN0b3JhZ2VfdHlwZSA9IGNvbmZpZ1sncGVyc2lzdGVuY2UnXS50b0xvd2VyQ2FzZSgpIGFzIExvd2VyY2FzZTxQb3N0SG9nQ29uZmlnWydwZXJzaXN0ZW5jZSddPlxuICAgICAgICBpZiAoc3RvcmFnZV90eXBlID09PSAnbG9jYWxzdG9yYWdlJyAmJiBsb2NhbFN0b3JlLmlzX3N1cHBvcnRlZCgpKSB7XG4gICAgICAgICAgICBzdG9yZSA9IGxvY2FsU3RvcmVcbiAgICAgICAgfSBlbHNlIGlmIChzdG9yYWdlX3R5cGUgPT09ICdsb2NhbHN0b3JhZ2UrY29va2llJyAmJiBsb2NhbFBsdXNDb29raWVTdG9yZS5pc19zdXBwb3J0ZWQoKSkge1xuICAgICAgICAgICAgc3RvcmUgPSBsb2NhbFBsdXNDb29raWVTdG9yZVxuICAgICAgICB9IGVsc2UgaWYgKHN0b3JhZ2VfdHlwZSA9PT0gJ3Nlc3Npb25zdG9yYWdlJyAmJiBzZXNzaW9uU3RvcmUuaXNfc3VwcG9ydGVkKCkpIHtcbiAgICAgICAgICAgIHN0b3JlID0gc2Vzc2lvblN0b3JlXG4gICAgICAgIH0gZWxzZSBpZiAoc3RvcmFnZV90eXBlID09PSAnbWVtb3J5Jykge1xuICAgICAgICAgICAgc3RvcmUgPSBtZW1vcnlTdG9yZVxuICAgICAgICB9IGVsc2UgaWYgKHN0b3JhZ2VfdHlwZSA9PT0gJ2Nvb2tpZScpIHtcbiAgICAgICAgICAgIHN0b3JlID0gY29va2llU3RvcmVcbiAgICAgICAgfSBlbHNlIGlmIChsb2NhbFBsdXNDb29raWVTdG9yZS5pc19zdXBwb3J0ZWQoKSkge1xuICAgICAgICAgICAgLy8gc2VsZWN0ZWQgc3RvcmFnZSB0eXBlIHdhc24ndCBzdXBwb3J0ZWQsIGZhbGxiYWNrIHRvICdsb2NhbHN0b3JhZ2UrY29va2llJyBpZiBwb3NzaWJsZVxuICAgICAgICAgICAgc3RvcmUgPSBsb2NhbFBsdXNDb29raWVTdG9yZVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3RvcmUgPSBjb29raWVTdG9yZVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHN0b3JlXG4gICAgfVxuXG4gICAgcHJvcGVydGllcygpOiBQcm9wZXJ0aWVzIHtcbiAgICAgICAgY29uc3QgcDogUHJvcGVydGllcyA9IHt9XG4gICAgICAgIC8vIEZpbHRlciBvdXQgcmVzZXJ2ZWQgcHJvcGVydGllc1xuICAgICAgICBfZWFjaCh0aGlzLnByb3BzLCBmdW5jdGlvbiAodiwgaykge1xuICAgICAgICAgICAgaWYgKGsgPT09IEVOQUJMRURfRkVBVFVSRV9GTEFHUyAmJiBfaXNPYmplY3QodikpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXModilcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgcFtgJGZlYXR1cmUvJHtrZXlzW2ldfWBdID0gdltrZXlzW2ldXVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIV9pbmNsdWRlKFBFUlNJU1RFTkNFX1JFU0VSVkVEX1BST1BFUlRJRVMsIGspKSB7XG4gICAgICAgICAgICAgICAgcFtrXSA9IHZcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIHBcbiAgICB9XG5cbiAgICBsb2FkKCk6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy5kaXNhYmxlZCkge1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBlbnRyeSA9IHRoaXMuc3RvcmFnZS5wYXJzZSh0aGlzLm5hbWUpXG5cbiAgICAgICAgaWYgKGVudHJ5KSB7XG4gICAgICAgICAgICB0aGlzLnByb3BzID0gX2V4dGVuZCh7fSwgZW50cnkpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBOT1RFOiBTYXZpbmcgZnJlcXVlbnRseSBjYXVzZXMgaXNzdWVzIHdpdGggUmVjb3JkaW5ncyBhbmQgQ29uc2VudCBNYW5hZ2VtZW50IFBsYXRmb3JtIChDTVApIHRvb2xzIHdoaWNoXG4gICAgICogb2JzZXJ2ZSBjb29raWUgY2hhbmdlcywgYW5kIG1vZGlmeSB0aGVpciBVSSwgb2Z0ZW4gY2F1c2luZyBpbmZpbml0ZSBsb29wcy5cbiAgICAgKiBBcyBzdWNoIGNhbGxlcnMgb2YgdGhpcyBzaG91bGQgaWRlYWxseSBjaGVjayB0aGF0IHRoZSBkYXRhIGhhcyBjaGFuZ2VkIGJlZm9yZWhhbmRcbiAgICAgKi9cbiAgICBzYXZlKCk6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy5kaXNhYmxlZCkge1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zdG9yYWdlLnNldCh0aGlzLm5hbWUsIHRoaXMucHJvcHMsIHRoaXMuZXhwaXJlX2RheXMsIHRoaXMuY3Jvc3Nfc3ViZG9tYWluLCB0aGlzLnNlY3VyZSlcbiAgICB9XG5cbiAgICByZW1vdmUoKTogdm9pZCB7XG4gICAgICAgIC8vIHJlbW92ZSBib3RoIGRvbWFpbiBhbmQgc3ViZG9tYWluIGNvb2tpZXNcbiAgICAgICAgdGhpcy5zdG9yYWdlLnJlbW92ZSh0aGlzLm5hbWUsIGZhbHNlKVxuICAgICAgICB0aGlzLnN0b3JhZ2UucmVtb3ZlKHRoaXMubmFtZSwgdHJ1ZSlcbiAgICB9XG5cbiAgICAvLyByZW1vdmVzIHRoZSBzdG9yYWdlIGVudHJ5IGFuZCBkZWxldGVzIGFsbCBsb2FkZWQgZGF0YVxuICAgIC8vIGZvcmNlZCBuYW1lIGZvciB0ZXN0c1xuXG4gICAgY2xlYXIoKTogdm9pZCB7XG4gICAgICAgIHRoaXMucmVtb3ZlKClcbiAgICAgICAgdGhpcy5wcm9wcyA9IHt9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHByb3BzXG4gICAgICogQHBhcmFtIHsqPX0gZGVmYXVsdF92YWx1ZVxuICAgICAqIEBwYXJhbSB7bnVtYmVyPX0gZGF5c1xuICAgICAqL1xuXG4gICAgcmVnaXN0ZXJfb25jZShwcm9wczogUHJvcGVydGllcywgZGVmYXVsdF92YWx1ZTogYW55LCBkYXlzPzogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgICAgIGlmIChfaXNPYmplY3QocHJvcHMpKSB7XG4gICAgICAgICAgICBpZiAoX2lzVW5kZWZpbmVkKGRlZmF1bHRfdmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgZGVmYXVsdF92YWx1ZSA9ICdOb25lJ1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5leHBpcmVfZGF5cyA9IF9pc1VuZGVmaW5lZChkYXlzKSA/IHRoaXMuZGVmYXVsdF9leHBpcnkgOiBkYXlzXG5cbiAgICAgICAgICAgIGxldCBoYXNDaGFuZ2VzID0gZmFsc2VcblxuICAgICAgICAgICAgX2VhY2gocHJvcHMsICh2YWwsIHByb3ApID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMucHJvcHMuaGFzT3duUHJvcGVydHkocHJvcCkgfHwgdGhpcy5wcm9wc1twcm9wXSA9PT0gZGVmYXVsdF92YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzW3Byb3BdID0gdmFsXG4gICAgICAgICAgICAgICAgICAgIGhhc0NoYW5nZXMgPSB0cnVlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgaWYgKGhhc0NoYW5nZXMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNhdmUoKVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHByb3BzXG4gICAgICogQHBhcmFtIHtudW1iZXI9fSBkYXlzXG4gICAgICovXG5cbiAgICByZWdpc3Rlcihwcm9wczogUHJvcGVydGllcywgZGF5cz86IG51bWJlcik6IGJvb2xlYW4ge1xuICAgICAgICBpZiAoX2lzT2JqZWN0KHByb3BzKSkge1xuICAgICAgICAgICAgdGhpcy5leHBpcmVfZGF5cyA9IF9pc1VuZGVmaW5lZChkYXlzKSA/IHRoaXMuZGVmYXVsdF9leHBpcnkgOiBkYXlzXG5cbiAgICAgICAgICAgIGxldCBoYXNDaGFuZ2VzID0gZmFsc2VcblxuICAgICAgICAgICAgX2VhY2gocHJvcHMsICh2YWwsIHByb3ApID0+IHtcbiAgICAgICAgICAgICAgICBpZiAocHJvcHMuaGFzT3duUHJvcGVydHkocHJvcCkgJiYgdGhpcy5wcm9wc1twcm9wXSAhPT0gdmFsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHNbcHJvcF0gPSB2YWxcbiAgICAgICAgICAgICAgICAgICAgaGFzQ2hhbmdlcyA9IHRydWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICBpZiAoaGFzQ2hhbmdlcykge1xuICAgICAgICAgICAgICAgIHRoaXMuc2F2ZSgpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG5cbiAgICB1bnJlZ2lzdGVyKHByb3A6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICBpZiAocHJvcCBpbiB0aGlzLnByb3BzKSB7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy5wcm9wc1twcm9wXVxuICAgICAgICAgICAgdGhpcy5zYXZlKClcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHVwZGF0ZV9jYW1wYWlnbl9wYXJhbXMoKTogdm9pZCB7XG4gICAgICAgIGlmICghdGhpcy5jYW1wYWlnbl9wYXJhbXNfc2F2ZWQpIHtcbiAgICAgICAgICAgIHRoaXMucmVnaXN0ZXIoX2luZm8uY2FtcGFpZ25QYXJhbXModGhpcy5jb25maWcuY3VzdG9tX2NhbXBhaWduX3BhcmFtcykpXG4gICAgICAgICAgICB0aGlzLmNhbXBhaWduX3BhcmFtc19zYXZlZCA9IHRydWVcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHVwZGF0ZV9zZWFyY2hfa2V5d29yZCgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5yZWdpc3RlcihfaW5mby5zZWFyY2hJbmZvKCkpXG4gICAgfVxuXG4gICAgdXBkYXRlX3JlZmVycmVyX2luZm8oKTogdm9pZCB7XG4gICAgICAgIHRoaXMucmVnaXN0ZXIoe1xuICAgICAgICAgICAgJHJlZmVycmVyOiB0aGlzLnByb3BzWyckcmVmZXJyZXInXSB8fCBfaW5mby5yZWZlcnJlcigpLFxuICAgICAgICAgICAgJHJlZmVycmluZ19kb21haW46IHRoaXMucHJvcHNbJyRyZWZlcnJpbmdfZG9tYWluJ10gfHwgX2luZm8ucmVmZXJyaW5nRG9tYWluKCksXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgZ2V0X3JlZmVycmVyX2luZm8oKTogUHJvcGVydGllcyB7XG4gICAgICAgIHJldHVybiBfc3RyaXBfZW1wdHlfcHJvcGVydGllcyh7XG4gICAgICAgICAgICAkcmVmZXJyZXI6IHRoaXNbJ3Byb3BzJ11bJyRyZWZlcnJlciddLFxuICAgICAgICAgICAgJHJlZmVycmluZ19kb21haW46IHRoaXNbJ3Byb3BzJ11bJyRyZWZlcnJpbmdfZG9tYWluJ10sXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgLy8gc2FmZWx5IGZpbGxzIHRoZSBwYXNzZWQgaW4gb2JqZWN0IHdpdGggc3RvcmVkIHByb3BlcnRpZXMsXG4gICAgLy8gZG9lcyBub3Qgb3ZlcnJpZGUgYW55IHByb3BlcnRpZXMgZGVmaW5lZCBpbiBib3RoXG4gICAgLy8gcmV0dXJucyB0aGUgcGFzc2VkIGluIG9iamVjdFxuXG4gICAgc2FmZV9tZXJnZShwcm9wczogUHJvcGVydGllcyk6IFByb3BlcnRpZXMge1xuICAgICAgICBfZWFjaCh0aGlzLnByb3BzLCBmdW5jdGlvbiAodmFsLCBwcm9wKSB7XG4gICAgICAgICAgICBpZiAoIShwcm9wIGluIHByb3BzKSkge1xuICAgICAgICAgICAgICAgIHByb3BzW3Byb3BdID0gdmFsXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG5cbiAgICAgICAgcmV0dXJuIHByb3BzXG4gICAgfVxuXG4gICAgdXBkYXRlX2NvbmZpZyhjb25maWc6IFBvc3RIb2dDb25maWcsIG9sZENvbmZpZzogUG9zdEhvZ0NvbmZpZyk6IHZvaWQge1xuICAgICAgICB0aGlzLmRlZmF1bHRfZXhwaXJ5ID0gdGhpcy5leHBpcmVfZGF5cyA9IGNvbmZpZ1snY29va2llX2V4cGlyYXRpb24nXVxuICAgICAgICB0aGlzLnNldF9kaXNhYmxlZChjb25maWdbJ2Rpc2FibGVfcGVyc2lzdGVuY2UnXSlcbiAgICAgICAgdGhpcy5zZXRfY3Jvc3Nfc3ViZG9tYWluKGNvbmZpZ1snY3Jvc3Nfc3ViZG9tYWluX2Nvb2tpZSddKVxuICAgICAgICB0aGlzLnNldF9zZWN1cmUoY29uZmlnWydzZWN1cmVfY29va2llJ10pXG5cbiAgICAgICAgaWYgKGNvbmZpZy5wZXJzaXN0ZW5jZSAhPT0gb2xkQ29uZmlnLnBlcnNpc3RlbmNlKSB7XG4gICAgICAgICAgICAvLyBJZiB0aGUgcGVyc2lzdGVuY2UgdHlwZSBoYXMgY2hhbmdlZCwgd2UgbmVlZCB0byBtaWdyYXRlIHRoZSBkYXRhLlxuICAgICAgICAgICAgY29uc3QgbmV3U3RvcmUgPSB0aGlzLmJ1aWxkU3RvcmFnZShjb25maWcpXG4gICAgICAgICAgICBjb25zdCBwcm9wcyA9IHRoaXMucHJvcHNcblxuICAgICAgICAgICAgLy8gY2xlYXIgdGhlIG9sZCBzdG9yZVxuICAgICAgICAgICAgdGhpcy5jbGVhcigpXG4gICAgICAgICAgICB0aGlzLnN0b3JhZ2UgPSBuZXdTdG9yZVxuICAgICAgICAgICAgdGhpcy5wcm9wcyA9IHByb3BzXG5cbiAgICAgICAgICAgIHRoaXMuc2F2ZSgpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzZXRfZGlzYWJsZWQoZGlzYWJsZWQ6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICAgICAgdGhpcy5kaXNhYmxlZCA9IGRpc2FibGVkXG4gICAgICAgIGlmICh0aGlzLmRpc2FibGVkKSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZSgpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnNhdmUoKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2V0X2Nyb3NzX3N1YmRvbWFpbihjcm9zc19zdWJkb21haW46IGJvb2xlYW4pOiB2b2lkIHtcbiAgICAgICAgaWYgKGNyb3NzX3N1YmRvbWFpbiAhPT0gdGhpcy5jcm9zc19zdWJkb21haW4pIHtcbiAgICAgICAgICAgIHRoaXMuY3Jvc3Nfc3ViZG9tYWluID0gY3Jvc3Nfc3ViZG9tYWluXG4gICAgICAgICAgICB0aGlzLnJlbW92ZSgpXG4gICAgICAgICAgICB0aGlzLnNhdmUoKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0X2Nyb3NzX3N1YmRvbWFpbigpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5jcm9zc19zdWJkb21haW5cbiAgICB9XG5cbiAgICBzZXRfc2VjdXJlKHNlY3VyZTogYm9vbGVhbik6IHZvaWQge1xuICAgICAgICBpZiAoc2VjdXJlICE9PSB0aGlzLnNlY3VyZSkge1xuICAgICAgICAgICAgdGhpcy5zZWN1cmUgPSBzZWN1cmVcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlKClcbiAgICAgICAgICAgIHRoaXMuc2F2ZSgpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzZXRfZXZlbnRfdGltZXIoZXZlbnRfbmFtZTogc3RyaW5nLCB0aW1lc3RhbXA6IG51bWJlcik6IHZvaWQge1xuICAgICAgICBjb25zdCB0aW1lcnMgPSB0aGlzLnByb3BzW0VWRU5UX1RJTUVSU19LRVldIHx8IHt9XG4gICAgICAgIHRpbWVyc1tldmVudF9uYW1lXSA9IHRpbWVzdGFtcFxuICAgICAgICB0aGlzLnByb3BzW0VWRU5UX1RJTUVSU19LRVldID0gdGltZXJzXG4gICAgICAgIHRoaXMuc2F2ZSgpXG4gICAgfVxuXG4gICAgcmVtb3ZlX2V2ZW50X3RpbWVyKGV2ZW50X25hbWU6IHN0cmluZyk6IG51bWJlciB7XG4gICAgICAgIGNvbnN0IHRpbWVycyA9IHRoaXMucHJvcHNbRVZFTlRfVElNRVJTX0tFWV0gfHwge31cbiAgICAgICAgY29uc3QgdGltZXN0YW1wID0gdGltZXJzW2V2ZW50X25hbWVdXG4gICAgICAgIGlmICghX2lzVW5kZWZpbmVkKHRpbWVzdGFtcCkpIHtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnByb3BzW0VWRU5UX1RJTUVSU19LRVldW2V2ZW50X25hbWVdXG4gICAgICAgICAgICB0aGlzLnNhdmUoKVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aW1lc3RhbXBcbiAgICB9XG5cbiAgICBnZXRfdXNlcl9zdGF0ZSgpOiAnYW5vbnltb3VzJyB8ICdpZGVudGlmaWVkJyB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb3BzW1VTRVJfU1RBVEVdIHx8ICdhbm9ueW1vdXMnXG4gICAgfVxuXG4gICAgc2V0X3VzZXJfc3RhdGUoc3RhdGU6ICdhbm9ueW1vdXMnIHwgJ2lkZW50aWZpZWQnKTogdm9pZCB7XG4gICAgICAgIHRoaXMucHJvcHNbVVNFUl9TVEFURV0gPSBzdGF0ZVxuICAgICAgICB0aGlzLnNhdmUoKVxuICAgIH1cblxuICAgIGdldF9xdW90YV9saW1pdHMoKTogUmVjb3JkPHN0cmluZywgbnVtYmVyPiB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb3BzW1BPU1RIT0dfUVVPVEFfTElNSVRFRF0gfHwge31cbiAgICB9XG5cbiAgICBzZXRfcXVvdGFfbGltaXRzKHN0YXRlOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+KTogdm9pZCB7XG4gICAgICAgIHRoaXMucHJvcHNbUE9TVEhPR19RVU9UQV9MSU1JVEVEXSA9IHN0YXRlXG4gICAgICAgIHRoaXMuc2F2ZSgpXG4gICAgfVxufVxuIiwgImltcG9ydCB0eXBlIHtcbiAgICBLZWVwSWZyYW1lU3JjRm4sXG4gICAgUmVjb3JkUGx1Z2luLFxuICAgIFNhbXBsaW5nU3RyYXRlZ3ksXG4gICAgYmxvY2tDbGFzcyxcbiAgICBldmVudFdpdGhUaW1lLFxuICAgIGhvb2tzUGFyYW0sXG4gICAgbGlzdGVuZXJIYW5kbGVyLFxuICAgIG1hc2tUZXh0Q2xhc3MsXG4gICAgcGx1Z2luRXZlbnQsXG4gICAgbXV0YXRpb25DYWxsYmFja1BhcmFtLFxufSBmcm9tICdAcnJ3ZWIvdHlwZXMnXG5pbXBvcnQgdHlwZSB7IE1pcnJvciwgTWFza0lucHV0T3B0aW9ucywgTWFza0lucHV0Rm4sIE1hc2tUZXh0Rm4sIFNsaW1ET01PcHRpb25zLCBEYXRhVVJMT3B0aW9ucyB9IGZyb20gJ3Jyd2ViLXNuYXBzaG90J1xuXG5pbXBvcnQgeyBfaXNPYmplY3QgfSBmcm9tICcuLi8uLi91dGlscy90eXBlLXV0aWxzJ1xuXG5leHBvcnQgY29uc3QgcmVwbGFjZW1lbnRJbWFnZVVSSSA9XG4gICAgJ2RhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEhOMlp5QjNhV1IwYUQwaU1UWWlJR2hsYVdkb2REMGlNVFlpSUhacFpYZENiM2c5SWpBZ01DQXhOaUF4TmlJZ1ptbHNiRDBpYm05dVpTSWdlRzFzYm5NOUltaDBkSEE2THk5M2QzY3Vkek11YjNKbkx6SXdNREF2YzNabklqNEtQSEpsWTNRZ2QybGtkR2c5SWpFMklpQm9aV2xuYUhROUlqRTJJaUJtYVd4c1BTSmliR0ZqYXlJdlBnbzhjR0YwYUNCa1BTSk5PQ0F3U0RFMlREQWdNVFpXT0V3NElEQmFJaUJtYVd4c1BTSWpNa1F5UkRKRUlpOCtDanh3WVhSb0lHUTlJazB4TmlBNFZqRTJTRGhNTVRZZ09Gb2lJR1pwYkd3OUlpTXlSREpFTWtRaUx6NEtQQzl6ZG1jK0NnPT0nXG5cbmV4cG9ydCBjb25zdCBGVUxMX1NOQVBTSE9UX0VWRU5UX1RZUEUgPSAyXG5leHBvcnQgY29uc3QgTUVUQV9FVkVOVF9UWVBFID0gNFxuZXhwb3J0IGNvbnN0IElOQ1JFTUVOVEFMX1NOQVBTSE9UX0VWRU5UX1RZUEUgPSAzXG5leHBvcnQgY29uc3QgUExVR0lOX0VWRU5UX1RZUEUgPSA2XG5leHBvcnQgY29uc3QgTVVUQVRJT05fU09VUkNFX1RZUEUgPSAwXG5cbmV4cG9ydCBjb25zdCBNQVhfTUVTU0FHRV9TSVpFID0gNTAwMDAwMCAvLyB+NW1iXG5cbmV4cG9ydCB0eXBlIHJyd2ViUmVjb3JkID0ge1xuICAgIChvcHRpb25zOiByZWNvcmRPcHRpb25zPGV2ZW50V2l0aFRpbWU+KTogbGlzdGVuZXJIYW5kbGVyXG4gICAgYWRkQ3VzdG9tRXZlbnQ6ICh0YWc6IHN0cmluZywgcGF5bG9hZDogYW55KSA9PiB2b2lkXG4gICAgdGFrZUZ1bGxTbmFwc2hvdDogKCkgPT4gdm9pZFxuICAgIG1pcnJvcjogTWlycm9yXG59XG5cbmV4cG9ydCBkZWNsYXJlIHR5cGUgcmVjb3JkT3B0aW9uczxUPiA9IHtcbiAgICBlbWl0PzogKGU6IFQsIGlzQ2hlY2tvdXQ/OiBib29sZWFuKSA9PiB2b2lkXG4gICAgY2hlY2tvdXRFdmVyeU50aD86IG51bWJlclxuICAgIGNoZWNrb3V0RXZlcnlObXM/OiBudW1iZXJcbiAgICBibG9ja0NsYXNzPzogYmxvY2tDbGFzc1xuICAgIGJsb2NrU2VsZWN0b3I/OiBzdHJpbmdcbiAgICBpZ25vcmVDbGFzcz86IHN0cmluZ1xuICAgIG1hc2tUZXh0Q2xhc3M/OiBtYXNrVGV4dENsYXNzXG4gICAgbWFza1RleHRTZWxlY3Rvcj86IHN0cmluZ1xuICAgIG1hc2tBbGxJbnB1dHM/OiBib29sZWFuXG4gICAgbWFza0lucHV0T3B0aW9ucz86IE1hc2tJbnB1dE9wdGlvbnNcbiAgICBtYXNrSW5wdXRGbj86IE1hc2tJbnB1dEZuXG4gICAgbWFza1RleHRGbj86IE1hc2tUZXh0Rm5cbiAgICBzbGltRE9NT3B0aW9ucz86IFNsaW1ET01PcHRpb25zIHwgJ2FsbCcgfCB0cnVlXG4gICAgaWdub3JlQ1NTQXR0cmlidXRlcz86IFNldDxzdHJpbmc+XG4gICAgaW5saW5lU3R5bGVzaGVldD86IGJvb2xlYW5cbiAgICBob29rcz86IGhvb2tzUGFyYW1cbiAgICAvLyBwYWNrRm4/OiBQYWNrRm5cbiAgICBzYW1wbGluZz86IFNhbXBsaW5nU3RyYXRlZ3lcbiAgICBkYXRhVVJMT3B0aW9ucz86IERhdGFVUkxPcHRpb25zXG4gICAgcmVjb3JkQ2FudmFzPzogYm9vbGVhblxuICAgIHJlY29yZENyb3NzT3JpZ2luSWZyYW1lcz86IGJvb2xlYW5cbiAgICByZWNvcmRBZnRlcj86ICdET01Db250ZW50TG9hZGVkJyB8ICdsb2FkJ1xuICAgIHVzZXJUcmlnZ2VyZWRPbklucHV0PzogYm9vbGVhblxuICAgIGNvbGxlY3RGb250cz86IGJvb2xlYW5cbiAgICBpbmxpbmVJbWFnZXM/OiBib29sZWFuXG4gICAgcGx1Z2lucz86IFJlY29yZFBsdWdpbltdXG4gICAgbW91c2Vtb3ZlV2FpdD86IG51bWJlclxuICAgIGtlZXBJZnJhbWVTcmNGbj86IEtlZXBJZnJhbWVTcmNGblxuICAgIC8vIGVycm9ySGFuZGxlcj86IEVycm9ySGFuZGxlclxufVxuXG4vKlxuICogQ2hlY2sgd2hldGhlciBhIGRhdGEgcGF5bG9hZCBpcyBuZWFyaW5nIDVtYi4gSWYgaXQgaXMsIGl0IGNoZWNrcyB0aGUgZGF0YSBmb3JcbiAqIGRhdGEgVVJJcyAodGhlIGxpa2VseSBjdWxwcml0IGZvciBsYXJnZSBwYXlsb2FkcykuIElmIGl0IGZpbmRzIGRhdGEgVVJJcywgaXQgZWl0aGVyIHJlcGxhY2VzXG4gKiBpdCB3aXRoIGEgZ2VuZXJpYyBpbWFnZSAoaWYgaXQncyBhbiBpbWFnZSkgb3IgcmVtb3ZlcyBpdC5cbiAqIEBkYXRhIHtvYmplY3R9IHRoZSByci13ZWIgZGF0YSBvYmplY3RcbiAqIEByZXR1cm5zIHtvYmplY3R9IHRoZSByci13ZWIgZGF0YSBvYmplY3Qgd2l0aCBkYXRhIHVyaXMgZmlsdGVyZWQgb3V0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBlbnN1cmVNYXhNZXNzYWdlU2l6ZShkYXRhOiBldmVudFdpdGhUaW1lKTogeyBldmVudDogZXZlbnRXaXRoVGltZTsgc2l6ZTogbnVtYmVyIH0ge1xuICAgIGxldCBzdHJpbmdpZmllZERhdGEgPSBKU09OLnN0cmluZ2lmeShkYXRhKVxuICAgIC8vIE5vdGU6IHdpdGggY29tcHJlc3Npb24sIHRoaXMgbGltaXQgbWF5IGJlIGFibGUgdG8gYmUgaW5jcmVhc2VkXG4gICAgLy8gYnV0IHdlJ3JlIGFzc3VtaW5nIG1vc3Qgb2YgdGhlIHNpemUgaXMgZnJvbSBhIGRhdGEgdXJpIHdoaWNoXG4gICAgLy8gaXMgdW5saWtlbHkgdG8gYmUgY29tcHJlc3NlZCBmdXJ0aGVyXG5cbiAgICBpZiAoc3RyaW5naWZpZWREYXRhLmxlbmd0aCA+IE1BWF9NRVNTQUdFX1NJWkUpIHtcbiAgICAgICAgLy8gUmVnZXggdGhhdCBtYXRjaGVzIHRoZSBwYXR0ZXJuIGZvciBhIGRhdGFVUkkgd2l0aCB0aGUgc2hhcGUgJ2RhdGE6e21pbWUgdHlwZX07e2VuY29kaW5nfSx7ZGF0YX0nLiBJdDpcbiAgICAgICAgLy8gMSkgQ2hlY2tzIGlmIHRoZSBwYXR0ZXJuIHN0YXJ0cyB3aXRoICdkYXRhOicgKHBvdGVudGlhbGx5LCBub3QgYXQgdGhlIHN0YXJ0IG9mIHRoZSBzdHJpbmcpXG4gICAgICAgIC8vIDIpIEV4dHJhY3RzIHRoZSBtaW1lIHR5cGUgb2YgdGhlIGRhdGEgdXJpIGluIHRoZSBmaXJzdCBncm91cFxuICAgICAgICAvLyAzKSBEZXRlcm1pbmVzIHdoZW4gdGhlIGRhdGEgVVJJIGVuZHMuRGVwZW5kaW5nIG9uIGlmIGl0J3MgdXNlZCBpbiB0aGUgc3JjIHRhZyBvciBjc3MsIGl0IGNhbiBlbmQgd2l0aCBhICkgb3IgXCJcbiAgICAgICAgY29uc3QgZGF0YVVSSVJlZ2V4ID0gL2RhdGE6KFtcXHcvXFwtLl0rKTsoXFx3KyksKFteKVwiXSopL2dpbVxuICAgICAgICBjb25zdCBtYXRjaGVzID0gc3RyaW5naWZpZWREYXRhLm1hdGNoQWxsKGRhdGFVUklSZWdleClcbiAgICAgICAgZm9yIChjb25zdCBtYXRjaCBvZiBtYXRjaGVzKSB7XG4gICAgICAgICAgICBpZiAobWF0Y2hbMV0udG9Mb2NhbGVMb3dlckNhc2UoKS5zbGljZSgwLCA2KSA9PT0gJ2ltYWdlLycpIHtcbiAgICAgICAgICAgICAgICBzdHJpbmdpZmllZERhdGEgPSBzdHJpbmdpZmllZERhdGEucmVwbGFjZShtYXRjaFswXSwgcmVwbGFjZW1lbnRJbWFnZVVSSSlcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc3RyaW5naWZpZWREYXRhID0gc3RyaW5naWZpZWREYXRhLnJlcGxhY2UobWF0Y2hbMF0sICcnKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7IGV2ZW50OiBKU09OLnBhcnNlKHN0cmluZ2lmaWVkRGF0YSksIHNpemU6IHN0cmluZ2lmaWVkRGF0YS5sZW5ndGggfVxufVxuXG5leHBvcnQgY29uc3QgQ09OU09MRV9MT0dfUExVR0lOX05BTUUgPSAncnJ3ZWIvY29uc29sZUAxJyAvLyBUaGUgbmFtZSBvZiB0aGUgcnItd2ViIHBsdWdpbiB0aGF0IGVtaXRzIGNvbnNvbGUgbG9nc1xuXG4vLyBDb25zb2xlIGxvZ3MgY2FuIGJlIHJlYWxseSBsYXJnZS4gVGhpcyBmdW5jdGlvbiB0cnVuY2F0ZXMgbGFyZ2UgbG9nc1xuLy8gSXQncyBhIHNpbXBsZSBmdW5jdGlvbiB0aGF0IGp1c3QgdHJ1bmNhdGVzIGxvbmcgc3RyaW5ncy5cbi8vIFRPRE86IElkZWFsbHkgdGhpcyBmdW5jdGlvbiB3b3VsZCBoYXZlIGJldHRlciBoYW5kbGluZyBvZiBvYmplY3RzICsgbGlzdHMsXG4vLyBzbyB0aGV5IGNvdWxkIHN0aWxsIGJlIHJlbmRlcmVkIGluIGEgcHJldHR5IHdheSBhZnRlciB0cnVuY2F0aW9uLlxuZXhwb3J0IGZ1bmN0aW9uIHRydW5jYXRlTGFyZ2VDb25zb2xlTG9ncyhfZXZlbnQ6IGV2ZW50V2l0aFRpbWUpIHtcbiAgICBjb25zdCBldmVudCA9IF9ldmVudCBhcyBwbHVnaW5FdmVudDx7IHBheWxvYWQ6IHN0cmluZ1tdIH0+XG5cbiAgICBjb25zdCBNQVhfU1RSSU5HX1NJWkUgPSAyMDAwIC8vIE1heGltdW0gbnVtYmVyIG9mIGNoYXJhY3RlcnMgYWxsb3dlZCBpbiBhIHN0cmluZ1xuICAgIGNvbnN0IE1BWF9TVFJJTkdTX1BFUl9MT0cgPSAxMCAvLyBBIGxvZyBjYW4gY29uc2lzdCBvZiBtdWx0aXBsZSBzdHJpbmdzIChlLmcuIGNvbnNvbC5sb2coJ3N0cmluZzEnLCAnc3RyaW5nMicpKVxuXG4gICAgaWYgKFxuICAgICAgICBldmVudCAmJlxuICAgICAgICBfaXNPYmplY3QoZXZlbnQpICYmXG4gICAgICAgIGV2ZW50LnR5cGUgPT09IFBMVUdJTl9FVkVOVF9UWVBFICYmXG4gICAgICAgIF9pc09iamVjdChldmVudC5kYXRhKSAmJlxuICAgICAgICBldmVudC5kYXRhLnBsdWdpbiA9PT0gQ09OU09MRV9MT0dfUExVR0lOX05BTUVcbiAgICApIHtcbiAgICAgICAgLy8gTm90ZTogZXZlbnQuZGF0YS5wYXlsb2FkLnBheWxvYWQgY29tZXMgZnJvbSByci13ZWIsIGFuZCBpcyBhbiBhcnJheSBvZiBzdHJpbmdzXG4gICAgICAgIGlmIChldmVudC5kYXRhLnBheWxvYWQucGF5bG9hZC5sZW5ndGggPiBNQVhfU1RSSU5HU19QRVJfTE9HKSB7XG4gICAgICAgICAgICBldmVudC5kYXRhLnBheWxvYWQucGF5bG9hZCA9IGV2ZW50LmRhdGEucGF5bG9hZC5wYXlsb2FkLnNsaWNlKDAsIE1BWF9TVFJJTkdTX1BFUl9MT0cpXG4gICAgICAgICAgICBldmVudC5kYXRhLnBheWxvYWQucGF5bG9hZC5wdXNoKCcuLi5bdHJ1bmNhdGVkXScpXG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdXBkYXRlZFBheWxvYWQgPSBbXVxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGV2ZW50LmRhdGEucGF5bG9hZC5wYXlsb2FkLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgZXZlbnQuZGF0YS5wYXlsb2FkLnBheWxvYWRbaV0gJiYgLy8gVmFsdWUgY2FuIGJlIG51bGxcbiAgICAgICAgICAgICAgICBldmVudC5kYXRhLnBheWxvYWQucGF5bG9hZFtpXS5sZW5ndGggPiBNQVhfU1RSSU5HX1NJWkVcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHVwZGF0ZWRQYXlsb2FkLnB1c2goZXZlbnQuZGF0YS5wYXlsb2FkLnBheWxvYWRbaV0uc2xpY2UoMCwgTUFYX1NUUklOR19TSVpFKSArICcuLi5bdHJ1bmNhdGVkXScpXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHVwZGF0ZWRQYXlsb2FkLnB1c2goZXZlbnQuZGF0YS5wYXlsb2FkLnBheWxvYWRbaV0pXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZXZlbnQuZGF0YS5wYXlsb2FkLnBheWxvYWQgPSB1cGRhdGVkUGF5bG9hZFxuICAgICAgICAvLyBSZXR1cm4gb3JpZ2luYWwgdHlwZVxuICAgICAgICByZXR1cm4gX2V2ZW50XG4gICAgfVxuICAgIHJldHVybiBfZXZlbnRcbn1cblxuZXhwb3J0IGNsYXNzIE11dGF0aW9uUmF0ZUxpbWl0ZXIge1xuICAgIHByaXZhdGUgYnVja2V0U2l6ZSA9IDEwMFxuICAgIHByaXZhdGUgcmVmaWxsUmF0ZSA9IDEwXG4gICAgcHJpdmF0ZSBtdXRhdGlvbkJ1Y2tldHM6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gPSB7fVxuICAgIHByaXZhdGUgbG9nZ2VkVHJhY2tlcjogUmVjb3JkPHN0cmluZywgYm9vbGVhbj4gPSB7fVxuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkgcnJ3ZWI6IHJyd2ViUmVjb3JkLFxuICAgICAgICBwcml2YXRlIHJlYWRvbmx5IG9wdGlvbnM6IHtcbiAgICAgICAgICAgIGJ1Y2tldFNpemU/OiBudW1iZXJcbiAgICAgICAgICAgIHJlZmlsbFJhdGU/OiBudW1iZXJcbiAgICAgICAgICAgIG9uQmxvY2tlZE5vZGU/OiAoaWQ6IG51bWJlciwgbm9kZTogTm9kZSB8IG51bGwpID0+IHZvaWRcbiAgICAgICAgfSA9IHt9XG4gICAgKSB7XG4gICAgICAgIHRoaXMucmVmaWxsUmF0ZSA9IHRoaXMub3B0aW9ucy5yZWZpbGxSYXRlID8/IHRoaXMucmVmaWxsUmF0ZVxuICAgICAgICB0aGlzLmJ1Y2tldFNpemUgPSB0aGlzLm9wdGlvbnMuYnVja2V0U2l6ZSA/PyB0aGlzLmJ1Y2tldFNpemVcbiAgICAgICAgc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5yZWZpbGxCdWNrZXRzKClcbiAgICAgICAgfSwgMTAwMClcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlZmlsbEJ1Y2tldHMgPSAoKSA9PiB7XG4gICAgICAgIE9iamVjdC5rZXlzKHRoaXMubXV0YXRpb25CdWNrZXRzKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgICAgICAgIHRoaXMubXV0YXRpb25CdWNrZXRzW2tleV0gPSB0aGlzLm11dGF0aW9uQnVja2V0c1trZXldICsgdGhpcy5yZWZpbGxSYXRlXG5cbiAgICAgICAgICAgIGlmICh0aGlzLm11dGF0aW9uQnVja2V0c1trZXldID49IHRoaXMuYnVja2V0U2l6ZSkge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLm11dGF0aW9uQnVja2V0c1trZXldXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXROb2RlT3JSZWxldmFudFBhcmVudCA9IChpZDogbnVtYmVyKTogW251bWJlciwgTm9kZSB8IG51bGxdID0+IHtcbiAgICAgICAgLy8gRm9yIHNvbWUgbm9kZXMgd2Uga25vdyB0aGV5IGFyZSBwYXJ0IG9mIGEgbGFyZ2VyIHRyZWUgc3VjaCBhcyBhbiBTVkcuXG4gICAgICAgIC8vIEZvciB0aG9zZSB3ZSB3YW50IHRvIGJsb2NrIHRoZSBlbnRpcmUgbm9kZSwgbm90IGp1c3QgdGhlIHNwZWNpZmljIGF0dHJpYnV0ZVxuXG4gICAgICAgIGNvbnN0IG5vZGUgPSB0aGlzLnJyd2ViLm1pcnJvci5nZXROb2RlKGlkKVxuXG4gICAgICAgIC8vIENoZWNrIGlmIHRoZSBub2RlIGlzIGFuIEVsZW1lbnQgYW5kIHRoZW4gZmluZCB0aGUgY2xvc2VzdCBwYXJlbnQgdGhhdCBpcyBhbiBTVkdcbiAgICAgICAgaWYgKG5vZGU/Lm5vZGVOYW1lICE9PSAnc3ZnJyAmJiBub2RlIGluc3RhbmNlb2YgRWxlbWVudCkge1xuICAgICAgICAgICAgY29uc3QgY2xvc2VzdFNWRyA9IG5vZGUuY2xvc2VzdCgnc3ZnJylcblxuICAgICAgICAgICAgaWYgKGNsb3Nlc3RTVkcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gW3RoaXMucnJ3ZWIubWlycm9yLmdldElkKGNsb3Nlc3RTVkcpLCBjbG9zZXN0U1ZHXVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFtpZCwgbm9kZV1cbiAgICB9XG5cbiAgICBwcml2YXRlIG51bWJlck9mQ2hhbmdlcyA9IChkYXRhOiBQYXJ0aWFsPG11dGF0aW9uQ2FsbGJhY2tQYXJhbT4pID0+IHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIChkYXRhLnJlbW92ZXM/Lmxlbmd0aCA/PyAwKSArXG4gICAgICAgICAgICAoZGF0YS5hdHRyaWJ1dGVzPy5sZW5ndGggPz8gMCkgK1xuICAgICAgICAgICAgKGRhdGEudGV4dHM/Lmxlbmd0aCA/PyAwKSArXG4gICAgICAgICAgICAoZGF0YS5hZGRzPy5sZW5ndGggPz8gMClcbiAgICAgICAgKVxuICAgIH1cblxuICAgIHB1YmxpYyB0aHJvdHRsZU11dGF0aW9ucyA9IChldmVudDogZXZlbnRXaXRoVGltZSkgPT4ge1xuICAgICAgICBpZiAoZXZlbnQudHlwZSAhPT0gSU5DUkVNRU5UQUxfU05BUFNIT1RfRVZFTlRfVFlQRSB8fCBldmVudC5kYXRhLnNvdXJjZSAhPT0gTVVUQVRJT05fU09VUkNFX1RZUEUpIHtcbiAgICAgICAgICAgIHJldHVybiBldmVudFxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZGF0YSA9IGV2ZW50LmRhdGEgYXMgUGFydGlhbDxtdXRhdGlvbkNhbGxiYWNrUGFyYW0+XG4gICAgICAgIGNvbnN0IGluaXRpYWxNdXRhdGlvbkNvdW50ID0gdGhpcy5udW1iZXJPZkNoYW5nZXMoZGF0YSlcblxuICAgICAgICBpZiAoZGF0YS5hdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICAvLyBNb3N0IHByb2JsZW1hdGljIG11dGF0aW9ucyBjb21lIGZyb20gYXR0cnMgd2hlcmUgdGhlIHN0eWxlIG9yIG1pbm9yIHByb3BlcnRpZXMgYXJlIGNoYW5nZWQgcmFwaWRseVxuICAgICAgICAgICAgZGF0YS5hdHRyaWJ1dGVzID0gZGF0YS5hdHRyaWJ1dGVzLmZpbHRlcigoYXR0cikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IFtub2RlSWQsIG5vZGVdID0gdGhpcy5nZXROb2RlT3JSZWxldmFudFBhcmVudChhdHRyLmlkKVxuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubXV0YXRpb25CdWNrZXRzW25vZGVJZF0gPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdGhpcy5tdXRhdGlvbkJ1Y2tldHNbbm9kZUlkXSA9IHRoaXMubXV0YXRpb25CdWNrZXRzW25vZGVJZF0gPz8gdGhpcy5idWNrZXRTaXplXG4gICAgICAgICAgICAgICAgdGhpcy5tdXRhdGlvbkJ1Y2tldHNbbm9kZUlkXSA9IE1hdGgubWF4KHRoaXMubXV0YXRpb25CdWNrZXRzW25vZGVJZF0gLSAxLCAwKVxuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubXV0YXRpb25CdWNrZXRzW25vZGVJZF0gPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmxvZ2dlZFRyYWNrZXJbbm9kZUlkXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZWRUcmFja2VyW25vZGVJZF0gPSB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMub25CbG9ja2VkTm9kZT8uKG5vZGVJZCwgbm9kZSlcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiBhdHRyXG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2hlY2sgaWYgZXZlcnkgcGFydCBvZiB0aGUgbXV0YXRpb24gaXMgZW1wdHkgaW4gd2hpY2ggY2FzZSB0aGVyZSBpcyBub3RoaW5nIHRvIGRvXG4gICAgICAgIGNvbnN0IG11dGF0aW9uQ291bnQgPSB0aGlzLm51bWJlck9mQ2hhbmdlcyhkYXRhKVxuXG4gICAgICAgIGlmIChtdXRhdGlvbkNvdW50ID09PSAwICYmIGluaXRpYWxNdXRhdGlvbkNvdW50ICE9PSBtdXRhdGlvbkNvdW50KSB7XG4gICAgICAgICAgICAvLyBJZiB3ZSBoYXZlIG1vZGlmaWVkIHRoZSBtdXRhdGlvbiBjb3VudCBhbmQgdGhlIHJlbWFpbmluZyBjb3VudCBpcyAwLCB0aGVuIHdlIGRvbid0IG5lZWQgdGhlIGV2ZW50LlxuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGV2ZW50XG4gICAgfVxufVxuIiwgInZhciBFdmVudFR5cGUgPSAvKiBAX19QVVJFX18gKi8gKChFdmVudFR5cGUyKSA9PiB7XG4gIEV2ZW50VHlwZTJbRXZlbnRUeXBlMltcIkRvbUNvbnRlbnRMb2FkZWRcIl0gPSAwXSA9IFwiRG9tQ29udGVudExvYWRlZFwiO1xuICBFdmVudFR5cGUyW0V2ZW50VHlwZTJbXCJMb2FkXCJdID0gMV0gPSBcIkxvYWRcIjtcbiAgRXZlbnRUeXBlMltFdmVudFR5cGUyW1wiRnVsbFNuYXBzaG90XCJdID0gMl0gPSBcIkZ1bGxTbmFwc2hvdFwiO1xuICBFdmVudFR5cGUyW0V2ZW50VHlwZTJbXCJJbmNyZW1lbnRhbFNuYXBzaG90XCJdID0gM10gPSBcIkluY3JlbWVudGFsU25hcHNob3RcIjtcbiAgRXZlbnRUeXBlMltFdmVudFR5cGUyW1wiTWV0YVwiXSA9IDRdID0gXCJNZXRhXCI7XG4gIEV2ZW50VHlwZTJbRXZlbnRUeXBlMltcIkN1c3RvbVwiXSA9IDVdID0gXCJDdXN0b21cIjtcbiAgRXZlbnRUeXBlMltFdmVudFR5cGUyW1wiUGx1Z2luXCJdID0gNl0gPSBcIlBsdWdpblwiO1xuICByZXR1cm4gRXZlbnRUeXBlMjtcbn0pKEV2ZW50VHlwZSB8fCB7fSk7XG52YXIgSW5jcmVtZW50YWxTb3VyY2UgPSAvKiBAX19QVVJFX18gKi8gKChJbmNyZW1lbnRhbFNvdXJjZTIpID0+IHtcbiAgSW5jcmVtZW50YWxTb3VyY2UyW0luY3JlbWVudGFsU291cmNlMltcIk11dGF0aW9uXCJdID0gMF0gPSBcIk11dGF0aW9uXCI7XG4gIEluY3JlbWVudGFsU291cmNlMltJbmNyZW1lbnRhbFNvdXJjZTJbXCJNb3VzZU1vdmVcIl0gPSAxXSA9IFwiTW91c2VNb3ZlXCI7XG4gIEluY3JlbWVudGFsU291cmNlMltJbmNyZW1lbnRhbFNvdXJjZTJbXCJNb3VzZUludGVyYWN0aW9uXCJdID0gMl0gPSBcIk1vdXNlSW50ZXJhY3Rpb25cIjtcbiAgSW5jcmVtZW50YWxTb3VyY2UyW0luY3JlbWVudGFsU291cmNlMltcIlNjcm9sbFwiXSA9IDNdID0gXCJTY3JvbGxcIjtcbiAgSW5jcmVtZW50YWxTb3VyY2UyW0luY3JlbWVudGFsU291cmNlMltcIlZpZXdwb3J0UmVzaXplXCJdID0gNF0gPSBcIlZpZXdwb3J0UmVzaXplXCI7XG4gIEluY3JlbWVudGFsU291cmNlMltJbmNyZW1lbnRhbFNvdXJjZTJbXCJJbnB1dFwiXSA9IDVdID0gXCJJbnB1dFwiO1xuICBJbmNyZW1lbnRhbFNvdXJjZTJbSW5jcmVtZW50YWxTb3VyY2UyW1wiVG91Y2hNb3ZlXCJdID0gNl0gPSBcIlRvdWNoTW92ZVwiO1xuICBJbmNyZW1lbnRhbFNvdXJjZTJbSW5jcmVtZW50YWxTb3VyY2UyW1wiTWVkaWFJbnRlcmFjdGlvblwiXSA9IDddID0gXCJNZWRpYUludGVyYWN0aW9uXCI7XG4gIEluY3JlbWVudGFsU291cmNlMltJbmNyZW1lbnRhbFNvdXJjZTJbXCJTdHlsZVNoZWV0UnVsZVwiXSA9IDhdID0gXCJTdHlsZVNoZWV0UnVsZVwiO1xuICBJbmNyZW1lbnRhbFNvdXJjZTJbSW5jcmVtZW50YWxTb3VyY2UyW1wiQ2FudmFzTXV0YXRpb25cIl0gPSA5XSA9IFwiQ2FudmFzTXV0YXRpb25cIjtcbiAgSW5jcmVtZW50YWxTb3VyY2UyW0luY3JlbWVudGFsU291cmNlMltcIkZvbnRcIl0gPSAxMF0gPSBcIkZvbnRcIjtcbiAgSW5jcmVtZW50YWxTb3VyY2UyW0luY3JlbWVudGFsU291cmNlMltcIkxvZ1wiXSA9IDExXSA9IFwiTG9nXCI7XG4gIEluY3JlbWVudGFsU291cmNlMltJbmNyZW1lbnRhbFNvdXJjZTJbXCJEcmFnXCJdID0gMTJdID0gXCJEcmFnXCI7XG4gIEluY3JlbWVudGFsU291cmNlMltJbmNyZW1lbnRhbFNvdXJjZTJbXCJTdHlsZURlY2xhcmF0aW9uXCJdID0gMTNdID0gXCJTdHlsZURlY2xhcmF0aW9uXCI7XG4gIEluY3JlbWVudGFsU291cmNlMltJbmNyZW1lbnRhbFNvdXJjZTJbXCJTZWxlY3Rpb25cIl0gPSAxNF0gPSBcIlNlbGVjdGlvblwiO1xuICBJbmNyZW1lbnRhbFNvdXJjZTJbSW5jcmVtZW50YWxTb3VyY2UyW1wiQWRvcHRlZFN0eWxlU2hlZXRcIl0gPSAxNV0gPSBcIkFkb3B0ZWRTdHlsZVNoZWV0XCI7XG4gIHJldHVybiBJbmNyZW1lbnRhbFNvdXJjZTI7XG59KShJbmNyZW1lbnRhbFNvdXJjZSB8fCB7fSk7XG52YXIgTW91c2VJbnRlcmFjdGlvbnMgPSAvKiBAX19QVVJFX18gKi8gKChNb3VzZUludGVyYWN0aW9uczIpID0+IHtcbiAgTW91c2VJbnRlcmFjdGlvbnMyW01vdXNlSW50ZXJhY3Rpb25zMltcIk1vdXNlVXBcIl0gPSAwXSA9IFwiTW91c2VVcFwiO1xuICBNb3VzZUludGVyYWN0aW9uczJbTW91c2VJbnRlcmFjdGlvbnMyW1wiTW91c2VEb3duXCJdID0gMV0gPSBcIk1vdXNlRG93blwiO1xuICBNb3VzZUludGVyYWN0aW9uczJbTW91c2VJbnRlcmFjdGlvbnMyW1wiQ2xpY2tcIl0gPSAyXSA9IFwiQ2xpY2tcIjtcbiAgTW91c2VJbnRlcmFjdGlvbnMyW01vdXNlSW50ZXJhY3Rpb25zMltcIkNvbnRleHRNZW51XCJdID0gM10gPSBcIkNvbnRleHRNZW51XCI7XG4gIE1vdXNlSW50ZXJhY3Rpb25zMltNb3VzZUludGVyYWN0aW9uczJbXCJEYmxDbGlja1wiXSA9IDRdID0gXCJEYmxDbGlja1wiO1xuICBNb3VzZUludGVyYWN0aW9uczJbTW91c2VJbnRlcmFjdGlvbnMyW1wiRm9jdXNcIl0gPSA1XSA9IFwiRm9jdXNcIjtcbiAgTW91c2VJbnRlcmFjdGlvbnMyW01vdXNlSW50ZXJhY3Rpb25zMltcIkJsdXJcIl0gPSA2XSA9IFwiQmx1clwiO1xuICBNb3VzZUludGVyYWN0aW9uczJbTW91c2VJbnRlcmFjdGlvbnMyW1wiVG91Y2hTdGFydFwiXSA9IDddID0gXCJUb3VjaFN0YXJ0XCI7XG4gIE1vdXNlSW50ZXJhY3Rpb25zMltNb3VzZUludGVyYWN0aW9uczJbXCJUb3VjaE1vdmVfRGVwYXJ0ZWRcIl0gPSA4XSA9IFwiVG91Y2hNb3ZlX0RlcGFydGVkXCI7XG4gIE1vdXNlSW50ZXJhY3Rpb25zMltNb3VzZUludGVyYWN0aW9uczJbXCJUb3VjaEVuZFwiXSA9IDldID0gXCJUb3VjaEVuZFwiO1xuICBNb3VzZUludGVyYWN0aW9uczJbTW91c2VJbnRlcmFjdGlvbnMyW1wiVG91Y2hDYW5jZWxcIl0gPSAxMF0gPSBcIlRvdWNoQ2FuY2VsXCI7XG4gIHJldHVybiBNb3VzZUludGVyYWN0aW9uczI7XG59KShNb3VzZUludGVyYWN0aW9ucyB8fCB7fSk7XG52YXIgUG9pbnRlclR5cGVzID0gLyogQF9fUFVSRV9fICovICgoUG9pbnRlclR5cGVzMikgPT4ge1xuICBQb2ludGVyVHlwZXMyW1BvaW50ZXJUeXBlczJbXCJNb3VzZVwiXSA9IDBdID0gXCJNb3VzZVwiO1xuICBQb2ludGVyVHlwZXMyW1BvaW50ZXJUeXBlczJbXCJQZW5cIl0gPSAxXSA9IFwiUGVuXCI7XG4gIFBvaW50ZXJUeXBlczJbUG9pbnRlclR5cGVzMltcIlRvdWNoXCJdID0gMl0gPSBcIlRvdWNoXCI7XG4gIHJldHVybiBQb2ludGVyVHlwZXMyO1xufSkoUG9pbnRlclR5cGVzIHx8IHt9KTtcbnZhciBDYW52YXNDb250ZXh0ID0gLyogQF9fUFVSRV9fICovICgoQ2FudmFzQ29udGV4dDIpID0+IHtcbiAgQ2FudmFzQ29udGV4dDJbQ2FudmFzQ29udGV4dDJbXCIyRFwiXSA9IDBdID0gXCIyRFwiO1xuICBDYW52YXNDb250ZXh0MltDYW52YXNDb250ZXh0MltcIldlYkdMXCJdID0gMV0gPSBcIldlYkdMXCI7XG4gIENhbnZhc0NvbnRleHQyW0NhbnZhc0NvbnRleHQyW1wiV2ViR0wyXCJdID0gMl0gPSBcIldlYkdMMlwiO1xuICByZXR1cm4gQ2FudmFzQ29udGV4dDI7XG59KShDYW52YXNDb250ZXh0IHx8IHt9KTtcbnZhciBNZWRpYUludGVyYWN0aW9ucyA9IC8qIEBfX1BVUkVfXyAqLyAoKE1lZGlhSW50ZXJhY3Rpb25zMikgPT4ge1xuICBNZWRpYUludGVyYWN0aW9uczJbTWVkaWFJbnRlcmFjdGlvbnMyW1wiUGxheVwiXSA9IDBdID0gXCJQbGF5XCI7XG4gIE1lZGlhSW50ZXJhY3Rpb25zMltNZWRpYUludGVyYWN0aW9uczJbXCJQYXVzZVwiXSA9IDFdID0gXCJQYXVzZVwiO1xuICBNZWRpYUludGVyYWN0aW9uczJbTWVkaWFJbnRlcmFjdGlvbnMyW1wiU2Vla2VkXCJdID0gMl0gPSBcIlNlZWtlZFwiO1xuICBNZWRpYUludGVyYWN0aW9uczJbTWVkaWFJbnRlcmFjdGlvbnMyW1wiVm9sdW1lQ2hhbmdlXCJdID0gM10gPSBcIlZvbHVtZUNoYW5nZVwiO1xuICBNZWRpYUludGVyYWN0aW9uczJbTWVkaWFJbnRlcmFjdGlvbnMyW1wiUmF0ZUNoYW5nZVwiXSA9IDRdID0gXCJSYXRlQ2hhbmdlXCI7XG4gIHJldHVybiBNZWRpYUludGVyYWN0aW9uczI7XG59KShNZWRpYUludGVyYWN0aW9ucyB8fCB7fSk7XG52YXIgUmVwbGF5ZXJFdmVudHMgPSAvKiBAX19QVVJFX18gKi8gKChSZXBsYXllckV2ZW50czIpID0+IHtcbiAgUmVwbGF5ZXJFdmVudHMyW1wiU3RhcnRcIl0gPSBcInN0YXJ0XCI7XG4gIFJlcGxheWVyRXZlbnRzMltcIlBhdXNlXCJdID0gXCJwYXVzZVwiO1xuICBSZXBsYXllckV2ZW50czJbXCJSZXN1bWVcIl0gPSBcInJlc3VtZVwiO1xuICBSZXBsYXllckV2ZW50czJbXCJSZXNpemVcIl0gPSBcInJlc2l6ZVwiO1xuICBSZXBsYXllckV2ZW50czJbXCJGaW5pc2hcIl0gPSBcImZpbmlzaFwiO1xuICBSZXBsYXllckV2ZW50czJbXCJGdWxsc25hcHNob3RSZWJ1aWxkZWRcIl0gPSBcImZ1bGxzbmFwc2hvdC1yZWJ1aWxkZWRcIjtcbiAgUmVwbGF5ZXJFdmVudHMyW1wiTG9hZFN0eWxlc2hlZXRTdGFydFwiXSA9IFwibG9hZC1zdHlsZXNoZWV0LXN0YXJ0XCI7XG4gIFJlcGxheWVyRXZlbnRzMltcIkxvYWRTdHlsZXNoZWV0RW5kXCJdID0gXCJsb2FkLXN0eWxlc2hlZXQtZW5kXCI7XG4gIFJlcGxheWVyRXZlbnRzMltcIlNraXBTdGFydFwiXSA9IFwic2tpcC1zdGFydFwiO1xuICBSZXBsYXllckV2ZW50czJbXCJTa2lwRW5kXCJdID0gXCJza2lwLWVuZFwiO1xuICBSZXBsYXllckV2ZW50czJbXCJNb3VzZUludGVyYWN0aW9uXCJdID0gXCJtb3VzZS1pbnRlcmFjdGlvblwiO1xuICBSZXBsYXllckV2ZW50czJbXCJFdmVudENhc3RcIl0gPSBcImV2ZW50LWNhc3RcIjtcbiAgUmVwbGF5ZXJFdmVudHMyW1wiQ3VzdG9tRXZlbnRcIl0gPSBcImN1c3RvbS1ldmVudFwiO1xuICBSZXBsYXllckV2ZW50czJbXCJGbHVzaFwiXSA9IFwiZmx1c2hcIjtcbiAgUmVwbGF5ZXJFdmVudHMyW1wiU3RhdGVDaGFuZ2VcIl0gPSBcInN0YXRlLWNoYW5nZVwiO1xuICBSZXBsYXllckV2ZW50czJbXCJQbGF5QmFja1wiXSA9IFwicGxheS1iYWNrXCI7XG4gIFJlcGxheWVyRXZlbnRzMltcIkRlc3Ryb3lcIl0gPSBcImRlc3Ryb3lcIjtcbiAgcmV0dXJuIFJlcGxheWVyRXZlbnRzMjtcbn0pKFJlcGxheWVyRXZlbnRzIHx8IHt9KTtcbmV4cG9ydCB7XG4gIENhbnZhc0NvbnRleHQsXG4gIEV2ZW50VHlwZSxcbiAgSW5jcmVtZW50YWxTb3VyY2UsXG4gIE1lZGlhSW50ZXJhY3Rpb25zLFxuICBNb3VzZUludGVyYWN0aW9ucyxcbiAgUG9pbnRlclR5cGVzLFxuICBSZXBsYXllckV2ZW50c1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXR5cGVzLmpzLm1hcFxuIiwgImltcG9ydCB7IENhcHR1cmVkTmV0d29ya1JlcXVlc3QsIE5ldHdvcmtSZWNvcmRPcHRpb25zLCBQb3N0SG9nQ29uZmlnIH0gZnJvbSAnLi4vLi4vdHlwZXMnXG5pbXBvcnQgeyBfaXNGdW5jdGlvbiwgX2lzTnVsbGlzaCwgX2lzU3RyaW5nIH0gZnJvbSAnLi4vLi4vdXRpbHMvdHlwZS11dGlscydcbmltcG9ydCB7IGNvbnZlcnRUb1VSTCB9IGZyb20gJy4uLy4uL3V0aWxzL3JlcXVlc3QtdXRpbHMnXG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tICcuLi8uLi91dGlscy9sb2dnZXInXG5cbmV4cG9ydCBjb25zdCBkZWZhdWx0TmV0d29ya09wdGlvbnM6IE5ldHdvcmtSZWNvcmRPcHRpb25zID0ge1xuICAgIGluaXRpYXRvclR5cGVzOiBbXG4gICAgICAgICdhdWRpbycsXG4gICAgICAgICdiZWFjb24nLFxuICAgICAgICAnYm9keScsXG4gICAgICAgICdjc3MnLFxuICAgICAgICAnZWFybHktaGludCcsXG4gICAgICAgICdlbWJlZCcsXG4gICAgICAgICdmZXRjaCcsXG4gICAgICAgICdmcmFtZScsXG4gICAgICAgICdpZnJhbWUnLFxuICAgICAgICAnaWNvbicsXG4gICAgICAgICdpbWFnZScsXG4gICAgICAgICdpbWcnLFxuICAgICAgICAnaW5wdXQnLFxuICAgICAgICAnbGluaycsXG4gICAgICAgICduYXZpZ2F0aW9uJyxcbiAgICAgICAgJ29iamVjdCcsXG4gICAgICAgICdwaW5nJyxcbiAgICAgICAgJ3NjcmlwdCcsXG4gICAgICAgICd0cmFjaycsXG4gICAgICAgICd2aWRlbycsXG4gICAgICAgICd4bWxodHRwcmVxdWVzdCcsXG4gICAgXSxcbiAgICBtYXNrUmVxdWVzdEZuOiAoZGF0YTogQ2FwdHVyZWROZXR3b3JrUmVxdWVzdCkgPT4gZGF0YSxcbiAgICByZWNvcmRIZWFkZXJzOiBmYWxzZSxcbiAgICByZWNvcmRCb2R5OiBmYWxzZSxcbiAgICByZWNvcmRJbml0aWFsUmVxdWVzdHM6IGZhbHNlLFxuICAgIHJlY29yZFBlcmZvcm1hbmNlOiBmYWxzZSxcbiAgICBwZXJmb3JtYW5jZUVudHJ5VHlwZVRvT2JzZXJ2ZTogW1xuICAgICAgICAvLyAnZXZlbnQnLCAvLyBUaGlzIGlzIHRvbyBub2lzeSBhcyBpdCBjb3ZlcnMgYWxsIGJyb3dzZXIgZXZlbnRzXG4gICAgICAgICdmaXJzdC1pbnB1dCcsXG4gICAgICAgIC8vICdtYXJrJywgLy8gTWFyayBpcyB1c2VkIHRvbyBsaWJlcmFsbHkuIFdlIHdvdWxkIG5lZWQgdG8gZmlsdGVyIGZvciBzcGVjaWZpYyBtYXJrc1xuICAgICAgICAvLyAnbWVhc3VyZScsIC8vIE1lYXN1cmUgaXMgdXNlZCB0b28gbGliZXJhbGx5LiBXZSB3b3VsZCBuZWVkIHRvIGZpbHRlciBmb3Igc3BlY2lmaWMgbWVhc3VyZXNcbiAgICAgICAgJ25hdmlnYXRpb24nLFxuICAgICAgICAncGFpbnQnLFxuICAgICAgICAncmVzb3VyY2UnLFxuICAgIF0sXG4gICAgcGF5bG9hZFNpemVMaW1pdEJ5dGVzOiAxMDAwMDAwLFxufVxuXG5jb25zdCBIRUFERVJfREVOWUxJU1QgPSBbXG4gICAgJ2F1dGhvcml6YXRpb24nLFxuICAgICd4LWZvcndhcmRlZC1mb3InLFxuICAgICdhdXRob3JpemF0aW9uJyxcbiAgICAnY29va2llJyxcbiAgICAnc2V0LWNvb2tpZScsXG4gICAgJ3gtYXBpLWtleScsXG4gICAgJ3gtcmVhbC1pcCcsXG4gICAgJ3JlbW90ZS1hZGRyJyxcbiAgICAnZm9yd2FyZGVkJyxcbiAgICAncHJveHktYXV0aG9yaXphdGlvbicsXG4gICAgJ3gtY3NyZi10b2tlbicsXG4gICAgJ3gtY3NyZnRva2VuJyxcbiAgICAneC14c3JmLXRva2VuJyxcbl1cblxuLy8gd2UgYWx3YXlzIHJlbW92ZSBoZWFkZXJzIG9uIHRoZSBkZW55IGxpc3QgYmVjYXVzZSB3ZSBuZXZlciB3YW50IHRvIGNhcHR1cmUgdGhpcyBzZW5zaXRpdmUgZGF0YVxuY29uc3QgcmVtb3ZlQXV0aG9yaXphdGlvbkhlYWRlciA9IChkYXRhOiBDYXB0dXJlZE5ldHdvcmtSZXF1ZXN0KTogQ2FwdHVyZWROZXR3b3JrUmVxdWVzdCA9PiB7XG4gICAgT2JqZWN0LmtleXMoZGF0YS5yZXF1ZXN0SGVhZGVycyA/PyB7fSkuZm9yRWFjaCgoaGVhZGVyKSA9PiB7XG4gICAgICAgIGlmIChIRUFERVJfREVOWUxJU1QuaW5jbHVkZXMoaGVhZGVyLnRvTG93ZXJDYXNlKCkpKSBkZWxldGUgZGF0YS5yZXF1ZXN0SGVhZGVycz8uW2hlYWRlcl1cbiAgICB9KVxuICAgIHJldHVybiBkYXRhXG59XG5cbmNvbnN0IFBPU1RIT0dfUEFUSFNfVE9fSUdOT1JFID0gWycvcy8nLCAnL2UvJywgJy9pLyddXG4vLyB3YW50IHRvIGlnbm9yZSBwb3N0aG9nIHBhdGhzIHdoZW4gY2FwdHVyaW5nIHJlcXVlc3RzLCBvciB3ZSBjYW4gZ2V0IHRyYXBwZWQgaW4gYSBsb29wXG4vLyBiZWNhdXNlIGNhbGxzIHRvIFBvc3RIb2cgd291bGQgYmUgcmVwb3J0ZWQgdXNpbmcgYSBjYWxsIHRvIFBvc3RIb2cgd2hpY2ggd291bGQgYmUgcmVwb3J0ZWQuLi4uXG5jb25zdCBpZ25vcmVQb3N0SG9nUGF0aHMgPSAoZGF0YTogQ2FwdHVyZWROZXR3b3JrUmVxdWVzdCk6IENhcHR1cmVkTmV0d29ya1JlcXVlc3QgfCB1bmRlZmluZWQgPT4ge1xuICAgIGNvbnN0IHVybCA9IGNvbnZlcnRUb1VSTChkYXRhLm5hbWUpXG4gICAgaWYgKHVybCAmJiB1cmwucGF0aG5hbWUgJiYgUE9TVEhPR19QQVRIU19UT19JR05PUkUuc29tZSgocGF0aCkgPT4gdXJsLnBhdGhuYW1lLmluZGV4T2YocGF0aCkgPT09IDApKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWRcbiAgICB9XG4gICAgcmV0dXJuIGRhdGFcbn1cblxuZnVuY3Rpb24gZXN0aW1hdGVCeXRlcyhwYXlsb2FkOiBzdHJpbmcpOiBudW1iZXIge1xuICAgIHJldHVybiBuZXcgQmxvYihbcGF5bG9hZF0pLnNpemVcbn1cblxuZnVuY3Rpb24gcmVkYWN0UGF5bG9hZChcbiAgICBwYXlsb2FkOiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkLFxuICAgIGhlYWRlcnM6IFJlY29yZDxzdHJpbmcsIGFueT4gfCB1bmRlZmluZWQsXG4gICAgbGltaXQ6IG51bWJlcixcbiAgICBkZXNjcmlwdGlvbjogc3RyaW5nXG4pOiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkIHtcbiAgICBpZiAoX2lzTnVsbGlzaChwYXlsb2FkKSkge1xuICAgICAgICByZXR1cm4gcGF5bG9hZFxuICAgIH1cblxuICAgIGxldCByZXF1ZXN0Q29udGVudExlbmd0aDogc3RyaW5nIHwgbnVtYmVyID0gaGVhZGVycz8uWydjb250ZW50LWxlbmd0aCddIHx8IGVzdGltYXRlQnl0ZXMocGF5bG9hZClcbiAgICBpZiAoX2lzU3RyaW5nKHJlcXVlc3RDb250ZW50TGVuZ3RoKSkge1xuICAgICAgICByZXF1ZXN0Q29udGVudExlbmd0aCA9IHBhcnNlSW50KHJlcXVlc3RDb250ZW50TGVuZ3RoKVxuICAgIH1cblxuICAgIGlmIChyZXF1ZXN0Q29udGVudExlbmd0aCA+IGxpbWl0KSB7XG4gICAgICAgIHJldHVybiBgW1Nlc3Npb25SZXBsYXldICR7ZGVzY3JpcHRpb259IGJvZHkgdG9vIGxhcmdlIHRvIHJlY29yZCAoJHtyZXF1ZXN0Q29udGVudExlbmd0aH0gYnl0ZXMpYFxuICAgIH1cblxuICAgIHJldHVybiBwYXlsb2FkXG59XG5cbi8vIHBlb3BsZSBjYW4gaGF2ZSBhcmJpdHJhcmlseSBsYXJnZSBwYXlsb2FkcyBvbiB0aGVpciBzaXRlLCBidXQgd2UgZG9uJ3Qgd2FudCB0byBpbmdlc3QgdGhlbVxuY29uc3QgbGltaXRQYXlsb2FkU2l6ZSA9IChcbiAgICBvcHRpb25zOiBOZXR3b3JrUmVjb3JkT3B0aW9uc1xuKTogKChkYXRhOiBDYXB0dXJlZE5ldHdvcmtSZXF1ZXN0IHwgdW5kZWZpbmVkKSA9PiBDYXB0dXJlZE5ldHdvcmtSZXF1ZXN0IHwgdW5kZWZpbmVkKSA9PiB7XG4gICAgLy8gdGhlIHNtYWxsZXN0IG9mIDFNQiBvciB0aGUgc3BlY2lmaWVkIGxpbWl0IGlmIHRoZXJlIGlzIG9uZVxuICAgIGNvbnN0IGxpbWl0ID0gTWF0aC5taW4oMTAwMDAwMCwgb3B0aW9ucy5wYXlsb2FkU2l6ZUxpbWl0Qnl0ZXMgPz8gMTAwMDAwMClcblxuICAgIHJldHVybiAoZGF0YSkgPT4ge1xuICAgICAgICBpZiAoZGF0YT8ucmVxdWVzdEJvZHkpIHtcbiAgICAgICAgICAgIGRhdGEucmVxdWVzdEJvZHkgPSByZWRhY3RQYXlsb2FkKGRhdGEucmVxdWVzdEJvZHksIGRhdGEucmVxdWVzdEhlYWRlcnMsIGxpbWl0LCAnUmVxdWVzdCcpXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZGF0YT8ucmVzcG9uc2VCb2R5KSB7XG4gICAgICAgICAgICBkYXRhLnJlc3BvbnNlQm9keSA9IHJlZGFjdFBheWxvYWQoZGF0YS5yZXNwb25zZUJvZHksIGRhdGEucmVzcG9uc2VIZWFkZXJzLCBsaW1pdCwgJ1Jlc3BvbnNlJylcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBkYXRhXG4gICAgfVxufVxuXG4vKipcbiAqICB3aGV0aGVyIGEgbWFza1JlcXVlc3RGbiBpcyBwcm92aWRlZCBvciBub3QsXG4gKiAgd2UgZW5zdXJlIHRoYXQgd2UgcmVtb3ZlIHRoZSBkZW5pZWQgaGVhZGVyIGZyb20gcmVxdWVzdHNcbiAqICB3ZSBfbmV2ZXJfIHdhbnQgdG8gcmVjb3JkIHRoYXQgaGVhZGVyIGJ5IGFjY2lkZW50XG4gKiAgaWYgc29tZW9uZSBjb21wbGFpbnMgdGhlbiB3ZSdsbCBhZGQgYW4gb3B0LWluIHRvIGxldCB0aGVtIG92ZXJyaWRlIGl0XG4gKi9cbmV4cG9ydCBjb25zdCBidWlsZE5ldHdvcmtSZXF1ZXN0T3B0aW9ucyA9IChcbiAgICBpbnN0YW5jZUNvbmZpZzogUG9zdEhvZ0NvbmZpZyxcbiAgICByZW1vdGVOZXR3b3JrT3B0aW9uczogUGljazxOZXR3b3JrUmVjb3JkT3B0aW9ucywgJ3JlY29yZEhlYWRlcnMnIHwgJ3JlY29yZEJvZHknIHwgJ3JlY29yZFBlcmZvcm1hbmNlJz5cbik6IE5ldHdvcmtSZWNvcmRPcHRpb25zID0+IHtcbiAgICBjb25zdCBjb25maWcgPSBpbnN0YW5jZUNvbmZpZy5zZXNzaW9uX3JlY29yZGluZyBhcyBOZXR3b3JrUmVjb3JkT3B0aW9uc1xuICAgIC8vIGNsaWVudCBjYW4gYWx3YXlzIGRpc2FibGUgZGVzcGl0ZSByZW1vdGUgb3B0aW9uc1xuICAgIGNvbnN0IGNhblJlY29yZEhlYWRlcnMgPSBjb25maWcucmVjb3JkSGVhZGVycyA9PT0gZmFsc2UgPyBmYWxzZSA6IHJlbW90ZU5ldHdvcmtPcHRpb25zLnJlY29yZEhlYWRlcnNcbiAgICBjb25zdCBjYW5SZWNvcmRCb2R5ID0gY29uZmlnLnJlY29yZEJvZHkgPT09IGZhbHNlID8gZmFsc2UgOiByZW1vdGVOZXR3b3JrT3B0aW9ucy5yZWNvcmRCb2R5XG4gICAgY29uc3QgY2FuUmVjb3JkUGVyZm9ybWFuY2UgPSBjb25maWcucmVjb3JkUGVyZm9ybWFuY2UgPT09IGZhbHNlID8gZmFsc2UgOiByZW1vdGVOZXR3b3JrT3B0aW9ucy5yZWNvcmRQZXJmb3JtYW5jZVxuXG4gICAgY29uc3QgcGF5bG9hZExpbWl0ZXIgPSBsaW1pdFBheWxvYWRTaXplKGNvbmZpZylcblxuICAgIGNvbnN0IGVuZm9yY2VkQ2xlYW5pbmdGbjogTmV0d29ya1JlY29yZE9wdGlvbnNbJ21hc2tSZXF1ZXN0Rm4nXSA9IChkOiBDYXB0dXJlZE5ldHdvcmtSZXF1ZXN0KSA9PlxuICAgICAgICBwYXlsb2FkTGltaXRlcihpZ25vcmVQb3N0SG9nUGF0aHMocmVtb3ZlQXV0aG9yaXphdGlvbkhlYWRlcihkKSkpXG5cbiAgICBjb25zdCBoYXNEZXByZWNhdGVkTWFza0Z1bmN0aW9uID0gX2lzRnVuY3Rpb24oaW5zdGFuY2VDb25maWcuc2Vzc2lvbl9yZWNvcmRpbmcubWFza05ldHdvcmtSZXF1ZXN0Rm4pXG5cbiAgICBpZiAoaGFzRGVwcmVjYXRlZE1hc2tGdW5jdGlvbiAmJiBfaXNGdW5jdGlvbihpbnN0YW5jZUNvbmZpZy5zZXNzaW9uX3JlY29yZGluZy5tYXNrQ2FwdHVyZWROZXR3b3JrUmVxdWVzdEZuKSkge1xuICAgICAgICBsb2dnZXIud2FybihcbiAgICAgICAgICAgICdCb3RoIGBtYXNrTmV0d29ya1JlcXVlc3RGbmAgYW5kIGBtYXNrQ2FwdHVyZWROZXR3b3JrUmVxdWVzdEZuYCBhcmUgZGVmaW5lZC4gYG1hc2tOZXR3b3JrUmVxdWVzdEZuYCB3aWxsIGJlIGlnbm9yZWQuJ1xuICAgICAgICApXG4gICAgfVxuXG4gICAgaWYgKGhhc0RlcHJlY2F0ZWRNYXNrRnVuY3Rpb24pIHtcbiAgICAgICAgaW5zdGFuY2VDb25maWcuc2Vzc2lvbl9yZWNvcmRpbmcubWFza0NhcHR1cmVkTmV0d29ya1JlcXVlc3RGbiA9IChkYXRhOiBDYXB0dXJlZE5ldHdvcmtSZXF1ZXN0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjbGVhbmVkVVJMID0gaW5zdGFuY2VDb25maWcuc2Vzc2lvbl9yZWNvcmRpbmcubWFza05ldHdvcmtSZXF1ZXN0Rm4hKHsgdXJsOiBkYXRhLm5hbWUgfSlcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgLi4uZGF0YSxcbiAgICAgICAgICAgICAgICBuYW1lOiBjbGVhbmVkVVJMPy51cmwsXG4gICAgICAgICAgICB9IGFzIENhcHR1cmVkTmV0d29ya1JlcXVlc3RcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbmZpZy5tYXNrUmVxdWVzdEZuID0gX2lzRnVuY3Rpb24oaW5zdGFuY2VDb25maWcuc2Vzc2lvbl9yZWNvcmRpbmcubWFza0NhcHR1cmVkTmV0d29ya1JlcXVlc3RGbilcbiAgICAgICAgPyAoZGF0YSkgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBjbGVhbmVkUmVxdWVzdCA9IGVuZm9yY2VkQ2xlYW5pbmdGbihkYXRhKVxuICAgICAgICAgICAgICByZXR1cm4gY2xlYW5lZFJlcXVlc3RcbiAgICAgICAgICAgICAgICAgID8gaW5zdGFuY2VDb25maWcuc2Vzc2lvbl9yZWNvcmRpbmcubWFza0NhcHR1cmVkTmV0d29ya1JlcXVlc3RGbj8uKGNsZWFuZWRSZXF1ZXN0KSA/PyB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkXG4gICAgICAgICAgfVxuICAgICAgICA6IHVuZGVmaW5lZFxuXG4gICAgaWYgKCFjb25maWcubWFza1JlcXVlc3RGbikge1xuICAgICAgICBjb25maWcubWFza1JlcXVlc3RGbiA9IGVuZm9yY2VkQ2xlYW5pbmdGblxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIC4uLmRlZmF1bHROZXR3b3JrT3B0aW9ucyxcbiAgICAgICAgLi4uY29uZmlnLFxuICAgICAgICByZWNvcmRIZWFkZXJzOiBjYW5SZWNvcmRIZWFkZXJzLFxuICAgICAgICByZWNvcmRCb2R5OiBjYW5SZWNvcmRCb2R5LFxuICAgICAgICByZWNvcmRQZXJmb3JtYW5jZTogY2FuUmVjb3JkUGVyZm9ybWFuY2UsXG4gICAgICAgIHJlY29yZEluaXRpYWxSZXF1ZXN0czogY2FuUmVjb3JkUGVyZm9ybWFuY2UsXG4gICAgfVxufVxuIiwgIi8qKlxuICogR0RQUiB1dGlsc1xuICpcbiAqIFRoZSBHZW5lcmFsIERhdGEgUHJvdGVjdGlvbiBSZWd1bGF0aW9uIChHRFBSKSBpcyBhIHJlZ3VsYXRpb24gaW4gRVUgbGF3IG9uIGRhdGEgcHJvdGVjdGlvblxuICogYW5kIHByaXZhY3kgZm9yIGFsbCBpbmRpdmlkdWFscyB3aXRoaW4gdGhlIEV1cm9wZWFuIFVuaW9uLiBJdCBhZGRyZXNzZXMgdGhlIGV4cG9ydCBvZiBwZXJzb25hbFxuICogZGF0YSBvdXRzaWRlIHRoZSBFVS4gVGhlIEdEUFIgYWltcyBwcmltYXJpbHkgdG8gZ2l2ZSBjb250cm9sIGJhY2sgdG8gY2l0aXplbnMgYW5kIHJlc2lkZW50c1xuICogb3ZlciB0aGVpciBwZXJzb25hbCBkYXRhIGFuZCB0byBzaW1wbGlmeSB0aGUgcmVndWxhdG9yeSBlbnZpcm9ubWVudCBmb3IgaW50ZXJuYXRpb25hbCBidXNpbmVzc1xuICogYnkgdW5pZnlpbmcgdGhlIHJlZ3VsYXRpb24gd2l0aGluIHRoZSBFVS5cbiAqXG4gKiBUaGlzIHNldCBvZiB1dGlsaXRpZXMgaXMgaW50ZW5kZWQgdG8gZW5hYmxlIG9wdCBpbi9vdXQgZnVuY3Rpb25hbGl0eSBpbiB0aGUgUG9zdEhvZyBKUyBTREsuXG4gKiBUaGVzZSBmdW5jdGlvbnMgYXJlIHVzZWQgaW50ZXJuYWxseSBieSB0aGUgU0RLIGFuZCBhcmUgbm90IGludGVuZGVkIHRvIGJlIHB1YmxpY2x5IGV4cG9zZWQuXG4gKi9cblxuaW1wb3J0IHsgX2VhY2gsIF9pbmNsdWRlcyB9IGZyb20gJy4vdXRpbHMnXG5pbXBvcnQgeyB3aW5kb3cgfSBmcm9tICcuL3V0aWxzL2dsb2JhbHMnXG5pbXBvcnQgeyBjb29raWVTdG9yZSwgbG9jYWxTdG9yZSwgbG9jYWxQbHVzQ29va2llU3RvcmUgfSBmcm9tICcuL3N0b3JhZ2UnXG5pbXBvcnQgeyBHRFBST3B0aW9ucywgUGVyc2lzdGVudFN0b3JlIH0gZnJvbSAnLi90eXBlcydcbmltcG9ydCB7IFBvc3RIb2cgfSBmcm9tICcuL3Bvc3Rob2ctY29yZSdcblxuaW1wb3J0IHsgX2lzTnVtYmVyLCBfaXNTdHJpbmcgfSBmcm9tICcuL3V0aWxzL3R5cGUtdXRpbHMnXG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tICcuL3V0aWxzL2xvZ2dlcidcblxuLyoqXG4gKiBBIGZ1bmN0aW9uIHVzZWQgdG8gY2FwdHVyZSBhIFBvc3RIb2cgZXZlbnQgKGUuZy4gUG9zdEhvZ0xpYi5jYXB0dXJlKVxuICogQGNhbGxiYWNrIGNhcHR1cmVGdW5jdGlvblxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50X25hbWUgVGhlIG5hbWUgb2YgdGhlIGV2ZW50LiBUaGlzIGNhbiBiZSBhbnl0aGluZyB0aGUgdXNlciBkb2VzIC0gJ0J1dHRvbiBDbGljaycsICdTaWduIFVwJywgJ0l0ZW0gUHVyY2hhc2VkJywgZXRjLlxuICogQHBhcmFtIHtPYmplY3R9IFtwcm9wZXJ0aWVzXSBBIHNldCBvZiBwcm9wZXJ0aWVzIHRvIGluY2x1ZGUgd2l0aCB0aGUgZXZlbnQgeW91J3JlIHNlbmRpbmcuIFRoZXNlIGRlc2NyaWJlIHRoZSB1c2VyIHdobyBkaWQgdGhlIGV2ZW50IG9yIGRldGFpbHMgYWJvdXQgdGhlIGV2ZW50IGl0c2VsZi5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYWxsYmFja10gSWYgcHJvdmlkZWQsIHRoZSBjYWxsYmFjayBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZCBhZnRlciBjYXB0dXJpbmcgdGhlIGV2ZW50LlxuICovXG5cbi8qKiBQdWJsaWMgKiovXG5cbmNvbnN0IEdEUFJfREVGQVVMVF9QRVJTSVNURU5DRV9QUkVGSVggPSAnX19waF9vcHRfaW5fb3V0XydcblxuLyoqXG4gKiBPcHQgdGhlIHVzZXIgaW4gdG8gZGF0YSBjYXB0dXJpbmcgYW5kIGNvb2tpZXMvbG9jYWxzdG9yYWdlIGZvciB0aGUgZ2l2ZW4gdG9rZW5cbiAqIEBwYXJhbSB7c3RyaW5nfSB0b2tlbiAtIFBvc3RIb2cgcHJvamVjdCBjYXB0dXJpbmcgdG9rZW5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAqIEBwYXJhbSB7Y2FwdHVyZUZ1bmN0aW9ufSBbb3B0aW9ucy5jYXB0dXJlXSAtIGZ1bmN0aW9uIHVzZWQgZm9yIGNhcHR1cmluZyBhIFBvc3RIb2cgZXZlbnQgdG8gcmVjb3JkIHRoZSBvcHQtaW4gYWN0aW9uXG4gKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMuY2FwdHVyZUV2ZW50TmFtZV0gLSBldmVudCBuYW1lIHRvIGJlIHVzZWQgZm9yIGNhcHR1cmluZyB0aGUgb3B0LWluIGFjdGlvblxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zLmNhcHR1cmVQcm9wZXJ0aWVzXSAtIHNldCBvZiBwcm9wZXJ0aWVzIHRvIGJlIGNhcHR1cmVkIGFsb25nIHdpdGggdGhlIG9wdC1pbiBhY3Rpb25cbiAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5wZXJzaXN0ZW5jZVR5cGVdIFBlcnNpc3RlbmNlIG1lY2hhbmlzbSB1c2VkIC0gY29va2llIG9yIGxvY2FsU3RvcmFnZVxuICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLnBlcnNpc3RlbmNlUHJlZml4PV9fcGhfb3B0X2luX291dF0gLSBjdXN0b20gcHJlZml4IHRvIGJlIHVzZWQgaW4gdGhlIGNvb2tpZS9sb2NhbHN0b3JhZ2UgbmFtZVxuICogQHBhcmFtIHtOdW1iZXJ9IFtvcHRpb25zLmNvb2tpZUV4cGlyYXRpb25dIC0gbnVtYmVyIG9mIGRheXMgdW50aWwgdGhlIG9wdC1pbiBjb29raWUgZXhwaXJlc1xuICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5jcm9zc1N1YmRvbWFpbkNvb2tpZV0gLSB3aGV0aGVyIHRoZSBvcHQtaW4gY29va2llIGlzIHNldCBhcyBjcm9zcy1zdWJkb21haW4gb3Igbm90XG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLnNlY3VyZUNvb2tpZV0gLSB3aGV0aGVyIHRoZSBvcHQtaW4gY29va2llIGlzIHNldCBhcyBzZWN1cmUgb3Igbm90XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBvcHRJbih0b2tlbjogc3RyaW5nLCBvcHRpb25zOiBHRFBST3B0aW9ucyk6IHZvaWQge1xuICAgIF9vcHRJbk91dCh0cnVlLCB0b2tlbiwgb3B0aW9ucylcbn1cblxuLyoqXG4gKiBPcHQgdGhlIHVzZXIgb3V0IG9mIGRhdGEgY2FwdHVyaW5nIGFuZCBjb29raWVzL2xvY2Fsc3RvcmFnZSBmb3IgdGhlIGdpdmVuIHRva2VuXG4gKiBAcGFyYW0ge3N0cmluZ30gdG9rZW4gLSBQb3N0SG9nIHByb2plY3QgY2FwdHVyaW5nIHRva2VuXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG4gKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMucGVyc2lzdGVuY2VUeXBlXSBQZXJzaXN0ZW5jZSBtZWNoYW5pc20gdXNlZCAtIGNvb2tpZSBvciBsb2NhbFN0b3JhZ2VcbiAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5wZXJzaXN0ZW5jZVByZWZpeD1fX3BoX29wdF9pbl9vdXRdIC0gY3VzdG9tIHByZWZpeCB0byBiZSB1c2VkIGluIHRoZSBjb29raWUvbG9jYWxzdG9yYWdlIG5hbWVcbiAqIEBwYXJhbSB7TnVtYmVyfSBbb3B0aW9ucy5jb29raWVFeHBpcmF0aW9uXSAtIG51bWJlciBvZiBkYXlzIHVudGlsIHRoZSBvcHQtb3V0IGNvb2tpZSBleHBpcmVzXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmNyb3NzU3ViZG9tYWluQ29va2llXSAtIHdoZXRoZXIgdGhlIG9wdC1vdXQgY29va2llIGlzIHNldCBhcyBjcm9zcy1zdWJkb21haW4gb3Igbm90XG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLnNlY3VyZUNvb2tpZV0gLSB3aGV0aGVyIHRoZSBvcHQtb3V0IGNvb2tpZSBpcyBzZXQgYXMgc2VjdXJlIG9yIG5vdFxuICovXG5leHBvcnQgZnVuY3Rpb24gb3B0T3V0KHRva2VuOiBzdHJpbmcsIG9wdGlvbnM6IEdEUFJPcHRpb25zKTogdm9pZCB7XG4gICAgX29wdEluT3V0KGZhbHNlLCB0b2tlbiwgb3B0aW9ucylcbn1cblxuLyoqXG4gKiBDaGVjayB3aGV0aGVyIHRoZSB1c2VyIGhhcyBvcHRlZCBpbiB0byBkYXRhIGNhcHR1cmluZyBhbmQgY29va2llcy9sb2NhbHN0b3JhZ2UgZm9yIHRoZSBnaXZlbiB0b2tlblxuICogQHBhcmFtIHtzdHJpbmd9IHRva2VuIC0gUG9zdEhvZyBwcm9qZWN0IGNhcHR1cmluZyB0b2tlblxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLnBlcnNpc3RlbmNlVHlwZV0gUGVyc2lzdGVuY2UgbWVjaGFuaXNtIHVzZWQgLSBjb29raWUgb3IgbG9jYWxTdG9yYWdlXG4gKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMucGVyc2lzdGVuY2VQcmVmaXg9X19waF9vcHRfaW5fb3V0XSAtIGN1c3RvbSBwcmVmaXggdG8gYmUgdXNlZCBpbiB0aGUgY29va2llL2xvY2Fsc3RvcmFnZSBuYW1lXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gd2hldGhlciB0aGUgdXNlciBoYXMgb3B0ZWQgaW4gdG8gdGhlIGdpdmVuIG9wdCB0eXBlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBoYXNPcHRlZEluKHRva2VuOiBzdHJpbmcsIG9wdGlvbnM6IEdEUFJPcHRpb25zKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIF9nZXRTdG9yYWdlVmFsdWUodG9rZW4sIG9wdGlvbnMpID09PSAnMSdcbn1cblxuLyoqXG4gKiBDaGVjayB3aGV0aGVyIHRoZSB1c2VyIGhhcyBvcHRlZCBvdXQgb2YgZGF0YSBjYXB0dXJpbmcgYW5kIGNvb2tpZXMvbG9jYWxzdG9yYWdlIGZvciB0aGUgZ2l2ZW4gdG9rZW5cbiAqIEBwYXJhbSB7c3RyaW5nfSB0b2tlbiAtIFBvc3RIb2cgcHJvamVjdCBjYXB0dXJpbmcgdG9rZW5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5wZXJzaXN0ZW5jZVR5cGVdIFBlcnNpc3RlbmNlIG1lY2hhbmlzbSB1c2VkIC0gY29va2llIG9yIGxvY2FsU3RvcmFnZVxuICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLnBlcnNpc3RlbmNlUHJlZml4PV9fcGhfb3B0X2luX291dF0gLSBjdXN0b20gcHJlZml4IHRvIGJlIHVzZWQgaW4gdGhlIGNvb2tpZS9sb2NhbHN0b3JhZ2UgbmFtZVxuICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5yZXNwZWN0RG50XSAtIGZsYWcgdG8gdGFrZSBicm93c2VyIEROVCBzZXR0aW5nIGludG8gYWNjb3VudFxuICogQHJldHVybnMge2Jvb2xlYW59IHdoZXRoZXIgdGhlIHVzZXIgaGFzIG9wdGVkIG91dCBvZiB0aGUgZ2l2ZW4gb3B0IHR5cGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGhhc09wdGVkT3V0KHRva2VuOiBzdHJpbmcsIG9wdGlvbnM6IFBhcnRpYWw8R0RQUk9wdGlvbnM+KTogYm9vbGVhbiB7XG4gICAgaWYgKF9oYXNEb05vdFRyYWNrRmxhZ09uKG9wdGlvbnMpKSB7XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICAgIHJldHVybiBfZ2V0U3RvcmFnZVZhbHVlKHRva2VuLCBvcHRpb25zKSA9PT0gJzAnXG59XG5cbi8qKlxuICogQ2xlYXIgdGhlIHVzZXIncyBvcHQgaW4vb3V0IHN0YXR1cyBvZiBkYXRhIGNhcHR1cmluZyBhbmQgY29va2llcy9sb2NhbHN0b3JhZ2UgZm9yIHRoZSBnaXZlbiB0b2tlblxuICogQHBhcmFtIHtzdHJpbmd9IHRva2VuIC0gUG9zdEhvZyBwcm9qZWN0IGNhcHR1cmluZyB0b2tlblxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLnBlcnNpc3RlbmNlVHlwZV0gUGVyc2lzdGVuY2UgbWVjaGFuaXNtIHVzZWQgLSBjb29raWUgb3IgbG9jYWxTdG9yYWdlXG4gKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMucGVyc2lzdGVuY2VQcmVmaXg9X19waF9vcHRfaW5fb3V0XSAtIGN1c3RvbSBwcmVmaXggdG8gYmUgdXNlZCBpbiB0aGUgY29va2llL2xvY2Fsc3RvcmFnZSBuYW1lXG4gKiBAcGFyYW0ge051bWJlcn0gW29wdGlvbnMuY29va2llRXhwaXJhdGlvbl0gLSBudW1iZXIgb2YgZGF5cyB1bnRpbCB0aGUgb3B0LWluIGNvb2tpZSBleHBpcmVzXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmNyb3NzU3ViZG9tYWluQ29va2llXSAtIHdoZXRoZXIgdGhlIG9wdC1pbiBjb29raWUgaXMgc2V0IGFzIGNyb3NzLXN1YmRvbWFpbiBvciBub3RcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuc2VjdXJlQ29va2llXSAtIHdoZXRoZXIgdGhlIG9wdC1pbiBjb29raWUgaXMgc2V0IGFzIHNlY3VyZSBvciBub3RcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyT3B0SW5PdXQodG9rZW46IHN0cmluZywgb3B0aW9uczogR0RQUk9wdGlvbnMpIHtcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fVxuICAgIF9nZXRTdG9yYWdlKG9wdGlvbnMpLnJlbW92ZShfZ2V0U3RvcmFnZUtleSh0b2tlbiwgb3B0aW9ucyksICEhb3B0aW9ucy5jcm9zc1N1YmRvbWFpbkNvb2tpZSlcbn1cblxuLyoqIFByaXZhdGUgKiovXG5cbi8qKlxuICogR2V0IHN0b3JhZ2UgdXRpbFxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLnBlcnNpc3RlbmNlVHlwZV1cbiAqIEByZXR1cm5zIHtvYmplY3R9IGVpdGhlciBjb29raWVTdG9yZSBvciBsb2NhbFN0b3JlXG4gKi9cbmZ1bmN0aW9uIF9nZXRTdG9yYWdlKG9wdGlvbnM6IEdEUFJPcHRpb25zKTogUGVyc2lzdGVudFN0b3JlIHtcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fVxuICAgIGlmIChvcHRpb25zLnBlcnNpc3RlbmNlVHlwZSA9PT0gJ2xvY2FsU3RvcmFnZScpIHtcbiAgICAgICAgcmV0dXJuIGxvY2FsU3RvcmVcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMucGVyc2lzdGVuY2VUeXBlID09PSAnbG9jYWxTdG9yYWdlK2Nvb2tpZScpIHtcbiAgICAgICAgcmV0dXJuIGxvY2FsUGx1c0Nvb2tpZVN0b3JlXG4gICAgfVxuICAgIHJldHVybiBjb29raWVTdG9yZVxufVxuXG4vKipcbiAqIEdldCB0aGUgbmFtZSBvZiB0aGUgY29va2llIHRoYXQgaXMgdXNlZCBmb3IgdGhlIGdpdmVuIG9wdCB0eXBlIChjYXB0dXJpbmcsIGNvb2tpZSwgZXRjLilcbiAqIEBwYXJhbSB7c3RyaW5nfSB0b2tlbiAtIFBvc3RIb2cgcHJvamVjdCBjYXB0dXJpbmcgdG9rZW5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5wZXJzaXN0ZW5jZVByZWZpeD1fX3BoX29wdF9pbl9vdXRdIC0gY3VzdG9tIHByZWZpeCB0byBiZSB1c2VkIGluIHRoZSBjb29raWUvbG9jYWxzdG9yYWdlIG5hbWVcbiAqIEByZXR1cm5zIHtzdHJpbmd9IHRoZSBuYW1lIG9mIHRoZSBjb29raWUgZm9yIHRoZSBnaXZlbiBvcHQgdHlwZVxuICovXG5mdW5jdGlvbiBfZ2V0U3RvcmFnZUtleSh0b2tlbjogc3RyaW5nLCBvcHRpb25zOiBHRFBST3B0aW9ucykge1xuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9XG4gICAgcmV0dXJuIChvcHRpb25zLnBlcnNpc3RlbmNlUHJlZml4IHx8IEdEUFJfREVGQVVMVF9QRVJTSVNURU5DRV9QUkVGSVgpICsgdG9rZW5cbn1cblxuLyoqXG4gKiBHZXQgdGhlIHZhbHVlIG9mIHRoZSBjb29raWUgdGhhdCBpcyB1c2VkIGZvciB0aGUgZ2l2ZW4gb3B0IHR5cGUgKGNhcHR1cmluZywgY29va2llLCBldGMuKVxuICogQHBhcmFtIHtzdHJpbmd9IHRva2VuIC0gUG9zdEhvZyBwcm9qZWN0IGNhcHR1cmluZyB0b2tlblxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLnBlcnNpc3RlbmNlUHJlZml4PV9fcGhfb3B0X2luX291dF0gLSBjdXN0b20gcHJlZml4IHRvIGJlIHVzZWQgaW4gdGhlIGNvb2tpZS9sb2NhbHN0b3JhZ2UgbmFtZVxuICogQHJldHVybnMge3N0cmluZ30gdGhlIHZhbHVlIG9mIHRoZSBjb29raWUgZm9yIHRoZSBnaXZlbiBvcHQgdHlwZVxuICovXG5mdW5jdGlvbiBfZ2V0U3RvcmFnZVZhbHVlKHRva2VuOiBzdHJpbmcsIG9wdGlvbnM6IEdEUFJPcHRpb25zKSB7XG4gICAgcmV0dXJuIF9nZXRTdG9yYWdlKG9wdGlvbnMpLmdldChfZ2V0U3RvcmFnZUtleSh0b2tlbiwgb3B0aW9ucykpXG59XG5cbi8qKlxuICogQ2hlY2sgd2hldGhlciB0aGUgdXNlciBoYXMgc2V0IHRoZSBETlQvZG9Ob3RUcmFjayBzZXR0aW5nIHRvIHRydWUgaW4gdGhlaXIgYnJvd3NlclxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLndpbmRvd10gLSBhbHRlcm5hdGUgd2luZG93IG9iamVjdCB0byBjaGVjazsgdXNlZCB0byBmb3JjZSB2YXJpb3VzIEROVCBzZXR0aW5ncyBpbiBicm93c2VyIHRlc3RzXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLnJlc3BlY3REbnRdIC0gZmxhZyB0byB0YWtlIGJyb3dzZXIgRE5UIHNldHRpbmcgaW50byBhY2NvdW50XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gd2hldGhlciB0aGUgRE5UIHNldHRpbmcgaXMgdHJ1ZVxuICovXG5mdW5jdGlvbiBfaGFzRG9Ob3RUcmFja0ZsYWdPbihvcHRpb25zOiBHRFBST3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMucmVzcGVjdERudCkge1xuICAgICAgICBjb25zdCB3aW4gPSAob3B0aW9ucyAmJiBvcHRpb25zLndpbmRvdykgfHwgd2luZG93XG4gICAgICAgIGNvbnN0IG5hdiA9IHdpbj8ubmF2aWdhdG9yXG4gICAgICAgIGxldCBoYXNEbnRPbiA9IGZhbHNlXG4gICAgICAgIF9lYWNoKFxuICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgIG5hdj8uZG9Ob3RUcmFjaywgLy8gc3RhbmRhcmRcbiAgICAgICAgICAgICAgICAobmF2IGFzIGFueSlbJ21zRG9Ob3RUcmFjayddLFxuICAgICAgICAgICAgICAgICh3aW4gYXMgYW55KVsnZG9Ob3RUcmFjayddLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkbnRWYWx1ZSkge1xuICAgICAgICAgICAgICAgIGlmIChfaW5jbHVkZXMoW3RydWUsIDEsICcxJywgJ3llcyddLCBkbnRWYWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaGFzRG50T24gPSB0cnVlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICApXG4gICAgICAgIHJldHVybiBoYXNEbnRPblxuICAgIH1cbiAgICByZXR1cm4gZmFsc2Vcbn1cblxuLyoqXG4gKiBTZXQgY29va2llL2xvY2Fsc3RvcmFnZSBmb3IgdGhlIHVzZXIgaW5kaWNhdGluZyB0aGF0IHRoZXkgYXJlIG9wdGVkIGluIG9yIG91dCBmb3IgdGhlIGdpdmVuIG9wdCB0eXBlXG4gKiBAcGFyYW0ge2Jvb2xlYW59IG9wdFZhbHVlIC0gd2hldGhlciB0byBvcHQgdGhlIHVzZXIgaW4gb3Igb3V0IGZvciB0aGUgZ2l2ZW4gb3B0IHR5cGVcbiAqIEBwYXJhbSB7c3RyaW5nfSB0b2tlbiAtIFBvc3RIb2cgcHJvamVjdCBjYXB0dXJpbmcgdG9rZW5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAqIEBwYXJhbSB7Y2FwdHVyZUZ1bmN0aW9ufSBbb3B0aW9ucy5jYXB0dXJlXSAtIGZ1bmN0aW9uIHVzZWQgZm9yIGNhcHR1cmluZyBhIFBvc3RIb2cgZXZlbnQgdG8gcmVjb3JkIHRoZSBvcHQtaW4gYWN0aW9uXG4gKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMuY2FwdHVyZUV2ZW50TmFtZV0gLSBldmVudCBuYW1lIHRvIGJlIHVzZWQgZm9yIGNhcHR1cmluZyB0aGUgb3B0LWluIGFjdGlvblxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zLmNhcHR1cmVQcm9wZXJ0aWVzXSAtIHNldCBvZiBwcm9wZXJ0aWVzIHRvIGJlIGNhcHR1cmVkIGFsb25nIHdpdGggdGhlIG9wdC1pbiBhY3Rpb25cbiAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5wZXJzaXN0ZW5jZVByZWZpeD1fX3BoX29wdF9pbl9vdXRdIC0gY3VzdG9tIHByZWZpeCB0byBiZSB1c2VkIGluIHRoZSBjb29raWUvbG9jYWxzdG9yYWdlIG5hbWVcbiAqIEBwYXJhbSB7TnVtYmVyfSBbb3B0aW9ucy5jb29raWVFeHBpcmF0aW9uXSAtIG51bWJlciBvZiBkYXlzIHVudGlsIHRoZSBvcHQtaW4gY29va2llIGV4cGlyZXNcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuY3Jvc3NTdWJkb21haW5Db29raWVdIC0gd2hldGhlciB0aGUgb3B0LWluIGNvb2tpZSBpcyBzZXQgYXMgY3Jvc3Mtc3ViZG9tYWluIG9yIG5vdFxuICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5zZWN1cmVDb29raWVdIC0gd2hldGhlciB0aGUgb3B0LWluIGNvb2tpZSBpcyBzZXQgYXMgc2VjdXJlIG9yIG5vdFxuICovXG5mdW5jdGlvbiBfb3B0SW5PdXQob3B0VmFsdWU6IGJvb2xlYW4sIHRva2VuOiBzdHJpbmcsIG9wdGlvbnM6IEdEUFJPcHRpb25zKSB7XG4gICAgaWYgKCFfaXNTdHJpbmcodG9rZW4pIHx8ICF0b2tlbi5sZW5ndGgpIHtcbiAgICAgICAgbG9nZ2VyLmVycm9yKCdnZHByLicgKyAob3B0VmFsdWUgPyAnb3B0SW4nIDogJ29wdE91dCcpICsgJyBjYWxsZWQgd2l0aCBhbiBpbnZhbGlkIHRva2VuJylcbiAgICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge31cblxuICAgIF9nZXRTdG9yYWdlKG9wdGlvbnMpLnNldChcbiAgICAgICAgX2dldFN0b3JhZ2VLZXkodG9rZW4sIG9wdGlvbnMpLFxuICAgICAgICBvcHRWYWx1ZSA/IDEgOiAwLFxuICAgICAgICBfaXNOdW1iZXIob3B0aW9ucy5jb29raWVFeHBpcmF0aW9uKSA/IG9wdGlvbnMuY29va2llRXhwaXJhdGlvbiA6IG51bGwsXG4gICAgICAgIG9wdGlvbnMuY3Jvc3NTdWJkb21haW5Db29raWUsXG4gICAgICAgIG9wdGlvbnMuc2VjdXJlQ29va2llXG4gICAgKVxuXG4gICAgaWYgKG9wdGlvbnMuY2FwdHVyZSAmJiBvcHRWYWx1ZSkge1xuICAgICAgICAvLyBvbmx5IGNhcHR1cmUgZXZlbnQgaWYgb3B0aW5nIGluIChvcHRWYWx1ZT10cnVlKVxuICAgICAgICBvcHRpb25zLmNhcHR1cmUob3B0aW9ucy5jYXB0dXJlRXZlbnROYW1lIHx8ICckb3B0X2luJywgb3B0aW9ucy5jYXB0dXJlUHJvcGVydGllcyB8fCB7fSwge1xuICAgICAgICAgICAgc2VuZF9pbnN0YW50bHk6IHRydWUsXG4gICAgICAgIH0pXG4gICAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdXNlck9wdGVkT3V0KHBvc3Rob2c6IFBvc3RIb2cpIHtcbiAgICBsZXQgb3B0ZWRPdXQgPSBmYWxzZVxuXG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdG9rZW4gPSBwb3N0aG9nLmNvbmZpZy50b2tlblxuICAgICAgICBjb25zdCByZXNwZWN0RG50ID0gcG9zdGhvZy5jb25maWcucmVzcGVjdF9kbnRcbiAgICAgICAgY29uc3QgcGVyc2lzdGVuY2VUeXBlID0gcG9zdGhvZy5jb25maWcub3B0X291dF9jYXB0dXJpbmdfcGVyc2lzdGVuY2VfdHlwZVxuICAgICAgICBjb25zdCBwZXJzaXN0ZW5jZVByZWZpeCA9IHBvc3Rob2cuY29uZmlnLm9wdF9vdXRfY2FwdHVyaW5nX2Nvb2tpZV9wcmVmaXggfHwgdW5kZWZpbmVkXG4gICAgICAgIGNvbnN0IHdpbiA9IChwb3N0aG9nLmNvbmZpZyBhcyBhbnkpLndpbmRvdyBhcyBXaW5kb3cgfCB1bmRlZmluZWQgLy8gdXNlZCB0byBvdmVycmlkZSB3aW5kb3cgZHVyaW5nIGJyb3dzZXIgdGVzdHNcblxuICAgICAgICBpZiAodG9rZW4pIHtcbiAgICAgICAgICAgIC8vIGlmIHRoZXJlIHdhcyBhbiBpc3N1ZSBnZXR0aW5nIHRoZSB0b2tlbiwgY29udGludWUgbWV0aG9kIGV4ZWN1dGlvbiBhcyBub3JtYWxcbiAgICAgICAgICAgIG9wdGVkT3V0ID0gaGFzT3B0ZWRPdXQodG9rZW4sIHtcbiAgICAgICAgICAgICAgICByZXNwZWN0RG50LFxuICAgICAgICAgICAgICAgIHBlcnNpc3RlbmNlVHlwZSxcbiAgICAgICAgICAgICAgICBwZXJzaXN0ZW5jZVByZWZpeCxcbiAgICAgICAgICAgICAgICB3aW5kb3c6IHdpbixcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgbG9nZ2VyLmVycm9yKCdVbmV4cGVjdGVkIGVycm9yIHdoZW4gY2hlY2tpbmcgY2FwdHVyaW5nIG9wdC1vdXQgc3RhdHVzOiAnICsgZXJyKVxuICAgIH1cbiAgICByZXR1cm4gb3B0ZWRPdXRcbn1cbiIsICJpbXBvcnQge1xuICAgIENPTlNPTEVfTE9HX1JFQ09SRElOR19FTkFCTEVEX1NFUlZFUl9TSURFLFxuICAgIFNFU1NJT05fUkVDT1JESU5HX0NBTlZBU19SRUNPUkRJTkcsXG4gICAgU0VTU0lPTl9SRUNPUkRJTkdfRU5BQkxFRF9TRVJWRVJfU0lERSxcbiAgICBTRVNTSU9OX1JFQ09SRElOR19JU19TQU1QTEVELFxuICAgIFNFU1NJT05fUkVDT1JESU5HX05FVFdPUktfUEFZTE9BRF9DQVBUVVJFLFxuICAgIFNFU1NJT05fUkVDT1JESU5HX1JFQ09SREVSX1ZFUlNJT05fU0VSVkVSX1NJREUsXG59IGZyb20gJy4uLy4uL2NvbnN0YW50cydcbmltcG9ydCB7XG4gICAgRlVMTF9TTkFQU0hPVF9FVkVOVF9UWVBFLFxuICAgIElOQ1JFTUVOVEFMX1NOQVBTSE9UX0VWRU5UX1RZUEUsXG4gICAgTUVUQV9FVkVOVF9UWVBFLFxuICAgIE11dGF0aW9uUmF0ZUxpbWl0ZXIsXG4gICAgcmVjb3JkT3B0aW9ucyxcbiAgICBycndlYlJlY29yZCxcbiAgICB0cnVuY2F0ZUxhcmdlQ29uc29sZUxvZ3MsXG59IGZyb20gJy4vc2Vzc2lvbnJlY29yZGluZy11dGlscydcbmltcG9ydCB7IFBvc3RIb2cgfSBmcm9tICcuLi8uLi9wb3N0aG9nLWNvcmUnXG5pbXBvcnQgeyBEZWNpZGVSZXNwb25zZSwgRmxhZ1ZhcmlhbnQsIE5ldHdvcmtSZWNvcmRPcHRpb25zLCBOZXR3b3JrUmVxdWVzdCwgUHJvcGVydGllcyB9IGZyb20gJy4uLy4uL3R5cGVzJ1xuaW1wb3J0IHsgRXZlbnRUeXBlLCB0eXBlIGV2ZW50V2l0aFRpbWUsIHR5cGUgbGlzdGVuZXJIYW5kbGVyLCBSZWNvcmRQbHVnaW4gfSBmcm9tICdAcnJ3ZWIvdHlwZXMnXG5pbXBvcnQgQ29uZmlnIGZyb20gJy4uLy4uL2NvbmZpZydcbmltcG9ydCB7IF90aW1lc3RhbXAsIGxvYWRTY3JpcHQgfSBmcm9tICcuLi8uLi91dGlscydcblxuaW1wb3J0IHtcbiAgICBfaXNCb29sZWFuLFxuICAgIF9pc0Z1bmN0aW9uLFxuICAgIF9pc051bGwsXG4gICAgX2lzTnVsbGlzaCxcbiAgICBfaXNOdW1iZXIsXG4gICAgX2lzT2JqZWN0LFxuICAgIF9pc1N0cmluZyxcbiAgICBfaXNVbmRlZmluZWQsXG59IGZyb20gJy4uLy4uL3V0aWxzL3R5cGUtdXRpbHMnXG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tICcuLi8uLi91dGlscy9sb2dnZXInXG5pbXBvcnQgeyBhc3NpZ25hYmxlV2luZG93LCB3aW5kb3cgfSBmcm9tICcuLi8uLi91dGlscy9nbG9iYWxzJ1xuaW1wb3J0IHsgYnVpbGROZXR3b3JrUmVxdWVzdE9wdGlvbnMgfSBmcm9tICcuL2NvbmZpZydcbmltcG9ydCB7IGlzTG9jYWxob3N0IH0gZnJvbSAnLi4vLi4vdXRpbHMvcmVxdWVzdC11dGlscydcbmltcG9ydCB7IHVzZXJPcHRlZE91dCB9IGZyb20gJy4uLy4uL2dkcHItdXRpbHMnXG5cbmNvbnN0IEJBU0VfRU5EUE9JTlQgPSAnL3MvJ1xuXG5jb25zdCBGSVZFX01JTlVURVMgPSAxMDAwICogNjAgKiA1XG5jb25zdCBUV09fU0VDT05EUyA9IDIwMDBcbmV4cG9ydCBjb25zdCBSRUNPUkRJTkdfSURMRV9BQ1RJVklUWV9USU1FT1VUX01TID0gRklWRV9NSU5VVEVTXG5leHBvcnQgY29uc3QgUkVDT1JESU5HX01BWF9FVkVOVF9TSVpFID0gMTAyNCAqIDEwMjQgKiAwLjkgLy8gfjFtYiAod2l0aCBzb21lIHdpZ2dsZSByb29tKVxuZXhwb3J0IGNvbnN0IFJFQ09SRElOR19CVUZGRVJfVElNRU9VVCA9IDIwMDAgLy8gMiBzZWNvbmRzXG5leHBvcnQgY29uc3QgU0VTU0lPTl9SRUNPUkRJTkdfQkFUQ0hfS0VZID0gJ3JlY29yZGluZ3MnXG5cbi8vIE5PVEU6IEltcG9ydGluZyB0aGlzIHR5cGUgaXMgcHJvYmxlbWF0aWMgYXMgd2UgY2FuJ3Qgc2FmZWx5IGJ1bmRsZSBpdCB0byBhIFRTIGRlZmluaXRpb24gc28sIGluc3RlYWQgd2UgcmVkZWZpbmUuXG4vLyBpbXBvcnQgdHlwZSB7IHJlY29yZCB9IGZyb20gJ3Jyd2ViMi90eXBpbmdzJ1xuLy8gaW1wb3J0IHR5cGUgeyByZWNvcmRPcHRpb25zIH0gZnJvbSAncnJ3ZWIvdHlwaW5ncy90eXBlcydcblxuLy8gQ29waWVkIGZyb20gcnJ3ZWIgdHlwaW5ncyB0byBhdm9pZCBpbXBvcnRcbmVudW0gSW5jcmVtZW50YWxTb3VyY2Uge1xuICAgIE11dGF0aW9uID0gMCxcbiAgICBNb3VzZU1vdmUgPSAxLFxuICAgIE1vdXNlSW50ZXJhY3Rpb24gPSAyLFxuICAgIFNjcm9sbCA9IDMsXG4gICAgVmlld3BvcnRSZXNpemUgPSA0LFxuICAgIElucHV0ID0gNSxcbiAgICBUb3VjaE1vdmUgPSA2LFxuICAgIE1lZGlhSW50ZXJhY3Rpb24gPSA3LFxuICAgIFN0eWxlU2hlZXRSdWxlID0gOCxcbiAgICBDYW52YXNNdXRhdGlvbiA9IDksXG4gICAgRm9udCA9IDEwLFxuICAgIExvZyA9IDExLFxuICAgIERyYWcgPSAxMixcbiAgICBTdHlsZURlY2xhcmF0aW9uID0gMTMsXG4gICAgU2VsZWN0aW9uID0gMTQsXG4gICAgQWRvcHRlZFN0eWxlU2hlZXQgPSAxNSxcbn1cblxuY29uc3QgQUNUSVZFX1NPVVJDRVMgPSBbXG4gICAgSW5jcmVtZW50YWxTb3VyY2UuTW91c2VNb3ZlLFxuICAgIEluY3JlbWVudGFsU291cmNlLk1vdXNlSW50ZXJhY3Rpb24sXG4gICAgSW5jcmVtZW50YWxTb3VyY2UuU2Nyb2xsLFxuICAgIEluY3JlbWVudGFsU291cmNlLlZpZXdwb3J0UmVzaXplLFxuICAgIEluY3JlbWVudGFsU291cmNlLklucHV0LFxuICAgIEluY3JlbWVudGFsU291cmNlLlRvdWNoTW92ZSxcbiAgICBJbmNyZW1lbnRhbFNvdXJjZS5NZWRpYUludGVyYWN0aW9uLFxuICAgIEluY3JlbWVudGFsU291cmNlLkRyYWcsXG5dXG5cbi8qKlxuICogU2Vzc2lvbiByZWNvcmRpbmcgc3RhcnRzIGluIGJ1ZmZlcmluZyBtb2RlIHdoaWxlIHdhaXRpbmcgZm9yIGRlY2lkZSByZXNwb25zZVxuICogT25jZSB0aGUgcmVzcG9uc2UgaXMgcmVjZWl2ZWQgaXQgbWlnaHQgYmUgZGlzYWJsZWQsIGFjdGl2ZSBvciBzYW1wbGVkXG4gKiBXaGVuIHNhbXBsZWQgdGhhdCBtZWFucyBhIHNhbXBsZSByYXRlIGlzIHNldCBhbmQgdGhlIGxhc3QgdGltZSB0aGUgc2Vzc2lvbiBpZCB3YXMgcm90YXRlZFxuICogdGhlIHNhbXBsZSByYXRlIGRldGVybWluZWQgdGhpcyBzZXNzaW9uIHNob3VsZCBiZSBzZW50IHRvIHRoZSBzZXJ2ZXIuXG4gKi9cbnR5cGUgU2Vzc2lvblJlY29yZGluZ1N0YXR1cyA9ICdkaXNhYmxlZCcgfCAnc2FtcGxlZCcgfCAnYWN0aXZlJyB8ICdidWZmZXJpbmcnXG5cbmludGVyZmFjZSBTbmFwc2hvdEJ1ZmZlciB7XG4gICAgc2l6ZTogbnVtYmVyXG4gICAgZGF0YTogYW55W11cbiAgICBzZXNzaW9uSWQ6IHN0cmluZyB8IG51bGxcbiAgICB3aW5kb3dJZDogc3RyaW5nIHwgbnVsbFxufVxuXG5pbnRlcmZhY2UgUXVldWVkUlJXZWJFdmVudCB7XG4gICAgcnJ3ZWJNZXRob2Q6ICgpID0+IHZvaWRcbiAgICBhdHRlbXB0OiBudW1iZXJcbiAgICAvLyB0aGUgdGltZXN0YW1wIHRoaXMgd2FzIGZpcnN0IHB1dCBpbnRvIHRoaXMgcXVldWVcbiAgICBlbnF1ZXVlZEF0OiBudW1iZXJcbn1cblxuY29uc3QgbmV3UXVldWVkRXZlbnQgPSAocnJ3ZWJNZXRob2Q6ICgpID0+IHZvaWQpOiBRdWV1ZWRSUldlYkV2ZW50ID0+ICh7XG4gICAgcnJ3ZWJNZXRob2QsXG4gICAgZW5xdWV1ZWRBdDogRGF0ZS5ub3coKSxcbiAgICBhdHRlbXB0OiAxLFxufSlcblxuY29uc3QgTE9HR0VSX1BSRUZJWCA9ICdbU2Vzc2lvblJlY29yZGluZ10nXG5cbmV4cG9ydCBjbGFzcyBTZXNzaW9uUmVjb3JkaW5nIHtcbiAgICBwcml2YXRlIGluc3RhbmNlOiBQb3N0SG9nXG4gICAgcHJpdmF0ZSBfZW5kcG9pbnQ6IHN0cmluZ1xuICAgIHByaXZhdGUgZmx1c2hCdWZmZXJUaW1lcj86IGFueVxuXG4gICAgLy8gd2UgaGF2ZSBhIGJ1ZmZlciAtIHRoYXQgY29udGFpbnMgUG9zdEhvZyBzbmFwc2hvdCBldmVudHMgcmVhZHkgdG8gYmUgc2VudCB0byB0aGUgc2VydmVyXG4gICAgcHJpdmF0ZSBidWZmZXI/OiBTbmFwc2hvdEJ1ZmZlclxuICAgIC8vIGFuZCBhIHF1ZXVlIC0gdGhhdCBjb250YWlucyBycndlYiBldmVudHMgdGhhdCB3ZSB3YW50IHRvIHNlbmQgdG8gcnJ3ZWIsIGJ1dCBycndlYiB3YXNuJ3QgYWJsZSB0byBhY2NlcHQgdGhlbSB5ZXRcbiAgICBwcml2YXRlIHF1ZXVlZFJSV2ViRXZlbnRzOiBRdWV1ZWRSUldlYkV2ZW50W10gPSBbXVxuXG4gICAgcHJpdmF0ZSBtdXRhdGlvblJhdGVMaW1pdGVyPzogTXV0YXRpb25SYXRlTGltaXRlclxuICAgIHByaXZhdGUgX2NhcHR1cmVTdGFydGVkOiBib29sZWFuXG4gICAgcHJpdmF0ZSBzdG9wUnJ3ZWI6IGxpc3RlbmVySGFuZGxlciB8IHVuZGVmaW5lZFxuICAgIHByaXZhdGUgcmVjZWl2ZWREZWNpZGU6IGJvb2xlYW5cbiAgICBwcml2YXRlIHJyd2ViUmVjb3JkOiBycndlYlJlY29yZCB8IHVuZGVmaW5lZFxuICAgIHByaXZhdGUgaXNJZGxlID0gZmFsc2VcblxuICAgIHByaXZhdGUgX2xpbmtlZEZsYWdTZWVuOiBib29sZWFuID0gZmFsc2VcbiAgICBwcml2YXRlIF9sYXN0QWN0aXZpdHlUaW1lc3RhbXA6IG51bWJlciA9IERhdGUubm93KClcbiAgICBwcml2YXRlIHdpbmRvd0lkOiBzdHJpbmcgfCBudWxsID0gbnVsbFxuICAgIHByaXZhdGUgc2Vzc2lvbklkOiBzdHJpbmcgfCBudWxsID0gbnVsbFxuICAgIHByaXZhdGUgX2xpbmtlZEZsYWc6IHN0cmluZyB8IEZsYWdWYXJpYW50IHwgbnVsbCA9IG51bGxcbiAgICBwcml2YXRlIF9zYW1wbGVSYXRlOiBudW1iZXIgfCBudWxsID0gbnVsbFxuICAgIHByaXZhdGUgX21pbmltdW1EdXJhdGlvbjogbnVtYmVyIHwgbnVsbCA9IG51bGxcblxuICAgIHByaXZhdGUgX2Z1bGxTbmFwc2hvdFRpbWVyPzogbnVtYmVyXG5cbiAgICAvLyBVdGlsIHRvIGhlbHAgZGV2ZWxvcGVycyB3b3JraW5nIG9uIHRoaXMgZmVhdHVyZSBtYW51YWxseSBvdmVycmlkZVxuICAgIF9mb3JjZUFsbG93TG9jYWxob3N0TmV0d29ya0NhcHR1cmUgPSBmYWxzZVxuXG4gICAgcHVibGljIGdldCBzdGFydGVkKCk6IGJvb2xlYW4ge1xuICAgICAgICAvLyBUT0RPIGNvdWxkIHdlIHVzZSBzdGF0dXMgaW5zdGVhZCBvZiBfY2FwdHVyZVN0YXJ0ZWQ/XG4gICAgICAgIHJldHVybiB0aGlzLl9jYXB0dXJlU3RhcnRlZFxuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0IHNlc3Npb25NYW5hZ2VyKCkge1xuICAgICAgICBpZiAoIXRoaXMuaW5zdGFuY2Uuc2Vzc2lvbk1hbmFnZXIpIHtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcihMT0dHRVJfUFJFRklYICsgJyBzdGFydGVkIHdpdGhvdXQgdmFsaWQgc2Vzc2lvbk1hbmFnZXInKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKExPR0dFUl9QUkVGSVggKyAnIHN0YXJ0ZWQgd2l0aG91dCB2YWxpZCBzZXNzaW9uTWFuYWdlci4gVGhpcyBpcyBhIGJ1Zy4nKVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaW5zdGFuY2Uuc2Vzc2lvbk1hbmFnZXJcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldCBpc1NhbXBsZWQoKTogYm9vbGVhbiB8IG51bGwge1xuICAgICAgICBpZiAoX2lzTnVtYmVyKHRoaXMuX3NhbXBsZVJhdGUpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pbnN0YW5jZS5nZXRfcHJvcGVydHkoU0VTU0lPTl9SRUNPUkRJTkdfSVNfU0FNUExFRClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGdldCBzZXNzaW9uRHVyYXRpb24oKTogbnVtYmVyIHwgbnVsbCB7XG4gICAgICAgIGNvbnN0IG1vc3RSZWNlbnRTbmFwc2hvdCA9IHRoaXMuYnVmZmVyPy5kYXRhW3RoaXMuYnVmZmVyPy5kYXRhLmxlbmd0aCAtIDFdXG4gICAgICAgIGNvbnN0IHsgc2Vzc2lvblN0YXJ0VGltZXN0YW1wIH0gPSB0aGlzLnNlc3Npb25NYW5hZ2VyLmNoZWNrQW5kR2V0U2Vzc2lvbkFuZFdpbmRvd0lkKHRydWUpXG4gICAgICAgIHJldHVybiBtb3N0UmVjZW50U25hcHNob3QgPyBtb3N0UmVjZW50U25hcHNob3QudGltZXN0YW1wIC0gc2Vzc2lvblN0YXJ0VGltZXN0YW1wIDogbnVsbFxuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0IGlzUmVjb3JkaW5nRW5hYmxlZCgpIHtcbiAgICAgICAgY29uc3QgZW5hYmxlZF9zZXJ2ZXJfc2lkZSA9ICEhdGhpcy5pbnN0YW5jZS5nZXRfcHJvcGVydHkoU0VTU0lPTl9SRUNPUkRJTkdfRU5BQkxFRF9TRVJWRVJfU0lERSlcbiAgICAgICAgY29uc3QgZW5hYmxlZF9jbGllbnRfc2lkZSA9ICF0aGlzLmluc3RhbmNlLmNvbmZpZy5kaXNhYmxlX3Nlc3Npb25fcmVjb3JkaW5nXG4gICAgICAgIHJldHVybiB3aW5kb3cgJiYgZW5hYmxlZF9zZXJ2ZXJfc2lkZSAmJiBlbmFibGVkX2NsaWVudF9zaWRlXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXQgaXNDb25zb2xlTG9nQ2FwdHVyZUVuYWJsZWQoKSB7XG4gICAgICAgIGNvbnN0IGVuYWJsZWRfc2VydmVyX3NpZGUgPSAhIXRoaXMuaW5zdGFuY2UuZ2V0X3Byb3BlcnR5KENPTlNPTEVfTE9HX1JFQ09SRElOR19FTkFCTEVEX1NFUlZFUl9TSURFKVxuICAgICAgICBjb25zdCBlbmFibGVkX2NsaWVudF9zaWRlID0gdGhpcy5pbnN0YW5jZS5jb25maWcuZW5hYmxlX3JlY29yZGluZ19jb25zb2xlX2xvZ1xuICAgICAgICByZXR1cm4gZW5hYmxlZF9jbGllbnRfc2lkZSA/PyBlbmFibGVkX3NlcnZlcl9zaWRlXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXQgY2FudmFzUmVjb3JkaW5nKCk6IHsgZW5hYmxlZDogYm9vbGVhbjsgZnBzOiBudW1iZXI7IHF1YWxpdHk6IG51bWJlciB9IHwgdW5kZWZpbmVkIHtcbiAgICAgICAgY29uc3QgY2FudmFzUmVjb3JkaW5nX3NlcnZlcl9zaWRlID0gdGhpcy5pbnN0YW5jZS5nZXRfcHJvcGVydHkoU0VTU0lPTl9SRUNPUkRJTkdfQ0FOVkFTX1JFQ09SRElORylcbiAgICAgICAgcmV0dXJuIGNhbnZhc1JlY29yZGluZ19zZXJ2ZXJfc2lkZSAmJiBjYW52YXNSZWNvcmRpbmdfc2VydmVyX3NpZGUuZnBzICYmIGNhbnZhc1JlY29yZGluZ19zZXJ2ZXJfc2lkZS5xdWFsaXR5XG4gICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAgIGVuYWJsZWQ6IGNhbnZhc1JlY29yZGluZ19zZXJ2ZXJfc2lkZS5lbmFibGVkLFxuICAgICAgICAgICAgICAgICAgZnBzOiBjYW52YXNSZWNvcmRpbmdfc2VydmVyX3NpZGUuZnBzLFxuICAgICAgICAgICAgICAgICAgcXVhbGl0eTogY2FudmFzUmVjb3JkaW5nX3NlcnZlcl9zaWRlLnF1YWxpdHksXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDogdW5kZWZpbmVkXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXQgcmVjb3JkaW5nVmVyc2lvbigpIHtcbiAgICAgICAgY29uc3QgcmVjb3JkaW5nVmVyc2lvbl9zZXJ2ZXJfc2lkZSA9IHRoaXMuaW5zdGFuY2UuZ2V0X3Byb3BlcnR5KFNFU1NJT05fUkVDT1JESU5HX1JFQ09SREVSX1ZFUlNJT05fU0VSVkVSX1NJREUpXG4gICAgICAgIGNvbnN0IHJlY29yZGluZ1ZlcnNpb25fY2xpZW50X3NpZGUgPSB0aGlzLmluc3RhbmNlLmNvbmZpZy5zZXNzaW9uX3JlY29yZGluZz8ucmVjb3JkZXJWZXJzaW9uXG4gICAgICAgIHJldHVybiByZWNvcmRpbmdWZXJzaW9uX2NsaWVudF9zaWRlIHx8IHJlY29yZGluZ1ZlcnNpb25fc2VydmVyX3NpZGUgfHwgJ3YxJ1xuICAgIH1cblxuICAgIC8vIG5ldHdvcmsgcGF5bG9hZCBjYXB0dXJlIGNvbmZpZyBoYXMgdGhyZWUgcGFydHNcbiAgICAvLyBlYWNoIGNhbiBiZSBjb25maWd1cmVkIHNlcnZlciBzaWRlIG9yIGNsaWVudCBzaWRlXG4gICAgcHJpdmF0ZSBnZXQgbmV0d29ya1BheWxvYWRDYXB0dXJlKCk6XG4gICAgICAgIHwgUGljazxOZXR3b3JrUmVjb3JkT3B0aW9ucywgJ3JlY29yZEhlYWRlcnMnIHwgJ3JlY29yZEJvZHknIHwgJ3JlY29yZFBlcmZvcm1hbmNlJz5cbiAgICAgICAgfCB1bmRlZmluZWQge1xuICAgICAgICBjb25zdCBuZXR3b3JrUGF5bG9hZENhcHR1cmVfc2VydmVyX3NpZGUgPSB0aGlzLmluc3RhbmNlLmdldF9wcm9wZXJ0eShTRVNTSU9OX1JFQ09SRElOR19ORVRXT1JLX1BBWUxPQURfQ0FQVFVSRSlcbiAgICAgICAgY29uc3QgbmV0d29ya1BheWxvYWRDYXB0dXJlX2NsaWVudF9zaWRlID0ge1xuICAgICAgICAgICAgcmVjb3JkSGVhZGVyczogdGhpcy5pbnN0YW5jZS5jb25maWcuc2Vzc2lvbl9yZWNvcmRpbmc/LnJlY29yZEhlYWRlcnMsXG4gICAgICAgICAgICByZWNvcmRCb2R5OiB0aGlzLmluc3RhbmNlLmNvbmZpZy5zZXNzaW9uX3JlY29yZGluZz8ucmVjb3JkQm9keSxcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBoZWFkZXJzRW5hYmxlZCA9XG4gICAgICAgICAgICBuZXR3b3JrUGF5bG9hZENhcHR1cmVfY2xpZW50X3NpZGU/LnJlY29yZEhlYWRlcnMgfHwgbmV0d29ya1BheWxvYWRDYXB0dXJlX3NlcnZlcl9zaWRlPy5yZWNvcmRIZWFkZXJzXG4gICAgICAgIGNvbnN0IGJvZHlFbmFibGVkID1cbiAgICAgICAgICAgIG5ldHdvcmtQYXlsb2FkQ2FwdHVyZV9jbGllbnRfc2lkZT8ucmVjb3JkQm9keSB8fCBuZXR3b3JrUGF5bG9hZENhcHR1cmVfc2VydmVyX3NpZGU/LnJlY29yZEJvZHlcbiAgICAgICAgY29uc3QgcGVyZm9ybWFuY2VFbmFibGVkID1cbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2UuY29uZmlnLmNhcHR1cmVfcGVyZm9ybWFuY2UgfHwgbmV0d29ya1BheWxvYWRDYXB0dXJlX3NlcnZlcl9zaWRlPy5jYXB0dXJlUGVyZm9ybWFuY2VcblxuICAgICAgICByZXR1cm4gaGVhZGVyc0VuYWJsZWQgfHwgYm9keUVuYWJsZWQgfHwgcGVyZm9ybWFuY2VFbmFibGVkXG4gICAgICAgICAgICA/IHsgcmVjb3JkSGVhZGVyczogaGVhZGVyc0VuYWJsZWQsIHJlY29yZEJvZHk6IGJvZHlFbmFibGVkLCByZWNvcmRQZXJmb3JtYW5jZTogcGVyZm9ybWFuY2VFbmFibGVkIH1cbiAgICAgICAgICAgIDogdW5kZWZpbmVkXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogZGVmYXVsdHMgdG8gYnVmZmVyaW5nIG1vZGUgdW50aWwgYSBkZWNpZGUgcmVzcG9uc2UgaXMgcmVjZWl2ZWRcbiAgICAgKiBvbmNlIGEgZGVjaWRlIHJlc3BvbnNlIGlzIHJlY2VpdmVkIHN0YXR1cyBjYW4gYmUgZGlzYWJsZWQsIGFjdGl2ZSBvciBzYW1wbGVkXG4gICAgICovXG4gICAgcHJpdmF0ZSBnZXQgc3RhdHVzKCk6IFNlc3Npb25SZWNvcmRpbmdTdGF0dXMge1xuICAgICAgICBpZiAoIXRoaXMucmVjZWl2ZWREZWNpZGUpIHtcbiAgICAgICAgICAgIHJldHVybiAnYnVmZmVyaW5nJ1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aGlzLmlzUmVjb3JkaW5nRW5hYmxlZCkge1xuICAgICAgICAgICAgcmV0dXJuICdkaXNhYmxlZCdcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghX2lzTnVsbGlzaCh0aGlzLl9saW5rZWRGbGFnKSAmJiAhdGhpcy5fbGlua2VkRmxhZ1NlZW4pIHtcbiAgICAgICAgICAgIHJldHVybiAnYnVmZmVyaW5nJ1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKF9pc0Jvb2xlYW4odGhpcy5pc1NhbXBsZWQpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pc1NhbXBsZWQgPyAnc2FtcGxlZCcgOiAnZGlzYWJsZWQnXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gJ2FjdGl2ZSdcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0cnVjdG9yKGluc3RhbmNlOiBQb3N0SG9nKSB7XG4gICAgICAgIHRoaXMuaW5zdGFuY2UgPSBpbnN0YW5jZVxuICAgICAgICB0aGlzLl9jYXB0dXJlU3RhcnRlZCA9IGZhbHNlXG4gICAgICAgIHRoaXMuX2VuZHBvaW50ID0gQkFTRV9FTkRQT0lOVFxuICAgICAgICB0aGlzLnN0b3BScndlYiA9IHVuZGVmaW5lZFxuICAgICAgICB0aGlzLnJlY2VpdmVkRGVjaWRlID0gZmFsc2VcblxuICAgICAgICB3aW5kb3c/LmFkZEV2ZW50TGlzdGVuZXIoJ2JlZm9yZXVubG9hZCcsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX2ZsdXNoQnVmZmVyKClcbiAgICAgICAgfSlcblxuICAgICAgICB3aW5kb3c/LmFkZEV2ZW50TGlzdGVuZXIoJ29mZmxpbmUnLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl90cnlBZGRDdXN0b21FdmVudCgnYnJvd3NlciBvZmZsaW5lJywge30pXG4gICAgICAgIH0pXG5cbiAgICAgICAgd2luZG93Py5hZGRFdmVudExpc3RlbmVyKCdvbmxpbmUnLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl90cnlBZGRDdXN0b21FdmVudCgnYnJvd3NlciBvbmxpbmUnLCB7fSlcbiAgICAgICAgfSlcblxuICAgICAgICBpZiAoIXRoaXMuaW5zdGFuY2Uuc2Vzc2lvbk1hbmFnZXIpIHtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcihMT0dHRVJfUFJFRklYICsgJyBzdGFydGVkIHdpdGhvdXQgdmFsaWQgc2Vzc2lvbk1hbmFnZXInKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKExPR0dFUl9QUkVGSVggKyAnIHN0YXJ0ZWQgd2l0aG91dCB2YWxpZCBzZXNzaW9uTWFuYWdlci4gVGhpcyBpcyBhIGJ1Zy4nKVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5idWZmZXIgPSB0aGlzLmNsZWFyQnVmZmVyKClcbiAgICB9XG5cbiAgICBzdGFydFJlY29yZGluZ0lmRW5hYmxlZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNSZWNvcmRpbmdFbmFibGVkKSB7XG4gICAgICAgICAgICB0aGlzLl9zdGFydENhcHR1cmUoKVxuICAgICAgICAgICAgbG9nZ2VyLmluZm8oTE9HR0VSX1BSRUZJWCArICcgc3RhcnRlZCcpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnN0b3BSZWNvcmRpbmcoKVxuICAgICAgICAgICAgdGhpcy5jbGVhckJ1ZmZlcigpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzdG9wUmVjb3JkaW5nKCkge1xuICAgICAgICBpZiAodGhpcy5fY2FwdHVyZVN0YXJ0ZWQgJiYgdGhpcy5zdG9wUnJ3ZWIpIHtcbiAgICAgICAgICAgIHRoaXMuc3RvcFJyd2ViKClcbiAgICAgICAgICAgIHRoaXMuc3RvcFJyd2ViID0gdW5kZWZpbmVkXG4gICAgICAgICAgICB0aGlzLl9jYXB0dXJlU3RhcnRlZCA9IGZhbHNlXG4gICAgICAgICAgICBsb2dnZXIuaW5mbyhMT0dHRVJfUFJFRklYICsgJyBzdG9wcGVkJylcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgbWFrZVNhbXBsaW5nRGVjaXNpb24oc2Vzc2lvbklkOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgY29uc3Qgc2Vzc2lvbklkQ2hhbmdlZCA9IHRoaXMuc2Vzc2lvbklkICE9PSBzZXNzaW9uSWRcblxuICAgICAgICBpZiAoIV9pc051bWJlcih0aGlzLl9zYW1wbGVSYXRlKSkge1xuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZS5wZXJzaXN0ZW5jZT8ucmVnaXN0ZXIoe1xuICAgICAgICAgICAgICAgIFtTRVNTSU9OX1JFQ09SRElOR19JU19TQU1QTEVEXTogbnVsbCxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHN0b3JlZElzU2FtcGxlZCA9IHRoaXMuaXNTYW1wbGVkXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGlmIHdlIGdldCB0aGlzIGZhciB0aGVuIHdlIHNob3VsZCBtYWtlIGEgc2FtcGxpbmcgZGVjaXNpb24uXG4gICAgICAgICAqIFdoZW4gdGhlIHNlc3Npb24gaWQgY2hhbmdlcyBvciB0aGVyZSBpcyBubyBzdG9yZWQgc2FtcGxpbmcgZGVjaXNpb24gZm9yIHRoaXMgc2Vzc2lvbiBpZFxuICAgICAgICAgKiB0aGVuIHdlIHNob3VsZCBtYWtlIGEgbmV3IGRlY2lzaW9uLlxuICAgICAgICAgKlxuICAgICAgICAgKiBPdGhlcndpc2UsIHdlIHNob3VsZCB1c2UgdGhlIHN0b3JlZCBkZWNpc2lvbi5cbiAgICAgICAgICovXG4gICAgICAgIGxldCBzaG91bGRTYW1wbGU6IGJvb2xlYW5cbiAgICAgICAgaWYgKHNlc3Npb25JZENoYW5nZWQgfHwgIV9pc0Jvb2xlYW4oc3RvcmVkSXNTYW1wbGVkKSkge1xuICAgICAgICAgICAgY29uc3QgcmFuZG9tTnVtYmVyID0gTWF0aC5yYW5kb20oKVxuICAgICAgICAgICAgc2hvdWxkU2FtcGxlID0gcmFuZG9tTnVtYmVyIDwgdGhpcy5fc2FtcGxlUmF0ZVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2hvdWxkU2FtcGxlID0gc3RvcmVkSXNTYW1wbGVkXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXNob3VsZFNhbXBsZSkge1xuICAgICAgICAgICAgbG9nZ2VyLndhcm4oXG4gICAgICAgICAgICAgICAgTE9HR0VSX1BSRUZJWCArXG4gICAgICAgICAgICAgICAgICAgIGAgU2FtcGxlIHJhdGUgKCR7dGhpcy5fc2FtcGxlUmF0ZX0pIGhhcyBkZXRlcm1pbmVkIHRoYXQgdGhpcyBzZXNzaW9uSWQgKCR7c2Vzc2lvbklkfSkgd2lsbCBub3QgYmUgc2VudCB0byB0aGUgc2VydmVyLmBcbiAgICAgICAgICAgIClcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuaW5zdGFuY2UucGVyc2lzdGVuY2U/LnJlZ2lzdGVyKHtcbiAgICAgICAgICAgIFtTRVNTSU9OX1JFQ09SRElOR19JU19TQU1QTEVEXTogc2hvdWxkU2FtcGxlLFxuICAgICAgICB9KVxuICAgIH1cblxuICAgIGFmdGVyRGVjaWRlUmVzcG9uc2UocmVzcG9uc2U6IERlY2lkZVJlc3BvbnNlKSB7XG4gICAgICAgIGlmICh0aGlzLmluc3RhbmNlLnBlcnNpc3RlbmNlKSB7XG4gICAgICAgICAgICB0aGlzLmluc3RhbmNlLnBlcnNpc3RlbmNlLnJlZ2lzdGVyKHtcbiAgICAgICAgICAgICAgICBbU0VTU0lPTl9SRUNPUkRJTkdfRU5BQkxFRF9TRVJWRVJfU0lERV06ICEhcmVzcG9uc2VbJ3Nlc3Npb25SZWNvcmRpbmcnXSxcbiAgICAgICAgICAgICAgICBbQ09OU09MRV9MT0dfUkVDT1JESU5HX0VOQUJMRURfU0VSVkVSX1NJREVdOiByZXNwb25zZS5zZXNzaW9uUmVjb3JkaW5nPy5jb25zb2xlTG9nUmVjb3JkaW5nRW5hYmxlZCxcbiAgICAgICAgICAgICAgICBbU0VTU0lPTl9SRUNPUkRJTkdfUkVDT1JERVJfVkVSU0lPTl9TRVJWRVJfU0lERV06IHJlc3BvbnNlLnNlc3Npb25SZWNvcmRpbmc/LnJlY29yZGVyVmVyc2lvbixcbiAgICAgICAgICAgICAgICBbU0VTU0lPTl9SRUNPUkRJTkdfTkVUV09SS19QQVlMT0FEX0NBUFRVUkVdOiB7XG4gICAgICAgICAgICAgICAgICAgIGNhcHR1cmVQZXJmb3JtYW5jZTogcmVzcG9uc2UuY2FwdHVyZVBlcmZvcm1hbmNlLFxuICAgICAgICAgICAgICAgICAgICAuLi5yZXNwb25zZS5zZXNzaW9uUmVjb3JkaW5nPy5uZXR3b3JrUGF5bG9hZENhcHR1cmUsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBbU0VTU0lPTl9SRUNPUkRJTkdfQ0FOVkFTX1JFQ09SRElOR106IHtcbiAgICAgICAgICAgICAgICAgICAgZW5hYmxlZDogcmVzcG9uc2Uuc2Vzc2lvblJlY29yZGluZz8ucmVjb3JkQ2FudmFzLFxuICAgICAgICAgICAgICAgICAgICBmcHM6IHJlc3BvbnNlLnNlc3Npb25SZWNvcmRpbmc/LmNhbnZhc0ZwcyxcbiAgICAgICAgICAgICAgICAgICAgcXVhbGl0eTogcmVzcG9uc2Uuc2Vzc2lvblJlY29yZGluZz8uY2FudmFzUXVhbGl0eSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHJlY2VpdmVkU2FtcGxlUmF0ZSA9IHJlc3BvbnNlLnNlc3Npb25SZWNvcmRpbmc/LnNhbXBsZVJhdGVcbiAgICAgICAgdGhpcy5fc2FtcGxlUmF0ZSA9IF9pc051bGxpc2gocmVjZWl2ZWRTYW1wbGVSYXRlKSA/IG51bGwgOiBwYXJzZUZsb2F0KHJlY2VpdmVkU2FtcGxlUmF0ZSlcblxuICAgICAgICBjb25zdCByZWNlaXZlZE1pbmltdW1EdXJhdGlvbiA9IHJlc3BvbnNlLnNlc3Npb25SZWNvcmRpbmc/Lm1pbmltdW1EdXJhdGlvbk1pbGxpc2Vjb25kc1xuICAgICAgICB0aGlzLl9taW5pbXVtRHVyYXRpb24gPSBfaXNVbmRlZmluZWQocmVjZWl2ZWRNaW5pbXVtRHVyYXRpb24pID8gbnVsbCA6IHJlY2VpdmVkTWluaW11bUR1cmF0aW9uXG5cbiAgICAgICAgdGhpcy5fbGlua2VkRmxhZyA9IHJlc3BvbnNlLnNlc3Npb25SZWNvcmRpbmc/LmxpbmtlZEZsYWcgfHwgbnVsbFxuXG4gICAgICAgIGlmIChyZXNwb25zZS5zZXNzaW9uUmVjb3JkaW5nPy5lbmRwb2ludCkge1xuICAgICAgICAgICAgdGhpcy5fZW5kcG9pbnQgPSByZXNwb25zZS5zZXNzaW9uUmVjb3JkaW5nPy5lbmRwb2ludFxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKF9pc051bWJlcih0aGlzLl9zYW1wbGVSYXRlKSkge1xuICAgICAgICAgICAgdGhpcy5zZXNzaW9uTWFuYWdlci5vblNlc3Npb25JZCgoc2Vzc2lvbklkKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5tYWtlU2FtcGxpbmdEZWNpc2lvbihzZXNzaW9uSWQpXG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFfaXNOdWxsaXNoKHRoaXMuX2xpbmtlZEZsYWcpKSB7XG4gICAgICAgICAgICBjb25zdCBsaW5rZWRGbGFnID0gX2lzU3RyaW5nKHRoaXMuX2xpbmtlZEZsYWcpID8gdGhpcy5fbGlua2VkRmxhZyA6IHRoaXMuX2xpbmtlZEZsYWc/LmZsYWdcbiAgICAgICAgICAgIGNvbnN0IGxpbmtlZFZhcmlhbnQgPSBfaXNTdHJpbmcodGhpcy5fbGlua2VkRmxhZykgPyBudWxsIDogdGhpcy5fbGlua2VkRmxhZz8udmFyaWFudFxuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZS5vbkZlYXR1cmVGbGFncygoX2ZsYWdzLCB2YXJpYW50cykgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZsYWdJc1ByZXNlbnQgPSBfaXNPYmplY3QodmFyaWFudHMpICYmIGxpbmtlZEZsYWcgaW4gdmFyaWFudHNcbiAgICAgICAgICAgICAgICBjb25zdCBsaW5rZWRGbGFnTWF0Y2hlcyA9IGxpbmtlZFZhcmlhbnQgPyB2YXJpYW50c1tsaW5rZWRGbGFnXSA9PT0gbGlua2VkVmFyaWFudCA6IGZsYWdJc1ByZXNlbnRcbiAgICAgICAgICAgICAgICBpZiAobGlua2VkRmxhZ01hdGNoZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmluZm8oTE9HR0VSX1BSRUZJWCArICcgbGlua2VkIGZsYWcgbWF0Y2hlZCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmtlZEZsYWcsXG4gICAgICAgICAgICAgICAgICAgICAgICBsaW5rZWRWYXJpYW50LFxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLl9saW5rZWRGbGFnU2VlbiA9IGxpbmtlZEZsYWdNYXRjaGVzXG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5yZWNlaXZlZERlY2lkZSA9IHRydWVcbiAgICAgICAgdGhpcy5zdGFydFJlY29yZGluZ0lmRW5hYmxlZCgpXG4gICAgfVxuXG4gICAgbG9nKG1lc3NhZ2U6IHN0cmluZywgbGV2ZWw6ICdsb2cnIHwgJ3dhcm4nIHwgJ2Vycm9yJyA9ICdsb2cnKSB7XG4gICAgICAgIHRoaXMuaW5zdGFuY2Uuc2Vzc2lvblJlY29yZGluZz8ub25SUndlYkVtaXQoe1xuICAgICAgICAgICAgdHlwZTogNixcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICBwbHVnaW46ICdycndlYi9jb25zb2xlQDEnLFxuICAgICAgICAgICAgICAgIHBheWxvYWQ6IHtcbiAgICAgICAgICAgICAgICAgICAgbGV2ZWwsXG4gICAgICAgICAgICAgICAgICAgIHRyYWNlOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgLy8gRXZlbiB0aG91Z2ggaXQgaXMgYSBzdHJpbmcgd2Ugc3RyaW5naWZ5IGl0IGFzIHRoYXQncyB3aGF0IHJyd2ViIGV4cGVjdHNcbiAgICAgICAgICAgICAgICAgICAgcGF5bG9hZDogW0pTT04uc3RyaW5naWZ5KG1lc3NhZ2UpXSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogX3RpbWVzdGFtcCgpLFxuICAgICAgICB9KVxuICAgIH1cbiAgICBwcml2YXRlIF9zdGFydENhcHR1cmUoKSB7XG4gICAgICAgIGlmIChfaXNVbmRlZmluZWQoT2JqZWN0LmFzc2lnbikpIHtcbiAgICAgICAgICAgIC8vIEFjY29yZGluZyB0byB0aGUgcnJ3ZWIgZG9jcywgcnJ3ZWIgaXMgbm90IHN1cHBvcnRlZCBvbiBJRTExIGFuZCBiZWxvdzpcbiAgICAgICAgICAgIC8vIFwicnJ3ZWIgZG9lcyBub3Qgc3VwcG9ydCBJRTExIGFuZCBiZWxvdyBiZWNhdXNlIGl0IHVzZXMgdGhlIE11dGF0aW9uT2JzZXJ2ZXIgQVBJIHdoaWNoIHdhcyBzdXBwb3J0ZWQgYnkgdGhlc2UgYnJvd3NlcnMuXCJcbiAgICAgICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9ycndlYi1pby9ycndlYi9ibG9iL21hc3Rlci9ndWlkZS5tZCNjb21wYXRpYmlsaXR5LW5vdGVcbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAvLyBIb3dldmVyLCBNdXRhdGlvbk9ic2VydmVyIGRvZXMgZXhpc3Qgb24gSUUxMSwgaXQganVzdCBkb2Vzbid0IHdvcmsgd2VsbCBhbmQgZG9lcyBub3QgZGV0ZWN0IGFsbCBjaGFuZ2VzLlxuICAgICAgICAgICAgLy8gSW5zdGVhZCwgd2hlbiB3ZSBsb2FkIFwicmVjb3JkZXIuanNcIiwgdGhlIGZpcnN0IEpTIGVycm9yIGlzIGFib3V0IFwiT2JqZWN0LmFzc2lnblwiIGJlaW5nIHVuZGVmaW5lZC5cbiAgICAgICAgICAgIC8vIFRodXMgaW5zdGVhZCBvZiBNdXRhdGlvbk9ic2VydmVyLCB3ZSBsb29rIGZvciB0aGlzIGZ1bmN0aW9uIGFuZCBibG9jayByZWNvcmRpbmcgaWYgaXQncyB1bmRlZmluZWQuXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFdlIGRvIG5vdCBzd2l0Y2ggcmVjb3JkZXIgdmVyc2lvbnMgbWlkd2F5IHRocm91Z2ggYSByZWNvcmRpbmcuXG4gICAgICAgIC8vIGRvIG5vdCBzdGFydCBpZiBleHBsaWNpdGx5IGRpc2FibGVkIG9yIGlmIHRoZSB1c2VyIGhhcyBvcHRlZCBvdXRcbiAgICAgICAgaWYgKHRoaXMuX2NhcHR1cmVTdGFydGVkIHx8IHRoaXMuaW5zdGFuY2UuY29uZmlnLmRpc2FibGVfc2Vzc2lvbl9yZWNvcmRpbmcgfHwgdXNlck9wdGVkT3V0KHRoaXMuaW5zdGFuY2UpKSB7XG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX2NhcHR1cmVTdGFydGVkID0gdHJ1ZVxuICAgICAgICAvLyBXZSB3YW50IHRvIGVuc3VyZSB0aGUgc2Vzc2lvbk1hbmFnZXIgaXMgcmVzZXQgaWYgbmVjZXNzYXJ5IG9uIGxvYWQgb2YgdGhlIHJlY29yZGVyXG4gICAgICAgIHRoaXMuc2Vzc2lvbk1hbmFnZXIuY2hlY2tBbmRHZXRTZXNzaW9uQW5kV2luZG93SWQoKVxuXG4gICAgICAgIGNvbnN0IHJlY29yZGVySlMgPSB0aGlzLnJlY29yZGluZ1ZlcnNpb24gPT09ICd2MicgPyAncmVjb3JkZXItdjIuanMnIDogJ3JlY29yZGVyLmpzJ1xuXG4gICAgICAgIC8vIElmIHJlY29yZGVyLmpzIGlzIGFscmVhZHkgbG9hZGVkIChpZiBhcnJheS5mdWxsLmpzIHNuaXBwZXQgaXMgdXNlZCBvciBwb3N0aG9nLWpzL2Rpc3QvcmVjb3JkZXIgaXNcbiAgICAgICAgLy8gaW1wb3J0ZWQpIG9yIG1hdGNoZXMgdGhlIHJlcXVlc3RlZCByZWNvcmRlciB2ZXJzaW9uLCBkb24ndCBsb2FkIHNjcmlwdC4gT3RoZXJ3aXNlLCByZW1vdGVseSBpbXBvcnRcbiAgICAgICAgLy8gcmVjb3JkZXIuanMgZnJvbSBjZG4gc2luY2UgaXQgaGFzbid0IGJlZW4gbG9hZGVkLlxuICAgICAgICBpZiAodGhpcy5pbnN0YW5jZS5fX2xvYWRlZF9yZWNvcmRlcl92ZXJzaW9uICE9PSB0aGlzLnJlY29yZGluZ1ZlcnNpb24pIHtcbiAgICAgICAgICAgIGxvYWRTY3JpcHQoXG4gICAgICAgICAgICAgICAgdGhpcy5pbnN0YW5jZS5yZXF1ZXN0Um91dGVyLmVuZHBvaW50Rm9yKCdhc3NldHMnLCBgL3N0YXRpYy8ke3JlY29yZGVySlN9P3Y9JHtDb25maWcuTElCX1ZFUlNJT059YCksXG4gICAgICAgICAgICAgICAgKGVycikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbG9nZ2VyLmVycm9yKExPR0dFUl9QUkVGSVggKyBgIGNvdWxkIG5vdCBsb2FkICR7cmVjb3JkZXJKU31gLCBlcnIpXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9vblNjcmlwdExvYWRlZCgpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fb25TY3JpcHRMb2FkZWQoKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfaXNJbnRlcmFjdGl2ZUV2ZW50KGV2ZW50OiBldmVudFdpdGhUaW1lKSB7XG4gICAgICAgIHJldHVybiBldmVudC50eXBlID09PSBJTkNSRU1FTlRBTF9TTkFQU0hPVF9FVkVOVF9UWVBFICYmIEFDVElWRV9TT1VSQ0VTLmluZGV4T2YoZXZlbnQuZGF0YT8uc291cmNlKSAhPT0gLTFcbiAgICB9XG5cbiAgICBwcml2YXRlIF91cGRhdGVXaW5kb3dBbmRTZXNzaW9uSWRzKGV2ZW50OiBldmVudFdpdGhUaW1lKSB7XG4gICAgICAgIC8vIFNvbWUgcmVjb3JkaW5nIGV2ZW50cyBhcmUgdHJpZ2dlcmVkIGJ5IG5vbi11c2VyIGV2ZW50cyAoZS5nLiBcIlggbWludXRlcyBhZ29cIiB0ZXh0IHVwZGF0aW5nIG9uIHRoZSBzY3JlZW4pLlxuICAgICAgICAvLyBXZSBkb24ndCB3YW50IHRvIGV4dGVuZCB0aGUgc2Vzc2lvbiBvciB0cmlnZ2VyIGEgbmV3IHNlc3Npb24gaW4gdGhlc2UgY2FzZXMuIFRoZXNlIGV2ZW50cyBhcmUgZGVzaWduYXRlZCBieSBldmVudFxuICAgICAgICAvLyB0eXBlIC0+IGluY3JlbWVudGFsIHVwZGF0ZSwgYW5kIHNvdXJjZSAtPiBtdXRhdGlvbi5cblxuICAgICAgICBjb25zdCBpc1VzZXJJbnRlcmFjdGlvbiA9IHRoaXMuX2lzSW50ZXJhY3RpdmVFdmVudChldmVudClcblxuICAgICAgICBpZiAoIWlzVXNlckludGVyYWN0aW9uICYmICF0aGlzLmlzSWRsZSkge1xuICAgICAgICAgICAgLy8gV2UgY2hlY2sgaWYgdGhlIGxhc3RBY3Rpdml0eVRpbWVzdGFtcCBpcyBvbGQgZW5vdWdoIHRvIGdvIGlkbGVcbiAgICAgICAgICAgIGlmIChldmVudC50aW1lc3RhbXAgLSB0aGlzLl9sYXN0QWN0aXZpdHlUaW1lc3RhbXAgPiBSRUNPUkRJTkdfSURMRV9BQ1RJVklUWV9USU1FT1VUX01TKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pc0lkbGUgPSB0cnVlXG4gICAgICAgICAgICAgICAgdGhpcy5fdHJ5QWRkQ3VzdG9tRXZlbnQoJ3Nlc3Npb25JZGxlJywge1xuICAgICAgICAgICAgICAgICAgICByZWFzb246ICd1c2VyIGluYWN0aXZpdHknLFxuICAgICAgICAgICAgICAgICAgICB0aW1lU2luY2VMYXN0QWN0aXZlOiBldmVudC50aW1lc3RhbXAgLSB0aGlzLl9sYXN0QWN0aXZpdHlUaW1lc3RhbXAsXG4gICAgICAgICAgICAgICAgICAgIHRocmVzaG9sZDogUkVDT1JESU5HX0lETEVfQUNUSVZJVFlfVElNRU9VVF9NUyxcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHJldHVybmluZ0Zyb21JZGxlID0gZmFsc2VcbiAgICAgICAgaWYgKGlzVXNlckludGVyYWN0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLl9sYXN0QWN0aXZpdHlUaW1lc3RhbXAgPSBldmVudC50aW1lc3RhbXBcbiAgICAgICAgICAgIGlmICh0aGlzLmlzSWRsZSkge1xuICAgICAgICAgICAgICAgIC8vIFJlbW92ZSB0aGUgaWRsZSBzdGF0ZSBpZiBzZXQgYW5kIHRyaWdnZXIgYSBmdWxsIHNuYXBzaG90IGFzIHdlIHdpbGwgaGF2ZSBpZ25vcmVkIHByZXZpb3VzIG11dGF0aW9uc1xuICAgICAgICAgICAgICAgIHRoaXMuaXNJZGxlID0gZmFsc2VcbiAgICAgICAgICAgICAgICB0aGlzLl90cnlBZGRDdXN0b21FdmVudCgnc2Vzc2lvbk5vTG9uZ2VySWRsZScsIHtcbiAgICAgICAgICAgICAgICAgICAgcmVhc29uOiAndXNlciBhY3Rpdml0eScsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IGV2ZW50LnR5cGUsXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICByZXR1cm5pbmdGcm9tSWRsZSA9IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmlzSWRsZSkge1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cblxuICAgICAgICAvLyBXZSBvbmx5IHdhbnQgdG8gZXh0ZW5kIHRoZSBzZXNzaW9uIGlmIGl0IGlzIGFuIGludGVyYWN0aXZlIGV2ZW50LlxuICAgICAgICBjb25zdCB7IHdpbmRvd0lkLCBzZXNzaW9uSWQgfSA9IHRoaXMuc2Vzc2lvbk1hbmFnZXIuY2hlY2tBbmRHZXRTZXNzaW9uQW5kV2luZG93SWQoXG4gICAgICAgICAgICAhaXNVc2VySW50ZXJhY3Rpb24sXG4gICAgICAgICAgICBldmVudC50aW1lc3RhbXBcbiAgICAgICAgKVxuXG4gICAgICAgIGNvbnN0IHNlc3Npb25JZENoYW5nZWQgPSB0aGlzLnNlc3Npb25JZCAhPT0gc2Vzc2lvbklkXG4gICAgICAgIGNvbnN0IHdpbmRvd0lkQ2hhbmdlZCA9IHRoaXMud2luZG93SWQgIT09IHdpbmRvd0lkXG5cbiAgICAgICAgdGhpcy53aW5kb3dJZCA9IHdpbmRvd0lkXG4gICAgICAgIHRoaXMuc2Vzc2lvbklkID0gc2Vzc2lvbklkXG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgcmV0dXJuaW5nRnJvbUlkbGUgfHxcbiAgICAgICAgICAgIChbRlVMTF9TTkFQU0hPVF9FVkVOVF9UWVBFLCBNRVRBX0VWRU5UX1RZUEVdLmluZGV4T2YoZXZlbnQudHlwZSkgPT09IC0xICYmXG4gICAgICAgICAgICAgICAgKHdpbmRvd0lkQ2hhbmdlZCB8fCBzZXNzaW9uSWRDaGFuZ2VkKSlcbiAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzLl90cnlUYWtlRnVsbFNuYXBzaG90KClcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgX3RyeVJSV2ViTWV0aG9kKHF1ZXVlZFJSV2ViRXZlbnQ6IFF1ZXVlZFJSV2ViRXZlbnQpOiBib29sZWFuIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHF1ZXVlZFJSV2ViRXZlbnQucnJ3ZWJNZXRob2QoKVxuICAgICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgLy8gU29tZXRpbWVzIGEgcmFjZSBjYW4gb2NjdXIgd2hlcmUgdGhlIHJlY29yZGVyIGlzIG5vdCBmdWxseSBzdGFydGVkIHlldFxuICAgICAgICAgICAgbG9nZ2VyLndhcm4oTE9HR0VSX1BSRUZJWCArICcgY291bGQgbm90IGVtaXQgcXVldWVkIHJyd2ViIGV2ZW50LicsIGUpXG4gICAgICAgICAgICB0aGlzLnF1ZXVlZFJSV2ViRXZlbnRzLmxlbmd0aCA8IDEwICYmXG4gICAgICAgICAgICAgICAgdGhpcy5xdWV1ZWRSUldlYkV2ZW50cy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgZW5xdWV1ZWRBdDogcXVldWVkUlJXZWJFdmVudC5lbnF1ZXVlZEF0IHx8IERhdGUubm93KCksXG4gICAgICAgICAgICAgICAgICAgIGF0dGVtcHQ6IHF1ZXVlZFJSV2ViRXZlbnQuYXR0ZW1wdCsrLFxuICAgICAgICAgICAgICAgICAgICBycndlYk1ldGhvZDogcXVldWVkUlJXZWJFdmVudC5ycndlYk1ldGhvZCxcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIF90cnlBZGRDdXN0b21FdmVudCh0YWc6IHN0cmluZywgcGF5bG9hZDogYW55KTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLl90cnlSUldlYk1ldGhvZChuZXdRdWV1ZWRFdmVudCgoKSA9PiB0aGlzLnJyd2ViUmVjb3JkIS5hZGRDdXN0b21FdmVudCh0YWcsIHBheWxvYWQpKSlcbiAgICB9XG5cbiAgICBwcml2YXRlIF90cnlUYWtlRnVsbFNuYXBzaG90KCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fdHJ5UlJXZWJNZXRob2QobmV3UXVldWVkRXZlbnQoKCkgPT4gdGhpcy5ycndlYlJlY29yZCEudGFrZUZ1bGxTbmFwc2hvdCgpKSlcbiAgICB9XG5cbiAgICBwcml2YXRlIF9vblNjcmlwdExvYWRlZCgpIHtcbiAgICAgICAgLy8gcnJ3ZWIgY29uZmlnIGluZm86IGh0dHBzOi8vZ2l0aHViLmNvbS9ycndlYi1pby9ycndlYi9ibG9iLzdkNWQwMDMzMjU4ZDZjMjk1OTlmYjA4NDEyMjAyZDlhMmM3Yjk0MTMvc3JjL3JlY29yZC9pbmRleC50cyNMMjhcbiAgICAgICAgY29uc3Qgc2Vzc2lvblJlY29yZGluZ09wdGlvbnM6IHJlY29yZE9wdGlvbnM8ZXZlbnRXaXRoVGltZT4gPSB7XG4gICAgICAgICAgICAvLyBzZWxlY3Qgc2V0IG9mIHJyd2ViIGNvbmZpZyBvcHRpb25zIHdlIGV4cG9zZSB0byBvdXIgdXNlcnNcbiAgICAgICAgICAgIC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vcnJ3ZWItaW8vcnJ3ZWIvYmxvYi9tYXN0ZXIvZ3VpZGUubWRcbiAgICAgICAgICAgIGJsb2NrQ2xhc3M6ICdwaC1uby1jYXB0dXJlJyxcbiAgICAgICAgICAgIGJsb2NrU2VsZWN0b3I6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGlnbm9yZUNsYXNzOiAncGgtaWdub3JlLWlucHV0JyxcbiAgICAgICAgICAgIG1hc2tUZXh0Q2xhc3M6ICdwaC1tYXNrJyxcbiAgICAgICAgICAgIG1hc2tUZXh0U2VsZWN0b3I6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIG1hc2tUZXh0Rm46IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIG1hc2tBbGxJbnB1dHM6IHRydWUsXG4gICAgICAgICAgICBtYXNrSW5wdXRPcHRpb25zOiB7fSxcbiAgICAgICAgICAgIG1hc2tJbnB1dEZuOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBzbGltRE9NT3B0aW9uczoge30sXG4gICAgICAgICAgICBjb2xsZWN0Rm9udHM6IGZhbHNlLFxuICAgICAgICAgICAgaW5saW5lU3R5bGVzaGVldDogdHJ1ZSxcbiAgICAgICAgICAgIHJlY29yZENyb3NzT3JpZ2luSWZyYW1lczogZmFsc2UsXG4gICAgICAgIH1cbiAgICAgICAgLy8gV2Ugc3dpdGNoZWQgZnJvbSBsb2FkaW5nIGFsbCBvZiBycndlYiB0byBqdXN0IHRoZSByZWNvcmQgcGFydCwgYnV0XG4gICAgICAgIC8vIGtlZXAgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkgaWYgc29tZW9uZSBoYXNuJ3QgdXBncmFkZWQgUG9zdEhvZ1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2Jhbi10cy1jb21tZW50XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgdGhpcy5ycndlYlJlY29yZCA9IHdpbmRvdy5ycndlYiA/IHdpbmRvdy5ycndlYi5yZWNvcmQgOiB3aW5kb3cucnJ3ZWJSZWNvcmRcblxuICAgICAgICAvLyBvbmx5IGFsbG93cyB1c2VyIHRvIHNldCBvdXIgYWxsb3ctbGlzdGVkIG9wdGlvbnNcbiAgICAgICAgY29uc3QgdXNlclNlc3Npb25SZWNvcmRpbmdPcHRpb25zID0gdGhpcy5pbnN0YW5jZS5jb25maWcuc2Vzc2lvbl9yZWNvcmRpbmdcbiAgICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXModXNlclNlc3Npb25SZWNvcmRpbmdPcHRpb25zIHx8IHt9KSkge1xuICAgICAgICAgICAgaWYgKGtleSBpbiBzZXNzaW9uUmVjb3JkaW5nT3B0aW9ucykge1xuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvYmFuLXRzLWNvbW1lbnRcbiAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICAgICAgc2Vzc2lvblJlY29yZGluZ09wdGlvbnNba2V5XSA9IHZhbHVlXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5jYW52YXNSZWNvcmRpbmcgJiYgdGhpcy5jYW52YXNSZWNvcmRpbmcuZW5hYmxlZCkge1xuICAgICAgICAgICAgc2Vzc2lvblJlY29yZGluZ09wdGlvbnMucmVjb3JkQ2FudmFzID0gdHJ1ZVxuICAgICAgICAgICAgc2Vzc2lvblJlY29yZGluZ09wdGlvbnMuc2FtcGxpbmcgPSB7IGNhbnZhczogdGhpcy5jYW52YXNSZWNvcmRpbmcuZnBzIH1cbiAgICAgICAgICAgIHNlc3Npb25SZWNvcmRpbmdPcHRpb25zLmRhdGFVUkxPcHRpb25zID0geyB0eXBlOiAnaW1hZ2Uvd2VicCcsIHF1YWxpdHk6IHRoaXMuY2FudmFzUmVjb3JkaW5nLnF1YWxpdHkgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aGlzLnJyd2ViUmVjb3JkKSB7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoXG4gICAgICAgICAgICAgICAgTE9HR0VSX1BSRUZJWCArXG4gICAgICAgICAgICAgICAgICAgICdvblNjcmlwdExvYWRlZCB3YXMgY2FsbGVkIGJ1dCBycndlYlJlY29yZCBpcyBub3QgYXZhaWxhYmxlLiBUaGlzIGluZGljYXRlcyBzb21ldGhpbmcgaGFzIGdvbmUgd3JvbmcuJ1xuICAgICAgICAgICAgKVxuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLm11dGF0aW9uUmF0ZUxpbWl0ZXIgPVxuICAgICAgICAgICAgdGhpcy5tdXRhdGlvblJhdGVMaW1pdGVyID8/XG4gICAgICAgICAgICBuZXcgTXV0YXRpb25SYXRlTGltaXRlcih0aGlzLnJyd2ViUmVjb3JkLCB7XG4gICAgICAgICAgICAgICAgb25CbG9ja2VkTm9kZTogKGlkLCBub2RlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBgVG9vIG1hbnkgbXV0YXRpb25zIG9uIG5vZGUgJyR7aWR9Jy4gUmF0ZSBsaW1pdGluZy4gVGhpcyBjb3VsZCBiZSBkdWUgdG8gU1ZHIGFuaW1hdGlvbnMgb3Igc29tZXRoaW5nIHNpbWlsYXJgXG4gICAgICAgICAgICAgICAgICAgIGxvZ2dlci5pbmZvKG1lc3NhZ2UsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGU6IG5vZGUsXG4gICAgICAgICAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2coTE9HR0VSX1BSRUZJWCArICcgJyArIG1lc3NhZ2UsICd3YXJuJylcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSlcblxuICAgICAgICAvLyBycndlYiB0YWtlcyBhIHNuYXBzaG90IG9uIGluaXRpYWxpemF0aW9uLFxuICAgICAgICAvLyB3ZSB3YW50IHRvIHRha2Ugb25lIGluIGZpdmUgbWludXRlc1xuICAgICAgICAvLyBpZiBub3RoaW5nIGVsc2UgaGFwcGVucyB0byByZXNldCB0aGUgdGltZXJcbiAgICAgICAgdGhpcy5fc2NoZWR1bGVGdWxsU25hcHNob3QoKVxuXG4gICAgICAgIGNvbnN0IGFjdGl2ZVBsdWdpbnMgPSB0aGlzLl9nYXRoZXJSUldlYlBsdWdpbnMoKVxuICAgICAgICB0aGlzLnN0b3BScndlYiA9IHRoaXMucnJ3ZWJSZWNvcmQoe1xuICAgICAgICAgICAgZW1pdDogKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5vblJSd2ViRW1pdChldmVudClcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwbHVnaW5zOiBhY3RpdmVQbHVnaW5zLFxuICAgICAgICAgICAgLi4uc2Vzc2lvblJlY29yZGluZ09wdGlvbnMsXG4gICAgICAgIH0pXG5cbiAgICAgICAgLy8gOlRSSUNLWTogcnJ3ZWIgZG9lcyBub3QgY2FwdHVyZSBuYXZpZ2F0aW9uIHdpdGhpbiBTUEEtcywgc28gaG9vayBpbnRvIG91ciAkcGFnZXZpZXcgZXZlbnRzIHRvIGdldCBhY2Nlc3MgdG8gYWxsIGV2ZW50cy5cbiAgICAgICAgLy8gICBEcm9wcGluZyB0aGUgaW5pdGlhbCBldmVudCBpcyBmaW5lIChpdCdzIGFsd2F5cyBjYXB0dXJlZCBieSBycndlYikuXG4gICAgICAgIHRoaXMuaW5zdGFuY2UuX2FkZENhcHR1cmVIb29rKChldmVudE5hbWUpID0+IHtcbiAgICAgICAgICAgIC8vIElmIGFueXRoaW5nIGNvdWxkIGdvIHdyb25nIGhlcmUgaXQgaGFzIHRoZSBwb3RlbnRpYWwgdG8gYmxvY2sgdGhlIG1haW4gbG9vcCxcbiAgICAgICAgICAgIC8vIHNvIHdlIGNhdGNoIGFsbCBlcnJvcnMuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmIChldmVudE5hbWUgPT09ICckcGFnZXZpZXcnKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGhyZWYgPSB3aW5kb3cgPyB0aGlzLl9tYXNrVXJsKHdpbmRvdy5sb2NhdGlvbi5ocmVmKSA6ICcnXG4gICAgICAgICAgICAgICAgICAgIGlmICghaHJlZikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fdHJ5QWRkQ3VzdG9tRXZlbnQoJyRwYWdldmlldycsIHsgaHJlZiB9KVxuICAgICAgICAgICAgICAgICAgICB0aGlzLl90cnlUYWtlRnVsbFNuYXBzaG90KClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdDb3VsZCBub3QgYWRkICRwYWdldmlldyB0byBycndlYiBzZXNzaW9uJywgZSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcblxuICAgICAgICAvLyBXZSByZXNldCB0aGUgbGFzdCBhY3Rpdml0eSB0aW1lc3RhbXAsIHJlc2V0dGluZyB0aGUgaWRsZSB0aW1lclxuICAgICAgICB0aGlzLl9sYXN0QWN0aXZpdHlUaW1lc3RhbXAgPSBEYXRlLm5vdygpXG4gICAgICAgIHRoaXMuaXNJZGxlID0gZmFsc2VcblxuICAgICAgICB0aGlzLl90cnlBZGRDdXN0b21FdmVudCgnJHNlc3Npb25fb3B0aW9ucycsIHtcbiAgICAgICAgICAgIHNlc3Npb25SZWNvcmRpbmdPcHRpb25zLFxuICAgICAgICAgICAgYWN0aXZlUGx1Z2luczogYWN0aXZlUGx1Z2lucy5tYXAoKHApID0+IHA/Lm5hbWUpLFxuICAgICAgICB9KVxuXG4gICAgICAgIHRoaXMuX3RyeUFkZEN1c3RvbUV2ZW50KCckcG9zdGhvZ19jb25maWcnLCB7XG4gICAgICAgICAgICBjb25maWc6IHRoaXMuaW5zdGFuY2UuY29uZmlnLFxuICAgICAgICB9KVxuICAgIH1cblxuICAgIHByaXZhdGUgX3NjaGVkdWxlRnVsbFNuYXBzaG90KCk6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy5fZnVsbFNuYXBzaG90VGltZXIpIHtcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5fZnVsbFNuYXBzaG90VGltZXIpXG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9mdWxsU25hcHNob3RUaW1lciA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX3RyeVRha2VGdWxsU25hcHNob3QoKVxuICAgICAgICB9LCBGSVZFX01JTlVURVMpIC8vIDUgbWludXRlc1xuICAgIH1cblxuICAgIHByaXZhdGUgX2dhdGhlclJSV2ViUGx1Z2lucygpIHtcbiAgICAgICAgY29uc3QgcGx1Z2luczogUmVjb3JkUGx1Z2luPHVua25vd24+W10gPSBbXVxuXG4gICAgICAgIGlmIChhc3NpZ25hYmxlV2luZG93LnJyd2ViQ29uc29sZVJlY29yZCAmJiB0aGlzLmlzQ29uc29sZUxvZ0NhcHR1cmVFbmFibGVkKSB7XG4gICAgICAgICAgICBwbHVnaW5zLnB1c2goYXNzaWduYWJsZVdpbmRvdy5ycndlYkNvbnNvbGVSZWNvcmQuZ2V0UmVjb3JkQ29uc29sZVBsdWdpbigpKVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMubmV0d29ya1BheWxvYWRDYXB0dXJlICYmIF9pc0Z1bmN0aW9uKGFzc2lnbmFibGVXaW5kb3cuZ2V0UmVjb3JkTmV0d29ya1BsdWdpbikpIHtcbiAgICAgICAgICAgIGNvbnN0IGNhblJlY29yZE5ldHdvcmsgPSAhaXNMb2NhbGhvc3QoKSB8fCB0aGlzLl9mb3JjZUFsbG93TG9jYWxob3N0TmV0d29ya0NhcHR1cmVcblxuICAgICAgICAgICAgaWYgKGNhblJlY29yZE5ldHdvcmspIHtcbiAgICAgICAgICAgICAgICBwbHVnaW5zLnB1c2goXG4gICAgICAgICAgICAgICAgICAgIGFzc2lnbmFibGVXaW5kb3cuZ2V0UmVjb3JkTmV0d29ya1BsdWdpbihcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1aWxkTmV0d29ya1JlcXVlc3RPcHRpb25zKHRoaXMuaW5zdGFuY2UuY29uZmlnLCB0aGlzLm5ldHdvcmtQYXlsb2FkQ2FwdHVyZSlcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmluZm8oTE9HR0VSX1BSRUZJWCArICcgTmV0d29ya0NhcHR1cmUgbm90IHN0YXJ0ZWQgYmVjYXVzZSB3ZSBhcmUgb24gbG9jYWxob3N0LicpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcGx1Z2luc1xuICAgIH1cblxuICAgIG9uUlJ3ZWJFbWl0KHJhd0V2ZW50OiBldmVudFdpdGhUaW1lKSB7XG4gICAgICAgIHRoaXMuX3Byb2Nlc3NRdWV1ZWRFdmVudHMoKVxuXG4gICAgICAgIGlmICghcmF3RXZlbnQgfHwgIV9pc09iamVjdChyYXdFdmVudCkpIHtcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHJhd0V2ZW50LnR5cGUgPT09IEV2ZW50VHlwZS5NZXRhKSB7XG4gICAgICAgICAgICBjb25zdCBocmVmID0gdGhpcy5fbWFza1VybChyYXdFdmVudC5kYXRhLmhyZWYpXG4gICAgICAgICAgICBpZiAoIWhyZWYpIHtcbiAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJhd0V2ZW50LmRhdGEuaHJlZiA9IGhyZWZcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChyYXdFdmVudC50eXBlID09PSBFdmVudFR5cGUuRnVsbFNuYXBzaG90KSB7XG4gICAgICAgICAgICAvLyB3ZSdyZSBwcm9jZXNzaW5nIGEgZnVsbCBzbmFwc2hvdCwgc28gd2Ugc2hvdWxkIHJlc2V0IHRoZSB0aW1lclxuICAgICAgICAgICAgdGhpcy5fc2NoZWR1bGVGdWxsU25hcHNob3QoKVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdGhyb3R0bGVkRXZlbnQgPSB0aGlzLm11dGF0aW9uUmF0ZUxpbWl0ZXJcbiAgICAgICAgICAgID8gdGhpcy5tdXRhdGlvblJhdGVMaW1pdGVyLnRocm90dGxlTXV0YXRpb25zKHJhd0V2ZW50KVxuICAgICAgICAgICAgOiByYXdFdmVudFxuXG4gICAgICAgIGlmICghdGhyb3R0bGVkRXZlbnQpIHtcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG5cbiAgICAgICAgLy8gVE9ETzogUmUtYWRkIGVuc3VyZU1heE1lc3NhZ2VTaXplIG9uY2Ugd2UgYXJlIGNvbmZpZGVudCBpbiBpdFxuICAgICAgICBjb25zdCBldmVudCA9IHRydW5jYXRlTGFyZ2VDb25zb2xlTG9ncyh0aHJvdHRsZWRFdmVudClcbiAgICAgICAgY29uc3Qgc2l6ZSA9IEpTT04uc3RyaW5naWZ5KGV2ZW50KS5sZW5ndGhcblxuICAgICAgICB0aGlzLl91cGRhdGVXaW5kb3dBbmRTZXNzaW9uSWRzKGV2ZW50KVxuXG4gICAgICAgIC8vIGFsbG93IGN1c3RvbSBldmVudHMgZXZlbiB3aGVuIGlkbGVcbiAgICAgICAgaWYgKHRoaXMuaXNJZGxlICYmIGV2ZW50LnR5cGUgIT09IEV2ZW50VHlwZS5DdXN0b20pIHtcbiAgICAgICAgICAgIC8vIFdoZW4gaW4gYW4gaWRsZSBzdGF0ZSB3ZSBrZWVwIHJlY29yZGluZywgYnV0IGRvbid0IGNhcHR1cmUgdGhlIGV2ZW50c1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBwcm9wZXJ0aWVzID0ge1xuICAgICAgICAgICAgJHNuYXBzaG90X2J5dGVzOiBzaXplLFxuICAgICAgICAgICAgJHNuYXBzaG90X2RhdGE6IGV2ZW50LFxuICAgICAgICAgICAgJHNlc3Npb25faWQ6IHRoaXMuc2Vzc2lvbklkLFxuICAgICAgICAgICAgJHdpbmRvd19pZDogdGhpcy53aW5kb3dJZCxcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnN0YXR1cyAhPT0gJ2Rpc2FibGVkJykge1xuICAgICAgICAgICAgdGhpcy5fY2FwdHVyZVNuYXBzaG90QnVmZmVyZWQocHJvcGVydGllcylcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuY2xlYXJCdWZmZXIoKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfcHJvY2Vzc1F1ZXVlZEV2ZW50cygpIHtcbiAgICAgICAgaWYgKHRoaXMucXVldWVkUlJXZWJFdmVudHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAvLyBpZiBycndlYiBpc24ndCByZWFkeSB0byBhY2NlcHQgZXZlbnRzIGVhcmxpZXIgdGhlbiB3ZSBxdWV1ZWQgdGhlbSB1cFxuICAgICAgICAgICAgLy8gbm93IHRoYXQgZW1pdCBoYXMgYmVlbiBjYWxsZWQgcnJ3ZWIgc2hvdWxkIGJlIHJlYWR5IHRvIGFjY2VwdCB0aGVtXG4gICAgICAgICAgICAvLyBzbywgYmVmb3JlIHdlIHByb2Nlc3MgdGhpcyBldmVudCwgd2UgdHJ5IG91ciBxdWV1ZWQgZXZlbnRzIF9vbmNlXyBlYWNoXG4gICAgICAgICAgICAvLyB3ZSBkb24ndCB3YW50IHRvIHJpc2sgcXVldWluZyBtb3JlIHRoaW5ncyBhbmQgbmV2ZXIgZXhpdGluZyB0aGlzIGxvb3AhXG4gICAgICAgICAgICAvLyBpZiB0aGV5IGZhaWwgaGVyZSwgdGhleSdsbCBiZSBwdXNoZWQgaW50byBhIG5ldyBxdWV1ZSxcbiAgICAgICAgICAgIC8vIGFuZCB0cmllZCBvbiB0aGUgbmV4dCBsb29wLlxuICAgICAgICAgICAgLy8gdGhlcmUgaXMgYSByaXNrIG9mIHRoaXMgcXVldWUgZ3Jvd2luZyBpbiBhbiB1bmNvbnRyb2xsZWQgbWFubmVyLFxuICAgICAgICAgICAgLy8gc28gaXRzIGxlbmd0aCBpcyBsaW1pdGVkIGVsc2V3aGVyZVxuICAgICAgICAgICAgLy8gZm9yIG5vdyB0aGlzIGlzIHRvIGhlbHAgdXMgZW5zdXJlIHdlIGNhbiBjYXB0dXJlIGV2ZW50cyB0aGF0IGhhcHBlblxuICAgICAgICAgICAgLy8gYW5kIHRyeSB0byBpZGVudGlmeSBtb3JlIGFib3V0IHdoZW4gaXQgaXMgZmFpbGluZ1xuICAgICAgICAgICAgY29uc3QgaXRlbXNUb1Byb2Nlc3MgPSBbLi4udGhpcy5xdWV1ZWRSUldlYkV2ZW50c11cbiAgICAgICAgICAgIHRoaXMucXVldWVkUlJXZWJFdmVudHMgPSBbXVxuICAgICAgICAgICAgaXRlbXNUb1Byb2Nlc3MuZm9yRWFjaCgocXVldWVkUlJXZWJFdmVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChEYXRlLm5vdygpIC0gcXVldWVkUlJXZWJFdmVudC5lbnF1ZXVlZEF0ID4gVFdPX1NFQ09ORFMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fdHJ5QWRkQ3VzdG9tRXZlbnQoJ3Jyd2ViUXVldWVUaW1lb3V0Jywge1xuICAgICAgICAgICAgICAgICAgICAgICAgZW5xdWV1ZWRBdDogcXVldWVkUlJXZWJFdmVudC5lbnF1ZXVlZEF0LFxuICAgICAgICAgICAgICAgICAgICAgICAgYXR0ZW1wdDogcXVldWVkUlJXZWJFdmVudC5hdHRlbXB0LFxuICAgICAgICAgICAgICAgICAgICAgICAgcXVldWVMZW5ndGg6IGl0ZW1zVG9Qcm9jZXNzLmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fdHJ5UlJXZWJNZXRob2QocXVldWVkUlJXZWJFdmVudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3RyeUFkZEN1c3RvbUV2ZW50KCdycndlYlF1ZXVlU3VjY2VzcycsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbnF1ZXVlZEF0OiBxdWV1ZWRSUldlYkV2ZW50LmVucXVldWVkQXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0ZW1wdDogcXVldWVkUlJXZWJFdmVudC5hdHRlbXB0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXVlTGVuZ3RoOiBpdGVtc1RvUHJvY2Vzcy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgX21hc2tVcmwodXJsOiBzdHJpbmcpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICAgICAgICBjb25zdCB1c2VyU2Vzc2lvblJlY29yZGluZ09wdGlvbnMgPSB0aGlzLmluc3RhbmNlLmNvbmZpZy5zZXNzaW9uX3JlY29yZGluZ1xuXG4gICAgICAgIGlmICh1c2VyU2Vzc2lvblJlY29yZGluZ09wdGlvbnMubWFza05ldHdvcmtSZXF1ZXN0Rm4pIHtcbiAgICAgICAgICAgIGxldCBuZXR3b3JrUmVxdWVzdDogTmV0d29ya1JlcXVlc3QgfCBudWxsIHwgdW5kZWZpbmVkID0ge1xuICAgICAgICAgICAgICAgIHVybCxcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gVE9ETyB3ZSBzaG91bGQgZGVwcmVjYXRlIHRoaXMgYW5kIHVzZSB0aGUgc2FtZSBmdW5jdGlvbiBmb3IgdGhpcyBtYXNraW5nIGFuZCB0aGUgcnJ3ZWIvbmV0d29yayBwbHVnaW5cbiAgICAgICAgICAgIC8vIFRPRE8gb3IgZGVwcmVjYXRlIHRoaXMgYW5kIHByb3ZpZGUgYSBuZXcgY2xlYXJlciBuYW1lIHNvIHRoaXMgd291bGQgYmUgYG1hc2tVUkxQZXJmb3JtYW5jZUZuYCBvciBzaW1pbGFyXG4gICAgICAgICAgICBuZXR3b3JrUmVxdWVzdCA9IHVzZXJTZXNzaW9uUmVjb3JkaW5nT3B0aW9ucy5tYXNrTmV0d29ya1JlcXVlc3RGbihuZXR3b3JrUmVxdWVzdClcblxuICAgICAgICAgICAgcmV0dXJuIG5ldHdvcmtSZXF1ZXN0Py51cmxcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB1cmxcbiAgICB9XG5cbiAgICBwcml2YXRlIGNsZWFyQnVmZmVyKCk6IFNuYXBzaG90QnVmZmVyIHtcbiAgICAgICAgdGhpcy5idWZmZXIgPSB1bmRlZmluZWRcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc2l6ZTogMCxcbiAgICAgICAgICAgIGRhdGE6IFtdLFxuICAgICAgICAgICAgc2Vzc2lvbklkOiB0aGlzLnNlc3Npb25JZCxcbiAgICAgICAgICAgIHdpbmRvd0lkOiB0aGlzLndpbmRvd0lkLFxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gdGhlIGludGVudGlvbiBpcyBhIGJ1ZmZlciB0aGF0IChjdXJyZW50bHkpIGlzIHVzZWQgb25seSBhZnRlciBhIGRlY2lkZSByZXNwb25zZSBlbmFibGVzIHNlc3Npb24gcmVjb3JkaW5nXG4gICAgLy8gaXQgaXMgY2FsbGVkIGV2ZXIgWCBzZWNvbmRzIHVzaW5nIHRoZSBmbHVzaEJ1ZmZlclRpbWVyIHNvIHRoYXQgd2UgZG9uJ3QgaGF2ZSB0byB3YWl0IGZvciB0aGUgYnVmZmVyIHRvIGZpbGwgdXBcbiAgICAvLyB3aGVuIGl0IGlzIGNhbGxlZCBvbiBhIHRpbWVyIGl0IGFzc3VtZXMgdGhhdCBpdCBjYW4gZGVmaW5pdGVseSBmbHVzaFxuICAgIC8vIGl0IGlzIGZsdXNoZWQgd2hlbiB0aGUgc2Vzc2lvbiBpZCBjaGFuZ2VzIG9yIHRoZSBzaXplIG9mIHRoZSBidWZmZXJlZCBkYXRhIGdldHMgdG9vIGdyZWF0ICgxbWIgYnkgZGVmYXVsdClcbiAgICAvLyBmaXJzdCBjaGFuZ2U6IGlmIHRoZSByZWNvcmRpbmcgaXMgaW4gYnVmZmVyaW5nIG1vZGUsXG4gICAgLy8gIGZsdXNoIGJ1ZmZlciBzaW1wbHkgcmVzZXRzIHRoZSB0aW1lciBhbmQgcmV0dXJucyB0aGUgZXhpc3RpbmcgZmx1c2ggYnVmZmVyXG4gICAgcHJpdmF0ZSBfZmx1c2hCdWZmZXIoKSB7XG4gICAgICAgIGlmICh0aGlzLmZsdXNoQnVmZmVyVGltZXIpIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmZsdXNoQnVmZmVyVGltZXIpXG4gICAgICAgICAgICB0aGlzLmZsdXNoQnVmZmVyVGltZXIgPSB1bmRlZmluZWRcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IG1pbmltdW1EdXJhdGlvbiA9IHRoaXMuX21pbmltdW1EdXJhdGlvblxuICAgICAgICBjb25zdCBzZXNzaW9uRHVyYXRpb24gPSB0aGlzLnNlc3Npb25EdXJhdGlvblxuICAgICAgICAvLyBpZiB3ZSBoYXZlIG9sZCBkYXRhIGluIHRoZSBidWZmZXIgYnV0IHRoZSBzZXNzaW9uIGhhcyByb3RhdGVkIHRoZW4gdGhlXG4gICAgICAgIC8vIHNlc3Npb24gZHVyYXRpb24gbWlnaHQgYmUgbmVnYXRpdmUsIGluIHRoYXQgY2FzZSB3ZSB3YW50IHRvIGZsdXNoIHRoZSBidWZmZXJcbiAgICAgICAgY29uc3QgaXNQb3NpdGl2ZVNlc3Npb25EdXJhdGlvbiA9IF9pc051bWJlcihzZXNzaW9uRHVyYXRpb24pICYmIHNlc3Npb25EdXJhdGlvbiA+PSAwXG4gICAgICAgIGNvbnN0IGlzQmVsb3dNaW5pbXVtRHVyYXRpb24gPVxuICAgICAgICAgICAgX2lzTnVtYmVyKG1pbmltdW1EdXJhdGlvbikgJiYgaXNQb3NpdGl2ZVNlc3Npb25EdXJhdGlvbiAmJiBzZXNzaW9uRHVyYXRpb24gPCBtaW5pbXVtRHVyYXRpb25cblxuICAgICAgICBpZiAodGhpcy5zdGF0dXMgPT09ICdidWZmZXJpbmcnIHx8IGlzQmVsb3dNaW5pbXVtRHVyYXRpb24pIHtcbiAgICAgICAgICAgIHRoaXMuZmx1c2hCdWZmZXJUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuX2ZsdXNoQnVmZmVyKClcbiAgICAgICAgICAgIH0sIFJFQ09SRElOR19CVUZGRVJfVElNRU9VVClcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmJ1ZmZlciB8fCB0aGlzLmNsZWFyQnVmZmVyKClcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmJ1ZmZlciAmJiB0aGlzLmJ1ZmZlci5kYXRhLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgdGhpcy5fY2FwdHVyZVNuYXBzaG90KHtcbiAgICAgICAgICAgICAgICAkc25hcHNob3RfYnl0ZXM6IHRoaXMuYnVmZmVyLnNpemUsXG4gICAgICAgICAgICAgICAgJHNuYXBzaG90X2RhdGE6IHRoaXMuYnVmZmVyLmRhdGEsXG4gICAgICAgICAgICAgICAgJHNlc3Npb25faWQ6IHRoaXMuYnVmZmVyLnNlc3Npb25JZCxcbiAgICAgICAgICAgICAgICAkd2luZG93X2lkOiB0aGlzLmJ1ZmZlci53aW5kb3dJZCxcbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNsZWFyQnVmZmVyKClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmJ1ZmZlciB8fCB0aGlzLmNsZWFyQnVmZmVyKClcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgX2NhcHR1cmVTbmFwc2hvdEJ1ZmZlcmVkKHByb3BlcnRpZXM6IFByb3BlcnRpZXMpIHtcbiAgICAgICAgY29uc3QgYWRkaXRpb25hbEJ5dGVzID0gMiArICh0aGlzLmJ1ZmZlcj8uZGF0YS5sZW5ndGggfHwgMCkgLy8gMiBieXRlcyBmb3IgdGhlIGFycmF5IGJyYWNrZXRzIGFuZCAxIGJ5dGUgZm9yIGVhY2ggY29tbWFcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgIXRoaXMuYnVmZmVyIHx8XG4gICAgICAgICAgICB0aGlzLmJ1ZmZlci5zaXplICsgcHJvcGVydGllcy4kc25hcHNob3RfYnl0ZXMgKyBhZGRpdGlvbmFsQnl0ZXMgPiBSRUNPUkRJTkdfTUFYX0VWRU5UX1NJWkUgfHxcbiAgICAgICAgICAgICghIXRoaXMuYnVmZmVyLnNlc3Npb25JZCAmJiB0aGlzLmJ1ZmZlci5zZXNzaW9uSWQgIT09IHRoaXMuc2Vzc2lvbklkKVxuICAgICAgICApIHtcbiAgICAgICAgICAgIHRoaXMuYnVmZmVyID0gdGhpcy5fZmx1c2hCdWZmZXIoKVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKF9pc051bGwodGhpcy5idWZmZXIuc2Vzc2lvbklkKSAmJiAhX2lzTnVsbCh0aGlzLnNlc3Npb25JZCkpIHtcbiAgICAgICAgICAgIC8vIHNlc3Npb24gaWQgc3RhcnRzIG51bGwgYnV0IGhhcyBub3cgYmVlbiBhc3NpZ25lZCwgdXBkYXRlIHRoZSBidWZmZXJcbiAgICAgICAgICAgIHRoaXMuYnVmZmVyLnNlc3Npb25JZCA9IHRoaXMuc2Vzc2lvbklkXG4gICAgICAgICAgICB0aGlzLmJ1ZmZlci53aW5kb3dJZCA9IHRoaXMud2luZG93SWRcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuYnVmZmVyLnNpemUgKz0gcHJvcGVydGllcy4kc25hcHNob3RfYnl0ZXNcbiAgICAgICAgdGhpcy5idWZmZXIuZGF0YS5wdXNoKHByb3BlcnRpZXMuJHNuYXBzaG90X2RhdGEpXG5cbiAgICAgICAgaWYgKCF0aGlzLmZsdXNoQnVmZmVyVGltZXIpIHtcbiAgICAgICAgICAgIHRoaXMuZmx1c2hCdWZmZXJUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuX2ZsdXNoQnVmZmVyKClcbiAgICAgICAgICAgIH0sIFJFQ09SRElOR19CVUZGRVJfVElNRU9VVClcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgX2NhcHR1cmVTbmFwc2hvdChwcm9wZXJ0aWVzOiBQcm9wZXJ0aWVzKSB7XG4gICAgICAgIC8vIDpUUklDS1k6IE1ha2Ugc3VyZSB3ZSBiYXRjaCB0aGVzZSByZXF1ZXN0cywgdXNlIGEgY3VzdG9tIGVuZHBvaW50IGFuZCBkb24ndCB0cnVuY2F0ZSB0aGUgc3RyaW5ncy5cbiAgICAgICAgdGhpcy5pbnN0YW5jZS5jYXB0dXJlKCckc25hcHNob3QnLCBwcm9wZXJ0aWVzLCB7XG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgIF91cmw6IHRoaXMuaW5zdGFuY2UucmVxdWVzdFJvdXRlci5lbmRwb2ludEZvcignYXBpJywgdGhpcy5fZW5kcG9pbnQpLFxuICAgICAgICAgICAgX25vVHJ1bmNhdGU6IHRydWUsXG4gICAgICAgICAgICBfYmF0Y2hLZXk6IFNFU1NJT05fUkVDT1JESU5HX0JBVENIX0tFWSxcbiAgICAgICAgICAgIF9tZXRyaWNzOiB7XG4gICAgICAgICAgICAgICAgcnJ3ZWJfZnVsbF9zbmFwc2hvdDogcHJvcGVydGllcy4kc25hcHNob3RfZGF0YS50eXBlID09PSBGVUxMX1NOQVBTSE9UX0VWRU5UX1RZUEUsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KVxuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBhdXRvY2FwdHVyZSB9IGZyb20gJy4vYXV0b2NhcHR1cmUnXG5pbXBvcnQgeyBfYmFzZTY0RW5jb2RlLCBsb2FkU2NyaXB0IH0gZnJvbSAnLi91dGlscydcbmltcG9ydCB7IFBvc3RIb2cgfSBmcm9tICcuL3Bvc3Rob2ctY29yZSdcbmltcG9ydCB7IERlY2lkZVJlc3BvbnNlIH0gZnJvbSAnLi90eXBlcydcbmltcG9ydCB7IFNUT1JFRF9HUk9VUF9QUk9QRVJUSUVTX0tFWSwgU1RPUkVEX1BFUlNPTl9QUk9QRVJUSUVTX0tFWSB9IGZyb20gJy4vY29uc3RhbnRzJ1xuXG5pbXBvcnQgeyBfaXNVbmRlZmluZWQgfSBmcm9tICcuL3V0aWxzL3R5cGUtdXRpbHMnXG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tICcuL3V0aWxzL2xvZ2dlcidcbmltcG9ydCB7IHdpbmRvdywgZG9jdW1lbnQsIGFzc2lnbmFibGVXaW5kb3cgfSBmcm9tICcuL3V0aWxzL2dsb2JhbHMnXG5cbmV4cG9ydCBjbGFzcyBEZWNpZGUge1xuICAgIGluc3RhbmNlOiBQb3N0SG9nXG5cbiAgICBjb25zdHJ1Y3RvcihpbnN0YW5jZTogUG9zdEhvZykge1xuICAgICAgICB0aGlzLmluc3RhbmNlID0gaW5zdGFuY2VcbiAgICAgICAgLy8gZG9uJ3QgbmVlZCB0byB3YWl0IGZvciBgZGVjaWRlYCB0byByZXR1cm4gaWYgZmxhZ3Mgd2VyZSBwcm92aWRlZCBvbiBpbml0aWFsaXNhdGlvblxuICAgICAgICB0aGlzLmluc3RhbmNlLmRlY2lkZUVuZHBvaW50V2FzSGl0ID0gdGhpcy5pbnN0YW5jZS5faGFzQm9vdHN0cmFwcGVkRmVhdHVyZUZsYWdzKClcbiAgICB9XG5cbiAgICBjYWxsKCk6IHZvaWQge1xuICAgICAgICAvKlxuICAgICAgICBDYWxscyAvZGVjaWRlIGVuZHBvaW50IHRvIGZldGNoIG9wdGlvbnMgZm9yIGF1dG9jYXB0dXJlLCBzZXNzaW9uIHJlY29yZGluZywgZmVhdHVyZSBmbGFncyAmIGNvbXByZXNzaW9uLlxuICAgICAgICAqL1xuICAgICAgICBjb25zdCBqc29uX2RhdGEgPSBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICB0b2tlbjogdGhpcy5pbnN0YW5jZS5jb25maWcudG9rZW4sXG4gICAgICAgICAgICBkaXN0aW5jdF9pZDogdGhpcy5pbnN0YW5jZS5nZXRfZGlzdGluY3RfaWQoKSxcbiAgICAgICAgICAgIGdyb3VwczogdGhpcy5pbnN0YW5jZS5nZXRHcm91cHMoKSxcbiAgICAgICAgICAgIHBlcnNvbl9wcm9wZXJ0aWVzOiB0aGlzLmluc3RhbmNlLmdldF9wcm9wZXJ0eShTVE9SRURfUEVSU09OX1BST1BFUlRJRVNfS0VZKSxcbiAgICAgICAgICAgIGdyb3VwX3Byb3BlcnRpZXM6IHRoaXMuaW5zdGFuY2UuZ2V0X3Byb3BlcnR5KFNUT1JFRF9HUk9VUF9QUk9QRVJUSUVTX0tFWSksXG4gICAgICAgICAgICBkaXNhYmxlX2ZsYWdzOlxuICAgICAgICAgICAgICAgIHRoaXMuaW5zdGFuY2UuY29uZmlnLmFkdmFuY2VkX2Rpc2FibGVfZmVhdHVyZV9mbGFncyB8fFxuICAgICAgICAgICAgICAgIHRoaXMuaW5zdGFuY2UuY29uZmlnLmFkdmFuY2VkX2Rpc2FibGVfZmVhdHVyZV9mbGFnc19vbl9maXJzdF9sb2FkIHx8XG4gICAgICAgICAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICB9KVxuXG4gICAgICAgIGNvbnN0IGVuY29kZWRfZGF0YSA9IF9iYXNlNjRFbmNvZGUoanNvbl9kYXRhKVxuICAgICAgICB0aGlzLmluc3RhbmNlLl9zZW5kX3JlcXVlc3QoXG4gICAgICAgICAgICB0aGlzLmluc3RhbmNlLnJlcXVlc3RSb3V0ZXIuZW5kcG9pbnRGb3IoJ2FwaScsICcvZGVjaWRlLz92PTMnKSxcbiAgICAgICAgICAgIHsgZGF0YTogZW5jb2RlZF9kYXRhLCB2ZXJib3NlOiB0cnVlIH0sXG4gICAgICAgICAgICB7IG1ldGhvZDogJ1BPU1QnIH0sXG4gICAgICAgICAgICAocmVzcG9uc2UpID0+IHRoaXMucGFyc2VEZWNpZGVSZXNwb25zZShyZXNwb25zZSBhcyBEZWNpZGVSZXNwb25zZSlcbiAgICAgICAgKVxuICAgIH1cblxuICAgIHBhcnNlRGVjaWRlUmVzcG9uc2UocmVzcG9uc2U6IERlY2lkZVJlc3BvbnNlKTogdm9pZCB7XG4gICAgICAgIHRoaXMuaW5zdGFuY2UuZmVhdHVyZUZsYWdzLnNldFJlbG9hZGluZ1BhdXNlZChmYWxzZSlcbiAgICAgICAgLy8gOlRSSUNLWTogUmVsb2FkIC0gc3RhcnQgYW5vdGhlciByZXF1ZXN0IGlmIHF1ZXVlZCFcbiAgICAgICAgdGhpcy5pbnN0YW5jZS5mZWF0dXJlRmxhZ3MuX3N0YXJ0UmVsb2FkVGltZXIoKVxuXG4gICAgICAgIGlmIChyZXNwb25zZT8uc3RhdHVzID09PSAwKSB7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ0ZhaWxlZCB0byBmZXRjaCBmZWF0dXJlIGZsYWdzIGZyb20gUG9zdEhvZy4nKVxuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgaWYgKCEoZG9jdW1lbnQgJiYgZG9jdW1lbnQuYm9keSkpIHtcbiAgICAgICAgICAgIGxvZ2dlci5pbmZvKCdkb2N1bWVudCBub3QgcmVhZHkgeWV0LCB0cnlpbmcgYWdhaW4gaW4gNTAwIG1pbGxpc2Vjb25kcy4uLicpXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcnNlRGVjaWRlUmVzcG9uc2UocmVzcG9uc2UpXG4gICAgICAgICAgICB9LCA1MDApXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuaW5zdGFuY2UudG9vbGJhci5hZnRlckRlY2lkZVJlc3BvbnNlKHJlc3BvbnNlKVxuICAgICAgICB0aGlzLmluc3RhbmNlLnNlc3Npb25SZWNvcmRpbmc/LmFmdGVyRGVjaWRlUmVzcG9uc2UocmVzcG9uc2UpXG4gICAgICAgIGF1dG9jYXB0dXJlLmFmdGVyRGVjaWRlUmVzcG9uc2UocmVzcG9uc2UsIHRoaXMuaW5zdGFuY2UpXG4gICAgICAgIHRoaXMuaW5zdGFuY2UuX2FmdGVyRGVjaWRlUmVzcG9uc2UocmVzcG9uc2UpXG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgIXRoaXMuaW5zdGFuY2UuY29uZmlnLmFkdmFuY2VkX2Rpc2FibGVfZmVhdHVyZV9mbGFnc19vbl9maXJzdF9sb2FkICYmXG4gICAgICAgICAgICAhdGhpcy5pbnN0YW5jZS5jb25maWcuYWR2YW5jZWRfZGlzYWJsZV9mZWF0dXJlX2ZsYWdzXG4gICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZS5mZWF0dXJlRmxhZ3MucmVjZWl2ZWRGZWF0dXJlRmxhZ3MocmVzcG9uc2UpXG4gICAgICAgIH1cblxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2Jhbi10cy1jb21tZW50XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgY29uc3Qgc3VydmV5c0dlbmVyYXRvciA9IHdpbmRvdz8uZXh0ZW5kUG9zdEhvZ1dpdGhTdXJ2ZXlzXG5cbiAgICAgICAgaWYgKHJlc3BvbnNlWydzdXJ2ZXlzJ10gJiYgIXN1cnZleXNHZW5lcmF0b3IpIHtcbiAgICAgICAgICAgIGxvYWRTY3JpcHQodGhpcy5pbnN0YW5jZS5yZXF1ZXN0Um91dGVyLmVuZHBvaW50Rm9yKCdhc3NldHMnLCAnL3N0YXRpYy9zdXJ2ZXlzLmpzJyksIChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBsb2dnZXIuZXJyb3IoYENvdWxkIG5vdCBsb2FkIHN1cnZleXMgc2NyaXB0YCwgZXJyKVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvYmFuLXRzLWNvbW1lbnRcbiAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICAgICAgd2luZG93LmV4dGVuZFBvc3RIb2dXaXRoU3VydmV5cyh0aGlzLmluc3RhbmNlKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvYmFuLXRzLWNvbW1lbnRcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICBjb25zdCBleGNlcHRpb25BdXRvQ2FwdHVyZUFkZGVkVG9XaW5kb3cgPSB3aW5kb3c/LmV4dGVuZFBvc3RIb2dXaXRoRXhjZXB0aW9uQXV0b0NhcHR1cmVcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgcmVzcG9uc2VbJ2F1dG9jYXB0dXJlRXhjZXB0aW9ucyddICYmXG4gICAgICAgICAgICAhIXJlc3BvbnNlWydhdXRvY2FwdHVyZUV4Y2VwdGlvbnMnXSAmJlxuICAgICAgICAgICAgX2lzVW5kZWZpbmVkKGV4Y2VwdGlvbkF1dG9DYXB0dXJlQWRkZWRUb1dpbmRvdylcbiAgICAgICAgKSB7XG4gICAgICAgICAgICBsb2FkU2NyaXB0KHRoaXMuaW5zdGFuY2UucmVxdWVzdFJvdXRlci5lbmRwb2ludEZvcignYXNzZXRzJywgJy9zdGF0aWMvZXhjZXB0aW9uLWF1dG9jYXB0dXJlLmpzJyksIChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBsb2dnZXIuZXJyb3IoYENvdWxkIG5vdCBsb2FkIGV4Y2VwdGlvbiBhdXRvY2FwdHVyZSBzY3JpcHRgLCBlcnIpXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9iYW4tdHMtY29tbWVudFxuICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgICAgICB3aW5kb3cuZXh0ZW5kUG9zdEhvZ1dpdGhFeGNlcHRpb25BdXRvY2FwdHVyZSh0aGlzLmluc3RhbmNlLCByZXNwb25zZSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cblxuICAgICAgICBpZiAocmVzcG9uc2VbJ3NpdGVBcHBzJ10pIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmluc3RhbmNlLmNvbmZpZy5vcHRfaW5fc2l0ZV9hcHBzKSB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCB7IGlkLCB1cmwgfSBvZiByZXNwb25zZVsnc2l0ZUFwcHMnXSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzY3JpcHRVcmwgPSB0aGlzLmluc3RhbmNlLnJlcXVlc3RSb3V0ZXIuZW5kcG9pbnRGb3IoJ2FwaScsIHVybClcblxuICAgICAgICAgICAgICAgICAgICBhc3NpZ25hYmxlV2luZG93W2BfXyQkcGhfc2l0ZV9hcHBfJHtpZH1gXSA9IHRoaXMuaW5zdGFuY2VcblxuICAgICAgICAgICAgICAgICAgICBsb2FkU2NyaXB0KHNjcmlwdFVybCwgKGVycikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcihgRXJyb3Igd2hpbGUgaW5pdGlhbGl6aW5nIFBvc3RIb2cgYXBwIHdpdGggY29uZmlnIGlkICR7aWR9YCwgZXJyKVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2VbJ3NpdGVBcHBzJ10ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcignUG9zdEhvZyBzaXRlIGFwcHMgYXJlIGRpc2FibGVkLiBFbmFibGUgdGhlIFwib3B0X2luX3NpdGVfYXBwc1wiIGNvbmZpZyB0byBwcm9jZWVkLicpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCAiaW1wb3J0IHsgX3JlZ2lzdGVyX2V2ZW50LCBfdHJ5LCBsb2FkU2NyaXB0IH0gZnJvbSAnLi4vdXRpbHMnXG5pbXBvcnQgeyBQb3N0SG9nIH0gZnJvbSAnLi4vcG9zdGhvZy1jb3JlJ1xuaW1wb3J0IHsgRGVjaWRlUmVzcG9uc2UsIFRvb2xiYXJQYXJhbXMgfSBmcm9tICcuLi90eXBlcydcbmltcG9ydCB7IF9nZXRIYXNoUGFyYW0gfSBmcm9tICcuLi91dGlscy9yZXF1ZXN0LXV0aWxzJ1xuaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSAnLi4vdXRpbHMvbG9nZ2VyJ1xuaW1wb3J0IHsgd2luZG93LCBkb2N1bWVudCwgYXNzaWduYWJsZVdpbmRvdyB9IGZyb20gJy4uL3V0aWxzL2dsb2JhbHMnXG5cbi8vIFRSSUNLWTogTWFueSB3ZWIgZnJhbWV3b3JrcyB3aWxsIG1vZGlmeSB0aGUgcm91dGUgb24gbG9hZCwgcG90ZW50aWFsbHkgYmVmb3JlIHBvc3Rob2cgaXMgaW5pdGlhbGl6ZWQuXG4vLyBUbyBnZXQgYWhlYWQgb2YgdGhpcyB3ZSBncmFiIGl0IGFzIHNvb24gYXMgdGhlIHBvc3Rob2ctanMgaXMgcGFyc2VkXG5jb25zdCBTVEFURV9GUk9NX1dJTkRPVyA9IHdpbmRvdz8ubG9jYXRpb25cbiAgICA/IF9nZXRIYXNoUGFyYW0od2luZG93LmxvY2F0aW9uLmhhc2gsICdfX3Bvc3Rob2cnKSB8fCBfZ2V0SGFzaFBhcmFtKGxvY2F0aW9uLmhhc2gsICdzdGF0ZScpXG4gICAgOiBudWxsXG5cbmV4cG9ydCBjbGFzcyBUb29sYmFyIHtcbiAgICBpbnN0YW5jZTogUG9zdEhvZ1xuICAgIGNvbnN0cnVjdG9yKGluc3RhbmNlOiBQb3N0SG9nKSB7XG4gICAgICAgIHRoaXMuaW5zdGFuY2UgPSBpbnN0YW5jZVxuICAgIH1cblxuICAgIGFmdGVyRGVjaWRlUmVzcG9uc2UocmVzcG9uc2U6IERlY2lkZVJlc3BvbnNlKSB7XG4gICAgICAgIGNvbnN0IHRvb2xiYXJQYXJhbXM6IFRvb2xiYXJQYXJhbXMgPVxuICAgICAgICAgICAgcmVzcG9uc2VbJ3Rvb2xiYXJQYXJhbXMnXSB8fFxuICAgICAgICAgICAgcmVzcG9uc2VbJ2VkaXRvclBhcmFtcyddIHx8XG4gICAgICAgICAgICAocmVzcG9uc2VbJ3Rvb2xiYXJWZXJzaW9uJ10gPyB7IHRvb2xiYXJWZXJzaW9uOiByZXNwb25zZVsndG9vbGJhclZlcnNpb24nXSB9IDoge30pXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIHJlc3BvbnNlWydpc0F1dGhlbnRpY2F0ZWQnXSAmJlxuICAgICAgICAgICAgdG9vbGJhclBhcmFtc1sndG9vbGJhclZlcnNpb24nXSAmJlxuICAgICAgICAgICAgdG9vbGJhclBhcmFtc1sndG9vbGJhclZlcnNpb24nXS5pbmRleE9mKCd0b29sYmFyJykgPT09IDBcbiAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzLmxvYWRUb29sYmFyKHtcbiAgICAgICAgICAgICAgICAuLi50b29sYmFyUGFyYW1zLFxuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRvIGxvYWQgdGhlIHRvb2xiYXIsIHdlIG5lZWQgYW4gYWNjZXNzIHRva2VuIGFuZCBvdGhlciBzdGF0ZS4gVGhhdCBzdGF0ZSBjb21lcyBmcm9tIG9uZSBvZiB0aHJlZSBwbGFjZXM6XG4gICAgICogMS4gSW4gdGhlIFVSTCBoYXNoIHBhcmFtc1xuICAgICAqIDIuIEZyb20gc2Vzc2lvbiBzdG9yYWdlIHVuZGVyIHRoZSBrZXkgYHRvb2xiYXJQYXJhbXNgIGlmIHRoZSB0b29sYmFyIHdhcyBpbml0aWFsaXplZCBvbiBhIHByZXZpb3VzIHBhZ2VcbiAgICAgKi9cbiAgICBtYXliZUxvYWRUb29sYmFyKFxuICAgICAgICBsb2NhdGlvbjogTG9jYXRpb24gfCB1bmRlZmluZWQgPSB1bmRlZmluZWQsXG4gICAgICAgIGxvY2FsU3RvcmFnZTogU3RvcmFnZSB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZCxcbiAgICAgICAgaGlzdG9yeTogSGlzdG9yeSB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZFxuICAgICk6IGJvb2xlYW4ge1xuICAgICAgICBpZiAoIXdpbmRvdyB8fCAhZG9jdW1lbnQpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICB9XG4gICAgICAgIGxvY2F0aW9uID0gbG9jYXRpb24gPz8gd2luZG93LmxvY2F0aW9uXG4gICAgICAgIGhpc3RvcnkgPSBoaXN0b3J5ID8/IHdpbmRvdy5oaXN0b3J5XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIEJlZm9yZSBydW5uaW5nIHRoZSBjb2RlIHdlIGNoZWNrIGlmIHdlIGNhbiBhY2Nlc3MgbG9jYWxTdG9yYWdlLCBpZiBub3Qgd2Ugb3B0LW91dFxuICAgICAgICAgICAgaWYgKCFsb2NhbFN0b3JhZ2UpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rlc3QnLCAndGVzdCcpXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgndGVzdCcpXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gSWYgbG9jYWxTdG9yYWdlIHdhcyB1bmRlZmluZWQsIGFuZCBsb2NhbFN0b3JhZ2UgaXMgc3VwcG9ydGVkIHdlIHNldCB0aGUgZGVmYXVsdCB2YWx1ZVxuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZSA9IHdpbmRvdz8ubG9jYWxTdG9yYWdlXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogSW5mbyBhYm91dCB0aGUgc3RhdGVcbiAgICAgICAgICAgICAqIFRoZSBzdGF0ZSBpcyBhIGpzb24gb2JqZWN0XG4gICAgICAgICAgICAgKiAxLiAoTGVnYWN5KSBUaGUgc3RhdGUgY2FuIGJlIGBzdGF0ZT17fWAgYXMgYSB1cmxlbmNvZGVkIG9iamVjdCBvZiBpbmZvLiBJbiB0aGlzIGNhc2VcbiAgICAgICAgICAgICAqIDIuIFRoZSBzdGF0ZSBzaG91bGQgbm93IGJlIGZvdW5kIGluIGBfX3Bvc3Rob2c9e31gIGFuZCBjYW4gYmUgYmFzZTY0IGVuY29kZWQgb3IgdXJsZW5jb2RlZC5cbiAgICAgICAgICAgICAqIDMuIEJhc2U2NCBlbmNvZGluZyBpcyBwcmVmZXJyZWQgYW5kIHdpbGwgZ3JhZHVhbGx5IGJlIHJvbGxlZCBvdXQgZXZlcnl3aGVyZVxuICAgICAgICAgICAgICovXG5cbiAgICAgICAgICAgIGNvbnN0IHN0YXRlSGFzaCA9XG4gICAgICAgICAgICAgICAgU1RBVEVfRlJPTV9XSU5ET1cgfHwgX2dldEhhc2hQYXJhbShsb2NhdGlvbi5oYXNoLCAnX19wb3N0aG9nJykgfHwgX2dldEhhc2hQYXJhbShsb2NhdGlvbi5oYXNoLCAnc3RhdGUnKVxuXG4gICAgICAgICAgICBsZXQgdG9vbGJhclBhcmFtczogVG9vbGJhclBhcmFtc1xuICAgICAgICAgICAgY29uc3Qgc3RhdGUgPSBzdGF0ZUhhc2hcbiAgICAgICAgICAgICAgICA/IF90cnkoKCkgPT4gSlNPTi5wYXJzZShhdG9iKGRlY29kZVVSSUNvbXBvbmVudChzdGF0ZUhhc2gpKSkpIHx8XG4gICAgICAgICAgICAgICAgICBfdHJ5KCgpID0+IEpTT04ucGFyc2UoZGVjb2RlVVJJQ29tcG9uZW50KHN0YXRlSGFzaCkpKVxuICAgICAgICAgICAgICAgIDogbnVsbFxuXG4gICAgICAgICAgICBjb25zdCBwYXJzZUZyb21VcmwgPSBzdGF0ZSAmJiBzdGF0ZVsnYWN0aW9uJ10gPT09ICdwaF9hdXRob3JpemUnXG5cbiAgICAgICAgICAgIGlmIChwYXJzZUZyb21VcmwpIHtcbiAgICAgICAgICAgICAgICAvLyBoYXBwZW5zIGlmIHRoZXkgYXJlIGluaXRpYWxpemluZyB0aGUgdG9vbGJhciB1c2luZyBhbiBvbGQgc25pcHBldFxuICAgICAgICAgICAgICAgIHRvb2xiYXJQYXJhbXMgPSBzdGF0ZVxuICAgICAgICAgICAgICAgIHRvb2xiYXJQYXJhbXMuc291cmNlID0gJ3VybCdcblxuICAgICAgICAgICAgICAgIGlmICh0b29sYmFyUGFyYW1zICYmIE9iamVjdC5rZXlzKHRvb2xiYXJQYXJhbXMpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlWydkZXNpcmVkSGFzaCddKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBoYXNoIHRoYXQgd2FzIGluIHRoZSB1cmwgYmVmb3JlIHRoZSByZWRpcmVjdFxuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24uaGFzaCA9IHN0YXRlWydkZXNpcmVkSGFzaCddXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaGlzdG9yeSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaGlzdG9yeS5yZXBsYWNlU3RhdGUoJycsIGRvY3VtZW50LnRpdGxlLCBsb2NhdGlvbi5wYXRobmFtZSArIGxvY2F0aW9uLnNlYXJjaCkgLy8gY29tcGxldGVseSByZW1vdmUgaGFzaFxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24uaGFzaCA9ICcnIC8vIGNsZWFyIGhhc2ggKGJ1dCBsZWF2ZXMgIyB1bmZvcnR1bmF0ZWx5KVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBnZXQgY3JlZGVudGlhbHMgZnJvbSBsb2NhbFN0b3JhZ2UgZnJvbSBhIHByZXZpb3VzIGluaXRpYWx6YXRpb25cbiAgICAgICAgICAgICAgICB0b29sYmFyUGFyYW1zID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnX3Bvc3RIb2dUb29sYmFyUGFyYW1zJykgfHwgJ3t9JylcbiAgICAgICAgICAgICAgICB0b29sYmFyUGFyYW1zLnNvdXJjZSA9ICdsb2NhbHN0b3JhZ2UnXG5cbiAgICAgICAgICAgICAgICAvLyBkZWxldGUgXCJhZGQtYWN0aW9uXCIgb3Igb3RoZXIgaW50ZW50IGZyb20gdG9vbGJhclBhcmFtcywgb3RoZXJ3aXNlIHdlJ2xsIGhhdmUgdGhlIHNhbWUgaW50ZW50XG4gICAgICAgICAgICAgICAgLy8gZXZlcnkgdGltZSB3ZSBvcGVuIHRoZSBwYWdlIChlLmcuIHlvdSBqdXN0IHZpc2l0aW5nIHlvdXIgb3duIHNpdGUgYW4gaG91ciBsYXRlcilcbiAgICAgICAgICAgICAgICBkZWxldGUgdG9vbGJhclBhcmFtcy51c2VySW50ZW50XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0b29sYmFyUGFyYW1zWyd0b2tlbiddICYmIHRoaXMuaW5zdGFuY2UuY29uZmlnLnRva2VuID09PSB0b29sYmFyUGFyYW1zWyd0b2tlbiddKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2FkVG9vbGJhcih0b29sYmFyUGFyYW1zKVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGxvYWRUb29sYmFyKHBhcmFtcz86IFRvb2xiYXJQYXJhbXMpOiBib29sZWFuIHtcbiAgICAgICAgaWYgKCF3aW5kb3cgfHwgYXNzaWduYWJsZVdpbmRvd1snX3Bvc3RIb2dUb29sYmFyTG9hZGVkJ10pIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICB9XG4gICAgICAgIC8vIG9ubHkgbG9hZCB0aGUgdG9vbGJhciBvbmNlLCBldmVuIGlmIHRoZXJlIGFyZSBtdWx0aXBsZSBpbnN0YW5jZXMgb2YgUG9zdEhvZ0xpYlxuICAgICAgICBhc3NpZ25hYmxlV2luZG93WydfcG9zdEhvZ1Rvb2xiYXJMb2FkZWQnXSA9IHRydWVcblxuICAgICAgICAvLyB0b29sYmFyLmpzIGlzIHNlcnZlZCBmcm9tIHRoZSBQb3N0SG9nIENETiwgdGhpcyBoYXMgYSBUVEwgb2YgMjQgaG91cnMuXG4gICAgICAgIC8vIHRoZSB0b29sYmFyIGFzc2V0IGluY2x1ZGVzIGEgcm90YXRpbmcgXCJ0b2tlblwiIHRoYXQgaXMgdmFsaWQgZm9yIDUgbWludXRlcy5cbiAgICAgICAgY29uc3QgZml2ZU1pbnV0ZXNJbk1pbGxpcyA9IDUgKiA2MCAqIDEwMDBcbiAgICAgICAgLy8gdGhpcyBlbnN1cmVzIHRoYXQgd2UgYnVzdCB0aGUgY2FjaGUgcGVyaW9kaWNhbGx5XG4gICAgICAgIGNvbnN0IHRpbWVzdGFtcFRvTmVhcmVzdEZpdmVNaW51dGVzID0gTWF0aC5mbG9vcihEYXRlLm5vdygpIC8gZml2ZU1pbnV0ZXNJbk1pbGxpcykgKiBmaXZlTWludXRlc0luTWlsbGlzXG4gICAgICAgIGNvbnN0IHRvb2xiYXJVcmwgPSB0aGlzLmluc3RhbmNlLnJlcXVlc3RSb3V0ZXIuZW5kcG9pbnRGb3IoXG4gICAgICAgICAgICAnYXNzZXRzJyxcbiAgICAgICAgICAgIGAvc3RhdGljL3Rvb2xiYXIuanM/dD0ke3RpbWVzdGFtcFRvTmVhcmVzdEZpdmVNaW51dGVzfWBcbiAgICAgICAgKVxuICAgICAgICBjb25zdCBkaXNhYmxlVG9vbGJhck1ldHJpY3MgPVxuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZS5yZXF1ZXN0Um91dGVyLnJlZ2lvbiA9PT0gJ2N1c3RvbScgJiYgdGhpcy5pbnN0YW5jZS5jb25maWcuYWR2YW5jZWRfZGlzYWJsZV90b29sYmFyX21ldHJpY3NcblxuICAgICAgICBjb25zdCB0b29sYmFyUGFyYW1zID0ge1xuICAgICAgICAgICAgdG9rZW46IHRoaXMuaW5zdGFuY2UuY29uZmlnLnRva2VuLFxuICAgICAgICAgICAgLi4ucGFyYW1zLFxuICAgICAgICAgICAgYXBpVVJMOiB0aGlzLmluc3RhbmNlLnJlcXVlc3RSb3V0ZXIuZW5kcG9pbnRGb3IoJ3VpJyksXG4gICAgICAgICAgICAuLi4oZGlzYWJsZVRvb2xiYXJNZXRyaWNzID8geyBpbnN0cnVtZW50OiBmYWxzZSB9IDoge30pLFxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgeyBzb3VyY2U6IF9kaXNjYXJkLCAuLi5wYXJhbXNUb1BlcnNpc3QgfSA9IHRvb2xiYXJQYXJhbXMgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oJ19wb3N0SG9nVG9vbGJhclBhcmFtcycsIEpTT04uc3RyaW5naWZ5KHBhcmFtc1RvUGVyc2lzdCkpXG5cbiAgICAgICAgbG9hZFNjcmlwdCh0b29sYmFyVXJsLCAoZXJyKSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdGYWlsZWQgdG8gbG9hZCB0b29sYmFyJywgZXJyKVxuICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgOyhhc3NpZ25hYmxlV2luZG93WydwaF9sb2FkX3Rvb2xiYXInXSB8fCBhc3NpZ25hYmxlV2luZG93WydwaF9sb2FkX2VkaXRvciddKSh0b29sYmFyUGFyYW1zLCB0aGlzLmluc3RhbmNlKVxuICAgICAgICB9KVxuICAgICAgICAvLyBUdXJib2xpbmtzIGRvZXNuJ3QgZmlyZSBhbiBvbmxvYWQgZXZlbnQgYnV0IGRvZXMgcmVwbGFjZSB0aGUgZW50aXJlIGJvZHksIGluY2x1ZGluZyB0aGUgdG9vbGJhci5cbiAgICAgICAgLy8gVGh1cywgd2UgZW5zdXJlIHRoZSB0b29sYmFyIGlzIG9ubHkgbG9hZGVkIGluc2lkZSB0aGUgYm9keSwgYW5kIHRoZW4gcmVsb2FkZWQgb24gdHVyYm9saW5rczpsb2FkLlxuICAgICAgICBfcmVnaXN0ZXJfZXZlbnQod2luZG93LCAndHVyYm9saW5rczpsb2FkJywgKCkgPT4ge1xuICAgICAgICAgICAgYXNzaWduYWJsZVdpbmRvd1snX3Bvc3RIb2dUb29sYmFyTG9hZGVkJ10gPSBmYWxzZVxuICAgICAgICAgICAgdGhpcy5sb2FkVG9vbGJhcih0b29sYmFyUGFyYW1zKVxuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cblxuICAgIC8qKiBAZGVwcmVjYXRlZCBVc2UgXCJsb2FkVG9vbGJhclwiIGluc3RlYWQuICovXG4gICAgX2xvYWRFZGl0b3IocGFyYW1zOiBUb29sYmFyUGFyYW1zKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLmxvYWRUb29sYmFyKHBhcmFtcylcbiAgICB9XG5cbiAgICAvKiogQGRlcHJlY2F0ZWQgVXNlIFwibWF5YmVMb2FkVG9vbGJhclwiIGluc3RlYWQuICovXG4gICAgbWF5YmVMb2FkRWRpdG9yKFxuICAgICAgICBsb2NhdGlvbjogTG9jYXRpb24gfCB1bmRlZmluZWQgPSB1bmRlZmluZWQsXG4gICAgICAgIGxvY2FsU3RvcmFnZTogU3RvcmFnZSB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZCxcbiAgICAgICAgaGlzdG9yeTogSGlzdG9yeSB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZFxuICAgICk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXliZUxvYWRUb29sYmFyKGxvY2F0aW9uLCBsb2NhbFN0b3JhZ2UsIGhpc3RvcnkpXG4gICAgfVxufVxuIiwgImV4cG9ydCBjbGFzcyBSZXF1ZXN0UXVldWVTY2FmZm9sZCB7XG4gICAgaXNQb2xsaW5nOiBib29sZWFuIC8vIGZsYWcgdG8gY29udGludWUgdG8gcmVjdXJzaXZlbHkgcG9sbCBvciBub3RcbiAgICBfZXZlbnRfcXVldWU6IGFueVtdXG4gICAgX2VtcHR5X3F1ZXVlX2NvdW50OiBudW1iZXIgLy8gdG8gdHJhY2sgZW1wdHkgcG9sbHNcbiAgICBfcG9sbGVyOiBudW1iZXIgfCB1bmRlZmluZWQgLy8gdG8gYmVjb21lIGludGVydmFsIGZvciByZWZlcmVuY2UgdG8gY2xlYXIgbGF0ZXJcbiAgICBfcG9sbEludGVydmFsOiBudW1iZXJcblxuICAgIGNvbnN0cnVjdG9yKHBvbGxJbnRlcnZhbCA9IDMwMDApIHtcbiAgICAgICAgdGhpcy5pc1BvbGxpbmcgPSB0cnVlIC8vIGZsYWcgdG8gY29udGludWUgdG8gcmVjdXJzaXZlbHkgcG9sbCBvciBub3RcbiAgICAgICAgdGhpcy5fZXZlbnRfcXVldWUgPSBbXVxuICAgICAgICB0aGlzLl9lbXB0eV9xdWV1ZV9jb3VudCA9IDAgLy8gdG8gdHJhY2sgZW1wdHkgcG9sbHNcbiAgICAgICAgdGhpcy5fcG9sbGVyID0gdW5kZWZpbmVkIC8vIHRvIGJlY29tZSBpbnRlcnZhbCBmb3IgcmVmZXJlbmNlIHRvIGNsZWFyIGxhdGVyXG4gICAgICAgIHRoaXMuX3BvbGxJbnRlcnZhbCA9IHBvbGxJbnRlcnZhbFxuICAgIH1cblxuICAgIHNldFBvbGxJbnRlcnZhbChpbnRlcnZhbDogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIHRoaXMuX3BvbGxJbnRlcnZhbCA9IGludGVydmFsXG4gICAgICAgIC8vIFJlc2V0IGludGVydmFsIGlmIHJ1bm5pbmcgYWxyZWFkeVxuICAgICAgICBpZiAodGhpcy5pc1BvbGxpbmcpIHtcbiAgICAgICAgICAgIHRoaXMucG9sbCgpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnNcbiAgICAvLyBlbnF1ZXVlKF9yZXF1ZXN0RGF0YTogUmVjb3JkPHN0cmluZywgYW55Pik6IHZvaWQge1xuICAgIC8vICAgICByZXR1cm5cbiAgICAvLyB9XG5cbiAgICBwb2xsKCk6IHZvaWQge1xuICAgICAgICByZXR1cm5cbiAgICB9XG5cbiAgICB1bmxvYWQoKTogdm9pZCB7XG4gICAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGdldFRpbWUoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKCkuZ2V0VGltZSgpXG4gICAgfVxufVxuIiwgImltcG9ydCB7IFJlcXVlc3RRdWV1ZVNjYWZmb2xkIH0gZnJvbSAnLi9iYXNlLXJlcXVlc3QtcXVldWUnXG5pbXBvcnQgeyBfZWFjaCB9IGZyb20gJy4vdXRpbHMnXG5pbXBvcnQgeyBQcm9wZXJ0aWVzLCBRdWV1ZWRSZXF1ZXN0RGF0YSwgWEhST3B0aW9ucyB9IGZyb20gJy4vdHlwZXMnXG5cbmltcG9ydCB7IF9pc1VuZGVmaW5lZCB9IGZyb20gJy4vdXRpbHMvdHlwZS11dGlscydcblxuZXhwb3J0IGNsYXNzIFJlcXVlc3RRdWV1ZSBleHRlbmRzIFJlcXVlc3RRdWV1ZVNjYWZmb2xkIHtcbiAgICBoYW5kbGVQb2xsUmVxdWVzdDogKHVybDogc3RyaW5nLCBkYXRhOiBQcm9wZXJ0aWVzLCBvcHRpb25zPzogWEhST3B0aW9ucykgPT4gdm9pZFxuXG4gICAgY29uc3RydWN0b3IoaGFuZGxlUG9sbFJlcXVlc3Q6ICh1cmw6IHN0cmluZywgZGF0YTogUHJvcGVydGllcywgb3B0aW9ucz86IFhIUk9wdGlvbnMpID0+IHZvaWQsIHBvbGxJbnRlcnZhbCA9IDMwMDApIHtcbiAgICAgICAgc3VwZXIocG9sbEludGVydmFsKVxuICAgICAgICB0aGlzLmhhbmRsZVBvbGxSZXF1ZXN0ID0gaGFuZGxlUG9sbFJlcXVlc3RcbiAgICB9XG5cbiAgICBlbnF1ZXVlKHVybDogc3RyaW5nLCBkYXRhOiBQcm9wZXJ0aWVzLCBvcHRpb25zOiBYSFJPcHRpb25zKTogdm9pZCB7XG4gICAgICAgIHRoaXMuX2V2ZW50X3F1ZXVlLnB1c2goeyB1cmwsIGRhdGEsIG9wdGlvbnMgfSlcblxuICAgICAgICBpZiAoIXRoaXMuaXNQb2xsaW5nKSB7XG4gICAgICAgICAgICB0aGlzLmlzUG9sbGluZyA9IHRydWVcbiAgICAgICAgICAgIHRoaXMucG9sbCgpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwb2xsKCk6IHZvaWQge1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5fcG9sbGVyKVxuICAgICAgICB0aGlzLl9wb2xsZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9ldmVudF9xdWV1ZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVxdWVzdHMgPSB0aGlzLmZvcm1hdFF1ZXVlKClcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiByZXF1ZXN0cykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IHVybCwgZGF0YSwgb3B0aW9ucyB9ID0gcmVxdWVzdHNba2V5XVxuICAgICAgICAgICAgICAgICAgICBfZWFjaChkYXRhLCAoXywgZGF0YUtleSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVtkYXRhS2V5XVsnb2Zmc2V0J10gPSBNYXRoLmFicyhkYXRhW2RhdGFLZXldWyd0aW1lc3RhbXAnXSAtIHRoaXMuZ2V0VGltZSgpKVxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGRhdGFbZGF0YUtleV1bJ3RpbWVzdGFtcCddXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlUG9sbFJlcXVlc3QodXJsLCBkYXRhLCBvcHRpb25zKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLl9ldmVudF9xdWV1ZS5sZW5ndGggPSAwIC8vIGZsdXNoIHRoZSBfZXZlbnRfcXVldWVcbiAgICAgICAgICAgICAgICB0aGlzLl9lbXB0eV9xdWV1ZV9jb3VudCA9IDBcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fZW1wdHlfcXVldWVfY291bnQrK1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIF9lbXB0eV9xdWV1ZV9jb3VudCB3aWxsIGluY3JlbWVudCBlYWNoIHRpbWUgdGhlIHF1ZXVlIGlzIHBvbGxlZFxuICAgICAgICAgICAgICogIGFuZCBpdCBpcyBlbXB0eS4gVG8gYXZvaWQgZW1wdHkgcG9sbGluZyAodXNlciB3ZW50IGlkbGUsIHN0ZXBwZWQgYXdheSBmcm9tIGNvbXApXG4gICAgICAgICAgICAgKiAgd2UgY2FuIHR1cm4gaXQgb2ZmIHdpdGggdGhlIGlzUG9sbGluZyBmbGFnLlxuICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAqIFBvbGxpbmcgd2lsbCBiZSByZSBlbmFibGVkIHdoZW4gdGhlIG5leHQgdGltZSBQb3N0SG9nTGliLmNhcHR1cmUgaXMgY2FsbGVkIHdpdGhcbiAgICAgICAgICAgICAqICBhbiBldmVudCB0aGF0IHNob3VsZCBiZSBhZGRlZCB0byB0aGUgZXZlbnQgcXVldWUuXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGlmICh0aGlzLl9lbXB0eV9xdWV1ZV9jb3VudCA+IDQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmlzUG9sbGluZyA9IGZhbHNlXG4gICAgICAgICAgICAgICAgdGhpcy5fZW1wdHlfcXVldWVfY291bnQgPSAwXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5pc1BvbGxpbmcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBvbGwoKVxuICAgICAgICAgICAgfVxuICAgICAgICB9LCB0aGlzLl9wb2xsSW50ZXJ2YWwpIGFzIGFueSBhcyBudW1iZXJcbiAgICB9XG5cbiAgICB1bmxvYWQoKTogdm9pZCB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLl9wb2xsZXIpXG4gICAgICAgIGNvbnN0IHJlcXVlc3RzID0gdGhpcy5fZXZlbnRfcXVldWUubGVuZ3RoID4gMCA/IHRoaXMuZm9ybWF0UXVldWUoKSA6IHt9XG4gICAgICAgIHRoaXMuX2V2ZW50X3F1ZXVlLmxlbmd0aCA9IDBcbiAgICAgICAgY29uc3QgcmVxdWVzdFZhbHVlcyA9IE9iamVjdC52YWx1ZXMocmVxdWVzdHMpXG5cbiAgICAgICAgLy8gQWx3YXlzIGZvcmNlIGV2ZW50cyB0byBiZSBzZW50IGJlZm9yZSByZWNvcmRpbmdzLCBhcyBldmVudHMgYXJlIG1vcmUgaW1wb3J0YW50LCBhbmQgcmVjb3JkaW5ncyBhcmUgYmlnZ2VyIGFuZCB0aHVzIGxlc3MgbGlrZWx5IHRvIGFycml2ZVxuICAgICAgICBjb25zdCBzb3J0ZWRSZXF1ZXN0cyA9IFtcbiAgICAgICAgICAgIC4uLnJlcXVlc3RWYWx1ZXMuZmlsdGVyKChyKSA9PiByLnVybC5pbmRleE9mKCcvZScpID09PSAwKSxcbiAgICAgICAgICAgIC4uLnJlcXVlc3RWYWx1ZXMuZmlsdGVyKChyKSA9PiByLnVybC5pbmRleE9mKCcvZScpICE9PSAwKSxcbiAgICAgICAgXVxuICAgICAgICBzb3J0ZWRSZXF1ZXN0cy5tYXAoKHsgdXJsLCBkYXRhLCBvcHRpb25zIH0pID0+IHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlUG9sbFJlcXVlc3QodXJsLCBkYXRhLCB7IC4uLm9wdGlvbnMsIHRyYW5zcG9ydDogJ3NlbmRCZWFjb24nIH0pXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgZm9ybWF0UXVldWUoKTogUmVjb3JkPHN0cmluZywgUXVldWVkUmVxdWVzdERhdGE+IHtcbiAgICAgICAgY29uc3QgcmVxdWVzdHM6IFJlY29yZDxzdHJpbmcsIFF1ZXVlZFJlcXVlc3REYXRhPiA9IHt9XG4gICAgICAgIF9lYWNoKHRoaXMuX2V2ZW50X3F1ZXVlLCAocmVxdWVzdCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgeyB1cmwsIGRhdGEsIG9wdGlvbnMgfSA9IHJlcXVlc3RcbiAgICAgICAgICAgIGNvbnN0IGtleSA9IChvcHRpb25zID8gb3B0aW9ucy5fYmF0Y2hLZXkgOiBudWxsKSB8fCB1cmxcbiAgICAgICAgICAgIGlmIChfaXNVbmRlZmluZWQocmVxdWVzdHNba2V5XSkpIHtcbiAgICAgICAgICAgICAgICByZXF1ZXN0c1trZXldID0geyBkYXRhOiBbXSwgdXJsLCBvcHRpb25zIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gOlRSSUNLWTogTWV0cmljcy1vbmx5IGNvZGVcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICBvcHRpb25zICYmXG4gICAgICAgICAgICAgICAgcmVxdWVzdHNba2V5XS5vcHRpb25zICYmXG4gICAgICAgICAgICAgICAgcmVxdWVzdHNba2V5XS5vcHRpb25zLl9tZXRyaWNzICYmXG4gICAgICAgICAgICAgICAgIShyZXF1ZXN0c1trZXldLm9wdGlvbnMuX21ldHJpY3MgYXMgYW55KVsncnJ3ZWJfZnVsbF9zbmFwc2hvdCddXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICA7KHJlcXVlc3RzW2tleV0ub3B0aW9ucy5fbWV0cmljcyBhcyBhbnkpWydycndlYl9mdWxsX3NuYXBzaG90J10gPVxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLl9tZXRyaWNzWydycndlYl9mdWxsX3NuYXBzaG90J11cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlcXVlc3RzW2tleV0uZGF0YS5wdXNoKGRhdGEpXG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiByZXF1ZXN0c1xuICAgIH1cbn1cbiIsICIvLyBERUZMQVRFIGlzIGEgY29tcGxleCBmb3JtYXQ7IHRvIHJlYWQgdGhpcyBjb2RlLCB5b3Ugc2hvdWxkIHByb2JhYmx5IGNoZWNrIHRoZSBSRkMgZmlyc3Q6XG4vLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMTk1MVxuLy8gWW91IG1heSBhbHNvIHdpc2ggdG8gdGFrZSBhIGxvb2sgYXQgdGhlIGd1aWRlIEkgbWFkZSBhYm91dCB0aGlzIHByb2dyYW06XG4vLyBodHRwczovL2dpc3QuZ2l0aHViLmNvbS8xMDFhcnJvd3ovMjUzZjMxZWI1YWJjM2Q5Mjc1YWI5NDMwMDNmZmVjYWRcbi8vIE11Y2ggb2YgdGhlIGZvbGxvd2luZyBjb2RlIGlzIHNpbWlsYXIgdG8gdGhhdCBvZiBVWklQLmpzOlxuLy8gaHR0cHM6Ly9naXRodWIuY29tL3Bob3RvcGVhL1VaSVAuanNcbi8vIE1hbnkgb3B0aW1pemF0aW9ucyBoYXZlIGJlZW4gbWFkZSwgc28gdGhlIGJ1bmRsZSBzaXplIGlzIHVsdGltYXRlbHkgc21hbGxlciBidXQgcGVyZm9ybWFuY2UgaXMgc2ltaWxhci5cbi8vIFNvbWV0aW1lcyAwIHdpbGwgYXBwZWFyIHdoZXJlIC0xIHdvdWxkIGJlIG1vcmUgYXBwcm9wcmlhdGUuIFRoaXMgaXMgYmVjYXVzZSB1c2luZyBhIHVpbnRcbi8vIGlzIGJldHRlciBmb3IgbWVtb3J5IGluIG1vc3QgZW5naW5lcyAoSSAqdGhpbmsqKS5cbnZhciBjaDIgPSB7fTtcbnZhciB3ayA9IChmdW5jdGlvbiAoYywgaWQsIG1zZywgdHJhbnNmZXIsIGNiKSB7XG4gICAgdmFyIHUgPSBjaDJbaWRdIHx8IChjaDJbaWRdID0gVVJMLmNyZWF0ZU9iamVjdFVSTChuZXcgQmxvYihbY10sIHsgdHlwZTogJ3RleHQvamF2YXNjcmlwdCcgfSkpKTtcbiAgICB2YXIgdyA9IG5ldyBXb3JrZXIodSk7XG4gICAgdy5vbmVycm9yID0gZnVuY3Rpb24gKGUpIHsgcmV0dXJuIGNiKGUuZXJyb3IsIG51bGwpOyB9O1xuICAgIHcub25tZXNzYWdlID0gZnVuY3Rpb24gKGUpIHsgcmV0dXJuIGNiKG51bGwsIGUuZGF0YSk7IH07XG4gICAgdy5wb3N0TWVzc2FnZShtc2csIHRyYW5zZmVyKTtcbiAgICByZXR1cm4gdztcbn0pO1xuXG4vLyBhbGlhc2VzIGZvciBzaG9ydGVyIGNvbXByZXNzZWQgY29kZSAobW9zdCBtaW5pZmVycyBkb24ndCBkbyB0aGlzKVxudmFyIHU4ID0gVWludDhBcnJheSwgdTE2ID0gVWludDE2QXJyYXksIHUzMiA9IFVpbnQzMkFycmF5O1xuLy8gZml4ZWQgbGVuZ3RoIGV4dHJhIGJpdHNcbnZhciBmbGViID0gbmV3IHU4KFswLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAxLCAxLCAxLCAxLCAyLCAyLCAyLCAyLCAzLCAzLCAzLCAzLCA0LCA0LCA0LCA0LCA1LCA1LCA1LCA1LCAwLCAvKiB1bnVzZWQgKi8gMCwgMCwgLyogaW1wb3NzaWJsZSAqLyAwXSk7XG4vLyBmaXhlZCBkaXN0YW5jZSBleHRyYSBiaXRzXG4vLyBzZWUgZmxlYiBub3RlXG52YXIgZmRlYiA9IG5ldyB1OChbMCwgMCwgMCwgMCwgMSwgMSwgMiwgMiwgMywgMywgNCwgNCwgNSwgNSwgNiwgNiwgNywgNywgOCwgOCwgOSwgOSwgMTAsIDEwLCAxMSwgMTEsIDEyLCAxMiwgMTMsIDEzLCAvKiB1bnVzZWQgKi8gMCwgMF0pO1xuLy8gY29kZSBsZW5ndGggaW5kZXggbWFwXG52YXIgY2xpbSA9IG5ldyB1OChbMTYsIDE3LCAxOCwgMCwgOCwgNywgOSwgNiwgMTAsIDUsIDExLCA0LCAxMiwgMywgMTMsIDIsIDE0LCAxLCAxNV0pO1xuLy8gZ2V0IGJhc2UsIHJldmVyc2UgaW5kZXggbWFwIGZyb20gZXh0cmEgYml0c1xudmFyIGZyZWIgPSBmdW5jdGlvbiAoZWIsIHN0YXJ0KSB7XG4gICAgdmFyIGIgPSBuZXcgdTE2KDMxKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IDMxOyArK2kpIHtcbiAgICAgICAgYltpXSA9IHN0YXJ0ICs9IDEgPDwgZWJbaSAtIDFdO1xuICAgIH1cbiAgICAvLyBudW1iZXJzIGhlcmUgYXJlIGF0IG1heCAxOCBiaXRzXG4gICAgdmFyIHIgPSBuZXcgdTMyKGJbMzBdKTtcbiAgICBmb3IgKHZhciBpID0gMTsgaSA8IDMwOyArK2kpIHtcbiAgICAgICAgZm9yICh2YXIgaiA9IGJbaV07IGogPCBiW2kgKyAxXTsgKytqKSB7XG4gICAgICAgICAgICByW2pdID0gKChqIC0gYltpXSkgPDwgNSkgfCBpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBbYiwgcl07XG59O1xudmFyIF9hID0gZnJlYihmbGViLCAyKSwgZmwgPSBfYVswXSwgcmV2ZmwgPSBfYVsxXTtcbi8vIHdlIGNhbiBpZ25vcmUgdGhlIGZhY3QgdGhhdCB0aGUgb3RoZXIgbnVtYmVycyBhcmUgd3Jvbmc7IHRoZXkgbmV2ZXIgaGFwcGVuIGFueXdheVxuZmxbMjhdID0gMjU4LCByZXZmbFsyNThdID0gMjg7XG52YXIgX2IgPSBmcmViKGZkZWIsIDApLCBmZCA9IF9iWzBdLCByZXZmZCA9IF9iWzFdO1xuLy8gbWFwIG9mIHZhbHVlIHRvIHJldmVyc2UgKGFzc3VtaW5nIDE2IGJpdHMpXG52YXIgcmV2ID0gbmV3IHUxNigzMjc2OCk7XG5mb3IgKHZhciBpID0gMDsgaSA8IDMyNzY4OyArK2kpIHtcbiAgICAvLyByZXZlcnNlIHRhYmxlIGFsZ29yaXRobSBmcm9tIFNPXG4gICAgdmFyIHggPSAoKGkgJiAweEFBQUEpID4+PiAxKSB8ICgoaSAmIDB4NTU1NSkgPDwgMSk7XG4gICAgeCA9ICgoeCAmIDB4Q0NDQykgPj4+IDIpIHwgKCh4ICYgMHgzMzMzKSA8PCAyKTtcbiAgICB4ID0gKCh4ICYgMHhGMEYwKSA+Pj4gNCkgfCAoKHggJiAweDBGMEYpIDw8IDQpO1xuICAgIHJldltpXSA9ICgoKHggJiAweEZGMDApID4+PiA4KSB8ICgoeCAmIDB4MDBGRikgPDwgOCkpID4+PiAxO1xufVxuLy8gY3JlYXRlIGh1ZmZtYW4gdHJlZSBmcm9tIHU4IFwibWFwXCI6IGluZGV4IC0+IGNvZGUgbGVuZ3RoIGZvciBjb2RlIGluZGV4XG4vLyBtYiAobWF4IGJpdHMpIG11c3QgYmUgYXQgbW9zdCAxNVxuLy8gVE9ETzogb3B0aW1pemUvc3BsaXQgdXA/XG52YXIgaE1hcCA9IChmdW5jdGlvbiAoY2QsIG1iLCByKSB7XG4gICAgdmFyIHMgPSBjZC5sZW5ndGg7XG4gICAgLy8gaW5kZXhcbiAgICB2YXIgaSA9IDA7XG4gICAgLy8gdTE2IFwibWFwXCI6IGluZGV4IC0+ICMgb2YgY29kZXMgd2l0aCBiaXQgbGVuZ3RoID0gaW5kZXhcbiAgICB2YXIgbCA9IG5ldyB1MTYobWIpO1xuICAgIC8vIGxlbmd0aCBvZiBjZCBtdXN0IGJlIDI4OCAodG90YWwgIyBvZiBjb2RlcylcbiAgICBmb3IgKDsgaSA8IHM7ICsraSlcbiAgICAgICAgKytsW2NkW2ldIC0gMV07XG4gICAgLy8gdTE2IFwibWFwXCI6IGluZGV4IC0+IG1pbmltdW0gY29kZSBmb3IgYml0IGxlbmd0aCA9IGluZGV4XG4gICAgdmFyIGxlID0gbmV3IHUxNihtYik7XG4gICAgZm9yIChpID0gMDsgaSA8IG1iOyArK2kpIHtcbiAgICAgICAgbGVbaV0gPSAobGVbaSAtIDFdICsgbFtpIC0gMV0pIDw8IDE7XG4gICAgfVxuICAgIHZhciBjbztcbiAgICBpZiAocikge1xuICAgICAgICAvLyB1MTYgXCJtYXBcIjogaW5kZXggLT4gbnVtYmVyIG9mIGFjdHVhbCBiaXRzLCBzeW1ib2wgZm9yIGNvZGVcbiAgICAgICAgY28gPSBuZXcgdTE2KDEgPDwgbWIpO1xuICAgICAgICAvLyBiaXRzIHRvIHJlbW92ZSBmb3IgcmV2ZXJzZXJcbiAgICAgICAgdmFyIHJ2YiA9IDE1IC0gbWI7XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBzOyArK2kpIHtcbiAgICAgICAgICAgIC8vIGlnbm9yZSAwIGxlbmd0aHNcbiAgICAgICAgICAgIGlmIChjZFtpXSkge1xuICAgICAgICAgICAgICAgIC8vIG51bSBlbmNvZGluZyBib3RoIHN5bWJvbCBhbmQgYml0cyByZWFkXG4gICAgICAgICAgICAgICAgdmFyIHN2ID0gKGkgPDwgNCkgfCBjZFtpXTtcbiAgICAgICAgICAgICAgICAvLyBmcmVlIGJpdHNcbiAgICAgICAgICAgICAgICB2YXIgcl8xID0gbWIgLSBjZFtpXTtcbiAgICAgICAgICAgICAgICAvLyBzdGFydCB2YWx1ZVxuICAgICAgICAgICAgICAgIHZhciB2ID0gbGVbY2RbaV0gLSAxXSsrIDw8IHJfMTtcbiAgICAgICAgICAgICAgICAvLyBtIGlzIGVuZCB2YWx1ZVxuICAgICAgICAgICAgICAgIGZvciAodmFyIG0gPSB2IHwgKCgxIDw8IHJfMSkgLSAxKTsgdiA8PSBtOyArK3YpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gZXZlcnkgMTYgYml0IHZhbHVlIHN0YXJ0aW5nIHdpdGggdGhlIGNvZGUgeWllbGRzIHRoZSBzYW1lIHJlc3VsdFxuICAgICAgICAgICAgICAgICAgICBjb1tyZXZbdl0gPj4+IHJ2Yl0gPSBzdjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvID0gbmV3IHUxNihzKTtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IHM7ICsraSlcbiAgICAgICAgICAgIGNvW2ldID0gcmV2W2xlW2NkW2ldIC0gMV0rK10gPj4+ICgxNSAtIGNkW2ldKTtcbiAgICB9XG4gICAgcmV0dXJuIGNvO1xufSk7XG4vLyBmaXhlZCBsZW5ndGggdHJlZVxudmFyIGZsdCA9IG5ldyB1OCgyODgpO1xuZm9yICh2YXIgaSA9IDA7IGkgPCAxNDQ7ICsraSlcbiAgICBmbHRbaV0gPSA4O1xuZm9yICh2YXIgaSA9IDE0NDsgaSA8IDI1NjsgKytpKVxuICAgIGZsdFtpXSA9IDk7XG5mb3IgKHZhciBpID0gMjU2OyBpIDwgMjgwOyArK2kpXG4gICAgZmx0W2ldID0gNztcbmZvciAodmFyIGkgPSAyODA7IGkgPCAyODg7ICsraSlcbiAgICBmbHRbaV0gPSA4O1xuLy8gZml4ZWQgZGlzdGFuY2UgdHJlZVxudmFyIGZkdCA9IG5ldyB1OCgzMik7XG5mb3IgKHZhciBpID0gMDsgaSA8IDMyOyArK2kpXG4gICAgZmR0W2ldID0gNTtcbi8vIGZpeGVkIGxlbmd0aCBtYXBcbnZhciBmbG0gPSAvKiNfX1BVUkVfXyovIGhNYXAoZmx0LCA5LCAwKSwgZmxybSA9IC8qI19fUFVSRV9fKi8gaE1hcChmbHQsIDksIDEpO1xuLy8gZml4ZWQgZGlzdGFuY2UgbWFwXG52YXIgZmRtID0gLyojX19QVVJFX18qLyBoTWFwKGZkdCwgNSwgMCksIGZkcm0gPSAvKiNfX1BVUkVfXyovIGhNYXAoZmR0LCA1LCAxKTtcbi8vIGZpbmQgbWF4IG9mIGFycmF5XG52YXIgbWF4ID0gZnVuY3Rpb24gKGEpIHtcbiAgICB2YXIgbSA9IGFbMF07XG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIGlmIChhW2ldID4gbSlcbiAgICAgICAgICAgIG0gPSBhW2ldO1xuICAgIH1cbiAgICByZXR1cm4gbTtcbn07XG4vLyByZWFkIGQsIHN0YXJ0aW5nIGF0IGJpdCBwIGFuZCBtYXNrIHdpdGggbVxudmFyIGJpdHMgPSBmdW5jdGlvbiAoZCwgcCwgbSkge1xuICAgIHZhciBvID0gKHAgLyA4KSA+PiAwO1xuICAgIHJldHVybiAoKGRbb10gfCAoZFtvICsgMV0gPDwgOCkpID4+PiAocCAmIDcpKSAmIG07XG59O1xuLy8gcmVhZCBkLCBzdGFydGluZyBhdCBiaXQgcCBjb250aW51aW5nIGZvciBhdCBsZWFzdCAxNiBiaXRzXG52YXIgYml0czE2ID0gZnVuY3Rpb24gKGQsIHApIHtcbiAgICB2YXIgbyA9IChwIC8gOCkgPj4gMDtcbiAgICByZXR1cm4gKChkW29dIHwgKGRbbyArIDFdIDw8IDgpIHwgKGRbbyArIDJdIDw8IDE2KSkgPj4+IChwICYgNykpO1xufTtcbi8vIGdldCBlbmQgb2YgYnl0ZVxudmFyIHNoZnQgPSBmdW5jdGlvbiAocCkgeyByZXR1cm4gKChwIC8gOCkgPj4gMCkgKyAocCAmIDcgJiYgMSk7IH07XG4vLyB0eXBlZCBhcnJheSBzbGljZSAtIGFsbG93cyBnYXJiYWdlIGNvbGxlY3RvciB0byBmcmVlIG9yaWdpbmFsIHJlZmVyZW5jZSxcbi8vIHdoaWxlIGJlaW5nIG1vcmUgY29tcGF0aWJsZSB0aGFuIC5zbGljZVxudmFyIHNsYyA9IGZ1bmN0aW9uICh2LCBzLCBlKSB7XG4gICAgaWYgKHMgPT0gbnVsbCB8fCBzIDwgMClcbiAgICAgICAgcyA9IDA7XG4gICAgaWYgKGUgPT0gbnVsbCB8fCBlID4gdi5sZW5ndGgpXG4gICAgICAgIGUgPSB2Lmxlbmd0aDtcbiAgICAvLyBjYW4ndCB1c2UgLmNvbnN0cnVjdG9yIGluIGNhc2UgdXNlci1zdXBwbGllZFxuICAgIHZhciBuID0gbmV3ICh2IGluc3RhbmNlb2YgdTE2ID8gdTE2IDogdiBpbnN0YW5jZW9mIHUzMiA/IHUzMiA6IHU4KShlIC0gcyk7XG4gICAgbi5zZXQodi5zdWJhcnJheShzLCBlKSk7XG4gICAgcmV0dXJuIG47XG59O1xuLy8gZXhwYW5kcyByYXcgREVGTEFURSBkYXRhXG52YXIgaW5mbHQgPSBmdW5jdGlvbiAoZGF0LCBidWYsIHN0KSB7XG4gICAgLy8gc291cmNlIGxlbmd0aFxuICAgIHZhciBzbCA9IGRhdC5sZW5ndGg7XG4gICAgLy8gaGF2ZSB0byBlc3RpbWF0ZSBzaXplXG4gICAgdmFyIG5vQnVmID0gIWJ1ZiB8fCBzdDtcbiAgICAvLyBubyBzdGF0ZVxuICAgIHZhciBub1N0ID0gIXN0IHx8IHN0Lmk7XG4gICAgaWYgKCFzdClcbiAgICAgICAgc3QgPSB7fTtcbiAgICAvLyBBc3N1bWVzIHJvdWdobHkgMzMlIGNvbXByZXNzaW9uIHJhdGlvIGF2ZXJhZ2VcbiAgICBpZiAoIWJ1ZilcbiAgICAgICAgYnVmID0gbmV3IHU4KHNsICogMyk7XG4gICAgLy8gZW5zdXJlIGJ1ZmZlciBjYW4gZml0IGF0IGxlYXN0IGwgZWxlbWVudHNcbiAgICB2YXIgY2J1ZiA9IGZ1bmN0aW9uIChsKSB7XG4gICAgICAgIHZhciBibCA9IGJ1Zi5sZW5ndGg7XG4gICAgICAgIC8vIG5lZWQgdG8gaW5jcmVhc2Ugc2l6ZSB0byBmaXRcbiAgICAgICAgaWYgKGwgPiBibCkge1xuICAgICAgICAgICAgLy8gRG91YmxlIG9yIHNldCB0byBuZWNlc3NhcnksIHdoaWNoZXZlciBpcyBncmVhdGVyXG4gICAgICAgICAgICB2YXIgbmJ1ZiA9IG5ldyB1OChNYXRoLm1heChibCAqIDIsIGwpKTtcbiAgICAgICAgICAgIG5idWYuc2V0KGJ1Zik7XG4gICAgICAgICAgICBidWYgPSBuYnVmO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvLyAgbGFzdCBjaHVuayAgICAgICAgIGJpdHBvcyAgICAgICAgICAgYnl0ZXNcbiAgICB2YXIgZmluYWwgPSBzdC5mIHx8IDAsIHBvcyA9IHN0LnAgfHwgMCwgYnQgPSBzdC5iIHx8IDAsIGxtID0gc3QubCwgZG0gPSBzdC5kLCBsYnQgPSBzdC5tLCBkYnQgPSBzdC5uO1xuICAgIC8vIHRvdGFsIGJpdHNcbiAgICB2YXIgdGJ0cyA9IHNsICogODtcbiAgICBkbyB7XG4gICAgICAgIGlmICghbG0pIHtcbiAgICAgICAgICAgIC8vIEJGSU5BTCAtIHRoaXMgaXMgb25seSAxIHdoZW4gbGFzdCBjaHVuayBpcyBuZXh0XG4gICAgICAgICAgICBzdC5mID0gZmluYWwgPSBiaXRzKGRhdCwgcG9zLCAxKTtcbiAgICAgICAgICAgIC8vIHR5cGU6IDAgPSBubyBjb21wcmVzc2lvbiwgMSA9IGZpeGVkIGh1ZmZtYW4sIDIgPSBkeW5hbWljIGh1ZmZtYW5cbiAgICAgICAgICAgIHZhciB0eXBlID0gYml0cyhkYXQsIHBvcyArIDEsIDMpO1xuICAgICAgICAgICAgcG9zICs9IDM7XG4gICAgICAgICAgICBpZiAoIXR5cGUpIHtcbiAgICAgICAgICAgICAgICAvLyBnbyB0byBlbmQgb2YgYnl0ZSBib3VuZGFyeVxuICAgICAgICAgICAgICAgIHZhciBzID0gc2hmdChwb3MpICsgNCwgbCA9IGRhdFtzIC0gNF0gfCAoZGF0W3MgLSAzXSA8PCA4KSwgdCA9IHMgKyBsO1xuICAgICAgICAgICAgICAgIGlmICh0ID4gc2wpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5vU3QpXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyAndW5leHBlY3RlZCBFT0YnO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gZW5zdXJlIHNpemVcbiAgICAgICAgICAgICAgICBpZiAobm9CdWYpXG4gICAgICAgICAgICAgICAgICAgIGNidWYoYnQgKyBsKTtcbiAgICAgICAgICAgICAgICAvLyBDb3B5IG92ZXIgdW5jb21wcmVzc2VkIGRhdGFcbiAgICAgICAgICAgICAgICBidWYuc2V0KGRhdC5zdWJhcnJheShzLCB0KSwgYnQpO1xuICAgICAgICAgICAgICAgIC8vIEdldCBuZXcgYml0cG9zLCB1cGRhdGUgYnl0ZSBjb3VudFxuICAgICAgICAgICAgICAgIHN0LmIgPSBidCArPSBsLCBzdC5wID0gcG9zID0gdCAqIDg7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlID09IDEpXG4gICAgICAgICAgICAgICAgbG0gPSBmbHJtLCBkbSA9IGZkcm0sIGxidCA9IDksIGRidCA9IDU7XG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlID09IDIpIHtcbiAgICAgICAgICAgICAgICAvLyAgbGl0ZXJhbCAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZW5ndGhzXG4gICAgICAgICAgICAgICAgdmFyIGhMaXQgPSBiaXRzKGRhdCwgcG9zLCAzMSkgKyAyNTcsIGhjTGVuID0gYml0cyhkYXQsIHBvcyArIDEwLCAxNSkgKyA0O1xuICAgICAgICAgICAgICAgIHZhciB0bCA9IGhMaXQgKyBiaXRzKGRhdCwgcG9zICsgNSwgMzEpICsgMTtcbiAgICAgICAgICAgICAgICBwb3MgKz0gMTQ7XG4gICAgICAgICAgICAgICAgLy8gbGVuZ3RoK2Rpc3RhbmNlIHRyZWVcbiAgICAgICAgICAgICAgICB2YXIgbGR0ID0gbmV3IHU4KHRsKTtcbiAgICAgICAgICAgICAgICAvLyBjb2RlIGxlbmd0aCB0cmVlXG4gICAgICAgICAgICAgICAgdmFyIGNsdCA9IG5ldyB1OCgxOSk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBoY0xlbjsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHVzZSBpbmRleCBtYXAgdG8gZ2V0IHJlYWwgY29kZVxuICAgICAgICAgICAgICAgICAgICBjbHRbY2xpbVtpXV0gPSBiaXRzKGRhdCwgcG9zICsgaSAqIDMsIDcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwb3MgKz0gaGNMZW4gKiAzO1xuICAgICAgICAgICAgICAgIC8vIGNvZGUgbGVuZ3RocyBiaXRzXG4gICAgICAgICAgICAgICAgdmFyIGNsYiA9IG1heChjbHQpLCBjbGJtc2sgPSAoMSA8PCBjbGIpIC0gMTtcbiAgICAgICAgICAgICAgICBpZiAoIW5vU3QgJiYgcG9zICsgdGwgKiAoY2xiICsgNykgPiB0YnRzKVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAvLyBjb2RlIGxlbmd0aHMgbWFwXG4gICAgICAgICAgICAgICAgdmFyIGNsbSA9IGhNYXAoY2x0LCBjbGIsIDEpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGw7KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByID0gY2xtW2JpdHMoZGF0LCBwb3MsIGNsYm1zayldO1xuICAgICAgICAgICAgICAgICAgICAvLyBiaXRzIHJlYWRcbiAgICAgICAgICAgICAgICAgICAgcG9zICs9IHIgJiAxNTtcbiAgICAgICAgICAgICAgICAgICAgLy8gc3ltYm9sXG4gICAgICAgICAgICAgICAgICAgIHZhciBzID0gciA+Pj4gNDtcbiAgICAgICAgICAgICAgICAgICAgLy8gY29kZSBsZW5ndGggdG8gY29weVxuICAgICAgICAgICAgICAgICAgICBpZiAocyA8IDE2KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZHRbaSsrXSA9IHM7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgY29weSAgIGNvdW50XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IDAsIG4gPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHMgPT0gMTYpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IDMgKyBiaXRzKGRhdCwgcG9zLCAzKSwgcG9zICs9IDIsIGMgPSBsZHRbaSAtIDFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAocyA9PSAxNylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gMyArIGJpdHMoZGF0LCBwb3MsIDcpLCBwb3MgKz0gMztcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHMgPT0gMTgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IDExICsgYml0cyhkYXQsIHBvcywgMTI3KSwgcG9zICs9IDc7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAobi0tKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxkdFtpKytdID0gYztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyAgICBsZW5ndGggdHJlZSAgICAgICAgICAgICAgICAgZGlzdGFuY2UgdHJlZVxuICAgICAgICAgICAgICAgIHZhciBsdCA9IGxkdC5zdWJhcnJheSgwLCBoTGl0KSwgZHQgPSBsZHQuc3ViYXJyYXkoaExpdCk7XG4gICAgICAgICAgICAgICAgLy8gbWF4IGxlbmd0aCBiaXRzXG4gICAgICAgICAgICAgICAgbGJ0ID0gbWF4KGx0KTtcbiAgICAgICAgICAgICAgICAvLyBtYXggZGlzdCBiaXRzXG4gICAgICAgICAgICAgICAgZGJ0ID0gbWF4KGR0KTtcbiAgICAgICAgICAgICAgICBsbSA9IGhNYXAobHQsIGxidCwgMSk7XG4gICAgICAgICAgICAgICAgZG0gPSBoTWFwKGR0LCBkYnQsIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHRocm93ICdpbnZhbGlkIGJsb2NrIHR5cGUnO1xuICAgICAgICAgICAgaWYgKHBvcyA+IHRidHMpXG4gICAgICAgICAgICAgICAgdGhyb3cgJ3VuZXhwZWN0ZWQgRU9GJztcbiAgICAgICAgfVxuICAgICAgICAvLyBNYWtlIHN1cmUgdGhlIGJ1ZmZlciBjYW4gaG9sZCB0aGlzICsgdGhlIGxhcmdlc3QgcG9zc2libGUgYWRkaXRpb25cbiAgICAgICAgLy8gTWF4aW11bSBjaHVuayBzaXplIChwcmFjdGljYWxseSwgdGhlb3JldGljYWxseSBpbmZpbml0ZSkgaXMgMl4xNztcbiAgICAgICAgaWYgKG5vQnVmKVxuICAgICAgICAgICAgY2J1ZihidCArIDEzMTA3Mik7XG4gICAgICAgIHZhciBsbXMgPSAoMSA8PCBsYnQpIC0gMSwgZG1zID0gKDEgPDwgZGJ0KSAtIDE7XG4gICAgICAgIHZhciBteGEgPSBsYnQgKyBkYnQgKyAxODtcbiAgICAgICAgd2hpbGUgKG5vU3QgfHwgcG9zICsgbXhhIDwgdGJ0cykge1xuICAgICAgICAgICAgLy8gYml0cyByZWFkLCBjb2RlXG4gICAgICAgICAgICB2YXIgYyA9IGxtW2JpdHMxNihkYXQsIHBvcykgJiBsbXNdLCBzeW0gPSBjID4+PiA0O1xuICAgICAgICAgICAgcG9zICs9IGMgJiAxNTtcbiAgICAgICAgICAgIGlmIChwb3MgPiB0YnRzKVxuICAgICAgICAgICAgICAgIHRocm93ICd1bmV4cGVjdGVkIEVPRic7XG4gICAgICAgICAgICBpZiAoIWMpXG4gICAgICAgICAgICAgICAgdGhyb3cgJ2ludmFsaWQgbGVuZ3RoL2xpdGVyYWwnO1xuICAgICAgICAgICAgaWYgKHN5bSA8IDI1NilcbiAgICAgICAgICAgICAgICBidWZbYnQrK10gPSBzeW07XG4gICAgICAgICAgICBlbHNlIGlmIChzeW0gPT0gMjU2KSB7XG4gICAgICAgICAgICAgICAgbG0gPSBudWxsO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIGFkZCA9IHN5bSAtIDI1NDtcbiAgICAgICAgICAgICAgICAvLyBubyBleHRyYSBiaXRzIG5lZWRlZCBpZiBsZXNzXG4gICAgICAgICAgICAgICAgaWYgKHN5bSA+IDI2NCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBpbmRleFxuICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IHN5bSAtIDI1NywgYiA9IGZsZWJbaV07XG4gICAgICAgICAgICAgICAgICAgIGFkZCA9IGJpdHMoZGF0LCBwb3MsICgxIDw8IGIpIC0gMSkgKyBmbFtpXTtcbiAgICAgICAgICAgICAgICAgICAgcG9zICs9IGI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIGRpc3RcbiAgICAgICAgICAgICAgICB2YXIgZCA9IGRtW2JpdHMxNihkYXQsIHBvcykgJiBkbXNdLCBkc3ltID0gZCA+Pj4gNDtcbiAgICAgICAgICAgICAgICBpZiAoIWQpXG4gICAgICAgICAgICAgICAgICAgIHRocm93ICdpbnZhbGlkIGRpc3RhbmNlJztcbiAgICAgICAgICAgICAgICBwb3MgKz0gZCAmIDE1O1xuICAgICAgICAgICAgICAgIHZhciBkdCA9IGZkW2RzeW1dO1xuICAgICAgICAgICAgICAgIGlmIChkc3ltID4gMykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgYiA9IGZkZWJbZHN5bV07XG4gICAgICAgICAgICAgICAgICAgIGR0ICs9IGJpdHMxNihkYXQsIHBvcykgJiAoKDEgPDwgYikgLSAxKSwgcG9zICs9IGI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChwb3MgPiB0YnRzKVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyAndW5leHBlY3RlZCBFT0YnO1xuICAgICAgICAgICAgICAgIGlmIChub0J1ZilcbiAgICAgICAgICAgICAgICAgICAgY2J1ZihidCArIDEzMTA3Mik7XG4gICAgICAgICAgICAgICAgdmFyIGVuZCA9IGJ0ICsgYWRkO1xuICAgICAgICAgICAgICAgIGZvciAoOyBidCA8IGVuZDsgYnQgKz0gNCkge1xuICAgICAgICAgICAgICAgICAgICBidWZbYnRdID0gYnVmW2J0IC0gZHRdO1xuICAgICAgICAgICAgICAgICAgICBidWZbYnQgKyAxXSA9IGJ1ZltidCArIDEgLSBkdF07XG4gICAgICAgICAgICAgICAgICAgIGJ1ZltidCArIDJdID0gYnVmW2J0ICsgMiAtIGR0XTtcbiAgICAgICAgICAgICAgICAgICAgYnVmW2J0ICsgM10gPSBidWZbYnQgKyAzIC0gZHRdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBidCA9IGVuZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzdC5sID0gbG0sIHN0LnAgPSBwb3MsIHN0LmIgPSBidDtcbiAgICAgICAgaWYgKGxtKVxuICAgICAgICAgICAgZmluYWwgPSAxLCBzdC5tID0gbGJ0LCBzdC5kID0gZG0sIHN0Lm4gPSBkYnQ7XG4gICAgfSB3aGlsZSAoIWZpbmFsKTtcbiAgICByZXR1cm4gYnQgPT0gYnVmLmxlbmd0aCA/IGJ1ZiA6IHNsYyhidWYsIDAsIGJ0KTtcbn07XG4vLyBzdGFydGluZyBhdCBwLCB3cml0ZSB0aGUgbWluaW11bSBudW1iZXIgb2YgYml0cyB0aGF0IGNhbiBob2xkIHYgdG8gZFxudmFyIHdiaXRzID0gZnVuY3Rpb24gKGQsIHAsIHYpIHtcbiAgICB2IDw8PSBwICYgNztcbiAgICB2YXIgbyA9IChwIC8gOCkgPj4gMDtcbiAgICBkW29dIHw9IHY7XG4gICAgZFtvICsgMV0gfD0gdiA+Pj4gODtcbn07XG4vLyBzdGFydGluZyBhdCBwLCB3cml0ZSB0aGUgbWluaW11bSBudW1iZXIgb2YgYml0cyAoPjgpIHRoYXQgY2FuIGhvbGQgdiB0byBkXG52YXIgd2JpdHMxNiA9IGZ1bmN0aW9uIChkLCBwLCB2KSB7XG4gICAgdiA8PD0gcCAmIDc7XG4gICAgdmFyIG8gPSAocCAvIDgpID4+IDA7XG4gICAgZFtvXSB8PSB2O1xuICAgIGRbbyArIDFdIHw9IHYgPj4+IDg7XG4gICAgZFtvICsgMl0gfD0gdiA+Pj4gMTY7XG59O1xuLy8gY3JlYXRlcyBjb2RlIGxlbmd0aHMgZnJvbSBhIGZyZXF1ZW5jeSB0YWJsZVxudmFyIGhUcmVlID0gZnVuY3Rpb24gKGQsIG1iKSB7XG4gICAgLy8gTmVlZCBleHRyYSBpbmZvIHRvIG1ha2UgYSB0cmVlXG4gICAgdmFyIHQgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGQubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgaWYgKGRbaV0pXG4gICAgICAgICAgICB0LnB1c2goeyBzOiBpLCBmOiBkW2ldIH0pO1xuICAgIH1cbiAgICB2YXIgcyA9IHQubGVuZ3RoO1xuICAgIHZhciB0MiA9IHQuc2xpY2UoKTtcbiAgICBpZiAoIXMpXG4gICAgICAgIHJldHVybiBbbmV3IHU4KDApLCAwXTtcbiAgICBpZiAocyA9PSAxKSB7XG4gICAgICAgIHZhciB2ID0gbmV3IHU4KHRbMF0ucyArIDEpO1xuICAgICAgICB2W3RbMF0uc10gPSAxO1xuICAgICAgICByZXR1cm4gW3YsIDFdO1xuICAgIH1cbiAgICB0LnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsgcmV0dXJuIGEuZiAtIGIuZjsgfSk7XG4gICAgLy8gYWZ0ZXIgaTIgcmVhY2hlcyBsYXN0IGluZCwgd2lsbCBiZSBzdG9wcGVkXG4gICAgLy8gZnJlcSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiBsYXJnZXN0IHBvc3NpYmxlIG51bWJlciBvZiBzeW1ib2xzXG4gICAgdC5wdXNoKHsgczogLTEsIGY6IDI1MDAxIH0pO1xuICAgIHZhciBsID0gdFswXSwgciA9IHRbMV0sIGkwID0gMCwgaTEgPSAxLCBpMiA9IDI7XG4gICAgdFswXSA9IHsgczogLTEsIGY6IGwuZiArIHIuZiwgbDogbCwgcjogciB9O1xuICAgIC8vIGVmZmljaWVudCBhbGdvcml0aG0gZnJvbSBVWklQLmpzXG4gICAgLy8gaTAgaXMgbG9va2JlaGluZCwgaTIgaXMgbG9va2FoZWFkIC0gYWZ0ZXIgcHJvY2Vzc2luZyB0d28gbG93LWZyZXFcbiAgICAvLyBzeW1ib2xzIHRoYXQgY29tYmluZWQgaGF2ZSBoaWdoIGZyZXEsIHdpbGwgc3RhcnQgcHJvY2Vzc2luZyBpMiAoaGlnaC1mcmVxLFxuICAgIC8vIG5vbi1jb21wb3NpdGUpIHN5bWJvbHMgaW5zdGVhZFxuICAgIC8vIHNlZSBodHRwczovL3JlZGRpdC5jb20vci9waG90b3BlYS9jb21tZW50cy9pa2VraHQvdXppcGpzX3F1ZXN0aW9ucy9cbiAgICB3aGlsZSAoaTEgIT0gcyAtIDEpIHtcbiAgICAgICAgbCA9IHRbdFtpMF0uZiA8IHRbaTJdLmYgPyBpMCsrIDogaTIrK107XG4gICAgICAgIHIgPSB0W2kwICE9IGkxICYmIHRbaTBdLmYgPCB0W2kyXS5mID8gaTArKyA6IGkyKytdO1xuICAgICAgICB0W2kxKytdID0geyBzOiAtMSwgZjogbC5mICsgci5mLCBsOiBsLCByOiByIH07XG4gICAgfVxuICAgIHZhciBtYXhTeW0gPSB0MlswXS5zO1xuICAgIGZvciAodmFyIGkgPSAxOyBpIDwgczsgKytpKSB7XG4gICAgICAgIGlmICh0MltpXS5zID4gbWF4U3ltKVxuICAgICAgICAgICAgbWF4U3ltID0gdDJbaV0ucztcbiAgICB9XG4gICAgLy8gY29kZSBsZW5ndGhzXG4gICAgdmFyIHRyID0gbmV3IHUxNihtYXhTeW0gKyAxKTtcbiAgICAvLyBtYXggYml0cyBpbiB0cmVlXG4gICAgdmFyIG1idCA9IGxuKHRbaTEgLSAxXSwgdHIsIDApO1xuICAgIGlmIChtYnQgPiBtYikge1xuICAgICAgICAvLyBtb3JlIGFsZ29yaXRobXMgZnJvbSBVWklQLmpzXG4gICAgICAgIC8vIFRPRE86IGZpbmQgb3V0IGhvdyB0aGlzIGNvZGUgd29ya3MgKGRlYnQpXG4gICAgICAgIC8vICBpbmQgICAgZGVidFxuICAgICAgICB2YXIgaSA9IDAsIGR0ID0gMDtcbiAgICAgICAgLy8gICAgbGVmdCAgICAgICAgICAgIGNvc3RcbiAgICAgICAgdmFyIGxmdCA9IG1idCAtIG1iLCBjc3QgPSAxIDw8IGxmdDtcbiAgICAgICAgdDIuc29ydChmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gdHJbYi5zXSAtIHRyW2Euc10gfHwgYS5mIC0gYi5mOyB9KTtcbiAgICAgICAgZm9yICg7IGkgPCBzOyArK2kpIHtcbiAgICAgICAgICAgIHZhciBpMl8xID0gdDJbaV0ucztcbiAgICAgICAgICAgIGlmICh0cltpMl8xXSA+IG1iKSB7XG4gICAgICAgICAgICAgICAgZHQgKz0gY3N0IC0gKDEgPDwgKG1idCAtIHRyW2kyXzFdKSk7XG4gICAgICAgICAgICAgICAgdHJbaTJfMV0gPSBtYjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBkdCA+Pj49IGxmdDtcbiAgICAgICAgd2hpbGUgKGR0ID4gMCkge1xuICAgICAgICAgICAgdmFyIGkyXzIgPSB0MltpXS5zO1xuICAgICAgICAgICAgaWYgKHRyW2kyXzJdIDwgbWIpXG4gICAgICAgICAgICAgICAgZHQgLT0gMSA8PCAobWIgLSB0cltpMl8yXSsrIC0gMSk7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgKytpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoOyBpID49IDAgJiYgZHQ7IC0taSkge1xuICAgICAgICAgICAgdmFyIGkyXzMgPSB0MltpXS5zO1xuICAgICAgICAgICAgaWYgKHRyW2kyXzNdID09IG1iKSB7XG4gICAgICAgICAgICAgICAgLS10cltpMl8zXTtcbiAgICAgICAgICAgICAgICArK2R0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIG1idCA9IG1iO1xuICAgIH1cbiAgICByZXR1cm4gW25ldyB1OCh0ciksIG1idF07XG59O1xuLy8gZ2V0IHRoZSBtYXggbGVuZ3RoIGFuZCBhc3NpZ24gbGVuZ3RoIGNvZGVzXG52YXIgbG4gPSBmdW5jdGlvbiAobiwgbCwgZCkge1xuICAgIHJldHVybiBuLnMgPT0gLTFcbiAgICAgICAgPyBNYXRoLm1heChsbihuLmwsIGwsIGQgKyAxKSwgbG4obi5yLCBsLCBkICsgMSkpXG4gICAgICAgIDogKGxbbi5zXSA9IGQpO1xufTtcbi8vIGxlbmd0aCBjb2RlcyBnZW5lcmF0aW9uXG52YXIgbGMgPSBmdW5jdGlvbiAoYykge1xuICAgIHZhciBzID0gYy5sZW5ndGg7XG4gICAgLy8gTm90ZSB0aGF0IHRoZSBzZW1pY29sb24gd2FzIGludGVudGlvbmFsXG4gICAgd2hpbGUgKHMgJiYgIWNbLS1zXSlcbiAgICAgICAgO1xuICAgIHZhciBjbCA9IG5ldyB1MTYoKytzKTtcbiAgICAvLyAgaW5kICAgICAgbnVtICAgICAgICAgc3RyZWFrXG4gICAgdmFyIGNsaSA9IDAsIGNsbiA9IGNbMF0sIGNscyA9IDE7XG4gICAgdmFyIHcgPSBmdW5jdGlvbiAodikgeyBjbFtjbGkrK10gPSB2OyB9O1xuICAgIGZvciAodmFyIGkgPSAxOyBpIDw9IHM7ICsraSkge1xuICAgICAgICBpZiAoY1tpXSA9PSBjbG4gJiYgaSAhPSBzKVxuICAgICAgICAgICAgKytjbHM7XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKCFjbG4gJiYgY2xzID4gMikge1xuICAgICAgICAgICAgICAgIGZvciAoOyBjbHMgPiAxMzg7IGNscyAtPSAxMzgpXG4gICAgICAgICAgICAgICAgICAgIHcoMzI3NTQpO1xuICAgICAgICAgICAgICAgIGlmIChjbHMgPiAyKSB7XG4gICAgICAgICAgICAgICAgICAgIHcoY2xzID4gMTAgPyAoKGNscyAtIDExKSA8PCA1KSB8IDI4NjkwIDogKChjbHMgLSAzKSA8PCA1KSB8IDEyMzA1KTtcbiAgICAgICAgICAgICAgICAgICAgY2xzID0gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjbHMgPiAzKSB7XG4gICAgICAgICAgICAgICAgdyhjbG4pLCAtLWNscztcbiAgICAgICAgICAgICAgICBmb3IgKDsgY2xzID4gNjsgY2xzIC09IDYpXG4gICAgICAgICAgICAgICAgICAgIHcoODMwNCk7XG4gICAgICAgICAgICAgICAgaWYgKGNscyA+IDIpXG4gICAgICAgICAgICAgICAgICAgIHcoKChjbHMgLSAzKSA8PCA1KSB8IDgyMDgpLCBjbHMgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgd2hpbGUgKGNscy0tKVxuICAgICAgICAgICAgICAgIHcoY2xuKTtcbiAgICAgICAgICAgIGNscyA9IDE7XG4gICAgICAgICAgICBjbG4gPSBjW2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBbY2wuc3ViYXJyYXkoMCwgY2xpKSwgc107XG59O1xuLy8gY2FsY3VsYXRlIHRoZSBsZW5ndGggb2Ygb3V0cHV0IGZyb20gdHJlZSwgY29kZSBsZW5ndGhzXG52YXIgY2xlbiA9IGZ1bmN0aW9uIChjZiwgY2wpIHtcbiAgICB2YXIgbCA9IDA7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjbC5sZW5ndGg7ICsraSlcbiAgICAgICAgbCArPSBjZltpXSAqIGNsW2ldO1xuICAgIHJldHVybiBsO1xufTtcbi8vIHdyaXRlcyBhIGZpeGVkIGJsb2NrXG4vLyByZXR1cm5zIHRoZSBuZXcgYml0IHBvc1xudmFyIHdmYmxrID0gZnVuY3Rpb24gKG91dCwgcG9zLCBkYXQpIHtcbiAgICAvLyBubyBuZWVkIHRvIHdyaXRlIDAwIGFzIHR5cGU6IFR5cGVkQXJyYXkgZGVmYXVsdHMgdG8gMFxuICAgIHZhciBzID0gZGF0Lmxlbmd0aDtcbiAgICB2YXIgbyA9IHNoZnQocG9zICsgMik7XG4gICAgb3V0W29dID0gcyAmIDI1NTtcbiAgICBvdXRbbyArIDFdID0gcyA+Pj4gODtcbiAgICBvdXRbbyArIDJdID0gb3V0W29dIF4gMjU1O1xuICAgIG91dFtvICsgM10gPSBvdXRbbyArIDFdIF4gMjU1O1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgczsgKytpKVxuICAgICAgICBvdXRbbyArIGkgKyA0XSA9IGRhdFtpXTtcbiAgICByZXR1cm4gKG8gKyA0ICsgcykgKiA4O1xufTtcbi8vIHdyaXRlcyBhIGJsb2NrXG52YXIgd2JsayA9IGZ1bmN0aW9uIChkYXQsIG91dCwgZmluYWwsIHN5bXMsIGxmLCBkZiwgZWIsIGxpLCBicywgYmwsIHApIHtcbiAgICB3Yml0cyhvdXQsIHArKywgZmluYWwpO1xuICAgICsrbGZbMjU2XTtcbiAgICB2YXIgX2EgPSBoVHJlZShsZiwgMTUpLCBkbHQgPSBfYVswXSwgbWxiID0gX2FbMV07XG4gICAgdmFyIF9iID0gaFRyZWUoZGYsIDE1KSwgZGR0ID0gX2JbMF0sIG1kYiA9IF9iWzFdO1xuICAgIHZhciBfYyA9IGxjKGRsdCksIGxjbHQgPSBfY1swXSwgbmxjID0gX2NbMV07XG4gICAgdmFyIF9kID0gbGMoZGR0KSwgbGNkdCA9IF9kWzBdLCBuZGMgPSBfZFsxXTtcbiAgICB2YXIgbGNmcmVxID0gbmV3IHUxNigxOSk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsY2x0Lmxlbmd0aDsgKytpKVxuICAgICAgICBsY2ZyZXFbbGNsdFtpXSAmIDMxXSsrO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGNkdC5sZW5ndGg7ICsraSlcbiAgICAgICAgbGNmcmVxW2xjZHRbaV0gJiAzMV0rKztcbiAgICB2YXIgX2UgPSBoVHJlZShsY2ZyZXEsIDcpLCBsY3QgPSBfZVswXSwgbWxjYiA9IF9lWzFdO1xuICAgIHZhciBubGNjID0gMTk7XG4gICAgZm9yICg7IG5sY2MgPiA0ICYmICFsY3RbY2xpbVtubGNjIC0gMV1dOyAtLW5sY2MpXG4gICAgICAgIDtcbiAgICB2YXIgZmxlbiA9IChibCArIDUpIDw8IDM7XG4gICAgdmFyIGZ0bGVuID0gY2xlbihsZiwgZmx0KSArIGNsZW4oZGYsIGZkdCkgKyBlYjtcbiAgICB2YXIgZHRsZW4gPSBjbGVuKGxmLCBkbHQpICsgY2xlbihkZiwgZGR0KSArIGViICsgMTQgKyAzICogbmxjYyArIGNsZW4obGNmcmVxLCBsY3QpICsgKDIgKiBsY2ZyZXFbMTZdICsgMyAqIGxjZnJlcVsxN10gKyA3ICogbGNmcmVxWzE4XSk7XG4gICAgaWYgKGZsZW4gPD0gZnRsZW4gJiYgZmxlbiA8PSBkdGxlbilcbiAgICAgICAgcmV0dXJuIHdmYmxrKG91dCwgcCwgZGF0LnN1YmFycmF5KGJzLCBicyArIGJsKSk7XG4gICAgdmFyIGxtLCBsbCwgZG0sIGRsO1xuICAgIHdiaXRzKG91dCwgcCwgMSArIChkdGxlbiA8IGZ0bGVuKSksIHAgKz0gMjtcbiAgICBpZiAoZHRsZW4gPCBmdGxlbikge1xuICAgICAgICBsbSA9IGhNYXAoZGx0LCBtbGIsIDApLCBsbCA9IGRsdCwgZG0gPSBoTWFwKGRkdCwgbWRiLCAwKSwgZGwgPSBkZHQ7XG4gICAgICAgIHZhciBsbG0gPSBoTWFwKGxjdCwgbWxjYiwgMCk7XG4gICAgICAgIHdiaXRzKG91dCwgcCwgbmxjIC0gMjU3KTtcbiAgICAgICAgd2JpdHMob3V0LCBwICsgNSwgbmRjIC0gMSk7XG4gICAgICAgIHdiaXRzKG91dCwgcCArIDEwLCBubGNjIC0gNCk7XG4gICAgICAgIHAgKz0gMTQ7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbmxjYzsgKytpKVxuICAgICAgICAgICAgd2JpdHMob3V0LCBwICsgMyAqIGksIGxjdFtjbGltW2ldXSk7XG4gICAgICAgIHAgKz0gMyAqIG5sY2M7XG4gICAgICAgIHZhciBsY3RzID0gW2xjbHQsIGxjZHRdO1xuICAgICAgICBmb3IgKHZhciBpdCA9IDA7IGl0IDwgMjsgKytpdCkge1xuICAgICAgICAgICAgdmFyIGNsY3QgPSBsY3RzW2l0XTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2xjdC5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgIHZhciBsZW4gPSBjbGN0W2ldICYgMzE7XG4gICAgICAgICAgICAgICAgd2JpdHMob3V0LCBwLCBsbG1bbGVuXSksIHAgKz0gbGN0W2xlbl07XG4gICAgICAgICAgICAgICAgaWYgKGxlbiA+IDE1KVxuICAgICAgICAgICAgICAgICAgICB3Yml0cyhvdXQsIHAsIChjbGN0W2ldID4+PiA1KSAmIDEyNyksIHAgKz0gY2xjdFtpXSA+Pj4gMTI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGxtID0gZmxtLCBsbCA9IGZsdCwgZG0gPSBmZG0sIGRsID0gZmR0O1xuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpOyArK2kpIHtcbiAgICAgICAgaWYgKHN5bXNbaV0gPiAyNTUpIHtcbiAgICAgICAgICAgIHZhciBsZW4gPSAoc3ltc1tpXSA+Pj4gMTgpICYgMzE7XG4gICAgICAgICAgICB3Yml0czE2KG91dCwgcCwgbG1bbGVuICsgMjU3XSksIHAgKz0gbGxbbGVuICsgMjU3XTtcbiAgICAgICAgICAgIGlmIChsZW4gPiA3KVxuICAgICAgICAgICAgICAgIHdiaXRzKG91dCwgcCwgKHN5bXNbaV0gPj4+IDIzKSAmIDMxKSwgcCArPSBmbGViW2xlbl07XG4gICAgICAgICAgICB2YXIgZHN0ID0gc3ltc1tpXSAmIDMxO1xuICAgICAgICAgICAgd2JpdHMxNihvdXQsIHAsIGRtW2RzdF0pLCBwICs9IGRsW2RzdF07XG4gICAgICAgICAgICBpZiAoZHN0ID4gMylcbiAgICAgICAgICAgICAgICB3Yml0czE2KG91dCwgcCwgKHN5bXNbaV0gPj4+IDUpICYgODE5MSksIHAgKz0gZmRlYltkc3RdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgd2JpdHMxNihvdXQsIHAsIGxtW3N5bXNbaV1dKSwgcCArPSBsbFtzeW1zW2ldXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB3Yml0czE2KG91dCwgcCwgbG1bMjU2XSk7XG4gICAgcmV0dXJuIHAgKyBsbFsyNTZdO1xufTtcbi8vIGRlZmxhdGUgb3B0aW9ucyAobmljZSA8PCAxMykgfCBjaGFpblxudmFyIGRlbyA9IC8qI19fUFVSRV9fKi8gbmV3IHUzMihbNjU1NDAsIDEzMTA4MCwgMTMxMDg4LCAxMzExMDQsIDI2MjE3NiwgMTA0ODcwNCwgMTA0ODgzMiwgMjExNDU2MCwgMjExNzYzMl0pO1xuLy8gZW1wdHlcbnZhciBldCA9IC8qI19fUFVSRV9fKi8gbmV3IHU4KDApO1xuLy8gY29tcHJlc3NlcyBkYXRhIGludG8gYSByYXcgREVGTEFURSBidWZmZXJcbnZhciBkZmx0ID0gZnVuY3Rpb24gKGRhdCwgbHZsLCBwbHZsLCBwcmUsIHBvc3QsIGxzdCkge1xuICAgIHZhciBzID0gZGF0Lmxlbmd0aDtcbiAgICB2YXIgbyA9IG5ldyB1OChwcmUgKyBzICsgNSAqICgxICsgTWF0aC5mbG9vcihzIC8gNzAwMCkpICsgcG9zdCk7XG4gICAgLy8gd3JpdGluZyB0byB0aGlzIHdyaXRlcyB0byB0aGUgb3V0cHV0IGJ1ZmZlclxuICAgIHZhciB3ID0gby5zdWJhcnJheShwcmUsIG8ubGVuZ3RoIC0gcG9zdCk7XG4gICAgdmFyIHBvcyA9IDA7XG4gICAgaWYgKCFsdmwgfHwgcyA8IDgpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPD0gczsgaSArPSA2NTUzNSkge1xuICAgICAgICAgICAgLy8gZW5kXG4gICAgICAgICAgICB2YXIgZSA9IGkgKyA2NTUzNTtcbiAgICAgICAgICAgIGlmIChlIDwgcykge1xuICAgICAgICAgICAgICAgIC8vIHdyaXRlIGZ1bGwgYmxvY2tcbiAgICAgICAgICAgICAgICBwb3MgPSB3ZmJsayh3LCBwb3MsIGRhdC5zdWJhcnJheShpLCBlKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyB3cml0ZSBmaW5hbCBibG9ja1xuICAgICAgICAgICAgICAgIHdbaV0gPSBsc3Q7XG4gICAgICAgICAgICAgICAgcG9zID0gd2ZibGsodywgcG9zLCBkYXQuc3ViYXJyYXkoaSwgcykpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB2YXIgb3B0ID0gZGVvW2x2bCAtIDFdO1xuICAgICAgICB2YXIgbiA9IG9wdCA+Pj4gMTMsIGMgPSBvcHQgJiA4MTkxO1xuICAgICAgICB2YXIgbXNrXzEgPSAoMSA8PCBwbHZsKSAtIDE7XG4gICAgICAgIC8vICAgIHByZXYgMi1ieXRlIHZhbCBtYXAgICAgY3VyciAyLWJ5dGUgdmFsIG1hcFxuICAgICAgICB2YXIgcHJldiA9IG5ldyB1MTYoMzI3NjgpLCBoZWFkID0gbmV3IHUxNihtc2tfMSArIDEpO1xuICAgICAgICB2YXIgYnMxXzEgPSBNYXRoLmNlaWwocGx2bCAvIDMpLCBiczJfMSA9IDIgKiBiczFfMTtcbiAgICAgICAgdmFyIGhzaCA9IGZ1bmN0aW9uIChpKSB7IHJldHVybiAoZGF0W2ldIF4gKGRhdFtpICsgMV0gPDwgYnMxXzEpIF4gKGRhdFtpICsgMl0gPDwgYnMyXzEpKSAmIG1za18xOyB9O1xuICAgICAgICAvLyAyNDU3NiBpcyBhbiBhcmJpdHJhcnkgbnVtYmVyIG9mIG1heGltdW0gc3ltYm9scyBwZXIgYmxvY2tcbiAgICAgICAgLy8gNDI0IGJ1ZmZlciBmb3IgbGFzdCBibG9ja1xuICAgICAgICB2YXIgc3ltcyA9IG5ldyB1MzIoMjUwMDApO1xuICAgICAgICAvLyBsZW5ndGgvbGl0ZXJhbCBmcmVxICAgZGlzdGFuY2UgZnJlcVxuICAgICAgICB2YXIgbGYgPSBuZXcgdTE2KDI4OCksIGRmID0gbmV3IHUxNigzMik7XG4gICAgICAgIC8vICBsL2xjbnQgIGV4Yml0cyAgaW5kZXggIGwvbGluZCAgd2FpdGR4ICBiaXRwb3NcbiAgICAgICAgdmFyIGxjXzEgPSAwLCBlYiA9IDAsIGkgPSAwLCBsaSA9IDAsIHdpID0gMCwgYnMgPSAwO1xuICAgICAgICBmb3IgKDsgaSA8IHM7ICsraSkge1xuICAgICAgICAgICAgLy8gaGFzaCB2YWx1ZVxuICAgICAgICAgICAgdmFyIGh2ID0gaHNoKGkpO1xuICAgICAgICAgICAgLy8gaW5kZXggbW9kIDMyNzY4XG4gICAgICAgICAgICB2YXIgaW1vZCA9IGkgJiAzMjc2NztcbiAgICAgICAgICAgIC8vIHByZXZpb3VzIGluZGV4IHdpdGggdGhpcyB2YWx1ZVxuICAgICAgICAgICAgdmFyIHBpbW9kID0gaGVhZFtodl07XG4gICAgICAgICAgICBwcmV2W2ltb2RdID0gcGltb2Q7XG4gICAgICAgICAgICBoZWFkW2h2XSA9IGltb2Q7XG4gICAgICAgICAgICAvLyBXZSBhbHdheXMgc2hvdWxkIG1vZGlmeSBoZWFkIGFuZCBwcmV2LCBidXQgb25seSBhZGQgc3ltYm9scyBpZlxuICAgICAgICAgICAgLy8gdGhpcyBkYXRhIGlzIG5vdCB5ZXQgcHJvY2Vzc2VkIChcIndhaXRcIiBmb3Igd2FpdCBpbmRleClcbiAgICAgICAgICAgIGlmICh3aSA8PSBpKSB7XG4gICAgICAgICAgICAgICAgLy8gYnl0ZXMgcmVtYWluaW5nXG4gICAgICAgICAgICAgICAgdmFyIHJlbSA9IHMgLSBpO1xuICAgICAgICAgICAgICAgIGlmICgobGNfMSA+IDcwMDAgfHwgbGkgPiAyNDU3NikgJiYgcmVtID4gNDIzKSB7XG4gICAgICAgICAgICAgICAgICAgIHBvcyA9IHdibGsoZGF0LCB3LCAwLCBzeW1zLCBsZiwgZGYsIGViLCBsaSwgYnMsIGkgLSBicywgcG9zKTtcbiAgICAgICAgICAgICAgICAgICAgbGkgPSBsY18xID0gZWIgPSAwLCBicyA9IGk7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgMjg2OyArK2opXG4gICAgICAgICAgICAgICAgICAgICAgICBsZltqXSA9IDA7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgMzA7ICsrailcbiAgICAgICAgICAgICAgICAgICAgICAgIGRmW2pdID0gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gIGxlbiAgICBkaXN0ICAgY2hhaW5cbiAgICAgICAgICAgICAgICB2YXIgbCA9IDIsIGQgPSAwLCBjaF8xID0gYywgZGlmID0gKGltb2QgLSBwaW1vZCkgJiAzMjc2NztcbiAgICAgICAgICAgICAgICBpZiAocmVtID4gMiAmJiBodiA9PSBoc2goaSAtIGRpZikpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1heG4gPSBNYXRoLm1pbihuLCByZW0pIC0gMTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1heGQgPSBNYXRoLm1pbigzMjc2NywgaSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIG1heCBwb3NzaWJsZSBsZW5ndGhcbiAgICAgICAgICAgICAgICAgICAgLy8gbm90IGNhcHBlZCBhdCBkaWYgYmVjYXVzZSBkZWNvbXByZXNzb3JzIGltcGxlbWVudCBcInJvbGxpbmdcIiBpbmRleCBwb3B1bGF0aW9uXG4gICAgICAgICAgICAgICAgICAgIHZhciBtbCA9IE1hdGgubWluKDI1OCwgcmVtKTtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGRpZiA8PSBtYXhkICYmIC0tY2hfMSAmJiBpbW9kICE9IHBpbW9kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0W2kgKyBsXSA9PSBkYXRbaSArIGwgLSBkaWZdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5sID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKDsgbmwgPCBtbCAmJiBkYXRbaSArIG5sXSA9PSBkYXRbaSArIG5sIC0gZGlmXTsgKytubClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChubCA+IGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IG5sLCBkID0gZGlmO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBicmVhayBvdXQgZWFybHkgd2hlbiB3ZSByZWFjaCBcIm5pY2VcIiAod2UgYXJlIHNhdGlzZmllZCBlbm91Z2gpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChubCA+IG1heG4pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbm93LCBmaW5kIHRoZSByYXJlc3QgMi1ieXRlIHNlcXVlbmNlIHdpdGhpbiB0aGlzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxlbmd0aCBvZiBsaXRlcmFscyBhbmQgc2VhcmNoIGZvciB0aGF0IGluc3RlYWQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE11Y2ggZmFzdGVyIHRoYW4ganVzdCB1c2luZyB0aGUgc3RhcnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1tZCA9IE1hdGgubWluKGRpZiwgbmwgLSAyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1kID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBtbWQ7ICsraikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRpID0gKGkgLSBkaWYgKyBqICsgMzI3NjgpICYgMzI3Njc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcHRpID0gcHJldlt0aV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2QgPSAodGkgLSBwdGkgKyAzMjc2OCkgJiAzMjc2NztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjZCA+IG1kKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1kID0gY2QsIHBpbW9kID0gdGk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjaGVjayB0aGUgcHJldmlvdXMgbWF0Y2hcbiAgICAgICAgICAgICAgICAgICAgICAgIGltb2QgPSBwaW1vZCwgcGltb2QgPSBwcmV2W2ltb2RdO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGlmICs9IChpbW9kIC0gcGltb2QgKyAzMjc2OCkgJiAzMjc2NztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBkIHdpbGwgYmUgbm9uemVybyBvbmx5IHdoZW4gYSBtYXRjaCB3YXMgZm91bmRcbiAgICAgICAgICAgICAgICBpZiAoZCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBzdG9yZSBib3RoIGRpc3QgYW5kIGxlbiBkYXRhIGluIG9uZSBVaW50MzJcbiAgICAgICAgICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHRoaXMgaXMgcmVjb2duaXplZCBhcyBhIGxlbi9kaXN0IHdpdGggMjh0aCBiaXQgKDJeMjgpXG4gICAgICAgICAgICAgICAgICAgIHN5bXNbbGkrK10gPSAyNjg0MzU0NTYgfCAocmV2ZmxbbF0gPDwgMTgpIHwgcmV2ZmRbZF07XG4gICAgICAgICAgICAgICAgICAgIHZhciBsaW4gPSByZXZmbFtsXSAmIDMxLCBkaW4gPSByZXZmZFtkXSAmIDMxO1xuICAgICAgICAgICAgICAgICAgICBlYiArPSBmbGViW2xpbl0gKyBmZGViW2Rpbl07XG4gICAgICAgICAgICAgICAgICAgICsrbGZbMjU3ICsgbGluXTtcbiAgICAgICAgICAgICAgICAgICAgKytkZltkaW5dO1xuICAgICAgICAgICAgICAgICAgICB3aSA9IGkgKyBsO1xuICAgICAgICAgICAgICAgICAgICArK2xjXzE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzeW1zW2xpKytdID0gZGF0W2ldO1xuICAgICAgICAgICAgICAgICAgICArK2xmW2RhdFtpXV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHBvcyA9IHdibGsoZGF0LCB3LCBsc3QsIHN5bXMsIGxmLCBkZiwgZWIsIGxpLCBicywgaSAtIGJzLCBwb3MpO1xuICAgICAgICAvLyB0aGlzIGlzIHRoZSBlYXNpZXN0IHdheSB0byBhdm9pZCBuZWVkaW5nIHRvIG1haW50YWluIHN0YXRlXG4gICAgICAgIGlmICghbHN0KVxuICAgICAgICAgICAgcG9zID0gd2ZibGsodywgcG9zLCBldCk7XG4gICAgfVxuICAgIHJldHVybiBzbGMobywgMCwgcHJlICsgc2hmdChwb3MpICsgcG9zdCk7XG59O1xuLy8gQ1JDMzIgdGFibGVcbnZhciBjcmN0ID0gLyojX19QVVJFX18qLyAoZnVuY3Rpb24gKCkge1xuICAgIHZhciB0ID0gbmV3IHUzMigyNTYpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMjU2OyArK2kpIHtcbiAgICAgICAgdmFyIGMgPSBpLCBrID0gOTtcbiAgICAgICAgd2hpbGUgKC0taylcbiAgICAgICAgICAgIGMgPSAoKGMgJiAxKSAmJiAweEVEQjg4MzIwKSBeIChjID4+PiAxKTtcbiAgICAgICAgdFtpXSA9IGM7XG4gICAgfVxuICAgIHJldHVybiB0O1xufSkoKTtcbi8vIENSQzMyXG52YXIgY3JjID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBjID0gMHhGRkZGRkZGRjtcbiAgICByZXR1cm4ge1xuICAgICAgICBwOiBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgLy8gY2xvc3VyZXMgaGF2ZSBhd2Z1bCBwZXJmb3JtYW5jZVxuICAgICAgICAgICAgdmFyIGNyID0gYztcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZC5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICBjciA9IGNyY3RbKGNyICYgMjU1KSBeIGRbaV1dIF4gKGNyID4+PiA4KTtcbiAgICAgICAgICAgIGMgPSBjcjtcbiAgICAgICAgfSxcbiAgICAgICAgZDogZnVuY3Rpb24gKCkgeyByZXR1cm4gYyBeIDB4RkZGRkZGRkY7IH1cbiAgICB9O1xufTtcbi8vIEFsZGVyMzJcbnZhciBhZGxlciA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgYSA9IDEsIGIgPSAwO1xuICAgIHJldHVybiB7XG4gICAgICAgIHA6IGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAvLyBjbG9zdXJlcyBoYXZlIGF3ZnVsIHBlcmZvcm1hbmNlXG4gICAgICAgICAgICB2YXIgbiA9IGEsIG0gPSBiO1xuICAgICAgICAgICAgdmFyIGwgPSBkLmxlbmd0aDtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpICE9IGw7KSB7XG4gICAgICAgICAgICAgICAgdmFyIGUgPSBNYXRoLm1pbihpICsgNTU1MiwgbCk7XG4gICAgICAgICAgICAgICAgZm9yICg7IGkgPCBlOyArK2kpXG4gICAgICAgICAgICAgICAgICAgIG4gKz0gZFtpXSwgbSArPSBuO1xuICAgICAgICAgICAgICAgIG4gJT0gNjU1MjEsIG0gJT0gNjU1MjE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhID0gbiwgYiA9IG07XG4gICAgICAgIH0sXG4gICAgICAgIGQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuICgoYSA+Pj4gOCkgPDwgMTYgfCAoYiAmIDI1NSkgPDwgOCB8IChiID4+PiA4KSkgKyAoKGEgJiAyNTUpIDw8IDIzKSAqIDI7IH1cbiAgICB9O1xufTtcbjtcbi8vIGRlZmxhdGUgd2l0aCBvcHRzXG52YXIgZG9wdCA9IGZ1bmN0aW9uIChkYXQsIG9wdCwgcHJlLCBwb3N0LCBzdCkge1xuICAgIHJldHVybiBkZmx0KGRhdCwgb3B0LmxldmVsID09IG51bGwgPyA2IDogb3B0LmxldmVsLCBvcHQubWVtID09IG51bGwgPyBNYXRoLmNlaWwoTWF0aC5tYXgoOCwgTWF0aC5taW4oMTMsIE1hdGgubG9nKGRhdC5sZW5ndGgpKSkgKiAxLjUpIDogKDEyICsgb3B0Lm1lbSksIHByZSwgcG9zdCwgIXN0KTtcbn07XG4vLyBXYWxtYXJ0IG9iamVjdCBzcHJlYWRcbnZhciBtcmcgPSBmdW5jdGlvbiAoYSwgYikge1xuICAgIHZhciBvID0ge307XG4gICAgZm9yICh2YXIgayBpbiBhKVxuICAgICAgICBvW2tdID0gYVtrXTtcbiAgICBmb3IgKHZhciBrIGluIGIpXG4gICAgICAgIG9ba10gPSBiW2tdO1xuICAgIHJldHVybiBvO1xufTtcbi8vIHdvcmtlciBjbG9uZVxuLy8gVGhpcyBpcyBwb3NzaWJseSB0aGUgY3Jhemllc3QgcGFydCBvZiB0aGUgZW50aXJlIGNvZGViYXNlLCBkZXNwaXRlIGhvdyBzaW1wbGUgaXQgbWF5IHNlZW0uXG4vLyBUaGUgb25seSBwYXJhbWV0ZXIgdG8gdGhpcyBmdW5jdGlvbiBpcyBhIGNsb3N1cmUgdGhhdCByZXR1cm5zIGFuIGFycmF5IG9mIHZhcmlhYmxlcyBvdXRzaWRlIG9mIHRoZSBmdW5jdGlvbiBzY29wZS5cbi8vIFdlJ3JlIGdvaW5nIHRvIHRyeSB0byBmaWd1cmUgb3V0IHRoZSB2YXJpYWJsZSBuYW1lcyB1c2VkIGluIHRoZSBjbG9zdXJlIGFzIHN0cmluZ3MgYmVjYXVzZSB0aGF0IGlzIGNydWNpYWwgZm9yIHdvcmtlcml6YXRpb24uXG4vLyBXZSB3aWxsIHJldHVybiBhbiBvYmplY3QgbWFwcGluZyBvZiB0cnVlIHZhcmlhYmxlIG5hbWUgdG8gdmFsdWUgKGJhc2ljYWxseSwgdGhlIGN1cnJlbnQgc2NvcGUgYXMgYSBKUyBvYmplY3QpLlxuLy8gVGhlIHJlYXNvbiB3ZSBjYW4ndCBqdXN0IHVzZSB0aGUgb3JpZ2luYWwgdmFyaWFibGUgbmFtZXMgaXMgbWluaWZpZXJzIG1hbmdsaW5nIHRoZSB0b3BsZXZlbCBzY29wZS5cbi8vIFRoaXMgdG9vayBtZSB0aHJlZSB3ZWVrcyB0byBmaWd1cmUgb3V0IGhvdyB0byBkby5cbnZhciB3Y2xuID0gZnVuY3Rpb24gKGZuLCBmblN0ciwgdGQpIHtcbiAgICB2YXIgZHQgPSBmbigpO1xuICAgIHZhciBzdCA9IGZuLnRvU3RyaW5nKCk7XG4gICAgdmFyIGtzID0gc3Quc2xpY2Uoc3QuaW5kZXhPZignWycpICsgMSwgc3QubGFzdEluZGV4T2YoJ10nKSkucmVwbGFjZSgvIC9nLCAnJykuc3BsaXQoJywnKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGR0Lmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHZhciB2ID0gZHRbaV0sIGsgPSBrc1tpXTtcbiAgICAgICAgaWYgKHR5cGVvZiB2ID09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGZuU3RyICs9ICc7JyArIGsgKyAnPSc7XG4gICAgICAgICAgICB2YXIgc3RfMSA9IHYudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIGlmICh2LnByb3RvdHlwZSkge1xuICAgICAgICAgICAgICAgIC8vIGZvciBnbG9iYWwgb2JqZWN0c1xuICAgICAgICAgICAgICAgIGlmIChzdF8xLmluZGV4T2YoJ1tuYXRpdmUgY29kZV0nKSAhPSAtMSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc3BJbmQgPSBzdF8xLmluZGV4T2YoJyAnLCA4KSArIDE7XG4gICAgICAgICAgICAgICAgICAgIGZuU3RyICs9IHN0XzEuc2xpY2Uoc3BJbmQsIHN0XzEuaW5kZXhPZignKCcsIHNwSW5kKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBmblN0ciArPSBzdF8xO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB0IGluIHYucHJvdG90eXBlKVxuICAgICAgICAgICAgICAgICAgICAgICAgZm5TdHIgKz0gJzsnICsgayArICcucHJvdG90eXBlLicgKyB0ICsgJz0nICsgdi5wcm90b3R5cGVbdF0udG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgZm5TdHIgKz0gc3RfMTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlXG4gICAgICAgICAgICB0ZFtrXSA9IHY7XG4gICAgfVxuICAgIHJldHVybiBbZm5TdHIsIHRkXTtcbn07XG52YXIgY2ggPSBbXTtcbi8vIGNsb25lIGJ1ZnNcbnZhciBjYmZzID0gZnVuY3Rpb24gKHYpIHtcbiAgICB2YXIgdGwgPSBbXTtcbiAgICBmb3IgKHZhciBrIGluIHYpIHtcbiAgICAgICAgaWYgKHZba10gaW5zdGFuY2VvZiB1OCB8fCB2W2tdIGluc3RhbmNlb2YgdTE2IHx8IHZba10gaW5zdGFuY2VvZiB1MzIpXG4gICAgICAgICAgICB0bC5wdXNoKCh2W2tdID0gbmV3IHZba10uY29uc3RydWN0b3IodltrXSkpLmJ1ZmZlcik7XG4gICAgfVxuICAgIHJldHVybiB0bDtcbn07XG4vLyB1c2UgYSB3b3JrZXIgdG8gZXhlY3V0ZSBjb2RlXG52YXIgd3JrciA9IGZ1bmN0aW9uIChmbnMsIGluaXQsIGlkLCBjYikge1xuICAgIHZhciBfYTtcbiAgICBpZiAoIWNoW2lkXSkge1xuICAgICAgICB2YXIgZm5TdHIgPSAnJywgdGRfMSA9IHt9LCBtID0gZm5zLmxlbmd0aCAtIDE7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbTsgKytpKVxuICAgICAgICAgICAgX2EgPSB3Y2xuKGZuc1tpXSwgZm5TdHIsIHRkXzEpLCBmblN0ciA9IF9hWzBdLCB0ZF8xID0gX2FbMV07XG4gICAgICAgIGNoW2lkXSA9IHdjbG4oZm5zW21dLCBmblN0ciwgdGRfMSk7XG4gICAgfVxuICAgIHZhciB0ZCA9IG1yZyh7fSwgY2hbaWRdWzFdKTtcbiAgICByZXR1cm4gd2soY2hbaWRdWzBdICsgJztvbm1lc3NhZ2U9ZnVuY3Rpb24oZSl7Zm9yKHZhciBrIGluIGUuZGF0YSlzZWxmW2tdPWUuZGF0YVtrXTtvbm1lc3NhZ2U9JyArIGluaXQudG9TdHJpbmcoKSArICd9JywgaWQsIHRkLCBjYmZzKHRkKSwgY2IpO1xufTtcbi8vIGJhc2UgYXN5bmMgaW5mbGF0ZSBmblxudmFyIGJJbmZsdCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIFt1OCwgdTE2LCB1MzIsIGZsZWIsIGZkZWIsIGNsaW0sIGZsLCBmZCwgZmxybSwgZmRybSwgcmV2LCBoTWFwLCBtYXgsIGJpdHMsIGJpdHMxNiwgc2hmdCwgc2xjLCBpbmZsdCwgaW5mbGF0ZVN5bmMsIHBiZiwgZ3U4XTsgfTtcbnZhciBiRGZsdCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIFt1OCwgdTE2LCB1MzIsIGZsZWIsIGZkZWIsIGNsaW0sIHJldmZsLCByZXZmZCwgZmxtLCBmbHQsIGZkbSwgZmR0LCByZXYsIGRlbywgZXQsIGhNYXAsIHdiaXRzLCB3Yml0czE2LCBoVHJlZSwgbG4sIGxjLCBjbGVuLCB3ZmJsaywgd2Jsaywgc2hmdCwgc2xjLCBkZmx0LCBkb3B0LCBkZWZsYXRlU3luYywgcGJmXTsgfTtcbi8vIGd6aXAgZXh0cmFcbnZhciBnemUgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBbZ3poLCBnemhsLCB3Ynl0ZXMsIGNyYywgY3JjdF07IH07XG4vLyBndW56aXAgZXh0cmFcbnZhciBndXplID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gW2d6cywgZ3psXTsgfTtcbi8vIHpsaWIgZXh0cmFcbnZhciB6bGUgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBbemxoLCB3Ynl0ZXMsIGFkbGVyXTsgfTtcbi8vIHVuemxpYiBleHRyYVxudmFyIHp1bGUgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBbemx2XTsgfTtcbi8vIHBvc3QgYnVmXG52YXIgcGJmID0gZnVuY3Rpb24gKG1zZykgeyByZXR1cm4gcG9zdE1lc3NhZ2UobXNnLCBbbXNnLmJ1ZmZlcl0pOyB9O1xuLy8gZ2V0IHU4XG52YXIgZ3U4ID0gZnVuY3Rpb24gKG8pIHsgcmV0dXJuIG8gJiYgby5zaXplICYmIG5ldyB1OChvLnNpemUpOyB9O1xuLy8gYXN5bmMgaGVscGVyXG52YXIgY2JpZnkgPSBmdW5jdGlvbiAoZGF0LCBvcHRzLCBmbnMsIGluaXQsIGlkLCBjYikge1xuICAgIHZhciB3ID0gd3JrcihmbnMsIGluaXQsIGlkLCBmdW5jdGlvbiAoZXJyLCBkYXQpIHtcbiAgICAgICAgdy50ZXJtaW5hdGUoKTtcbiAgICAgICAgY2IoZXJyLCBkYXQpO1xuICAgIH0pO1xuICAgIGlmICghb3B0cy5jb25zdW1lKVxuICAgICAgICBkYXQgPSBuZXcgdTgoZGF0KTtcbiAgICB3LnBvc3RNZXNzYWdlKFtkYXQsIG9wdHNdLCBbZGF0LmJ1ZmZlcl0pO1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7IHcudGVybWluYXRlKCk7IH07XG59O1xuLy8gYXV0byBzdHJlYW1cbnZhciBhc3RybSA9IGZ1bmN0aW9uIChzdHJtKSB7XG4gICAgc3RybS5vbmRhdGEgPSBmdW5jdGlvbiAoZGF0LCBmaW5hbCkgeyByZXR1cm4gcG9zdE1lc3NhZ2UoW2RhdCwgZmluYWxdLCBbZGF0LmJ1ZmZlcl0pOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZXYpIHsgcmV0dXJuIHN0cm0ucHVzaChldi5kYXRhWzBdLCBldi5kYXRhWzFdKTsgfTtcbn07XG4vLyBhc3luYyBzdHJlYW0gYXR0YWNoXG52YXIgYXN0cm1pZnkgPSBmdW5jdGlvbiAoZm5zLCBzdHJtLCBvcHRzLCBpbml0LCBpZCkge1xuICAgIHZhciB0O1xuICAgIHZhciB3ID0gd3JrcihmbnMsIGluaXQsIGlkLCBmdW5jdGlvbiAoZXJyLCBkYXQpIHtcbiAgICAgICAgaWYgKGVycilcbiAgICAgICAgICAgIHcudGVybWluYXRlKCksIHN0cm0ub25kYXRhLmNhbGwoc3RybSwgZXJyKTtcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAoZGF0WzFdKVxuICAgICAgICAgICAgICAgIHcudGVybWluYXRlKCk7XG4gICAgICAgICAgICBzdHJtLm9uZGF0YS5jYWxsKHN0cm0sIGVyciwgZGF0WzBdLCBkYXRbMV0pO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgdy5wb3N0TWVzc2FnZShvcHRzKTtcbiAgICBzdHJtLnB1c2ggPSBmdW5jdGlvbiAoZCwgZikge1xuICAgICAgICBpZiAodClcbiAgICAgICAgICAgIHRocm93ICdzdHJlYW0gZmluaXNoZWQnO1xuICAgICAgICBpZiAoIXN0cm0ub25kYXRhKVxuICAgICAgICAgICAgdGhyb3cgJ25vIHN0cmVhbSBoYW5kbGVyJztcbiAgICAgICAgdy5wb3N0TWVzc2FnZShbZCwgdCA9IGZdLCBbZC5idWZmZXJdKTtcbiAgICB9O1xuICAgIHN0cm0udGVybWluYXRlID0gZnVuY3Rpb24gKCkgeyB3LnRlcm1pbmF0ZSgpOyB9O1xufTtcbi8vIHJlYWQgMiBieXRlc1xudmFyIGIyID0gZnVuY3Rpb24gKGQsIGIpIHsgcmV0dXJuIGRbYl0gfCAoZFtiICsgMV0gPDwgOCk7IH07XG4vLyByZWFkIDQgYnl0ZXNcbnZhciBiNCA9IGZ1bmN0aW9uIChkLCBiKSB7IHJldHVybiAoZFtiXSB8IChkW2IgKyAxXSA8PCA4KSB8IChkW2IgKyAyXSA8PCAxNikpICsgKGRbYiArIDNdIDw8IDIzKSAqIDI7IH07XG4vLyB3cml0ZSBieXRlc1xudmFyIHdieXRlcyA9IGZ1bmN0aW9uIChkLCBiLCB2KSB7XG4gICAgZm9yICg7IHY7ICsrYilcbiAgICAgICAgZFtiXSA9IHYsIHYgPj4+PSA4O1xufTtcbi8vIGd6aXAgaGVhZGVyXG52YXIgZ3poID0gZnVuY3Rpb24gKGMsIG8pIHtcbiAgICB2YXIgZm4gPSBvLmZpbGVuYW1lO1xuICAgIGNbMF0gPSAzMSwgY1sxXSA9IDEzOSwgY1syXSA9IDgsIGNbOF0gPSBvLmxldmVsIDwgMiA/IDQgOiBvLmxldmVsID09IDkgPyAyIDogMCwgY1s5XSA9IDM7IC8vIGFzc3VtZSBVbml4XG4gICAgaWYgKG8ubXRpbWUgIT0gMClcbiAgICAgICAgd2J5dGVzKGMsIDQsIE1hdGguZmxvb3IobmV3IERhdGUoby5tdGltZSB8fCBEYXRlLm5vdygpKSAvIDEwMDApKTtcbiAgICBpZiAoZm4pIHtcbiAgICAgICAgY1szXSA9IDg7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDw9IGZuLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgY1tpICsgMTBdID0gZm4uY2hhckNvZGVBdChpKTtcbiAgICB9XG59O1xuLy8gZ3ppcCBmb290ZXI6IC04IHRvIC00ID0gQ1JDLCAtNCB0byAtMCBpcyBsZW5ndGhcbi8vIGd6aXAgc3RhcnRcbnZhciBnenMgPSBmdW5jdGlvbiAoZCkge1xuICAgIGlmIChkWzBdICE9IDMxIHx8IGRbMV0gIT0gMTM5IHx8IGRbMl0gIT0gOClcbiAgICAgICAgdGhyb3cgJ2ludmFsaWQgZ3ppcCBkYXRhJztcbiAgICB2YXIgZmxnID0gZFszXTtcbiAgICB2YXIgc3QgPSAxMDtcbiAgICBpZiAoZmxnICYgNClcbiAgICAgICAgc3QgKz0gZFsxMF0gfCAoZFsxMV0gPDwgOCkgKyAyO1xuICAgIGZvciAodmFyIHpzID0gKGZsZyA+PiAzICYgMSkgKyAoZmxnID4+IDQgJiAxKTsgenMgPiAwOyB6cyAtPSAhZFtzdCsrXSlcbiAgICAgICAgO1xuICAgIHJldHVybiBzdCArIChmbGcgJiAyKTtcbn07XG4vLyBnemlwIGxlbmd0aFxudmFyIGd6bCA9IGZ1bmN0aW9uIChkKSB7XG4gICAgdmFyIGwgPSBkLmxlbmd0aDtcbiAgICByZXR1cm4gKGRbbCAtIDRdIHwgZFtsIC0gM10gPDwgOCB8IGRbbCAtIDJdIDw8IDE2KSArICgyICogKGRbbCAtIDFdIDw8IDIzKSk7XG59O1xuLy8gZ3ppcCBoZWFkZXIgbGVuZ3RoXG52YXIgZ3pobCA9IGZ1bmN0aW9uIChvKSB7IHJldHVybiAxMCArICgoby5maWxlbmFtZSAmJiAoby5maWxlbmFtZS5sZW5ndGggKyAxKSkgfHwgMCk7IH07XG4vLyB6bGliIGhlYWRlclxudmFyIHpsaCA9IGZ1bmN0aW9uIChjLCBvKSB7XG4gICAgdmFyIGx2ID0gby5sZXZlbCwgZmwgPSBsdiA9PSAwID8gMCA6IGx2IDwgNiA/IDEgOiBsdiA9PSA5ID8gMyA6IDI7XG4gICAgY1swXSA9IDEyMCwgY1sxXSA9IChmbCA8PCA2KSB8IChmbCA/ICgzMiAtIDIgKiBmbCkgOiAxKTtcbn07XG4vLyB6bGliIHZhbGlkXG52YXIgemx2ID0gZnVuY3Rpb24gKGQpIHtcbiAgICBpZiAoKGRbMF0gJiAxNSkgIT0gOCB8fCAoZFswXSA+Pj4gNCkgPiA3IHx8ICgoZFswXSA8PCA4IHwgZFsxXSkgJSAzMSkpXG4gICAgICAgIHRocm93ICdpbnZhbGlkIHpsaWIgZGF0YSc7XG4gICAgaWYgKGRbMV0gJiAzMilcbiAgICAgICAgdGhyb3cgJ2ludmFsaWQgemxpYiBkYXRhOiBwcmVzZXQgZGljdGlvbmFyaWVzIG5vdCBzdXBwb3J0ZWQnO1xufTtcbmZ1bmN0aW9uIEFzeW5jQ21wU3RybShvcHRzLCBjYikge1xuICAgIGlmICghY2IgJiYgdHlwZW9mIG9wdHMgPT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgY2IgPSBvcHRzLCBvcHRzID0ge307XG4gICAgdGhpcy5vbmRhdGEgPSBjYjtcbiAgICByZXR1cm4gb3B0cztcbn1cbi8vIHpsaWIgZm9vdGVyOiAtNCB0byAtMCBpcyBBZGxlcjMyXG4vKipcbiAqIFN0cmVhbWluZyBERUZMQVRFIGNvbXByZXNzaW9uXG4gKi9cbnZhciBEZWZsYXRlID0gLyojX19QVVJFX18qLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIERlZmxhdGUob3B0cywgY2IpIHtcbiAgICAgICAgaWYgKCFjYiAmJiB0eXBlb2Ygb3B0cyA9PSAnZnVuY3Rpb24nKVxuICAgICAgICAgICAgY2IgPSBvcHRzLCBvcHRzID0ge307XG4gICAgICAgIHRoaXMub25kYXRhID0gY2I7XG4gICAgICAgIHRoaXMubyA9IG9wdHMgfHwge307XG4gICAgfVxuICAgIERlZmxhdGUucHJvdG90eXBlLnAgPSBmdW5jdGlvbiAoYywgZikge1xuICAgICAgICB0aGlzLm9uZGF0YShkb3B0KGMsIHRoaXMubywgMCwgMCwgIWYpLCBmKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFB1c2hlcyBhIGNodW5rIHRvIGJlIGRlZmxhdGVkXG4gICAgICogQHBhcmFtIGNodW5rIFRoZSBjaHVuayB0byBwdXNoXG4gICAgICogQHBhcmFtIGZpbmFsIFdoZXRoZXIgdGhpcyBpcyB0aGUgbGFzdCBjaHVua1xuICAgICAqL1xuICAgIERlZmxhdGUucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbiAoY2h1bmssIGZpbmFsKSB7XG4gICAgICAgIGlmICh0aGlzLmQpXG4gICAgICAgICAgICB0aHJvdyAnc3RyZWFtIGZpbmlzaGVkJztcbiAgICAgICAgaWYgKCF0aGlzLm9uZGF0YSlcbiAgICAgICAgICAgIHRocm93ICdubyBzdHJlYW0gaGFuZGxlcic7XG4gICAgICAgIHRoaXMuZCA9IGZpbmFsO1xuICAgICAgICB0aGlzLnAoY2h1bmssIGZpbmFsIHx8IGZhbHNlKTtcbiAgICB9O1xuICAgIHJldHVybiBEZWZsYXRlO1xufSgpKTtcbmV4cG9ydCB7IERlZmxhdGUgfTtcbi8qKlxuICogQXN5bmNocm9ub3VzIHN0cmVhbWluZyBERUZMQVRFIGNvbXByZXNzaW9uXG4gKi9cbnZhciBBc3luY0RlZmxhdGUgPSAvKiNfX1BVUkVfXyovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQXN5bmNEZWZsYXRlKG9wdHMsIGNiKSB7XG4gICAgICAgIGFzdHJtaWZ5KFtcbiAgICAgICAgICAgIGJEZmx0LFxuICAgICAgICAgICAgZnVuY3Rpb24gKCkgeyByZXR1cm4gW2FzdHJtLCBEZWZsYXRlXTsgfVxuICAgICAgICBdLCB0aGlzLCBBc3luY0NtcFN0cm0uY2FsbCh0aGlzLCBvcHRzLCBjYiksIGZ1bmN0aW9uIChldikge1xuICAgICAgICAgICAgdmFyIHN0cm0gPSBuZXcgRGVmbGF0ZShldi5kYXRhKTtcbiAgICAgICAgICAgIG9ubWVzc2FnZSA9IGFzdHJtKHN0cm0pO1xuICAgICAgICB9LCA2KTtcbiAgICB9XG4gICAgcmV0dXJuIEFzeW5jRGVmbGF0ZTtcbn0oKSk7XG5leHBvcnQgeyBBc3luY0RlZmxhdGUgfTtcbmV4cG9ydCBmdW5jdGlvbiBkZWZsYXRlKGRhdGEsIG9wdHMsIGNiKSB7XG4gICAgaWYgKCFjYilcbiAgICAgICAgY2IgPSBvcHRzLCBvcHRzID0ge307XG4gICAgaWYgKHR5cGVvZiBjYiAhPSAnZnVuY3Rpb24nKVxuICAgICAgICB0aHJvdyAnbm8gY2FsbGJhY2snO1xuICAgIHJldHVybiBjYmlmeShkYXRhLCBvcHRzLCBbXG4gICAgICAgIGJEZmx0LFxuICAgIF0sIGZ1bmN0aW9uIChldikgeyByZXR1cm4gcGJmKGRlZmxhdGVTeW5jKGV2LmRhdGFbMF0sIGV2LmRhdGFbMV0pKTsgfSwgMCwgY2IpO1xufVxuLyoqXG4gKiBDb21wcmVzc2VzIGRhdGEgd2l0aCBERUZMQVRFIHdpdGhvdXQgYW55IHdyYXBwZXJcbiAqIEBwYXJhbSBkYXRhIFRoZSBkYXRhIHRvIGNvbXByZXNzXG4gKiBAcGFyYW0gb3B0cyBUaGUgY29tcHJlc3Npb24gb3B0aW9uc1xuICogQHJldHVybnMgVGhlIGRlZmxhdGVkIHZlcnNpb24gb2YgdGhlIGRhdGFcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlZmxhdGVTeW5jKGRhdGEsIG9wdHMpIHtcbiAgICBpZiAob3B0cyA9PT0gdm9pZCAwKSB7IG9wdHMgPSB7fTsgfVxuICAgIHJldHVybiBkb3B0KGRhdGEsIG9wdHMsIDAsIDApO1xufVxuLyoqXG4gKiBTdHJlYW1pbmcgREVGTEFURSBkZWNvbXByZXNzaW9uXG4gKi9cbnZhciBJbmZsYXRlID0gLyojX19QVVJFX18qLyAoZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gaW5mbGF0aW9uIHN0cmVhbVxuICAgICAqIEBwYXJhbSBjYiBUaGUgY2FsbGJhY2sgdG8gY2FsbCB3aGVuZXZlciBkYXRhIGlzIGluZmxhdGVkXG4gICAgICovXG4gICAgZnVuY3Rpb24gSW5mbGF0ZShjYikge1xuICAgICAgICB0aGlzLnMgPSB7fTtcbiAgICAgICAgdGhpcy5wID0gbmV3IHU4KDApO1xuICAgICAgICB0aGlzLm9uZGF0YSA9IGNiO1xuICAgIH1cbiAgICBJbmZsYXRlLnByb3RvdHlwZS5lID0gZnVuY3Rpb24gKGMpIHtcbiAgICAgICAgaWYgKHRoaXMuZClcbiAgICAgICAgICAgIHRocm93ICdzdHJlYW0gZmluaXNoZWQnO1xuICAgICAgICBpZiAoIXRoaXMub25kYXRhKVxuICAgICAgICAgICAgdGhyb3cgJ25vIHN0cmVhbSBoYW5kbGVyJztcbiAgICAgICAgdmFyIGwgPSB0aGlzLnAubGVuZ3RoO1xuICAgICAgICB2YXIgbiA9IG5ldyB1OChsICsgYy5sZW5ndGgpO1xuICAgICAgICBuLnNldCh0aGlzLnApLCBuLnNldChjLCBsKSwgdGhpcy5wID0gbjtcbiAgICB9O1xuICAgIEluZmxhdGUucHJvdG90eXBlLmMgPSBmdW5jdGlvbiAoZmluYWwpIHtcbiAgICAgICAgdGhpcy5kID0gdGhpcy5zLmkgPSBmaW5hbCB8fCBmYWxzZTtcbiAgICAgICAgdmFyIGJ0cyA9IHRoaXMucy5iO1xuICAgICAgICB2YXIgZHQgPSBpbmZsdCh0aGlzLnAsIHRoaXMubywgdGhpcy5zKTtcbiAgICAgICAgdGhpcy5vbmRhdGEoc2xjKGR0LCBidHMsIHRoaXMucy5iKSwgdGhpcy5kKTtcbiAgICAgICAgdGhpcy5vID0gc2xjKGR0LCB0aGlzLnMuYiAtIDMyNzY4KSwgdGhpcy5zLmIgPSB0aGlzLm8ubGVuZ3RoO1xuICAgICAgICB0aGlzLnAgPSBzbGModGhpcy5wLCAodGhpcy5zLnAgLyA4KSA+PiAwKSwgdGhpcy5zLnAgJj0gNztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFB1c2hlcyBhIGNodW5rIHRvIGJlIGluZmxhdGVkXG4gICAgICogQHBhcmFtIGNodW5rIFRoZSBjaHVuayB0byBwdXNoXG4gICAgICogQHBhcmFtIGZpbmFsIFdoZXRoZXIgdGhpcyBpcyB0aGUgZmluYWwgY2h1bmtcbiAgICAgKi9cbiAgICBJbmZsYXRlLnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24gKGNodW5rLCBmaW5hbCkge1xuICAgICAgICB0aGlzLmUoY2h1bmspLCB0aGlzLmMoZmluYWwpO1xuICAgIH07XG4gICAgcmV0dXJuIEluZmxhdGU7XG59KCkpO1xuZXhwb3J0IHsgSW5mbGF0ZSB9O1xuLyoqXG4gKiBBc3luY2hyb25vdXMgc3RyZWFtaW5nIERFRkxBVEUgZGVjb21wcmVzc2lvblxuICovXG52YXIgQXN5bmNJbmZsYXRlID0gLyojX19QVVJFX18qLyAoZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gYXN5bmNocm9ub3VzIGluZmxhdGlvbiBzdHJlYW1cbiAgICAgKiBAcGFyYW0gY2IgVGhlIGNhbGxiYWNrIHRvIGNhbGwgd2hlbmV2ZXIgZGF0YSBpcyBkZWZsYXRlZFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEFzeW5jSW5mbGF0ZShjYikge1xuICAgICAgICB0aGlzLm9uZGF0YSA9IGNiO1xuICAgICAgICBhc3RybWlmeShbXG4gICAgICAgICAgICBiSW5mbHQsXG4gICAgICAgICAgICBmdW5jdGlvbiAoKSB7IHJldHVybiBbYXN0cm0sIEluZmxhdGVdOyB9XG4gICAgICAgIF0sIHRoaXMsIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBzdHJtID0gbmV3IEluZmxhdGUoKTtcbiAgICAgICAgICAgIG9ubWVzc2FnZSA9IGFzdHJtKHN0cm0pO1xuICAgICAgICB9LCA3KTtcbiAgICB9XG4gICAgcmV0dXJuIEFzeW5jSW5mbGF0ZTtcbn0oKSk7XG5leHBvcnQgeyBBc3luY0luZmxhdGUgfTtcbmV4cG9ydCBmdW5jdGlvbiBpbmZsYXRlKGRhdGEsIG9wdHMsIGNiKSB7XG4gICAgaWYgKCFjYilcbiAgICAgICAgY2IgPSBvcHRzLCBvcHRzID0ge307XG4gICAgaWYgKHR5cGVvZiBjYiAhPSAnZnVuY3Rpb24nKVxuICAgICAgICB0aHJvdyAnbm8gY2FsbGJhY2snO1xuICAgIHJldHVybiBjYmlmeShkYXRhLCBvcHRzLCBbXG4gICAgICAgIGJJbmZsdFxuICAgIF0sIGZ1bmN0aW9uIChldikgeyByZXR1cm4gcGJmKGluZmxhdGVTeW5jKGV2LmRhdGFbMF0sIGd1OChldi5kYXRhWzFdKSkpOyB9LCAxLCBjYik7XG59XG4vKipcbiAqIEV4cGFuZHMgREVGTEFURSBkYXRhIHdpdGggbm8gd3JhcHBlclxuICogQHBhcmFtIGRhdGEgVGhlIGRhdGEgdG8gZGVjb21wcmVzc1xuICogQHBhcmFtIG91dCBXaGVyZSB0byB3cml0ZSB0aGUgZGF0YS4gU2F2ZXMgbWVtb3J5IGlmIHlvdSBrbm93IHRoZSBkZWNvbXByZXNzZWQgc2l6ZSBhbmQgcHJvdmlkZSBhbiBvdXRwdXQgYnVmZmVyIG9mIHRoYXQgbGVuZ3RoLlxuICogQHJldHVybnMgVGhlIGRlY29tcHJlc3NlZCB2ZXJzaW9uIG9mIHRoZSBkYXRhXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbmZsYXRlU3luYyhkYXRhLCBvdXQpIHtcbiAgICByZXR1cm4gaW5mbHQoZGF0YSwgb3V0KTtcbn1cbi8vIGJlZm9yZSB5b3UgeWVsbCBhdCBtZSBmb3Igbm90IGp1c3QgdXNpbmcgZXh0ZW5kcywgbXkgcmVhc29uIGlzIHRoYXQgVFMgaW5oZXJpdGFuY2UgaXMgaGFyZCB0byB3b3JrZXJpemUuXG4vKipcbiAqIFN0cmVhbWluZyBHWklQIGNvbXByZXNzaW9uXG4gKi9cbnZhciBHemlwID0gLyojX19QVVJFX18qLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEd6aXAob3B0cywgY2IpIHtcbiAgICAgICAgdGhpcy5jID0gY3JjKCk7XG4gICAgICAgIHRoaXMubCA9IDA7XG4gICAgICAgIHRoaXMudiA9IDE7XG4gICAgICAgIERlZmxhdGUuY2FsbCh0aGlzLCBvcHRzLCBjYik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFB1c2hlcyBhIGNodW5rIHRvIGJlIEdaSVBwZWRcbiAgICAgKiBAcGFyYW0gY2h1bmsgVGhlIGNodW5rIHRvIHB1c2hcbiAgICAgKiBAcGFyYW0gZmluYWwgV2hldGhlciB0aGlzIGlzIHRoZSBsYXN0IGNodW5rXG4gICAgICovXG4gICAgR3ppcC5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uIChjaHVuaywgZmluYWwpIHtcbiAgICAgICAgRGVmbGF0ZS5wcm90b3R5cGUucHVzaC5jYWxsKHRoaXMsIGNodW5rLCBmaW5hbCk7XG4gICAgfTtcbiAgICBHemlwLnByb3RvdHlwZS5wID0gZnVuY3Rpb24gKGMsIGYpIHtcbiAgICAgICAgdGhpcy5jLnAoYyk7XG4gICAgICAgIHRoaXMubCArPSBjLmxlbmd0aDtcbiAgICAgICAgdmFyIHJhdyA9IGRvcHQoYywgdGhpcy5vLCB0aGlzLnYgJiYgZ3pobCh0aGlzLm8pLCBmICYmIDgsICFmKTtcbiAgICAgICAgaWYgKHRoaXMudilcbiAgICAgICAgICAgIGd6aChyYXcsIHRoaXMubyksIHRoaXMudiA9IDA7XG4gICAgICAgIGlmIChmKVxuICAgICAgICAgICAgd2J5dGVzKHJhdywgcmF3Lmxlbmd0aCAtIDgsIHRoaXMuYy5kKCkpLCB3Ynl0ZXMocmF3LCByYXcubGVuZ3RoIC0gNCwgdGhpcy5sKTtcbiAgICAgICAgdGhpcy5vbmRhdGEocmF3LCBmKTtcbiAgICB9O1xuICAgIHJldHVybiBHemlwO1xufSgpKTtcbmV4cG9ydCB7IEd6aXAgfTtcbi8qKlxuICogQXN5bmNocm9ub3VzIHN0cmVhbWluZyBHWklQIGNvbXByZXNzaW9uXG4gKi9cbnZhciBBc3luY0d6aXAgPSAvKiNfX1BVUkVfXyovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQXN5bmNHemlwKG9wdHMsIGNiKSB7XG4gICAgICAgIGFzdHJtaWZ5KFtcbiAgICAgICAgICAgIGJEZmx0LFxuICAgICAgICAgICAgZ3plLFxuICAgICAgICAgICAgZnVuY3Rpb24gKCkgeyByZXR1cm4gW2FzdHJtLCBEZWZsYXRlLCBHemlwXTsgfVxuICAgICAgICBdLCB0aGlzLCBBc3luY0NtcFN0cm0uY2FsbCh0aGlzLCBvcHRzLCBjYiksIGZ1bmN0aW9uIChldikge1xuICAgICAgICAgICAgdmFyIHN0cm0gPSBuZXcgR3ppcChldi5kYXRhKTtcbiAgICAgICAgICAgIG9ubWVzc2FnZSA9IGFzdHJtKHN0cm0pO1xuICAgICAgICB9LCA4KTtcbiAgICB9XG4gICAgcmV0dXJuIEFzeW5jR3ppcDtcbn0oKSk7XG5leHBvcnQgeyBBc3luY0d6aXAgfTtcbmV4cG9ydCBmdW5jdGlvbiBnemlwKGRhdGEsIG9wdHMsIGNiKSB7XG4gICAgaWYgKCFjYilcbiAgICAgICAgY2IgPSBvcHRzLCBvcHRzID0ge307XG4gICAgaWYgKHR5cGVvZiBjYiAhPSAnZnVuY3Rpb24nKVxuICAgICAgICB0aHJvdyAnbm8gY2FsbGJhY2snO1xuICAgIHJldHVybiBjYmlmeShkYXRhLCBvcHRzLCBbXG4gICAgICAgIGJEZmx0LFxuICAgICAgICBnemUsXG4gICAgICAgIGZ1bmN0aW9uICgpIHsgcmV0dXJuIFtnemlwU3luY107IH1cbiAgICBdLCBmdW5jdGlvbiAoZXYpIHsgcmV0dXJuIHBiZihnemlwU3luYyhldi5kYXRhWzBdLCBldi5kYXRhWzFdKSk7IH0sIDIsIGNiKTtcbn1cbi8qKlxuICogQ29tcHJlc3NlcyBkYXRhIHdpdGggR1pJUFxuICogQHBhcmFtIGRhdGEgVGhlIGRhdGEgdG8gY29tcHJlc3NcbiAqIEBwYXJhbSBvcHRzIFRoZSBjb21wcmVzc2lvbiBvcHRpb25zXG4gKiBAcmV0dXJucyBUaGUgZ3ppcHBlZCB2ZXJzaW9uIG9mIHRoZSBkYXRhXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnemlwU3luYyhkYXRhLCBvcHRzKSB7XG4gICAgaWYgKG9wdHMgPT09IHZvaWQgMCkgeyBvcHRzID0ge307IH1cbiAgICB2YXIgYyA9IGNyYygpLCBsID0gZGF0YS5sZW5ndGg7XG4gICAgYy5wKGRhdGEpO1xuICAgIHZhciBkID0gZG9wdChkYXRhLCBvcHRzLCBnemhsKG9wdHMpLCA4KSwgcyA9IGQubGVuZ3RoO1xuICAgIHJldHVybiBnemgoZCwgb3B0cyksIHdieXRlcyhkLCBzIC0gOCwgYy5kKCkpLCB3Ynl0ZXMoZCwgcyAtIDQsIGwpLCBkO1xufVxuLyoqXG4gKiBTdHJlYW1pbmcgR1pJUCBkZWNvbXByZXNzaW9uXG4gKi9cbnZhciBHdW56aXAgPSAvKiNfX1BVUkVfXyovIChmdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIEdVTlpJUCBzdHJlYW1cbiAgICAgKiBAcGFyYW0gY2IgVGhlIGNhbGxiYWNrIHRvIGNhbGwgd2hlbmV2ZXIgZGF0YSBpcyBpbmZsYXRlZFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEd1bnppcChjYikge1xuICAgICAgICB0aGlzLnYgPSAxO1xuICAgICAgICBJbmZsYXRlLmNhbGwodGhpcywgY2IpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQdXNoZXMgYSBjaHVuayB0byBiZSBHVU5aSVBwZWRcbiAgICAgKiBAcGFyYW0gY2h1bmsgVGhlIGNodW5rIHRvIHB1c2hcbiAgICAgKiBAcGFyYW0gZmluYWwgV2hldGhlciB0aGlzIGlzIHRoZSBsYXN0IGNodW5rXG4gICAgICovXG4gICAgR3VuemlwLnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24gKGNodW5rLCBmaW5hbCkge1xuICAgICAgICBJbmZsYXRlLnByb3RvdHlwZS5lLmNhbGwodGhpcywgY2h1bmspO1xuICAgICAgICBpZiAodGhpcy52KSB7XG4gICAgICAgICAgICB2YXIgcyA9IGd6cyh0aGlzLnApO1xuICAgICAgICAgICAgaWYgKHMgPj0gdGhpcy5wLmxlbmd0aCAmJiAhZmluYWwpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgdGhpcy5wID0gdGhpcy5wLnN1YmFycmF5KHMpLCB0aGlzLnYgPSAwO1xuICAgICAgICB9XG4gICAgICAgIGlmIChmaW5hbCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucC5sZW5ndGggPCA4KVxuICAgICAgICAgICAgICAgIHRocm93ICdpbnZhbGlkIGd6aXAgc3RyZWFtJztcbiAgICAgICAgICAgIHRoaXMucCA9IHRoaXMucC5zdWJhcnJheSgwLCAtOCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gbmVjZXNzYXJ5IHRvIHByZXZlbnQgVFMgZnJvbSB1c2luZyB0aGUgY2xvc3VyZSB2YWx1ZVxuICAgICAgICAvLyBUaGlzIGFsbG93cyBmb3Igd29ya2VyaXphdGlvbiB0byBmdW5jdGlvbiBjb3JyZWN0bHlcbiAgICAgICAgSW5mbGF0ZS5wcm90b3R5cGUuYy5jYWxsKHRoaXMsIGZpbmFsKTtcbiAgICB9O1xuICAgIHJldHVybiBHdW56aXA7XG59KCkpO1xuZXhwb3J0IHsgR3VuemlwIH07XG4vKipcbiAqIEFzeW5jaHJvbm91cyBzdHJlYW1pbmcgR1pJUCBkZWNvbXByZXNzaW9uXG4gKi9cbnZhciBBc3luY0d1bnppcCA9IC8qI19fUFVSRV9fKi8gKGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGFzeW5jaHJvbm91cyBHVU5aSVAgc3RyZWFtXG4gICAgICogQHBhcmFtIGNiIFRoZSBjYWxsYmFjayB0byBjYWxsIHdoZW5ldmVyIGRhdGEgaXMgZGVmbGF0ZWRcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBBc3luY0d1bnppcChjYikge1xuICAgICAgICB0aGlzLm9uZGF0YSA9IGNiO1xuICAgICAgICBhc3RybWlmeShbXG4gICAgICAgICAgICBiSW5mbHQsXG4gICAgICAgICAgICBndXplLFxuICAgICAgICAgICAgZnVuY3Rpb24gKCkgeyByZXR1cm4gW2FzdHJtLCBJbmZsYXRlLCBHdW56aXBdOyB9XG4gICAgICAgIF0sIHRoaXMsIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBzdHJtID0gbmV3IEd1bnppcCgpO1xuICAgICAgICAgICAgb25tZXNzYWdlID0gYXN0cm0oc3RybSk7XG4gICAgICAgIH0sIDkpO1xuICAgIH1cbiAgICByZXR1cm4gQXN5bmNHdW56aXA7XG59KCkpO1xuZXhwb3J0IHsgQXN5bmNHdW56aXAgfTtcbmV4cG9ydCBmdW5jdGlvbiBndW56aXAoZGF0YSwgb3B0cywgY2IpIHtcbiAgICBpZiAoIWNiKVxuICAgICAgICBjYiA9IG9wdHMsIG9wdHMgPSB7fTtcbiAgICBpZiAodHlwZW9mIGNiICE9ICdmdW5jdGlvbicpXG4gICAgICAgIHRocm93ICdubyBjYWxsYmFjayc7XG4gICAgcmV0dXJuIGNiaWZ5KGRhdGEsIG9wdHMsIFtcbiAgICAgICAgYkluZmx0LFxuICAgICAgICBndXplLFxuICAgICAgICBmdW5jdGlvbiAoKSB7IHJldHVybiBbZ3VuemlwU3luY107IH1cbiAgICBdLCBmdW5jdGlvbiAoZXYpIHsgcmV0dXJuIHBiZihndW56aXBTeW5jKGV2LmRhdGFbMF0pKTsgfSwgMywgY2IpO1xufVxuLyoqXG4gKiBFeHBhbmRzIEdaSVAgZGF0YVxuICogQHBhcmFtIGRhdGEgVGhlIGRhdGEgdG8gZGVjb21wcmVzc1xuICogQHBhcmFtIG91dCBXaGVyZSB0byB3cml0ZSB0aGUgZGF0YS4gR1pJUCBhbHJlYWR5IGVuY29kZXMgdGhlIG91dHB1dCBzaXplLCBzbyBwcm92aWRpbmcgdGhpcyBkb2Vzbid0IHNhdmUgbWVtb3J5LlxuICogQHJldHVybnMgVGhlIGRlY29tcHJlc3NlZCB2ZXJzaW9uIG9mIHRoZSBkYXRhXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBndW56aXBTeW5jKGRhdGEsIG91dCkge1xuICAgIHJldHVybiBpbmZsdChkYXRhLnN1YmFycmF5KGd6cyhkYXRhKSwgLTgpLCBvdXQgfHwgbmV3IHU4KGd6bChkYXRhKSkpO1xufVxuLyoqXG4gKiBTdHJlYW1pbmcgWmxpYiBjb21wcmVzc2lvblxuICovXG52YXIgWmxpYiA9IC8qI19fUFVSRV9fKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBabGliKG9wdHMsIGNiKSB7XG4gICAgICAgIHRoaXMuYyA9IGFkbGVyKCk7XG4gICAgICAgIHRoaXMudiA9IDE7XG4gICAgICAgIERlZmxhdGUuY2FsbCh0aGlzLCBvcHRzLCBjYik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFB1c2hlcyBhIGNodW5rIHRvIGJlIHpsaWJiZWRcbiAgICAgKiBAcGFyYW0gY2h1bmsgVGhlIGNodW5rIHRvIHB1c2hcbiAgICAgKiBAcGFyYW0gZmluYWwgV2hldGhlciB0aGlzIGlzIHRoZSBsYXN0IGNodW5rXG4gICAgICovXG4gICAgWmxpYi5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uIChjaHVuaywgZmluYWwpIHtcbiAgICAgICAgRGVmbGF0ZS5wcm90b3R5cGUucHVzaC5jYWxsKHRoaXMsIGNodW5rLCBmaW5hbCk7XG4gICAgfTtcbiAgICBabGliLnByb3RvdHlwZS5wID0gZnVuY3Rpb24gKGMsIGYpIHtcbiAgICAgICAgdGhpcy5jLnAoYyk7XG4gICAgICAgIHZhciByYXcgPSBkb3B0KGMsIHRoaXMubywgdGhpcy52ICYmIDIsIGYgJiYgNCwgIWYpO1xuICAgICAgICBpZiAodGhpcy52KVxuICAgICAgICAgICAgemxoKHJhdywgdGhpcy5vKSwgdGhpcy52ID0gMDtcbiAgICAgICAgaWYgKGYpXG4gICAgICAgICAgICB3Ynl0ZXMocmF3LCByYXcubGVuZ3RoIC0gNCwgdGhpcy5jLmQoKSk7XG4gICAgICAgIHRoaXMub25kYXRhKHJhdywgZik7XG4gICAgfTtcbiAgICByZXR1cm4gWmxpYjtcbn0oKSk7XG5leHBvcnQgeyBabGliIH07XG4vKipcbiAqIEFzeW5jaHJvbm91cyBzdHJlYW1pbmcgWmxpYiBjb21wcmVzc2lvblxuICovXG52YXIgQXN5bmNabGliID0gLyojX19QVVJFX18qLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEFzeW5jWmxpYihvcHRzLCBjYikge1xuICAgICAgICBhc3RybWlmeShbXG4gICAgICAgICAgICBiRGZsdCxcbiAgICAgICAgICAgIHpsZSxcbiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHsgcmV0dXJuIFthc3RybSwgRGVmbGF0ZSwgWmxpYl07IH1cbiAgICAgICAgXSwgdGhpcywgQXN5bmNDbXBTdHJtLmNhbGwodGhpcywgb3B0cywgY2IpLCBmdW5jdGlvbiAoZXYpIHtcbiAgICAgICAgICAgIHZhciBzdHJtID0gbmV3IFpsaWIoZXYuZGF0YSk7XG4gICAgICAgICAgICBvbm1lc3NhZ2UgPSBhc3RybShzdHJtKTtcbiAgICAgICAgfSwgMTApO1xuICAgIH1cbiAgICByZXR1cm4gQXN5bmNabGliO1xufSgpKTtcbmV4cG9ydCB7IEFzeW5jWmxpYiB9O1xuZXhwb3J0IGZ1bmN0aW9uIHpsaWIoZGF0YSwgb3B0cywgY2IpIHtcbiAgICBpZiAoIWNiKVxuICAgICAgICBjYiA9IG9wdHMsIG9wdHMgPSB7fTtcbiAgICBpZiAodHlwZW9mIGNiICE9ICdmdW5jdGlvbicpXG4gICAgICAgIHRocm93ICdubyBjYWxsYmFjayc7XG4gICAgcmV0dXJuIGNiaWZ5KGRhdGEsIG9wdHMsIFtcbiAgICAgICAgYkRmbHQsXG4gICAgICAgIHpsZSxcbiAgICAgICAgZnVuY3Rpb24gKCkgeyByZXR1cm4gW3psaWJTeW5jXTsgfVxuICAgIF0sIGZ1bmN0aW9uIChldikgeyByZXR1cm4gcGJmKHpsaWJTeW5jKGV2LmRhdGFbMF0sIGV2LmRhdGFbMV0pKTsgfSwgNCwgY2IpO1xufVxuLyoqXG4gKiBDb21wcmVzcyBkYXRhIHdpdGggWmxpYlxuICogQHBhcmFtIGRhdGEgVGhlIGRhdGEgdG8gY29tcHJlc3NcbiAqIEBwYXJhbSBvcHRzIFRoZSBjb21wcmVzc2lvbiBvcHRpb25zXG4gKiBAcmV0dXJucyBUaGUgemxpYi1jb21wcmVzc2VkIHZlcnNpb24gb2YgdGhlIGRhdGFcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHpsaWJTeW5jKGRhdGEsIG9wdHMpIHtcbiAgICBpZiAob3B0cyA9PT0gdm9pZCAwKSB7IG9wdHMgPSB7fTsgfVxuICAgIHZhciBhID0gYWRsZXIoKTtcbiAgICBhLnAoZGF0YSk7XG4gICAgdmFyIGQgPSBkb3B0KGRhdGEsIG9wdHMsIDIsIDQpO1xuICAgIHJldHVybiB6bGgoZCwgb3B0cyksIHdieXRlcyhkLCBkLmxlbmd0aCAtIDQsIGEuZCgpKSwgZDtcbn1cbi8qKlxuICogU3RyZWFtaW5nIFpsaWIgZGVjb21wcmVzc2lvblxuICovXG52YXIgVW56bGliID0gLyojX19QVVJFX18qLyAoZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBabGliIGRlY29tcHJlc3Npb24gc3RyZWFtXG4gICAgICogQHBhcmFtIGNiIFRoZSBjYWxsYmFjayB0byBjYWxsIHdoZW5ldmVyIGRhdGEgaXMgaW5mbGF0ZWRcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBVbnpsaWIoY2IpIHtcbiAgICAgICAgdGhpcy52ID0gMTtcbiAgICAgICAgSW5mbGF0ZS5jYWxsKHRoaXMsIGNiKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHVzaGVzIGEgY2h1bmsgdG8gYmUgdW56bGliYmVkXG4gICAgICogQHBhcmFtIGNodW5rIFRoZSBjaHVuayB0byBwdXNoXG4gICAgICogQHBhcmFtIGZpbmFsIFdoZXRoZXIgdGhpcyBpcyB0aGUgbGFzdCBjaHVua1xuICAgICAqL1xuICAgIFVuemxpYi5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uIChjaHVuaywgZmluYWwpIHtcbiAgICAgICAgSW5mbGF0ZS5wcm90b3R5cGUuZS5jYWxsKHRoaXMsIGNodW5rKTtcbiAgICAgICAgaWYgKHRoaXMudikge1xuICAgICAgICAgICAgaWYgKHRoaXMucC5sZW5ndGggPCAyICYmICFmaW5hbClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB0aGlzLnAgPSB0aGlzLnAuc3ViYXJyYXkoMiksIHRoaXMudiA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZpbmFsKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wLmxlbmd0aCA8IDQpXG4gICAgICAgICAgICAgICAgdGhyb3cgJ2ludmFsaWQgemxpYiBzdHJlYW0nO1xuICAgICAgICAgICAgdGhpcy5wID0gdGhpcy5wLnN1YmFycmF5KDAsIC00KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBuZWNlc3NhcnkgdG8gcHJldmVudCBUUyBmcm9tIHVzaW5nIHRoZSBjbG9zdXJlIHZhbHVlXG4gICAgICAgIC8vIFRoaXMgYWxsb3dzIGZvciB3b3JrZXJpemF0aW9uIHRvIGZ1bmN0aW9uIGNvcnJlY3RseVxuICAgICAgICBJbmZsYXRlLnByb3RvdHlwZS5jLmNhbGwodGhpcywgZmluYWwpO1xuICAgIH07XG4gICAgcmV0dXJuIFVuemxpYjtcbn0oKSk7XG5leHBvcnQgeyBVbnpsaWIgfTtcbi8qKlxuICogQXN5bmNocm9ub3VzIHN0cmVhbWluZyBabGliIGRlY29tcHJlc3Npb25cbiAqL1xudmFyIEFzeW5jVW56bGliID0gLyojX19QVVJFX18qLyAoZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gYXN5bmNocm9ub3VzIFpsaWIgZGVjb21wcmVzc2lvbiBzdHJlYW1cbiAgICAgKiBAcGFyYW0gY2IgVGhlIGNhbGxiYWNrIHRvIGNhbGwgd2hlbmV2ZXIgZGF0YSBpcyBkZWZsYXRlZFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEFzeW5jVW56bGliKGNiKSB7XG4gICAgICAgIHRoaXMub25kYXRhID0gY2I7XG4gICAgICAgIGFzdHJtaWZ5KFtcbiAgICAgICAgICAgIGJJbmZsdCxcbiAgICAgICAgICAgIHp1bGUsXG4gICAgICAgICAgICBmdW5jdGlvbiAoKSB7IHJldHVybiBbYXN0cm0sIEluZmxhdGUsIFVuemxpYl07IH1cbiAgICAgICAgXSwgdGhpcywgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHN0cm0gPSBuZXcgVW56bGliKCk7XG4gICAgICAgICAgICBvbm1lc3NhZ2UgPSBhc3RybShzdHJtKTtcbiAgICAgICAgfSwgMTEpO1xuICAgIH1cbiAgICByZXR1cm4gQXN5bmNVbnpsaWI7XG59KCkpO1xuZXhwb3J0IHsgQXN5bmNVbnpsaWIgfTtcbmV4cG9ydCBmdW5jdGlvbiB1bnpsaWIoZGF0YSwgb3B0cywgY2IpIHtcbiAgICBpZiAoIWNiKVxuICAgICAgICBjYiA9IG9wdHMsIG9wdHMgPSB7fTtcbiAgICBpZiAodHlwZW9mIGNiICE9ICdmdW5jdGlvbicpXG4gICAgICAgIHRocm93ICdubyBjYWxsYmFjayc7XG4gICAgcmV0dXJuIGNiaWZ5KGRhdGEsIG9wdHMsIFtcbiAgICAgICAgYkluZmx0LFxuICAgICAgICB6dWxlLFxuICAgICAgICBmdW5jdGlvbiAoKSB7IHJldHVybiBbdW56bGliU3luY107IH1cbiAgICBdLCBmdW5jdGlvbiAoZXYpIHsgcmV0dXJuIHBiZih1bnpsaWJTeW5jKGV2LmRhdGFbMF0sIGd1OChldi5kYXRhWzFdKSkpOyB9LCA1LCBjYik7XG59XG4vKipcbiAqIEV4cGFuZHMgWmxpYiBkYXRhXG4gKiBAcGFyYW0gZGF0YSBUaGUgZGF0YSB0byBkZWNvbXByZXNzXG4gKiBAcGFyYW0gb3V0IFdoZXJlIHRvIHdyaXRlIHRoZSBkYXRhLiBTYXZlcyBtZW1vcnkgaWYgeW91IGtub3cgdGhlIGRlY29tcHJlc3NlZCBzaXplIGFuZCBwcm92aWRlIGFuIG91dHB1dCBidWZmZXIgb2YgdGhhdCBsZW5ndGguXG4gKiBAcmV0dXJucyBUaGUgZGVjb21wcmVzc2VkIHZlcnNpb24gb2YgdGhlIGRhdGFcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVuemxpYlN5bmMoZGF0YSwgb3V0KSB7XG4gICAgcmV0dXJuIGluZmx0KCh6bHYoZGF0YSksIGRhdGEuc3ViYXJyYXkoMiwgLTQpKSwgb3V0KTtcbn1cbi8vIERlZmF1bHQgYWxnb3JpdGhtIGZvciBjb21wcmVzc2lvbiAodXNlZCBiZWNhdXNlIGhhdmluZyBhIGtub3duIG91dHB1dCBzaXplIGFsbG93cyBmYXN0ZXIgZGVjb21wcmVzc2lvbilcbmV4cG9ydCB7IGd6aXAgYXMgY29tcHJlc3MsIEFzeW5jR3ppcCBhcyBBc3luY0NvbXByZXNzIH07XG4vLyBEZWZhdWx0IGFsZ29yaXRobSBmb3IgY29tcHJlc3Npb24gKHVzZWQgYmVjYXVzZSBoYXZpbmcgYSBrbm93biBvdXRwdXQgc2l6ZSBhbGxvd3MgZmFzdGVyIGRlY29tcHJlc3Npb24pXG5leHBvcnQgeyBnemlwU3luYyBhcyBjb21wcmVzc1N5bmMsIEd6aXAgYXMgQ29tcHJlc3MgfTtcbi8qKlxuICogU3RyZWFtaW5nIEdaSVAsIFpsaWIsIG9yIHJhdyBERUZMQVRFIGRlY29tcHJlc3Npb25cbiAqL1xudmFyIERlY29tcHJlc3MgPSAvKiNfX1BVUkVfXyovIChmdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGRlY29tcHJlc3Npb24gc3RyZWFtXG4gICAgICogQHBhcmFtIGNiIFRoZSBjYWxsYmFjayB0byBjYWxsIHdoZW5ldmVyIGRhdGEgaXMgZGVjb21wcmVzc2VkXG4gICAgICovXG4gICAgZnVuY3Rpb24gRGVjb21wcmVzcyhjYikge1xuICAgICAgICB0aGlzLkcgPSBHdW56aXA7XG4gICAgICAgIHRoaXMuSSA9IEluZmxhdGU7XG4gICAgICAgIHRoaXMuWiA9IFVuemxpYjtcbiAgICAgICAgdGhpcy5vbmRhdGEgPSBjYjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHVzaGVzIGEgY2h1bmsgdG8gYmUgZGVjb21wcmVzc2VkXG4gICAgICogQHBhcmFtIGNodW5rIFRoZSBjaHVuayB0byBwdXNoXG4gICAgICogQHBhcmFtIGZpbmFsIFdoZXRoZXIgdGhpcyBpcyB0aGUgbGFzdCBjaHVua1xuICAgICAqL1xuICAgIERlY29tcHJlc3MucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbiAoY2h1bmssIGZpbmFsKSB7XG4gICAgICAgIGlmICghdGhpcy5vbmRhdGEpXG4gICAgICAgICAgICB0aHJvdyAnbm8gc3RyZWFtIGhhbmRsZXInO1xuICAgICAgICBpZiAoIXRoaXMucykge1xuICAgICAgICAgICAgaWYgKHRoaXMucCAmJiB0aGlzLnAubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdmFyIG4gPSBuZXcgdTgodGhpcy5wLmxlbmd0aCArIGNodW5rLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgbi5zZXQodGhpcy5wKSwgbi5zZXQoY2h1bmssIHRoaXMucC5sZW5ndGgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHRoaXMucCA9IGNodW5rO1xuICAgICAgICAgICAgaWYgKHRoaXMucC5sZW5ndGggPiAyKSB7XG4gICAgICAgICAgICAgICAgdmFyIF90aGlzXzEgPSB0aGlzO1xuICAgICAgICAgICAgICAgIHZhciBjYiA9IGZ1bmN0aW9uICgpIHsgX3RoaXNfMS5vbmRhdGEuYXBwbHkoX3RoaXNfMSwgYXJndW1lbnRzKTsgfTtcbiAgICAgICAgICAgICAgICB0aGlzLnMgPSAodGhpcy5wWzBdID09IDMxICYmIHRoaXMucFsxXSA9PSAxMzkgJiYgdGhpcy5wWzJdID09IDgpXG4gICAgICAgICAgICAgICAgICAgID8gbmV3IHRoaXMuRyhjYilcbiAgICAgICAgICAgICAgICAgICAgOiAoKHRoaXMucFswXSAmIDE1KSAhPSA4IHx8ICh0aGlzLnBbMF0gPj4gNCkgPiA3IHx8ICgodGhpcy5wWzBdIDw8IDggfCB0aGlzLnBbMV0pICUgMzEpKVxuICAgICAgICAgICAgICAgICAgICAgICAgPyBuZXcgdGhpcy5JKGNiKVxuICAgICAgICAgICAgICAgICAgICAgICAgOiBuZXcgdGhpcy5aKGNiKTtcbiAgICAgICAgICAgICAgICB0aGlzLnMucHVzaCh0aGlzLnAsIGZpbmFsKTtcbiAgICAgICAgICAgICAgICB0aGlzLnAgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHRoaXMucy5wdXNoKGNodW5rLCBmaW5hbCk7XG4gICAgfTtcbiAgICByZXR1cm4gRGVjb21wcmVzcztcbn0oKSk7XG5leHBvcnQgeyBEZWNvbXByZXNzIH07XG4vKipcbiAqIEFzeW5jaHJvbm91cyBzdHJlYW1pbmcgR1pJUCwgWmxpYiwgb3IgcmF3IERFRkxBVEUgZGVjb21wcmVzc2lvblxuICovXG52YXIgQXN5bmNEZWNvbXByZXNzID0gLyojX19QVVJFX18qLyAoZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgKiBDcmVhdGVzIGFuIGFzeW5jaHJvbm91cyBkZWNvbXByZXNzaW9uIHN0cmVhbVxuICAgKiBAcGFyYW0gY2IgVGhlIGNhbGxiYWNrIHRvIGNhbGwgd2hlbmV2ZXIgZGF0YSBpcyBkZWNvbXByZXNzZWRcbiAgICovXG4gICAgZnVuY3Rpb24gQXN5bmNEZWNvbXByZXNzKGNiKSB7XG4gICAgICAgIHRoaXMuRyA9IEFzeW5jR3VuemlwO1xuICAgICAgICB0aGlzLkkgPSBBc3luY0luZmxhdGU7XG4gICAgICAgIHRoaXMuWiA9IEFzeW5jVW56bGliO1xuICAgICAgICB0aGlzLm9uZGF0YSA9IGNiO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQdXNoZXMgYSBjaHVuayB0byBiZSBkZWNvbXByZXNzZWRcbiAgICAgKiBAcGFyYW0gY2h1bmsgVGhlIGNodW5rIHRvIHB1c2hcbiAgICAgKiBAcGFyYW0gZmluYWwgV2hldGhlciB0aGlzIGlzIHRoZSBsYXN0IGNodW5rXG4gICAgICovXG4gICAgQXN5bmNEZWNvbXByZXNzLnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24gKGNodW5rLCBmaW5hbCkge1xuICAgICAgICBEZWNvbXByZXNzLnByb3RvdHlwZS5wdXNoLmNhbGwodGhpcywgY2h1bmssIGZpbmFsKTtcbiAgICB9O1xuICAgIHJldHVybiBBc3luY0RlY29tcHJlc3M7XG59KCkpO1xuZXhwb3J0IHsgQXN5bmNEZWNvbXByZXNzIH07XG5leHBvcnQgZnVuY3Rpb24gZGVjb21wcmVzcyhkYXRhLCBvcHRzLCBjYikge1xuICAgIGlmICghY2IpXG4gICAgICAgIGNiID0gb3B0cywgb3B0cyA9IHt9O1xuICAgIGlmICh0eXBlb2YgY2IgIT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgdGhyb3cgJ25vIGNhbGxiYWNrJztcbiAgICByZXR1cm4gKGRhdGFbMF0gPT0gMzEgJiYgZGF0YVsxXSA9PSAxMzkgJiYgZGF0YVsyXSA9PSA4KVxuICAgICAgICA/IGd1bnppcChkYXRhLCBvcHRzLCBjYilcbiAgICAgICAgOiAoKGRhdGFbMF0gJiAxNSkgIT0gOCB8fCAoZGF0YVswXSA+PiA0KSA+IDcgfHwgKChkYXRhWzBdIDw8IDggfCBkYXRhWzFdKSAlIDMxKSlcbiAgICAgICAgICAgID8gaW5mbGF0ZShkYXRhLCBvcHRzLCBjYilcbiAgICAgICAgICAgIDogdW56bGliKGRhdGEsIG9wdHMsIGNiKTtcbn1cbi8qKlxuICogRXhwYW5kcyBjb21wcmVzc2VkIEdaSVAsIFpsaWIsIG9yIHJhdyBERUZMQVRFIGRhdGEsIGF1dG9tYXRpY2FsbHkgZGV0ZWN0aW5nIHRoZSBmb3JtYXRcbiAqIEBwYXJhbSBkYXRhIFRoZSBkYXRhIHRvIGRlY29tcHJlc3NcbiAqIEBwYXJhbSBvdXQgV2hlcmUgdG8gd3JpdGUgdGhlIGRhdGEuIFNhdmVzIG1lbW9yeSBpZiB5b3Uga25vdyB0aGUgZGVjb21wcmVzc2VkIHNpemUgYW5kIHByb3ZpZGUgYW4gb3V0cHV0IGJ1ZmZlciBvZiB0aGF0IGxlbmd0aC5cbiAqIEByZXR1cm5zIFRoZSBkZWNvbXByZXNzZWQgdmVyc2lvbiBvZiB0aGUgZGF0YVxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVjb21wcmVzc1N5bmMoZGF0YSwgb3V0KSB7XG4gICAgcmV0dXJuIChkYXRhWzBdID09IDMxICYmIGRhdGFbMV0gPT0gMTM5ICYmIGRhdGFbMl0gPT0gOClcbiAgICAgICAgPyBndW56aXBTeW5jKGRhdGEsIG91dClcbiAgICAgICAgOiAoKGRhdGFbMF0gJiAxNSkgIT0gOCB8fCAoZGF0YVswXSA+PiA0KSA+IDcgfHwgKChkYXRhWzBdIDw8IDggfCBkYXRhWzFdKSAlIDMxKSlcbiAgICAgICAgICAgID8gaW5mbGF0ZVN5bmMoZGF0YSwgb3V0KVxuICAgICAgICAgICAgOiB1bnpsaWJTeW5jKGRhdGEsIG91dCk7XG59XG4vLyBmbGF0dGVuIGEgZGlyZWN0b3J5IHN0cnVjdHVyZVxudmFyIGZsdG4gPSBmdW5jdGlvbiAoZCwgcCwgdCwgbykge1xuICAgIGZvciAodmFyIGsgaW4gZCkge1xuICAgICAgICB2YXIgdmFsID0gZFtrXSwgbiA9IHAgKyBrO1xuICAgICAgICBpZiAodmFsIGluc3RhbmNlb2YgdTgpXG4gICAgICAgICAgICB0W25dID0gW3ZhbCwgb107XG4gICAgICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkodmFsKSlcbiAgICAgICAgICAgIHRbbl0gPSBbdmFsWzBdLCBtcmcobywgdmFsWzFdKV07XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGZsdG4odmFsLCBuICsgJy8nLCB0LCBvKTtcbiAgICB9XG59O1xuLyoqXG4gKiBDb252ZXJ0cyBhIHN0cmluZyBpbnRvIGEgVWludDhBcnJheSBmb3IgdXNlIHdpdGggY29tcHJlc3Npb24vZGVjb21wcmVzc2lvbiBtZXRob2RzXG4gKiBAcGFyYW0gc3RyIFRoZSBzdHJpbmcgdG8gZW5jb2RlXG4gKiBAcGFyYW0gbGF0aW4xIFdoZXRoZXIgb3Igbm90IHRvIGludGVycHJldCB0aGUgZGF0YSBhcyBMYXRpbi0xLiBUaGlzIHNob3VsZFxuICogICAgICAgICAgICAgICBub3QgbmVlZCB0byBiZSB0cnVlIHVubGVzcyBkZWNvZGluZyBhIGJpbmFyeSBzdHJpbmcuXG4gKiBAcmV0dXJucyBUaGUgc3RyaW5nIGVuY29kZWQgaW4gVVRGLTgvTGF0aW4tMSBiaW5hcnlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN0clRvVTgoc3RyLCBsYXRpbjEpIHtcbiAgICB2YXIgbCA9IHN0ci5sZW5ndGg7XG4gICAgaWYgKCFsYXRpbjEgJiYgdHlwZW9mIFRleHRFbmNvZGVyICE9ICd1bmRlZmluZWQnKVxuICAgICAgICByZXR1cm4gbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKHN0cik7XG4gICAgdmFyIGFyID0gbmV3IHU4KHN0ci5sZW5ndGggKyAoc3RyLmxlbmd0aCA+Pj4gMSkpO1xuICAgIHZhciBhaSA9IDA7XG4gICAgdmFyIHcgPSBmdW5jdGlvbiAodikgeyBhclthaSsrXSA9IHY7IH07XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsOyArK2kpIHtcbiAgICAgICAgaWYgKGFpICsgNSA+IGFyLmxlbmd0aCkge1xuICAgICAgICAgICAgdmFyIG4gPSBuZXcgdTgoYWkgKyA4ICsgKChsIC0gaSkgPDwgMSkpO1xuICAgICAgICAgICAgbi5zZXQoYXIpO1xuICAgICAgICAgICAgYXIgPSBuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBjID0gc3RyLmNoYXJDb2RlQXQoaSk7XG4gICAgICAgIGlmIChjIDwgMTI4IHx8IGxhdGluMSlcbiAgICAgICAgICAgIHcoYyk7XG4gICAgICAgIGVsc2UgaWYgKGMgPCAyMDQ4KVxuICAgICAgICAgICAgdygxOTIgfCAoYyA+Pj4gNikpLCB3KDEyOCB8IChjICYgNjMpKTtcbiAgICAgICAgZWxzZSBpZiAoYyA+IDU1Mjk1ICYmIGMgPCA1NzM0NClcbiAgICAgICAgICAgIGMgPSA2NTUzNiArIChjICYgMTAyMyA8PCAxMCkgfCAoc3RyLmNoYXJDb2RlQXQoKytpKSAmIDEwMjMpLFxuICAgICAgICAgICAgICAgIHcoMjQwIHwgKGMgPj4+IDE4KSksIHcoMTI4IHwgKChjID4+PiAxMikgJiA2MykpLCB3KDEyOCB8ICgoYyA+Pj4gNikgJiA2MykpLCB3KDEyOCB8IChjICYgNjMpKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgdygyMjQgfCAoYyA+Pj4gMTIpKSwgdygxMjggfCAoKGMgPj4+IDYpICYgNjMpKSwgdygxMjggfCAoYyAmIDYzKSk7XG4gICAgfVxuICAgIHJldHVybiBzbGMoYXIsIDAsIGFpKTtcbn1cbi8qKlxuICogQ29udmVydHMgYSBVaW50OEFycmF5IHRvIGEgc3RyaW5nXG4gKiBAcGFyYW0gZGF0IFRoZSBkYXRhIHRvIGRlY29kZSB0byBzdHJpbmdcbiAqIEBwYXJhbSBsYXRpbjEgV2hldGhlciBvciBub3QgdG8gaW50ZXJwcmV0IHRoZSBkYXRhIGFzIExhdGluLTEuIFRoaXMgc2hvdWxkXG4gKiAgICAgICAgICAgICAgIG5vdCBuZWVkIHRvIGJlIHRydWUgdW5sZXNzIGVuY29kaW5nIHRvIGJpbmFyeSBzdHJpbmcuXG4gKiBAcmV0dXJucyBUaGUgb3JpZ2luYWwgVVRGLTgvTGF0aW4tMSBzdHJpbmdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN0ckZyb21VOChkYXQsIGxhdGluMSkge1xuICAgIHZhciByID0gJyc7XG4gICAgaWYgKCFsYXRpbjEgJiYgdHlwZW9mIFRleHREZWNvZGVyICE9ICd1bmRlZmluZWQnKVxuICAgICAgICByZXR1cm4gbmV3IFRleHREZWNvZGVyKCkuZGVjb2RlKGRhdCk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYXQubGVuZ3RoOykge1xuICAgICAgICB2YXIgYyA9IGRhdFtpKytdO1xuICAgICAgICBpZiAoYyA8IDEyOCB8fCBsYXRpbjEpXG4gICAgICAgICAgICByICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYyk7XG4gICAgICAgIGVsc2UgaWYgKGMgPCAyMjQpXG4gICAgICAgICAgICByICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoKGMgJiAzMSkgPDwgNiB8IChkYXRbaSsrXSAmIDYzKSk7XG4gICAgICAgIGVsc2UgaWYgKGMgPCAyNDApXG4gICAgICAgICAgICByICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoKGMgJiAxNSkgPDwgMTIgfCAoZGF0W2krK10gJiA2MykgPDwgNiB8IChkYXRbaSsrXSAmIDYzKSk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGMgPSAoKGMgJiAxNSkgPDwgMTggfCAoZGF0W2krK10gJiA2MykgPDwgMTIgfCAoZGF0W2krK10gJiA2MykgPDwgNiB8IChkYXRbaSsrXSAmIDYzKSkgLSA2NTUzNixcbiAgICAgICAgICAgICAgICByICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoNTUyOTYgfCAoYyA+PiAxMCksIDU2MzIwIHwgKGMgJiAxMDIzKSk7XG4gICAgfVxuICAgIHJldHVybiByO1xufVxuO1xuLy8gc2tpcCBsb2NhbCB6aXAgaGVhZGVyXG52YXIgc2x6aCA9IGZ1bmN0aW9uIChkLCBiKSB7IHJldHVybiBiICsgMzAgKyBiMihkLCBiICsgMjYpICsgYjIoZCwgYiArIDI4KTsgfTtcbi8vIHJlYWQgemlwIGhlYWRlclxudmFyIHpoID0gZnVuY3Rpb24gKGQsIGIsIHopIHtcbiAgICB2YXIgZm5sID0gYjIoZCwgYiArIDI4KSwgZm4gPSBzdHJGcm9tVTgoZC5zdWJhcnJheShiICsgNDYsIGIgKyA0NiArIGZubCksICEoYjIoZCwgYiArIDgpICYgMjA0OCkpLCBlcyA9IGIgKyA0NiArIGZubDtcbiAgICB2YXIgX2EgPSB6ID8gejY0ZShkLCBlcykgOiBbYjQoZCwgYiArIDIwKSwgYjQoZCwgYiArIDI0KSwgYjQoZCwgYiArIDQyKV0sIHNjID0gX2FbMF0sIHN1ID0gX2FbMV0sIG9mZiA9IF9hWzJdO1xuICAgIHJldHVybiBbYjIoZCwgYiArIDEwKSwgc2MsIHN1LCBmbiwgZXMgKyBiMihkLCBiICsgMzApICsgYjIoZCwgYiArIDMyKSwgb2ZmXTtcbn07XG4vLyByZWFkIHppcDY0IGV4dHJhIGZpZWxkXG52YXIgejY0ZSA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICg7IGIyKGQsIGIpICE9IDE7IGIgKz0gNCArIGIyKGQsIGIgKyAyKSlcbiAgICAgICAgO1xuICAgIHJldHVybiBbYjQoZCwgYiArIDEyKSwgYjQoZCwgYiArIDQpLCBiNChkLCBiICsgMjApXTtcbn07XG4vLyB3cml0ZSB6aXAgaGVhZGVyXG52YXIgd3poID0gZnVuY3Rpb24gKGQsIGIsIGMsIGNtcCwgc3UsIGZuLCB1LCBvLCBjZSwgdCkge1xuICAgIHZhciBmbCA9IGZuLmxlbmd0aCwgbCA9IGNtcC5sZW5ndGg7XG4gICAgd2J5dGVzKGQsIGIsIGNlICE9IG51bGwgPyAweDIwMTRCNTAgOiAweDQwMzRCNTApLCBiICs9IDQ7XG4gICAgaWYgKGNlICE9IG51bGwpXG4gICAgICAgIGRbYl0gPSAyMCwgYiArPSAyO1xuICAgIGRbYl0gPSAyMCwgYiArPSAyOyAvLyBzcGVjIGNvbXBsaWFuY2U/IHdoYXQncyB0aGF0P1xuICAgIGRbYisrXSA9ICh0ID09IDggJiYgKG8ubGV2ZWwgPT0gMSA/IDYgOiBvLmxldmVsIDwgNiA/IDQgOiBvLmxldmVsID09IDkgPyAyIDogMCkpLCBkW2IrK10gPSB1ICYmIDg7XG4gICAgZFtiXSA9IHQsIGIgKz0gMjtcbiAgICB2YXIgZHQgPSBuZXcgRGF0ZShvLm10aW1lIHx8IERhdGUubm93KCkpLCB5ID0gZHQuZ2V0RnVsbFllYXIoKSAtIDE5ODA7XG4gICAgaWYgKHkgPCAwIHx8IHkgPiAxMTkpXG4gICAgICAgIHRocm93ICdkYXRlIG5vdCBpbiByYW5nZSAxOTgwLTIwOTknO1xuICAgIHdieXRlcyhkLCBiLCAoKHkgPDwgMjQpICogMikgfCAoKGR0LmdldE1vbnRoKCkgKyAxKSA8PCAyMSkgfCAoZHQuZ2V0RGF0ZSgpIDw8IDE2KSB8IChkdC5nZXRIb3VycygpIDw8IDExKSB8IChkdC5nZXRNaW51dGVzKCkgPDwgNSkgfCAoZHQuZ2V0U2Vjb25kcygpID4+PiAxKSk7XG4gICAgYiArPSA0O1xuICAgIHdieXRlcyhkLCBiLCBjKTtcbiAgICB3Ynl0ZXMoZCwgYiArIDQsIGwpO1xuICAgIHdieXRlcyhkLCBiICsgOCwgc3UpO1xuICAgIHdieXRlcyhkLCBiICsgMTIsIGZsKSwgYiArPSAxNjsgLy8gc2tpcCBleHRyYSBmaWVsZCwgY29tbWVudFxuICAgIGlmIChjZSAhPSBudWxsKVxuICAgICAgICB3Ynl0ZXMoZCwgYiArPSAxMCwgY2UpLCBiICs9IDQ7XG4gICAgZC5zZXQoZm4sIGIpO1xuICAgIGIgKz0gZmw7XG4gICAgaWYgKGNlID09IG51bGwpXG4gICAgICAgIGQuc2V0KGNtcCwgYik7XG59O1xuLy8gd3JpdGUgemlwIGZvb3RlciAoZW5kIG9mIGNlbnRyYWwgZGlyZWN0b3J5KVxudmFyIHd6ZiA9IGZ1bmN0aW9uIChvLCBiLCBjLCBkLCBlKSB7XG4gICAgd2J5dGVzKG8sIGIsIDB4NjA1NEI1MCk7IC8vIHNraXAgZGlza1xuICAgIHdieXRlcyhvLCBiICsgOCwgYyk7XG4gICAgd2J5dGVzKG8sIGIgKyAxMCwgYyk7XG4gICAgd2J5dGVzKG8sIGIgKyAxMiwgZCk7XG4gICAgd2J5dGVzKG8sIGIgKyAxNiwgZSk7XG59O1xuZXhwb3J0IGZ1bmN0aW9uIHppcChkYXRhLCBvcHRzLCBjYikge1xuICAgIGlmICghY2IpXG4gICAgICAgIGNiID0gb3B0cywgb3B0cyA9IHt9O1xuICAgIGlmICh0eXBlb2YgY2IgIT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgdGhyb3cgJ25vIGNhbGxiYWNrJztcbiAgICB2YXIgciA9IHt9O1xuICAgIGZsdG4oZGF0YSwgJycsIHIsIG9wdHMpO1xuICAgIHZhciBrID0gT2JqZWN0LmtleXMocik7XG4gICAgdmFyIGxmdCA9IGsubGVuZ3RoLCBvID0gMCwgdG90ID0gMDtcbiAgICB2YXIgc2xmdCA9IGxmdCwgZmlsZXMgPSBuZXcgQXJyYXkobGZ0KTtcbiAgICB2YXIgdGVybSA9IFtdO1xuICAgIHZhciB0QWxsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRlcm0ubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICB0ZXJtW2ldKCk7XG4gICAgfTtcbiAgICB2YXIgY2JmID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgb3V0ID0gbmV3IHU4KHRvdCArIDIyKSwgb2UgPSBvLCBjZGwgPSB0b3QgLSBvO1xuICAgICAgICB0b3QgPSAwO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNsZnQ7ICsraSkge1xuICAgICAgICAgICAgdmFyIGYgPSBmaWxlc1tpXTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgd3poKG91dCwgdG90LCBmLmMsIGYuZCwgZi5tLCBmLm4sIGYudSwgZi5wLCBudWxsLCBmLnQpO1xuICAgICAgICAgICAgICAgIHd6aChvdXQsIG8sIGYuYywgZi5kLCBmLm0sIGYubiwgZi51LCBmLnAsIHRvdCwgZi50KSwgbyArPSA0NiArIGYubi5sZW5ndGgsIHRvdCArPSAzMCArIGYubi5sZW5ndGggKyBmLmQubGVuZ3RoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2IoZSwgbnVsbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgd3pmKG91dCwgbywgZmlsZXMubGVuZ3RoLCBjZGwsIG9lKTtcbiAgICAgICAgY2IobnVsbCwgb3V0KTtcbiAgICB9O1xuICAgIGlmICghbGZ0KVxuICAgICAgICBjYmYoKTtcbiAgICB2YXIgX2xvb3BfMSA9IGZ1bmN0aW9uIChpKSB7XG4gICAgICAgIHZhciBmbiA9IGtbaV07XG4gICAgICAgIHZhciBfYSA9IHJbZm5dLCBmaWxlID0gX2FbMF0sIHAgPSBfYVsxXTtcbiAgICAgICAgdmFyIGMgPSBjcmMoKSwgbSA9IGZpbGUubGVuZ3RoO1xuICAgICAgICBjLnAoZmlsZSk7XG4gICAgICAgIHZhciBuID0gc3RyVG9VOChmbiksIHMgPSBuLmxlbmd0aDtcbiAgICAgICAgdmFyIHQgPSBwLmxldmVsID09IDAgPyAwIDogODtcbiAgICAgICAgdmFyIGNibCA9IGZ1bmN0aW9uIChlLCBkKSB7XG4gICAgICAgICAgICBpZiAoZSkge1xuICAgICAgICAgICAgICAgIHRBbGwoKTtcbiAgICAgICAgICAgICAgICBjYihlLCBudWxsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBsID0gZC5sZW5ndGg7XG4gICAgICAgICAgICAgICAgZmlsZXNbaV0gPSB7XG4gICAgICAgICAgICAgICAgICAgIHQ6IHQsXG4gICAgICAgICAgICAgICAgICAgIGQ6IGQsXG4gICAgICAgICAgICAgICAgICAgIG06IG0sXG4gICAgICAgICAgICAgICAgICAgIGM6IGMuZCgpLFxuICAgICAgICAgICAgICAgICAgICB1OiBmbi5sZW5ndGggIT0gbCxcbiAgICAgICAgICAgICAgICAgICAgbjogbixcbiAgICAgICAgICAgICAgICAgICAgcDogcFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgbyArPSAzMCArIHMgKyBsO1xuICAgICAgICAgICAgICAgIHRvdCArPSA3NiArIDIgKiBzICsgbDtcbiAgICAgICAgICAgICAgICBpZiAoIS0tbGZ0KVxuICAgICAgICAgICAgICAgICAgICBjYmYoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgaWYgKG4ubGVuZ3RoID4gNjU1MzUpXG4gICAgICAgICAgICBjYmwoJ2ZpbGVuYW1lIHRvbyBsb25nJywgbnVsbCk7XG4gICAgICAgIGlmICghdClcbiAgICAgICAgICAgIGNibChudWxsLCBmaWxlKTtcbiAgICAgICAgZWxzZSBpZiAobSA8IDE2MDAwMCkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjYmwobnVsbCwgZGVmbGF0ZVN5bmMoZmlsZSwgcCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBjYmwoZSwgbnVsbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgdGVybS5wdXNoKGRlZmxhdGUoZmlsZSwgcCwgY2JsKSk7XG4gICAgfTtcbiAgICAvLyBDYW5ub3QgdXNlIGxmdCBiZWNhdXNlIGl0IGNhbiBkZWNyZWFzZVxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2xmdDsgKytpKSB7XG4gICAgICAgIF9sb29wXzEoaSk7XG4gICAgfVxuICAgIHJldHVybiB0QWxsO1xufVxuLyoqXG4gKiBTeW5jaHJvbm91c2x5IGNyZWF0ZXMgYSBaSVAgZmlsZS4gUHJlZmVyIHVzaW5nIGB6aXBgIGZvciBiZXR0ZXIgcGVyZm9ybWFuY2VcbiAqIHdpdGggbW9yZSB0aGFuIG9uZSBmaWxlLlxuICogQHBhcmFtIGRhdGEgVGhlIGRpcmVjdG9yeSBzdHJ1Y3R1cmUgZm9yIHRoZSBaSVAgYXJjaGl2ZVxuICogQHBhcmFtIG9wdHMgVGhlIG1haW4gb3B0aW9ucywgbWVyZ2VkIHdpdGggcGVyLWZpbGUgb3B0aW9uc1xuICogQHJldHVybnMgVGhlIGdlbmVyYXRlZCBaSVAgYXJjaGl2ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gemlwU3luYyhkYXRhLCBvcHRzKSB7XG4gICAgaWYgKG9wdHMgPT09IHZvaWQgMCkgeyBvcHRzID0ge307IH1cbiAgICB2YXIgciA9IHt9O1xuICAgIHZhciBmaWxlcyA9IFtdO1xuICAgIGZsdG4oZGF0YSwgJycsIHIsIG9wdHMpO1xuICAgIHZhciBvID0gMDtcbiAgICB2YXIgdG90ID0gMDtcbiAgICBmb3IgKHZhciBmbiBpbiByKSB7XG4gICAgICAgIHZhciBfYSA9IHJbZm5dLCBmaWxlID0gX2FbMF0sIHAgPSBfYVsxXTtcbiAgICAgICAgdmFyIHQgPSBwLmxldmVsID09IDAgPyAwIDogODtcbiAgICAgICAgdmFyIG4gPSBzdHJUb1U4KGZuKSwgcyA9IG4ubGVuZ3RoO1xuICAgICAgICBpZiAobi5sZW5ndGggPiA2NTUzNSlcbiAgICAgICAgICAgIHRocm93ICdmaWxlbmFtZSB0b28gbG9uZyc7XG4gICAgICAgIHZhciBkID0gdCA/IGRlZmxhdGVTeW5jKGZpbGUsIHApIDogZmlsZSwgbCA9IGQubGVuZ3RoO1xuICAgICAgICB2YXIgYyA9IGNyYygpO1xuICAgICAgICBjLnAoZmlsZSk7XG4gICAgICAgIGZpbGVzLnB1c2goe1xuICAgICAgICAgICAgdDogdCxcbiAgICAgICAgICAgIGQ6IGQsXG4gICAgICAgICAgICBtOiBmaWxlLmxlbmd0aCxcbiAgICAgICAgICAgIGM6IGMuZCgpLFxuICAgICAgICAgICAgdTogZm4ubGVuZ3RoICE9IHMsXG4gICAgICAgICAgICBuOiBuLFxuICAgICAgICAgICAgbzogbyxcbiAgICAgICAgICAgIHA6IHBcbiAgICAgICAgfSk7XG4gICAgICAgIG8gKz0gMzAgKyBzICsgbDtcbiAgICAgICAgdG90ICs9IDc2ICsgMiAqIHMgKyBsO1xuICAgIH1cbiAgICB2YXIgb3V0ID0gbmV3IHU4KHRvdCArIDIyKSwgb2UgPSBvLCBjZGwgPSB0b3QgLSBvO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZmlsZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdmFyIGYgPSBmaWxlc1tpXTtcbiAgICAgICAgd3poKG91dCwgZi5vLCBmLmMsIGYuZCwgZi5tLCBmLm4sIGYudSwgZi5wLCBudWxsLCBmLnQpO1xuICAgICAgICB3emgob3V0LCBvLCBmLmMsIGYuZCwgZi5tLCBmLm4sIGYudSwgZi5wLCBmLm8sIGYudCksIG8gKz0gNDYgKyBmLm4ubGVuZ3RoO1xuICAgIH1cbiAgICB3emYob3V0LCBvLCBmaWxlcy5sZW5ndGgsIGNkbCwgb2UpO1xuICAgIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIEFzeW5jaHJvbm91c2x5IGRlY29tcHJlc3NlcyBhIFpJUCBhcmNoaXZlXG4gKiBAcGFyYW0gZGF0YSBUaGUgcmF3IGNvbXByZXNzZWQgWklQIGZpbGVcbiAqIEBwYXJhbSBjYiBUaGUgY2FsbGJhY2sgdG8gY2FsbCB3aXRoIHRoZSBkZWNvbXByZXNzZWQgZmlsZXNcbiAqIEByZXR1cm5zIEEgZnVuY3Rpb24gdGhhdCBjYW4gYmUgdXNlZCB0byBpbW1lZGlhdGVseSB0ZXJtaW5hdGUgdGhlIHVuemlwcGluZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gdW56aXAoZGF0YSwgY2IpIHtcbiAgICBpZiAodHlwZW9mIGNiICE9ICdmdW5jdGlvbicpXG4gICAgICAgIHRocm93ICdubyBjYWxsYmFjayc7XG4gICAgdmFyIHRlcm0gPSBbXTtcbiAgICB2YXIgdEFsbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0ZXJtLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgdGVybVtpXSgpO1xuICAgIH07XG4gICAgdmFyIGZpbGVzID0ge307XG4gICAgdmFyIGUgPSBkYXRhLmxlbmd0aCAtIDIyO1xuICAgIGZvciAoOyBiNChkYXRhLCBlKSAhPSAweDYwNTRCNTA7IC0tZSkge1xuICAgICAgICBpZiAoIWUgfHwgZGF0YS5sZW5ndGggLSBlID4gNjU1NTgpIHtcbiAgICAgICAgICAgIGNiKCdpbnZhbGlkIHppcCBmaWxlJywgbnVsbCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICB9XG4gICAgO1xuICAgIHZhciBsZnQgPSBiMihkYXRhLCBlICsgOCk7XG4gICAgaWYgKCFsZnQpXG4gICAgICAgIGNiKG51bGwsIHt9KTtcbiAgICB2YXIgYyA9IGxmdDtcbiAgICB2YXIgbyA9IGI0KGRhdGEsIGUgKyAxNik7XG4gICAgdmFyIHogPSBvID09IDQyOTQ5NjcyOTU7XG4gICAgaWYgKHopIHtcbiAgICAgICAgZSA9IGI0KGRhdGEsIGUgLSAxMik7XG4gICAgICAgIGlmIChiNChkYXRhLCBlKSAhPSAweDYwNjRCNTApXG4gICAgICAgICAgICB0aHJvdyAnaW52YWxpZCB6aXAgZmlsZSc7XG4gICAgICAgIGMgPSBsZnQgPSBiNChkYXRhLCBlICsgMzIpO1xuICAgICAgICBvID0gYjQoZGF0YSwgZSArIDQ4KTtcbiAgICB9XG4gICAgdmFyIF9sb29wXzIgPSBmdW5jdGlvbiAoaSkge1xuICAgICAgICB2YXIgX2EgPSB6aChkYXRhLCBvLCB6KSwgY18xID0gX2FbMF0sIHNjID0gX2FbMV0sIHN1ID0gX2FbMl0sIGZuID0gX2FbM10sIG5vID0gX2FbNF0sIG9mZiA9IF9hWzVdLCBiID0gc2x6aChkYXRhLCBvZmYpO1xuICAgICAgICBvID0gbm87XG4gICAgICAgIHZhciBjYmwgPSBmdW5jdGlvbiAoZSwgZCkge1xuICAgICAgICAgICAgaWYgKGUpIHtcbiAgICAgICAgICAgICAgICB0QWxsKCk7XG4gICAgICAgICAgICAgICAgY2IoZSwgbnVsbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBmaWxlc1tmbl0gPSBkO1xuICAgICAgICAgICAgICAgIGlmICghLS1sZnQpXG4gICAgICAgICAgICAgICAgICAgIGNiKG51bGwsIGZpbGVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgaWYgKCFjXzEpXG4gICAgICAgICAgICBjYmwobnVsbCwgc2xjKGRhdGEsIGIsIGIgKyBzYykpO1xuICAgICAgICBlbHNlIGlmIChjXzEgPT0gOCkge1xuICAgICAgICAgICAgdmFyIGluZmwgPSBkYXRhLnN1YmFycmF5KGIsIGIgKyBzYyk7XG4gICAgICAgICAgICBpZiAoc2MgPCAzMjAwMDApIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjYmwobnVsbCwgaW5mbGF0ZVN5bmMoaW5mbCwgbmV3IHU4KHN1KSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICBjYmwoZSwgbnVsbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHRlcm0ucHVzaChpbmZsYXRlKGluZmwsIHsgc2l6ZTogc3UgfSwgY2JsKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgY2JsKCd1bmtub3duIGNvbXByZXNzaW9uIHR5cGUgJyArIGNfMSwgbnVsbCk7XG4gICAgfTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGM7ICsraSkge1xuICAgICAgICBfbG9vcF8yKGkpO1xuICAgIH1cbiAgICByZXR1cm4gdEFsbDtcbn1cbi8qKlxuICogU3luY2hyb25vdXNseSBkZWNvbXByZXNzZXMgYSBaSVAgYXJjaGl2ZS4gUHJlZmVyIHVzaW5nIGB1bnppcGAgZm9yIGJldHRlclxuICogcGVyZm9ybWFuY2Ugd2l0aCBtb3JlIHRoYW4gb25lIGZpbGUuXG4gKiBAcGFyYW0gZGF0YSBUaGUgcmF3IGNvbXByZXNzZWQgWklQIGZpbGVcbiAqIEByZXR1cm5zIFRoZSBkZWNvbXByZXNzZWQgZmlsZXNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVuemlwU3luYyhkYXRhKSB7XG4gICAgdmFyIGZpbGVzID0ge307XG4gICAgdmFyIGUgPSBkYXRhLmxlbmd0aCAtIDIyO1xuICAgIGZvciAoOyBiNChkYXRhLCBlKSAhPSAweDYwNTRCNTA7IC0tZSkge1xuICAgICAgICBpZiAoIWUgfHwgZGF0YS5sZW5ndGggLSBlID4gNjU1NTgpXG4gICAgICAgICAgICB0aHJvdyAnaW52YWxpZCB6aXAgZmlsZSc7XG4gICAgfVxuICAgIDtcbiAgICB2YXIgYyA9IGIyKGRhdGEsIGUgKyA4KTtcbiAgICBpZiAoIWMpXG4gICAgICAgIHJldHVybiB7fTtcbiAgICB2YXIgbyA9IGI0KGRhdGEsIGUgKyAxNik7XG4gICAgdmFyIHogPSBvID09IDQyOTQ5NjcyOTU7XG4gICAgaWYgKHopIHtcbiAgICAgICAgZSA9IGI0KGRhdGEsIGUgLSAxMik7XG4gICAgICAgIGlmIChiNChkYXRhLCBlKSAhPSAweDYwNjRCNTApXG4gICAgICAgICAgICB0aHJvdyAnaW52YWxpZCB6aXAgZmlsZSc7XG4gICAgICAgIGMgPSBiNChkYXRhLCBlICsgMzIpO1xuICAgICAgICBvID0gYjQoZGF0YSwgZSArIDQ4KTtcbiAgICB9XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjOyArK2kpIHtcbiAgICAgICAgdmFyIF9hID0gemgoZGF0YSwgbywgeiksIGNfMiA9IF9hWzBdLCBzYyA9IF9hWzFdLCBzdSA9IF9hWzJdLCBmbiA9IF9hWzNdLCBubyA9IF9hWzRdLCBvZmYgPSBfYVs1XSwgYiA9IHNsemgoZGF0YSwgb2ZmKTtcbiAgICAgICAgbyA9IG5vO1xuICAgICAgICBpZiAoIWNfMilcbiAgICAgICAgICAgIGZpbGVzW2ZuXSA9IHNsYyhkYXRhLCBiLCBiICsgc2MpO1xuICAgICAgICBlbHNlIGlmIChjXzIgPT0gOClcbiAgICAgICAgICAgIGZpbGVzW2ZuXSA9IGluZmxhdGVTeW5jKGRhdGEuc3ViYXJyYXkoYiwgYiArIHNjKSwgbmV3IHU4KHN1KSk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHRocm93ICd1bmtub3duIGNvbXByZXNzaW9uIHR5cGUgJyArIGNfMjtcbiAgICB9XG4gICAgcmV0dXJuIGZpbGVzO1xufVxuIiwgImltcG9ydCB0eXBlIHsgTWFza0lucHV0T3B0aW9ucywgU2xpbURPTU9wdGlvbnMgfSBmcm9tICdycndlYi1zbmFwc2hvdCdcbmltcG9ydCB7IFBvc3RIb2cgfSBmcm9tICcuL3Bvc3Rob2ctY29yZSdcbmltcG9ydCB7IFJldHJ5UXVldWUgfSBmcm9tICcuL3JldHJ5LXF1ZXVlJ1xuXG5leHBvcnQgdHlwZSBQcm9wZXJ0eSA9IGFueVxuZXhwb3J0IHR5cGUgUHJvcGVydGllcyA9IFJlY29yZDxzdHJpbmcsIFByb3BlcnR5PlxuXG5leHBvcnQgaW50ZXJmYWNlIENhcHR1cmVSZXN1bHQge1xuICAgIHV1aWQ6IHN0cmluZ1xuICAgIGV2ZW50OiBzdHJpbmdcbiAgICBwcm9wZXJ0aWVzOiBQcm9wZXJ0aWVzXG4gICAgJHNldD86IFByb3BlcnRpZXNcbiAgICAkc2V0X29uY2U/OiBQcm9wZXJ0aWVzXG4gICAgdGltZXN0YW1wPzogRGF0ZVxufVxuZXhwb3J0IHR5cGUgQ2FwdHVyZUNhbGxiYWNrID0gKHJlc3BvbnNlOiBhbnksIGRhdGE6IGFueSkgPT4gdm9pZFxuXG5leHBvcnQgdHlwZSBBdXRvY2FwdHVyZUNvbXBhdGlibGVFbGVtZW50ID0gJ2EnIHwgJ2J1dHRvbicgfCAnZm9ybScgfCAnaW5wdXQnIHwgJ3NlbGVjdCcgfCAndGV4dGFyZWEnIHwgJ2xhYmVsJ1xuZXhwb3J0IHR5cGUgRG9tQXV0b2NhcHR1cmVFdmVudHMgPSAnY2xpY2snIHwgJ2NoYW5nZScgfCAnc3VibWl0J1xuXG4vKipcbiAqIElmIGFuIGFycmF5IGlzIHBhc3NlZCBmb3IgYW4gYWxsb3dsaXN0LCBhdXRvY2FwdHVyZSBldmVudHMgd2lsbCBvbmx5IGJlIHNlbnQgZm9yIGVsZW1lbnRzIG1hdGNoaW5nXG4gKiBhdCBsZWFzdCBvbmUgb2YgdGhlIGVsZW1lbnRzIGluIHRoZSBhcnJheS4gTXVsdGlwbGUgYWxsb3dsaXN0cyBjYW4gYmUgdXNlZFxuICovXG5leHBvcnQgaW50ZXJmYWNlIEF1dG9jYXB0dXJlQ29uZmlnIHtcbiAgICAvKipcbiAgICAgKiBMaXN0IG9mIFVSTHMgdG8gYWxsb3cgYXV0b2NhcHR1cmUgb24sIGNhbiBiZSBzdHJpbmdzIHRvIG1hdGNoXG4gICAgICogb3IgcmVnZXhlcyBlLmcuIFsnaHR0cHM6Ly9leGFtcGxlLmNvbScsICd0ZXN0LmNvbS8uKiddXG4gICAgICovXG4gICAgdXJsX2FsbG93bGlzdD86IChzdHJpbmcgfCBSZWdFeHApW11cblxuICAgIC8qKlxuICAgICAqIExpc3Qgb2YgRE9NIGV2ZW50cyB0byBhbGxvdyBhdXRvY2FwdHVyZSBvbiAgZS5nLiBbJ2NsaWNrJywgJ2NoYW5nZScsICdzdWJtaXQnXVxuICAgICAqL1xuICAgIGRvbV9ldmVudF9hbGxvd2xpc3Q/OiBEb21BdXRvY2FwdHVyZUV2ZW50c1tdXG5cbiAgICAvKipcbiAgICAgKiBMaXN0IG9mIERPTSBlbGVtZW50cyB0byBhbGxvdyBhdXRvY2FwdHVyZSBvblxuICAgICAqIGUuZy4gWydhJywgJ2J1dHRvbicsICdmb3JtJywgJ2lucHV0JywgJ3NlbGVjdCcsICd0ZXh0YXJlYScsICdsYWJlbCddXG4gICAgICogd2UgY29uc2lkZXIgdGhlIHRyZWUgb2YgZWxlbWVudHMgZnJvbSB0aGUgcm9vdCB0byB0aGUgdGFyZ2V0IGVsZW1lbnQgb2YgdGhlIGNsaWNrIGV2ZW50XG4gICAgICogc28gZm9yIHRoZSB0cmVlIGRpdiA+IGRpdiA+IGJ1dHRvbiA+IHN2Z1xuICAgICAqIGlmIHRoZSBhbGxvd2xpc3QgaGFzIGJ1dHRvbiB0aGVuIHdlIGFsbG93IHRoZSBjYXB0dXJlIHdoZW4gdGhlIGJ1dHRvbiBvciB0aGUgc3ZnIGlzIHRoZSBjbGljayB0YXJnZXRcbiAgICAgKiBidXQgbm90IGlmIGVpdGhlciBvZiB0aGUgZGl2cyBhcmUgZGV0ZWN0ZWQgYXMgdGhlIGNsaWNrIHRhcmdldFxuICAgICAqL1xuICAgIGVsZW1lbnRfYWxsb3dsaXN0PzogQXV0b2NhcHR1cmVDb21wYXRpYmxlRWxlbWVudFtdXG5cbiAgICAvKipcbiAgICAgKiBMaXN0IG9mIENTUyBzZWxlY3RvcnMgdG8gYWxsb3cgYXV0b2NhcHR1cmUgb25cbiAgICAgKiBlLmcuIFsnW3BoLWNhcHR1cmVdJ11cbiAgICAgKiB3ZSBjb25zaWRlciB0aGUgdHJlZSBvZiBlbGVtZW50cyBmcm9tIHRoZSByb290IHRvIHRoZSB0YXJnZXQgZWxlbWVudCBvZiB0aGUgY2xpY2sgZXZlbnRcbiAgICAgKiBzbyBmb3IgdGhlIHRyZWUgZGl2ID4gZGl2ID4gYnV0dG9uID4gc3ZnXG4gICAgICogYW5kIGFsbG93IGxpc3QgY29uZmlnIGBbJ1tpZF0nXWBcbiAgICAgKiB3ZSB3aWxsIGNhcHR1cmUgdGhlIGNsaWNrIGlmIHRoZSBjbGljay10YXJnZXQgb3IgaXRzIHBhcmVudHMgaGFzIGFueSBpZFxuICAgICAqL1xuICAgIGNzc19zZWxlY3Rvcl9hbGxvd2xpc3Q/OiBzdHJpbmdbXVxuXG4gICAgLyoqXG4gICAgICogRXhjbHVkZSBjZXJ0YWluIGVsZW1lbnQgYXR0cmlidXRlcyBmcm9tIGF1dG9jYXB0dXJlXG4gICAgICogRS5nLiBbJ2FyaWEtbGFiZWwnXSBvciBbZGF0YS1hdHRyLXBpaV1cbiAgICAgKi9cbiAgICBlbGVtZW50X2F0dHJpYnV0ZV9pZ25vcmVsaXN0Pzogc3RyaW5nW11cblxuICAgIGNhcHR1cmVfY29waWVkX3RleHQ/OiBib29sZWFuXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUG9zdEhvZ0NvbmZpZyB7XG4gICAgYXBpX2hvc3Q6IHN0cmluZ1xuICAgIGFwaV9tZXRob2Q6IHN0cmluZ1xuICAgIGFwaV90cmFuc3BvcnQ/OiAnWEhSJyB8ICdmZXRjaCdcbiAgICB1aV9ob3N0OiBzdHJpbmcgfCBudWxsXG4gICAgdG9rZW46IHN0cmluZ1xuICAgIGF1dG9jYXB0dXJlOiBib29sZWFuIHwgQXV0b2NhcHR1cmVDb25maWdcbiAgICByYWdlY2xpY2s6IGJvb2xlYW5cbiAgICBjcm9zc19zdWJkb21haW5fY29va2llOiBib29sZWFuXG4gICAgcGVyc2lzdGVuY2U6ICdsb2NhbFN0b3JhZ2UnIHwgJ2Nvb2tpZScgfCAnbWVtb3J5JyB8ICdsb2NhbFN0b3JhZ2UrY29va2llJyB8ICdzZXNzaW9uU3RvcmFnZSdcbiAgICBwZXJzaXN0ZW5jZV9uYW1lOiBzdHJpbmdcbiAgICBjb29raWVfbmFtZTogc3RyaW5nXG4gICAgbG9hZGVkOiAocG9zdGhvZ19pbnN0YW5jZTogUG9zdEhvZykgPT4gdm9pZFxuICAgIHN0b3JlX2dvb2dsZTogYm9vbGVhblxuICAgIGN1c3RvbV9jYW1wYWlnbl9wYXJhbXM6IHN0cmluZ1tdXG4gICAgLy8gYSBsaXN0IG9mIHN0cmluZ3MgdG8gYmUgdGVzdGVkIGFnYWluc3QgbmF2aWdhdG9yLnVzZXJBZ2VudCB0byBkZXRlcm1pbmUgaWYgdGhlIHNvdXJjZSBpcyBhIGJvdFxuICAgIC8vIHRoaXMgaXMgKiphZGRlZCB0byoqIHRoZSBkZWZhdWx0IGxpc3Qgb2YgYm90cyB0aGF0IHdlIGNoZWNrXG4gICAgLy8gZGVmYXVsdHMgdG8gdGhlIGVtcHR5IGFycmF5XG4gICAgY3VzdG9tX2Jsb2NrZWRfdXNlcmFnZW50czogc3RyaW5nW11cbiAgICBzYXZlX3JlZmVycmVyOiBib29sZWFuXG4gICAgdmVyYm9zZTogYm9vbGVhblxuICAgIGNhcHR1cmVfcGFnZXZpZXc6IGJvb2xlYW5cbiAgICBjYXB0dXJlX3BhZ2VsZWF2ZTogYm9vbGVhblxuICAgIGRlYnVnOiBib29sZWFuXG4gICAgY29va2llX2V4cGlyYXRpb246IG51bWJlclxuICAgIHVwZ3JhZGU6IGJvb2xlYW5cbiAgICBkaXNhYmxlX3Nlc3Npb25fcmVjb3JkaW5nOiBib29sZWFuXG4gICAgZGlzYWJsZV9wZXJzaXN0ZW5jZTogYm9vbGVhblxuICAgIC8qKiBAZGVwcmVjYXRlZCAtIHVzZSBgZGlzYWJsZV9wZXJzaXN0ZW5jZWAgaW5zdGVhZCAgKi9cbiAgICBkaXNhYmxlX2Nvb2tpZTogYm9vbGVhblxuICAgIGVuYWJsZV9yZWNvcmRpbmdfY29uc29sZV9sb2c/OiBib29sZWFuXG4gICAgc2VjdXJlX2Nvb2tpZTogYm9vbGVhblxuICAgIGlwOiBib29sZWFuXG4gICAgb3B0X291dF9jYXB0dXJpbmdfYnlfZGVmYXVsdDogYm9vbGVhblxuICAgIG9wdF9vdXRfcGVyc2lzdGVuY2VfYnlfZGVmYXVsdDogYm9vbGVhblxuICAgIC8qKiBPcHQgb3V0IG9mIHVzZXIgYWdlbnQgZmlsdGVyaW5nIHN1Y2ggYXMgZ29vZ2xlYm90IG9yIG90aGVyIGJvdHMuIERlZmF1bHRzIHRvIGBmYWxzZWAgKi9cbiAgICBvcHRfb3V0X3VzZXJhZ2VudF9maWx0ZXI6IGJvb2xlYW5cbiAgICBvcHRfb3V0X2NhcHR1cmluZ19wZXJzaXN0ZW5jZV90eXBlOiAnbG9jYWxTdG9yYWdlJyB8ICdjb29raWUnXG4gICAgb3B0X291dF9jYXB0dXJpbmdfY29va2llX3ByZWZpeDogc3RyaW5nIHwgbnVsbFxuICAgIG9wdF9pbl9zaXRlX2FwcHM6IGJvb2xlYW5cbiAgICByZXNwZWN0X2RudDogYm9vbGVhblxuICAgIC8qKiBAZGVwcmVjYXRlZCAtIHVzZSBgcHJvcGVydHlfZGVueWxpc3RgIGluc3RlYWQgICovXG4gICAgcHJvcGVydHlfYmxhY2tsaXN0OiBzdHJpbmdbXVxuICAgIHByb3BlcnR5X2RlbnlsaXN0OiBzdHJpbmdbXVxuICAgIHJlcXVlc3RfaGVhZGVyczogeyBbaGVhZGVyX25hbWU6IHN0cmluZ106IHN0cmluZyB9XG4gICAgb25fcmVxdWVzdF9lcnJvcjogKGVycm9yOiBNaW5pbWFsSFRUUFJlc3BvbnNlKSA9PiB2b2lkXG4gICAgLyoqIEBkZXByZWNhdGVkIC0gdXNlIGByZXF1ZXN0X2hlYWRlcnNgIGluc3RlYWQgICovXG4gICAgeGhyX2hlYWRlcnM/OiB7IFtoZWFkZXJfbmFtZTogc3RyaW5nXTogc3RyaW5nIH1cbiAgICAvKiogQGRlcHJlY2F0ZWQgLSB1c2UgYG9uX3JlcXVlc3RfZXJyb3JgIGluc3RlYWQgICovXG4gICAgb25feGhyX2Vycm9yPzogKGZhaWxlZFJlcXVlc3Q6IFhNTEh0dHBSZXF1ZXN0KSA9PiB2b2lkXG4gICAgaW5hcHBfcHJvdG9jb2w6IHN0cmluZ1xuICAgIGluYXBwX2xpbmtfbmV3X3dpbmRvdzogYm9vbGVhblxuICAgIHJlcXVlc3RfYmF0Y2hpbmc6IGJvb2xlYW5cbiAgICBzYW5pdGl6ZV9wcm9wZXJ0aWVzOiAoKHByb3BlcnRpZXM6IFByb3BlcnRpZXMsIGV2ZW50X25hbWU6IHN0cmluZykgPT4gUHJvcGVydGllcykgfCBudWxsXG4gICAgcHJvcGVydGllc19zdHJpbmdfbWF4X2xlbmd0aDogbnVtYmVyXG4gICAgc2Vzc2lvbl9yZWNvcmRpbmc6IFNlc3Npb25SZWNvcmRpbmdPcHRpb25zXG4gICAgc2Vzc2lvbl9pZGxlX3RpbWVvdXRfc2Vjb25kczogbnVtYmVyXG4gICAgbWFza19hbGxfZWxlbWVudF9hdHRyaWJ1dGVzOiBib29sZWFuXG4gICAgbWFza19hbGxfdGV4dDogYm9vbGVhblxuICAgIGFkdmFuY2VkX2Rpc2FibGVfZGVjaWRlOiBib29sZWFuXG4gICAgYWR2YW5jZWRfZGlzYWJsZV9mZWF0dXJlX2ZsYWdzOiBib29sZWFuXG4gICAgYWR2YW5jZWRfZGlzYWJsZV9mZWF0dXJlX2ZsYWdzX29uX2ZpcnN0X2xvYWQ6IGJvb2xlYW5cbiAgICBhZHZhbmNlZF9kaXNhYmxlX3Rvb2xiYXJfbWV0cmljczogYm9vbGVhblxuICAgIGdldF9kZXZpY2VfaWQ6ICh1dWlkOiBzdHJpbmcpID0+IHN0cmluZ1xuICAgIG5hbWU6IHN0cmluZ1xuICAgIF9vbkNhcHR1cmU6IChldmVudE5hbWU6IHN0cmluZywgZXZlbnREYXRhOiBDYXB0dXJlUmVzdWx0KSA9PiB2b2lkXG4gICAgY2FwdHVyZV9wZXJmb3JtYW5jZT86IGJvb2xlYW5cbiAgICAvLyBTaG91bGQgb25seSBiZSB1c2VkIGZvciB0ZXN0aW5nLiBDb3VsZCBuZWdhdGl2ZWx5IGltcGFjdCBwZXJmb3JtYW5jZS5cbiAgICBkaXNhYmxlX2NvbXByZXNzaW9uOiBib29sZWFuXG4gICAgYm9vdHN0cmFwOiB7XG4gICAgICAgIGRpc3RpbmN0SUQ/OiBzdHJpbmdcbiAgICAgICAgaXNJZGVudGlmaWVkSUQ/OiBib29sZWFuXG4gICAgICAgIGZlYXR1cmVGbGFncz86IFJlY29yZDxzdHJpbmcsIGJvb2xlYW4gfCBzdHJpbmc+XG4gICAgICAgIGZlYXR1cmVGbGFnUGF5bG9hZHM/OiBSZWNvcmQ8c3RyaW5nLCBKc29uVHlwZT5cbiAgICB9XG4gICAgc2VnbWVudD86IGFueVxuICAgIF9fcHJldmlld19zZW5kX2NsaWVudF9zZXNzaW9uX3BhcmFtcz86IGJvb2xlYW5cbiAgICBkaXNhYmxlX3Njcm9sbF9wcm9wZXJ0aWVzPzogYm9vbGVhblxuICAgIC8vIExldCB0aGUgcGFnZXZpZXcgc2Nyb2xsIHN0YXRzIHVzZSBhIGN1c3RvbSBjc3Mgc2VsZWN0b3IgZm9yIHRoZSByb290IGVsZW1lbnQsIGUuZy4gYG1haW5gXG4gICAgc2Nyb2xsX3Jvb3Rfc2VsZWN0b3I/OiBzdHJpbmcgfCBzdHJpbmdbXVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIE9wdEluT3V0Q2FwdHVyaW5nT3B0aW9ucyB7XG4gICAgY2FwdHVyZTogKGV2ZW50OiBzdHJpbmcsIHByb3BlcnRpZXM6IFByb3BlcnRpZXMsIG9wdGlvbnM6IENhcHR1cmVPcHRpb25zKSA9PiB2b2lkXG4gICAgY2FwdHVyZV9ldmVudF9uYW1lOiBzdHJpbmdcbiAgICBjYXB0dXJlX3Byb3BlcnRpZXM6IFByb3BlcnRpZXNcbiAgICBlbmFibGVfcGVyc2lzdGVuY2U6IGJvb2xlYW5cbiAgICBjbGVhcl9wZXJzaXN0ZW5jZTogYm9vbGVhblxuICAgIHBlcnNpc3RlbmNlX3R5cGU6ICdjb29raWUnIHwgJ2xvY2FsU3RvcmFnZScgfCAnbG9jYWxTdG9yYWdlK2Nvb2tpZSdcbiAgICBjb29raWVfcHJlZml4OiBzdHJpbmdcbiAgICBjb29raWVfZXhwaXJhdGlvbjogbnVtYmVyXG4gICAgY3Jvc3Nfc3ViZG9tYWluX2Nvb2tpZTogYm9vbGVhblxuICAgIHNlY3VyZV9jb29raWU6IGJvb2xlYW5cbn1cblxuZXhwb3J0IGludGVyZmFjZSBpc0ZlYXR1cmVFbmFibGVkT3B0aW9ucyB7XG4gICAgc2VuZF9ldmVudDogYm9vbGVhblxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFNlc3Npb25SZWNvcmRpbmdPcHRpb25zIHtcbiAgICBibG9ja0NsYXNzPzogc3RyaW5nIHwgUmVnRXhwXG4gICAgYmxvY2tTZWxlY3Rvcj86IHN0cmluZyB8IG51bGxcbiAgICBpZ25vcmVDbGFzcz86IHN0cmluZ1xuICAgIG1hc2tUZXh0Q2xhc3M/OiBzdHJpbmcgfCBSZWdFeHBcbiAgICBtYXNrVGV4dFNlbGVjdG9yPzogc3RyaW5nIHwgbnVsbFxuICAgIG1hc2tUZXh0Rm4/OiAoKHRleHQ6IHN0cmluZykgPT4gc3RyaW5nKSB8IG51bGxcbiAgICBtYXNrQWxsSW5wdXRzPzogYm9vbGVhblxuICAgIG1hc2tJbnB1dE9wdGlvbnM/OiBNYXNrSW5wdXRPcHRpb25zXG4gICAgbWFza0lucHV0Rm4/OiAoKHRleHQ6IHN0cmluZywgZWxlbWVudD86IEhUTUxFbGVtZW50KSA9PiBzdHJpbmcpIHwgbnVsbFxuICAgIHNsaW1ET01PcHRpb25zPzogU2xpbURPTU9wdGlvbnMgfCAnYWxsJyB8IHRydWVcbiAgICBjb2xsZWN0Rm9udHM/OiBib29sZWFuXG4gICAgaW5saW5lU3R5bGVzaGVldD86IGJvb2xlYW5cbiAgICByZWNvcmRlclZlcnNpb24/OiAndjEnIHwgJ3YyJ1xuICAgIHJlY29yZENyb3NzT3JpZ2luSWZyYW1lcz86IGJvb2xlYW5cbiAgICAvKiogQGRlcHJlY2F0ZWQgLSB1c2UgbWFza0NhcHR1cmVkTmV0d29ya1JlcXVlc3RGbiBpbnN0ZWFkICAqL1xuICAgIG1hc2tOZXR3b3JrUmVxdWVzdEZuPzogKChkYXRhOiBOZXR3b3JrUmVxdWVzdCkgPT4gTmV0d29ya1JlcXVlc3QgfCBudWxsIHwgdW5kZWZpbmVkKSB8IG51bGxcbiAgICAvKiogTW9kaWZ5IHRoZSBuZXR3b3JrIHJlcXVlc3QgYmVmb3JlIGl0IGlzIGNhcHR1cmVkLiBSZXR1cm5pbmcgbnVsbCBvciB1bmRlZmluZWQgc3RvcHMgaXQgYmVpbmcgY2FwdHVyZWQgKi9cbiAgICBtYXNrQ2FwdHVyZWROZXR3b3JrUmVxdWVzdEZuPzogKChkYXRhOiBDYXB0dXJlZE5ldHdvcmtSZXF1ZXN0KSA9PiBDYXB0dXJlZE5ldHdvcmtSZXF1ZXN0IHwgbnVsbCB8IHVuZGVmaW5lZCkgfCBudWxsXG4gICAgLy8gb3VyIHNldHRpbmdzIGhlcmUgb25seSBzdXBwb3J0IGEgc3Vic2V0IG9mIHRob3NlIHByb3Bvc2VkIGZvciBycndlYidzIG5ldHdvcmsgY2FwdHVyZSBwbHVnaW5cbiAgICByZWNvcmRIZWFkZXJzPzogYm9vbGVhblxuICAgIHJlY29yZEJvZHk/OiBib29sZWFuXG59XG5cbmV4cG9ydCB0eXBlIFNlc3Npb25JZENoYW5nZWRDYWxsYmFjayA9IChzZXNzaW9uSWQ6IHN0cmluZywgd2luZG93SWQ6IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQpID0+IHZvaWRcblxuZXhwb3J0IGVudW0gQ29tcHJlc3Npb24ge1xuICAgIEdaaXBKUyA9ICdnemlwLWpzJyxcbiAgICBCYXNlNjQgPSAnYmFzZTY0Jyxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBYSFJPcHRpb25zIHtcbiAgICB0cmFuc3BvcnQ/OiAnWEhSJyB8ICdmZXRjaCcgfCAnc2VuZEJlYWNvbidcbiAgICBtZXRob2Q/OiAnUE9TVCcgfCAnR0VUJ1xuICAgIHVybFF1ZXJ5QXJncz86IHsgY29tcHJlc3Npb246IENvbXByZXNzaW9uIH1cbiAgICB2ZXJib3NlPzogYm9vbGVhblxuICAgIGJsb2I/OiBib29sZWFuXG4gICAgc2VuZEJlYWNvbj86IGJvb2xlYW5cbn1cblxuZXhwb3J0IGludGVyZmFjZSBDYXB0dXJlT3B0aW9ucyBleHRlbmRzIFhIUk9wdGlvbnMge1xuICAgICRzZXQ/OiBQcm9wZXJ0aWVzIC8qKiB1c2VkIHdpdGggJGlkZW50aWZ5ICovXG4gICAgJHNldF9vbmNlPzogUHJvcGVydGllcyAvKiogdXNlZCB3aXRoICRpZGVudGlmeSAqL1xuICAgIF91cmw/OiBzdHJpbmcgLyoqIFVzZWQgdG8gb3ZlcnJpZGUgdGhlIGRlc2lyZWQgZW5kcG9pbnQgZm9yIHRoZSBjYXB0dXJlZCBldmVudCAqL1xuICAgIF9iYXRjaEtleT86IHN0cmluZyAvKioga2V5IG9mIHF1ZXVlLCBlLmcuICdzZXNzaW9uUmVjb3JkaW5nJyB2cyAnZXZlbnQnICovXG4gICAgX21ldHJpY3M/OiBQcm9wZXJ0aWVzXG4gICAgX25vVHJ1bmNhdGU/OiBib29sZWFuIC8qKiBpZiBzZXQsIG92ZXJyaWRlcyBhbmQgZGlzYWJsZXMgY29uZmlnLnByb3BlcnRpZXNfc3RyaW5nX21heF9sZW5ndGggKi9cbiAgICBzZW5kX2luc3RhbnRseT86IGJvb2xlYW4gLyoqIGlmIHNldCBza2lwcyB0aGUgYmF0Y2hlZCBxdWV1ZSAqL1xuICAgIHRpbWVzdGFtcD86IERhdGVcbn1cblxuZXhwb3J0IGludGVyZmFjZSBSZXRyeVF1ZXVlRWxlbWVudCB7XG4gICAgcmV0cnlBdDogRGF0ZVxuICAgIHJlcXVlc3REYXRhOiBRdWV1ZWRSZXF1ZXN0RGF0YVxufVxuZXhwb3J0IGludGVyZmFjZSBRdWV1ZWRSZXF1ZXN0RGF0YSB7XG4gICAgdXJsOiBzdHJpbmdcbiAgICBkYXRhOiBQcm9wZXJ0aWVzXG4gICAgb3B0aW9uczogQ2FwdHVyZU9wdGlvbnNcbiAgICBoZWFkZXJzPzogUHJvcGVydGllc1xuICAgIGNhbGxiYWNrPzogUmVxdWVzdENhbGxiYWNrXG4gICAgcmV0cmllc1BlcmZvcm1lZFNvRmFyPzogbnVtYmVyXG59XG5cbi8vIE1pbmltYWwgY2xhc3MgdG8gYWxsb3cgaW50ZXJvcCBiZXR3ZWVuIGRpZmZlcmVudCByZXF1ZXN0IG1ldGhvZHMgKHhociAvIGZldGNoKVxuZXhwb3J0IGludGVyZmFjZSBNaW5pbWFsSFRUUFJlc3BvbnNlIHtcbiAgICBzdGF0dXNDb2RlOiBudW1iZXJcbiAgICByZXNwb25zZVRleHQ6IHN0cmluZ1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJlcXVlc3REYXRhIGV4dGVuZHMgUXVldWVkUmVxdWVzdERhdGEge1xuICAgIHJldHJ5UXVldWU6IFJldHJ5UXVldWVcbiAgICB0aW1lb3V0PzogbnVtYmVyXG4gICAgb25FcnJvcj86IChyZXE6IE1pbmltYWxIVFRQUmVzcG9uc2UpID0+IHZvaWRcbiAgICBvblJlc3BvbnNlPzogKHJlcTogTWluaW1hbEhUVFBSZXNwb25zZSkgPT4gdm9pZFxufVxuXG5leHBvcnQgdHlwZSBGbGFnVmFyaWFudCA9IHsgZmxhZzogc3RyaW5nOyB2YXJpYW50OiBzdHJpbmcgfVxuXG5leHBvcnQgaW50ZXJmYWNlIERlY2lkZVJlc3BvbnNlIHtcbiAgICBzdGF0dXM6IG51bWJlclxuICAgIHN1cHBvcnRlZENvbXByZXNzaW9uOiBDb21wcmVzc2lvbltdXG4gICAgY29uZmlnOiB7XG4gICAgICAgIGVuYWJsZV9jb2xsZWN0X2V2ZXJ5dGhpbmc6IGJvb2xlYW5cbiAgICB9XG4gICAgY3VzdG9tX3Byb3BlcnRpZXM6IEF1dG9DYXB0dXJlQ3VzdG9tUHJvcGVydHlbXSAvLyBUT0RPOiBkZWxldGUsIG5vdCBzZW50XG4gICAgZmVhdHVyZUZsYWdzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmcgfCBib29sZWFuPlxuICAgIGZlYXR1cmVGbGFnUGF5bG9hZHM6IFJlY29yZDxzdHJpbmcsIEpzb25UeXBlPlxuICAgIGVycm9yc1doaWxlQ29tcHV0aW5nRmxhZ3M6IGJvb2xlYW5cbiAgICBhdXRvY2FwdHVyZV9vcHRfb3V0PzogYm9vbGVhblxuICAgIGNhcHR1cmVQZXJmb3JtYW5jZT86IGJvb2xlYW5cbiAgICBhbmFseXRpY3M/OiB7XG4gICAgICAgIGVuZHBvaW50Pzogc3RyaW5nXG4gICAgfVxuICAgIGVsZW1lbnRzQ2hhaW5Bc1N0cmluZz86IGJvb2xlYW5cbiAgICAvLyB0aGlzIGlzIGN1cnJlbnRseSBpbiBkZXZlbG9wbWVudCBhbmQgbWF5IGhhdmUgYnJlYWtpbmcgY2hhbmdlcyB3aXRob3V0IGEgbWFqb3IgdmVyc2lvbiBidW1wXG4gICAgYXV0b2NhcHR1cmVFeGNlcHRpb25zPzpcbiAgICAgICAgfCBib29sZWFuXG4gICAgICAgIHwge1xuICAgICAgICAgICAgICBlbmRwb2ludD86IHN0cmluZ1xuICAgICAgICAgICAgICBlcnJvcnNfdG9faWdub3JlOiBzdHJpbmdbXVxuICAgICAgICAgIH1cbiAgICBzZXNzaW9uUmVjb3JkaW5nPzoge1xuICAgICAgICBlbmRwb2ludD86IHN0cmluZ1xuICAgICAgICBjb25zb2xlTG9nUmVjb3JkaW5nRW5hYmxlZD86IGJvb2xlYW5cbiAgICAgICAgcmVjb3JkZXJWZXJzaW9uPzogJ3YxJyB8ICd2MidcbiAgICAgICAgLy8gdGhlIEFQSSByZXR1cm5zIGEgZGVjaW1hbCBiZXR3ZWVuIDAgYW5kIDEgYXMgYSBzdHJpbmdcbiAgICAgICAgc2FtcGxlUmF0ZT86IHN0cmluZyB8IG51bGxcbiAgICAgICAgbWluaW11bUR1cmF0aW9uTWlsbGlzZWNvbmRzPzogbnVtYmVyXG4gICAgICAgIHJlY29yZENhbnZhcz86IGJvb2xlYW4gfCBudWxsXG4gICAgICAgIGNhbnZhc0Zwcz86IG51bWJlciB8IG51bGxcbiAgICAgICAgLy8gdGhlIEFQSSByZXR1cm5zIGEgZGVjaW1hbCBiZXR3ZWVuIDAgYW5kIDEgYXMgYSBzdHJpbmdcbiAgICAgICAgY2FudmFzUXVhbGl0eT86IHN0cmluZyB8IG51bGxcbiAgICAgICAgbGlua2VkRmxhZz86IHN0cmluZyB8IEZsYWdWYXJpYW50IHwgbnVsbFxuICAgICAgICBuZXR3b3JrUGF5bG9hZENhcHR1cmU/OiBQaWNrPE5ldHdvcmtSZWNvcmRPcHRpb25zLCAncmVjb3JkQm9keScgfCAncmVjb3JkSGVhZGVycyc+XG4gICAgfVxuICAgIHN1cnZleXM/OiBib29sZWFuXG4gICAgdG9vbGJhclBhcmFtczogVG9vbGJhclBhcmFtc1xuICAgIGVkaXRvclBhcmFtcz86IFRvb2xiYXJQYXJhbXMgLyoqIEBkZXByZWNhdGVkLCByZW5hbWVkIHRvIHRvb2xiYXJQYXJhbXMsIHN0aWxsIHByZXNlbnQgb24gb2xkZXIgQVBJIHJlc3BvbnNlcyAqL1xuICAgIHRvb2xiYXJWZXJzaW9uOiAndG9vbGJhcicgLyoqIEBkZXByZWNhdGVkLCBtb3ZlZCB0byB0b29sYmFyUGFyYW1zICovXG4gICAgaXNBdXRoZW50aWNhdGVkOiBib29sZWFuXG4gICAgc2l0ZUFwcHM6IHsgaWQ6IG51bWJlcjsgdXJsOiBzdHJpbmcgfVtdXG59XG5cbmV4cG9ydCB0eXBlIEZlYXR1cmVGbGFnc0NhbGxiYWNrID0gKGZsYWdzOiBzdHJpbmdbXSwgdmFyaWFudHM6IFJlY29yZDxzdHJpbmcsIHN0cmluZyB8IGJvb2xlYW4+KSA9PiB2b2lkXG5cbi8vIFRPRE86IGRlbGV0ZSBjdXN0b21fcHJvcGVydGllcyBhZnRlciBjaGFuZ2VsZXNzIHR5cGVzY3JpcHQgcmVmYWN0b3JcbmV4cG9ydCBpbnRlcmZhY2UgQXV0b0NhcHR1cmVDdXN0b21Qcm9wZXJ0eSB7XG4gICAgbmFtZTogc3RyaW5nXG4gICAgY3NzX3NlbGVjdG9yOiBzdHJpbmdcbiAgICBldmVudF9zZWxlY3RvcnM6IHN0cmluZ1tdXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29tcHJlc3Npb25EYXRhIHtcbiAgICBkYXRhOiBzdHJpbmdcbiAgICBjb21wcmVzc2lvbj86IENvbXByZXNzaW9uXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgR0RQUk9wdGlvbnMge1xuICAgIGNhcHR1cmU/OiAoXG4gICAgICAgIGV2ZW50OiBzdHJpbmcsXG4gICAgICAgIHByb3BlcnRpZXM6IFByb3BlcnRpZXMsXG4gICAgICAgIG9wdGlvbnM6IENhcHR1cmVPcHRpb25zXG4gICAgKSA9PiB2b2lkIC8qKiBmdW5jdGlvbiB1c2VkIGZvciBjYXB0dXJpbmcgYSBQb3N0SG9nIGV2ZW50IHRvIHJlY29yZCB0aGUgb3B0LWluIGFjdGlvbiAqL1xuICAgIGNhcHR1cmVFdmVudE5hbWU/OiBzdHJpbmcgLyoqIGV2ZW50IG5hbWUgdG8gYmUgdXNlZCBmb3IgY2FwdHVyaW5nIHRoZSBvcHQtaW4gYWN0aW9uICovXG4gICAgY2FwdHVyZVByb3BlcnRpZXM/OiBQcm9wZXJ0aWVzIC8qKiBzZXQgb2YgcHJvcGVydGllcyB0byBiZSBjYXB0dXJlZCBhbG9uZyB3aXRoIHRoZSBvcHQtaW4gYWN0aW9uICovXG4gICAgLyoqIHBlcnNpc3RlbmNlIG1lY2hhbmlzbSB1c2VkICovXG4gICAgcGVyc2lzdGVuY2VUeXBlPzogJ2Nvb2tpZScgfCAnbG9jYWxTdG9yYWdlJyB8ICdsb2NhbFN0b3JhZ2UrY29va2llJ1xuICAgIHBlcnNpc3RlbmNlUHJlZml4Pzogc3RyaW5nIC8qKiBbX19waF9vcHRfaW5fb3V0XSAtIGN1c3RvbSBwcmVmaXggdG8gYmUgdXNlZCBpbiB0aGUgY29va2llL2xvY2Fsc3RvcmFnZSBuYW1lICovXG4gICAgY29va2llRXhwaXJhdGlvbj86IG51bWJlciAvKiogbnVtYmVyIG9mIGRheXMgdW50aWwgdGhlIG9wdC1pbiBjb29raWUgZXhwaXJlcyAqL1xuICAgIGNyb3NzU3ViZG9tYWluQ29va2llPzogYm9vbGVhbiAvKiogd2hldGhlciB0aGUgb3B0LWluIGNvb2tpZSBpcyBzZXQgYXMgY3Jvc3Mtc3ViZG9tYWluIG9yIG5vdCAqL1xuICAgIHNlY3VyZUNvb2tpZT86IGJvb2xlYW4gLyoqIHdoZXRoZXIgdGhlIG9wdC1pbiBjb29raWUgaXMgc2V0IGFzIHNlY3VyZSBvciBub3QgKi9cbiAgICByZXNwZWN0RG50PzogYm9vbGVhblxuICAgIHdpbmRvdz86IFdpbmRvd1xufVxuXG5leHBvcnQgdHlwZSBSZXF1ZXN0Q2FsbGJhY2sgPSAocmVzcG9uc2U6IFJlY29yZDxzdHJpbmcsIGFueT4sIGRhdGE/OiBQcm9wZXJ0aWVzKSA9PiB2b2lkXG5cbmV4cG9ydCBpbnRlcmZhY2UgUGVyc2lzdGVudFN0b3JlIHtcbiAgICBpc19zdXBwb3J0ZWQ6ICgpID0+IGJvb2xlYW5cbiAgICBlcnJvcjogKGVycm9yOiBhbnkpID0+IHZvaWRcbiAgICBwYXJzZTogKG5hbWU6IHN0cmluZykgPT4gYW55XG4gICAgZ2V0OiAobmFtZTogc3RyaW5nKSA9PiBhbnlcbiAgICBzZXQ6IChuYW1lOiBzdHJpbmcsIHZhbHVlOiBhbnksIGV4cGlyZV9kYXlzPzogbnVtYmVyIHwgbnVsbCwgY3Jvc3Nfc3ViZG9tYWluPzogYm9vbGVhbiwgc2VjdXJlPzogYm9vbGVhbikgPT4gdm9pZFxuICAgIHJlbW92ZTogKG5hbWU6IHN0cmluZywgY3Jvc3Nfc3ViZG9tYWluPzogYm9vbGVhbikgPT4gdm9pZFxufVxuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2Jhbi10eXBlc1xuZXhwb3J0IHR5cGUgQnJlYWtlciA9IHt9XG5leHBvcnQgdHlwZSBFdmVudEhhbmRsZXIgPSAoZXZlbnQ6IEV2ZW50KSA9PiBib29sZWFuIHwgdm9pZFxuXG5leHBvcnQgdHlwZSBUb29sYmFyVXNlckludGVudCA9ICdhZGQtYWN0aW9uJyB8ICdlZGl0LWFjdGlvbidcbmV4cG9ydCB0eXBlIFRvb2xiYXJTb3VyY2UgPSAndXJsJyB8ICdsb2NhbHN0b3JhZ2UnXG5leHBvcnQgdHlwZSBUb29sYmFyVmVyc2lvbiA9ICd0b29sYmFyJ1xuXG4vKiBzeW5jIHdpdGggcG9zdGhvZyAqL1xuZXhwb3J0IGludGVyZmFjZSBUb29sYmFyUGFyYW1zIHtcbiAgICB0b2tlbj86IHN0cmluZyAvKiogcHVibGljIHBvc3Rob2ctanMgdG9rZW4gKi9cbiAgICB0ZW1wb3JhcnlUb2tlbj86IHN0cmluZyAvKiogcHJpdmF0ZSB0ZW1wb3JhcnkgdXNlciB0b2tlbiAqL1xuICAgIGFjdGlvbklkPzogbnVtYmVyXG4gICAgdXNlckludGVudD86IFRvb2xiYXJVc2VySW50ZW50XG4gICAgc291cmNlPzogVG9vbGJhclNvdXJjZVxuICAgIHRvb2xiYXJWZXJzaW9uPzogVG9vbGJhclZlcnNpb25cbiAgICBpbnN0cnVtZW50PzogYm9vbGVhblxuICAgIGRpc3RpbmN0SWQ/OiBzdHJpbmdcbiAgICB1c2VyRW1haWw/OiBzdHJpbmdcbiAgICBkYXRhQXR0cmlidXRlcz86IHN0cmluZ1tdXG4gICAgZmVhdHVyZUZsYWdzPzogUmVjb3JkPHN0cmluZywgc3RyaW5nIHwgYm9vbGVhbj5cbn1cblxuZXhwb3J0IGludGVyZmFjZSBQb3N0RGF0YSB7XG4gICAgYnVmZmVyPzogQmxvYlBhcnRcbiAgICBjb21wcmVzc2lvbj86IENvbXByZXNzaW9uXG4gICAgZGF0YT86IHN0cmluZ1xufVxuXG5leHBvcnQgdHlwZSBTbmlwcGV0QXJyYXlJdGVtID0gW21ldGhvZDogc3RyaW5nLCAuLi5hcmdzOiBhbnlbXV1cblxuZXhwb3J0IHR5cGUgSnNvblR5cGUgPSBzdHJpbmcgfCBudW1iZXIgfCBib29sZWFuIHwgbnVsbCB8IHsgW2tleTogc3RyaW5nXTogSnNvblR5cGUgfSB8IEFycmF5PEpzb25UeXBlPlxuXG4vKiogQSBmZWF0dXJlIHRoYXQgaXNuJ3QgcHVibGljbHkgYXZhaWxhYmxlIHlldC4qL1xuZXhwb3J0IGludGVyZmFjZSBFYXJseUFjY2Vzc0ZlYXR1cmUge1xuICAgIC8vIFN5bmMgdGhpcyB3aXRoIHRoZSBiYWNrZW5kJ3MgRWFybHlBY2Nlc3NGZWF0dXJlU2VyaWFsaXplciFcbiAgICBuYW1lOiBzdHJpbmdcbiAgICBkZXNjcmlwdGlvbjogc3RyaW5nXG4gICAgc3RhZ2U6ICdjb25jZXB0JyB8ICdhbHBoYScgfCAnYmV0YSdcbiAgICBkb2N1bWVudGF0aW9uVXJsOiBzdHJpbmcgfCBudWxsXG4gICAgZmxhZ0tleTogc3RyaW5nIHwgbnVsbFxufVxuXG5leHBvcnQgdHlwZSBFYXJseUFjY2Vzc0ZlYXR1cmVDYWxsYmFjayA9IChlYXJseUFjY2Vzc0ZlYXR1cmVzOiBFYXJseUFjY2Vzc0ZlYXR1cmVbXSkgPT4gdm9pZFxuXG5leHBvcnQgaW50ZXJmYWNlIEVhcmx5QWNjZXNzRmVhdHVyZVJlc3BvbnNlIHtcbiAgICBlYXJseUFjY2Vzc0ZlYXR1cmVzOiBFYXJseUFjY2Vzc0ZlYXR1cmVbXVxufVxuXG5leHBvcnQgdHlwZSBIZWFkZXJzID0gUmVjb3JkPHN0cmluZywgc3RyaW5nPlxuXG4vKiBmb3IgcnJ3ZWIvbmV0d29ya0AxXG4gKiogd2hlbiB0aGF0IGlzIHJlbGVhc2VkIGFzIHBhcnQgb2YgcnJ3ZWIgdGhpcyBjYW4gYmUgcmVtb3ZlZFxuICoqIGRvbid0IHJlbHkgb24gdGhpcyB0eXBlLCBpdCBtYXkgY2hhbmdlIHdpdGhvdXQgbm90aWNlXG4gKi9cbmV4cG9ydCB0eXBlIEluaXRpYXRvclR5cGUgPVxuICAgIHwgJ2F1ZGlvJ1xuICAgIHwgJ2JlYWNvbidcbiAgICB8ICdib2R5J1xuICAgIHwgJ2NzcydcbiAgICB8ICdlYXJseS1oaW50J1xuICAgIHwgJ2VtYmVkJ1xuICAgIHwgJ2ZldGNoJ1xuICAgIHwgJ2ZyYW1lJ1xuICAgIHwgJ2lmcmFtZSdcbiAgICB8ICdpY29uJ1xuICAgIHwgJ2ltYWdlJ1xuICAgIHwgJ2ltZydcbiAgICB8ICdpbnB1dCdcbiAgICB8ICdsaW5rJ1xuICAgIHwgJ25hdmlnYXRpb24nXG4gICAgfCAnb2JqZWN0J1xuICAgIHwgJ3BpbmcnXG4gICAgfCAnc2NyaXB0J1xuICAgIHwgJ3RyYWNrJ1xuICAgIHwgJ3ZpZGVvJ1xuICAgIHwgJ3htbGh0dHByZXF1ZXN0J1xuXG5leHBvcnQgdHlwZSBOZXR3b3JrUmVjb3JkT3B0aW9ucyA9IHtcbiAgICBpbml0aWF0b3JUeXBlcz86IEluaXRpYXRvclR5cGVbXVxuICAgIG1hc2tSZXF1ZXN0Rm4/OiAoZGF0YTogQ2FwdHVyZWROZXR3b3JrUmVxdWVzdCkgPT4gQ2FwdHVyZWROZXR3b3JrUmVxdWVzdCB8IHVuZGVmaW5lZFxuICAgIHJlY29yZEhlYWRlcnM/OiBib29sZWFuIHwgeyByZXF1ZXN0OiBib29sZWFuOyByZXNwb25zZTogYm9vbGVhbiB9XG4gICAgcmVjb3JkQm9keT86IGJvb2xlYW4gfCBzdHJpbmdbXSB8IHsgcmVxdWVzdDogYm9vbGVhbiB8IHN0cmluZ1tdOyByZXNwb25zZTogYm9vbGVhbiB8IHN0cmluZ1tdIH1cbiAgICByZWNvcmRJbml0aWFsUmVxdWVzdHM/OiBib29sZWFuXG4gICAgLy8gd2hldGhlciB0byByZWNvcmQgUGVyZm9ybWFuY2VFbnRyeSBldmVudHMgZm9yIG5ldHdvcmsgcmVxdWVzdHNcbiAgICByZWNvcmRQZXJmb3JtYW5jZT86IGJvb2xlYW5cbiAgICAvLyB0aGUgUGVyZm9ybWFuY2VPYnNlcnZlciB3aWxsIG9ubHkgb2JzZXJ2ZSB0aGVzZSBlbnRyeSB0eXBlc1xuICAgIHBlcmZvcm1hbmNlRW50cnlUeXBlVG9PYnNlcnZlOiBzdHJpbmdbXVxuICAgIC8vIHRoZSBtYXhpbXVtIHNpemUgb2YgdGhlIHJlcXVlc3QvcmVzcG9uc2UgYm9keSB0byByZWNvcmRcbiAgICAvLyBOQiB0aGlzIHdpbGwgYmUgYXQgbW9zdCAxTUIgZXZlbiBpZiBzZXQgbGFyZ2VyXG4gICAgcGF5bG9hZFNpemVMaW1pdEJ5dGVzOiBudW1iZXJcbn1cblxuLyoqIEBkZXByZWNhdGVkIC0gdXNlIENhcHR1cmVkTmV0d29ya1JlcXVlc3QgaW5zdGVhZCAgKi9cbmV4cG9ydCB0eXBlIE5ldHdvcmtSZXF1ZXN0ID0ge1xuICAgIHVybDogc3RyaW5nXG59XG5cbi8vIEluIHJyd2ViIHRoaXMgaXMgY2FsbGVkIE5ldHdvcmtSZXF1ZXN0LCBidXQgd2UgYWxyZWFkeSBleHBvc2VkIHRoYXQgYXMgaGF2aW5nIG9ubHkgVVJMXG4vLyB3ZSBhbHNvIHdhbnQgdG8gdmFyeSBmcm9tIHRoZSBycndlYiBOZXR3b3JrUmVxdWVzdCBiZWNhdXNlIHdlIHdhbnQgdG8gaW5jbHVkZVxuLy8gYWxsIFBlcmZvcm1hbmNlRW50cnkgcHJvcGVydGllcyB0b28uXG4vLyB0aGF0IGhhcyA0IHJlcXVpcmVkIHByb3BlcnRpZXNcbi8vICAgICByZWFkb25seSBkdXJhdGlvbjogRE9NSGlnaFJlc1RpbWVTdGFtcDtcbi8vICAgICByZWFkb25seSBlbnRyeVR5cGU6IHN0cmluZztcbi8vICAgICByZWFkb25seSBuYW1lOiBzdHJpbmc7XG4vLyAgICAgcmVhZG9ubHkgc3RhcnRUaW1lOiBET01IaWdoUmVzVGltZVN0YW1wO1xuLy8gTkI6IHByb3BlcnRpZXMgYmVsb3cgaGVyZSBhcmUgQUxQSEEsIGRvbid0IHJlbHkgb24gdGhlbSwgdGhleSBtYXkgY2hhbmdlIHdpdGhvdXQgbm90aWNlXG5leHBvcnQgdHlwZSBDYXB0dXJlZE5ldHdvcmtSZXF1ZXN0ID0gT21pdDxQZXJmb3JtYW5jZUVudHJ5LCAndG9KU09OJz4gJiB7XG4gICAgLy8gcHJvcGVydGllcyBiZWxvdyBoZXJlIGFyZSBBTFBIQSwgZG9uJ3QgcmVseSBvbiB0aGVtLCB0aGV5IG1heSBjaGFuZ2Ugd2l0aG91dCBub3RpY2VcbiAgICBtZXRob2Q/OiBzdHJpbmdcbiAgICBpbml0aWF0b3JUeXBlPzogSW5pdGlhdG9yVHlwZVxuICAgIHN0YXR1cz86IG51bWJlclxuICAgIHRpbWVPcmlnaW4/OiBudW1iZXJcbiAgICB0aW1lc3RhbXA/OiBudW1iZXJcbiAgICBzdGFydFRpbWU/OiBudW1iZXJcbiAgICBlbmRUaW1lPzogbnVtYmVyXG4gICAgcmVxdWVzdEhlYWRlcnM/OiBIZWFkZXJzXG4gICAgcmVxdWVzdEJvZHk/OiBzdHJpbmcgfCBudWxsXG4gICAgcmVzcG9uc2VIZWFkZXJzPzogSGVhZGVyc1xuICAgIHJlc3BvbnNlQm9keT86IHN0cmluZyB8IG51bGxcbiAgICAvLyB3YXMgdGhpcyBjYXB0dXJlZCBiZWZvcmUgZmV0Y2gveGhyIGNvdWxkIGhhdmUgYmVlbiB3cmFwcGVkXG4gICAgaXNJbml0aWFsPzogYm9vbGVhblxufVxuIiwgImltcG9ydCB7IF9lYWNoIH0gZnJvbSAnLi91dGlscydcbmltcG9ydCBDb25maWcgZnJvbSAnLi9jb25maWcnXG5pbXBvcnQgeyBQb3N0RGF0YSwgWEhST3B0aW9ucywgUmVxdWVzdERhdGEsIE1pbmltYWxIVFRQUmVzcG9uc2UgfSBmcm9tICcuL3R5cGVzJ1xuaW1wb3J0IHsgX2Zvcm1EYXRhVG9RdWVyeSB9IGZyb20gJy4vdXRpbHMvcmVxdWVzdC11dGlscydcblxuaW1wb3J0IHsgX2lzQXJyYXksIF9pc0Z1bmN0aW9uLCBfaXNOdW1iZXIsIF9pc1VpbnQ4QXJyYXksIF9pc1VuZGVmaW5lZCB9IGZyb20gJy4vdXRpbHMvdHlwZS11dGlscydcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJy4vdXRpbHMvbG9nZ2VyJ1xuaW1wb3J0IHsgZmV0Y2ggfSBmcm9tICcuL3V0aWxzL2dsb2JhbHMnXG5cbmV4cG9ydCBjb25zdCBhZGRQYXJhbXNUb1VSTCA9IChcbiAgICB1cmw6IHN0cmluZyxcbiAgICB1cmxRdWVyeUFyZ3M6IFJlY29yZDxzdHJpbmcsIGFueT4gfCB1bmRlZmluZWQsXG4gICAgcGFyYW1ldGVyT3B0aW9uczogeyBpcD86IGJvb2xlYW4gfVxuKTogc3RyaW5nID0+IHtcbiAgICBjb25zdCBhcmdzID0gdXJsUXVlcnlBcmdzIHx8IHt9XG4gICAgYXJnc1snaXAnXSA9IHBhcmFtZXRlck9wdGlvbnNbJ2lwJ10gPyAxIDogMFxuICAgIGFyZ3NbJ18nXSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpLnRvU3RyaW5nKClcbiAgICBhcmdzWyd2ZXInXSA9IENvbmZpZy5MSUJfVkVSU0lPTlxuXG4gICAgY29uc3QgaGFsdmVzID0gdXJsLnNwbGl0KCc/JylcbiAgICBpZiAoaGFsdmVzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgY29uc3QgcGFyYW1zID0gaGFsdmVzWzFdLnNwbGl0KCcmJylcbiAgICAgICAgZm9yIChjb25zdCBwIG9mIHBhcmFtcykge1xuICAgICAgICAgICAgY29uc3Qga2V5ID0gcC5zcGxpdCgnPScpWzBdXG4gICAgICAgICAgICBpZiAoIV9pc1VuZGVmaW5lZChhcmdzW2tleV0pKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIGFyZ3Nba2V5XVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgYXJnU2VwYXJhdG9yID0gdXJsLmluZGV4T2YoJz8nKSA+IC0xID8gJyYnIDogJz8nXG4gICAgcmV0dXJuIHVybCArIGFyZ1NlcGFyYXRvciArIF9mb3JtRGF0YVRvUXVlcnkoYXJncylcbn1cblxuZXhwb3J0IGNvbnN0IGVuY29kZVBvc3REYXRhID0gKGRhdGE6IFBvc3REYXRhIHwgVWludDhBcnJheSwgb3B0aW9uczogUGFydGlhbDxYSFJPcHRpb25zPik6IHN0cmluZyB8IEJsb2JQYXJ0IHwgbnVsbCA9PiB7XG4gICAgaWYgKG9wdGlvbnMuYmxvYiAmJiBkYXRhLmJ1ZmZlcikge1xuICAgICAgICByZXR1cm4gbmV3IEJsb2IoW19pc1VpbnQ4QXJyYXkoZGF0YSkgPyBkYXRhIDogZGF0YS5idWZmZXJdLCB7IHR5cGU6ICd0ZXh0L3BsYWluJyB9KVxuICAgIH1cblxuICAgIGlmIChvcHRpb25zLnNlbmRCZWFjb24gfHwgb3B0aW9ucy5ibG9iKSB7XG4gICAgICAgIGNvbnN0IGJvZHkgPSBlbmNvZGVQb3N0RGF0YShkYXRhLCB7IG1ldGhvZDogJ1BPU1QnIH0pIGFzIEJsb2JQYXJ0XG4gICAgICAgIHJldHVybiBuZXcgQmxvYihbYm9keV0sIHsgdHlwZTogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcgfSlcbiAgICB9XG5cbiAgICBpZiAob3B0aW9ucy5tZXRob2QgIT09ICdQT1NUJykge1xuICAgICAgICByZXR1cm4gbnVsbFxuICAgIH1cblxuICAgIGxldCBib2R5X2RhdGFcblxuICAgIGlmIChfaXNBcnJheShkYXRhKSB8fCBfaXNVaW50OEFycmF5KGRhdGEpKSB7XG4gICAgICAgIC8vIFRPRE86IGVoPyBwYXNzaW5nIGFuIEFycmF5IGhlcmU/XG4gICAgICAgIGJvZHlfZGF0YSA9ICdkYXRhPScgKyBlbmNvZGVVUklDb21wb25lbnQoZGF0YSBhcyBhbnkpXG4gICAgfSBlbHNlIHtcbiAgICAgICAgYm9keV9kYXRhID0gJ2RhdGE9JyArIGVuY29kZVVSSUNvbXBvbmVudChkYXRhLmRhdGEgYXMgc3RyaW5nKVxuICAgIH1cblxuICAgIGlmICgnY29tcHJlc3Npb24nIGluIGRhdGEgJiYgZGF0YS5jb21wcmVzc2lvbikge1xuICAgICAgICBib2R5X2RhdGEgKz0gJyZjb21wcmVzc2lvbj0nICsgZGF0YS5jb21wcmVzc2lvblxuICAgIH1cblxuICAgIHJldHVybiBib2R5X2RhdGFcbn1cblxuZXhwb3J0IGNvbnN0IHJlcXVlc3QgPSAocGFyYW1zOiBSZXF1ZXN0RGF0YSkgPT4ge1xuICAgIC8vIE5PVEU6IFVudGlsIHdlIGFyZSBjb25maWRlbnQgd2l0aCBpdCwgd2Ugb25seSB1c2UgZmV0Y2ggaWYgZXhwbGljaXRseSB0b2xkIHNvXG4gICAgaWYgKGZldGNoICYmIHBhcmFtcy5vcHRpb25zLnRyYW5zcG9ydCA9PT0gJ2ZldGNoJykge1xuICAgICAgICBjb25zdCBib2R5ID0gZW5jb2RlUG9zdERhdGEocGFyYW1zLmRhdGEsIHBhcmFtcy5vcHRpb25zKVxuXG4gICAgICAgIGNvbnN0IGhlYWRlcnMgPSBuZXcgSGVhZGVycygpXG4gICAgICAgIF9lYWNoKGhlYWRlcnMsIGZ1bmN0aW9uIChoZWFkZXJWYWx1ZSwgaGVhZGVyTmFtZSkge1xuICAgICAgICAgICAgaGVhZGVycy5hcHBlbmQoaGVhZGVyTmFtZSwgaGVhZGVyVmFsdWUpXG4gICAgICAgIH0pXG5cbiAgICAgICAgaWYgKHBhcmFtcy5vcHRpb25zLm1ldGhvZCA9PT0gJ1BPU1QnICYmICFwYXJhbXMub3B0aW9ucy5ibG9iKSB7XG4gICAgICAgICAgICBoZWFkZXJzLmFwcGVuZCgnQ29udGVudC1UeXBlJywgJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcpXG4gICAgICAgIH1cblxuICAgICAgICBsZXQgdXJsID0gcGFyYW1zLnVybFxuXG4gICAgICAgIGlmIChfaXNOdW1iZXIocGFyYW1zLnJldHJpZXNQZXJmb3JtZWRTb0ZhcikgJiYgcGFyYW1zLnJldHJpZXNQZXJmb3JtZWRTb0ZhciA+IDApIHtcbiAgICAgICAgICAgIHVybCA9IGFkZFBhcmFtc1RvVVJMKHVybCwgeyByZXRyeV9jb3VudDogcGFyYW1zLnJldHJpZXNQZXJmb3JtZWRTb0ZhciB9LCB7fSlcbiAgICAgICAgfVxuXG4gICAgICAgIGZldGNoKHVybCwge1xuICAgICAgICAgICAgbWV0aG9kOiBwYXJhbXMub3B0aW9ucz8ubWV0aG9kIHx8ICdHRVQnLFxuICAgICAgICAgICAgaGVhZGVycyxcbiAgICAgICAgICAgIGtlZXBhbGl2ZTogcGFyYW1zLm9wdGlvbnMubWV0aG9kID09PSAnUE9TVCcsXG4gICAgICAgICAgICBib2R5LFxuICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RhdHVzQ29kZSA9IHJlc3BvbnNlLnN0YXR1c1xuICAgICAgICAgICAgICAgIC8vIFJlcG9ydCB0byB0aGUgY2FsbGJhY2sgaGFuZGxlcnNcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UudGV4dCgpLnRoZW4oKHJlc3BvbnNlVGV4dCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBwYXJhbXMub25SZXNwb25zZT8uKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c0NvZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZVRleHQsXG4gICAgICAgICAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXR1c0NvZGUgPT09IDIwMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXMuY2FsbGJhY2s/LihKU09OLnBhcnNlKHJlc3BvbnNlVGV4dCkpXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKGUpXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChfaXNGdW5jdGlvbihwYXJhbXMub25FcnJvcikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtcy5vbkVycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXNDb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlVGV4dCxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvLyBkb24ndCByZXRyeSBlcnJvcnMgYmV0d2VlbiA0MDAgYW5kIDUwMCBpbmNsdXNpdmVcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXR1c0NvZGUgPCA0MDAgfHwgc3RhdHVzQ29kZSA+IDUwMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zLnJldHJ5UXVldWUuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4ucGFyYW1zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0cmllc1BlcmZvcm1lZFNvRmFyOiAocGFyYW1zLnJldHJpZXNQZXJmb3JtZWRTb0ZhciB8fCAwKSArIDEsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHBhcmFtcy5jYWxsYmFjaz8uKHsgc3RhdHVzOiAwIH0pXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKGVycm9yKVxuICAgICAgICAgICAgICAgIHBhcmFtcy5jYWxsYmFjaz8uKHsgc3RhdHVzOiAwIH0pXG4gICAgICAgICAgICB9KVxuXG4gICAgICAgIHJldHVyblxuICAgIH1cblxuICAgIHJldHVybiB4aHIocGFyYW1zKVxufVxuXG5jb25zdCB4aHIgPSAoe1xuICAgIHVybCxcbiAgICBkYXRhLFxuICAgIGhlYWRlcnMsXG4gICAgb3B0aW9ucyxcbiAgICBjYWxsYmFjayxcbiAgICByZXRyaWVzUGVyZm9ybWVkU29GYXIsXG4gICAgcmV0cnlRdWV1ZSxcbiAgICBvbkVycm9yLFxuICAgIHRpbWVvdXQgPSA2MDAwMCxcbiAgICBvblJlc3BvbnNlLFxufTogUmVxdWVzdERhdGEpID0+IHtcbiAgICBpZiAoX2lzTnVtYmVyKHJldHJpZXNQZXJmb3JtZWRTb0ZhcikgJiYgcmV0cmllc1BlcmZvcm1lZFNvRmFyID4gMCkge1xuICAgICAgICB1cmwgPSBhZGRQYXJhbXNUb1VSTCh1cmwsIHsgcmV0cnlfY291bnQ6IHJldHJpZXNQZXJmb3JtZWRTb0ZhciB9LCB7fSlcbiAgICB9XG5cbiAgICBjb25zdCByZXEgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKVxuICAgIHJlcS5vcGVuKG9wdGlvbnMubWV0aG9kIHx8ICdHRVQnLCB1cmwsIHRydWUpXG5cbiAgICBjb25zdCBib2R5ID0gZW5jb2RlUG9zdERhdGEoZGF0YSwgb3B0aW9ucylcblxuICAgIF9lYWNoKGhlYWRlcnMsIGZ1bmN0aW9uIChoZWFkZXJWYWx1ZSwgaGVhZGVyTmFtZSkge1xuICAgICAgICByZXEuc2V0UmVxdWVzdEhlYWRlcihoZWFkZXJOYW1lLCBoZWFkZXJWYWx1ZSlcbiAgICB9KVxuXG4gICAgaWYgKG9wdGlvbnMubWV0aG9kID09PSAnUE9TVCcgJiYgIW9wdGlvbnMuYmxvYikge1xuICAgICAgICByZXEuc2V0UmVxdWVzdEhlYWRlcignQ29udGVudC1UeXBlJywgJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcpXG4gICAgfVxuXG4gICAgcmVxLnRpbWVvdXQgPSB0aW1lb3V0XG4gICAgLy8gc2VuZCB0aGUgcGhfb3B0b3V0IGNvb2tpZVxuICAgIC8vIHdpdGhDcmVkZW50aWFscyBjYW5ub3QgYmUgbW9kaWZpZWQgdW50aWwgYWZ0ZXIgY2FsbGluZyAub3BlbiBvbiBBbmRyb2lkIGFuZCBNb2JpbGUgU2FmYXJpXG4gICAgcmVxLndpdGhDcmVkZW50aWFscyA9IHRydWVcbiAgICByZXEub25yZWFkeXN0YXRlY2hhbmdlID0gKCkgPT4ge1xuICAgICAgICAvLyBYTUxIdHRwUmVxdWVzdC5ET05FID09IDQsIGV4Y2VwdCBpbiBzYWZhcmkgNFxuICAgICAgICBpZiAocmVxLnJlYWR5U3RhdGUgPT09IDQpIHtcbiAgICAgICAgICAgIGNvbnN0IG1pbmltYWxSZXNwb25zZVN1bW1hcnk6IE1pbmltYWxIVFRQUmVzcG9uc2UgPSB7XG4gICAgICAgICAgICAgICAgc3RhdHVzQ29kZTogcmVxLnN0YXR1cyxcbiAgICAgICAgICAgICAgICByZXNwb25zZVRleHQ6IHJlcS5yZXNwb25zZVRleHQsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvblJlc3BvbnNlPy4obWluaW1hbFJlc3BvbnNlU3VtbWFyeSlcbiAgICAgICAgICAgIGlmIChyZXEuc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHJlc3BvbnNlXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IEpTT04ucGFyc2UocmVxLnJlc3BvbnNlVGV4dClcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKGUpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhyZXNwb25zZSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChfaXNGdW5jdGlvbihvbkVycm9yKSkge1xuICAgICAgICAgICAgICAgICAgICBvbkVycm9yKG1pbmltYWxSZXNwb25zZVN1bW1hcnkpXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gZG9uJ3QgcmV0cnkgZXJyb3JzIGJldHdlZW4gNDAwIGFuZCA1MDAgaW5jbHVzaXZlXG4gICAgICAgICAgICAgICAgaWYgKHJlcS5zdGF0dXMgPCA0MDAgfHwgcmVxLnN0YXR1cyA+IDUwMCkge1xuICAgICAgICAgICAgICAgICAgICByZXRyeVF1ZXVlLmVucXVldWUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdXJsLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0cmllc1BlcmZvcm1lZFNvRmFyOiAocmV0cmllc1BlcmZvcm1lZFNvRmFyIHx8IDApICsgMSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrLFxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNhbGxiYWNrPy4oeyBzdGF0dXM6IDAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXEuc2VuZChib2R5KVxufVxuIiwgImltcG9ydCB7IFJlcXVlc3RRdWV1ZVNjYWZmb2xkIH0gZnJvbSAnLi9iYXNlLXJlcXVlc3QtcXVldWUnXG5pbXBvcnQgeyBlbmNvZGVQb3N0RGF0YSwgcmVxdWVzdCB9IGZyb20gJy4vc2VuZC1yZXF1ZXN0J1xuaW1wb3J0IHsgUG9zdEhvZ0NvbmZpZywgUXVldWVkUmVxdWVzdERhdGEsIFJldHJ5UXVldWVFbGVtZW50IH0gZnJvbSAnLi90eXBlcydcbmltcG9ydCB7IFJhdGVMaW1pdGVyIH0gZnJvbSAnLi9yYXRlLWxpbWl0ZXInXG5cbmltcG9ydCB7IF9pc1VuZGVmaW5lZCB9IGZyb20gJy4vdXRpbHMvdHlwZS11dGlscydcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJy4vdXRpbHMvbG9nZ2VyJ1xuaW1wb3J0IHsgd2luZG93IH0gZnJvbSAnLi91dGlscy9nbG9iYWxzJ1xuXG5jb25zdCB0aGlydHlNaW51dGVzID0gMzAgKiA2MCAqIDEwMDBcblxuLyoqXG4gKiBHZW5lcmF0ZXMgYSBqaXR0ZXItZWQgZXhwb25lbnRpYWwgYmFja29mZiBkZWxheSBpbiBtaWxsaXNlY29uZHNcbiAqXG4gKiBUaGUgYmFzZSB2YWx1ZSBpcyA2IHNlY29uZHMsIHdoaWNoIGlzIGRvdWJsZWQgd2l0aCBlYWNoIHJldHJ5XG4gKiB1cCB0byB0aGUgbWF4aW11bSBvZiAzMCBtaW51dGVzXG4gKlxuICogRWFjaCB2YWx1ZSB0aGVuIGhhcyArLy0gNTAlIGppdHRlclxuICpcbiAqIEdpdmluZyBhIHJhbmdlIG9mIDYgc2Vjb25kcyB1cCB0byA0NSBtaW51dGVzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwaWNrTmV4dFJldHJ5RGVsYXkocmV0cmllc1BlcmZvcm1lZFNvRmFyOiBudW1iZXIpOiBudW1iZXIge1xuICAgIGNvbnN0IHJhd0JhY2tvZmZUaW1lID0gMzAwMCAqIDIgKiogcmV0cmllc1BlcmZvcm1lZFNvRmFyXG4gICAgY29uc3QgbWluQmFja29mZiA9IHJhd0JhY2tvZmZUaW1lIC8gMlxuICAgIGNvbnN0IGNhcHBlZEJhY2tvZmZUaW1lID0gTWF0aC5taW4odGhpcnR5TWludXRlcywgcmF3QmFja29mZlRpbWUpXG4gICAgY29uc3Qgaml0dGVyRnJhY3Rpb24gPSBNYXRoLnJhbmRvbSgpIC0gMC41IC8vIEEgcmFuZG9tIG51bWJlciBiZXR3ZWVuIC0wLjUgYW5kIDAuNVxuICAgIGNvbnN0IGppdHRlciA9IGppdHRlckZyYWN0aW9uICogKGNhcHBlZEJhY2tvZmZUaW1lIC0gbWluQmFja29mZilcbiAgICByZXR1cm4gTWF0aC5jZWlsKGNhcHBlZEJhY2tvZmZUaW1lICsgaml0dGVyKVxufVxuXG5leHBvcnQgY2xhc3MgUmV0cnlRdWV1ZSBleHRlbmRzIFJlcXVlc3RRdWV1ZVNjYWZmb2xkIHtcbiAgICBxdWV1ZTogUmV0cnlRdWV1ZUVsZW1lbnRbXVxuICAgIGlzUG9sbGluZzogYm9vbGVhblxuICAgIGFyZVdlT25saW5lOiBib29sZWFuXG4gICAgb25SZXF1ZXN0RXJyb3I6IFBvc3RIb2dDb25maWdbJ29uX3JlcXVlc3RfZXJyb3InXVxuICAgIHJhdGVMaW1pdGVyOiBSYXRlTGltaXRlclxuXG4gICAgY29uc3RydWN0b3Iob25SZXF1ZXN0RXJyb3I6IFBvc3RIb2dDb25maWdbJ29uX3JlcXVlc3RfZXJyb3InXSwgcmF0ZUxpbWl0ZXI6IFJhdGVMaW1pdGVyKSB7XG4gICAgICAgIHN1cGVyKClcbiAgICAgICAgdGhpcy5pc1BvbGxpbmcgPSBmYWxzZVxuICAgICAgICB0aGlzLnF1ZXVlID0gW11cbiAgICAgICAgdGhpcy5hcmVXZU9ubGluZSA9IHRydWVcbiAgICAgICAgdGhpcy5vblJlcXVlc3RFcnJvciA9IG9uUmVxdWVzdEVycm9yXG4gICAgICAgIHRoaXMucmF0ZUxpbWl0ZXIgPSByYXRlTGltaXRlclxuXG4gICAgICAgIGlmICghX2lzVW5kZWZpbmVkKHdpbmRvdykgJiYgJ29uTGluZScgaW4gd2luZG93Lm5hdmlnYXRvcikge1xuICAgICAgICAgICAgdGhpcy5hcmVXZU9ubGluZSA9IHdpbmRvdy5uYXZpZ2F0b3Iub25MaW5lXG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignb25saW5lJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuX2hhbmRsZVdlQXJlTm93T25saW5lKClcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignb2ZmbGluZScsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmFyZVdlT25saW5lID0gZmFsc2VcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBlbnF1ZXVlKHJlcXVlc3REYXRhOiBRdWV1ZWRSZXF1ZXN0RGF0YSk6IHZvaWQge1xuICAgICAgICBjb25zdCByZXRyaWVzUGVyZm9ybWVkU29GYXIgPSByZXF1ZXN0RGF0YS5yZXRyaWVzUGVyZm9ybWVkU29GYXIgfHwgMFxuICAgICAgICBpZiAocmV0cmllc1BlcmZvcm1lZFNvRmFyID49IDEwKSB7XG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBtc1RvTmV4dFJldHJ5ID0gcGlja05leHRSZXRyeURlbGF5KHJldHJpZXNQZXJmb3JtZWRTb0ZhcilcbiAgICAgICAgY29uc3QgcmV0cnlBdCA9IG5ldyBEYXRlKERhdGUubm93KCkgKyBtc1RvTmV4dFJldHJ5KVxuXG4gICAgICAgIHRoaXMucXVldWUucHVzaCh7IHJldHJ5QXQsIHJlcXVlc3REYXRhIH0pXG5cbiAgICAgICAgbGV0IGxvZ01lc3NhZ2UgPSBgRW5xdWV1ZWQgZmFpbGVkIHJlcXVlc3QgZm9yIHJldHJ5IGluICR7bXNUb05leHRSZXRyeX1gXG4gICAgICAgIGlmICghbmF2aWdhdG9yLm9uTGluZSkge1xuICAgICAgICAgICAgbG9nTWVzc2FnZSArPSAnIChCcm93c2VyIGlzIG9mZmxpbmUpJ1xuICAgICAgICB9XG4gICAgICAgIGxvZ2dlci53YXJuKGxvZ01lc3NhZ2UpXG5cbiAgICAgICAgaWYgKCF0aGlzLmlzUG9sbGluZykge1xuICAgICAgICAgICAgdGhpcy5pc1BvbGxpbmcgPSB0cnVlXG4gICAgICAgICAgICB0aGlzLnBvbGwoKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcG9sbCgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5fcG9sbGVyICYmIGNsZWFyVGltZW91dCh0aGlzLl9wb2xsZXIpXG4gICAgICAgIHRoaXMuX3BvbGxlciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuYXJlV2VPbmxpbmUgJiYgdGhpcy5xdWV1ZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5mbHVzaCgpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBvbGwoKVxuICAgICAgICB9LCB0aGlzLl9wb2xsSW50ZXJ2YWwpIGFzIGFueSBhcyBudW1iZXJcbiAgICB9XG5cbiAgICBmbHVzaCgpOiB2b2lkIHtcbiAgICAgICAgLy8gdXNpbmcgRGF0ZS5ub3cgdG8gbWFrZSB0ZXN0cyBlYXNpZXIsIGFzIHJlY29tbWVuZGVkIGhlcmUgaHR0cHM6Ly9jb2Rld2l0aGh1Z28uY29tL21vY2tpbmctdGhlLWN1cnJlbnQtZGF0ZS1pbi1qZXN0LXRlc3RzL1xuICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZShEYXRlLm5vdygpKVxuICAgICAgICBjb25zdCB0b0ZsdXNoID0gdGhpcy5xdWV1ZS5maWx0ZXIoKHsgcmV0cnlBdCB9KSA9PiByZXRyeUF0IDwgbm93KVxuICAgICAgICBpZiAodG9GbHVzaC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB0aGlzLnF1ZXVlID0gdGhpcy5xdWV1ZS5maWx0ZXIoKHsgcmV0cnlBdCB9KSA9PiByZXRyeUF0ID49IG5vdylcbiAgICAgICAgICAgIGZvciAoY29uc3QgeyByZXF1ZXN0RGF0YSB9IG9mIHRvRmx1c2gpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9leGVjdXRlWGhyUmVxdWVzdChyZXF1ZXN0RGF0YSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHVubG9hZCgpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMuX3BvbGxlcikge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX3BvbGxlcilcbiAgICAgICAgICAgIHRoaXMuX3BvbGxlciA9IHVuZGVmaW5lZFxuICAgICAgICB9XG5cbiAgICAgICAgZm9yIChjb25zdCB7IHJlcXVlc3REYXRhIH0gb2YgdGhpcy5xdWV1ZSkge1xuICAgICAgICAgICAgY29uc3QgeyB1cmwsIGRhdGEsIG9wdGlvbnMgfSA9IHJlcXVlc3REYXRhXG5cbiAgICAgICAgICAgIGlmICh0aGlzLnJhdGVMaW1pdGVyLmlzUmF0ZUxpbWl0ZWQob3B0aW9ucy5fYmF0Y2hLZXkpKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ1tSZXRyeVF1ZXVlXSBpcyBxdW90YSBsaW1pdGVkLiBEcm9wcGluZyByZXF1ZXN0LicpXG4gICAgICAgICAgICAgICAgY29udGludWVcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAvLyB3ZSd2ZSBoYWQgc2VuZCBiZWFjb24gaW4gcGxhY2UgZm9yIGF0IGxlYXN0IDIgeWVhcnNcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY29tcGF0L2NvbXBhdFxuICAgICAgICAgICAgICAgIHdpbmRvdz8ubmF2aWdhdG9yLnNlbmRCZWFjb24odXJsLCBlbmNvZGVQb3N0RGF0YShkYXRhLCB7IC4uLm9wdGlvbnMsIHNlbmRCZWFjb246IHRydWUgfSkpXG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgLy8gTm90ZSBzZW5kQmVhY29uIGF1dG9tYXRpY2FsbHkgcmV0cmllcywgYW5kIGFmdGVyIHRoZSBmaXJzdCByZXRyeSBpdCB3aWxsIGxvc2UgcmVmZXJlbmNlIHRvIGNvbnRleHR1YWwgYHRoaXNgLlxuICAgICAgICAgICAgICAgIC8vIFRoaXMgbWVhbnMgaW4gc29tZSBjYXNlcyBgdGhpcy5nZXRDb25maWdgIHdpbGwgYmUgdW5kZWZpbmVkLlxuICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcihlKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMucXVldWUgPSBbXVxuICAgIH1cblxuICAgIF9leGVjdXRlWGhyUmVxdWVzdCh7IHVybCwgZGF0YSwgb3B0aW9ucywgaGVhZGVycywgY2FsbGJhY2ssIHJldHJpZXNQZXJmb3JtZWRTb0ZhciB9OiBRdWV1ZWRSZXF1ZXN0RGF0YSk6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy5yYXRlTGltaXRlci5pc1JhdGVMaW1pdGVkKG9wdGlvbnMuX2JhdGNoS2V5KSkge1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cblxuICAgICAgICByZXF1ZXN0KHtcbiAgICAgICAgICAgIHVybCxcbiAgICAgICAgICAgIGRhdGE6IGRhdGEgfHwge30sXG4gICAgICAgICAgICBvcHRpb25zOiBvcHRpb25zIHx8IHt9LFxuICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyB8fCB7fSxcbiAgICAgICAgICAgIHJldHJpZXNQZXJmb3JtZWRTb0ZhcjogcmV0cmllc1BlcmZvcm1lZFNvRmFyIHx8IDAsXG4gICAgICAgICAgICBjYWxsYmFjayxcbiAgICAgICAgICAgIHJldHJ5UXVldWU6IHRoaXMsXG4gICAgICAgICAgICBvbkVycm9yOiB0aGlzLm9uUmVxdWVzdEVycm9yLFxuICAgICAgICAgICAgb25SZXNwb25zZTogdGhpcy5yYXRlTGltaXRlci5jaGVja0ZvckxpbWl0aW5nLFxuICAgICAgICB9KVxuICAgIH1cblxuICAgIF9oYW5kbGVXZUFyZU5vd09ubGluZSgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5hcmVXZU9ubGluZSA9IHRydWVcbiAgICAgICAgdGhpcy5mbHVzaCgpXG4gICAgfVxufVxuIiwgImltcG9ydCB7IFBvc3RIb2cgfSBmcm9tICcuLi9wb3N0aG9nLWNvcmUnXG5cbi8qKlxuICogVGhlIHJlcXVlc3Qgcm91dGVyIGhlbHBzIHNpbXBsaWZ5IHRoZSBsb2dpYyB0byBkZXRlcm1pbmUgd2hpY2ggZW5kcG9pbnRzIHNob3VsZCBiZSBjYWxsZWQgZm9yIHdoaWNoIHRoaW5nc1xuICogVGhlIGJhc2ljIGlkZWEgaXMgdGhhdCBmb3IgYSBnaXZlbiByZWdpb24gKFVTIG9yIEVVKSwgd2UgaGF2ZSBhIHNldCBvZiBlbmRwb2ludHMgdGhhdCB3ZSBzaG91bGQgY2FsbCBkZXBlbmRpbmdcbiAqIG9uIHRoZSB0eXBlIG9mIHJlcXVlc3QgKGV2ZW50cywgcmVwbGF5cywgZGVjaWRlLCBldGMuKSBhbmQgaGFuZGxlIG92ZXJyaWRlcyB0aGF0IG1heSBjb21lIGZyb20gY29uZmlncyBvciB0aGUgZGVjaWRlIGVuZHBvaW50XG4gKi9cblxuZXhwb3J0IGVudW0gUmVxdWVzdFJvdXRlclJlZ2lvbiB7XG4gICAgVVMgPSAndXMnLFxuICAgIEVVID0gJ2V1JyxcbiAgICBDVVNUT00gPSAnY3VzdG9tJyxcbn1cblxuZXhwb3J0IHR5cGUgUmVxdWVzdFJvdXRlclRhcmdldCA9ICdhcGknIHwgJ3VpJyB8ICdhc3NldHMnXG5cbmV4cG9ydCBjbGFzcyBSZXF1ZXN0Um91dGVyIHtcbiAgICBpbnN0YW5jZTogUG9zdEhvZ1xuICAgIHByaXZhdGUgX3JlZ2lvbkNhY2hlOiBSZWNvcmQ8c3RyaW5nLCBSZXF1ZXN0Um91dGVyUmVnaW9uPiA9IHt9XG5cbiAgICBjb25zdHJ1Y3RvcihpbnN0YW5jZTogUG9zdEhvZykge1xuICAgICAgICB0aGlzLmluc3RhbmNlID0gaW5zdGFuY2VcbiAgICB9XG5cbiAgICBnZXQgYXBpSG9zdCgpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy5pbnN0YW5jZS5jb25maWcuYXBpX2hvc3QudHJpbSgpLnJlcGxhY2UoL1xcLyQvLCAnJylcbiAgICB9XG4gICAgZ2V0IHVpSG9zdCgpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICAgICAgICByZXR1cm4gdGhpcy5pbnN0YW5jZS5jb25maWcudWlfaG9zdD8ucmVwbGFjZSgvXFwvJC8sICcnKVxuICAgIH1cblxuICAgIGdldCByZWdpb24oKTogUmVxdWVzdFJvdXRlclJlZ2lvbiB7XG4gICAgICAgIC8vIFdlIGRvbid0IG5lZWQgdG8gY29tcHV0ZSB0aGlzIGV2ZXJ5IHRpbWUgc28gd2UgY2FjaGUgdGhlIHJlc3VsdFxuICAgICAgICBpZiAoIXRoaXMuX3JlZ2lvbkNhY2hlW3RoaXMuYXBpSG9zdF0pIHtcbiAgICAgICAgICAgIGlmICgvaHR0cHM6XFwvXFwvKGFwcHx1c3x1cy1hc3NldHMpKFxcLmkpP1xcLnBvc3Rob2dcXC5jb20vaS50ZXN0KHRoaXMuYXBpSG9zdCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9yZWdpb25DYWNoZVt0aGlzLmFwaUhvc3RdID0gUmVxdWVzdFJvdXRlclJlZ2lvbi5VU1xuICAgICAgICAgICAgfSBlbHNlIGlmICgvaHR0cHM6XFwvXFwvKGV1fGV1LWFzc2V0cykoXFwuaSk/XFwucG9zdGhvZ1xcLmNvbS9pLnRlc3QodGhpcy5hcGlIb3N0KSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3JlZ2lvbkNhY2hlW3RoaXMuYXBpSG9zdF0gPSBSZXF1ZXN0Um91dGVyUmVnaW9uLkVVXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuX3JlZ2lvbkNhY2hlW3RoaXMuYXBpSG9zdF0gPSBSZXF1ZXN0Um91dGVyUmVnaW9uLkNVU1RPTVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9yZWdpb25DYWNoZVt0aGlzLmFwaUhvc3RdXG4gICAgfVxuXG4gICAgZW5kcG9pbnRGb3IodGFyZ2V0OiBSZXF1ZXN0Um91dGVyVGFyZ2V0LCBwYXRoOiBzdHJpbmcgPSAnJyk6IHN0cmluZyB7XG4gICAgICAgIGlmIChwYXRoKSB7XG4gICAgICAgICAgICBwYXRoID0gcGF0aFswXSA9PT0gJy8nID8gcGF0aCA6IGAvJHtwYXRofWBcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0YXJnZXQgPT09ICd1aScpIHtcbiAgICAgICAgICAgIHJldHVybiAodGhpcy51aUhvc3QgfHwgdGhpcy5hcGlIb3N0KSArIHBhdGhcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnJlZ2lvbiA9PT0gUmVxdWVzdFJvdXRlclJlZ2lvbi5DVVNUT00pIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFwaUhvc3QgKyBwYXRoXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzdWZmaXggPSAnaS5wb3N0aG9nLmNvbScgKyBwYXRoXG5cbiAgICAgICAgc3dpdGNoICh0YXJnZXQpIHtcbiAgICAgICAgICAgIGNhc2UgJ2Fzc2V0cyc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGBodHRwczovLyR7dGhpcy5yZWdpb259LWFzc2V0cy4ke3N1ZmZpeH1gXG4gICAgICAgICAgICBjYXNlICdhcGknOlxuICAgICAgICAgICAgICAgIHJldHVybiBgaHR0cHM6Ly8ke3RoaXMucmVnaW9ufS4ke3N1ZmZpeH1gXG4gICAgICAgIH1cbiAgICB9XG59XG4iLCAiaW1wb3J0IHsgUG9zdEhvZ1BlcnNpc3RlbmNlIH0gZnJvbSAnLi9wb3N0aG9nLXBlcnNpc3RlbmNlJ1xuaW1wb3J0IHsgU0VTU0lPTl9JRCB9IGZyb20gJy4vY29uc3RhbnRzJ1xuaW1wb3J0IHsgc2Vzc2lvblN0b3JlIH0gZnJvbSAnLi9zdG9yYWdlJ1xuaW1wb3J0IHsgUG9zdEhvZ0NvbmZpZywgU2Vzc2lvbklkQ2hhbmdlZENhbGxiYWNrIH0gZnJvbSAnLi90eXBlcydcbmltcG9ydCB7IHV1aWR2NyB9IGZyb20gJy4vdXVpZHY3J1xuaW1wb3J0IHsgd2luZG93IH0gZnJvbSAnLi91dGlscy9nbG9iYWxzJ1xuXG5pbXBvcnQgeyBfaXNBcnJheSwgX2lzTnVtYmVyLCBfaXNVbmRlZmluZWQgfSBmcm9tICcuL3V0aWxzL3R5cGUtdXRpbHMnXG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tICcuL3V0aWxzL2xvZ2dlcidcblxuY29uc3QgTUFYX1NFU1NJT05fSURMRV9USU1FT1VUID0gMzAgKiA2MCAvLyAzMCBtaW51dGVzXG5jb25zdCBNSU5fU0VTU0lPTl9JRExFX1RJTUVPVVQgPSA2MCAvLyAxIG1pbnV0ZVxuY29uc3QgU0VTU0lPTl9MRU5HVEhfTElNSVQgPSAyNCAqIDM2MDAgKiAxMDAwIC8vIDI0IGhvdXJzXG5cbmV4cG9ydCBjbGFzcyBTZXNzaW9uSWRNYW5hZ2VyIHtcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9zZXNzaW9uSWRHZW5lcmF0b3I6ICgpID0+IHN0cmluZ1xuICAgIHByaXZhdGUgcmVhZG9ubHkgX3dpbmRvd0lkR2VuZXJhdG9yOiAoKSA9PiBzdHJpbmdcbiAgICBwcml2YXRlIGNvbmZpZzogUGFydGlhbDxQb3N0SG9nQ29uZmlnPlxuICAgIHByaXZhdGUgcGVyc2lzdGVuY2U6IFBvc3RIb2dQZXJzaXN0ZW5jZVxuICAgIHByaXZhdGUgX3dpbmRvd0lkOiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkXG4gICAgcHJpdmF0ZSBfc2Vzc2lvbklkOiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkXG4gICAgcHJpdmF0ZSByZWFkb25seSBfd2luZG93X2lkX3N0b3JhZ2Vfa2V5OiBzdHJpbmdcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9wcmltYXJ5X3dpbmRvd19leGlzdHNfc3RvcmFnZV9rZXk6IHN0cmluZ1xuICAgIHByaXZhdGUgX3Nlc3Npb25TdGFydFRpbWVzdGFtcDogbnVtYmVyIHwgbnVsbFxuXG4gICAgcHJpdmF0ZSBfc2Vzc2lvbkFjdGl2aXR5VGltZXN0YW1wOiBudW1iZXIgfCBudWxsXG4gICAgcHJpdmF0ZSByZWFkb25seSBfc2Vzc2lvblRpbWVvdXRNczogbnVtYmVyXG4gICAgcHJpdmF0ZSBfc2Vzc2lvbklkQ2hhbmdlZEhhbmRsZXJzOiBTZXNzaW9uSWRDaGFuZ2VkQ2FsbGJhY2tbXSA9IFtdXG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgY29uZmlnOiBQYXJ0aWFsPFBvc3RIb2dDb25maWc+LFxuICAgICAgICBwZXJzaXN0ZW5jZTogUG9zdEhvZ1BlcnNpc3RlbmNlLFxuICAgICAgICBzZXNzaW9uSWRHZW5lcmF0b3I/OiAoKSA9PiBzdHJpbmcsXG4gICAgICAgIHdpbmRvd0lkR2VuZXJhdG9yPzogKCkgPT4gc3RyaW5nXG4gICAgKSB7XG4gICAgICAgIHRoaXMuY29uZmlnID0gY29uZmlnXG4gICAgICAgIHRoaXMucGVyc2lzdGVuY2UgPSBwZXJzaXN0ZW5jZVxuICAgICAgICB0aGlzLl93aW5kb3dJZCA9IHVuZGVmaW5lZFxuICAgICAgICB0aGlzLl9zZXNzaW9uSWQgPSB1bmRlZmluZWRcbiAgICAgICAgdGhpcy5fc2Vzc2lvblN0YXJ0VGltZXN0YW1wID0gbnVsbFxuICAgICAgICB0aGlzLl9zZXNzaW9uQWN0aXZpdHlUaW1lc3RhbXAgPSBudWxsXG4gICAgICAgIHRoaXMuX3Nlc3Npb25JZEdlbmVyYXRvciA9IHNlc3Npb25JZEdlbmVyYXRvciB8fCB1dWlkdjdcbiAgICAgICAgdGhpcy5fd2luZG93SWRHZW5lcmF0b3IgPSB3aW5kb3dJZEdlbmVyYXRvciB8fCB1dWlkdjdcblxuICAgICAgICBjb25zdCBwZXJzaXN0ZW5jZU5hbWUgPSBjb25maWdbJ3BlcnNpc3RlbmNlX25hbWUnXSB8fCBjb25maWdbJ3Rva2VuJ11cbiAgICAgICAgbGV0IGRlc2lyZWRUaW1lb3V0ID0gY29uZmlnWydzZXNzaW9uX2lkbGVfdGltZW91dF9zZWNvbmRzJ10gfHwgTUFYX1NFU1NJT05fSURMRV9USU1FT1VUXG5cbiAgICAgICAgaWYgKCFfaXNOdW1iZXIoZGVzaXJlZFRpbWVvdXQpKSB7XG4gICAgICAgICAgICBsb2dnZXIud2Fybignc2Vzc2lvbl9pZGxlX3RpbWVvdXRfc2Vjb25kcyBtdXN0IGJlIGEgbnVtYmVyLiBEZWZhdWx0aW5nIHRvIDMwIG1pbnV0ZXMuJylcbiAgICAgICAgICAgIGRlc2lyZWRUaW1lb3V0ID0gTUFYX1NFU1NJT05fSURMRV9USU1FT1VUXG4gICAgICAgIH0gZWxzZSBpZiAoZGVzaXJlZFRpbWVvdXQgPiBNQVhfU0VTU0lPTl9JRExFX1RJTUVPVVQpIHtcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKCdzZXNzaW9uX2lkbGVfdGltZW91dF9zZWNvbmRzIGNhbm5vdCBiZSAgZ3JlYXRlciB0aGFuIDMwIG1pbnV0ZXMuIFVzaW5nIDMwIG1pbnV0ZXMgaW5zdGVhZC4nKVxuICAgICAgICB9IGVsc2UgaWYgKGRlc2lyZWRUaW1lb3V0IDwgTUlOX1NFU1NJT05fSURMRV9USU1FT1VUKSB7XG4gICAgICAgICAgICBsb2dnZXIud2Fybignc2Vzc2lvbl9pZGxlX3RpbWVvdXRfc2Vjb25kcyBjYW5ub3QgYmUgbGVzcyB0aGFuIDYwIHNlY29uZHMuIFVzaW5nIDYwIHNlY29uZHMgaW5zdGVhZC4nKVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fc2Vzc2lvblRpbWVvdXRNcyA9XG4gICAgICAgICAgICBNYXRoLm1pbihNYXRoLm1heChkZXNpcmVkVGltZW91dCwgTUlOX1NFU1NJT05fSURMRV9USU1FT1VUKSwgTUFYX1NFU1NJT05fSURMRV9USU1FT1VUKSAqIDEwMDBcbiAgICAgICAgdGhpcy5fd2luZG93X2lkX3N0b3JhZ2Vfa2V5ID0gJ3BoXycgKyBwZXJzaXN0ZW5jZU5hbWUgKyAnX3dpbmRvd19pZCdcbiAgICAgICAgdGhpcy5fcHJpbWFyeV93aW5kb3dfZXhpc3RzX3N0b3JhZ2Vfa2V5ID0gJ3BoXycgKyBwZXJzaXN0ZW5jZU5hbWUgKyAnX3ByaW1hcnlfd2luZG93X2V4aXN0cydcblxuICAgICAgICAvLyBwcmltYXJ5X3dpbmRvd19leGlzdHMgaXMgc2V0IHdoZW4gdGhlIERPTSBoYXMgYmVlbiBsb2FkZWQgYW5kIGlzIGNsZWFyZWQgb24gdW5sb2FkXG4gICAgICAgIC8vIGlmIGl0IGV4aXN0cyBoZXJlIGl0IG1lYW5zIHRoZXJlIHdhcyBubyB1bmxvYWQgd2hpY2ggc3VnZ2VzdHMgdGhpcyB3aW5kb3cgaXMgb3BlbmVkIGFzIGEgdGFiIGR1cGxpY2F0aW9uLCB3aW5kb3cub3BlbiwgZXRjLlxuICAgICAgICBpZiAodGhpcy5fY2FuVXNlU2Vzc2lvblN0b3JhZ2UoKSkge1xuICAgICAgICAgICAgY29uc3QgbGFzdFdpbmRvd0lkID0gc2Vzc2lvblN0b3JlLnBhcnNlKHRoaXMuX3dpbmRvd19pZF9zdG9yYWdlX2tleSlcblxuICAgICAgICAgICAgY29uc3QgcHJpbWFyeVdpbmRvd0V4aXN0cyA9IHNlc3Npb25TdG9yZS5wYXJzZSh0aGlzLl9wcmltYXJ5X3dpbmRvd19leGlzdHNfc3RvcmFnZV9rZXkpXG4gICAgICAgICAgICBpZiAobGFzdFdpbmRvd0lkICYmICFwcmltYXJ5V2luZG93RXhpc3RzKSB7XG4gICAgICAgICAgICAgICAgLy8gUGVyc2lzdCB3aW5kb3cgZnJvbSBwcmV2aW91cyBzdG9yYWdlIHN0YXRlXG4gICAgICAgICAgICAgICAgdGhpcy5fd2luZG93SWQgPSBsYXN0V2luZG93SWRcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gV2lwZSBhbnkgcmVmZXJlbmNlIHRvIHByZXZpb3VzIHdpbmRvdyBpZFxuICAgICAgICAgICAgICAgIHNlc3Npb25TdG9yZS5yZW1vdmUodGhpcy5fd2luZG93X2lkX3N0b3JhZ2Vfa2V5KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gRmxhZyB0aGlzIHNlc3Npb24gYXMgaGF2aW5nIGEgcHJpbWFyeSB3aW5kb3dcbiAgICAgICAgICAgIHNlc3Npb25TdG9yZS5zZXQodGhpcy5fcHJpbWFyeV93aW5kb3dfZXhpc3RzX3N0b3JhZ2Vfa2V5LCB0cnVlKVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fbGlzdGVuVG9SZWxvYWRXaW5kb3coKVxuICAgIH1cblxuICAgIG9uU2Vzc2lvbklkKGNhbGxiYWNrOiBTZXNzaW9uSWRDaGFuZ2VkQ2FsbGJhY2spOiAoKSA9PiB2b2lkIHtcbiAgICAgICAgLy8gS0xVREdFOiB3aGVuIHJ1bm5pbmcgaW4gdGVzdHMgdGhlIGhhbmRsZXJzIGFycmF5IHdhcyBhbHdheXMgdW5kZWZpbmVkXG4gICAgICAgIC8vIGl0J3MgeXVja3kgYnV0IHNhZmUgdG8gc2V0IGl0IGhlcmUgc28gdGhhdCBpdCdzIGFsd2F5cyBkZWZpbml0ZWx5IGF2YWlsYWJsZVxuICAgICAgICBpZiAoX2lzVW5kZWZpbmVkKHRoaXMuX3Nlc3Npb25JZENoYW5nZWRIYW5kbGVycykpIHtcbiAgICAgICAgICAgIHRoaXMuX3Nlc3Npb25JZENoYW5nZWRIYW5kbGVycyA9IFtdXG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9zZXNzaW9uSWRDaGFuZ2VkSGFuZGxlcnMucHVzaChjYWxsYmFjaylcbiAgICAgICAgaWYgKHRoaXMuX3Nlc3Npb25JZCkge1xuICAgICAgICAgICAgY2FsbGJhY2sodGhpcy5fc2Vzc2lvbklkLCB0aGlzLl93aW5kb3dJZClcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5fc2Vzc2lvbklkQ2hhbmdlZEhhbmRsZXJzID0gdGhpcy5fc2Vzc2lvbklkQ2hhbmdlZEhhbmRsZXJzLmZpbHRlcigoaCkgPT4gaCAhPT0gY2FsbGJhY2spXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIF9jYW5Vc2VTZXNzaW9uU3RvcmFnZSgpOiBib29sZWFuIHtcbiAgICAgICAgLy8gV2Ugb25seSB3YW50IHRvIHVzZSBzZXNzaW9uU3RvcmFnZSBpZiBwZXJzaXN0ZW5jZSBpcyBlbmFibGVkIGFuZCBub3QgbWVtb3J5IHN0b3JhZ2VcbiAgICAgICAgcmV0dXJuIHRoaXMuY29uZmlnLnBlcnNpc3RlbmNlICE9PSAnbWVtb3J5JyAmJiAhdGhpcy5wZXJzaXN0ZW5jZS5kaXNhYmxlZCAmJiBzZXNzaW9uU3RvcmUuaXNfc3VwcG9ydGVkKClcbiAgICB9XG5cbiAgICAvLyBOb3RlOiB0aGlzIHRyaWVzIHRvIHN0b3JlIHRoZSB3aW5kb3dJZCBpbiBzZXNzaW9uU3RvcmFnZS4gU2Vzc2lvblN0b3JhZ2UgaXMgdW5pcXVlIHRvIHRoZSBjdXJyZW50IHdpbmRvdy90YWIsXG4gICAgLy8gYW5kIHBlcnNpc3RzIHBhZ2UgbG9hZHMvcmVsb2Fkcy4gU28gaXQncyB1bmlxdWVseSBzdWl0ZWQgZm9yIHN0b3JpbmcgdGhlIHdpbmRvd0lkLiBUaGlzIGZ1bmN0aW9uIGFsc28gcmVzcGVjdHNcbiAgICAvLyB3aGVuIHBlcnNpc3RlbmNlIGlzIGRpc2FibGVkIChieSB1c2VyIGNvbmZpZykgYW5kIHdoZW4gc2Vzc2lvblN0b3JhZ2UgaXMgbm90IHN1cHBvcnRlZCAoaXQgKnNob3VsZCogYmUgc3VwcG9ydGVkIG9uIGFsbCBicm93c2VycyksXG4gICAgLy8gYW5kIGluIHRoYXQgY2FzZSwgaXQgZmFsbHMgYmFjayB0byBtZW1vcnkgKHdoaWNoIHNhZGx5LCB3b24ndCBwZXJzaXN0IHBhZ2UgbG9hZHMpXG4gICAgcHJpdmF0ZSBfc2V0V2luZG93SWQod2luZG93SWQ6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICBpZiAod2luZG93SWQgIT09IHRoaXMuX3dpbmRvd0lkKSB7XG4gICAgICAgICAgICB0aGlzLl93aW5kb3dJZCA9IHdpbmRvd0lkXG4gICAgICAgICAgICBpZiAodGhpcy5fY2FuVXNlU2Vzc2lvblN0b3JhZ2UoKSkge1xuICAgICAgICAgICAgICAgIHNlc3Npb25TdG9yZS5zZXQodGhpcy5fd2luZG93X2lkX3N0b3JhZ2Vfa2V5LCB3aW5kb3dJZClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgX2dldFdpbmRvd0lkKCk6IHN0cmluZyB8IG51bGwge1xuICAgICAgICBpZiAodGhpcy5fd2luZG93SWQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl93aW5kb3dJZFxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9jYW5Vc2VTZXNzaW9uU3RvcmFnZSgpKSB7XG4gICAgICAgICAgICByZXR1cm4gc2Vzc2lvblN0b3JlLnBhcnNlKHRoaXMuX3dpbmRvd19pZF9zdG9yYWdlX2tleSlcbiAgICAgICAgfVxuICAgICAgICAvLyBOZXcgd2luZG93IGlkIHdpbGwgYmUgZ2VuZXJhdGVkXG4gICAgICAgIHJldHVybiBudWxsXG4gICAgfVxuXG4gICAgLy8gTm90ZTogJ3RoaXMucGVyc2lzdGVuY2UucmVnaXN0ZXInIGNhbiBiZSBkaXNhYmxlZCBpbiB0aGUgY29uZmlnLlxuICAgIC8vIEluIHRoYXQgY2FzZSwgdGhpcyB3b3JrcyBieSBzdG9yaW5nIHNlc3Npb25JZCBhbmQgdGhlIHRpbWVzdGFtcCBpbiBtZW1vcnkuXG4gICAgcHJpdmF0ZSBfc2V0U2Vzc2lvbklkKFxuICAgICAgICBzZXNzaW9uSWQ6IHN0cmluZyB8IG51bGwsXG4gICAgICAgIHNlc3Npb25BY3Rpdml0eVRpbWVzdGFtcDogbnVtYmVyIHwgbnVsbCxcbiAgICAgICAgc2Vzc2lvblN0YXJ0VGltZXN0YW1wOiBudW1iZXIgfCBudWxsXG4gICAgKTogdm9pZCB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIHNlc3Npb25JZCAhPT0gdGhpcy5fc2Vzc2lvbklkIHx8XG4gICAgICAgICAgICBzZXNzaW9uQWN0aXZpdHlUaW1lc3RhbXAgIT09IHRoaXMuX3Nlc3Npb25BY3Rpdml0eVRpbWVzdGFtcCB8fFxuICAgICAgICAgICAgc2Vzc2lvblN0YXJ0VGltZXN0YW1wICE9PSB0aGlzLl9zZXNzaW9uU3RhcnRUaW1lc3RhbXBcbiAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzLl9zZXNzaW9uU3RhcnRUaW1lc3RhbXAgPSBzZXNzaW9uU3RhcnRUaW1lc3RhbXBcbiAgICAgICAgICAgIHRoaXMuX3Nlc3Npb25BY3Rpdml0eVRpbWVzdGFtcCA9IHNlc3Npb25BY3Rpdml0eVRpbWVzdGFtcFxuICAgICAgICAgICAgdGhpcy5fc2Vzc2lvbklkID0gc2Vzc2lvbklkXG5cbiAgICAgICAgICAgIHRoaXMucGVyc2lzdGVuY2UucmVnaXN0ZXIoe1xuICAgICAgICAgICAgICAgIFtTRVNTSU9OX0lEXTogW3Nlc3Npb25BY3Rpdml0eVRpbWVzdGFtcCwgc2Vzc2lvbklkLCBzZXNzaW9uU3RhcnRUaW1lc3RhbXBdLFxuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgX2dldFNlc3Npb25JZCgpOiBbbnVtYmVyLCBzdHJpbmcsIG51bWJlcl0ge1xuICAgICAgICBpZiAodGhpcy5fc2Vzc2lvbklkICYmIHRoaXMuX3Nlc3Npb25BY3Rpdml0eVRpbWVzdGFtcCAmJiB0aGlzLl9zZXNzaW9uU3RhcnRUaW1lc3RhbXApIHtcbiAgICAgICAgICAgIHJldHVybiBbdGhpcy5fc2Vzc2lvbkFjdGl2aXR5VGltZXN0YW1wLCB0aGlzLl9zZXNzaW9uSWQsIHRoaXMuX3Nlc3Npb25TdGFydFRpbWVzdGFtcF1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzZXNzaW9uSWQgPSB0aGlzLnBlcnNpc3RlbmNlLnByb3BzW1NFU1NJT05fSURdXG5cbiAgICAgICAgaWYgKF9pc0FycmF5KHNlc3Npb25JZCkgJiYgc2Vzc2lvbklkLmxlbmd0aCA9PT0gMikge1xuICAgICAgICAgICAgLy8gU3RvcmFnZSBkb2VzIG5vdCB5ZXQgaGF2ZSBhIHNlc3Npb24gc3RhcnQgdGltZS4gQWRkIHRoZSBsYXN0IGFjdGl2aXR5IHRpbWVzdGFtcCBhcyB0aGUgc3RhcnQgdGltZVxuICAgICAgICAgICAgc2Vzc2lvbklkLnB1c2goc2Vzc2lvbklkWzBdKVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHNlc3Npb25JZCB8fCBbMCwgbnVsbCwgMF1cbiAgICB9XG5cbiAgICAvLyBSZXNldHMgdGhlIHNlc3Npb24gaWQgYnkgc2V0dGluZyBpdCB0byBudWxsLiBPbiB0aGUgc3Vic2VxdWVudCBjYWxsIHRvIGNoZWNrQW5kR2V0U2Vzc2lvbkFuZFdpbmRvd0lkLFxuICAgIC8vIG5ldyBpZHMgd2lsbCBiZSBnZW5lcmF0ZWQuXG4gICAgcmVzZXRTZXNzaW9uSWQoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuX3NldFNlc3Npb25JZChudWxsLCBudWxsLCBudWxsKVxuICAgIH1cblxuICAgIC8qXG4gICAgICogTGlzdGVucyB0byB3aW5kb3cgdW5sb2FkcyBhbmQgcmVtb3ZlcyB0aGUgcHJpbWFyeVdpbmRvd0V4aXN0cyBrZXkgZnJvbSBzZXNzaW9uU3RvcmFnZS5cbiAgICAgKiBSZWxvYWRlZCBvciBmcmVzaCB0YWJzIGNyZWF0ZWQgYWZ0ZXIgYSBET00gdW5sb2FkcyAocmVsb2FkaW5nIHRoZSBzYW1lIHRhYikgV0lMTCBOT1QgaGF2ZSB0aGlzIHByaW1hcnlXaW5kb3dFeGlzdHMgZmxhZyBpbiBzZXNzaW9uIHN0b3JhZ2UuXG4gICAgICogQ2xvbmVkIHNlc3Npb25zIChuZXcgdGFiLCB0YWIgZHVwbGljYXRpb24sIHdpbmRvdy5vcGVuKCksIC4uLikgV0lMTCBoYXZlIHRoaXMgcHJpbWFyeVdpbmRvd0V4aXN0cyBmbGFnIGluIHRoZWlyIGNvcGllZCBzZXNzaW9uIHN0b3JhZ2UuXG4gICAgICogV2UgY29uZGl0aW9uYWxseSBjaGVjayB0aGUgcHJpbWFyeVdpbmRvd0V4aXN0cyB2YWx1ZSBpbiB0aGUgY29uc3RydWN0b3IgdG8gZGVjaWRlIGlmIHRoZSB3aW5kb3cgaWQgaW4gdGhlIGxhc3Qgc2Vzc2lvbiBzdG9yYWdlIHNob3VsZCBiZSBjYXJyaWVkIG92ZXIuXG4gICAgICovXG4gICAgcHJpdmF0ZSBfbGlzdGVuVG9SZWxvYWRXaW5kb3coKTogdm9pZCB7XG4gICAgICAgIHdpbmRvdz8uYWRkRXZlbnRMaXN0ZW5lcignYmVmb3JldW5sb2FkJywgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuX2NhblVzZVNlc3Npb25TdG9yYWdlKCkpIHtcbiAgICAgICAgICAgICAgICBzZXNzaW9uU3RvcmUucmVtb3ZlKHRoaXMuX3ByaW1hcnlfd2luZG93X2V4aXN0c19zdG9yYWdlX2tleSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICAvKlxuICAgICAqIFRoaXMgZnVuY3Rpb24gcmV0dXJucyB0aGUgY3VycmVudCBzZXNzaW9uSWQgYW5kIHdpbmRvd0lkLiBJdCBzaG91bGQgYmUgdXNlZCB0b1xuICAgICAqIGFjY2VzcyB0aGVzZSB2YWx1ZXMgb3ZlciBkaXJlY3RseSBjYWxsaW5nIGAuX3Nlc3Npb25JZGAgb3IgYC5fd2luZG93SWRgLlxuICAgICAqIEluIGFkZGl0aW9uIHRvIHJldHVybmluZyB0aGUgc2Vzc2lvbklkIGFuZCB3aW5kb3dJZCwgdGhpcyBmdW5jdGlvbiBhbHNvIG1hbmFnZXMgY3ljbGluZyB0aGVcbiAgICAgKiBzZXNzaW9uSWQgYW5kIHdpbmRvd0lkIHdoZW4gYXBwcm9wcmlhdGUgYnkgZG9pbmcgdGhlIGZvbGxvd2luZzpcbiAgICAgKlxuICAgICAqIDEuIElmIHRoZSBzZXNzaW9uSWQgb3Igd2luZG93SWQgaXMgbm90IHNldCwgaXQgd2lsbCBnZW5lcmF0ZSBhIG5ldyBvbmUgYW5kIHN0b3JlIGl0LlxuICAgICAqIDIuIElmIHRoZSByZWFkT25seSBwYXJhbSBpcyBzZXQgdG8gZmFsc2UsIGl0IHdpbGw6XG4gICAgICogICAgYS4gQ2hlY2sgaWYgaXQgaGFzIGJlZW4gPiBTRVNTSU9OX0NIQU5HRV9USFJFU0hPTEQgc2luY2UgdGhlIGxhc3QgY2FsbCB3aXRoIHRoaXMgZmxhZyBzZXQuXG4gICAgICogICAgICAgSWYgc28sIGl0IHdpbGwgZ2VuZXJhdGUgYSBuZXcgc2Vzc2lvbklkIGFuZCBzdG9yZSBpdC5cbiAgICAgKiAgICBiLiBVcGRhdGUgdGhlIHRpbWVzdGFtcCBzdG9yZWQgd2l0aCB0aGUgc2Vzc2lvbklkIHRvIGVuc3VyZSB0aGUgY3VycmVudCBzZXNzaW9uIGlzIGV4dGVuZGVkXG4gICAgICogICAgICAgZm9yIHRoZSBhcHByb3ByaWF0ZSBhbW91bnQgb2YgdGltZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gcmVhZE9ubHkgKG9wdGlvbmFsKSBEZWZhdWx0cyB0byBGYWxzZS4gU2hvdWxkIGJlIHNldCB0byBUcnVlIHdoZW4gdGhlIGNhbGwgdG8gdGhlIGZ1bmN0aW9uIHNob3VsZCBub3QgZXh0ZW5kIG9yIGN5Y2xlIHRoZSBzZXNzaW9uIChlLmcuIGJlaW5nIGNhbGxlZCBmb3Igbm9uLXVzZXIgZ2VuZXJhdGVkIGV2ZW50cylcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gdGltZXN0YW1wIChvcHRpb25hbCkgRGVmYXVsdHMgdG8gdGhlIGN1cnJlbnQgdGltZS4gVGhlIHRpbWVzdGFtcCB0byBiZSBzdG9yZWQgd2l0aCB0aGUgc2Vzc2lvbklkICh1c2VkIHdoZW4gZGV0ZXJtaW5pbmcgaWYgYSBuZXcgc2Vzc2lvbklkIHNob3VsZCBiZSBnZW5lcmF0ZWQpXG4gICAgICovXG4gICAgY2hlY2tBbmRHZXRTZXNzaW9uQW5kV2luZG93SWQocmVhZE9ubHkgPSBmYWxzZSwgX3RpbWVzdGFtcDogbnVtYmVyIHwgbnVsbCA9IG51bGwpIHtcbiAgICAgICAgY29uc3QgdGltZXN0YW1wID0gX3RpbWVzdGFtcCB8fCBuZXcgRGF0ZSgpLmdldFRpbWUoKVxuXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcmVmZXItY29uc3RcbiAgICAgICAgbGV0IFtsYXN0VGltZXN0YW1wLCBzZXNzaW9uSWQsIHN0YXJ0VGltZXN0YW1wXSA9IHRoaXMuX2dldFNlc3Npb25JZCgpXG4gICAgICAgIGxldCB3aW5kb3dJZCA9IHRoaXMuX2dldFdpbmRvd0lkKClcblxuICAgICAgICBjb25zdCBzZXNzaW9uUGFzdE1heGltdW1MZW5ndGggPVxuICAgICAgICAgICAgc3RhcnRUaW1lc3RhbXAgJiYgc3RhcnRUaW1lc3RhbXAgPiAwICYmIE1hdGguYWJzKHRpbWVzdGFtcCAtIHN0YXJ0VGltZXN0YW1wKSA+IFNFU1NJT05fTEVOR1RIX0xJTUlUXG5cbiAgICAgICAgbGV0IHZhbHVlc0NoYW5nZWQgPSBmYWxzZVxuICAgICAgICBjb25zdCBub1Nlc3Npb25JZCA9ICFzZXNzaW9uSWRcbiAgICAgICAgY29uc3QgYWN0aXZpdHlUaW1lb3V0ID0gIXJlYWRPbmx5ICYmIE1hdGguYWJzKHRpbWVzdGFtcCAtIGxhc3RUaW1lc3RhbXApID4gdGhpcy5fc2Vzc2lvblRpbWVvdXRNc1xuICAgICAgICBpZiAobm9TZXNzaW9uSWQgfHwgYWN0aXZpdHlUaW1lb3V0IHx8IHNlc3Npb25QYXN0TWF4aW11bUxlbmd0aCkge1xuICAgICAgICAgICAgc2Vzc2lvbklkID0gdGhpcy5fc2Vzc2lvbklkR2VuZXJhdG9yKClcbiAgICAgICAgICAgIHdpbmRvd0lkID0gdGhpcy5fd2luZG93SWRHZW5lcmF0b3IoKVxuICAgICAgICAgICAgbG9nZ2VyLmluZm8oJ1tTZXNzaW9uSWRdIG5ldyBzZXNzaW9uIElEIGdlbmVyYXRlZCcsIHtcbiAgICAgICAgICAgICAgICBzZXNzaW9uSWQsXG4gICAgICAgICAgICAgICAgd2luZG93SWQsXG4gICAgICAgICAgICAgICAgY2hhbmdlUmVhc29uOiB7IG5vU2Vzc2lvbklkLCBhY3Rpdml0eVRpbWVvdXQsIHNlc3Npb25QYXN0TWF4aW11bUxlbmd0aCB9LFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIHN0YXJ0VGltZXN0YW1wID0gdGltZXN0YW1wXG4gICAgICAgICAgICB2YWx1ZXNDaGFuZ2VkID0gdHJ1ZVxuICAgICAgICB9IGVsc2UgaWYgKCF3aW5kb3dJZCkge1xuICAgICAgICAgICAgd2luZG93SWQgPSB0aGlzLl93aW5kb3dJZEdlbmVyYXRvcigpXG4gICAgICAgICAgICB2YWx1ZXNDaGFuZ2VkID0gdHJ1ZVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbmV3VGltZXN0YW1wID0gbGFzdFRpbWVzdGFtcCA9PT0gMCB8fCAhcmVhZE9ubHkgfHwgc2Vzc2lvblBhc3RNYXhpbXVtTGVuZ3RoID8gdGltZXN0YW1wIDogbGFzdFRpbWVzdGFtcFxuICAgICAgICBjb25zdCBzZXNzaW9uU3RhcnRUaW1lc3RhbXAgPSBzdGFydFRpbWVzdGFtcCA9PT0gMCA/IG5ldyBEYXRlKCkuZ2V0VGltZSgpIDogc3RhcnRUaW1lc3RhbXBcblxuICAgICAgICB0aGlzLl9zZXRXaW5kb3dJZCh3aW5kb3dJZClcbiAgICAgICAgdGhpcy5fc2V0U2Vzc2lvbklkKHNlc3Npb25JZCwgbmV3VGltZXN0YW1wLCBzZXNzaW9uU3RhcnRUaW1lc3RhbXApXG5cbiAgICAgICAgaWYgKHZhbHVlc0NoYW5nZWQpIHtcbiAgICAgICAgICAgIHRoaXMuX3Nlc3Npb25JZENoYW5nZWRIYW5kbGVycy5mb3JFYWNoKChoYW5kbGVyKSA9PiBoYW5kbGVyKHNlc3Npb25JZCwgd2luZG93SWQpKVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHNlc3Npb25JZCxcbiAgICAgICAgICAgIHdpbmRvd0lkLFxuICAgICAgICAgICAgc2Vzc2lvblN0YXJ0VGltZXN0YW1wLFxuICAgICAgICB9XG4gICAgfVxufVxuIiwgIi8qKlxuICogSW50ZWdyYXRlIFNlbnRyeSB3aXRoIFBvc3RIb2cuIFRoaXMgd2lsbCBhZGQgYSBkaXJlY3QgbGluayB0byB0aGUgcGVyc29uIGluIFNlbnRyeSwgYW5kIGFuICRleGNlcHRpb24gZXZlbnQgaW4gUG9zdEhvZ1xuICpcbiAqICMjIyBVc2FnZVxuICpcbiAqICAgICBTZW50cnkuaW5pdCh7XG4gKiAgICAgICAgICBkc246ICdodHRwczovL2V4YW1wbGUnLFxuICogICAgICAgICAgaW50ZWdyYXRpb25zOiBbXG4gKiAgICAgICAgICAgICAgbmV3IHBvc3Rob2cuU2VudHJ5SW50ZWdyYXRpb24ocG9zdGhvZylcbiAqICAgICAgICAgIF1cbiAqICAgICB9KVxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBbcG9zdGhvZ10gVGhlIHBvc3Rob2cgb2JqZWN0XG4gKiBAcGFyYW0ge3N0cmluZ30gW29yZ2FuaXphdGlvbl0gT3B0aW9uYWw6IFRoZSBTZW50cnkgb3JnYW5pemF0aW9uLCB1c2VkIHRvIHNlbmQgYSBkaXJlY3QgbGluayBmcm9tIFBvc3RIb2cgdG8gU2VudHJ5XG4gKiBAcGFyYW0ge051bWJlcn0gW3Byb2plY3RJZF0gT3B0aW9uYWw6IFRoZSBTZW50cnkgcHJvamVjdCBpZCwgdXNlZCB0byBzZW5kIGEgZGlyZWN0IGxpbmsgZnJvbSBQb3N0SG9nIHRvIFNlbnRyeVxuICogQHBhcmFtIHtzdHJpbmd9IFtwcmVmaXhdIE9wdGlvbmFsOiBVcmwgb2YgYSBzZWxmLWhvc3RlZCBzZW50cnkgaW5zdGFuY2UgKGRlZmF1bHQ6IGh0dHBzOi8vc2VudHJ5LmlvL29yZ2FuaXphdGlvbnMvKVxuICovXG5cbmltcG9ydCB7IFBvc3RIb2cgfSBmcm9tICcuLi9wb3N0aG9nLWNvcmUnXG5cbi8vIE5PVEUgLSB3ZSBjYW4ndCBpbXBvcnQgZnJvbSBAc2VudHJ5L3R5cGVzIGJlY2F1c2UgaXQgY2hhbmdlcyBmcmVxdWVudGx5IGFuZCBjYXVzZXMgY2xhc2hlc1xuLy8gV2Ugb25seSB1c2UgYSBzbWFsbCBzdWJzZXQgb2YgdGhlIHR5cGVzLCBzbyB3ZSBjYW4ganVzdCBkZWZpbmUgdGhlIGludGVncmF0aW9uIG92ZXJhbGwgYW5kIHVzZSBhbnkgZm9yIHRoZSByZXN0XG5cbi8vIGltcG9ydCB7XG4vLyAgICAgRXZlbnQgYXMgX1NlbnRyeUV2ZW50LFxuLy8gICAgIEV2ZW50UHJvY2Vzc29yIGFzIF9TZW50cnlFdmVudFByb2Nlc3Nvcixcbi8vICAgICBIdWIgYXMgX1NlbnRyeUh1Yixcbi8vICAgICBJbnRlZ3JhdGlvbiBhcyBfU2VudHJ5SW50ZWdyYXRpb24sXG4vLyB9IGZyb20gJ0BzZW50cnkvdHlwZXMnXG5cbi8vIFVuY29tbWVudCB0aGUgYWJvdmUgYW5kIGNvbW1lbnQgdGhlIGJlbG93IHRvIGdldCB0eXBlIGNoZWNraW5nIGZvciBkZXZlbG9wbWVudFxuXG50eXBlIF9TZW50cnlFdmVudCA9IGFueVxudHlwZSBfU2VudHJ5RXZlbnRQcm9jZXNzb3IgPSBhbnlcbnR5cGUgX1NlbnRyeUh1YiA9IGFueVxuXG5pbnRlcmZhY2UgX1NlbnRyeUludGVncmF0aW9uIHtcbiAgICBuYW1lOiBzdHJpbmdcbiAgICBzZXR1cE9uY2UoYWRkR2xvYmFsRXZlbnRQcm9jZXNzb3I6IChjYWxsYmFjazogX1NlbnRyeUV2ZW50UHJvY2Vzc29yKSA9PiB2b2lkLCBnZXRDdXJyZW50SHViOiAoKSA9PiBfU2VudHJ5SHViKTogdm9pZFxufVxuXG5pbnRlcmZhY2UgU2VudHJ5RXhjZXB0aW9uUHJvcGVydGllcyB7XG4gICAgJHNlbnRyeV9ldmVudF9pZDogYW55XG4gICAgJHNlbnRyeV9leGNlcHRpb246IGFueVxuICAgICRzZW50cnlfZXhjZXB0aW9uX21lc3NhZ2U6IGFueVxuICAgICRzZW50cnlfZXhjZXB0aW9uX3R5cGU6IGFueVxuICAgICRzZW50cnlfdGFnczogYW55XG4gICAgJHNlbnRyeV91cmw/OiBzdHJpbmdcbn1cblxuZXhwb3J0IGNsYXNzIFNlbnRyeUludGVncmF0aW9uIGltcGxlbWVudHMgX1NlbnRyeUludGVncmF0aW9uIHtcbiAgICBuYW1lOiBzdHJpbmdcblxuICAgIHNldHVwT25jZTogKFxuICAgICAgICBhZGRHbG9iYWxFdmVudFByb2Nlc3NvcjogKGNhbGxiYWNrOiBfU2VudHJ5RXZlbnRQcm9jZXNzb3IpID0+IHZvaWQsXG4gICAgICAgIGdldEN1cnJlbnRIdWI6ICgpID0+IF9TZW50cnlIdWJcbiAgICApID0+IHZvaWRcblxuICAgIGNvbnN0cnVjdG9yKF9wb3N0aG9nOiBQb3N0SG9nLCBvcmdhbml6YXRpb24/OiBzdHJpbmcsIHByb2plY3RJZD86IG51bWJlciwgcHJlZml4Pzogc3RyaW5nKSB7XG4gICAgICAgIC8vIHNldHVwT25jZSBnZXRzIGNhbGxlZCBieSBTZW50cnkgd2hlbiBpdCBpbnRpYWxpemVzIHRoZSBwbHVnaW5cbiAgICAgICAgdGhpcy5uYW1lID0gJ3Bvc3Rob2ctanMnXG4gICAgICAgIHRoaXMuc2V0dXBPbmNlID0gZnVuY3Rpb24gKGFkZEdsb2JhbEV2ZW50UHJvY2Vzc29yOiAoY2FsbGJhY2s6IF9TZW50cnlFdmVudFByb2Nlc3NvcikgPT4gdm9pZCkge1xuICAgICAgICAgICAgYWRkR2xvYmFsRXZlbnRQcm9jZXNzb3IoKGV2ZW50OiBfU2VudHJ5RXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnQubGV2ZWwgIT09ICdlcnJvcicgfHwgIV9wb3N0aG9nLl9fbG9hZGVkKSByZXR1cm4gZXZlbnRcbiAgICAgICAgICAgICAgICBpZiAoIWV2ZW50LnRhZ3MpIGV2ZW50LnRhZ3MgPSB7fVxuXG4gICAgICAgICAgICAgICAgY29uc3QgcGVyc29uVXJsID0gX3Bvc3Rob2cucmVxdWVzdFJvdXRlci5lbmRwb2ludEZvcigndWknLCAnL3BlcnNvbi8nICsgX3Bvc3Rob2cuZ2V0X2Rpc3RpbmN0X2lkKCkpXG4gICAgICAgICAgICAgICAgZXZlbnQudGFnc1snUG9zdEhvZyBQZXJzb24gVVJMJ10gPSBwZXJzb25VcmxcbiAgICAgICAgICAgICAgICBpZiAoX3Bvc3Rob2cuc2Vzc2lvblJlY29yZGluZ1N0YXJ0ZWQoKSkge1xuICAgICAgICAgICAgICAgICAgICBldmVudC50YWdzWydQb3N0SG9nIFJlY29yZGluZyBVUkwnXSA9IF9wb3N0aG9nLmdldF9zZXNzaW9uX3JlcGxheV91cmwoeyB3aXRoVGltZXN0YW1wOiB0cnVlIH0pXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY29uc3QgZXhjZXB0aW9ucyA9IGV2ZW50LmV4Y2VwdGlvbj8udmFsdWVzIHx8IFtdXG5cbiAgICAgICAgICAgICAgICBjb25zdCBkYXRhOiBTZW50cnlFeGNlcHRpb25Qcm9wZXJ0aWVzICYge1xuICAgICAgICAgICAgICAgICAgICAvLyB0d28gcHJvcGVydGllcyBhZGRlZCB0byBtYXRjaCBhbnkgZXhjZXB0aW9uIGF1dG8tY2FwdHVyZVxuICAgICAgICAgICAgICAgICAgICAvLyBhZGRlZCBtYW51YWxseSB0byBhdm9pZCBhbnkgZGVwZW5kZW5jeSBvbiB0aGUgbGF6aWx5IGxvYWRlZCBjb250ZW50XG4gICAgICAgICAgICAgICAgICAgICRleGNlcHRpb25fbWVzc2FnZTogYW55XG4gICAgICAgICAgICAgICAgICAgICRleGNlcHRpb25fdHlwZTogYW55XG4gICAgICAgICAgICAgICAgICAgICRleGNlcHRpb25fcGVyc29uVVJMOiBzdHJpbmdcbiAgICAgICAgICAgICAgICB9ID0ge1xuICAgICAgICAgICAgICAgICAgICAvLyBQb3N0SG9nIEV4Y2VwdGlvbiBQcm9wZXJ0aWVzLFxuICAgICAgICAgICAgICAgICAgICAkZXhjZXB0aW9uX21lc3NhZ2U6IGV4Y2VwdGlvbnNbMF0/LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAkZXhjZXB0aW9uX3R5cGU6IGV4Y2VwdGlvbnNbMF0/LnR5cGUsXG4gICAgICAgICAgICAgICAgICAgICRleGNlcHRpb25fcGVyc29uVVJMOiBwZXJzb25VcmwsXG4gICAgICAgICAgICAgICAgICAgIC8vIFNlbnRyeSBFeGNlcHRpb24gUHJvcGVydGllc1xuICAgICAgICAgICAgICAgICAgICAkc2VudHJ5X2V2ZW50X2lkOiBldmVudC5ldmVudF9pZCxcbiAgICAgICAgICAgICAgICAgICAgJHNlbnRyeV9leGNlcHRpb246IGV2ZW50LmV4Y2VwdGlvbixcbiAgICAgICAgICAgICAgICAgICAgJHNlbnRyeV9leGNlcHRpb25fbWVzc2FnZTogZXhjZXB0aW9uc1swXT8udmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICRzZW50cnlfZXhjZXB0aW9uX3R5cGU6IGV4Y2VwdGlvbnNbMF0/LnR5cGUsXG4gICAgICAgICAgICAgICAgICAgICRzZW50cnlfdGFnczogZXZlbnQudGFncyxcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAob3JnYW5pemF0aW9uICYmIHByb2plY3RJZClcbiAgICAgICAgICAgICAgICAgICAgZGF0YVsnJHNlbnRyeV91cmwnXSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAocHJlZml4IHx8ICdodHRwczovL3NlbnRyeS5pby9vcmdhbml6YXRpb25zLycpICtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yZ2FuaXphdGlvbiArXG4gICAgICAgICAgICAgICAgICAgICAgICAnL2lzc3Vlcy8/cHJvamVjdD0nICtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2plY3RJZCArXG4gICAgICAgICAgICAgICAgICAgICAgICAnJnF1ZXJ5PScgK1xuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQuZXZlbnRfaWRcbiAgICAgICAgICAgICAgICBfcG9zdGhvZy5jYXB0dXJlKCckZXhjZXB0aW9uJywgZGF0YSlcbiAgICAgICAgICAgICAgICByZXR1cm4gZXZlbnRcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICB9XG59XG4iLCAiaW1wb3J0IHsgd2luZG93IH0gZnJvbSAnLi91dGlscy9nbG9iYWxzJ1xuaW1wb3J0IHsgUG9zdEhvZyB9IGZyb20gJy4vcG9zdGhvZy1jb3JlJ1xuaW1wb3J0IHsgX2lzQXJyYXkgfSBmcm9tICcuL3V0aWxzL3R5cGUtdXRpbHMnXG5cbmludGVyZmFjZSBQYWdlVmlld0RhdGEge1xuICAgIHBhdGhuYW1lOiBzdHJpbmdcbiAgICAvLyBzY3JvbGwgaXMgaG93IGZhciBkb3duIHRoZSBwYWdlIHRoZSB1c2VyIGhhcyBzY3JvbGxlZCxcbiAgICAvLyBjb250ZW50IGlzIGhvdyBmYXIgZG93biB0aGUgcGFnZSB0aGUgdXNlciBjYW4gdmlldyBjb250ZW50XG4gICAgLy8gKGUuZy4gaWYgdGhlIHBhZ2UgaXMgMTAwMCB0YWxsLCBidXQgdGhlIHVzZXIncyBzY3JlZW4gaXMgb25seSA1MDAgdGFsbCxcbiAgICAvLyBhbmQgdGhleSBkb24ndCBzY3JvbGwgYXQgYWxsLCB0aGVuIHNjcm9sbCBpcyAwIGFuZCBjb250ZW50IGlzIDUwMClcbiAgICBtYXhTY3JvbGxIZWlnaHQ/OiBudW1iZXJcbiAgICBtYXhTY3JvbGxZPzogbnVtYmVyXG4gICAgbGFzdFNjcm9sbFk/OiBudW1iZXJcbiAgICBtYXhDb250ZW50SGVpZ2h0PzogbnVtYmVyXG4gICAgbWF4Q29udGVudFk/OiBudW1iZXJcbiAgICBsYXN0Q29udGVudFk/OiBudW1iZXJcbn1cblxuaW50ZXJmYWNlIFNjcm9sbFByb3BlcnRpZXMge1xuICAgICRwcmV2X3BhZ2V2aWV3X2xhc3Rfc2Nyb2xsPzogbnVtYmVyXG4gICAgJHByZXZfcGFnZXZpZXdfbGFzdF9zY3JvbGxfcGVyY2VudGFnZT86IG51bWJlclxuICAgICRwcmV2X3BhZ2V2aWV3X21heF9zY3JvbGw/OiBudW1iZXJcbiAgICAkcHJldl9wYWdldmlld19tYXhfc2Nyb2xsX3BlcmNlbnRhZ2U/OiBudW1iZXJcbiAgICAkcHJldl9wYWdldmlld19sYXN0X2NvbnRlbnQ/OiBudW1iZXJcbiAgICAkcHJldl9wYWdldmlld19sYXN0X2NvbnRlbnRfcGVyY2VudGFnZT86IG51bWJlclxuICAgICRwcmV2X3BhZ2V2aWV3X21heF9jb250ZW50PzogbnVtYmVyXG4gICAgJHByZXZfcGFnZXZpZXdfbWF4X2NvbnRlbnRfcGVyY2VudGFnZT86IG51bWJlclxufVxuXG5pbnRlcmZhY2UgUGFnZVZpZXdFdmVudFByb3BlcnRpZXMgZXh0ZW5kcyBTY3JvbGxQcm9wZXJ0aWVzIHtcbiAgICAkcHJldl9wYWdldmlld19wYXRobmFtZT86IHN0cmluZ1xufVxuXG5leHBvcnQgY2xhc3MgUGFnZVZpZXdNYW5hZ2VyIHtcbiAgICBfcGFnZVZpZXdEYXRhOiBQYWdlVmlld0RhdGEgfCB1bmRlZmluZWRcbiAgICBfaGFzU2VlblBhZ2VWaWV3ID0gZmFsc2VcbiAgICBfaW5zdGFuY2U6IFBvc3RIb2dcblxuICAgIGNvbnN0cnVjdG9yKGluc3RhbmNlOiBQb3N0SG9nKSB7XG4gICAgICAgIHRoaXMuX2luc3RhbmNlID0gaW5zdGFuY2VcbiAgICB9XG5cbiAgICBfY3JlYXRlUGFnZVZpZXdEYXRhKCk6IFBhZ2VWaWV3RGF0YSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBwYXRobmFtZTogd2luZG93Py5sb2NhdGlvbi5wYXRobmFtZSA/PyAnJyxcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGRvUGFnZVZpZXcoKTogUGFnZVZpZXdFdmVudFByb3BlcnRpZXMge1xuICAgICAgICBsZXQgcHJldlBhZ2VWaWV3RGF0YTogUGFnZVZpZXdEYXRhIHwgdW5kZWZpbmVkXG4gICAgICAgIC8vIGlmIHRoZXJlIHdlcmUgZXZlbnRzIGNyZWF0ZWQgYmVmb3JlIHRoZSBmaXJzdCBQYWdlVmlldywgd2Ugd291bGQgaGF2ZSBjcmVhdGVkIGFcbiAgICAgICAgLy8gcGFnZVZpZXdEYXRhIGZvciB0aGVtLiBJZiB0aGlzIGhhcHBlbmVkLCB3ZSBkb24ndCB3YW50IHRvIGNyZWF0ZSBhIG5ldyBwYWdlVmlld0RhdGFcbiAgICAgICAgaWYgKCF0aGlzLl9oYXNTZWVuUGFnZVZpZXcpIHtcbiAgICAgICAgICAgIHRoaXMuX2hhc1NlZW5QYWdlVmlldyA9IHRydWVcbiAgICAgICAgICAgIHByZXZQYWdlVmlld0RhdGEgPSB1bmRlZmluZWRcbiAgICAgICAgICAgIGlmICghdGhpcy5fcGFnZVZpZXdEYXRhKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fcGFnZVZpZXdEYXRhID0gdGhpcy5fY3JlYXRlUGFnZVZpZXdEYXRhKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHByZXZQYWdlVmlld0RhdGEgPSB0aGlzLl9wYWdlVmlld0RhdGFcbiAgICAgICAgICAgIHRoaXMuX3BhZ2VWaWV3RGF0YSA9IHRoaXMuX2NyZWF0ZVBhZ2VWaWV3RGF0YSgpXG4gICAgICAgIH1cblxuICAgICAgICAvLyB1cGRhdGUgdGhlIHNjcm9sbCBwcm9wZXJ0aWVzIGZvciB0aGUgbmV3IHBhZ2UsIGJ1dCB3YWl0IHVudGlsIHRoZSBuZXh0IHRpY2tcbiAgICAgICAgLy8gb2YgdGhlIGV2ZW50IGxvb3BcbiAgICAgICAgc2V0VGltZW91dCh0aGlzLl91cGRhdGVTY3JvbGxEYXRhLCAwKVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAkcHJldl9wYWdldmlld19wYXRobmFtZTogcHJldlBhZ2VWaWV3RGF0YT8ucGF0aG5hbWUsXG4gICAgICAgICAgICAuLi50aGlzLl9jYWxjdWxhdGVQcmV2UGFnZVNjcm9sbFByb3BlcnRpZXMocHJldlBhZ2VWaWV3RGF0YSksXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBkb1BhZ2VMZWF2ZSgpOiBQYWdlVmlld0V2ZW50UHJvcGVydGllcyB7XG4gICAgICAgIGNvbnN0IHByZXZQYWdlVmlld0RhdGEgPSB0aGlzLl9wYWdlVmlld0RhdGFcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICRwcmV2X3BhZ2V2aWV3X3BhdGhuYW1lOiBwcmV2UGFnZVZpZXdEYXRhPy5wYXRobmFtZSxcbiAgICAgICAgICAgIC4uLnRoaXMuX2NhbGN1bGF0ZVByZXZQYWdlU2Nyb2xsUHJvcGVydGllcyhwcmV2UGFnZVZpZXdEYXRhKSxcbiAgICAgICAgfVxuICAgIH1cblxuICAgIF9jYWxjdWxhdGVQcmV2UGFnZVNjcm9sbFByb3BlcnRpZXMocHJldlBhZ2VWaWV3RGF0YTogUGFnZVZpZXdEYXRhIHwgdW5kZWZpbmVkKTogU2Nyb2xsUHJvcGVydGllcyB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgICFwcmV2UGFnZVZpZXdEYXRhIHx8XG4gICAgICAgICAgICBwcmV2UGFnZVZpZXdEYXRhLm1heFNjcm9sbEhlaWdodCA9PSBudWxsIHx8XG4gICAgICAgICAgICBwcmV2UGFnZVZpZXdEYXRhLmxhc3RTY3JvbGxZID09IG51bGwgfHxcbiAgICAgICAgICAgIHByZXZQYWdlVmlld0RhdGEubWF4U2Nyb2xsWSA9PSBudWxsIHx8XG4gICAgICAgICAgICBwcmV2UGFnZVZpZXdEYXRhLm1heENvbnRlbnRIZWlnaHQgPT0gbnVsbCB8fFxuICAgICAgICAgICAgcHJldlBhZ2VWaWV3RGF0YS5sYXN0Q29udGVudFkgPT0gbnVsbCB8fFxuICAgICAgICAgICAgcHJldlBhZ2VWaWV3RGF0YS5tYXhDb250ZW50WSA9PSBudWxsXG4gICAgICAgICkge1xuICAgICAgICAgICAgcmV0dXJuIHt9XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgeyBtYXhTY3JvbGxIZWlnaHQsIGxhc3RTY3JvbGxZLCBtYXhTY3JvbGxZLCBtYXhDb250ZW50SGVpZ2h0LCBsYXN0Q29udGVudFksIG1heENvbnRlbnRZIH0gPSBwcmV2UGFnZVZpZXdEYXRhXG5cbiAgICAgICAgLy8gVXNlIGNlaWwsIHNvIHRoYXQgZS5nLiBzY3JvbGxpbmcgOTk5LjVweCBvZiBhIDEwMDBweCBwYWdlIGlzIGNvbnNpZGVyZWQgMTAwJSBzY3JvbGxlZFxuICAgICAgICBtYXhTY3JvbGxIZWlnaHQgPSBNYXRoLmNlaWwobWF4U2Nyb2xsSGVpZ2h0KVxuICAgICAgICBsYXN0U2Nyb2xsWSA9IE1hdGguY2VpbChsYXN0U2Nyb2xsWSlcbiAgICAgICAgbWF4U2Nyb2xsWSA9IE1hdGguY2VpbChtYXhTY3JvbGxZKVxuICAgICAgICBtYXhDb250ZW50SGVpZ2h0ID0gTWF0aC5jZWlsKG1heENvbnRlbnRIZWlnaHQpXG4gICAgICAgIGxhc3RDb250ZW50WSA9IE1hdGguY2VpbChsYXN0Q29udGVudFkpXG4gICAgICAgIG1heENvbnRlbnRZID0gTWF0aC5jZWlsKG1heENvbnRlbnRZKVxuXG4gICAgICAgIC8vIGlmIHRoZSBtYXhpbXVtIHNjcm9sbCBoZWlnaHQgaXMgbmVhciAwLCB0aGVuIHRoZSBwZXJjZW50YWdlIGlzIDFcbiAgICAgICAgY29uc3QgbGFzdFNjcm9sbFBlcmNlbnRhZ2UgPSBtYXhTY3JvbGxIZWlnaHQgPD0gMSA/IDEgOiBjbGFtcChsYXN0U2Nyb2xsWSAvIG1heFNjcm9sbEhlaWdodCwgMCwgMSlcbiAgICAgICAgY29uc3QgbWF4U2Nyb2xsUGVyY2VudGFnZSA9IG1heFNjcm9sbEhlaWdodCA8PSAxID8gMSA6IGNsYW1wKG1heFNjcm9sbFkgLyBtYXhTY3JvbGxIZWlnaHQsIDAsIDEpXG4gICAgICAgIGNvbnN0IGxhc3RDb250ZW50UGVyY2VudGFnZSA9IG1heENvbnRlbnRIZWlnaHQgPD0gMSA/IDEgOiBjbGFtcChsYXN0Q29udGVudFkgLyBtYXhDb250ZW50SGVpZ2h0LCAwLCAxKVxuICAgICAgICBjb25zdCBtYXhDb250ZW50UGVyY2VudGFnZSA9IG1heENvbnRlbnRIZWlnaHQgPD0gMSA/IDEgOiBjbGFtcChtYXhDb250ZW50WSAvIG1heENvbnRlbnRIZWlnaHQsIDAsIDEpXG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICRwcmV2X3BhZ2V2aWV3X2xhc3Rfc2Nyb2xsOiBsYXN0U2Nyb2xsWSxcbiAgICAgICAgICAgICRwcmV2X3BhZ2V2aWV3X2xhc3Rfc2Nyb2xsX3BlcmNlbnRhZ2U6IGxhc3RTY3JvbGxQZXJjZW50YWdlLFxuICAgICAgICAgICAgJHByZXZfcGFnZXZpZXdfbWF4X3Njcm9sbDogbWF4U2Nyb2xsWSxcbiAgICAgICAgICAgICRwcmV2X3BhZ2V2aWV3X21heF9zY3JvbGxfcGVyY2VudGFnZTogbWF4U2Nyb2xsUGVyY2VudGFnZSxcbiAgICAgICAgICAgICRwcmV2X3BhZ2V2aWV3X2xhc3RfY29udGVudDogbGFzdENvbnRlbnRZLFxuICAgICAgICAgICAgJHByZXZfcGFnZXZpZXdfbGFzdF9jb250ZW50X3BlcmNlbnRhZ2U6IGxhc3RDb250ZW50UGVyY2VudGFnZSxcbiAgICAgICAgICAgICRwcmV2X3BhZ2V2aWV3X21heF9jb250ZW50OiBtYXhDb250ZW50WSxcbiAgICAgICAgICAgICRwcmV2X3BhZ2V2aWV3X21heF9jb250ZW50X3BlcmNlbnRhZ2U6IG1heENvbnRlbnRQZXJjZW50YWdlLFxuICAgICAgICB9XG4gICAgfVxuXG4gICAgX3VwZGF0ZVNjcm9sbERhdGEgPSAoKSA9PiB7XG4gICAgICAgIGlmICghdGhpcy5fcGFnZVZpZXdEYXRhKSB7XG4gICAgICAgICAgICB0aGlzLl9wYWdlVmlld0RhdGEgPSB0aGlzLl9jcmVhdGVQYWdlVmlld0RhdGEoKVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhZ2VWaWV3RGF0YSA9IHRoaXMuX3BhZ2VWaWV3RGF0YVxuXG4gICAgICAgIGNvbnN0IHNjcm9sbFkgPSB0aGlzLl9zY3JvbGxZKClcbiAgICAgICAgY29uc3Qgc2Nyb2xsSGVpZ2h0ID0gdGhpcy5fc2Nyb2xsSGVpZ2h0KClcbiAgICAgICAgY29uc3QgY29udGVudFkgPSB0aGlzLl9jb250ZW50WSgpXG4gICAgICAgIGNvbnN0IGNvbnRlbnRIZWlnaHQgPSB0aGlzLl9jb250ZW50SGVpZ2h0KClcblxuICAgICAgICBwYWdlVmlld0RhdGEubGFzdFNjcm9sbFkgPSBzY3JvbGxZXG4gICAgICAgIHBhZ2VWaWV3RGF0YS5tYXhTY3JvbGxZID0gTWF0aC5tYXgoc2Nyb2xsWSwgcGFnZVZpZXdEYXRhLm1heFNjcm9sbFkgPz8gMClcbiAgICAgICAgcGFnZVZpZXdEYXRhLm1heFNjcm9sbEhlaWdodCA9IE1hdGgubWF4KHNjcm9sbEhlaWdodCwgcGFnZVZpZXdEYXRhLm1heFNjcm9sbEhlaWdodCA/PyAwKVxuXG4gICAgICAgIHBhZ2VWaWV3RGF0YS5sYXN0Q29udGVudFkgPSBjb250ZW50WVxuICAgICAgICBwYWdlVmlld0RhdGEubWF4Q29udGVudFkgPSBNYXRoLm1heChjb250ZW50WSwgcGFnZVZpZXdEYXRhLm1heENvbnRlbnRZID8/IDApXG4gICAgICAgIHBhZ2VWaWV3RGF0YS5tYXhDb250ZW50SGVpZ2h0ID0gTWF0aC5tYXgoY29udGVudEhlaWdodCwgcGFnZVZpZXdEYXRhLm1heENvbnRlbnRIZWlnaHQgPz8gMClcbiAgICB9XG5cbiAgICBzdGFydE1lYXN1cmluZ1Njcm9sbFBvc2l0aW9uKCkge1xuICAgICAgICAvLyBzZXR0aW5nIHRoZSB0aGlyZCBhcmd1bWVudCB0byBgdHJ1ZWAgbWVhbnMgdGhhdCB3ZSB3aWxsIHJlY2VpdmUgc2Nyb2xsIGV2ZW50cyBmb3Igb3RoZXIgc2Nyb2xsYWJsZSBlbGVtZW50c1xuICAgICAgICAvLyBvbiB0aGUgcGFnZSwgbm90IGp1c3QgdGhlIHdpbmRvd1xuICAgICAgICAvLyBzZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0V2ZW50VGFyZ2V0L2FkZEV2ZW50TGlzdGVuZXIjdXNlY2FwdHVyZVxuICAgICAgICB3aW5kb3c/LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRoaXMuX3VwZGF0ZVNjcm9sbERhdGEsIHRydWUpXG4gICAgICAgIHdpbmRvdz8uYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsZW5kJywgdGhpcy5fdXBkYXRlU2Nyb2xsRGF0YSwgdHJ1ZSlcbiAgICAgICAgd2luZG93Py5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLl91cGRhdGVTY3JvbGxEYXRhKVxuICAgIH1cblxuICAgIHN0b3BNZWFzdXJpbmdTY3JvbGxQb3NpdGlvbigpIHtcbiAgICAgICAgd2luZG93Py5yZW1vdmVFdmVudExpc3RlbmVyKCdzY3JvbGwnLCB0aGlzLl91cGRhdGVTY3JvbGxEYXRhKVxuICAgICAgICB3aW5kb3c/LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Njcm9sbGVuZCcsIHRoaXMuX3VwZGF0ZVNjcm9sbERhdGEpXG4gICAgICAgIHdpbmRvdz8ucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5fdXBkYXRlU2Nyb2xsRGF0YSlcbiAgICB9XG5cbiAgICBfc2Nyb2xsRWxlbWVudCgpOiBFbGVtZW50IHwgbnVsbCB8IHVuZGVmaW5lZCB7XG4gICAgICAgIGlmICh0aGlzLl9pbnN0YW5jZS5jb25maWcuc2Nyb2xsX3Jvb3Rfc2VsZWN0b3IpIHtcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdG9ycyA9IF9pc0FycmF5KHRoaXMuX2luc3RhbmNlLmNvbmZpZy5zY3JvbGxfcm9vdF9zZWxlY3RvcilcbiAgICAgICAgICAgICAgICA/IHRoaXMuX2luc3RhbmNlLmNvbmZpZy5zY3JvbGxfcm9vdF9zZWxlY3RvclxuICAgICAgICAgICAgICAgIDogW3RoaXMuX2luc3RhbmNlLmNvbmZpZy5zY3JvbGxfcm9vdF9zZWxlY3Rvcl1cbiAgICAgICAgICAgIGZvciAoY29uc3Qgc2VsZWN0b3Igb2Ygc2VsZWN0b3JzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IHdpbmRvdz8uZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcilcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZWxlbWVudFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWRcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB3aW5kb3c/LmRvY3VtZW50LmRvY3VtZW50RWxlbWVudFxuICAgICAgICB9XG4gICAgfVxuXG4gICAgX3Njcm9sbEhlaWdodCgpOiBudW1iZXIge1xuICAgICAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5fc2Nyb2xsRWxlbWVudCgpXG4gICAgICAgIHJldHVybiBlbGVtZW50ID8gTWF0aC5tYXgoMCwgZWxlbWVudC5zY3JvbGxIZWlnaHQgLSBlbGVtZW50LmNsaWVudEhlaWdodCkgOiAwXG4gICAgfVxuXG4gICAgX3Njcm9sbFkoKTogbnVtYmVyIHtcbiAgICAgICAgaWYgKHRoaXMuX2luc3RhbmNlLmNvbmZpZy5zY3JvbGxfcm9vdF9zZWxlY3Rvcikge1xuICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IHRoaXMuX3Njcm9sbEVsZW1lbnQoKVxuICAgICAgICAgICAgcmV0dXJuIChlbGVtZW50ICYmIGVsZW1lbnQuc2Nyb2xsVG9wKSB8fCAwXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gd2luZG93ID8gd2luZG93LnNjcm9sbFkgfHwgd2luZG93LnBhZ2VZT2Zmc2V0IHx8IHdpbmRvdy5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wIHx8IDAgOiAwXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBfY29udGVudEhlaWdodCgpOiBudW1iZXIge1xuICAgICAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5fc2Nyb2xsRWxlbWVudCgpXG4gICAgICAgIHJldHVybiBlbGVtZW50Py5zY3JvbGxIZWlnaHQgfHwgMFxuICAgIH1cblxuICAgIF9jb250ZW50WSgpOiBudW1iZXIge1xuICAgICAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5fc2Nyb2xsRWxlbWVudCgpXG4gICAgICAgIGNvbnN0IGNsaWVudEhlaWdodCA9IGVsZW1lbnQ/LmNsaWVudEhlaWdodCB8fCAwXG4gICAgICAgIHJldHVybiB0aGlzLl9zY3JvbGxZKCkgKyBjbGllbnRIZWlnaHRcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGNsYW1wKHg6IG51bWJlciwgbWluOiBudW1iZXIsIG1heDogbnVtYmVyKSB7XG4gICAgcmV0dXJuIE1hdGgubWF4KG1pbiwgTWF0aC5taW4oeCwgbWF4KSlcbn1cbiIsICJpbXBvcnQgeyBQb3N0SG9nIH0gZnJvbSAnLi9wb3N0aG9nLWNvcmUnXG5pbXBvcnQgeyBTVVJWRVlTIH0gZnJvbSAnLi9jb25zdGFudHMnXG5pbXBvcnQgeyBTdXJ2ZXlDYWxsYmFjaywgU3VydmV5VXJsTWF0Y2hUeXBlIH0gZnJvbSAnLi9wb3N0aG9nLXN1cnZleXMtdHlwZXMnXG5pbXBvcnQgeyBfaXNVcmxNYXRjaGluZ1JlZ2V4IH0gZnJvbSAnLi91dGlscy9yZXF1ZXN0LXV0aWxzJ1xuaW1wb3J0IHsgd2luZG93LCBkb2N1bWVudCB9IGZyb20gJy4vdXRpbHMvZ2xvYmFscydcblxuZXhwb3J0IGNvbnN0IHN1cnZleVVybFZhbGlkYXRpb25NYXA6IFJlY29yZDxTdXJ2ZXlVcmxNYXRjaFR5cGUsIChjb25kaXRpb25zVXJsOiBzdHJpbmcpID0+IGJvb2xlYW4+ID0ge1xuICAgIGljb250YWluczogKGNvbmRpdGlvbnNVcmwpID0+XG4gICAgICAgICEhd2luZG93ICYmIHdpbmRvdy5sb2NhdGlvbi5ocmVmLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihjb25kaXRpb25zVXJsLnRvTG93ZXJDYXNlKCkpID4gLTEsXG4gICAgcmVnZXg6IChjb25kaXRpb25zVXJsKSA9PiAhIXdpbmRvdyAmJiBfaXNVcmxNYXRjaGluZ1JlZ2V4KHdpbmRvdy5sb2NhdGlvbi5ocmVmLCBjb25kaXRpb25zVXJsKSxcbiAgICBleGFjdDogKGNvbmRpdGlvbnNVcmwpID0+IHdpbmRvdz8ubG9jYXRpb24uaHJlZiA9PT0gY29uZGl0aW9uc1VybCxcbn1cblxuZXhwb3J0IGNsYXNzIFBvc3RIb2dTdXJ2ZXlzIHtcbiAgICBpbnN0YW5jZTogUG9zdEhvZ1xuXG4gICAgY29uc3RydWN0b3IoaW5zdGFuY2U6IFBvc3RIb2cpIHtcbiAgICAgICAgdGhpcy5pbnN0YW5jZSA9IGluc3RhbmNlXG4gICAgfVxuXG4gICAgZ2V0U3VydmV5cyhjYWxsYmFjazogU3VydmV5Q2FsbGJhY2ssIGZvcmNlUmVsb2FkID0gZmFsc2UpIHtcbiAgICAgICAgY29uc3QgZXhpc3RpbmdTdXJ2ZXlzID0gdGhpcy5pbnN0YW5jZS5nZXRfcHJvcGVydHkoU1VSVkVZUylcbiAgICAgICAgaWYgKCFleGlzdGluZ1N1cnZleXMgfHwgZm9yY2VSZWxvYWQpIHtcbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2UuX3NlbmRfcmVxdWVzdChcbiAgICAgICAgICAgICAgICB0aGlzLmluc3RhbmNlLnJlcXVlc3RSb3V0ZXIuZW5kcG9pbnRGb3IoJ2FwaScsIGAvYXBpL3N1cnZleXMvP3Rva2VuPSR7dGhpcy5pbnN0YW5jZS5jb25maWcudG9rZW59YCksXG4gICAgICAgICAgICAgICAge30sXG4gICAgICAgICAgICAgICAgeyBtZXRob2Q6ICdHRVQnIH0sXG4gICAgICAgICAgICAgICAgKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHN1cnZleXMgPSByZXNwb25zZS5zdXJ2ZXlzIHx8IFtdXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5zdGFuY2UucGVyc2lzdGVuY2U/LnJlZ2lzdGVyKHsgW1NVUlZFWVNdOiBzdXJ2ZXlzIH0pXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhzdXJ2ZXlzKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhleGlzdGluZ1N1cnZleXMpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXRBY3RpdmVNYXRjaGluZ1N1cnZleXMoY2FsbGJhY2s6IFN1cnZleUNhbGxiYWNrLCBmb3JjZVJlbG9hZCA9IGZhbHNlKSB7XG4gICAgICAgIHRoaXMuZ2V0U3VydmV5cygoc3VydmV5cykgPT4ge1xuICAgICAgICAgICAgY29uc3QgYWN0aXZlU3VydmV5cyA9IHN1cnZleXMuZmlsdGVyKChzdXJ2ZXkpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gISEoc3VydmV5LnN0YXJ0X2RhdGUgJiYgIXN1cnZleS5lbmRfZGF0ZSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBjb25zdCBjb25kaXRpb25NYXRjaGVkU3VydmV5cyA9IGFjdGl2ZVN1cnZleXMuZmlsdGVyKChzdXJ2ZXkpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIXN1cnZleS5jb25kaXRpb25zKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gdXNlIHVybE1hdGNoVHlwZSB0byB2YWxpZGF0ZSB1cmwgY29uZGl0aW9uLCBmYWxsYmFjayB0byBjb250YWlucyBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHlcbiAgICAgICAgICAgICAgICBjb25zdCB1cmxDaGVjayA9IHN1cnZleS5jb25kaXRpb25zPy51cmxcbiAgICAgICAgICAgICAgICAgICAgPyBzdXJ2ZXlVcmxWYWxpZGF0aW9uTWFwW3N1cnZleS5jb25kaXRpb25zPy51cmxNYXRjaFR5cGUgPz8gJ2ljb250YWlucyddKHN1cnZleS5jb25kaXRpb25zLnVybClcbiAgICAgICAgICAgICAgICAgICAgOiB0cnVlXG4gICAgICAgICAgICAgICAgY29uc3Qgc2VsZWN0b3JDaGVjayA9IHN1cnZleS5jb25kaXRpb25zPy5zZWxlY3RvclxuICAgICAgICAgICAgICAgICAgICA/IGRvY3VtZW50Py5xdWVyeVNlbGVjdG9yKHN1cnZleS5jb25kaXRpb25zLnNlbGVjdG9yKVxuICAgICAgICAgICAgICAgICAgICA6IHRydWVcbiAgICAgICAgICAgICAgICByZXR1cm4gdXJsQ2hlY2sgJiYgc2VsZWN0b3JDaGVja1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldGluZ01hdGNoZWRTdXJ2ZXlzID0gY29uZGl0aW9uTWF0Y2hlZFN1cnZleXMuZmlsdGVyKChzdXJ2ZXkpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIXN1cnZleS5saW5rZWRfZmxhZ19rZXkgJiYgIXN1cnZleS50YXJnZXRpbmdfZmxhZ19rZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgbGlua2VkRmxhZ0NoZWNrID0gc3VydmV5LmxpbmtlZF9mbGFnX2tleVxuICAgICAgICAgICAgICAgICAgICA/IHRoaXMuaW5zdGFuY2UuZmVhdHVyZUZsYWdzLmlzRmVhdHVyZUVuYWJsZWQoc3VydmV5LmxpbmtlZF9mbGFnX2tleSlcbiAgICAgICAgICAgICAgICAgICAgOiB0cnVlXG4gICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0aW5nRmxhZ0NoZWNrID0gc3VydmV5LnRhcmdldGluZ19mbGFnX2tleVxuICAgICAgICAgICAgICAgICAgICA/IHRoaXMuaW5zdGFuY2UuZmVhdHVyZUZsYWdzLmlzRmVhdHVyZUVuYWJsZWQoc3VydmV5LnRhcmdldGluZ19mbGFnX2tleSlcbiAgICAgICAgICAgICAgICAgICAgOiB0cnVlXG4gICAgICAgICAgICAgICAgcmV0dXJuIGxpbmtlZEZsYWdDaGVjayAmJiB0YXJnZXRpbmdGbGFnQ2hlY2tcbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayh0YXJnZXRpbmdNYXRjaGVkU3VydmV5cylcbiAgICAgICAgfSwgZm9yY2VSZWxvYWQpXG4gICAgfVxufVxuIiwgImltcG9ydCBDb25maWcgZnJvbSAnLi9jb25maWcnXG5pbXBvcnQge1xuICAgIF9jb3B5QW5kVHJ1bmNhdGVTdHJpbmdzLFxuICAgIF9lYWNoLFxuICAgIF9lYWNoQXJyYXksXG4gICAgX2V4dGVuZCxcbiAgICBfcmVnaXN0ZXJfZXZlbnQsXG4gICAgX3NhZmV3cmFwX2NsYXNzLFxuICAgIGlzQ3Jvc3NEb21haW5Db29raWUsXG4gICAgaXNEaXN0aW5jdElkU3RyaW5nTGlrZSxcbn0gZnJvbSAnLi91dGlscydcbmltcG9ydCB7IGFzc2lnbmFibGVXaW5kb3csIHdpbmRvdyB9IGZyb20gJy4vdXRpbHMvZ2xvYmFscydcbmltcG9ydCB7IGF1dG9jYXB0dXJlIH0gZnJvbSAnLi9hdXRvY2FwdHVyZSdcbmltcG9ydCB7IFBvc3RIb2dGZWF0dXJlRmxhZ3MgfSBmcm9tICcuL3Bvc3Rob2ctZmVhdHVyZWZsYWdzJ1xuaW1wb3J0IHsgUG9zdEhvZ1BlcnNpc3RlbmNlIH0gZnJvbSAnLi9wb3N0aG9nLXBlcnNpc3RlbmNlJ1xuaW1wb3J0IHsgQUxJQVNfSURfS0VZLCBGTEFHX0NBTExfUkVQT1JURUQsIFBFT1BMRV9ESVNUSU5DVF9JRF9LRVkgfSBmcm9tICcuL2NvbnN0YW50cydcbmltcG9ydCB7IFNlc3Npb25SZWNvcmRpbmcgfSBmcm9tICcuL2V4dGVuc2lvbnMvcmVwbGF5L3Nlc3Npb25yZWNvcmRpbmcnXG5pbXBvcnQgeyBEZWNpZGUgfSBmcm9tICcuL2RlY2lkZSdcbmltcG9ydCB7IFRvb2xiYXIgfSBmcm9tICcuL2V4dGVuc2lvbnMvdG9vbGJhcidcbmltcG9ydCB7IGNsZWFyT3B0SW5PdXQsIGhhc09wdGVkSW4sIGhhc09wdGVkT3V0LCBvcHRJbiwgb3B0T3V0LCB1c2VyT3B0ZWRPdXQgfSBmcm9tICcuL2dkcHItdXRpbHMnXG5pbXBvcnQgeyBjb29raWVTdG9yZSwgbG9jYWxTdG9yZSB9IGZyb20gJy4vc3RvcmFnZSdcbmltcG9ydCB7IFJlcXVlc3RRdWV1ZSB9IGZyb20gJy4vcmVxdWVzdC1xdWV1ZSdcbmltcG9ydCB7IGNvbXByZXNzRGF0YSwgZGVjaWRlQ29tcHJlc3Npb24gfSBmcm9tICcuL2NvbXByZXNzaW9uJ1xuaW1wb3J0IHsgYWRkUGFyYW1zVG9VUkwsIGVuY29kZVBvc3REYXRhLCByZXF1ZXN0IH0gZnJvbSAnLi9zZW5kLXJlcXVlc3QnXG5pbXBvcnQgeyBSZXRyeVF1ZXVlIH0gZnJvbSAnLi9yZXRyeS1xdWV1ZSdcbmltcG9ydCB7IFNlc3Npb25JZE1hbmFnZXIgfSBmcm9tICcuL3Nlc3Npb25pZCdcbmltcG9ydCB7IFJlcXVlc3RSb3V0ZXIgfSBmcm9tICcuL3V0aWxzL3JlcXVlc3Qtcm91dGVyJ1xuaW1wb3J0IHtcbiAgICBBdXRvY2FwdHVyZUNvbmZpZyxcbiAgICBDYXB0dXJlT3B0aW9ucyxcbiAgICBDYXB0dXJlUmVzdWx0LFxuICAgIENvbXByZXNzaW9uLFxuICAgIERlY2lkZVJlc3BvbnNlLFxuICAgIEVhcmx5QWNjZXNzRmVhdHVyZUNhbGxiYWNrLFxuICAgIEdEUFJPcHRpb25zLFxuICAgIGlzRmVhdHVyZUVuYWJsZWRPcHRpb25zLFxuICAgIEpzb25UeXBlLFxuICAgIE9wdEluT3V0Q2FwdHVyaW5nT3B0aW9ucyxcbiAgICBQb3N0SG9nQ29uZmlnLFxuICAgIFByb3BlcnRpZXMsXG4gICAgUHJvcGVydHksXG4gICAgUmVxdWVzdENhbGxiYWNrLFxuICAgIFNlc3Npb25JZENoYW5nZWRDYWxsYmFjayxcbiAgICBTbmlwcGV0QXJyYXlJdGVtLFxuICAgIFRvb2xiYXJQYXJhbXMsXG4gICAgWEhST3B0aW9ucyxcbn0gZnJvbSAnLi90eXBlcydcbmltcG9ydCB7IFNlbnRyeUludGVncmF0aW9uIH0gZnJvbSAnLi9leHRlbnNpb25zL3NlbnRyeS1pbnRlZ3JhdGlvbidcbmltcG9ydCB7IGNyZWF0ZVNlZ21lbnRJbnRlZ3JhdGlvbiB9IGZyb20gJy4vZXh0ZW5zaW9ucy9zZWdtZW50LWludGVncmF0aW9uJ1xuaW1wb3J0IHsgUGFnZVZpZXdNYW5hZ2VyIH0gZnJvbSAnLi9wYWdlLXZpZXcnXG5pbXBvcnQgeyBQb3N0SG9nU3VydmV5cyB9IGZyb20gJy4vcG9zdGhvZy1zdXJ2ZXlzJ1xuaW1wb3J0IHsgUmF0ZUxpbWl0ZXIgfSBmcm9tICcuL3JhdGUtbGltaXRlcidcbmltcG9ydCB7IHV1aWR2NyB9IGZyb20gJy4vdXVpZHY3J1xuaW1wb3J0IHsgU3VydmV5Q2FsbGJhY2sgfSBmcm9tICcuL3Bvc3Rob2ctc3VydmV5cy10eXBlcydcbmltcG9ydCB7XG4gICAgX2lzQXJyYXksXG4gICAgX2lzRW1wdHlPYmplY3QsXG4gICAgX2lzRW1wdHlTdHJpbmcsXG4gICAgX2lzRnVuY3Rpb24sXG4gICAgX2lzTnVtYmVyLFxuICAgIF9pc09iamVjdCxcbiAgICBfaXNTdHJpbmcsXG4gICAgX2lzVW5kZWZpbmVkLFxufSBmcm9tICcuL3V0aWxzL3R5cGUtdXRpbHMnXG5pbXBvcnQgeyBfaW5mbyB9IGZyb20gJy4vdXRpbHMvZXZlbnQtdXRpbHMnXG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tICcuL3V0aWxzL2xvZ2dlcidcbmltcG9ydCB7IGRvY3VtZW50LCB1c2VyQWdlbnQgfSBmcm9tICcuL3V0aWxzL2dsb2JhbHMnXG5pbXBvcnQgeyBTZXNzaW9uUHJvcHNNYW5hZ2VyIH0gZnJvbSAnLi9zZXNzaW9uLXByb3BzJ1xuaW1wb3J0IHsgX2lzQmxvY2tlZFVBIH0gZnJvbSAnLi91dGlscy9ibG9ja2VkLXVhcydcbmltcG9ydCB7IFNVUFBPUlRTX1JFUVVFU1QgfSBmcm9tICcuL3V0aWxzL3JlcXVlc3QtdXRpbHMnXG5cbi8qXG5TSU1QTEUgU1RZTEUgR1VJREU6XG5cbnRoaXMueCA9PT0gcHVibGljIGZ1bmN0aW9uXG50aGlzLl94ID09PSBpbnRlcm5hbCAtIG9ubHkgdXNlIHdpdGhpbiB0aGlzIGZpbGVcbnRoaXMuX194ID09PSBwcml2YXRlIC0gb25seSB1c2Ugd2l0aGluIHRoZSBjbGFzc1xuXG5HbG9iYWxzIHNob3VsZCBiZSBhbGwgY2Fwc1xuKi9cblxuZW51bSBJbml0VHlwZSB7XG4gICAgSU5JVF9NT0RVTEUgPSAwLFxuICAgIElOSVRfU05JUFBFVCA9IDEsXG59XG5cbmxldCBpbml0X3R5cGU6IEluaXRUeXBlXG5cbi8vIFRPRE86IHRoZSB0eXBlIG9mIHRoaXMgaXMgdmVyeSBsb29zZS4gU29tZXRpbWVzIGl0J3MgYWxzbyBQb3N0SG9nTGliIGl0c2VsZlxubGV0IHBvc3Rob2dfbWFpbjogUmVjb3JkPHN0cmluZywgUG9zdEhvZz4gJiB7XG4gICAgaW5pdDogKHRva2VuOiBzdHJpbmcsIGNvbmZpZzogUGFydGlhbDxQb3N0SG9nQ29uZmlnPiwgbmFtZTogc3RyaW5nKSA9PiB2b2lkXG59XG5cbi8vIHNvbWUgZ2xvYmFscyBmb3IgY29tcGFyaXNvbnNcbmNvbnN0IF9fTk9PUCA9ICgpID0+IHt9XG5jb25zdCBfX05PT1BUSU9OUyA9IHt9XG5cbmNvbnN0IFBSSU1BUllfSU5TVEFOQ0VfTkFNRSA9ICdwb3N0aG9nJ1xuXG4vKlxuICogRHluYW1pYy4uLiBjb25zdGFudHM/IElzIHRoYXQgYW4gb3h5bW9yb24/XG4gKi9cbi8vIGh0dHA6Ly9oYWNrcy5tb3ppbGxhLm9yZy8yMDA5LzA3L2Nyb3NzLXNpdGUteG1saHR0cHJlcXVlc3Qtd2l0aC1jb3JzL1xuLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9ET00vWE1MSHR0cFJlcXVlc3Qjd2l0aENyZWRlbnRpYWxzXG5cbi8vIElFPDEwIGRvZXMgbm90IHN1cHBvcnQgY3Jvc3Mtb3JpZ2luIFhIUidzIGJ1dCBzY3JpcHQgdGFnc1xuLy8gd2l0aCBkZWZlciB3b24ndCBibG9jayB3aW5kb3cub25sb2FkOyBFTlFVRVVFX1JFUVVFU1RTXG4vLyBzaG91bGQgb25seSBiZSB0cnVlIGZvciBPcGVyYTwxMlxubGV0IEVOUVVFVUVfUkVRVUVTVFMgPSAhU1VQUE9SVFNfUkVRVUVTVCAmJiB1c2VyQWdlbnQ/LmluZGV4T2YoJ01TSUUnKSA9PT0gLTEgJiYgdXNlckFnZW50Py5pbmRleE9mKCdNb3ppbGxhJykgPT09IC0xXG5cbmV4cG9ydCBjb25zdCBkZWZhdWx0Q29uZmlnID0gKCk6IFBvc3RIb2dDb25maWcgPT4gKHtcbiAgICBhcGlfaG9zdDogJ2h0dHBzOi8vYXBwLnBvc3Rob2cuY29tJyxcbiAgICBhcGlfbWV0aG9kOiAnUE9TVCcsXG4gICAgYXBpX3RyYW5zcG9ydDogJ1hIUicsXG4gICAgdWlfaG9zdDogbnVsbCxcbiAgICB0b2tlbjogJycsXG4gICAgYXV0b2NhcHR1cmU6IHRydWUsXG4gICAgcmFnZWNsaWNrOiB0cnVlLFxuICAgIGNyb3NzX3N1YmRvbWFpbl9jb29raWU6IGlzQ3Jvc3NEb21haW5Db29raWUoZG9jdW1lbnQ/LmxvY2F0aW9uKSxcbiAgICBwZXJzaXN0ZW5jZTogJ2xvY2FsU3RvcmFnZStjb29raWUnLCAvLyB1cCB0byAxLjkyLjAgdGhpcyB3YXMgJ2Nvb2tpZScuIEl0J3MgZWFzeSB0byBtaWdyYXRlIGFzICdsb2NhbFN0b3JhZ2UrY29va2llJyB3aWxsIG1pZ3JhdGUgZGF0YSBmcm9tIGNvb2tpZSBzdG9yYWdlXG4gICAgcGVyc2lzdGVuY2VfbmFtZTogJycsXG4gICAgY29va2llX25hbWU6ICcnLFxuICAgIGxvYWRlZDogX19OT09QLFxuICAgIHN0b3JlX2dvb2dsZTogdHJ1ZSxcbiAgICBjdXN0b21fY2FtcGFpZ25fcGFyYW1zOiBbXSxcbiAgICBjdXN0b21fYmxvY2tlZF91c2VyYWdlbnRzOiBbXSxcbiAgICBzYXZlX3JlZmVycmVyOiB0cnVlLFxuICAgIGNhcHR1cmVfcGFnZXZpZXc6IHRydWUsXG4gICAgY2FwdHVyZV9wYWdlbGVhdmU6IHRydWUsIC8vIFdlJ2xsIG9ubHkgY2FwdHVyZSBwYWdlbGVhdmUgZXZlbnRzIGlmIGNhcHR1cmVfcGFnZXZpZXcgaXMgYWxzbyB0cnVlXG4gICAgZGVidWc6IGZhbHNlLFxuICAgIHZlcmJvc2U6IGZhbHNlLFxuICAgIGNvb2tpZV9leHBpcmF0aW9uOiAzNjUsXG4gICAgdXBncmFkZTogZmFsc2UsXG4gICAgZGlzYWJsZV9zZXNzaW9uX3JlY29yZGluZzogZmFsc2UsXG4gICAgZGlzYWJsZV9wZXJzaXN0ZW5jZTogZmFsc2UsXG4gICAgZGlzYWJsZV9jb29raWU6IGZhbHNlLFxuICAgIGVuYWJsZV9yZWNvcmRpbmdfY29uc29sZV9sb2c6IHVuZGVmaW5lZCwgLy8gV2hlbiB1bmRlZmluZWQsIGl0IGZhbGxzIGJhY2sgdG8gdGhlIHNlcnZlci1zaWRlIHNldHRpbmdcbiAgICBzZWN1cmVfY29va2llOiB3aW5kb3c/LmxvY2F0aW9uPy5wcm90b2NvbCA9PT0gJ2h0dHBzOicsXG4gICAgaXA6IHRydWUsXG4gICAgb3B0X291dF9jYXB0dXJpbmdfYnlfZGVmYXVsdDogZmFsc2UsXG4gICAgb3B0X291dF9wZXJzaXN0ZW5jZV9ieV9kZWZhdWx0OiBmYWxzZSxcbiAgICBvcHRfb3V0X3VzZXJhZ2VudF9maWx0ZXI6IGZhbHNlLFxuICAgIG9wdF9vdXRfY2FwdHVyaW5nX3BlcnNpc3RlbmNlX3R5cGU6ICdsb2NhbFN0b3JhZ2UnLFxuICAgIG9wdF9vdXRfY2FwdHVyaW5nX2Nvb2tpZV9wcmVmaXg6IG51bGwsXG4gICAgb3B0X2luX3NpdGVfYXBwczogZmFsc2UsXG4gICAgLy8gRGVwcmVjYXRlZCwgdXNlIHByb3BlcnR5X2RlbnlsaXN0IGluc3RlYWQuXG4gICAgcHJvcGVydHlfYmxhY2tsaXN0OiBbXSxcbiAgICBwcm9wZXJ0eV9kZW55bGlzdDogW10sXG4gICAgcmVzcGVjdF9kbnQ6IGZhbHNlLFxuICAgIHNhbml0aXplX3Byb3BlcnRpZXM6IG51bGwsXG4gICAgcmVxdWVzdF9oZWFkZXJzOiB7fSwgLy8geyBoZWFkZXI6IHZhbHVlLCBoZWFkZXIyOiB2YWx1ZSB9XG4gICAgaW5hcHBfcHJvdG9jb2w6ICcvLycsXG4gICAgaW5hcHBfbGlua19uZXdfd2luZG93OiBmYWxzZSxcbiAgICByZXF1ZXN0X2JhdGNoaW5nOiB0cnVlLFxuICAgIHByb3BlcnRpZXNfc3RyaW5nX21heF9sZW5ndGg6IDY1NTM1LFxuICAgIHNlc3Npb25fcmVjb3JkaW5nOiB7fSxcbiAgICBtYXNrX2FsbF9lbGVtZW50X2F0dHJpYnV0ZXM6IGZhbHNlLFxuICAgIG1hc2tfYWxsX3RleHQ6IGZhbHNlLFxuICAgIGFkdmFuY2VkX2Rpc2FibGVfZGVjaWRlOiBmYWxzZSxcbiAgICBhZHZhbmNlZF9kaXNhYmxlX2ZlYXR1cmVfZmxhZ3M6IGZhbHNlLFxuICAgIGFkdmFuY2VkX2Rpc2FibGVfZmVhdHVyZV9mbGFnc19vbl9maXJzdF9sb2FkOiBmYWxzZSxcbiAgICBhZHZhbmNlZF9kaXNhYmxlX3Rvb2xiYXJfbWV0cmljczogZmFsc2UsXG4gICAgb25fcmVxdWVzdF9lcnJvcjogKHJlcSkgPT4ge1xuICAgICAgICBjb25zdCBlcnJvciA9ICdCYWQgSFRUUCBzdGF0dXM6ICcgKyByZXEuc3RhdHVzQ29kZSArICcgJyArIHJlcS5yZXNwb25zZVRleHRcbiAgICAgICAgbG9nZ2VyLmVycm9yKGVycm9yKVxuICAgIH0sXG4gICAgZ2V0X2RldmljZV9pZDogKHV1aWQpID0+IHV1aWQsXG4gICAgLy8gVXNlZCBmb3IgaW50ZXJuYWwgdGVzdGluZ1xuICAgIF9vbkNhcHR1cmU6IF9fTk9PUCxcbiAgICBjYXB0dXJlX3BlcmZvcm1hbmNlOiB1bmRlZmluZWQsXG4gICAgbmFtZTogJ3Bvc3Rob2cnLFxuICAgIGJvb3RzdHJhcDoge30sXG4gICAgZGlzYWJsZV9jb21wcmVzc2lvbjogZmFsc2UsXG4gICAgc2Vzc2lvbl9pZGxlX3RpbWVvdXRfc2Vjb25kczogMzAgKiA2MCwgLy8gMzAgbWludXRlc1xufSlcblxuLyoqXG4gKiBjcmVhdGVfcGhsaWIodG9rZW46c3RyaW5nLCBjb25maWc6b2JqZWN0LCBuYW1lOnN0cmluZylcbiAqXG4gKiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgYnkgdGhlIGluaXQgbWV0aG9kIG9mIFBvc3RIb2dMaWIgb2JqZWN0c1xuICogYXMgd2VsbCBhcyB0aGUgbWFpbiBpbml0aWFsaXplciBhdCB0aGUgZW5kIG9mIHRoZSBKU0xpYiAodGhhdFxuICogaW5pdGlhbGl6ZXMgZG9jdW1lbnQucG9zdGhvZyBhcyB3ZWxsIGFzIGFueSBhZGRpdGlvbmFsIGluc3RhbmNlc1xuICogZGVjbGFyZWQgYmVmb3JlIHRoaXMgZmlsZSBoYXMgbG9hZGVkKS5cbiAqL1xuY29uc3QgY3JlYXRlX3BobGliID0gZnVuY3Rpb24gKFxuICAgIHRva2VuOiBzdHJpbmcsXG4gICAgY29uZmlnPzogUGFydGlhbDxQb3N0SG9nQ29uZmlnPixcbiAgICBuYW1lPzogc3RyaW5nLFxuICAgIGNyZWF0ZUNvbXBsZXRlPzogKGluc3RhbmNlOiBQb3N0SG9nKSA9PiB2b2lkXG4pOiBQb3N0SG9nIHtcbiAgICBsZXQgaW5zdGFuY2U6IFBvc3RIb2dcbiAgICBjb25zdCB0YXJnZXQgPVxuICAgICAgICBuYW1lID09PSBQUklNQVJZX0lOU1RBTkNFX05BTUUgfHwgIXBvc3Rob2dfbWFpbiA/IHBvc3Rob2dfbWFpbiA6IG5hbWUgPyBwb3N0aG9nX21haW5bbmFtZV0gOiB1bmRlZmluZWRcbiAgICBjb25zdCBjYWxsYmFja3NIYW5kbGVkID0ge1xuICAgICAgICBpbml0Q29tcGxldGU6IGZhbHNlLFxuICAgICAgICBzeW5jQ29kZTogZmFsc2UsXG4gICAgfVxuICAgIGNvbnN0IGhhbmRsZUNhbGxiYWNrID0gKGNhbGxiYWNrTmFtZToga2V5b2YgdHlwZW9mIGNhbGxiYWNrc0hhbmRsZWQpID0+IChpbnN0YW5jZTogUG9zdEhvZykgPT4ge1xuICAgICAgICBpZiAoIWNhbGxiYWNrc0hhbmRsZWRbY2FsbGJhY2tOYW1lXSkge1xuICAgICAgICAgICAgY2FsbGJhY2tzSGFuZGxlZFtjYWxsYmFja05hbWVdID0gdHJ1ZVxuICAgICAgICAgICAgaWYgKGNhbGxiYWNrc0hhbmRsZWQuaW5pdENvbXBsZXRlICYmIGNhbGxiYWNrc0hhbmRsZWQuc3luY0NvZGUpIHtcbiAgICAgICAgICAgICAgICBjcmVhdGVDb21wbGV0ZT8uKGluc3RhbmNlKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRhcmdldCAmJiBpbml0X3R5cGUgPT09IEluaXRUeXBlLklOSVRfTU9EVUxFKSB7XG4gICAgICAgIGluc3RhbmNlID0gdGFyZ2V0IGFzIGFueVxuICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICh0YXJnZXQgJiYgIV9pc0FycmF5KHRhcmdldCkpIHtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcignWW91IGhhdmUgYWxyZWFkeSBpbml0aWFsaXplZCAnICsgbmFtZSlcbiAgICAgICAgICAgIC8vIFRPRE86IHRocm93IHNvbWV0aGluZyBpbnN0ZWFkP1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9iYW4tdHMtY29tbWVudFxuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgaW5zdGFuY2UgPSBuZXcgUG9zdEhvZygpXG4gICAgfVxuXG4gICAgaW5zdGFuY2UuX2luaXQodG9rZW4sIGNvbmZpZywgbmFtZSwgaGFuZGxlQ2FsbGJhY2soJ2luaXRDb21wbGV0ZScpKVxuICAgIGluc3RhbmNlLnRvb2xiYXIubWF5YmVMb2FkVG9vbGJhcigpXG5cbiAgICBpbnN0YW5jZS5zZXNzaW9uUmVjb3JkaW5nID0gbmV3IFNlc3Npb25SZWNvcmRpbmcoaW5zdGFuY2UpXG4gICAgaW5zdGFuY2Uuc2Vzc2lvblJlY29yZGluZy5zdGFydFJlY29yZGluZ0lmRW5hYmxlZCgpXG5cbiAgICBpZiAoIWluc3RhbmNlLmNvbmZpZy5kaXNhYmxlX3Njcm9sbF9wcm9wZXJ0aWVzKSB7XG4gICAgICAgIGluc3RhbmNlLnBhZ2VWaWV3TWFuYWdlci5zdGFydE1lYXN1cmluZ1Njcm9sbFBvc2l0aW9uKClcbiAgICB9XG5cbiAgICBpbnN0YW5jZS5fX2F1dG9jYXB0dXJlID0gaW5zdGFuY2UuY29uZmlnLmF1dG9jYXB0dXJlXG4gICAgYXV0b2NhcHR1cmUuX3NldElzQXV0b2NhcHR1cmVFbmFibGVkKGluc3RhbmNlKVxuICAgIGlmIChhdXRvY2FwdHVyZS5faXNBdXRvY2FwdHVyZUVuYWJsZWQpIHtcbiAgICAgICAgaW5zdGFuY2UuX19hdXRvY2FwdHVyZSA9IGluc3RhbmNlLmNvbmZpZy5hdXRvY2FwdHVyZVxuICAgICAgICBjb25zdCBudW1fYnVja2V0cyA9IDEwMFxuICAgICAgICBjb25zdCBudW1fZW5hYmxlZF9idWNrZXRzID0gMTAwXG4gICAgICAgIGlmICghYXV0b2NhcHR1cmUuZW5hYmxlZEZvclByb2plY3QoaW5zdGFuY2UuY29uZmlnLnRva2VuLCBudW1fYnVja2V0cywgbnVtX2VuYWJsZWRfYnVja2V0cykpIHtcbiAgICAgICAgICAgIGluc3RhbmNlLl9fYXV0b2NhcHR1cmUgPSBmYWxzZVxuICAgICAgICAgICAgbG9nZ2VyLmluZm8oJ05vdCBpbiBhY3RpdmUgYnVja2V0OiBkaXNhYmxpbmcgQXV0b21hdGljIEV2ZW50IENvbGxlY3Rpb24uJylcbiAgICAgICAgfSBlbHNlIGlmICghYXV0b2NhcHR1cmUuaXNCcm93c2VyU3VwcG9ydGVkKCkpIHtcbiAgICAgICAgICAgIGluc3RhbmNlLl9fYXV0b2NhcHR1cmUgPSBmYWxzZVxuICAgICAgICAgICAgbG9nZ2VyLmluZm8oJ0Rpc2FibGluZyBBdXRvbWF0aWMgRXZlbnQgQ29sbGVjdGlvbiBiZWNhdXNlIHRoaXMgYnJvd3NlciBpcyBub3Qgc3VwcG9ydGVkJylcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGF1dG9jYXB0dXJlLmluaXQoaW5zdGFuY2UpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBpZiBhbnkgaW5zdGFuY2Ugb24gdGhlIHBhZ2UgaGFzIGRlYnVnID0gdHJ1ZSwgd2Ugc2V0IHRoZVxuICAgIC8vIGdsb2JhbCBkZWJ1ZyB0byBiZSB0cnVlXG4gICAgQ29uZmlnLkRFQlVHID0gQ29uZmlnLkRFQlVHIHx8IGluc3RhbmNlLmNvbmZpZy5kZWJ1Z1xuXG4gICAgLy8gaWYgdGFyZ2V0IGlzIG5vdCBkZWZpbmVkLCB3ZSBjYWxsZWQgaW5pdCBhZnRlciB0aGUgbGliIGFscmVhZHlcbiAgICAvLyBsb2FkZWQsIHNvIHRoZXJlIHdvbid0IGJlIGFuIGFycmF5IG9mIHRoaW5ncyB0byBleGVjdXRlXG4gICAgaWYgKCFfaXNVbmRlZmluZWQodGFyZ2V0KSAmJiBfaXNBcnJheSh0YXJnZXQpKSB7XG4gICAgICAgIC8vIENydW5jaCB0aHJvdWdoIHRoZSBwZW9wbGUgcXVldWUgZmlyc3QgLSB3ZSBxdWV1ZSB0aGlzIGRhdGEgdXAgJlxuICAgICAgICAvLyBmbHVzaCBvbiBpZGVudGlmeSwgc28gaXQncyBiZXR0ZXIgdG8gZG8gYWxsIHRoZXNlIG9wZXJhdGlvbnMgZmlyc3RcbiAgICAgICAgaW5zdGFuY2UuX2V4ZWN1dGVfYXJyYXkuY2FsbChpbnN0YW5jZS5wZW9wbGUsICh0YXJnZXQgYXMgYW55KS5wZW9wbGUpXG4gICAgICAgIGluc3RhbmNlLl9leGVjdXRlX2FycmF5KHRhcmdldClcbiAgICB9XG5cbiAgICBoYW5kbGVDYWxsYmFjaygnc3luY0NvZGUnKShpbnN0YW5jZSlcbiAgICByZXR1cm4gaW5zdGFuY2Vcbn1cblxuY2xhc3MgRGVwcmVjYXRlZFdlYlBlcmZvcm1hbmNlT2JzZXJ2ZXIge1xuICAgIGdldCBfZm9yY2VBbGxvd0xvY2FsaG9zdCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX19mb3JjZUFsbG93TG9jYWxob3N0XG4gICAgfVxuICAgIHNldCBfZm9yY2VBbGxvd0xvY2FsaG9zdCh2YWx1ZTogYm9vbGVhbikge1xuICAgICAgICBsb2dnZXIuZXJyb3IoXG4gICAgICAgICAgICAnV2ViUGVyZm9ybWFuY2VPYnNlcnZlciBpcyBkZXByZWNhdGVkIGFuZCBoYXMgbm8gaW1wYWN0IG9uIG5ldHdvcmsgY2FwdHVyZS4gVXNlIGBfZm9yY2VBbGxvd0xvY2FsaG9zdE5ldHdvcmtDYXB0dXJlYCBvbiBgcG9zdGhvZy5zZXNzaW9uUmVjb3JkaW5nYCdcbiAgICAgICAgKVxuICAgICAgICB0aGlzLl9fZm9yY2VBbGxvd0xvY2FsaG9zdCA9IHZhbHVlXG4gICAgfVxuICAgIHByaXZhdGUgX19mb3JjZUFsbG93TG9jYWxob3N0OiBib29sZWFuID0gZmFsc2Vcbn1cblxuLyoqXG4gKiBQb3N0SG9nIExpYnJhcnkgT2JqZWN0XG4gKiBAY29uc3RydWN0b3JcbiAqL1xuZXhwb3J0IGNsYXNzIFBvc3RIb2cge1xuICAgIF9fbG9hZGVkOiBib29sZWFuXG4gICAgX19sb2FkZWRfcmVjb3JkZXJfdmVyc2lvbjogJ3YxJyB8ICd2MicgfCB1bmRlZmluZWQgLy8gZmxhZyB0aGF0IGtlZXBzIHRyYWNrIG9mIHdoaWNoIHZlcnNpb24gb2YgcmVjb3JkZXIgaXMgbG9hZGVkXG4gICAgY29uZmlnOiBQb3N0SG9nQ29uZmlnXG5cbiAgICByYXRlTGltaXRlcjogUmF0ZUxpbWl0ZXJcbiAgICBwYWdlVmlld01hbmFnZXI6IFBhZ2VWaWV3TWFuYWdlclxuICAgIGZlYXR1cmVGbGFnczogUG9zdEhvZ0ZlYXR1cmVGbGFnc1xuICAgIHN1cnZleXM6IFBvc3RIb2dTdXJ2ZXlzXG4gICAgdG9vbGJhcjogVG9vbGJhclxuXG4gICAgLy8gVGhlc2UgYXJlIGluc3RhbmNlLXNwZWNpZmljIHN0YXRlIGNyZWF0ZWQgYWZ0ZXIgaW5pdGlhbGlzYXRpb25cbiAgICBwZXJzaXN0ZW5jZT86IFBvc3RIb2dQZXJzaXN0ZW5jZVxuICAgIHNlc3Npb25QZXJzaXN0ZW5jZT86IFBvc3RIb2dQZXJzaXN0ZW5jZVxuICAgIHNlc3Npb25NYW5hZ2VyPzogU2Vzc2lvbklkTWFuYWdlclxuICAgIHNlc3Npb25Qcm9wc01hbmFnZXI/OiBTZXNzaW9uUHJvcHNNYW5hZ2VyXG4gICAgcmVxdWVzdFJvdXRlcjogUmVxdWVzdFJvdXRlclxuXG4gICAgX3JlcXVlc3RRdWV1ZT86IFJlcXVlc3RRdWV1ZVxuICAgIF9yZXRyeVF1ZXVlPzogUmV0cnlRdWV1ZVxuICAgIHNlc3Npb25SZWNvcmRpbmc/OiBTZXNzaW9uUmVjb3JkaW5nXG4gICAgd2ViUGVyZm9ybWFuY2UgPSBuZXcgRGVwcmVjYXRlZFdlYlBlcmZvcm1hbmNlT2JzZXJ2ZXIoKVxuXG4gICAgX3RyaWdnZXJlZF9ub3RpZnM6IGFueVxuICAgIGNvbXByZXNzaW9uOiBQYXJ0aWFsPFJlY29yZDxDb21wcmVzc2lvbiwgYm9vbGVhbj4+XG4gICAgX19jYXB0dXJlSG9va3M6ICgoZXZlbnROYW1lOiBzdHJpbmcpID0+IHZvaWQpW11cbiAgICBfX3JlcXVlc3RfcXVldWU6IFt1cmw6IHN0cmluZywgZGF0YTogUmVjb3JkPHN0cmluZywgYW55Piwgb3B0aW9uczogWEhST3B0aW9ucywgY2FsbGJhY2s/OiBSZXF1ZXN0Q2FsbGJhY2tdW11cbiAgICBfX2F1dG9jYXB0dXJlOiBib29sZWFuIHwgQXV0b2NhcHR1cmVDb25maWcgfCB1bmRlZmluZWRcbiAgICBkZWNpZGVFbmRwb2ludFdhc0hpdDogYm9vbGVhblxuICAgIGFuYWx5dGljc0RlZmF1bHRFbmRwb2ludDogc3RyaW5nXG4gICAgZWxlbWVudHNDaGFpbkFzU3RyaW5nOiBib29sZWFuXG5cbiAgICBTZW50cnlJbnRlZ3JhdGlvbjogdHlwZW9mIFNlbnRyeUludGVncmF0aW9uXG4gICAgc2VnbWVudEludGVncmF0aW9uOiAoKSA9PiBhbnlcblxuICAgIC8qKiBERVBSRUNBVEVEOiBXZSBrZWVwIHRoaXMgdG8gc3VwcG9ydCBleGlzdGluZyB1c2FnZSBidXQgbm93IG9uZSBzaG91bGQganVzdCBjYWxsIC5zZXRQZXJzb25Qcm9wZXJ0aWVzICovXG4gICAgcGVvcGxlOiB7XG4gICAgICAgIHNldDogKHByb3A6IHN0cmluZyB8IFByb3BlcnRpZXMsIHRvPzogc3RyaW5nLCBjYWxsYmFjaz86IFJlcXVlc3RDYWxsYmFjaykgPT4gdm9pZFxuICAgICAgICBzZXRfb25jZTogKHByb3A6IHN0cmluZyB8IFByb3BlcnRpZXMsIHRvPzogc3RyaW5nLCBjYWxsYmFjaz86IFJlcXVlc3RDYWxsYmFjaykgPT4gdm9pZFxuICAgIH1cblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmNvbmZpZyA9IGRlZmF1bHRDb25maWcoKVxuICAgICAgICB0aGlzLmNvbXByZXNzaW9uID0ge31cbiAgICAgICAgdGhpcy5kZWNpZGVFbmRwb2ludFdhc0hpdCA9IGZhbHNlXG4gICAgICAgIHRoaXMuU2VudHJ5SW50ZWdyYXRpb24gPSBTZW50cnlJbnRlZ3JhdGlvblxuICAgICAgICB0aGlzLnNlZ21lbnRJbnRlZ3JhdGlvbiA9ICgpID0+IGNyZWF0ZVNlZ21lbnRJbnRlZ3JhdGlvbih0aGlzKVxuICAgICAgICB0aGlzLl9fY2FwdHVyZUhvb2tzID0gW11cbiAgICAgICAgdGhpcy5fX3JlcXVlc3RfcXVldWUgPSBbXVxuICAgICAgICB0aGlzLl9fbG9hZGVkID0gZmFsc2VcbiAgICAgICAgdGhpcy5fX2xvYWRlZF9yZWNvcmRlcl92ZXJzaW9uID0gdW5kZWZpbmVkXG4gICAgICAgIHRoaXMuX19hdXRvY2FwdHVyZSA9IHVuZGVmaW5lZFxuICAgICAgICB0aGlzLmFuYWx5dGljc0RlZmF1bHRFbmRwb2ludCA9ICcvZS8nXG4gICAgICAgIHRoaXMuZWxlbWVudHNDaGFpbkFzU3RyaW5nID0gZmFsc2VcblxuICAgICAgICB0aGlzLmZlYXR1cmVGbGFncyA9IG5ldyBQb3N0SG9nRmVhdHVyZUZsYWdzKHRoaXMpXG4gICAgICAgIHRoaXMudG9vbGJhciA9IG5ldyBUb29sYmFyKHRoaXMpXG4gICAgICAgIHRoaXMucGFnZVZpZXdNYW5hZ2VyID0gbmV3IFBhZ2VWaWV3TWFuYWdlcih0aGlzKVxuICAgICAgICB0aGlzLnN1cnZleXMgPSBuZXcgUG9zdEhvZ1N1cnZleXModGhpcylcbiAgICAgICAgdGhpcy5yYXRlTGltaXRlciA9IG5ldyBSYXRlTGltaXRlcigpXG4gICAgICAgIHRoaXMucmVxdWVzdFJvdXRlciA9IG5ldyBSZXF1ZXN0Um91dGVyKHRoaXMpXG5cbiAgICAgICAgLy8gTk9URTogU2VlIHRoZSBwcm9wZXJ0eSBkZWZpbml0aW9uIGZvciBkZXByZWNhdGlvbiBub3RpY2VcbiAgICAgICAgdGhpcy5wZW9wbGUgPSB7XG4gICAgICAgICAgICBzZXQ6IChwcm9wOiBzdHJpbmcgfCBQcm9wZXJ0aWVzLCB0bz86IHN0cmluZywgY2FsbGJhY2s/OiBSZXF1ZXN0Q2FsbGJhY2spID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzZXRQcm9wcyA9IF9pc1N0cmluZyhwcm9wKSA/IHsgW3Byb3BdOiB0byB9IDogcHJvcFxuICAgICAgICAgICAgICAgIHRoaXMuc2V0UGVyc29uUHJvcGVydGllcyhzZXRQcm9wcylcbiAgICAgICAgICAgICAgICBjYWxsYmFjaz8uKHt9KVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldF9vbmNlOiAocHJvcDogc3RyaW5nIHwgUHJvcGVydGllcywgdG8/OiBzdHJpbmcsIGNhbGxiYWNrPzogUmVxdWVzdENhbGxiYWNrKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2V0UHJvcHMgPSBfaXNTdHJpbmcocHJvcCkgPyB7IFtwcm9wXTogdG8gfSA6IHByb3BcbiAgICAgICAgICAgICAgICB0aGlzLnNldFBlcnNvblByb3BlcnRpZXModW5kZWZpbmVkLCBzZXRQcm9wcylcbiAgICAgICAgICAgICAgICBjYWxsYmFjaz8uKHt9KVxuICAgICAgICAgICAgfSxcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIEluaXRpYWxpemF0aW9uIG1ldGhvZHNcblxuICAgIC8qKlxuICAgICAqIFRoaXMgZnVuY3Rpb24gaW5pdGlhbGl6ZXMgYSBuZXcgaW5zdGFuY2Ugb2YgdGhlIFBvc3RIb2cgY2FwdHVyaW5nIG9iamVjdC5cbiAgICAgKiBBbGwgbmV3IGluc3RhbmNlcyBhcmUgYWRkZWQgdG8gdGhlIG1haW4gcG9zdGhvZyBvYmplY3QgYXMgc3ViIHByb3BlcnRpZXMgKHN1Y2ggYXNcbiAgICAgKiBwb3N0aG9nLmxpYnJhcnlfbmFtZSkgYW5kIGFsc28gcmV0dXJuZWQgYnkgdGhpcyBmdW5jdGlvbi4gVG8gZGVmaW5lIGFcbiAgICAgKiBzZWNvbmQgaW5zdGFuY2Ugb24gdGhlIHBhZ2UsIHlvdSB3b3VsZCBjYWxsOlxuICAgICAqXG4gICAgICogICAgIHBvc3Rob2cuaW5pdCgnbmV3IHRva2VuJywgeyB5b3VyOiAnY29uZmlnJyB9LCAnbGlicmFyeV9uYW1lJyk7XG4gICAgICpcbiAgICAgKiBhbmQgdXNlIGl0IGxpa2Ugc286XG4gICAgICpcbiAgICAgKiAgICAgcG9zdGhvZy5saWJyYXJ5X25hbWUuY2FwdHVyZSguLi4pO1xuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHRva2VuICAgWW91ciBQb3N0SG9nIEFQSSB0b2tlblxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbY29uZmlnXSAgQSBkaWN0aW9uYXJ5IG9mIGNvbmZpZyBvcHRpb25zIHRvIG92ZXJyaWRlLiA8YSBocmVmPVwiaHR0cHM6Ly9naXRodWIuY29tL3Bvc3Rob2cvcG9zdGhvZy1qcy9ibG9iLzZlMGU4NzMvc3JjL3Bvc3Rob2ctY29yZS5qcyNMNTctTDkxXCI+U2VlIGEgbGlzdCBvZiBkZWZhdWx0IGNvbmZpZyBvcHRpb25zPC9hPi5cbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gW25hbWVdICAgIFRoZSBuYW1lIGZvciB0aGUgbmV3IHBvc3Rob2cgaW5zdGFuY2UgdGhhdCB5b3Ugd2FudCBjcmVhdGVkXG4gICAgICovXG4gICAgaW5pdCh0b2tlbjogc3RyaW5nLCBjb25maWc/OiBQYXJ0aWFsPFBvc3RIb2dDb25maWc+LCBuYW1lPzogc3RyaW5nKTogUG9zdEhvZyB8IHZvaWQge1xuICAgICAgICBpZiAoX2lzVW5kZWZpbmVkKG5hbWUpKSB7XG4gICAgICAgICAgICBsb2dnZXIuY3JpdGljYWwoJ1lvdSBtdXN0IG5hbWUgeW91ciBuZXcgbGlicmFyeTogaW5pdCh0b2tlbiwgY29uZmlnLCBuYW1lKScpXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChfaXNVbmRlZmluZWQodG9rZW4pIHx8IF9pc0VtcHR5U3RyaW5nKHRva2VuKSkge1xuICAgICAgICAgICAgbG9nZ2VyLmNyaXRpY2FsKCdZb3UgbXVzdCBwcm92aWRlIGEgdG9rZW4gdG8gaW5pdGlhbGl6ZSBwb3N0aG9nJylcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG5hbWUgPT09IFBSSU1BUllfSU5TVEFOQ0VfTkFNRSkge1xuICAgICAgICAgICAgbG9nZ2VyLmNyaXRpY2FsKFxuICAgICAgICAgICAgICAgICdZb3UgbXVzdCBpbml0aWFsaXplIHRoZSBtYWluIHBvc3Rob2cgb2JqZWN0IHJpZ2h0IGFmdGVyIHlvdSBpbmNsdWRlIHRoZSBQb3N0SG9nIGpzIHNuaXBwZXQnXG4gICAgICAgICAgICApXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGluc3RhbmNlOiBQb3N0SG9nID0gY3JlYXRlX3BobGliKHRva2VuLCBjb25maWcsIG5hbWUsIChpbnN0YW5jZTogUG9zdEhvZykgPT4ge1xuICAgICAgICAgICAgcG9zdGhvZ19tYWluW25hbWVdID0gaW5zdGFuY2VcbiAgICAgICAgICAgIGluc3RhbmNlLl9sb2FkZWQoKVxuICAgICAgICB9KVxuICAgICAgICBwb3N0aG9nX21haW5bbmFtZV0gPSBpbnN0YW5jZVxuXG4gICAgICAgIHJldHVybiBpbnN0YW5jZVxuICAgIH1cblxuICAgIC8vIHBvc3Rob2cuX2luaXQodG9rZW46c3RyaW5nLCBjb25maWc6b2JqZWN0LCBuYW1lOnN0cmluZylcbiAgICAvL1xuICAgIC8vIFRoaXMgZnVuY3Rpb24gc2V0cyB1cCB0aGUgY3VycmVudCBpbnN0YW5jZSBvZiB0aGUgcG9zdGhvZ1xuICAgIC8vIGxpYnJhcnkuICBUaGUgZGlmZmVyZW5jZSBiZXR3ZWVuIHRoaXMgbWV0aG9kIGFuZCB0aGUgaW5pdCguLi4pXG4gICAgLy8gbWV0aG9kIGlzIHRoaXMgb25lIGluaXRpYWxpemVzIHRoZSBhY3R1YWwgaW5zdGFuY2UsIHdoZXJlYXMgdGhlXG4gICAgLy8gaW5pdCguLi4pIG1ldGhvZCBzZXRzIHVwIGEgbmV3IGxpYnJhcnkgYW5kIGNhbGxzIF9pbml0IG9uIGl0LlxuICAgIC8vXG4gICAgLy8gTm90ZSB0aGF0IHRoZXJlIGFyZSBvcGVyYXRpb25zIHRoYXQgY2FuIGJlIGFzeW5jaHJvbm91cywgc28gd2VcbiAgICAvLyBhY2NlcHQgYSBjYWxsYmFjayB0aGF0IGlzIGNhbGxlZCB3aGVuIGFsbCB0aGUgYXN5bmNocm9ub3VzIHdvcmtcbiAgICAvLyBpcyBkb25lLiBOb3RlIHRoYXQgd2UgZG8gbm90IHVzZSBwcm9taXNlcyBiZWNhdXNlIHdlIHdhbnQgdG8gYmVcbiAgICAvLyBJRTExIGNvbXBhdGlibGUuIFdlIGNvdWxkIHVzZSBwb2x5ZmlsbHMsIHdoaWNoIHdvdWxkIG1ha2UgdGhlXG4gICAgLy8gY29kZSBhIGJpdCBjbGVhbmVyLCBidXQgd2lsbCBhZGQgc29tZSBvdmVyaGVhZC5cbiAgICAvL1xuICAgIF9pbml0KFxuICAgICAgICB0b2tlbjogc3RyaW5nLFxuICAgICAgICBjb25maWc6IFBhcnRpYWw8UG9zdEhvZ0NvbmZpZz4gPSB7fSxcbiAgICAgICAgbmFtZT86IHN0cmluZyxcbiAgICAgICAgaW5pdENvbXBsZXRlPzogKGluc3RhbmNlOiBQb3N0SG9nKSA9PiB2b2lkXG4gICAgKTogdm9pZCB7XG4gICAgICAgIHRoaXMuX19sb2FkZWQgPSB0cnVlXG4gICAgICAgIHRoaXMuY29uZmlnID0ge30gYXMgUG9zdEhvZ0NvbmZpZyAvLyB3aWxsIGJlIHNldCByaWdodCBiZWxvd1xuICAgICAgICB0aGlzLl90cmlnZ2VyZWRfbm90aWZzID0gW11cblxuICAgICAgICAvLyBUbyBhdm9pZCB1c2luZyBQcm9taXNlcyBhbmQgdGhlaXIgaGVscGVyIGZ1bmN0aW9ucywgd2UgaW5zdGVhZCBrZWVwXG4gICAgICAgIC8vIHRyYWNrIG9mIHdoaWNoIGNhbGxiYWNrcyBoYXZlIGJlZW4gY2FsbGVkLCBhbmQgdGhlbiBjYWxsIGluaXRDb21wbGV0ZVxuICAgICAgICAvLyB3aGVuIGFsbCBvZiB0aGVtIGhhdmUgYmVlbiBjYWxsZWQuIFRvIGFkZCBhZGRpdGlvbmFsIGFzeW5jIGNvZGUsIGFkZFxuICAgICAgICAvLyB0byBgY2FsbGJhY2tzSGFuZGxlZGAgYW5kIHBhc3MgdXBkYXRlSW5pdENvbXBsZXRlIGFzIGEgY2FsbGJhY2sgdG9cbiAgICAgICAgLy8gdGhlIGFzeW5jIGNvZGUuXG4gICAgICAgIGNvbnN0IGNhbGxiYWNrc0hhbmRsZWQgPSB7IHNlZ21lbnRSZWdpc3RlcjogZmFsc2UsIHN5bmNDb2RlOiBmYWxzZSB9XG4gICAgICAgIGNvbnN0IHVwZGF0ZUluaXRDb21wbGV0ZSA9IChjYWxsYmFja05hbWU6IGtleW9mIHR5cGVvZiBjYWxsYmFja3NIYW5kbGVkKSA9PiAoKSA9PiB7XG4gICAgICAgICAgICAvLyBVcGRhdGUgdGhlIHJlZ2lzdGVyIG9mIGNhbGxiYWNrcyB0aGF0IGhhdmUgYmVlbiBjYWxsZWQsIGFuZCBpZlxuICAgICAgICAgICAgLy8gdGhleSBoYXZlIGFsbCBiZWVuIGNhbGxlZCwgdGhlbiB3ZSBhcmUgcmVhZHkgdG8gY2FsbFxuICAgICAgICAgICAgLy8gaW5pdENvbXBsZXRlLlxuICAgICAgICAgICAgaWYgKCFjYWxsYmFja3NIYW5kbGVkW2NhbGxiYWNrTmFtZV0pIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFja3NIYW5kbGVkW2NhbGxiYWNrTmFtZV0gPSB0cnVlXG4gICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrc0hhbmRsZWQuc2VnbWVudFJlZ2lzdGVyICYmIGNhbGxiYWNrc0hhbmRsZWQuc3luY0NvZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgaW5pdENvbXBsZXRlPy4odGhpcylcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDaGVjayBmb3IgZGVwcmVjYXRlZCBwYXJhbXMgdGhhdCBtaWdodCBzdGlsbCBiZSBpbiB1c2VcbiAgICAgICAgY29uZmlnLnJlcXVlc3RfaGVhZGVycyA9IGNvbmZpZy5yZXF1ZXN0X2hlYWRlcnMgfHwgY29uZmlnLnhocl9oZWFkZXJzXG5cbiAgICAgICAgdGhpcy5zZXRfY29uZmlnKFxuICAgICAgICAgICAgX2V4dGVuZCh7fSwgZGVmYXVsdENvbmZpZygpLCBjb25maWcsIHtcbiAgICAgICAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgICAgICAgIHRva2VuOiB0b2tlbixcbiAgICAgICAgICAgIH0pXG4gICAgICAgIClcblxuICAgICAgICAvLyBDaGVjayBpZiByZWNvcmRlci5qcyBpcyBhbHJlYWR5IGxvYWRlZFxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2Jhbi10cy1jb21tZW50XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgaWYgKHdpbmRvdz8ucnJ3ZWI/LnJlY29yZCB8fCB3aW5kb3c/LnJyd2ViUmVjb3JkKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2Jhbi10cy1jb21tZW50XG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICB0aGlzLl9fbG9hZGVkX3JlY29yZGVyX3ZlcnNpb24gPSB3aW5kb3c/LnJyd2ViPy52ZXJzaW9uXG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnBlcnNpc3RlbmNlID0gbmV3IFBvc3RIb2dQZXJzaXN0ZW5jZSh0aGlzLmNvbmZpZylcbiAgICAgICAgdGhpcy5zZXNzaW9uUGVyc2lzdGVuY2UgPVxuICAgICAgICAgICAgdGhpcy5jb25maWcucGVyc2lzdGVuY2UgPT09ICdzZXNzaW9uU3RvcmFnZSdcbiAgICAgICAgICAgICAgICA/IHRoaXMucGVyc2lzdGVuY2VcbiAgICAgICAgICAgICAgICA6IG5ldyBQb3N0SG9nUGVyc2lzdGVuY2UoeyAuLi50aGlzLmNvbmZpZywgcGVyc2lzdGVuY2U6ICdzZXNzaW9uU3RvcmFnZScgfSlcblxuICAgICAgICB0aGlzLl9yZXF1ZXN0UXVldWUgPSBuZXcgUmVxdWVzdFF1ZXVlKHRoaXMuX2hhbmRsZV9xdWV1ZWRfZXZlbnQuYmluZCh0aGlzKSlcbiAgICAgICAgdGhpcy5fcmV0cnlRdWV1ZSA9IG5ldyBSZXRyeVF1ZXVlKHRoaXMuY29uZmlnLm9uX3JlcXVlc3RfZXJyb3IsIHRoaXMucmF0ZUxpbWl0ZXIpXG4gICAgICAgIHRoaXMuX19jYXB0dXJlSG9va3MgPSBbXVxuICAgICAgICB0aGlzLl9fcmVxdWVzdF9xdWV1ZSA9IFtdXG5cbiAgICAgICAgdGhpcy5zZXNzaW9uTWFuYWdlciA9IG5ldyBTZXNzaW9uSWRNYW5hZ2VyKHRoaXMuY29uZmlnLCB0aGlzLnBlcnNpc3RlbmNlKVxuICAgICAgICB0aGlzLnNlc3Npb25Qcm9wc01hbmFnZXIgPSBuZXcgU2Vzc2lvblByb3BzTWFuYWdlcih0aGlzLnNlc3Npb25NYW5hZ2VyLCB0aGlzLnBlcnNpc3RlbmNlKVxuXG4gICAgICAgIHRoaXMuX2dkcHJfaW5pdCgpXG5cbiAgICAgICAgaWYgKGNvbmZpZy5zZWdtZW50KSB7XG4gICAgICAgICAgICAvLyBVc2Ugc2VnbWVudHMgYW5vbnltb3VzSWQgaW5zdGVhZFxuICAgICAgICAgICAgdGhpcy5jb25maWcuZ2V0X2RldmljZV9pZCA9ICgpID0+IGNvbmZpZy5zZWdtZW50LnVzZXIoKS5hbm9ueW1vdXNJZCgpXG5cbiAgICAgICAgICAgIC8vIElmIGEgc2VnbWVudCB1c2VyIElEIGV4aXN0cywgc2V0IGl0IGFzIHRoZSBkaXN0aW5jdF9pZFxuICAgICAgICAgICAgaWYgKGNvbmZpZy5zZWdtZW50LnVzZXIoKS5pZCgpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWdpc3Rlcih7XG4gICAgICAgICAgICAgICAgICAgIGRpc3RpbmN0X2lkOiBjb25maWcuc2VnbWVudC51c2VyKCkuaWQoKSxcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIHRoaXMucGVyc2lzdGVuY2Uuc2V0X3VzZXJfc3RhdGUoJ2lkZW50aWZpZWQnKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25maWcuc2VnbWVudC5yZWdpc3Rlcih0aGlzLnNlZ21lbnRJbnRlZ3JhdGlvbigpKS50aGVuKHVwZGF0ZUluaXRDb21wbGV0ZSgnc2VnbWVudFJlZ2lzdGVyJykpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB1cGRhdGVJbml0Q29tcGxldGUoJ3NlZ21lbnRSZWdpc3RlcicpKClcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGlzVW5kZWZpbmVkIGRvZXNuJ3QgcHJvdmlkZSB0eXBlaGludCBoZXJlIHNvIHdvdWxkbid0IHJlZHVjZSBidW5kbGUgYXMgd2UnZCBuZWVkIHRvIGFzc2lnblxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcG9zdGhvZy1qcy9uby1kaXJlY3QtdW5kZWZpbmVkLWNoZWNrXG4gICAgICAgIGlmIChjb25maWcuYm9vdHN0cmFwPy5kaXN0aW5jdElEICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IHV1aWQgPSB0aGlzLmNvbmZpZy5nZXRfZGV2aWNlX2lkKHV1aWR2NygpKVxuICAgICAgICAgICAgY29uc3QgZGV2aWNlSUQgPSBjb25maWcuYm9vdHN0cmFwPy5pc0lkZW50aWZpZWRJRCA/IHV1aWQgOiBjb25maWcuYm9vdHN0cmFwLmRpc3RpbmN0SURcbiAgICAgICAgICAgIHRoaXMucGVyc2lzdGVuY2Uuc2V0X3VzZXJfc3RhdGUoY29uZmlnLmJvb3RzdHJhcD8uaXNJZGVudGlmaWVkSUQgPyAnaWRlbnRpZmllZCcgOiAnYW5vbnltb3VzJylcbiAgICAgICAgICAgIHRoaXMucmVnaXN0ZXIoe1xuICAgICAgICAgICAgICAgIGRpc3RpbmN0X2lkOiBjb25maWcuYm9vdHN0cmFwLmRpc3RpbmN0SUQsXG4gICAgICAgICAgICAgICAgJGRldmljZV9pZDogZGV2aWNlSUQsXG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuX2hhc0Jvb3RzdHJhcHBlZEZlYXR1cmVGbGFncygpKSB7XG4gICAgICAgICAgICBjb25zdCBhY3RpdmVGbGFncyA9IE9iamVjdC5rZXlzKGNvbmZpZy5ib290c3RyYXA/LmZlYXR1cmVGbGFncyB8fCB7fSlcbiAgICAgICAgICAgICAgICAuZmlsdGVyKChmbGFnKSA9PiAhIWNvbmZpZy5ib290c3RyYXA/LmZlYXR1cmVGbGFncz8uW2ZsYWddKVxuICAgICAgICAgICAgICAgIC5yZWR1Y2UoXG4gICAgICAgICAgICAgICAgICAgIChyZXM6IFJlY29yZDxzdHJpbmcsIHN0cmluZyB8IGJvb2xlYW4+LCBrZXkpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgIChyZXNba2V5XSA9IGNvbmZpZy5ib290c3RyYXA/LmZlYXR1cmVGbGFncz8uW2tleV0gfHwgZmFsc2UpLCByZXNcbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAge31cbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICBjb25zdCBmZWF0dXJlRmxhZ1BheWxvYWRzID0gT2JqZWN0LmtleXMoY29uZmlnLmJvb3RzdHJhcD8uZmVhdHVyZUZsYWdQYXlsb2FkcyB8fCB7fSlcbiAgICAgICAgICAgICAgICAuZmlsdGVyKChrZXkpID0+IGFjdGl2ZUZsYWdzW2tleV0pXG4gICAgICAgICAgICAgICAgLnJlZHVjZSgocmVzOiBSZWNvcmQ8c3RyaW5nLCBKc29uVHlwZT4sIGtleSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29uZmlnLmJvb3RzdHJhcD8uZmVhdHVyZUZsYWdQYXlsb2Fkcz8uW2tleV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc1trZXldID0gY29uZmlnLmJvb3RzdHJhcD8uZmVhdHVyZUZsYWdQYXlsb2Fkcz8uW2tleV1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzXG4gICAgICAgICAgICAgICAgfSwge30pXG5cbiAgICAgICAgICAgIHRoaXMuZmVhdHVyZUZsYWdzLnJlY2VpdmVkRmVhdHVyZUZsYWdzKHsgZmVhdHVyZUZsYWdzOiBhY3RpdmVGbGFncywgZmVhdHVyZUZsYWdQYXlsb2FkcyB9KVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aGlzLmdldF9kaXN0aW5jdF9pZCgpKSB7XG4gICAgICAgICAgICAvLyBUaGVyZSBpcyBubyBuZWVkIHRvIHNldCB0aGUgZGlzdGluY3QgaWRcbiAgICAgICAgICAgIC8vIG9yIHRoZSBkZXZpY2UgaWQgaWYgc29tZXRoaW5nIHdhcyBhbHJlYWR5IHN0b3JlZFxuICAgICAgICAgICAgLy8gaW4gdGhlIHBlcnNpdGVuY2VcbiAgICAgICAgICAgIGNvbnN0IHV1aWQgPSB0aGlzLmNvbmZpZy5nZXRfZGV2aWNlX2lkKHV1aWR2NygpKVxuICAgICAgICAgICAgdGhpcy5yZWdpc3Rlcl9vbmNlKFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgZGlzdGluY3RfaWQ6IHV1aWQsXG4gICAgICAgICAgICAgICAgICAgICRkZXZpY2VfaWQ6IHV1aWQsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAnJ1xuICAgICAgICAgICAgKVxuICAgICAgICAgICAgLy8gZGlzdGluY3QgaWQgPT0gJGRldmljZV9pZCBpcyBhIHByb3h5IGZvciBhbm9ueW1vdXMgdXNlclxuICAgICAgICAgICAgdGhpcy5wZXJzaXN0ZW5jZS5zZXRfdXNlcl9zdGF0ZSgnYW5vbnltb3VzJylcbiAgICAgICAgfVxuICAgICAgICAvLyBTZXQgdXAgZXZlbnQgaGFuZGxlciBmb3IgcGFnZWxlYXZlXG4gICAgICAgIC8vIFVzZSBgb25wYWdlaGlkZWAgaWYgYXZhaWxhYmxlLCBzZWUgaHR0cHM6Ly9jYWxlbmRhci5wZXJmcGxhbmV0LmNvbS8yMDIwL2JlYWNvbmluZy1pbi1wcmFjdGljZS8jYmVhY29uaW5nLXJlbGlhYmlsaXR5LWF2b2lkaW5nLWFiYW5kb25zXG4gICAgICAgIHdpbmRvdz8uYWRkRXZlbnRMaXN0ZW5lcj8uKCdvbnBhZ2VoaWRlJyBpbiBzZWxmID8gJ3BhZ2VoaWRlJyA6ICd1bmxvYWQnLCB0aGlzLl9oYW5kbGVfdW5sb2FkLmJpbmQodGhpcykpXG5cbiAgICAgICAgLy8gTWFrZSBzdXJlIHRoYXQgd2UgYWxzbyBjYWxsIHRoZSBpbml0Q29tcGxldGUgY2FsbGJhY2sgYXQgdGhlIGVuZCBvZlxuICAgICAgICAvLyB0aGUgc3luY2hyb25vdXMgY29kZSBhcyB3ZWxsLlxuICAgICAgICB1cGRhdGVJbml0Q29tcGxldGUoJ3N5bmNDb2RlJykoKVxuICAgIH1cblxuICAgIC8vIFByaXZhdGUgbWV0aG9kc1xuXG4gICAgX2FmdGVyRGVjaWRlUmVzcG9uc2UocmVzcG9uc2U6IERlY2lkZVJlc3BvbnNlKSB7XG4gICAgICAgIHRoaXMuY29tcHJlc3Npb24gPSB7fVxuICAgICAgICBpZiAocmVzcG9uc2Uuc3VwcG9ydGVkQ29tcHJlc3Npb24gJiYgIXRoaXMuY29uZmlnLmRpc2FibGVfY29tcHJlc3Npb24pIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbXByZXNzaW9uOiBQYXJ0aWFsPFJlY29yZDxDb21wcmVzc2lvbiwgYm9vbGVhbj4+ID0ge31cbiAgICAgICAgICAgIGZvciAoY29uc3QgbWV0aG9kIG9mIHJlc3BvbnNlWydzdXBwb3J0ZWRDb21wcmVzc2lvbiddKSB7XG4gICAgICAgICAgICAgICAgY29tcHJlc3Npb25bbWV0aG9kXSA9IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY29tcHJlc3Npb24gPSBjb21wcmVzc2lvblxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHJlc3BvbnNlLmFuYWx5dGljcz8uZW5kcG9pbnQpIHtcbiAgICAgICAgICAgIHRoaXMuYW5hbHl0aWNzRGVmYXVsdEVuZHBvaW50ID0gcmVzcG9uc2UuYW5hbHl0aWNzLmVuZHBvaW50XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocmVzcG9uc2UuZWxlbWVudHNDaGFpbkFzU3RyaW5nKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnRzQ2hhaW5Bc1N0cmluZyA9IHJlc3BvbnNlLmVsZW1lbnRzQ2hhaW5Bc1N0cmluZ1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgX2xvYWRlZCgpOiB2b2lkIHtcbiAgICAgICAgLy8gUGF1c2UgYHJlbG9hZEZlYXR1cmVGbGFnc2AgY2FsbHMgaW4gY29uZmlnLmxvYWRlZCBjYWxsYmFjay5cbiAgICAgICAgLy8gVGhlc2UgZmVhdHVyZSBmbGFncyBhcmUgbG9hZGVkIGluIHRoZSBkZWNpZGUgY2FsbCBtYWRlIHJpZ2h0XG4gICAgICAgIC8vIGFmdGVyd2FyZHNcbiAgICAgICAgY29uc3QgZGlzYWJsZURlY2lkZSA9IHRoaXMuY29uZmlnLmFkdmFuY2VkX2Rpc2FibGVfZGVjaWRlXG4gICAgICAgIGlmICghZGlzYWJsZURlY2lkZSkge1xuICAgICAgICAgICAgdGhpcy5mZWF0dXJlRmxhZ3Muc2V0UmVsb2FkaW5nUGF1c2VkKHRydWUpXG4gICAgICAgIH1cblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5jb25maWcubG9hZGVkKHRoaXMpXG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgbG9nZ2VyLmNyaXRpY2FsKCdgbG9hZGVkYCBmdW5jdGlvbiBmYWlsZWQnLCBlcnIpXG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9zdGFydF9xdWV1ZV9pZl9vcHRlZF9pbigpXG5cbiAgICAgICAgLy8gdGhpcyBoYXBwZW5zIGFmdGVyIHNvIGEgdXNlciBjYW4gY2FsbCBpZGVudGlmeSBpblxuICAgICAgICAvLyB0aGUgbG9hZGVkIGNhbGxiYWNrXG4gICAgICAgIGlmICh0aGlzLmNvbmZpZy5jYXB0dXJlX3BhZ2V2aWV3ICYmIGRvY3VtZW50KSB7XG4gICAgICAgICAgICB0aGlzLmNhcHR1cmUoJyRwYWdldmlldycsIHsgdGl0bGU6IGRvY3VtZW50LnRpdGxlIH0sIHsgc2VuZF9pbnN0YW50bHk6IHRydWUgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENhbGwgZGVjaWRlIHRvIGdldCB3aGF0IGZlYXR1cmVzIGFyZSBlbmFibGVkIGFuZCBvdGhlciBzZXR0aW5ncy5cbiAgICAgICAgLy8gQXMgYSByZW1pbmRlciwgaWYgdGhlIC9kZWNpZGUgZW5kcG9pbnQgaXMgZGlzYWJsZWQsIGZlYXR1cmUgZmxhZ3MsIHRvb2xiYXIsIHNlc3Npb24gcmVjb3JkaW5nLCBhdXRvY2FwdHVyZSxcbiAgICAgICAgLy8gYW5kIGNvbXByZXNzaW9uIHdpbGwgbm90IGJlIGF2YWlsYWJsZS5cbiAgICAgICAgaWYgKCFkaXNhYmxlRGVjaWRlKSB7XG4gICAgICAgICAgICBuZXcgRGVjaWRlKHRoaXMpLmNhbGwoKVxuXG4gICAgICAgICAgICAvLyBUUklDS1k6IFJlc2V0IGFueSBkZWNpZGUgcmVsb2FkcyBxdWV1ZWQgZHVyaW5nIGNvbmZpZy5sb2FkZWQgYmVjYXVzZSB0aGV5J2xsIGJlXG4gICAgICAgICAgICAvLyBjb3ZlcmVkIGJ5IHRoZSBkZWNpZGUgY2FsbCByaWdodCBhYm92ZS5cbiAgICAgICAgICAgIHRoaXMuZmVhdHVyZUZsYWdzLnJlc2V0UmVxdWVzdFF1ZXVlKClcbiAgICAgICAgfVxuICAgIH1cblxuICAgIF9zdGFydF9xdWV1ZV9pZl9vcHRlZF9pbigpOiB2b2lkIHtcbiAgICAgICAgaWYgKCF0aGlzLmhhc19vcHRlZF9vdXRfY2FwdHVyaW5nKCkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZy5yZXF1ZXN0X2JhdGNoaW5nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fcmVxdWVzdFF1ZXVlPy5wb2xsKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIF9kb21fbG9hZGVkKCk6IHZvaWQge1xuICAgICAgICBpZiAoIXRoaXMuaGFzX29wdGVkX291dF9jYXB0dXJpbmcoKSkge1xuICAgICAgICAgICAgX2VhY2hBcnJheSh0aGlzLl9fcmVxdWVzdF9xdWV1ZSwgKGl0ZW0pID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLl9zZW5kX3JlcXVlc3QoLi4uaXRlbSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9fcmVxdWVzdF9xdWV1ZSA9IFtdXG5cbiAgICAgICAgdGhpcy5fc3RhcnRfcXVldWVfaWZfb3B0ZWRfaW4oKVxuICAgIH1cblxuICAgIF9oYW5kbGVfdW5sb2FkKCk6IHZvaWQge1xuICAgICAgICBpZiAoIXRoaXMuY29uZmlnLnJlcXVlc3RfYmF0Y2hpbmcpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZy5jYXB0dXJlX3BhZ2V2aWV3ICYmIHRoaXMuY29uZmlnLmNhcHR1cmVfcGFnZWxlYXZlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jYXB0dXJlKCckcGFnZWxlYXZlJywgbnVsbCwgeyB0cmFuc3BvcnQ6ICdzZW5kQmVhY29uJyB9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5jb25maWcuY2FwdHVyZV9wYWdldmlldyAmJiB0aGlzLmNvbmZpZy5jYXB0dXJlX3BhZ2VsZWF2ZSkge1xuICAgICAgICAgICAgdGhpcy5jYXB0dXJlKCckcGFnZWxlYXZlJylcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX3JlcXVlc3RRdWV1ZT8udW5sb2FkKClcbiAgICAgICAgdGhpcy5fcmV0cnlRdWV1ZT8udW5sb2FkKClcbiAgICB9XG5cbiAgICBfaGFuZGxlX3F1ZXVlZF9ldmVudCh1cmw6IHN0cmluZywgZGF0YTogUmVjb3JkPHN0cmluZywgYW55Piwgb3B0aW9ucz86IFhIUk9wdGlvbnMpOiB2b2lkIHtcbiAgICAgICAgY29uc3QganNvbkRhdGEgPSBKU09OLnN0cmluZ2lmeShkYXRhKVxuICAgICAgICB0aGlzLl9fY29tcHJlc3NfYW5kX3NlbmRfanNvbl9yZXF1ZXN0KHVybCwganNvbkRhdGEsIG9wdGlvbnMgfHwgX19OT09QVElPTlMsIF9fTk9PUClcbiAgICB9XG5cbiAgICBfX2NvbXByZXNzX2FuZF9zZW5kX2pzb25fcmVxdWVzdChcbiAgICAgICAgdXJsOiBzdHJpbmcsXG4gICAgICAgIGpzb25EYXRhOiBzdHJpbmcsXG4gICAgICAgIG9wdGlvbnM6IFhIUk9wdGlvbnMsXG4gICAgICAgIGNhbGxiYWNrPzogUmVxdWVzdENhbGxiYWNrXG4gICAgKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IFtkYXRhLCBfb3B0aW9uc10gPSBjb21wcmVzc0RhdGEoZGVjaWRlQ29tcHJlc3Npb24odGhpcy5jb21wcmVzc2lvbiksIGpzb25EYXRhLCBvcHRpb25zKVxuICAgICAgICB0aGlzLl9zZW5kX3JlcXVlc3QodXJsLCBkYXRhLCBfb3B0aW9ucywgY2FsbGJhY2spXG4gICAgfVxuXG4gICAgX3NlbmRfcmVxdWVzdCh1cmw6IHN0cmluZywgZGF0YTogUmVjb3JkPHN0cmluZywgYW55Piwgb3B0aW9uczogQ2FwdHVyZU9wdGlvbnMsIGNhbGxiYWNrPzogUmVxdWVzdENhbGxiYWNrKTogdm9pZCB7XG4gICAgICAgIGlmICghdGhpcy5fX2xvYWRlZCB8fCAhdGhpcy5fcmV0cnlRdWV1ZSkge1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMucmF0ZUxpbWl0ZXIuaXNSYXRlTGltaXRlZChvcHRpb25zLl9iYXRjaEtleSkpIHtcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKEVOUVVFVUVfUkVRVUVTVFMpIHtcbiAgICAgICAgICAgIHRoaXMuX19yZXF1ZXN0X3F1ZXVlLnB1c2goW3VybCwgZGF0YSwgb3B0aW9ucywgY2FsbGJhY2tdKVxuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBERUZBVUxUX09QVElPTlMgPSB7XG4gICAgICAgICAgICBtZXRob2Q6IHRoaXMuY29uZmlnLmFwaV9tZXRob2QsXG4gICAgICAgICAgICB0cmFuc3BvcnQ6IHRoaXMuY29uZmlnLmFwaV90cmFuc3BvcnQsXG4gICAgICAgICAgICB2ZXJib3NlOiB0aGlzLmNvbmZpZy52ZXJib3NlLFxuICAgICAgICB9XG5cbiAgICAgICAgb3B0aW9ucyA9IF9leHRlbmQoREVGQVVMVF9PUFRJT05TLCBvcHRpb25zIHx8IHt9KVxuICAgICAgICBpZiAoIVNVUFBPUlRTX1JFUVVFU1QpIHtcbiAgICAgICAgICAgIG9wdGlvbnMubWV0aG9kID0gJ0dFVCdcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHVzZVNlbmRCZWFjb24gPSB3aW5kb3cgJiYgJ3NlbmRCZWFjb24nIGluIHdpbmRvdy5uYXZpZ2F0b3IgJiYgb3B0aW9ucy50cmFuc3BvcnQgPT09ICdzZW5kQmVhY29uJ1xuICAgICAgICB1cmwgPSBhZGRQYXJhbXNUb1VSTCh1cmwsIG9wdGlvbnMudXJsUXVlcnlBcmdzIHx8IHt9LCB7XG4gICAgICAgICAgICBpcDogdGhpcy5jb25maWcuaXAsXG4gICAgICAgIH0pXG5cbiAgICAgICAgaWYgKHVzZVNlbmRCZWFjb24pIHtcbiAgICAgICAgICAgIC8vIGJlYWNvbiBkb2N1bWVudGF0aW9uIGh0dHBzOi8vdzNjLmdpdGh1Yi5pby9iZWFjb24vXG4gICAgICAgICAgICAvLyBiZWFjb25zIGZvcm1hdCB0aGUgbWVzc2FnZSBhbmQgdXNlIHRoZSB0eXBlIHByb3BlcnR5XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHdpbmRvdz8ubmF2aWdhdG9yLnNlbmRCZWFjb24odXJsLCBlbmNvZGVQb3N0RGF0YShkYXRhLCB7IC4uLm9wdGlvbnMsIHNlbmRCZWFjb246IHRydWUgfSkpXG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgLy8gc2VuZCBiZWFjb24gaXMgYSBiZXN0LWVmZm9ydCwgZmlyZS1hbmQtZm9yZ2V0IG1lY2hhbmlzbSBvbiBwYWdlIHVubG9hZCxcbiAgICAgICAgICAgICAgICAvLyB3ZSBkb24ndCB3YW50IHRvIHRocm93IGVycm9ycyBoZXJlXG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoU1VQUE9SVFNfUkVRVUVTVCB8fCAhZG9jdW1lbnQpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgICAgIHVybCxcbiAgICAgICAgICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogdGhpcy5jb25maWcucmVxdWVzdF9oZWFkZXJzLFxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLFxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayxcbiAgICAgICAgICAgICAgICAgICAgcmV0cmllc1BlcmZvcm1lZFNvRmFyOiAwLFxuICAgICAgICAgICAgICAgICAgICByZXRyeVF1ZXVlOiB0aGlzLl9yZXRyeVF1ZXVlLFxuICAgICAgICAgICAgICAgICAgICBvbkVycm9yOiB0aGlzLmNvbmZpZy5vbl9yZXF1ZXN0X2Vycm9yLFxuICAgICAgICAgICAgICAgICAgICBvblJlc3BvbnNlOiB0aGlzLnJhdGVMaW1pdGVyLmNoZWNrRm9yTGltaXRpbmcsXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoZSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpXG4gICAgICAgICAgICBzY3JpcHQudHlwZSA9ICd0ZXh0L2phdmFzY3JpcHQnXG4gICAgICAgICAgICBzY3JpcHQuYXN5bmMgPSB0cnVlXG4gICAgICAgICAgICBzY3JpcHQuZGVmZXIgPSB0cnVlXG4gICAgICAgICAgICBzY3JpcHQuc3JjID0gdXJsXG4gICAgICAgICAgICBjb25zdCBzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3NjcmlwdCcpWzBdXG4gICAgICAgICAgICBzLnBhcmVudE5vZGU/Lmluc2VydEJlZm9yZShzY3JpcHQsIHMpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBfZXhlY3V0ZV9hcnJheSgpIGRlYWxzIHdpdGggcHJvY2Vzc2luZyBhbnkgcG9zdGhvZyBmdW5jdGlvblxuICAgICAqIGNhbGxzIHRoYXQgd2VyZSBjYWxsZWQgYmVmb3JlIHRoZSBQb3N0SG9nIGxpYnJhcnkgd2VyZSBsb2FkZWRcbiAgICAgKiAoYW5kIGFyZSB0aHVzIHN0b3JlZCBpbiBhbiBhcnJheSBzbyB0aGV5IGNhbiBiZSBjYWxsZWQgbGF0ZXIpXG4gICAgICpcbiAgICAgKiBOb3RlOiB3ZSBmaXJlIG9mZiBhbGwgdGhlIHBvc3Rob2cgZnVuY3Rpb24gY2FsbHMgJiYgdXNlciBkZWZpbmVkXG4gICAgICogZnVuY3Rpb25zIEJFRk9SRSB3ZSBmaXJlIG9mZiBwb3N0aG9nIGNhcHR1cmluZyBjYWxscy4gVGhpcyBpcyBzb1xuICAgICAqIGlkZW50aWZ5L3JlZ2lzdGVyL3NldF9jb25maWcgY2FsbHMgY2FuIHByb3Blcmx5IG1vZGlmeSBlYXJseVxuICAgICAqIGNhcHR1cmluZyBjYWxscy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5XG4gICAgICovXG4gICAgX2V4ZWN1dGVfYXJyYXkoYXJyYXk6IFNuaXBwZXRBcnJheUl0ZW1bXSk6IHZvaWQge1xuICAgICAgICBsZXQgZm5fbmFtZVxuICAgICAgICBjb25zdCBhbGlhc19jYWxsczogU25pcHBldEFycmF5SXRlbVtdID0gW11cbiAgICAgICAgY29uc3Qgb3RoZXJfY2FsbHM6IFNuaXBwZXRBcnJheUl0ZW1bXSA9IFtdXG4gICAgICAgIGNvbnN0IGNhcHR1cmluZ19jYWxsczogU25pcHBldEFycmF5SXRlbVtdID0gW11cbiAgICAgICAgX2VhY2hBcnJheShhcnJheSwgKGl0ZW0pID0+IHtcbiAgICAgICAgICAgIGlmIChpdGVtKSB7XG4gICAgICAgICAgICAgICAgZm5fbmFtZSA9IGl0ZW1bMF1cbiAgICAgICAgICAgICAgICBpZiAoX2lzQXJyYXkoZm5fbmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FwdHVyaW5nX2NhbGxzLnB1c2goaXRlbSkgLy8gY2hhaW5lZCBjYWxsIGUuZy4gcG9zdGhvZy5nZXRfZ3JvdXAoKS5zZXQoKVxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoX2lzRnVuY3Rpb24oaXRlbSkpIHtcbiAgICAgICAgICAgICAgICAgICAgOyhpdGVtIGFzIGFueSkuY2FsbCh0aGlzKVxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoX2lzQXJyYXkoaXRlbSkgJiYgZm5fbmFtZSA9PT0gJ2FsaWFzJykge1xuICAgICAgICAgICAgICAgICAgICBhbGlhc19jYWxscy5wdXNoKGl0ZW0pXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChfaXNBcnJheShpdGVtKSAmJiBmbl9uYW1lLmluZGV4T2YoJ2NhcHR1cmUnKSAhPT0gLTEgJiYgX2lzRnVuY3Rpb24oKHRoaXMgYXMgYW55KVtmbl9uYW1lXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FwdHVyaW5nX2NhbGxzLnB1c2goaXRlbSlcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBvdGhlcl9jYWxscy5wdXNoKGl0ZW0pXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuXG4gICAgICAgIGNvbnN0IGV4ZWN1dGUgPSBmdW5jdGlvbiAoY2FsbHM6IFNuaXBwZXRBcnJheUl0ZW1bXSwgdGhpc0FyZzogYW55KSB7XG4gICAgICAgICAgICBfZWFjaEFycmF5KFxuICAgICAgICAgICAgICAgIGNhbGxzLFxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChfaXNBcnJheShpdGVtWzBdKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2hhaW5lZCBjYWxsXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgY2FsbGVyID0gdGhpc0FyZ1xuICAgICAgICAgICAgICAgICAgICAgICAgX2VhY2goaXRlbSwgZnVuY3Rpb24gKGNhbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsZXIgPSBjYWxsZXJbY2FsbFswXV0uYXBwbHkoY2FsbGVyLCBjYWxsLnNsaWNlKDEpKVxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvYmFuLXRzLWNvbW1lbnRcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNbaXRlbVswXV0uYXBwbHkodGhpcywgaXRlbS5zbGljZSgxKSlcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgdGhpc0FyZ1xuICAgICAgICAgICAgKVxuICAgICAgICB9XG5cbiAgICAgICAgZXhlY3V0ZShhbGlhc19jYWxscywgdGhpcylcbiAgICAgICAgZXhlY3V0ZShvdGhlcl9jYWxscywgdGhpcylcbiAgICAgICAgZXhlY3V0ZShjYXB0dXJpbmdfY2FsbHMsIHRoaXMpXG4gICAgfVxuXG4gICAgX2hhc0Jvb3RzdHJhcHBlZEZlYXR1cmVGbGFncygpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICh0aGlzLmNvbmZpZy5ib290c3RyYXA/LmZlYXR1cmVGbGFncyAmJiBPYmplY3Qua2V5cyh0aGlzLmNvbmZpZy5ib290c3RyYXA/LmZlYXR1cmVGbGFncykubGVuZ3RoID4gMCkgfHxcbiAgICAgICAgICAgIGZhbHNlXG4gICAgICAgIClcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBwdXNoKCkga2VlcHMgdGhlIHN0YW5kYXJkIGFzeW5jLWFycmF5LXB1c2hcbiAgICAgKiBiZWhhdmlvciBhcm91bmQgYWZ0ZXIgdGhlIGxpYiBpcyBsb2FkZWQuXG4gICAgICogVGhpcyBpcyBvbmx5IHVzZWZ1bCBmb3IgZXh0ZXJuYWwgaW50ZWdyYXRpb25zIHRoYXRcbiAgICAgKiBkbyBub3Qgd2lzaCB0byByZWx5IG9uIG91ciBjb252ZW5pZW5jZSBtZXRob2RzXG4gICAgICogKGNyZWF0ZWQgaW4gdGhlIHNuaXBwZXQpLlxuICAgICAqXG4gICAgICogIyMjIFVzYWdlOlxuICAgICAqICAgICBwb3N0aG9nLnB1c2goWydyZWdpc3RlcicsIHsgYTogJ2InIH1dKTtcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGl0ZW0gQSBbZnVuY3Rpb25fbmFtZSwgYXJncy4uLl0gYXJyYXkgdG8gYmUgZXhlY3V0ZWRcbiAgICAgKi9cbiAgICBwdXNoKGl0ZW06IFNuaXBwZXRBcnJheUl0ZW0pOiB2b2lkIHtcbiAgICAgICAgdGhpcy5fZXhlY3V0ZV9hcnJheShbaXRlbV0pXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2FwdHVyZSBhbiBldmVudC4gVGhpcyBpcyB0aGUgbW9zdCBpbXBvcnRhbnQgYW5kXG4gICAgICogZnJlcXVlbnRseSB1c2VkIFBvc3RIb2cgZnVuY3Rpb24uXG4gICAgICpcbiAgICAgKiAjIyMgVXNhZ2U6XG4gICAgICpcbiAgICAgKiAgICAgLy8gY2FwdHVyZSBhbiBldmVudCBuYW1lZCAnUmVnaXN0ZXJlZCdcbiAgICAgKiAgICAgcG9zdGhvZy5jYXB0dXJlKCdSZWdpc3RlcmVkJywgeydHZW5kZXInOiAnTWFsZScsICdBZ2UnOiAyMX0pO1xuICAgICAqXG4gICAgICogICAgIC8vIGNhcHR1cmUgYW4gZXZlbnQgdXNpbmcgbmF2aWdhdG9yLnNlbmRCZWFjb25cbiAgICAgKiAgICAgcG9zdGhvZy5jYXB0dXJlKCdMZWZ0IHBhZ2UnLCB7J2R1cmF0aW9uX3NlY29uZHMnOiAzNX0sIHt0cmFuc3BvcnQ6ICdzZW5kQmVhY29uJ30pO1xuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50X25hbWUgVGhlIG5hbWUgb2YgdGhlIGV2ZW50LiBUaGlzIGNhbiBiZSBhbnl0aGluZyB0aGUgdXNlciBkb2VzIC0gJ0J1dHRvbiBDbGljaycsICdTaWduIFVwJywgJ0l0ZW0gUHVyY2hhc2VkJywgZXRjLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbcHJvcGVydGllc10gQSBzZXQgb2YgcHJvcGVydGllcyB0byBpbmNsdWRlIHdpdGggdGhlIGV2ZW50IHlvdSdyZSBzZW5kaW5nLiBUaGVzZSBkZXNjcmliZSB0aGUgdXNlciB3aG8gZGlkIHRoZSBldmVudCBvciBkZXRhaWxzIGFib3V0IHRoZSBldmVudCBpdHNlbGYuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSBPcHRpb25hbCBjb25maWd1cmF0aW9uIGZvciB0aGlzIGNhcHR1cmUgcmVxdWVzdC5cbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gW29wdGlvbnMudHJhbnNwb3J0XSBUcmFuc3BvcnQgbWV0aG9kIGZvciBuZXR3b3JrIHJlcXVlc3QgKCdYSFInIG9yICdzZW5kQmVhY29uJykuXG4gICAgICogQHBhcmFtIHtEYXRlfSBbb3B0aW9ucy50aW1lc3RhbXBdIFRpbWVzdGFtcCBpcyBhIERhdGUgb2JqZWN0LiBJZiBub3Qgc2V0LCBpdCdsbCBhdXRvbWF0aWNhbGx5IGJlIHNldCB0byB0aGUgY3VycmVudCB0aW1lLlxuICAgICAqL1xuICAgIGNhcHR1cmUoXG4gICAgICAgIGV2ZW50X25hbWU6IHN0cmluZyxcbiAgICAgICAgcHJvcGVydGllcz86IFByb3BlcnRpZXMgfCBudWxsLFxuICAgICAgICBvcHRpb25zOiBDYXB0dXJlT3B0aW9ucyA9IF9fTk9PUFRJT05TXG4gICAgKTogQ2FwdHVyZVJlc3VsdCB8IHZvaWQge1xuICAgICAgICAvLyBXaGlsZSBkZXZlbG9waW5nLCBhIGRldmVsb3BlciBtaWdodCBwdXJwb3NlZnVsbHkgX25vdF8gY2FsbCBpbml0KCksXG4gICAgICAgIC8vIGluIHRoaXMgY2FzZSwgd2Ugd291bGQgbGlrZSBjYXB0dXJlIHRvIGJlIGEgbm9vcC5cbiAgICAgICAgaWYgKCF0aGlzLl9fbG9hZGVkIHx8ICF0aGlzLnNlc3Npb25QZXJzaXN0ZW5jZSB8fCAhdGhpcy5fcmVxdWVzdFF1ZXVlKSB7XG4gICAgICAgICAgICByZXR1cm4gbG9nZ2VyLnVuaW5pdGlhbGl6ZWRXYXJuaW5nKCdwb3N0aG9nLmNhcHR1cmUnKVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHVzZXJPcHRlZE91dCh0aGlzKSkge1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cblxuICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCBfX05PT1BUSU9OU1xuICAgICAgICBjb25zdCB0cmFuc3BvcnQgPSBvcHRpb25zWyd0cmFuc3BvcnQnXSAvLyBleHRlcm5hbCBBUEksIGRvbid0IG1pbmlmeSAndHJhbnNwb3J0JyBwcm9wXG4gICAgICAgIGlmICh0cmFuc3BvcnQpIHtcbiAgICAgICAgICAgIG9wdGlvbnMudHJhbnNwb3J0ID0gdHJhbnNwb3J0IC8vICd0cmFuc3BvcnQnIHByb3AgbmFtZSBjYW4gYmUgbWluaWZpZWQgaW50ZXJuYWxseVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gdHlwaW5nIGRvZXNuJ3QgcHJldmVudCBpbnRlcmVzdGluZyBkYXRhXG4gICAgICAgIGlmIChfaXNVbmRlZmluZWQoZXZlbnRfbmFtZSkgfHwgIV9pc1N0cmluZyhldmVudF9uYW1lKSkge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdObyBldmVudCBuYW1lIHByb3ZpZGVkIHRvIHBvc3Rob2cuY2FwdHVyZScpXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIHVzZXJBZ2VudCAmJlxuICAgICAgICAgICAgIXRoaXMuY29uZmlnLm9wdF9vdXRfdXNlcmFnZW50X2ZpbHRlciAmJlxuICAgICAgICAgICAgX2lzQmxvY2tlZFVBKHVzZXJBZ2VudCwgdGhpcy5jb25maWcuY3VzdG9tX2Jsb2NrZWRfdXNlcmFnZW50cylcbiAgICAgICAgKSB7XG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHVwZGF0ZSBwZXJzaXN0ZW5jZVxuICAgICAgICB0aGlzLnNlc3Npb25QZXJzaXN0ZW5jZS51cGRhdGVfc2VhcmNoX2tleXdvcmQoKVxuXG4gICAgICAgIGlmICh0aGlzLmNvbmZpZy5zdG9yZV9nb29nbGUpIHtcbiAgICAgICAgICAgIHRoaXMuc2Vzc2lvblBlcnNpc3RlbmNlLnVwZGF0ZV9jYW1wYWlnbl9wYXJhbXMoKVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmNvbmZpZy5zYXZlX3JlZmVycmVyKSB7XG4gICAgICAgICAgICB0aGlzLnNlc3Npb25QZXJzaXN0ZW5jZS51cGRhdGVfcmVmZXJyZXJfaW5mbygpXG4gICAgICAgIH1cblxuICAgICAgICBsZXQgZGF0YTogQ2FwdHVyZVJlc3VsdCA9IHtcbiAgICAgICAgICAgIHV1aWQ6IHV1aWR2NygpLFxuICAgICAgICAgICAgZXZlbnQ6IGV2ZW50X25hbWUsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiB0aGlzLl9jYWxjdWxhdGVfZXZlbnRfcHJvcGVydGllcyhldmVudF9uYW1lLCBwcm9wZXJ0aWVzIHx8IHt9KSxcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChldmVudF9uYW1lID09PSAnJGlkZW50aWZ5Jykge1xuICAgICAgICAgICAgZGF0YVsnJHNldCddID0gb3B0aW9uc1snJHNldCddXG4gICAgICAgICAgICBkYXRhWyckc2V0X29uY2UnXSA9IG9wdGlvbnNbJyRzZXRfb25jZSddXG4gICAgICAgIH1cblxuICAgICAgICBkYXRhID0gX2NvcHlBbmRUcnVuY2F0ZVN0cmluZ3MoZGF0YSwgb3B0aW9ucy5fbm9UcnVuY2F0ZSA/IG51bGwgOiB0aGlzLmNvbmZpZy5wcm9wZXJ0aWVzX3N0cmluZ19tYXhfbGVuZ3RoKVxuICAgICAgICBkYXRhLnRpbWVzdGFtcCA9IG9wdGlvbnMudGltZXN0YW1wIHx8IG5ldyBEYXRlKClcbiAgICAgICAgaWYgKCFfaXNVbmRlZmluZWQob3B0aW9ucy50aW1lc3RhbXApKSB7XG4gICAgICAgICAgICBkYXRhLnByb3BlcnRpZXNbJyRldmVudF90aW1lX292ZXJyaWRlX3Byb3ZpZGVkJ10gPSB0cnVlXG4gICAgICAgICAgICBkYXRhLnByb3BlcnRpZXNbJyRldmVudF90aW1lX292ZXJyaWRlX3N5c3RlbV90aW1lJ10gPSBuZXcgRGF0ZSgpXG4gICAgICAgIH1cblxuICAgICAgICAvLyBUb3AtbGV2ZWwgJHNldCBvdmVycmlkaW5nIHZhbHVlcyBmcm9tIHRoZSBvbmUgZnJvbSBwcm9wZXJ0aWVzIGlzIHRha2VuIGZyb20gdGhlIHBsdWdpbi1zZXJ2ZXIgbm9ybWFsaXplRXZlbnRcbiAgICAgICAgLy8gVGhpcyBkb2Vzbid0IGhhbmRsZSAkc2V0X29uY2UsIGJlY2F1c2UgcG9zdGhvZy1wZW9wbGUgZG9lc24ndCBlaXRoZXJcbiAgICAgICAgY29uc3QgZmluYWxTZXQgPSB7IC4uLmRhdGEucHJvcGVydGllc1snJHNldCddLCAuLi5kYXRhWyckc2V0J10gfVxuICAgICAgICBpZiAoIV9pc0VtcHR5T2JqZWN0KGZpbmFsU2V0KSkge1xuICAgICAgICAgICAgdGhpcy5zZXRQZXJzb25Qcm9wZXJ0aWVzRm9yRmxhZ3MoZmluYWxTZXQpXG4gICAgICAgIH1cblxuICAgICAgICBsb2dnZXIuaW5mbygnc2VuZCcsIGRhdGEpXG4gICAgICAgIGNvbnN0IGpzb25EYXRhID0gSlNPTi5zdHJpbmdpZnkoZGF0YSlcblxuICAgICAgICBjb25zdCB1cmwgPSBvcHRpb25zLl91cmwgPz8gdGhpcy5yZXF1ZXN0Um91dGVyLmVuZHBvaW50Rm9yKCdhcGknLCB0aGlzLmFuYWx5dGljc0RlZmF1bHRFbmRwb2ludClcblxuICAgICAgICBjb25zdCBoYXNfdW5pcXVlX3RyYWl0cyA9IG9wdGlvbnMgIT09IF9fTk9PUFRJT05TXG5cbiAgICAgICAgaWYgKHRoaXMuY29uZmlnLnJlcXVlc3RfYmF0Y2hpbmcgJiYgKCFoYXNfdW5pcXVlX3RyYWl0cyB8fCBvcHRpb25zLl9iYXRjaEtleSkgJiYgIW9wdGlvbnMuc2VuZF9pbnN0YW50bHkpIHtcbiAgICAgICAgICAgIHRoaXMuX3JlcXVlc3RRdWV1ZS5lbnF1ZXVlKHVybCwgZGF0YSwgb3B0aW9ucylcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX19jb21wcmVzc19hbmRfc2VuZF9qc29uX3JlcXVlc3QodXJsLCBqc29uRGF0YSwgb3B0aW9ucylcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX2ludm9rZUNhcHR1cmVIb29rcyhldmVudF9uYW1lLCBkYXRhKVxuXG4gICAgICAgIHJldHVybiBkYXRhXG4gICAgfVxuXG4gICAgX2FkZENhcHR1cmVIb29rKGNhbGxiYWNrOiAoZXZlbnROYW1lOiBzdHJpbmcpID0+IHZvaWQpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5fX2NhcHR1cmVIb29rcy5wdXNoKGNhbGxiYWNrKVxuICAgIH1cblxuICAgIF9pbnZva2VDYXB0dXJlSG9va3MoZXZlbnROYW1lOiBzdHJpbmcsIGV2ZW50RGF0YTogQ2FwdHVyZVJlc3VsdCk6IHZvaWQge1xuICAgICAgICB0aGlzLmNvbmZpZy5fb25DYXB0dXJlKGV2ZW50TmFtZSwgZXZlbnREYXRhKVxuICAgICAgICBfZWFjaCh0aGlzLl9fY2FwdHVyZUhvb2tzLCAoY2FsbGJhY2spID0+IGNhbGxiYWNrKGV2ZW50TmFtZSkpXG4gICAgfVxuXG4gICAgX2NhbGN1bGF0ZV9ldmVudF9wcm9wZXJ0aWVzKGV2ZW50X25hbWU6IHN0cmluZywgZXZlbnRfcHJvcGVydGllczogUHJvcGVydGllcyk6IFByb3BlcnRpZXMge1xuICAgICAgICBpZiAoIXRoaXMucGVyc2lzdGVuY2UgfHwgIXRoaXMuc2Vzc2lvblBlcnNpc3RlbmNlKSB7XG4gICAgICAgICAgICByZXR1cm4gZXZlbnRfcHJvcGVydGllc1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gc2V0IGRlZmF1bHRzXG4gICAgICAgIGNvbnN0IHN0YXJ0X3RpbWVzdGFtcCA9IHRoaXMucGVyc2lzdGVuY2UucmVtb3ZlX2V2ZW50X3RpbWVyKGV2ZW50X25hbWUpXG4gICAgICAgIGxldCBwcm9wZXJ0aWVzID0geyAuLi5ldmVudF9wcm9wZXJ0aWVzIH1cbiAgICAgICAgcHJvcGVydGllc1sndG9rZW4nXSA9IHRoaXMuY29uZmlnLnRva2VuXG5cbiAgICAgICAgaWYgKGV2ZW50X25hbWUgPT09ICckc25hcHNob3QnKSB7XG4gICAgICAgICAgICBjb25zdCBwZXJzaXN0ZW5jZVByb3BzID0geyAuLi50aGlzLnBlcnNpc3RlbmNlLnByb3BlcnRpZXMoKSwgLi4udGhpcy5zZXNzaW9uUGVyc2lzdGVuY2UucHJvcGVydGllcygpIH1cbiAgICAgICAgICAgIHByb3BlcnRpZXNbJ2Rpc3RpbmN0X2lkJ10gPSBwZXJzaXN0ZW5jZVByb3BzLmRpc3RpbmN0X2lkXG4gICAgICAgICAgICByZXR1cm4gcHJvcGVydGllc1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgaW5mb1Byb3BlcnRpZXMgPSBfaW5mby5wcm9wZXJ0aWVzKClcblxuICAgICAgICBpZiAodGhpcy5zZXNzaW9uTWFuYWdlcikge1xuICAgICAgICAgICAgY29uc3QgeyBzZXNzaW9uSWQsIHdpbmRvd0lkIH0gPSB0aGlzLnNlc3Npb25NYW5hZ2VyLmNoZWNrQW5kR2V0U2Vzc2lvbkFuZFdpbmRvd0lkKClcbiAgICAgICAgICAgIHByb3BlcnRpZXNbJyRzZXNzaW9uX2lkJ10gPSBzZXNzaW9uSWRcbiAgICAgICAgICAgIHByb3BlcnRpZXNbJyR3aW5kb3dfaWQnXSA9IHdpbmRvd0lkXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICB0aGlzLnNlc3Npb25Qcm9wc01hbmFnZXIgJiZcbiAgICAgICAgICAgIHRoaXMuY29uZmlnLl9fcHJldmlld19zZW5kX2NsaWVudF9zZXNzaW9uX3BhcmFtcyAmJlxuICAgICAgICAgICAgKGV2ZW50X25hbWUgPT09ICckcGFnZXZpZXcnIHx8IGV2ZW50X25hbWUgPT09ICckcGFnZWxlYXZlJyB8fCBldmVudF9uYW1lID09PSAnJGF1dG9jYXB0dXJlJylcbiAgICAgICAgKSB7XG4gICAgICAgICAgICBjb25zdCBzZXNzaW9uUHJvcHMgPSB0aGlzLnNlc3Npb25Qcm9wc01hbmFnZXIuZ2V0U2Vzc2lvblByb3BzKClcbiAgICAgICAgICAgIHByb3BlcnRpZXMgPSBfZXh0ZW5kKHByb3BlcnRpZXMsIHNlc3Npb25Qcm9wcylcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdGhpcy5jb25maWcuZGlzYWJsZV9zY3JvbGxfcHJvcGVydGllcykge1xuICAgICAgICAgICAgbGV0IHBlcmZvcm1hbmNlUHJvcGVydGllczogUmVjb3JkPHN0cmluZywgYW55PiA9IHt9XG4gICAgICAgICAgICBpZiAoZXZlbnRfbmFtZSA9PT0gJyRwYWdldmlldycpIHtcbiAgICAgICAgICAgICAgICBwZXJmb3JtYW5jZVByb3BlcnRpZXMgPSB0aGlzLnBhZ2VWaWV3TWFuYWdlci5kb1BhZ2VWaWV3KClcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnRfbmFtZSA9PT0gJyRwYWdlbGVhdmUnKSB7XG4gICAgICAgICAgICAgICAgcGVyZm9ybWFuY2VQcm9wZXJ0aWVzID0gdGhpcy5wYWdlVmlld01hbmFnZXIuZG9QYWdlTGVhdmUoKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcHJvcGVydGllcyA9IF9leHRlbmQocHJvcGVydGllcywgcGVyZm9ybWFuY2VQcm9wZXJ0aWVzKVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGV2ZW50X25hbWUgPT09ICckcGFnZXZpZXcnICYmIGRvY3VtZW50KSB7XG4gICAgICAgICAgICBwcm9wZXJ0aWVzWyd0aXRsZSddID0gZG9jdW1lbnQudGl0bGVcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChldmVudF9uYW1lID09PSAnJHBlcmZvcm1hbmNlX2V2ZW50Jykge1xuICAgICAgICAgICAgY29uc3QgcGVyc2lzdGVuY2VQcm9wcyA9IHRoaXMucGVyc2lzdGVuY2UucHJvcGVydGllcygpXG4gICAgICAgICAgICAvLyBFYXJseSBleGl0IGZvciAkcGVyZm9ybWFuY2VfZXZlbnQgYXMgd2Ugb25seSBuZWVkIHNlc3Npb24gYW5kICRjdXJyZW50X3VybFxuICAgICAgICAgICAgcHJvcGVydGllc1snZGlzdGluY3RfaWQnXSA9IHBlcnNpc3RlbmNlUHJvcHMuZGlzdGluY3RfaWRcbiAgICAgICAgICAgIHByb3BlcnRpZXNbJyRjdXJyZW50X3VybCddID0gaW5mb1Byb3BlcnRpZXMuJGN1cnJlbnRfdXJsXG4gICAgICAgICAgICByZXR1cm4gcHJvcGVydGllc1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gc2V0ICRkdXJhdGlvbiBpZiB0aW1lX2V2ZW50IHdhcyBwcmV2aW91c2x5IGNhbGxlZCBmb3IgdGhpcyBldmVudFxuICAgICAgICBpZiAoIV9pc1VuZGVmaW5lZChzdGFydF90aW1lc3RhbXApKSB7XG4gICAgICAgICAgICBjb25zdCBkdXJhdGlvbl9pbl9tcyA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gc3RhcnRfdGltZXN0YW1wXG4gICAgICAgICAgICBwcm9wZXJ0aWVzWyckZHVyYXRpb24nXSA9IHBhcnNlRmxvYXQoKGR1cmF0aW9uX2luX21zIC8gMTAwMCkudG9GaXhlZCgzKSlcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHRoaXMgaXMgb25seSBhZGRlZCB3aGVuIHRoaXMuY29uZmlnLm9wdF9vdXRfdXNlcmFnZW50X2ZpbHRlciBpcyB0cnVlLFxuICAgICAgICAvLyBvciBpdCB3b3VsZCBhbHdheXMgYWRkIFwiYnJvd3NlclwiXG4gICAgICAgIGlmICh1c2VyQWdlbnQgJiYgdGhpcy5jb25maWcub3B0X291dF91c2VyYWdlbnRfZmlsdGVyKSB7XG4gICAgICAgICAgICBwcm9wZXJ0aWVzWyckYnJvd3Nlcl90eXBlJ10gPSBfaXNCbG9ja2VkVUEodXNlckFnZW50LCB0aGlzLmNvbmZpZy5jdXN0b21fYmxvY2tlZF91c2VyYWdlbnRzKVxuICAgICAgICAgICAgICAgID8gJ2JvdCdcbiAgICAgICAgICAgICAgICA6ICdicm93c2VyJ1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gbm90ZTogZXh0ZW5kIHdyaXRlcyB0byB0aGUgZmlyc3Qgb2JqZWN0LCBzbyBsZXRzIG1ha2Ugc3VyZSB3ZVxuICAgICAgICAvLyBkb24ndCB3cml0ZSB0byB0aGUgcGVyc2lzdGVuY2UgcHJvcGVydGllcyBvYmplY3QgYW5kIGluZm9cbiAgICAgICAgLy8gcHJvcGVydGllcyBvYmplY3QgYnkgcGFzc2luZyBpbiBhIG5ldyBvYmplY3RcblxuICAgICAgICAvLyB1cGRhdGUgcHJvcGVydGllcyB3aXRoIHBhZ2V2aWV3IGluZm8gYW5kIHN1cGVyLXByb3BlcnRpZXNcbiAgICAgICAgcHJvcGVydGllcyA9IF9leHRlbmQoXG4gICAgICAgICAgICB7fSxcbiAgICAgICAgICAgIF9pbmZvLnByb3BlcnRpZXMoKSxcbiAgICAgICAgICAgIHRoaXMucGVyc2lzdGVuY2UucHJvcGVydGllcygpLFxuICAgICAgICAgICAgdGhpcy5zZXNzaW9uUGVyc2lzdGVuY2UucHJvcGVydGllcygpLFxuICAgICAgICAgICAgcHJvcGVydGllc1xuICAgICAgICApXG5cbiAgICAgICAgaWYgKF9pc0FycmF5KHRoaXMuY29uZmlnLnByb3BlcnR5X2RlbnlsaXN0KSAmJiBfaXNBcnJheSh0aGlzLmNvbmZpZy5wcm9wZXJ0eV9ibGFja2xpc3QpKSB7XG4gICAgICAgICAgICAvLyBzaW5jZSBwcm9wZXJ0eV9ibGFja2xpc3QgaXMgZGVwcmVjYXRlZCBpbiBmYXZvciBvZiBwcm9wZXJ0eV9kZW55bGlzdCwgd2UgbWVyZ2UgYm90aCBvZiB0aGVtIGhlcmVcbiAgICAgICAgICAgIC8vIFRPRE86IG1lcmdlIHRoaXMgb25seSBvbmNlLCByZXF1aXJlcyByZWZhY3RvcmluZyB0ZXN0c1xuICAgICAgICAgICAgY29uc3QgcHJvcGVydHlfZGVueWxpc3QgPSBbLi4udGhpcy5jb25maWcucHJvcGVydHlfYmxhY2tsaXN0LCAuLi50aGlzLmNvbmZpZy5wcm9wZXJ0eV9kZW55bGlzdF1cbiAgICAgICAgICAgIF9lYWNoKHByb3BlcnR5X2RlbnlsaXN0LCBmdW5jdGlvbiAoZGVueWxpc3RlZF9wcm9wKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHByb3BlcnRpZXNbZGVueWxpc3RlZF9wcm9wXVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcihcbiAgICAgICAgICAgICAgICAnSW52YWxpZCB2YWx1ZSBmb3IgcHJvcGVydHlfZGVueWxpc3QgY29uZmlnOiAnICtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25maWcucHJvcGVydHlfZGVueWxpc3QgK1xuICAgICAgICAgICAgICAgICAgICAnIG9yIHByb3BlcnR5X2JsYWNrbGlzdCBjb25maWc6ICcgK1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5wcm9wZXJ0eV9ibGFja2xpc3RcbiAgICAgICAgICAgIClcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHNhbml0aXplX3Byb3BlcnRpZXMgPSB0aGlzLmNvbmZpZy5zYW5pdGl6ZV9wcm9wZXJ0aWVzXG4gICAgICAgIGlmIChzYW5pdGl6ZV9wcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICBwcm9wZXJ0aWVzID0gc2FuaXRpemVfcHJvcGVydGllcyhwcm9wZXJ0aWVzLCBldmVudF9uYW1lKVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHByb3BlcnRpZXNcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZWdpc3RlciBhIHNldCBvZiBzdXBlciBwcm9wZXJ0aWVzLCB3aGljaCBhcmUgaW5jbHVkZWQgd2l0aCBhbGxcbiAgICAgKiBldmVudHMuIFRoaXMgd2lsbCBvdmVyd3JpdGUgcHJldmlvdXMgc3VwZXIgcHJvcGVydHkgdmFsdWVzLCBleGNlcHRcbiAgICAgKiBmb3Igc2Vzc2lvbiBwcm9wZXJ0aWVzIChzZWUgYHJlZ2lzdGVyX2Zvcl9zZXNzaW9uKHByb3BlcnRpZXMpYCkuXG4gICAgICpcbiAgICAgKiAjIyMgVXNhZ2U6XG4gICAgICpcbiAgICAgKiAgICAgLy8gcmVnaXN0ZXIgJ0dlbmRlcicgYXMgYSBzdXBlciBwcm9wZXJ0eVxuICAgICAqICAgICBwb3N0aG9nLnJlZ2lzdGVyKHsnR2VuZGVyJzogJ0ZlbWFsZSd9KTtcbiAgICAgKlxuICAgICAqICAgICAvLyByZWdpc3RlciBzZXZlcmFsIHN1cGVyIHByb3BlcnRpZXMgd2hlbiBhIHVzZXIgc2lnbnMgdXBcbiAgICAgKiAgICAgcG9zdGhvZy5yZWdpc3Rlcih7XG4gICAgICogICAgICAgICAnRW1haWwnOiAnamRvZUBleGFtcGxlLmNvbScsXG4gICAgICogICAgICAgICAnQWNjb3VudCBUeXBlJzogJ0ZyZWUnXG4gICAgICogICAgIH0pO1xuICAgICAqXG4gICAgICogICAgIC8vIERpc3BsYXkgdGhlIHByb3BlcnRpZXNcbiAgICAgKiAgICAgY29uc29sZS5sb2cocG9zdGhvZy5wZXJzaXN0ZW5jZS5wcm9wZXJ0aWVzKCkpXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcHJvcGVydGllcyBBbiBhc3NvY2lhdGl2ZSBhcnJheSBvZiBwcm9wZXJ0aWVzIHRvIHN0b3JlIGFib3V0IHRoZSB1c2VyXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IFtkYXlzXSBIb3cgbWFueSBkYXlzIHNpbmNlIHRoZSB1c2VyJ3MgbGFzdCB2aXNpdCB0byBzdG9yZSB0aGUgc3VwZXIgcHJvcGVydGllc1xuICAgICAqL1xuICAgIHJlZ2lzdGVyKHByb3BlcnRpZXM6IFByb3BlcnRpZXMsIGRheXM/OiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5wZXJzaXN0ZW5jZT8ucmVnaXN0ZXIocHJvcGVydGllcywgZGF5cylcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZWdpc3RlciBhIHNldCBvZiBzdXBlciBwcm9wZXJ0aWVzIG9ubHkgb25jZS4gVGhlc2Ugd2lsbCBub3RcbiAgICAgKiBvdmVyd3JpdGUgcHJldmlvdXMgc3VwZXIgcHJvcGVydHkgdmFsdWVzLCB1bmxpa2UgcmVnaXN0ZXIoKS5cbiAgICAgKlxuICAgICAqICMjIyBVc2FnZTpcbiAgICAgKlxuICAgICAqICAgICAvLyByZWdpc3RlciBhIHN1cGVyIHByb3BlcnR5IGZvciB0aGUgZmlyc3QgdGltZSBvbmx5XG4gICAgICogICAgIHBvc3Rob2cucmVnaXN0ZXJfb25jZSh7XG4gICAgICogICAgICAgICAnRmlyc3QgTG9naW4gRGF0ZSc6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAqICAgICB9KTtcbiAgICAgKlxuICAgICAqICAgICAvLyBEaXNwbGF5IHRoZSBwcm9wZXJ0aWVzXG4gICAgICogICAgIGNvbnNvbGUubG9nKHBvc3Rob2cucGVyc2lzdGVuY2UucHJvcGVydGllcygpKVxuICAgICAqXG4gICAgICogIyMjIE5vdGVzOlxuICAgICAqXG4gICAgICogSWYgZGVmYXVsdF92YWx1ZSBpcyBzcGVjaWZpZWQsIGN1cnJlbnQgc3VwZXIgcHJvcGVydGllc1xuICAgICAqIHdpdGggdGhhdCB2YWx1ZSB3aWxsIGJlIG92ZXJ3cml0dGVuLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHByb3BlcnRpZXMgQW4gYXNzb2NpYXRpdmUgYXJyYXkgb2YgcHJvcGVydGllcyB0byBzdG9yZSBhYm91dCB0aGUgdXNlclxuICAgICAqIEBwYXJhbSB7Kn0gW2RlZmF1bHRfdmFsdWVdIFZhbHVlIHRvIG92ZXJyaWRlIGlmIGFscmVhZHkgc2V0IGluIHN1cGVyIHByb3BlcnRpZXMgKGV4OiAnRmFsc2UnKSBEZWZhdWx0OiAnTm9uZSdcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gW2RheXNdIEhvdyBtYW55IGRheXMgc2luY2UgdGhlIHVzZXJzIGxhc3QgdmlzaXQgdG8gc3RvcmUgdGhlIHN1cGVyIHByb3BlcnRpZXNcbiAgICAgKi9cbiAgICByZWdpc3Rlcl9vbmNlKHByb3BlcnRpZXM6IFByb3BlcnRpZXMsIGRlZmF1bHRfdmFsdWU/OiBQcm9wZXJ0eSwgZGF5cz86IG51bWJlcik6IHZvaWQge1xuICAgICAgICB0aGlzLnBlcnNpc3RlbmNlPy5yZWdpc3Rlcl9vbmNlKHByb3BlcnRpZXMsIGRlZmF1bHRfdmFsdWUsIGRheXMpXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVnaXN0ZXIgYSBzZXQgb2Ygc3VwZXIgcHJvcGVydGllcywgd2hpY2ggYXJlIGluY2x1ZGVkIHdpdGggYWxsIGV2ZW50cywgYnV0IG9ubHlcbiAgICAgKiBmb3IgVEhJUyBTRVNTSU9OLiBUaGVzZSB3aWxsIG92ZXJ3cml0ZSBhbGwgb3RoZXIgc3VwZXIgcHJvcGVydHkgdmFsdWVzLlxuICAgICAqXG4gICAgICogVW5saWtlIHJlZ3VsYXIgc3VwZXIgcHJvcGVydGllcywgd2hpY2ggbGFzdCBpbiBMb2NhbFN0b3JhZ2UgZm9yIGEgbG9uZyB0aW1lLFxuICAgICAqIHNlc3Npb24gc3VwZXIgcHJvcGVydGllcyBnZXQgY2xlYXJlZCBhZnRlciBhIHNlc3Npb24gZW5kcy5cbiAgICAgKlxuICAgICAqICMjIyBVc2FnZTpcbiAgICAgKlxuICAgICAqICAgICAvLyByZWdpc3RlciBvbiBhbGwgZXZlbnRzIHRoaXMgc2Vzc2lvblxuICAgICAqICAgICBwb3N0aG9nLnJlZ2lzdGVyX2Zvcl9zZXNzaW9uKHsncmVmZXJlcic6IGN1c3RvbUdldFJlZmVyZXIoKX0pO1xuICAgICAqXG4gICAgICogICAgIC8vIHJlZ2lzdGVyIHNldmVyYWwgc2Vzc2lvbiBzdXBlciBwcm9wZXJ0aWVzIHdoZW4gYSB1c2VyIHNpZ25zIHVwXG4gICAgICogICAgIHBvc3Rob2cucmVnaXN0ZXJfZm9yX3Nlc3Npb24oe1xuICAgICAqICAgICAgICAgJ3NlbGVjdGVkUGxhbic6ICdwcm8nLFxuICAgICAqICAgICAgICAgJ2NvbXBsZXRlZFN0ZXBzJzogNCxcbiAgICAgKiAgICAgfSk7XG4gICAgICpcbiAgICAgKiAgICAgLy8gRGlzcGxheSB0aGUgcHJvcGVydGllc1xuICAgICAqICAgICBjb25zb2xlLmxvZyhwb3N0aG9nLnNlc3Npb25QZXJzaXN0ZW5jZS5wcm9wZXJ0aWVzKCkpXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcHJvcGVydGllcyBBbiBhc3NvY2lhdGl2ZSBhcnJheSBvZiBwcm9wZXJ0aWVzIHRvIHN0b3JlIGFib3V0IHRoZSB1c2VyXG4gICAgICovXG4gICAgcmVnaXN0ZXJfZm9yX3Nlc3Npb24ocHJvcGVydGllczogUHJvcGVydGllcyk6IHZvaWQge1xuICAgICAgICB0aGlzLnNlc3Npb25QZXJzaXN0ZW5jZT8ucmVnaXN0ZXIocHJvcGVydGllcylcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZWxldGUgYSBzdXBlciBwcm9wZXJ0eSBzdG9yZWQgd2l0aCB0aGUgY3VycmVudCB1c2VyLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHByb3BlcnR5IFRoZSBuYW1lIG9mIHRoZSBzdXBlciBwcm9wZXJ0eSB0byByZW1vdmVcbiAgICAgKi9cbiAgICB1bnJlZ2lzdGVyKHByb3BlcnR5OiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5wZXJzaXN0ZW5jZT8udW5yZWdpc3Rlcihwcm9wZXJ0eSlcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZWxldGUgYSBzZXNzaW9uIHN1cGVyIHByb3BlcnR5IHN0b3JlZCB3aXRoIHRoZSBjdXJyZW50IHVzZXIuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gcHJvcGVydHkgVGhlIG5hbWUgb2YgdGhlIHNlc3Npb24gc3VwZXIgcHJvcGVydHkgdG8gcmVtb3ZlXG4gICAgICovXG4gICAgdW5yZWdpc3Rlcl9mb3Jfc2Vzc2lvbihwcm9wZXJ0eTogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIHRoaXMuc2Vzc2lvblBlcnNpc3RlbmNlPy51bnJlZ2lzdGVyKHByb3BlcnR5KVxuICAgIH1cblxuICAgIF9yZWdpc3Rlcl9zaW5nbGUocHJvcDogc3RyaW5nLCB2YWx1ZTogUHJvcGVydHkpIHtcbiAgICAgICAgdGhpcy5yZWdpc3Rlcih7IFtwcm9wXTogdmFsdWUgfSlcbiAgICB9XG5cbiAgICAvKlxuICAgICAqIEdldCBmZWF0dXJlIGZsYWcgdmFsdWUgZm9yIHVzZXIgKHN1cHBvcnRzIG11bHRpdmFyaWF0ZSBmbGFncykuXG4gICAgICpcbiAgICAgKiAjIyMgVXNhZ2U6XG4gICAgICpcbiAgICAgKiAgICAgaWYocG9zdGhvZy5nZXRGZWF0dXJlRmxhZygnYmV0YS1mZWF0dXJlJykgPT09ICdzb21lLXZhbHVlJykgeyAvLyBkbyBzb21ldGhpbmcgfVxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R8U3RyaW5nfSBwcm9wIEtleSBvZiB0aGUgZmVhdHVyZSBmbGFnLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fFN0cmluZ30gb3B0aW9ucyAob3B0aW9uYWwpIElmIHtzZW5kX2V2ZW50OiBmYWxzZX0sIHdlIHdvbid0IHNlbmQgYW4gJGZlYXR1cmVfZmxhZ19jYWxsIGV2ZW50IHRvIFBvc3RIb2cuXG4gICAgICovXG4gICAgZ2V0RmVhdHVyZUZsYWcoa2V5OiBzdHJpbmcsIG9wdGlvbnM/OiB7IHNlbmRfZXZlbnQ/OiBib29sZWFuIH0pOiBib29sZWFuIHwgc3RyaW5nIHwgdW5kZWZpbmVkIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmVhdHVyZUZsYWdzLmdldEZlYXR1cmVGbGFnKGtleSwgb3B0aW9ucylcbiAgICB9XG5cbiAgICAvKlxuICAgICAqIEdldCBmZWF0dXJlIGZsYWcgcGF5bG9hZCB2YWx1ZSBtYXRjaGluZyBrZXkgZm9yIHVzZXIgKHN1cHBvcnRzIG11bHRpdmFyaWF0ZSBmbGFncykuXG4gICAgICpcbiAgICAgKiAjIyMgVXNhZ2U6XG4gICAgICpcbiAgICAgKiAgICAgaWYocG9zdGhvZy5nZXRGZWF0dXJlRmxhZygnYmV0YS1mZWF0dXJlJykgPT09ICdzb21lLXZhbHVlJykge1xuICAgICAqICAgICAgICAgIGNvbnN0IHNvbWVWYWx1ZSA9IHBvc3Rob2cuZ2V0RmVhdHVyZUZsYWdQYXlsb2FkKCdiZXRhLWZlYXR1cmUnKVxuICAgICAqICAgICAgICAgIC8vIGRvIHNvbWV0aGluZ1xuICAgICAqICAgICB9XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdHxTdHJpbmd9IHByb3AgS2V5IG9mIHRoZSBmZWF0dXJlIGZsYWcuXG4gICAgICovXG4gICAgZ2V0RmVhdHVyZUZsYWdQYXlsb2FkKGtleTogc3RyaW5nKTogSnNvblR5cGUge1xuICAgICAgICBjb25zdCBwYXlsb2FkID0gdGhpcy5mZWF0dXJlRmxhZ3MuZ2V0RmVhdHVyZUZsYWdQYXlsb2FkKGtleSlcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKHBheWxvYWQgYXMgYW55KVxuICAgICAgICB9IGNhdGNoIHtcbiAgICAgICAgICAgIHJldHVybiBwYXlsb2FkXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKlxuICAgICAqIFNlZSBpZiBmZWF0dXJlIGZsYWcgaXMgZW5hYmxlZCBmb3IgdXNlci5cbiAgICAgKlxuICAgICAqICMjIyBVc2FnZTpcbiAgICAgKlxuICAgICAqICAgICBpZihwb3N0aG9nLmlzRmVhdHVyZUVuYWJsZWQoJ2JldGEtZmVhdHVyZScpKSB7IC8vIGRvIHNvbWV0aGluZyB9XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdHxTdHJpbmd9IHByb3AgS2V5IG9mIHRoZSBmZWF0dXJlIGZsYWcuXG4gICAgICogQHBhcmFtIHtPYmplY3R8U3RyaW5nfSBvcHRpb25zIChvcHRpb25hbCkgSWYge3NlbmRfZXZlbnQ6IGZhbHNlfSwgd2Ugd29uJ3Qgc2VuZCBhbiAkZmVhdHVyZV9mbGFnX2NhbGwgZXZlbnQgdG8gUG9zdEhvZy5cbiAgICAgKi9cbiAgICBpc0ZlYXR1cmVFbmFibGVkKGtleTogc3RyaW5nLCBvcHRpb25zPzogaXNGZWF0dXJlRW5hYmxlZE9wdGlvbnMpOiBib29sZWFuIHwgdW5kZWZpbmVkIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmVhdHVyZUZsYWdzLmlzRmVhdHVyZUVuYWJsZWQoa2V5LCBvcHRpb25zKVxuICAgIH1cblxuICAgIHJlbG9hZEZlYXR1cmVGbGFncygpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5mZWF0dXJlRmxhZ3MucmVsb2FkRmVhdHVyZUZsYWdzKClcbiAgICB9XG5cbiAgICAvKiogT3B0IHRoZSB1c2VyIGluIG9yIG91dCBvZiBhbiBlYXJseSBhY2Nlc3MgZmVhdHVyZS4gKi9cbiAgICB1cGRhdGVFYXJseUFjY2Vzc0ZlYXR1cmVFbnJvbGxtZW50KGtleTogc3RyaW5nLCBpc0Vucm9sbGVkOiBib29sZWFuKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZmVhdHVyZUZsYWdzLnVwZGF0ZUVhcmx5QWNjZXNzRmVhdHVyZUVucm9sbG1lbnQoa2V5LCBpc0Vucm9sbGVkKVxuICAgIH1cblxuICAgIC8qKiBHZXQgdGhlIGxpc3Qgb2YgZWFybHkgYWNjZXNzIGZlYXR1cmVzLiBUbyBjaGVjayBlbnJvbGxtZW50IHN0YXR1cywgdXNlIGBpc0ZlYXR1cmVFbmFibGVkYC4gKi9cbiAgICBnZXRFYXJseUFjY2Vzc0ZlYXR1cmVzKGNhbGxiYWNrOiBFYXJseUFjY2Vzc0ZlYXR1cmVDYWxsYmFjaywgZm9yY2VfcmVsb2FkID0gZmFsc2UpOiB2b2lkIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmVhdHVyZUZsYWdzLmdldEVhcmx5QWNjZXNzRmVhdHVyZXMoY2FsbGJhY2ssIGZvcmNlX3JlbG9hZClcbiAgICB9XG5cbiAgICAvKlxuICAgICAqIFJlZ2lzdGVyIGFuIGV2ZW50IGxpc3RlbmVyIHRoYXQgcnVucyB3aGVuIGZlYXR1cmUgZmxhZ3MgYmVjb21lIGF2YWlsYWJsZSBvciB3aGVuIHRoZXkgY2hhbmdlLlxuICAgICAqIElmIHRoZXJlIGFyZSBmbGFncywgdGhlIGxpc3RlbmVyIGlzIGNhbGxlZCBpbW1lZGlhdGVseSBpbiBhZGRpdGlvbiB0byBiZWluZyBjYWxsZWQgb24gZnV0dXJlIGNoYW5nZXMuXG4gICAgICpcbiAgICAgKiAjIyMgVXNhZ2U6XG4gICAgICpcbiAgICAgKiAgICAgcG9zdGhvZy5vbkZlYXR1cmVGbGFncyhmdW5jdGlvbihmZWF0dXJlRmxhZ3MpIHsgLy8gZG8gc29tZXRoaW5nIH0pXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2FsbGJhY2tdIFRoZSBjYWxsYmFjayBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZCBvbmNlIHRoZSBmZWF0dXJlIGZsYWdzIGFyZSByZWFkeSBvciB3aGVuIHRoZXkgYXJlIHVwZGF0ZWQuXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJdCdsbCByZXR1cm4gYSBsaXN0IG9mIGZlYXR1cmUgZmxhZ3MgZW5hYmxlZCBmb3IgdGhlIHVzZXIuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBBIGZ1bmN0aW9uIHRoYXQgY2FuIGJlIGNhbGxlZCB0byB1bnN1YnNjcmliZSB0aGUgbGlzdGVuZXIuIFVzZWQgYnkgdXNlRWZmZWN0IHdoZW4gdGhlIGNvbXBvbmVudCB1bm1vdW50cy5cbiAgICAgKi9cbiAgICBvbkZlYXR1cmVGbGFncyhjYWxsYmFjazogKGZsYWdzOiBzdHJpbmdbXSwgdmFyaWFudHM6IFJlY29yZDxzdHJpbmcsIHN0cmluZyB8IGJvb2xlYW4+KSA9PiB2b2lkKTogKCkgPT4gdm9pZCB7XG4gICAgICAgIHJldHVybiB0aGlzLmZlYXR1cmVGbGFncy5vbkZlYXR1cmVGbGFncyhjYWxsYmFjaylcbiAgICB9XG5cbiAgICAvKlxuICAgICAqIFJlZ2lzdGVyIGFuIGV2ZW50IGxpc3RlbmVyIHRoYXQgcnVucyB3aGVuZXZlciB0aGUgc2Vzc2lvbiBpZCBvciB3aW5kb3cgaWQgY2hhbmdlLlxuICAgICAqIElmIHRoZXJlIGlzIGFscmVhZHkgYSBzZXNzaW9uIGlkLCB0aGUgbGlzdGVuZXIgaXMgY2FsbGVkIGltbWVkaWF0ZWx5IGluIGFkZGl0aW9uIHRvIGJlaW5nIGNhbGxlZCBvbiBmdXR1cmUgY2hhbmdlcy5cbiAgICAgKlxuICAgICAqIENhbiBiZSB1c2VkLCBmb3IgZXhhbXBsZSwgdG8gc3luYyB0aGUgUG9zdEhvZyBzZXNzaW9uIGlkIHdpdGggYSBiYWNrZW5kIHNlc3Npb24uXG4gICAgICpcbiAgICAgKiAjIyMgVXNhZ2U6XG4gICAgICpcbiAgICAgKiAgICAgcG9zdGhvZy5vblNlc3Npb25JZChmdW5jdGlvbihzZXNzaW9uSWQsIHdpbmRvd0lkKSB7IC8vIGRvIHNvbWV0aGluZyB9KVxuICAgICAqXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NhbGxiYWNrXSBUaGUgY2FsbGJhY2sgZnVuY3Rpb24gd2lsbCBiZSBjYWxsZWQgb25jZSBhIHNlc3Npb24gaWQgaXMgcHJlc2VudCBvciB3aGVuIGl0IG9yIHRoZSB3aW5kb3cgaWQgYXJlIHVwZGF0ZWQuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBBIGZ1bmN0aW9uIHRoYXQgY2FuIGJlIGNhbGxlZCB0byB1bnN1YnNjcmliZSB0aGUgbGlzdGVuZXIuIEUuZy4gVXNlZCBieSB1c2VFZmZlY3Qgd2hlbiB0aGUgY29tcG9uZW50IHVubW91bnRzLlxuICAgICAqL1xuICAgIG9uU2Vzc2lvbklkKGNhbGxiYWNrOiBTZXNzaW9uSWRDaGFuZ2VkQ2FsbGJhY2spOiAoKSA9PiB2b2lkIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2Vzc2lvbk1hbmFnZXI/Lm9uU2Vzc2lvbklkKGNhbGxiYWNrKSA/PyAoKCkgPT4ge30pXG4gICAgfVxuXG4gICAgLyoqIEdldCBsaXN0IG9mIGFsbCBzdXJ2ZXlzLiAqL1xuICAgIGdldFN1cnZleXMoY2FsbGJhY2s6IFN1cnZleUNhbGxiYWNrLCBmb3JjZVJlbG9hZCA9IGZhbHNlKTogdm9pZCB7XG4gICAgICAgIHRoaXMuc3VydmV5cy5nZXRTdXJ2ZXlzKGNhbGxiYWNrLCBmb3JjZVJlbG9hZClcbiAgICB9XG5cbiAgICAvKiogR2V0IHN1cnZleXMgdGhhdCBzaG91bGQgYmUgZW5hYmxlZCBmb3IgdGhlIGN1cnJlbnQgdXNlci4gKi9cbiAgICBnZXRBY3RpdmVNYXRjaGluZ1N1cnZleXMoY2FsbGJhY2s6IFN1cnZleUNhbGxiYWNrLCBmb3JjZVJlbG9hZCA9IGZhbHNlKTogdm9pZCB7XG4gICAgICAgIHRoaXMuc3VydmV5cy5nZXRBY3RpdmVNYXRjaGluZ1N1cnZleXMoY2FsbGJhY2ssIGZvcmNlUmVsb2FkKVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIElkZW50aWZ5IGEgdXNlciB3aXRoIGEgdW5pcXVlIElEIGluc3RlYWQgb2YgYSBQb3N0SG9nXG4gICAgICogcmFuZG9tbHkgZ2VuZXJhdGVkIGRpc3RpbmN0X2lkLiBJZiB0aGUgbWV0aG9kIGlzIG5ldmVyIGNhbGxlZCxcbiAgICAgKiB0aGVuIHVuaXF1ZSB2aXNpdG9ycyB3aWxsIGJlIGlkZW50aWZpZWQgYnkgYSBVVUlEIHRoYXQgaXMgZ2VuZXJhdGVkXG4gICAgICogdGhlIGZpcnN0IHRpbWUgdGhleSB2aXNpdCB0aGUgc2l0ZS5cbiAgICAgKlxuICAgICAqIElmIHVzZXIgcHJvcGVydGllcyBhcmUgcGFzc2VkLCB0aGV5IGFyZSBhbHNvIHNlbnQgdG8gcG9zdGhvZy5cbiAgICAgKlxuICAgICAqICMjIyBVc2FnZTpcbiAgICAgKlxuICAgICAqICAgICAgcG9zdGhvZy5pZGVudGlmeSgnW3VzZXIgdW5pcXVlIGlkXScpXG4gICAgICogICAgICBwb3N0aG9nLmlkZW50aWZ5KCdbdXNlciB1bmlxdWUgaWRdJywgeyBlbWFpbDogJ2pvaG5AZXhhbXBsZS5jb20nIH0pXG4gICAgICogICAgICBwb3N0aG9nLmlkZW50aWZ5KCdbdXNlciB1bmlxdWUgaWRdJywge30sIHsgcmVmZXJyYWxfY29kZTogJzEyMzQ1JyB9KVxuICAgICAqXG4gICAgICogIyMjIE5vdGVzOlxuICAgICAqXG4gICAgICogWW91IGNhbiBjYWxsIHRoaXMgZnVuY3Rpb24gdG8gb3ZlcndyaXRlIGEgcHJldmlvdXNseSBzZXRcbiAgICAgKiB1bmlxdWUgSUQgZm9yIHRoZSBjdXJyZW50IHVzZXIuXG4gICAgICpcbiAgICAgKiBJZiB0aGUgdXNlciBoYXMgYmVlbiBpZGVudGlmaWVkICgkdXNlcl9zdGF0ZSBpbiBwZXJzaXN0ZW5jZSBpcyBzZXQgdG8gJ2lkZW50aWZpZWQnKSxcbiAgICAgKiB0aGVuIGNhcHR1cmUgb2YgJGlkZW50aWZ5IGlzIHNraXBwZWQgdG8gYXZvaWQgbWVyZ2luZyB1c2Vycy4gRm9yIGV4YW1wbGUsXG4gICAgICogaWYgeW91ciBzeXN0ZW0gYWxsb3dzIGFuIGFkbWluIHVzZXIgdG8gaW1wZXJzb25hdGUgYW5vdGhlciB1c2VyLlxuICAgICAqXG4gICAgICogVGhlbiBhIHNpbmdsZSBicm93c2VyIGluc3RhbmNlIGNhbiBoYXZlOlxuICAgICAqXG4gICAgICogIGBpZGVudGlmeSgnYScpIC0+IGNhcHR1cmUoMSkgLT4gaWRlbnRpZnkoJ2InKSAtPiBjYXB0dXJlKDIpYFxuICAgICAqXG4gICAgICogYW5kIGNhcHR1cmUgMSBhbmQgY2FwdHVyZSAyIHdpbGwgaGF2ZSB0aGUgY29ycmVjdCBkaXN0aW5jdF9pZC5cbiAgICAgKiBidXQgdXNlcnMgYSBhbmQgYiB3aWxsIE5PVCBiZSBtZXJnZWQgaW4gcG9zdGhvZy5cbiAgICAgKlxuICAgICAqIEhvd2V2ZXIsIGlmIHJlc2V0IGlzIGNhbGxlZCB0aGVuOlxuICAgICAqXG4gICAgICogIGBpZGVudGlmeSgnYScpIC0+IGNhcHR1cmUoMSkgLT4gcmVzZXQoKSAtPiBjYXB0dXJlKDIpIC0+IGlkZW50aWZ5KCdiJykgLT4gY2FwdHVyZSgzKWBcbiAgICAgKlxuICAgICAqIHVzZXJzIGEgYW5kIGIgYXJlIG5vdCBtZXJnZWQuXG4gICAgICogQ2FwdHVyZSAxIGlzIGFzc29jaWF0ZWQgd2l0aCB1c2VyIGEuXG4gICAgICogQSBuZXcgZGlzdGluY3QgaWQgaXMgZ2VuZXJhdGVkIGZvciBjYXB0dXJlIDIuXG4gICAgICogd2hpY2ggaXMgbWVyZ2VkIHdpdGggdXNlciBiLlxuICAgICAqIFNvLCBjYXB0dXJlIDIgYW5kIDMgYXJlIGFzc29jaWF0ZWQgd2l0aCB1c2VyIGIuXG4gICAgICpcbiAgICAgKiBJZiB5b3Ugd2FudCB0byBtZXJnZSB0d28gaWRlbnRpZmllZCB1c2VycywgeW91IGNhbiBjYWxsIHBvc3Rob2cuYWxpYXNcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBbbmV3X2Rpc3RpbmN0X2lkXSBBIHN0cmluZyB0aGF0IHVuaXF1ZWx5IGlkZW50aWZpZXMgYSB1c2VyLiBJZiBub3QgcHJvdmlkZWQsIHRoZSBkaXN0aW5jdF9pZCBjdXJyZW50bHkgaW4gdGhlIHBlcnNpc3RlbnQgc3RvcmUgKGNvb2tpZSBvciBsb2NhbFN0b3JhZ2UpIHdpbGwgYmUgdXNlZC5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW3VzZXJQcm9wZXJ0aWVzVG9TZXRdIE9wdGlvbmFsOiBBbiBhc3NvY2lhdGl2ZSBhcnJheSBvZiBwcm9wZXJ0aWVzIHRvIHN0b3JlIGFib3V0IHRoZSB1c2VyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFt1c2VyUHJvcGVydGllc1RvU2V0T25jZV0gT3B0aW9uYWw6IEFuIGFzc29jaWF0aXZlIGFycmF5IG9mIHByb3BlcnRpZXMgdG8gc3RvcmUgYWJvdXQgdGhlIHVzZXIuIElmIHByb3BlcnR5IGlzIHByZXZpb3VzbHkgc2V0LCB0aGlzIGRvZXMgbm90IG92ZXJyaWRlIHRoYXQgdmFsdWUuXG4gICAgICovXG4gICAgaWRlbnRpZnkobmV3X2Rpc3RpbmN0X2lkPzogc3RyaW5nLCB1c2VyUHJvcGVydGllc1RvU2V0PzogUHJvcGVydGllcywgdXNlclByb3BlcnRpZXNUb1NldE9uY2U/OiBQcm9wZXJ0aWVzKTogdm9pZCB7XG4gICAgICAgIGlmICghdGhpcy5fX2xvYWRlZCB8fCAhdGhpcy5wZXJzaXN0ZW5jZSkge1xuICAgICAgICAgICAgcmV0dXJuIGxvZ2dlci51bmluaXRpYWxpemVkV2FybmluZygncG9zdGhvZy5pZGVudGlmeScpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9pc051bWJlcihuZXdfZGlzdGluY3RfaWQpKSB7XG4gICAgICAgICAgICBuZXdfZGlzdGluY3RfaWQgPSAobmV3X2Rpc3RpbmN0X2lkIGFzIG51bWJlcikudG9TdHJpbmcoKVxuICAgICAgICAgICAgbG9nZ2VyLndhcm4oXG4gICAgICAgICAgICAgICAgJ1RoZSBmaXJzdCBhcmd1bWVudCB0byBwb3N0aG9nLmlkZW50aWZ5IHdhcyBhIG51bWJlciwgYnV0IGl0IHNob3VsZCBiZSBhIHN0cmluZy4gSXQgaGFzIGJlZW4gY29udmVydGVkIHRvIGEgc3RyaW5nLidcbiAgICAgICAgICAgIClcbiAgICAgICAgfVxuXG4gICAgICAgIC8vaWYgdGhlIG5ld19kaXN0aW5jdF9pZCBoYXMgbm90IGJlZW4gc2V0IGlnbm9yZSB0aGUgaWRlbnRpZnkgZXZlbnRcbiAgICAgICAgaWYgKCFuZXdfZGlzdGluY3RfaWQpIHtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcignVW5pcXVlIHVzZXIgaWQgaGFzIG5vdCBiZWVuIHNldCBpbiBwb3N0aG9nLmlkZW50aWZ5JylcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlzRGlzdGluY3RJZFN0cmluZ0xpa2UobmV3X2Rpc3RpbmN0X2lkKSkge1xuICAgICAgICAgICAgbG9nZ2VyLmNyaXRpY2FsKFxuICAgICAgICAgICAgICAgIGBUaGUgc3RyaW5nIFwiJHtuZXdfZGlzdGluY3RfaWR9XCIgd2FzIHNldCBpbiBwb3N0aG9nLmlkZW50aWZ5IHdoaWNoIGluZGljYXRlcyBhbiBlcnJvci4gVGhpcyBJRCBzaG91bGQgYmUgdW5pcXVlIHRvIHRoZSB1c2VyIGFuZCBub3QgYSBoYXJkY29kZWQgc3RyaW5nLmBcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcHJldmlvdXNfZGlzdGluY3RfaWQgPSB0aGlzLmdldF9kaXN0aW5jdF9pZCgpXG4gICAgICAgIHRoaXMucmVnaXN0ZXIoeyAkdXNlcl9pZDogbmV3X2Rpc3RpbmN0X2lkIH0pXG5cbiAgICAgICAgaWYgKCF0aGlzLmdldF9wcm9wZXJ0eSgnJGRldmljZV9pZCcpKSB7XG4gICAgICAgICAgICAvLyBUaGUgcGVyc2lzdGVkIGRpc3RpbmN0IGlkIG1pZ2h0IG5vdCBhY3R1YWxseSBiZSBhIGRldmljZSBpZCBhdCBhbGxcbiAgICAgICAgICAgIC8vIGl0IG1pZ2h0IGJlIGEgZGlzdGluY3QgaWQgb2YgdGhlIHVzZXIgZnJvbSBiZWZvcmVcbiAgICAgICAgICAgIGNvbnN0IGRldmljZV9pZCA9IHByZXZpb3VzX2Rpc3RpbmN0X2lkXG4gICAgICAgICAgICB0aGlzLnJlZ2lzdGVyX29uY2UoXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAkaGFkX3BlcnNpc3RlZF9kaXN0aW5jdF9pZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgJGRldmljZV9pZDogZGV2aWNlX2lkLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgJydcbiAgICAgICAgICAgIClcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGlmIHRoZSBwcmV2aW91cyBkaXN0aW5jdCBpZCBoYWQgYW4gYWxpYXMgc3RvcmVkLCB0aGVuIHdlIGNsZWFyIGl0XG4gICAgICAgIGlmIChuZXdfZGlzdGluY3RfaWQgIT09IHByZXZpb3VzX2Rpc3RpbmN0X2lkICYmIG5ld19kaXN0aW5jdF9pZCAhPT0gdGhpcy5nZXRfcHJvcGVydHkoQUxJQVNfSURfS0VZKSkge1xuICAgICAgICAgICAgdGhpcy51bnJlZ2lzdGVyKEFMSUFTX0lEX0tFWSlcbiAgICAgICAgICAgIHRoaXMucmVnaXN0ZXIoeyBkaXN0aW5jdF9pZDogbmV3X2Rpc3RpbmN0X2lkIH0pXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBpc0tub3duQW5vbnltb3VzID0gdGhpcy5wZXJzaXN0ZW5jZS5nZXRfdXNlcl9zdGF0ZSgpID09PSAnYW5vbnltb3VzJ1xuXG4gICAgICAgIC8vIHNlbmQgYW4gJGlkZW50aWZ5IGV2ZW50IGFueSB0aW1lIHRoZSBkaXN0aW5jdF9pZCBpcyBjaGFuZ2luZyBhbmQgdGhlIG9sZCBJRCBpcyBhbiBhbm95bW91cyBJRFxuICAgICAgICAvLyAtIGxvZ2ljIG9uIHRoZSBzZXJ2ZXIgd2lsbCBkZXRlcm1pbmUgd2hldGhlciBvciBub3QgdG8gZG8gYW55dGhpbmcgd2l0aCBpdC5cbiAgICAgICAgaWYgKG5ld19kaXN0aW5jdF9pZCAhPT0gcHJldmlvdXNfZGlzdGluY3RfaWQgJiYgaXNLbm93bkFub255bW91cykge1xuICAgICAgICAgICAgdGhpcy5wZXJzaXN0ZW5jZS5zZXRfdXNlcl9zdGF0ZSgnaWRlbnRpZmllZCcpXG5cbiAgICAgICAgICAgIC8vIFVwZGF0ZSBjdXJyZW50IHVzZXIgcHJvcGVydGllc1xuICAgICAgICAgICAgdGhpcy5zZXRQZXJzb25Qcm9wZXJ0aWVzRm9yRmxhZ3ModXNlclByb3BlcnRpZXNUb1NldCB8fCB7fSwgZmFsc2UpXG5cbiAgICAgICAgICAgIHRoaXMuY2FwdHVyZShcbiAgICAgICAgICAgICAgICAnJGlkZW50aWZ5JyxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGRpc3RpbmN0X2lkOiBuZXdfZGlzdGluY3RfaWQsXG4gICAgICAgICAgICAgICAgICAgICRhbm9uX2Rpc3RpbmN0X2lkOiBwcmV2aW91c19kaXN0aW5jdF9pZCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHsgJHNldDogdXNlclByb3BlcnRpZXNUb1NldCB8fCB7fSwgJHNldF9vbmNlOiB1c2VyUHJvcGVydGllc1RvU2V0T25jZSB8fCB7fSB9XG4gICAgICAgICAgICApXG4gICAgICAgICAgICAvLyBsZXQgdGhlIHJlbG9hZCBmZWF0dXJlIGZsYWcgcmVxdWVzdCBrbm93IHRvIHNlbmQgdGhpcyBwcmV2aW91cyBkaXN0aW5jdCBpZFxuICAgICAgICAgICAgLy8gZm9yIGZsYWcgY29uc2lzdGVuY3lcbiAgICAgICAgICAgIHRoaXMuZmVhdHVyZUZsYWdzLnNldEFub255bW91c0Rpc3RpbmN0SWQocHJldmlvdXNfZGlzdGluY3RfaWQpXG4gICAgICAgIH0gZWxzZSBpZiAodXNlclByb3BlcnRpZXNUb1NldCB8fCB1c2VyUHJvcGVydGllc1RvU2V0T25jZSkge1xuICAgICAgICAgICAgLy8gSWYgdGhlIGRpc3RpbmN0X2lkIGlzIG5vdCBjaGFuZ2luZywgYnV0IHdlIGhhdmUgdXNlciBwcm9wZXJ0aWVzIHRvIHNldCwgd2UgY2FuIGdvIGZvciBhICRzZXQgZXZlbnRcbiAgICAgICAgICAgIHRoaXMuc2V0UGVyc29uUHJvcGVydGllcyh1c2VyUHJvcGVydGllc1RvU2V0LCB1c2VyUHJvcGVydGllc1RvU2V0T25jZSlcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJlbG9hZCBhY3RpdmUgZmVhdHVyZSBmbGFncyBpZiB0aGUgdXNlciBpZGVudGl0eSBjaGFuZ2VzLlxuICAgICAgICAvLyBOb3RlIHdlIGRvbid0IHJlbG9hZCB0aGlzIG9uIHByb3BlcnR5IGNoYW5nZXMgYXMgdGhlc2UgZ2V0IHByb2Nlc3NlZCBhc3luY1xuICAgICAgICBpZiAobmV3X2Rpc3RpbmN0X2lkICE9PSBwcmV2aW91c19kaXN0aW5jdF9pZCkge1xuICAgICAgICAgICAgdGhpcy5yZWxvYWRGZWF0dXJlRmxhZ3MoKVxuICAgICAgICAgICAgLy8gYWxzbyBjbGVhciBhbnkgc3RvcmVkIGZsYWcgY2FsbHNcbiAgICAgICAgICAgIHRoaXMudW5yZWdpc3RlcihGTEFHX0NBTExfUkVQT1JURUQpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHByb3BlcnRpZXMgZm9yIHRoZSBQZXJzb24gYXNzb2NpYXRlZCB3aXRoIHRoZSBjdXJyZW50IGRpc3RpbmN0X2lkLlxuICAgICAqXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW3VzZXJQcm9wZXJ0aWVzVG9TZXRdIE9wdGlvbmFsOiBBbiBhc3NvY2lhdGl2ZSBhcnJheSBvZiBwcm9wZXJ0aWVzIHRvIHN0b3JlIGFib3V0IHRoZSB1c2VyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFt1c2VyUHJvcGVydGllc1RvU2V0T25jZV0gT3B0aW9uYWw6IEFuIGFzc29jaWF0aXZlIGFycmF5IG9mIHByb3BlcnRpZXMgdG8gc3RvcmUgYWJvdXQgdGhlIHVzZXIuIElmIHByb3BlcnR5IGlzIHByZXZpb3VzbHkgc2V0LCB0aGlzIGRvZXMgbm90IG92ZXJyaWRlIHRoYXQgdmFsdWUuXG4gICAgICovXG4gICAgc2V0UGVyc29uUHJvcGVydGllcyh1c2VyUHJvcGVydGllc1RvU2V0PzogUHJvcGVydGllcywgdXNlclByb3BlcnRpZXNUb1NldE9uY2U/OiBQcm9wZXJ0aWVzKTogdm9pZCB7XG4gICAgICAgIGlmICghdXNlclByb3BlcnRpZXNUb1NldCAmJiAhdXNlclByb3BlcnRpZXNUb1NldE9uY2UpIHtcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG5cbiAgICAgICAgLy8gVXBkYXRlIGN1cnJlbnQgdXNlciBwcm9wZXJ0aWVzXG4gICAgICAgIHRoaXMuc2V0UGVyc29uUHJvcGVydGllc0ZvckZsYWdzKHVzZXJQcm9wZXJ0aWVzVG9TZXQgfHwge30pXG5cbiAgICAgICAgdGhpcy5jYXB0dXJlKCckc2V0JywgeyAkc2V0OiB1c2VyUHJvcGVydGllc1RvU2V0IHx8IHt9LCAkc2V0X29uY2U6IHVzZXJQcm9wZXJ0aWVzVG9TZXRPbmNlIHx8IHt9IH0pXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWxwaGEgZmVhdHVyZTogZG9uJ3QgdXNlIHVubGVzcyB5b3Uga25vdyB3aGF0IHlvdSdyZSBkb2luZyFcbiAgICAgKlxuICAgICAqIFNldHMgZ3JvdXAgYW5hbHl0aWNzIGluZm9ybWF0aW9uIGZvciBzdWJzZXF1ZW50IGV2ZW50cyBhbmQgcmVsb2FkcyBmZWF0dXJlIGZsYWdzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGdyb3VwVHlwZSBHcm91cCB0eXBlIChleGFtcGxlOiAnb3JnYW5pemF0aW9uJylcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZ3JvdXBLZXkgR3JvdXAga2V5IChleGFtcGxlOiAnb3JnOjo1JylcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gZ3JvdXBQcm9wZXJ0aWVzVG9TZXQgT3B0aW9uYWwgcHJvcGVydGllcyB0byBzZXQgZm9yIGdyb3VwXG4gICAgICovXG4gICAgZ3JvdXAoZ3JvdXBUeXBlOiBzdHJpbmcsIGdyb3VwS2V5OiBzdHJpbmcsIGdyb3VwUHJvcGVydGllc1RvU2V0PzogUHJvcGVydGllcyk6IHZvaWQge1xuICAgICAgICBpZiAoIWdyb3VwVHlwZSB8fCAhZ3JvdXBLZXkpIHtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcigncG9zdGhvZy5ncm91cCByZXF1aXJlcyBhIGdyb3VwIHR5cGUgYW5kIGdyb3VwIGtleScpXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGV4aXN0aW5nR3JvdXBzID0gdGhpcy5nZXRHcm91cHMoKVxuXG4gICAgICAgIC8vIGlmIGdyb3VwIGtleSBjaGFuZ2VzLCByZW1vdmUgc3RvcmVkIGdyb3VwIHByb3BlcnRpZXNcbiAgICAgICAgaWYgKGV4aXN0aW5nR3JvdXBzW2dyb3VwVHlwZV0gIT09IGdyb3VwS2V5KSB7XG4gICAgICAgICAgICB0aGlzLnJlc2V0R3JvdXBQcm9wZXJ0aWVzRm9yRmxhZ3MoZ3JvdXBUeXBlKVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5yZWdpc3Rlcih7ICRncm91cHM6IHsgLi4uZXhpc3RpbmdHcm91cHMsIFtncm91cFR5cGVdOiBncm91cEtleSB9IH0pXG5cbiAgICAgICAgaWYgKGdyb3VwUHJvcGVydGllc1RvU2V0KSB7XG4gICAgICAgICAgICB0aGlzLmNhcHR1cmUoJyRncm91cGlkZW50aWZ5Jywge1xuICAgICAgICAgICAgICAgICRncm91cF90eXBlOiBncm91cFR5cGUsXG4gICAgICAgICAgICAgICAgJGdyb3VwX2tleTogZ3JvdXBLZXksXG4gICAgICAgICAgICAgICAgJGdyb3VwX3NldDogZ3JvdXBQcm9wZXJ0aWVzVG9TZXQsXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgdGhpcy5zZXRHcm91cFByb3BlcnRpZXNGb3JGbGFncyh7IFtncm91cFR5cGVdOiBncm91cFByb3BlcnRpZXNUb1NldCB9KVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gSWYgZ3JvdXBzIGNoYW5nZSBhbmQgbm8gcHJvcGVydGllcyBjaGFuZ2UsIHJlbG9hZCBmZWF0dXJlIGZsYWdzLlxuICAgICAgICAvLyBUaGUgcHJvcGVydHkgY2hhbmdlIHJlbG9hZCBjYXNlIGlzIGhhbmRsZWQgaW4gc2V0R3JvdXBQcm9wZXJ0aWVzRm9yRmxhZ3MuXG4gICAgICAgIGlmIChleGlzdGluZ0dyb3Vwc1tncm91cFR5cGVdICE9PSBncm91cEtleSAmJiAhZ3JvdXBQcm9wZXJ0aWVzVG9TZXQpIHtcbiAgICAgICAgICAgIHRoaXMucmVsb2FkRmVhdHVyZUZsYWdzKClcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlc2V0cyBvbmx5IHRoZSBncm91cCBwcm9wZXJ0aWVzIG9mIHRoZSB1c2VyIGN1cnJlbnRseSBsb2dnZWQgaW4uXG4gICAgICovXG4gICAgcmVzZXRHcm91cHMoKTogdm9pZCB7XG4gICAgICAgIHRoaXMucmVnaXN0ZXIoeyAkZ3JvdXBzOiB7fSB9KVxuICAgICAgICB0aGlzLnJlc2V0R3JvdXBQcm9wZXJ0aWVzRm9yRmxhZ3MoKVxuXG4gICAgICAgIC8vIElmIGdyb3VwcyBjaGFuZ2VkLCByZWxvYWQgZmVhdHVyZSBmbGFncy5cbiAgICAgICAgdGhpcy5yZWxvYWRGZWF0dXJlRmxhZ3MoKVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCBvdmVycmlkZSBwZXJzb24gcHJvcGVydGllcyBmb3IgZmVhdHVyZSBmbGFncy5cbiAgICAgKiBUaGlzIGlzIHVzZWQgd2hlbiBkZWFsaW5nIHdpdGggbmV3IHBlcnNvbnMgLyB3aGVyZSB5b3UgZG9uJ3Qgd2FudCB0byB3YWl0IGZvciBpbmdlc3Rpb25cbiAgICAgKiB0byB1cGRhdGUgdXNlciBwcm9wZXJ0aWVzLlxuICAgICAqL1xuICAgIHNldFBlcnNvblByb3BlcnRpZXNGb3JGbGFncyhwcm9wZXJ0aWVzOiBQcm9wZXJ0aWVzLCByZWxvYWRGZWF0dXJlRmxhZ3MgPSB0cnVlKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZmVhdHVyZUZsYWdzLnNldFBlcnNvblByb3BlcnRpZXNGb3JGbGFncyhwcm9wZXJ0aWVzLCByZWxvYWRGZWF0dXJlRmxhZ3MpXG4gICAgfVxuXG4gICAgcmVzZXRQZXJzb25Qcm9wZXJ0aWVzRm9yRmxhZ3MoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZmVhdHVyZUZsYWdzLnJlc2V0UGVyc29uUHJvcGVydGllc0ZvckZsYWdzKClcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgb3ZlcnJpZGUgZ3JvdXAgcHJvcGVydGllcyBmb3IgZmVhdHVyZSBmbGFncy5cbiAgICAgKiBUaGlzIGlzIHVzZWQgd2hlbiBkZWFsaW5nIHdpdGggbmV3IGdyb3VwcyAvIHdoZXJlIHlvdSBkb24ndCB3YW50IHRvIHdhaXQgZm9yIGluZ2VzdGlvblxuICAgICAqIHRvIHVwZGF0ZSBwcm9wZXJ0aWVzLlxuICAgICAqIFRha2VzIGluIGFuIG9iamVjdCwgdGhlIGtleSBvZiB3aGljaCBpcyB0aGUgZ3JvdXAgdHlwZS5cbiAgICAgKiBGb3IgZXhhbXBsZTpcbiAgICAgKiAgICAgc2V0R3JvdXBQcm9wZXJ0aWVzRm9yRmxhZ3Moeydvcmdhbml6YXRpb24nOiB7IG5hbWU6ICdDWVonLCBlbXBsb3llZXM6ICcxMScgfSB9KVxuICAgICAqL1xuICAgIHNldEdyb3VwUHJvcGVydGllc0ZvckZsYWdzKHByb3BlcnRpZXM6IHsgW3R5cGU6IHN0cmluZ106IFByb3BlcnRpZXMgfSwgcmVsb2FkRmVhdHVyZUZsYWdzID0gdHJ1ZSk6IHZvaWQge1xuICAgICAgICB0aGlzLmZlYXR1cmVGbGFncy5zZXRHcm91cFByb3BlcnRpZXNGb3JGbGFncyhwcm9wZXJ0aWVzLCByZWxvYWRGZWF0dXJlRmxhZ3MpXG4gICAgfVxuXG4gICAgcmVzZXRHcm91cFByb3BlcnRpZXNGb3JGbGFncyhncm91cF90eXBlPzogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZmVhdHVyZUZsYWdzLnJlc2V0R3JvdXBQcm9wZXJ0aWVzRm9yRmxhZ3MoZ3JvdXBfdHlwZSlcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDbGVhcnMgc3VwZXIgcHJvcGVydGllcyBhbmQgZ2VuZXJhdGVzIGEgbmV3IHJhbmRvbSBkaXN0aW5jdF9pZCBmb3IgdGhpcyBpbnN0YW5jZS5cbiAgICAgKiBVc2VmdWwgZm9yIGNsZWFyaW5nIGRhdGEgd2hlbiBhIHVzZXIgbG9ncyBvdXQuXG4gICAgICovXG4gICAgcmVzZXQocmVzZXRfZGV2aWNlX2lkPzogYm9vbGVhbik6IHZvaWQge1xuICAgICAgICBpZiAoIXRoaXMuX19sb2FkZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBsb2dnZXIudW5pbml0aWFsaXplZFdhcm5pbmcoJ3Bvc3Rob2cucmVzZXQnKVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRldmljZV9pZCA9IHRoaXMuZ2V0X3Byb3BlcnR5KCckZGV2aWNlX2lkJylcbiAgICAgICAgdGhpcy5wZXJzaXN0ZW5jZT8uY2xlYXIoKVxuICAgICAgICB0aGlzLnNlc3Npb25QZXJzaXN0ZW5jZT8uY2xlYXIoKVxuICAgICAgICB0aGlzLnBlcnNpc3RlbmNlPy5zZXRfdXNlcl9zdGF0ZSgnYW5vbnltb3VzJylcbiAgICAgICAgdGhpcy5zZXNzaW9uTWFuYWdlcj8ucmVzZXRTZXNzaW9uSWQoKVxuICAgICAgICBjb25zdCB1dWlkID0gdGhpcy5jb25maWcuZ2V0X2RldmljZV9pZCh1dWlkdjcoKSlcbiAgICAgICAgdGhpcy5yZWdpc3Rlcl9vbmNlKFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGRpc3RpbmN0X2lkOiB1dWlkLFxuICAgICAgICAgICAgICAgICRkZXZpY2VfaWQ6IHJlc2V0X2RldmljZV9pZCA/IHV1aWQgOiBkZXZpY2VfaWQsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJydcbiAgICAgICAgKVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGN1cnJlbnQgZGlzdGluY3QgaWQgb2YgdGhlIHVzZXIuIFRoaXMgaXMgZWl0aGVyIHRoZSBpZCBhdXRvbWF0aWNhbGx5XG4gICAgICogZ2VuZXJhdGVkIGJ5IHRoZSBsaWJyYXJ5IG9yIHRoZSBpZCB0aGF0IGhhcyBiZWVuIHBhc3NlZCBieSBhIGNhbGwgdG8gaWRlbnRpZnkoKS5cbiAgICAgKlxuICAgICAqICMjIyBOb3RlczpcbiAgICAgKlxuICAgICAqIGdldF9kaXN0aW5jdF9pZCgpIGNhbiBvbmx5IGJlIGNhbGxlZCBhZnRlciB0aGUgUG9zdEhvZyBsaWJyYXJ5IGhhcyBmaW5pc2hlZCBsb2FkaW5nLlxuICAgICAqIGluaXQoKSBoYXMgYSBsb2FkZWQgZnVuY3Rpb24gYXZhaWxhYmxlIHRvIGhhbmRsZSB0aGlzIGF1dG9tYXRpY2FsbHkuIEZvciBleGFtcGxlOlxuICAgICAqXG4gICAgICogICAgIC8vIHNldCBkaXN0aW5jdF9pZCBhZnRlciB0aGUgcG9zdGhvZyBsaWJyYXJ5IGhhcyBsb2FkZWRcbiAgICAgKiAgICAgcG9zdGhvZy5pbml0KCdZT1VSIFBST0pFQ1QgVE9LRU4nLCB7XG4gICAgICogICAgICAgICBsb2FkZWQ6IGZ1bmN0aW9uKHBvc3Rob2cpIHtcbiAgICAgKiAgICAgICAgICAgICBkaXN0aW5jdF9pZCA9IHBvc3Rob2cuZ2V0X2Rpc3RpbmN0X2lkKCk7XG4gICAgICogICAgICAgICB9XG4gICAgICogICAgIH0pO1xuICAgICAqL1xuICAgIGdldF9kaXN0aW5jdF9pZCgpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRfcHJvcGVydHkoJ2Rpc3RpbmN0X2lkJylcbiAgICB9XG5cbiAgICBnZXRHcm91cHMoKTogUmVjb3JkPHN0cmluZywgYW55PiB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldF9wcm9wZXJ0eSgnJGdyb3VwcycpIHx8IHt9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgY3VycmVudCBzZXNzaW9uX2lkLlxuICAgICAqXG4gICAgICogTk9URTogVGhpcyBzaG91bGQgb25seSBiZSB1c2VkIGZvciBpbmZvcm1hdGl2ZSBwdXJwb3Nlcy5cbiAgICAgKiBBbnkgYWN0dWFsIGludGVybmFsIHVzZSBjYXNlIGZvciB0aGUgc2Vzc2lvbl9pZCBzaG91bGQgYmUgaGFuZGxlZCBieSB0aGUgc2Vzc2lvbk1hbmFnZXIuXG4gICAgICovXG5cbiAgICBnZXRfc2Vzc2lvbl9pZCgpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXNzaW9uTWFuYWdlcj8uY2hlY2tBbmRHZXRTZXNzaW9uQW5kV2luZG93SWQodHJ1ZSkuc2Vzc2lvbklkID8/ICcnXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgUmVwbGF5IHVybCBmb3IgdGhlIGN1cnJlbnQgc2Vzc2lvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvcHRpb25zIE9wdGlvbnMgZm9yIHRoZSB1cmxcbiAgICAgKiBAcGFyYW0gb3B0aW9ucy53aXRoVGltZXN0YW1wIFdoZXRoZXIgdG8gaW5jbHVkZSB0aGUgdGltZXN0YW1wIGluIHRoZSB1cmwgKGRlZmF1bHRzIHRvIGZhbHNlKVxuICAgICAqIEBwYXJhbSBvcHRpb25zLnRpbWVzdGFtcExvb2tCYWNrIEhvdyBtYW55IHNlY29uZHMgdG8gbG9vayBiYWNrIGZvciB0aGUgdGltZXN0YW1wIChkZWZhdWx0cyB0byAxMClcbiAgICAgKi9cbiAgICBnZXRfc2Vzc2lvbl9yZXBsYXlfdXJsKG9wdGlvbnM/OiB7IHdpdGhUaW1lc3RhbXA/OiBib29sZWFuOyB0aW1lc3RhbXBMb29rQmFjaz86IG51bWJlciB9KTogc3RyaW5nIHtcbiAgICAgICAgaWYgKCF0aGlzLnNlc3Npb25NYW5hZ2VyKSB7XG4gICAgICAgICAgICByZXR1cm4gJydcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IHNlc3Npb25JZCwgc2Vzc2lvblN0YXJ0VGltZXN0YW1wIH0gPSB0aGlzLnNlc3Npb25NYW5hZ2VyLmNoZWNrQW5kR2V0U2Vzc2lvbkFuZFdpbmRvd0lkKHRydWUpXG4gICAgICAgIGxldCB1cmwgPSB0aGlzLnJlcXVlc3RSb3V0ZXIuZW5kcG9pbnRGb3IoJ3VpJywgJy9yZXBsYXkvJyArIHNlc3Npb25JZClcbiAgICAgICAgaWYgKG9wdGlvbnM/LndpdGhUaW1lc3RhbXAgJiYgc2Vzc2lvblN0YXJ0VGltZXN0YW1wKSB7XG4gICAgICAgICAgICBjb25zdCBMT09LX0JBQ0sgPSBvcHRpb25zLnRpbWVzdGFtcExvb2tCYWNrID8/IDEwXG4gICAgICAgICAgICBpZiAoIXNlc3Npb25TdGFydFRpbWVzdGFtcCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB1cmxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlY29yZGluZ1N0YXJ0VGltZSA9IE1hdGgubWF4KFxuICAgICAgICAgICAgICAgIE1hdGguZmxvb3IoKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gc2Vzc2lvblN0YXJ0VGltZXN0YW1wKSAvIDEwMDApIC0gTE9PS19CQUNLLFxuICAgICAgICAgICAgICAgIDBcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIHVybCArPSBgP3Q9JHtyZWNvcmRpbmdTdGFydFRpbWV9YFxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHVybFxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhbiBhbGlhcywgd2hpY2ggUG9zdEhvZyB3aWxsIHVzZSB0byBsaW5rIHR3byBkaXN0aW5jdF9pZHMgZ29pbmcgZm9yd2FyZCAobm90IHJldHJvYWN0aXZlbHkpLlxuICAgICAqIE11bHRpcGxlIGFsaWFzZXMgY2FuIG1hcCB0byB0aGUgc2FtZSBvcmlnaW5hbCBJRCwgYnV0IG5vdCB2aWNlLXZlcnNhLiBBbGlhc2VzIGNhbiBhbHNvIGJlIGNoYWluZWQgLSB0aGVcbiAgICAgKiBmb2xsb3dpbmcgaXMgYSB2YWxpZCBzY2VuYXJpbzpcbiAgICAgKlxuICAgICAqICAgICBwb3N0aG9nLmFsaWFzKCduZXdfaWQnLCAnZXhpc3RpbmdfaWQnKTtcbiAgICAgKiAgICAgLi4uXG4gICAgICogICAgIHBvc3Rob2cuYWxpYXMoJ25ld2VyX2lkJywgJ25ld19pZCcpO1xuICAgICAqXG4gICAgICogSWYgdGhlIG9yaWdpbmFsIElEIGlzIG5vdCBwYXNzZWQgaW4sIHdlIHdpbGwgdXNlIHRoZSBjdXJyZW50IGRpc3RpbmN0X2lkIC0gcHJvYmFibHkgdGhlIGF1dG8tZ2VuZXJhdGVkIEdVSUQuXG4gICAgICpcbiAgICAgKiAjIyMgTm90ZXM6XG4gICAgICpcbiAgICAgKiBUaGUgYmVzdCBwcmFjdGljZSBpcyB0byBjYWxsIGFsaWFzKCkgd2hlbiBhIHVuaXF1ZSBJRCBpcyBmaXJzdCBjcmVhdGVkIGZvciBhIHVzZXJcbiAgICAgKiAoZS5nLiwgd2hlbiBhIHVzZXIgZmlyc3QgcmVnaXN0ZXJzIGZvciBhbiBhY2NvdW50IGFuZCBwcm92aWRlcyBhbiBlbWFpbCBhZGRyZXNzKS5cbiAgICAgKiBhbGlhcygpIHNob3VsZCBuZXZlciBiZSBjYWxsZWQgbW9yZSB0aGFuIG9uY2UgZm9yIGEgZ2l2ZW4gdXNlciwgZXhjZXB0IHRvXG4gICAgICogY2hhaW4gYSBuZXdlciBJRCB0byBhIHByZXZpb3VzbHkgbmV3IElELCBhcyBkZXNjcmliZWQgYWJvdmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gYWxpYXMgQSB1bmlxdWUgaWRlbnRpZmllciB0aGF0IHlvdSB3YW50IHRvIHVzZSBmb3IgdGhpcyB1c2VyIGluIHRoZSBmdXR1cmUuXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IFtvcmlnaW5hbF0gVGhlIGN1cnJlbnQgaWRlbnRpZmllciBiZWluZyB1c2VkIGZvciB0aGlzIHVzZXIuXG4gICAgICovXG4gICAgYWxpYXMoYWxpYXM6IHN0cmluZywgb3JpZ2luYWw/OiBzdHJpbmcpOiBDYXB0dXJlUmVzdWx0IHwgdm9pZCB8IG51bWJlciB7XG4gICAgICAgIC8vIElmIHRoZSAkcGVvcGxlX2Rpc3RpbmN0X2lkIGtleSBleGlzdHMgaW4gcGVyc2lzdGVuY2UsIHRoZXJlIGhhcyBiZWVuIGEgcHJldmlvdXNcbiAgICAgICAgLy8gcG9zdGhvZy5wZW9wbGUuaWRlbnRpZnkoKSBjYWxsIG1hZGUgZm9yIHRoaXMgdXNlci4gSXQgaXMgVkVSWSBCQUQgdG8gbWFrZSBhbiBhbGlhcyB3aXRoXG4gICAgICAgIC8vIHRoaXMgSUQsIGFzIGl0IHdpbGwgZHVwbGljYXRlIHVzZXJzLlxuICAgICAgICBpZiAoYWxpYXMgPT09IHRoaXMuZ2V0X3Byb3BlcnR5KFBFT1BMRV9ESVNUSU5DVF9JRF9LRVkpKSB7XG4gICAgICAgICAgICBsb2dnZXIuY3JpdGljYWwoJ0F0dGVtcHRpbmcgdG8gY3JlYXRlIGFsaWFzIGZvciBleGlzdGluZyBQZW9wbGUgdXNlciAtIGFib3J0aW5nLicpXG4gICAgICAgICAgICByZXR1cm4gLTJcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChfaXNVbmRlZmluZWQob3JpZ2luYWwpKSB7XG4gICAgICAgICAgICBvcmlnaW5hbCA9IHRoaXMuZ2V0X2Rpc3RpbmN0X2lkKClcbiAgICAgICAgfVxuICAgICAgICBpZiAoYWxpYXMgIT09IG9yaWdpbmFsKSB7XG4gICAgICAgICAgICB0aGlzLl9yZWdpc3Rlcl9zaW5nbGUoQUxJQVNfSURfS0VZLCBhbGlhcylcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNhcHR1cmUoJyRjcmVhdGVfYWxpYXMnLCB7IGFsaWFzOiBhbGlhcywgZGlzdGluY3RfaWQ6IG9yaWdpbmFsIH0pXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsb2dnZXIud2FybignYWxpYXMgbWF0Y2hlcyBjdXJyZW50IGRpc3RpbmN0X2lkIC0gc2tpcHBpbmcgYXBpIGNhbGwuJylcbiAgICAgICAgICAgIHRoaXMuaWRlbnRpZnkoYWxpYXMpXG4gICAgICAgICAgICByZXR1cm4gLTFcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSB0aGUgY29uZmlndXJhdGlvbiBvZiBhIHBvc3Rob2cgbGlicmFyeSBpbnN0YW5jZS5cbiAgICAgKlxuICAgICAqIFRoZSBkZWZhdWx0IGNvbmZpZyBpczpcbiAgICAgKlxuICAgICAqICAgICB7XG4gICAgICogICAgICAgLy8gUG9zdEhvZyBBUEkgaG9zdFxuICAgICAqICAgICAgIGFwaV9ob3N0OiAnaHR0cHM6Ly9hcHAucG9zdGhvZy5jb20nLFxuICAgICAqXG4gICAgICogICAgICAgLy8gSFRUUCBtZXRob2QgZm9yIGNhcHR1cmluZyByZXF1ZXN0c1xuICAgICAqICAgICAgIGFwaV9tZXRob2Q6ICdQT1NUJ1xuICAgICAqXG4gICAgICogICAgICAgLy8gUG9zdEhvZyB3ZWIgYXBwIGhvc3QsIGN1cnJlbnRseSBvbmx5IHVzZWQgYnkgdGhlIFNlbnRyeSBpbnRlZ3JhdGlvbi5cbiAgICAgKiAgICAgICAvLyBUaGlzIHdpbGwgb25seSBiZSBkaWZmZXJlbnQgZnJvbSBhcGlfaG9zdCB3aGVuIHVzaW5nIGEgcmV2ZXJzZS1wcm94aWVkIEFQSSBob3N0IFx1MjAxMyBpbiB0aGF0IGNhc2VcbiAgICAgKiAgICAgICAvLyB0aGUgb3JpZ2luYWwgd2ViIGFwcCBob3N0IG5lZWRzIHRvIGJlIHBhc3NlZCBoZXJlIHNvIHRoYXQgbGlua3MgdG8gdGhlIHdlYiBhcHAgYXJlIHN0aWxsIGNvbnZlbmllbnQuXG4gICAgICogICAgICAgdWlfaG9zdDogJ2h0dHBzOi8vYXBwLnBvc3Rob2cuY29tJyxcbiAgICAgKlxuICAgICAqICAgICAgIC8vIEF1dG9tYXRpY2FsbHkgY2FwdHVyZSBjbGlja3MsIGZvcm0gc3VibWlzc2lvbnMgYW5kIGNoYW5nZSBldmVudHNcbiAgICAgKiAgICAgICBhdXRvY2FwdHVyZTogdHJ1ZVxuICAgICAqXG4gICAgICogICAgICAgLy8gQ2FwdHVyZSByYWdlIGNsaWNrc1xuICAgICAqICAgICAgIHJhZ2VjbGljazogdHJ1ZVxuICAgICAqXG4gICAgICogICAgICAgLy8gdHJhbnNwb3J0IGZvciBzZW5kaW5nIHJlcXVlc3RzICgnWEhSJyBvciAnc2VuZEJlYWNvbicpXG4gICAgICogICAgICAgLy8gTkI6IHNlbmRCZWFjb24gc2hvdWxkIG9ubHkgYmUgdXNlZCBmb3Igc2NlbmFyaW9zIHN1Y2ggYXNcbiAgICAgKiAgICAgICAvLyBwYWdlIHVubG9hZCB3aGVyZSBhIFwiYmVzdC1lZmZvcnRcIiBhdHRlbXB0IHRvIHNlbmQgaXNcbiAgICAgKiAgICAgICAvLyBhY2NlcHRhYmxlOyB0aGUgc2VuZEJlYWNvbiBBUEkgZG9lcyBub3Qgc3VwcG9ydCBjYWxsYmFja3NcbiAgICAgKiAgICAgICAvLyBvciBhbnkgd2F5IHRvIGtub3cgdGhlIHJlc3VsdCBvZiB0aGUgcmVxdWVzdC4gUG9zdEhvZ1xuICAgICAqICAgICAgIC8vIGNhcHR1cmluZyB2aWEgc2VuZEJlYWNvbiB3aWxsIG5vdCBzdXBwb3J0IGFueSBldmVudC1cbiAgICAgKiAgICAgICAvLyBiYXRjaGluZyBvciByZXRyeSBtZWNoYW5pc21zLlxuICAgICAqICAgICAgIGFwaV90cmFuc3BvcnQ6ICdYSFInXG4gICAgICpcbiAgICAgKiAgICAgICAvLyBzdXBlciBwcm9wZXJ0aWVzIGNvb2tpZSBleHBpcmF0aW9uIChpbiBkYXlzKVxuICAgICAqICAgICAgIGNvb2tpZV9leHBpcmF0aW9uOiAzNjVcbiAgICAgKlxuICAgICAqICAgICAgIC8vIHN1cGVyIHByb3BlcnRpZXMgc3BhbiBzdWJkb21haW5zXG4gICAgICogICAgICAgY3Jvc3Nfc3ViZG9tYWluX2Nvb2tpZTogdHJ1ZVxuICAgICAqXG4gICAgICogICAgICAgLy8gZGVidWcgbW9kZVxuICAgICAqICAgICAgIGRlYnVnOiBmYWxzZVxuICAgICAqXG4gICAgICogICAgICAgLy8gaWYgdGhpcyBpcyB0cnVlLCB0aGUgcG9zdGhvZyBjb29raWUgb3IgbG9jYWxTdG9yYWdlIGVudHJ5XG4gICAgICogICAgICAgLy8gd2lsbCBiZSBkZWxldGVkLCBhbmQgbm8gdXNlciBwZXJzaXN0ZW5jZSB3aWxsIHRha2UgcGxhY2VcbiAgICAgKiAgICAgICBkaXNhYmxlX3BlcnNpc3RlbmNlOiBmYWxzZVxuICAgICAqXG4gICAgICogICAgICAgLy8gaWYgdGhpcyBpcyB0cnVlLCBQb3N0SG9nIHdpbGwgYXV0b21hdGljYWxseSBkZXRlcm1pbmVcbiAgICAgKiAgICAgICAvLyBDaXR5LCBSZWdpb24gYW5kIENvdW50cnkgZGF0YSB1c2luZyB0aGUgSVAgYWRkcmVzcyBvZlxuICAgICAqICAgICAgIC8vdGhlIGNsaWVudFxuICAgICAqICAgICAgIGlwOiB0cnVlXG4gICAgICpcbiAgICAgKiAgICAgICAvLyBvcHQgdXNlcnMgb3V0IG9mIGNhcHR1cmluZyBieSB0aGlzIFBvc3RIb2cgaW5zdGFuY2UgYnkgZGVmYXVsdFxuICAgICAqICAgICAgIG9wdF9vdXRfY2FwdHVyaW5nX2J5X2RlZmF1bHQ6IGZhbHNlXG4gICAgICpcbiAgICAgKiAgICAgICAvLyBvcHQgdXNlcnMgb3V0IG9mIGJyb3dzZXIgZGF0YSBzdG9yYWdlIGJ5IHRoaXMgUG9zdEhvZyBpbnN0YW5jZSBieSBkZWZhdWx0XG4gICAgICogICAgICAgb3B0X291dF9wZXJzaXN0ZW5jZV9ieV9kZWZhdWx0OiBmYWxzZVxuICAgICAqXG4gICAgICogICAgICAgLy8gb3B0IG91dCBvZiB1c2VyIGFnZW50IGZpbHRlcmluZyBzdWNoIGFzIGdvb2dsZWJvdCBvciBvdGhlciBib3RzXG4gICAgICogICAgICAgb3B0X291dF91c2VyYWdlbnRfZmlsdGVyOiBmYWxzZVxuICAgICAqXG4gICAgICogICAgICAgLy8gcGVyc2lzdGVuY2UgbWVjaGFuaXNtIHVzZWQgYnkgb3B0LWluL29wdC1vdXQgbWV0aG9kcyAtIGNvb2tpZVxuICAgICAqICAgICAgIC8vIG9yIGxvY2FsU3RvcmFnZSAtIGZhbGxzIGJhY2sgdG8gY29va2llIGlmIGxvY2FsU3RvcmFnZSBpcyB1bmF2YWlsYWJsZVxuICAgICAqICAgICAgIG9wdF9vdXRfY2FwdHVyaW5nX3BlcnNpc3RlbmNlX3R5cGU6ICdsb2NhbFN0b3JhZ2UnXG4gICAgICpcbiAgICAgKiAgICAgICAvLyBjdXN0b21pemUgdGhlIG5hbWUgb2YgY29va2llL2xvY2FsU3RvcmFnZSBzZXQgYnkgb3B0LWluL29wdC1vdXQgbWV0aG9kc1xuICAgICAqICAgICAgIG9wdF9vdXRfY2FwdHVyaW5nX2Nvb2tpZV9wcmVmaXg6IG51bGxcbiAgICAgKlxuICAgICAqICAgICAgIC8vIHR5cGUgb2YgcGVyc2lzdGVudCBzdG9yZSBmb3Igc3VwZXIgcHJvcGVydGllcyAoY29va2llL1xuICAgICAqICAgICAgIC8vIGxvY2FsU3RvcmFnZSkgaWYgc2V0IHRvICdsb2NhbFN0b3JhZ2UnLCBhbnkgZXhpc3RpbmdcbiAgICAgKiAgICAgICAvLyBwb3N0aG9nIGNvb2tpZSB2YWx1ZSB3aXRoIHRoZSBzYW1lIHBlcnNpc3RlbmNlX25hbWVcbiAgICAgKiAgICAgICAvLyB3aWxsIGJlIHRyYW5zZmVycmVkIHRvIGxvY2FsU3RvcmFnZSBhbmQgZGVsZXRlZFxuICAgICAqICAgICAgIHBlcnNpc3RlbmNlOiAnY29va2llJ1xuICAgICAqXG4gICAgICogICAgICAgLy8gbmFtZSBmb3Igc3VwZXIgcHJvcGVydGllcyBwZXJzaXN0ZW50IHN0b3JlXG4gICAgICogICAgICAgcGVyc2lzdGVuY2VfbmFtZTogJydcbiAgICAgKlxuICAgICAqICAgICAgIC8vIGRlcHJlY2F0ZWQsIHVzZSBwcm9wZXJ0eV9kZW55bGlzdCBpbnN0ZWFkLlxuICAgICAqICAgICAgIC8vIG5hbWVzIG9mIHByb3BlcnRpZXMvc3VwZXJwcm9wZXJ0aWVzIHdoaWNoIHNob3VsZCBuZXZlclxuICAgICAqICAgICAgIC8vIGJlIHNlbnQgd2l0aCBjYXB0dXJlKCkgY2FsbHMuXG4gICAgICogICAgICAgcHJvcGVydHlfYmxhY2tsaXN0OiBbXVxuICAgICAqXG4gICAgICogICAgICAgLy8gbmFtZXMgb2YgcHJvcGVydGllcy9zdXBlcnByb3BlcnRpZXMgd2hpY2ggc2hvdWxkIG5ldmVyXG4gICAgICogICAgICAgLy8gYmUgc2VudCB3aXRoIGNhcHR1cmUoKSBjYWxscy5cbiAgICAgKiAgICAgICBwcm9wZXJ0eV9kZW55bGlzdDogW11cbiAgICAgKlxuICAgICAqICAgICAgIC8vIGlmIHRoaXMgaXMgdHJ1ZSwgcG9zdGhvZyBjb29raWVzIHdpbGwgYmUgbWFya2VkIGFzXG4gICAgICogICAgICAgLy8gc2VjdXJlLCBtZWFuaW5nIHRoZXkgd2lsbCBvbmx5IGJlIHRyYW5zbWl0dGVkIG92ZXIgaHR0cHNcbiAgICAgKiAgICAgICBzZWN1cmVfY29va2llOiBmYWxzZVxuICAgICAqXG4gICAgICogICAgICAgLy8gc2hvdWxkIHdlIGNhcHR1cmUgYSBwYWdlIHZpZXcgb24gcGFnZSBsb2FkXG4gICAgICogICAgICAgY2FwdHVyZV9wYWdldmlldzogdHJ1ZVxuICAgICAqXG4gICAgICogICAgICAgLy8gaWYgeW91IHNldCB1cGdyYWRlIHRvIGJlIHRydWUsIHRoZSBsaWJyYXJ5IHdpbGwgY2hlY2sgZm9yXG4gICAgICogICAgICAgLy8gYSBjb29raWUgZnJvbSBvdXIgb2xkIGpzIGxpYnJhcnkgYW5kIGltcG9ydCBzdXBlclxuICAgICAqICAgICAgIC8vIHByb3BlcnRpZXMgZnJvbSBpdCwgdGhlbiB0aGUgb2xkIGNvb2tpZSBpcyBkZWxldGVkXG4gICAgICogICAgICAgLy8gVGhlIHVwZ3JhZGUgY29uZmlnIG9wdGlvbiBvbmx5IHdvcmtzIGluIHRoZSBpbml0aWFsaXphdGlvbixcbiAgICAgKiAgICAgICAvLyBzbyBtYWtlIHN1cmUgeW91IHNldCBpdCB3aGVuIHlvdSBjcmVhdGUgdGhlIGxpYnJhcnkuXG4gICAgICogICAgICAgdXBncmFkZTogZmFsc2VcbiAgICAgKlxuICAgICAqICAgICAgIC8vIGlmIHRoaXMgaXMgdHJ1ZSwgc2Vzc2lvbiByZWNvcmRpbmcgaXMgYWx3YXlzIGRpc2FibGVkLlxuICAgICAqICAgICAgIGRpc2FibGVfc2Vzc2lvbl9yZWNvcmRpbmc6IGZhbHNlLFxuICAgICAqXG4gICAgICogICAgICAgLy8gZXh0cmEgSFRUUCByZXF1ZXN0IGhlYWRlcnMgdG8gc2V0IGZvciBlYWNoIEFQSSByZXF1ZXN0LCBpblxuICAgICAqICAgICAgIC8vIHRoZSBmb3JtYXQgeydIZWFkZXItTmFtZSc6IHZhbHVlfVxuICAgICAqICAgICAgIHJlc3BvbnNlX2hlYWRlcnM6IHt9XG4gICAgICpcbiAgICAgKiAgICAgICAvLyBwcm90b2NvbCBmb3IgZmV0Y2hpbmcgaW4tYXBwIG1lc3NhZ2UgcmVzb3VyY2VzLCBlLmcuXG4gICAgICogICAgICAgLy8gJ2h0dHBzOi8vJyBvciAnaHR0cDovLyc7IGRlZmF1bHRzIHRvICcvLycgKHdoaWNoIGRlZmVycyB0byB0aGVcbiAgICAgKiAgICAgICAvLyBjdXJyZW50IHBhZ2UncyBwcm90b2NvbClcbiAgICAgKiAgICAgICBpbmFwcF9wcm90b2NvbDogJy8vJ1xuICAgICAqXG4gICAgICogICAgICAgLy8gd2hldGhlciB0byBvcGVuIGluLWFwcCBtZXNzYWdlIGxpbmsgaW4gbmV3IHRhYi93aW5kb3dcbiAgICAgKiAgICAgICBpbmFwcF9saW5rX25ld193aW5kb3c6IGZhbHNlXG4gICAgICpcbiAgICAgKiAgICAgIC8vIGEgc2V0IG9mIHJyd2ViIGNvbmZpZyBvcHRpb25zIHRoYXQgUG9zdEhvZyB1c2VycyBjYW4gY29uZmlndXJlXG4gICAgICogICAgICAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3Jyd2ViLWlvL3Jyd2ViL2Jsb2IvbWFzdGVyL2d1aWRlLm1kXG4gICAgICogICAgICBzZXNzaW9uX3JlY29yZGluZzoge1xuICAgICAqICAgICAgICAgYmxvY2tDbGFzczogJ3BoLW5vLWNhcHR1cmUnLFxuICAgICAqICAgICAgICAgYmxvY2tTZWxlY3RvcjogbnVsbCxcbiAgICAgKiAgICAgICAgIGlnbm9yZUNsYXNzOiAncGgtaWdub3JlLWlucHV0JyxcbiAgICAgKiAgICAgICAgIG1hc2tBbGxJbnB1dHM6IHRydWUsXG4gICAgICogICAgICAgICBtYXNrSW5wdXRPcHRpb25zOiB7fSxcbiAgICAgKiAgICAgICAgIG1hc2tJbnB1dEZuOiBudWxsLFxuICAgICAqICAgICAgICAgc2xpbURPTU9wdGlvbnM6IHt9LFxuICAgICAqICAgICAgICAgY29sbGVjdEZvbnRzOiBmYWxzZVxuICAgICAqICAgICAgfVxuICAgICAqXG4gICAgICogICAgICAvLyBwcmV2ZW50IGF1dG9jYXB0dXJlIGZyb20gY2FwdHVyaW5nIGFueSBhdHRyaWJ1dGUgbmFtZXMgb24gZWxlbWVudHNcbiAgICAgKiAgICAgIG1hc2tfYWxsX2VsZW1lbnRfYXR0cmlidXRlczogZmFsc2VcbiAgICAgKlxuICAgICAqICAgICAgLy8gcHJldmVudCBhdXRvY2FwdHVyZSBmcm9tIGNhcHR1cmluZyB0ZXh0Q29udGVudCBvbiBhbGwgZWxlbWVudHNcbiAgICAgKiAgICAgIG1hc2tfYWxsX3RleHQ6IGZhbHNlXG4gICAgICpcbiAgICAgKiAgICAgIC8vIEFub255bW91cyB1c2VycyBnZXQgYSByYW5kb20gVVVJRCBhcyB0aGVpciBkZXZpY2UgYnkgZGVmYXVsdC5cbiAgICAgKiAgICAgIC8vIFRoaXMgb3B0aW9uIGFsbG93cyBvdmVycmlkaW5nIHRoYXQgb3B0aW9uLlxuICAgICAqICAgICAgZ2V0X2RldmljZV9pZDogKHV1aWQpID0+IHV1aWRcbiAgICAgKiAgICAgfVxuICAgICAqXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gY29uZmlnIEEgZGljdGlvbmFyeSBvZiBuZXcgY29uZmlndXJhdGlvbiB2YWx1ZXMgdG8gdXBkYXRlXG4gICAgICovXG5cbiAgICBzZXRfY29uZmlnKGNvbmZpZzogUGFydGlhbDxQb3N0SG9nQ29uZmlnPik6IHZvaWQge1xuICAgICAgICBjb25zdCBvbGRDb25maWcgPSB7IC4uLnRoaXMuY29uZmlnIH1cbiAgICAgICAgaWYgKF9pc09iamVjdChjb25maWcpKSB7XG4gICAgICAgICAgICBfZXh0ZW5kKHRoaXMuY29uZmlnLCBjb25maWcpXG5cbiAgICAgICAgICAgIGlmICghdGhpcy5jb25maWcucGVyc2lzdGVuY2VfbmFtZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLnBlcnNpc3RlbmNlX25hbWUgPSB0aGlzLmNvbmZpZy5jb29raWVfbmFtZVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0aGlzLmNvbmZpZy5kaXNhYmxlX3BlcnNpc3RlbmNlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb25maWcuZGlzYWJsZV9wZXJzaXN0ZW5jZSA9IHRoaXMuY29uZmlnLmRpc2FibGVfY29va2llXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMucGVyc2lzdGVuY2U/LnVwZGF0ZV9jb25maWcodGhpcy5jb25maWcsIG9sZENvbmZpZylcbiAgICAgICAgICAgIHRoaXMuc2Vzc2lvblBlcnNpc3RlbmNlID1cbiAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5wZXJzaXN0ZW5jZSA9PT0gJ3Nlc3Npb25TdG9yYWdlJ1xuICAgICAgICAgICAgICAgICAgICA/IHRoaXMucGVyc2lzdGVuY2VcbiAgICAgICAgICAgICAgICAgICAgOiBuZXcgUG9zdEhvZ1BlcnNpc3RlbmNlKHsgLi4udGhpcy5jb25maWcsIHBlcnNpc3RlbmNlOiAnc2Vzc2lvblN0b3JhZ2UnIH0pXG5cbiAgICAgICAgICAgIGlmIChsb2NhbFN0b3JlLmlzX3N1cHBvcnRlZCgpICYmIGxvY2FsU3RvcmUuZ2V0KCdwaF9kZWJ1ZycpID09PSAndHJ1ZScpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5kZWJ1ZyA9IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZy5kZWJ1Zykge1xuICAgICAgICAgICAgICAgIENvbmZpZy5ERUJVRyA9IHRydWVcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHRoaXMuc2Vzc2lvblJlY29yZGluZyAmJiAhX2lzVW5kZWZpbmVkKGNvbmZpZy5kaXNhYmxlX3Nlc3Npb25fcmVjb3JkaW5nKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRpc2FibGVfc2Vzc2lvbl9yZWNvcmRpbmdfaGFzX2NoYW5nZWQgPVxuICAgICAgICAgICAgICAgICAgICBvbGRDb25maWcuZGlzYWJsZV9zZXNzaW9uX3JlY29yZGluZyAhPT0gY29uZmlnLmRpc2FibGVfc2Vzc2lvbl9yZWNvcmRpbmdcbiAgICAgICAgICAgICAgICAvLyBpZiBvcHRpbmcgYmFjayBpbiwgdGhpcyBjb25maWcgbWlnaHQgbm90IGhhdmUgY2hhbmdlZFxuICAgICAgICAgICAgICAgIGNvbnN0IHRyeV9lbmFibGVfYWZ0ZXJfb3B0X2luID1cbiAgICAgICAgICAgICAgICAgICAgIXVzZXJPcHRlZE91dCh0aGlzKSAmJiAhY29uZmlnLmRpc2FibGVfc2Vzc2lvbl9yZWNvcmRpbmcgJiYgIXRoaXMuc2Vzc2lvblJlY29yZGluZy5zdGFydGVkXG5cbiAgICAgICAgICAgICAgICBpZiAoZGlzYWJsZV9zZXNzaW9uX3JlY29yZGluZ19oYXNfY2hhbmdlZCB8fCB0cnlfZW5hYmxlX2FmdGVyX29wdF9pbikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29uZmlnLmRpc2FibGVfc2Vzc2lvbl9yZWNvcmRpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2Vzc2lvblJlY29yZGluZy5zdG9wUmVjb3JkaW5nKClcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2Vzc2lvblJlY29yZGluZy5zdGFydFJlY29yZGluZ0lmRW5hYmxlZCgpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiB0dXJucyBzZXNzaW9uIHJlY29yZGluZyBvbiwgYW5kIHVwZGF0ZXMgdGhlIGNvbmZpZyBvcHRpb25cbiAgICAgKiBkaXNhYmxlX3Nlc3Npb25fcmVjb3JkaW5nIHRvIGZhbHNlXG4gICAgICovXG4gICAgc3RhcnRTZXNzaW9uUmVjb3JkaW5nKCk6IHZvaWQge1xuICAgICAgICB0aGlzLnNldF9jb25maWcoeyBkaXNhYmxlX3Nlc3Npb25fcmVjb3JkaW5nOiBmYWxzZSB9KVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHR1cm5zIHNlc3Npb24gcmVjb3JkaW5nIG9mZiwgYW5kIHVwZGF0ZXMgdGhlIGNvbmZpZyBvcHRpb25cbiAgICAgKiBkaXNhYmxlX3Nlc3Npb25fcmVjb3JkaW5nIHRvIHRydWVcbiAgICAgKi9cbiAgICBzdG9wU2Vzc2lvblJlY29yZGluZygpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5zZXRfY29uZmlnKHsgZGlzYWJsZV9zZXNzaW9uX3JlY29yZGluZzogdHJ1ZSB9KVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHJldHVybnMgYSBib29sZWFuIGluZGljYXRpbmcgd2hldGhlciBzZXNzaW9uIHJlY29yZGluZ1xuICAgICAqIGlzIGN1cnJlbnRseSBydW5uaW5nXG4gICAgICovXG4gICAgc2Vzc2lvblJlY29yZGluZ1N0YXJ0ZWQoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuc2Vzc2lvblJlY29yZGluZz8uc3RhcnRlZFxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHJldHVybnMgYSBib29sZWFuIGluZGljYXRpbmcgd2hldGhlciB0aGUgdG9vbGJhciBsb2FkZWRcbiAgICAgKiBAcGFyYW0gdG9vbGJhclBhcmFtc1xuICAgICAqL1xuXG4gICAgbG9hZFRvb2xiYXIocGFyYW1zOiBUb29sYmFyUGFyYW1zKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLnRvb2xiYXIubG9hZFRvb2xiYXIocGFyYW1zKVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHZhbHVlIG9mIHRoZSBzdXBlciBwcm9wZXJ0eSBuYW1lZCBwcm9wZXJ0eV9uYW1lLiBJZiBubyBzdWNoXG4gICAgICogcHJvcGVydHkgaXMgc2V0LCBnZXRfcHJvcGVydHkoKSB3aWxsIHJldHVybiB0aGUgdW5kZWZpbmVkIHZhbHVlLlxuICAgICAqXG4gICAgICogIyMjIE5vdGVzOlxuICAgICAqXG4gICAgICogZ2V0X3Byb3BlcnR5KCkgY2FuIG9ubHkgYmUgY2FsbGVkIGFmdGVyIHRoZSBQb3N0SG9nIGxpYnJhcnkgaGFzIGZpbmlzaGVkIGxvYWRpbmcuXG4gICAgICogaW5pdCgpIGhhcyBhIGxvYWRlZCBmdW5jdGlvbiBhdmFpbGFibGUgdG8gaGFuZGxlIHRoaXMgYXV0b21hdGljYWxseS4gRm9yIGV4YW1wbGU6XG4gICAgICpcbiAgICAgKiAgICAgLy8gZ3JhYiB2YWx1ZSBmb3IgJyR1c2VyX2lkJyBhZnRlciB0aGUgcG9zdGhvZyBsaWJyYXJ5IGhhcyBsb2FkZWRcbiAgICAgKiAgICAgcG9zdGhvZy5pbml0KCdZT1VSIFBST0pFQ1QgVE9LRU4nLCB7XG4gICAgICogICAgICAgICBsb2FkZWQ6IGZ1bmN0aW9uKHBvc3Rob2cpIHtcbiAgICAgKiAgICAgICAgICAgICB1c2VyX2lkID0gcG9zdGhvZy5nZXRfcHJvcGVydHkoJyR1c2VyX2lkJyk7XG4gICAgICogICAgICAgICB9XG4gICAgICogICAgIH0pO1xuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHByb3BlcnR5X25hbWUgVGhlIG5hbWUgb2YgdGhlIHN1cGVyIHByb3BlcnR5IHlvdSB3YW50IHRvIHJldHJpZXZlXG4gICAgICovXG4gICAgZ2V0X3Byb3BlcnR5KHByb3BlcnR5X25hbWU6IHN0cmluZyk6IFByb3BlcnR5IHwgdW5kZWZpbmVkIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGVyc2lzdGVuY2U/LlsncHJvcHMnXVtwcm9wZXJ0eV9uYW1lXVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHZhbHVlIG9mIHRoZSBzZXNzaW9uIHN1cGVyIHByb3BlcnR5IG5hbWVkIHByb3BlcnR5X25hbWUuIElmIG5vIHN1Y2hcbiAgICAgKiBwcm9wZXJ0eSBpcyBzZXQsIGdldFNlc3Npb25Qcm9wZXJ0eSgpIHdpbGwgcmV0dXJuIHRoZSB1bmRlZmluZWQgdmFsdWUuXG4gICAgICpcbiAgICAgKiAjIyMgTm90ZXM6XG4gICAgICpcbiAgICAgKiBUaGlzIGlzIGJhc2VkIG9uIGJyb3dzZXItbGV2ZWwgYHNlc3Npb25TdG9yYWdlYCwgTk9UIHRoZSBQb3N0SG9nIHNlc3Npb24uXG4gICAgICogZ2V0U2Vzc2lvblByb3BlcnR5KCkgY2FuIG9ubHkgYmUgY2FsbGVkIGFmdGVyIHRoZSBQb3N0SG9nIGxpYnJhcnkgaGFzIGZpbmlzaGVkIGxvYWRpbmcuXG4gICAgICogaW5pdCgpIGhhcyBhIGxvYWRlZCBmdW5jdGlvbiBhdmFpbGFibGUgdG8gaGFuZGxlIHRoaXMgYXV0b21hdGljYWxseS4gRm9yIGV4YW1wbGU6XG4gICAgICpcbiAgICAgKiAgICAgLy8gZ3JhYiB2YWx1ZSBmb3IgJ3VzZXJfaWQnIGFmdGVyIHRoZSBwb3N0aG9nIGxpYnJhcnkgaGFzIGxvYWRlZFxuICAgICAqICAgICBwb3N0aG9nLmluaXQoJ1lPVVIgUFJPSkVDVCBUT0tFTicsIHtcbiAgICAgKiAgICAgICAgIGxvYWRlZDogZnVuY3Rpb24ocG9zdGhvZykge1xuICAgICAqICAgICAgICAgICAgIHVzZXJfaWQgPSBwb3N0aG9nLmdldFNlc3Npb25Qcm9wZXJ0eSgndXNlcl9pZCcpO1xuICAgICAqICAgICAgICAgfVxuICAgICAqICAgICB9KTtcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0eV9uYW1lIFRoZSBuYW1lIG9mIHRoZSBzZXNzaW9uIHN1cGVyIHByb3BlcnR5IHlvdSB3YW50IHRvIHJldHJpZXZlXG4gICAgICovXG4gICAgZ2V0U2Vzc2lvblByb3BlcnR5KHByb3BlcnR5X25hbWU6IHN0cmluZyk6IFByb3BlcnR5IHwgdW5kZWZpbmVkIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2Vzc2lvblBlcnNpc3RlbmNlPy5bJ3Byb3BzJ11bcHJvcGVydHlfbmFtZV1cbiAgICB9XG5cbiAgICB0b1N0cmluZygpOiBzdHJpbmcge1xuICAgICAgICBsZXQgbmFtZSA9IHRoaXMuY29uZmlnLm5hbWUgPz8gUFJJTUFSWV9JTlNUQU5DRV9OQU1FXG4gICAgICAgIGlmIChuYW1lICE9PSBQUklNQVJZX0lOU1RBTkNFX05BTUUpIHtcbiAgICAgICAgICAgIG5hbWUgPSBQUklNQVJZX0lOU1RBTkNFX05BTUUgKyAnLicgKyBuYW1lXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5hbWVcbiAgICB9XG5cbiAgICAvLyBwZXJmb3JtIHNvbWUgaG91c2VrZWVwaW5nIGFyb3VuZCBHRFBSIG9wdC1pbi9vdXQgc3RhdGVcbiAgICBfZ2Rwcl9pbml0KCk6IHZvaWQge1xuICAgICAgICBjb25zdCBpc19sb2NhbFN0b3JhZ2VfcmVxdWVzdGVkID0gdGhpcy5jb25maWcub3B0X291dF9jYXB0dXJpbmdfcGVyc2lzdGVuY2VfdHlwZSA9PT0gJ2xvY2FsU3RvcmFnZSdcblxuICAgICAgICAvLyB0cnkgdG8gY29udmVydCBvcHQtaW4vb3V0IGNvb2tpZXMgdG8gbG9jYWxTdG9yYWdlIGlmIHBvc3NpYmxlXG4gICAgICAgIGlmIChpc19sb2NhbFN0b3JhZ2VfcmVxdWVzdGVkICYmIGxvY2FsU3RvcmUuaXNfc3VwcG9ydGVkKCkpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5oYXNfb3B0ZWRfaW5fY2FwdHVyaW5nKCkgJiYgdGhpcy5oYXNfb3B0ZWRfaW5fY2FwdHVyaW5nKHsgcGVyc2lzdGVuY2VfdHlwZTogJ2Nvb2tpZScgfSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9wdF9pbl9jYXB0dXJpbmcoeyBlbmFibGVfcGVyc2lzdGVuY2U6IGZhbHNlIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXRoaXMuaGFzX29wdGVkX291dF9jYXB0dXJpbmcoKSAmJiB0aGlzLmhhc19vcHRlZF9vdXRfY2FwdHVyaW5nKHsgcGVyc2lzdGVuY2VfdHlwZTogJ2Nvb2tpZScgfSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9wdF9vdXRfY2FwdHVyaW5nKHsgY2xlYXJfcGVyc2lzdGVuY2U6IGZhbHNlIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNsZWFyX29wdF9pbl9vdXRfY2FwdHVyaW5nKHtcbiAgICAgICAgICAgICAgICBwZXJzaXN0ZW5jZV90eXBlOiAnY29va2llJyxcbiAgICAgICAgICAgICAgICBlbmFibGVfcGVyc2lzdGVuY2U6IGZhbHNlLFxuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGNoZWNrIHdoZXRoZXIgdGhlIHVzZXIgaGFzIGFscmVhZHkgb3B0ZWQgb3V0IC0gaWYgc28sIGNsZWFyICYgZGlzYWJsZSBwZXJzaXN0ZW5jZVxuICAgICAgICBpZiAodGhpcy5oYXNfb3B0ZWRfb3V0X2NhcHR1cmluZygpKSB7XG4gICAgICAgICAgICB0aGlzLl9nZHByX3VwZGF0ZV9wZXJzaXN0ZW5jZSh7IGNsZWFyX3BlcnNpc3RlbmNlOiB0cnVlIH0pXG5cbiAgICAgICAgICAgIC8vIGNoZWNrIHdoZXRoZXIgd2Ugc2hvdWxkIG9wdCBvdXQgYnkgZGVmYXVsdFxuICAgICAgICAgICAgLy8gbm90ZTogd2UgZG9uJ3QgY2xlYXIgcGVyc2lzdGVuY2UgaGVyZSBieSBkZWZhdWx0IHNpbmNlIG9wdC1vdXQgZGVmYXVsdCBzdGF0ZSBpcyBvZnRlblxuICAgICAgICAgICAgLy8gICAgICAgdXNlZCBhcyBhbiBpbml0aWFsIHN0YXRlIHdoaWxlIEdEUFIgaW5mb3JtYXRpb24gaXMgYmVpbmcgY29sbGVjdGVkXG4gICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAhdGhpcy5oYXNfb3B0ZWRfaW5fY2FwdHVyaW5nKCkgJiZcbiAgICAgICAgICAgICh0aGlzLmNvbmZpZy5vcHRfb3V0X2NhcHR1cmluZ19ieV9kZWZhdWx0IHx8IGNvb2tpZVN0b3JlLmdldCgncGhfb3B0b3V0JykpXG4gICAgICAgICkge1xuICAgICAgICAgICAgY29va2llU3RvcmUucmVtb3ZlKCdwaF9vcHRvdXQnKVxuICAgICAgICAgICAgdGhpcy5vcHRfb3V0X2NhcHR1cmluZyh7XG4gICAgICAgICAgICAgICAgY2xlYXJfcGVyc2lzdGVuY2U6IHRoaXMuY29uZmlnLm9wdF9vdXRfcGVyc2lzdGVuY2VfYnlfZGVmYXVsdCxcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFbmFibGUgb3IgZGlzYWJsZSBwZXJzaXN0ZW5jZSBiYXNlZCBvbiBvcHRpb25zXG4gICAgICogb25seSBlbmFibGUvZGlzYWJsZSBpZiBwZXJzaXN0ZW5jZSBpcyBub3QgYWxyZWFkeSBpbiB0aGlzIHN0YXRlXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5jbGVhcl9wZXJzaXN0ZW5jZV0gSWYgdHJ1ZSwgd2lsbCBkZWxldGUgYWxsIGRhdGEgc3RvcmVkIGJ5IHRoZSBzZGsgaW4gcGVyc2lzdGVuY2UgYW5kIGRpc2FibGUgaXRcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmVuYWJsZV9wZXJzaXN0ZW5jZV0gSWYgdHJ1ZSwgd2lsbCByZS1lbmFibGUgc2RrIHBlcnNpc3RlbmNlXG4gICAgICovXG4gICAgX2dkcHJfdXBkYXRlX3BlcnNpc3RlbmNlKG9wdGlvbnM6IFBhcnRpYWw8T3B0SW5PdXRDYXB0dXJpbmdPcHRpb25zPik6IHZvaWQge1xuICAgICAgICBsZXQgZGlzYWJsZWRcbiAgICAgICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9uc1snY2xlYXJfcGVyc2lzdGVuY2UnXSkge1xuICAgICAgICAgICAgZGlzYWJsZWQgPSB0cnVlXG4gICAgICAgIH0gZWxzZSBpZiAob3B0aW9ucyAmJiBvcHRpb25zWydlbmFibGVfcGVyc2lzdGVuY2UnXSkge1xuICAgICAgICAgICAgZGlzYWJsZWQgPSBmYWxzZVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXRoaXMuY29uZmlnLmRpc2FibGVfcGVyc2lzdGVuY2UgJiYgdGhpcy5wZXJzaXN0ZW5jZT8uZGlzYWJsZWQgIT09IGRpc2FibGVkKSB7XG4gICAgICAgICAgICB0aGlzLnBlcnNpc3RlbmNlPy5zZXRfZGlzYWJsZWQoZGlzYWJsZWQpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLmNvbmZpZy5kaXNhYmxlX3BlcnNpc3RlbmNlICYmIHRoaXMuc2Vzc2lvblBlcnNpc3RlbmNlPy5kaXNhYmxlZCAhPT0gZGlzYWJsZWQpIHtcbiAgICAgICAgICAgIHRoaXMuc2Vzc2lvblBlcnNpc3RlbmNlPy5zZXRfZGlzYWJsZWQoZGlzYWJsZWQpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBjYWxsIGEgYmFzZSBnZHByIGZ1bmN0aW9uIGFmdGVyIGNvbnN0cnVjdGluZyB0aGUgYXBwcm9wcmlhdGUgdG9rZW4gYW5kIG9wdGlvbnMgYXJnc1xuICAgIF9nZHByX2NhbGxfZnVuYzxSID0gYW55PihcbiAgICAgICAgZnVuYzogKHRva2VuOiBzdHJpbmcsIG9wdGlvbnM6IEdEUFJPcHRpb25zKSA9PiBSLFxuICAgICAgICBvcHRpb25zPzogUGFydGlhbDxPcHRJbk91dENhcHR1cmluZ09wdGlvbnM+XG4gICAgKTogUiB7XG4gICAgICAgIG9wdGlvbnMgPSBfZXh0ZW5kKFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNhcHR1cmU6IHRoaXMuY2FwdHVyZS5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgICAgIHBlcnNpc3RlbmNlX3R5cGU6IHRoaXMuY29uZmlnLm9wdF9vdXRfY2FwdHVyaW5nX3BlcnNpc3RlbmNlX3R5cGUsXG4gICAgICAgICAgICAgICAgY29va2llX3ByZWZpeDogdGhpcy5jb25maWcub3B0X291dF9jYXB0dXJpbmdfY29va2llX3ByZWZpeCxcbiAgICAgICAgICAgICAgICBjb29raWVfZXhwaXJhdGlvbjogdGhpcy5jb25maWcuY29va2llX2V4cGlyYXRpb24sXG4gICAgICAgICAgICAgICAgY3Jvc3Nfc3ViZG9tYWluX2Nvb2tpZTogdGhpcy5jb25maWcuY3Jvc3Nfc3ViZG9tYWluX2Nvb2tpZSxcbiAgICAgICAgICAgICAgICBzZWN1cmVfY29va2llOiB0aGlzLmNvbmZpZy5zZWN1cmVfY29va2llLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9wdGlvbnMgfHwge31cbiAgICAgICAgKVxuXG4gICAgICAgIC8vIGNoZWNrIGlmIGxvY2FsU3RvcmFnZSBjYW4gYmUgdXNlZCBmb3IgcmVjb3JkaW5nIG9wdCBvdXQgc3RhdHVzLCBmYWxsIGJhY2sgdG8gY29va2llIGlmIG5vdFxuICAgICAgICBpZiAoIWxvY2FsU3RvcmUuaXNfc3VwcG9ydGVkKCkgJiYgb3B0aW9uc1sncGVyc2lzdGVuY2VfdHlwZSddID09PSAnbG9jYWxTdG9yYWdlJykge1xuICAgICAgICAgICAgb3B0aW9uc1sncGVyc2lzdGVuY2VfdHlwZSddID0gJ2Nvb2tpZSdcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmdW5jKHRoaXMuY29uZmlnLnRva2VuLCB7XG4gICAgICAgICAgICBjYXB0dXJlOiBvcHRpb25zWydjYXB0dXJlJ10sXG4gICAgICAgICAgICBjYXB0dXJlRXZlbnROYW1lOiBvcHRpb25zWydjYXB0dXJlX2V2ZW50X25hbWUnXSxcbiAgICAgICAgICAgIGNhcHR1cmVQcm9wZXJ0aWVzOiBvcHRpb25zWydjYXB0dXJlX3Byb3BlcnRpZXMnXSxcbiAgICAgICAgICAgIHBlcnNpc3RlbmNlVHlwZTogb3B0aW9uc1sncGVyc2lzdGVuY2VfdHlwZSddLFxuICAgICAgICAgICAgcGVyc2lzdGVuY2VQcmVmaXg6IG9wdGlvbnNbJ2Nvb2tpZV9wcmVmaXgnXSxcbiAgICAgICAgICAgIGNvb2tpZUV4cGlyYXRpb246IG9wdGlvbnNbJ2Nvb2tpZV9leHBpcmF0aW9uJ10sXG4gICAgICAgICAgICBjcm9zc1N1YmRvbWFpbkNvb2tpZTogb3B0aW9uc1snY3Jvc3Nfc3ViZG9tYWluX2Nvb2tpZSddLFxuICAgICAgICAgICAgc2VjdXJlQ29va2llOiBvcHRpb25zWydzZWN1cmVfY29va2llJ10sXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogT3B0IHRoZSB1c2VyIGluIHRvIGRhdGEgY2FwdHVyaW5nIGFuZCBjb29raWVzL2xvY2Fsc3RvcmFnZSBmb3IgdGhpcyBQb3N0SG9nIGluc3RhbmNlXG4gICAgICpcbiAgICAgKiAjIyMgVXNhZ2VcbiAgICAgKlxuICAgICAqICAgICAvLyBvcHQgdXNlciBpblxuICAgICAqICAgICBwb3N0aG9nLm9wdF9pbl9jYXB0dXJpbmcoKTtcbiAgICAgKlxuICAgICAqICAgICAvLyBvcHQgdXNlciBpbiB3aXRoIHNwZWNpZmljIGV2ZW50IG5hbWUsIHByb3BlcnRpZXMsIGNvb2tpZSBjb25maWd1cmF0aW9uXG4gICAgICogICAgIHBvc3Rob2cub3B0X2luX2NhcHR1cmluZyh7XG4gICAgICogICAgICAgICBjYXB0dXJlX2V2ZW50X25hbWU6ICdVc2VyIG9wdGVkIGluJyxcbiAgICAgKiAgICAgICAgIGNhcHR1cmVfZXZlbnRfcHJvcGVydGllczoge1xuICAgICAqICAgICAgICAgICAgICdFbWFpbCc6ICdqZG9lQGV4YW1wbGUuY29tJ1xuICAgICAqICAgICAgICAgfSxcbiAgICAgKiAgICAgICAgIGNvb2tpZV9leHBpcmF0aW9uOiAzMCxcbiAgICAgKiAgICAgICAgIHNlY3VyZV9jb29raWU6IHRydWVcbiAgICAgKiAgICAgfSk7XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIEEgZGljdGlvbmFyeSBvZiBjb25maWcgb3B0aW9ucyB0byBvdmVycmlkZVxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IFtvcHRpb25zLmNhcHR1cmVdIEZ1bmN0aW9uIHVzZWQgZm9yIGNhcHR1cmluZyBhIFBvc3RIb2cgZXZlbnQgdG8gcmVjb3JkIHRoZSBvcHQtaW4gYWN0aW9uIChkZWZhdWx0IGlzIHRoaXMgUG9zdEhvZyBpbnN0YW5jZSdzIGNhcHR1cmUgbWV0aG9kKVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5jYXB0dXJlX2V2ZW50X25hbWU9JG9wdF9pbl0gRXZlbnQgbmFtZSB0byBiZSB1c2VkIGZvciBjYXB0dXJpbmcgdGhlIG9wdC1pbiBhY3Rpb25cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnMuY2FwdHVyZV9wcm9wZXJ0aWVzXSBTZXQgb2YgcHJvcGVydGllcyB0byBiZSBjYXB0dXJlZCBhbG9uZyB3aXRoIHRoZSBvcHQtaW4gYWN0aW9uXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5lbmFibGVfcGVyc2lzdGVuY2U9dHJ1ZV0gSWYgdHJ1ZSwgd2lsbCByZS1lbmFibGUgc2RrIHBlcnNpc3RlbmNlXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLnBlcnNpc3RlbmNlX3R5cGU9bG9jYWxTdG9yYWdlXSBQZXJzaXN0ZW5jZSBtZWNoYW5pc20gdXNlZCAtIGNvb2tpZSBvciBsb2NhbFN0b3JhZ2UgLSBmYWxscyBiYWNrIHRvIGNvb2tpZSBpZiBsb2NhbFN0b3JhZ2UgaXMgdW5hdmFpbGFibGVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMuY29va2llX3ByZWZpeD1fX3BoX29wdF9pbl9vdXRdIEN1c3RvbSBwcmVmaXggdG8gYmUgdXNlZCBpbiB0aGUgY29va2llL2xvY2Fsc3RvcmFnZSBuYW1lXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IFtvcHRpb25zLmNvb2tpZV9leHBpcmF0aW9uXSBOdW1iZXIgb2YgZGF5cyB1bnRpbCB0aGUgb3B0LWluIGNvb2tpZSBleHBpcmVzIChvdmVycmlkZXMgdmFsdWUgc3BlY2lmaWVkIGluIHRoaXMgUG9zdEhvZyBpbnN0YW5jZSdzIGNvbmZpZylcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmNyb3NzX3N1YmRvbWFpbl9jb29raWVdIFdoZXRoZXIgdGhlIG9wdC1pbiBjb29raWUgaXMgc2V0IGFzIGNyb3NzLXN1YmRvbWFpbiBvciBub3QgKG92ZXJyaWRlcyB2YWx1ZSBzcGVjaWZpZWQgaW4gdGhpcyBQb3N0SG9nIGluc3RhbmNlJ3MgY29uZmlnKVxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuc2VjdXJlX2Nvb2tpZV0gV2hldGhlciB0aGUgb3B0LWluIGNvb2tpZSBpcyBzZXQgYXMgc2VjdXJlIG9yIG5vdCAob3ZlcnJpZGVzIHZhbHVlIHNwZWNpZmllZCBpbiB0aGlzIFBvc3RIb2cgaW5zdGFuY2UncyBjb25maWcpXG4gICAgICovXG4gICAgb3B0X2luX2NhcHR1cmluZyhvcHRpb25zPzogUGFydGlhbDxPcHRJbk91dENhcHR1cmluZ09wdGlvbnM+KTogdm9pZCB7XG4gICAgICAgIG9wdGlvbnMgPSBfZXh0ZW5kKFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGVuYWJsZV9wZXJzaXN0ZW5jZTogdHJ1ZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvcHRpb25zIHx8IHt9XG4gICAgICAgIClcblxuICAgICAgICB0aGlzLl9nZHByX2NhbGxfZnVuYyhvcHRJbiwgb3B0aW9ucylcbiAgICAgICAgdGhpcy5fZ2Rwcl91cGRhdGVfcGVyc2lzdGVuY2Uob3B0aW9ucylcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBPcHQgdGhlIHVzZXIgb3V0IG9mIGRhdGEgY2FwdHVyaW5nIGFuZCBjb29raWVzL2xvY2Fsc3RvcmFnZSBmb3IgdGhpcyBQb3N0SG9nIGluc3RhbmNlXG4gICAgICpcbiAgICAgKiAjIyMgVXNhZ2VcbiAgICAgKlxuICAgICAqICAgICAvLyBvcHQgdXNlciBvdXRcbiAgICAgKiAgICAgcG9zdGhvZy5vcHRfb3V0X2NhcHR1cmluZygpO1xuICAgICAqXG4gICAgICogICAgIC8vIG9wdCB1c2VyIG91dCB3aXRoIGRpZmZlcmVudCBjb29raWUgY29uZmlndXJhdGlvbiBmcm9tIFBvc3RIb2cgaW5zdGFuY2VcbiAgICAgKiAgICAgcG9zdGhvZy5vcHRfb3V0X2NhcHR1cmluZyh7XG4gICAgICogICAgICAgICBjb29raWVfZXhwaXJhdGlvbjogMzAsXG4gICAgICogICAgICAgICBzZWN1cmVfY29va2llOiB0cnVlXG4gICAgICogICAgIH0pO1xuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSBBIGRpY3Rpb25hcnkgb2YgY29uZmlnIG9wdGlvbnMgdG8gb3ZlcnJpZGVcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmNsZWFyX3BlcnNpc3RlbmNlPXRydWVdIElmIHRydWUsIHdpbGwgZGVsZXRlIGFsbCBkYXRhIHN0b3JlZCBieSB0aGUgc2RrIGluIHBlcnNpc3RlbmNlXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLnBlcnNpc3RlbmNlX3R5cGU9bG9jYWxTdG9yYWdlXSBQZXJzaXN0ZW5jZSBtZWNoYW5pc20gdXNlZCAtIGNvb2tpZSBvciBsb2NhbFN0b3JhZ2UgLSBmYWxscyBiYWNrIHRvIGNvb2tpZSBpZiBsb2NhbFN0b3JhZ2UgaXMgdW5hdmFpbGFibGVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMuY29va2llX3ByZWZpeD1fX3BoX29wdF9pbl9vdXRdIEN1c3RvbSBwcmVmaXggdG8gYmUgdXNlZCBpbiB0aGUgY29va2llL2xvY2Fsc3RvcmFnZSBuYW1lXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IFtvcHRpb25zLmNvb2tpZV9leHBpcmF0aW9uXSBOdW1iZXIgb2YgZGF5cyB1bnRpbCB0aGUgb3B0LWluIGNvb2tpZSBleHBpcmVzIChvdmVycmlkZXMgdmFsdWUgc3BlY2lmaWVkIGluIHRoaXMgUG9zdEhvZyBpbnN0YW5jZSdzIGNvbmZpZylcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmNyb3NzX3N1YmRvbWFpbl9jb29raWVdIFdoZXRoZXIgdGhlIG9wdC1pbiBjb29raWUgaXMgc2V0IGFzIGNyb3NzLXN1YmRvbWFpbiBvciBub3QgKG92ZXJyaWRlcyB2YWx1ZSBzcGVjaWZpZWQgaW4gdGhpcyBQb3N0SG9nIGluc3RhbmNlJ3MgY29uZmlnKVxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuc2VjdXJlX2Nvb2tpZV0gV2hldGhlciB0aGUgb3B0LWluIGNvb2tpZSBpcyBzZXQgYXMgc2VjdXJlIG9yIG5vdCAob3ZlcnJpZGVzIHZhbHVlIHNwZWNpZmllZCBpbiB0aGlzIFBvc3RIb2cgaW5zdGFuY2UncyBjb25maWcpXG4gICAgICovXG4gICAgb3B0X291dF9jYXB0dXJpbmcob3B0aW9ucz86IFBhcnRpYWw8T3B0SW5PdXRDYXB0dXJpbmdPcHRpb25zPik6IHZvaWQge1xuICAgICAgICBjb25zdCBfb3B0aW9ucyA9IF9leHRlbmQoXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY2xlYXJfcGVyc2lzdGVuY2U6IHRydWUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb3B0aW9ucyB8fCB7fVxuICAgICAgICApXG5cbiAgICAgICAgdGhpcy5fZ2Rwcl9jYWxsX2Z1bmMob3B0T3V0LCBfb3B0aW9ucylcbiAgICAgICAgdGhpcy5fZ2Rwcl91cGRhdGVfcGVyc2lzdGVuY2UoX29wdGlvbnMpXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2sgd2hldGhlciB0aGUgdXNlciBoYXMgb3B0ZWQgaW4gdG8gZGF0YSBjYXB0dXJpbmcgYW5kIGNvb2tpZXMvbG9jYWxzdG9yYWdlIGZvciB0aGlzIFBvc3RIb2cgaW5zdGFuY2VcbiAgICAgKlxuICAgICAqICMjIyBVc2FnZVxuICAgICAqXG4gICAgICogICAgIGNvbnN0IGhhc19vcHRlZF9pbiA9IHBvc3Rob2cuaGFzX29wdGVkX2luX2NhcHR1cmluZygpO1xuICAgICAqICAgICAvLyB1c2UgaGFzX29wdGVkX2luIHZhbHVlXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIEEgZGljdGlvbmFyeSBvZiBjb25maWcgb3B0aW9ucyB0byBvdmVycmlkZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5wZXJzaXN0ZW5jZV90eXBlPWxvY2FsU3RvcmFnZV0gUGVyc2lzdGVuY2UgbWVjaGFuaXNtIHVzZWQgLSBjb29raWUgb3IgbG9jYWxTdG9yYWdlIC0gZmFsbHMgYmFjayB0byBjb29raWUgaWYgbG9jYWxTdG9yYWdlIGlzIHVuYXZhaWxhYmxlXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLmNvb2tpZV9wcmVmaXg9X19waF9vcHRfaW5fb3V0XSBDdXN0b20gcHJlZml4IHRvIGJlIHVzZWQgaW4gdGhlIGNvb2tpZS9sb2NhbHN0b3JhZ2UgbmFtZVxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBjdXJyZW50IG9wdC1pbiBzdGF0dXNcbiAgICAgKi9cbiAgICBoYXNfb3B0ZWRfaW5fY2FwdHVyaW5nKG9wdGlvbnM/OiBQYXJ0aWFsPE9wdEluT3V0Q2FwdHVyaW5nT3B0aW9ucz4pOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2dkcHJfY2FsbF9mdW5jKGhhc09wdGVkSW4sIG9wdGlvbnMpXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2sgd2hldGhlciB0aGUgdXNlciBoYXMgb3B0ZWQgb3V0IG9mIGRhdGEgY2FwdHVyaW5nIGFuZCBjb29raWVzL2xvY2Fsc3RvcmFnZSBmb3IgdGhpcyBQb3N0SG9nIGluc3RhbmNlXG4gICAgICpcbiAgICAgKiAjIyMgVXNhZ2VcbiAgICAgKlxuICAgICAqICAgICBjb25zdCBoYXNfb3B0ZWRfb3V0ID0gcG9zdGhvZy5oYXNfb3B0ZWRfb3V0X2NhcHR1cmluZygpO1xuICAgICAqICAgICAvLyB1c2UgaGFzX29wdGVkX291dCB2YWx1ZVxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSBBIGRpY3Rpb25hcnkgb2YgY29uZmlnIG9wdGlvbnMgdG8gb3ZlcnJpZGVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMucGVyc2lzdGVuY2VfdHlwZT1sb2NhbFN0b3JhZ2VdIFBlcnNpc3RlbmNlIG1lY2hhbmlzbSB1c2VkIC0gY29va2llIG9yIGxvY2FsU3RvcmFnZSAtIGZhbGxzIGJhY2sgdG8gY29va2llIGlmIGxvY2FsU3RvcmFnZSBpcyB1bmF2YWlsYWJsZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5jb29raWVfcHJlZml4PV9fcGhfb3B0X2luX291dF0gQ3VzdG9tIHByZWZpeCB0byBiZSB1c2VkIGluIHRoZSBjb29raWUvbG9jYWxzdG9yYWdlIG5hbWVcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gY3VycmVudCBvcHQtb3V0IHN0YXR1c1xuICAgICAqL1xuICAgIGhhc19vcHRlZF9vdXRfY2FwdHVyaW5nKG9wdGlvbnM/OiBQYXJ0aWFsPE9wdEluT3V0Q2FwdHVyaW5nT3B0aW9ucz4pOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2dkcHJfY2FsbF9mdW5jKGhhc09wdGVkT3V0LCBvcHRpb25zKVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENsZWFyIHRoZSB1c2VyJ3Mgb3B0IGluL291dCBzdGF0dXMgb2YgZGF0YSBjYXB0dXJpbmcgYW5kIGNvb2tpZXMvbG9jYWxzdG9yYWdlIGZvciB0aGlzIFBvc3RIb2cgaW5zdGFuY2VcbiAgICAgKlxuICAgICAqICMjIyBVc2FnZVxuICAgICAqXG4gICAgICogICAgIC8vIGNsZWFyIHVzZXIncyBvcHQtaW4vb3V0IHN0YXR1c1xuICAgICAqICAgICBwb3N0aG9nLmNsZWFyX29wdF9pbl9vdXRfY2FwdHVyaW5nKCk7XG4gICAgICpcbiAgICAgKiAgICAgLy8gY2xlYXIgdXNlcidzIG9wdC1pbi9vdXQgc3RhdHVzIHdpdGggc3BlY2lmaWMgY29va2llIGNvbmZpZ3VyYXRpb24gLSBzaG91bGQgbWF0Y2hcbiAgICAgKiAgICAgLy8gY29uZmlndXJhdGlvbiB1c2VkIHdoZW4gb3B0X2luX2NhcHR1cmluZy9vcHRfb3V0X2NhcHR1cmluZyBtZXRob2RzIHdlcmUgY2FsbGVkLlxuICAgICAqICAgICBwb3N0aG9nLmNsZWFyX29wdF9pbl9vdXRfY2FwdHVyaW5nKHtcbiAgICAgKiAgICAgICAgIGNvb2tpZV9leHBpcmF0aW9uOiAzMCxcbiAgICAgKiAgICAgICAgIHNlY3VyZV9jb29raWU6IHRydWVcbiAgICAgKiAgICAgfSk7XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIEEgZGljdGlvbmFyeSBvZiBjb25maWcgb3B0aW9ucyB0byBvdmVycmlkZVxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuZW5hYmxlX3BlcnNpc3RlbmNlPXRydWVdIElmIHRydWUsIHdpbGwgcmUtZW5hYmxlIHNkayBwZXJzaXN0ZW5jZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5wZXJzaXN0ZW5jZV90eXBlPWxvY2FsU3RvcmFnZV0gUGVyc2lzdGVuY2UgbWVjaGFuaXNtIHVzZWQgLSBjb29raWUgb3IgbG9jYWxTdG9yYWdlIC0gZmFsbHMgYmFjayB0byBjb29raWUgaWYgbG9jYWxTdG9yYWdlIGlzIHVuYXZhaWxhYmxlXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLmNvb2tpZV9wcmVmaXg9X19waF9vcHRfaW5fb3V0XSBDdXN0b20gcHJlZml4IHRvIGJlIHVzZWQgaW4gdGhlIGNvb2tpZS9sb2NhbHN0b3JhZ2UgbmFtZVxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBbb3B0aW9ucy5jb29raWVfZXhwaXJhdGlvbl0gTnVtYmVyIG9mIGRheXMgdW50aWwgdGhlIG9wdC1pbiBjb29raWUgZXhwaXJlcyAob3ZlcnJpZGVzIHZhbHVlIHNwZWNpZmllZCBpbiB0aGlzIFBvc3RIb2cgaW5zdGFuY2UncyBjb25maWcpXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5jcm9zc19zdWJkb21haW5fY29va2llXSBXaGV0aGVyIHRoZSBvcHQtaW4gY29va2llIGlzIHNldCBhcyBjcm9zcy1zdWJkb21haW4gb3Igbm90IChvdmVycmlkZXMgdmFsdWUgc3BlY2lmaWVkIGluIHRoaXMgUG9zdEhvZyBpbnN0YW5jZSdzIGNvbmZpZylcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLnNlY3VyZV9jb29raWVdIFdoZXRoZXIgdGhlIG9wdC1pbiBjb29raWUgaXMgc2V0IGFzIHNlY3VyZSBvciBub3QgKG92ZXJyaWRlcyB2YWx1ZSBzcGVjaWZpZWQgaW4gdGhpcyBQb3N0SG9nIGluc3RhbmNlJ3MgY29uZmlnKVxuICAgICAqL1xuICAgIGNsZWFyX29wdF9pbl9vdXRfY2FwdHVyaW5nKG9wdGlvbnM/OiBQYXJ0aWFsPE9wdEluT3V0Q2FwdHVyaW5nT3B0aW9ucz4pOiB2b2lkIHtcbiAgICAgICAgY29uc3QgX29wdGlvbnM6IFBhcnRpYWw8T3B0SW5PdXRDYXB0dXJpbmdPcHRpb25zPiA9IF9leHRlbmQoXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZW5hYmxlX3BlcnNpc3RlbmNlOiB0cnVlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9wdGlvbnMgPz8ge31cbiAgICAgICAgKVxuICAgICAgICB0aGlzLl9nZHByX2NhbGxfZnVuYyhjbGVhck9wdEluT3V0LCBfb3B0aW9ucylcbiAgICAgICAgdGhpcy5fZ2Rwcl91cGRhdGVfcGVyc2lzdGVuY2UoX29wdGlvbnMpXG4gICAgfVxuXG4gICAgZGVidWcoZGVidWc/OiBib29sZWFuKTogdm9pZCB7XG4gICAgICAgIGlmIChkZWJ1ZyA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHdpbmRvdz8uY29uc29sZS5sb2coXCJZb3UndmUgZGlzYWJsZWQgZGVidWcgbW9kZS5cIilcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZSAmJiBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgncGhfZGVidWcnKVxuICAgICAgICAgICAgdGhpcy5zZXRfY29uZmlnKHsgZGVidWc6IGZhbHNlIH0pXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB3aW5kb3c/LmNvbnNvbGUubG9nKFxuICAgICAgICAgICAgICAgIFwiWW91J3JlIG5vdyBpbiBkZWJ1ZyBtb2RlLiBBbGwgY2FsbHMgdG8gUG9zdEhvZyB3aWxsIGJlIGxvZ2dlZCBpbiB5b3VyIGNvbnNvbGUuXFxuWW91IGNhbiBkaXNhYmxlIHRoaXMgd2l0aCBgcG9zdGhvZy5kZWJ1ZyhmYWxzZSlgLlwiXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2UgJiYgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3BoX2RlYnVnJywgJ3RydWUnKVxuICAgICAgICAgICAgdGhpcy5zZXRfY29uZmlnKHsgZGVidWc6IHRydWUgfSlcbiAgICAgICAgfVxuICAgIH1cbn1cblxuX3NhZmV3cmFwX2NsYXNzKFBvc3RIb2csIFsnaWRlbnRpZnknXSlcblxuY29uc3QgaW5zdGFuY2VzOiBSZWNvcmQ8c3RyaW5nLCBQb3N0SG9nPiA9IHt9XG5jb25zdCBleHRlbmRfbXAgPSBmdW5jdGlvbiAoKSB7XG4gICAgLy8gYWRkIGFsbCB0aGUgc3ViIHBvc3Rob2cgaW5zdGFuY2VzXG4gICAgX2VhY2goaW5zdGFuY2VzLCBmdW5jdGlvbiAoaW5zdGFuY2UsIG5hbWUpIHtcbiAgICAgICAgaWYgKG5hbWUgIT09IFBSSU1BUllfSU5TVEFOQ0VfTkFNRSkge1xuICAgICAgICAgICAgcG9zdGhvZ19tYWluW25hbWVdID0gaW5zdGFuY2VcbiAgICAgICAgfVxuICAgIH0pXG59XG5cbmNvbnN0IG92ZXJyaWRlX3BoX2luaXRfZnVuYyA9IGZ1bmN0aW9uICgpIHtcbiAgICAvLyB3ZSBvdmVycmlkZSB0aGUgc25pcHBldHMgaW5pdCBmdW5jdGlvbiB0byBoYW5kbGUgdGhlIGNhc2Ugd2hlcmUgYVxuICAgIC8vIHVzZXIgaW5pdGlhbGl6ZXMgdGhlIHBvc3Rob2cgbGlicmFyeSBhZnRlciB0aGUgc2NyaXB0IGxvYWRzICYgcnVuc1xuICAgIHBvc3Rob2dfbWFpblsnaW5pdCddID0gZnVuY3Rpb24gKHRva2VuPzogc3RyaW5nLCBjb25maWc/OiBQYXJ0aWFsPFBvc3RIb2dDb25maWc+LCBuYW1lPzogc3RyaW5nKSB7XG4gICAgICAgIGlmIChuYW1lKSB7XG4gICAgICAgICAgICAvLyBpbml0aWFsaXplIGEgc3ViIGxpYnJhcnlcbiAgICAgICAgICAgIGlmICghcG9zdGhvZ19tYWluW25hbWVdKSB7XG4gICAgICAgICAgICAgICAgcG9zdGhvZ19tYWluW25hbWVdID0gaW5zdGFuY2VzW25hbWVdID0gY3JlYXRlX3BobGliKFxuICAgICAgICAgICAgICAgICAgICB0b2tlbiB8fCAnJyxcbiAgICAgICAgICAgICAgICAgICAgY29uZmlnIHx8IHt9LFxuICAgICAgICAgICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgICAgICAgICAoaW5zdGFuY2U6IFBvc3RIb2cpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc3Rob2dfbWFpbltuYW1lXSA9IGluc3RhbmNlc1tuYW1lXSA9IGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZS5fbG9hZGVkKClcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBwb3N0aG9nX21haW5bbmFtZV1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxldCBpbnN0YW5jZTogUG9zdEhvZyA9IHBvc3Rob2dfbWFpbiBhcyBhbnkgYXMgUG9zdEhvZ1xuXG4gICAgICAgICAgICBpZiAoaW5zdGFuY2VzW1BSSU1BUllfSU5TVEFOQ0VfTkFNRV0pIHtcbiAgICAgICAgICAgICAgICAvLyBtYWluIHBvc3Rob2cgbGliIGFscmVhZHkgaW5pdGlhbGl6ZWRcbiAgICAgICAgICAgICAgICBpbnN0YW5jZSA9IGluc3RhbmNlc1tQUklNQVJZX0lOU1RBTkNFX05BTUVdXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRva2VuKSB7XG4gICAgICAgICAgICAgICAgLy8gaW50aWFsaXplIHRoZSBtYWluIHBvc3Rob2cgbGliXG4gICAgICAgICAgICAgICAgaW5zdGFuY2UgPSBjcmVhdGVfcGhsaWIodG9rZW4sIGNvbmZpZyB8fCB7fSwgUFJJTUFSWV9JTlNUQU5DRV9OQU1FLCAoaW5zdGFuY2U6IFBvc3RIb2cpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VzW1BSSU1BUllfSU5TVEFOQ0VfTkFNRV0gPSBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZS5fbG9hZGVkKClcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIGluc3RhbmNlc1tQUklNQVJZX0lOU1RBTkNFX05BTUVdID0gaW5zdGFuY2VcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgOyhwb3N0aG9nX21haW4gYXMgYW55KSA9IGluc3RhbmNlXG4gICAgICAgICAgICBpZiAoaW5pdF90eXBlID09PSBJbml0VHlwZS5JTklUX1NOSVBQRVQpIHtcbiAgICAgICAgICAgICAgICBhc3NpZ25hYmxlV2luZG93W1BSSU1BUllfSU5TVEFOQ0VfTkFNRV0gPSBwb3N0aG9nX21haW5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGV4dGVuZF9tcCgpXG4gICAgICAgICAgICByZXR1cm4gaW5zdGFuY2VcbiAgICAgICAgfVxuICAgIH1cbn1cblxuY29uc3QgYWRkX2RvbV9sb2FkZWRfaGFuZGxlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAvLyBDcm9zcyBicm93c2VyIERPTSBMb2FkZWQgc3VwcG9ydFxuICAgIGZ1bmN0aW9uIGRvbV9sb2FkZWRfaGFuZGxlcigpIHtcbiAgICAgICAgLy8gZnVuY3Rpb24gZmxhZyBzaW5jZSB3ZSBvbmx5IHdhbnQgdG8gZXhlY3V0ZSB0aGlzIG9uY2VcbiAgICAgICAgaWYgKChkb21fbG9hZGVkX2hhbmRsZXIgYXMgYW55KS5kb25lKSB7XG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgICA7KGRvbV9sb2FkZWRfaGFuZGxlciBhcyBhbnkpLmRvbmUgPSB0cnVlXG5cbiAgICAgICAgRU5RVUVVRV9SRVFVRVNUUyA9IGZhbHNlXG5cbiAgICAgICAgX2VhY2goaW5zdGFuY2VzLCBmdW5jdGlvbiAoaW5zdDogUG9zdEhvZykge1xuICAgICAgICAgICAgaW5zdC5fZG9tX2xvYWRlZCgpXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgaWYgKGRvY3VtZW50Py5hZGRFdmVudExpc3RlbmVyKSB7XG4gICAgICAgIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlID09PSAnY29tcGxldGUnKSB7XG4gICAgICAgICAgICAvLyBzYWZhcmkgNCBjYW4gZmlyZSB0aGUgRE9NQ29udGVudExvYWRlZCBldmVudCBiZWZvcmUgbG9hZGluZyBhbGxcbiAgICAgICAgICAgIC8vIGV4dGVybmFsIEpTIChpbmNsdWRpbmcgdGhpcyBmaWxlKS4geW91IHdpbGwgc2VlIHNvbWUgY29weXBhc3RhXG4gICAgICAgICAgICAvLyBvbiB0aGUgaW50ZXJuZXQgdGhhdCBjaGVja3MgZm9yICdjb21wbGV0ZScgYW5kICdsb2FkZWQnLCBidXRcbiAgICAgICAgICAgIC8vICdsb2FkZWQnIGlzIGFuIElFIHRoaW5nXG4gICAgICAgICAgICBkb21fbG9hZGVkX2hhbmRsZXIoKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGRvbV9sb2FkZWRfaGFuZGxlciwgZmFsc2UpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBmYWxsYmFjayBoYW5kbGVyLCBhbHdheXMgd2lsbCB3b3JrXG4gICAgaWYgKHdpbmRvdykge1xuICAgICAgICBfcmVnaXN0ZXJfZXZlbnQod2luZG93LCAnbG9hZCcsIGRvbV9sb2FkZWRfaGFuZGxlciwgdHJ1ZSlcbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpbml0X2Zyb21fc25pcHBldCgpOiB2b2lkIHtcbiAgICBpbml0X3R5cGUgPSBJbml0VHlwZS5JTklUX1NOSVBQRVRcbiAgICBpZiAoX2lzVW5kZWZpbmVkKGFzc2lnbmFibGVXaW5kb3cucG9zdGhvZykpIHtcbiAgICAgICAgYXNzaWduYWJsZVdpbmRvdy5wb3N0aG9nID0gW11cbiAgICB9XG4gICAgcG9zdGhvZ19tYWluID0gYXNzaWduYWJsZVdpbmRvdy5wb3N0aG9nXG5cbiAgICBpZiAocG9zdGhvZ19tYWluWydfX2xvYWRlZCddIHx8IChwb3N0aG9nX21haW5bJ2NvbmZpZyddICYmIHBvc3Rob2dfbWFpblsncGVyc2lzdGVuY2UnXSkpIHtcbiAgICAgICAgLy8gbGliIGhhcyBhbHJlYWR5IGJlZW4gbG9hZGVkIGF0IGxlYXN0IG9uY2U7IHdlIGRvbid0IHdhbnQgdG8gb3ZlcnJpZGUgdGhlIGdsb2JhbCBvYmplY3QgdGhpcyB0aW1lIHNvIGJvbWIgZWFybHlcbiAgICAgICAgbG9nZ2VyLmNyaXRpY2FsKCdQb3N0SG9nIGxpYnJhcnkgaGFzIGFscmVhZHkgYmVlbiBkb3dubG9hZGVkIGF0IGxlYXN0IG9uY2UuJylcbiAgICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8gTG9hZCBpbnN0YW5jZXMgb2YgdGhlIFBvc3RIb2cgTGlicmFyeVxuICAgIF9lYWNoKHBvc3Rob2dfbWFpblsnX2knXSwgZnVuY3Rpb24gKGl0ZW06IFt0b2tlbjogc3RyaW5nLCBjb25maWc6IFBhcnRpYWw8UG9zdEhvZ0NvbmZpZz4sIG5hbWU6IHN0cmluZ10pIHtcbiAgICAgICAgaWYgKGl0ZW0gJiYgX2lzQXJyYXkoaXRlbSkpIHtcbiAgICAgICAgICAgIGluc3RhbmNlc1tpdGVtWzJdXSA9IGNyZWF0ZV9waGxpYiguLi5pdGVtKVxuICAgICAgICB9XG4gICAgfSlcblxuICAgIG92ZXJyaWRlX3BoX2luaXRfZnVuYygpXG4gICAgOyhwb3N0aG9nX21haW5bJ2luaXQnXSBhcyBhbnkpKClcblxuICAgIC8vIEZpcmUgbG9hZGVkIGV2ZW50cyBhZnRlciB1cGRhdGluZyB0aGUgd2luZG93J3MgcG9zdGhvZyBvYmplY3RcbiAgICBfZWFjaChpbnN0YW5jZXMsIGZ1bmN0aW9uIChpbnN0YW5jZSkge1xuICAgICAgICBpbnN0YW5jZS5fbG9hZGVkKClcbiAgICB9KVxuXG4gICAgYWRkX2RvbV9sb2FkZWRfaGFuZGxlcigpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpbml0X2FzX21vZHVsZSgpOiBQb3N0SG9nIHtcbiAgICBpbml0X3R5cGUgPSBJbml0VHlwZS5JTklUX01PRFVMRVxuICAgIDsocG9zdGhvZ19tYWluIGFzIGFueSkgPSBuZXcgUG9zdEhvZygpXG5cbiAgICBvdmVycmlkZV9waF9pbml0X2Z1bmMoKVxuICAgIDsocG9zdGhvZ19tYWluWydpbml0J10gYXMgYW55KSgpXG4gICAgYWRkX2RvbV9sb2FkZWRfaGFuZGxlcigpXG5cbiAgICByZXR1cm4gcG9zdGhvZ19tYWluIGFzIGFueVxufVxuIiwgImltcG9ydCB7IE1pbmltYWxIVFRQUmVzcG9uc2UgfSBmcm9tICcuL3R5cGVzJ1xuaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSAnLi91dGlscy9sb2dnZXInXG5cbmNvbnN0IG9uZU1pbnV0ZUluTWlsbGlzZWNvbmRzID0gNjAgKiAxMDAwXG5cbmludGVyZmFjZSBDYXB0dXJlUmVzcG9uc2Uge1xuICAgIHF1b3RhX2xpbWl0ZWQ/OiBzdHJpbmdbXVxufVxuXG5leHBvcnQgY2xhc3MgUmF0ZUxpbWl0ZXIge1xuICAgIGxpbWl0czogUmVjb3JkPHN0cmluZywgbnVtYmVyPiA9IHt9XG5cbiAgICBwdWJsaWMgaXNSYXRlTGltaXRlZChiYXRjaEtleTogc3RyaW5nIHwgdW5kZWZpbmVkKTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IHJldHJ5QWZ0ZXIgPSB0aGlzLmxpbWl0c1tiYXRjaEtleSB8fCAnZXZlbnRzJ10gfHwgZmFsc2VcblxuICAgICAgICBpZiAocmV0cnlBZnRlciA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgRGF0ZSgpLmdldFRpbWUoKSA8IHJldHJ5QWZ0ZXJcbiAgICB9XG5cbiAgICBwdWJsaWMgY2hlY2tGb3JMaW1pdGluZyA9IChodHRwUmVzcG9uc2U6IE1pbmltYWxIVFRQUmVzcG9uc2UpOiB2b2lkID0+IHtcbiAgICAgICAgY29uc3QgdGV4dDogc3RyaW5nIHwgdW5kZWZpbmVkID0gaHR0cFJlc3BvbnNlLnJlc3BvbnNlVGV4dFxuXG4gICAgICAgIGlmICghdGV4dCB8fCAhdGV4dC5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlOiBDYXB0dXJlUmVzcG9uc2UgPSBKU09OLnBhcnNlKHRleHQpXG4gICAgICAgICAgICBjb25zdCBxdW90YUxpbWl0ZWRQcm9kdWN0cyA9IHJlc3BvbnNlLnF1b3RhX2xpbWl0ZWQgfHwgW11cbiAgICAgICAgICAgIHF1b3RhTGltaXRlZFByb2R1Y3RzLmZvckVhY2goKGJhdGNoS2V5KSA9PiB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmluZm8oYFtSYXRlTGltaXRlcl0gJHtiYXRjaEtleSB8fCAnZXZlbnRzJ30gaXMgcXVvdGEgbGltaXRlZC5gKVxuICAgICAgICAgICAgICAgIHRoaXMubGltaXRzW2JhdGNoS2V5XSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpICsgb25lTWludXRlSW5NaWxsaXNlY29uZHNcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0gY2F0Y2ggKGU6IGFueSkge1xuICAgICAgICAgICAgbG9nZ2VyLndhcm4oYFtSYXRlTGltaXRlcl0gY291bGQgbm90IHJhdGUgbGltaXQgLSBjb250aW51aW5nLiBFcnJvcjogXCIke2U/Lm1lc3NhZ2V9XCJgLCB7IHRleHQgfSlcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgfVxufVxuIiwgIi8qIENsaWVudC1zaWRlIHNlc3Npb24gcGFyYW1ldGVycy4gVGhlc2UgYXJlIHByaW1hcmlseSB1c2VkIGJ5IHdlYiBhbmFseXRpY3MsXG4gKiB3aGljaCByZWxpZXMgb24gdGhlc2UgZm9yIHNlc3Npb24gYW5hbHl0aWNzIHdpdGhvdXQgdGhlIHBsdWdpbiBzZXJ2ZXIgYmVpbmdcbiAqIGF2YWlsYWJsZSBmb3IgdGhlIHBlcnNvbiBsZXZlbCBzZXQtb25jZSBwcm9wZXJ0aWVzLiBPYnZpb3VzbHkgbm90IGNvbnNpc3RlbnRcbiAqIGJldHdlZW4gY2xpZW50LXNpZGUgZXZlbnRzIGFuZCBzZXJ2ZXItc2lkZSBldmVudHMgYnV0IHRoaXMgaXMgYWNjZXB0YWJsZVxuICogYXMgd2ViIGFuYWx5dGljcyBvbmx5IHVzZXMgY2xpZW50LXNpZGUuXG4gKlxuICogVGhlc2UgaGF2ZSB0aGUgc2FtZSBsaWZlc3BhbiBhcyBhIHNlc3Npb25faWRcbiAqL1xuaW1wb3J0IHsgbG9jYXRpb24gfSBmcm9tICcuL3V0aWxzL2dsb2JhbHMnXG5pbXBvcnQgeyBfaW5mbyB9IGZyb20gJy4vdXRpbHMvZXZlbnQtdXRpbHMnXG5pbXBvcnQgeyBTZXNzaW9uSWRNYW5hZ2VyIH0gZnJvbSAnLi9zZXNzaW9uaWQnXG5pbXBvcnQgeyBQb3N0SG9nUGVyc2lzdGVuY2UgfSBmcm9tICcuL3Bvc3Rob2ctcGVyc2lzdGVuY2UnXG5pbXBvcnQgeyBDTElFTlRfU0VTU0lPTl9QUk9QUyB9IGZyb20gJy4vY29uc3RhbnRzJ1xuXG5pbnRlcmZhY2UgU2Vzc2lvblNvdXJjZVByb3BzIHtcbiAgICBpbml0aWFsUGF0aE5hbWU6IHN0cmluZ1xuICAgIHJlZmVycmluZ0RvbWFpbjogc3RyaW5nIC8vIElzIGFjdHVhbGx5IGhvc3QsIGJ1dCBuYW1lZCBkb21haW4gZm9yIGludGVybmFsIGNvbnNpc3RlbmN5LiBTaG91bGQgY29udGFpbiBhIHBvcnQgaWYgdGhlcmUgaXMgb25lLlxuICAgIHV0bV9tZWRpdW0/OiBzdHJpbmdcbiAgICB1dG1fc291cmNlPzogc3RyaW5nXG4gICAgdXRtX2NhbXBhaWduPzogc3RyaW5nXG4gICAgdXRtX2NvbnRlbnQ/OiBzdHJpbmdcbiAgICB1dG1fdGVybT86IHN0cmluZ1xufVxuXG5pbnRlcmZhY2UgU3RvcmVkU2Vzc2lvblNvdXJjZVByb3BzIHtcbiAgICBzZXNzaW9uSWQ6IHN0cmluZ1xuICAgIHByb3BzOiBTZXNzaW9uU291cmNlUHJvcHNcbn1cblxuY29uc3QgZ2VuZXJhdGVTZXNzaW9uU291cmNlUGFyYW1zID0gKCk6IFNlc3Npb25Tb3VyY2VQcm9wcyA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgaW5pdGlhbFBhdGhOYW1lOiBsb2NhdGlvbj8ucGF0aG5hbWUgfHwgJycsXG4gICAgICAgIHJlZmVycmluZ0RvbWFpbjogX2luZm8ucmVmZXJyaW5nRG9tYWluKCksXG4gICAgICAgIC4uLl9pbmZvLmNhbXBhaWduUGFyYW1zKCksXG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgU2Vzc2lvblByb3BzTWFuYWdlciB7XG4gICAgcHJpdmF0ZSByZWFkb25seSBfc2Vzc2lvbklkTWFuYWdlcjogU2Vzc2lvbklkTWFuYWdlclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX3BlcnNpc3RlbmNlOiBQb3N0SG9nUGVyc2lzdGVuY2VcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9zZXNzaW9uU291cmNlUGFyYW1HZW5lcmF0b3I6ICgpID0+IFNlc3Npb25Tb3VyY2VQcm9wc1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHNlc3Npb25JZE1hbmFnZXI6IFNlc3Npb25JZE1hbmFnZXIsXG4gICAgICAgIHBlcnNpc3RlbmNlOiBQb3N0SG9nUGVyc2lzdGVuY2UsXG4gICAgICAgIHNlc3Npb25Tb3VyY2VQYXJhbUdlbmVyYXRvcj86ICgpID0+IFNlc3Npb25Tb3VyY2VQcm9wc1xuICAgICkge1xuICAgICAgICB0aGlzLl9zZXNzaW9uSWRNYW5hZ2VyID0gc2Vzc2lvbklkTWFuYWdlclxuICAgICAgICB0aGlzLl9wZXJzaXN0ZW5jZSA9IHBlcnNpc3RlbmNlXG4gICAgICAgIHRoaXMuX3Nlc3Npb25Tb3VyY2VQYXJhbUdlbmVyYXRvciA9IHNlc3Npb25Tb3VyY2VQYXJhbUdlbmVyYXRvciB8fCBnZW5lcmF0ZVNlc3Npb25Tb3VyY2VQYXJhbXNcblxuICAgICAgICB0aGlzLl9zZXNzaW9uSWRNYW5hZ2VyLm9uU2Vzc2lvbklkKHRoaXMuX29uU2Vzc2lvbklkQ2FsbGJhY2spXG4gICAgfVxuXG4gICAgX2dldFN0b3JlZFByb3BzKCk6IFN0b3JlZFNlc3Npb25Tb3VyY2VQcm9wcyB8IHVuZGVmaW5lZCB7XG4gICAgICAgIHJldHVybiB0aGlzLl9wZXJzaXN0ZW5jZS5wcm9wc1tDTElFTlRfU0VTU0lPTl9QUk9QU11cbiAgICB9XG5cbiAgICBfb25TZXNzaW9uSWRDYWxsYmFjayA9IChzZXNzaW9uSWQ6IHN0cmluZykgPT4ge1xuICAgICAgICBjb25zdCBzdG9yZWQgPSB0aGlzLl9nZXRTdG9yZWRQcm9wcygpXG4gICAgICAgIGlmIChzdG9yZWQgJiYgc3RvcmVkLnNlc3Npb25JZCA9PT0gc2Vzc2lvbklkKSB7XG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IG5ld1Byb3BzOiBTdG9yZWRTZXNzaW9uU291cmNlUHJvcHMgPSB7XG4gICAgICAgICAgICBzZXNzaW9uSWQsXG4gICAgICAgICAgICBwcm9wczogdGhpcy5fc2Vzc2lvblNvdXJjZVBhcmFtR2VuZXJhdG9yKCksXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fcGVyc2lzdGVuY2UucmVnaXN0ZXIoeyBbQ0xJRU5UX1NFU1NJT05fUFJPUFNdOiBuZXdQcm9wcyB9KVxuICAgIH1cblxuICAgIGdldFNlc3Npb25Qcm9wcygpIHtcbiAgICAgICAgY29uc3QgcCA9IHRoaXMuX2dldFN0b3JlZFByb3BzKCk/LnByb3BzXG4gICAgICAgIGlmICghcCkge1xuICAgICAgICAgICAgcmV0dXJuIHt9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgJGNsaWVudF9zZXNzaW9uX2luaXRpYWxfcmVmZXJyaW5nX2hvc3Q6IHAucmVmZXJyaW5nRG9tYWluLFxuICAgICAgICAgICAgJGNsaWVudF9zZXNzaW9uX2luaXRpYWxfcGF0aG5hbWU6IHAuaW5pdGlhbFBhdGhOYW1lLFxuICAgICAgICAgICAgJGNsaWVudF9zZXNzaW9uX2luaXRpYWxfdXRtX3NvdXJjZTogcC51dG1fc291cmNlLFxuICAgICAgICAgICAgJGNsaWVudF9zZXNzaW9uX2luaXRpYWxfdXRtX2NhbXBhaWduOiBwLnV0bV9jYW1wYWlnbixcbiAgICAgICAgICAgICRjbGllbnRfc2Vzc2lvbl9pbml0aWFsX3V0bV9tZWRpdW06IHAudXRtX21lZGl1bSxcbiAgICAgICAgICAgICRjbGllbnRfc2Vzc2lvbl9pbml0aWFsX3V0bV9jb250ZW50OiBwLnV0bV9jb250ZW50LFxuICAgICAgICAgICAgJGNsaWVudF9zZXNzaW9uX2luaXRpYWxfdXRtX3Rlcm06IHAudXRtX3Rlcm0sXG4gICAgICAgIH1cbiAgICB9XG59XG4iLCAiZXhwb3J0IGNvbnN0IERFRkFVTFRfQkxPQ0tFRF9VQV9TVFJTID0gW1xuICAgICdhaHJlZnNib3QnLFxuICAgICdhaHJlZnNzaXRlYXVkaXQnLFxuICAgICdhcHBsZWJvdCcsXG4gICAgJ2JhaWR1c3BpZGVyJyxcbiAgICAnYmluZ2JvdCcsXG4gICAgJ2JpbmdwcmV2aWV3JyxcbiAgICAnYm90Lmh0bScsXG4gICAgJ2JvdC5waHAnLFxuICAgICdjcmF3bGVyJyxcbiAgICAnZHVja2R1Y2tib3QnLFxuICAgICdmYWNlYm9va2V4dGVybmFsJyxcbiAgICAnZmFjZWJvb2tjYXRhbG9nJyxcbiAgICAnZ3B0Ym90JyxcbiAgICAnaHR0cDovL3lhbmRleC5jb20vYm90cycsXG4gICAgJ2h1YnNwb3QnLFxuICAgICdpYV9hcmNoaXZlcicsXG4gICAgJ2xpbmtlZGluYm90JyxcbiAgICAnbWoxMmJvdCcsXG4gICAgJ21zbmJvdCcsXG4gICAgJ25lc3N1cycsXG4gICAgJ3BldGFsYm90JyxcbiAgICAncGludGVyZXN0JyxcbiAgICAncHJlcmVuZGVyJyxcbiAgICAncm9nZXJib3QnLFxuICAgICdzY3JlYW1pbmcgZnJvZycsXG4gICAgJ3NlbXJ1c2hib3QnLFxuICAgICdzaXRlYnVsYicsXG4gICAgJ3NsdXJwJyxcbiAgICAndHVybml0aW4nLFxuICAgICd0d2l0dGVyYm90JyxcbiAgICAndmVyY2VsYm90JyxcbiAgICAneWFob28hIHNsdXJwJyxcbiAgICAneWFuZGV4Ym90JyxcblxuICAgIC8vIGEgd2hvbGUgYnVuY2ggb2YgZ29vZy1zcGVjaWZpYyBjcmF3bGVyc1xuICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL3NlYXJjaC9kb2NzL2FkdmFuY2VkL2NyYXdsaW5nL292ZXJ2aWV3LWdvb2dsZS1jcmF3bGVyc1xuICAgICdhZHNib3QtZ29vZ2xlJyxcbiAgICAnYXBpcy1nb29nbGUnLFxuICAgICdkdXBsZXh3ZWItZ29vZ2xlJyxcbiAgICAnZmVlZGZldGNoZXItZ29vZ2xlJyxcbiAgICAnZ29vZ2xlIGZhdmljb24nLFxuICAgICdnb29nbGUgd2ViIHByZXZpZXcnLFxuICAgICdnb29nbGUtcmVhZC1hbG91ZCcsXG4gICAgJ2dvb2dsZWJvdCcsXG4gICAgJ2dvb2dsZXdlYmxpZ2h0JyxcbiAgICAnbWVkaWFwYXJ0bmVycy1nb29nbGUnLFxuICAgICdzdG9yZWJvdC1nb29nbGUnLFxuXVxuXG4vKipcbiAqIEJsb2NrIHZhcmlvdXMgd2ViIHNwaWRlcnMgZnJvbSBleGVjdXRpbmcgb3VyIEpTIGFuZCBzZW5kaW5nIGZhbHNlIGNhcHR1cmluZyBkYXRhXG4gKi9cbmV4cG9ydCBjb25zdCBfaXNCbG9ja2VkVUEgPSBmdW5jdGlvbiAodWE6IHN0cmluZywgY3VzdG9tQmxvY2tlZFVzZXJBZ2VudHM6IHN0cmluZ1tdKTogYm9vbGVhbiB7XG4gICAgaWYgKCF1YSkge1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gICAgY29uc3QgdWFMb3dlciA9IHVhLnRvTG93ZXJDYXNlKClcbiAgICByZXR1cm4gREVGQVVMVF9CTE9DS0VEX1VBX1NUUlMuY29uY2F0KGN1c3RvbUJsb2NrZWRVc2VyQWdlbnRzIHx8IFtdKS5zb21lKChibG9ja2VkVUEpID0+IHtcbiAgICAgICAgY29uc3QgYmxvY2tlZFVhTG93ZXIgPSBibG9ja2VkVUEudG9Mb3dlckNhc2UoKVxuICAgICAgICBpZiAodWFMb3dlci5pbmNsdWRlcykge1xuICAgICAgICAgICAgcmV0dXJuIHVhTG93ZXIuaW5jbHVkZXMoYmxvY2tlZFVhTG93ZXIpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBJRSAxMSA6L1xuICAgICAgICAgICAgcmV0dXJuIHVhTG93ZXIuaW5kZXhPZihibG9ja2VkVWFMb3dlcikgIT09IC0xXG4gICAgICAgIH1cbiAgICB9KVxufVxuIiwgIi8qKlxuICogRXh0ZW5kIFNlZ21lbnQgd2l0aCBleHRyYSBQb3N0SG9nIEpTIGZ1bmN0aW9uYWxpdHkuIFJlcXVpcmVkIGZvciB0aGluZ3MgbGlrZSBSZWNvcmRpbmdzIGFuZCBmZWF0dXJlIGZsYWdzIHRvIHdvcmsgY29ycmVjdGx5LlxuICpcbiAqICMjIyBVc2FnZVxuICpcbiAqICBgYGBqc1xuICogIC8vIEFmdGVyIHlvdXIgc3RhbmRhcmQgc2VnbWVudCBhbnlhbHl0aWNzIGluc3RhbGxcbiAqICBhbmFseXRpY3MubG9hZChcIkdPRURmQTIxelpUdFI3Y2xzQnVEdm1CS0F0QWRaNk5wXCIpO1xuICpcbiAqICBhbmFseXRpY3MucmVhZHkoKCkgPT4ge1xuICogICAgcG9zdGhvZy5pbml0KCc8cG9zdGhvZy1hcGkta2V5PicsIHtcbiAqICAgICAgY2FwdHVyZV9wYWdldmlldzogZmFsc2UsXG4gKiAgICAgIHNlZ21lbnQ6IHdpbmRvdy5hbmFseXRpY3MsIC8vIE5PVEU6IEJlIHN1cmUgdG8gdXNlIHdpbmRvdy5hbmFseXRpY3MgaGVyZSFcbiAqICAgIH0pO1xuICogICAgd2luZG93LmFuYWx5dGljcy5wYWdlKCk7XG4gKiAgfSlcbiAqICBgYGBcbiAqL1xuaW1wb3J0IHsgUG9zdEhvZyB9IGZyb20gJy4uL3Bvc3Rob2ctY29yZSdcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJy4uL3V0aWxzL2xvZ2dlcidcblxuLy8gTG9vc2VseSBiYXNlZCBvbiBodHRwczovL2dpdGh1Yi5jb20vc2VnbWVudGlvL2FuYWx5dGljcy1uZXh0L2Jsb2IvbWFzdGVyL3BhY2thZ2VzL2NvcmUvc3JjL3BsdWdpbnMvaW5kZXgudHNcbmludGVyZmFjZSBTZWdtZW50UGx1Z2luQ29udGV4dCB7XG4gICAgZXZlbnQ6IHtcbiAgICAgICAgZXZlbnQ6IHN0cmluZ1xuICAgICAgICB1c2VySWQ/OiBzdHJpbmdcbiAgICAgICAgYW5vbnltb3VzSWQ/OiBzdHJpbmdcbiAgICAgICAgcHJvcGVydGllczogYW55XG4gICAgfVxufVxuXG5pbnRlcmZhY2UgU2VnbWVudFBsdWdpbiB7XG4gICAgbmFtZTogc3RyaW5nXG4gICAgdmVyc2lvbjogc3RyaW5nXG4gICAgdHlwZTogJ2VucmljaG1lbnQnXG4gICAgaXNMb2FkZWQ6ICgpID0+IGJvb2xlYW5cbiAgICBsb2FkOiAoY3R4OiBTZWdtZW50UGx1Z2luQ29udGV4dCwgaW5zdGFuY2U6IGFueSwgY29uZmlnPzogYW55KSA9PiBQcm9taXNlPHVua25vd24+XG4gICAgdW5sb2FkPzogKGN0eDogU2VnbWVudFBsdWdpbkNvbnRleHQsIGluc3RhbmNlOiBhbnkpID0+IFByb21pc2U8dW5rbm93bj4gfCB1bmtub3duXG4gICAgcmVhZHk/OiAoKSA9PiBQcm9taXNlPHVua25vd24+XG4gICAgdHJhY2s/OiAoY3R4OiBTZWdtZW50UGx1Z2luQ29udGV4dCkgPT4gUHJvbWlzZTxTZWdtZW50UGx1Z2luQ29udGV4dD4gfCBTZWdtZW50UGx1Z2luQ29udGV4dFxuICAgIGlkZW50aWZ5PzogKGN0eDogU2VnbWVudFBsdWdpbkNvbnRleHQpID0+IFByb21pc2U8U2VnbWVudFBsdWdpbkNvbnRleHQ+IHwgU2VnbWVudFBsdWdpbkNvbnRleHRcbiAgICBwYWdlPzogKGN0eDogU2VnbWVudFBsdWdpbkNvbnRleHQpID0+IFByb21pc2U8U2VnbWVudFBsdWdpbkNvbnRleHQ+IHwgU2VnbWVudFBsdWdpbkNvbnRleHRcbiAgICBncm91cD86IChjdHg6IFNlZ21lbnRQbHVnaW5Db250ZXh0KSA9PiBQcm9taXNlPFNlZ21lbnRQbHVnaW5Db250ZXh0PiB8IFNlZ21lbnRQbHVnaW5Db250ZXh0XG4gICAgYWxpYXM/OiAoY3R4OiBTZWdtZW50UGx1Z2luQ29udGV4dCkgPT4gUHJvbWlzZTxTZWdtZW50UGx1Z2luQ29udGV4dD4gfCBTZWdtZW50UGx1Z2luQ29udGV4dFxuICAgIHNjcmVlbj86IChjdHg6IFNlZ21lbnRQbHVnaW5Db250ZXh0KSA9PiBQcm9taXNlPFNlZ21lbnRQbHVnaW5Db250ZXh0PiB8IFNlZ21lbnRQbHVnaW5Db250ZXh0XG59XG5cbmV4cG9ydCBjb25zdCBjcmVhdGVTZWdtZW50SW50ZWdyYXRpb24gPSAocG9zdGhvZzogUG9zdEhvZyk6IFNlZ21lbnRQbHVnaW4gPT4ge1xuICAgIGlmICghUHJvbWlzZSB8fCAhUHJvbWlzZS5yZXNvbHZlKSB7XG4gICAgICAgIGxvZ2dlci53YXJuKCdUaGlzIGJyb3dzZXIgZG9lcyBub3QgaGF2ZSBQcm9taXNlIHN1cHBvcnQsIGFuZCBjYW4gbm90IHVzZSB0aGUgc2VnbWVudCBpbnRlZ3JhdGlvbicpXG4gICAgfVxuXG4gICAgY29uc3QgZW5yaWNoRXZlbnQgPSAoY3R4OiBTZWdtZW50UGx1Z2luQ29udGV4dCwgZXZlbnROYW1lOiBzdHJpbmcpID0+IHtcbiAgICAgICAgaWYgKCFjdHguZXZlbnQudXNlcklkICYmIGN0eC5ldmVudC5hbm9ueW1vdXNJZCAhPT0gcG9zdGhvZy5nZXRfZGlzdGluY3RfaWQoKSkge1xuICAgICAgICAgICAgLy8gVGhpcyBpcyBvdXIgb25seSB3YXkgb2YgZGV0ZWN0aW5nIHRoYXQgc2VnbWVudCdzIGFuYWx5dGljcy5yZXNldCgpIGhhcyBiZWVuIGNhbGxlZCBzbyB3ZSBhbHNvIGNhbGwgaXRcbiAgICAgICAgICAgIHBvc3Rob2cucmVzZXQoKVxuICAgICAgICB9XG4gICAgICAgIGlmIChjdHguZXZlbnQudXNlcklkICYmIGN0eC5ldmVudC51c2VySWQgIT09IHBvc3Rob2cuZ2V0X2Rpc3RpbmN0X2lkKCkpIHtcbiAgICAgICAgICAgIHBvc3Rob2cucmVnaXN0ZXIoe1xuICAgICAgICAgICAgICAgIGRpc3RpbmN0X2lkOiBjdHguZXZlbnQudXNlcklkLFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIHBvc3Rob2cucmVsb2FkRmVhdHVyZUZsYWdzKClcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGFkZGl0aW9uYWxQcm9wZXJ0aWVzID0gcG9zdGhvZy5fY2FsY3VsYXRlX2V2ZW50X3Byb3BlcnRpZXMoZXZlbnROYW1lLCBjdHguZXZlbnQucHJvcGVydGllcylcbiAgICAgICAgY3R4LmV2ZW50LnByb3BlcnRpZXMgPSBPYmplY3QuYXNzaWduKHt9LCBhZGRpdGlvbmFsUHJvcGVydGllcywgY3R4LmV2ZW50LnByb3BlcnRpZXMpXG4gICAgICAgIHJldHVybiBjdHhcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBuYW1lOiAnUG9zdEhvZyBKUycsXG4gICAgICAgIHR5cGU6ICdlbnJpY2htZW50JyxcbiAgICAgICAgdmVyc2lvbjogJzEuMC4wJyxcbiAgICAgICAgaXNMb2FkZWQ6ICgpID0+IHRydWUsXG4gICAgICAgIC8vIGNoZWNrIGFuZCBlYXJseSByZXR1cm4gYWJvdmVcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNvbXBhdC9jb21wYXRcbiAgICAgICAgbG9hZDogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKCksXG4gICAgICAgIHRyYWNrOiAoY3R4KSA9PiBlbnJpY2hFdmVudChjdHgsIGN0eC5ldmVudC5ldmVudCksXG4gICAgICAgIHBhZ2U6IChjdHgpID0+IGVucmljaEV2ZW50KGN0eCwgJyRwYWdldmlldycpLFxuICAgICAgICBpZGVudGlmeTogKGN0eCkgPT4gZW5yaWNoRXZlbnQoY3R4LCAnJGlkZW50aWZ5JyksXG4gICAgICAgIHNjcmVlbjogKGN0eCkgPT4gZW5yaWNoRXZlbnQoY3R4LCAnJHNjcmVlbicpLFxuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBnemlwU3luYywgc3RyVG9VOCB9IGZyb20gJ2ZmbGF0ZSdcbmltcG9ydCB7IF9iYXNlNjRFbmNvZGUgfSBmcm9tICcuL3V0aWxzJ1xuaW1wb3J0IHsgQ29tcHJlc3Npb24sIENvbXByZXNzaW9uRGF0YSwgWEhST3B0aW9ucyB9IGZyb20gJy4vdHlwZXMnXG5cbmV4cG9ydCBmdW5jdGlvbiBkZWNpZGVDb21wcmVzc2lvbihjb21wcmVzc2lvblN1cHBvcnQ6IFBhcnRpYWw8UmVjb3JkPENvbXByZXNzaW9uLCBib29sZWFuPj4pOiBDb21wcmVzc2lvbiB7XG4gICAgaWYgKGNvbXByZXNzaW9uU3VwcG9ydFtDb21wcmVzc2lvbi5HWmlwSlNdKSB7XG4gICAgICAgIHJldHVybiBDb21wcmVzc2lvbi5HWmlwSlNcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gQ29tcHJlc3Npb24uQmFzZTY0XG4gICAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY29tcHJlc3NEYXRhKFxuICAgIGNvbXByZXNzaW9uOiBDb21wcmVzc2lvbixcbiAgICBqc29uRGF0YTogc3RyaW5nLFxuICAgIG9wdGlvbnM6IFhIUk9wdGlvbnNcbik6IFtDb21wcmVzc2lvbkRhdGEgfCBVaW50OEFycmF5LCBYSFJPcHRpb25zXSB7XG4gICAgaWYgKGNvbXByZXNzaW9uID09PSBDb21wcmVzc2lvbi5HWmlwSlMpIHtcbiAgICAgICAgLy8gOlRSSUNLWTogVGhpcyByZXR1cm5zIGFuIFVJbnQ4QXJyYXkuIFdlIGRvbid0IGVuY29kZSB0aGlzIHRvIGEgc3RyaW5nIC0gcmV0dXJuaW5nIGEgYmxvYiB3aWxsIGRvIHRoaXMgZm9yIHVzLlxuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgZ3ppcFN5bmMoc3RyVG9VOChqc29uRGF0YSksIHsgbXRpbWU6IDAgfSksXG4gICAgICAgICAgICB7IC4uLm9wdGlvbnMsIGJsb2I6IHRydWUsIHVybFF1ZXJ5QXJnczogeyBjb21wcmVzc2lvbjogQ29tcHJlc3Npb24uR1ppcEpTIH0gfSxcbiAgICAgICAgXVxuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBbeyBkYXRhOiBfYmFzZTY0RW5jb2RlKGpzb25EYXRhKSB9LCBvcHRpb25zXVxuICAgIH1cbn1cbiIsICIvKipcbiAqIEhhdmluZyBTdXJ2ZXkgdHlwZXMgaW4gdHlwZXMudHMgd2FzIGNvbmZ1c2luZyB0c2NcbiAqIGFuZCBnZW5lcmF0aW5nIGFuIGludmFsaWQgbW9kdWxlLmQudHNcbiAqIFNlZSBodHRwczovL2dpdGh1Yi5jb20vUG9zdEhvZy9wb3N0aG9nLWpzL2lzc3Vlcy82OThcbiAqL1xuXG5leHBvcnQgaW50ZXJmYWNlIFN1cnZleUFwcGVhcmFuY2Uge1xuICAgIC8vIGtlZXAgaW4gc3luYyB3aXRoIGZyb250ZW5kL3NyYy90eXBlcy50cyAtPiBTdXJ2ZXlBcHBlYXJhbmNlXG4gICAgYmFja2dyb3VuZENvbG9yPzogc3RyaW5nXG4gICAgc3VibWl0QnV0dG9uQ29sb3I/OiBzdHJpbmdcbiAgICAvLyB0ZXh0IGNvbG9yIGlzIGRlcHJlY2F0ZWQsIHVzZSBhdXRvIGNvbnRyYXN0IHRleHQgY29sb3IgaW5zdGVhZFxuICAgIHRleHRDb2xvcj86IHN0cmluZ1xuICAgIC8vIGRlcHJlY2F0ZSBzdWJtaXQgYnV0dG9uIHRleHQgZXZlbnR1YWxseVxuICAgIHN1Ym1pdEJ1dHRvblRleHQ/OiBzdHJpbmdcbiAgICBkZXNjcmlwdGlvblRleHRDb2xvcj86IHN0cmluZ1xuICAgIHJhdGluZ0J1dHRvbkNvbG9yPzogc3RyaW5nXG4gICAgcmF0aW5nQnV0dG9uQWN0aXZlQ29sb3I/OiBzdHJpbmdcbiAgICByYXRpbmdCdXR0b25Ib3ZlckNvbG9yPzogc3RyaW5nXG4gICAgd2hpdGVMYWJlbD86IGJvb2xlYW5cbiAgICBhdXRvRGlzYXBwZWFyPzogYm9vbGVhblxuICAgIGRpc3BsYXlUaGFua1lvdU1lc3NhZ2U/OiBib29sZWFuXG4gICAgdGhhbmtZb3VNZXNzYWdlSGVhZGVyPzogc3RyaW5nXG4gICAgdGhhbmtZb3VNZXNzYWdlRGVzY3JpcHRpb24/OiBzdHJpbmdcbiAgICBib3JkZXJDb2xvcj86IHN0cmluZ1xuICAgIHBvc2l0aW9uPzogJ2xlZnQnIHwgJ3JpZ2h0JyB8ICdjZW50ZXInXG4gICAgcGxhY2Vob2xkZXI/OiBzdHJpbmdcbiAgICAvLyB3aWRnZXQgb3B0aW9uc1xuICAgIHdpZGdldFR5cGU/OiAnYnV0dG9uJyB8ICd0YWInIHwgJ3NlbGVjdG9yJ1xuICAgIHdpZGdldFNlbGVjdG9yPzogc3RyaW5nXG4gICAgd2lkZ2V0TGFiZWw/OiBzdHJpbmdcbiAgICB3aWRnZXRDb2xvcj86IHN0cmluZ1xuICAgIC8vIHF1ZXN0aW9uYWJsZTogTm90IGluIGZyb250ZW5kL3NyYy90eXBlcy50cyAtPiBTdXJ2ZXlBcHBlYXJhbmNlLCBidXQgdXNlZCBpbiBzaXRlIGFwcFxuICAgIG1heFdpZHRoPzogc3RyaW5nXG4gICAgekluZGV4Pzogc3RyaW5nXG59XG5cbmV4cG9ydCBlbnVtIFN1cnZleVR5cGUge1xuICAgIFBvcG92ZXIgPSAncG9wb3ZlcicsXG4gICAgQVBJID0gJ2FwaScsXG4gICAgV2lkZ2V0ID0gJ3dpZGdldCcsXG59XG5cbmV4cG9ydCB0eXBlIFN1cnZleVF1ZXN0aW9uID0gQmFzaWNTdXJ2ZXlRdWVzdGlvbiB8IExpbmtTdXJ2ZXlRdWVzdGlvbiB8IFJhdGluZ1N1cnZleVF1ZXN0aW9uIHwgTXVsdGlwbGVTdXJ2ZXlRdWVzdGlvblxuXG5pbnRlcmZhY2UgU3VydmV5UXVlc3Rpb25CYXNlIHtcbiAgICBxdWVzdGlvbjogc3RyaW5nXG4gICAgZGVzY3JpcHRpb24/OiBzdHJpbmcgfCBudWxsXG4gICAgb3B0aW9uYWw/OiBib29sZWFuXG4gICAgYnV0dG9uVGV4dD86IHN0cmluZ1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJhc2ljU3VydmV5UXVlc3Rpb24gZXh0ZW5kcyBTdXJ2ZXlRdWVzdGlvbkJhc2Uge1xuICAgIHR5cGU6IFN1cnZleVF1ZXN0aW9uVHlwZS5PcGVuXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTGlua1N1cnZleVF1ZXN0aW9uIGV4dGVuZHMgU3VydmV5UXVlc3Rpb25CYXNlIHtcbiAgICB0eXBlOiBTdXJ2ZXlRdWVzdGlvblR5cGUuTGlua1xuICAgIGxpbms/OiBzdHJpbmcgfCBudWxsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmF0aW5nU3VydmV5UXVlc3Rpb24gZXh0ZW5kcyBTdXJ2ZXlRdWVzdGlvbkJhc2Uge1xuICAgIHR5cGU6IFN1cnZleVF1ZXN0aW9uVHlwZS5SYXRpbmdcbiAgICBkaXNwbGF5OiAnbnVtYmVyJyB8ICdlbW9qaSdcbiAgICBzY2FsZTogbnVtYmVyXG4gICAgbG93ZXJCb3VuZExhYmVsOiBzdHJpbmdcbiAgICB1cHBlckJvdW5kTGFiZWw6IHN0cmluZ1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE11bHRpcGxlU3VydmV5UXVlc3Rpb24gZXh0ZW5kcyBTdXJ2ZXlRdWVzdGlvbkJhc2Uge1xuICAgIHR5cGU6IFN1cnZleVF1ZXN0aW9uVHlwZS5TaW5nbGVDaG9pY2UgfCBTdXJ2ZXlRdWVzdGlvblR5cGUuTXVsdGlwbGVDaG9pY2VcbiAgICBjaG9pY2VzOiBzdHJpbmdbXVxuICAgIGhhc09wZW5DaG9pY2U/OiBib29sZWFuXG59XG5cbmV4cG9ydCBlbnVtIFN1cnZleVF1ZXN0aW9uVHlwZSB7XG4gICAgT3BlbiA9ICdvcGVuJyxcbiAgICBNdWx0aXBsZUNob2ljZSA9ICdtdWx0aXBsZV9jaG9pY2UnLFxuICAgIFNpbmdsZUNob2ljZSA9ICdzaW5nbGVfY2hvaWNlJyxcbiAgICBSYXRpbmcgPSAncmF0aW5nJyxcbiAgICBMaW5rID0gJ2xpbmsnLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFN1cnZleVJlc3BvbnNlIHtcbiAgICBzdXJ2ZXlzOiBTdXJ2ZXlbXVxufVxuXG5leHBvcnQgdHlwZSBTdXJ2ZXlDYWxsYmFjayA9IChzdXJ2ZXlzOiBTdXJ2ZXlbXSkgPT4gdm9pZFxuXG5leHBvcnQgdHlwZSBTdXJ2ZXlVcmxNYXRjaFR5cGUgPSAncmVnZXgnIHwgJ2V4YWN0JyB8ICdpY29udGFpbnMnXG5cbmV4cG9ydCBpbnRlcmZhY2UgU3VydmV5IHtcbiAgICAvLyBTeW5jIHRoaXMgd2l0aCB0aGUgYmFja2VuZCdzIFN1cnZleUFQSVNlcmlhbGl6ZXIhXG4gICAgaWQ6IHN0cmluZ1xuICAgIG5hbWU6IHN0cmluZ1xuICAgIGRlc2NyaXB0aW9uOiBzdHJpbmdcbiAgICB0eXBlOiBTdXJ2ZXlUeXBlXG4gICAgbGlua2VkX2ZsYWdfa2V5OiBzdHJpbmcgfCBudWxsXG4gICAgdGFyZ2V0aW5nX2ZsYWdfa2V5OiBzdHJpbmcgfCBudWxsXG4gICAgcXVlc3Rpb25zOiBTdXJ2ZXlRdWVzdGlvbltdXG4gICAgYXBwZWFyYW5jZTogU3VydmV5QXBwZWFyYW5jZSB8IG51bGxcbiAgICBjb25kaXRpb25zOiB7XG4gICAgICAgIHVybD86IHN0cmluZ1xuICAgICAgICBzZWxlY3Rvcj86IHN0cmluZ1xuICAgICAgICBzZWVuU3VydmV5V2FpdFBlcmlvZEluRGF5cz86IG51bWJlclxuICAgICAgICB1cmxNYXRjaFR5cGU/OiBTdXJ2ZXlVcmxNYXRjaFR5cGVcbiAgICB9IHwgbnVsbFxuICAgIHN0YXJ0X2RhdGU6IHN0cmluZyB8IG51bGxcbiAgICBlbmRfZGF0ZTogc3RyaW5nIHwgbnVsbFxufVxuIiwgImltcG9ydCB7IGluaXRfYXNfbW9kdWxlIH0gZnJvbSAnLi9wb3N0aG9nLWNvcmUnXG5leHBvcnQgeyBQb3N0SG9nIH0gZnJvbSAnLi9wb3N0aG9nLWNvcmUnXG5leHBvcnQgKiBmcm9tICcuL3R5cGVzJ1xuZXhwb3J0ICogZnJvbSAnLi9wb3N0aG9nLXN1cnZleXMtdHlwZXMnXG5leHBvcnQgY29uc3QgcG9zdGhvZyA9IGluaXRfYXNfbW9kdWxlKClcbmV4cG9ydCBkZWZhdWx0IHBvc3Rob2dcbiIsICJcInVzZSBzdHJpY3RcIjtcblxuKGZ1bmN0aW9uKCkge1xuICB2YXIgUG9seWZpbGxFdmVudCA9IGV2ZW50Q29uc3RydWN0b3IoKTtcblxuICBmdW5jdGlvbiBldmVudENvbnN0cnVjdG9yKCkge1xuICAgIGlmICh0eXBlb2Ygd2luZG93LkN1c3RvbUV2ZW50ID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiB3aW5kb3cuQ3VzdG9tRXZlbnQ7XG4gICAgLy8gSUU8PTkgU3VwcG9ydFxuICAgIGZ1bmN0aW9uIEN1c3RvbUV2ZW50KGV2ZW50LCBwYXJhbXMpIHtcbiAgICAgIHBhcmFtcyA9IHBhcmFtcyB8fCB7YnViYmxlczogZmFsc2UsIGNhbmNlbGFibGU6IGZhbHNlLCBkZXRhaWw6IHVuZGVmaW5lZH07XG4gICAgICB2YXIgZXZ0ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0N1c3RvbUV2ZW50Jyk7XG4gICAgICBldnQuaW5pdEN1c3RvbUV2ZW50KGV2ZW50LCBwYXJhbXMuYnViYmxlcywgcGFyYW1zLmNhbmNlbGFibGUsIHBhcmFtcy5kZXRhaWwpO1xuICAgICAgcmV0dXJuIGV2dDtcbiAgICB9XG4gICAgQ3VzdG9tRXZlbnQucHJvdG90eXBlID0gd2luZG93LkV2ZW50LnByb3RvdHlwZTtcbiAgICByZXR1cm4gQ3VzdG9tRXZlbnQ7XG4gIH1cblxuICBmdW5jdGlvbiBidWlsZEhpZGRlbklucHV0KG5hbWUsIHZhbHVlKSB7XG4gICAgdmFyIGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICAgIGlucHV0LnR5cGUgPSBcImhpZGRlblwiO1xuICAgIGlucHV0Lm5hbWUgPSBuYW1lO1xuICAgIGlucHV0LnZhbHVlID0gdmFsdWU7XG4gICAgcmV0dXJuIGlucHV0O1xuICB9XG5cbiAgZnVuY3Rpb24gaGFuZGxlQ2xpY2soZWxlbWVudCwgdGFyZ2V0TW9kaWZpZXJLZXkpIHtcbiAgICB2YXIgdG8gPSBlbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtdG9cIiksXG4gICAgICAgIG1ldGhvZCA9IGJ1aWxkSGlkZGVuSW5wdXQoXCJfbWV0aG9kXCIsIGVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS1tZXRob2RcIikpLFxuICAgICAgICBjc3JmID0gYnVpbGRIaWRkZW5JbnB1dChcIl9jc3JmX3Rva2VuXCIsIGVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS1jc3JmXCIpKSxcbiAgICAgICAgZm9ybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJmb3JtXCIpLFxuICAgICAgICBzdWJtaXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiksXG4gICAgICAgIHRhcmdldCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKFwidGFyZ2V0XCIpO1xuXG4gICAgZm9ybS5tZXRob2QgPSAoZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLW1ldGhvZFwiKSA9PT0gXCJnZXRcIikgPyBcImdldFwiIDogXCJwb3N0XCI7XG4gICAgZm9ybS5hY3Rpb24gPSB0bztcbiAgICBmb3JtLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcblxuICAgIGlmICh0YXJnZXQpIGZvcm0udGFyZ2V0ID0gdGFyZ2V0O1xuICAgIGVsc2UgaWYgKHRhcmdldE1vZGlmaWVyS2V5KSBmb3JtLnRhcmdldCA9IFwiX2JsYW5rXCI7XG5cbiAgICBmb3JtLmFwcGVuZENoaWxkKGNzcmYpO1xuICAgIGZvcm0uYXBwZW5kQ2hpbGQobWV0aG9kKTtcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGZvcm0pO1xuXG4gICAgLy8gSW5zZXJ0IGEgYnV0dG9uIGFuZCBjbGljayBpdCBpbnN0ZWFkIG9mIHVzaW5nIGBmb3JtLnN1Ym1pdGBcbiAgICAvLyBiZWNhdXNlIHRoZSBgc3VibWl0YCBmdW5jdGlvbiBkb2VzIG5vdCBlbWl0IGEgYHN1Ym1pdGAgZXZlbnQuXG4gICAgc3VibWl0LnR5cGUgPSBcInN1Ym1pdFwiO1xuICAgIGZvcm0uYXBwZW5kQ2hpbGQoc3VibWl0KTtcbiAgICBzdWJtaXQuY2xpY2soKTtcbiAgfVxuXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oZSkge1xuICAgIHZhciBlbGVtZW50ID0gZS50YXJnZXQ7XG4gICAgaWYgKGUuZGVmYXVsdFByZXZlbnRlZCkgcmV0dXJuO1xuXG4gICAgd2hpbGUgKGVsZW1lbnQgJiYgZWxlbWVudC5nZXRBdHRyaWJ1dGUpIHtcbiAgICAgIHZhciBwaG9lbml4TGlua0V2ZW50ID0gbmV3IFBvbHlmaWxsRXZlbnQoJ3Bob2VuaXgubGluay5jbGljaycsIHtcbiAgICAgICAgXCJidWJibGVzXCI6IHRydWUsIFwiY2FuY2VsYWJsZVwiOiB0cnVlXG4gICAgICB9KTtcblxuICAgICAgaWYgKCFlbGVtZW50LmRpc3BhdGNoRXZlbnQocGhvZW5peExpbmtFdmVudCkpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGlmIChlbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtbWV0aG9kXCIpKSB7XG4gICAgICAgIGhhbmRsZUNsaWNrKGVsZW1lbnQsIGUubWV0YUtleSB8fCBlLnNoaWZ0S2V5KTtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbGVtZW50ID0gZWxlbWVudC5wYXJlbnROb2RlO1xuICAgICAgfVxuICAgIH1cbiAgfSwgZmFsc2UpO1xuXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdwaG9lbml4LmxpbmsuY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgIHZhciBtZXNzYWdlID0gZS50YXJnZXQuZ2V0QXR0cmlidXRlKFwiZGF0YS1jb25maXJtXCIpO1xuICAgIGlmKG1lc3NhZ2UgJiYgIXdpbmRvdy5jb25maXJtKG1lc3NhZ2UpKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuICB9LCBmYWxzZSk7XG59KSgpO1xuIiwgIi8vIHdyYXBzIHZhbHVlIGluIGNsb3N1cmUgb3IgcmV0dXJucyBjbG9zdXJlXG5leHBvcnQgbGV0IGNsb3N1cmUgPSAodmFsdWUpID0+IHtcbiAgaWYodHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCIpe1xuICAgIHJldHVybiB2YWx1ZVxuICB9IGVsc2Uge1xuICAgIGxldCBjbG9zdXJlID0gZnVuY3Rpb24gKCl7IHJldHVybiB2YWx1ZSB9XG4gICAgcmV0dXJuIGNsb3N1cmVcbiAgfVxufVxuIiwgImV4cG9ydCBjb25zdCBnbG9iYWxTZWxmID0gdHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgPyBzZWxmIDogbnVsbFxuZXhwb3J0IGNvbnN0IHBoeFdpbmRvdyA9IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgPyB3aW5kb3cgOiBudWxsXG5leHBvcnQgY29uc3QgZ2xvYmFsID0gZ2xvYmFsU2VsZiB8fCBwaHhXaW5kb3cgfHwgZ2xvYmFsXG5leHBvcnQgY29uc3QgREVGQVVMVF9WU04gPSBcIjIuMC4wXCJcbmV4cG9ydCBjb25zdCBTT0NLRVRfU1RBVEVTID0ge2Nvbm5lY3Rpbmc6IDAsIG9wZW46IDEsIGNsb3Npbmc6IDIsIGNsb3NlZDogM31cbmV4cG9ydCBjb25zdCBERUZBVUxUX1RJTUVPVVQgPSAxMDAwMFxuZXhwb3J0IGNvbnN0IFdTX0NMT1NFX05PUk1BTCA9IDEwMDBcbmV4cG9ydCBjb25zdCBDSEFOTkVMX1NUQVRFUyA9IHtcbiAgY2xvc2VkOiBcImNsb3NlZFwiLFxuICBlcnJvcmVkOiBcImVycm9yZWRcIixcbiAgam9pbmVkOiBcImpvaW5lZFwiLFxuICBqb2luaW5nOiBcImpvaW5pbmdcIixcbiAgbGVhdmluZzogXCJsZWF2aW5nXCIsXG59XG5leHBvcnQgY29uc3QgQ0hBTk5FTF9FVkVOVFMgPSB7XG4gIGNsb3NlOiBcInBoeF9jbG9zZVwiLFxuICBlcnJvcjogXCJwaHhfZXJyb3JcIixcbiAgam9pbjogXCJwaHhfam9pblwiLFxuICByZXBseTogXCJwaHhfcmVwbHlcIixcbiAgbGVhdmU6IFwicGh4X2xlYXZlXCJcbn1cblxuZXhwb3J0IGNvbnN0IFRSQU5TUE9SVFMgPSB7XG4gIGxvbmdwb2xsOiBcImxvbmdwb2xsXCIsXG4gIHdlYnNvY2tldDogXCJ3ZWJzb2NrZXRcIlxufVxuZXhwb3J0IGNvbnN0IFhIUl9TVEFURVMgPSB7XG4gIGNvbXBsZXRlOiA0XG59XG4iLCAiLyoqXG4gKiBJbml0aWFsaXplcyB0aGUgUHVzaFxuICogQHBhcmFtIHtDaGFubmVsfSBjaGFubmVsIC0gVGhlIENoYW5uZWxcbiAqIEBwYXJhbSB7c3RyaW5nfSBldmVudCAtIFRoZSBldmVudCwgZm9yIGV4YW1wbGUgYFwicGh4X2pvaW5cImBcbiAqIEBwYXJhbSB7T2JqZWN0fSBwYXlsb2FkIC0gVGhlIHBheWxvYWQsIGZvciBleGFtcGxlIGB7dXNlcl9pZDogMTIzfWBcbiAqIEBwYXJhbSB7bnVtYmVyfSB0aW1lb3V0IC0gVGhlIHB1c2ggdGltZW91dCBpbiBtaWxsaXNlY29uZHNcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUHVzaCB7XG4gIGNvbnN0cnVjdG9yKGNoYW5uZWwsIGV2ZW50LCBwYXlsb2FkLCB0aW1lb3V0KXtcbiAgICB0aGlzLmNoYW5uZWwgPSBjaGFubmVsXG4gICAgdGhpcy5ldmVudCA9IGV2ZW50XG4gICAgdGhpcy5wYXlsb2FkID0gcGF5bG9hZCB8fCBmdW5jdGlvbiAoKXsgcmV0dXJuIHt9IH1cbiAgICB0aGlzLnJlY2VpdmVkUmVzcCA9IG51bGxcbiAgICB0aGlzLnRpbWVvdXQgPSB0aW1lb3V0XG4gICAgdGhpcy50aW1lb3V0VGltZXIgPSBudWxsXG4gICAgdGhpcy5yZWNIb29rcyA9IFtdXG4gICAgdGhpcy5zZW50ID0gZmFsc2VcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0gdGltZW91dFxuICAgKi9cbiAgcmVzZW5kKHRpbWVvdXQpe1xuICAgIHRoaXMudGltZW91dCA9IHRpbWVvdXRcbiAgICB0aGlzLnJlc2V0KClcbiAgICB0aGlzLnNlbmQoKVxuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqL1xuICBzZW5kKCl7XG4gICAgaWYodGhpcy5oYXNSZWNlaXZlZChcInRpbWVvdXRcIikpeyByZXR1cm4gfVxuICAgIHRoaXMuc3RhcnRUaW1lb3V0KClcbiAgICB0aGlzLnNlbnQgPSB0cnVlXG4gICAgdGhpcy5jaGFubmVsLnNvY2tldC5wdXNoKHtcbiAgICAgIHRvcGljOiB0aGlzLmNoYW5uZWwudG9waWMsXG4gICAgICBldmVudDogdGhpcy5ldmVudCxcbiAgICAgIHBheWxvYWQ6IHRoaXMucGF5bG9hZCgpLFxuICAgICAgcmVmOiB0aGlzLnJlZixcbiAgICAgIGpvaW5fcmVmOiB0aGlzLmNoYW5uZWwuam9pblJlZigpXG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0geyp9IHN0YXR1c1xuICAgKiBAcGFyYW0geyp9IGNhbGxiYWNrXG4gICAqL1xuICByZWNlaXZlKHN0YXR1cywgY2FsbGJhY2spe1xuICAgIGlmKHRoaXMuaGFzUmVjZWl2ZWQoc3RhdHVzKSl7XG4gICAgICBjYWxsYmFjayh0aGlzLnJlY2VpdmVkUmVzcC5yZXNwb25zZSlcbiAgICB9XG5cbiAgICB0aGlzLnJlY0hvb2tzLnB1c2goe3N0YXR1cywgY2FsbGJhY2t9KVxuICAgIHJldHVybiB0aGlzXG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHJlc2V0KCl7XG4gICAgdGhpcy5jYW5jZWxSZWZFdmVudCgpXG4gICAgdGhpcy5yZWYgPSBudWxsXG4gICAgdGhpcy5yZWZFdmVudCA9IG51bGxcbiAgICB0aGlzLnJlY2VpdmVkUmVzcCA9IG51bGxcbiAgICB0aGlzLnNlbnQgPSBmYWxzZVxuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBtYXRjaFJlY2VpdmUoe3N0YXR1cywgcmVzcG9uc2UsIF9yZWZ9KXtcbiAgICB0aGlzLnJlY0hvb2tzLmZpbHRlcihoID0+IGguc3RhdHVzID09PSBzdGF0dXMpXG4gICAgICAuZm9yRWFjaChoID0+IGguY2FsbGJhY2socmVzcG9uc2UpKVxuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBjYW5jZWxSZWZFdmVudCgpe1xuICAgIGlmKCF0aGlzLnJlZkV2ZW50KXsgcmV0dXJuIH1cbiAgICB0aGlzLmNoYW5uZWwub2ZmKHRoaXMucmVmRXZlbnQpXG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGNhbmNlbFRpbWVvdXQoKXtcbiAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lb3V0VGltZXIpXG4gICAgdGhpcy50aW1lb3V0VGltZXIgPSBudWxsXG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHN0YXJ0VGltZW91dCgpe1xuICAgIGlmKHRoaXMudGltZW91dFRpbWVyKXsgdGhpcy5jYW5jZWxUaW1lb3V0KCkgfVxuICAgIHRoaXMucmVmID0gdGhpcy5jaGFubmVsLnNvY2tldC5tYWtlUmVmKClcbiAgICB0aGlzLnJlZkV2ZW50ID0gdGhpcy5jaGFubmVsLnJlcGx5RXZlbnROYW1lKHRoaXMucmVmKVxuXG4gICAgdGhpcy5jaGFubmVsLm9uKHRoaXMucmVmRXZlbnQsIHBheWxvYWQgPT4ge1xuICAgICAgdGhpcy5jYW5jZWxSZWZFdmVudCgpXG4gICAgICB0aGlzLmNhbmNlbFRpbWVvdXQoKVxuICAgICAgdGhpcy5yZWNlaXZlZFJlc3AgPSBwYXlsb2FkXG4gICAgICB0aGlzLm1hdGNoUmVjZWl2ZShwYXlsb2FkKVxuICAgIH0pXG5cbiAgICB0aGlzLnRpbWVvdXRUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy50cmlnZ2VyKFwidGltZW91dFwiLCB7fSlcbiAgICB9LCB0aGlzLnRpbWVvdXQpXG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGhhc1JlY2VpdmVkKHN0YXR1cyl7XG4gICAgcmV0dXJuIHRoaXMucmVjZWl2ZWRSZXNwICYmIHRoaXMucmVjZWl2ZWRSZXNwLnN0YXR1cyA9PT0gc3RhdHVzXG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHRyaWdnZXIoc3RhdHVzLCByZXNwb25zZSl7XG4gICAgdGhpcy5jaGFubmVsLnRyaWdnZXIodGhpcy5yZWZFdmVudCwge3N0YXR1cywgcmVzcG9uc2V9KVxuICB9XG59XG4iLCAiLyoqXG4gKlxuICogQ3JlYXRlcyBhIHRpbWVyIHRoYXQgYWNjZXB0cyBhIGB0aW1lckNhbGNgIGZ1bmN0aW9uIHRvIHBlcmZvcm1cbiAqIGNhbGN1bGF0ZWQgdGltZW91dCByZXRyaWVzLCBzdWNoIGFzIGV4cG9uZW50aWFsIGJhY2tvZmYuXG4gKlxuICogQGV4YW1wbGVcbiAqIGxldCByZWNvbm5lY3RUaW1lciA9IG5ldyBUaW1lcigoKSA9PiB0aGlzLmNvbm5lY3QoKSwgZnVuY3Rpb24odHJpZXMpe1xuICogICByZXR1cm4gWzEwMDAsIDUwMDAsIDEwMDAwXVt0cmllcyAtIDFdIHx8IDEwMDAwXG4gKiB9KVxuICogcmVjb25uZWN0VGltZXIuc2NoZWR1bGVUaW1lb3V0KCkgLy8gZmlyZXMgYWZ0ZXIgMTAwMFxuICogcmVjb25uZWN0VGltZXIuc2NoZWR1bGVUaW1lb3V0KCkgLy8gZmlyZXMgYWZ0ZXIgNTAwMFxuICogcmVjb25uZWN0VGltZXIucmVzZXQoKVxuICogcmVjb25uZWN0VGltZXIuc2NoZWR1bGVUaW1lb3V0KCkgLy8gZmlyZXMgYWZ0ZXIgMTAwMFxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSB0aW1lckNhbGNcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGltZXIge1xuICBjb25zdHJ1Y3RvcihjYWxsYmFjaywgdGltZXJDYWxjKXtcbiAgICB0aGlzLmNhbGxiYWNrID0gY2FsbGJhY2tcbiAgICB0aGlzLnRpbWVyQ2FsYyA9IHRpbWVyQ2FsY1xuICAgIHRoaXMudGltZXIgPSBudWxsXG4gICAgdGhpcy50cmllcyA9IDBcbiAgfVxuXG4gIHJlc2V0KCl7XG4gICAgdGhpcy50cmllcyA9IDBcbiAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lcilcbiAgfVxuXG4gIC8qKlxuICAgKiBDYW5jZWxzIGFueSBwcmV2aW91cyBzY2hlZHVsZVRpbWVvdXQgYW5kIHNjaGVkdWxlcyBjYWxsYmFja1xuICAgKi9cbiAgc2NoZWR1bGVUaW1lb3V0KCl7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZXIpXG5cbiAgICB0aGlzLnRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLnRyaWVzID0gdGhpcy50cmllcyArIDFcbiAgICAgIHRoaXMuY2FsbGJhY2soKVxuICAgIH0sIHRoaXMudGltZXJDYWxjKHRoaXMudHJpZXMgKyAxKSlcbiAgfVxufVxuIiwgImltcG9ydCB7Y2xvc3VyZX0gZnJvbSBcIi4vdXRpbHNcIlxuaW1wb3J0IHtcbiAgQ0hBTk5FTF9FVkVOVFMsXG4gIENIQU5ORUxfU1RBVEVTLFxufSBmcm9tIFwiLi9jb25zdGFudHNcIlxuXG5pbXBvcnQgUHVzaCBmcm9tIFwiLi9wdXNoXCJcbmltcG9ydCBUaW1lciBmcm9tIFwiLi90aW1lclwiXG5cbi8qKlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSB0b3BpY1xuICogQHBhcmFtIHsoT2JqZWN0fGZ1bmN0aW9uKX0gcGFyYW1zXG4gKiBAcGFyYW0ge1NvY2tldH0gc29ja2V0XG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENoYW5uZWwge1xuICBjb25zdHJ1Y3Rvcih0b3BpYywgcGFyYW1zLCBzb2NrZXQpe1xuICAgIHRoaXMuc3RhdGUgPSBDSEFOTkVMX1NUQVRFUy5jbG9zZWRcbiAgICB0aGlzLnRvcGljID0gdG9waWNcbiAgICB0aGlzLnBhcmFtcyA9IGNsb3N1cmUocGFyYW1zIHx8IHt9KVxuICAgIHRoaXMuc29ja2V0ID0gc29ja2V0XG4gICAgdGhpcy5iaW5kaW5ncyA9IFtdXG4gICAgdGhpcy5iaW5kaW5nUmVmID0gMFxuICAgIHRoaXMudGltZW91dCA9IHRoaXMuc29ja2V0LnRpbWVvdXRcbiAgICB0aGlzLmpvaW5lZE9uY2UgPSBmYWxzZVxuICAgIHRoaXMuam9pblB1c2ggPSBuZXcgUHVzaCh0aGlzLCBDSEFOTkVMX0VWRU5UUy5qb2luLCB0aGlzLnBhcmFtcywgdGhpcy50aW1lb3V0KVxuICAgIHRoaXMucHVzaEJ1ZmZlciA9IFtdXG4gICAgdGhpcy5zdGF0ZUNoYW5nZVJlZnMgPSBbXVxuXG4gICAgdGhpcy5yZWpvaW5UaW1lciA9IG5ldyBUaW1lcigoKSA9PiB7XG4gICAgICBpZih0aGlzLnNvY2tldC5pc0Nvbm5lY3RlZCgpKXsgdGhpcy5yZWpvaW4oKSB9XG4gICAgfSwgdGhpcy5zb2NrZXQucmVqb2luQWZ0ZXJNcylcbiAgICB0aGlzLnN0YXRlQ2hhbmdlUmVmcy5wdXNoKHRoaXMuc29ja2V0Lm9uRXJyb3IoKCkgPT4gdGhpcy5yZWpvaW5UaW1lci5yZXNldCgpKSlcbiAgICB0aGlzLnN0YXRlQ2hhbmdlUmVmcy5wdXNoKHRoaXMuc29ja2V0Lm9uT3BlbigoKSA9PiB7XG4gICAgICB0aGlzLnJlam9pblRpbWVyLnJlc2V0KClcbiAgICAgIGlmKHRoaXMuaXNFcnJvcmVkKCkpeyB0aGlzLnJlam9pbigpIH1cbiAgICB9KVxuICAgIClcbiAgICB0aGlzLmpvaW5QdXNoLnJlY2VpdmUoXCJva1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLnN0YXRlID0gQ0hBTk5FTF9TVEFURVMuam9pbmVkXG4gICAgICB0aGlzLnJlam9pblRpbWVyLnJlc2V0KClcbiAgICAgIHRoaXMucHVzaEJ1ZmZlci5mb3JFYWNoKHB1c2hFdmVudCA9PiBwdXNoRXZlbnQuc2VuZCgpKVxuICAgICAgdGhpcy5wdXNoQnVmZmVyID0gW11cbiAgICB9KVxuICAgIHRoaXMuam9pblB1c2gucmVjZWl2ZShcImVycm9yXCIsICgpID0+IHtcbiAgICAgIHRoaXMuc3RhdGUgPSBDSEFOTkVMX1NUQVRFUy5lcnJvcmVkXG4gICAgICBpZih0aGlzLnNvY2tldC5pc0Nvbm5lY3RlZCgpKXsgdGhpcy5yZWpvaW5UaW1lci5zY2hlZHVsZVRpbWVvdXQoKSB9XG4gICAgfSlcbiAgICB0aGlzLm9uQ2xvc2UoKCkgPT4ge1xuICAgICAgdGhpcy5yZWpvaW5UaW1lci5yZXNldCgpXG4gICAgICBpZih0aGlzLnNvY2tldC5oYXNMb2dnZXIoKSkgdGhpcy5zb2NrZXQubG9nKFwiY2hhbm5lbFwiLCBgY2xvc2UgJHt0aGlzLnRvcGljfSAke3RoaXMuam9pblJlZigpfWApXG4gICAgICB0aGlzLnN0YXRlID0gQ0hBTk5FTF9TVEFURVMuY2xvc2VkXG4gICAgICB0aGlzLnNvY2tldC5yZW1vdmUodGhpcylcbiAgICB9KVxuICAgIHRoaXMub25FcnJvcihyZWFzb24gPT4ge1xuICAgICAgaWYodGhpcy5zb2NrZXQuaGFzTG9nZ2VyKCkpIHRoaXMuc29ja2V0LmxvZyhcImNoYW5uZWxcIiwgYGVycm9yICR7dGhpcy50b3BpY31gLCByZWFzb24pXG4gICAgICBpZih0aGlzLmlzSm9pbmluZygpKXsgdGhpcy5qb2luUHVzaC5yZXNldCgpIH1cbiAgICAgIHRoaXMuc3RhdGUgPSBDSEFOTkVMX1NUQVRFUy5lcnJvcmVkXG4gICAgICBpZih0aGlzLnNvY2tldC5pc0Nvbm5lY3RlZCgpKXsgdGhpcy5yZWpvaW5UaW1lci5zY2hlZHVsZVRpbWVvdXQoKSB9XG4gICAgfSlcbiAgICB0aGlzLmpvaW5QdXNoLnJlY2VpdmUoXCJ0aW1lb3V0XCIsICgpID0+IHtcbiAgICAgIGlmKHRoaXMuc29ja2V0Lmhhc0xvZ2dlcigpKSB0aGlzLnNvY2tldC5sb2coXCJjaGFubmVsXCIsIGB0aW1lb3V0ICR7dGhpcy50b3BpY30gKCR7dGhpcy5qb2luUmVmKCl9KWAsIHRoaXMuam9pblB1c2gudGltZW91dClcbiAgICAgIGxldCBsZWF2ZVB1c2ggPSBuZXcgUHVzaCh0aGlzLCBDSEFOTkVMX0VWRU5UUy5sZWF2ZSwgY2xvc3VyZSh7fSksIHRoaXMudGltZW91dClcbiAgICAgIGxlYXZlUHVzaC5zZW5kKClcbiAgICAgIHRoaXMuc3RhdGUgPSBDSEFOTkVMX1NUQVRFUy5lcnJvcmVkXG4gICAgICB0aGlzLmpvaW5QdXNoLnJlc2V0KClcbiAgICAgIGlmKHRoaXMuc29ja2V0LmlzQ29ubmVjdGVkKCkpeyB0aGlzLnJlam9pblRpbWVyLnNjaGVkdWxlVGltZW91dCgpIH1cbiAgICB9KVxuICAgIHRoaXMub24oQ0hBTk5FTF9FVkVOVFMucmVwbHksIChwYXlsb2FkLCByZWYpID0+IHtcbiAgICAgIHRoaXMudHJpZ2dlcih0aGlzLnJlcGx5RXZlbnROYW1lKHJlZiksIHBheWxvYWQpXG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBKb2luIHRoZSBjaGFubmVsXG4gICAqIEBwYXJhbSB7aW50ZWdlcn0gdGltZW91dFxuICAgKiBAcmV0dXJucyB7UHVzaH1cbiAgICovXG4gIGpvaW4odGltZW91dCA9IHRoaXMudGltZW91dCl7XG4gICAgaWYodGhpcy5qb2luZWRPbmNlKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcInRyaWVkIHRvIGpvaW4gbXVsdGlwbGUgdGltZXMuICdqb2luJyBjYW4gb25seSBiZSBjYWxsZWQgYSBzaW5nbGUgdGltZSBwZXIgY2hhbm5lbCBpbnN0YW5jZVwiKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnRpbWVvdXQgPSB0aW1lb3V0XG4gICAgICB0aGlzLmpvaW5lZE9uY2UgPSB0cnVlXG4gICAgICB0aGlzLnJlam9pbigpXG4gICAgICByZXR1cm4gdGhpcy5qb2luUHVzaFxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBIb29rIGludG8gY2hhbm5lbCBjbG9zZVxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICAgKi9cbiAgb25DbG9zZShjYWxsYmFjayl7XG4gICAgdGhpcy5vbihDSEFOTkVMX0VWRU5UUy5jbG9zZSwgY2FsbGJhY2spXG4gIH1cblxuICAvKipcbiAgICogSG9vayBpbnRvIGNoYW5uZWwgZXJyb3JzXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gICAqL1xuICBvbkVycm9yKGNhbGxiYWNrKXtcbiAgICByZXR1cm4gdGhpcy5vbihDSEFOTkVMX0VWRU5UUy5lcnJvciwgcmVhc29uID0+IGNhbGxiYWNrKHJlYXNvbikpXG4gIH1cblxuICAvKipcbiAgICogU3Vic2NyaWJlcyBvbiBjaGFubmVsIGV2ZW50c1xuICAgKlxuICAgKiBTdWJzY3JpcHRpb24gcmV0dXJucyBhIHJlZiBjb3VudGVyLCB3aGljaCBjYW4gYmUgdXNlZCBsYXRlciB0b1xuICAgKiB1bnN1YnNjcmliZSB0aGUgZXhhY3QgZXZlbnQgbGlzdGVuZXJcbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogY29uc3QgcmVmMSA9IGNoYW5uZWwub24oXCJldmVudFwiLCBkb19zdHVmZilcbiAgICogY29uc3QgcmVmMiA9IGNoYW5uZWwub24oXCJldmVudFwiLCBkb19vdGhlcl9zdHVmZilcbiAgICogY2hhbm5lbC5vZmYoXCJldmVudFwiLCByZWYxKVxuICAgKiAvLyBTaW5jZSB1bnN1YnNjcmlwdGlvbiwgZG9fc3R1ZmYgd29uJ3QgZmlyZSxcbiAgICogLy8gd2hpbGUgZG9fb3RoZXJfc3R1ZmYgd2lsbCBrZWVwIGZpcmluZyBvbiB0aGUgXCJldmVudFwiXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICAgKiBAcmV0dXJucyB7aW50ZWdlcn0gcmVmXG4gICAqL1xuICBvbihldmVudCwgY2FsbGJhY2spe1xuICAgIGxldCByZWYgPSB0aGlzLmJpbmRpbmdSZWYrK1xuICAgIHRoaXMuYmluZGluZ3MucHVzaCh7ZXZlbnQsIHJlZiwgY2FsbGJhY2t9KVxuICAgIHJldHVybiByZWZcbiAgfVxuXG4gIC8qKlxuICAgKiBVbnN1YnNjcmliZXMgb2ZmIG9mIGNoYW5uZWwgZXZlbnRzXG4gICAqXG4gICAqIFVzZSB0aGUgcmVmIHJldHVybmVkIGZyb20gYSBjaGFubmVsLm9uKCkgdG8gdW5zdWJzY3JpYmUgb25lXG4gICAqIGhhbmRsZXIsIG9yIHBhc3Mgbm90aGluZyBmb3IgdGhlIHJlZiB0byB1bnN1YnNjcmliZSBhbGxcbiAgICogaGFuZGxlcnMgZm9yIHRoZSBnaXZlbiBldmVudC5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogLy8gVW5zdWJzY3JpYmUgdGhlIGRvX3N0dWZmIGhhbmRsZXJcbiAgICogY29uc3QgcmVmMSA9IGNoYW5uZWwub24oXCJldmVudFwiLCBkb19zdHVmZilcbiAgICogY2hhbm5lbC5vZmYoXCJldmVudFwiLCByZWYxKVxuICAgKlxuICAgKiAvLyBVbnN1YnNjcmliZSBhbGwgaGFuZGxlcnMgZnJvbSBldmVudFxuICAgKiBjaGFubmVsLm9mZihcImV2ZW50XCIpXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudFxuICAgKiBAcGFyYW0ge2ludGVnZXJ9IHJlZlxuICAgKi9cbiAgb2ZmKGV2ZW50LCByZWYpe1xuICAgIHRoaXMuYmluZGluZ3MgPSB0aGlzLmJpbmRpbmdzLmZpbHRlcigoYmluZCkgPT4ge1xuICAgICAgcmV0dXJuICEoYmluZC5ldmVudCA9PT0gZXZlbnQgJiYgKHR5cGVvZiByZWYgPT09IFwidW5kZWZpbmVkXCIgfHwgcmVmID09PSBiaW5kLnJlZikpXG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgY2FuUHVzaCgpeyByZXR1cm4gdGhpcy5zb2NrZXQuaXNDb25uZWN0ZWQoKSAmJiB0aGlzLmlzSm9pbmVkKCkgfVxuXG4gIC8qKlxuICAgKiBTZW5kcyBhIG1lc3NhZ2UgYGV2ZW50YCB0byBwaG9lbml4IHdpdGggdGhlIHBheWxvYWQgYHBheWxvYWRgLlxuICAgKiBQaG9lbml4IHJlY2VpdmVzIHRoaXMgaW4gdGhlIGBoYW5kbGVfaW4oZXZlbnQsIHBheWxvYWQsIHNvY2tldClgXG4gICAqIGZ1bmN0aW9uLiBpZiBwaG9lbml4IHJlcGxpZXMgb3IgaXQgdGltZXMgb3V0IChkZWZhdWx0IDEwMDAwbXMpLFxuICAgKiB0aGVuIG9wdGlvbmFsbHkgdGhlIHJlcGx5IGNhbiBiZSByZWNlaXZlZC5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogY2hhbm5lbC5wdXNoKFwiZXZlbnRcIilcbiAgICogICAucmVjZWl2ZShcIm9rXCIsIHBheWxvYWQgPT4gY29uc29sZS5sb2coXCJwaG9lbml4IHJlcGxpZWQ6XCIsIHBheWxvYWQpKVxuICAgKiAgIC5yZWNlaXZlKFwiZXJyb3JcIiwgZXJyID0+IGNvbnNvbGUubG9nKFwicGhvZW5peCBlcnJvcmVkXCIsIGVycikpXG4gICAqICAgLnJlY2VpdmUoXCJ0aW1lb3V0XCIsICgpID0+IGNvbnNvbGUubG9nKFwidGltZWQgb3V0IHB1c2hpbmdcIikpXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudFxuICAgKiBAcGFyYW0ge09iamVjdH0gcGF5bG9hZFxuICAgKiBAcGFyYW0ge251bWJlcn0gW3RpbWVvdXRdXG4gICAqIEByZXR1cm5zIHtQdXNofVxuICAgKi9cbiAgcHVzaChldmVudCwgcGF5bG9hZCwgdGltZW91dCA9IHRoaXMudGltZW91dCl7XG4gICAgcGF5bG9hZCA9IHBheWxvYWQgfHwge31cbiAgICBpZighdGhpcy5qb2luZWRPbmNlKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgdHJpZWQgdG8gcHVzaCAnJHtldmVudH0nIHRvICcke3RoaXMudG9waWN9JyBiZWZvcmUgam9pbmluZy4gVXNlIGNoYW5uZWwuam9pbigpIGJlZm9yZSBwdXNoaW5nIGV2ZW50c2ApXG4gICAgfVxuICAgIGxldCBwdXNoRXZlbnQgPSBuZXcgUHVzaCh0aGlzLCBldmVudCwgZnVuY3Rpb24gKCl7IHJldHVybiBwYXlsb2FkIH0sIHRpbWVvdXQpXG4gICAgaWYodGhpcy5jYW5QdXNoKCkpe1xuICAgICAgcHVzaEV2ZW50LnNlbmQoKVxuICAgIH0gZWxzZSB7XG4gICAgICBwdXNoRXZlbnQuc3RhcnRUaW1lb3V0KClcbiAgICAgIHRoaXMucHVzaEJ1ZmZlci5wdXNoKHB1c2hFdmVudClcbiAgICB9XG5cbiAgICByZXR1cm4gcHVzaEV2ZW50XG4gIH1cblxuICAvKiogTGVhdmVzIHRoZSBjaGFubmVsXG4gICAqXG4gICAqIFVuc3Vic2NyaWJlcyBmcm9tIHNlcnZlciBldmVudHMsIGFuZFxuICAgKiBpbnN0cnVjdHMgY2hhbm5lbCB0byB0ZXJtaW5hdGUgb24gc2VydmVyXG4gICAqXG4gICAqIFRyaWdnZXJzIG9uQ2xvc2UoKSBob29rc1xuICAgKlxuICAgKiBUbyByZWNlaXZlIGxlYXZlIGFja25vd2xlZGdlbWVudHMsIHVzZSB0aGUgYHJlY2VpdmVgXG4gICAqIGhvb2sgdG8gYmluZCB0byB0aGUgc2VydmVyIGFjaywgaWU6XG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGNoYW5uZWwubGVhdmUoKS5yZWNlaXZlKFwib2tcIiwgKCkgPT4gYWxlcnQoXCJsZWZ0IVwiKSApXG4gICAqXG4gICAqIEBwYXJhbSB7aW50ZWdlcn0gdGltZW91dFxuICAgKiBAcmV0dXJucyB7UHVzaH1cbiAgICovXG4gIGxlYXZlKHRpbWVvdXQgPSB0aGlzLnRpbWVvdXQpe1xuICAgIHRoaXMucmVqb2luVGltZXIucmVzZXQoKVxuICAgIHRoaXMuam9pblB1c2guY2FuY2VsVGltZW91dCgpXG5cbiAgICB0aGlzLnN0YXRlID0gQ0hBTk5FTF9TVEFURVMubGVhdmluZ1xuICAgIGxldCBvbkNsb3NlID0gKCkgPT4ge1xuICAgICAgaWYodGhpcy5zb2NrZXQuaGFzTG9nZ2VyKCkpIHRoaXMuc29ja2V0LmxvZyhcImNoYW5uZWxcIiwgYGxlYXZlICR7dGhpcy50b3BpY31gKVxuICAgICAgdGhpcy50cmlnZ2VyKENIQU5ORUxfRVZFTlRTLmNsb3NlLCBcImxlYXZlXCIpXG4gICAgfVxuICAgIGxldCBsZWF2ZVB1c2ggPSBuZXcgUHVzaCh0aGlzLCBDSEFOTkVMX0VWRU5UUy5sZWF2ZSwgY2xvc3VyZSh7fSksIHRpbWVvdXQpXG4gICAgbGVhdmVQdXNoLnJlY2VpdmUoXCJva1wiLCAoKSA9PiBvbkNsb3NlKCkpXG4gICAgICAucmVjZWl2ZShcInRpbWVvdXRcIiwgKCkgPT4gb25DbG9zZSgpKVxuICAgIGxlYXZlUHVzaC5zZW5kKClcbiAgICBpZighdGhpcy5jYW5QdXNoKCkpeyBsZWF2ZVB1c2gudHJpZ2dlcihcIm9rXCIsIHt9KSB9XG5cbiAgICByZXR1cm4gbGVhdmVQdXNoXG4gIH1cblxuICAvKipcbiAgICogT3ZlcnJpZGFibGUgbWVzc2FnZSBob29rXG4gICAqXG4gICAqIFJlY2VpdmVzIGFsbCBldmVudHMgZm9yIHNwZWNpYWxpemVkIG1lc3NhZ2UgaGFuZGxpbmdcbiAgICogYmVmb3JlIGRpc3BhdGNoaW5nIHRvIHRoZSBjaGFubmVsIGNhbGxiYWNrcy5cbiAgICpcbiAgICogTXVzdCByZXR1cm4gdGhlIHBheWxvYWQsIG1vZGlmaWVkIG9yIHVubW9kaWZpZWRcbiAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50XG4gICAqIEBwYXJhbSB7T2JqZWN0fSBwYXlsb2FkXG4gICAqIEBwYXJhbSB7aW50ZWdlcn0gcmVmXG4gICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAqL1xuICBvbk1lc3NhZ2UoX2V2ZW50LCBwYXlsb2FkLCBfcmVmKXsgcmV0dXJuIHBheWxvYWQgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgaXNNZW1iZXIodG9waWMsIGV2ZW50LCBwYXlsb2FkLCBqb2luUmVmKXtcbiAgICBpZih0aGlzLnRvcGljICE9PSB0b3BpYyl7IHJldHVybiBmYWxzZSB9XG5cbiAgICBpZihqb2luUmVmICYmIGpvaW5SZWYgIT09IHRoaXMuam9pblJlZigpKXtcbiAgICAgIGlmKHRoaXMuc29ja2V0Lmhhc0xvZ2dlcigpKSB0aGlzLnNvY2tldC5sb2coXCJjaGFubmVsXCIsIFwiZHJvcHBpbmcgb3V0ZGF0ZWQgbWVzc2FnZVwiLCB7dG9waWMsIGV2ZW50LCBwYXlsb2FkLCBqb2luUmVmfSlcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgam9pblJlZigpeyByZXR1cm4gdGhpcy5qb2luUHVzaC5yZWYgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcmVqb2luKHRpbWVvdXQgPSB0aGlzLnRpbWVvdXQpe1xuICAgIGlmKHRoaXMuaXNMZWF2aW5nKCkpeyByZXR1cm4gfVxuICAgIHRoaXMuc29ja2V0LmxlYXZlT3BlblRvcGljKHRoaXMudG9waWMpXG4gICAgdGhpcy5zdGF0ZSA9IENIQU5ORUxfU1RBVEVTLmpvaW5pbmdcbiAgICB0aGlzLmpvaW5QdXNoLnJlc2VuZCh0aW1lb3V0KVxuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0cmlnZ2VyKGV2ZW50LCBwYXlsb2FkLCByZWYsIGpvaW5SZWYpe1xuICAgIGxldCBoYW5kbGVkUGF5bG9hZCA9IHRoaXMub25NZXNzYWdlKGV2ZW50LCBwYXlsb2FkLCByZWYsIGpvaW5SZWYpXG4gICAgaWYocGF5bG9hZCAmJiAhaGFuZGxlZFBheWxvYWQpeyB0aHJvdyBuZXcgRXJyb3IoXCJjaGFubmVsIG9uTWVzc2FnZSBjYWxsYmFja3MgbXVzdCByZXR1cm4gdGhlIHBheWxvYWQsIG1vZGlmaWVkIG9yIHVubW9kaWZpZWRcIikgfVxuXG4gICAgbGV0IGV2ZW50QmluZGluZ3MgPSB0aGlzLmJpbmRpbmdzLmZpbHRlcihiaW5kID0+IGJpbmQuZXZlbnQgPT09IGV2ZW50KVxuXG4gICAgZm9yKGxldCBpID0gMDsgaSA8IGV2ZW50QmluZGluZ3MubGVuZ3RoOyBpKyspe1xuICAgICAgbGV0IGJpbmQgPSBldmVudEJpbmRpbmdzW2ldXG4gICAgICBiaW5kLmNhbGxiYWNrKGhhbmRsZWRQYXlsb2FkLCByZWYsIGpvaW5SZWYgfHwgdGhpcy5qb2luUmVmKCkpXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICByZXBseUV2ZW50TmFtZShyZWYpeyByZXR1cm4gYGNoYW5fcmVwbHlfJHtyZWZ9YCB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBpc0Nsb3NlZCgpeyByZXR1cm4gdGhpcy5zdGF0ZSA9PT0gQ0hBTk5FTF9TVEFURVMuY2xvc2VkIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGlzRXJyb3JlZCgpeyByZXR1cm4gdGhpcy5zdGF0ZSA9PT0gQ0hBTk5FTF9TVEFURVMuZXJyb3JlZCB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBpc0pvaW5lZCgpeyByZXR1cm4gdGhpcy5zdGF0ZSA9PT0gQ0hBTk5FTF9TVEFURVMuam9pbmVkIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGlzSm9pbmluZygpeyByZXR1cm4gdGhpcy5zdGF0ZSA9PT0gQ0hBTk5FTF9TVEFURVMuam9pbmluZyB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBpc0xlYXZpbmcoKXsgcmV0dXJuIHRoaXMuc3RhdGUgPT09IENIQU5ORUxfU1RBVEVTLmxlYXZpbmcgfVxufVxuIiwgImltcG9ydCB7XG4gIGdsb2JhbCxcbiAgWEhSX1NUQVRFU1xufSBmcm9tIFwiLi9jb25zdGFudHNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBamF4IHtcblxuICBzdGF0aWMgcmVxdWVzdChtZXRob2QsIGVuZFBvaW50LCBhY2NlcHQsIGJvZHksIHRpbWVvdXQsIG9udGltZW91dCwgY2FsbGJhY2spe1xuICAgIGlmKGdsb2JhbC5YRG9tYWluUmVxdWVzdCl7XG4gICAgICBsZXQgcmVxID0gbmV3IGdsb2JhbC5YRG9tYWluUmVxdWVzdCgpIC8vIElFOCwgSUU5XG4gICAgICByZXR1cm4gdGhpcy54ZG9tYWluUmVxdWVzdChyZXEsIG1ldGhvZCwgZW5kUG9pbnQsIGJvZHksIHRpbWVvdXQsIG9udGltZW91dCwgY2FsbGJhY2spXG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCByZXEgPSBuZXcgZ2xvYmFsLlhNTEh0dHBSZXF1ZXN0KCkgLy8gSUU3KywgRmlyZWZveCwgQ2hyb21lLCBPcGVyYSwgU2FmYXJpXG4gICAgICByZXR1cm4gdGhpcy54aHJSZXF1ZXN0KHJlcSwgbWV0aG9kLCBlbmRQb2ludCwgYWNjZXB0LCBib2R5LCB0aW1lb3V0LCBvbnRpbWVvdXQsIGNhbGxiYWNrKVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyB4ZG9tYWluUmVxdWVzdChyZXEsIG1ldGhvZCwgZW5kUG9pbnQsIGJvZHksIHRpbWVvdXQsIG9udGltZW91dCwgY2FsbGJhY2spe1xuICAgIHJlcS50aW1lb3V0ID0gdGltZW91dFxuICAgIHJlcS5vcGVuKG1ldGhvZCwgZW5kUG9pbnQpXG4gICAgcmVxLm9ubG9hZCA9ICgpID0+IHtcbiAgICAgIGxldCByZXNwb25zZSA9IHRoaXMucGFyc2VKU09OKHJlcS5yZXNwb25zZVRleHQpXG4gICAgICBjYWxsYmFjayAmJiBjYWxsYmFjayhyZXNwb25zZSlcbiAgICB9XG4gICAgaWYob250aW1lb3V0KXsgcmVxLm9udGltZW91dCA9IG9udGltZW91dCB9XG5cbiAgICAvLyBXb3JrIGFyb3VuZCBidWcgaW4gSUU5IHRoYXQgcmVxdWlyZXMgYW4gYXR0YWNoZWQgb25wcm9ncmVzcyBoYW5kbGVyXG4gICAgcmVxLm9ucHJvZ3Jlc3MgPSAoKSA9PiB7IH1cblxuICAgIHJlcS5zZW5kKGJvZHkpXG4gICAgcmV0dXJuIHJlcVxuICB9XG5cbiAgc3RhdGljIHhoclJlcXVlc3QocmVxLCBtZXRob2QsIGVuZFBvaW50LCBhY2NlcHQsIGJvZHksIHRpbWVvdXQsIG9udGltZW91dCwgY2FsbGJhY2spe1xuICAgIHJlcS5vcGVuKG1ldGhvZCwgZW5kUG9pbnQsIHRydWUpXG4gICAgcmVxLnRpbWVvdXQgPSB0aW1lb3V0XG4gICAgcmVxLnNldFJlcXVlc3RIZWFkZXIoXCJDb250ZW50LVR5cGVcIiwgYWNjZXB0KVxuICAgIHJlcS5vbmVycm9yID0gKCkgPT4gY2FsbGJhY2sgJiYgY2FsbGJhY2sobnVsbClcbiAgICByZXEub25yZWFkeXN0YXRlY2hhbmdlID0gKCkgPT4ge1xuICAgICAgaWYocmVxLnJlYWR5U3RhdGUgPT09IFhIUl9TVEFURVMuY29tcGxldGUgJiYgY2FsbGJhY2spe1xuICAgICAgICBsZXQgcmVzcG9uc2UgPSB0aGlzLnBhcnNlSlNPTihyZXEucmVzcG9uc2VUZXh0KVxuICAgICAgICBjYWxsYmFjayhyZXNwb25zZSlcbiAgICAgIH1cbiAgICB9XG4gICAgaWYob250aW1lb3V0KXsgcmVxLm9udGltZW91dCA9IG9udGltZW91dCB9XG5cbiAgICByZXEuc2VuZChib2R5KVxuICAgIHJldHVybiByZXFcbiAgfVxuXG4gIHN0YXRpYyBwYXJzZUpTT04ocmVzcCl7XG4gICAgaWYoIXJlc3AgfHwgcmVzcCA9PT0gXCJcIil7IHJldHVybiBudWxsIH1cblxuICAgIHRyeSB7XG4gICAgICByZXR1cm4gSlNPTi5wYXJzZShyZXNwKVxuICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgY29uc29sZSAmJiBjb25zb2xlLmxvZyhcImZhaWxlZCB0byBwYXJzZSBKU09OIHJlc3BvbnNlXCIsIHJlc3ApXG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBzZXJpYWxpemUob2JqLCBwYXJlbnRLZXkpe1xuICAgIGxldCBxdWVyeVN0ciA9IFtdXG4gICAgZm9yKHZhciBrZXkgaW4gb2JqKXtcbiAgICAgIGlmKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKXsgY29udGludWUgfVxuICAgICAgbGV0IHBhcmFtS2V5ID0gcGFyZW50S2V5ID8gYCR7cGFyZW50S2V5fVske2tleX1dYCA6IGtleVxuICAgICAgbGV0IHBhcmFtVmFsID0gb2JqW2tleV1cbiAgICAgIGlmKHR5cGVvZiBwYXJhbVZhbCA9PT0gXCJvYmplY3RcIil7XG4gICAgICAgIHF1ZXJ5U3RyLnB1c2godGhpcy5zZXJpYWxpemUocGFyYW1WYWwsIHBhcmFtS2V5KSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHF1ZXJ5U3RyLnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KHBhcmFtS2V5KSArIFwiPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KHBhcmFtVmFsKSlcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHF1ZXJ5U3RyLmpvaW4oXCImXCIpXG4gIH1cblxuICBzdGF0aWMgYXBwZW5kUGFyYW1zKHVybCwgcGFyYW1zKXtcbiAgICBpZihPYmplY3Qua2V5cyhwYXJhbXMpLmxlbmd0aCA9PT0gMCl7IHJldHVybiB1cmwgfVxuXG4gICAgbGV0IHByZWZpeCA9IHVybC5tYXRjaCgvXFw/LykgPyBcIiZcIiA6IFwiP1wiXG4gICAgcmV0dXJuIGAke3VybH0ke3ByZWZpeH0ke3RoaXMuc2VyaWFsaXplKHBhcmFtcyl9YFxuICB9XG59XG4iLCAiaW1wb3J0IHtcbiAgU09DS0VUX1NUQVRFUyxcbiAgVFJBTlNQT1JUU1xufSBmcm9tIFwiLi9jb25zdGFudHNcIlxuXG5pbXBvcnQgQWpheCBmcm9tIFwiLi9hamF4XCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTG9uZ1BvbGwge1xuXG4gIGNvbnN0cnVjdG9yKGVuZFBvaW50KXtcbiAgICB0aGlzLmVuZFBvaW50ID0gbnVsbFxuICAgIHRoaXMudG9rZW4gPSBudWxsXG4gICAgdGhpcy5za2lwSGVhcnRiZWF0ID0gdHJ1ZVxuICAgIHRoaXMucmVxcyA9IG5ldyBTZXQoKVxuICAgIHRoaXMuYXdhaXRpbmdCYXRjaEFjayA9IGZhbHNlXG4gICAgdGhpcy5jdXJyZW50QmF0Y2ggPSBudWxsXG4gICAgdGhpcy5jdXJyZW50QmF0Y2hUaW1lciA9IG51bGxcbiAgICB0aGlzLmJhdGNoQnVmZmVyID0gW11cbiAgICB0aGlzLm9ub3BlbiA9IGZ1bmN0aW9uICgpeyB9IC8vIG5vb3BcbiAgICB0aGlzLm9uZXJyb3IgPSBmdW5jdGlvbiAoKXsgfSAvLyBub29wXG4gICAgdGhpcy5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAoKXsgfSAvLyBub29wXG4gICAgdGhpcy5vbmNsb3NlID0gZnVuY3Rpb24gKCl7IH0gLy8gbm9vcFxuICAgIHRoaXMucG9sbEVuZHBvaW50ID0gdGhpcy5ub3JtYWxpemVFbmRwb2ludChlbmRQb2ludClcbiAgICB0aGlzLnJlYWR5U3RhdGUgPSBTT0NLRVRfU1RBVEVTLmNvbm5lY3RpbmdcbiAgICB0aGlzLnBvbGwoKVxuICB9XG5cbiAgbm9ybWFsaXplRW5kcG9pbnQoZW5kUG9pbnQpe1xuICAgIHJldHVybiAoZW5kUG9pbnRcbiAgICAgIC5yZXBsYWNlKFwid3M6Ly9cIiwgXCJodHRwOi8vXCIpXG4gICAgICAucmVwbGFjZShcIndzczovL1wiLCBcImh0dHBzOi8vXCIpXG4gICAgICAucmVwbGFjZShuZXcgUmVnRXhwKFwiKC4qKVxcL1wiICsgVFJBTlNQT1JUUy53ZWJzb2NrZXQpLCBcIiQxL1wiICsgVFJBTlNQT1JUUy5sb25ncG9sbCkpXG4gIH1cblxuICBlbmRwb2ludFVSTCgpe1xuICAgIHJldHVybiBBamF4LmFwcGVuZFBhcmFtcyh0aGlzLnBvbGxFbmRwb2ludCwge3Rva2VuOiB0aGlzLnRva2VufSlcbiAgfVxuXG4gIGNsb3NlQW5kUmV0cnkoY29kZSwgcmVhc29uLCB3YXNDbGVhbil7XG4gICAgdGhpcy5jbG9zZShjb2RlLCByZWFzb24sIHdhc0NsZWFuKVxuICAgIHRoaXMucmVhZHlTdGF0ZSA9IFNPQ0tFVF9TVEFURVMuY29ubmVjdGluZ1xuICB9XG5cbiAgb250aW1lb3V0KCl7XG4gICAgdGhpcy5vbmVycm9yKFwidGltZW91dFwiKVxuICAgIHRoaXMuY2xvc2VBbmRSZXRyeSgxMDA1LCBcInRpbWVvdXRcIiwgZmFsc2UpXG4gIH1cblxuICBpc0FjdGl2ZSgpeyByZXR1cm4gdGhpcy5yZWFkeVN0YXRlID09PSBTT0NLRVRfU1RBVEVTLm9wZW4gfHwgdGhpcy5yZWFkeVN0YXRlID09PSBTT0NLRVRfU1RBVEVTLmNvbm5lY3RpbmcgfVxuXG4gIHBvbGwoKXtcbiAgICB0aGlzLmFqYXgoXCJHRVRcIiwgXCJhcHBsaWNhdGlvbi9qc29uXCIsIG51bGwsICgpID0+IHRoaXMub250aW1lb3V0KCksIHJlc3AgPT4ge1xuICAgICAgaWYocmVzcCl7XG4gICAgICAgIHZhciB7c3RhdHVzLCB0b2tlbiwgbWVzc2FnZXN9ID0gcmVzcFxuICAgICAgICB0aGlzLnRva2VuID0gdG9rZW5cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0YXR1cyA9IDBcbiAgICAgIH1cblxuICAgICAgc3dpdGNoKHN0YXR1cyl7XG4gICAgICAgIGNhc2UgMjAwOlxuICAgICAgICAgIG1lc3NhZ2VzLmZvckVhY2gobXNnID0+IHtcbiAgICAgICAgICAgIC8vIFRhc2tzIGFyZSB3aGF0IHRoaW5ncyBsaWtlIGV2ZW50IGhhbmRsZXJzLCBzZXRUaW1lb3V0IGNhbGxiYWNrcyxcbiAgICAgICAgICAgIC8vIHByb21pc2UgcmVzb2x2ZXMgYW5kIG1vcmUgYXJlIHJ1biB3aXRoaW4uXG4gICAgICAgICAgICAvLyBJbiBtb2Rlcm4gYnJvd3NlcnMsIHRoZXJlIGFyZSB0d28gZGlmZmVyZW50IGtpbmRzIG9mIHRhc2tzLFxuICAgICAgICAgICAgLy8gbWljcm90YXNrcyBhbmQgbWFjcm90YXNrcy5cbiAgICAgICAgICAgIC8vIE1pY3JvdGFza3MgYXJlIG1haW5seSB1c2VkIGZvciBQcm9taXNlcywgd2hpbGUgbWFjcm90YXNrcyBhcmVcbiAgICAgICAgICAgIC8vIHVzZWQgZm9yIGV2ZXJ5dGhpbmcgZWxzZS5cbiAgICAgICAgICAgIC8vIE1pY3JvdGFza3MgYWx3YXlzIGhhdmUgcHJpb3JpdHkgb3ZlciBtYWNyb3Rhc2tzLiBJZiB0aGUgSlMgZW5naW5lXG4gICAgICAgICAgICAvLyBpcyBsb29raW5nIGZvciBhIHRhc2sgdG8gcnVuLCBpdCB3aWxsIGFsd2F5cyB0cnkgdG8gZW1wdHkgdGhlXG4gICAgICAgICAgICAvLyBtaWNyb3Rhc2sgcXVldWUgYmVmb3JlIGF0dGVtcHRpbmcgdG8gcnVuIGFueXRoaW5nIGZyb20gdGhlXG4gICAgICAgICAgICAvLyBtYWNyb3Rhc2sgcXVldWUuXG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gRm9yIHRoZSBXZWJTb2NrZXQgdHJhbnNwb3J0LCBtZXNzYWdlcyBhbHdheXMgYXJyaXZlIGluIHRoZWlyIG93blxuICAgICAgICAgICAgLy8gZXZlbnQuIFRoaXMgbWVhbnMgdGhhdCBpZiBhbnkgcHJvbWlzZXMgYXJlIHJlc29sdmVkIGZyb20gd2l0aGluLFxuICAgICAgICAgICAgLy8gdGhlaXIgY2FsbGJhY2tzIHdpbGwgYWx3YXlzIGZpbmlzaCBleGVjdXRpb24gYnkgdGhlIHRpbWUgdGhlXG4gICAgICAgICAgICAvLyBuZXh0IG1lc3NhZ2UgZXZlbnQgaGFuZGxlciBpcyBydW4uXG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gSW4gb3JkZXIgdG8gZW11bGF0ZSB0aGlzIGJlaGF2aW91ciwgd2UgbmVlZCB0byBtYWtlIHN1cmUgZWFjaFxuICAgICAgICAgICAgLy8gb25tZXNzYWdlIGhhbmRsZXIgaXMgcnVuIHdpdGhpbiBpdHMgb3duIG1hY3JvdGFzay5cbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5vbm1lc3NhZ2Uoe2RhdGE6IG1zZ30pLCAwKVxuICAgICAgICAgIH0pXG4gICAgICAgICAgdGhpcy5wb2xsKClcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlIDIwNDpcbiAgICAgICAgICB0aGlzLnBvbGwoKVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgNDEwOlxuICAgICAgICAgIHRoaXMucmVhZHlTdGF0ZSA9IFNPQ0tFVF9TVEFURVMub3BlblxuICAgICAgICAgIHRoaXMub25vcGVuKHt9KVxuICAgICAgICAgIHRoaXMucG9sbCgpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSA0MDM6XG4gICAgICAgICAgdGhpcy5vbmVycm9yKDQwMylcbiAgICAgICAgICB0aGlzLmNsb3NlKDEwMDgsIFwiZm9yYmlkZGVuXCIsIGZhbHNlKVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgY2FzZSA1MDA6XG4gICAgICAgICAgdGhpcy5vbmVycm9yKDUwMClcbiAgICAgICAgICB0aGlzLmNsb3NlQW5kUmV0cnkoMTAxMSwgXCJpbnRlcm5hbCBzZXJ2ZXIgZXJyb3JcIiwgNTAwKVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGRlZmF1bHQ6IHRocm93IG5ldyBFcnJvcihgdW5oYW5kbGVkIHBvbGwgc3RhdHVzICR7c3RhdHVzfWApXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIC8vIHdlIGNvbGxlY3QgYWxsIHB1c2hlcyB3aXRoaW4gdGhlIGN1cnJlbnQgZXZlbnQgbG9vcCBieVxuICAvLyBzZXRUaW1lb3V0IDAsIHdoaWNoIG9wdGltaXplcyBiYWNrLXRvLWJhY2sgcHJvY2VkdXJhbFxuICAvLyBwdXNoZXMgYWdhaW5zdCBhbiBlbXB0eSBidWZmZXJcbiAgc2VuZChib2R5KXtcbiAgICBpZih0aGlzLmN1cnJlbnRCYXRjaCl7XG4gICAgICB0aGlzLmN1cnJlbnRCYXRjaC5wdXNoKGJvZHkpXG4gICAgfSBlbHNlIGlmKHRoaXMuYXdhaXRpbmdCYXRjaEFjayl7XG4gICAgICB0aGlzLmJhdGNoQnVmZmVyLnB1c2goYm9keSlcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jdXJyZW50QmF0Y2ggPSBbYm9keV1cbiAgICAgIHRoaXMuY3VycmVudEJhdGNoVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgdGhpcy5iYXRjaFNlbmQodGhpcy5jdXJyZW50QmF0Y2gpXG4gICAgICAgIHRoaXMuY3VycmVudEJhdGNoID0gbnVsbFxuICAgICAgfSwgMClcbiAgICB9XG4gIH1cblxuICBiYXRjaFNlbmQobWVzc2FnZXMpe1xuICAgIHRoaXMuYXdhaXRpbmdCYXRjaEFjayA9IHRydWVcbiAgICB0aGlzLmFqYXgoXCJQT1NUXCIsIFwiYXBwbGljYXRpb24veC1uZGpzb25cIiwgbWVzc2FnZXMuam9pbihcIlxcblwiKSwgKCkgPT4gdGhpcy5vbmVycm9yKFwidGltZW91dFwiKSwgcmVzcCA9PiB7XG4gICAgICB0aGlzLmF3YWl0aW5nQmF0Y2hBY2sgPSBmYWxzZVxuICAgICAgaWYoIXJlc3AgfHwgcmVzcC5zdGF0dXMgIT09IDIwMCl7XG4gICAgICAgIHRoaXMub25lcnJvcihyZXNwICYmIHJlc3Auc3RhdHVzKVxuICAgICAgICB0aGlzLmNsb3NlQW5kUmV0cnkoMTAxMSwgXCJpbnRlcm5hbCBzZXJ2ZXIgZXJyb3JcIiwgZmFsc2UpXG4gICAgICB9IGVsc2UgaWYodGhpcy5iYXRjaEJ1ZmZlci5sZW5ndGggPiAwKXtcbiAgICAgICAgdGhpcy5iYXRjaFNlbmQodGhpcy5iYXRjaEJ1ZmZlcilcbiAgICAgICAgdGhpcy5iYXRjaEJ1ZmZlciA9IFtdXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIGNsb3NlKGNvZGUsIHJlYXNvbiwgd2FzQ2xlYW4pe1xuICAgIGZvcihsZXQgcmVxIG9mIHRoaXMucmVxcyl7IHJlcS5hYm9ydCgpIH1cbiAgICB0aGlzLnJlYWR5U3RhdGUgPSBTT0NLRVRfU1RBVEVTLmNsb3NlZFxuICAgIGxldCBvcHRzID0gT2JqZWN0LmFzc2lnbih7Y29kZTogMTAwMCwgcmVhc29uOiB1bmRlZmluZWQsIHdhc0NsZWFuOiB0cnVlfSwge2NvZGUsIHJlYXNvbiwgd2FzQ2xlYW59KVxuICAgIHRoaXMuYmF0Y2hCdWZmZXIgPSBbXVxuICAgIGNsZWFyVGltZW91dCh0aGlzLmN1cnJlbnRCYXRjaFRpbWVyKVxuICAgIHRoaXMuY3VycmVudEJhdGNoVGltZXIgPSBudWxsXG4gICAgaWYodHlwZW9mKENsb3NlRXZlbnQpICE9PSBcInVuZGVmaW5lZFwiKXtcbiAgICAgIHRoaXMub25jbG9zZShuZXcgQ2xvc2VFdmVudChcImNsb3NlXCIsIG9wdHMpKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm9uY2xvc2Uob3B0cylcbiAgICB9XG4gIH1cblxuICBhamF4KG1ldGhvZCwgY29udGVudFR5cGUsIGJvZHksIG9uQ2FsbGVyVGltZW91dCwgY2FsbGJhY2spe1xuICAgIGxldCByZXFcbiAgICBsZXQgb250aW1lb3V0ID0gKCkgPT4ge1xuICAgICAgdGhpcy5yZXFzLmRlbGV0ZShyZXEpXG4gICAgICBvbkNhbGxlclRpbWVvdXQoKVxuICAgIH1cbiAgICByZXEgPSBBamF4LnJlcXVlc3QobWV0aG9kLCB0aGlzLmVuZHBvaW50VVJMKCksIGNvbnRlbnRUeXBlLCBib2R5LCB0aGlzLnRpbWVvdXQsIG9udGltZW91dCwgcmVzcCA9PiB7XG4gICAgICB0aGlzLnJlcXMuZGVsZXRlKHJlcSlcbiAgICAgIGlmKHRoaXMuaXNBY3RpdmUoKSl7IGNhbGxiYWNrKHJlc3ApIH1cbiAgICB9KVxuICAgIHRoaXMucmVxcy5hZGQocmVxKVxuICB9XG59XG4iLCAiLyoqXG4gKiBJbml0aWFsaXplcyB0aGUgUHJlc2VuY2VcbiAqIEBwYXJhbSB7Q2hhbm5lbH0gY2hhbm5lbCAtIFRoZSBDaGFubmVsXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIFRoZSBvcHRpb25zLFxuICogICAgICAgIGZvciBleGFtcGxlIGB7ZXZlbnRzOiB7c3RhdGU6IFwic3RhdGVcIiwgZGlmZjogXCJkaWZmXCJ9fWBcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUHJlc2VuY2Uge1xuXG4gIGNvbnN0cnVjdG9yKGNoYW5uZWwsIG9wdHMgPSB7fSl7XG4gICAgbGV0IGV2ZW50cyA9IG9wdHMuZXZlbnRzIHx8IHtzdGF0ZTogXCJwcmVzZW5jZV9zdGF0ZVwiLCBkaWZmOiBcInByZXNlbmNlX2RpZmZcIn1cbiAgICB0aGlzLnN0YXRlID0ge31cbiAgICB0aGlzLnBlbmRpbmdEaWZmcyA9IFtdXG4gICAgdGhpcy5jaGFubmVsID0gY2hhbm5lbFxuICAgIHRoaXMuam9pblJlZiA9IG51bGxcbiAgICB0aGlzLmNhbGxlciA9IHtcbiAgICAgIG9uSm9pbjogZnVuY3Rpb24gKCl7IH0sXG4gICAgICBvbkxlYXZlOiBmdW5jdGlvbiAoKXsgfSxcbiAgICAgIG9uU3luYzogZnVuY3Rpb24gKCl7IH1cbiAgICB9XG5cbiAgICB0aGlzLmNoYW5uZWwub24oZXZlbnRzLnN0YXRlLCBuZXdTdGF0ZSA9PiB7XG4gICAgICBsZXQge29uSm9pbiwgb25MZWF2ZSwgb25TeW5jfSA9IHRoaXMuY2FsbGVyXG5cbiAgICAgIHRoaXMuam9pblJlZiA9IHRoaXMuY2hhbm5lbC5qb2luUmVmKClcbiAgICAgIHRoaXMuc3RhdGUgPSBQcmVzZW5jZS5zeW5jU3RhdGUodGhpcy5zdGF0ZSwgbmV3U3RhdGUsIG9uSm9pbiwgb25MZWF2ZSlcblxuICAgICAgdGhpcy5wZW5kaW5nRGlmZnMuZm9yRWFjaChkaWZmID0+IHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IFByZXNlbmNlLnN5bmNEaWZmKHRoaXMuc3RhdGUsIGRpZmYsIG9uSm9pbiwgb25MZWF2ZSlcbiAgICAgIH0pXG4gICAgICB0aGlzLnBlbmRpbmdEaWZmcyA9IFtdXG4gICAgICBvblN5bmMoKVxuICAgIH0pXG5cbiAgICB0aGlzLmNoYW5uZWwub24oZXZlbnRzLmRpZmYsIGRpZmYgPT4ge1xuICAgICAgbGV0IHtvbkpvaW4sIG9uTGVhdmUsIG9uU3luY30gPSB0aGlzLmNhbGxlclxuXG4gICAgICBpZih0aGlzLmluUGVuZGluZ1N5bmNTdGF0ZSgpKXtcbiAgICAgICAgdGhpcy5wZW5kaW5nRGlmZnMucHVzaChkaWZmKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IFByZXNlbmNlLnN5bmNEaWZmKHRoaXMuc3RhdGUsIGRpZmYsIG9uSm9pbiwgb25MZWF2ZSlcbiAgICAgICAgb25TeW5jKClcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgb25Kb2luKGNhbGxiYWNrKXsgdGhpcy5jYWxsZXIub25Kb2luID0gY2FsbGJhY2sgfVxuXG4gIG9uTGVhdmUoY2FsbGJhY2speyB0aGlzLmNhbGxlci5vbkxlYXZlID0gY2FsbGJhY2sgfVxuXG4gIG9uU3luYyhjYWxsYmFjayl7IHRoaXMuY2FsbGVyLm9uU3luYyA9IGNhbGxiYWNrIH1cblxuICBsaXN0KGJ5KXsgcmV0dXJuIFByZXNlbmNlLmxpc3QodGhpcy5zdGF0ZSwgYnkpIH1cblxuICBpblBlbmRpbmdTeW5jU3RhdGUoKXtcbiAgICByZXR1cm4gIXRoaXMuam9pblJlZiB8fCAodGhpcy5qb2luUmVmICE9PSB0aGlzLmNoYW5uZWwuam9pblJlZigpKVxuICB9XG5cbiAgLy8gbG93ZXItbGV2ZWwgcHVibGljIHN0YXRpYyBBUElcblxuICAvKipcbiAgICogVXNlZCB0byBzeW5jIHRoZSBsaXN0IG9mIHByZXNlbmNlcyBvbiB0aGUgc2VydmVyXG4gICAqIHdpdGggdGhlIGNsaWVudCdzIHN0YXRlLiBBbiBvcHRpb25hbCBgb25Kb2luYCBhbmQgYG9uTGVhdmVgIGNhbGxiYWNrIGNhblxuICAgKiBiZSBwcm92aWRlZCB0byByZWFjdCB0byBjaGFuZ2VzIGluIHRoZSBjbGllbnQncyBsb2NhbCBwcmVzZW5jZXMgYWNyb3NzXG4gICAqIGRpc2Nvbm5lY3RzIGFuZCByZWNvbm5lY3RzIHdpdGggdGhlIHNlcnZlci5cbiAgICpcbiAgICogQHJldHVybnMge1ByZXNlbmNlfVxuICAgKi9cbiAgc3RhdGljIHN5bmNTdGF0ZShjdXJyZW50U3RhdGUsIG5ld1N0YXRlLCBvbkpvaW4sIG9uTGVhdmUpe1xuICAgIGxldCBzdGF0ZSA9IHRoaXMuY2xvbmUoY3VycmVudFN0YXRlKVxuICAgIGxldCBqb2lucyA9IHt9XG4gICAgbGV0IGxlYXZlcyA9IHt9XG5cbiAgICB0aGlzLm1hcChzdGF0ZSwgKGtleSwgcHJlc2VuY2UpID0+IHtcbiAgICAgIGlmKCFuZXdTdGF0ZVtrZXldKXtcbiAgICAgICAgbGVhdmVzW2tleV0gPSBwcmVzZW5jZVxuICAgICAgfVxuICAgIH0pXG4gICAgdGhpcy5tYXAobmV3U3RhdGUsIChrZXksIG5ld1ByZXNlbmNlKSA9PiB7XG4gICAgICBsZXQgY3VycmVudFByZXNlbmNlID0gc3RhdGVba2V5XVxuICAgICAgaWYoY3VycmVudFByZXNlbmNlKXtcbiAgICAgICAgbGV0IG5ld1JlZnMgPSBuZXdQcmVzZW5jZS5tZXRhcy5tYXAobSA9PiBtLnBoeF9yZWYpXG4gICAgICAgIGxldCBjdXJSZWZzID0gY3VycmVudFByZXNlbmNlLm1ldGFzLm1hcChtID0+IG0ucGh4X3JlZilcbiAgICAgICAgbGV0IGpvaW5lZE1ldGFzID0gbmV3UHJlc2VuY2UubWV0YXMuZmlsdGVyKG0gPT4gY3VyUmVmcy5pbmRleE9mKG0ucGh4X3JlZikgPCAwKVxuICAgICAgICBsZXQgbGVmdE1ldGFzID0gY3VycmVudFByZXNlbmNlLm1ldGFzLmZpbHRlcihtID0+IG5ld1JlZnMuaW5kZXhPZihtLnBoeF9yZWYpIDwgMClcbiAgICAgICAgaWYoam9pbmVkTWV0YXMubGVuZ3RoID4gMCl7XG4gICAgICAgICAgam9pbnNba2V5XSA9IG5ld1ByZXNlbmNlXG4gICAgICAgICAgam9pbnNba2V5XS5tZXRhcyA9IGpvaW5lZE1ldGFzXG4gICAgICAgIH1cbiAgICAgICAgaWYobGVmdE1ldGFzLmxlbmd0aCA+IDApe1xuICAgICAgICAgIGxlYXZlc1trZXldID0gdGhpcy5jbG9uZShjdXJyZW50UHJlc2VuY2UpXG4gICAgICAgICAgbGVhdmVzW2tleV0ubWV0YXMgPSBsZWZ0TWV0YXNcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgam9pbnNba2V5XSA9IG5ld1ByZXNlbmNlXG4gICAgICB9XG4gICAgfSlcbiAgICByZXR1cm4gdGhpcy5zeW5jRGlmZihzdGF0ZSwge2pvaW5zOiBqb2lucywgbGVhdmVzOiBsZWF2ZXN9LCBvbkpvaW4sIG9uTGVhdmUpXG4gIH1cblxuICAvKipcbiAgICpcbiAgICogVXNlZCB0byBzeW5jIGEgZGlmZiBvZiBwcmVzZW5jZSBqb2luIGFuZCBsZWF2ZVxuICAgKiBldmVudHMgZnJvbSB0aGUgc2VydmVyLCBhcyB0aGV5IGhhcHBlbi4gTGlrZSBgc3luY1N0YXRlYCwgYHN5bmNEaWZmYFxuICAgKiBhY2NlcHRzIG9wdGlvbmFsIGBvbkpvaW5gIGFuZCBgb25MZWF2ZWAgY2FsbGJhY2tzIHRvIHJlYWN0IHRvIGEgdXNlclxuICAgKiBqb2luaW5nIG9yIGxlYXZpbmcgZnJvbSBhIGRldmljZS5cbiAgICpcbiAgICogQHJldHVybnMge1ByZXNlbmNlfVxuICAgKi9cbiAgc3RhdGljIHN5bmNEaWZmKHN0YXRlLCBkaWZmLCBvbkpvaW4sIG9uTGVhdmUpe1xuICAgIGxldCB7am9pbnMsIGxlYXZlc30gPSB0aGlzLmNsb25lKGRpZmYpXG4gICAgaWYoIW9uSm9pbil7IG9uSm9pbiA9IGZ1bmN0aW9uICgpeyB9IH1cbiAgICBpZighb25MZWF2ZSl7IG9uTGVhdmUgPSBmdW5jdGlvbiAoKXsgfSB9XG5cbiAgICB0aGlzLm1hcChqb2lucywgKGtleSwgbmV3UHJlc2VuY2UpID0+IHtcbiAgICAgIGxldCBjdXJyZW50UHJlc2VuY2UgPSBzdGF0ZVtrZXldXG4gICAgICBzdGF0ZVtrZXldID0gdGhpcy5jbG9uZShuZXdQcmVzZW5jZSlcbiAgICAgIGlmKGN1cnJlbnRQcmVzZW5jZSl7XG4gICAgICAgIGxldCBqb2luZWRSZWZzID0gc3RhdGVba2V5XS5tZXRhcy5tYXAobSA9PiBtLnBoeF9yZWYpXG4gICAgICAgIGxldCBjdXJNZXRhcyA9IGN1cnJlbnRQcmVzZW5jZS5tZXRhcy5maWx0ZXIobSA9PiBqb2luZWRSZWZzLmluZGV4T2YobS5waHhfcmVmKSA8IDApXG4gICAgICAgIHN0YXRlW2tleV0ubWV0YXMudW5zaGlmdCguLi5jdXJNZXRhcylcbiAgICAgIH1cbiAgICAgIG9uSm9pbihrZXksIGN1cnJlbnRQcmVzZW5jZSwgbmV3UHJlc2VuY2UpXG4gICAgfSlcbiAgICB0aGlzLm1hcChsZWF2ZXMsIChrZXksIGxlZnRQcmVzZW5jZSkgPT4ge1xuICAgICAgbGV0IGN1cnJlbnRQcmVzZW5jZSA9IHN0YXRlW2tleV1cbiAgICAgIGlmKCFjdXJyZW50UHJlc2VuY2UpeyByZXR1cm4gfVxuICAgICAgbGV0IHJlZnNUb1JlbW92ZSA9IGxlZnRQcmVzZW5jZS5tZXRhcy5tYXAobSA9PiBtLnBoeF9yZWYpXG4gICAgICBjdXJyZW50UHJlc2VuY2UubWV0YXMgPSBjdXJyZW50UHJlc2VuY2UubWV0YXMuZmlsdGVyKHAgPT4ge1xuICAgICAgICByZXR1cm4gcmVmc1RvUmVtb3ZlLmluZGV4T2YocC5waHhfcmVmKSA8IDBcbiAgICAgIH0pXG4gICAgICBvbkxlYXZlKGtleSwgY3VycmVudFByZXNlbmNlLCBsZWZ0UHJlc2VuY2UpXG4gICAgICBpZihjdXJyZW50UHJlc2VuY2UubWV0YXMubGVuZ3RoID09PSAwKXtcbiAgICAgICAgZGVsZXRlIHN0YXRlW2tleV1cbiAgICAgIH1cbiAgICB9KVxuICAgIHJldHVybiBzdGF0ZVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGFycmF5IG9mIHByZXNlbmNlcywgd2l0aCBzZWxlY3RlZCBtZXRhZGF0YS5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IHByZXNlbmNlc1xuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjaG9vc2VyXG4gICAqXG4gICAqIEByZXR1cm5zIHtQcmVzZW5jZX1cbiAgICovXG4gIHN0YXRpYyBsaXN0KHByZXNlbmNlcywgY2hvb3Nlcil7XG4gICAgaWYoIWNob29zZXIpeyBjaG9vc2VyID0gZnVuY3Rpb24gKGtleSwgcHJlcyl7IHJldHVybiBwcmVzIH0gfVxuXG4gICAgcmV0dXJuIHRoaXMubWFwKHByZXNlbmNlcywgKGtleSwgcHJlc2VuY2UpID0+IHtcbiAgICAgIHJldHVybiBjaG9vc2VyKGtleSwgcHJlc2VuY2UpXG4gICAgfSlcbiAgfVxuXG4gIC8vIHByaXZhdGVcblxuICBzdGF0aWMgbWFwKG9iaiwgZnVuYyl7XG4gICAgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKG9iaikubWFwKGtleSA9PiBmdW5jKGtleSwgb2JqW2tleV0pKVxuICB9XG5cbiAgc3RhdGljIGNsb25lKG9iail7IHJldHVybiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG9iaikpIH1cbn1cbiIsICIvKiBUaGUgZGVmYXVsdCBzZXJpYWxpemVyIGZvciBlbmNvZGluZyBhbmQgZGVjb2RpbmcgbWVzc2FnZXMgKi9cbmltcG9ydCB7XG4gIENIQU5ORUxfRVZFTlRTXG59IGZyb20gXCIuL2NvbnN0YW50c1wiXG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgSEVBREVSX0xFTkdUSDogMSxcbiAgTUVUQV9MRU5HVEg6IDQsXG4gIEtJTkRTOiB7cHVzaDogMCwgcmVwbHk6IDEsIGJyb2FkY2FzdDogMn0sXG5cbiAgZW5jb2RlKG1zZywgY2FsbGJhY2spe1xuICAgIGlmKG1zZy5wYXlsb2FkLmNvbnN0cnVjdG9yID09PSBBcnJheUJ1ZmZlcil7XG4gICAgICByZXR1cm4gY2FsbGJhY2sodGhpcy5iaW5hcnlFbmNvZGUobXNnKSlcbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IHBheWxvYWQgPSBbbXNnLmpvaW5fcmVmLCBtc2cucmVmLCBtc2cudG9waWMsIG1zZy5ldmVudCwgbXNnLnBheWxvYWRdXG4gICAgICByZXR1cm4gY2FsbGJhY2soSlNPTi5zdHJpbmdpZnkocGF5bG9hZCkpXG4gICAgfVxuICB9LFxuXG4gIGRlY29kZShyYXdQYXlsb2FkLCBjYWxsYmFjayl7XG4gICAgaWYocmF3UGF5bG9hZC5jb25zdHJ1Y3RvciA9PT0gQXJyYXlCdWZmZXIpe1xuICAgICAgcmV0dXJuIGNhbGxiYWNrKHRoaXMuYmluYXJ5RGVjb2RlKHJhd1BheWxvYWQpKVxuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgW2pvaW5fcmVmLCByZWYsIHRvcGljLCBldmVudCwgcGF5bG9hZF0gPSBKU09OLnBhcnNlKHJhd1BheWxvYWQpXG4gICAgICByZXR1cm4gY2FsbGJhY2soe2pvaW5fcmVmLCByZWYsIHRvcGljLCBldmVudCwgcGF5bG9hZH0pXG4gICAgfVxuICB9LFxuXG4gIC8vIHByaXZhdGVcblxuICBiaW5hcnlFbmNvZGUobWVzc2FnZSl7XG4gICAgbGV0IHtqb2luX3JlZiwgcmVmLCBldmVudCwgdG9waWMsIHBheWxvYWR9ID0gbWVzc2FnZVxuICAgIGxldCBtZXRhTGVuZ3RoID0gdGhpcy5NRVRBX0xFTkdUSCArIGpvaW5fcmVmLmxlbmd0aCArIHJlZi5sZW5ndGggKyB0b3BpYy5sZW5ndGggKyBldmVudC5sZW5ndGhcbiAgICBsZXQgaGVhZGVyID0gbmV3IEFycmF5QnVmZmVyKHRoaXMuSEVBREVSX0xFTkdUSCArIG1ldGFMZW5ndGgpXG4gICAgbGV0IHZpZXcgPSBuZXcgRGF0YVZpZXcoaGVhZGVyKVxuICAgIGxldCBvZmZzZXQgPSAwXG5cbiAgICB2aWV3LnNldFVpbnQ4KG9mZnNldCsrLCB0aGlzLktJTkRTLnB1c2gpIC8vIGtpbmRcbiAgICB2aWV3LnNldFVpbnQ4KG9mZnNldCsrLCBqb2luX3JlZi5sZW5ndGgpXG4gICAgdmlldy5zZXRVaW50OChvZmZzZXQrKywgcmVmLmxlbmd0aClcbiAgICB2aWV3LnNldFVpbnQ4KG9mZnNldCsrLCB0b3BpYy5sZW5ndGgpXG4gICAgdmlldy5zZXRVaW50OChvZmZzZXQrKywgZXZlbnQubGVuZ3RoKVxuICAgIEFycmF5LmZyb20oam9pbl9yZWYsIGNoYXIgPT4gdmlldy5zZXRVaW50OChvZmZzZXQrKywgY2hhci5jaGFyQ29kZUF0KDApKSlcbiAgICBBcnJheS5mcm9tKHJlZiwgY2hhciA9PiB2aWV3LnNldFVpbnQ4KG9mZnNldCsrLCBjaGFyLmNoYXJDb2RlQXQoMCkpKVxuICAgIEFycmF5LmZyb20odG9waWMsIGNoYXIgPT4gdmlldy5zZXRVaW50OChvZmZzZXQrKywgY2hhci5jaGFyQ29kZUF0KDApKSlcbiAgICBBcnJheS5mcm9tKGV2ZW50LCBjaGFyID0+IHZpZXcuc2V0VWludDgob2Zmc2V0KyssIGNoYXIuY2hhckNvZGVBdCgwKSkpXG5cbiAgICB2YXIgY29tYmluZWQgPSBuZXcgVWludDhBcnJheShoZWFkZXIuYnl0ZUxlbmd0aCArIHBheWxvYWQuYnl0ZUxlbmd0aClcbiAgICBjb21iaW5lZC5zZXQobmV3IFVpbnQ4QXJyYXkoaGVhZGVyKSwgMClcbiAgICBjb21iaW5lZC5zZXQobmV3IFVpbnQ4QXJyYXkocGF5bG9hZCksIGhlYWRlci5ieXRlTGVuZ3RoKVxuXG4gICAgcmV0dXJuIGNvbWJpbmVkLmJ1ZmZlclxuICB9LFxuXG4gIGJpbmFyeURlY29kZShidWZmZXIpe1xuICAgIGxldCB2aWV3ID0gbmV3IERhdGFWaWV3KGJ1ZmZlcilcbiAgICBsZXQga2luZCA9IHZpZXcuZ2V0VWludDgoMClcbiAgICBsZXQgZGVjb2RlciA9IG5ldyBUZXh0RGVjb2RlcigpXG4gICAgc3dpdGNoKGtpbmQpe1xuICAgICAgY2FzZSB0aGlzLktJTkRTLnB1c2g6IHJldHVybiB0aGlzLmRlY29kZVB1c2goYnVmZmVyLCB2aWV3LCBkZWNvZGVyKVxuICAgICAgY2FzZSB0aGlzLktJTkRTLnJlcGx5OiByZXR1cm4gdGhpcy5kZWNvZGVSZXBseShidWZmZXIsIHZpZXcsIGRlY29kZXIpXG4gICAgICBjYXNlIHRoaXMuS0lORFMuYnJvYWRjYXN0OiByZXR1cm4gdGhpcy5kZWNvZGVCcm9hZGNhc3QoYnVmZmVyLCB2aWV3LCBkZWNvZGVyKVxuICAgIH1cbiAgfSxcblxuICBkZWNvZGVQdXNoKGJ1ZmZlciwgdmlldywgZGVjb2Rlcil7XG4gICAgbGV0IGpvaW5SZWZTaXplID0gdmlldy5nZXRVaW50OCgxKVxuICAgIGxldCB0b3BpY1NpemUgPSB2aWV3LmdldFVpbnQ4KDIpXG4gICAgbGV0IGV2ZW50U2l6ZSA9IHZpZXcuZ2V0VWludDgoMylcbiAgICBsZXQgb2Zmc2V0ID0gdGhpcy5IRUFERVJfTEVOR1RIICsgdGhpcy5NRVRBX0xFTkdUSCAtIDEgLy8gcHVzaGVzIGhhdmUgbm8gcmVmXG4gICAgbGV0IGpvaW5SZWYgPSBkZWNvZGVyLmRlY29kZShidWZmZXIuc2xpY2Uob2Zmc2V0LCBvZmZzZXQgKyBqb2luUmVmU2l6ZSkpXG4gICAgb2Zmc2V0ID0gb2Zmc2V0ICsgam9pblJlZlNpemVcbiAgICBsZXQgdG9waWMgPSBkZWNvZGVyLmRlY29kZShidWZmZXIuc2xpY2Uob2Zmc2V0LCBvZmZzZXQgKyB0b3BpY1NpemUpKVxuICAgIG9mZnNldCA9IG9mZnNldCArIHRvcGljU2l6ZVxuICAgIGxldCBldmVudCA9IGRlY29kZXIuZGVjb2RlKGJ1ZmZlci5zbGljZShvZmZzZXQsIG9mZnNldCArIGV2ZW50U2l6ZSkpXG4gICAgb2Zmc2V0ID0gb2Zmc2V0ICsgZXZlbnRTaXplXG4gICAgbGV0IGRhdGEgPSBidWZmZXIuc2xpY2Uob2Zmc2V0LCBidWZmZXIuYnl0ZUxlbmd0aClcbiAgICByZXR1cm4ge2pvaW5fcmVmOiBqb2luUmVmLCByZWY6IG51bGwsIHRvcGljOiB0b3BpYywgZXZlbnQ6IGV2ZW50LCBwYXlsb2FkOiBkYXRhfVxuICB9LFxuXG4gIGRlY29kZVJlcGx5KGJ1ZmZlciwgdmlldywgZGVjb2Rlcil7XG4gICAgbGV0IGpvaW5SZWZTaXplID0gdmlldy5nZXRVaW50OCgxKVxuICAgIGxldCByZWZTaXplID0gdmlldy5nZXRVaW50OCgyKVxuICAgIGxldCB0b3BpY1NpemUgPSB2aWV3LmdldFVpbnQ4KDMpXG4gICAgbGV0IGV2ZW50U2l6ZSA9IHZpZXcuZ2V0VWludDgoNClcbiAgICBsZXQgb2Zmc2V0ID0gdGhpcy5IRUFERVJfTEVOR1RIICsgdGhpcy5NRVRBX0xFTkdUSFxuICAgIGxldCBqb2luUmVmID0gZGVjb2Rlci5kZWNvZGUoYnVmZmVyLnNsaWNlKG9mZnNldCwgb2Zmc2V0ICsgam9pblJlZlNpemUpKVxuICAgIG9mZnNldCA9IG9mZnNldCArIGpvaW5SZWZTaXplXG4gICAgbGV0IHJlZiA9IGRlY29kZXIuZGVjb2RlKGJ1ZmZlci5zbGljZShvZmZzZXQsIG9mZnNldCArIHJlZlNpemUpKVxuICAgIG9mZnNldCA9IG9mZnNldCArIHJlZlNpemVcbiAgICBsZXQgdG9waWMgPSBkZWNvZGVyLmRlY29kZShidWZmZXIuc2xpY2Uob2Zmc2V0LCBvZmZzZXQgKyB0b3BpY1NpemUpKVxuICAgIG9mZnNldCA9IG9mZnNldCArIHRvcGljU2l6ZVxuICAgIGxldCBldmVudCA9IGRlY29kZXIuZGVjb2RlKGJ1ZmZlci5zbGljZShvZmZzZXQsIG9mZnNldCArIGV2ZW50U2l6ZSkpXG4gICAgb2Zmc2V0ID0gb2Zmc2V0ICsgZXZlbnRTaXplXG4gICAgbGV0IGRhdGEgPSBidWZmZXIuc2xpY2Uob2Zmc2V0LCBidWZmZXIuYnl0ZUxlbmd0aClcbiAgICBsZXQgcGF5bG9hZCA9IHtzdGF0dXM6IGV2ZW50LCByZXNwb25zZTogZGF0YX1cbiAgICByZXR1cm4ge2pvaW5fcmVmOiBqb2luUmVmLCByZWY6IHJlZiwgdG9waWM6IHRvcGljLCBldmVudDogQ0hBTk5FTF9FVkVOVFMucmVwbHksIHBheWxvYWQ6IHBheWxvYWR9XG4gIH0sXG5cbiAgZGVjb2RlQnJvYWRjYXN0KGJ1ZmZlciwgdmlldywgZGVjb2Rlcil7XG4gICAgbGV0IHRvcGljU2l6ZSA9IHZpZXcuZ2V0VWludDgoMSlcbiAgICBsZXQgZXZlbnRTaXplID0gdmlldy5nZXRVaW50OCgyKVxuICAgIGxldCBvZmZzZXQgPSB0aGlzLkhFQURFUl9MRU5HVEggKyAyXG4gICAgbGV0IHRvcGljID0gZGVjb2Rlci5kZWNvZGUoYnVmZmVyLnNsaWNlKG9mZnNldCwgb2Zmc2V0ICsgdG9waWNTaXplKSlcbiAgICBvZmZzZXQgPSBvZmZzZXQgKyB0b3BpY1NpemVcbiAgICBsZXQgZXZlbnQgPSBkZWNvZGVyLmRlY29kZShidWZmZXIuc2xpY2Uob2Zmc2V0LCBvZmZzZXQgKyBldmVudFNpemUpKVxuICAgIG9mZnNldCA9IG9mZnNldCArIGV2ZW50U2l6ZVxuICAgIGxldCBkYXRhID0gYnVmZmVyLnNsaWNlKG9mZnNldCwgYnVmZmVyLmJ5dGVMZW5ndGgpXG5cbiAgICByZXR1cm4ge2pvaW5fcmVmOiBudWxsLCByZWY6IG51bGwsIHRvcGljOiB0b3BpYywgZXZlbnQ6IGV2ZW50LCBwYXlsb2FkOiBkYXRhfVxuICB9XG59XG4iLCAiaW1wb3J0IHtcbiAgZ2xvYmFsLFxuICBwaHhXaW5kb3csXG4gIENIQU5ORUxfRVZFTlRTLFxuICBERUZBVUxUX1RJTUVPVVQsXG4gIERFRkFVTFRfVlNOLFxuICBTT0NLRVRfU1RBVEVTLFxuICBUUkFOU1BPUlRTLFxuICBXU19DTE9TRV9OT1JNQUxcbn0gZnJvbSBcIi4vY29uc3RhbnRzXCJcblxuaW1wb3J0IHtcbiAgY2xvc3VyZVxufSBmcm9tIFwiLi91dGlsc1wiXG5cbmltcG9ydCBBamF4IGZyb20gXCIuL2FqYXhcIlxuaW1wb3J0IENoYW5uZWwgZnJvbSBcIi4vY2hhbm5lbFwiXG5pbXBvcnQgTG9uZ1BvbGwgZnJvbSBcIi4vbG9uZ3BvbGxcIlxuaW1wb3J0IFNlcmlhbGl6ZXIgZnJvbSBcIi4vc2VyaWFsaXplclwiXG5pbXBvcnQgVGltZXIgZnJvbSBcIi4vdGltZXJcIlxuXG4vKiogSW5pdGlhbGl6ZXMgdGhlIFNvY2tldCAqXG4gKlxuICogRm9yIElFOCBzdXBwb3J0IHVzZSBhbiBFUzUtc2hpbSAoaHR0cHM6Ly9naXRodWIuY29tL2VzLXNoaW1zL2VzNS1zaGltKVxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBlbmRQb2ludCAtIFRoZSBzdHJpbmcgV2ViU29ja2V0IGVuZHBvaW50LCBpZSwgYFwid3M6Ly9leGFtcGxlLmNvbS9zb2NrZXRcImAsXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYFwid3NzOi8vZXhhbXBsZS5jb21cImBcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgXCIvc29ja2V0XCJgIChpbmhlcml0ZWQgaG9zdCAmIHByb3RvY29sKVxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRzXSAtIE9wdGlvbmFsIGNvbmZpZ3VyYXRpb25cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtvcHRzLnRyYW5zcG9ydF0gLSBUaGUgV2Vic29ja2V0IFRyYW5zcG9ydCwgZm9yIGV4YW1wbGUgV2ViU29ja2V0IG9yIFBob2VuaXguTG9uZ1BvbGwuXG4gKlxuICogRGVmYXVsdHMgdG8gV2ViU29ja2V0IHdpdGggYXV0b21hdGljIExvbmdQb2xsIGZhbGxiYWNrLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gW29wdHMuZW5jb2RlXSAtIFRoZSBmdW5jdGlvbiB0byBlbmNvZGUgb3V0Z29pbmcgbWVzc2FnZXMuXG4gKlxuICogRGVmYXVsdHMgdG8gSlNPTiBlbmNvZGVyLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtvcHRzLmRlY29kZV0gLSBUaGUgZnVuY3Rpb24gdG8gZGVjb2RlIGluY29taW5nIG1lc3NhZ2VzLlxuICpcbiAqIERlZmF1bHRzIHRvIEpTT046XG4gKlxuICogYGBgamF2YXNjcmlwdFxuICogKHBheWxvYWQsIGNhbGxiYWNrKSA9PiBjYWxsYmFjayhKU09OLnBhcnNlKHBheWxvYWQpKVxuICogYGBgXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRzLnRpbWVvdXRdIC0gVGhlIGRlZmF1bHQgdGltZW91dCBpbiBtaWxsaXNlY29uZHMgdG8gdHJpZ2dlciBwdXNoIHRpbWVvdXRzLlxuICpcbiAqIERlZmF1bHRzIGBERUZBVUxUX1RJTUVPVVRgXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdHMuaGVhcnRiZWF0SW50ZXJ2YWxNc10gLSBUaGUgbWlsbGlzZWMgaW50ZXJ2YWwgdG8gc2VuZCBhIGhlYXJ0YmVhdCBtZXNzYWdlXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdHMucmVjb25uZWN0QWZ0ZXJNc10gLSBUaGUgb3B0aW9uYWwgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBtaWxsaXNlY1xuICogc29ja2V0IHJlY29ubmVjdCBpbnRlcnZhbC5cbiAqXG4gKiBEZWZhdWx0cyB0byBzdGVwcGVkIGJhY2tvZmYgb2Y6XG4gKlxuICogYGBgamF2YXNjcmlwdFxuICogZnVuY3Rpb24odHJpZXMpe1xuICogICByZXR1cm4gWzEwLCA1MCwgMTAwLCAxNTAsIDIwMCwgMjUwLCA1MDAsIDEwMDAsIDIwMDBdW3RyaWVzIC0gMV0gfHwgNTAwMFxuICogfVxuICogYGBgYFxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0cy5yZWpvaW5BZnRlck1zXSAtIFRoZSBvcHRpb25hbCBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIG1pbGxpc2VjXG4gKiByZWpvaW4gaW50ZXJ2YWwgZm9yIGluZGl2aWR1YWwgY2hhbm5lbHMuXG4gKlxuICogYGBgamF2YXNjcmlwdFxuICogZnVuY3Rpb24odHJpZXMpe1xuICogICByZXR1cm4gWzEwMDAsIDIwMDAsIDUwMDBdW3RyaWVzIC0gMV0gfHwgMTAwMDBcbiAqIH1cbiAqIGBgYGBcbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb3B0cy5sb2dnZXJdIC0gVGhlIG9wdGlvbmFsIGZ1bmN0aW9uIGZvciBzcGVjaWFsaXplZCBsb2dnaW5nLCBpZTpcbiAqXG4gKiBgYGBqYXZhc2NyaXB0XG4gKiBmdW5jdGlvbihraW5kLCBtc2csIGRhdGEpIHtcbiAqICAgY29uc29sZS5sb2coYCR7a2luZH06ICR7bXNnfWAsIGRhdGEpXG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdHMubG9uZ3BvbGxlclRpbWVvdXRdIC0gVGhlIG1heGltdW0gdGltZW91dCBvZiBhIGxvbmcgcG9sbCBBSkFYIHJlcXVlc3QuXG4gKlxuICogRGVmYXVsdHMgdG8gMjBzIChkb3VibGUgdGhlIHNlcnZlciBsb25nIHBvbGwgdGltZXIpLlxuICpcbiAqIEBwYXJhbSB7KE9iamVjdHxmdW5jdGlvbil9IFtvcHRzLnBhcmFtc10gLSBUaGUgb3B0aW9uYWwgcGFyYW1zIHRvIHBhc3Mgd2hlbiBjb25uZWN0aW5nXG4gKiBAcGFyYW0ge3N0cmluZ30gW29wdHMuYmluYXJ5VHlwZV0gLSBUaGUgYmluYXJ5IHR5cGUgdG8gdXNlIGZvciBiaW5hcnkgV2ViU29ja2V0IGZyYW1lcy5cbiAqXG4gKiBEZWZhdWx0cyB0byBcImFycmF5YnVmZmVyXCJcbiAqXG4gKiBAcGFyYW0ge3Zzbn0gW29wdHMudnNuXSAtIFRoZSBzZXJpYWxpemVyJ3MgcHJvdG9jb2wgdmVyc2lvbiB0byBzZW5kIG9uIGNvbm5lY3QuXG4gKlxuICogRGVmYXVsdHMgdG8gREVGQVVMVF9WU04uXG4qL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU29ja2V0IHtcbiAgY29uc3RydWN0b3IoZW5kUG9pbnQsIG9wdHMgPSB7fSl7XG4gICAgdGhpcy5zdGF0ZUNoYW5nZUNhbGxiYWNrcyA9IHtvcGVuOiBbXSwgY2xvc2U6IFtdLCBlcnJvcjogW10sIG1lc3NhZ2U6IFtdfVxuICAgIHRoaXMuY2hhbm5lbHMgPSBbXVxuICAgIHRoaXMuc2VuZEJ1ZmZlciA9IFtdXG4gICAgdGhpcy5yZWYgPSAwXG4gICAgdGhpcy50aW1lb3V0ID0gb3B0cy50aW1lb3V0IHx8IERFRkFVTFRfVElNRU9VVFxuICAgIHRoaXMudHJhbnNwb3J0ID0gb3B0cy50cmFuc3BvcnQgfHwgZ2xvYmFsLldlYlNvY2tldCB8fCBMb25nUG9sbFxuICAgIHRoaXMuZXN0YWJsaXNoZWRDb25uZWN0aW9ucyA9IDBcbiAgICB0aGlzLmRlZmF1bHRFbmNvZGVyID0gU2VyaWFsaXplci5lbmNvZGUuYmluZChTZXJpYWxpemVyKVxuICAgIHRoaXMuZGVmYXVsdERlY29kZXIgPSBTZXJpYWxpemVyLmRlY29kZS5iaW5kKFNlcmlhbGl6ZXIpXG4gICAgdGhpcy5jbG9zZVdhc0NsZWFuID0gZmFsc2VcbiAgICB0aGlzLmJpbmFyeVR5cGUgPSBvcHRzLmJpbmFyeVR5cGUgfHwgXCJhcnJheWJ1ZmZlclwiXG4gICAgdGhpcy5jb25uZWN0Q2xvY2sgPSAxXG4gICAgaWYodGhpcy50cmFuc3BvcnQgIT09IExvbmdQb2xsKXtcbiAgICAgIHRoaXMuZW5jb2RlID0gb3B0cy5lbmNvZGUgfHwgdGhpcy5kZWZhdWx0RW5jb2RlclxuICAgICAgdGhpcy5kZWNvZGUgPSBvcHRzLmRlY29kZSB8fCB0aGlzLmRlZmF1bHREZWNvZGVyXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZW5jb2RlID0gdGhpcy5kZWZhdWx0RW5jb2RlclxuICAgICAgdGhpcy5kZWNvZGUgPSB0aGlzLmRlZmF1bHREZWNvZGVyXG4gICAgfVxuICAgIGxldCBhd2FpdGluZ0Nvbm5lY3Rpb25PblBhZ2VTaG93ID0gbnVsbFxuICAgIGlmKHBoeFdpbmRvdyAmJiBwaHhXaW5kb3cuYWRkRXZlbnRMaXN0ZW5lcil7XG4gICAgICBwaHhXaW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInBhZ2VoaWRlXCIsIF9lID0+IHtcbiAgICAgICAgaWYodGhpcy5jb25uKXtcbiAgICAgICAgICB0aGlzLmRpc2Nvbm5lY3QoKVxuICAgICAgICAgIGF3YWl0aW5nQ29ubmVjdGlvbk9uUGFnZVNob3cgPSB0aGlzLmNvbm5lY3RDbG9ja1xuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgcGh4V2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJwYWdlc2hvd1wiLCBfZSA9PiB7XG4gICAgICAgIGlmKGF3YWl0aW5nQ29ubmVjdGlvbk9uUGFnZVNob3cgPT09IHRoaXMuY29ubmVjdENsb2NrKXtcbiAgICAgICAgICBhd2FpdGluZ0Nvbm5lY3Rpb25PblBhZ2VTaG93ID0gbnVsbFxuICAgICAgICAgIHRoaXMuY29ubmVjdCgpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuICAgIHRoaXMuaGVhcnRiZWF0SW50ZXJ2YWxNcyA9IG9wdHMuaGVhcnRiZWF0SW50ZXJ2YWxNcyB8fCAzMDAwMFxuICAgIHRoaXMucmVqb2luQWZ0ZXJNcyA9ICh0cmllcykgPT4ge1xuICAgICAgaWYob3B0cy5yZWpvaW5BZnRlck1zKXtcbiAgICAgICAgcmV0dXJuIG9wdHMucmVqb2luQWZ0ZXJNcyh0cmllcylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBbMTAwMCwgMjAwMCwgNTAwMF1bdHJpZXMgLSAxXSB8fCAxMDAwMFxuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnJlY29ubmVjdEFmdGVyTXMgPSAodHJpZXMpID0+IHtcbiAgICAgIGlmKG9wdHMucmVjb25uZWN0QWZ0ZXJNcyl7XG4gICAgICAgIHJldHVybiBvcHRzLnJlY29ubmVjdEFmdGVyTXModHJpZXMpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gWzEwLCA1MCwgMTAwLCAxNTAsIDIwMCwgMjUwLCA1MDAsIDEwMDAsIDIwMDBdW3RyaWVzIC0gMV0gfHwgNTAwMFxuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLmxvZ2dlciA9IG9wdHMubG9nZ2VyIHx8IG51bGxcbiAgICB0aGlzLmxvbmdwb2xsZXJUaW1lb3V0ID0gb3B0cy5sb25ncG9sbGVyVGltZW91dCB8fCAyMDAwMFxuICAgIHRoaXMucGFyYW1zID0gY2xvc3VyZShvcHRzLnBhcmFtcyB8fCB7fSlcbiAgICB0aGlzLmVuZFBvaW50ID0gYCR7ZW5kUG9pbnR9LyR7VFJBTlNQT1JUUy53ZWJzb2NrZXR9YFxuICAgIHRoaXMudnNuID0gb3B0cy52c24gfHwgREVGQVVMVF9WU05cbiAgICB0aGlzLmhlYXJ0YmVhdFRpbWVvdXRUaW1lciA9IG51bGxcbiAgICB0aGlzLmhlYXJ0YmVhdFRpbWVyID0gbnVsbFxuICAgIHRoaXMucGVuZGluZ0hlYXJ0YmVhdFJlZiA9IG51bGxcbiAgICB0aGlzLnJlY29ubmVjdFRpbWVyID0gbmV3IFRpbWVyKCgpID0+IHtcbiAgICAgIHRoaXMudGVhcmRvd24oKCkgPT4gdGhpcy5jb25uZWN0KCkpXG4gICAgfSwgdGhpcy5yZWNvbm5lY3RBZnRlck1zKVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIExvbmdQb2xsIHRyYW5zcG9ydCByZWZlcmVuY2VcbiAgICovXG4gIGdldExvbmdQb2xsVHJhbnNwb3J0KCl7IHJldHVybiBMb25nUG9sbCB9XG5cbiAgLyoqXG4gICAqIERpc2Nvbm5lY3RzIGFuZCByZXBsYWNlcyB0aGUgYWN0aXZlIHRyYW5zcG9ydFxuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBuZXdUcmFuc3BvcnQgLSBUaGUgbmV3IHRyYW5zcG9ydCBjbGFzcyB0byBpbnN0YW50aWF0ZVxuICAgKlxuICAgKi9cbiAgcmVwbGFjZVRyYW5zcG9ydChuZXdUcmFuc3BvcnQpe1xuICAgIHRoaXMuY29ubmVjdENsb2NrKytcbiAgICB0aGlzLmNsb3NlV2FzQ2xlYW4gPSB0cnVlXG4gICAgdGhpcy5yZWNvbm5lY3RUaW1lci5yZXNldCgpXG4gICAgdGhpcy5zZW5kQnVmZmVyID0gW11cbiAgICBpZih0aGlzLmNvbm4pe1xuICAgICAgdGhpcy5jb25uLmNsb3NlKClcbiAgICAgIHRoaXMuY29ubiA9IG51bGxcbiAgICB9XG4gICAgdGhpcy50cmFuc3BvcnQgPSBuZXdUcmFuc3BvcnRcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBzb2NrZXQgcHJvdG9jb2xcbiAgICpcbiAgICogQHJldHVybnMge3N0cmluZ31cbiAgICovXG4gIHByb3RvY29sKCl7IHJldHVybiBsb2NhdGlvbi5wcm90b2NvbC5tYXRjaCgvXmh0dHBzLykgPyBcIndzc1wiIDogXCJ3c1wiIH1cblxuICAvKipcbiAgICogVGhlIGZ1bGx5IHF1YWxpZmllZCBzb2NrZXQgdXJsXG4gICAqXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAqL1xuICBlbmRQb2ludFVSTCgpe1xuICAgIGxldCB1cmkgPSBBamF4LmFwcGVuZFBhcmFtcyhcbiAgICAgIEFqYXguYXBwZW5kUGFyYW1zKHRoaXMuZW5kUG9pbnQsIHRoaXMucGFyYW1zKCkpLCB7dnNuOiB0aGlzLnZzbn0pXG4gICAgaWYodXJpLmNoYXJBdCgwKSAhPT0gXCIvXCIpeyByZXR1cm4gdXJpIH1cbiAgICBpZih1cmkuY2hhckF0KDEpID09PSBcIi9cIil7IHJldHVybiBgJHt0aGlzLnByb3RvY29sKCl9OiR7dXJpfWAgfVxuXG4gICAgcmV0dXJuIGAke3RoaXMucHJvdG9jb2woKX06Ly8ke2xvY2F0aW9uLmhvc3R9JHt1cml9YFxuICB9XG5cbiAgLyoqXG4gICAqIERpc2Nvbm5lY3RzIHRoZSBzb2NrZXRcbiAgICpcbiAgICogU2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9DbG9zZUV2ZW50I1N0YXR1c19jb2RlcyBmb3IgdmFsaWQgc3RhdHVzIGNvZGVzLlxuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayAtIE9wdGlvbmFsIGNhbGxiYWNrIHdoaWNoIGlzIGNhbGxlZCBhZnRlciBzb2NrZXQgaXMgZGlzY29ubmVjdGVkLlxuICAgKiBAcGFyYW0ge2ludGVnZXJ9IGNvZGUgLSBBIHN0YXR1cyBjb2RlIGZvciBkaXNjb25uZWN0aW9uIChPcHRpb25hbCkuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByZWFzb24gLSBBIHRleHR1YWwgZGVzY3JpcHRpb24gb2YgdGhlIHJlYXNvbiB0byBkaXNjb25uZWN0LiAoT3B0aW9uYWwpXG4gICAqL1xuICBkaXNjb25uZWN0KGNhbGxiYWNrLCBjb2RlLCByZWFzb24pe1xuICAgIHRoaXMuY29ubmVjdENsb2NrKytcbiAgICB0aGlzLmNsb3NlV2FzQ2xlYW4gPSB0cnVlXG4gICAgdGhpcy5yZWNvbm5lY3RUaW1lci5yZXNldCgpXG4gICAgdGhpcy50ZWFyZG93bihjYWxsYmFjaywgY29kZSwgcmVhc29uKVxuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBwYXJhbXMgLSBUaGUgcGFyYW1zIHRvIHNlbmQgd2hlbiBjb25uZWN0aW5nLCBmb3IgZXhhbXBsZSBge3VzZXJfaWQ6IHVzZXJUb2tlbn1gXG4gICAqXG4gICAqIFBhc3NpbmcgcGFyYW1zIHRvIGNvbm5lY3QgaXMgZGVwcmVjYXRlZDsgcGFzcyB0aGVtIGluIHRoZSBTb2NrZXQgY29uc3RydWN0b3IgaW5zdGVhZDpcbiAgICogYG5ldyBTb2NrZXQoXCIvc29ja2V0XCIsIHtwYXJhbXM6IHt1c2VyX2lkOiB1c2VyVG9rZW59fSlgLlxuICAgKi9cbiAgY29ubmVjdChwYXJhbXMpe1xuICAgIGlmKHBhcmFtcyl7XG4gICAgICBjb25zb2xlICYmIGNvbnNvbGUubG9nKFwicGFzc2luZyBwYXJhbXMgdG8gY29ubmVjdCBpcyBkZXByZWNhdGVkLiBJbnN0ZWFkIHBhc3MgOnBhcmFtcyB0byB0aGUgU29ja2V0IGNvbnN0cnVjdG9yXCIpXG4gICAgICB0aGlzLnBhcmFtcyA9IGNsb3N1cmUocGFyYW1zKVxuICAgIH1cbiAgICBpZih0aGlzLmNvbm4peyByZXR1cm4gfVxuXG4gICAgdGhpcy5jb25uZWN0Q2xvY2srK1xuICAgIHRoaXMuY2xvc2VXYXNDbGVhbiA9IGZhbHNlXG4gICAgdGhpcy5jb25uID0gbmV3IHRoaXMudHJhbnNwb3J0KHRoaXMuZW5kUG9pbnRVUkwoKSlcbiAgICB0aGlzLmNvbm4uYmluYXJ5VHlwZSA9IHRoaXMuYmluYXJ5VHlwZVxuICAgIHRoaXMuY29ubi50aW1lb3V0ID0gdGhpcy5sb25ncG9sbGVyVGltZW91dFxuICAgIHRoaXMuY29ubi5vbm9wZW4gPSAoKSA9PiB0aGlzLm9uQ29ubk9wZW4oKVxuICAgIHRoaXMuY29ubi5vbmVycm9yID0gZXJyb3IgPT4gdGhpcy5vbkNvbm5FcnJvcihlcnJvcilcbiAgICB0aGlzLmNvbm4ub25tZXNzYWdlID0gZXZlbnQgPT4gdGhpcy5vbkNvbm5NZXNzYWdlKGV2ZW50KVxuICAgIHRoaXMuY29ubi5vbmNsb3NlID0gZXZlbnQgPT4gdGhpcy5vbkNvbm5DbG9zZShldmVudClcbiAgfVxuXG4gIC8qKlxuICAgKiBMb2dzIHRoZSBtZXNzYWdlLiBPdmVycmlkZSBgdGhpcy5sb2dnZXJgIGZvciBzcGVjaWFsaXplZCBsb2dnaW5nLiBub29wcyBieSBkZWZhdWx0XG4gICAqIEBwYXJhbSB7c3RyaW5nfSBraW5kXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBtc2dcbiAgICogQHBhcmFtIHtPYmplY3R9IGRhdGFcbiAgICovXG4gIGxvZyhraW5kLCBtc2csIGRhdGEpeyB0aGlzLmxvZ2dlcihraW5kLCBtc2csIGRhdGEpIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0cnVlIGlmIGEgbG9nZ2VyIGhhcyBiZWVuIHNldCBvbiB0aGlzIHNvY2tldC5cbiAgICovXG4gIGhhc0xvZ2dlcigpeyByZXR1cm4gdGhpcy5sb2dnZXIgIT09IG51bGwgfVxuXG4gIC8qKlxuICAgKiBSZWdpc3RlcnMgY2FsbGJhY2tzIGZvciBjb25uZWN0aW9uIG9wZW4gZXZlbnRzXG4gICAqXG4gICAqIEBleGFtcGxlIHNvY2tldC5vbk9wZW4oZnVuY3Rpb24oKXsgY29uc29sZS5pbmZvKFwidGhlIHNvY2tldCB3YXMgb3BlbmVkXCIpIH0pXG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gICAqL1xuICBvbk9wZW4oY2FsbGJhY2spe1xuICAgIGxldCByZWYgPSB0aGlzLm1ha2VSZWYoKVxuICAgIHRoaXMuc3RhdGVDaGFuZ2VDYWxsYmFja3Mub3Blbi5wdXNoKFtyZWYsIGNhbGxiYWNrXSlcbiAgICByZXR1cm4gcmVmXG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXJzIGNhbGxiYWNrcyBmb3IgY29ubmVjdGlvbiBjbG9zZSBldmVudHNcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcbiAgICovXG4gIG9uQ2xvc2UoY2FsbGJhY2spe1xuICAgIGxldCByZWYgPSB0aGlzLm1ha2VSZWYoKVxuICAgIHRoaXMuc3RhdGVDaGFuZ2VDYWxsYmFja3MuY2xvc2UucHVzaChbcmVmLCBjYWxsYmFja10pXG4gICAgcmV0dXJuIHJlZlxuICB9XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVycyBjYWxsYmFja3MgZm9yIGNvbm5lY3Rpb24gZXJyb3IgZXZlbnRzXG4gICAqXG4gICAqIEBleGFtcGxlIHNvY2tldC5vbkVycm9yKGZ1bmN0aW9uKGVycm9yKXsgYWxlcnQoXCJBbiBlcnJvciBvY2N1cnJlZFwiKSB9KVxuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICAgKi9cbiAgb25FcnJvcihjYWxsYmFjayl7XG4gICAgbGV0IHJlZiA9IHRoaXMubWFrZVJlZigpXG4gICAgdGhpcy5zdGF0ZUNoYW5nZUNhbGxiYWNrcy5lcnJvci5wdXNoKFtyZWYsIGNhbGxiYWNrXSlcbiAgICByZXR1cm4gcmVmXG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXJzIGNhbGxiYWNrcyBmb3IgY29ubmVjdGlvbiBtZXNzYWdlIGV2ZW50c1xuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICAgKi9cbiAgb25NZXNzYWdlKGNhbGxiYWNrKXtcbiAgICBsZXQgcmVmID0gdGhpcy5tYWtlUmVmKClcbiAgICB0aGlzLnN0YXRlQ2hhbmdlQ2FsbGJhY2tzLm1lc3NhZ2UucHVzaChbcmVmLCBjYWxsYmFja10pXG4gICAgcmV0dXJuIHJlZlxuICB9XG5cbiAgLyoqXG4gICAqIFBpbmdzIHRoZSBzZXJ2ZXIgYW5kIGludm9rZXMgdGhlIGNhbGxiYWNrIHdpdGggdGhlIFJUVCBpbiBtaWxsaXNlY29uZHNcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcbiAgICpcbiAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBwaW5nIHdhcyBwdXNoZWQgb3IgZmFsc2UgaWYgdW5hYmxlIHRvIGJlIHB1c2hlZC5cbiAgICovXG4gIHBpbmcoY2FsbGJhY2spe1xuICAgIGlmKCF0aGlzLmlzQ29ubmVjdGVkKCkpeyByZXR1cm4gZmFsc2UgfVxuICAgIGxldCByZWYgPSB0aGlzLm1ha2VSZWYoKVxuICAgIGxldCBzdGFydFRpbWUgPSBEYXRlLm5vdygpXG4gICAgdGhpcy5wdXNoKHt0b3BpYzogXCJwaG9lbml4XCIsIGV2ZW50OiBcImhlYXJ0YmVhdFwiLCBwYXlsb2FkOiB7fSwgcmVmOiByZWZ9KVxuICAgIGxldCBvbk1zZ1JlZiA9IHRoaXMub25NZXNzYWdlKG1zZyA9PiB7XG4gICAgICBpZihtc2cucmVmID09PSByZWYpe1xuICAgICAgICB0aGlzLm9mZihbb25Nc2dSZWZdKVxuICAgICAgICBjYWxsYmFjayhEYXRlLm5vdygpIC0gc3RhcnRUaW1lKVxuICAgICAgfVxuICAgIH0pXG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cblxuICBjbGVhckhlYXJ0YmVhdHMoKXtcbiAgICBjbGVhclRpbWVvdXQodGhpcy5oZWFydGJlYXRUaW1lcilcbiAgICBjbGVhclRpbWVvdXQodGhpcy5oZWFydGJlYXRUaW1lb3V0VGltZXIpXG4gIH1cblxuICBvbkNvbm5PcGVuKCl7XG4gICAgaWYodGhpcy5oYXNMb2dnZXIoKSkgdGhpcy5sb2coXCJ0cmFuc3BvcnRcIiwgYGNvbm5lY3RlZCB0byAke3RoaXMuZW5kUG9pbnRVUkwoKX1gKVxuICAgIHRoaXMuY2xvc2VXYXNDbGVhbiA9IGZhbHNlXG4gICAgdGhpcy5lc3RhYmxpc2hlZENvbm5lY3Rpb25zKytcbiAgICB0aGlzLmZsdXNoU2VuZEJ1ZmZlcigpXG4gICAgdGhpcy5yZWNvbm5lY3RUaW1lci5yZXNldCgpXG4gICAgdGhpcy5yZXNldEhlYXJ0YmVhdCgpXG4gICAgdGhpcy5zdGF0ZUNoYW5nZUNhbGxiYWNrcy5vcGVuLmZvckVhY2goKFssIGNhbGxiYWNrXSkgPT4gY2FsbGJhY2soKSlcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cblxuICBoZWFydGJlYXRUaW1lb3V0KCl7XG4gICAgaWYodGhpcy5wZW5kaW5nSGVhcnRiZWF0UmVmKXtcbiAgICAgIHRoaXMucGVuZGluZ0hlYXJ0YmVhdFJlZiA9IG51bGxcbiAgICAgIGlmKHRoaXMuaGFzTG9nZ2VyKCkpeyB0aGlzLmxvZyhcInRyYW5zcG9ydFwiLCBcImhlYXJ0YmVhdCB0aW1lb3V0LiBBdHRlbXB0aW5nIHRvIHJlLWVzdGFibGlzaCBjb25uZWN0aW9uXCIpIH1cbiAgICAgIHRoaXMudHJpZ2dlckNoYW5FcnJvcigpXG4gICAgICB0aGlzLmNsb3NlV2FzQ2xlYW4gPSBmYWxzZVxuICAgICAgdGhpcy50ZWFyZG93bigoKSA9PiB0aGlzLnJlY29ubmVjdFRpbWVyLnNjaGVkdWxlVGltZW91dCgpLCBXU19DTE9TRV9OT1JNQUwsIFwiaGVhcnRiZWF0IHRpbWVvdXRcIilcbiAgICB9XG4gIH1cblxuICByZXNldEhlYXJ0YmVhdCgpe1xuICAgIGlmKHRoaXMuY29ubiAmJiB0aGlzLmNvbm4uc2tpcEhlYXJ0YmVhdCl7IHJldHVybiB9XG4gICAgdGhpcy5wZW5kaW5nSGVhcnRiZWF0UmVmID0gbnVsbFxuICAgIHRoaXMuY2xlYXJIZWFydGJlYXRzKClcbiAgICB0aGlzLmhlYXJ0YmVhdFRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB0aGlzLnNlbmRIZWFydGJlYXQoKSwgdGhpcy5oZWFydGJlYXRJbnRlcnZhbE1zKVxuICB9XG5cbiAgdGVhcmRvd24oY2FsbGJhY2ssIGNvZGUsIHJlYXNvbil7XG4gICAgaWYoIXRoaXMuY29ubil7XG4gICAgICByZXR1cm4gY2FsbGJhY2sgJiYgY2FsbGJhY2soKVxuICAgIH1cblxuICAgIHRoaXMud2FpdEZvckJ1ZmZlckRvbmUoKCkgPT4ge1xuICAgICAgaWYodGhpcy5jb25uKXtcbiAgICAgICAgaWYoY29kZSl7IHRoaXMuY29ubi5jbG9zZShjb2RlLCByZWFzb24gfHwgXCJcIikgfSBlbHNlIHsgdGhpcy5jb25uLmNsb3NlKCkgfVxuICAgICAgfVxuXG4gICAgICB0aGlzLndhaXRGb3JTb2NrZXRDbG9zZWQoKCkgPT4ge1xuICAgICAgICBpZih0aGlzLmNvbm4pe1xuICAgICAgICAgIHRoaXMuY29ubi5vbm9wZW4gPSBmdW5jdGlvbiAoKXsgfSAvLyBub29wXG4gICAgICAgICAgdGhpcy5jb25uLm9uZXJyb3IgPSBmdW5jdGlvbiAoKXsgfSAvLyBub29wXG4gICAgICAgICAgdGhpcy5jb25uLm9ubWVzc2FnZSA9IGZ1bmN0aW9uICgpeyB9IC8vIG5vb3BcbiAgICAgICAgICB0aGlzLmNvbm4ub25jbG9zZSA9IGZ1bmN0aW9uICgpeyB9IC8vIG5vb3BcbiAgICAgICAgICB0aGlzLmNvbm4gPSBudWxsXG4gICAgICAgIH1cblxuICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjaygpXG4gICAgICB9KVxuICAgIH0pXG4gIH1cblxuICB3YWl0Rm9yQnVmZmVyRG9uZShjYWxsYmFjaywgdHJpZXMgPSAxKXtcbiAgICBpZih0cmllcyA9PT0gNSB8fCAhdGhpcy5jb25uIHx8ICF0aGlzLmNvbm4uYnVmZmVyZWRBbW91bnQpe1xuICAgICAgY2FsbGJhY2soKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLndhaXRGb3JCdWZmZXJEb25lKGNhbGxiYWNrLCB0cmllcyArIDEpXG4gICAgfSwgMTUwICogdHJpZXMpXG4gIH1cblxuICB3YWl0Rm9yU29ja2V0Q2xvc2VkKGNhbGxiYWNrLCB0cmllcyA9IDEpe1xuICAgIGlmKHRyaWVzID09PSA1IHx8ICF0aGlzLmNvbm4gfHwgdGhpcy5jb25uLnJlYWR5U3RhdGUgPT09IFNPQ0tFVF9TVEFURVMuY2xvc2VkKXtcbiAgICAgIGNhbGxiYWNrKClcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy53YWl0Rm9yU29ja2V0Q2xvc2VkKGNhbGxiYWNrLCB0cmllcyArIDEpXG4gICAgfSwgMTUwICogdHJpZXMpXG4gIH1cblxuICBvbkNvbm5DbG9zZShldmVudCl7XG4gICAgbGV0IGNsb3NlQ29kZSA9IGV2ZW50ICYmIGV2ZW50LmNvZGVcbiAgICBpZih0aGlzLmhhc0xvZ2dlcigpKSB0aGlzLmxvZyhcInRyYW5zcG9ydFwiLCBcImNsb3NlXCIsIGV2ZW50KVxuICAgIHRoaXMudHJpZ2dlckNoYW5FcnJvcigpXG4gICAgdGhpcy5jbGVhckhlYXJ0YmVhdHMoKVxuICAgIGlmKCF0aGlzLmNsb3NlV2FzQ2xlYW4gJiYgY2xvc2VDb2RlICE9PSAxMDAwKXtcbiAgICAgIHRoaXMucmVjb25uZWN0VGltZXIuc2NoZWR1bGVUaW1lb3V0KClcbiAgICB9XG4gICAgdGhpcy5zdGF0ZUNoYW5nZUNhbGxiYWNrcy5jbG9zZS5mb3JFYWNoKChbLCBjYWxsYmFja10pID0+IGNhbGxiYWNrKGV2ZW50KSlcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgb25Db25uRXJyb3IoZXJyb3Ipe1xuICAgIGlmKHRoaXMuaGFzTG9nZ2VyKCkpIHRoaXMubG9nKFwidHJhbnNwb3J0XCIsIGVycm9yKVxuICAgIGxldCB0cmFuc3BvcnRCZWZvcmUgPSB0aGlzLnRyYW5zcG9ydFxuICAgIGxldCBlc3RhYmxpc2hlZEJlZm9yZSA9IHRoaXMuZXN0YWJsaXNoZWRDb25uZWN0aW9uc1xuICAgIHRoaXMuc3RhdGVDaGFuZ2VDYWxsYmFja3MuZXJyb3IuZm9yRWFjaCgoWywgY2FsbGJhY2tdKSA9PiB7XG4gICAgICBjYWxsYmFjayhlcnJvciwgdHJhbnNwb3J0QmVmb3JlLCBlc3RhYmxpc2hlZEJlZm9yZSlcbiAgICB9KVxuICAgIGlmKHRyYW5zcG9ydEJlZm9yZSA9PT0gdGhpcy50cmFuc3BvcnQgfHwgZXN0YWJsaXNoZWRCZWZvcmUgPiAwKXtcbiAgICAgIHRoaXMudHJpZ2dlckNoYW5FcnJvcigpXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0cmlnZ2VyQ2hhbkVycm9yKCl7XG4gICAgdGhpcy5jaGFubmVscy5mb3JFYWNoKGNoYW5uZWwgPT4ge1xuICAgICAgaWYoIShjaGFubmVsLmlzRXJyb3JlZCgpIHx8IGNoYW5uZWwuaXNMZWF2aW5nKCkgfHwgY2hhbm5lbC5pc0Nsb3NlZCgpKSl7XG4gICAgICAgIGNoYW5uZWwudHJpZ2dlcihDSEFOTkVMX0VWRU5UUy5lcnJvcilcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAqL1xuICBjb25uZWN0aW9uU3RhdGUoKXtcbiAgICBzd2l0Y2godGhpcy5jb25uICYmIHRoaXMuY29ubi5yZWFkeVN0YXRlKXtcbiAgICAgIGNhc2UgU09DS0VUX1NUQVRFUy5jb25uZWN0aW5nOiByZXR1cm4gXCJjb25uZWN0aW5nXCJcbiAgICAgIGNhc2UgU09DS0VUX1NUQVRFUy5vcGVuOiByZXR1cm4gXCJvcGVuXCJcbiAgICAgIGNhc2UgU09DS0VUX1NUQVRFUy5jbG9zaW5nOiByZXR1cm4gXCJjbG9zaW5nXCJcbiAgICAgIGRlZmF1bHQ6IHJldHVybiBcImNsb3NlZFwiXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgKi9cbiAgaXNDb25uZWN0ZWQoKXsgcmV0dXJuIHRoaXMuY29ubmVjdGlvblN0YXRlKCkgPT09IFwib3BlblwiIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICpcbiAgICogQHBhcmFtIHtDaGFubmVsfVxuICAgKi9cbiAgcmVtb3ZlKGNoYW5uZWwpe1xuICAgIHRoaXMub2ZmKGNoYW5uZWwuc3RhdGVDaGFuZ2VSZWZzKVxuICAgIHRoaXMuY2hhbm5lbHMgPSB0aGlzLmNoYW5uZWxzLmZpbHRlcihjID0+IGMuam9pblJlZigpICE9PSBjaGFubmVsLmpvaW5SZWYoKSlcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIGBvbk9wZW5gLCBgb25DbG9zZWAsIGBvbkVycm9yLGAgYW5kIGBvbk1lc3NhZ2VgIHJlZ2lzdHJhdGlvbnMuXG4gICAqXG4gICAqIEBwYXJhbSB7cmVmc30gLSBsaXN0IG9mIHJlZnMgcmV0dXJuZWQgYnkgY2FsbHMgdG9cbiAgICogICAgICAgICAgICAgICAgIGBvbk9wZW5gLCBgb25DbG9zZWAsIGBvbkVycm9yLGAgYW5kIGBvbk1lc3NhZ2VgXG4gICAqL1xuICBvZmYocmVmcyl7XG4gICAgZm9yKGxldCBrZXkgaW4gdGhpcy5zdGF0ZUNoYW5nZUNhbGxiYWNrcyl7XG4gICAgICB0aGlzLnN0YXRlQ2hhbmdlQ2FsbGJhY2tzW2tleV0gPSB0aGlzLnN0YXRlQ2hhbmdlQ2FsbGJhY2tzW2tleV0uZmlsdGVyKChbcmVmXSkgPT4ge1xuICAgICAgICByZXR1cm4gcmVmcy5pbmRleE9mKHJlZikgPT09IC0xXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWF0ZXMgYSBuZXcgY2hhbm5lbCBmb3IgdGhlIGdpdmVuIHRvcGljXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0b3BpY1xuICAgKiBAcGFyYW0ge09iamVjdH0gY2hhblBhcmFtcyAtIFBhcmFtZXRlcnMgZm9yIHRoZSBjaGFubmVsXG4gICAqIEByZXR1cm5zIHtDaGFubmVsfVxuICAgKi9cbiAgY2hhbm5lbCh0b3BpYywgY2hhblBhcmFtcyA9IHt9KXtcbiAgICBsZXQgY2hhbiA9IG5ldyBDaGFubmVsKHRvcGljLCBjaGFuUGFyYW1zLCB0aGlzKVxuICAgIHRoaXMuY2hhbm5lbHMucHVzaChjaGFuKVxuICAgIHJldHVybiBjaGFuXG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtPYmplY3R9IGRhdGFcbiAgICovXG4gIHB1c2goZGF0YSl7XG4gICAgaWYodGhpcy5oYXNMb2dnZXIoKSl7XG4gICAgICBsZXQge3RvcGljLCBldmVudCwgcGF5bG9hZCwgcmVmLCBqb2luX3JlZn0gPSBkYXRhXG4gICAgICB0aGlzLmxvZyhcInB1c2hcIiwgYCR7dG9waWN9ICR7ZXZlbnR9ICgke2pvaW5fcmVmfSwgJHtyZWZ9KWAsIHBheWxvYWQpXG4gICAgfVxuXG4gICAgaWYodGhpcy5pc0Nvbm5lY3RlZCgpKXtcbiAgICAgIHRoaXMuZW5jb2RlKGRhdGEsIHJlc3VsdCA9PiB0aGlzLmNvbm4uc2VuZChyZXN1bHQpKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNlbmRCdWZmZXIucHVzaCgoKSA9PiB0aGlzLmVuY29kZShkYXRhLCByZXN1bHQgPT4gdGhpcy5jb25uLnNlbmQocmVzdWx0KSkpXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgbmV4dCBtZXNzYWdlIHJlZiwgYWNjb3VudGluZyBmb3Igb3ZlcmZsb3dzXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAqL1xuICBtYWtlUmVmKCl7XG4gICAgbGV0IG5ld1JlZiA9IHRoaXMucmVmICsgMVxuICAgIGlmKG5ld1JlZiA9PT0gdGhpcy5yZWYpeyB0aGlzLnJlZiA9IDAgfSBlbHNlIHsgdGhpcy5yZWYgPSBuZXdSZWYgfVxuXG4gICAgcmV0dXJuIHRoaXMucmVmLnRvU3RyaW5nKClcbiAgfVxuXG4gIHNlbmRIZWFydGJlYXQoKXtcbiAgICBpZih0aGlzLnBlbmRpbmdIZWFydGJlYXRSZWYgJiYgIXRoaXMuaXNDb25uZWN0ZWQoKSl7IHJldHVybiB9XG4gICAgdGhpcy5wZW5kaW5nSGVhcnRiZWF0UmVmID0gdGhpcy5tYWtlUmVmKClcbiAgICB0aGlzLnB1c2goe3RvcGljOiBcInBob2VuaXhcIiwgZXZlbnQ6IFwiaGVhcnRiZWF0XCIsIHBheWxvYWQ6IHt9LCByZWY6IHRoaXMucGVuZGluZ0hlYXJ0YmVhdFJlZn0pXG4gICAgdGhpcy5oZWFydGJlYXRUaW1lb3V0VGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHRoaXMuaGVhcnRiZWF0VGltZW91dCgpLCB0aGlzLmhlYXJ0YmVhdEludGVydmFsTXMpXG4gIH1cblxuICBmbHVzaFNlbmRCdWZmZXIoKXtcbiAgICBpZih0aGlzLmlzQ29ubmVjdGVkKCkgJiYgdGhpcy5zZW5kQnVmZmVyLmxlbmd0aCA+IDApe1xuICAgICAgdGhpcy5zZW5kQnVmZmVyLmZvckVhY2goY2FsbGJhY2sgPT4gY2FsbGJhY2soKSlcbiAgICAgIHRoaXMuc2VuZEJ1ZmZlciA9IFtdXG4gICAgfVxuICB9XG5cbiAgb25Db25uTWVzc2FnZShyYXdNZXNzYWdlKXtcbiAgICB0aGlzLmRlY29kZShyYXdNZXNzYWdlLmRhdGEsIG1zZyA9PiB7XG4gICAgICBsZXQge3RvcGljLCBldmVudCwgcGF5bG9hZCwgcmVmLCBqb2luX3JlZn0gPSBtc2dcbiAgICAgIGlmKHJlZiAmJiByZWYgPT09IHRoaXMucGVuZGluZ0hlYXJ0YmVhdFJlZil7XG4gICAgICAgIHRoaXMuY2xlYXJIZWFydGJlYXRzKClcbiAgICAgICAgdGhpcy5wZW5kaW5nSGVhcnRiZWF0UmVmID0gbnVsbFxuICAgICAgICB0aGlzLmhlYXJ0YmVhdFRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB0aGlzLnNlbmRIZWFydGJlYXQoKSwgdGhpcy5oZWFydGJlYXRJbnRlcnZhbE1zKVxuICAgICAgfVxuXG4gICAgICBpZih0aGlzLmhhc0xvZ2dlcigpKSB0aGlzLmxvZyhcInJlY2VpdmVcIiwgYCR7cGF5bG9hZC5zdGF0dXMgfHwgXCJcIn0gJHt0b3BpY30gJHtldmVudH0gJHtyZWYgJiYgXCIoXCIgKyByZWYgKyBcIilcIiB8fCBcIlwifWAsIHBheWxvYWQpXG5cbiAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCB0aGlzLmNoYW5uZWxzLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgY29uc3QgY2hhbm5lbCA9IHRoaXMuY2hhbm5lbHNbaV1cbiAgICAgICAgaWYoIWNoYW5uZWwuaXNNZW1iZXIodG9waWMsIGV2ZW50LCBwYXlsb2FkLCBqb2luX3JlZikpeyBjb250aW51ZSB9XG4gICAgICAgIGNoYW5uZWwudHJpZ2dlcihldmVudCwgcGF5bG9hZCwgcmVmLCBqb2luX3JlZilcbiAgICAgIH1cblxuICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMuc3RhdGVDaGFuZ2VDYWxsYmFja3MubWVzc2FnZS5sZW5ndGg7IGkrKyl7XG4gICAgICAgIGxldCBbLCBjYWxsYmFja10gPSB0aGlzLnN0YXRlQ2hhbmdlQ2FsbGJhY2tzLm1lc3NhZ2VbaV1cbiAgICAgICAgY2FsbGJhY2sobXNnKVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICBsZWF2ZU9wZW5Ub3BpYyh0b3BpYyl7XG4gICAgbGV0IGR1cENoYW5uZWwgPSB0aGlzLmNoYW5uZWxzLmZpbmQoYyA9PiBjLnRvcGljID09PSB0b3BpYyAmJiAoYy5pc0pvaW5lZCgpIHx8IGMuaXNKb2luaW5nKCkpKVxuICAgIGlmKGR1cENoYW5uZWwpe1xuICAgICAgaWYodGhpcy5oYXNMb2dnZXIoKSkgdGhpcy5sb2coXCJ0cmFuc3BvcnRcIiwgYGxlYXZpbmcgZHVwbGljYXRlIHRvcGljIFwiJHt0b3BpY31cImApXG4gICAgICBkdXBDaGFubmVsLmxlYXZlKClcbiAgICB9XG4gIH1cbn1cbiIsICJleHBvcnQgY29uc3QgQ09OU0VDVVRJVkVfUkVMT0FEUyA9IFwiY29uc2VjdXRpdmUtcmVsb2Fkc1wiXG5leHBvcnQgY29uc3QgTUFYX1JFTE9BRFMgPSAxMFxuZXhwb3J0IGNvbnN0IFJFTE9BRF9KSVRURVJfTUlOID0gNTAwMFxuZXhwb3J0IGNvbnN0IFJFTE9BRF9KSVRURVJfTUFYID0gMTAwMDBcbmV4cG9ydCBjb25zdCBGQUlMU0FGRV9KSVRURVIgPSAzMDAwMFxuZXhwb3J0IGNvbnN0IFBIWF9FVkVOVF9DTEFTU0VTID0gW1xuICBcInBoeC1jbGljay1sb2FkaW5nXCIsIFwicGh4LWNoYW5nZS1sb2FkaW5nXCIsIFwicGh4LXN1Ym1pdC1sb2FkaW5nXCIsXG4gIFwicGh4LWtleWRvd24tbG9hZGluZ1wiLCBcInBoeC1rZXl1cC1sb2FkaW5nXCIsIFwicGh4LWJsdXItbG9hZGluZ1wiLCBcInBoeC1mb2N1cy1sb2FkaW5nXCJcbl1cbmV4cG9ydCBjb25zdCBQSFhfQ09NUE9ORU5UID0gXCJkYXRhLXBoeC1jb21wb25lbnRcIlxuZXhwb3J0IGNvbnN0IFBIWF9MSVZFX0xJTksgPSBcImRhdGEtcGh4LWxpbmtcIlxuZXhwb3J0IGNvbnN0IFBIWF9UUkFDS19TVEFUSUMgPSBcInRyYWNrLXN0YXRpY1wiXG5leHBvcnQgY29uc3QgUEhYX0xJTktfU1RBVEUgPSBcImRhdGEtcGh4LWxpbmstc3RhdGVcIlxuZXhwb3J0IGNvbnN0IFBIWF9SRUYgPSBcImRhdGEtcGh4LXJlZlwiXG5leHBvcnQgY29uc3QgUEhYX1JFRl9TUkMgPSBcImRhdGEtcGh4LXJlZi1zcmNcIlxuZXhwb3J0IGNvbnN0IFBIWF9UUkFDS19VUExPQURTID0gXCJ0cmFjay11cGxvYWRzXCJcbmV4cG9ydCBjb25zdCBQSFhfVVBMT0FEX1JFRiA9IFwiZGF0YS1waHgtdXBsb2FkLXJlZlwiXG5leHBvcnQgY29uc3QgUEhYX1BSRUZMSUdIVEVEX1JFRlMgPSBcImRhdGEtcGh4LXByZWZsaWdodGVkLXJlZnNcIlxuZXhwb3J0IGNvbnN0IFBIWF9ET05FX1JFRlMgPSBcImRhdGEtcGh4LWRvbmUtcmVmc1wiXG5leHBvcnQgY29uc3QgUEhYX0RST1BfVEFSR0VUID0gXCJkcm9wLXRhcmdldFwiXG5leHBvcnQgY29uc3QgUEhYX0FDVElWRV9FTlRSWV9SRUZTID0gXCJkYXRhLXBoeC1hY3RpdmUtcmVmc1wiXG5leHBvcnQgY29uc3QgUEhYX0xJVkVfRklMRV9VUERBVEVEID0gXCJwaHg6bGl2ZS1maWxlOnVwZGF0ZWRcIlxuZXhwb3J0IGNvbnN0IFBIWF9TS0lQID0gXCJkYXRhLXBoeC1za2lwXCJcbmV4cG9ydCBjb25zdCBQSFhfUFJVTkUgPSBcImRhdGEtcGh4LXBydW5lXCJcbmV4cG9ydCBjb25zdCBQSFhfUEFHRV9MT0FESU5HID0gXCJwYWdlLWxvYWRpbmdcIlxuZXhwb3J0IGNvbnN0IFBIWF9DT05ORUNURURfQ0xBU1MgPSBcInBoeC1jb25uZWN0ZWRcIlxuZXhwb3J0IGNvbnN0IFBIWF9ESVNDT05ORUNURURfQ0xBU1MgPSBcInBoeC1sb2FkaW5nXCJcbmV4cG9ydCBjb25zdCBQSFhfTk9fRkVFREJBQ0tfQ0xBU1MgPSBcInBoeC1uby1mZWVkYmFja1wiXG5leHBvcnQgY29uc3QgUEhYX0VSUk9SX0NMQVNTID0gXCJwaHgtZXJyb3JcIlxuZXhwb3J0IGNvbnN0IFBIWF9QQVJFTlRfSUQgPSBcImRhdGEtcGh4LXBhcmVudC1pZFwiXG5leHBvcnQgY29uc3QgUEhYX01BSU4gPSBcImRhdGEtcGh4LW1haW5cIlxuZXhwb3J0IGNvbnN0IFBIWF9ST09UX0lEID0gXCJkYXRhLXBoeC1yb290LWlkXCJcbmV4cG9ydCBjb25zdCBQSFhfVFJJR0dFUl9BQ1RJT04gPSBcInRyaWdnZXItYWN0aW9uXCJcbmV4cG9ydCBjb25zdCBQSFhfRkVFREJBQ0tfRk9SID0gXCJmZWVkYmFjay1mb3JcIlxuZXhwb3J0IGNvbnN0IFBIWF9IQVNfRk9DVVNFRCA9IFwicGh4LWhhcy1mb2N1c2VkXCJcbmV4cG9ydCBjb25zdCBGT0NVU0FCTEVfSU5QVVRTID0gW1widGV4dFwiLCBcInRleHRhcmVhXCIsIFwibnVtYmVyXCIsIFwiZW1haWxcIiwgXCJwYXNzd29yZFwiLCBcInNlYXJjaFwiLCBcInRlbFwiLCBcInVybFwiLCBcImRhdGVcIiwgXCJ0aW1lXCIsIFwiZGF0ZXRpbWUtbG9jYWxcIiwgXCJjb2xvclwiLCBcInJhbmdlXCJdXG5leHBvcnQgY29uc3QgQ0hFQ0tBQkxFX0lOUFVUUyA9IFtcImNoZWNrYm94XCIsIFwicmFkaW9cIl1cbmV4cG9ydCBjb25zdCBQSFhfSEFTX1NVQk1JVFRFRCA9IFwicGh4LWhhcy1zdWJtaXR0ZWRcIlxuZXhwb3J0IGNvbnN0IFBIWF9TRVNTSU9OID0gXCJkYXRhLXBoeC1zZXNzaW9uXCJcbmV4cG9ydCBjb25zdCBQSFhfVklFV19TRUxFQ1RPUiA9IGBbJHtQSFhfU0VTU0lPTn1dYFxuZXhwb3J0IGNvbnN0IFBIWF9TVElDS1kgPSBcImRhdGEtcGh4LXN0aWNreVwiXG5leHBvcnQgY29uc3QgUEhYX1NUQVRJQyA9IFwiZGF0YS1waHgtc3RhdGljXCJcbmV4cG9ydCBjb25zdCBQSFhfUkVBRE9OTFkgPSBcImRhdGEtcGh4LXJlYWRvbmx5XCJcbmV4cG9ydCBjb25zdCBQSFhfRElTQUJMRUQgPSBcImRhdGEtcGh4LWRpc2FibGVkXCJcbmV4cG9ydCBjb25zdCBQSFhfRElTQUJMRV9XSVRIID0gXCJkaXNhYmxlLXdpdGhcIlxuZXhwb3J0IGNvbnN0IFBIWF9ESVNBQkxFX1dJVEhfUkVTVE9SRSA9IFwiZGF0YS1waHgtZGlzYWJsZS13aXRoLXJlc3RvcmVcIlxuZXhwb3J0IGNvbnN0IFBIWF9IT09LID0gXCJob29rXCJcbmV4cG9ydCBjb25zdCBQSFhfREVCT1VOQ0UgPSBcImRlYm91bmNlXCJcbmV4cG9ydCBjb25zdCBQSFhfVEhST1RUTEUgPSBcInRocm90dGxlXCJcbmV4cG9ydCBjb25zdCBQSFhfVVBEQVRFID0gXCJ1cGRhdGVcIlxuZXhwb3J0IGNvbnN0IFBIWF9TVFJFQU0gPSBcInN0cmVhbVwiXG5leHBvcnQgY29uc3QgUEhYX0tFWSA9IFwia2V5XCJcbmV4cG9ydCBjb25zdCBQSFhfUFJJVkFURSA9IFwicGh4UHJpdmF0ZVwiXG5leHBvcnQgY29uc3QgUEhYX0FVVE9fUkVDT1ZFUiA9IFwiYXV0by1yZWNvdmVyXCJcbmV4cG9ydCBjb25zdCBQSFhfTFZfREVCVUcgPSBcInBoeDpsaXZlLXNvY2tldDpkZWJ1Z1wiXG5leHBvcnQgY29uc3QgUEhYX0xWX1BST0ZJTEUgPSBcInBoeDpsaXZlLXNvY2tldDpwcm9maWxpbmdcIlxuZXhwb3J0IGNvbnN0IFBIWF9MVl9MQVRFTkNZX1NJTSA9IFwicGh4OmxpdmUtc29ja2V0OmxhdGVuY3ktc2ltXCJcbmV4cG9ydCBjb25zdCBQSFhfUFJPR1JFU1MgPSBcInByb2dyZXNzXCJcbmV4cG9ydCBjb25zdCBQSFhfTU9VTlRFRCA9IFwibW91bnRlZFwiXG5leHBvcnQgY29uc3QgTE9BREVSX1RJTUVPVVQgPSAxXG5leHBvcnQgY29uc3QgQkVGT1JFX1VOTE9BRF9MT0FERVJfVElNRU9VVCA9IDIwMFxuZXhwb3J0IGNvbnN0IEJJTkRJTkdfUFJFRklYID0gXCJwaHgtXCJcbmV4cG9ydCBjb25zdCBQVVNIX1RJTUVPVVQgPSAzMDAwMFxuZXhwb3J0IGNvbnN0IExJTktfSEVBREVSID0gXCJ4LXJlcXVlc3RlZC13aXRoXCJcbmV4cG9ydCBjb25zdCBSRVNQT05TRV9VUkxfSEVBREVSID0gXCJ4LXJlc3BvbnNlLXVybFwiXG5leHBvcnQgY29uc3QgREVCT1VOQ0VfVFJJR0dFUiA9IFwiZGVib3VuY2UtdHJpZ2dlclwiXG5leHBvcnQgY29uc3QgVEhST1RUTEVEID0gXCJ0aHJvdHRsZWRcIlxuZXhwb3J0IGNvbnN0IERFQk9VTkNFX1BSRVZfS0VZID0gXCJkZWJvdW5jZS1wcmV2LWtleVwiXG5leHBvcnQgY29uc3QgREVGQVVMVFMgPSB7XG4gIGRlYm91bmNlOiAzMDAsXG4gIHRocm90dGxlOiAzMDBcbn1cblxuLy8gUmVuZGVyZWRcbmV4cG9ydCBjb25zdCBEWU5BTUlDUyA9IFwiZFwiXG5leHBvcnQgY29uc3QgU1RBVElDID0gXCJzXCJcbmV4cG9ydCBjb25zdCBDT01QT05FTlRTID0gXCJjXCJcbmV4cG9ydCBjb25zdCBFVkVOVFMgPSBcImVcIlxuZXhwb3J0IGNvbnN0IFJFUExZID0gXCJyXCJcbmV4cG9ydCBjb25zdCBUSVRMRSA9IFwidFwiXG5leHBvcnQgY29uc3QgVEVNUExBVEVTID0gXCJwXCJcbmV4cG9ydCBjb25zdCBTVFJFQU0gPSBcInN0cmVhbVwiXG4iLCAiaW1wb3J0IHtcbiAgbG9nRXJyb3Jcbn0gZnJvbSBcIi4vdXRpbHNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBFbnRyeVVwbG9hZGVyIHtcbiAgY29uc3RydWN0b3IoZW50cnksIGNodW5rU2l6ZSwgbGl2ZVNvY2tldCl7XG4gICAgdGhpcy5saXZlU29ja2V0ID0gbGl2ZVNvY2tldFxuICAgIHRoaXMuZW50cnkgPSBlbnRyeVxuICAgIHRoaXMub2Zmc2V0ID0gMFxuICAgIHRoaXMuY2h1bmtTaXplID0gY2h1bmtTaXplXG4gICAgdGhpcy5jaHVua1RpbWVyID0gbnVsbFxuICAgIHRoaXMudXBsb2FkQ2hhbm5lbCA9IGxpdmVTb2NrZXQuY2hhbm5lbChgbHZ1OiR7ZW50cnkucmVmfWAsIHt0b2tlbjogZW50cnkubWV0YWRhdGEoKX0pXG4gIH1cblxuICBlcnJvcihyZWFzb24pe1xuICAgIGNsZWFyVGltZW91dCh0aGlzLmNodW5rVGltZXIpXG4gICAgdGhpcy51cGxvYWRDaGFubmVsLmxlYXZlKClcbiAgICB0aGlzLmVudHJ5LmVycm9yKHJlYXNvbilcbiAgfVxuXG4gIHVwbG9hZCgpe1xuICAgIHRoaXMudXBsb2FkQ2hhbm5lbC5vbkVycm9yKHJlYXNvbiA9PiB0aGlzLmVycm9yKHJlYXNvbikpXG4gICAgdGhpcy51cGxvYWRDaGFubmVsLmpvaW4oKVxuICAgICAgLnJlY2VpdmUoXCJva1wiLCBfZGF0YSA9PiB0aGlzLnJlYWROZXh0Q2h1bmsoKSlcbiAgICAgIC5yZWNlaXZlKFwiZXJyb3JcIiwgcmVhc29uID0+IHRoaXMuZXJyb3IocmVhc29uKSlcbiAgfVxuXG4gIGlzRG9uZSgpeyByZXR1cm4gdGhpcy5vZmZzZXQgPj0gdGhpcy5lbnRyeS5maWxlLnNpemUgfVxuXG4gIHJlYWROZXh0Q2h1bmsoKXtcbiAgICBsZXQgcmVhZGVyID0gbmV3IHdpbmRvdy5GaWxlUmVhZGVyKClcbiAgICBsZXQgYmxvYiA9IHRoaXMuZW50cnkuZmlsZS5zbGljZSh0aGlzLm9mZnNldCwgdGhpcy5jaHVua1NpemUgKyB0aGlzLm9mZnNldClcbiAgICByZWFkZXIub25sb2FkID0gKGUpID0+IHtcbiAgICAgIGlmKGUudGFyZ2V0LmVycm9yID09PSBudWxsKXtcbiAgICAgICAgdGhpcy5vZmZzZXQgKz0gZS50YXJnZXQucmVzdWx0LmJ5dGVMZW5ndGhcbiAgICAgICAgdGhpcy5wdXNoQ2h1bmsoZS50YXJnZXQucmVzdWx0KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGxvZ0Vycm9yKFwiUmVhZCBlcnJvcjogXCIgKyBlLnRhcmdldC5lcnJvcilcbiAgICAgIH1cbiAgICB9XG4gICAgcmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKGJsb2IpXG4gIH1cblxuICBwdXNoQ2h1bmsoY2h1bmspe1xuICAgIGlmKCF0aGlzLnVwbG9hZENoYW5uZWwuaXNKb2luZWQoKSl7IHJldHVybiB9XG4gICAgdGhpcy51cGxvYWRDaGFubmVsLnB1c2goXCJjaHVua1wiLCBjaHVuaylcbiAgICAgIC5yZWNlaXZlKFwib2tcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLmVudHJ5LnByb2dyZXNzKCh0aGlzLm9mZnNldCAvIHRoaXMuZW50cnkuZmlsZS5zaXplKSAqIDEwMClcbiAgICAgICAgaWYoIXRoaXMuaXNEb25lKCkpe1xuICAgICAgICAgIHRoaXMuY2h1bmtUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4gdGhpcy5yZWFkTmV4dENodW5rKCksIHRoaXMubGl2ZVNvY2tldC5nZXRMYXRlbmN5U2ltKCkgfHwgMClcbiAgICAgICAgfVxuICAgICAgfSlcbiAgfVxufVxuIiwgImltcG9ydCB7XG4gIFBIWF9WSUVXX1NFTEVDVE9SXG59IGZyb20gXCIuL2NvbnN0YW50c1wiXG5cbmltcG9ydCBFbnRyeVVwbG9hZGVyIGZyb20gXCIuL2VudHJ5X3VwbG9hZGVyXCJcblxuZXhwb3J0IGxldCBsb2dFcnJvciA9IChtc2csIG9iaikgPT4gY29uc29sZS5lcnJvciAmJiBjb25zb2xlLmVycm9yKG1zZywgb2JqKVxuXG5leHBvcnQgbGV0IGlzQ2lkID0gKGNpZCkgPT4ge1xuICBsZXQgdHlwZSA9IHR5cGVvZihjaWQpXG4gIHJldHVybiB0eXBlID09PSBcIm51bWJlclwiIHx8ICh0eXBlID09PSBcInN0cmluZ1wiICYmIC9eKDB8WzEtOV1cXGQqKSQvLnRlc3QoY2lkKSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRldGVjdER1cGxpY2F0ZUlkcygpe1xuICBsZXQgaWRzID0gbmV3IFNldCgpXG4gIGxldCBlbGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIqW2lkXVwiKVxuICBmb3IobGV0IGkgPSAwLCBsZW4gPSBlbGVtcy5sZW5ndGg7IGkgPCBsZW47IGkrKyl7XG4gICAgaWYoaWRzLmhhcyhlbGVtc1tpXS5pZCkpe1xuICAgICAgY29uc29sZS5lcnJvcihgTXVsdGlwbGUgSURzIGRldGVjdGVkOiAke2VsZW1zW2ldLmlkfS4gRW5zdXJlIHVuaXF1ZSBlbGVtZW50IGlkcy5gKVxuICAgIH0gZWxzZSB7XG4gICAgICBpZHMuYWRkKGVsZW1zW2ldLmlkKVxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgbGV0IGRlYnVnID0gKHZpZXcsIGtpbmQsIG1zZywgb2JqKSA9PiB7XG4gIGlmKHZpZXcubGl2ZVNvY2tldC5pc0RlYnVnRW5hYmxlZCgpKXtcbiAgICBjb25zb2xlLmxvZyhgJHt2aWV3LmlkfSAke2tpbmR9OiAke21zZ30gLSBgLCBvYmopXG4gIH1cbn1cblxuLy8gd3JhcHMgdmFsdWUgaW4gY2xvc3VyZSBvciByZXR1cm5zIGNsb3N1cmVcbmV4cG9ydCBsZXQgY2xvc3VyZSA9ICh2YWwpID0+IHR5cGVvZiB2YWwgPT09IFwiZnVuY3Rpb25cIiA/IHZhbCA6IGZ1bmN0aW9uICgpeyByZXR1cm4gdmFsIH1cblxuZXhwb3J0IGxldCBjbG9uZSA9IChvYmopID0+IHsgcmV0dXJuIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkob2JqKSkgfVxuXG5leHBvcnQgbGV0IGNsb3Nlc3RQaHhCaW5kaW5nID0gKGVsLCBiaW5kaW5nLCBib3JkZXJFbCkgPT4ge1xuICBkbyB7XG4gICAgaWYoZWwubWF0Y2hlcyhgWyR7YmluZGluZ31dYCkgJiYgIWVsLmRpc2FibGVkKXsgcmV0dXJuIGVsIH1cbiAgICBlbCA9IGVsLnBhcmVudEVsZW1lbnQgfHwgZWwucGFyZW50Tm9kZVxuICB9IHdoaWxlKGVsICE9PSBudWxsICYmIGVsLm5vZGVUeXBlID09PSAxICYmICEoKGJvcmRlckVsICYmIGJvcmRlckVsLmlzU2FtZU5vZGUoZWwpKSB8fCBlbC5tYXRjaGVzKFBIWF9WSUVXX1NFTEVDVE9SKSkpXG4gIHJldHVybiBudWxsXG59XG5cbmV4cG9ydCBsZXQgaXNPYmplY3QgPSAob2JqKSA9PiB7XG4gIHJldHVybiBvYmogIT09IG51bGwgJiYgdHlwZW9mIG9iaiA9PT0gXCJvYmplY3RcIiAmJiAhKG9iaiBpbnN0YW5jZW9mIEFycmF5KVxufVxuXG5leHBvcnQgbGV0IGlzRXF1YWxPYmogPSAob2JqMSwgb2JqMikgPT4gSlNPTi5zdHJpbmdpZnkob2JqMSkgPT09IEpTT04uc3RyaW5naWZ5KG9iajIpXG5cbmV4cG9ydCBsZXQgaXNFbXB0eSA9IChvYmopID0+IHtcbiAgZm9yKGxldCB4IGluIG9iail7IHJldHVybiBmYWxzZSB9XG4gIHJldHVybiB0cnVlXG59XG5cbmV4cG9ydCBsZXQgbWF5YmUgPSAoZWwsIGNhbGxiYWNrKSA9PiBlbCAmJiBjYWxsYmFjayhlbClcblxuZXhwb3J0IGxldCBjaGFubmVsVXBsb2FkZXIgPSBmdW5jdGlvbiAoZW50cmllcywgb25FcnJvciwgcmVzcCwgbGl2ZVNvY2tldCl7XG4gIGVudHJpZXMuZm9yRWFjaChlbnRyeSA9PiB7XG4gICAgbGV0IGVudHJ5VXBsb2FkZXIgPSBuZXcgRW50cnlVcGxvYWRlcihlbnRyeSwgcmVzcC5jb25maWcuY2h1bmtfc2l6ZSwgbGl2ZVNvY2tldClcbiAgICBlbnRyeVVwbG9hZGVyLnVwbG9hZCgpXG4gIH0pXG59XG4iLCAibGV0IEJyb3dzZXIgPSB7XG4gIGNhblB1c2hTdGF0ZSgpeyByZXR1cm4gKHR5cGVvZiAoaGlzdG9yeS5wdXNoU3RhdGUpICE9PSBcInVuZGVmaW5lZFwiKSB9LFxuXG4gIGRyb3BMb2NhbChsb2NhbFN0b3JhZ2UsIG5hbWVzcGFjZSwgc3Via2V5KXtcbiAgICByZXR1cm4gbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0odGhpcy5sb2NhbEtleShuYW1lc3BhY2UsIHN1YmtleSkpXG4gIH0sXG5cbiAgdXBkYXRlTG9jYWwobG9jYWxTdG9yYWdlLCBuYW1lc3BhY2UsIHN1YmtleSwgaW5pdGlhbCwgZnVuYyl7XG4gICAgbGV0IGN1cnJlbnQgPSB0aGlzLmdldExvY2FsKGxvY2FsU3RvcmFnZSwgbmFtZXNwYWNlLCBzdWJrZXkpXG4gICAgbGV0IGtleSA9IHRoaXMubG9jYWxLZXkobmFtZXNwYWNlLCBzdWJrZXkpXG4gICAgbGV0IG5ld1ZhbCA9IGN1cnJlbnQgPT09IG51bGwgPyBpbml0aWFsIDogZnVuYyhjdXJyZW50KVxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGtleSwgSlNPTi5zdHJpbmdpZnkobmV3VmFsKSlcbiAgICByZXR1cm4gbmV3VmFsXG4gIH0sXG5cbiAgZ2V0TG9jYWwobG9jYWxTdG9yYWdlLCBuYW1lc3BhY2UsIHN1YmtleSl7XG4gICAgcmV0dXJuIEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0odGhpcy5sb2NhbEtleShuYW1lc3BhY2UsIHN1YmtleSkpKVxuICB9LFxuXG4gIHVwZGF0ZUN1cnJlbnRTdGF0ZShjYWxsYmFjayl7XG4gICAgaWYoIXRoaXMuY2FuUHVzaFN0YXRlKCkpeyByZXR1cm4gfVxuICAgIGhpc3RvcnkucmVwbGFjZVN0YXRlKGNhbGxiYWNrKGhpc3Rvcnkuc3RhdGUgfHwge30pLCBcIlwiLCB3aW5kb3cubG9jYXRpb24uaHJlZilcbiAgfSxcblxuICBwdXNoU3RhdGUoa2luZCwgbWV0YSwgdG8pe1xuICAgIGlmKHRoaXMuY2FuUHVzaFN0YXRlKCkpe1xuICAgICAgaWYodG8gIT09IHdpbmRvdy5sb2NhdGlvbi5ocmVmKXtcbiAgICAgICAgaWYobWV0YS50eXBlID09IFwicmVkaXJlY3RcIiAmJiBtZXRhLnNjcm9sbCl7XG4gICAgICAgICAgLy8gSWYgd2UncmUgcmVkaXJlY3Rpbmcgc3RvcmUgdGhlIGN1cnJlbnQgc2Nyb2xsWSBmb3IgdGhlIGN1cnJlbnQgaGlzdG9yeSBzdGF0ZS5cbiAgICAgICAgICBsZXQgY3VycmVudFN0YXRlID0gaGlzdG9yeS5zdGF0ZSB8fCB7fVxuICAgICAgICAgIGN1cnJlbnRTdGF0ZS5zY3JvbGwgPSBtZXRhLnNjcm9sbFxuICAgICAgICAgIGhpc3RvcnkucmVwbGFjZVN0YXRlKGN1cnJlbnRTdGF0ZSwgXCJcIiwgd2luZG93LmxvY2F0aW9uLmhyZWYpXG4gICAgICAgIH1cblxuICAgICAgICBkZWxldGUgbWV0YS5zY3JvbGwgLy8gT25seSBzdG9yZSB0aGUgc2Nyb2xsIGluIHRoZSByZWRpcmVjdCBjYXNlLlxuICAgICAgICBoaXN0b3J5W2tpbmQgKyBcIlN0YXRlXCJdKG1ldGEsIFwiXCIsIHRvIHx8IG51bGwpIC8vIElFIHdpbGwgY29lcmNlIHVuZGVmaW5lZCB0byBzdHJpbmdcbiAgICAgICAgbGV0IGhhc2hFbCA9IHRoaXMuZ2V0SGFzaFRhcmdldEVsKHdpbmRvdy5sb2NhdGlvbi5oYXNoKVxuXG4gICAgICAgIGlmKGhhc2hFbCl7XG4gICAgICAgICAgaGFzaEVsLnNjcm9sbEludG9WaWV3KClcbiAgICAgICAgfSBlbHNlIGlmKG1ldGEudHlwZSA9PT0gXCJyZWRpcmVjdFwiKXtcbiAgICAgICAgICB3aW5kb3cuc2Nyb2xsKDAsIDApXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yZWRpcmVjdCh0bylcbiAgICB9XG4gIH0sXG5cbiAgc2V0Q29va2llKG5hbWUsIHZhbHVlKXtcbiAgICBkb2N1bWVudC5jb29raWUgPSBgJHtuYW1lfT0ke3ZhbHVlfWBcbiAgfSxcblxuICBnZXRDb29raWUobmFtZSl7XG4gICAgcmV0dXJuIGRvY3VtZW50LmNvb2tpZS5yZXBsYWNlKG5ldyBSZWdFeHAoYCg/Oig/Ol58Lio7XFxzKikke25hbWV9XFxzKlxcPVxccyooW147XSopLiokKXxeLiokYCksIFwiJDFcIilcbiAgfSxcblxuICByZWRpcmVjdCh0b1VSTCwgZmxhc2gpe1xuICAgIGlmKGZsYXNoKXsgQnJvd3Nlci5zZXRDb29raWUoXCJfX3Bob2VuaXhfZmxhc2hfX1wiLCBmbGFzaCArIFwiOyBtYXgtYWdlPTYwMDAwOyBwYXRoPS9cIikgfVxuICAgIHdpbmRvdy5sb2NhdGlvbiA9IHRvVVJMXG4gIH0sXG5cbiAgbG9jYWxLZXkobmFtZXNwYWNlLCBzdWJrZXkpeyByZXR1cm4gYCR7bmFtZXNwYWNlfS0ke3N1YmtleX1gIH0sXG5cbiAgZ2V0SGFzaFRhcmdldEVsKG1heWJlSGFzaCl7XG4gICAgbGV0IGhhc2ggPSBtYXliZUhhc2gudG9TdHJpbmcoKS5zdWJzdHJpbmcoMSlcbiAgICBpZihoYXNoID09PSBcIlwiKXsgcmV0dXJuIH1cbiAgICByZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaGFzaCkgfHwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgYVtuYW1lPVwiJHtoYXNofVwiXWApXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQnJvd3NlclxuIiwgImltcG9ydCB7XG4gIENIRUNLQUJMRV9JTlBVVFMsXG4gIERFQk9VTkNFX1BSRVZfS0VZLFxuICBERUJPVU5DRV9UUklHR0VSLFxuICBGT0NVU0FCTEVfSU5QVVRTLFxuICBQSFhfQ09NUE9ORU5ULFxuICBQSFhfRVZFTlRfQ0xBU1NFUyxcbiAgUEhYX0hBU19GT0NVU0VELFxuICBQSFhfSEFTX1NVQk1JVFRFRCxcbiAgUEhYX01BSU4sXG4gIFBIWF9OT19GRUVEQkFDS19DTEFTUyxcbiAgUEhYX1BBUkVOVF9JRCxcbiAgUEhYX1BSSVZBVEUsXG4gIFBIWF9SRUYsXG4gIFBIWF9SRUZfU1JDLFxuICBQSFhfUk9PVF9JRCxcbiAgUEhYX1NFU1NJT04sXG4gIFBIWF9TVEFUSUMsXG4gIFBIWF9VUExPQURfUkVGLFxuICBQSFhfVklFV19TRUxFQ1RPUixcbiAgUEhYX1NUSUNLWSxcbiAgVEhST1RUTEVEXG59IGZyb20gXCIuL2NvbnN0YW50c1wiXG5cbmltcG9ydCB7XG4gIGxvZ0Vycm9yXG59IGZyb20gXCIuL3V0aWxzXCJcblxubGV0IERPTSA9IHtcbiAgYnlJZChpZCl7IHJldHVybiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCkgfHwgbG9nRXJyb3IoYG5vIGlkIGZvdW5kIGZvciAke2lkfWApIH0sXG5cbiAgcmVtb3ZlQ2xhc3MoZWwsIGNsYXNzTmFtZSl7XG4gICAgZWwuY2xhc3NMaXN0LnJlbW92ZShjbGFzc05hbWUpXG4gICAgaWYoZWwuY2xhc3NMaXN0Lmxlbmd0aCA9PT0gMCl7IGVsLnJlbW92ZUF0dHJpYnV0ZShcImNsYXNzXCIpIH1cbiAgfSxcblxuICBhbGwobm9kZSwgcXVlcnksIGNhbGxiYWNrKXtcbiAgICBpZighbm9kZSl7IHJldHVybiBbXSB9XG4gICAgbGV0IGFycmF5ID0gQXJyYXkuZnJvbShub2RlLnF1ZXJ5U2VsZWN0b3JBbGwocXVlcnkpKVxuICAgIHJldHVybiBjYWxsYmFjayA/IGFycmF5LmZvckVhY2goY2FsbGJhY2spIDogYXJyYXlcbiAgfSxcblxuICBjaGlsZE5vZGVMZW5ndGgoaHRtbCl7XG4gICAgbGV0IHRlbXBsYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRlbXBsYXRlXCIpXG4gICAgdGVtcGxhdGUuaW5uZXJIVE1MID0gaHRtbFxuICAgIHJldHVybiB0ZW1wbGF0ZS5jb250ZW50LmNoaWxkRWxlbWVudENvdW50XG4gIH0sXG5cbiAgaXNVcGxvYWRJbnB1dChlbCl7IHJldHVybiBlbC50eXBlID09PSBcImZpbGVcIiAmJiBlbC5nZXRBdHRyaWJ1dGUoUEhYX1VQTE9BRF9SRUYpICE9PSBudWxsIH0sXG5cbiAgZmluZFVwbG9hZElucHV0cyhub2RlKXsgcmV0dXJuIHRoaXMuYWxsKG5vZGUsIGBpbnB1dFt0eXBlPVwiZmlsZVwiXVske1BIWF9VUExPQURfUkVGfV1gKSB9LFxuXG4gIGZpbmRDb21wb25lbnROb2RlTGlzdChub2RlLCBjaWQpe1xuICAgIHJldHVybiB0aGlzLmZpbHRlcldpdGhpblNhbWVMaXZlVmlldyh0aGlzLmFsbChub2RlLCBgWyR7UEhYX0NPTVBPTkVOVH09XCIke2NpZH1cIl1gKSwgbm9kZSlcbiAgfSxcblxuICBpc1BoeERlc3Ryb3llZChub2RlKXtcbiAgICByZXR1cm4gbm9kZS5pZCAmJiBET00ucHJpdmF0ZShub2RlLCBcImRlc3Ryb3llZFwiKSA/IHRydWUgOiBmYWxzZVxuICB9LFxuXG4gIHdhbnRzTmV3VGFiKGUpe1xuICAgIGxldCB3YW50c05ld1RhYiA9IGUuY3RybEtleSB8fCBlLnNoaWZ0S2V5IHx8IGUubWV0YUtleSB8fCAoZS5idXR0b24gJiYgZS5idXR0b24gPT09IDEpXG4gICAgcmV0dXJuIHdhbnRzTmV3VGFiIHx8IGUudGFyZ2V0LmdldEF0dHJpYnV0ZShcInRhcmdldFwiKSA9PT0gXCJfYmxhbmtcIlxuICB9LFxuXG4gIGlzVW5sb2FkYWJsZUZvcm1TdWJtaXQoZSl7XG4gICAgcmV0dXJuICFlLmRlZmF1bHRQcmV2ZW50ZWQgJiYgIXRoaXMud2FudHNOZXdUYWIoZSlcbiAgfSxcblxuICBpc05ld1BhZ2VIcmVmKGhyZWYsIGN1cnJlbnRMb2NhdGlvbil7XG4gICAgbGV0IHVybFxuICAgIHRyeSB7XG4gICAgICB1cmwgPSBuZXcgVVJMKGhyZWYpXG4gICAgfSBjYXRjaChlKSB7XG4gICAgICB0cnkge1xuICAgICAgICB1cmwgPSBuZXcgVVJMKGhyZWYsIGN1cnJlbnRMb2NhdGlvbilcbiAgICAgIH0gY2F0Y2goZSkge1xuICAgICAgICAvLyBiYWQgVVJMLCBmYWxsYmFjayB0byBsZXQgYnJvd3NlciB0cnkgaXQgYXMgZXh0ZXJuYWxcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZih1cmwuaG9zdCA9PT0gY3VycmVudExvY2F0aW9uLmhvc3QgJiYgdXJsLnByb3RvY29sID09PSBjdXJyZW50TG9jYXRpb24ucHJvdG9jb2wpe1xuICAgICAgaWYodXJsLnBhdGhuYW1lID09PSBjdXJyZW50TG9jYXRpb24ucGF0aG5hbWUgJiYgdXJsLnNlYXJjaCA9PT0gY3VycmVudExvY2F0aW9uLnNlYXJjaCl7XG4gICAgICAgIHJldHVybiB1cmwuaGFzaCA9PT0gXCJcIiAmJiAhdXJsLmhyZWYuZW5kc1dpdGgoXCIjXCIpXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlXG4gIH0sXG5cbiAgbWFya1BoeENoaWxkRGVzdHJveWVkKGVsKXtcbiAgICBpZih0aGlzLmlzUGh4Q2hpbGQoZWwpKXsgZWwuc2V0QXR0cmlidXRlKFBIWF9TRVNTSU9OLCBcIlwiKSB9XG4gICAgdGhpcy5wdXRQcml2YXRlKGVsLCBcImRlc3Ryb3llZFwiLCB0cnVlKVxuICB9LFxuXG4gIGZpbmRQaHhDaGlsZHJlbkluRnJhZ21lbnQoaHRtbCwgcGFyZW50SWQpe1xuICAgIGxldCB0ZW1wbGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZW1wbGF0ZVwiKVxuICAgIHRlbXBsYXRlLmlubmVySFRNTCA9IGh0bWxcbiAgICByZXR1cm4gdGhpcy5maW5kUGh4Q2hpbGRyZW4odGVtcGxhdGUuY29udGVudCwgcGFyZW50SWQpXG4gIH0sXG5cbiAgaXNJZ25vcmVkKGVsLCBwaHhVcGRhdGUpe1xuICAgIHJldHVybiAoZWwuZ2V0QXR0cmlidXRlKHBoeFVwZGF0ZSkgfHwgZWwuZ2V0QXR0cmlidXRlKFwiZGF0YS1waHgtdXBkYXRlXCIpKSA9PT0gXCJpZ25vcmVcIlxuICB9LFxuXG4gIGlzUGh4VXBkYXRlKGVsLCBwaHhVcGRhdGUsIHVwZGF0ZVR5cGVzKXtcbiAgICByZXR1cm4gZWwuZ2V0QXR0cmlidXRlICYmIHVwZGF0ZVR5cGVzLmluZGV4T2YoZWwuZ2V0QXR0cmlidXRlKHBoeFVwZGF0ZSkpID49IDBcbiAgfSxcblxuICBmaW5kUGh4U3RpY2t5KGVsKXsgcmV0dXJuIHRoaXMuYWxsKGVsLCBgWyR7UEhYX1NUSUNLWX1dYCkgfSxcblxuICBmaW5kUGh4Q2hpbGRyZW4oZWwsIHBhcmVudElkKXtcbiAgICByZXR1cm4gdGhpcy5hbGwoZWwsIGAke1BIWF9WSUVXX1NFTEVDVE9SfVske1BIWF9QQVJFTlRfSUR9PVwiJHtwYXJlbnRJZH1cIl1gKVxuICB9LFxuXG4gIGZpbmRQYXJlbnRDSURzKG5vZGUsIGNpZHMpe1xuICAgIGxldCBpbml0aWFsID0gbmV3IFNldChjaWRzKVxuICAgIGxldCBwYXJlbnRDaWRzID1cbiAgICAgIGNpZHMucmVkdWNlKChhY2MsIGNpZCkgPT4ge1xuICAgICAgICBsZXQgc2VsZWN0b3IgPSBgWyR7UEhYX0NPTVBPTkVOVH09XCIke2NpZH1cIl0gWyR7UEhYX0NPTVBPTkVOVH1dYFxuXG4gICAgICAgIHRoaXMuZmlsdGVyV2l0aGluU2FtZUxpdmVWaWV3KHRoaXMuYWxsKG5vZGUsIHNlbGVjdG9yKSwgbm9kZSlcbiAgICAgICAgICAubWFwKGVsID0+IHBhcnNlSW50KGVsLmdldEF0dHJpYnV0ZShQSFhfQ09NUE9ORU5UKSkpXG4gICAgICAgICAgLmZvckVhY2goY2hpbGRDSUQgPT4gYWNjLmRlbGV0ZShjaGlsZENJRCkpXG5cbiAgICAgICAgcmV0dXJuIGFjY1xuICAgICAgfSwgaW5pdGlhbClcblxuICAgIHJldHVybiBwYXJlbnRDaWRzLnNpemUgPT09IDAgPyBuZXcgU2V0KGNpZHMpIDogcGFyZW50Q2lkc1xuICB9LFxuXG4gIGZpbHRlcldpdGhpblNhbWVMaXZlVmlldyhub2RlcywgcGFyZW50KXtcbiAgICBpZihwYXJlbnQucXVlcnlTZWxlY3RvcihQSFhfVklFV19TRUxFQ1RPUikpe1xuICAgICAgcmV0dXJuIG5vZGVzLmZpbHRlcihlbCA9PiB0aGlzLndpdGhpblNhbWVMaXZlVmlldyhlbCwgcGFyZW50KSlcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG5vZGVzXG4gICAgfVxuICB9LFxuXG4gIHdpdGhpblNhbWVMaXZlVmlldyhub2RlLCBwYXJlbnQpe1xuICAgIHdoaWxlKG5vZGUgPSBub2RlLnBhcmVudE5vZGUpe1xuICAgICAgaWYobm9kZS5pc1NhbWVOb2RlKHBhcmVudCkpeyByZXR1cm4gdHJ1ZSB9XG4gICAgICBpZihub2RlLmdldEF0dHJpYnV0ZShQSFhfU0VTU0lPTikgIT09IG51bGwpeyByZXR1cm4gZmFsc2UgfVxuICAgIH1cbiAgfSxcblxuICBwcml2YXRlKGVsLCBrZXkpeyByZXR1cm4gZWxbUEhYX1BSSVZBVEVdICYmIGVsW1BIWF9QUklWQVRFXVtrZXldIH0sXG5cbiAgZGVsZXRlUHJpdmF0ZShlbCwga2V5KXsgZWxbUEhYX1BSSVZBVEVdICYmIGRlbGV0ZSAoZWxbUEhYX1BSSVZBVEVdW2tleV0pIH0sXG5cbiAgcHV0UHJpdmF0ZShlbCwga2V5LCB2YWx1ZSl7XG4gICAgaWYoIWVsW1BIWF9QUklWQVRFXSl7IGVsW1BIWF9QUklWQVRFXSA9IHt9IH1cbiAgICBlbFtQSFhfUFJJVkFURV1ba2V5XSA9IHZhbHVlXG4gIH0sXG5cbiAgdXBkYXRlUHJpdmF0ZShlbCwga2V5LCBkZWZhdWx0VmFsLCB1cGRhdGVGdW5jKXtcbiAgICBsZXQgZXhpc3RpbmcgPSB0aGlzLnByaXZhdGUoZWwsIGtleSlcbiAgICBpZihleGlzdGluZyA9PT0gdW5kZWZpbmVkKXtcbiAgICAgIHRoaXMucHV0UHJpdmF0ZShlbCwga2V5LCB1cGRhdGVGdW5jKGRlZmF1bHRWYWwpKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnB1dFByaXZhdGUoZWwsIGtleSwgdXBkYXRlRnVuYyhleGlzdGluZykpXG4gICAgfVxuICB9LFxuXG4gIGNvcHlQcml2YXRlcyh0YXJnZXQsIHNvdXJjZSl7XG4gICAgaWYoc291cmNlW1BIWF9QUklWQVRFXSl7XG4gICAgICB0YXJnZXRbUEhYX1BSSVZBVEVdID0gc291cmNlW1BIWF9QUklWQVRFXVxuICAgIH1cbiAgfSxcblxuICBwdXRUaXRsZShzdHIpe1xuICAgIGxldCB0aXRsZUVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcInRpdGxlXCIpXG4gICAgaWYodGl0bGVFbCl7XG4gICAgICBsZXQge3ByZWZpeCwgc3VmZml4fSA9IHRpdGxlRWwuZGF0YXNldFxuICAgICAgZG9jdW1lbnQudGl0bGUgPSBgJHtwcmVmaXggfHwgXCJcIn0ke3N0cn0ke3N1ZmZpeCB8fCBcIlwifWBcbiAgICB9IGVsc2Uge1xuICAgICAgZG9jdW1lbnQudGl0bGUgPSBzdHJcbiAgICB9XG4gIH0sXG5cbiAgZGVib3VuY2UoZWwsIGV2ZW50LCBwaHhEZWJvdW5jZSwgZGVmYXVsdERlYm91bmNlLCBwaHhUaHJvdHRsZSwgZGVmYXVsdFRocm90dGxlLCBhc3luY0ZpbHRlciwgY2FsbGJhY2spe1xuICAgIGxldCBkZWJvdW5jZSA9IGVsLmdldEF0dHJpYnV0ZShwaHhEZWJvdW5jZSlcbiAgICBsZXQgdGhyb3R0bGUgPSBlbC5nZXRBdHRyaWJ1dGUocGh4VGhyb3R0bGUpXG4gICAgaWYoZGVib3VuY2UgPT09IFwiXCIpeyBkZWJvdW5jZSA9IGRlZmF1bHREZWJvdW5jZSB9XG4gICAgaWYodGhyb3R0bGUgPT09IFwiXCIpeyB0aHJvdHRsZSA9IGRlZmF1bHRUaHJvdHRsZSB9XG4gICAgbGV0IHZhbHVlID0gZGVib3VuY2UgfHwgdGhyb3R0bGVcbiAgICBzd2l0Y2godmFsdWUpe1xuICAgICAgY2FzZSBudWxsOiByZXR1cm4gY2FsbGJhY2soKVxuXG4gICAgICBjYXNlIFwiYmx1clwiOlxuICAgICAgICBpZih0aGlzLm9uY2UoZWwsIFwiZGVib3VuY2UtYmx1clwiKSl7XG4gICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcihcImJsdXJcIiwgKCkgPT4gY2FsbGJhY2soKSlcbiAgICAgICAgfVxuICAgICAgICByZXR1cm5cblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgbGV0IHRpbWVvdXQgPSBwYXJzZUludCh2YWx1ZSlcbiAgICAgICAgbGV0IHRyaWdnZXIgPSAoKSA9PiB0aHJvdHRsZSA/IHRoaXMuZGVsZXRlUHJpdmF0ZShlbCwgVEhST1RUTEVEKSA6IGNhbGxiYWNrKClcbiAgICAgICAgbGV0IGN1cnJlbnRDeWNsZSA9IHRoaXMuaW5jQ3ljbGUoZWwsIERFQk9VTkNFX1RSSUdHRVIsIHRyaWdnZXIpXG4gICAgICAgIGlmKGlzTmFOKHRpbWVvdXQpKXsgcmV0dXJuIGxvZ0Vycm9yKGBpbnZhbGlkIHRocm90dGxlL2RlYm91bmNlIHZhbHVlOiAke3ZhbHVlfWApIH1cbiAgICAgICAgaWYodGhyb3R0bGUpe1xuICAgICAgICAgIGxldCBuZXdLZXlEb3duID0gZmFsc2VcbiAgICAgICAgICBpZihldmVudC50eXBlID09PSBcImtleWRvd25cIil7XG4gICAgICAgICAgICBsZXQgcHJldktleSA9IHRoaXMucHJpdmF0ZShlbCwgREVCT1VOQ0VfUFJFVl9LRVkpXG4gICAgICAgICAgICB0aGlzLnB1dFByaXZhdGUoZWwsIERFQk9VTkNFX1BSRVZfS0VZLCBldmVudC5rZXkpXG4gICAgICAgICAgICBuZXdLZXlEb3duID0gcHJldktleSAhPT0gZXZlbnQua2V5XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYoIW5ld0tleURvd24gJiYgdGhpcy5wcml2YXRlKGVsLCBUSFJPVFRMRUQpKXtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWxsYmFjaygpXG4gICAgICAgICAgICB0aGlzLnB1dFByaXZhdGUoZWwsIFRIUk9UVExFRCwgdHJ1ZSlcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICBpZihhc3luY0ZpbHRlcigpKXsgdGhpcy50cmlnZ2VyQ3ljbGUoZWwsIERFQk9VTkNFX1RSSUdHRVIpIH1cbiAgICAgICAgICAgIH0sIHRpbWVvdXQpXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgaWYoYXN5bmNGaWx0ZXIoKSl7IHRoaXMudHJpZ2dlckN5Y2xlKGVsLCBERUJPVU5DRV9UUklHR0VSLCBjdXJyZW50Q3ljbGUpIH1cbiAgICAgICAgICB9LCB0aW1lb3V0KVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGZvcm0gPSBlbC5mb3JtXG4gICAgICAgIGlmKGZvcm0gJiYgdGhpcy5vbmNlKGZvcm0sIFwiYmluZC1kZWJvdW5jZVwiKSl7XG4gICAgICAgICAgZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsICgpID0+IHtcbiAgICAgICAgICAgIEFycmF5LmZyb20oKG5ldyBGb3JtRGF0YShmb3JtKSkuZW50cmllcygpLCAoW25hbWVdKSA9PiB7XG4gICAgICAgICAgICAgIGxldCBpbnB1dCA9IGZvcm0ucXVlcnlTZWxlY3RvcihgW25hbWU9XCIke25hbWV9XCJdYClcbiAgICAgICAgICAgICAgdGhpcy5pbmNDeWNsZShpbnB1dCwgREVCT1VOQ0VfVFJJR0dFUilcbiAgICAgICAgICAgICAgdGhpcy5kZWxldGVQcml2YXRlKGlucHV0LCBUSFJPVFRMRUQpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYodGhpcy5vbmNlKGVsLCBcImJpbmQtZGVib3VuY2VcIikpe1xuICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoXCJibHVyXCIsICgpID0+IHRoaXMudHJpZ2dlckN5Y2xlKGVsLCBERUJPVU5DRV9UUklHR0VSKSlcbiAgICAgICAgfVxuICAgIH1cbiAgfSxcblxuICB0cmlnZ2VyQ3ljbGUoZWwsIGtleSwgY3VycmVudEN5Y2xlKXtcbiAgICBsZXQgW2N5Y2xlLCB0cmlnZ2VyXSA9IHRoaXMucHJpdmF0ZShlbCwga2V5KVxuICAgIGlmKCFjdXJyZW50Q3ljbGUpeyBjdXJyZW50Q3ljbGUgPSBjeWNsZSB9XG4gICAgaWYoY3VycmVudEN5Y2xlID09PSBjeWNsZSl7XG4gICAgICB0aGlzLmluY0N5Y2xlKGVsLCBrZXkpXG4gICAgICB0cmlnZ2VyKClcbiAgICB9XG4gIH0sXG5cbiAgb25jZShlbCwga2V5KXtcbiAgICBpZih0aGlzLnByaXZhdGUoZWwsIGtleSkgPT09IHRydWUpeyByZXR1cm4gZmFsc2UgfVxuICAgIHRoaXMucHV0UHJpdmF0ZShlbCwga2V5LCB0cnVlKVxuICAgIHJldHVybiB0cnVlXG4gIH0sXG5cbiAgaW5jQ3ljbGUoZWwsIGtleSwgdHJpZ2dlciA9IGZ1bmN0aW9uICgpeyB9KXtcbiAgICBsZXQgW2N1cnJlbnRDeWNsZV0gPSB0aGlzLnByaXZhdGUoZWwsIGtleSkgfHwgWzAsIHRyaWdnZXJdXG4gICAgY3VycmVudEN5Y2xlKytcbiAgICB0aGlzLnB1dFByaXZhdGUoZWwsIGtleSwgW2N1cnJlbnRDeWNsZSwgdHJpZ2dlcl0pXG4gICAgcmV0dXJuIGN1cnJlbnRDeWNsZVxuICB9LFxuXG4gIGRpc2NhcmRFcnJvcihjb250YWluZXIsIGVsLCBwaHhGZWVkYmFja0Zvcil7XG4gICAgbGV0IGZpZWxkID0gZWwuZ2V0QXR0cmlidXRlICYmIGVsLmdldEF0dHJpYnV0ZShwaHhGZWVkYmFja0ZvcilcbiAgICAvLyBUT0RPOiBSZW1vdmUgaWQgbG9va3VwIGFmdGVyIHdlIHVwZGF0ZSBQaG9lbml4IHRvIHVzZSBpbnB1dF9uYW1lIGluc3RlYWQgb2YgaW5wdXRfaWRcbiAgICBsZXQgaW5wdXQgPSBmaWVsZCAmJiBjb250YWluZXIucXVlcnlTZWxlY3RvcihgW2lkPVwiJHtmaWVsZH1cIl0sIFtuYW1lPVwiJHtmaWVsZH1cIl0sIFtuYW1lPVwiJHtmaWVsZH1bXVwiXWApXG4gICAgaWYoIWlucHV0KXsgcmV0dXJuIH1cblxuICAgIGlmKCEodGhpcy5wcml2YXRlKGlucHV0LCBQSFhfSEFTX0ZPQ1VTRUQpIHx8IHRoaXMucHJpdmF0ZShpbnB1dCwgUEhYX0hBU19TVUJNSVRURUQpKSl7XG4gICAgICBlbC5jbGFzc0xpc3QuYWRkKFBIWF9OT19GRUVEQkFDS19DTEFTUylcbiAgICB9XG4gIH0sXG5cbiAgcmVzZXRGb3JtKGZvcm0sIHBoeEZlZWRiYWNrRm9yKXtcbiAgICBBcnJheS5mcm9tKGZvcm0uZWxlbWVudHMpLmZvckVhY2goaW5wdXQgPT4ge1xuICAgICAgbGV0IHF1ZXJ5ID0gYFske3BoeEZlZWRiYWNrRm9yfT1cIiR7aW5wdXQuaWR9XCJdLFxuICAgICAgICAgICAgICAgICAgIFske3BoeEZlZWRiYWNrRm9yfT1cIiR7aW5wdXQubmFtZX1cIl0sXG4gICAgICAgICAgICAgICAgICAgWyR7cGh4RmVlZGJhY2tGb3J9PVwiJHtpbnB1dC5uYW1lLnJlcGxhY2UoL1xcW1xcXSQvLCBcIlwiKX1cIl1gXG5cbiAgICAgIHRoaXMuZGVsZXRlUHJpdmF0ZShpbnB1dCwgUEhYX0hBU19GT0NVU0VEKVxuICAgICAgdGhpcy5kZWxldGVQcml2YXRlKGlucHV0LCBQSFhfSEFTX1NVQk1JVFRFRClcbiAgICAgIHRoaXMuYWxsKGRvY3VtZW50LCBxdWVyeSwgZmVlZGJhY2tFbCA9PiB7XG4gICAgICAgIGZlZWRiYWNrRWwuY2xhc3NMaXN0LmFkZChQSFhfTk9fRkVFREJBQ0tfQ0xBU1MpXG4gICAgICB9KVxuICAgIH0pXG4gIH0sXG5cbiAgc2hvd0Vycm9yKGlucHV0RWwsIHBoeEZlZWRiYWNrRm9yKXtcbiAgICBpZihpbnB1dEVsLmlkIHx8IGlucHV0RWwubmFtZSl7XG4gICAgICB0aGlzLmFsbChpbnB1dEVsLmZvcm0sIGBbJHtwaHhGZWVkYmFja0Zvcn09XCIke2lucHV0RWwuaWR9XCJdLCBbJHtwaHhGZWVkYmFja0Zvcn09XCIke2lucHV0RWwubmFtZX1cIl1gLCAoZWwpID0+IHtcbiAgICAgICAgdGhpcy5yZW1vdmVDbGFzcyhlbCwgUEhYX05PX0ZFRURCQUNLX0NMQVNTKVxuICAgICAgfSlcbiAgICB9XG4gIH0sXG5cbiAgaXNQaHhDaGlsZChub2RlKXtcbiAgICByZXR1cm4gbm9kZS5nZXRBdHRyaWJ1dGUgJiYgbm9kZS5nZXRBdHRyaWJ1dGUoUEhYX1BBUkVOVF9JRClcbiAgfSxcblxuICBpc1BoeFN0aWNreShub2RlKXtcbiAgICByZXR1cm4gbm9kZS5nZXRBdHRyaWJ1dGUgJiYgbm9kZS5nZXRBdHRyaWJ1dGUoUEhYX1NUSUNLWSkgIT09IG51bGxcbiAgfSxcblxuICBmaXJzdFBoeENoaWxkKGVsKXtcbiAgICByZXR1cm4gdGhpcy5pc1BoeENoaWxkKGVsKSA/IGVsIDogdGhpcy5hbGwoZWwsIGBbJHtQSFhfUEFSRU5UX0lEfV1gKVswXVxuICB9LFxuXG4gIGRpc3BhdGNoRXZlbnQodGFyZ2V0LCBuYW1lLCBvcHRzID0ge30pe1xuICAgIGxldCBidWJibGVzID0gb3B0cy5idWJibGVzID09PSB1bmRlZmluZWQgPyB0cnVlIDogISFvcHRzLmJ1YmJsZXNcbiAgICBsZXQgZXZlbnRPcHRzID0ge2J1YmJsZXM6IGJ1YmJsZXMsIGNhbmNlbGFibGU6IHRydWUsIGRldGFpbDogb3B0cy5kZXRhaWwgfHwge319XG4gICAgbGV0IGV2ZW50ID0gbmFtZSA9PT0gXCJjbGlja1wiID8gbmV3IE1vdXNlRXZlbnQoXCJjbGlja1wiLCBldmVudE9wdHMpIDogbmV3IEN1c3RvbUV2ZW50KG5hbWUsIGV2ZW50T3B0cylcbiAgICB0YXJnZXQuZGlzcGF0Y2hFdmVudChldmVudClcbiAgfSxcblxuICBjbG9uZU5vZGUobm9kZSwgaHRtbCl7XG4gICAgaWYodHlwZW9mIChodG1sKSA9PT0gXCJ1bmRlZmluZWRcIil7XG4gICAgICByZXR1cm4gbm9kZS5jbG9uZU5vZGUodHJ1ZSlcbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IGNsb25lZCA9IG5vZGUuY2xvbmVOb2RlKGZhbHNlKVxuICAgICAgY2xvbmVkLmlubmVySFRNTCA9IGh0bWxcbiAgICAgIHJldHVybiBjbG9uZWRcbiAgICB9XG4gIH0sXG5cbiAgbWVyZ2VBdHRycyh0YXJnZXQsIHNvdXJjZSwgb3B0cyA9IHt9KXtcbiAgICBsZXQgZXhjbHVkZSA9IG9wdHMuZXhjbHVkZSB8fCBbXVxuICAgIGxldCBpc0lnbm9yZWQgPSBvcHRzLmlzSWdub3JlZFxuICAgIGxldCBzb3VyY2VBdHRycyA9IHNvdXJjZS5hdHRyaWJ1dGVzXG4gICAgZm9yKGxldCBpID0gc291cmNlQXR0cnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pe1xuICAgICAgbGV0IG5hbWUgPSBzb3VyY2VBdHRyc1tpXS5uYW1lXG4gICAgICBpZihleGNsdWRlLmluZGV4T2YobmFtZSkgPCAwKXsgdGFyZ2V0LnNldEF0dHJpYnV0ZShuYW1lLCBzb3VyY2UuZ2V0QXR0cmlidXRlKG5hbWUpKSB9XG4gICAgfVxuXG4gICAgbGV0IHRhcmdldEF0dHJzID0gdGFyZ2V0LmF0dHJpYnV0ZXNcbiAgICBmb3IobGV0IGkgPSB0YXJnZXRBdHRycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSl7XG4gICAgICBsZXQgbmFtZSA9IHRhcmdldEF0dHJzW2ldLm5hbWVcbiAgICAgIGlmKGlzSWdub3JlZCl7XG4gICAgICAgIGlmKG5hbWUuc3RhcnRzV2l0aChcImRhdGEtXCIpICYmICFzb3VyY2UuaGFzQXR0cmlidXRlKG5hbWUpKXsgdGFyZ2V0LnJlbW92ZUF0dHJpYnV0ZShuYW1lKSB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZighc291cmNlLmhhc0F0dHJpYnV0ZShuYW1lKSl7IHRhcmdldC5yZW1vdmVBdHRyaWJ1dGUobmFtZSkgfVxuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICBtZXJnZUZvY3VzZWRJbnB1dCh0YXJnZXQsIHNvdXJjZSl7XG4gICAgLy8gc2tpcCBzZWxlY3RzIGJlY2F1c2UgRkYgd2lsbCByZXNldCBoaWdobGlnaHRlZCBpbmRleCBmb3IgYW55IHNldEF0dHJpYnV0ZVxuICAgIGlmKCEodGFyZ2V0IGluc3RhbmNlb2YgSFRNTFNlbGVjdEVsZW1lbnQpKXsgRE9NLm1lcmdlQXR0cnModGFyZ2V0LCBzb3VyY2UsIHtleGNsdWRlOiBbXCJ2YWx1ZVwiXX0pIH1cbiAgICBpZihzb3VyY2UucmVhZE9ubHkpe1xuICAgICAgdGFyZ2V0LnNldEF0dHJpYnV0ZShcInJlYWRvbmx5XCIsIHRydWUpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRhcmdldC5yZW1vdmVBdHRyaWJ1dGUoXCJyZWFkb25seVwiKVxuICAgIH1cbiAgfSxcblxuICBoYXNTZWxlY3Rpb25SYW5nZShlbCl7XG4gICAgcmV0dXJuIGVsLnNldFNlbGVjdGlvblJhbmdlICYmIChlbC50eXBlID09PSBcInRleHRcIiB8fCBlbC50eXBlID09PSBcInRleHRhcmVhXCIpXG4gIH0sXG5cbiAgcmVzdG9yZUZvY3VzKGZvY3VzZWQsIHNlbGVjdGlvblN0YXJ0LCBzZWxlY3Rpb25FbmQpe1xuICAgIGlmKCFET00uaXNUZXh0dWFsSW5wdXQoZm9jdXNlZCkpeyByZXR1cm4gfVxuICAgIGxldCB3YXNGb2N1c2VkID0gZm9jdXNlZC5tYXRjaGVzKFwiOmZvY3VzXCIpXG4gICAgaWYoZm9jdXNlZC5yZWFkT25seSl7IGZvY3VzZWQuYmx1cigpIH1cbiAgICBpZighd2FzRm9jdXNlZCl7IGZvY3VzZWQuZm9jdXMoKSB9XG4gICAgaWYodGhpcy5oYXNTZWxlY3Rpb25SYW5nZShmb2N1c2VkKSl7XG4gICAgICBmb2N1c2VkLnNldFNlbGVjdGlvblJhbmdlKHNlbGVjdGlvblN0YXJ0LCBzZWxlY3Rpb25FbmQpXG4gICAgfVxuICB9LFxuXG4gIGlzRm9ybUlucHV0KGVsKXsgcmV0dXJuIC9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhKSQvaS50ZXN0KGVsLnRhZ05hbWUpICYmIGVsLnR5cGUgIT09IFwiYnV0dG9uXCIgfSxcblxuICBzeW5jQXR0cnNUb1Byb3BzKGVsKXtcbiAgICBpZihlbCBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQgJiYgQ0hFQ0tBQkxFX0lOUFVUUy5pbmRleE9mKGVsLnR5cGUudG9Mb2NhbGVMb3dlckNhc2UoKSkgPj0gMCl7XG4gICAgICBlbC5jaGVja2VkID0gZWwuZ2V0QXR0cmlidXRlKFwiY2hlY2tlZFwiKSAhPT0gbnVsbFxuICAgIH1cbiAgfSxcblxuICBpc1RleHR1YWxJbnB1dChlbCl7IHJldHVybiBGT0NVU0FCTEVfSU5QVVRTLmluZGV4T2YoZWwudHlwZSkgPj0gMCB9LFxuXG4gIGlzTm93VHJpZ2dlckZvcm1FeHRlcm5hbChlbCwgcGh4VHJpZ2dlckV4dGVybmFsKXtcbiAgICByZXR1cm4gZWwuZ2V0QXR0cmlidXRlICYmIGVsLmdldEF0dHJpYnV0ZShwaHhUcmlnZ2VyRXh0ZXJuYWwpICE9PSBudWxsXG4gIH0sXG5cbiAgc3luY1BlbmRpbmdSZWYoZnJvbUVsLCB0b0VsLCBkaXNhYmxlV2l0aCl7XG4gICAgbGV0IHJlZiA9IGZyb21FbC5nZXRBdHRyaWJ1dGUoUEhYX1JFRilcbiAgICBpZihyZWYgPT09IG51bGwpeyByZXR1cm4gdHJ1ZSB9XG4gICAgbGV0IHJlZlNyYyA9IGZyb21FbC5nZXRBdHRyaWJ1dGUoUEhYX1JFRl9TUkMpXG5cbiAgICBpZihET00uaXNGb3JtSW5wdXQoZnJvbUVsKSB8fCBmcm9tRWwuZ2V0QXR0cmlidXRlKGRpc2FibGVXaXRoKSAhPT0gbnVsbCl7XG4gICAgICBpZihET00uaXNVcGxvYWRJbnB1dChmcm9tRWwpKXsgRE9NLm1lcmdlQXR0cnMoZnJvbUVsLCB0b0VsLCB7aXNJZ25vcmVkOiB0cnVlfSkgfVxuICAgICAgRE9NLnB1dFByaXZhdGUoZnJvbUVsLCBQSFhfUkVGLCB0b0VsKVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfSBlbHNlIHtcbiAgICAgIFBIWF9FVkVOVF9DTEFTU0VTLmZvckVhY2goY2xhc3NOYW1lID0+IHtcbiAgICAgICAgZnJvbUVsLmNsYXNzTGlzdC5jb250YWlucyhjbGFzc05hbWUpICYmIHRvRWwuY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpXG4gICAgICB9KVxuICAgICAgdG9FbC5zZXRBdHRyaWJ1dGUoUEhYX1JFRiwgcmVmKVxuICAgICAgdG9FbC5zZXRBdHRyaWJ1dGUoUEhYX1JFRl9TUkMsIHJlZlNyYylcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICB9LFxuXG4gIGNsZWFuQ2hpbGROb2Rlcyhjb250YWluZXIsIHBoeFVwZGF0ZSl7XG4gICAgaWYoRE9NLmlzUGh4VXBkYXRlKGNvbnRhaW5lciwgcGh4VXBkYXRlLCBbXCJhcHBlbmRcIiwgXCJwcmVwZW5kXCJdKSl7XG4gICAgICBsZXQgdG9SZW1vdmUgPSBbXVxuICAgICAgY29udGFpbmVyLmNoaWxkTm9kZXMuZm9yRWFjaChjaGlsZE5vZGUgPT4ge1xuICAgICAgICBpZighY2hpbGROb2RlLmlkKXtcbiAgICAgICAgICAvLyBTa2lwIHdhcm5pbmcgaWYgaXQncyBhbiBlbXB0eSB0ZXh0IG5vZGUgKGUuZy4gYSBuZXctbGluZSlcbiAgICAgICAgICBsZXQgaXNFbXB0eVRleHROb2RlID0gY2hpbGROb2RlLm5vZGVUeXBlID09PSBOb2RlLlRFWFRfTk9ERSAmJiBjaGlsZE5vZGUubm9kZVZhbHVlLnRyaW0oKSA9PT0gXCJcIlxuICAgICAgICAgIGlmKCFpc0VtcHR5VGV4dE5vZGUpe1xuICAgICAgICAgICAgbG9nRXJyb3IoXCJvbmx5IEhUTUwgZWxlbWVudCB0YWdzIHdpdGggYW4gaWQgYXJlIGFsbG93ZWQgaW5zaWRlIGNvbnRhaW5lcnMgd2l0aCBwaHgtdXBkYXRlLlxcblxcblwiICtcbiAgICAgICAgICAgICAgYHJlbW92aW5nIGlsbGVnYWwgbm9kZTogXCIkeyhjaGlsZE5vZGUub3V0ZXJIVE1MIHx8IGNoaWxkTm9kZS5ub2RlVmFsdWUpLnRyaW0oKX1cIlxcblxcbmApXG4gICAgICAgICAgfVxuICAgICAgICAgIHRvUmVtb3ZlLnB1c2goY2hpbGROb2RlKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgdG9SZW1vdmUuZm9yRWFjaChjaGlsZE5vZGUgPT4gY2hpbGROb2RlLnJlbW92ZSgpKVxuICAgIH1cbiAgfSxcblxuICByZXBsYWNlUm9vdENvbnRhaW5lcihjb250YWluZXIsIHRhZ05hbWUsIGF0dHJzKXtcbiAgICBsZXQgcmV0YWluZWRBdHRycyA9IG5ldyBTZXQoW1wiaWRcIiwgUEhYX1NFU1NJT04sIFBIWF9TVEFUSUMsIFBIWF9NQUlOLCBQSFhfUk9PVF9JRF0pXG4gICAgaWYoY29udGFpbmVyLnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gdGFnTmFtZS50b0xvd2VyQ2FzZSgpKXtcbiAgICAgIEFycmF5LmZyb20oY29udGFpbmVyLmF0dHJpYnV0ZXMpXG4gICAgICAgIC5maWx0ZXIoYXR0ciA9PiAhcmV0YWluZWRBdHRycy5oYXMoYXR0ci5uYW1lLnRvTG93ZXJDYXNlKCkpKVxuICAgICAgICAuZm9yRWFjaChhdHRyID0+IGNvbnRhaW5lci5yZW1vdmVBdHRyaWJ1dGUoYXR0ci5uYW1lKSlcblxuICAgICAgT2JqZWN0LmtleXMoYXR0cnMpXG4gICAgICAgIC5maWx0ZXIobmFtZSA9PiAhcmV0YWluZWRBdHRycy5oYXMobmFtZS50b0xvd2VyQ2FzZSgpKSlcbiAgICAgICAgLmZvckVhY2goYXR0ciA9PiBjb250YWluZXIuc2V0QXR0cmlidXRlKGF0dHIsIGF0dHJzW2F0dHJdKSlcblxuICAgICAgcmV0dXJuIGNvbnRhaW5lclxuXG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCBuZXdDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZ05hbWUpXG4gICAgICBPYmplY3Qua2V5cyhhdHRycykuZm9yRWFjaChhdHRyID0+IG5ld0NvbnRhaW5lci5zZXRBdHRyaWJ1dGUoYXR0ciwgYXR0cnNbYXR0cl0pKVxuICAgICAgcmV0YWluZWRBdHRycy5mb3JFYWNoKGF0dHIgPT4gbmV3Q29udGFpbmVyLnNldEF0dHJpYnV0ZShhdHRyLCBjb250YWluZXIuZ2V0QXR0cmlidXRlKGF0dHIpKSlcbiAgICAgIG5ld0NvbnRhaW5lci5pbm5lckhUTUwgPSBjb250YWluZXIuaW5uZXJIVE1MXG4gICAgICBjb250YWluZXIucmVwbGFjZVdpdGgobmV3Q29udGFpbmVyKVxuICAgICAgcmV0dXJuIG5ld0NvbnRhaW5lclxuICAgIH1cbiAgfSxcblxuICBnZXRTdGlja3koZWwsIG5hbWUsIGRlZmF1bHRWYWwpe1xuICAgIGxldCBvcCA9IChET00ucHJpdmF0ZShlbCwgXCJzdGlja3lcIikgfHwgW10pLmZpbmQoKFtleGlzdGluZ05hbWUsIF0pID0+IG5hbWUgPT09IGV4aXN0aW5nTmFtZSlcbiAgICBpZihvcCl7XG4gICAgICBsZXQgW19uYW1lLCBfb3AsIHN0YXNoZWRSZXN1bHRdID0gb3BcbiAgICAgIHJldHVybiBzdGFzaGVkUmVzdWx0XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0eXBlb2YoZGVmYXVsdFZhbCkgPT09IFwiZnVuY3Rpb25cIiA/IGRlZmF1bHRWYWwoKSA6IGRlZmF1bHRWYWxcbiAgICB9XG4gIH0sXG5cbiAgZGVsZXRlU3RpY2t5KGVsLCBuYW1lKXtcbiAgICB0aGlzLnVwZGF0ZVByaXZhdGUoZWwsIFwic3RpY2t5XCIsIFtdLCBvcHMgPT4ge1xuICAgICAgcmV0dXJuIG9wcy5maWx0ZXIoKFtleGlzdGluZ05hbWUsIF9dKSA9PiBleGlzdGluZ05hbWUgIT09IG5hbWUpXG4gICAgfSlcbiAgfSxcblxuICBwdXRTdGlja3koZWwsIG5hbWUsIG9wKXtcbiAgICBsZXQgc3Rhc2hlZFJlc3VsdCA9IG9wKGVsKVxuICAgIHRoaXMudXBkYXRlUHJpdmF0ZShlbCwgXCJzdGlja3lcIiwgW10sIG9wcyA9PiB7XG4gICAgICBsZXQgZXhpc3RpbmdJbmRleCA9IG9wcy5maW5kSW5kZXgoKFtleGlzdGluZ05hbWUsIF0pID0+IG5hbWUgPT09IGV4aXN0aW5nTmFtZSlcbiAgICAgIGlmKGV4aXN0aW5nSW5kZXggPj0gMCl7XG4gICAgICAgIG9wc1tleGlzdGluZ0luZGV4XSA9IFtuYW1lLCBvcCwgc3Rhc2hlZFJlc3VsdF1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG9wcy5wdXNoKFtuYW1lLCBvcCwgc3Rhc2hlZFJlc3VsdF0pXG4gICAgICB9XG4gICAgICByZXR1cm4gb3BzXG4gICAgfSlcbiAgfSxcblxuICBhcHBseVN0aWNreU9wZXJhdGlvbnMoZWwpe1xuICAgIGxldCBvcHMgPSBET00ucHJpdmF0ZShlbCwgXCJzdGlja3lcIilcbiAgICBpZighb3BzKXsgcmV0dXJuIH1cblxuICAgIG9wcy5mb3JFYWNoKChbbmFtZSwgb3AsIF9zdGFzaGVkXSkgPT4gdGhpcy5wdXRTdGlja3koZWwsIG5hbWUsIG9wKSlcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBET00iLCAiaW1wb3J0IHtcbiAgUEhYX0FDVElWRV9FTlRSWV9SRUZTLFxuICBQSFhfTElWRV9GSUxFX1VQREFURUQsXG4gIFBIWF9QUkVGTElHSFRFRF9SRUZTXG59IGZyb20gXCIuL2NvbnN0YW50c1wiXG5cbmltcG9ydCB7XG4gIGNoYW5uZWxVcGxvYWRlcixcbiAgbG9nRXJyb3Jcbn0gZnJvbSBcIi4vdXRpbHNcIlxuXG5pbXBvcnQgTGl2ZVVwbG9hZGVyIGZyb20gXCIuL2xpdmVfdXBsb2FkZXJcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBVcGxvYWRFbnRyeSB7XG4gIHN0YXRpYyBpc0FjdGl2ZShmaWxlRWwsIGZpbGUpe1xuICAgIGxldCBpc05ldyA9IGZpbGUuX3BoeFJlZiA9PT0gdW5kZWZpbmVkXG4gICAgbGV0IGFjdGl2ZVJlZnMgPSBmaWxlRWwuZ2V0QXR0cmlidXRlKFBIWF9BQ1RJVkVfRU5UUllfUkVGUykuc3BsaXQoXCIsXCIpXG4gICAgbGV0IGlzQWN0aXZlID0gYWN0aXZlUmVmcy5pbmRleE9mKExpdmVVcGxvYWRlci5nZW5GaWxlUmVmKGZpbGUpKSA+PSAwXG4gICAgcmV0dXJuIGZpbGUuc2l6ZSA+IDAgJiYgKGlzTmV3IHx8IGlzQWN0aXZlKVxuICB9XG5cbiAgc3RhdGljIGlzUHJlZmxpZ2h0ZWQoZmlsZUVsLCBmaWxlKXtcbiAgICBsZXQgcHJlZmxpZ2h0ZWRSZWZzID0gZmlsZUVsLmdldEF0dHJpYnV0ZShQSFhfUFJFRkxJR0hURURfUkVGUykuc3BsaXQoXCIsXCIpXG4gICAgbGV0IGlzUHJlZmxpZ2h0ZWQgPSBwcmVmbGlnaHRlZFJlZnMuaW5kZXhPZihMaXZlVXBsb2FkZXIuZ2VuRmlsZVJlZihmaWxlKSkgPj0gMFxuICAgIHJldHVybiBpc1ByZWZsaWdodGVkICYmIHRoaXMuaXNBY3RpdmUoZmlsZUVsLCBmaWxlKVxuICB9XG5cbiAgY29uc3RydWN0b3IoZmlsZUVsLCBmaWxlLCB2aWV3KXtcbiAgICB0aGlzLnJlZiA9IExpdmVVcGxvYWRlci5nZW5GaWxlUmVmKGZpbGUpXG4gICAgdGhpcy5maWxlRWwgPSBmaWxlRWxcbiAgICB0aGlzLmZpbGUgPSBmaWxlXG4gICAgdGhpcy52aWV3ID0gdmlld1xuICAgIHRoaXMubWV0YSA9IG51bGxcbiAgICB0aGlzLl9pc0NhbmNlbGxlZCA9IGZhbHNlXG4gICAgdGhpcy5faXNEb25lID0gZmFsc2VcbiAgICB0aGlzLl9wcm9ncmVzcyA9IDBcbiAgICB0aGlzLl9sYXN0UHJvZ3Jlc3NTZW50ID0gLTFcbiAgICB0aGlzLl9vbkRvbmUgPSBmdW5jdGlvbiAoKXsgfVxuICAgIHRoaXMuX29uRWxVcGRhdGVkID0gdGhpcy5vbkVsVXBkYXRlZC5iaW5kKHRoaXMpXG4gICAgdGhpcy5maWxlRWwuYWRkRXZlbnRMaXN0ZW5lcihQSFhfTElWRV9GSUxFX1VQREFURUQsIHRoaXMuX29uRWxVcGRhdGVkKVxuICB9XG5cbiAgbWV0YWRhdGEoKXsgcmV0dXJuIHRoaXMubWV0YSB9XG5cbiAgcHJvZ3Jlc3MocHJvZ3Jlc3Mpe1xuICAgIHRoaXMuX3Byb2dyZXNzID0gTWF0aC5mbG9vcihwcm9ncmVzcylcbiAgICBpZih0aGlzLl9wcm9ncmVzcyA+IHRoaXMuX2xhc3RQcm9ncmVzc1NlbnQpe1xuICAgICAgaWYodGhpcy5fcHJvZ3Jlc3MgPj0gMTAwKXtcbiAgICAgICAgdGhpcy5fcHJvZ3Jlc3MgPSAxMDBcbiAgICAgICAgdGhpcy5fbGFzdFByb2dyZXNzU2VudCA9IDEwMFxuICAgICAgICB0aGlzLl9pc0RvbmUgPSB0cnVlXG4gICAgICAgIHRoaXMudmlldy5wdXNoRmlsZVByb2dyZXNzKHRoaXMuZmlsZUVsLCB0aGlzLnJlZiwgMTAwLCAoKSA9PiB7XG4gICAgICAgICAgTGl2ZVVwbG9hZGVyLnVudHJhY2tGaWxlKHRoaXMuZmlsZUVsLCB0aGlzLmZpbGUpXG4gICAgICAgICAgdGhpcy5fb25Eb25lKClcbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX2xhc3RQcm9ncmVzc1NlbnQgPSB0aGlzLl9wcm9ncmVzc1xuICAgICAgICB0aGlzLnZpZXcucHVzaEZpbGVQcm9ncmVzcyh0aGlzLmZpbGVFbCwgdGhpcy5yZWYsIHRoaXMuX3Byb2dyZXNzKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGNhbmNlbCgpe1xuICAgIHRoaXMuX2lzQ2FuY2VsbGVkID0gdHJ1ZVxuICAgIHRoaXMuX2lzRG9uZSA9IHRydWVcbiAgICB0aGlzLl9vbkRvbmUoKVxuICB9XG5cbiAgaXNEb25lKCl7IHJldHVybiB0aGlzLl9pc0RvbmUgfVxuXG4gIGVycm9yKHJlYXNvbiA9IFwiZmFpbGVkXCIpe1xuICAgIHRoaXMuZmlsZUVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoUEhYX0xJVkVfRklMRV9VUERBVEVELCB0aGlzLl9vbkVsVXBkYXRlZClcbiAgICB0aGlzLnZpZXcucHVzaEZpbGVQcm9ncmVzcyh0aGlzLmZpbGVFbCwgdGhpcy5yZWYsIHtlcnJvcjogcmVhc29ufSlcbiAgICBMaXZlVXBsb2FkZXIuY2xlYXJGaWxlcyh0aGlzLmZpbGVFbClcbiAgfVxuXG4gIC8vcHJpdmF0ZVxuXG4gIG9uRG9uZShjYWxsYmFjayl7XG4gICAgdGhpcy5fb25Eb25lID0gKCkgPT4ge1xuICAgICAgdGhpcy5maWxlRWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihQSFhfTElWRV9GSUxFX1VQREFURUQsIHRoaXMuX29uRWxVcGRhdGVkKVxuICAgICAgY2FsbGJhY2soKVxuICAgIH1cbiAgfVxuXG4gIG9uRWxVcGRhdGVkKCl7XG4gICAgbGV0IGFjdGl2ZVJlZnMgPSB0aGlzLmZpbGVFbC5nZXRBdHRyaWJ1dGUoUEhYX0FDVElWRV9FTlRSWV9SRUZTKS5zcGxpdChcIixcIilcbiAgICBpZihhY3RpdmVSZWZzLmluZGV4T2YodGhpcy5yZWYpID09PSAtMSl7IHRoaXMuY2FuY2VsKCkgfVxuICB9XG5cbiAgdG9QcmVmbGlnaHRQYXlsb2FkKCl7XG4gICAgcmV0dXJuIHtcbiAgICAgIGxhc3RfbW9kaWZpZWQ6IHRoaXMuZmlsZS5sYXN0TW9kaWZpZWQsXG4gICAgICBuYW1lOiB0aGlzLmZpbGUubmFtZSxcbiAgICAgIHJlbGF0aXZlX3BhdGg6IHRoaXMuZmlsZS53ZWJraXRSZWxhdGl2ZVBhdGgsXG4gICAgICBzaXplOiB0aGlzLmZpbGUuc2l6ZSxcbiAgICAgIHR5cGU6IHRoaXMuZmlsZS50eXBlLFxuICAgICAgcmVmOiB0aGlzLnJlZlxuICAgIH1cbiAgfVxuXG4gIHVwbG9hZGVyKHVwbG9hZGVycyl7XG4gICAgaWYodGhpcy5tZXRhLnVwbG9hZGVyKXtcbiAgICAgIGxldCBjYWxsYmFjayA9IHVwbG9hZGVyc1t0aGlzLm1ldGEudXBsb2FkZXJdIHx8IGxvZ0Vycm9yKGBubyB1cGxvYWRlciBjb25maWd1cmVkIGZvciAke3RoaXMubWV0YS51cGxvYWRlcn1gKVxuICAgICAgcmV0dXJuIHtuYW1lOiB0aGlzLm1ldGEudXBsb2FkZXIsIGNhbGxiYWNrOiBjYWxsYmFja31cbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHtuYW1lOiBcImNoYW5uZWxcIiwgY2FsbGJhY2s6IGNoYW5uZWxVcGxvYWRlcn1cbiAgICB9XG4gIH1cblxuICB6aXBQb3N0RmxpZ2h0KHJlc3Ape1xuICAgIHRoaXMubWV0YSA9IHJlc3AuZW50cmllc1t0aGlzLnJlZl1cbiAgICBpZighdGhpcy5tZXRhKXsgbG9nRXJyb3IoYG5vIHByZWZsaWdodCB1cGxvYWQgcmVzcG9uc2UgcmV0dXJuZWQgd2l0aCByZWYgJHt0aGlzLnJlZn1gLCB7aW5wdXQ6IHRoaXMuZmlsZUVsLCByZXNwb25zZTogcmVzcH0pIH1cbiAgfVxufVxuIiwgImltcG9ydCB7XG4gIFBIWF9ET05FX1JFRlMsXG4gIFBIWF9QUkVGTElHSFRFRF9SRUZTLFxuICBQSFhfVVBMT0FEX1JFRlxufSBmcm9tIFwiLi9jb25zdGFudHNcIlxuXG5pbXBvcnQge1xufSBmcm9tIFwiLi91dGlsc1wiXG5cbmltcG9ydCBET00gZnJvbSBcIi4vZG9tXCJcbmltcG9ydCBVcGxvYWRFbnRyeSBmcm9tIFwiLi91cGxvYWRfZW50cnlcIlxuXG5sZXQgbGl2ZVVwbG9hZGVyRmlsZVJlZiA9IDBcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTGl2ZVVwbG9hZGVyIHtcbiAgc3RhdGljIGdlbkZpbGVSZWYoZmlsZSl7XG4gICAgbGV0IHJlZiA9IGZpbGUuX3BoeFJlZlxuICAgIGlmKHJlZiAhPT0gdW5kZWZpbmVkKXtcbiAgICAgIHJldHVybiByZWZcbiAgICB9IGVsc2Uge1xuICAgICAgZmlsZS5fcGh4UmVmID0gKGxpdmVVcGxvYWRlckZpbGVSZWYrKykudG9TdHJpbmcoKVxuICAgICAgcmV0dXJuIGZpbGUuX3BoeFJlZlxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBnZXRFbnRyeURhdGFVUkwoaW5wdXRFbCwgcmVmLCBjYWxsYmFjayl7XG4gICAgbGV0IGZpbGUgPSB0aGlzLmFjdGl2ZUZpbGVzKGlucHV0RWwpLmZpbmQoZmlsZSA9PiB0aGlzLmdlbkZpbGVSZWYoZmlsZSkgPT09IHJlZilcbiAgICBjYWxsYmFjayhVUkwuY3JlYXRlT2JqZWN0VVJMKGZpbGUpKVxuICB9XG5cbiAgc3RhdGljIGhhc1VwbG9hZHNJblByb2dyZXNzKGZvcm1FbCl7XG4gICAgbGV0IGFjdGl2ZSA9IDBcbiAgICBET00uZmluZFVwbG9hZElucHV0cyhmb3JtRWwpLmZvckVhY2goaW5wdXQgPT4ge1xuICAgICAgaWYoaW5wdXQuZ2V0QXR0cmlidXRlKFBIWF9QUkVGTElHSFRFRF9SRUZTKSAhPT0gaW5wdXQuZ2V0QXR0cmlidXRlKFBIWF9ET05FX1JFRlMpKXtcbiAgICAgICAgYWN0aXZlKytcbiAgICAgIH1cbiAgICB9KVxuICAgIHJldHVybiBhY3RpdmUgPiAwXG4gIH1cblxuICBzdGF0aWMgc2VyaWFsaXplVXBsb2FkcyhpbnB1dEVsKXtcbiAgICBsZXQgZmlsZXMgPSB0aGlzLmFjdGl2ZUZpbGVzKGlucHV0RWwpXG4gICAgbGV0IGZpbGVEYXRhID0ge31cbiAgICBmaWxlcy5mb3JFYWNoKGZpbGUgPT4ge1xuICAgICAgbGV0IGVudHJ5ID0ge3BhdGg6IGlucHV0RWwubmFtZX1cbiAgICAgIGxldCB1cGxvYWRSZWYgPSBpbnB1dEVsLmdldEF0dHJpYnV0ZShQSFhfVVBMT0FEX1JFRilcbiAgICAgIGZpbGVEYXRhW3VwbG9hZFJlZl0gPSBmaWxlRGF0YVt1cGxvYWRSZWZdIHx8IFtdXG4gICAgICBlbnRyeS5yZWYgPSB0aGlzLmdlbkZpbGVSZWYoZmlsZSlcbiAgICAgIGVudHJ5Lmxhc3RfbW9kaWZpZWQgPSBmaWxlLmxhc3RNb2RpZmllZFxuICAgICAgZW50cnkubmFtZSA9IGZpbGUubmFtZSB8fCBlbnRyeS5yZWZcbiAgICAgIGVudHJ5LnJlbGF0aXZlX3BhdGggPSBmaWxlLndlYmtpdFJlbGF0aXZlUGF0aFxuICAgICAgZW50cnkudHlwZSA9IGZpbGUudHlwZVxuICAgICAgZW50cnkuc2l6ZSA9IGZpbGUuc2l6ZVxuICAgICAgZmlsZURhdGFbdXBsb2FkUmVmXS5wdXNoKGVudHJ5KVxuICAgIH0pXG4gICAgcmV0dXJuIGZpbGVEYXRhXG4gIH1cblxuICBzdGF0aWMgY2xlYXJGaWxlcyhpbnB1dEVsKXtcbiAgICBpbnB1dEVsLnZhbHVlID0gbnVsbFxuICAgIGlucHV0RWwucmVtb3ZlQXR0cmlidXRlKFBIWF9VUExPQURfUkVGKVxuICAgIERPTS5wdXRQcml2YXRlKGlucHV0RWwsIFwiZmlsZXNcIiwgW10pXG4gIH1cblxuICBzdGF0aWMgdW50cmFja0ZpbGUoaW5wdXRFbCwgZmlsZSl7XG4gICAgRE9NLnB1dFByaXZhdGUoaW5wdXRFbCwgXCJmaWxlc1wiLCBET00ucHJpdmF0ZShpbnB1dEVsLCBcImZpbGVzXCIpLmZpbHRlcihmID0+ICFPYmplY3QuaXMoZiwgZmlsZSkpKVxuICB9XG5cbiAgc3RhdGljIHRyYWNrRmlsZXMoaW5wdXRFbCwgZmlsZXMsIGRhdGFUcmFuc2Zlcil7XG4gICAgaWYoaW5wdXRFbC5nZXRBdHRyaWJ1dGUoXCJtdWx0aXBsZVwiKSAhPT0gbnVsbCl7XG4gICAgICBsZXQgbmV3RmlsZXMgPSBmaWxlcy5maWx0ZXIoZmlsZSA9PiAhdGhpcy5hY3RpdmVGaWxlcyhpbnB1dEVsKS5maW5kKGYgPT4gT2JqZWN0LmlzKGYsIGZpbGUpKSlcbiAgICAgIERPTS5wdXRQcml2YXRlKGlucHV0RWwsIFwiZmlsZXNcIiwgdGhpcy5hY3RpdmVGaWxlcyhpbnB1dEVsKS5jb25jYXQobmV3RmlsZXMpKVxuICAgICAgaW5wdXRFbC52YWx1ZSA9IG51bGxcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gUmVzZXQgaW5wdXRFbCBmaWxlcyB0byBhbGlnbiBvdXRwdXQgd2l0aCBwcm9ncmFtbWF0aWMgY2hhbmdlcyAoaS5lLiBkcmFnIGFuZCBkcm9wKVxuICAgICAgaWYoZGF0YVRyYW5zZmVyICYmIGRhdGFUcmFuc2Zlci5maWxlcy5sZW5ndGggPiAwKXsgaW5wdXRFbC5maWxlcyA9IGRhdGFUcmFuc2Zlci5maWxlcyB9XG4gICAgICBET00ucHV0UHJpdmF0ZShpbnB1dEVsLCBcImZpbGVzXCIsIGZpbGVzKVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhY3RpdmVGaWxlSW5wdXRzKGZvcm1FbCl7XG4gICAgbGV0IGZpbGVJbnB1dHMgPSBET00uZmluZFVwbG9hZElucHV0cyhmb3JtRWwpXG4gICAgcmV0dXJuIEFycmF5LmZyb20oZmlsZUlucHV0cykuZmlsdGVyKGVsID0+IGVsLmZpbGVzICYmIHRoaXMuYWN0aXZlRmlsZXMoZWwpLmxlbmd0aCA+IDApXG4gIH1cblxuICBzdGF0aWMgYWN0aXZlRmlsZXMoaW5wdXQpe1xuICAgIHJldHVybiAoRE9NLnByaXZhdGUoaW5wdXQsIFwiZmlsZXNcIikgfHwgW10pLmZpbHRlcihmID0+IFVwbG9hZEVudHJ5LmlzQWN0aXZlKGlucHV0LCBmKSlcbiAgfVxuXG4gIHN0YXRpYyBpbnB1dHNBd2FpdGluZ1ByZWZsaWdodChmb3JtRWwpe1xuICAgIGxldCBmaWxlSW5wdXRzID0gRE9NLmZpbmRVcGxvYWRJbnB1dHMoZm9ybUVsKVxuICAgIHJldHVybiBBcnJheS5mcm9tKGZpbGVJbnB1dHMpLmZpbHRlcihpbnB1dCA9PiB0aGlzLmZpbGVzQXdhaXRpbmdQcmVmbGlnaHQoaW5wdXQpLmxlbmd0aCA+IDApXG4gIH1cblxuICBzdGF0aWMgZmlsZXNBd2FpdGluZ1ByZWZsaWdodChpbnB1dCl7XG4gICAgcmV0dXJuIHRoaXMuYWN0aXZlRmlsZXMoaW5wdXQpLmZpbHRlcihmID0+ICFVcGxvYWRFbnRyeS5pc1ByZWZsaWdodGVkKGlucHV0LCBmKSlcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKGlucHV0RWwsIHZpZXcsIG9uQ29tcGxldGUpe1xuICAgIHRoaXMudmlldyA9IHZpZXdcbiAgICB0aGlzLm9uQ29tcGxldGUgPSBvbkNvbXBsZXRlXG4gICAgdGhpcy5fZW50cmllcyA9XG4gICAgICBBcnJheS5mcm9tKExpdmVVcGxvYWRlci5maWxlc0F3YWl0aW5nUHJlZmxpZ2h0KGlucHV0RWwpIHx8IFtdKVxuICAgICAgICAubWFwKGZpbGUgPT4gbmV3IFVwbG9hZEVudHJ5KGlucHV0RWwsIGZpbGUsIHZpZXcpKVxuXG4gICAgdGhpcy5udW1FbnRyaWVzSW5Qcm9ncmVzcyA9IHRoaXMuX2VudHJpZXMubGVuZ3RoXG4gIH1cblxuICBlbnRyaWVzKCl7IHJldHVybiB0aGlzLl9lbnRyaWVzIH1cblxuICBpbml0QWRhcHRlclVwbG9hZChyZXNwLCBvbkVycm9yLCBsaXZlU29ja2V0KXtcbiAgICB0aGlzLl9lbnRyaWVzID1cbiAgICAgIHRoaXMuX2VudHJpZXMubWFwKGVudHJ5ID0+IHtcbiAgICAgICAgZW50cnkuemlwUG9zdEZsaWdodChyZXNwKVxuICAgICAgICBlbnRyeS5vbkRvbmUoKCkgPT4ge1xuICAgICAgICAgIHRoaXMubnVtRW50cmllc0luUHJvZ3Jlc3MtLVxuICAgICAgICAgIGlmKHRoaXMubnVtRW50cmllc0luUHJvZ3Jlc3MgPT09IDApeyB0aGlzLm9uQ29tcGxldGUoKSB9XG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiBlbnRyeVxuICAgICAgfSlcblxuICAgIGxldCBncm91cGVkRW50cmllcyA9IHRoaXMuX2VudHJpZXMucmVkdWNlKChhY2MsIGVudHJ5KSA9PiB7XG4gICAgICBsZXQge25hbWUsIGNhbGxiYWNrfSA9IGVudHJ5LnVwbG9hZGVyKGxpdmVTb2NrZXQudXBsb2FkZXJzKVxuICAgICAgYWNjW25hbWVdID0gYWNjW25hbWVdIHx8IHtjYWxsYmFjazogY2FsbGJhY2ssIGVudHJpZXM6IFtdfVxuICAgICAgYWNjW25hbWVdLmVudHJpZXMucHVzaChlbnRyeSlcbiAgICAgIHJldHVybiBhY2NcbiAgICB9LCB7fSlcblxuICAgIGZvcihsZXQgbmFtZSBpbiBncm91cGVkRW50cmllcyl7XG4gICAgICBsZXQge2NhbGxiYWNrLCBlbnRyaWVzfSA9IGdyb3VwZWRFbnRyaWVzW25hbWVdXG4gICAgICBjYWxsYmFjayhlbnRyaWVzLCBvbkVycm9yLCByZXNwLCBsaXZlU29ja2V0KVxuICAgIH1cbiAgfVxufVxuIiwgImxldCBBUklBID0ge1xuICBmb2N1c01haW4oKXtcbiAgICBsZXQgdGFyZ2V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIm1haW4gaDEsIG1haW4sIGgxXCIpXG4gICAgaWYodGFyZ2V0KXtcbiAgICAgIGxldCBvcmlnVGFiSW5kZXggPSB0YXJnZXQudGFiSW5kZXhcbiAgICAgIHRhcmdldC50YWJJbmRleCA9IC0xXG4gICAgICB0YXJnZXQuZm9jdXMoKVxuICAgICAgdGFyZ2V0LnRhYkluZGV4ID0gb3JpZ1RhYkluZGV4XG4gICAgfVxuICB9LFxuXG4gIGFueU9mKGluc3RhbmNlLCBjbGFzc2VzKXsgcmV0dXJuIGNsYXNzZXMuZmluZChuYW1lID0+IGluc3RhbmNlIGluc3RhbmNlb2YgbmFtZSkgfSxcblxuICBpc0ZvY3VzYWJsZShlbCwgaW50ZXJhY3RpdmVPbmx5KXtcbiAgICByZXR1cm4oXG4gICAgICAoZWwgaW5zdGFuY2VvZiBIVE1MQW5jaG9yRWxlbWVudCAmJiBlbC5yZWwgIT09IFwiaWdub3JlXCIpIHx8XG4gICAgICAoZWwgaW5zdGFuY2VvZiBIVE1MQXJlYUVsZW1lbnQgJiYgZWwuaHJlZiAhPT0gdW5kZWZpbmVkKSB8fFxuICAgICAgKCFlbC5kaXNhYmxlZCAmJiAodGhpcy5hbnlPZihlbCwgW0hUTUxJbnB1dEVsZW1lbnQsIEhUTUxTZWxlY3RFbGVtZW50LCBIVE1MVGV4dEFyZWFFbGVtZW50LCBIVE1MQnV0dG9uRWxlbWVudF0pKSkgfHxcbiAgICAgIChlbCBpbnN0YW5jZW9mIEhUTUxJRnJhbWVFbGVtZW50KSB8fFxuICAgICAgKGVsLnRhYkluZGV4ID4gMCB8fCAoIWludGVyYWN0aXZlT25seSAmJiBlbC50YWJJbmRleCA9PT0gMCAmJiBlbC5nZXRBdHRyaWJ1dGUoXCJ0YWJpbmRleFwiKSAhPT0gbnVsbCAmJiBlbC5nZXRBdHRyaWJ1dGUoXCJhcmlhLWhpZGRlblwiKSAhPT0gXCJ0cnVlXCIpKVxuICAgIClcbiAgfSxcblxuICBhdHRlbXB0Rm9jdXMoZWwsIGludGVyYWN0aXZlT25seSl7XG4gICAgaWYodGhpcy5pc0ZvY3VzYWJsZShlbCwgaW50ZXJhY3RpdmVPbmx5KSl7IHRyeXsgZWwuZm9jdXMoKSB9IGNhdGNoKGUpe30gfVxuICAgIHJldHVybiAhIWRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgJiYgZG9jdW1lbnQuYWN0aXZlRWxlbWVudC5pc1NhbWVOb2RlKGVsKVxuICB9LFxuXG4gIGZvY3VzRmlyc3RJbnRlcmFjdGl2ZShlbCl7XG4gICAgbGV0IGNoaWxkID0gZWwuZmlyc3RFbGVtZW50Q2hpbGRcbiAgICB3aGlsZShjaGlsZCl7XG4gICAgICBpZih0aGlzLmF0dGVtcHRGb2N1cyhjaGlsZCwgdHJ1ZSkgfHwgdGhpcy5mb2N1c0ZpcnN0SW50ZXJhY3RpdmUoY2hpbGQsIHRydWUpKXtcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgIH1cbiAgICAgIGNoaWxkID0gY2hpbGQubmV4dEVsZW1lbnRTaWJsaW5nXG4gICAgfVxuICB9LFxuXG4gIGZvY3VzRmlyc3QoZWwpe1xuICAgIGxldCBjaGlsZCA9IGVsLmZpcnN0RWxlbWVudENoaWxkXG4gICAgd2hpbGUoY2hpbGQpe1xuICAgICAgaWYodGhpcy5hdHRlbXB0Rm9jdXMoY2hpbGQpIHx8IHRoaXMuZm9jdXNGaXJzdChjaGlsZCkpe1xuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgfVxuICAgICAgY2hpbGQgPSBjaGlsZC5uZXh0RWxlbWVudFNpYmxpbmdcbiAgICB9XG4gIH0sXG5cbiAgZm9jdXNMYXN0KGVsKXtcbiAgICBsZXQgY2hpbGQgPSBlbC5sYXN0RWxlbWVudENoaWxkXG4gICAgd2hpbGUoY2hpbGQpe1xuICAgICAgaWYodGhpcy5hdHRlbXB0Rm9jdXMoY2hpbGQpIHx8IHRoaXMuZm9jdXNMYXN0KGNoaWxkKSl7XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICB9XG4gICAgICBjaGlsZCA9IGNoaWxkLnByZXZpb3VzRWxlbWVudFNpYmxpbmdcbiAgICB9XG4gIH1cbn1cbmV4cG9ydCBkZWZhdWx0IEFSSUEiLCAiaW1wb3J0IHtcbiAgUEhYX0FDVElWRV9FTlRSWV9SRUZTLFxuICBQSFhfTElWRV9GSUxFX1VQREFURUQsXG4gIFBIWF9QUkVGTElHSFRFRF9SRUZTLFxuICBQSFhfVVBMT0FEX1JFRlxufSBmcm9tIFwiLi9jb25zdGFudHNcIlxuXG5pbXBvcnQgTGl2ZVVwbG9hZGVyIGZyb20gXCIuL2xpdmVfdXBsb2FkZXJcIlxuaW1wb3J0IEFSSUEgZnJvbSBcIi4vYXJpYVwiXG5cbmxldCBIb29rcyA9IHtcbiAgTGl2ZUZpbGVVcGxvYWQ6IHtcbiAgICBhY3RpdmVSZWZzKCl7IHJldHVybiB0aGlzLmVsLmdldEF0dHJpYnV0ZShQSFhfQUNUSVZFX0VOVFJZX1JFRlMpIH0sXG5cbiAgICBwcmVmbGlnaHRlZFJlZnMoKXsgcmV0dXJuIHRoaXMuZWwuZ2V0QXR0cmlidXRlKFBIWF9QUkVGTElHSFRFRF9SRUZTKSB9LFxuXG4gICAgbW91bnRlZCgpeyB0aGlzLnByZWZsaWdodGVkV2FzID0gdGhpcy5wcmVmbGlnaHRlZFJlZnMoKSB9LFxuXG4gICAgdXBkYXRlZCgpe1xuICAgICAgbGV0IG5ld1ByZWZsaWdodHMgPSB0aGlzLnByZWZsaWdodGVkUmVmcygpXG4gICAgICBpZih0aGlzLnByZWZsaWdodGVkV2FzICE9PSBuZXdQcmVmbGlnaHRzKXtcbiAgICAgICAgdGhpcy5wcmVmbGlnaHRlZFdhcyA9IG5ld1ByZWZsaWdodHNcbiAgICAgICAgaWYobmV3UHJlZmxpZ2h0cyA9PT0gXCJcIil7XG4gICAgICAgICAgdGhpcy5fX3ZpZXcuY2FuY2VsU3VibWl0KHRoaXMuZWwuZm9ybSlcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZih0aGlzLmFjdGl2ZVJlZnMoKSA9PT0gXCJcIil7IHRoaXMuZWwudmFsdWUgPSBudWxsIH1cbiAgICAgIHRoaXMuZWwuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoUEhYX0xJVkVfRklMRV9VUERBVEVEKSlcbiAgICB9XG4gIH0sXG5cbiAgTGl2ZUltZ1ByZXZpZXc6IHtcbiAgICBtb3VudGVkKCl7XG4gICAgICB0aGlzLnJlZiA9IHRoaXMuZWwuZ2V0QXR0cmlidXRlKFwiZGF0YS1waHgtZW50cnktcmVmXCIpXG4gICAgICB0aGlzLmlucHV0RWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmVsLmdldEF0dHJpYnV0ZShQSFhfVVBMT0FEX1JFRikpXG4gICAgICBMaXZlVXBsb2FkZXIuZ2V0RW50cnlEYXRhVVJMKHRoaXMuaW5wdXRFbCwgdGhpcy5yZWYsIHVybCA9PiB7XG4gICAgICAgIHRoaXMudXJsID0gdXJsXG4gICAgICAgIHRoaXMuZWwuc3JjID0gdXJsXG4gICAgICB9KVxuICAgIH0sXG4gICAgZGVzdHJveWVkKCl7XG4gICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKHRoaXMudXJsKVxuICAgIH1cbiAgfSxcbiAgRm9jdXNXcmFwOiB7XG4gICAgbW91bnRlZCgpe1xuICAgICAgdGhpcy5mb2N1c1N0YXJ0ID0gdGhpcy5lbC5maXJzdEVsZW1lbnRDaGlsZFxuICAgICAgdGhpcy5mb2N1c0VuZCA9IHRoaXMuZWwubGFzdEVsZW1lbnRDaGlsZFxuICAgICAgdGhpcy5mb2N1c1N0YXJ0LmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c1wiLCAoKSA9PiBBUklBLmZvY3VzTGFzdCh0aGlzLmVsKSlcbiAgICAgIHRoaXMuZm9jdXNFbmQuYWRkRXZlbnRMaXN0ZW5lcihcImZvY3VzXCIsICgpID0+IEFSSUEuZm9jdXNGaXJzdCh0aGlzLmVsKSlcbiAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcihcInBoeDpzaG93LWVuZFwiLCAoKSA9PiB0aGlzLmVsLmZvY3VzKCkpXG4gICAgICBpZih3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLmVsKS5kaXNwbGF5ICE9PSBcIm5vbmVcIil7XG4gICAgICAgIEFSSUEuZm9jdXNGaXJzdCh0aGlzLmVsKVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBIb29rc1xuIiwgImltcG9ydCB7XG4gIG1heWJlXG59IGZyb20gXCIuL3V0aWxzXCJcblxuaW1wb3J0IERPTSBmcm9tIFwiLi9kb21cIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBET01Qb3N0TW9ycGhSZXN0b3JlciB7XG4gIGNvbnN0cnVjdG9yKGNvbnRhaW5lckJlZm9yZSwgY29udGFpbmVyQWZ0ZXIsIHVwZGF0ZVR5cGUpe1xuICAgIGxldCBpZHNCZWZvcmUgPSBuZXcgU2V0KClcbiAgICBsZXQgaWRzQWZ0ZXIgPSBuZXcgU2V0KFsuLi5jb250YWluZXJBZnRlci5jaGlsZHJlbl0ubWFwKGNoaWxkID0+IGNoaWxkLmlkKSlcblxuICAgIGxldCBlbGVtZW50c1RvTW9kaWZ5ID0gW11cblxuICAgIEFycmF5LmZyb20oY29udGFpbmVyQmVmb3JlLmNoaWxkcmVuKS5mb3JFYWNoKGNoaWxkID0+IHtcbiAgICAgIGlmKGNoaWxkLmlkKXsgLy8gYWxsIG9mIG91ciBjaGlsZHJlbiBzaG91bGQgYmUgZWxlbWVudHMgd2l0aCBpZHNcbiAgICAgICAgaWRzQmVmb3JlLmFkZChjaGlsZC5pZClcbiAgICAgICAgaWYoaWRzQWZ0ZXIuaGFzKGNoaWxkLmlkKSl7XG4gICAgICAgICAgbGV0IHByZXZpb3VzRWxlbWVudElkID0gY2hpbGQucHJldmlvdXNFbGVtZW50U2libGluZyAmJiBjaGlsZC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nLmlkXG4gICAgICAgICAgZWxlbWVudHNUb01vZGlmeS5wdXNoKHtlbGVtZW50SWQ6IGNoaWxkLmlkLCBwcmV2aW91c0VsZW1lbnRJZDogcHJldmlvdXNFbGVtZW50SWR9KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcblxuICAgIHRoaXMuY29udGFpbmVySWQgPSBjb250YWluZXJBZnRlci5pZFxuICAgIHRoaXMudXBkYXRlVHlwZSA9IHVwZGF0ZVR5cGVcbiAgICB0aGlzLmVsZW1lbnRzVG9Nb2RpZnkgPSBlbGVtZW50c1RvTW9kaWZ5XG4gICAgdGhpcy5lbGVtZW50SWRzVG9BZGQgPSBbLi4uaWRzQWZ0ZXJdLmZpbHRlcihpZCA9PiAhaWRzQmVmb3JlLmhhcyhpZCkpXG4gIH1cblxuICAvLyBXZSBkbyB0aGUgZm9sbG93aW5nIHRvIG9wdGltaXplIGFwcGVuZC9wcmVwZW5kIG9wZXJhdGlvbnM6XG4gIC8vICAgMSkgVHJhY2sgaWRzIG9mIG1vZGlmaWVkIGVsZW1lbnRzICYgb2YgbmV3IGVsZW1lbnRzXG4gIC8vICAgMikgQWxsIHRoZSBtb2RpZmllZCBlbGVtZW50cyBhcmUgcHV0IGJhY2sgaW4gdGhlIGNvcnJlY3QgcG9zaXRpb24gaW4gdGhlIERPTSB0cmVlXG4gIC8vICAgICAgYnkgc3RvcmluZyB0aGUgaWQgb2YgdGhlaXIgcHJldmlvdXMgc2libGluZ1xuICAvLyAgIDMpIE5ldyBlbGVtZW50cyBhcmUgZ29pbmcgdG8gYmUgcHV0IGluIHRoZSByaWdodCBwbGFjZSBieSBtb3JwaGRvbSBkdXJpbmcgYXBwZW5kLlxuICAvLyAgICAgIEZvciBwcmVwZW5kLCB3ZSBtb3ZlIHRoZW0gdG8gdGhlIGZpcnN0IHBvc2l0aW9uIGluIHRoZSBjb250YWluZXJcbiAgcGVyZm9ybSgpe1xuICAgIGxldCBjb250YWluZXIgPSBET00uYnlJZCh0aGlzLmNvbnRhaW5lcklkKVxuICAgIHRoaXMuZWxlbWVudHNUb01vZGlmeS5mb3JFYWNoKGVsZW1lbnRUb01vZGlmeSA9PiB7XG4gICAgICBpZihlbGVtZW50VG9Nb2RpZnkucHJldmlvdXNFbGVtZW50SWQpe1xuICAgICAgICBtYXliZShkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbGVtZW50VG9Nb2RpZnkucHJldmlvdXNFbGVtZW50SWQpLCBwcmV2aW91c0VsZW0gPT4ge1xuICAgICAgICAgIG1heWJlKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1lbnRUb01vZGlmeS5lbGVtZW50SWQpLCBlbGVtID0+IHtcbiAgICAgICAgICAgIGxldCBpc0luUmlnaHRQbGFjZSA9IGVsZW0ucHJldmlvdXNFbGVtZW50U2libGluZyAmJiBlbGVtLnByZXZpb3VzRWxlbWVudFNpYmxpbmcuaWQgPT0gcHJldmlvdXNFbGVtLmlkXG4gICAgICAgICAgICBpZighaXNJblJpZ2h0UGxhY2Upe1xuICAgICAgICAgICAgICBwcmV2aW91c0VsZW0uaW5zZXJ0QWRqYWNlbnRFbGVtZW50KFwiYWZ0ZXJlbmRcIiwgZWxlbSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gVGhpcyBpcyB0aGUgZmlyc3QgZWxlbWVudCBpbiB0aGUgY29udGFpbmVyXG4gICAgICAgIG1heWJlKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1lbnRUb01vZGlmeS5lbGVtZW50SWQpLCBlbGVtID0+IHtcbiAgICAgICAgICBsZXQgaXNJblJpZ2h0UGxhY2UgPSBlbGVtLnByZXZpb3VzRWxlbWVudFNpYmxpbmcgPT0gbnVsbFxuICAgICAgICAgIGlmKCFpc0luUmlnaHRQbGFjZSl7XG4gICAgICAgICAgICBjb250YWluZXIuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KFwiYWZ0ZXJiZWdpblwiLCBlbGVtKVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgaWYodGhpcy51cGRhdGVUeXBlID09IFwicHJlcGVuZFwiKXtcbiAgICAgIHRoaXMuZWxlbWVudElkc1RvQWRkLnJldmVyc2UoKS5mb3JFYWNoKGVsZW1JZCA9PiB7XG4gICAgICAgIG1heWJlKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1JZCksIGVsZW0gPT4gY29udGFpbmVyLmluc2VydEFkamFjZW50RWxlbWVudChcImFmdGVyYmVnaW5cIiwgZWxlbSkpXG4gICAgICB9KVxuICAgIH1cbiAgfVxufVxuIiwgInZhciBET0NVTUVOVF9GUkFHTUVOVF9OT0RFID0gMTE7XG5cbmZ1bmN0aW9uIG1vcnBoQXR0cnMoZnJvbU5vZGUsIHRvTm9kZSkge1xuICAgIHZhciB0b05vZGVBdHRycyA9IHRvTm9kZS5hdHRyaWJ1dGVzO1xuICAgIHZhciBhdHRyO1xuICAgIHZhciBhdHRyTmFtZTtcbiAgICB2YXIgYXR0ck5hbWVzcGFjZVVSSTtcbiAgICB2YXIgYXR0clZhbHVlO1xuICAgIHZhciBmcm9tVmFsdWU7XG5cbiAgICAvLyBkb2N1bWVudC1mcmFnbWVudHMgZG9udCBoYXZlIGF0dHJpYnV0ZXMgc28gbGV0cyBub3QgZG8gYW55dGhpbmdcbiAgICBpZiAodG9Ob2RlLm5vZGVUeXBlID09PSBET0NVTUVOVF9GUkFHTUVOVF9OT0RFIHx8IGZyb21Ob2RlLm5vZGVUeXBlID09PSBET0NVTUVOVF9GUkFHTUVOVF9OT0RFKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gdXBkYXRlIGF0dHJpYnV0ZXMgb24gb3JpZ2luYWwgRE9NIGVsZW1lbnRcbiAgICBmb3IgKHZhciBpID0gdG9Ob2RlQXR0cnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgYXR0ciA9IHRvTm9kZUF0dHJzW2ldO1xuICAgICAgICBhdHRyTmFtZSA9IGF0dHIubmFtZTtcbiAgICAgICAgYXR0ck5hbWVzcGFjZVVSSSA9IGF0dHIubmFtZXNwYWNlVVJJO1xuICAgICAgICBhdHRyVmFsdWUgPSBhdHRyLnZhbHVlO1xuXG4gICAgICAgIGlmIChhdHRyTmFtZXNwYWNlVVJJKSB7XG4gICAgICAgICAgICBhdHRyTmFtZSA9IGF0dHIubG9jYWxOYW1lIHx8IGF0dHJOYW1lO1xuICAgICAgICAgICAgZnJvbVZhbHVlID0gZnJvbU5vZGUuZ2V0QXR0cmlidXRlTlMoYXR0ck5hbWVzcGFjZVVSSSwgYXR0ck5hbWUpO1xuXG4gICAgICAgICAgICBpZiAoZnJvbVZhbHVlICE9PSBhdHRyVmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpZiAoYXR0ci5wcmVmaXggPT09ICd4bWxucycpe1xuICAgICAgICAgICAgICAgICAgICBhdHRyTmFtZSA9IGF0dHIubmFtZTsgLy8gSXQncyBub3QgYWxsb3dlZCB0byBzZXQgYW4gYXR0cmlidXRlIHdpdGggdGhlIFhNTE5TIG5hbWVzcGFjZSB3aXRob3V0IHNwZWNpZnlpbmcgdGhlIGB4bWxuc2AgcHJlZml4XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZyb21Ob2RlLnNldEF0dHJpYnV0ZU5TKGF0dHJOYW1lc3BhY2VVUkksIGF0dHJOYW1lLCBhdHRyVmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZnJvbVZhbHVlID0gZnJvbU5vZGUuZ2V0QXR0cmlidXRlKGF0dHJOYW1lKTtcblxuICAgICAgICAgICAgaWYgKGZyb21WYWx1ZSAhPT0gYXR0clZhbHVlKSB7XG4gICAgICAgICAgICAgICAgZnJvbU5vZGUuc2V0QXR0cmlidXRlKGF0dHJOYW1lLCBhdHRyVmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gUmVtb3ZlIGFueSBleHRyYSBhdHRyaWJ1dGVzIGZvdW5kIG9uIHRoZSBvcmlnaW5hbCBET00gZWxlbWVudCB0aGF0XG4gICAgLy8gd2VyZW4ndCBmb3VuZCBvbiB0aGUgdGFyZ2V0IGVsZW1lbnQuXG4gICAgdmFyIGZyb21Ob2RlQXR0cnMgPSBmcm9tTm9kZS5hdHRyaWJ1dGVzO1xuXG4gICAgZm9yICh2YXIgZCA9IGZyb21Ob2RlQXR0cnMubGVuZ3RoIC0gMTsgZCA+PSAwOyBkLS0pIHtcbiAgICAgICAgYXR0ciA9IGZyb21Ob2RlQXR0cnNbZF07XG4gICAgICAgIGF0dHJOYW1lID0gYXR0ci5uYW1lO1xuICAgICAgICBhdHRyTmFtZXNwYWNlVVJJID0gYXR0ci5uYW1lc3BhY2VVUkk7XG5cbiAgICAgICAgaWYgKGF0dHJOYW1lc3BhY2VVUkkpIHtcbiAgICAgICAgICAgIGF0dHJOYW1lID0gYXR0ci5sb2NhbE5hbWUgfHwgYXR0ck5hbWU7XG5cbiAgICAgICAgICAgIGlmICghdG9Ob2RlLmhhc0F0dHJpYnV0ZU5TKGF0dHJOYW1lc3BhY2VVUkksIGF0dHJOYW1lKSkge1xuICAgICAgICAgICAgICAgIGZyb21Ob2RlLnJlbW92ZUF0dHJpYnV0ZU5TKGF0dHJOYW1lc3BhY2VVUkksIGF0dHJOYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmICghdG9Ob2RlLmhhc0F0dHJpYnV0ZShhdHRyTmFtZSkpIHtcbiAgICAgICAgICAgICAgICBmcm9tTm9kZS5yZW1vdmVBdHRyaWJ1dGUoYXR0ck5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG52YXIgcmFuZ2U7IC8vIENyZWF0ZSBhIHJhbmdlIG9iamVjdCBmb3IgZWZmaWNlbnRseSByZW5kZXJpbmcgc3RyaW5ncyB0byBlbGVtZW50cy5cbnZhciBOU19YSFRNTCA9ICdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sJztcblxudmFyIGRvYyA9IHR5cGVvZiBkb2N1bWVudCA9PT0gJ3VuZGVmaW5lZCcgPyB1bmRlZmluZWQgOiBkb2N1bWVudDtcbnZhciBIQVNfVEVNUExBVEVfU1VQUE9SVCA9ICEhZG9jICYmICdjb250ZW50JyBpbiBkb2MuY3JlYXRlRWxlbWVudCgndGVtcGxhdGUnKTtcbnZhciBIQVNfUkFOR0VfU1VQUE9SVCA9ICEhZG9jICYmIGRvYy5jcmVhdGVSYW5nZSAmJiAnY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50JyBpbiBkb2MuY3JlYXRlUmFuZ2UoKTtcblxuZnVuY3Rpb24gY3JlYXRlRnJhZ21lbnRGcm9tVGVtcGxhdGUoc3RyKSB7XG4gICAgdmFyIHRlbXBsYXRlID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ3RlbXBsYXRlJyk7XG4gICAgdGVtcGxhdGUuaW5uZXJIVE1MID0gc3RyO1xuICAgIHJldHVybiB0ZW1wbGF0ZS5jb250ZW50LmNoaWxkTm9kZXNbMF07XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUZyYWdtZW50RnJvbVJhbmdlKHN0cikge1xuICAgIGlmICghcmFuZ2UpIHtcbiAgICAgICAgcmFuZ2UgPSBkb2MuY3JlYXRlUmFuZ2UoKTtcbiAgICAgICAgcmFuZ2Uuc2VsZWN0Tm9kZShkb2MuYm9keSk7XG4gICAgfVxuXG4gICAgdmFyIGZyYWdtZW50ID0gcmFuZ2UuY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50KHN0cik7XG4gICAgcmV0dXJuIGZyYWdtZW50LmNoaWxkTm9kZXNbMF07XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUZyYWdtZW50RnJvbVdyYXAoc3RyKSB7XG4gICAgdmFyIGZyYWdtZW50ID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ2JvZHknKTtcbiAgICBmcmFnbWVudC5pbm5lckhUTUwgPSBzdHI7XG4gICAgcmV0dXJuIGZyYWdtZW50LmNoaWxkTm9kZXNbMF07XG59XG5cbi8qKlxuICogVGhpcyBpcyBhYm91dCB0aGUgc2FtZVxuICogdmFyIGh0bWwgPSBuZXcgRE9NUGFyc2VyKCkucGFyc2VGcm9tU3RyaW5nKHN0ciwgJ3RleHQvaHRtbCcpO1xuICogcmV0dXJuIGh0bWwuYm9keS5maXJzdENoaWxkO1xuICpcbiAqIEBtZXRob2QgdG9FbGVtZW50XG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKi9cbmZ1bmN0aW9uIHRvRWxlbWVudChzdHIpIHtcbiAgICBzdHIgPSBzdHIudHJpbSgpO1xuICAgIGlmIChIQVNfVEVNUExBVEVfU1VQUE9SVCkge1xuICAgICAgLy8gYXZvaWQgcmVzdHJpY3Rpb25zIG9uIGNvbnRlbnQgZm9yIHRoaW5ncyBsaWtlIGA8dHI+PHRoPkhpPC90aD48L3RyPmAgd2hpY2hcbiAgICAgIC8vIGNyZWF0ZUNvbnRleHR1YWxGcmFnbWVudCBkb2Vzbid0IHN1cHBvcnRcbiAgICAgIC8vIDx0ZW1wbGF0ZT4gc3VwcG9ydCBub3QgYXZhaWxhYmxlIGluIElFXG4gICAgICByZXR1cm4gY3JlYXRlRnJhZ21lbnRGcm9tVGVtcGxhdGUoc3RyKTtcbiAgICB9IGVsc2UgaWYgKEhBU19SQU5HRV9TVVBQT1JUKSB7XG4gICAgICByZXR1cm4gY3JlYXRlRnJhZ21lbnRGcm9tUmFuZ2Uoc3RyKTtcbiAgICB9XG5cbiAgICByZXR1cm4gY3JlYXRlRnJhZ21lbnRGcm9tV3JhcChzdHIpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0d28gbm9kZSdzIG5hbWVzIGFyZSB0aGUgc2FtZS5cbiAqXG4gKiBOT1RFOiBXZSBkb24ndCBib3RoZXIgY2hlY2tpbmcgYG5hbWVzcGFjZVVSSWAgYmVjYXVzZSB5b3Ugd2lsbCBuZXZlciBmaW5kIHR3byBIVE1MIGVsZW1lbnRzIHdpdGggdGhlIHNhbWVcbiAqICAgICAgIG5vZGVOYW1lIGFuZCBkaWZmZXJlbnQgbmFtZXNwYWNlIFVSSXMuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBhXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGIgVGhlIHRhcmdldCBlbGVtZW50XG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5mdW5jdGlvbiBjb21wYXJlTm9kZU5hbWVzKGZyb21FbCwgdG9FbCkge1xuICAgIHZhciBmcm9tTm9kZU5hbWUgPSBmcm9tRWwubm9kZU5hbWU7XG4gICAgdmFyIHRvTm9kZU5hbWUgPSB0b0VsLm5vZGVOYW1lO1xuICAgIHZhciBmcm9tQ29kZVN0YXJ0LCB0b0NvZGVTdGFydDtcblxuICAgIGlmIChmcm9tTm9kZU5hbWUgPT09IHRvTm9kZU5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgZnJvbUNvZGVTdGFydCA9IGZyb21Ob2RlTmFtZS5jaGFyQ29kZUF0KDApO1xuICAgIHRvQ29kZVN0YXJ0ID0gdG9Ob2RlTmFtZS5jaGFyQ29kZUF0KDApO1xuXG4gICAgLy8gSWYgdGhlIHRhcmdldCBlbGVtZW50IGlzIGEgdmlydHVhbCBET00gbm9kZSBvciBTVkcgbm9kZSB0aGVuIHdlIG1heVxuICAgIC8vIG5lZWQgdG8gbm9ybWFsaXplIHRoZSB0YWcgbmFtZSBiZWZvcmUgY29tcGFyaW5nLiBOb3JtYWwgSFRNTCBlbGVtZW50cyB0aGF0IGFyZVxuICAgIC8vIGluIHRoZSBcImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWxcIlxuICAgIC8vIGFyZSBjb252ZXJ0ZWQgdG8gdXBwZXIgY2FzZVxuICAgIGlmIChmcm9tQ29kZVN0YXJ0IDw9IDkwICYmIHRvQ29kZVN0YXJ0ID49IDk3KSB7IC8vIGZyb20gaXMgdXBwZXIgYW5kIHRvIGlzIGxvd2VyXG4gICAgICAgIHJldHVybiBmcm9tTm9kZU5hbWUgPT09IHRvTm9kZU5hbWUudG9VcHBlckNhc2UoKTtcbiAgICB9IGVsc2UgaWYgKHRvQ29kZVN0YXJ0IDw9IDkwICYmIGZyb21Db2RlU3RhcnQgPj0gOTcpIHsgLy8gdG8gaXMgdXBwZXIgYW5kIGZyb20gaXMgbG93ZXJcbiAgICAgICAgcmV0dXJuIHRvTm9kZU5hbWUgPT09IGZyb21Ob2RlTmFtZS50b1VwcGVyQ2FzZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5cbi8qKlxuICogQ3JlYXRlIGFuIGVsZW1lbnQsIG9wdGlvbmFsbHkgd2l0aCBhIGtub3duIG5hbWVzcGFjZSBVUkkuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgdGhlIGVsZW1lbnQgbmFtZSwgZS5nLiAnZGl2JyBvciAnc3ZnJ1xuICogQHBhcmFtIHtzdHJpbmd9IFtuYW1lc3BhY2VVUkldIHRoZSBlbGVtZW50J3MgbmFtZXNwYWNlIFVSSSwgaS5lLiB0aGUgdmFsdWUgb2ZcbiAqIGl0cyBgeG1sbnNgIGF0dHJpYnV0ZSBvciBpdHMgaW5mZXJyZWQgbmFtZXNwYWNlLlxuICpcbiAqIEByZXR1cm4ge0VsZW1lbnR9XG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnROUyhuYW1lLCBuYW1lc3BhY2VVUkkpIHtcbiAgICByZXR1cm4gIW5hbWVzcGFjZVVSSSB8fCBuYW1lc3BhY2VVUkkgPT09IE5TX1hIVE1MID9cbiAgICAgICAgZG9jLmNyZWF0ZUVsZW1lbnQobmFtZSkgOlxuICAgICAgICBkb2MuY3JlYXRlRWxlbWVudE5TKG5hbWVzcGFjZVVSSSwgbmFtZSk7XG59XG5cbi8qKlxuICogQ29waWVzIHRoZSBjaGlsZHJlbiBvZiBvbmUgRE9NIGVsZW1lbnQgdG8gYW5vdGhlciBET00gZWxlbWVudFxuICovXG5mdW5jdGlvbiBtb3ZlQ2hpbGRyZW4oZnJvbUVsLCB0b0VsKSB7XG4gICAgdmFyIGN1ckNoaWxkID0gZnJvbUVsLmZpcnN0Q2hpbGQ7XG4gICAgd2hpbGUgKGN1ckNoaWxkKSB7XG4gICAgICAgIHZhciBuZXh0Q2hpbGQgPSBjdXJDaGlsZC5uZXh0U2libGluZztcbiAgICAgICAgdG9FbC5hcHBlbmRDaGlsZChjdXJDaGlsZCk7XG4gICAgICAgIGN1ckNoaWxkID0gbmV4dENoaWxkO1xuICAgIH1cbiAgICByZXR1cm4gdG9FbDtcbn1cblxuZnVuY3Rpb24gc3luY0Jvb2xlYW5BdHRyUHJvcChmcm9tRWwsIHRvRWwsIG5hbWUpIHtcbiAgICBpZiAoZnJvbUVsW25hbWVdICE9PSB0b0VsW25hbWVdKSB7XG4gICAgICAgIGZyb21FbFtuYW1lXSA9IHRvRWxbbmFtZV07XG4gICAgICAgIGlmIChmcm9tRWxbbmFtZV0pIHtcbiAgICAgICAgICAgIGZyb21FbC5zZXRBdHRyaWJ1dGUobmFtZSwgJycpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZnJvbUVsLnJlbW92ZUF0dHJpYnV0ZShuYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxudmFyIHNwZWNpYWxFbEhhbmRsZXJzID0ge1xuICAgIE9QVElPTjogZnVuY3Rpb24oZnJvbUVsLCB0b0VsKSB7XG4gICAgICAgIHZhciBwYXJlbnROb2RlID0gZnJvbUVsLnBhcmVudE5vZGU7XG4gICAgICAgIGlmIChwYXJlbnROb2RlKSB7XG4gICAgICAgICAgICB2YXIgcGFyZW50TmFtZSA9IHBhcmVudE5vZGUubm9kZU5hbWUudG9VcHBlckNhc2UoKTtcbiAgICAgICAgICAgIGlmIChwYXJlbnROYW1lID09PSAnT1BUR1JPVVAnKSB7XG4gICAgICAgICAgICAgICAgcGFyZW50Tm9kZSA9IHBhcmVudE5vZGUucGFyZW50Tm9kZTtcbiAgICAgICAgICAgICAgICBwYXJlbnROYW1lID0gcGFyZW50Tm9kZSAmJiBwYXJlbnROb2RlLm5vZGVOYW1lLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocGFyZW50TmFtZSA9PT0gJ1NFTEVDVCcgJiYgIXBhcmVudE5vZGUuaGFzQXR0cmlidXRlKCdtdWx0aXBsZScpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGZyb21FbC5oYXNBdHRyaWJ1dGUoJ3NlbGVjdGVkJykgJiYgIXRvRWwuc2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gV29ya2Fyb3VuZCBmb3IgTVMgRWRnZSBidWcgd2hlcmUgdGhlICdzZWxlY3RlZCcgYXR0cmlidXRlIGNhbiBvbmx5IGJlXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlbW92ZWQgaWYgc2V0IHRvIGEgbm9uLWVtcHR5IHZhbHVlOlxuICAgICAgICAgICAgICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5taWNyb3NvZnQuY29tL2VuLXVzL21pY3Jvc29mdC1lZGdlL3BsYXRmb3JtL2lzc3Vlcy8xMjA4NzY3OS9cbiAgICAgICAgICAgICAgICAgICAgZnJvbUVsLnNldEF0dHJpYnV0ZSgnc2VsZWN0ZWQnLCAnc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgZnJvbUVsLnJlbW92ZUF0dHJpYnV0ZSgnc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gV2UgaGF2ZSB0byByZXNldCBzZWxlY3QgZWxlbWVudCdzIHNlbGVjdGVkSW5kZXggdG8gLTEsIG90aGVyd2lzZSBzZXR0aW5nXG4gICAgICAgICAgICAgICAgLy8gZnJvbUVsLnNlbGVjdGVkIHVzaW5nIHRoZSBzeW5jQm9vbGVhbkF0dHJQcm9wIGJlbG93IGhhcyBubyBlZmZlY3QuXG4gICAgICAgICAgICAgICAgLy8gVGhlIGNvcnJlY3Qgc2VsZWN0ZWRJbmRleCB3aWxsIGJlIHNldCBpbiB0aGUgU0VMRUNUIHNwZWNpYWwgaGFuZGxlciBiZWxvdy5cbiAgICAgICAgICAgICAgICBwYXJlbnROb2RlLnNlbGVjdGVkSW5kZXggPSAtMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzeW5jQm9vbGVhbkF0dHJQcm9wKGZyb21FbCwgdG9FbCwgJ3NlbGVjdGVkJyk7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBUaGUgXCJ2YWx1ZVwiIGF0dHJpYnV0ZSBpcyBzcGVjaWFsIGZvciB0aGUgPGlucHV0PiBlbGVtZW50IHNpbmNlIGl0IHNldHNcbiAgICAgKiB0aGUgaW5pdGlhbCB2YWx1ZS4gQ2hhbmdpbmcgdGhlIFwidmFsdWVcIiBhdHRyaWJ1dGUgd2l0aG91dCBjaGFuZ2luZyB0aGVcbiAgICAgKiBcInZhbHVlXCIgcHJvcGVydHkgd2lsbCBoYXZlIG5vIGVmZmVjdCBzaW5jZSBpdCBpcyBvbmx5IHVzZWQgdG8gdGhlIHNldCB0aGVcbiAgICAgKiBpbml0aWFsIHZhbHVlLiAgU2ltaWxhciBmb3IgdGhlIFwiY2hlY2tlZFwiIGF0dHJpYnV0ZSwgYW5kIFwiZGlzYWJsZWRcIi5cbiAgICAgKi9cbiAgICBJTlBVVDogZnVuY3Rpb24oZnJvbUVsLCB0b0VsKSB7XG4gICAgICAgIHN5bmNCb29sZWFuQXR0clByb3AoZnJvbUVsLCB0b0VsLCAnY2hlY2tlZCcpO1xuICAgICAgICBzeW5jQm9vbGVhbkF0dHJQcm9wKGZyb21FbCwgdG9FbCwgJ2Rpc2FibGVkJyk7XG5cbiAgICAgICAgaWYgKGZyb21FbC52YWx1ZSAhPT0gdG9FbC52YWx1ZSkge1xuICAgICAgICAgICAgZnJvbUVsLnZhbHVlID0gdG9FbC52YWx1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdG9FbC5oYXNBdHRyaWJ1dGUoJ3ZhbHVlJykpIHtcbiAgICAgICAgICAgIGZyb21FbC5yZW1vdmVBdHRyaWJ1dGUoJ3ZhbHVlJyk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgVEVYVEFSRUE6IGZ1bmN0aW9uKGZyb21FbCwgdG9FbCkge1xuICAgICAgICB2YXIgbmV3VmFsdWUgPSB0b0VsLnZhbHVlO1xuICAgICAgICBpZiAoZnJvbUVsLnZhbHVlICE9PSBuZXdWYWx1ZSkge1xuICAgICAgICAgICAgZnJvbUVsLnZhbHVlID0gbmV3VmFsdWU7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZmlyc3RDaGlsZCA9IGZyb21FbC5maXJzdENoaWxkO1xuICAgICAgICBpZiAoZmlyc3RDaGlsZCkge1xuICAgICAgICAgICAgLy8gTmVlZGVkIGZvciBJRS4gQXBwYXJlbnRseSBJRSBzZXRzIHRoZSBwbGFjZWhvbGRlciBhcyB0aGVcbiAgICAgICAgICAgIC8vIG5vZGUgdmFsdWUgYW5kIHZpc2UgdmVyc2EuIFRoaXMgaWdub3JlcyBhbiBlbXB0eSB1cGRhdGUuXG4gICAgICAgICAgICB2YXIgb2xkVmFsdWUgPSBmaXJzdENoaWxkLm5vZGVWYWx1ZTtcblxuICAgICAgICAgICAgaWYgKG9sZFZhbHVlID09IG5ld1ZhbHVlIHx8ICghbmV3VmFsdWUgJiYgb2xkVmFsdWUgPT0gZnJvbUVsLnBsYWNlaG9sZGVyKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZmlyc3RDaGlsZC5ub2RlVmFsdWUgPSBuZXdWYWx1ZTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgU0VMRUNUOiBmdW5jdGlvbihmcm9tRWwsIHRvRWwpIHtcbiAgICAgICAgaWYgKCF0b0VsLmhhc0F0dHJpYnV0ZSgnbXVsdGlwbGUnKSkge1xuICAgICAgICAgICAgdmFyIHNlbGVjdGVkSW5kZXggPSAtMTtcbiAgICAgICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgICAgIC8vIFdlIGhhdmUgdG8gbG9vcCB0aHJvdWdoIGNoaWxkcmVuIG9mIGZyb21FbCwgbm90IHRvRWwgc2luY2Ugbm9kZXMgY2FuIGJlIG1vdmVkXG4gICAgICAgICAgICAvLyBmcm9tIHRvRWwgdG8gZnJvbUVsIGRpcmVjdGx5IHdoZW4gbW9ycGhpbmcuXG4gICAgICAgICAgICAvLyBBdCB0aGUgdGltZSB0aGlzIHNwZWNpYWwgaGFuZGxlciBpcyBpbnZva2VkLCBhbGwgY2hpbGRyZW4gaGF2ZSBhbHJlYWR5IGJlZW4gbW9ycGhlZFxuICAgICAgICAgICAgLy8gYW5kIGFwcGVuZGVkIHRvIC8gcmVtb3ZlZCBmcm9tIGZyb21FbCwgc28gdXNpbmcgZnJvbUVsIGhlcmUgaXMgc2FmZSBhbmQgY29ycmVjdC5cbiAgICAgICAgICAgIHZhciBjdXJDaGlsZCA9IGZyb21FbC5maXJzdENoaWxkO1xuICAgICAgICAgICAgdmFyIG9wdGdyb3VwO1xuICAgICAgICAgICAgdmFyIG5vZGVOYW1lO1xuICAgICAgICAgICAgd2hpbGUoY3VyQ2hpbGQpIHtcbiAgICAgICAgICAgICAgICBub2RlTmFtZSA9IGN1ckNoaWxkLm5vZGVOYW1lICYmIGN1ckNoaWxkLm5vZGVOYW1lLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgaWYgKG5vZGVOYW1lID09PSAnT1BUR1JPVVAnKSB7XG4gICAgICAgICAgICAgICAgICAgIG9wdGdyb3VwID0gY3VyQ2hpbGQ7XG4gICAgICAgICAgICAgICAgICAgIGN1ckNoaWxkID0gb3B0Z3JvdXAuZmlyc3RDaGlsZDtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAobm9kZU5hbWUgPT09ICdPUFRJT04nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VyQ2hpbGQuaGFzQXR0cmlidXRlKCdzZWxlY3RlZCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRJbmRleCA9IGk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY3VyQ2hpbGQgPSBjdXJDaGlsZC5uZXh0U2libGluZztcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjdXJDaGlsZCAmJiBvcHRncm91cCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VyQ2hpbGQgPSBvcHRncm91cC5uZXh0U2libGluZztcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGdyb3VwID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnJvbUVsLnNlbGVjdGVkSW5kZXggPSBzZWxlY3RlZEluZGV4O1xuICAgICAgICB9XG4gICAgfVxufTtcblxudmFyIEVMRU1FTlRfTk9ERSA9IDE7XG52YXIgRE9DVU1FTlRfRlJBR01FTlRfTk9ERSQxID0gMTE7XG52YXIgVEVYVF9OT0RFID0gMztcbnZhciBDT01NRU5UX05PREUgPSA4O1xuXG5mdW5jdGlvbiBub29wKCkge31cblxuZnVuY3Rpb24gZGVmYXVsdEdldE5vZGVLZXkobm9kZSkge1xuICBpZiAobm9kZSkge1xuICAgIHJldHVybiAobm9kZS5nZXRBdHRyaWJ1dGUgJiYgbm9kZS5nZXRBdHRyaWJ1dGUoJ2lkJykpIHx8IG5vZGUuaWQ7XG4gIH1cbn1cblxuZnVuY3Rpb24gbW9ycGhkb21GYWN0b3J5KG1vcnBoQXR0cnMpIHtcblxuICByZXR1cm4gZnVuY3Rpb24gbW9ycGhkb20oZnJvbU5vZGUsIHRvTm9kZSwgb3B0aW9ucykge1xuICAgIGlmICghb3B0aW9ucykge1xuICAgICAgb3B0aW9ucyA9IHt9O1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgdG9Ob2RlID09PSAnc3RyaW5nJykge1xuICAgICAgaWYgKGZyb21Ob2RlLm5vZGVOYW1lID09PSAnI2RvY3VtZW50JyB8fCBmcm9tTm9kZS5ub2RlTmFtZSA9PT0gJ0hUTUwnIHx8IGZyb21Ob2RlLm5vZGVOYW1lID09PSAnQk9EWScpIHtcbiAgICAgICAgdmFyIHRvTm9kZUh0bWwgPSB0b05vZGU7XG4gICAgICAgIHRvTm9kZSA9IGRvYy5jcmVhdGVFbGVtZW50KCdodG1sJyk7XG4gICAgICAgIHRvTm9kZS5pbm5lckhUTUwgPSB0b05vZGVIdG1sO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdG9Ob2RlID0gdG9FbGVtZW50KHRvTm9kZSk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0b05vZGUubm9kZVR5cGUgPT09IERPQ1VNRU5UX0ZSQUdNRU5UX05PREUkMSkge1xuICAgICAgdG9Ob2RlID0gdG9Ob2RlLmZpcnN0RWxlbWVudENoaWxkO1xuICAgIH1cblxuICAgIHZhciBnZXROb2RlS2V5ID0gb3B0aW9ucy5nZXROb2RlS2V5IHx8IGRlZmF1bHRHZXROb2RlS2V5O1xuICAgIHZhciBvbkJlZm9yZU5vZGVBZGRlZCA9IG9wdGlvbnMub25CZWZvcmVOb2RlQWRkZWQgfHwgbm9vcDtcbiAgICB2YXIgb25Ob2RlQWRkZWQgPSBvcHRpb25zLm9uTm9kZUFkZGVkIHx8IG5vb3A7XG4gICAgdmFyIG9uQmVmb3JlRWxVcGRhdGVkID0gb3B0aW9ucy5vbkJlZm9yZUVsVXBkYXRlZCB8fCBub29wO1xuICAgIHZhciBvbkVsVXBkYXRlZCA9IG9wdGlvbnMub25FbFVwZGF0ZWQgfHwgbm9vcDtcbiAgICB2YXIgb25CZWZvcmVOb2RlRGlzY2FyZGVkID0gb3B0aW9ucy5vbkJlZm9yZU5vZGVEaXNjYXJkZWQgfHwgbm9vcDtcbiAgICB2YXIgb25Ob2RlRGlzY2FyZGVkID0gb3B0aW9ucy5vbk5vZGVEaXNjYXJkZWQgfHwgbm9vcDtcbiAgICB2YXIgb25CZWZvcmVFbENoaWxkcmVuVXBkYXRlZCA9IG9wdGlvbnMub25CZWZvcmVFbENoaWxkcmVuVXBkYXRlZCB8fCBub29wO1xuICAgIHZhciBza2lwRnJvbUNoaWxkcmVuID0gb3B0aW9ucy5za2lwRnJvbUNoaWxkcmVuIHx8IG5vb3A7XG4gICAgdmFyIGFkZENoaWxkID0gb3B0aW9ucy5hZGRDaGlsZCB8fCBmdW5jdGlvbihwYXJlbnQsIGNoaWxkKXsgcmV0dXJuIHBhcmVudC5hcHBlbmRDaGlsZChjaGlsZCk7IH07XG4gICAgdmFyIGNoaWxkcmVuT25seSA9IG9wdGlvbnMuY2hpbGRyZW5Pbmx5ID09PSB0cnVlO1xuXG4gICAgLy8gVGhpcyBvYmplY3QgaXMgdXNlZCBhcyBhIGxvb2t1cCB0byBxdWlja2x5IGZpbmQgYWxsIGtleWVkIGVsZW1lbnRzIGluIHRoZSBvcmlnaW5hbCBET00gdHJlZS5cbiAgICB2YXIgZnJvbU5vZGVzTG9va3VwID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICB2YXIga2V5ZWRSZW1vdmFsTGlzdCA9IFtdO1xuXG4gICAgZnVuY3Rpb24gYWRkS2V5ZWRSZW1vdmFsKGtleSkge1xuICAgICAga2V5ZWRSZW1vdmFsTGlzdC5wdXNoKGtleSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gd2Fsa0Rpc2NhcmRlZENoaWxkTm9kZXMobm9kZSwgc2tpcEtleWVkTm9kZXMpIHtcbiAgICAgIGlmIChub2RlLm5vZGVUeXBlID09PSBFTEVNRU5UX05PREUpIHtcbiAgICAgICAgdmFyIGN1ckNoaWxkID0gbm9kZS5maXJzdENoaWxkO1xuICAgICAgICB3aGlsZSAoY3VyQ2hpbGQpIHtcblxuICAgICAgICAgIHZhciBrZXkgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgICBpZiAoc2tpcEtleWVkTm9kZXMgJiYgKGtleSA9IGdldE5vZGVLZXkoY3VyQ2hpbGQpKSkge1xuICAgICAgICAgICAgLy8gSWYgd2UgYXJlIHNraXBwaW5nIGtleWVkIG5vZGVzIHRoZW4gd2UgYWRkIHRoZSBrZXlcbiAgICAgICAgICAgIC8vIHRvIGEgbGlzdCBzbyB0aGF0IGl0IGNhbiBiZSBoYW5kbGVkIGF0IHRoZSB2ZXJ5IGVuZC5cbiAgICAgICAgICAgIGFkZEtleWVkUmVtb3ZhbChrZXkpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBPbmx5IHJlcG9ydCB0aGUgbm9kZSBhcyBkaXNjYXJkZWQgaWYgaXQgaXMgbm90IGtleWVkLiBXZSBkbyB0aGlzIGJlY2F1c2VcbiAgICAgICAgICAgIC8vIGF0IHRoZSBlbmQgd2UgbG9vcCB0aHJvdWdoIGFsbCBrZXllZCBlbGVtZW50cyB0aGF0IHdlcmUgdW5tYXRjaGVkXG4gICAgICAgICAgICAvLyBhbmQgdGhlbiBkaXNjYXJkIHRoZW0gaW4gb25lIGZpbmFsIHBhc3MuXG4gICAgICAgICAgICBvbk5vZGVEaXNjYXJkZWQoY3VyQ2hpbGQpO1xuICAgICAgICAgICAgaWYgKGN1ckNoaWxkLmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgICAgICAgd2Fsa0Rpc2NhcmRlZENoaWxkTm9kZXMoY3VyQ2hpbGQsIHNraXBLZXllZE5vZGVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjdXJDaGlsZCA9IGN1ckNoaWxkLm5leHRTaWJsaW5nO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgKiBSZW1vdmVzIGEgRE9NIG5vZGUgb3V0IG9mIHRoZSBvcmlnaW5hbCBET01cbiAgICAqXG4gICAgKiBAcGFyYW0gIHtOb2RlfSBub2RlIFRoZSBub2RlIHRvIHJlbW92ZVxuICAgICogQHBhcmFtICB7Tm9kZX0gcGFyZW50Tm9kZSBUaGUgbm9kZXMgcGFyZW50XG4gICAgKiBAcGFyYW0gIHtCb29sZWFufSBza2lwS2V5ZWROb2RlcyBJZiB0cnVlIHRoZW4gZWxlbWVudHMgd2l0aCBrZXlzIHdpbGwgYmUgc2tpcHBlZCBhbmQgbm90IGRpc2NhcmRlZC5cbiAgICAqIEByZXR1cm4ge3VuZGVmaW5lZH1cbiAgICAqL1xuICAgIGZ1bmN0aW9uIHJlbW92ZU5vZGUobm9kZSwgcGFyZW50Tm9kZSwgc2tpcEtleWVkTm9kZXMpIHtcbiAgICAgIGlmIChvbkJlZm9yZU5vZGVEaXNjYXJkZWQobm9kZSkgPT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKHBhcmVudE5vZGUpIHtcbiAgICAgICAgcGFyZW50Tm9kZS5yZW1vdmVDaGlsZChub2RlKTtcbiAgICAgIH1cblxuICAgICAgb25Ob2RlRGlzY2FyZGVkKG5vZGUpO1xuICAgICAgd2Fsa0Rpc2NhcmRlZENoaWxkTm9kZXMobm9kZSwgc2tpcEtleWVkTm9kZXMpO1xuICAgIH1cblxuICAgIC8vIC8vIFRyZWVXYWxrZXIgaW1wbGVtZW50YXRpb24gaXMgbm8gZmFzdGVyLCBidXQga2VlcGluZyB0aGlzIGFyb3VuZCBpbiBjYXNlIHRoaXMgY2hhbmdlcyBpbiB0aGUgZnV0dXJlXG4gICAgLy8gZnVuY3Rpb24gaW5kZXhUcmVlKHJvb3QpIHtcbiAgICAvLyAgICAgdmFyIHRyZWVXYWxrZXIgPSBkb2N1bWVudC5jcmVhdGVUcmVlV2Fsa2VyKFxuICAgIC8vICAgICAgICAgcm9vdCxcbiAgICAvLyAgICAgICAgIE5vZGVGaWx0ZXIuU0hPV19FTEVNRU5UKTtcbiAgICAvL1xuICAgIC8vICAgICB2YXIgZWw7XG4gICAgLy8gICAgIHdoaWxlKChlbCA9IHRyZWVXYWxrZXIubmV4dE5vZGUoKSkpIHtcbiAgICAvLyAgICAgICAgIHZhciBrZXkgPSBnZXROb2RlS2V5KGVsKTtcbiAgICAvLyAgICAgICAgIGlmIChrZXkpIHtcbiAgICAvLyAgICAgICAgICAgICBmcm9tTm9kZXNMb29rdXBba2V5XSA9IGVsO1xuICAgIC8vICAgICAgICAgfVxuICAgIC8vICAgICB9XG4gICAgLy8gfVxuXG4gICAgLy8gLy8gTm9kZUl0ZXJhdG9yIGltcGxlbWVudGF0aW9uIGlzIG5vIGZhc3RlciwgYnV0IGtlZXBpbmcgdGhpcyBhcm91bmQgaW4gY2FzZSB0aGlzIGNoYW5nZXMgaW4gdGhlIGZ1dHVyZVxuICAgIC8vXG4gICAgLy8gZnVuY3Rpb24gaW5kZXhUcmVlKG5vZGUpIHtcbiAgICAvLyAgICAgdmFyIG5vZGVJdGVyYXRvciA9IGRvY3VtZW50LmNyZWF0ZU5vZGVJdGVyYXRvcihub2RlLCBOb2RlRmlsdGVyLlNIT1dfRUxFTUVOVCk7XG4gICAgLy8gICAgIHZhciBlbDtcbiAgICAvLyAgICAgd2hpbGUoKGVsID0gbm9kZUl0ZXJhdG9yLm5leHROb2RlKCkpKSB7XG4gICAgLy8gICAgICAgICB2YXIga2V5ID0gZ2V0Tm9kZUtleShlbCk7XG4gICAgLy8gICAgICAgICBpZiAoa2V5KSB7XG4gICAgLy8gICAgICAgICAgICAgZnJvbU5vZGVzTG9va3VwW2tleV0gPSBlbDtcbiAgICAvLyAgICAgICAgIH1cbiAgICAvLyAgICAgfVxuICAgIC8vIH1cblxuICAgIGZ1bmN0aW9uIGluZGV4VHJlZShub2RlKSB7XG4gICAgICBpZiAobm9kZS5ub2RlVHlwZSA9PT0gRUxFTUVOVF9OT0RFIHx8IG5vZGUubm9kZVR5cGUgPT09IERPQ1VNRU5UX0ZSQUdNRU5UX05PREUkMSkge1xuICAgICAgICB2YXIgY3VyQ2hpbGQgPSBub2RlLmZpcnN0Q2hpbGQ7XG4gICAgICAgIHdoaWxlIChjdXJDaGlsZCkge1xuICAgICAgICAgIHZhciBrZXkgPSBnZXROb2RlS2V5KGN1ckNoaWxkKTtcbiAgICAgICAgICBpZiAoa2V5KSB7XG4gICAgICAgICAgICBmcm9tTm9kZXNMb29rdXBba2V5XSA9IGN1ckNoaWxkO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIFdhbGsgcmVjdXJzaXZlbHlcbiAgICAgICAgICBpbmRleFRyZWUoY3VyQ2hpbGQpO1xuXG4gICAgICAgICAgY3VyQ2hpbGQgPSBjdXJDaGlsZC5uZXh0U2libGluZztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGluZGV4VHJlZShmcm9tTm9kZSk7XG5cbiAgICBmdW5jdGlvbiBoYW5kbGVOb2RlQWRkZWQoZWwpIHtcbiAgICAgIG9uTm9kZUFkZGVkKGVsKTtcblxuICAgICAgdmFyIGN1ckNoaWxkID0gZWwuZmlyc3RDaGlsZDtcbiAgICAgIHdoaWxlIChjdXJDaGlsZCkge1xuICAgICAgICB2YXIgbmV4dFNpYmxpbmcgPSBjdXJDaGlsZC5uZXh0U2libGluZztcblxuICAgICAgICB2YXIga2V5ID0gZ2V0Tm9kZUtleShjdXJDaGlsZCk7XG4gICAgICAgIGlmIChrZXkpIHtcbiAgICAgICAgICB2YXIgdW5tYXRjaGVkRnJvbUVsID0gZnJvbU5vZGVzTG9va3VwW2tleV07XG4gICAgICAgICAgLy8gaWYgd2UgZmluZCBhIGR1cGxpY2F0ZSAjaWQgbm9kZSBpbiBjYWNoZSwgcmVwbGFjZSBgZWxgIHdpdGggY2FjaGUgdmFsdWVcbiAgICAgICAgICAvLyBhbmQgbW9ycGggaXQgdG8gdGhlIGNoaWxkIG5vZGUuXG4gICAgICAgICAgaWYgKHVubWF0Y2hlZEZyb21FbCAmJiBjb21wYXJlTm9kZU5hbWVzKGN1ckNoaWxkLCB1bm1hdGNoZWRGcm9tRWwpKSB7XG4gICAgICAgICAgICBjdXJDaGlsZC5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZCh1bm1hdGNoZWRGcm9tRWwsIGN1ckNoaWxkKTtcbiAgICAgICAgICAgIG1vcnBoRWwodW5tYXRjaGVkRnJvbUVsLCBjdXJDaGlsZCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGhhbmRsZU5vZGVBZGRlZChjdXJDaGlsZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIHJlY3Vyc2l2ZWx5IGNhbGwgZm9yIGN1ckNoaWxkIGFuZCBpdCdzIGNoaWxkcmVuIHRvIHNlZSBpZiB3ZSBmaW5kIHNvbWV0aGluZyBpblxuICAgICAgICAgIC8vIGZyb21Ob2Rlc0xvb2t1cFxuICAgICAgICAgIGhhbmRsZU5vZGVBZGRlZChjdXJDaGlsZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjdXJDaGlsZCA9IG5leHRTaWJsaW5nO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNsZWFudXBGcm9tRWwoZnJvbUVsLCBjdXJGcm9tTm9kZUNoaWxkLCBjdXJGcm9tTm9kZUtleSkge1xuICAgICAgLy8gV2UgaGF2ZSBwcm9jZXNzZWQgYWxsIG9mIHRoZSBcInRvIG5vZGVzXCIuIElmIGN1ckZyb21Ob2RlQ2hpbGQgaXNcbiAgICAgIC8vIG5vbi1udWxsIHRoZW4gd2Ugc3RpbGwgaGF2ZSBzb21lIGZyb20gbm9kZXMgbGVmdCBvdmVyIHRoYXQgbmVlZFxuICAgICAgLy8gdG8gYmUgcmVtb3ZlZFxuICAgICAgd2hpbGUgKGN1ckZyb21Ob2RlQ2hpbGQpIHtcbiAgICAgICAgdmFyIGZyb21OZXh0U2libGluZyA9IGN1ckZyb21Ob2RlQ2hpbGQubmV4dFNpYmxpbmc7XG4gICAgICAgIGlmICgoY3VyRnJvbU5vZGVLZXkgPSBnZXROb2RlS2V5KGN1ckZyb21Ob2RlQ2hpbGQpKSkge1xuICAgICAgICAgIC8vIFNpbmNlIHRoZSBub2RlIGlzIGtleWVkIGl0IG1pZ2h0IGJlIG1hdGNoZWQgdXAgbGF0ZXIgc28gd2UgZGVmZXJcbiAgICAgICAgICAvLyB0aGUgYWN0dWFsIHJlbW92YWwgdG8gbGF0ZXJcbiAgICAgICAgICBhZGRLZXllZFJlbW92YWwoY3VyRnJvbU5vZGVLZXkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIE5PVEU6IHdlIHNraXAgbmVzdGVkIGtleWVkIG5vZGVzIGZyb20gYmVpbmcgcmVtb3ZlZCBzaW5jZSB0aGVyZSBpc1xuICAgICAgICAgIC8vICAgICAgIHN0aWxsIGEgY2hhbmNlIHRoZXkgd2lsbCBiZSBtYXRjaGVkIHVwIGxhdGVyXG4gICAgICAgICAgcmVtb3ZlTm9kZShjdXJGcm9tTm9kZUNoaWxkLCBmcm9tRWwsIHRydWUgLyogc2tpcCBrZXllZCBub2RlcyAqLyk7XG4gICAgICAgIH1cbiAgICAgICAgY3VyRnJvbU5vZGVDaGlsZCA9IGZyb21OZXh0U2libGluZztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBtb3JwaEVsKGZyb21FbCwgdG9FbCwgY2hpbGRyZW5Pbmx5KSB7XG4gICAgICB2YXIgdG9FbEtleSA9IGdldE5vZGVLZXkodG9FbCk7XG5cbiAgICAgIGlmICh0b0VsS2V5KSB7XG4gICAgICAgIC8vIElmIGFuIGVsZW1lbnQgd2l0aCBhbiBJRCBpcyBiZWluZyBtb3JwaGVkIHRoZW4gaXQgd2lsbCBiZSBpbiB0aGUgZmluYWxcbiAgICAgICAgLy8gRE9NIHNvIGNsZWFyIGl0IG91dCBvZiB0aGUgc2F2ZWQgZWxlbWVudHMgY29sbGVjdGlvblxuICAgICAgICBkZWxldGUgZnJvbU5vZGVzTG9va3VwW3RvRWxLZXldO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWNoaWxkcmVuT25seSkge1xuICAgICAgICAvLyBvcHRpb25hbFxuICAgICAgICBpZiAob25CZWZvcmVFbFVwZGF0ZWQoZnJvbUVsLCB0b0VsKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyB1cGRhdGUgYXR0cmlidXRlcyBvbiBvcmlnaW5hbCBET00gZWxlbWVudCBmaXJzdFxuICAgICAgICBtb3JwaEF0dHJzKGZyb21FbCwgdG9FbCk7XG4gICAgICAgIC8vIG9wdGlvbmFsXG4gICAgICAgIG9uRWxVcGRhdGVkKGZyb21FbCk7XG5cbiAgICAgICAgaWYgKG9uQmVmb3JlRWxDaGlsZHJlblVwZGF0ZWQoZnJvbUVsLCB0b0VsKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGZyb21FbC5ub2RlTmFtZSAhPT0gJ1RFWFRBUkVBJykge1xuICAgICAgICBtb3JwaENoaWxkcmVuKGZyb21FbCwgdG9FbCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzcGVjaWFsRWxIYW5kbGVycy5URVhUQVJFQShmcm9tRWwsIHRvRWwpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIG1vcnBoQ2hpbGRyZW4oZnJvbUVsLCB0b0VsKSB7XG4gICAgICB2YXIgc2tpcEZyb20gPSBza2lwRnJvbUNoaWxkcmVuKGZyb21FbCk7XG4gICAgICB2YXIgY3VyVG9Ob2RlQ2hpbGQgPSB0b0VsLmZpcnN0Q2hpbGQ7XG4gICAgICB2YXIgY3VyRnJvbU5vZGVDaGlsZCA9IGZyb21FbC5maXJzdENoaWxkO1xuICAgICAgdmFyIGN1clRvTm9kZUtleTtcbiAgICAgIHZhciBjdXJGcm9tTm9kZUtleTtcblxuICAgICAgdmFyIGZyb21OZXh0U2libGluZztcbiAgICAgIHZhciB0b05leHRTaWJsaW5nO1xuICAgICAgdmFyIG1hdGNoaW5nRnJvbUVsO1xuXG4gICAgICAvLyB3YWxrIHRoZSBjaGlsZHJlblxuICAgICAgb3V0ZXI6IHdoaWxlIChjdXJUb05vZGVDaGlsZCkge1xuICAgICAgICB0b05leHRTaWJsaW5nID0gY3VyVG9Ob2RlQ2hpbGQubmV4dFNpYmxpbmc7XG4gICAgICAgIGN1clRvTm9kZUtleSA9IGdldE5vZGVLZXkoY3VyVG9Ob2RlQ2hpbGQpO1xuXG4gICAgICAgIC8vIHdhbGsgdGhlIGZyb21Ob2RlIGNoaWxkcmVuIGFsbCB0aGUgd2F5IHRocm91Z2hcbiAgICAgICAgd2hpbGUgKCFza2lwRnJvbSAmJiBjdXJGcm9tTm9kZUNoaWxkKSB7XG4gICAgICAgICAgZnJvbU5leHRTaWJsaW5nID0gY3VyRnJvbU5vZGVDaGlsZC5uZXh0U2libGluZztcblxuICAgICAgICAgIGlmIChjdXJUb05vZGVDaGlsZC5pc1NhbWVOb2RlICYmIGN1clRvTm9kZUNoaWxkLmlzU2FtZU5vZGUoY3VyRnJvbU5vZGVDaGlsZCkpIHtcbiAgICAgICAgICAgIGN1clRvTm9kZUNoaWxkID0gdG9OZXh0U2libGluZztcbiAgICAgICAgICAgIGN1ckZyb21Ob2RlQ2hpbGQgPSBmcm9tTmV4dFNpYmxpbmc7XG4gICAgICAgICAgICBjb250aW51ZSBvdXRlcjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjdXJGcm9tTm9kZUtleSA9IGdldE5vZGVLZXkoY3VyRnJvbU5vZGVDaGlsZCk7XG5cbiAgICAgICAgICB2YXIgY3VyRnJvbU5vZGVUeXBlID0gY3VyRnJvbU5vZGVDaGlsZC5ub2RlVHlwZTtcblxuICAgICAgICAgIC8vIHRoaXMgbWVhbnMgaWYgdGhlIGN1ckZyb21Ob2RlQ2hpbGQgZG9lc250IGhhdmUgYSBtYXRjaCB3aXRoIHRoZSBjdXJUb05vZGVDaGlsZFxuICAgICAgICAgIHZhciBpc0NvbXBhdGlibGUgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgICBpZiAoY3VyRnJvbU5vZGVUeXBlID09PSBjdXJUb05vZGVDaGlsZC5ub2RlVHlwZSkge1xuICAgICAgICAgICAgaWYgKGN1ckZyb21Ob2RlVHlwZSA9PT0gRUxFTUVOVF9OT0RFKSB7XG4gICAgICAgICAgICAgIC8vIEJvdGggbm9kZXMgYmVpbmcgY29tcGFyZWQgYXJlIEVsZW1lbnQgbm9kZXNcblxuICAgICAgICAgICAgICBpZiAoY3VyVG9Ob2RlS2V5KSB7XG4gICAgICAgICAgICAgICAgLy8gVGhlIHRhcmdldCBub2RlIGhhcyBhIGtleSBzbyB3ZSB3YW50IHRvIG1hdGNoIGl0IHVwIHdpdGggdGhlIGNvcnJlY3QgZWxlbWVudFxuICAgICAgICAgICAgICAgIC8vIGluIHRoZSBvcmlnaW5hbCBET00gdHJlZVxuICAgICAgICAgICAgICAgIGlmIChjdXJUb05vZGVLZXkgIT09IGN1ckZyb21Ob2RlS2V5KSB7XG4gICAgICAgICAgICAgICAgICAvLyBUaGUgY3VycmVudCBlbGVtZW50IGluIHRoZSBvcmlnaW5hbCBET00gdHJlZSBkb2VzIG5vdCBoYXZlIGEgbWF0Y2hpbmcga2V5IHNvXG4gICAgICAgICAgICAgICAgICAvLyBsZXQncyBjaGVjayBvdXIgbG9va3VwIHRvIHNlZSBpZiB0aGVyZSBpcyBhIG1hdGNoaW5nIGVsZW1lbnQgaW4gdGhlIG9yaWdpbmFsXG4gICAgICAgICAgICAgICAgICAvLyBET00gdHJlZVxuICAgICAgICAgICAgICAgICAgaWYgKChtYXRjaGluZ0Zyb21FbCA9IGZyb21Ob2Rlc0xvb2t1cFtjdXJUb05vZGVLZXldKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZnJvbU5leHRTaWJsaW5nID09PSBtYXRjaGluZ0Zyb21FbCkge1xuICAgICAgICAgICAgICAgICAgICAgIC8vIFNwZWNpYWwgY2FzZSBmb3Igc2luZ2xlIGVsZW1lbnQgcmVtb3ZhbHMuIFRvIGF2b2lkIHJlbW92aW5nIHRoZSBvcmlnaW5hbFxuICAgICAgICAgICAgICAgICAgICAgIC8vIERPTSBub2RlIG91dCBvZiB0aGUgdHJlZSAoc2luY2UgdGhhdCBjYW4gYnJlYWsgQ1NTIHRyYW5zaXRpb25zLCBldGMuKSxcbiAgICAgICAgICAgICAgICAgICAgICAvLyB3ZSB3aWxsIGluc3RlYWQgZGlzY2FyZCB0aGUgY3VycmVudCBub2RlIGFuZCB3YWl0IHVudGlsIHRoZSBuZXh0XG4gICAgICAgICAgICAgICAgICAgICAgLy8gaXRlcmF0aW9uIHRvIHByb3Blcmx5IG1hdGNoIHVwIHRoZSBrZXllZCB0YXJnZXQgZWxlbWVudCB3aXRoIGl0cyBtYXRjaGluZ1xuICAgICAgICAgICAgICAgICAgICAgIC8vIGVsZW1lbnQgaW4gdGhlIG9yaWdpbmFsIHRyZWVcbiAgICAgICAgICAgICAgICAgICAgICBpc0NvbXBhdGlibGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBmb3VuZCBhIG1hdGNoaW5nIGtleWVkIGVsZW1lbnQgc29tZXdoZXJlIGluIHRoZSBvcmlnaW5hbCBET00gdHJlZS5cbiAgICAgICAgICAgICAgICAgICAgICAvLyBMZXQncyBtb3ZlIHRoZSBvcmlnaW5hbCBET00gbm9kZSBpbnRvIHRoZSBjdXJyZW50IHBvc2l0aW9uIGFuZCBtb3JwaFxuICAgICAgICAgICAgICAgICAgICAgIC8vIGl0LlxuXG4gICAgICAgICAgICAgICAgICAgICAgLy8gTk9URTogV2UgdXNlIGluc2VydEJlZm9yZSBpbnN0ZWFkIG9mIHJlcGxhY2VDaGlsZCBiZWNhdXNlIHdlIHdhbnQgdG8gZ28gdGhyb3VnaFxuICAgICAgICAgICAgICAgICAgICAgIC8vIHRoZSBgcmVtb3ZlTm9kZSgpYCBmdW5jdGlvbiBmb3IgdGhlIG5vZGUgdGhhdCBpcyBiZWluZyBkaXNjYXJkZWQgc28gdGhhdFxuICAgICAgICAgICAgICAgICAgICAgIC8vIGFsbCBsaWZlY3ljbGUgaG9va3MgYXJlIGNvcnJlY3RseSBpbnZva2VkXG4gICAgICAgICAgICAgICAgICAgICAgZnJvbUVsLmluc2VydEJlZm9yZShtYXRjaGluZ0Zyb21FbCwgY3VyRnJvbU5vZGVDaGlsZCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAvLyBmcm9tTmV4dFNpYmxpbmcgPSBjdXJGcm9tTm9kZUNoaWxkLm5leHRTaWJsaW5nO1xuXG4gICAgICAgICAgICAgICAgICAgICAgaWYgKGN1ckZyb21Ob2RlS2V5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBTaW5jZSB0aGUgbm9kZSBpcyBrZXllZCBpdCBtaWdodCBiZSBtYXRjaGVkIHVwIGxhdGVyIHNvIHdlIGRlZmVyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGUgYWN0dWFsIHJlbW92YWwgdG8gbGF0ZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZEtleWVkUmVtb3ZhbChjdXJGcm9tTm9kZUtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5PVEU6IHdlIHNraXAgbmVzdGVkIGtleWVkIG5vZGVzIGZyb20gYmVpbmcgcmVtb3ZlZCBzaW5jZSB0aGVyZSBpc1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgc3RpbGwgYSBjaGFuY2UgdGhleSB3aWxsIGJlIG1hdGNoZWQgdXAgbGF0ZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZU5vZGUoY3VyRnJvbU5vZGVDaGlsZCwgZnJvbUVsLCB0cnVlIC8qIHNraXAga2V5ZWQgbm9kZXMgKi8pO1xuICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgIGN1ckZyb21Ob2RlQ2hpbGQgPSBtYXRjaGluZ0Zyb21FbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlIG5vZGVzIGFyZSBub3QgY29tcGF0aWJsZSBzaW5jZSB0aGUgXCJ0b1wiIG5vZGUgaGFzIGEga2V5IGFuZCB0aGVyZVxuICAgICAgICAgICAgICAgICAgICAvLyBpcyBubyBtYXRjaGluZyBrZXllZCBub2RlIGluIHRoZSBzb3VyY2UgdHJlZVxuICAgICAgICAgICAgICAgICAgICBpc0NvbXBhdGlibGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAoY3VyRnJvbU5vZGVLZXkpIHtcbiAgICAgICAgICAgICAgICAvLyBUaGUgb3JpZ2luYWwgaGFzIGEga2V5XG4gICAgICAgICAgICAgICAgaXNDb21wYXRpYmxlID0gZmFsc2U7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpc0NvbXBhdGlibGUgPSBpc0NvbXBhdGlibGUgIT09IGZhbHNlICYmIGNvbXBhcmVOb2RlTmFtZXMoY3VyRnJvbU5vZGVDaGlsZCwgY3VyVG9Ob2RlQ2hpbGQpO1xuICAgICAgICAgICAgICBpZiAoaXNDb21wYXRpYmxlKSB7XG4gICAgICAgICAgICAgICAgLy8gV2UgZm91bmQgY29tcGF0aWJsZSBET00gZWxlbWVudHMgc28gdHJhbnNmb3JtXG4gICAgICAgICAgICAgICAgLy8gdGhlIGN1cnJlbnQgXCJmcm9tXCIgbm9kZSB0byBtYXRjaCB0aGUgY3VycmVudFxuICAgICAgICAgICAgICAgIC8vIHRhcmdldCBET00gbm9kZS5cbiAgICAgICAgICAgICAgICAvLyBNT1JQSFxuICAgICAgICAgICAgICAgIG1vcnBoRWwoY3VyRnJvbU5vZGVDaGlsZCwgY3VyVG9Ob2RlQ2hpbGQpO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY3VyRnJvbU5vZGVUeXBlID09PSBURVhUX05PREUgfHwgY3VyRnJvbU5vZGVUeXBlID09IENPTU1FTlRfTk9ERSkge1xuICAgICAgICAgICAgICAvLyBCb3RoIG5vZGVzIGJlaW5nIGNvbXBhcmVkIGFyZSBUZXh0IG9yIENvbW1lbnQgbm9kZXNcbiAgICAgICAgICAgICAgaXNDb21wYXRpYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgLy8gU2ltcGx5IHVwZGF0ZSBub2RlVmFsdWUgb24gdGhlIG9yaWdpbmFsIG5vZGUgdG9cbiAgICAgICAgICAgICAgLy8gY2hhbmdlIHRoZSB0ZXh0IHZhbHVlXG4gICAgICAgICAgICAgIGlmIChjdXJGcm9tTm9kZUNoaWxkLm5vZGVWYWx1ZSAhPT0gY3VyVG9Ob2RlQ2hpbGQubm9kZVZhbHVlKSB7XG4gICAgICAgICAgICAgICAgY3VyRnJvbU5vZGVDaGlsZC5ub2RlVmFsdWUgPSBjdXJUb05vZGVDaGlsZC5ub2RlVmFsdWU7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChpc0NvbXBhdGlibGUpIHtcbiAgICAgICAgICAgIC8vIEFkdmFuY2UgYm90aCB0aGUgXCJ0b1wiIGNoaWxkIGFuZCB0aGUgXCJmcm9tXCIgY2hpbGQgc2luY2Ugd2UgZm91bmQgYSBtYXRjaFxuICAgICAgICAgICAgLy8gTm90aGluZyBlbHNlIHRvIGRvIGFzIHdlIGFscmVhZHkgcmVjdXJzaXZlbHkgY2FsbGVkIG1vcnBoQ2hpbGRyZW4gYWJvdmVcbiAgICAgICAgICAgIGN1clRvTm9kZUNoaWxkID0gdG9OZXh0U2libGluZztcbiAgICAgICAgICAgIGN1ckZyb21Ob2RlQ2hpbGQgPSBmcm9tTmV4dFNpYmxpbmc7XG4gICAgICAgICAgICBjb250aW51ZSBvdXRlcjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBObyBjb21wYXRpYmxlIG1hdGNoIHNvIHJlbW92ZSB0aGUgb2xkIG5vZGUgZnJvbSB0aGUgRE9NIGFuZCBjb250aW51ZSB0cnlpbmcgdG8gZmluZCBhXG4gICAgICAgICAgLy8gbWF0Y2ggaW4gdGhlIG9yaWdpbmFsIERPTS4gSG93ZXZlciwgd2Ugb25seSBkbyB0aGlzIGlmIHRoZSBmcm9tIG5vZGUgaXMgbm90IGtleWVkXG4gICAgICAgICAgLy8gc2luY2UgaXQgaXMgcG9zc2libGUgdGhhdCBhIGtleWVkIG5vZGUgbWlnaHQgbWF0Y2ggdXAgd2l0aCBhIG5vZGUgc29tZXdoZXJlIGVsc2UgaW4gdGhlXG4gICAgICAgICAgLy8gdGFyZ2V0IHRyZWUgYW5kIHdlIGRvbid0IHdhbnQgdG8gZGlzY2FyZCBpdCBqdXN0IHlldCBzaW5jZSBpdCBzdGlsbCBtaWdodCBmaW5kIGFcbiAgICAgICAgICAvLyBob21lIGluIHRoZSBmaW5hbCBET00gdHJlZS4gQWZ0ZXIgZXZlcnl0aGluZyBpcyBkb25lIHdlIHdpbGwgcmVtb3ZlIGFueSBrZXllZCBub2Rlc1xuICAgICAgICAgIC8vIHRoYXQgZGlkbid0IGZpbmQgYSBob21lXG4gICAgICAgICAgaWYgKGN1ckZyb21Ob2RlS2V5KSB7XG4gICAgICAgICAgICAvLyBTaW5jZSB0aGUgbm9kZSBpcyBrZXllZCBpdCBtaWdodCBiZSBtYXRjaGVkIHVwIGxhdGVyIHNvIHdlIGRlZmVyXG4gICAgICAgICAgICAvLyB0aGUgYWN0dWFsIHJlbW92YWwgdG8gbGF0ZXJcbiAgICAgICAgICAgIGFkZEtleWVkUmVtb3ZhbChjdXJGcm9tTm9kZUtleSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIE5PVEU6IHdlIHNraXAgbmVzdGVkIGtleWVkIG5vZGVzIGZyb20gYmVpbmcgcmVtb3ZlZCBzaW5jZSB0aGVyZSBpc1xuICAgICAgICAgICAgLy8gICAgICAgc3RpbGwgYSBjaGFuY2UgdGhleSB3aWxsIGJlIG1hdGNoZWQgdXAgbGF0ZXJcbiAgICAgICAgICAgIHJlbW92ZU5vZGUoY3VyRnJvbU5vZGVDaGlsZCwgZnJvbUVsLCB0cnVlIC8qIHNraXAga2V5ZWQgbm9kZXMgKi8pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGN1ckZyb21Ob2RlQ2hpbGQgPSBmcm9tTmV4dFNpYmxpbmc7XG4gICAgICAgIH0gLy8gRU5EOiB3aGlsZShjdXJGcm9tTm9kZUNoaWxkKSB7fVxuXG4gICAgICAgIC8vIElmIHdlIGdvdCB0aGlzIGZhciB0aGVuIHdlIGRpZCBub3QgZmluZCBhIGNhbmRpZGF0ZSBtYXRjaCBmb3JcbiAgICAgICAgLy8gb3VyIFwidG8gbm9kZVwiIGFuZCB3ZSBleGhhdXN0ZWQgYWxsIG9mIHRoZSBjaGlsZHJlbiBcImZyb21cIlxuICAgICAgICAvLyBub2Rlcy4gVGhlcmVmb3JlLCB3ZSB3aWxsIGp1c3QgYXBwZW5kIHRoZSBjdXJyZW50IFwidG9cIiBub2RlXG4gICAgICAgIC8vIHRvIHRoZSBlbmRcbiAgICAgICAgaWYgKGN1clRvTm9kZUtleSAmJiAobWF0Y2hpbmdGcm9tRWwgPSBmcm9tTm9kZXNMb29rdXBbY3VyVG9Ob2RlS2V5XSkgJiYgY29tcGFyZU5vZGVOYW1lcyhtYXRjaGluZ0Zyb21FbCwgY3VyVG9Ob2RlQ2hpbGQpKSB7XG4gICAgICAgICAgLy8gTU9SUEhcbiAgICAgICAgICBpZighc2tpcEZyb20peyBhZGRDaGlsZChmcm9tRWwsIG1hdGNoaW5nRnJvbUVsKTsgfVxuICAgICAgICAgIG1vcnBoRWwobWF0Y2hpbmdGcm9tRWwsIGN1clRvTm9kZUNoaWxkKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgb25CZWZvcmVOb2RlQWRkZWRSZXN1bHQgPSBvbkJlZm9yZU5vZGVBZGRlZChjdXJUb05vZGVDaGlsZCk7XG4gICAgICAgICAgaWYgKG9uQmVmb3JlTm9kZUFkZGVkUmVzdWx0ICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgaWYgKG9uQmVmb3JlTm9kZUFkZGVkUmVzdWx0KSB7XG4gICAgICAgICAgICAgIGN1clRvTm9kZUNoaWxkID0gb25CZWZvcmVOb2RlQWRkZWRSZXN1bHQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChjdXJUb05vZGVDaGlsZC5hY3R1YWxpemUpIHtcbiAgICAgICAgICAgICAgY3VyVG9Ob2RlQ2hpbGQgPSBjdXJUb05vZGVDaGlsZC5hY3R1YWxpemUoZnJvbUVsLm93bmVyRG9jdW1lbnQgfHwgZG9jKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFkZENoaWxkKGZyb21FbCwgY3VyVG9Ob2RlQ2hpbGQpO1xuICAgICAgICAgICAgaGFuZGxlTm9kZUFkZGVkKGN1clRvTm9kZUNoaWxkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjdXJUb05vZGVDaGlsZCA9IHRvTmV4dFNpYmxpbmc7XG4gICAgICAgIGN1ckZyb21Ob2RlQ2hpbGQgPSBmcm9tTmV4dFNpYmxpbmc7XG4gICAgICB9XG5cbiAgICAgIGNsZWFudXBGcm9tRWwoZnJvbUVsLCBjdXJGcm9tTm9kZUNoaWxkLCBjdXJGcm9tTm9kZUtleSk7XG5cbiAgICAgIHZhciBzcGVjaWFsRWxIYW5kbGVyID0gc3BlY2lhbEVsSGFuZGxlcnNbZnJvbUVsLm5vZGVOYW1lXTtcbiAgICAgIGlmIChzcGVjaWFsRWxIYW5kbGVyKSB7XG4gICAgICAgIHNwZWNpYWxFbEhhbmRsZXIoZnJvbUVsLCB0b0VsKTtcbiAgICAgIH1cbiAgICB9IC8vIEVORDogbW9ycGhDaGlsZHJlbiguLi4pXG5cbiAgICB2YXIgbW9ycGhlZE5vZGUgPSBmcm9tTm9kZTtcbiAgICB2YXIgbW9ycGhlZE5vZGVUeXBlID0gbW9ycGhlZE5vZGUubm9kZVR5cGU7XG4gICAgdmFyIHRvTm9kZVR5cGUgPSB0b05vZGUubm9kZVR5cGU7XG5cbiAgICBpZiAoIWNoaWxkcmVuT25seSkge1xuICAgICAgLy8gSGFuZGxlIHRoZSBjYXNlIHdoZXJlIHdlIGFyZSBnaXZlbiB0d28gRE9NIG5vZGVzIHRoYXQgYXJlIG5vdFxuICAgICAgLy8gY29tcGF0aWJsZSAoZS5nLiA8ZGl2PiAtLT4gPHNwYW4+IG9yIDxkaXY+IC0tPiBURVhUKVxuICAgICAgaWYgKG1vcnBoZWROb2RlVHlwZSA9PT0gRUxFTUVOVF9OT0RFKSB7XG4gICAgICAgIGlmICh0b05vZGVUeXBlID09PSBFTEVNRU5UX05PREUpIHtcbiAgICAgICAgICBpZiAoIWNvbXBhcmVOb2RlTmFtZXMoZnJvbU5vZGUsIHRvTm9kZSkpIHtcbiAgICAgICAgICAgIG9uTm9kZURpc2NhcmRlZChmcm9tTm9kZSk7XG4gICAgICAgICAgICBtb3JwaGVkTm9kZSA9IG1vdmVDaGlsZHJlbihmcm9tTm9kZSwgY3JlYXRlRWxlbWVudE5TKHRvTm9kZS5ub2RlTmFtZSwgdG9Ob2RlLm5hbWVzcGFjZVVSSSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBHb2luZyBmcm9tIGFuIGVsZW1lbnQgbm9kZSB0byBhIHRleHQgbm9kZVxuICAgICAgICAgIG1vcnBoZWROb2RlID0gdG9Ob2RlO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKG1vcnBoZWROb2RlVHlwZSA9PT0gVEVYVF9OT0RFIHx8IG1vcnBoZWROb2RlVHlwZSA9PT0gQ09NTUVOVF9OT0RFKSB7IC8vIFRleHQgb3IgY29tbWVudCBub2RlXG4gICAgICAgIGlmICh0b05vZGVUeXBlID09PSBtb3JwaGVkTm9kZVR5cGUpIHtcbiAgICAgICAgICBpZiAobW9ycGhlZE5vZGUubm9kZVZhbHVlICE9PSB0b05vZGUubm9kZVZhbHVlKSB7XG4gICAgICAgICAgICBtb3JwaGVkTm9kZS5ub2RlVmFsdWUgPSB0b05vZGUubm9kZVZhbHVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiBtb3JwaGVkTm9kZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBUZXh0IG5vZGUgdG8gc29tZXRoaW5nIGVsc2VcbiAgICAgICAgICBtb3JwaGVkTm9kZSA9IHRvTm9kZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChtb3JwaGVkTm9kZSA9PT0gdG9Ob2RlKSB7XG4gICAgICAvLyBUaGUgXCJ0byBub2RlXCIgd2FzIG5vdCBjb21wYXRpYmxlIHdpdGggdGhlIFwiZnJvbSBub2RlXCIgc28gd2UgaGFkIHRvXG4gICAgICAvLyB0b3NzIG91dCB0aGUgXCJmcm9tIG5vZGVcIiBhbmQgdXNlIHRoZSBcInRvIG5vZGVcIlxuICAgICAgb25Ob2RlRGlzY2FyZGVkKGZyb21Ob2RlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHRvTm9kZS5pc1NhbWVOb2RlICYmIHRvTm9kZS5pc1NhbWVOb2RlKG1vcnBoZWROb2RlKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIG1vcnBoRWwobW9ycGhlZE5vZGUsIHRvTm9kZSwgY2hpbGRyZW5Pbmx5KTtcblxuICAgICAgLy8gV2Ugbm93IG5lZWQgdG8gbG9vcCBvdmVyIGFueSBrZXllZCBub2RlcyB0aGF0IG1pZ2h0IG5lZWQgdG8gYmVcbiAgICAgIC8vIHJlbW92ZWQuIFdlIG9ubHkgZG8gdGhlIHJlbW92YWwgaWYgd2Uga25vdyB0aGF0IHRoZSBrZXllZCBub2RlXG4gICAgICAvLyBuZXZlciBmb3VuZCBhIG1hdGNoLiBXaGVuIGEga2V5ZWQgbm9kZSBpcyBtYXRjaGVkIHVwIHdlIHJlbW92ZVxuICAgICAgLy8gaXQgb3V0IG9mIGZyb21Ob2Rlc0xvb2t1cCBhbmQgd2UgdXNlIGZyb21Ob2Rlc0xvb2t1cCB0byBkZXRlcm1pbmVcbiAgICAgIC8vIGlmIGEga2V5ZWQgbm9kZSBoYXMgYmVlbiBtYXRjaGVkIHVwIG9yIG5vdFxuICAgICAgaWYgKGtleWVkUmVtb3ZhbExpc3QpIHtcbiAgICAgICAgZm9yICh2YXIgaT0wLCBsZW49a2V5ZWRSZW1vdmFsTGlzdC5sZW5ndGg7IGk8bGVuOyBpKyspIHtcbiAgICAgICAgICB2YXIgZWxUb1JlbW92ZSA9IGZyb21Ob2Rlc0xvb2t1cFtrZXllZFJlbW92YWxMaXN0W2ldXTtcbiAgICAgICAgICBpZiAoZWxUb1JlbW92ZSkge1xuICAgICAgICAgICAgcmVtb3ZlTm9kZShlbFRvUmVtb3ZlLCBlbFRvUmVtb3ZlLnBhcmVudE5vZGUsIGZhbHNlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIWNoaWxkcmVuT25seSAmJiBtb3JwaGVkTm9kZSAhPT0gZnJvbU5vZGUgJiYgZnJvbU5vZGUucGFyZW50Tm9kZSkge1xuICAgICAgaWYgKG1vcnBoZWROb2RlLmFjdHVhbGl6ZSkge1xuICAgICAgICBtb3JwaGVkTm9kZSA9IG1vcnBoZWROb2RlLmFjdHVhbGl6ZShmcm9tTm9kZS5vd25lckRvY3VtZW50IHx8IGRvYyk7XG4gICAgICB9XG4gICAgICAvLyBJZiB3ZSBoYWQgdG8gc3dhcCBvdXQgdGhlIGZyb20gbm9kZSB3aXRoIGEgbmV3IG5vZGUgYmVjYXVzZSB0aGUgb2xkXG4gICAgICAvLyBub2RlIHdhcyBub3QgY29tcGF0aWJsZSB3aXRoIHRoZSB0YXJnZXQgbm9kZSB0aGVuIHdlIG5lZWQgdG9cbiAgICAgIC8vIHJlcGxhY2UgdGhlIG9sZCBET00gbm9kZSBpbiB0aGUgb3JpZ2luYWwgRE9NIHRyZWUuIFRoaXMgaXMgb25seVxuICAgICAgLy8gcG9zc2libGUgaWYgdGhlIG9yaWdpbmFsIERPTSBub2RlIHdhcyBwYXJ0IG9mIGEgRE9NIHRyZWUgd2hpY2hcbiAgICAgIC8vIHdlIGtub3cgaXMgdGhlIGNhc2UgaWYgaXQgaGFzIGEgcGFyZW50IG5vZGUuXG4gICAgICBmcm9tTm9kZS5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChtb3JwaGVkTm9kZSwgZnJvbU5vZGUpO1xuICAgIH1cblxuICAgIHJldHVybiBtb3JwaGVkTm9kZTtcbiAgfTtcbn1cblxudmFyIG1vcnBoZG9tID0gbW9ycGhkb21GYWN0b3J5KG1vcnBoQXR0cnMpO1xuXG5leHBvcnQgZGVmYXVsdCBtb3JwaGRvbTtcbiIsICJpbXBvcnQge1xuICBQSFhfQ09NUE9ORU5ULFxuICBQSFhfRElTQUJMRV9XSVRILFxuICBQSFhfRkVFREJBQ0tfRk9SLFxuICBQSFhfUFJVTkUsXG4gIFBIWF9ST09UX0lELFxuICBQSFhfU0VTU0lPTixcbiAgUEhYX1NLSVAsXG4gIFBIWF9TVEFUSUMsXG4gIFBIWF9UUklHR0VSX0FDVElPTixcbiAgUEhYX1VQREFURSxcbiAgUEhYX1NUUkVBTSxcbn0gZnJvbSBcIi4vY29uc3RhbnRzXCJcblxuaW1wb3J0IHtcbiAgZGV0ZWN0RHVwbGljYXRlSWRzLFxuICBpc0NpZFxufSBmcm9tIFwiLi91dGlsc1wiXG5cbmltcG9ydCBET00gZnJvbSBcIi4vZG9tXCJcbmltcG9ydCBET01Qb3N0TW9ycGhSZXN0b3JlciBmcm9tIFwiLi9kb21fcG9zdF9tb3JwaF9yZXN0b3JlclwiXG5pbXBvcnQgbW9ycGhkb20gZnJvbSBcIm1vcnBoZG9tXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRE9NUGF0Y2gge1xuICBzdGF0aWMgcGF0Y2hFbChmcm9tRWwsIHRvRWwsIGFjdGl2ZUVsZW1lbnQpe1xuICAgIG1vcnBoZG9tKGZyb21FbCwgdG9FbCwge1xuICAgICAgY2hpbGRyZW5Pbmx5OiBmYWxzZSxcbiAgICAgIG9uQmVmb3JlRWxVcGRhdGVkOiAoZnJvbUVsLCB0b0VsKSA9PiB7XG4gICAgICAgIGlmKGFjdGl2ZUVsZW1lbnQgJiYgYWN0aXZlRWxlbWVudC5pc1NhbWVOb2RlKGZyb21FbCkgJiYgRE9NLmlzRm9ybUlucHV0KGZyb21FbCkpe1xuICAgICAgICAgIERPTS5tZXJnZUZvY3VzZWRJbnB1dChmcm9tRWwsIHRvRWwpXG4gICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgY29uc3RydWN0b3IodmlldywgY29udGFpbmVyLCBpZCwgaHRtbCwgc3RyZWFtcywgdGFyZ2V0Q0lEKXtcbiAgICB0aGlzLnZpZXcgPSB2aWV3XG4gICAgdGhpcy5saXZlU29ja2V0ID0gdmlldy5saXZlU29ja2V0XG4gICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXJcbiAgICB0aGlzLmlkID0gaWRcbiAgICB0aGlzLnJvb3RJRCA9IHZpZXcucm9vdC5pZFxuICAgIHRoaXMuaHRtbCA9IGh0bWxcbiAgICB0aGlzLnN0cmVhbXMgPSBzdHJlYW1zXG4gICAgdGhpcy5zdHJlYW1JbnNlcnRzID0ge31cbiAgICB0aGlzLnRhcmdldENJRCA9IHRhcmdldENJRFxuICAgIHRoaXMuY2lkUGF0Y2ggPSBpc0NpZCh0aGlzLnRhcmdldENJRClcbiAgICB0aGlzLnBlbmRpbmdSZW1vdmVzID0gW11cbiAgICB0aGlzLnBoeFJlbW92ZSA9IHRoaXMubGl2ZVNvY2tldC5iaW5kaW5nKFwicmVtb3ZlXCIpXG4gICAgdGhpcy5jYWxsYmFja3MgPSB7XG4gICAgICBiZWZvcmVhZGRlZDogW10sIGJlZm9yZXVwZGF0ZWQ6IFtdLCBiZWZvcmVwaHhDaGlsZEFkZGVkOiBbXSxcbiAgICAgIGFmdGVyYWRkZWQ6IFtdLCBhZnRlcnVwZGF0ZWQ6IFtdLCBhZnRlcmRpc2NhcmRlZDogW10sIGFmdGVycGh4Q2hpbGRBZGRlZDogW10sXG4gICAgICBhZnRlcnRyYW5zaXRpb25zRGlzY2FyZGVkOiBbXVxuICAgIH1cbiAgfVxuXG4gIGJlZm9yZShraW5kLCBjYWxsYmFjayl7IHRoaXMuY2FsbGJhY2tzW2BiZWZvcmUke2tpbmR9YF0ucHVzaChjYWxsYmFjaykgfVxuICBhZnRlcihraW5kLCBjYWxsYmFjayl7IHRoaXMuY2FsbGJhY2tzW2BhZnRlciR7a2luZH1gXS5wdXNoKGNhbGxiYWNrKSB9XG5cbiAgdHJhY2tCZWZvcmUoa2luZCwgLi4uYXJncyl7XG4gICAgdGhpcy5jYWxsYmFja3NbYGJlZm9yZSR7a2luZH1gXS5mb3JFYWNoKGNhbGxiYWNrID0+IGNhbGxiYWNrKC4uLmFyZ3MpKVxuICB9XG5cbiAgdHJhY2tBZnRlcihraW5kLCAuLi5hcmdzKXtcbiAgICB0aGlzLmNhbGxiYWNrc1tgYWZ0ZXIke2tpbmR9YF0uZm9yRWFjaChjYWxsYmFjayA9PiBjYWxsYmFjayguLi5hcmdzKSlcbiAgfVxuXG4gIG1hcmtQcnVuYWJsZUNvbnRlbnRGb3JSZW1vdmFsKCl7XG4gICAgbGV0IHBoeFVwZGF0ZSA9IHRoaXMubGl2ZVNvY2tldC5iaW5kaW5nKFBIWF9VUERBVEUpXG4gICAgRE9NLmFsbCh0aGlzLmNvbnRhaW5lciwgYFske3BoeFVwZGF0ZX09JHtQSFhfU1RSRUFNfV1gLCBlbCA9PiBlbC5pbm5lckhUTUwgPSBcIlwiKVxuICAgIERPTS5hbGwodGhpcy5jb250YWluZXIsIGBbJHtwaHhVcGRhdGV9PWFwcGVuZF0gPiAqLCBbJHtwaHhVcGRhdGV9PXByZXBlbmRdID4gKmAsIGVsID0+IHtcbiAgICAgIGVsLnNldEF0dHJpYnV0ZShQSFhfUFJVTkUsIFwiXCIpXG4gICAgfSlcbiAgfVxuXG4gIHBlcmZvcm0oKXtcbiAgICBsZXQge3ZpZXcsIGxpdmVTb2NrZXQsIGNvbnRhaW5lciwgaHRtbH0gPSB0aGlzXG4gICAgbGV0IHRhcmdldENvbnRhaW5lciA9IHRoaXMuaXNDSURQYXRjaCgpID8gdGhpcy50YXJnZXRDSURDb250YWluZXIoaHRtbCkgOiBjb250YWluZXJcbiAgICBpZih0aGlzLmlzQ0lEUGF0Y2goKSAmJiAhdGFyZ2V0Q29udGFpbmVyKXsgcmV0dXJuIH1cblxuICAgIGxldCBmb2N1c2VkID0gbGl2ZVNvY2tldC5nZXRBY3RpdmVFbGVtZW50KClcbiAgICBsZXQge3NlbGVjdGlvblN0YXJ0LCBzZWxlY3Rpb25FbmR9ID0gZm9jdXNlZCAmJiBET00uaGFzU2VsZWN0aW9uUmFuZ2UoZm9jdXNlZCkgPyBmb2N1c2VkIDoge31cbiAgICBsZXQgcGh4VXBkYXRlID0gbGl2ZVNvY2tldC5iaW5kaW5nKFBIWF9VUERBVEUpXG4gICAgbGV0IHBoeEZlZWRiYWNrRm9yID0gbGl2ZVNvY2tldC5iaW5kaW5nKFBIWF9GRUVEQkFDS19GT1IpXG4gICAgbGV0IGRpc2FibGVXaXRoID0gbGl2ZVNvY2tldC5iaW5kaW5nKFBIWF9ESVNBQkxFX1dJVEgpXG4gICAgbGV0IHBoeFRyaWdnZXJFeHRlcm5hbCA9IGxpdmVTb2NrZXQuYmluZGluZyhQSFhfVFJJR0dFUl9BQ1RJT04pXG4gICAgbGV0IGFkZGVkID0gW11cbiAgICBsZXQgdXBkYXRlcyA9IFtdXG4gICAgbGV0IGFwcGVuZFByZXBlbmRVcGRhdGVzID0gW11cblxuICAgIGxldCBleHRlcm5hbEZvcm1UcmlnZ2VyZWQgPSBudWxsXG5cbiAgICBsZXQgZGlmZkhUTUwgPSBsaXZlU29ja2V0LnRpbWUoXCJwcmVtb3JwaCBjb250YWluZXIgcHJlcFwiLCAoKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5idWlsZERpZmZIVE1MKGNvbnRhaW5lciwgaHRtbCwgcGh4VXBkYXRlLCB0YXJnZXRDb250YWluZXIpXG4gICAgfSlcblxuICAgIHRoaXMudHJhY2tCZWZvcmUoXCJhZGRlZFwiLCBjb250YWluZXIpXG4gICAgdGhpcy50cmFja0JlZm9yZShcInVwZGF0ZWRcIiwgY29udGFpbmVyLCBjb250YWluZXIpXG5cbiAgICBsaXZlU29ja2V0LnRpbWUoXCJtb3JwaGRvbVwiLCAoKSA9PiB7XG4gICAgICB0aGlzLnN0cmVhbXMuZm9yRWFjaCgoW2luc2VydHMsIGRlbGV0ZUlkc10pID0+IHtcbiAgICAgICAgdGhpcy5zdHJlYW1JbnNlcnRzID0gT2JqZWN0LmFzc2lnbih0aGlzLnN0cmVhbUluc2VydHMsIGluc2VydHMpXG4gICAgICAgIGRlbGV0ZUlkcy5mb3JFYWNoKGlkID0+IHtcbiAgICAgICAgICBsZXQgY2hpbGQgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcihgW2lkPVwiJHtpZH1cIl1gKVxuICAgICAgICAgIGlmKGNoaWxkKXtcbiAgICAgICAgICAgIGlmKCF0aGlzLm1heWJlUGVuZGluZ1JlbW92ZShjaGlsZCkpe1xuICAgICAgICAgICAgICBjaGlsZC5yZW1vdmUoKVxuICAgICAgICAgICAgICB0aGlzLm9uTm9kZURpc2NhcmRlZChjaGlsZClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICB9KVxuXG4gICAgICBtb3JwaGRvbSh0YXJnZXRDb250YWluZXIsIGRpZmZIVE1MLCB7XG4gICAgICAgIGNoaWxkcmVuT25seTogdGFyZ2V0Q29udGFpbmVyLmdldEF0dHJpYnV0ZShQSFhfQ09NUE9ORU5UKSA9PT0gbnVsbCxcbiAgICAgICAgZ2V0Tm9kZUtleTogKG5vZGUpID0+IHtcbiAgICAgICAgICByZXR1cm4gRE9NLmlzUGh4RGVzdHJveWVkKG5vZGUpID8gbnVsbCA6IG5vZGUuaWRcbiAgICAgICAgfSxcbiAgICAgICAgLy8gc2tpcCBpbmRleGluZyBmcm9tIGNoaWxkcmVuIHdoZW4gY29udGFpbmVyIGlzIHN0cmVhbVxuICAgICAgICBza2lwRnJvbUNoaWxkcmVuOiAoZnJvbSkgPT4geyByZXR1cm4gZnJvbS5nZXRBdHRyaWJ1dGUocGh4VXBkYXRlKSA9PT0gUEhYX1NUUkVBTSB9LFxuICAgICAgICAvLyB0ZWxsIG1vcnBoZG9tIGhvdyB0byBhZGQgYSBjaGlsZFxuICAgICAgICBhZGRDaGlsZDogKHBhcmVudCwgY2hpbGQpID0+IHtcbiAgICAgICAgICBsZXQgc3RyZWFtQXQgPSBjaGlsZC5pZCA/IHRoaXMuc3RyZWFtSW5zZXJ0c1tjaGlsZC5pZF0gOiB1bmRlZmluZWRcbiAgICAgICAgICBpZihzdHJlYW1BdCA9PT0gdW5kZWZpbmVkKSB7IHJldHVybiBwYXJlbnQuYXBwZW5kQ2hpbGQoY2hpbGQpIH1cblxuICAgICAgICAgIC8vIHN0cmVhbWluZ1xuICAgICAgICAgIGlmKHN0cmVhbUF0ID09PSAwKXtcbiAgICAgICAgICAgIHBhcmVudC5pbnNlcnRBZGphY2VudEVsZW1lbnQoXCJhZnRlcmJlZ2luXCIsIGNoaWxkKVxuICAgICAgICAgIH0gZWxzZSBpZihzdHJlYW1BdCA9PT0gLTEpe1xuICAgICAgICAgICAgcGFyZW50LmFwcGVuZENoaWxkKGNoaWxkKVxuICAgICAgICAgIH0gZWxzZSBpZihzdHJlYW1BdCA+IDApe1xuICAgICAgICAgICAgbGV0IHNpYmxpbmcgPSBBcnJheS5mcm9tKHBhcmVudC5jaGlsZHJlbilbc3RyZWFtQXRdXG4gICAgICAgICAgICBwYXJlbnQuaW5zZXJ0QmVmb3JlKGNoaWxkLCBzaWJsaW5nKVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgb25CZWZvcmVOb2RlQWRkZWQ6IChlbCkgPT4ge1xuICAgICAgICAgIHRoaXMudHJhY2tCZWZvcmUoXCJhZGRlZFwiLCBlbClcbiAgICAgICAgICByZXR1cm4gZWxcbiAgICAgICAgfSxcbiAgICAgICAgb25Ob2RlQWRkZWQ6IChlbCkgPT4ge1xuICAgICAgICAgIC8vIGhhY2sgdG8gZml4IFNhZmFyaSBoYW5kbGluZyBvZiBpbWcgc3Jjc2V0IGFuZCB2aWRlbyB0YWdzXG4gICAgICAgICAgaWYoZWwgaW5zdGFuY2VvZiBIVE1MSW1hZ2VFbGVtZW50ICYmIGVsLnNyY3NldCl7XG4gICAgICAgICAgICBlbC5zcmNzZXQgPSBlbC5zcmNzZXRcbiAgICAgICAgICB9IGVsc2UgaWYoZWwgaW5zdGFuY2VvZiBIVE1MVmlkZW9FbGVtZW50ICYmIGVsLmF1dG9wbGF5KXtcbiAgICAgICAgICAgIGVsLnBsYXkoKVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZihET00uaXNOb3dUcmlnZ2VyRm9ybUV4dGVybmFsKGVsLCBwaHhUcmlnZ2VyRXh0ZXJuYWwpKXtcbiAgICAgICAgICAgIGV4dGVybmFsRm9ybVRyaWdnZXJlZCA9IGVsXG4gICAgICAgICAgfVxuICAgICAgICAgIC8vaW5wdXQgaGFuZGxpbmdcbiAgICAgICAgICBET00uZGlzY2FyZEVycm9yKHRhcmdldENvbnRhaW5lciwgZWwsIHBoeEZlZWRiYWNrRm9yKVxuICAgICAgICAgIC8vIG5lc3RlZCB2aWV3IGhhbmRsaW5nXG4gICAgICAgICAgaWYoKERPTS5pc1BoeENoaWxkKGVsKSAmJiB2aWV3Lm93bnNFbGVtZW50KGVsKSkgfHwgRE9NLmlzUGh4U3RpY2t5KGVsKSAmJiB2aWV3Lm93bnNFbGVtZW50KGVsLnBhcmVudE5vZGUpKXtcbiAgICAgICAgICAgIHRoaXMudHJhY2tBZnRlcihcInBoeENoaWxkQWRkZWRcIiwgZWwpXG4gICAgICAgICAgfVxuICAgICAgICAgIGFkZGVkLnB1c2goZWwpXG4gICAgICAgIH0sXG4gICAgICAgIG9uTm9kZURpc2NhcmRlZDogKGVsKSA9PiB0aGlzLm9uTm9kZURpc2NhcmRlZChlbCksXG4gICAgICAgIG9uQmVmb3JlTm9kZURpc2NhcmRlZDogKGVsKSA9PiB7XG4gICAgICAgICAgaWYoZWwuZ2V0QXR0cmlidXRlICYmIGVsLmdldEF0dHJpYnV0ZShQSFhfUFJVTkUpICE9PSBudWxsKXsgcmV0dXJuIHRydWUgfVxuICAgICAgICAgIGlmKGVsLnBhcmVudEVsZW1lbnQgIT09IG51bGwgJiYgZWwuaWQgJiZcbiAgICAgICAgICAgICBET00uaXNQaHhVcGRhdGUoZWwucGFyZW50RWxlbWVudCwgcGh4VXBkYXRlLCBbUEhYX1NUUkVBTSwgXCJhcHBlbmRcIiwgXCJwcmVwZW5kXCJdKSl7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYodGhpcy5tYXliZVBlbmRpbmdSZW1vdmUoZWwpKXsgcmV0dXJuIGZhbHNlIH1cbiAgICAgICAgICBpZih0aGlzLnNraXBDSURTaWJsaW5nKGVsKSl7IHJldHVybiBmYWxzZSB9XG5cbiAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICB9LFxuICAgICAgICBvbkVsVXBkYXRlZDogKGVsKSA9PiB7XG4gICAgICAgICAgaWYoRE9NLmlzTm93VHJpZ2dlckZvcm1FeHRlcm5hbChlbCwgcGh4VHJpZ2dlckV4dGVybmFsKSl7XG4gICAgICAgICAgICBleHRlcm5hbEZvcm1UcmlnZ2VyZWQgPSBlbFxuICAgICAgICAgIH1cbiAgICAgICAgICB1cGRhdGVzLnB1c2goZWwpXG4gICAgICAgICAgdGhpcy5tYXliZVJlT3JkZXJTdHJlYW0oZWwpXG4gICAgICAgIH0sXG4gICAgICAgIG9uQmVmb3JlRWxVcGRhdGVkOiAoZnJvbUVsLCB0b0VsKSA9PiB7XG4gICAgICAgICAgRE9NLmNsZWFuQ2hpbGROb2Rlcyh0b0VsLCBwaHhVcGRhdGUpXG4gICAgICAgICAgaWYodGhpcy5za2lwQ0lEU2libGluZyh0b0VsKSl7IHJldHVybiBmYWxzZSB9XG4gICAgICAgICAgaWYoRE9NLmlzUGh4U3RpY2t5KGZyb21FbCkpeyByZXR1cm4gZmFsc2UgfVxuICAgICAgICAgIGlmKERPTS5pc0lnbm9yZWQoZnJvbUVsLCBwaHhVcGRhdGUpIHx8IChmcm9tRWwuZm9ybSAmJiBmcm9tRWwuZm9ybS5pc1NhbWVOb2RlKGV4dGVybmFsRm9ybVRyaWdnZXJlZCkpKXtcbiAgICAgICAgICAgIHRoaXMudHJhY2tCZWZvcmUoXCJ1cGRhdGVkXCIsIGZyb21FbCwgdG9FbClcbiAgICAgICAgICAgIERPTS5tZXJnZUF0dHJzKGZyb21FbCwgdG9FbCwge2lzSWdub3JlZDogdHJ1ZX0pXG4gICAgICAgICAgICB1cGRhdGVzLnB1c2goZnJvbUVsKVxuICAgICAgICAgICAgRE9NLmFwcGx5U3RpY2t5T3BlcmF0aW9ucyhmcm9tRWwpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYoZnJvbUVsLnR5cGUgPT09IFwibnVtYmVyXCIgJiYgKGZyb21FbC52YWxpZGl0eSAmJiBmcm9tRWwudmFsaWRpdHkuYmFkSW5wdXQpKXsgcmV0dXJuIGZhbHNlIH1cbiAgICAgICAgICBpZighRE9NLnN5bmNQZW5kaW5nUmVmKGZyb21FbCwgdG9FbCwgZGlzYWJsZVdpdGgpKXtcbiAgICAgICAgICAgIGlmKERPTS5pc1VwbG9hZElucHV0KGZyb21FbCkpe1xuICAgICAgICAgICAgICB0aGlzLnRyYWNrQmVmb3JlKFwidXBkYXRlZFwiLCBmcm9tRWwsIHRvRWwpXG4gICAgICAgICAgICAgIHVwZGF0ZXMucHVzaChmcm9tRWwpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBET00uYXBwbHlTdGlja3lPcGVyYXRpb25zKGZyb21FbClcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIG5lc3RlZCB2aWV3IGhhbmRsaW5nXG4gICAgICAgICAgaWYoRE9NLmlzUGh4Q2hpbGQodG9FbCkpe1xuICAgICAgICAgICAgbGV0IHByZXZTZXNzaW9uID0gZnJvbUVsLmdldEF0dHJpYnV0ZShQSFhfU0VTU0lPTilcbiAgICAgICAgICAgIERPTS5tZXJnZUF0dHJzKGZyb21FbCwgdG9FbCwge2V4Y2x1ZGU6IFtQSFhfU1RBVElDXX0pXG4gICAgICAgICAgICBpZihwcmV2U2Vzc2lvbiAhPT0gXCJcIil7IGZyb21FbC5zZXRBdHRyaWJ1dGUoUEhYX1NFU1NJT04sIHByZXZTZXNzaW9uKSB9XG4gICAgICAgICAgICBmcm9tRWwuc2V0QXR0cmlidXRlKFBIWF9ST09UX0lELCB0aGlzLnJvb3RJRClcbiAgICAgICAgICAgIERPTS5hcHBseVN0aWNreU9wZXJhdGlvbnMoZnJvbUVsKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gaW5wdXQgaGFuZGxpbmdcbiAgICAgICAgICBET00uY29weVByaXZhdGVzKHRvRWwsIGZyb21FbClcbiAgICAgICAgICBET00uZGlzY2FyZEVycm9yKHRhcmdldENvbnRhaW5lciwgdG9FbCwgcGh4RmVlZGJhY2tGb3IpXG5cbiAgICAgICAgICBsZXQgaXNGb2N1c2VkRm9ybUVsID0gZm9jdXNlZCAmJiBmcm9tRWwuaXNTYW1lTm9kZShmb2N1c2VkKSAmJiBET00uaXNGb3JtSW5wdXQoZnJvbUVsKVxuICAgICAgICAgIGlmKGlzRm9jdXNlZEZvcm1FbCAmJiBmcm9tRWwudHlwZSAhPT0gXCJoaWRkZW5cIil7XG4gICAgICAgICAgICB0aGlzLnRyYWNrQmVmb3JlKFwidXBkYXRlZFwiLCBmcm9tRWwsIHRvRWwpXG4gICAgICAgICAgICBET00ubWVyZ2VGb2N1c2VkSW5wdXQoZnJvbUVsLCB0b0VsKVxuICAgICAgICAgICAgRE9NLnN5bmNBdHRyc1RvUHJvcHMoZnJvbUVsKVxuICAgICAgICAgICAgdXBkYXRlcy5wdXNoKGZyb21FbClcbiAgICAgICAgICAgIERPTS5hcHBseVN0aWNreU9wZXJhdGlvbnMoZnJvbUVsKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmKERPTS5pc1BoeFVwZGF0ZSh0b0VsLCBwaHhVcGRhdGUsIFtcImFwcGVuZFwiLCBcInByZXBlbmRcIl0pKXtcbiAgICAgICAgICAgICAgYXBwZW5kUHJlcGVuZFVwZGF0ZXMucHVzaChuZXcgRE9NUG9zdE1vcnBoUmVzdG9yZXIoZnJvbUVsLCB0b0VsLCB0b0VsLmdldEF0dHJpYnV0ZShwaHhVcGRhdGUpKSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIERPTS5zeW5jQXR0cnNUb1Byb3BzKHRvRWwpXG4gICAgICAgICAgICBET00uYXBwbHlTdGlja3lPcGVyYXRpb25zKHRvRWwpXG4gICAgICAgICAgICB0aGlzLnRyYWNrQmVmb3JlKFwidXBkYXRlZFwiLCBmcm9tRWwsIHRvRWwpXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9KVxuXG4gICAgaWYobGl2ZVNvY2tldC5pc0RlYnVnRW5hYmxlZCgpKXsgZGV0ZWN0RHVwbGljYXRlSWRzKCkgfVxuXG4gICAgaWYoYXBwZW5kUHJlcGVuZFVwZGF0ZXMubGVuZ3RoID4gMCl7XG4gICAgICBsaXZlU29ja2V0LnRpbWUoXCJwb3N0LW1vcnBoIGFwcGVuZC9wcmVwZW5kIHJlc3RvcmF0aW9uXCIsICgpID0+IHtcbiAgICAgICAgYXBwZW5kUHJlcGVuZFVwZGF0ZXMuZm9yRWFjaCh1cGRhdGUgPT4gdXBkYXRlLnBlcmZvcm0oKSlcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgbGl2ZVNvY2tldC5zaWxlbmNlRXZlbnRzKCgpID0+IERPTS5yZXN0b3JlRm9jdXMoZm9jdXNlZCwgc2VsZWN0aW9uU3RhcnQsIHNlbGVjdGlvbkVuZCkpXG4gICAgRE9NLmRpc3BhdGNoRXZlbnQoZG9jdW1lbnQsIFwicGh4OnVwZGF0ZVwiKVxuICAgIGFkZGVkLmZvckVhY2goZWwgPT4gdGhpcy50cmFja0FmdGVyKFwiYWRkZWRcIiwgZWwpKVxuICAgIHVwZGF0ZXMuZm9yRWFjaChlbCA9PiB0aGlzLnRyYWNrQWZ0ZXIoXCJ1cGRhdGVkXCIsIGVsKSlcblxuICAgIHRoaXMudHJhbnNpdGlvblBlbmRpbmdSZW1vdmVzKClcblxuICAgIGlmKGV4dGVybmFsRm9ybVRyaWdnZXJlZCl7XG4gICAgICBsaXZlU29ja2V0LnVubG9hZCgpXG4gICAgICBleHRlcm5hbEZvcm1UcmlnZ2VyZWQuc3VibWl0KClcbiAgICB9XG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIG9uTm9kZURpc2NhcmRlZChlbCl7XG4gICAgLy8gbmVzdGVkIHZpZXcgaGFuZGxpbmdcbiAgICBpZihET00uaXNQaHhDaGlsZChlbCkgfHwgRE9NLmlzUGh4U3RpY2t5KGVsKSl7IHRoaXMubGl2ZVNvY2tldC5kZXN0cm95Vmlld0J5RWwoZWwpIH1cbiAgICB0aGlzLnRyYWNrQWZ0ZXIoXCJkaXNjYXJkZWRcIiwgZWwpXG4gIH1cblxuICBtYXliZVBlbmRpbmdSZW1vdmUobm9kZSl7XG4gICAgaWYobm9kZS5nZXRBdHRyaWJ1dGUgJiYgbm9kZS5nZXRBdHRyaWJ1dGUodGhpcy5waHhSZW1vdmUpICE9PSBudWxsKXtcbiAgICAgIHRoaXMucGVuZGluZ1JlbW92ZXMucHVzaChub2RlKVxuICAgICAgcmV0dXJuIHRydWVcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICB9XG5cbiAgbWF5YmVSZU9yZGVyU3RyZWFtKGVsKXtcbiAgICBsZXQgc3RyZWFtQXQgPSBlbC5pZCA/IHRoaXMuc3RyZWFtSW5zZXJ0c1tlbC5pZF0gOiB1bmRlZmluZWRcbiAgICBpZihzdHJlYW1BdCA9PT0gdW5kZWZpbmVkKXsgcmV0dXJuIH1cblxuICAgIGlmKHN0cmVhbUF0ID09PSAwKXtcbiAgICAgIGVsLnBhcmVudEVsZW1lbnQuaW5zZXJ0QmVmb3JlKGVsLCBlbC5wYXJlbnRFbGVtZW50LmZpcnN0RWxlbWVudENoaWxkKVxuICAgIH0gZWxzZSBpZihzdHJlYW1BdCA+IDApe1xuICAgICAgbGV0IGNoaWxkcmVuID0gQXJyYXkuZnJvbShlbC5wYXJlbnRFbGVtZW50LmNoaWxkcmVuKVxuICAgICAgbGV0IG9sZEluZGV4ID0gY2hpbGRyZW4uaW5kZXhPZihlbClcbiAgICAgIGlmKHN0cmVhbUF0ID49IGNoaWxkcmVuLmxlbmd0aCAtIDEpe1xuICAgICAgICBlbC5wYXJlbnRFbGVtZW50LmFwcGVuZENoaWxkKGVsKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGV0IHNpYmxpbmcgPSBjaGlsZHJlbltzdHJlYW1BdF1cbiAgICAgICAgaWYob2xkSW5kZXggPiBzdHJlYW1BdCl7XG4gICAgICAgICAgZWwucGFyZW50RWxlbWVudC5pbnNlcnRCZWZvcmUoZWwsIHNpYmxpbmcpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZWwucGFyZW50RWxlbWVudC5pbnNlcnRCZWZvcmUoZWwsIHNpYmxpbmcubmV4dEVsZW1lbnRTaWJsaW5nKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgdHJhbnNpdGlvblBlbmRpbmdSZW1vdmVzKCl7XG4gICAgbGV0IHtwZW5kaW5nUmVtb3ZlcywgbGl2ZVNvY2tldH0gPSB0aGlzXG4gICAgaWYocGVuZGluZ1JlbW92ZXMubGVuZ3RoID4gMCl7XG4gICAgICBsaXZlU29ja2V0LnRyYW5zaXRpb25SZW1vdmVzKHBlbmRpbmdSZW1vdmVzKVxuICAgICAgbGl2ZVNvY2tldC5yZXF1ZXN0RE9NVXBkYXRlKCgpID0+IHtcbiAgICAgICAgcGVuZGluZ1JlbW92ZXMuZm9yRWFjaChlbCA9PiB7XG4gICAgICAgICAgbGV0IGNoaWxkID0gRE9NLmZpcnN0UGh4Q2hpbGQoZWwpXG4gICAgICAgICAgaWYoY2hpbGQpeyBsaXZlU29ja2V0LmRlc3Ryb3lWaWV3QnlFbChjaGlsZCkgfVxuICAgICAgICAgIGVsLnJlbW92ZSgpXG4gICAgICAgIH0pXG4gICAgICAgIHRoaXMudHJhY2tBZnRlcihcInRyYW5zaXRpb25zRGlzY2FyZGVkXCIsIHBlbmRpbmdSZW1vdmVzKVxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICBpc0NJRFBhdGNoKCl7IHJldHVybiB0aGlzLmNpZFBhdGNoIH1cblxuICBza2lwQ0lEU2libGluZyhlbCl7XG4gICAgcmV0dXJuIGVsLm5vZGVUeXBlID09PSBOb2RlLkVMRU1FTlRfTk9ERSAmJiBlbC5nZXRBdHRyaWJ1dGUoUEhYX1NLSVApICE9PSBudWxsXG4gIH1cblxuICB0YXJnZXRDSURDb250YWluZXIoaHRtbCl7XG4gICAgaWYoIXRoaXMuaXNDSURQYXRjaCgpKXsgcmV0dXJuIH1cbiAgICBsZXQgW2ZpcnN0LCAuLi5yZXN0XSA9IERPTS5maW5kQ29tcG9uZW50Tm9kZUxpc3QodGhpcy5jb250YWluZXIsIHRoaXMudGFyZ2V0Q0lEKVxuICAgIGlmKHJlc3QubGVuZ3RoID09PSAwICYmIERPTS5jaGlsZE5vZGVMZW5ndGgoaHRtbCkgPT09IDEpe1xuICAgICAgcmV0dXJuIGZpcnN0XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBmaXJzdCAmJiBmaXJzdC5wYXJlbnROb2RlXG4gICAgfVxuICB9XG5cbiAgLy8gYnVpbGRzIEhUTUwgZm9yIG1vcnBoZG9tIHBhdGNoXG4gIC8vIC0gZm9yIGZ1bGwgcGF0Y2hlcyBvZiBMaXZlVmlldyBvciBhIGNvbXBvbmVudCB3aXRoIGEgc2luZ2xlXG4gIC8vICAgcm9vdCBub2RlLCBzaW1wbHkgcmV0dXJucyB0aGUgSFRNTFxuICAvLyAtIGZvciBwYXRjaGVzIG9mIGEgY29tcG9uZW50IHdpdGggbXVsdGlwbGUgcm9vdCBub2RlcywgdGhlXG4gIC8vICAgcGFyZW50IG5vZGUgYmVjb21lcyB0aGUgdGFyZ2V0IGNvbnRhaW5lciBhbmQgbm9uLWNvbXBvbmVudFxuICAvLyAgIHNpYmxpbmdzIGFyZSBtYXJrZWQgYXMgc2tpcC5cbiAgYnVpbGREaWZmSFRNTChjb250YWluZXIsIGh0bWwsIHBoeFVwZGF0ZSwgdGFyZ2V0Q29udGFpbmVyKXtcbiAgICBsZXQgaXNDSURQYXRjaCA9IHRoaXMuaXNDSURQYXRjaCgpXG4gICAgbGV0IGlzQ0lEV2l0aFNpbmdsZVJvb3QgPSBpc0NJRFBhdGNoICYmIHRhcmdldENvbnRhaW5lci5nZXRBdHRyaWJ1dGUoUEhYX0NPTVBPTkVOVCkgPT09IHRoaXMudGFyZ2V0Q0lELnRvU3RyaW5nKClcbiAgICBpZighaXNDSURQYXRjaCB8fCBpc0NJRFdpdGhTaW5nbGVSb290KXtcbiAgICAgIHJldHVybiBodG1sXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGNvbXBvbmVudCBwYXRjaCB3aXRoIG11bHRpcGxlIENJRCByb290c1xuICAgICAgbGV0IGRpZmZDb250YWluZXIgPSBudWxsXG4gICAgICBsZXQgdGVtcGxhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGVtcGxhdGVcIilcbiAgICAgIGRpZmZDb250YWluZXIgPSBET00uY2xvbmVOb2RlKHRhcmdldENvbnRhaW5lcilcbiAgICAgIGxldCBbZmlyc3RDb21wb25lbnQsIC4uLnJlc3RdID0gRE9NLmZpbmRDb21wb25lbnROb2RlTGlzdChkaWZmQ29udGFpbmVyLCB0aGlzLnRhcmdldENJRClcbiAgICAgIHRlbXBsYXRlLmlubmVySFRNTCA9IGh0bWxcbiAgICAgIHJlc3QuZm9yRWFjaChlbCA9PiBlbC5yZW1vdmUoKSlcbiAgICAgIEFycmF5LmZyb20oZGlmZkNvbnRhaW5lci5jaGlsZE5vZGVzKS5mb3JFYWNoKGNoaWxkID0+IHtcbiAgICAgICAgLy8gd2UgY2FuIG9ubHkgc2tpcCB0cmFja2FibGUgbm9kZXMgd2l0aCBhbiBJRFxuICAgICAgICBpZihjaGlsZC5pZCAmJiBjaGlsZC5ub2RlVHlwZSA9PT0gTm9kZS5FTEVNRU5UX05PREUgJiYgY2hpbGQuZ2V0QXR0cmlidXRlKFBIWF9DT01QT05FTlQpICE9PSB0aGlzLnRhcmdldENJRC50b1N0cmluZygpKXtcbiAgICAgICAgICBjaGlsZC5zZXRBdHRyaWJ1dGUoUEhYX1NLSVAsIFwiXCIpXG4gICAgICAgICAgY2hpbGQuaW5uZXJIVE1MID0gXCJcIlxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgQXJyYXkuZnJvbSh0ZW1wbGF0ZS5jb250ZW50LmNoaWxkTm9kZXMpLmZvckVhY2goZWwgPT4gZGlmZkNvbnRhaW5lci5pbnNlcnRCZWZvcmUoZWwsIGZpcnN0Q29tcG9uZW50KSlcbiAgICAgIGZpcnN0Q29tcG9uZW50LnJlbW92ZSgpXG4gICAgICByZXR1cm4gZGlmZkNvbnRhaW5lci5vdXRlckhUTUxcbiAgICB9XG4gIH1cblxuICBpbmRleE9mKHBhcmVudCwgY2hpbGQpeyByZXR1cm4gQXJyYXkuZnJvbShwYXJlbnQuY2hpbGRyZW4pLmluZGV4T2YoY2hpbGQpIH1cbn1cbiIsICJpbXBvcnQge1xuICBDT01QT05FTlRTLFxuICBEWU5BTUlDUyxcbiAgVEVNUExBVEVTLFxuICBFVkVOVFMsXG4gIFBIWF9DT01QT05FTlQsXG4gIFBIWF9TS0lQLFxuICBSRVBMWSxcbiAgU1RBVElDLFxuICBUSVRMRSxcbiAgU1RSRUFNLFxufSBmcm9tIFwiLi9jb25zdGFudHNcIlxuXG5pbXBvcnQge1xuICBpc09iamVjdCxcbiAgbG9nRXJyb3IsXG4gIGlzQ2lkLFxufSBmcm9tIFwiLi91dGlsc1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJlbmRlcmVkIHtcbiAgc3RhdGljIGV4dHJhY3QoZGlmZil7XG4gICAgbGV0IHtbUkVQTFldOiByZXBseSwgW0VWRU5UU106IGV2ZW50cywgW1RJVExFXTogdGl0bGV9ID0gZGlmZlxuICAgIGRlbGV0ZSBkaWZmW1JFUExZXVxuICAgIGRlbGV0ZSBkaWZmW0VWRU5UU11cbiAgICBkZWxldGUgZGlmZltUSVRMRV1cbiAgICByZXR1cm4ge2RpZmYsIHRpdGxlLCByZXBseTogcmVwbHkgfHwgbnVsbCwgZXZlbnRzOiBldmVudHMgfHwgW119XG4gIH1cblxuICBjb25zdHJ1Y3Rvcih2aWV3SWQsIHJlbmRlcmVkKXtcbiAgICB0aGlzLnZpZXdJZCA9IHZpZXdJZFxuICAgIHRoaXMucmVuZGVyZWQgPSB7fVxuICAgIHRoaXMubWVyZ2VEaWZmKHJlbmRlcmVkKVxuICB9XG5cbiAgcGFyZW50Vmlld0lkKCl7IHJldHVybiB0aGlzLnZpZXdJZCB9XG5cbiAgdG9TdHJpbmcob25seUNpZHMpe1xuICAgIGxldCBbc3RyLCBzdHJlYW1zXSA9IHRoaXMucmVjdXJzaXZlVG9TdHJpbmcodGhpcy5yZW5kZXJlZCwgdGhpcy5yZW5kZXJlZFtDT01QT05FTlRTXSwgb25seUNpZHMpXG4gICAgcmV0dXJuIFtzdHIsIHN0cmVhbXNdXG4gIH1cblxuICByZWN1cnNpdmVUb1N0cmluZyhyZW5kZXJlZCwgY29tcG9uZW50cyA9IHJlbmRlcmVkW0NPTVBPTkVOVFNdLCBvbmx5Q2lkcyl7XG4gICAgb25seUNpZHMgPSBvbmx5Q2lkcyA/IG5ldyBTZXQob25seUNpZHMpIDogbnVsbFxuICAgIGxldCBvdXRwdXQgPSB7YnVmZmVyOiBcIlwiLCBjb21wb25lbnRzOiBjb21wb25lbnRzLCBvbmx5Q2lkczogb25seUNpZHMsIHN0cmVhbXM6IG5ldyBTZXQoKX1cbiAgICB0aGlzLnRvT3V0cHV0QnVmZmVyKHJlbmRlcmVkLCBudWxsLCBvdXRwdXQpXG4gICAgcmV0dXJuIFtvdXRwdXQuYnVmZmVyLCBvdXRwdXQuc3RyZWFtc11cbiAgfVxuXG4gIGNvbXBvbmVudENJRHMoZGlmZil7IHJldHVybiBPYmplY3Qua2V5cyhkaWZmW0NPTVBPTkVOVFNdIHx8IHt9KS5tYXAoaSA9PiBwYXJzZUludChpKSkgfVxuXG4gIGlzQ29tcG9uZW50T25seURpZmYoZGlmZil7XG4gICAgaWYoIWRpZmZbQ09NUE9ORU5UU10peyByZXR1cm4gZmFsc2UgfVxuICAgIHJldHVybiBPYmplY3Qua2V5cyhkaWZmKS5sZW5ndGggPT09IDFcbiAgfVxuXG4gIGdldENvbXBvbmVudChkaWZmLCBjaWQpeyByZXR1cm4gZGlmZltDT01QT05FTlRTXVtjaWRdIH1cblxuICBtZXJnZURpZmYoZGlmZil7XG4gICAgbGV0IG5ld2MgPSBkaWZmW0NPTVBPTkVOVFNdXG4gICAgbGV0IGNhY2hlID0ge31cbiAgICBkZWxldGUgZGlmZltDT01QT05FTlRTXVxuICAgIHRoaXMucmVuZGVyZWQgPSB0aGlzLm11dGFibGVNZXJnZSh0aGlzLnJlbmRlcmVkLCBkaWZmKVxuICAgIHRoaXMucmVuZGVyZWRbQ09NUE9ORU5UU10gPSB0aGlzLnJlbmRlcmVkW0NPTVBPTkVOVFNdIHx8IHt9XG5cbiAgICBpZihuZXdjKXtcbiAgICAgIGxldCBvbGRjID0gdGhpcy5yZW5kZXJlZFtDT01QT05FTlRTXVxuXG4gICAgICBmb3IobGV0IGNpZCBpbiBuZXdjKXtcbiAgICAgICAgbmV3Y1tjaWRdID0gdGhpcy5jYWNoZWRGaW5kQ29tcG9uZW50KGNpZCwgbmV3Y1tjaWRdLCBvbGRjLCBuZXdjLCBjYWNoZSlcbiAgICAgIH1cblxuICAgICAgZm9yKGxldCBjaWQgaW4gbmV3Yyl7IG9sZGNbY2lkXSA9IG5ld2NbY2lkXSB9XG4gICAgICBkaWZmW0NPTVBPTkVOVFNdID0gbmV3Y1xuICAgIH1cbiAgfVxuXG4gIGNhY2hlZEZpbmRDb21wb25lbnQoY2lkLCBjZGlmZiwgb2xkYywgbmV3YywgY2FjaGUpe1xuICAgIGlmKGNhY2hlW2NpZF0pe1xuICAgICAgcmV0dXJuIGNhY2hlW2NpZF1cbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IG5kaWZmLCBzdGF0LCBzY2lkID0gY2RpZmZbU1RBVElDXVxuXG4gICAgICBpZihpc0NpZChzY2lkKSl7XG4gICAgICAgIGxldCB0ZGlmZlxuXG4gICAgICAgIGlmKHNjaWQgPiAwKXtcbiAgICAgICAgICB0ZGlmZiA9IHRoaXMuY2FjaGVkRmluZENvbXBvbmVudChzY2lkLCBuZXdjW3NjaWRdLCBvbGRjLCBuZXdjLCBjYWNoZSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0ZGlmZiA9IG9sZGNbLXNjaWRdXG4gICAgICAgIH1cblxuICAgICAgICBzdGF0ID0gdGRpZmZbU1RBVElDXVxuICAgICAgICBuZGlmZiA9IHRoaXMuY2xvbmVNZXJnZSh0ZGlmZiwgY2RpZmYpXG4gICAgICAgIG5kaWZmW1NUQVRJQ10gPSBzdGF0XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZGlmZiA9IGNkaWZmW1NUQVRJQ10gIT09IHVuZGVmaW5lZCA/IGNkaWZmIDogdGhpcy5jbG9uZU1lcmdlKG9sZGNbY2lkXSB8fCB7fSwgY2RpZmYpXG4gICAgICB9XG5cbiAgICAgIGNhY2hlW2NpZF0gPSBuZGlmZlxuICAgICAgcmV0dXJuIG5kaWZmXG4gICAgfVxuICB9XG5cbiAgbXV0YWJsZU1lcmdlKHRhcmdldCwgc291cmNlKXtcbiAgICBpZihzb3VyY2VbU1RBVElDXSAhPT0gdW5kZWZpbmVkKXtcbiAgICAgIHJldHVybiBzb3VyY2VcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5kb011dGFibGVNZXJnZSh0YXJnZXQsIHNvdXJjZSlcbiAgICAgIHJldHVybiB0YXJnZXRcbiAgICB9XG4gIH1cblxuICBkb011dGFibGVNZXJnZSh0YXJnZXQsIHNvdXJjZSl7XG4gICAgZm9yKGxldCBrZXkgaW4gc291cmNlKXtcbiAgICAgIGxldCB2YWwgPSBzb3VyY2Vba2V5XVxuICAgICAgbGV0IHRhcmdldFZhbCA9IHRhcmdldFtrZXldXG4gICAgICBsZXQgaXNPYmpWYWwgPSBpc09iamVjdCh2YWwpXG4gICAgICBpZihpc09ialZhbCAmJiB2YWxbU1RBVElDXSA9PT0gdW5kZWZpbmVkICYmIGlzT2JqZWN0KHRhcmdldFZhbCkpe1xuICAgICAgICB0aGlzLmRvTXV0YWJsZU1lcmdlKHRhcmdldFZhbCwgdmFsKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGFyZ2V0W2tleV0gPSB2YWxcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBjbG9uZU1lcmdlKHRhcmdldCwgc291cmNlKXtcbiAgICBsZXQgbWVyZ2VkID0gey4uLnRhcmdldCwgLi4uc291cmNlfVxuICAgIGZvcihsZXQga2V5IGluIG1lcmdlZCl7XG4gICAgICBsZXQgdmFsID0gc291cmNlW2tleV1cbiAgICAgIGxldCB0YXJnZXRWYWwgPSB0YXJnZXRba2V5XVxuICAgICAgaWYoaXNPYmplY3QodmFsKSAmJiB2YWxbU1RBVElDXSA9PT0gdW5kZWZpbmVkICYmIGlzT2JqZWN0KHRhcmdldFZhbCkpe1xuICAgICAgICBtZXJnZWRba2V5XSA9IHRoaXMuY2xvbmVNZXJnZSh0YXJnZXRWYWwsIHZhbClcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1lcmdlZFxuICB9XG5cbiAgY29tcG9uZW50VG9TdHJpbmcoY2lkKXtcbiAgICBsZXQgW3N0ciwgc3RyZWFtc10gPSB0aGlzLnJlY3Vyc2l2ZUNJRFRvU3RyaW5nKHRoaXMucmVuZGVyZWRbQ09NUE9ORU5UU10sIGNpZClcbiAgICByZXR1cm4gW3N0ciwgc3RyZWFtc11cbiAgfVxuXG4gIHBydW5lQ0lEcyhjaWRzKXtcbiAgICBjaWRzLmZvckVhY2goY2lkID0+IGRlbGV0ZSB0aGlzLnJlbmRlcmVkW0NPTVBPTkVOVFNdW2NpZF0pXG4gIH1cblxuICAvLyBwcml2YXRlXG5cbiAgZ2V0KCl7IHJldHVybiB0aGlzLnJlbmRlcmVkIH1cblxuICBpc05ld0ZpbmdlcnByaW50KGRpZmYgPSB7fSl7IHJldHVybiAhIWRpZmZbU1RBVElDXSB9XG5cbiAgdGVtcGxhdGVTdGF0aWMocGFydCwgdGVtcGxhdGVzKXtcbiAgICBpZih0eXBlb2YgKHBhcnQpID09PSBcIm51bWJlclwiKSB7XG4gICAgICByZXR1cm4gdGVtcGxhdGVzW3BhcnRdXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBwYXJ0XG4gICAgfVxuICB9XG5cbiAgdG9PdXRwdXRCdWZmZXIocmVuZGVyZWQsIHRlbXBsYXRlcywgb3V0cHV0KXtcbiAgICBpZihyZW5kZXJlZFtEWU5BTUlDU10peyByZXR1cm4gdGhpcy5jb21wcmVoZW5zaW9uVG9CdWZmZXIocmVuZGVyZWQsIHRlbXBsYXRlcywgb3V0cHV0KSB9XG4gICAgbGV0IHtbU1RBVElDXTogc3RhdGljc30gPSByZW5kZXJlZFxuICAgIHN0YXRpY3MgPSB0aGlzLnRlbXBsYXRlU3RhdGljKHN0YXRpY3MsIHRlbXBsYXRlcylcblxuICAgIG91dHB1dC5idWZmZXIgKz0gc3RhdGljc1swXVxuICAgIGZvcihsZXQgaSA9IDE7IGkgPCBzdGF0aWNzLmxlbmd0aDsgaSsrKXtcbiAgICAgIHRoaXMuZHluYW1pY1RvQnVmZmVyKHJlbmRlcmVkW2kgLSAxXSwgdGVtcGxhdGVzLCBvdXRwdXQpXG4gICAgICBvdXRwdXQuYnVmZmVyICs9IHN0YXRpY3NbaV1cbiAgICB9XG4gIH1cblxuICBjb21wcmVoZW5zaW9uVG9CdWZmZXIocmVuZGVyZWQsIHRlbXBsYXRlcywgb3V0cHV0KXtcbiAgICBsZXQge1tEWU5BTUlDU106IGR5bmFtaWNzLCBbU1RBVElDXTogc3RhdGljcywgW1NUUkVBTV06IHN0cmVhbX0gPSByZW5kZXJlZFxuICAgIGxldCBbX2luc2VydHMsIGRlbGV0ZUlkc10gPSBzdHJlYW0gfHwgW3t9LCBbXV1cbiAgICBzdGF0aWNzID0gdGhpcy50ZW1wbGF0ZVN0YXRpYyhzdGF0aWNzLCB0ZW1wbGF0ZXMpXG4gICAgbGV0IGNvbXBUZW1wbGF0ZXMgPSB0ZW1wbGF0ZXMgfHwgcmVuZGVyZWRbVEVNUExBVEVTXVxuICAgIGZvcihsZXQgZCA9IDA7IGQgPCBkeW5hbWljcy5sZW5ndGg7IGQrKyl7XG4gICAgICBsZXQgZHluYW1pYyA9IGR5bmFtaWNzW2RdXG4gICAgICBvdXRwdXQuYnVmZmVyICs9IHN0YXRpY3NbMF1cbiAgICAgIGZvcihsZXQgaSA9IDE7IGkgPCBzdGF0aWNzLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgdGhpcy5keW5hbWljVG9CdWZmZXIoZHluYW1pY1tpIC0gMV0sIGNvbXBUZW1wbGF0ZXMsIG91dHB1dClcbiAgICAgICAgb3V0cHV0LmJ1ZmZlciArPSBzdGF0aWNzW2ldXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYoc3RyZWFtICE9PSB1bmRlZmluZWQgJiYgKHJlbmRlcmVkW0RZTkFNSUNTXS5sZW5ndGggPiAwIHx8IGRlbGV0ZUlkcy5sZW5ndGggPiAwKSl7XG4gICAgICByZW5kZXJlZFtEWU5BTUlDU10gPSBbXVxuICAgICAgb3V0cHV0LnN0cmVhbXMuYWRkKHN0cmVhbSlcbiAgICB9XG4gIH1cblxuICBkeW5hbWljVG9CdWZmZXIocmVuZGVyZWQsIHRlbXBsYXRlcywgb3V0cHV0KXtcbiAgICBpZih0eXBlb2YgKHJlbmRlcmVkKSA9PT0gXCJudW1iZXJcIil7XG4gICAgICBsZXQgW3N0ciwgc3RyZWFtc10gPSB0aGlzLnJlY3Vyc2l2ZUNJRFRvU3RyaW5nKG91dHB1dC5jb21wb25lbnRzLCByZW5kZXJlZCwgb3V0cHV0Lm9ubHlDaWRzKVxuICAgICAgb3V0cHV0LmJ1ZmZlciArPSBzdHJcbiAgICAgIG91dHB1dC5zdHJlYW1zID0gbmV3IFNldChbLi4ub3V0cHV0LnN0cmVhbXMsIC4uLnN0cmVhbXNdKVxuICAgIH0gZWxzZSBpZihpc09iamVjdChyZW5kZXJlZCkpe1xuICAgICAgdGhpcy50b091dHB1dEJ1ZmZlcihyZW5kZXJlZCwgdGVtcGxhdGVzLCBvdXRwdXQpXG4gICAgfSBlbHNlIHtcbiAgICAgIG91dHB1dC5idWZmZXIgKz0gcmVuZGVyZWRcbiAgICB9XG4gIH1cblxuICByZWN1cnNpdmVDSURUb1N0cmluZyhjb21wb25lbnRzLCBjaWQsIG9ubHlDaWRzKXtcbiAgICBsZXQgY29tcG9uZW50ID0gY29tcG9uZW50c1tjaWRdIHx8IGxvZ0Vycm9yKGBubyBjb21wb25lbnQgZm9yIENJRCAke2NpZH1gLCBjb21wb25lbnRzKVxuICAgIGxldCB0ZW1wbGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZW1wbGF0ZVwiKVxuICAgIGxldCBbaHRtbCwgc3RyZWFtc10gPSB0aGlzLnJlY3Vyc2l2ZVRvU3RyaW5nKGNvbXBvbmVudCwgY29tcG9uZW50cywgb25seUNpZHMpXG4gICAgdGVtcGxhdGUuaW5uZXJIVE1MID0gaHRtbFxuICAgIGxldCBjb250YWluZXIgPSB0ZW1wbGF0ZS5jb250ZW50XG4gICAgbGV0IHNraXAgPSBvbmx5Q2lkcyAmJiAhb25seUNpZHMuaGFzKGNpZClcblxuICAgIGxldCBbaGFzQ2hpbGROb2RlcywgaGFzQ2hpbGRDb21wb25lbnRzXSA9XG4gICAgICBBcnJheS5mcm9tKGNvbnRhaW5lci5jaGlsZE5vZGVzKS5yZWR1Y2UoKFtoYXNOb2RlcywgaGFzQ29tcG9uZW50c10sIGNoaWxkLCBpKSA9PiB7XG4gICAgICAgIGlmKGNoaWxkLm5vZGVUeXBlID09PSBOb2RlLkVMRU1FTlRfTk9ERSl7XG4gICAgICAgICAgaWYoY2hpbGQuZ2V0QXR0cmlidXRlKFBIWF9DT01QT05FTlQpKXtcbiAgICAgICAgICAgIHJldHVybiBbaGFzTm9kZXMsIHRydWVdXG4gICAgICAgICAgfVxuICAgICAgICAgIGNoaWxkLnNldEF0dHJpYnV0ZShQSFhfQ09NUE9ORU5ULCBjaWQpXG4gICAgICAgICAgaWYoIWNoaWxkLmlkKXsgY2hpbGQuaWQgPSBgJHt0aGlzLnBhcmVudFZpZXdJZCgpfS0ke2NpZH0tJHtpfWAgfVxuICAgICAgICAgIGlmKHNraXApe1xuICAgICAgICAgICAgY2hpbGQuc2V0QXR0cmlidXRlKFBIWF9TS0lQLCBcIlwiKVxuICAgICAgICAgICAgY2hpbGQuaW5uZXJIVE1MID0gXCJcIlxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gW3RydWUsIGhhc0NvbXBvbmVudHNdXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYoY2hpbGQubm9kZVZhbHVlLnRyaW0oKSAhPT0gXCJcIil7XG4gICAgICAgICAgICBsb2dFcnJvcihcIm9ubHkgSFRNTCBlbGVtZW50IHRhZ3MgYXJlIGFsbG93ZWQgYXQgdGhlIHJvb3Qgb2YgY29tcG9uZW50cy5cXG5cXG5cIiArXG4gICAgICAgICAgICAgIGBnb3Q6IFwiJHtjaGlsZC5ub2RlVmFsdWUudHJpbSgpfVwiXFxuXFxuYCArXG4gICAgICAgICAgICAgIFwid2l0aGluOlxcblwiLCB0ZW1wbGF0ZS5pbm5lckhUTUwudHJpbSgpKVxuICAgICAgICAgICAgY2hpbGQucmVwbGFjZVdpdGgodGhpcy5jcmVhdGVTcGFuKGNoaWxkLm5vZGVWYWx1ZSwgY2lkKSlcbiAgICAgICAgICAgIHJldHVybiBbdHJ1ZSwgaGFzQ29tcG9uZW50c11cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2hpbGQucmVtb3ZlKClcbiAgICAgICAgICAgIHJldHVybiBbaGFzTm9kZXMsIGhhc0NvbXBvbmVudHNdXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LCBbZmFsc2UsIGZhbHNlXSlcblxuICAgIGlmKCFoYXNDaGlsZE5vZGVzICYmICFoYXNDaGlsZENvbXBvbmVudHMpe1xuICAgICAgbG9nRXJyb3IoXCJleHBlY3RlZCBhdCBsZWFzdCBvbmUgSFRNTCBlbGVtZW50IHRhZyBpbnNpZGUgYSBjb21wb25lbnQsIGJ1dCB0aGUgY29tcG9uZW50IGlzIGVtcHR5OlxcblwiLFxuICAgICAgICB0ZW1wbGF0ZS5pbm5lckhUTUwudHJpbSgpKVxuICAgICAgcmV0dXJuIFt0aGlzLmNyZWF0ZVNwYW4oXCJcIiwgY2lkKS5vdXRlckhUTUwsIHN0cmVhbXNdXG4gICAgfSBlbHNlIGlmKCFoYXNDaGlsZE5vZGVzICYmIGhhc0NoaWxkQ29tcG9uZW50cyl7XG4gICAgICBsb2dFcnJvcihcImV4cGVjdGVkIGF0IGxlYXN0IG9uZSBIVE1MIGVsZW1lbnQgdGFnIGRpcmVjdGx5IGluc2lkZSBhIGNvbXBvbmVudCwgYnV0IG9ubHkgc3ViY29tcG9uZW50cyB3ZXJlIGZvdW5kLiBBIGNvbXBvbmVudCBtdXN0IHJlbmRlciBhdCBsZWFzdCBvbmUgSFRNTCB0YWcgZGlyZWN0bHkgaW5zaWRlIGl0c2VsZi5cIixcbiAgICAgICAgdGVtcGxhdGUuaW5uZXJIVE1MLnRyaW0oKSlcbiAgICAgIHJldHVybiBbdGVtcGxhdGUuaW5uZXJIVE1MLCBzdHJlYW1zXVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gW3RlbXBsYXRlLmlubmVySFRNTCwgc3RyZWFtc11cbiAgICB9XG4gIH1cblxuICBjcmVhdGVTcGFuKHRleHQsIGNpZCl7XG4gICAgbGV0IHNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKVxuICAgIHNwYW4uaW5uZXJUZXh0ID0gdGV4dFxuICAgIHNwYW4uc2V0QXR0cmlidXRlKFBIWF9DT01QT05FTlQsIGNpZClcbiAgICByZXR1cm4gc3BhblxuICB9XG59XG4iLCAibGV0IHZpZXdIb29rSUQgPSAxXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBWaWV3SG9vayB7XG4gIHN0YXRpYyBtYWtlSUQoKXsgcmV0dXJuIHZpZXdIb29rSUQrKyB9XG4gIHN0YXRpYyBlbGVtZW50SUQoZWwpeyByZXR1cm4gZWwucGh4SG9va0lkIH1cblxuICBjb25zdHJ1Y3Rvcih2aWV3LCBlbCwgY2FsbGJhY2tzKXtcbiAgICB0aGlzLl9fdmlldyA9IHZpZXdcbiAgICB0aGlzLmxpdmVTb2NrZXQgPSB2aWV3LmxpdmVTb2NrZXRcbiAgICB0aGlzLl9fY2FsbGJhY2tzID0gY2FsbGJhY2tzXG4gICAgdGhpcy5fX2xpc3RlbmVycyA9IG5ldyBTZXQoKVxuICAgIHRoaXMuX19pc0Rpc2Nvbm5lY3RlZCA9IGZhbHNlXG4gICAgdGhpcy5lbCA9IGVsXG4gICAgdGhpcy5lbC5waHhIb29rSWQgPSB0aGlzLmNvbnN0cnVjdG9yLm1ha2VJRCgpXG4gICAgZm9yKGxldCBrZXkgaW4gdGhpcy5fX2NhbGxiYWNrcyl7IHRoaXNba2V5XSA9IHRoaXMuX19jYWxsYmFja3Nba2V5XSB9XG4gIH1cblxuICBfX21vdW50ZWQoKXsgdGhpcy5tb3VudGVkICYmIHRoaXMubW91bnRlZCgpIH1cbiAgX191cGRhdGVkKCl7IHRoaXMudXBkYXRlZCAmJiB0aGlzLnVwZGF0ZWQoKSB9XG4gIF9fYmVmb3JlVXBkYXRlKCl7IHRoaXMuYmVmb3JlVXBkYXRlICYmIHRoaXMuYmVmb3JlVXBkYXRlKCkgfVxuICBfX2Rlc3Ryb3llZCgpeyB0aGlzLmRlc3Ryb3llZCAmJiB0aGlzLmRlc3Ryb3llZCgpIH1cbiAgX19yZWNvbm5lY3RlZCgpe1xuICAgIGlmKHRoaXMuX19pc0Rpc2Nvbm5lY3RlZCl7XG4gICAgICB0aGlzLl9faXNEaXNjb25uZWN0ZWQgPSBmYWxzZVxuICAgICAgdGhpcy5yZWNvbm5lY3RlZCAmJiB0aGlzLnJlY29ubmVjdGVkKClcbiAgICB9XG4gIH1cbiAgX19kaXNjb25uZWN0ZWQoKXtcbiAgICB0aGlzLl9faXNEaXNjb25uZWN0ZWQgPSB0cnVlXG4gICAgdGhpcy5kaXNjb25uZWN0ZWQgJiYgdGhpcy5kaXNjb25uZWN0ZWQoKVxuICB9XG5cbiAgcHVzaEV2ZW50KGV2ZW50LCBwYXlsb2FkID0ge30sIG9uUmVwbHkgPSBmdW5jdGlvbiAoKXsgfSl7XG4gICAgcmV0dXJuIHRoaXMuX192aWV3LnB1c2hIb29rRXZlbnQobnVsbCwgZXZlbnQsIHBheWxvYWQsIG9uUmVwbHkpXG4gIH1cblxuICBwdXNoRXZlbnRUbyhwaHhUYXJnZXQsIGV2ZW50LCBwYXlsb2FkID0ge30sIG9uUmVwbHkgPSBmdW5jdGlvbiAoKXsgfSl7XG4gICAgcmV0dXJuIHRoaXMuX192aWV3LndpdGhpblRhcmdldHMocGh4VGFyZ2V0LCAodmlldywgdGFyZ2V0Q3R4KSA9PiB7XG4gICAgICByZXR1cm4gdmlldy5wdXNoSG9va0V2ZW50KHRhcmdldEN0eCwgZXZlbnQsIHBheWxvYWQsIG9uUmVwbHkpXG4gICAgfSlcbiAgfVxuXG4gIGhhbmRsZUV2ZW50KGV2ZW50LCBjYWxsYmFjayl7XG4gICAgbGV0IGNhbGxiYWNrUmVmID0gKGN1c3RvbUV2ZW50LCBieXBhc3MpID0+IGJ5cGFzcyA/IGV2ZW50IDogY2FsbGJhY2soY3VzdG9tRXZlbnQuZGV0YWlsKVxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKGBwaHg6JHtldmVudH1gLCBjYWxsYmFja1JlZilcbiAgICB0aGlzLl9fbGlzdGVuZXJzLmFkZChjYWxsYmFja1JlZilcbiAgICByZXR1cm4gY2FsbGJhY2tSZWZcbiAgfVxuXG4gIHJlbW92ZUhhbmRsZUV2ZW50KGNhbGxiYWNrUmVmKXtcbiAgICBsZXQgZXZlbnQgPSBjYWxsYmFja1JlZihudWxsLCB0cnVlKVxuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKGBwaHg6JHtldmVudH1gLCBjYWxsYmFja1JlZilcbiAgICB0aGlzLl9fbGlzdGVuZXJzLmRlbGV0ZShjYWxsYmFja1JlZilcbiAgfVxuXG4gIHVwbG9hZChuYW1lLCBmaWxlcyl7XG4gICAgcmV0dXJuIHRoaXMuX192aWV3LmRpc3BhdGNoVXBsb2FkcyhuYW1lLCBmaWxlcylcbiAgfVxuXG4gIHVwbG9hZFRvKHBoeFRhcmdldCwgbmFtZSwgZmlsZXMpe1xuICAgIHJldHVybiB0aGlzLl9fdmlldy53aXRoaW5UYXJnZXRzKHBoeFRhcmdldCwgdmlldyA9PiB2aWV3LmRpc3BhdGNoVXBsb2FkcyhuYW1lLCBmaWxlcykpXG4gIH1cblxuICBfX2NsZWFudXBfXygpe1xuICAgIHRoaXMuX19saXN0ZW5lcnMuZm9yRWFjaChjYWxsYmFja1JlZiA9PiB0aGlzLnJlbW92ZUhhbmRsZUV2ZW50KGNhbGxiYWNrUmVmKSlcbiAgfVxufVxuIiwgImltcG9ydCBET00gZnJvbSBcIi4vZG9tXCJcbmltcG9ydCBBUklBIGZyb20gXCIuL2FyaWFcIlxuXG5sZXQgZm9jdXNTdGFjayA9IG51bGxcblxubGV0IEpTID0ge1xuICBleGVjKGV2ZW50VHlwZSwgcGh4RXZlbnQsIHZpZXcsIHNvdXJjZUVsLCBkZWZhdWx0cyl7XG4gICAgbGV0IFtkZWZhdWx0S2luZCwgZGVmYXVsdEFyZ3NdID0gZGVmYXVsdHMgfHwgW251bGwsIHt9XVxuICAgIGxldCBjb21tYW5kcyA9IHBoeEV2ZW50LmNoYXJBdCgwKSA9PT0gXCJbXCIgP1xuICAgICAgSlNPTi5wYXJzZShwaHhFdmVudCkgOiBbW2RlZmF1bHRLaW5kLCBkZWZhdWx0QXJnc11dXG5cbiAgICBjb21tYW5kcy5mb3JFYWNoKChba2luZCwgYXJnc10pID0+IHtcbiAgICAgIGlmKGtpbmQgPT09IGRlZmF1bHRLaW5kICYmIGRlZmF1bHRBcmdzLmRhdGEpe1xuICAgICAgICBhcmdzLmRhdGEgPSBPYmplY3QuYXNzaWduKGFyZ3MuZGF0YSB8fCB7fSwgZGVmYXVsdEFyZ3MuZGF0YSlcbiAgICAgIH1cbiAgICAgIHRoaXMuZmlsdGVyVG9FbHMoc291cmNlRWwsIGFyZ3MpLmZvckVhY2goZWwgPT4ge1xuICAgICAgICB0aGlzW2BleGVjXyR7a2luZH1gXShldmVudFR5cGUsIHBoeEV2ZW50LCB2aWV3LCBzb3VyY2VFbCwgZWwsIGFyZ3MpXG4gICAgICB9KVxuICAgIH0pXG4gIH0sXG5cbiAgaXNWaXNpYmxlKGVsKXtcbiAgICByZXR1cm4gISEoZWwub2Zmc2V0V2lkdGggfHwgZWwub2Zmc2V0SGVpZ2h0IHx8IGVsLmdldENsaWVudFJlY3RzKCkubGVuZ3RoID4gMClcbiAgfSxcblxuICAvLyBwcml2YXRlXG5cbiAgLy8gY29tbWFuZHNcblxuICBleGVjX2Rpc3BhdGNoKGV2ZW50VHlwZSwgcGh4RXZlbnQsIHZpZXcsIHNvdXJjZUVsLCBlbCwge3RvLCBldmVudCwgZGV0YWlsLCBidWJibGVzfSl7XG4gICAgZGV0YWlsID0gZGV0YWlsIHx8IHt9XG4gICAgZGV0YWlsLmRpc3BhdGNoZXIgPSBzb3VyY2VFbFxuICAgIERPTS5kaXNwYXRjaEV2ZW50KGVsLCBldmVudCwge2RldGFpbCwgYnViYmxlc30pXG4gIH0sXG5cbiAgZXhlY19wdXNoKGV2ZW50VHlwZSwgcGh4RXZlbnQsIHZpZXcsIHNvdXJjZUVsLCBlbCwgYXJncyl7XG4gICAgaWYoIXZpZXcuaXNDb25uZWN0ZWQoKSl7IHJldHVybiB9XG5cbiAgICBsZXQge2V2ZW50LCBkYXRhLCB0YXJnZXQsIHBhZ2VfbG9hZGluZywgbG9hZGluZywgdmFsdWUsIGRpc3BhdGNoZXJ9ID0gYXJnc1xuICAgIGxldCBwdXNoT3B0cyA9IHtsb2FkaW5nLCB2YWx1ZSwgdGFyZ2V0LCBwYWdlX2xvYWRpbmc6ICEhcGFnZV9sb2FkaW5nfVxuICAgIGxldCB0YXJnZXRTcmMgPSBldmVudFR5cGUgPT09IFwiY2hhbmdlXCIgJiYgZGlzcGF0Y2hlciA/IGRpc3BhdGNoZXIgOiBzb3VyY2VFbFxuICAgIGxldCBwaHhUYXJnZXQgPSB0YXJnZXQgfHwgdGFyZ2V0U3JjLmdldEF0dHJpYnV0ZSh2aWV3LmJpbmRpbmcoXCJ0YXJnZXRcIikpIHx8IHRhcmdldFNyY1xuICAgIHZpZXcud2l0aGluVGFyZ2V0cyhwaHhUYXJnZXQsICh0YXJnZXRWaWV3LCB0YXJnZXRDdHgpID0+IHtcbiAgICAgIGlmKGV2ZW50VHlwZSA9PT0gXCJjaGFuZ2VcIil7XG4gICAgICAgIGxldCB7bmV3Q2lkLCBfdGFyZ2V0LCBjYWxsYmFja30gPSBhcmdzXG4gICAgICAgIF90YXJnZXQgPSBfdGFyZ2V0IHx8IChET00uaXNGb3JtSW5wdXQoc291cmNlRWwpID8gc291cmNlRWwubmFtZSA6IHVuZGVmaW5lZClcbiAgICAgICAgaWYoX3RhcmdldCl7IHB1c2hPcHRzLl90YXJnZXQgPSBfdGFyZ2V0IH1cbiAgICAgICAgdGFyZ2V0Vmlldy5wdXNoSW5wdXQoc291cmNlRWwsIHRhcmdldEN0eCwgbmV3Q2lkLCBldmVudCB8fCBwaHhFdmVudCwgcHVzaE9wdHMsIGNhbGxiYWNrKVxuICAgICAgfSBlbHNlIGlmKGV2ZW50VHlwZSA9PT0gXCJzdWJtaXRcIil7XG4gICAgICAgIGxldCB7c3VibWl0dGVyfSA9IGFyZ3NcbiAgICAgICAgdGFyZ2V0Vmlldy5zdWJtaXRGb3JtKHNvdXJjZUVsLCB0YXJnZXRDdHgsIGV2ZW50IHx8IHBoeEV2ZW50LCBzdWJtaXR0ZXIsIHB1c2hPcHRzKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGFyZ2V0Vmlldy5wdXNoRXZlbnQoZXZlbnRUeXBlLCBzb3VyY2VFbCwgdGFyZ2V0Q3R4LCBldmVudCB8fCBwaHhFdmVudCwgZGF0YSwgcHVzaE9wdHMpXG4gICAgICB9XG4gICAgfSlcbiAgfSxcblxuICBleGVjX25hdmlnYXRlKGV2ZW50VHlwZSwgcGh4RXZlbnQsIHZpZXcsIHNvdXJjZUVsLCBlbCwge2hyZWYsIHJlcGxhY2V9KXtcbiAgICB2aWV3LmxpdmVTb2NrZXQuaGlzdG9yeVJlZGlyZWN0KGhyZWYsIHJlcGxhY2UgPyBcInJlcGxhY2VcIiA6IFwicHVzaFwiKVxuICB9LFxuXG4gIGV4ZWNfcGF0Y2goZXZlbnRUeXBlLCBwaHhFdmVudCwgdmlldywgc291cmNlRWwsIGVsLCB7aHJlZiwgcmVwbGFjZX0pe1xuICAgIHZpZXcubGl2ZVNvY2tldC5wdXNoSGlzdG9yeVBhdGNoKGhyZWYsIHJlcGxhY2UgPyBcInJlcGxhY2VcIiA6IFwicHVzaFwiLCBzb3VyY2VFbClcbiAgfSxcblxuICBleGVjX2ZvY3VzKGV2ZW50VHlwZSwgcGh4RXZlbnQsIHZpZXcsIHNvdXJjZUVsLCBlbCl7XG4gICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiBBUklBLmF0dGVtcHRGb2N1cyhlbCkpXG4gIH0sXG5cbiAgZXhlY19mb2N1c19maXJzdChldmVudFR5cGUsIHBoeEV2ZW50LCB2aWV3LCBzb3VyY2VFbCwgZWwpe1xuICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gQVJJQS5mb2N1c0ZpcnN0SW50ZXJhY3RpdmUoZWwpIHx8IEFSSUEuZm9jdXNGaXJzdChlbCkpXG4gIH0sXG5cbiAgZXhlY19wdXNoX2ZvY3VzKGV2ZW50VHlwZSwgcGh4RXZlbnQsIHZpZXcsIHNvdXJjZUVsLCBlbCl7XG4gICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiBmb2N1c1N0YWNrID0gZWwgfHwgc291cmNlRWwpXG4gIH0sXG5cbiAgZXhlY19wb3BfZm9jdXMoZXZlbnRUeXBlLCBwaHhFdmVudCwgdmlldywgc291cmNlRWwsIGVsKXtcbiAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgIGlmKGZvY3VzU3RhY2speyBmb2N1c1N0YWNrLmZvY3VzKCkgfVxuICAgICAgZm9jdXNTdGFjayA9IG51bGxcbiAgICB9KVxuICB9LFxuXG4gIGV4ZWNfYWRkX2NsYXNzKGV2ZW50VHlwZSwgcGh4RXZlbnQsIHZpZXcsIHNvdXJjZUVsLCBlbCwge25hbWVzLCB0cmFuc2l0aW9uLCB0aW1lfSl7XG4gICAgdGhpcy5hZGRPclJlbW92ZUNsYXNzZXMoZWwsIG5hbWVzLCBbXSwgdHJhbnNpdGlvbiwgdGltZSwgdmlldylcbiAgfSxcblxuICBleGVjX3JlbW92ZV9jbGFzcyhldmVudFR5cGUsIHBoeEV2ZW50LCB2aWV3LCBzb3VyY2VFbCwgZWwsIHtuYW1lcywgdHJhbnNpdGlvbiwgdGltZX0pe1xuICAgIHRoaXMuYWRkT3JSZW1vdmVDbGFzc2VzKGVsLCBbXSwgbmFtZXMsIHRyYW5zaXRpb24sIHRpbWUsIHZpZXcpXG4gIH0sXG5cbiAgZXhlY190cmFuc2l0aW9uKGV2ZW50VHlwZSwgcGh4RXZlbnQsIHZpZXcsIHNvdXJjZUVsLCBlbCwge3RpbWUsIHRyYW5zaXRpb259KXtcbiAgICB0aGlzLmFkZE9yUmVtb3ZlQ2xhc3NlcyhlbCwgW10sIFtdLCB0cmFuc2l0aW9uLCB0aW1lLCB2aWV3KVxuICB9LFxuXG4gIGV4ZWNfdG9nZ2xlKGV2ZW50VHlwZSwgcGh4RXZlbnQsIHZpZXcsIHNvdXJjZUVsLCBlbCwge2Rpc3BsYXksIGlucywgb3V0cywgdGltZX0pe1xuICAgIHRoaXMudG9nZ2xlKGV2ZW50VHlwZSwgdmlldywgZWwsIGRpc3BsYXksIGlucywgb3V0cywgdGltZSlcbiAgfSxcblxuICBleGVjX3Nob3coZXZlbnRUeXBlLCBwaHhFdmVudCwgdmlldywgc291cmNlRWwsIGVsLCB7ZGlzcGxheSwgdHJhbnNpdGlvbiwgdGltZX0pe1xuICAgIHRoaXMuc2hvdyhldmVudFR5cGUsIHZpZXcsIGVsLCBkaXNwbGF5LCB0cmFuc2l0aW9uLCB0aW1lKVxuICB9LFxuXG4gIGV4ZWNfaGlkZShldmVudFR5cGUsIHBoeEV2ZW50LCB2aWV3LCBzb3VyY2VFbCwgZWwsIHtkaXNwbGF5LCB0cmFuc2l0aW9uLCB0aW1lfSl7XG4gICAgdGhpcy5oaWRlKGV2ZW50VHlwZSwgdmlldywgZWwsIGRpc3BsYXksIHRyYW5zaXRpb24sIHRpbWUpXG4gIH0sXG5cbiAgZXhlY19zZXRfYXR0cihldmVudFR5cGUsIHBoeEV2ZW50LCB2aWV3LCBzb3VyY2VFbCwgZWwsIHthdHRyOiBbYXR0ciwgdmFsXX0pe1xuICAgIHRoaXMuc2V0T3JSZW1vdmVBdHRycyhlbCwgW1thdHRyLCB2YWxdXSwgW10pXG4gIH0sXG5cbiAgZXhlY19yZW1vdmVfYXR0cihldmVudFR5cGUsIHBoeEV2ZW50LCB2aWV3LCBzb3VyY2VFbCwgZWwsIHthdHRyfSl7XG4gICAgdGhpcy5zZXRPclJlbW92ZUF0dHJzKGVsLCBbXSwgW2F0dHJdKVxuICB9LFxuXG4gIC8vIHV0aWxzIGZvciBjb21tYW5kc1xuXG4gIHNob3coZXZlbnRUeXBlLCB2aWV3LCBlbCwgZGlzcGxheSwgdHJhbnNpdGlvbiwgdGltZSl7XG4gICAgaWYoIXRoaXMuaXNWaXNpYmxlKGVsKSl7XG4gICAgICB0aGlzLnRvZ2dsZShldmVudFR5cGUsIHZpZXcsIGVsLCBkaXNwbGF5LCB0cmFuc2l0aW9uLCBudWxsLCB0aW1lKVxuICAgIH1cbiAgfSxcblxuICBoaWRlKGV2ZW50VHlwZSwgdmlldywgZWwsIGRpc3BsYXksIHRyYW5zaXRpb24sIHRpbWUpe1xuICAgIGlmKHRoaXMuaXNWaXNpYmxlKGVsKSl7XG4gICAgICB0aGlzLnRvZ2dsZShldmVudFR5cGUsIHZpZXcsIGVsLCBkaXNwbGF5LCBudWxsLCB0cmFuc2l0aW9uLCB0aW1lKVxuICAgIH1cbiAgfSxcblxuICB0b2dnbGUoZXZlbnRUeXBlLCB2aWV3LCBlbCwgZGlzcGxheSwgaW5zLCBvdXRzLCB0aW1lKXtcbiAgICBsZXQgW2luQ2xhc3NlcywgaW5TdGFydENsYXNzZXMsIGluRW5kQ2xhc3Nlc10gPSBpbnMgfHwgW1tdLCBbXSwgW11dXG4gICAgbGV0IFtvdXRDbGFzc2VzLCBvdXRTdGFydENsYXNzZXMsIG91dEVuZENsYXNzZXNdID0gb3V0cyB8fCBbW10sIFtdLCBbXV1cbiAgICBpZihpbkNsYXNzZXMubGVuZ3RoID4gMCB8fCBvdXRDbGFzc2VzLmxlbmd0aCA+IDApe1xuICAgICAgaWYodGhpcy5pc1Zpc2libGUoZWwpKXtcbiAgICAgICAgbGV0IG9uU3RhcnQgPSAoKSA9PiB7XG4gICAgICAgICAgdGhpcy5hZGRPclJlbW92ZUNsYXNzZXMoZWwsIG91dFN0YXJ0Q2xhc3NlcywgaW5DbGFzc2VzLmNvbmNhdChpblN0YXJ0Q2xhc3NlcykuY29uY2F0KGluRW5kQ2xhc3NlcykpXG4gICAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmFkZE9yUmVtb3ZlQ2xhc3NlcyhlbCwgb3V0Q2xhc3NlcywgW10pXG4gICAgICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHRoaXMuYWRkT3JSZW1vdmVDbGFzc2VzKGVsLCBvdXRFbmRDbGFzc2VzLCBvdXRTdGFydENsYXNzZXMpKVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgZWwuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoXCJwaHg6aGlkZS1zdGFydFwiKSlcbiAgICAgICAgdmlldy50cmFuc2l0aW9uKHRpbWUsIG9uU3RhcnQsICgpID0+IHtcbiAgICAgICAgICB0aGlzLmFkZE9yUmVtb3ZlQ2xhc3NlcyhlbCwgW10sIG91dENsYXNzZXMuY29uY2F0KG91dEVuZENsYXNzZXMpKVxuICAgICAgICAgIERPTS5wdXRTdGlja3koZWwsIFwidG9nZ2xlXCIsIGN1cnJlbnRFbCA9PiBjdXJyZW50RWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiKVxuICAgICAgICAgIGVsLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwicGh4OmhpZGUtZW5kXCIpKVxuICAgICAgICB9KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYoZXZlbnRUeXBlID09PSBcInJlbW92ZVwiKXsgcmV0dXJuIH1cbiAgICAgICAgbGV0IG9uU3RhcnQgPSAoKSA9PiB7XG4gICAgICAgICAgdGhpcy5hZGRPclJlbW92ZUNsYXNzZXMoZWwsIGluU3RhcnRDbGFzc2VzLCBvdXRDbGFzc2VzLmNvbmNhdChvdXRTdGFydENsYXNzZXMpLmNvbmNhdChvdXRFbmRDbGFzc2VzKSlcbiAgICAgICAgICBsZXQgc3RpY2t5RGlzcGxheSA9IGRpc3BsYXkgfHwgdGhpcy5kZWZhdWx0RGlzcGxheShlbClcbiAgICAgICAgICBET00ucHV0U3RpY2t5KGVsLCBcInRvZ2dsZVwiLCBjdXJyZW50RWwgPT4gY3VycmVudEVsLnN0eWxlLmRpc3BsYXkgPSBzdGlja3lEaXNwbGF5KVxuICAgICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5hZGRPclJlbW92ZUNsYXNzZXMoZWwsIGluQ2xhc3NlcywgW10pXG4gICAgICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHRoaXMuYWRkT3JSZW1vdmVDbGFzc2VzKGVsLCBpbkVuZENsYXNzZXMsIGluU3RhcnRDbGFzc2VzKSlcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGVsLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwicGh4OnNob3ctc3RhcnRcIikpXG4gICAgICAgIHZpZXcudHJhbnNpdGlvbih0aW1lLCBvblN0YXJ0LCAoKSA9PiB7XG4gICAgICAgICAgdGhpcy5hZGRPclJlbW92ZUNsYXNzZXMoZWwsIFtdLCBpbkNsYXNzZXMuY29uY2F0KGluRW5kQ2xhc3NlcykpXG4gICAgICAgICAgZWwuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoXCJwaHg6c2hvdy1lbmRcIikpXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmKHRoaXMuaXNWaXNpYmxlKGVsKSl7XG4gICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICAgIGVsLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwicGh4OmhpZGUtc3RhcnRcIikpXG4gICAgICAgICAgRE9NLnB1dFN0aWNreShlbCwgXCJ0b2dnbGVcIiwgY3VycmVudEVsID0+IGN1cnJlbnRFbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCIpXG4gICAgICAgICAgZWwuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoXCJwaHg6aGlkZS1lbmRcIikpXG4gICAgICAgIH0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgICBlbC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcInBoeDpzaG93LXN0YXJ0XCIpKVxuICAgICAgICAgIGxldCBzdGlja3lEaXNwbGF5ID0gZGlzcGxheSB8fCB0aGlzLmRlZmF1bHREaXNwbGF5KGVsKVxuICAgICAgICAgIERPTS5wdXRTdGlja3koZWwsIFwidG9nZ2xlXCIsIGN1cnJlbnRFbCA9PiBjdXJyZW50RWwuc3R5bGUuZGlzcGxheSA9IHN0aWNreURpc3BsYXkpXG4gICAgICAgICAgZWwuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoXCJwaHg6c2hvdy1lbmRcIikpXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIGFkZE9yUmVtb3ZlQ2xhc3NlcyhlbCwgYWRkcywgcmVtb3ZlcywgdHJhbnNpdGlvbiwgdGltZSwgdmlldyl7XG4gICAgbGV0IFt0cmFuc2l0aW9uX3J1biwgdHJhbnNpdGlvbl9zdGFydCwgdHJhbnNpdGlvbl9lbmRdID0gdHJhbnNpdGlvbiB8fCBbW10sIFtdLCBbXV1cbiAgICBpZih0cmFuc2l0aW9uX3J1bi5sZW5ndGggPiAwKXtcbiAgICAgIGxldCBvblN0YXJ0ID0gKCkgPT4gdGhpcy5hZGRPclJlbW92ZUNsYXNzZXMoZWwsIHRyYW5zaXRpb25fc3RhcnQuY29uY2F0KHRyYW5zaXRpb25fcnVuKSwgW10pXG4gICAgICBsZXQgb25Eb25lID0gKCkgPT4gdGhpcy5hZGRPclJlbW92ZUNsYXNzZXMoZWwsIGFkZHMuY29uY2F0KHRyYW5zaXRpb25fZW5kKSwgcmVtb3Zlcy5jb25jYXQodHJhbnNpdGlvbl9ydW4pLmNvbmNhdCh0cmFuc2l0aW9uX3N0YXJ0KSlcbiAgICAgIHJldHVybiB2aWV3LnRyYW5zaXRpb24odGltZSwgb25TdGFydCwgb25Eb25lKVxuICAgIH1cbiAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgIGxldCBbcHJldkFkZHMsIHByZXZSZW1vdmVzXSA9IERPTS5nZXRTdGlja3koZWwsIFwiY2xhc3Nlc1wiLCBbW10sIFtdXSlcbiAgICAgIGxldCBrZWVwQWRkcyA9IGFkZHMuZmlsdGVyKG5hbWUgPT4gcHJldkFkZHMuaW5kZXhPZihuYW1lKSA8IDAgJiYgIWVsLmNsYXNzTGlzdC5jb250YWlucyhuYW1lKSlcbiAgICAgIGxldCBrZWVwUmVtb3ZlcyA9IHJlbW92ZXMuZmlsdGVyKG5hbWUgPT4gcHJldlJlbW92ZXMuaW5kZXhPZihuYW1lKSA8IDAgJiYgZWwuY2xhc3NMaXN0LmNvbnRhaW5zKG5hbWUpKVxuICAgICAgbGV0IG5ld0FkZHMgPSBwcmV2QWRkcy5maWx0ZXIobmFtZSA9PiByZW1vdmVzLmluZGV4T2YobmFtZSkgPCAwKS5jb25jYXQoa2VlcEFkZHMpXG4gICAgICBsZXQgbmV3UmVtb3ZlcyA9IHByZXZSZW1vdmVzLmZpbHRlcihuYW1lID0+IGFkZHMuaW5kZXhPZihuYW1lKSA8IDApLmNvbmNhdChrZWVwUmVtb3ZlcylcblxuICAgICAgRE9NLnB1dFN0aWNreShlbCwgXCJjbGFzc2VzXCIsIGN1cnJlbnRFbCA9PiB7XG4gICAgICAgIGN1cnJlbnRFbC5jbGFzc0xpc3QucmVtb3ZlKC4uLm5ld1JlbW92ZXMpXG4gICAgICAgIGN1cnJlbnRFbC5jbGFzc0xpc3QuYWRkKC4uLm5ld0FkZHMpXG4gICAgICAgIHJldHVybiBbbmV3QWRkcywgbmV3UmVtb3Zlc11cbiAgICAgIH0pXG4gICAgfSlcbiAgfSxcblxuICBzZXRPclJlbW92ZUF0dHJzKGVsLCBzZXRzLCByZW1vdmVzKXtcbiAgICBsZXQgW3ByZXZTZXRzLCBwcmV2UmVtb3Zlc10gPSBET00uZ2V0U3RpY2t5KGVsLCBcImF0dHJzXCIsIFtbXSwgW11dKVxuXG4gICAgbGV0IGFsdGVyZWRBdHRycyA9IHNldHMubWFwKChbYXR0ciwgX3ZhbF0pID0+IGF0dHIpLmNvbmNhdChyZW1vdmVzKTtcbiAgICBsZXQgbmV3U2V0cyA9IHByZXZTZXRzLmZpbHRlcigoW2F0dHIsIF92YWxdKSA9PiAhYWx0ZXJlZEF0dHJzLmluY2x1ZGVzKGF0dHIpKS5jb25jYXQoc2V0cyk7XG4gICAgbGV0IG5ld1JlbW92ZXMgPSBwcmV2UmVtb3Zlcy5maWx0ZXIoKGF0dHIpID0+ICFhbHRlcmVkQXR0cnMuaW5jbHVkZXMoYXR0cikpLmNvbmNhdChyZW1vdmVzKTtcblxuICAgIERPTS5wdXRTdGlja3koZWwsIFwiYXR0cnNcIiwgY3VycmVudEVsID0+IHtcbiAgICAgIG5ld1JlbW92ZXMuZm9yRWFjaChhdHRyID0+IGN1cnJlbnRFbC5yZW1vdmVBdHRyaWJ1dGUoYXR0cikpXG4gICAgICBuZXdTZXRzLmZvckVhY2goKFthdHRyLCB2YWxdKSA9PiBjdXJyZW50RWwuc2V0QXR0cmlidXRlKGF0dHIsIHZhbCkpXG4gICAgICByZXR1cm4gW25ld1NldHMsIG5ld1JlbW92ZXNdXG4gICAgfSlcbiAgfSxcblxuICBoYXNBbGxDbGFzc2VzKGVsLCBjbGFzc2VzKXsgcmV0dXJuIGNsYXNzZXMuZXZlcnkobmFtZSA9PiBlbC5jbGFzc0xpc3QuY29udGFpbnMobmFtZSkpIH0sXG5cbiAgaXNUb2dnbGVkT3V0KGVsLCBvdXRDbGFzc2VzKXtcbiAgICByZXR1cm4gIXRoaXMuaXNWaXNpYmxlKGVsKSB8fCB0aGlzLmhhc0FsbENsYXNzZXMoZWwsIG91dENsYXNzZXMpXG4gIH0sXG5cbiAgZmlsdGVyVG9FbHMoc291cmNlRWwsIHt0b30pe1xuICAgIHJldHVybiB0byA/IERPTS5hbGwoZG9jdW1lbnQsIHRvKSA6IFtzb3VyY2VFbF1cbiAgfSxcblxuICBkZWZhdWx0RGlzcGxheShlbCl7XG4gICAgcmV0dXJuIHt0cjogXCJ0YWJsZS1yb3dcIiwgdGQ6IFwidGFibGUtY2VsbFwifVtlbC50YWdOYW1lLnRvTG93ZXJDYXNlKCldIHx8IFwiYmxvY2tcIlxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEpTXG4iLCAiaW1wb3J0IHtcbiAgQkVGT1JFX1VOTE9BRF9MT0FERVJfVElNRU9VVCxcbiAgQ0hFQ0tBQkxFX0lOUFVUUyxcbiAgQ09OU0VDVVRJVkVfUkVMT0FEUyxcbiAgUEhYX0FVVE9fUkVDT1ZFUixcbiAgUEhYX0NPTVBPTkVOVCxcbiAgUEhYX0NPTk5FQ1RFRF9DTEFTUyxcbiAgUEhYX0RJU0FCTEVfV0lUSCxcbiAgUEhYX0RJU0FCTEVfV0lUSF9SRVNUT1JFLFxuICBQSFhfRElTQUJMRUQsXG4gIFBIWF9ESVNDT05ORUNURURfQ0xBU1MsXG4gIFBIWF9FVkVOVF9DTEFTU0VTLFxuICBQSFhfRVJST1JfQ0xBU1MsXG4gIFBIWF9GRUVEQkFDS19GT1IsXG4gIFBIWF9IQVNfU1VCTUlUVEVELFxuICBQSFhfSE9PSyxcbiAgUEhYX1BBR0VfTE9BRElORyxcbiAgUEhYX1BBUkVOVF9JRCxcbiAgUEhYX1BST0dSRVNTLFxuICBQSFhfUkVBRE9OTFksXG4gIFBIWF9SRUYsXG4gIFBIWF9SRUZfU1JDLFxuICBQSFhfUk9PVF9JRCxcbiAgUEhYX1NFU1NJT04sXG4gIFBIWF9TVEFUSUMsXG4gIFBIWF9UUkFDS19TVEFUSUMsXG4gIFBIWF9UUkFDS19VUExPQURTLFxuICBQSFhfVVBEQVRFLFxuICBQSFhfVVBMT0FEX1JFRixcbiAgUEhYX1ZJRVdfU0VMRUNUT1IsXG4gIFBIWF9NQUlOLFxuICBQSFhfTU9VTlRFRCxcbiAgUFVTSF9USU1FT1VULFxufSBmcm9tIFwiLi9jb25zdGFudHNcIlxuXG5pbXBvcnQge1xuICBjbG9uZSxcbiAgY2xvc2VzdFBoeEJpbmRpbmcsXG4gIGlzRW1wdHksXG4gIGlzRXF1YWxPYmosXG4gIGxvZ0Vycm9yLFxuICBtYXliZSxcbiAgaXNDaWQsXG59IGZyb20gXCIuL3V0aWxzXCJcblxuaW1wb3J0IEJyb3dzZXIgZnJvbSBcIi4vYnJvd3NlclwiXG5pbXBvcnQgRE9NIGZyb20gXCIuL2RvbVwiXG5pbXBvcnQgRE9NUGF0Y2ggZnJvbSBcIi4vZG9tX3BhdGNoXCJcbmltcG9ydCBMaXZlVXBsb2FkZXIgZnJvbSBcIi4vbGl2ZV91cGxvYWRlclwiXG5pbXBvcnQgUmVuZGVyZWQgZnJvbSBcIi4vcmVuZGVyZWRcIlxuaW1wb3J0IFZpZXdIb29rIGZyb20gXCIuL3ZpZXdfaG9va1wiXG5pbXBvcnQgSlMgZnJvbSBcIi4vanNcIlxuXG5sZXQgc2VyaWFsaXplRm9ybSA9IChmb3JtLCBtZXRhZGF0YSwgb25seU5hbWVzID0gW10pID0+IHtcbiAgbGV0IHtzdWJtaXR0ZXIsIC4uLm1ldGF9ID0gbWV0YWRhdGFcblxuICAvLyBUT0RPOiBSZXBsYWNlIHdpdGggYG5ldyBGb3JtRGF0YShmb3JtLCBzdWJtaXR0ZXIpYCB3aGVuIHN1cHBvcnRlZCBieSBsYXRlc3QgYnJvd3NlcnMsXG4gIC8vICAgICAgIGFuZCBtZW50aW9uIGBmb3JtZGF0YS1zdWJtaXR0ZXItcG9seWZpbGxgIGluIHRoZSBkb2NzLlxuICBsZXQgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoZm9ybSlcblxuICAvLyBUT0RPOiBSZW1vdmUgd2hlbiBGb3JtRGF0YSBjb25zdHJ1Y3RvciBzdXBwb3J0cyB0aGUgc3VibWl0dGVyIGFyZ3VtZW50LlxuICBpZiAoc3VibWl0dGVyICYmIHN1Ym1pdHRlci5mb3JtICYmIHN1Ym1pdHRlci5mb3JtID09PSBmb3JtKXtcbiAgICBmb3JtRGF0YS5hcHBlbmQoc3VibWl0dGVyLm5hbWUsIHN1Ym1pdHRlci52YWx1ZSlcbiAgfVxuXG4gIGxldCB0b1JlbW92ZSA9IFtdXG5cbiAgZm9ybURhdGEuZm9yRWFjaCgodmFsLCBrZXksIF9pbmRleCkgPT4ge1xuICAgIGlmKHZhbCBpbnN0YW5jZW9mIEZpbGUpeyB0b1JlbW92ZS5wdXNoKGtleSkgfVxuICB9KVxuXG4gIC8vIENsZWFudXAgYWZ0ZXIgYnVpbGRpbmcgZmlsZURhdGFcbiAgdG9SZW1vdmUuZm9yRWFjaChrZXkgPT4gZm9ybURhdGEuZGVsZXRlKGtleSkpXG5cbiAgbGV0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKVxuICBmb3IobGV0IFtrZXksIHZhbF0gb2YgZm9ybURhdGEuZW50cmllcygpKXtcbiAgICBpZihvbmx5TmFtZXMubGVuZ3RoID09PSAwIHx8IG9ubHlOYW1lcy5pbmRleE9mKGtleSkgPj0gMCl7XG4gICAgICBwYXJhbXMuYXBwZW5kKGtleSwgdmFsKVxuICAgIH1cbiAgfVxuICBmb3IobGV0IG1ldGFLZXkgaW4gbWV0YSl7IHBhcmFtcy5hcHBlbmQobWV0YUtleSwgbWV0YVttZXRhS2V5XSkgfVxuXG4gIHJldHVybiBwYXJhbXMudG9TdHJpbmcoKVxufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBWaWV3IHtcbiAgY29uc3RydWN0b3IoZWwsIGxpdmVTb2NrZXQsIHBhcmVudFZpZXcsIGZsYXNoLCBsaXZlUmVmZXJlcil7XG4gICAgdGhpcy5pc0RlYWQgPSBmYWxzZVxuICAgIHRoaXMubGl2ZVNvY2tldCA9IGxpdmVTb2NrZXRcbiAgICB0aGlzLmZsYXNoID0gZmxhc2hcbiAgICB0aGlzLnBhcmVudCA9IHBhcmVudFZpZXdcbiAgICB0aGlzLnJvb3QgPSBwYXJlbnRWaWV3ID8gcGFyZW50Vmlldy5yb290IDogdGhpc1xuICAgIHRoaXMuZWwgPSBlbFxuICAgIHRoaXMuaWQgPSB0aGlzLmVsLmlkXG4gICAgdGhpcy5yZWYgPSAwXG4gICAgdGhpcy5jaGlsZEpvaW5zID0gMFxuICAgIHRoaXMubG9hZGVyVGltZXIgPSBudWxsXG4gICAgdGhpcy5wZW5kaW5nRGlmZnMgPSBbXVxuICAgIHRoaXMucHJ1bmluZ0NJRHMgPSBbXVxuICAgIHRoaXMucmVkaXJlY3QgPSBmYWxzZVxuICAgIHRoaXMuaHJlZiA9IG51bGxcbiAgICB0aGlzLmpvaW5Db3VudCA9IHRoaXMucGFyZW50ID8gdGhpcy5wYXJlbnQuam9pbkNvdW50IC0gMSA6IDBcbiAgICB0aGlzLmpvaW5QZW5kaW5nID0gdHJ1ZVxuICAgIHRoaXMuZGVzdHJveWVkID0gZmFsc2VcbiAgICB0aGlzLmpvaW5DYWxsYmFjayA9IGZ1bmN0aW9uKG9uRG9uZSl7IG9uRG9uZSAmJiBvbkRvbmUoKSB9XG4gICAgdGhpcy5zdG9wQ2FsbGJhY2sgPSBmdW5jdGlvbigpeyB9XG4gICAgdGhpcy5wZW5kaW5nSm9pbk9wcyA9IHRoaXMucGFyZW50ID8gbnVsbCA6IFtdXG4gICAgdGhpcy52aWV3SG9va3MgPSB7fVxuICAgIHRoaXMudXBsb2FkZXJzID0ge31cbiAgICB0aGlzLmZvcm1TdWJtaXRzID0gW11cbiAgICB0aGlzLmNoaWxkcmVuID0gdGhpcy5wYXJlbnQgPyBudWxsIDoge31cbiAgICB0aGlzLnJvb3QuY2hpbGRyZW5bdGhpcy5pZF0gPSB7fVxuICAgIHRoaXMuY2hhbm5lbCA9IHRoaXMubGl2ZVNvY2tldC5jaGFubmVsKGBsdjoke3RoaXMuaWR9YCwgKCkgPT4ge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcmVkaXJlY3Q6IHRoaXMucmVkaXJlY3QgPyB0aGlzLmhyZWYgOiB1bmRlZmluZWQsXG4gICAgICAgIHVybDogdGhpcy5yZWRpcmVjdCA/IHVuZGVmaW5lZCA6IHRoaXMuaHJlZiB8fCB1bmRlZmluZWQsXG4gICAgICAgIHBhcmFtczogdGhpcy5jb25uZWN0UGFyYW1zKGxpdmVSZWZlcmVyKSxcbiAgICAgICAgc2Vzc2lvbjogdGhpcy5nZXRTZXNzaW9uKCksXG4gICAgICAgIHN0YXRpYzogdGhpcy5nZXRTdGF0aWMoKSxcbiAgICAgICAgZmxhc2g6IHRoaXMuZmxhc2gsXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIHNldEhyZWYoaHJlZil7IHRoaXMuaHJlZiA9IGhyZWYgfVxuXG4gIHNldFJlZGlyZWN0KGhyZWYpe1xuICAgIHRoaXMucmVkaXJlY3QgPSB0cnVlXG4gICAgdGhpcy5ocmVmID0gaHJlZlxuICB9XG5cbiAgaXNNYWluKCl7IHJldHVybiB0aGlzLmVsLmhhc0F0dHJpYnV0ZShQSFhfTUFJTikgfVxuXG4gIGNvbm5lY3RQYXJhbXMobGl2ZVJlZmVyZXIpe1xuICAgIGxldCBwYXJhbXMgPSB0aGlzLmxpdmVTb2NrZXQucGFyYW1zKHRoaXMuZWwpXG4gICAgbGV0IG1hbmlmZXN0ID1cbiAgICAgIERPTS5hbGwoZG9jdW1lbnQsIGBbJHt0aGlzLmJpbmRpbmcoUEhYX1RSQUNLX1NUQVRJQyl9XWApXG4gICAgICAgIC5tYXAobm9kZSA9PiBub2RlLnNyYyB8fCBub2RlLmhyZWYpLmZpbHRlcih1cmwgPT4gdHlwZW9mICh1cmwpID09PSBcInN0cmluZ1wiKVxuXG4gICAgaWYobWFuaWZlc3QubGVuZ3RoID4gMCl7IHBhcmFtc1tcIl90cmFja19zdGF0aWNcIl0gPSBtYW5pZmVzdCB9XG4gICAgcGFyYW1zW1wiX21vdW50c1wiXSA9IHRoaXMuam9pbkNvdW50XG4gICAgcGFyYW1zW1wiX2xpdmVfcmVmZXJlclwiXSA9IGxpdmVSZWZlcmVyXG5cbiAgICByZXR1cm4gcGFyYW1zXG4gIH1cblxuICBpc0Nvbm5lY3RlZCgpeyByZXR1cm4gdGhpcy5jaGFubmVsLmNhblB1c2goKSB9XG5cbiAgZ2V0U2Vzc2lvbigpeyByZXR1cm4gdGhpcy5lbC5nZXRBdHRyaWJ1dGUoUEhYX1NFU1NJT04pIH1cblxuICBnZXRTdGF0aWMoKXtcbiAgICBsZXQgdmFsID0gdGhpcy5lbC5nZXRBdHRyaWJ1dGUoUEhYX1NUQVRJQylcbiAgICByZXR1cm4gdmFsID09PSBcIlwiID8gbnVsbCA6IHZhbFxuICB9XG5cbiAgZGVzdHJveShjYWxsYmFjayA9IGZ1bmN0aW9uICgpeyB9KXtcbiAgICB0aGlzLmRlc3Ryb3lBbGxDaGlsZHJlbigpXG4gICAgdGhpcy5kZXN0cm95ZWQgPSB0cnVlXG4gICAgZGVsZXRlIHRoaXMucm9vdC5jaGlsZHJlblt0aGlzLmlkXVxuICAgIGlmKHRoaXMucGFyZW50KXsgZGVsZXRlIHRoaXMucm9vdC5jaGlsZHJlblt0aGlzLnBhcmVudC5pZF1bdGhpcy5pZF0gfVxuICAgIGNsZWFyVGltZW91dCh0aGlzLmxvYWRlclRpbWVyKVxuICAgIGxldCBvbkZpbmlzaGVkID0gKCkgPT4ge1xuICAgICAgY2FsbGJhY2soKVxuICAgICAgZm9yKGxldCBpZCBpbiB0aGlzLnZpZXdIb29rcyl7XG4gICAgICAgIHRoaXMuZGVzdHJveUhvb2sodGhpcy52aWV3SG9va3NbaWRdKVxuICAgICAgfVxuICAgIH1cblxuICAgIERPTS5tYXJrUGh4Q2hpbGREZXN0cm95ZWQodGhpcy5lbClcblxuICAgIHRoaXMubG9nKFwiZGVzdHJveWVkXCIsICgpID0+IFtcInRoZSBjaGlsZCBoYXMgYmVlbiByZW1vdmVkIGZyb20gdGhlIHBhcmVudFwiXSlcbiAgICB0aGlzLmNoYW5uZWwubGVhdmUoKVxuICAgICAgLnJlY2VpdmUoXCJva1wiLCBvbkZpbmlzaGVkKVxuICAgICAgLnJlY2VpdmUoXCJlcnJvclwiLCBvbkZpbmlzaGVkKVxuICAgICAgLnJlY2VpdmUoXCJ0aW1lb3V0XCIsIG9uRmluaXNoZWQpXG4gIH1cblxuICBzZXRDb250YWluZXJDbGFzc2VzKC4uLmNsYXNzZXMpe1xuICAgIHRoaXMuZWwuY2xhc3NMaXN0LnJlbW92ZShcbiAgICAgIFBIWF9DT05ORUNURURfQ0xBU1MsXG4gICAgICBQSFhfRElTQ09OTkVDVEVEX0NMQVNTLFxuICAgICAgUEhYX0VSUk9SX0NMQVNTXG4gICAgKVxuICAgIHRoaXMuZWwuY2xhc3NMaXN0LmFkZCguLi5jbGFzc2VzKVxuICB9XG5cbiAgc2hvd0xvYWRlcih0aW1lb3V0KXtcbiAgICBjbGVhclRpbWVvdXQodGhpcy5sb2FkZXJUaW1lcilcbiAgICBpZih0aW1lb3V0KXtcbiAgICAgIHRoaXMubG9hZGVyVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHRoaXMuc2hvd0xvYWRlcigpLCB0aW1lb3V0KVxuICAgIH0gZWxzZSB7XG4gICAgICBmb3IobGV0IGlkIGluIHRoaXMudmlld0hvb2tzKXsgdGhpcy52aWV3SG9va3NbaWRdLl9fZGlzY29ubmVjdGVkKCkgfVxuICAgICAgdGhpcy5zZXRDb250YWluZXJDbGFzc2VzKFBIWF9ESVNDT05ORUNURURfQ0xBU1MpXG4gICAgfVxuICB9XG5cbiAgZXhlY0FsbChiaW5kaW5nKXtcbiAgICBET00uYWxsKHRoaXMuZWwsIGBbJHtiaW5kaW5nfV1gLCBlbCA9PiB0aGlzLmxpdmVTb2NrZXQuZXhlY0pTKGVsLCBlbC5nZXRBdHRyaWJ1dGUoYmluZGluZykpKVxuICB9XG5cbiAgaGlkZUxvYWRlcigpe1xuICAgIGNsZWFyVGltZW91dCh0aGlzLmxvYWRlclRpbWVyKVxuICAgIHRoaXMuc2V0Q29udGFpbmVyQ2xhc3NlcyhQSFhfQ09OTkVDVEVEX0NMQVNTKVxuICAgIHRoaXMuZXhlY0FsbCh0aGlzLmJpbmRpbmcoXCJjb25uZWN0ZWRcIikpXG4gIH1cblxuICB0cmlnZ2VyUmVjb25uZWN0ZWQoKXtcbiAgICBmb3IobGV0IGlkIGluIHRoaXMudmlld0hvb2tzKXsgdGhpcy52aWV3SG9va3NbaWRdLl9fcmVjb25uZWN0ZWQoKSB9XG4gIH1cblxuICBsb2coa2luZCwgbXNnQ2FsbGJhY2spe1xuICAgIHRoaXMubGl2ZVNvY2tldC5sb2codGhpcywga2luZCwgbXNnQ2FsbGJhY2spXG4gIH1cblxuICB0cmFuc2l0aW9uKHRpbWUsIG9uU3RhcnQsIG9uRG9uZSA9IGZ1bmN0aW9uKCl7fSl7XG4gICAgdGhpcy5saXZlU29ja2V0LnRyYW5zaXRpb24odGltZSwgb25TdGFydCwgb25Eb25lKVxuICB9XG5cbiAgd2l0aGluVGFyZ2V0cyhwaHhUYXJnZXQsIGNhbGxiYWNrKXtcbiAgICBpZihwaHhUYXJnZXQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCB8fCBwaHhUYXJnZXQgaW5zdGFuY2VvZiBTVkdFbGVtZW50KXtcbiAgICAgIHJldHVybiB0aGlzLmxpdmVTb2NrZXQub3duZXIocGh4VGFyZ2V0LCB2aWV3ID0+IGNhbGxiYWNrKHZpZXcsIHBoeFRhcmdldCkpXG4gICAgfVxuXG4gICAgaWYoaXNDaWQocGh4VGFyZ2V0KSl7XG4gICAgICBsZXQgdGFyZ2V0cyA9IERPTS5maW5kQ29tcG9uZW50Tm9kZUxpc3QodGhpcy5lbCwgcGh4VGFyZ2V0KVxuICAgICAgaWYodGFyZ2V0cy5sZW5ndGggPT09IDApe1xuICAgICAgICBsb2dFcnJvcihgbm8gY29tcG9uZW50IGZvdW5kIG1hdGNoaW5nIHBoeC10YXJnZXQgb2YgJHtwaHhUYXJnZXR9YClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNhbGxiYWNrKHRoaXMsIHBhcnNlSW50KHBoeFRhcmdldCkpXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCB0YXJnZXRzID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHBoeFRhcmdldCkpXG4gICAgICBpZih0YXJnZXRzLmxlbmd0aCA9PT0gMCl7IGxvZ0Vycm9yKGBub3RoaW5nIGZvdW5kIG1hdGNoaW5nIHRoZSBwaHgtdGFyZ2V0IHNlbGVjdG9yIFwiJHtwaHhUYXJnZXR9XCJgKSB9XG4gICAgICB0YXJnZXRzLmZvckVhY2godGFyZ2V0ID0+IHRoaXMubGl2ZVNvY2tldC5vd25lcih0YXJnZXQsIHZpZXcgPT4gY2FsbGJhY2sodmlldywgdGFyZ2V0KSkpXG4gICAgfVxuICB9XG5cbiAgYXBwbHlEaWZmKHR5cGUsIHJhd0RpZmYsIGNhbGxiYWNrKXtcbiAgICB0aGlzLmxvZyh0eXBlLCAoKSA9PiBbXCJcIiwgY2xvbmUocmF3RGlmZildKVxuICAgIGxldCB7ZGlmZiwgcmVwbHksIGV2ZW50cywgdGl0bGV9ID0gUmVuZGVyZWQuZXh0cmFjdChyYXdEaWZmKVxuICAgIGNhbGxiYWNrKHtkaWZmLCByZXBseSwgZXZlbnRzfSlcbiAgICBpZih0aXRsZSl7IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gRE9NLnB1dFRpdGxlKHRpdGxlKSkgfVxuICB9XG5cbiAgb25Kb2luKHJlc3Ape1xuICAgIGxldCB7cmVuZGVyZWQsIGNvbnRhaW5lcn0gPSByZXNwXG4gICAgaWYoY29udGFpbmVyKXtcbiAgICAgIGxldCBbdGFnLCBhdHRyc10gPSBjb250YWluZXJcbiAgICAgIHRoaXMuZWwgPSBET00ucmVwbGFjZVJvb3RDb250YWluZXIodGhpcy5lbCwgdGFnLCBhdHRycylcbiAgICB9XG4gICAgdGhpcy5jaGlsZEpvaW5zID0gMFxuICAgIHRoaXMuam9pblBlbmRpbmcgPSB0cnVlXG4gICAgdGhpcy5mbGFzaCA9IG51bGxcblxuICAgIEJyb3dzZXIuZHJvcExvY2FsKHRoaXMubGl2ZVNvY2tldC5sb2NhbFN0b3JhZ2UsIHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSwgQ09OU0VDVVRJVkVfUkVMT0FEUylcbiAgICB0aGlzLmFwcGx5RGlmZihcIm1vdW50XCIsIHJlbmRlcmVkLCAoe2RpZmYsIGV2ZW50c30pID0+IHtcbiAgICAgIHRoaXMucmVuZGVyZWQgPSBuZXcgUmVuZGVyZWQodGhpcy5pZCwgZGlmZilcbiAgICAgIGxldCBbaHRtbCwgc3RyZWFtc10gPSB0aGlzLnJlbmRlckNvbnRhaW5lcihudWxsLCBcImpvaW5cIilcbiAgICAgIHRoaXMuZHJvcFBlbmRpbmdSZWZzKClcbiAgICAgIGxldCBmb3JtcyA9IHRoaXMuZm9ybXNGb3JSZWNvdmVyeShodG1sKVxuICAgICAgdGhpcy5qb2luQ291bnQrK1xuXG4gICAgICBpZihmb3Jtcy5sZW5ndGggPiAwKXtcbiAgICAgICAgZm9ybXMuZm9yRWFjaCgoW2Zvcm0sIG5ld0Zvcm0sIG5ld0NpZF0sIGkpID0+IHtcbiAgICAgICAgICB0aGlzLnB1c2hGb3JtUmVjb3ZlcnkoZm9ybSwgbmV3Q2lkLCByZXNwID0+IHtcbiAgICAgICAgICAgIGlmKGkgPT09IGZvcm1zLmxlbmd0aCAtIDEpe1xuICAgICAgICAgICAgICB0aGlzLm9uSm9pbkNvbXBsZXRlKHJlc3AsIGh0bWwsIHN0cmVhbXMsIGV2ZW50cylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5vbkpvaW5Db21wbGV0ZShyZXNwLCBodG1sLCBzdHJlYW1zLCBldmVudHMpXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIGRyb3BQZW5kaW5nUmVmcygpe1xuICAgIERPTS5hbGwoZG9jdW1lbnQsIGBbJHtQSFhfUkVGX1NSQ309XCIke3RoaXMuaWR9XCJdWyR7UEhYX1JFRn1dYCwgZWwgPT4ge1xuICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKFBIWF9SRUYpXG4gICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoUEhYX1JFRl9TUkMpXG4gICAgfSlcbiAgfVxuXG4gIG9uSm9pbkNvbXBsZXRlKHtsaXZlX3BhdGNofSwgaHRtbCwgc3RyZWFtcywgZXZlbnRzKXtcbiAgICAvLyBJbiBvcmRlciB0byBwcm92aWRlIGEgYmV0dGVyIGV4cGVyaWVuY2UsIHdlIHdhbnQgdG8gam9pblxuICAgIC8vIGFsbCBMaXZlVmlld3MgZmlyc3QgYW5kIG9ubHkgdGhlbiBhcHBseSB0aGVpciBwYXRjaGVzLlxuICAgIGlmKHRoaXMuam9pbkNvdW50ID4gMSB8fCAodGhpcy5wYXJlbnQgJiYgIXRoaXMucGFyZW50LmlzSm9pblBlbmRpbmcoKSkpe1xuICAgICAgcmV0dXJuIHRoaXMuYXBwbHlKb2luUGF0Y2gobGl2ZV9wYXRjaCwgaHRtbCwgc3RyZWFtcywgZXZlbnRzKVxuICAgIH1cblxuICAgIC8vIE9uZSBkb3duc2lkZSBvZiB0aGlzIGFwcHJvYWNoIGlzIHRoYXQgd2UgbmVlZCB0byBmaW5kIHBoeENoaWxkcmVuXG4gICAgLy8gaW4gdGhlIGh0bWwgZnJhZ21lbnQsIGluc3RlYWQgb2YgZGlyZWN0bHkgb24gdGhlIERPTS4gVGhlIGZyYWdtZW50XG4gICAgLy8gYWxzbyBkb2VzIG5vdCBpbmNsdWRlIFBIWF9TVEFUSUMsIHNvIHdlIG5lZWQgdG8gY29weSBpdCBvdmVyIGZyb21cbiAgICAvLyB0aGUgRE9NLlxuICAgIGxldCBuZXdDaGlsZHJlbiA9IERPTS5maW5kUGh4Q2hpbGRyZW5JbkZyYWdtZW50KGh0bWwsIHRoaXMuaWQpLmZpbHRlcih0b0VsID0+IHtcbiAgICAgIGxldCBmcm9tRWwgPSB0b0VsLmlkICYmIHRoaXMuZWwucXVlcnlTZWxlY3RvcihgW2lkPVwiJHt0b0VsLmlkfVwiXWApXG4gICAgICBsZXQgcGh4U3RhdGljID0gZnJvbUVsICYmIGZyb21FbC5nZXRBdHRyaWJ1dGUoUEhYX1NUQVRJQylcbiAgICAgIGlmKHBoeFN0YXRpYyl7IHRvRWwuc2V0QXR0cmlidXRlKFBIWF9TVEFUSUMsIHBoeFN0YXRpYykgfVxuICAgICAgcmV0dXJuIHRoaXMuam9pbkNoaWxkKHRvRWwpXG4gICAgfSlcblxuICAgIGlmKG5ld0NoaWxkcmVuLmxlbmd0aCA9PT0gMCl7XG4gICAgICBpZih0aGlzLnBhcmVudCl7XG4gICAgICAgIHRoaXMucm9vdC5wZW5kaW5nSm9pbk9wcy5wdXNoKFt0aGlzLCAoKSA9PiB0aGlzLmFwcGx5Sm9pblBhdGNoKGxpdmVfcGF0Y2gsIGh0bWwsIHN0cmVhbXMsIGV2ZW50cyldKVxuICAgICAgICB0aGlzLnBhcmVudC5hY2tKb2luKHRoaXMpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLm9uQWxsQ2hpbGRKb2luc0NvbXBsZXRlKClcbiAgICAgICAgdGhpcy5hcHBseUpvaW5QYXRjaChsaXZlX3BhdGNoLCBodG1sLCBzdHJlYW1zLCBldmVudHMpXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucm9vdC5wZW5kaW5nSm9pbk9wcy5wdXNoKFt0aGlzLCAoKSA9PiB0aGlzLmFwcGx5Sm9pblBhdGNoKGxpdmVfcGF0Y2gsIGh0bWwsIHN0cmVhbXMsIGV2ZW50cyldKVxuICAgIH1cbiAgfVxuXG4gIGF0dGFjaFRydWVEb2NFbCgpe1xuICAgIHRoaXMuZWwgPSBET00uYnlJZCh0aGlzLmlkKVxuICAgIHRoaXMuZWwuc2V0QXR0cmlidXRlKFBIWF9ST09UX0lELCB0aGlzLnJvb3QuaWQpXG4gIH1cblxuICBleGVjTmV3TW91bnRlZCgpe1xuICAgIERPTS5hbGwodGhpcy5lbCwgYFske3RoaXMuYmluZGluZyhQSFhfSE9PSyl9XSwgW2RhdGEtcGh4LSR7UEhYX0hPT0t9XWAsIGhvb2tFbCA9PiB7XG4gICAgICB0aGlzLm1heWJlQWRkTmV3SG9vayhob29rRWwpXG4gICAgfSlcbiAgICBET00uYWxsKHRoaXMuZWwsIGBbJHt0aGlzLmJpbmRpbmcoUEhYX01PVU5URUQpfV1gLCBlbCA9PiB0aGlzLm1heWJlTW91bnRlZChlbCkpXG4gIH1cblxuICBhcHBseUpvaW5QYXRjaChsaXZlX3BhdGNoLCBodG1sLCBzdHJlYW1zLCBldmVudHMpe1xuICAgIHRoaXMuYXR0YWNoVHJ1ZURvY0VsKClcbiAgICBsZXQgcGF0Y2ggPSBuZXcgRE9NUGF0Y2godGhpcywgdGhpcy5lbCwgdGhpcy5pZCwgaHRtbCwgc3RyZWFtcywgbnVsbClcbiAgICBwYXRjaC5tYXJrUHJ1bmFibGVDb250ZW50Rm9yUmVtb3ZhbCgpXG4gICAgdGhpcy5wZXJmb3JtUGF0Y2gocGF0Y2gsIGZhbHNlKVxuICAgIHRoaXMuam9pbk5ld0NoaWxkcmVuKClcbiAgICB0aGlzLmV4ZWNOZXdNb3VudGVkKClcblxuICAgIHRoaXMuam9pblBlbmRpbmcgPSBmYWxzZVxuICAgIHRoaXMubGl2ZVNvY2tldC5kaXNwYXRjaEV2ZW50cyhldmVudHMpXG4gICAgdGhpcy5hcHBseVBlbmRpbmdVcGRhdGVzKClcblxuICAgIGlmKGxpdmVfcGF0Y2gpe1xuICAgICAgbGV0IHtraW5kLCB0b30gPSBsaXZlX3BhdGNoXG4gICAgICB0aGlzLmxpdmVTb2NrZXQuaGlzdG9yeVBhdGNoKHRvLCBraW5kKVxuICAgIH1cbiAgICB0aGlzLmhpZGVMb2FkZXIoKVxuICAgIGlmKHRoaXMuam9pbkNvdW50ID4gMSl7IHRoaXMudHJpZ2dlclJlY29ubmVjdGVkKCkgfVxuICAgIHRoaXMuc3RvcENhbGxiYWNrKClcbiAgfVxuXG4gIHRyaWdnZXJCZWZvcmVVcGRhdGVIb29rKGZyb21FbCwgdG9FbCl7XG4gICAgdGhpcy5saXZlU29ja2V0LnRyaWdnZXJET00oXCJvbkJlZm9yZUVsVXBkYXRlZFwiLCBbZnJvbUVsLCB0b0VsXSlcbiAgICBsZXQgaG9vayA9IHRoaXMuZ2V0SG9vayhmcm9tRWwpXG4gICAgbGV0IGlzSWdub3JlZCA9IGhvb2sgJiYgRE9NLmlzSWdub3JlZChmcm9tRWwsIHRoaXMuYmluZGluZyhQSFhfVVBEQVRFKSlcbiAgICBpZihob29rICYmICFmcm9tRWwuaXNFcXVhbE5vZGUodG9FbCkgJiYgIShpc0lnbm9yZWQgJiYgaXNFcXVhbE9iaihmcm9tRWwuZGF0YXNldCwgdG9FbC5kYXRhc2V0KSkpe1xuICAgICAgaG9vay5fX2JlZm9yZVVwZGF0ZSgpXG4gICAgICByZXR1cm4gaG9va1xuICAgIH1cbiAgfVxuXG4gIG1heWJlTW91bnRlZChlbCl7XG4gICAgbGV0IHBoeE1vdW50ZWQgPSBlbC5nZXRBdHRyaWJ1dGUodGhpcy5iaW5kaW5nKFBIWF9NT1VOVEVEKSlcbiAgICBsZXQgaGFzQmVlbkludm9rZWQgPSBwaHhNb3VudGVkICYmIERPTS5wcml2YXRlKGVsLCBcIm1vdW50ZWRcIilcbiAgICBpZihwaHhNb3VudGVkICYmICFoYXNCZWVuSW52b2tlZCl7XG4gICAgICB0aGlzLmxpdmVTb2NrZXQuZXhlY0pTKGVsLCBwaHhNb3VudGVkKVxuICAgICAgRE9NLnB1dFByaXZhdGUoZWwsIFwibW91bnRlZFwiLCB0cnVlKVxuICAgIH1cbiAgfVxuXG4gIG1heWJlQWRkTmV3SG9vayhlbCwgZm9yY2Upe1xuICAgIGxldCBuZXdIb29rID0gdGhpcy5hZGRIb29rKGVsKVxuICAgIGlmKG5ld0hvb2speyBuZXdIb29rLl9fbW91bnRlZCgpIH1cbiAgfVxuXG4gIHBlcmZvcm1QYXRjaChwYXRjaCwgcHJ1bmVDaWRzKXtcbiAgICBsZXQgcmVtb3ZlZEVscyA9IFtdXG4gICAgbGV0IHBoeENoaWxkcmVuQWRkZWQgPSBmYWxzZVxuICAgIGxldCB1cGRhdGVkSG9va0lkcyA9IG5ldyBTZXQoKVxuXG4gICAgcGF0Y2guYWZ0ZXIoXCJhZGRlZFwiLCBlbCA9PiB7XG4gICAgICB0aGlzLmxpdmVTb2NrZXQudHJpZ2dlckRPTShcIm9uTm9kZUFkZGVkXCIsIFtlbF0pXG4gICAgICB0aGlzLm1heWJlQWRkTmV3SG9vayhlbClcbiAgICAgIGlmKGVsLmdldEF0dHJpYnV0ZSl7IHRoaXMubWF5YmVNb3VudGVkKGVsKSB9XG4gICAgfSlcblxuICAgIHBhdGNoLmFmdGVyKFwicGh4Q2hpbGRBZGRlZFwiLCBlbCA9PiB7XG4gICAgICBpZihET00uaXNQaHhTdGlja3koZWwpKXtcbiAgICAgICAgdGhpcy5saXZlU29ja2V0LmpvaW5Sb290Vmlld3MoKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcGh4Q2hpbGRyZW5BZGRlZCA9IHRydWVcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgcGF0Y2guYmVmb3JlKFwidXBkYXRlZFwiLCAoZnJvbUVsLCB0b0VsKSA9PiB7XG4gICAgICBsZXQgaG9vayA9IHRoaXMudHJpZ2dlckJlZm9yZVVwZGF0ZUhvb2soZnJvbUVsLCB0b0VsKVxuICAgICAgaWYoaG9vayl7IHVwZGF0ZWRIb29rSWRzLmFkZChmcm9tRWwuaWQpIH1cbiAgICB9KVxuXG4gICAgcGF0Y2guYWZ0ZXIoXCJ1cGRhdGVkXCIsIGVsID0+IHtcbiAgICAgIGlmKHVwZGF0ZWRIb29rSWRzLmhhcyhlbC5pZCkpeyB0aGlzLmdldEhvb2soZWwpLl9fdXBkYXRlZCgpIH1cbiAgICB9KVxuXG4gICAgcGF0Y2guYWZ0ZXIoXCJkaXNjYXJkZWRcIiwgKGVsKSA9PiB7XG4gICAgICBpZihlbC5ub2RlVHlwZSA9PT0gTm9kZS5FTEVNRU5UX05PREUpeyByZW1vdmVkRWxzLnB1c2goZWwpIH1cbiAgICB9KVxuXG4gICAgcGF0Y2guYWZ0ZXIoXCJ0cmFuc2l0aW9uc0Rpc2NhcmRlZFwiLCBlbHMgPT4gdGhpcy5hZnRlckVsZW1lbnRzUmVtb3ZlZChlbHMsIHBydW5lQ2lkcykpXG4gICAgcGF0Y2gucGVyZm9ybSgpXG4gICAgdGhpcy5hZnRlckVsZW1lbnRzUmVtb3ZlZChyZW1vdmVkRWxzLCBwcnVuZUNpZHMpXG5cbiAgICByZXR1cm4gcGh4Q2hpbGRyZW5BZGRlZFxuICB9XG5cbiAgYWZ0ZXJFbGVtZW50c1JlbW92ZWQoZWxlbWVudHMsIHBydW5lQ2lkcyl7XG4gICAgbGV0IGRlc3Ryb3llZENJRHMgPSBbXVxuICAgIGVsZW1lbnRzLmZvckVhY2gocGFyZW50ID0+IHtcbiAgICAgIGxldCBjb21wb25lbnRzID0gRE9NLmFsbChwYXJlbnQsIGBbJHtQSFhfQ09NUE9ORU5UfV1gKVxuICAgICAgbGV0IGhvb2tzID0gRE9NLmFsbChwYXJlbnQsIGBbJHt0aGlzLmJpbmRpbmcoUEhYX0hPT0spfV1gKVxuICAgICAgY29tcG9uZW50cy5jb25jYXQocGFyZW50KS5mb3JFYWNoKGVsID0+IHtcbiAgICAgICAgbGV0IGNpZCA9IHRoaXMuY29tcG9uZW50SUQoZWwpXG4gICAgICAgIGlmKGlzQ2lkKGNpZCkgJiYgZGVzdHJveWVkQ0lEcy5pbmRleE9mKGNpZCkgPT09IC0xKXsgZGVzdHJveWVkQ0lEcy5wdXNoKGNpZCkgfVxuICAgICAgfSlcbiAgICAgIGhvb2tzLmNvbmNhdChwYXJlbnQpLmZvckVhY2goaG9va0VsID0+IHtcbiAgICAgICAgbGV0IGhvb2sgPSB0aGlzLmdldEhvb2soaG9va0VsKVxuICAgICAgICBob29rICYmIHRoaXMuZGVzdHJveUhvb2soaG9vaylcbiAgICAgIH0pXG4gICAgfSlcbiAgICAvLyBXZSBzaG91bGQgbm90IHBydW5lQ2lkcyBvbiBqb2lucy4gT3RoZXJ3aXNlLCBpbiBjYXNlIG9mXG4gICAgLy8gcmVqb2lucywgd2UgbWF5IG5vdGlmeSBjaWRzIHRoYXQgbm8gbG9uZ2VyIGJlbG9uZyB0byB0aGVcbiAgICAvLyBjdXJyZW50IExpdmVWaWV3IHRvIGJlIHJlbW92ZWQuXG4gICAgaWYocHJ1bmVDaWRzKXtcbiAgICAgIHRoaXMubWF5YmVQdXNoQ29tcG9uZW50c0Rlc3Ryb3llZChkZXN0cm95ZWRDSURzKVxuICAgIH1cbiAgfVxuXG4gIGpvaW5OZXdDaGlsZHJlbigpe1xuICAgIERPTS5maW5kUGh4Q2hpbGRyZW4odGhpcy5lbCwgdGhpcy5pZCkuZm9yRWFjaChlbCA9PiB0aGlzLmpvaW5DaGlsZChlbCkpXG4gIH1cblxuICBnZXRDaGlsZEJ5SWQoaWQpeyByZXR1cm4gdGhpcy5yb290LmNoaWxkcmVuW3RoaXMuaWRdW2lkXSB9XG5cbiAgZ2V0RGVzY2VuZGVudEJ5RWwoZWwpe1xuICAgIGlmKGVsLmlkID09PSB0aGlzLmlkKXtcbiAgICAgIHJldHVybiB0aGlzXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLmNoaWxkcmVuW2VsLmdldEF0dHJpYnV0ZShQSFhfUEFSRU5UX0lEKV1bZWwuaWRdXG4gICAgfVxuICB9XG5cbiAgZGVzdHJveURlc2NlbmRlbnQoaWQpe1xuICAgIGZvcihsZXQgcGFyZW50SWQgaW4gdGhpcy5yb290LmNoaWxkcmVuKXtcbiAgICAgIGZvcihsZXQgY2hpbGRJZCBpbiB0aGlzLnJvb3QuY2hpbGRyZW5bcGFyZW50SWRdKXtcbiAgICAgICAgaWYoY2hpbGRJZCA9PT0gaWQpeyByZXR1cm4gdGhpcy5yb290LmNoaWxkcmVuW3BhcmVudElkXVtjaGlsZElkXS5kZXN0cm95KCkgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGpvaW5DaGlsZChlbCl7XG4gICAgbGV0IGNoaWxkID0gdGhpcy5nZXRDaGlsZEJ5SWQoZWwuaWQpXG4gICAgaWYoIWNoaWxkKXtcbiAgICAgIGxldCB2aWV3ID0gbmV3IFZpZXcoZWwsIHRoaXMubGl2ZVNvY2tldCwgdGhpcylcbiAgICAgIHRoaXMucm9vdC5jaGlsZHJlblt0aGlzLmlkXVt2aWV3LmlkXSA9IHZpZXdcbiAgICAgIHZpZXcuam9pbigpXG4gICAgICB0aGlzLmNoaWxkSm9pbnMrK1xuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gIH1cblxuICBpc0pvaW5QZW5kaW5nKCl7IHJldHVybiB0aGlzLmpvaW5QZW5kaW5nIH1cblxuICBhY2tKb2luKF9jaGlsZCl7XG4gICAgdGhpcy5jaGlsZEpvaW5zLS1cblxuICAgIGlmKHRoaXMuY2hpbGRKb2lucyA9PT0gMCl7XG4gICAgICBpZih0aGlzLnBhcmVudCl7XG4gICAgICAgIHRoaXMucGFyZW50LmFja0pvaW4odGhpcylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMub25BbGxDaGlsZEpvaW5zQ29tcGxldGUoKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIG9uQWxsQ2hpbGRKb2luc0NvbXBsZXRlKCl7XG4gICAgdGhpcy5qb2luQ2FsbGJhY2soKCkgPT4ge1xuICAgICAgdGhpcy5wZW5kaW5nSm9pbk9wcy5mb3JFYWNoKChbdmlldywgb3BdKSA9PiB7XG4gICAgICAgIGlmKCF2aWV3LmlzRGVzdHJveWVkKCkpeyBvcCgpIH1cbiAgICAgIH0pXG4gICAgICB0aGlzLnBlbmRpbmdKb2luT3BzID0gW11cbiAgICB9KVxuICB9XG5cbiAgdXBkYXRlKGRpZmYsIGV2ZW50cyl7XG4gICAgaWYodGhpcy5pc0pvaW5QZW5kaW5nKCkgfHwgKHRoaXMubGl2ZVNvY2tldC5oYXNQZW5kaW5nTGluaygpICYmIHRoaXMucm9vdC5pc01haW4oKSkpe1xuICAgICAgcmV0dXJuIHRoaXMucGVuZGluZ0RpZmZzLnB1c2goe2RpZmYsIGV2ZW50c30pXG4gICAgfVxuXG4gICAgdGhpcy5yZW5kZXJlZC5tZXJnZURpZmYoZGlmZilcbiAgICBsZXQgcGh4Q2hpbGRyZW5BZGRlZCA9IGZhbHNlXG5cbiAgICAvLyBXaGVuIHRoZSBkaWZmIG9ubHkgY29udGFpbnMgY29tcG9uZW50IGRpZmZzLCB0aGVuIHdhbGsgY29tcG9uZW50c1xuICAgIC8vIGFuZCBwYXRjaCBvbmx5IHRoZSBwYXJlbnQgY29tcG9uZW50IGNvbnRhaW5lcnMgZm91bmQgaW4gdGhlIGRpZmYuXG4gICAgLy8gT3RoZXJ3aXNlLCBwYXRjaCBlbnRpcmUgTFYgY29udGFpbmVyLlxuICAgIGlmKHRoaXMucmVuZGVyZWQuaXNDb21wb25lbnRPbmx5RGlmZihkaWZmKSl7XG4gICAgICB0aGlzLmxpdmVTb2NrZXQudGltZShcImNvbXBvbmVudCBwYXRjaCBjb21wbGV0ZVwiLCAoKSA9PiB7XG4gICAgICAgIGxldCBwYXJlbnRDaWRzID0gRE9NLmZpbmRQYXJlbnRDSURzKHRoaXMuZWwsIHRoaXMucmVuZGVyZWQuY29tcG9uZW50Q0lEcyhkaWZmKSlcbiAgICAgICAgcGFyZW50Q2lkcy5mb3JFYWNoKHBhcmVudENJRCA9PiB7XG4gICAgICAgICAgaWYodGhpcy5jb21wb25lbnRQYXRjaCh0aGlzLnJlbmRlcmVkLmdldENvbXBvbmVudChkaWZmLCBwYXJlbnRDSUQpLCBwYXJlbnRDSUQpKXsgcGh4Q2hpbGRyZW5BZGRlZCA9IHRydWUgfVxuICAgICAgICB9KVxuICAgICAgfSlcbiAgICB9IGVsc2UgaWYoIWlzRW1wdHkoZGlmZikpe1xuICAgICAgdGhpcy5saXZlU29ja2V0LnRpbWUoXCJmdWxsIHBhdGNoIGNvbXBsZXRlXCIsICgpID0+IHtcbiAgICAgICAgbGV0IFtodG1sLCBzdHJlYW1zXSA9IHRoaXMucmVuZGVyQ29udGFpbmVyKGRpZmYsIFwidXBkYXRlXCIpXG4gICAgICAgIGxldCBwYXRjaCA9IG5ldyBET01QYXRjaCh0aGlzLCB0aGlzLmVsLCB0aGlzLmlkLCBodG1sLCBzdHJlYW1zLCBudWxsKVxuICAgICAgICBwaHhDaGlsZHJlbkFkZGVkID0gdGhpcy5wZXJmb3JtUGF0Y2gocGF0Y2gsIHRydWUpXG4gICAgICB9KVxuICAgIH1cblxuICAgIHRoaXMubGl2ZVNvY2tldC5kaXNwYXRjaEV2ZW50cyhldmVudHMpXG4gICAgaWYocGh4Q2hpbGRyZW5BZGRlZCl7IHRoaXMuam9pbk5ld0NoaWxkcmVuKCkgfVxuICB9XG5cbiAgcmVuZGVyQ29udGFpbmVyKGRpZmYsIGtpbmQpe1xuICAgIHJldHVybiB0aGlzLmxpdmVTb2NrZXQudGltZShgdG9TdHJpbmcgZGlmZiAoJHtraW5kfSlgLCAoKSA9PiB7XG4gICAgICBsZXQgdGFnID0gdGhpcy5lbC50YWdOYW1lXG4gICAgICAvLyBEb24ndCBza2lwIGFueSBjb21wb25lbnQgaW4gdGhlIGRpZmYgbm9yIGFueSBtYXJrZWQgYXMgcHJ1bmVkXG4gICAgICAvLyAoYXMgdGhleSBtYXkgaGF2ZSBiZWVuIGFkZGVkIGJhY2spXG4gICAgICBsZXQgY2lkcyA9IGRpZmYgPyB0aGlzLnJlbmRlcmVkLmNvbXBvbmVudENJRHMoZGlmZikuY29uY2F0KHRoaXMucHJ1bmluZ0NJRHMpIDogbnVsbFxuICAgICAgbGV0IFtodG1sLCBzdHJlYW1zXSA9IHRoaXMucmVuZGVyZWQudG9TdHJpbmcoY2lkcylcbiAgICAgIHJldHVybiBbYDwke3RhZ30+JHtodG1sfTwvJHt0YWd9PmAsIHN0cmVhbXNdXG4gICAgfSlcbiAgfVxuXG4gIGNvbXBvbmVudFBhdGNoKGRpZmYsIGNpZCl7XG4gICAgaWYoaXNFbXB0eShkaWZmKSkgcmV0dXJuIGZhbHNlXG4gICAgbGV0IFtodG1sLCBzdHJlYW1zXSA9IHRoaXMucmVuZGVyZWQuY29tcG9uZW50VG9TdHJpbmcoY2lkKVxuICAgIGxldCBwYXRjaCA9IG5ldyBET01QYXRjaCh0aGlzLCB0aGlzLmVsLCB0aGlzLmlkLCBodG1sLCBzdHJlYW1zLCBjaWQpXG4gICAgbGV0IGNoaWxkcmVuQWRkZWQgPSB0aGlzLnBlcmZvcm1QYXRjaChwYXRjaCwgdHJ1ZSlcbiAgICByZXR1cm4gY2hpbGRyZW5BZGRlZFxuICB9XG5cbiAgZ2V0SG9vayhlbCl7IHJldHVybiB0aGlzLnZpZXdIb29rc1tWaWV3SG9vay5lbGVtZW50SUQoZWwpXSB9XG5cbiAgYWRkSG9vayhlbCl7XG4gICAgaWYoVmlld0hvb2suZWxlbWVudElEKGVsKSB8fCAhZWwuZ2V0QXR0cmlidXRlKXsgcmV0dXJuIH1cbiAgICBsZXQgaG9va05hbWUgPSBlbC5nZXRBdHRyaWJ1dGUoYGRhdGEtcGh4LSR7UEhYX0hPT0t9YCkgfHwgZWwuZ2V0QXR0cmlidXRlKHRoaXMuYmluZGluZyhQSFhfSE9PSykpXG4gICAgaWYoaG9va05hbWUgJiYgIXRoaXMub3duc0VsZW1lbnQoZWwpKXsgcmV0dXJuIH1cbiAgICBsZXQgY2FsbGJhY2tzID0gdGhpcy5saXZlU29ja2V0LmdldEhvb2tDYWxsYmFja3MoaG9va05hbWUpXG5cbiAgICBpZihjYWxsYmFja3Mpe1xuICAgICAgaWYoIWVsLmlkKXsgbG9nRXJyb3IoYG5vIERPTSBJRCBmb3IgaG9vayBcIiR7aG9va05hbWV9XCIuIEhvb2tzIHJlcXVpcmUgYSB1bmlxdWUgSUQgb24gZWFjaCBlbGVtZW50LmAsIGVsKSB9XG4gICAgICBsZXQgaG9vayA9IG5ldyBWaWV3SG9vayh0aGlzLCBlbCwgY2FsbGJhY2tzKVxuICAgICAgdGhpcy52aWV3SG9va3NbVmlld0hvb2suZWxlbWVudElEKGhvb2suZWwpXSA9IGhvb2tcbiAgICAgIHJldHVybiBob29rXG4gICAgfSBlbHNlIGlmKGhvb2tOYW1lICE9PSBudWxsKXtcbiAgICAgIGxvZ0Vycm9yKGB1bmtub3duIGhvb2sgZm91bmQgZm9yIFwiJHtob29rTmFtZX1cImAsIGVsKVxuICAgIH1cbiAgfVxuXG4gIGRlc3Ryb3lIb29rKGhvb2spe1xuICAgIGhvb2suX19kZXN0cm95ZWQoKVxuICAgIGhvb2suX19jbGVhbnVwX18oKVxuICAgIGRlbGV0ZSB0aGlzLnZpZXdIb29rc1tWaWV3SG9vay5lbGVtZW50SUQoaG9vay5lbCldXG4gIH1cblxuICBhcHBseVBlbmRpbmdVcGRhdGVzKCl7XG4gICAgdGhpcy5wZW5kaW5nRGlmZnMuZm9yRWFjaCgoe2RpZmYsIGV2ZW50c30pID0+IHRoaXMudXBkYXRlKGRpZmYsIGV2ZW50cykpXG4gICAgdGhpcy5wZW5kaW5nRGlmZnMgPSBbXVxuICAgIHRoaXMuZWFjaENoaWxkKGNoaWxkID0+IGNoaWxkLmFwcGx5UGVuZGluZ1VwZGF0ZXMoKSlcbiAgfVxuXG4gIGVhY2hDaGlsZChjYWxsYmFjayl7XG4gICAgbGV0IGNoaWxkcmVuID0gdGhpcy5yb290LmNoaWxkcmVuW3RoaXMuaWRdIHx8IHt9XG4gICAgZm9yKGxldCBpZCBpbiBjaGlsZHJlbil7IGNhbGxiYWNrKHRoaXMuZ2V0Q2hpbGRCeUlkKGlkKSkgfVxuICB9XG5cbiAgb25DaGFubmVsKGV2ZW50LCBjYil7XG4gICAgdGhpcy5saXZlU29ja2V0Lm9uQ2hhbm5lbCh0aGlzLmNoYW5uZWwsIGV2ZW50LCByZXNwID0+IHtcbiAgICAgIGlmKHRoaXMuaXNKb2luUGVuZGluZygpKXtcbiAgICAgICAgdGhpcy5yb290LnBlbmRpbmdKb2luT3BzLnB1c2goW3RoaXMsICgpID0+IGNiKHJlc3ApXSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMubGl2ZVNvY2tldC5yZXF1ZXN0RE9NVXBkYXRlKCgpID0+IGNiKHJlc3ApKVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICBiaW5kQ2hhbm5lbCgpe1xuICAgIC8vIFRoZSBkaWZmIGV2ZW50IHNob3VsZCBiZSBoYW5kbGVkIGJ5IHRoZSByZWd1bGFyIHVwZGF0ZSBvcGVyYXRpb25zLlxuICAgIC8vIEFsbCBvdGhlciBvcGVyYXRpb25zIGFyZSBxdWV1ZWQgdG8gYmUgYXBwbGllZCBvbmx5IGFmdGVyIGpvaW4uXG4gICAgdGhpcy5saXZlU29ja2V0Lm9uQ2hhbm5lbCh0aGlzLmNoYW5uZWwsIFwiZGlmZlwiLCAocmF3RGlmZikgPT4ge1xuICAgICAgdGhpcy5saXZlU29ja2V0LnJlcXVlc3RET01VcGRhdGUoKCkgPT4ge1xuICAgICAgICB0aGlzLmFwcGx5RGlmZihcInVwZGF0ZVwiLCByYXdEaWZmLCAoe2RpZmYsIGV2ZW50c30pID0+IHRoaXMudXBkYXRlKGRpZmYsIGV2ZW50cykpXG4gICAgICB9KVxuICAgIH0pXG4gICAgdGhpcy5vbkNoYW5uZWwoXCJyZWRpcmVjdFwiLCAoe3RvLCBmbGFzaH0pID0+IHRoaXMub25SZWRpcmVjdCh7dG8sIGZsYXNofSkpXG4gICAgdGhpcy5vbkNoYW5uZWwoXCJsaXZlX3BhdGNoXCIsIChyZWRpcikgPT4gdGhpcy5vbkxpdmVQYXRjaChyZWRpcikpXG4gICAgdGhpcy5vbkNoYW5uZWwoXCJsaXZlX3JlZGlyZWN0XCIsIChyZWRpcikgPT4gdGhpcy5vbkxpdmVSZWRpcmVjdChyZWRpcikpXG4gICAgdGhpcy5jaGFubmVsLm9uRXJyb3IocmVhc29uID0+IHRoaXMub25FcnJvcihyZWFzb24pKVxuICAgIHRoaXMuY2hhbm5lbC5vbkNsb3NlKHJlYXNvbiA9PiB0aGlzLm9uQ2xvc2UocmVhc29uKSlcbiAgfVxuXG4gIGRlc3Ryb3lBbGxDaGlsZHJlbigpeyB0aGlzLmVhY2hDaGlsZChjaGlsZCA9PiBjaGlsZC5kZXN0cm95KCkpIH1cblxuICBvbkxpdmVSZWRpcmVjdChyZWRpcil7XG4gICAgbGV0IHt0bywga2luZCwgZmxhc2h9ID0gcmVkaXJcbiAgICBsZXQgdXJsID0gdGhpcy5leHBhbmRVUkwodG8pXG4gICAgdGhpcy5saXZlU29ja2V0Lmhpc3RvcnlSZWRpcmVjdCh1cmwsIGtpbmQsIGZsYXNoKVxuICB9XG5cbiAgb25MaXZlUGF0Y2gocmVkaXIpe1xuICAgIGxldCB7dG8sIGtpbmR9ID0gcmVkaXJcbiAgICB0aGlzLmhyZWYgPSB0aGlzLmV4cGFuZFVSTCh0bylcbiAgICB0aGlzLmxpdmVTb2NrZXQuaGlzdG9yeVBhdGNoKHRvLCBraW5kKVxuICB9XG5cbiAgZXhwYW5kVVJMKHRvKXtcbiAgICByZXR1cm4gdG8uc3RhcnRzV2l0aChcIi9cIikgPyBgJHt3aW5kb3cubG9jYXRpb24ucHJvdG9jb2x9Ly8ke3dpbmRvdy5sb2NhdGlvbi5ob3N0fSR7dG99YCA6IHRvXG4gIH1cblxuICBvblJlZGlyZWN0KHt0bywgZmxhc2h9KXsgdGhpcy5saXZlU29ja2V0LnJlZGlyZWN0KHRvLCBmbGFzaCkgfVxuXG4gIGlzRGVzdHJveWVkKCl7IHJldHVybiB0aGlzLmRlc3Ryb3llZCB9XG5cbiAgam9pbkRlYWQoKXsgdGhpcy5pc0RlYWQgPSB0cnVlIH1cblxuICBqb2luKGNhbGxiYWNrKXtcbiAgICB0aGlzLnNob3dMb2FkZXIodGhpcy5saXZlU29ja2V0LmxvYWRlclRpbWVvdXQpXG4gICAgdGhpcy5iaW5kQ2hhbm5lbCgpXG4gICAgaWYodGhpcy5pc01haW4oKSl7XG4gICAgICB0aGlzLnN0b3BDYWxsYmFjayA9IHRoaXMubGl2ZVNvY2tldC53aXRoUGFnZUxvYWRpbmcoe3RvOiB0aGlzLmhyZWYsIGtpbmQ6IFwiaW5pdGlhbFwifSlcbiAgICB9XG4gICAgdGhpcy5qb2luQ2FsbGJhY2sgPSAob25Eb25lKSA9PiB7XG4gICAgICBvbkRvbmUgPSBvbkRvbmUgfHwgZnVuY3Rpb24oKXt9XG4gICAgICBjYWxsYmFjayA/IGNhbGxiYWNrKHRoaXMuam9pbkNvdW50LCBvbkRvbmUpIDogb25Eb25lKClcbiAgICB9XG4gICAgdGhpcy5saXZlU29ja2V0LndyYXBQdXNoKHRoaXMsIHt0aW1lb3V0OiBmYWxzZX0sICgpID0+IHtcbiAgICAgIHJldHVybiB0aGlzLmNoYW5uZWwuam9pbigpXG4gICAgICAgIC5yZWNlaXZlKFwib2tcIiwgZGF0YSA9PiB7XG4gICAgICAgICAgaWYoIXRoaXMuaXNEZXN0cm95ZWQoKSl7XG4gICAgICAgICAgICB0aGlzLmxpdmVTb2NrZXQucmVxdWVzdERPTVVwZGF0ZSgoKSA9PiB0aGlzLm9uSm9pbihkYXRhKSlcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIC5yZWNlaXZlKFwiZXJyb3JcIiwgcmVzcCA9PiAhdGhpcy5pc0Rlc3Ryb3llZCgpICYmIHRoaXMub25Kb2luRXJyb3IocmVzcCkpXG4gICAgICAgIC5yZWNlaXZlKFwidGltZW91dFwiLCAoKSA9PiAhdGhpcy5pc0Rlc3Ryb3llZCgpICYmIHRoaXMub25Kb2luRXJyb3Ioe3JlYXNvbjogXCJ0aW1lb3V0XCJ9KSlcbiAgICB9KVxuICB9XG5cbiAgb25Kb2luRXJyb3IocmVzcCl7XG4gICAgaWYocmVzcC5yZWFzb24gPT09IFwicmVsb2FkXCIpe1xuICAgICAgdGhpcy5sb2coXCJlcnJvclwiLCAoKSA9PiBbYGZhaWxlZCBtb3VudCB3aXRoICR7cmVzcC5zdGF0dXN9LiBGYWxsaW5nIGJhY2sgdG8gcGFnZSByZXF1ZXN0YCwgcmVzcF0pXG4gICAgICByZXR1cm4gdGhpcy5vblJlZGlyZWN0KHt0bzogdGhpcy5ocmVmfSlcbiAgICB9IGVsc2UgaWYocmVzcC5yZWFzb24gPT09IFwidW5hdXRob3JpemVkXCIgfHwgcmVzcC5yZWFzb24gPT09IFwic3RhbGVcIil7XG4gICAgICB0aGlzLmxvZyhcImVycm9yXCIsICgpID0+IFtcInVuYXV0aG9yaXplZCBsaXZlX3JlZGlyZWN0LiBGYWxsaW5nIGJhY2sgdG8gcGFnZSByZXF1ZXN0XCIsIHJlc3BdKVxuICAgICAgcmV0dXJuIHRoaXMub25SZWRpcmVjdCh7dG86IHRoaXMuaHJlZn0pXG4gICAgfVxuICAgIGlmKHJlc3AucmVkaXJlY3QgfHwgcmVzcC5saXZlX3JlZGlyZWN0KXtcbiAgICAgIHRoaXMuam9pblBlbmRpbmcgPSBmYWxzZVxuICAgICAgdGhpcy5jaGFubmVsLmxlYXZlKClcbiAgICB9XG4gICAgaWYocmVzcC5yZWRpcmVjdCl7IHJldHVybiB0aGlzLm9uUmVkaXJlY3QocmVzcC5yZWRpcmVjdCkgfVxuICAgIGlmKHJlc3AubGl2ZV9yZWRpcmVjdCl7IHJldHVybiB0aGlzLm9uTGl2ZVJlZGlyZWN0KHJlc3AubGl2ZV9yZWRpcmVjdCkgfVxuICAgIHRoaXMubG9nKFwiZXJyb3JcIiwgKCkgPT4gW1widW5hYmxlIHRvIGpvaW5cIiwgcmVzcF0pXG4gICAgaWYodGhpcy5saXZlU29ja2V0LmlzQ29ubmVjdGVkKCkpeyB0aGlzLmxpdmVTb2NrZXQucmVsb2FkV2l0aEppdHRlcih0aGlzKSB9XG4gIH1cblxuICBvbkNsb3NlKHJlYXNvbil7XG4gICAgaWYodGhpcy5pc0Rlc3Ryb3llZCgpKXsgcmV0dXJuIH1cbiAgICBpZih0aGlzLmxpdmVTb2NrZXQuaGFzUGVuZGluZ0xpbmsoKSAmJiByZWFzb24gIT09IFwibGVhdmVcIil7XG4gICAgICByZXR1cm4gdGhpcy5saXZlU29ja2V0LnJlbG9hZFdpdGhKaXR0ZXIodGhpcylcbiAgICB9XG4gICAgdGhpcy5kZXN0cm95QWxsQ2hpbGRyZW4oKVxuICAgIHRoaXMubGl2ZVNvY2tldC5kcm9wQWN0aXZlRWxlbWVudCh0aGlzKVxuICAgIC8vIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgY2FuIGJlIG51bGwgaW4gSW50ZXJuZXQgRXhwbG9yZXIgMTFcbiAgICBpZihkb2N1bWVudC5hY3RpdmVFbGVtZW50KXsgZG9jdW1lbnQuYWN0aXZlRWxlbWVudC5ibHVyKCkgfVxuICAgIGlmKHRoaXMubGl2ZVNvY2tldC5pc1VubG9hZGVkKCkpe1xuICAgICAgdGhpcy5zaG93TG9hZGVyKEJFRk9SRV9VTkxPQURfTE9BREVSX1RJTUVPVVQpXG4gICAgfVxuICB9XG5cbiAgb25FcnJvcihyZWFzb24pe1xuICAgIHRoaXMub25DbG9zZShyZWFzb24pXG4gICAgaWYodGhpcy5saXZlU29ja2V0LmlzQ29ubmVjdGVkKCkpeyB0aGlzLmxvZyhcImVycm9yXCIsICgpID0+IFtcInZpZXcgY3Jhc2hlZFwiLCByZWFzb25dKSB9XG4gICAgaWYoIXRoaXMubGl2ZVNvY2tldC5pc1VubG9hZGVkKCkpeyB0aGlzLmRpc3BsYXlFcnJvcigpIH1cbiAgfVxuXG4gIGRpc3BsYXlFcnJvcigpe1xuICAgIGlmKHRoaXMuaXNNYWluKCkpeyBET00uZGlzcGF0Y2hFdmVudCh3aW5kb3csIFwicGh4OnBhZ2UtbG9hZGluZy1zdGFydFwiLCB7ZGV0YWlsOiB7dG86IHRoaXMuaHJlZiwga2luZDogXCJlcnJvclwifX0pIH1cbiAgICB0aGlzLnNob3dMb2FkZXIoKVxuICAgIHRoaXMuc2V0Q29udGFpbmVyQ2xhc3NlcyhQSFhfRElTQ09OTkVDVEVEX0NMQVNTLCBQSFhfRVJST1JfQ0xBU1MpXG4gICAgdGhpcy5leGVjQWxsKHRoaXMuYmluZGluZyhcImRpc2Nvbm5lY3RlZFwiKSlcbiAgfVxuXG4gIHB1c2hXaXRoUmVwbHkocmVmR2VuZXJhdG9yLCBldmVudCwgcGF5bG9hZCwgb25SZXBseSA9IGZ1bmN0aW9uICgpeyB9KXtcbiAgICBpZighdGhpcy5pc0Nvbm5lY3RlZCgpKXsgcmV0dXJuIH1cblxuICAgIGxldCBbcmVmLCBbZWxdLCBvcHRzXSA9IHJlZkdlbmVyYXRvciA/IHJlZkdlbmVyYXRvcigpIDogW251bGwsIFtdLCB7fV1cbiAgICBsZXQgb25Mb2FkaW5nRG9uZSA9IGZ1bmN0aW9uKCl7IH1cbiAgICBpZihvcHRzLnBhZ2VfbG9hZGluZyB8fCAoZWwgJiYgKGVsLmdldEF0dHJpYnV0ZSh0aGlzLmJpbmRpbmcoUEhYX1BBR0VfTE9BRElORykpICE9PSBudWxsKSkpe1xuICAgICAgb25Mb2FkaW5nRG9uZSA9IHRoaXMubGl2ZVNvY2tldC53aXRoUGFnZUxvYWRpbmcoe2tpbmQ6IFwiZWxlbWVudFwiLCB0YXJnZXQ6IGVsfSlcbiAgICB9XG5cbiAgICBpZih0eXBlb2YgKHBheWxvYWQuY2lkKSAhPT0gXCJudW1iZXJcIil7IGRlbGV0ZSBwYXlsb2FkLmNpZCB9XG4gICAgcmV0dXJuIChcbiAgICAgIHRoaXMubGl2ZVNvY2tldC53cmFwUHVzaCh0aGlzLCB7dGltZW91dDogdHJ1ZX0sICgpID0+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2hhbm5lbC5wdXNoKGV2ZW50LCBwYXlsb2FkLCBQVVNIX1RJTUVPVVQpLnJlY2VpdmUoXCJva1wiLCByZXNwID0+IHtcbiAgICAgICAgICBsZXQgZmluaXNoID0gKGhvb2tSZXBseSkgPT4ge1xuICAgICAgICAgICAgaWYocmVzcC5yZWRpcmVjdCl7IHRoaXMub25SZWRpcmVjdChyZXNwLnJlZGlyZWN0KSB9XG4gICAgICAgICAgICBpZihyZXNwLmxpdmVfcGF0Y2gpeyB0aGlzLm9uTGl2ZVBhdGNoKHJlc3AubGl2ZV9wYXRjaCkgfVxuICAgICAgICAgICAgaWYocmVzcC5saXZlX3JlZGlyZWN0KXsgdGhpcy5vbkxpdmVSZWRpcmVjdChyZXNwLmxpdmVfcmVkaXJlY3QpIH1cbiAgICAgICAgICAgIGlmKHJlZiAhPT0gbnVsbCl7IHRoaXMudW5kb1JlZnMocmVmKSB9XG4gICAgICAgICAgICBvbkxvYWRpbmdEb25lKClcbiAgICAgICAgICAgIG9uUmVwbHkocmVzcCwgaG9va1JlcGx5KVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZihyZXNwLmRpZmYpe1xuICAgICAgICAgICAgdGhpcy5saXZlU29ja2V0LnJlcXVlc3RET01VcGRhdGUoKCkgPT4ge1xuICAgICAgICAgICAgICB0aGlzLmFwcGx5RGlmZihcInVwZGF0ZVwiLCByZXNwLmRpZmYsICh7ZGlmZiwgcmVwbHksIGV2ZW50c30pID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZShkaWZmLCBldmVudHMpXG4gICAgICAgICAgICAgICAgZmluaXNoKHJlcGx5KVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZmluaXNoKG51bGwpXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgfSlcbiAgICApXG4gIH1cblxuICB1bmRvUmVmcyhyZWYpe1xuICAgIGlmKCF0aGlzLmlzQ29ubmVjdGVkKCkpeyByZXR1cm4gfSAvLyBleGl0IGlmIGV4dGVybmFsIGZvcm0gdHJpZ2dlcmVkXG5cbiAgICBET00uYWxsKGRvY3VtZW50LCBgWyR7UEhYX1JFRl9TUkN9PVwiJHt0aGlzLmlkfVwiXVske1BIWF9SRUZ9PVwiJHtyZWZ9XCJdYCwgZWwgPT4ge1xuICAgICAgbGV0IGRpc2FibGVkVmFsID0gZWwuZ2V0QXR0cmlidXRlKFBIWF9ESVNBQkxFRClcbiAgICAgIC8vIHJlbW92ZSByZWZzXG4gICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoUEhYX1JFRilcbiAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZShQSFhfUkVGX1NSQylcbiAgICAgIC8vIHJlc3RvcmUgaW5wdXRzXG4gICAgICBpZihlbC5nZXRBdHRyaWJ1dGUoUEhYX1JFQURPTkxZKSAhPT0gbnVsbCl7XG4gICAgICAgIGVsLnJlYWRPbmx5ID0gZmFsc2VcbiAgICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKFBIWF9SRUFET05MWSlcbiAgICAgIH1cbiAgICAgIGlmKGRpc2FibGVkVmFsICE9PSBudWxsKXtcbiAgICAgICAgZWwuZGlzYWJsZWQgPSBkaXNhYmxlZFZhbCA9PT0gXCJ0cnVlXCIgPyB0cnVlIDogZmFsc2VcbiAgICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKFBIWF9ESVNBQkxFRClcbiAgICAgIH1cbiAgICAgIC8vIHJlbW92ZSBjbGFzc2VzXG4gICAgICBQSFhfRVZFTlRfQ0xBU1NFUy5mb3JFYWNoKGNsYXNzTmFtZSA9PiBET00ucmVtb3ZlQ2xhc3MoZWwsIGNsYXNzTmFtZSkpXG4gICAgICAvLyByZXN0b3JlIGRpc2FibGVzXG4gICAgICBsZXQgZGlzYWJsZVJlc3RvcmUgPSBlbC5nZXRBdHRyaWJ1dGUoUEhYX0RJU0FCTEVfV0lUSF9SRVNUT1JFKVxuICAgICAgaWYoZGlzYWJsZVJlc3RvcmUgIT09IG51bGwpe1xuICAgICAgICBlbC5pbm5lclRleHQgPSBkaXNhYmxlUmVzdG9yZVxuICAgICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoUEhYX0RJU0FCTEVfV0lUSF9SRVNUT1JFKVxuICAgICAgfVxuICAgICAgbGV0IHRvRWwgPSBET00ucHJpdmF0ZShlbCwgUEhYX1JFRilcbiAgICAgIGlmKHRvRWwpe1xuICAgICAgICBsZXQgaG9vayA9IHRoaXMudHJpZ2dlckJlZm9yZVVwZGF0ZUhvb2soZWwsIHRvRWwpXG4gICAgICAgIERPTVBhdGNoLnBhdGNoRWwoZWwsIHRvRWwsIHRoaXMubGl2ZVNvY2tldC5nZXRBY3RpdmVFbGVtZW50KCkpXG4gICAgICAgIGlmKGhvb2speyBob29rLl9fdXBkYXRlZCgpIH1cbiAgICAgICAgRE9NLmRlbGV0ZVByaXZhdGUoZWwsIFBIWF9SRUYpXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIHB1dFJlZihlbGVtZW50cywgZXZlbnQsIG9wdHMgPSB7fSl7XG4gICAgbGV0IG5ld1JlZiA9IHRoaXMucmVmKytcbiAgICBsZXQgZGlzYWJsZVdpdGggPSB0aGlzLmJpbmRpbmcoUEhYX0RJU0FCTEVfV0lUSClcbiAgICBpZihvcHRzLmxvYWRpbmcpeyBlbGVtZW50cyA9IGVsZW1lbnRzLmNvbmNhdChET00uYWxsKGRvY3VtZW50LCBvcHRzLmxvYWRpbmcpKX1cblxuICAgIGVsZW1lbnRzLmZvckVhY2goZWwgPT4ge1xuICAgICAgZWwuY2xhc3NMaXN0LmFkZChgcGh4LSR7ZXZlbnR9LWxvYWRpbmdgKVxuICAgICAgZWwuc2V0QXR0cmlidXRlKFBIWF9SRUYsIG5ld1JlZilcbiAgICAgIGVsLnNldEF0dHJpYnV0ZShQSFhfUkVGX1NSQywgdGhpcy5lbC5pZClcbiAgICAgIGxldCBkaXNhYmxlVGV4dCA9IGVsLmdldEF0dHJpYnV0ZShkaXNhYmxlV2l0aClcbiAgICAgIGlmKGRpc2FibGVUZXh0ICE9PSBudWxsKXtcbiAgICAgICAgaWYoIWVsLmdldEF0dHJpYnV0ZShQSFhfRElTQUJMRV9XSVRIX1JFU1RPUkUpKXtcbiAgICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoUEhYX0RJU0FCTEVfV0lUSF9SRVNUT1JFLCBlbC5pbm5lclRleHQpXG4gICAgICAgIH1cbiAgICAgICAgaWYoZGlzYWJsZVRleHQgIT09IFwiXCIpeyBlbC5pbm5lclRleHQgPSBkaXNhYmxlVGV4dCB9XG4gICAgICAgIGVsLnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsIFwiXCIpXG4gICAgICB9XG4gICAgfSlcbiAgICByZXR1cm4gW25ld1JlZiwgZWxlbWVudHMsIG9wdHNdXG4gIH1cblxuICBjb21wb25lbnRJRChlbCl7XG4gICAgbGV0IGNpZCA9IGVsLmdldEF0dHJpYnV0ZSAmJiBlbC5nZXRBdHRyaWJ1dGUoUEhYX0NPTVBPTkVOVClcbiAgICByZXR1cm4gY2lkID8gcGFyc2VJbnQoY2lkKSA6IG51bGxcbiAgfVxuXG4gIHRhcmdldENvbXBvbmVudElEKHRhcmdldCwgdGFyZ2V0Q3R4LCBvcHRzID0ge30pe1xuICAgIGlmKGlzQ2lkKHRhcmdldEN0eCkpeyByZXR1cm4gdGFyZ2V0Q3R4IH1cblxuICAgIGxldCBjaWRPclNlbGVjdG9yID0gdGFyZ2V0LmdldEF0dHJpYnV0ZSh0aGlzLmJpbmRpbmcoXCJ0YXJnZXRcIikpXG4gICAgaWYoaXNDaWQoY2lkT3JTZWxlY3Rvcikpe1xuICAgICAgcmV0dXJuIHBhcnNlSW50KGNpZE9yU2VsZWN0b3IpXG4gICAgfSBlbHNlIGlmKHRhcmdldEN0eCAmJiAoY2lkT3JTZWxlY3RvciAhPT0gbnVsbCB8fCBvcHRzLnRhcmdldCkpe1xuICAgICAgcmV0dXJuIHRoaXMuY2xvc2VzdENvbXBvbmVudElEKHRhcmdldEN0eClcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG4gIH1cblxuICBjbG9zZXN0Q29tcG9uZW50SUQodGFyZ2V0Q3R4KXtcbiAgICBpZihpc0NpZCh0YXJnZXRDdHgpKXtcbiAgICAgIHJldHVybiB0YXJnZXRDdHhcbiAgICB9IGVsc2UgaWYodGFyZ2V0Q3R4KXtcbiAgICAgIHJldHVybiBtYXliZSh0YXJnZXRDdHguY2xvc2VzdChgWyR7UEhYX0NPTVBPTkVOVH1dYCksIGVsID0+IHRoaXMub3duc0VsZW1lbnQoZWwpICYmIHRoaXMuY29tcG9uZW50SUQoZWwpKVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cbiAgfVxuXG4gIHB1c2hIb29rRXZlbnQodGFyZ2V0Q3R4LCBldmVudCwgcGF5bG9hZCwgb25SZXBseSl7XG4gICAgaWYoIXRoaXMuaXNDb25uZWN0ZWQoKSl7XG4gICAgICB0aGlzLmxvZyhcImhvb2tcIiwgKCkgPT4gW1widW5hYmxlIHRvIHB1c2ggaG9vayBldmVudC4gTGl2ZVZpZXcgbm90IGNvbm5lY3RlZFwiLCBldmVudCwgcGF5bG9hZF0pXG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gICAgbGV0IFtyZWYsIGVscywgb3B0c10gPSB0aGlzLnB1dFJlZihbXSwgXCJob29rXCIpXG4gICAgdGhpcy5wdXNoV2l0aFJlcGx5KCgpID0+IFtyZWYsIGVscywgb3B0c10sIFwiZXZlbnRcIiwge1xuICAgICAgdHlwZTogXCJob29rXCIsXG4gICAgICBldmVudDogZXZlbnQsXG4gICAgICB2YWx1ZTogcGF5bG9hZCxcbiAgICAgIGNpZDogdGhpcy5jbG9zZXN0Q29tcG9uZW50SUQodGFyZ2V0Q3R4KVxuICAgIH0sIChyZXNwLCByZXBseSkgPT4gb25SZXBseShyZXBseSwgcmVmKSlcblxuICAgIHJldHVybiByZWZcbiAgfVxuXG4gIGV4dHJhY3RNZXRhKGVsLCBtZXRhLCB2YWx1ZSl7XG4gICAgbGV0IHByZWZpeCA9IHRoaXMuYmluZGluZyhcInZhbHVlLVwiKVxuICAgIGZvcihsZXQgaSA9IDA7IGkgPCBlbC5hdHRyaWJ1dGVzLmxlbmd0aDsgaSsrKXtcbiAgICAgIGlmKCFtZXRhKXsgbWV0YSA9IHt9IH1cbiAgICAgIGxldCBuYW1lID0gZWwuYXR0cmlidXRlc1tpXS5uYW1lXG4gICAgICBpZihuYW1lLnN0YXJ0c1dpdGgocHJlZml4KSl7IG1ldGFbbmFtZS5yZXBsYWNlKHByZWZpeCwgXCJcIildID0gZWwuZ2V0QXR0cmlidXRlKG5hbWUpIH1cbiAgICB9XG4gICAgaWYoZWwudmFsdWUgIT09IHVuZGVmaW5lZCl7XG4gICAgICBpZighbWV0YSl7IG1ldGEgPSB7fSB9XG4gICAgICBtZXRhLnZhbHVlID0gZWwudmFsdWVcblxuICAgICAgaWYoZWwudGFnTmFtZSA9PT0gXCJJTlBVVFwiICYmIENIRUNLQUJMRV9JTlBVVFMuaW5kZXhPZihlbC50eXBlKSA+PSAwICYmICFlbC5jaGVja2VkKXtcbiAgICAgICAgZGVsZXRlIG1ldGEudmFsdWVcbiAgICAgIH1cbiAgICB9XG4gICAgaWYodmFsdWUpe1xuICAgICAgaWYoIW1ldGEpeyBtZXRhID0ge30gfVxuICAgICAgZm9yKGxldCBrZXkgaW4gdmFsdWUpeyBtZXRhW2tleV0gPSB2YWx1ZVtrZXldIH1cbiAgICB9XG4gICAgcmV0dXJuIG1ldGFcbiAgfVxuXG4gIHB1c2hFdmVudCh0eXBlLCBlbCwgdGFyZ2V0Q3R4LCBwaHhFdmVudCwgbWV0YSwgb3B0cyA9IHt9KXtcbiAgICB0aGlzLnB1c2hXaXRoUmVwbHkoKCkgPT4gdGhpcy5wdXRSZWYoW2VsXSwgdHlwZSwgb3B0cyksIFwiZXZlbnRcIiwge1xuICAgICAgdHlwZTogdHlwZSxcbiAgICAgIGV2ZW50OiBwaHhFdmVudCxcbiAgICAgIHZhbHVlOiB0aGlzLmV4dHJhY3RNZXRhKGVsLCBtZXRhLCBvcHRzLnZhbHVlKSxcbiAgICAgIGNpZDogdGhpcy50YXJnZXRDb21wb25lbnRJRChlbCwgdGFyZ2V0Q3R4LCBvcHRzKVxuICAgIH0pXG4gIH1cblxuICBwdXNoRmlsZVByb2dyZXNzKGZpbGVFbCwgZW50cnlSZWYsIHByb2dyZXNzLCBvblJlcGx5ID0gZnVuY3Rpb24gKCl7IH0pe1xuICAgIHRoaXMubGl2ZVNvY2tldC53aXRoaW5Pd25lcnMoZmlsZUVsLmZvcm0sICh2aWV3LCB0YXJnZXRDdHgpID0+IHtcbiAgICAgIHZpZXcucHVzaFdpdGhSZXBseShudWxsLCBcInByb2dyZXNzXCIsIHtcbiAgICAgICAgZXZlbnQ6IGZpbGVFbC5nZXRBdHRyaWJ1dGUodmlldy5iaW5kaW5nKFBIWF9QUk9HUkVTUykpLFxuICAgICAgICByZWY6IGZpbGVFbC5nZXRBdHRyaWJ1dGUoUEhYX1VQTE9BRF9SRUYpLFxuICAgICAgICBlbnRyeV9yZWY6IGVudHJ5UmVmLFxuICAgICAgICBwcm9ncmVzczogcHJvZ3Jlc3MsXG4gICAgICAgIGNpZDogdmlldy50YXJnZXRDb21wb25lbnRJRChmaWxlRWwuZm9ybSwgdGFyZ2V0Q3R4KVxuICAgICAgfSwgb25SZXBseSlcbiAgICB9KVxuICB9XG5cbiAgcHVzaElucHV0KGlucHV0RWwsIHRhcmdldEN0eCwgZm9yY2VDaWQsIHBoeEV2ZW50LCBvcHRzLCBjYWxsYmFjayl7XG4gICAgbGV0IHVwbG9hZHNcbiAgICBsZXQgY2lkID0gaXNDaWQoZm9yY2VDaWQpID8gZm9yY2VDaWQgOiB0aGlzLnRhcmdldENvbXBvbmVudElEKGlucHV0RWwuZm9ybSwgdGFyZ2V0Q3R4KVxuICAgIGxldCByZWZHZW5lcmF0b3IgPSAoKSA9PiB0aGlzLnB1dFJlZihbaW5wdXRFbCwgaW5wdXRFbC5mb3JtXSwgXCJjaGFuZ2VcIiwgb3B0cylcbiAgICBsZXQgZm9ybURhdGFcbiAgICBpZihpbnB1dEVsLmdldEF0dHJpYnV0ZSh0aGlzLmJpbmRpbmcoXCJjaGFuZ2VcIikpKXtcbiAgICAgIGZvcm1EYXRhID0gc2VyaWFsaXplRm9ybShpbnB1dEVsLmZvcm0sIHtfdGFyZ2V0OiBvcHRzLl90YXJnZXR9LCBbaW5wdXRFbC5uYW1lXSlcbiAgICB9IGVsc2Uge1xuICAgICAgZm9ybURhdGEgPSBzZXJpYWxpemVGb3JtKGlucHV0RWwuZm9ybSwge190YXJnZXQ6IG9wdHMuX3RhcmdldH0pXG4gICAgfVxuICAgIGlmKERPTS5pc1VwbG9hZElucHV0KGlucHV0RWwpICYmIGlucHV0RWwuZmlsZXMgJiYgaW5wdXRFbC5maWxlcy5sZW5ndGggPiAwKXtcbiAgICAgIExpdmVVcGxvYWRlci50cmFja0ZpbGVzKGlucHV0RWwsIEFycmF5LmZyb20oaW5wdXRFbC5maWxlcykpXG4gICAgfVxuICAgIHVwbG9hZHMgPSBMaXZlVXBsb2FkZXIuc2VyaWFsaXplVXBsb2FkcyhpbnB1dEVsKVxuICAgIGxldCBldmVudCA9IHtcbiAgICAgIHR5cGU6IFwiZm9ybVwiLFxuICAgICAgZXZlbnQ6IHBoeEV2ZW50LFxuICAgICAgdmFsdWU6IGZvcm1EYXRhLFxuICAgICAgdXBsb2FkczogdXBsb2FkcyxcbiAgICAgIGNpZDogY2lkXG4gICAgfVxuICAgIHRoaXMucHVzaFdpdGhSZXBseShyZWZHZW5lcmF0b3IsIFwiZXZlbnRcIiwgZXZlbnQsIHJlc3AgPT4ge1xuICAgICAgRE9NLnNob3dFcnJvcihpbnB1dEVsLCB0aGlzLmxpdmVTb2NrZXQuYmluZGluZyhQSFhfRkVFREJBQ0tfRk9SKSlcbiAgICAgIGlmKERPTS5pc1VwbG9hZElucHV0KGlucHV0RWwpICYmIGlucHV0RWwuZ2V0QXR0cmlidXRlKFwiZGF0YS1waHgtYXV0by11cGxvYWRcIikgIT09IG51bGwpe1xuICAgICAgICBpZihMaXZlVXBsb2FkZXIuZmlsZXNBd2FpdGluZ1ByZWZsaWdodChpbnB1dEVsKS5sZW5ndGggPiAwKXtcbiAgICAgICAgICBsZXQgW3JlZiwgX2Vsc10gPSByZWZHZW5lcmF0b3IoKVxuICAgICAgICAgIHRoaXMudXBsb2FkRmlsZXMoaW5wdXRFbC5mb3JtLCB0YXJnZXRDdHgsIHJlZiwgY2lkLCAoX3VwbG9hZHMpID0+IHtcbiAgICAgICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKHJlc3ApXG4gICAgICAgICAgICB0aGlzLnRyaWdnZXJBd2FpdGluZ1N1Ym1pdChpbnB1dEVsLmZvcm0pXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2socmVzcClcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgdHJpZ2dlckF3YWl0aW5nU3VibWl0KGZvcm1FbCl7XG4gICAgbGV0IGF3YWl0aW5nU3VibWl0ID0gdGhpcy5nZXRTY2hlZHVsZWRTdWJtaXQoZm9ybUVsKVxuICAgIGlmKGF3YWl0aW5nU3VibWl0KXtcbiAgICAgIGxldCBbX2VsLCBfcmVmLCBfb3B0cywgY2FsbGJhY2tdID0gYXdhaXRpbmdTdWJtaXRcbiAgICAgIHRoaXMuY2FuY2VsU3VibWl0KGZvcm1FbClcbiAgICAgIGNhbGxiYWNrKClcbiAgICB9XG4gIH1cblxuICBnZXRTY2hlZHVsZWRTdWJtaXQoZm9ybUVsKXtcbiAgICByZXR1cm4gdGhpcy5mb3JtU3VibWl0cy5maW5kKChbZWwsIF9yZWYsIF9vcHRzLCBfY2FsbGJhY2tdKSA9PiBlbC5pc1NhbWVOb2RlKGZvcm1FbCkpXG4gIH1cblxuICBzY2hlZHVsZVN1Ym1pdChmb3JtRWwsIHJlZiwgb3B0cywgY2FsbGJhY2spe1xuICAgIGlmKHRoaXMuZ2V0U2NoZWR1bGVkU3VibWl0KGZvcm1FbCkpeyByZXR1cm4gdHJ1ZSB9XG4gICAgdGhpcy5mb3JtU3VibWl0cy5wdXNoKFtmb3JtRWwsIHJlZiwgb3B0cywgY2FsbGJhY2tdKVxuICB9XG5cbiAgY2FuY2VsU3VibWl0KGZvcm1FbCl7XG4gICAgdGhpcy5mb3JtU3VibWl0cyA9IHRoaXMuZm9ybVN1Ym1pdHMuZmlsdGVyKChbZWwsIHJlZiwgX2NhbGxiYWNrXSkgPT4ge1xuICAgICAgaWYoZWwuaXNTYW1lTm9kZShmb3JtRWwpKXtcbiAgICAgICAgdGhpcy51bmRvUmVmcyhyZWYpXG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgZGlzYWJsZUZvcm0oZm9ybUVsLCBvcHRzID0ge30pe1xuICAgIGxldCBmaWx0ZXJJZ25vcmVkID0gZWwgPT4ge1xuICAgICAgbGV0IHVzZXJJZ25vcmVkID0gY2xvc2VzdFBoeEJpbmRpbmcoZWwsIGAke3RoaXMuYmluZGluZyhQSFhfVVBEQVRFKX09aWdub3JlYCwgZWwuZm9ybSlcbiAgICAgIHJldHVybiAhKHVzZXJJZ25vcmVkIHx8IGNsb3Nlc3RQaHhCaW5kaW5nKGVsLCBcImRhdGEtcGh4LXVwZGF0ZT1pZ25vcmVcIiwgZWwuZm9ybSkpXG4gICAgfVxuICAgIGxldCBmaWx0ZXJEaXNhYmxlcyA9IGVsID0+IHtcbiAgICAgIHJldHVybiBlbC5oYXNBdHRyaWJ1dGUodGhpcy5iaW5kaW5nKFBIWF9ESVNBQkxFX1dJVEgpKVxuICAgIH1cbiAgICBsZXQgZmlsdGVyQnV0dG9uID0gZWwgPT4gZWwudGFnTmFtZSA9PSBcIkJVVFRPTlwiXG5cbiAgICBsZXQgZmlsdGVySW5wdXQgPSBlbCA9PiBbXCJJTlBVVFwiLCBcIlRFWFRBUkVBXCIsIFwiU0VMRUNUXCJdLmluY2x1ZGVzKGVsLnRhZ05hbWUpXG5cbiAgICBsZXQgZm9ybUVsZW1lbnRzID0gQXJyYXkuZnJvbShmb3JtRWwuZWxlbWVudHMpXG4gICAgbGV0IGRpc2FibGVzID0gZm9ybUVsZW1lbnRzLmZpbHRlcihmaWx0ZXJEaXNhYmxlcylcbiAgICBsZXQgYnV0dG9ucyA9IGZvcm1FbGVtZW50cy5maWx0ZXIoZmlsdGVyQnV0dG9uKS5maWx0ZXIoZmlsdGVySWdub3JlZClcbiAgICBsZXQgaW5wdXRzID0gZm9ybUVsZW1lbnRzLmZpbHRlcihmaWx0ZXJJbnB1dCkuZmlsdGVyKGZpbHRlcklnbm9yZWQpXG5cbiAgICBidXR0b25zLmZvckVhY2goYnV0dG9uID0+IHtcbiAgICAgIGJ1dHRvbi5zZXRBdHRyaWJ1dGUoUEhYX0RJU0FCTEVELCBidXR0b24uZGlzYWJsZWQpXG4gICAgICBidXR0b24uZGlzYWJsZWQgPSB0cnVlXG4gICAgfSlcbiAgICBpbnB1dHMuZm9yRWFjaChpbnB1dCA9PiB7XG4gICAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoUEhYX1JFQURPTkxZLCBpbnB1dC5yZWFkT25seSlcbiAgICAgIGlucHV0LnJlYWRPbmx5ID0gdHJ1ZVxuICAgICAgaWYoaW5wdXQuZmlsZXMpe1xuICAgICAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoUEhYX0RJU0FCTEVELCBpbnB1dC5kaXNhYmxlZClcbiAgICAgICAgaW5wdXQuZGlzYWJsZWQgPSB0cnVlXG4gICAgICB9XG4gICAgfSlcbiAgICBmb3JtRWwuc2V0QXR0cmlidXRlKHRoaXMuYmluZGluZyhQSFhfUEFHRV9MT0FESU5HKSwgXCJcIilcbiAgICByZXR1cm4gdGhpcy5wdXRSZWYoW2Zvcm1FbF0uY29uY2F0KGRpc2FibGVzKS5jb25jYXQoYnV0dG9ucykuY29uY2F0KGlucHV0cyksIFwic3VibWl0XCIsIG9wdHMpXG4gIH1cblxuICBwdXNoRm9ybVN1Ym1pdChmb3JtRWwsIHRhcmdldEN0eCwgcGh4RXZlbnQsIHN1Ym1pdHRlciwgb3B0cywgb25SZXBseSl7XG4gICAgbGV0IHJlZkdlbmVyYXRvciA9ICgpID0+IHRoaXMuZGlzYWJsZUZvcm0oZm9ybUVsLCBvcHRzKVxuICAgIGxldCBjaWQgPSB0aGlzLnRhcmdldENvbXBvbmVudElEKGZvcm1FbCwgdGFyZ2V0Q3R4KVxuICAgIGlmKExpdmVVcGxvYWRlci5oYXNVcGxvYWRzSW5Qcm9ncmVzcyhmb3JtRWwpKXtcbiAgICAgIGxldCBbcmVmLCBfZWxzXSA9IHJlZkdlbmVyYXRvcigpXG4gICAgICBsZXQgcHVzaCA9ICgpID0+IHRoaXMucHVzaEZvcm1TdWJtaXQoZm9ybUVsLCBzdWJtaXR0ZXIsIHRhcmdldEN0eCwgcGh4RXZlbnQsIG9wdHMsIG9uUmVwbHkpXG4gICAgICByZXR1cm4gdGhpcy5zY2hlZHVsZVN1Ym1pdChmb3JtRWwsIHJlZiwgb3B0cywgcHVzaClcbiAgICB9IGVsc2UgaWYoTGl2ZVVwbG9hZGVyLmlucHV0c0F3YWl0aW5nUHJlZmxpZ2h0KGZvcm1FbCkubGVuZ3RoID4gMCl7XG4gICAgICBsZXQgW3JlZiwgZWxzXSA9IHJlZkdlbmVyYXRvcigpXG4gICAgICBsZXQgcHJveHlSZWZHZW4gPSAoKSA9PiBbcmVmLCBlbHMsIG9wdHNdXG4gICAgICB0aGlzLnVwbG9hZEZpbGVzKGZvcm1FbCwgdGFyZ2V0Q3R4LCByZWYsIGNpZCwgKF91cGxvYWRzKSA9PiB7XG4gICAgICAgIGxldCBmb3JtRGF0YSA9IHNlcmlhbGl6ZUZvcm0oZm9ybUVsLCB7c3VibWl0dGVyfSlcbiAgICAgICAgdGhpcy5wdXNoV2l0aFJlcGx5KHByb3h5UmVmR2VuLCBcImV2ZW50XCIsIHtcbiAgICAgICAgICB0eXBlOiBcImZvcm1cIixcbiAgICAgICAgICBldmVudDogcGh4RXZlbnQsXG4gICAgICAgICAgdmFsdWU6IGZvcm1EYXRhLFxuICAgICAgICAgIGNpZDogY2lkXG4gICAgICAgIH0sIG9uUmVwbHkpXG4gICAgICB9KVxuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgZm9ybURhdGEgPSBzZXJpYWxpemVGb3JtKGZvcm1FbCwge3N1Ym1pdHRlcn0pXG4gICAgICB0aGlzLnB1c2hXaXRoUmVwbHkocmVmR2VuZXJhdG9yLCBcImV2ZW50XCIsIHtcbiAgICAgICAgdHlwZTogXCJmb3JtXCIsXG4gICAgICAgIGV2ZW50OiBwaHhFdmVudCxcbiAgICAgICAgdmFsdWU6IGZvcm1EYXRhLFxuICAgICAgICBjaWQ6IGNpZFxuICAgICAgfSwgb25SZXBseSlcbiAgICB9XG4gIH1cblxuICB1cGxvYWRGaWxlcyhmb3JtRWwsIHRhcmdldEN0eCwgcmVmLCBjaWQsIG9uQ29tcGxldGUpe1xuICAgIGxldCBqb2luQ291bnRBdFVwbG9hZCA9IHRoaXMuam9pbkNvdW50XG4gICAgbGV0IGlucHV0RWxzID0gTGl2ZVVwbG9hZGVyLmFjdGl2ZUZpbGVJbnB1dHMoZm9ybUVsKVxuICAgIGxldCBudW1GaWxlSW5wdXRzSW5Qcm9ncmVzcyA9IGlucHV0RWxzLmxlbmd0aFxuXG4gICAgLy8gZ2V0IGVhY2ggZmlsZSBpbnB1dFxuICAgIGlucHV0RWxzLmZvckVhY2goaW5wdXRFbCA9PiB7XG4gICAgICBsZXQgdXBsb2FkZXIgPSBuZXcgTGl2ZVVwbG9hZGVyKGlucHV0RWwsIHRoaXMsICgpID0+IHtcbiAgICAgICAgbnVtRmlsZUlucHV0c0luUHJvZ3Jlc3MtLVxuICAgICAgICBpZihudW1GaWxlSW5wdXRzSW5Qcm9ncmVzcyA9PT0gMCl7IG9uQ29tcGxldGUoKSB9XG4gICAgICB9KTtcblxuICAgICAgdGhpcy51cGxvYWRlcnNbaW5wdXRFbF0gPSB1cGxvYWRlclxuICAgICAgbGV0IGVudHJpZXMgPSB1cGxvYWRlci5lbnRyaWVzKCkubWFwKGVudHJ5ID0+IGVudHJ5LnRvUHJlZmxpZ2h0UGF5bG9hZCgpKVxuXG4gICAgICBsZXQgcGF5bG9hZCA9IHtcbiAgICAgICAgcmVmOiBpbnB1dEVsLmdldEF0dHJpYnV0ZShQSFhfVVBMT0FEX1JFRiksXG4gICAgICAgIGVudHJpZXM6IGVudHJpZXMsXG4gICAgICAgIGNpZDogdGhpcy50YXJnZXRDb21wb25lbnRJRChpbnB1dEVsLmZvcm0sIHRhcmdldEN0eClcbiAgICAgIH1cblxuICAgICAgdGhpcy5sb2coXCJ1cGxvYWRcIiwgKCkgPT4gW1wic2VuZGluZyBwcmVmbGlnaHQgcmVxdWVzdFwiLCBwYXlsb2FkXSlcblxuICAgICAgdGhpcy5wdXNoV2l0aFJlcGx5KG51bGwsIFwiYWxsb3dfdXBsb2FkXCIsIHBheWxvYWQsIHJlc3AgPT4ge1xuICAgICAgICB0aGlzLmxvZyhcInVwbG9hZFwiLCAoKSA9PiBbXCJnb3QgcHJlZmxpZ2h0IHJlc3BvbnNlXCIsIHJlc3BdKVxuICAgICAgICBpZihyZXNwLmVycm9yKXtcbiAgICAgICAgICB0aGlzLnVuZG9SZWZzKHJlZilcbiAgICAgICAgICBsZXQgW2VudHJ5X3JlZiwgcmVhc29uXSA9IHJlc3AuZXJyb3JcbiAgICAgICAgICB0aGlzLmxvZyhcInVwbG9hZFwiLCAoKSA9PiBbYGVycm9yIGZvciBlbnRyeSAke2VudHJ5X3JlZn1gLCByZWFzb25dKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxldCBvbkVycm9yID0gKGNhbGxiYWNrKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNoYW5uZWwub25FcnJvcigoKSA9PiB7XG4gICAgICAgICAgICAgIGlmKHRoaXMuam9pbkNvdW50ID09PSBqb2luQ291bnRBdFVwbG9hZCl7IGNhbGxiYWNrKCkgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgICAgdXBsb2FkZXIuaW5pdEFkYXB0ZXJVcGxvYWQocmVzcCwgb25FcnJvciwgdGhpcy5saXZlU29ja2V0KVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH0pXG4gIH1cblxuICBkaXNwYXRjaFVwbG9hZHMobmFtZSwgZmlsZXNPckJsb2JzKXtcbiAgICBsZXQgaW5wdXRzID0gRE9NLmZpbmRVcGxvYWRJbnB1dHModGhpcy5lbCkuZmlsdGVyKGVsID0+IGVsLm5hbWUgPT09IG5hbWUpXG4gICAgaWYoaW5wdXRzLmxlbmd0aCA9PT0gMCl7IGxvZ0Vycm9yKGBubyBsaXZlIGZpbGUgaW5wdXRzIGZvdW5kIG1hdGNoaW5nIHRoZSBuYW1lIFwiJHtuYW1lfVwiYCkgfVxuICAgIGVsc2UgaWYoaW5wdXRzLmxlbmd0aCA+IDEpeyBsb2dFcnJvcihgZHVwbGljYXRlIGxpdmUgZmlsZSBpbnB1dHMgZm91bmQgbWF0Y2hpbmcgdGhlIG5hbWUgXCIke25hbWV9XCJgKSB9XG4gICAgZWxzZSB7IERPTS5kaXNwYXRjaEV2ZW50KGlucHV0c1swXSwgUEhYX1RSQUNLX1VQTE9BRFMsIHtkZXRhaWw6IHtmaWxlczogZmlsZXNPckJsb2JzfX0pIH1cbiAgfVxuXG4gIHB1c2hGb3JtUmVjb3ZlcnkoZm9ybSwgbmV3Q2lkLCBjYWxsYmFjayl7XG4gICAgdGhpcy5saXZlU29ja2V0LndpdGhpbk93bmVycyhmb3JtLCAodmlldywgdGFyZ2V0Q3R4KSA9PiB7XG4gICAgICBsZXQgaW5wdXQgPSBBcnJheS5mcm9tKGZvcm0uZWxlbWVudHMpLmZpbmQoZWwgPT4ge1xuICAgICAgICByZXR1cm4gRE9NLmlzRm9ybUlucHV0KGVsKSAmJiBlbC50eXBlICE9PSBcImhpZGRlblwiICYmICFlbC5oYXNBdHRyaWJ1dGUodGhpcy5iaW5kaW5nKFwiY2hhbmdlXCIpKVxuICAgICAgfSlcbiAgICAgIGxldCBwaHhFdmVudCA9IGZvcm0uZ2V0QXR0cmlidXRlKHRoaXMuYmluZGluZyhQSFhfQVVUT19SRUNPVkVSKSkgfHwgZm9ybS5nZXRBdHRyaWJ1dGUodGhpcy5iaW5kaW5nKFwiY2hhbmdlXCIpKVxuXG4gICAgICBKUy5leGVjKFwiY2hhbmdlXCIsIHBoeEV2ZW50LCB2aWV3LCBpbnB1dCwgW1wicHVzaFwiLCB7X3RhcmdldDogaW5wdXQubmFtZSwgbmV3Q2lkOiBuZXdDaWQsIGNhbGxiYWNrOiBjYWxsYmFja31dKVxuICAgIH0pXG4gIH1cblxuICBwdXNoTGlua1BhdGNoKGhyZWYsIHRhcmdldEVsLCBjYWxsYmFjayl7XG4gICAgbGV0IGxpbmtSZWYgPSB0aGlzLmxpdmVTb2NrZXQuc2V0UGVuZGluZ0xpbmsoaHJlZilcbiAgICBsZXQgcmVmR2VuID0gdGFyZ2V0RWwgPyAoKSA9PiB0aGlzLnB1dFJlZihbdGFyZ2V0RWxdLCBcImNsaWNrXCIpIDogbnVsbFxuICAgIGxldCBmYWxsYmFjayA9ICgpID0+IHRoaXMubGl2ZVNvY2tldC5yZWRpcmVjdCh3aW5kb3cubG9jYXRpb24uaHJlZilcblxuICAgIGxldCBwdXNoID0gdGhpcy5wdXNoV2l0aFJlcGx5KHJlZkdlbiwgXCJsaXZlX3BhdGNoXCIsIHt1cmw6IGhyZWZ9LCByZXNwID0+IHtcbiAgICAgIHRoaXMubGl2ZVNvY2tldC5yZXF1ZXN0RE9NVXBkYXRlKCgpID0+IHtcbiAgICAgICAgaWYocmVzcC5saW5rX3JlZGlyZWN0KXtcbiAgICAgICAgICB0aGlzLmxpdmVTb2NrZXQucmVwbGFjZU1haW4oaHJlZiwgbnVsbCwgY2FsbGJhY2ssIGxpbmtSZWYpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYodGhpcy5saXZlU29ja2V0LmNvbW1pdFBlbmRpbmdMaW5rKGxpbmtSZWYpKXtcbiAgICAgICAgICAgIHRoaXMuaHJlZiA9IGhyZWZcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5hcHBseVBlbmRpbmdVcGRhdGVzKClcbiAgICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjayhsaW5rUmVmKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH0pXG5cbiAgICBpZihwdXNoKXtcbiAgICAgIHB1c2gucmVjZWl2ZShcInRpbWVvdXRcIiwgZmFsbGJhY2spXG4gICAgfSBlbHNlIHtcbiAgICAgIGZhbGxiYWNrKClcbiAgICB9XG4gIH1cblxuICBmb3Jtc0ZvclJlY292ZXJ5KGh0bWwpe1xuICAgIGlmKHRoaXMuam9pbkNvdW50ID09PSAwKXsgcmV0dXJuIFtdIH1cblxuICAgIGxldCBwaHhDaGFuZ2UgPSB0aGlzLmJpbmRpbmcoXCJjaGFuZ2VcIilcbiAgICBsZXQgdGVtcGxhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGVtcGxhdGVcIilcbiAgICB0ZW1wbGF0ZS5pbm5lckhUTUwgPSBodG1sXG5cbiAgICByZXR1cm4gKFxuICAgICAgRE9NLmFsbCh0aGlzLmVsLCBgZm9ybVske3BoeENoYW5nZX1dYClcbiAgICAgICAgLmZpbHRlcihmb3JtID0+IGZvcm0uaWQgJiYgdGhpcy5vd25zRWxlbWVudChmb3JtKSlcbiAgICAgICAgLmZpbHRlcihmb3JtID0+IGZvcm0uZWxlbWVudHMubGVuZ3RoID4gMClcbiAgICAgICAgLmZpbHRlcihmb3JtID0+IGZvcm0uZ2V0QXR0cmlidXRlKHRoaXMuYmluZGluZyhQSFhfQVVUT19SRUNPVkVSKSkgIT09IFwiaWdub3JlXCIpXG4gICAgICAgIC5tYXAoZm9ybSA9PiB7XG4gICAgICAgICAgbGV0IG5ld0Zvcm0gPSB0ZW1wbGF0ZS5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoYGZvcm1baWQ9XCIke2Zvcm0uaWR9XCJdWyR7cGh4Q2hhbmdlfT1cIiR7Zm9ybS5nZXRBdHRyaWJ1dGUocGh4Q2hhbmdlKX1cIl1gKVxuICAgICAgICAgIGlmKG5ld0Zvcm0pe1xuICAgICAgICAgICAgcmV0dXJuIFtmb3JtLCBuZXdGb3JtLCB0aGlzLnRhcmdldENvbXBvbmVudElEKG5ld0Zvcm0pXVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gW2Zvcm0sIG51bGwsIG51bGxdXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICAuZmlsdGVyKChbZm9ybSwgbmV3Rm9ybSwgbmV3Q2lkXSkgPT4gbmV3Rm9ybSlcbiAgICApXG4gIH1cblxuICBtYXliZVB1c2hDb21wb25lbnRzRGVzdHJveWVkKGRlc3Ryb3llZENJRHMpe1xuICAgIGxldCB3aWxsRGVzdHJveUNJRHMgPSBkZXN0cm95ZWRDSURzLmZpbHRlcihjaWQgPT4ge1xuICAgICAgcmV0dXJuIERPTS5maW5kQ29tcG9uZW50Tm9kZUxpc3QodGhpcy5lbCwgY2lkKS5sZW5ndGggPT09IDBcbiAgICB9KVxuICAgIGlmKHdpbGxEZXN0cm95Q0lEcy5sZW5ndGggPiAwKXtcbiAgICAgIHRoaXMucHJ1bmluZ0NJRHMucHVzaCguLi53aWxsRGVzdHJveUNJRHMpXG5cbiAgICAgIHRoaXMucHVzaFdpdGhSZXBseShudWxsLCBcImNpZHNfd2lsbF9kZXN0cm95XCIsIHtjaWRzOiB3aWxsRGVzdHJveUNJRHN9LCAoKSA9PiB7XG4gICAgICAgIC8vIFRoZSBjaWRzIGFyZSBlaXRoZXIgYmFjayBvbiB0aGUgcGFnZSBvciB0aGV5IHdpbGwgYmUgZnVsbHkgcmVtb3ZlZCxcbiAgICAgICAgLy8gc28gd2UgY2FuIHJlbW92ZSB0aGVtIGZyb20gdGhlIHBydW5pbmdDSURzLlxuICAgICAgICB0aGlzLnBydW5pbmdDSURzID0gdGhpcy5wcnVuaW5nQ0lEcy5maWx0ZXIoY2lkID0+IHdpbGxEZXN0cm95Q0lEcy5pbmRleE9mKGNpZCkgIT09IC0xKVxuXG4gICAgICAgIC8vIFNlZSBpZiBhbnkgb2YgdGhlIGNpZHMgd2Ugd2FudGVkIHRvIGRlc3Ryb3kgd2VyZSBhZGRlZCBiYWNrLFxuICAgICAgICAvLyBpZiB0aGV5IHdlcmUgYWRkZWQgYmFjaywgd2UgZG9uJ3QgYWN0dWFsbHkgZGVzdHJveSB0aGVtLlxuICAgICAgICBsZXQgY29tcGxldGVseURlc3Ryb3lDSURzID0gd2lsbERlc3Ryb3lDSURzLmZpbHRlcihjaWQgPT4ge1xuICAgICAgICAgIHJldHVybiBET00uZmluZENvbXBvbmVudE5vZGVMaXN0KHRoaXMuZWwsIGNpZCkubGVuZ3RoID09PSAwXG4gICAgICAgIH0pXG5cbiAgICAgICAgaWYoY29tcGxldGVseURlc3Ryb3lDSURzLmxlbmd0aCA+IDApe1xuICAgICAgICAgIHRoaXMucHVzaFdpdGhSZXBseShudWxsLCBcImNpZHNfZGVzdHJveWVkXCIsIHtjaWRzOiBjb21wbGV0ZWx5RGVzdHJveUNJRHN9LCAocmVzcCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlZC5wcnVuZUNJRHMocmVzcC5jaWRzKVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgb3duc0VsZW1lbnQoZWwpe1xuICAgIGxldCBwYXJlbnRWaWV3RWwgPSBlbC5jbG9zZXN0KFBIWF9WSUVXX1NFTEVDVE9SKVxuICAgIHJldHVybiBlbC5nZXRBdHRyaWJ1dGUoUEhYX1BBUkVOVF9JRCkgPT09IHRoaXMuaWQgfHxcbiAgICAgIChwYXJlbnRWaWV3RWwgJiYgcGFyZW50Vmlld0VsLmlkID09PSB0aGlzLmlkKSB8fFxuICAgICAgKCFwYXJlbnRWaWV3RWwgJiYgdGhpcy5pc0RlYWQpXG4gIH1cblxuICBzdWJtaXRGb3JtKGZvcm0sIHRhcmdldEN0eCwgcGh4RXZlbnQsIHN1Ym1pdHRlciwgb3B0cyA9IHt9KXtcbiAgICBET00ucHV0UHJpdmF0ZShmb3JtLCBQSFhfSEFTX1NVQk1JVFRFRCwgdHJ1ZSlcbiAgICBsZXQgcGh4RmVlZGJhY2sgPSB0aGlzLmxpdmVTb2NrZXQuYmluZGluZyhQSFhfRkVFREJBQ0tfRk9SKVxuICAgIGxldCBpbnB1dHMgPSBBcnJheS5mcm9tKGZvcm0uZWxlbWVudHMpXG4gICAgaW5wdXRzLmZvckVhY2goaW5wdXQgPT4gRE9NLnB1dFByaXZhdGUoaW5wdXQsIFBIWF9IQVNfU1VCTUlUVEVELCB0cnVlKSlcbiAgICB0aGlzLmxpdmVTb2NrZXQuYmx1ckFjdGl2ZUVsZW1lbnQodGhpcylcbiAgICB0aGlzLnB1c2hGb3JtU3VibWl0KGZvcm0sIHRhcmdldEN0eCwgcGh4RXZlbnQsIHN1Ym1pdHRlciwgb3B0cywgKCkgPT4ge1xuICAgICAgaW5wdXRzLmZvckVhY2goaW5wdXQgPT4gRE9NLnNob3dFcnJvcihpbnB1dCwgcGh4RmVlZGJhY2spKVxuICAgICAgdGhpcy5saXZlU29ja2V0LnJlc3RvcmVQcmV2aW91c2x5QWN0aXZlRm9jdXMoKVxuICAgIH0pXG4gIH1cblxuICBiaW5kaW5nKGtpbmQpeyByZXR1cm4gdGhpcy5saXZlU29ja2V0LmJpbmRpbmcoa2luZCkgfVxufVxuIiwgIi8qKiBJbml0aWFsaXplcyB0aGUgTGl2ZVNvY2tldFxuICpcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gZW5kUG9pbnQgLSBUaGUgc3RyaW5nIFdlYlNvY2tldCBlbmRwb2ludCwgaWUsIGBcIndzczovL2V4YW1wbGUuY29tL2xpdmVcImAsXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYFwiL2xpdmVcImAgKGluaGVyaXRlZCBob3N0ICYgcHJvdG9jb2wpXG4gKiBAcGFyYW0ge1Bob2VuaXguU29ja2V0fSBzb2NrZXQgLSB0aGUgcmVxdWlyZWQgUGhvZW5peCBTb2NrZXQgY2xhc3MgaW1wb3J0ZWQgZnJvbSBcInBob2VuaXhcIi4gRm9yIGV4YW1wbGU6XG4gKlxuICogICAgIGltcG9ydCB7U29ja2V0fSBmcm9tIFwicGhvZW5peFwiXG4gKiAgICAgaW1wb3J0IHtMaXZlU29ja2V0fSBmcm9tIFwicGhvZW5peF9saXZlX3ZpZXdcIlxuICogICAgIGxldCBsaXZlU29ja2V0ID0gbmV3IExpdmVTb2NrZXQoXCIvbGl2ZVwiLCBTb2NrZXQsIHsuLi59KVxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0c10gLSBPcHRpb25hbCBjb25maWd1cmF0aW9uLiBPdXRzaWRlIG9mIGtleXMgbGlzdGVkIGJlbG93LCBhbGxcbiAqIGNvbmZpZ3VyYXRpb24gaXMgcGFzc2VkIGRpcmVjdGx5IHRvIHRoZSBQaG9lbml4IFNvY2tldCBjb25zdHJ1Y3Rvci5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0cy5kZWZhdWx0c10gLSBUaGUgb3B0aW9uYWwgZGVmYXVsdHMgdG8gdXNlIGZvciB2YXJpb3VzIGJpbmRpbmdzLFxuICogc3VjaCBhcyBgcGh4LWRlYm91bmNlYC4gU3VwcG9ydHMgdGhlIGZvbGxvd2luZyBrZXlzOlxuICpcbiAqICAgLSBkZWJvdW5jZSAtIHRoZSBtaWxsaXNlY29uZCBwaHgtZGVib3VuY2UgdGltZS4gRGVmYXVsdHMgMzAwXG4gKiAgIC0gdGhyb3R0bGUgLSB0aGUgbWlsbGlzZWNvbmQgcGh4LXRocm90dGxlIHRpbWUuIERlZmF1bHRzIDMwMFxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtvcHRzLnBhcmFtc10gLSBUaGUgb3B0aW9uYWwgZnVuY3Rpb24gZm9yIHBhc3NpbmcgY29ubmVjdCBwYXJhbXMuXG4gKiBUaGUgZnVuY3Rpb24gcmVjZWl2ZXMgdGhlIGVsZW1lbnQgYXNzb2NpYXRlZCB3aXRoIGEgZ2l2ZW4gTGl2ZVZpZXcuIEZvciBleGFtcGxlOlxuICpcbiAqICAgICAoZWwpID0+IHt2aWV3OiBlbC5nZXRBdHRyaWJ1dGUoXCJkYXRhLW15LXZpZXctbmFtZVwiLCB0b2tlbjogd2luZG93Lm15VG9rZW59XG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmJpbmRpbmdQcmVmaXhdIC0gVGhlIG9wdGlvbmFsIHByZWZpeCB0byB1c2UgZm9yIGFsbCBwaHggRE9NIGFubm90YXRpb25zLlxuICogRGVmYXVsdHMgdG8gXCJwaHgtXCIuXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdHMuaG9va3NdIC0gVGhlIG9wdGlvbmFsIG9iamVjdCBmb3IgcmVmZXJlbmNpbmcgTGl2ZVZpZXcgaG9vayBjYWxsYmFja3MuXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdHMudXBsb2FkZXJzXSAtIFRoZSBvcHRpb25hbCBvYmplY3QgZm9yIHJlZmVyZW5jaW5nIExpdmVWaWV3IHVwbG9hZGVyIGNhbGxiYWNrcy5cbiAqIEBwYXJhbSB7aW50ZWdlcn0gW29wdHMubG9hZGVyVGltZW91dF0gLSBUaGUgb3B0aW9uYWwgZGVsYXkgaW4gbWlsbGlzZWNvbmRzIHRvIHdhaXQgYmVmb3JlIGFwcGx5XG4gKiBsb2FkaW5nIHN0YXRlcy5cbiAqIEBwYXJhbSB7aW50ZWdlcn0gW29wdHMubWF4UmVsb2Fkc10gLSBUaGUgbWF4aW11bSByZWxvYWRzIGJlZm9yZSBlbnRlcmluZyBmYWlsc2FmZSBtb2RlLlxuICogQHBhcmFtIHtpbnRlZ2VyfSBbb3B0cy5yZWxvYWRKaXR0ZXJNaW5dIC0gVGhlIG1pbmltdW0gdGltZSBiZXR3ZWVuIG5vcm1hbCByZWxvYWQgYXR0ZW1wdHMuXG4gKiBAcGFyYW0ge2ludGVnZXJ9IFtvcHRzLnJlbG9hZEppdHRlck1heF0gLSBUaGUgbWF4aW11bSB0aW1lIGJldHdlZW4gbm9ybWFsIHJlbG9hZCBhdHRlbXB0cy5cbiAqIEBwYXJhbSB7aW50ZWdlcn0gW29wdHMuZmFpbHNhZmVKaXR0ZXJdIC0gVGhlIHRpbWUgYmV0d2VlbiByZWxvYWQgYXR0ZW1wdHMgaW4gZmFpbHNhZmUgbW9kZS5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtvcHRzLnZpZXdMb2dnZXJdIC0gVGhlIG9wdGlvbmFsIGZ1bmN0aW9uIHRvIGxvZyBkZWJ1ZyBpbmZvcm1hdGlvbi4gRm9yIGV4YW1wbGU6XG4gKlxuICogICAgICh2aWV3LCBraW5kLCBtc2csIG9iaikgPT4gY29uc29sZS5sb2coYCR7dmlldy5pZH0gJHtraW5kfTogJHttc2d9IC0gYCwgb2JqKVxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0cy5tZXRhZGF0YV0gLSBUaGUgb3B0aW9uYWwgb2JqZWN0IG1hcHBpbmcgZXZlbnQgbmFtZXMgdG8gZnVuY3Rpb25zIGZvclxuICogcG9wdWxhdGluZyBldmVudCBtZXRhZGF0YS4gRm9yIGV4YW1wbGU6XG4gKlxuICogICAgIG1ldGFkYXRhOiB7XG4gKiAgICAgICBjbGljazogKGUsIGVsKSA9PiB7XG4gKiAgICAgICAgIHJldHVybiB7XG4gKiAgICAgICAgICAgY3RybEtleTogZS5jdHJsS2V5LFxuICogICAgICAgICAgIG1ldGFLZXk6IGUubWV0YUtleSxcbiAqICAgICAgICAgICBkZXRhaWw6IGUuZGV0YWlsIHx8IDEsXG4gKiAgICAgICAgIH1cbiAqICAgICAgIH0sXG4gKiAgICAgICBrZXlkb3duOiAoZSwgZWwpID0+IHtcbiAqICAgICAgICAgcmV0dXJuIHtcbiAqICAgICAgICAgICBrZXk6IGUua2V5LFxuICogICAgICAgICAgIGN0cmxLZXk6IGUuY3RybEtleSxcbiAqICAgICAgICAgICBtZXRhS2V5OiBlLm1ldGFLZXksXG4gKiAgICAgICAgICAgc2hpZnRLZXk6IGUuc2hpZnRLZXlcbiAqICAgICAgICAgfVxuICogICAgICAgfVxuICogICAgIH1cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0cy5zZXNzaW9uU3RvcmFnZV0gLSBBbiBvcHRpb25hbCBTdG9yYWdlIGNvbXBhdGlibGUgb2JqZWN0XG4gKiBVc2VmdWwgd2hlbiBMaXZlVmlldyB3b24ndCBoYXZlIGFjY2VzcyB0byBgc2Vzc2lvblN0b3JhZ2VgLiAgRm9yIGV4YW1wbGUsIFRoaXMgY291bGRcbiAqIGhhcHBlbiBpZiBhIHNpdGUgbG9hZHMgYSBjcm9zcy1kb21haW4gTGl2ZVZpZXcgaW4gYW4gaWZyYW1lLiAgRXhhbXBsZSB1c2FnZTpcbiAqXG4gKiAgICAgY2xhc3MgSW5NZW1vcnlTdG9yYWdlIHtcbiAqICAgICAgIGNvbnN0cnVjdG9yKCkgeyB0aGlzLnN0b3JhZ2UgPSB7fSB9XG4gKiAgICAgICBnZXRJdGVtKGtleU5hbWUpIHsgcmV0dXJuIHRoaXMuc3RvcmFnZVtrZXlOYW1lXSB8fCBudWxsIH1cbiAqICAgICAgIHJlbW92ZUl0ZW0oa2V5TmFtZSkgeyBkZWxldGUgdGhpcy5zdG9yYWdlW2tleU5hbWVdIH1cbiAqICAgICAgIHNldEl0ZW0oa2V5TmFtZSwga2V5VmFsdWUpIHsgdGhpcy5zdG9yYWdlW2tleU5hbWVdID0ga2V5VmFsdWUgfVxuICogICAgIH1cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdHMubG9jYWxTdG9yYWdlXSAtIEFuIG9wdGlvbmFsIFN0b3JhZ2UgY29tcGF0aWJsZSBvYmplY3RcbiAqIFVzZWZ1bCBmb3Igd2hlbiBMaXZlVmlldyB3b24ndCBoYXZlIGFjY2VzcyB0byBgbG9jYWxTdG9yYWdlYC5cbiAqIFNlZSBgb3B0cy5zZXNzaW9uU3RvcmFnZWAgZm9yIGV4YW1wbGVzLlxuKi9cblxuaW1wb3J0IHtcbiAgQklORElOR19QUkVGSVgsXG4gIENPTlNFQ1VUSVZFX1JFTE9BRFMsXG4gIERFRkFVTFRTLFxuICBGQUlMU0FGRV9KSVRURVIsXG4gIExPQURFUl9USU1FT1VULFxuICBNQVhfUkVMT0FEUyxcbiAgUEhYX0RFQk9VTkNFLFxuICBQSFhfRFJPUF9UQVJHRVQsXG4gIFBIWF9IQVNfRk9DVVNFRCxcbiAgUEhYX0tFWSxcbiAgUEhYX0xJTktfU1RBVEUsXG4gIFBIWF9MSVZFX0xJTkssXG4gIFBIWF9MVl9ERUJVRyxcbiAgUEhYX0xWX0xBVEVOQ1lfU0lNLFxuICBQSFhfTFZfUFJPRklMRSxcbiAgUEhYX01BSU4sXG4gIFBIWF9QQVJFTlRfSUQsXG4gIFBIWF9WSUVXX1NFTEVDVE9SLFxuICBQSFhfUk9PVF9JRCxcbiAgUEhYX1RIUk9UVExFLFxuICBQSFhfVFJBQ0tfVVBMT0FEUyxcbiAgUEhYX1NFU1NJT04sXG4gIFBIWF9GRUVEQkFDS19GT1IsXG4gIFJFTE9BRF9KSVRURVJfTUlOLFxuICBSRUxPQURfSklUVEVSX01BWCxcbn0gZnJvbSBcIi4vY29uc3RhbnRzXCJcblxuaW1wb3J0IHtcbiAgY2xvbmUsXG4gIGNsb3Nlc3RQaHhCaW5kaW5nLFxuICBjbG9zdXJlLFxuICBkZWJ1ZyxcbiAgaXNPYmplY3QsXG4gIG1heWJlXG59IGZyb20gXCIuL3V0aWxzXCJcblxuaW1wb3J0IEJyb3dzZXIgZnJvbSBcIi4vYnJvd3NlclwiXG5pbXBvcnQgRE9NIGZyb20gXCIuL2RvbVwiXG5pbXBvcnQgSG9va3MgZnJvbSBcIi4vaG9va3NcIlxuaW1wb3J0IExpdmVVcGxvYWRlciBmcm9tIFwiLi9saXZlX3VwbG9hZGVyXCJcbmltcG9ydCBWaWV3IGZyb20gXCIuL3ZpZXdcIlxuaW1wb3J0IEpTIGZyb20gXCIuL2pzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTGl2ZVNvY2tldCB7XG4gIGNvbnN0cnVjdG9yKHVybCwgcGh4U29ja2V0LCBvcHRzID0ge30pe1xuICAgIHRoaXMudW5sb2FkZWQgPSBmYWxzZVxuICAgIGlmKCFwaHhTb2NrZXQgfHwgcGh4U29ja2V0LmNvbnN0cnVjdG9yLm5hbWUgPT09IFwiT2JqZWN0XCIpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBcbiAgICAgIGEgcGhvZW5peCBTb2NrZXQgbXVzdCBiZSBwcm92aWRlZCBhcyB0aGUgc2Vjb25kIGFyZ3VtZW50IHRvIHRoZSBMaXZlU29ja2V0IGNvbnN0cnVjdG9yLiBGb3IgZXhhbXBsZTpcblxuICAgICAgICAgIGltcG9ydCB7U29ja2V0fSBmcm9tIFwicGhvZW5peFwiXG4gICAgICAgICAgaW1wb3J0IHtMaXZlU29ja2V0fSBmcm9tIFwicGhvZW5peF9saXZlX3ZpZXdcIlxuICAgICAgICAgIGxldCBsaXZlU29ja2V0ID0gbmV3IExpdmVTb2NrZXQoXCIvbGl2ZVwiLCBTb2NrZXQsIHsuLi59KVxuICAgICAgYClcbiAgICB9XG4gICAgdGhpcy5zb2NrZXQgPSBuZXcgcGh4U29ja2V0KHVybCwgb3B0cylcbiAgICB0aGlzLmJpbmRpbmdQcmVmaXggPSBvcHRzLmJpbmRpbmdQcmVmaXggfHwgQklORElOR19QUkVGSVhcbiAgICB0aGlzLm9wdHMgPSBvcHRzXG4gICAgdGhpcy5wYXJhbXMgPSBjbG9zdXJlKG9wdHMucGFyYW1zIHx8IHt9KVxuICAgIHRoaXMudmlld0xvZ2dlciA9IG9wdHMudmlld0xvZ2dlclxuICAgIHRoaXMubWV0YWRhdGFDYWxsYmFja3MgPSBvcHRzLm1ldGFkYXRhIHx8IHt9XG4gICAgdGhpcy5kZWZhdWx0cyA9IE9iamVjdC5hc3NpZ24oY2xvbmUoREVGQVVMVFMpLCBvcHRzLmRlZmF1bHRzIHx8IHt9KVxuICAgIHRoaXMuYWN0aXZlRWxlbWVudCA9IG51bGxcbiAgICB0aGlzLnByZXZBY3RpdmUgPSBudWxsXG4gICAgdGhpcy5zaWxlbmNlZCA9IGZhbHNlXG4gICAgdGhpcy5tYWluID0gbnVsbFxuICAgIHRoaXMub3V0Z29pbmdNYWluRWwgPSBudWxsXG4gICAgdGhpcy5jbGlja1N0YXJ0ZWRBdFRhcmdldCA9IG51bGxcbiAgICB0aGlzLmxpbmtSZWYgPSAxXG4gICAgdGhpcy5yb290cyA9IHt9XG4gICAgdGhpcy5ocmVmID0gd2luZG93LmxvY2F0aW9uLmhyZWZcbiAgICB0aGlzLnBlbmRpbmdMaW5rID0gbnVsbFxuICAgIHRoaXMuY3VycmVudExvY2F0aW9uID0gY2xvbmUod2luZG93LmxvY2F0aW9uKVxuICAgIHRoaXMuaG9va3MgPSBvcHRzLmhvb2tzIHx8IHt9XG4gICAgdGhpcy51cGxvYWRlcnMgPSBvcHRzLnVwbG9hZGVycyB8fCB7fVxuICAgIHRoaXMubG9hZGVyVGltZW91dCA9IG9wdHMubG9hZGVyVGltZW91dCB8fCBMT0FERVJfVElNRU9VVFxuICAgIHRoaXMucmVsb2FkV2l0aEppdHRlclRpbWVyID0gbnVsbFxuICAgIHRoaXMubWF4UmVsb2FkcyA9IG9wdHMubWF4UmVsb2FkcyB8fCBNQVhfUkVMT0FEU1xuICAgIHRoaXMucmVsb2FkSml0dGVyTWluID0gb3B0cy5yZWxvYWRKaXR0ZXJNaW4gfHwgUkVMT0FEX0pJVFRFUl9NSU5cbiAgICB0aGlzLnJlbG9hZEppdHRlck1heCA9IG9wdHMucmVsb2FkSml0dGVyTWF4IHx8IFJFTE9BRF9KSVRURVJfTUFYXG4gICAgdGhpcy5mYWlsc2FmZUppdHRlciA9IG9wdHMuZmFpbHNhZmVKaXR0ZXIgfHwgRkFJTFNBRkVfSklUVEVSXG4gICAgdGhpcy5sb2NhbFN0b3JhZ2UgPSBvcHRzLmxvY2FsU3RvcmFnZSB8fCB3aW5kb3cubG9jYWxTdG9yYWdlXG4gICAgdGhpcy5zZXNzaW9uU3RvcmFnZSA9IG9wdHMuc2Vzc2lvblN0b3JhZ2UgfHwgd2luZG93LnNlc3Npb25TdG9yYWdlXG4gICAgdGhpcy5ib3VuZFRvcExldmVsRXZlbnRzID0gZmFsc2VcbiAgICB0aGlzLmRvbUNhbGxiYWNrcyA9IE9iamVjdC5hc3NpZ24oe29uTm9kZUFkZGVkOiBjbG9zdXJlKCksIG9uQmVmb3JlRWxVcGRhdGVkOiBjbG9zdXJlKCl9LCBvcHRzLmRvbSB8fCB7fSlcbiAgICB0aGlzLnRyYW5zaXRpb25zID0gbmV3IFRyYW5zaXRpb25TZXQoKVxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicGFnZWhpZGVcIiwgX2UgPT4ge1xuICAgICAgdGhpcy51bmxvYWRlZCA9IHRydWVcbiAgICB9KVxuICAgIHRoaXMuc29ja2V0Lm9uT3BlbigoKSA9PiB7XG4gICAgICBpZih0aGlzLmlzVW5sb2FkZWQoKSl7XG4gICAgICAgIC8vIHJlbG9hZCBwYWdlIGlmIGJlaW5nIHJlc3RvcmVkIGZyb20gYmFjay9mb3J3YXJkIGNhY2hlIGFuZCBicm93c2VyIGRvZXMgbm90IGVtaXQgXCJwYWdlc2hvd1wiXG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICAvLyBwdWJsaWNcblxuICBpc1Byb2ZpbGVFbmFibGVkKCl7IHJldHVybiB0aGlzLnNlc3Npb25TdG9yYWdlLmdldEl0ZW0oUEhYX0xWX1BST0ZJTEUpID09PSBcInRydWVcIiB9XG5cbiAgaXNEZWJ1Z0VuYWJsZWQoKXsgcmV0dXJuIHRoaXMuc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShQSFhfTFZfREVCVUcpID09PSBcInRydWVcIiB9XG5cbiAgaXNEZWJ1Z0Rpc2FibGVkKCl7IHJldHVybiB0aGlzLnNlc3Npb25TdG9yYWdlLmdldEl0ZW0oUEhYX0xWX0RFQlVHKSA9PT0gXCJmYWxzZVwiIH1cblxuICBlbmFibGVEZWJ1ZygpeyB0aGlzLnNlc3Npb25TdG9yYWdlLnNldEl0ZW0oUEhYX0xWX0RFQlVHLCBcInRydWVcIikgfVxuXG4gIGVuYWJsZVByb2ZpbGluZygpeyB0aGlzLnNlc3Npb25TdG9yYWdlLnNldEl0ZW0oUEhYX0xWX1BST0ZJTEUsIFwidHJ1ZVwiKSB9XG5cbiAgZGlzYWJsZURlYnVnKCl7IHRoaXMuc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShQSFhfTFZfREVCVUcsIFwiZmFsc2VcIikgfVxuXG4gIGRpc2FibGVQcm9maWxpbmcoKXsgdGhpcy5zZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKFBIWF9MVl9QUk9GSUxFKSB9XG5cbiAgZW5hYmxlTGF0ZW5jeVNpbSh1cHBlckJvdW5kTXMpe1xuICAgIHRoaXMuZW5hYmxlRGVidWcoKVxuICAgIGNvbnNvbGUubG9nKFwibGF0ZW5jeSBzaW11bGF0b3IgZW5hYmxlZCBmb3IgdGhlIGR1cmF0aW9uIG9mIHRoaXMgYnJvd3NlciBzZXNzaW9uLiBDYWxsIGRpc2FibGVMYXRlbmN5U2ltKCkgdG8gZGlzYWJsZVwiKVxuICAgIHRoaXMuc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShQSFhfTFZfTEFURU5DWV9TSU0sIHVwcGVyQm91bmRNcylcbiAgfVxuXG4gIGRpc2FibGVMYXRlbmN5U2ltKCl7IHRoaXMuc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbShQSFhfTFZfTEFURU5DWV9TSU0pIH1cblxuICBnZXRMYXRlbmN5U2ltKCl7XG4gICAgbGV0IHN0ciA9IHRoaXMuc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShQSFhfTFZfTEFURU5DWV9TSU0pXG4gICAgcmV0dXJuIHN0ciA/IHBhcnNlSW50KHN0cikgOiBudWxsXG4gIH1cblxuICBnZXRTb2NrZXQoKXsgcmV0dXJuIHRoaXMuc29ja2V0IH1cblxuICBjb25uZWN0KCl7XG4gICAgLy8gZW5hYmxlIGRlYnVnIGJ5IGRlZmF1bHQgaWYgb24gbG9jYWxob3N0IGFuZCBub3QgZXhwbGljaXRseSBkaXNhYmxlZFxuICAgIGlmKHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZSA9PT0gXCJsb2NhbGhvc3RcIiAmJiAhdGhpcy5pc0RlYnVnRGlzYWJsZWQoKSl7IHRoaXMuZW5hYmxlRGVidWcoKSB9XG4gICAgbGV0IGRvQ29ubmVjdCA9ICgpID0+IHtcbiAgICAgIGlmKHRoaXMuam9pblJvb3RWaWV3cygpKXtcbiAgICAgICAgdGhpcy5iaW5kVG9wTGV2ZWxFdmVudHMoKVxuICAgICAgICB0aGlzLnNvY2tldC5jb25uZWN0KClcbiAgICAgIH0gZWxzZSBpZih0aGlzLm1haW4pe1xuICAgICAgICB0aGlzLnNvY2tldC5jb25uZWN0KClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuYmluZFRvcExldmVsRXZlbnRzKHtkZWFkOiB0cnVlfSlcbiAgICAgIH1cbiAgICAgIHRoaXMuam9pbkRlYWRWaWV3KClcbiAgICB9XG4gICAgaWYoW1wiY29tcGxldGVcIiwgXCJsb2FkZWRcIiwgXCJpbnRlcmFjdGl2ZVwiXS5pbmRleE9mKGRvY3VtZW50LnJlYWR5U3RhdGUpID49IDApe1xuICAgICAgZG9Db25uZWN0KClcbiAgICB9IGVsc2Uge1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgKCkgPT4gZG9Db25uZWN0KCkpXG4gICAgfVxuICB9XG5cbiAgZGlzY29ubmVjdChjYWxsYmFjayl7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMucmVsb2FkV2l0aEppdHRlclRpbWVyKVxuICAgIHRoaXMuc29ja2V0LmRpc2Nvbm5lY3QoY2FsbGJhY2spXG4gIH1cblxuICByZXBsYWNlVHJhbnNwb3J0KHRyYW5zcG9ydCl7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMucmVsb2FkV2l0aEppdHRlclRpbWVyKVxuICAgIHRoaXMuc29ja2V0LnJlcGxhY2VUcmFuc3BvcnQodHJhbnNwb3J0KVxuICAgIHRoaXMuY29ubmVjdCgpXG4gIH1cblxuICBleGVjSlMoZWwsIGVuY29kZWRKUywgZXZlbnRUeXBlID0gbnVsbCl7XG4gICAgdGhpcy5vd25lcihlbCwgdmlldyA9PiBKUy5leGVjKGV2ZW50VHlwZSwgZW5jb2RlZEpTLCB2aWV3LCBlbCkpXG4gIH1cblxuICAvLyBwcml2YXRlXG5cbiAgdW5sb2FkKCl7XG4gICAgaWYodGhpcy51bmxvYWRlZCl7IHJldHVybiB9XG4gICAgaWYodGhpcy5tYWluICYmIHRoaXMuaXNDb25uZWN0ZWQoKSl7IHRoaXMubG9nKHRoaXMubWFpbiwgXCJzb2NrZXRcIiwgKCkgPT4gW1wiZGlzY29ubmVjdCBmb3IgcGFnZSBuYXZcIl0pIH1cbiAgICB0aGlzLnVubG9hZGVkID0gdHJ1ZVxuICAgIHRoaXMuZGVzdHJveUFsbFZpZXdzKClcbiAgICB0aGlzLmRpc2Nvbm5lY3QoKVxuICB9XG5cbiAgdHJpZ2dlckRPTShraW5kLCBhcmdzKXsgdGhpcy5kb21DYWxsYmFja3Nba2luZF0oLi4uYXJncykgfVxuXG4gIHRpbWUobmFtZSwgZnVuYyl7XG4gICAgaWYoIXRoaXMuaXNQcm9maWxlRW5hYmxlZCgpIHx8ICFjb25zb2xlLnRpbWUpeyByZXR1cm4gZnVuYygpIH1cbiAgICBjb25zb2xlLnRpbWUobmFtZSlcbiAgICBsZXQgcmVzdWx0ID0gZnVuYygpXG4gICAgY29uc29sZS50aW1lRW5kKG5hbWUpXG4gICAgcmV0dXJuIHJlc3VsdFxuICB9XG5cbiAgbG9nKHZpZXcsIGtpbmQsIG1zZ0NhbGxiYWNrKXtcbiAgICBpZih0aGlzLnZpZXdMb2dnZXIpe1xuICAgICAgbGV0IFttc2csIG9ial0gPSBtc2dDYWxsYmFjaygpXG4gICAgICB0aGlzLnZpZXdMb2dnZXIodmlldywga2luZCwgbXNnLCBvYmopXG4gICAgfSBlbHNlIGlmKHRoaXMuaXNEZWJ1Z0VuYWJsZWQoKSl7XG4gICAgICBsZXQgW21zZywgb2JqXSA9IG1zZ0NhbGxiYWNrKClcbiAgICAgIGRlYnVnKHZpZXcsIGtpbmQsIG1zZywgb2JqKVxuICAgIH1cbiAgfVxuXG4gIHJlcXVlc3RET01VcGRhdGUoY2FsbGJhY2spe1xuICAgIHRoaXMudHJhbnNpdGlvbnMuYWZ0ZXIoY2FsbGJhY2spXG4gIH1cblxuICB0cmFuc2l0aW9uKHRpbWUsIG9uU3RhcnQsIG9uRG9uZSA9IGZ1bmN0aW9uKCl7fSl7XG4gICAgdGhpcy50cmFuc2l0aW9ucy5hZGRUcmFuc2l0aW9uKHRpbWUsIG9uU3RhcnQsIG9uRG9uZSlcbiAgfVxuXG4gIG9uQ2hhbm5lbChjaGFubmVsLCBldmVudCwgY2Ipe1xuICAgIGNoYW5uZWwub24oZXZlbnQsIGRhdGEgPT4ge1xuICAgICAgbGV0IGxhdGVuY3kgPSB0aGlzLmdldExhdGVuY3lTaW0oKVxuICAgICAgaWYoIWxhdGVuY3kpe1xuICAgICAgICBjYihkYXRhKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiBjYihkYXRhKSwgbGF0ZW5jeSlcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgd3JhcFB1c2godmlldywgb3B0cywgcHVzaCl7XG4gICAgbGV0IGxhdGVuY3kgPSB0aGlzLmdldExhdGVuY3lTaW0oKVxuICAgIGxldCBvbGRKb2luQ291bnQgPSB2aWV3LmpvaW5Db3VudFxuICAgIGlmKCFsYXRlbmN5KXtcbiAgICAgIGlmKHRoaXMuaXNDb25uZWN0ZWQoKSAmJiBvcHRzLnRpbWVvdXQpe1xuICAgICAgICByZXR1cm4gcHVzaCgpLnJlY2VpdmUoXCJ0aW1lb3V0XCIsICgpID0+IHtcbiAgICAgICAgICBpZih2aWV3LmpvaW5Db3VudCA9PT0gb2xkSm9pbkNvdW50ICYmICF2aWV3LmlzRGVzdHJveWVkKCkpe1xuICAgICAgICAgICAgdGhpcy5yZWxvYWRXaXRoSml0dGVyKHZpZXcsICgpID0+IHtcbiAgICAgICAgICAgICAgdGhpcy5sb2codmlldywgXCJ0aW1lb3V0XCIsICgpID0+IFtcInJlY2VpdmVkIHRpbWVvdXQgd2hpbGUgY29tbXVuaWNhdGluZyB3aXRoIHNlcnZlci4gRmFsbGluZyBiYWNrIHRvIGhhcmQgcmVmcmVzaCBmb3IgcmVjb3ZlcnlcIl0pXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBwdXNoKClcbiAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgZmFrZVB1c2ggPSB7XG4gICAgICByZWNlaXZlczogW10sXG4gICAgICByZWNlaXZlKGtpbmQsIGNiKXsgdGhpcy5yZWNlaXZlcy5wdXNoKFtraW5kLCBjYl0pIH1cbiAgICB9XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBpZih2aWV3LmlzRGVzdHJveWVkKCkpeyByZXR1cm4gfVxuICAgICAgZmFrZVB1c2gucmVjZWl2ZXMucmVkdWNlKChhY2MsIFtraW5kLCBjYl0pID0+IGFjYy5yZWNlaXZlKGtpbmQsIGNiKSwgcHVzaCgpKVxuICAgIH0sIGxhdGVuY3kpXG4gICAgcmV0dXJuIGZha2VQdXNoXG4gIH1cblxuICByZWxvYWRXaXRoSml0dGVyKHZpZXcsIGxvZyl7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMucmVsb2FkV2l0aEppdHRlclRpbWVyKVxuICAgIHRoaXMuZGlzY29ubmVjdCgpXG4gICAgbGV0IG1pbk1zID0gdGhpcy5yZWxvYWRKaXR0ZXJNaW5cbiAgICBsZXQgbWF4TXMgPSB0aGlzLnJlbG9hZEppdHRlck1heFxuICAgIGxldCBhZnRlck1zID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heE1zIC0gbWluTXMgKyAxKSkgKyBtaW5Nc1xuICAgIGxldCB0cmllcyA9IEJyb3dzZXIudXBkYXRlTG9jYWwodGhpcy5sb2NhbFN0b3JhZ2UsIHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSwgQ09OU0VDVVRJVkVfUkVMT0FEUywgMCwgY291bnQgPT4gY291bnQgKyAxKVxuICAgIGlmKHRyaWVzID4gdGhpcy5tYXhSZWxvYWRzKXtcbiAgICAgIGFmdGVyTXMgPSB0aGlzLmZhaWxzYWZlSml0dGVyXG4gICAgfVxuICAgIHRoaXMucmVsb2FkV2l0aEppdHRlclRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAvLyBpZiB2aWV3IGhhcyByZWNvdmVyZWQsIHN1Y2ggYXMgdHJhbnNwb3J0IHJlcGxhY2VkLCB0aGVuIGNhbmNlbFxuICAgICAgaWYodmlldy5pc0Rlc3Ryb3llZCgpIHx8IHZpZXcuaXNDb25uZWN0ZWQoKSl7IHJldHVybiB9XG4gICAgICB2aWV3LmRlc3Ryb3koKVxuICAgICAgbG9nID8gbG9nKCkgOiB0aGlzLmxvZyh2aWV3LCBcImpvaW5cIiwgKCkgPT4gW2BlbmNvdW50ZXJlZCAke3RyaWVzfSBjb25zZWN1dGl2ZSByZWxvYWRzYF0pXG4gICAgICBpZih0cmllcyA+IHRoaXMubWF4UmVsb2Fkcyl7XG4gICAgICAgIHRoaXMubG9nKHZpZXcsIFwiam9pblwiLCAoKSA9PiBbYGV4Y2VlZGVkICR7dGhpcy5tYXhSZWxvYWRzfSBjb25zZWN1dGl2ZSByZWxvYWRzLiBFbnRlcmluZyBmYWlsc2FmZSBtb2RlYF0pXG4gICAgICB9XG4gICAgICBpZih0aGlzLmhhc1BlbmRpbmdMaW5rKCkpe1xuICAgICAgICB3aW5kb3cubG9jYXRpb24gPSB0aGlzLnBlbmRpbmdMaW5rXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKClcbiAgICAgIH1cbiAgICB9LCBhZnRlck1zKVxuICB9XG5cbiAgZ2V0SG9va0NhbGxiYWNrcyhuYW1lKXtcbiAgICByZXR1cm4gbmFtZSAmJiBuYW1lLnN0YXJ0c1dpdGgoXCJQaG9lbml4LlwiKSA/IEhvb2tzW25hbWUuc3BsaXQoXCIuXCIpWzFdXSA6IHRoaXMuaG9va3NbbmFtZV1cbiAgfVxuXG4gIGlzVW5sb2FkZWQoKXsgcmV0dXJuIHRoaXMudW5sb2FkZWQgfVxuXG4gIGlzQ29ubmVjdGVkKCl7IHJldHVybiB0aGlzLnNvY2tldC5pc0Nvbm5lY3RlZCgpIH1cblxuICBnZXRCaW5kaW5nUHJlZml4KCl7IHJldHVybiB0aGlzLmJpbmRpbmdQcmVmaXggfVxuXG4gIGJpbmRpbmcoa2luZCl7IHJldHVybiBgJHt0aGlzLmdldEJpbmRpbmdQcmVmaXgoKX0ke2tpbmR9YCB9XG5cbiAgY2hhbm5lbCh0b3BpYywgcGFyYW1zKXsgcmV0dXJuIHRoaXMuc29ja2V0LmNoYW5uZWwodG9waWMsIHBhcmFtcykgfVxuXG4gIGpvaW5EZWFkVmlldygpe1xuICAgIGxldCBib2R5ID0gZG9jdW1lbnQuYm9keVxuICAgIGlmKGJvZHkgJiYgIXRoaXMuaXNQaHhWaWV3KGJvZHkpICYmICF0aGlzLmlzUGh4Vmlldyhkb2N1bWVudC5maXJzdEVsZW1lbnRDaGlsZCkpe1xuICAgICAgbGV0IHZpZXcgPSB0aGlzLm5ld1Jvb3RWaWV3KGJvZHkpXG4gICAgICB2aWV3LnNldEhyZWYodGhpcy5nZXRIcmVmKCkpXG4gICAgICB2aWV3LmpvaW5EZWFkKClcbiAgICAgIGlmKCF0aGlzLm1haW4peyB0aGlzLm1haW4gPSB2aWV3IH1cbiAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gdmlldy5leGVjTmV3TW91bnRlZCgpKVxuICAgIH1cbiAgfVxuXG4gIGpvaW5Sb290Vmlld3MoKXtcbiAgICBsZXQgcm9vdHNGb3VuZCA9IGZhbHNlXG4gICAgRE9NLmFsbChkb2N1bWVudCwgYCR7UEhYX1ZJRVdfU0VMRUNUT1J9Om5vdChbJHtQSFhfUEFSRU5UX0lEfV0pYCwgcm9vdEVsID0+IHtcbiAgICAgIGlmKCF0aGlzLmdldFJvb3RCeUlkKHJvb3RFbC5pZCkpe1xuICAgICAgICBsZXQgdmlldyA9IHRoaXMubmV3Um9vdFZpZXcocm9vdEVsKVxuICAgICAgICB2aWV3LnNldEhyZWYodGhpcy5nZXRIcmVmKCkpXG4gICAgICAgIHZpZXcuam9pbigpXG4gICAgICAgIGlmKHJvb3RFbC5oYXNBdHRyaWJ1dGUoUEhYX01BSU4pKXsgdGhpcy5tYWluID0gdmlldyB9XG4gICAgICB9XG4gICAgICByb290c0ZvdW5kID0gdHJ1ZVxuICAgIH0pXG4gICAgcmV0dXJuIHJvb3RzRm91bmRcbiAgfVxuXG4gIHJlZGlyZWN0KHRvLCBmbGFzaCl7XG4gICAgdGhpcy51bmxvYWQoKVxuICAgIEJyb3dzZXIucmVkaXJlY3QodG8sIGZsYXNoKVxuICB9XG5cbiAgcmVwbGFjZU1haW4oaHJlZiwgZmxhc2gsIGNhbGxiYWNrID0gbnVsbCwgbGlua1JlZiA9IHRoaXMuc2V0UGVuZGluZ0xpbmsoaHJlZikpe1xuICAgIGxldCBsaXZlUmVmZXJlciA9IHRoaXMuY3VycmVudExvY2F0aW9uLmhyZWZcbiAgICB0aGlzLm91dGdvaW5nTWFpbkVsID0gdGhpcy5vdXRnb2luZ01haW5FbCB8fCB0aGlzLm1haW4uZWxcbiAgICBsZXQgbmV3TWFpbkVsID0gRE9NLmNsb25lTm9kZSh0aGlzLm91dGdvaW5nTWFpbkVsLCBcIlwiKVxuICAgIHRoaXMubWFpbi5zaG93TG9hZGVyKHRoaXMubG9hZGVyVGltZW91dClcbiAgICB0aGlzLm1haW4uZGVzdHJveSgpXG5cbiAgICB0aGlzLm1haW4gPSB0aGlzLm5ld1Jvb3RWaWV3KG5ld01haW5FbCwgZmxhc2gsIGxpdmVSZWZlcmVyKVxuICAgIHRoaXMubWFpbi5zZXRSZWRpcmVjdChocmVmKVxuICAgIHRoaXMudHJhbnNpdGlvblJlbW92ZXMoKVxuICAgIHRoaXMubWFpbi5qb2luKChqb2luQ291bnQsIG9uRG9uZSkgPT4ge1xuICAgICAgaWYoam9pbkNvdW50ID09PSAxICYmIHRoaXMuY29tbWl0UGVuZGluZ0xpbmsobGlua1JlZikpe1xuICAgICAgICB0aGlzLnJlcXVlc3RET01VcGRhdGUoKCkgPT4ge1xuICAgICAgICAgIERPTS5maW5kUGh4U3RpY2t5KGRvY3VtZW50KS5mb3JFYWNoKGVsID0+IG5ld01haW5FbC5hcHBlbmRDaGlsZChlbCkpXG4gICAgICAgICAgdGhpcy5vdXRnb2luZ01haW5FbC5yZXBsYWNlV2l0aChuZXdNYWluRWwpXG4gICAgICAgICAgdGhpcy5vdXRnb2luZ01haW5FbCA9IG51bGxcbiAgICAgICAgICBjYWxsYmFjayAmJiByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoY2FsbGJhY2spXG4gICAgICAgICAgb25Eb25lKClcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgdHJhbnNpdGlvblJlbW92ZXMoZWxlbWVudHMpe1xuICAgIGxldCByZW1vdmVBdHRyID0gdGhpcy5iaW5kaW5nKFwicmVtb3ZlXCIpXG4gICAgZWxlbWVudHMgPSBlbGVtZW50cyB8fCBET00uYWxsKGRvY3VtZW50LCBgWyR7cmVtb3ZlQXR0cn1dYClcbiAgICBlbGVtZW50cy5mb3JFYWNoKGVsID0+IHtcbiAgICAgIGlmKGRvY3VtZW50LmJvZHkuY29udGFpbnMoZWwpKXsgLy8gc2tpcCBjaGlsZHJlbiBhbHJlYWR5IHJlbW92ZWRcbiAgICAgICAgdGhpcy5leGVjSlMoZWwsIGVsLmdldEF0dHJpYnV0ZShyZW1vdmVBdHRyKSwgXCJyZW1vdmVcIilcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgaXNQaHhWaWV3KGVsKXsgcmV0dXJuIGVsLmdldEF0dHJpYnV0ZSAmJiBlbC5nZXRBdHRyaWJ1dGUoUEhYX1NFU1NJT04pICE9PSBudWxsIH1cblxuICBuZXdSb290VmlldyhlbCwgZmxhc2gsIGxpdmVSZWZlcmVyKXtcbiAgICBsZXQgdmlldyA9IG5ldyBWaWV3KGVsLCB0aGlzLCBudWxsLCBmbGFzaCwgbGl2ZVJlZmVyZXIpXG4gICAgdGhpcy5yb290c1t2aWV3LmlkXSA9IHZpZXdcbiAgICByZXR1cm4gdmlld1xuICB9XG5cbiAgb3duZXIoY2hpbGRFbCwgY2FsbGJhY2spe1xuICAgIGxldCB2aWV3ID0gbWF5YmUoY2hpbGRFbC5jbG9zZXN0KFBIWF9WSUVXX1NFTEVDVE9SKSwgZWwgPT4gdGhpcy5nZXRWaWV3QnlFbChlbCkpIHx8IHRoaXMubWFpblxuICAgIGlmKHZpZXcpeyBjYWxsYmFjayh2aWV3KSB9XG4gIH1cblxuICB3aXRoaW5Pd25lcnMoY2hpbGRFbCwgY2FsbGJhY2spe1xuICAgIHRoaXMub3duZXIoY2hpbGRFbCwgdmlldyA9PiBjYWxsYmFjayh2aWV3LCBjaGlsZEVsKSlcbiAgfVxuXG4gIGdldFZpZXdCeUVsKGVsKXtcbiAgICBsZXQgcm9vdElkID0gZWwuZ2V0QXR0cmlidXRlKFBIWF9ST09UX0lEKVxuICAgIHJldHVybiBtYXliZSh0aGlzLmdldFJvb3RCeUlkKHJvb3RJZCksIHJvb3QgPT4gcm9vdC5nZXREZXNjZW5kZW50QnlFbChlbCkpXG4gIH1cblxuICBnZXRSb290QnlJZChpZCl7IHJldHVybiB0aGlzLnJvb3RzW2lkXSB9XG5cbiAgZGVzdHJveUFsbFZpZXdzKCl7XG4gICAgZm9yKGxldCBpZCBpbiB0aGlzLnJvb3RzKXtcbiAgICAgIHRoaXMucm9vdHNbaWRdLmRlc3Ryb3koKVxuICAgICAgZGVsZXRlIHRoaXMucm9vdHNbaWRdXG4gICAgfVxuICAgIHRoaXMubWFpbiA9IG51bGxcbiAgfVxuXG4gIGRlc3Ryb3lWaWV3QnlFbChlbCl7XG4gICAgbGV0IHJvb3QgPSB0aGlzLmdldFJvb3RCeUlkKGVsLmdldEF0dHJpYnV0ZShQSFhfUk9PVF9JRCkpXG4gICAgaWYocm9vdCAmJiByb290LmlkID09PSBlbC5pZCl7XG4gICAgICByb290LmRlc3Ryb3koKVxuICAgICAgZGVsZXRlIHRoaXMucm9vdHNbcm9vdC5pZF1cbiAgICB9IGVsc2UgaWYocm9vdCl7XG4gICAgICByb290LmRlc3Ryb3lEZXNjZW5kZW50KGVsLmlkKVxuICAgIH1cbiAgfVxuXG4gIHNldEFjdGl2ZUVsZW1lbnQodGFyZ2V0KXtcbiAgICBpZih0aGlzLmFjdGl2ZUVsZW1lbnQgPT09IHRhcmdldCl7IHJldHVybiB9XG4gICAgdGhpcy5hY3RpdmVFbGVtZW50ID0gdGFyZ2V0XG4gICAgbGV0IGNhbmNlbCA9ICgpID0+IHtcbiAgICAgIGlmKHRhcmdldCA9PT0gdGhpcy5hY3RpdmVFbGVtZW50KXsgdGhpcy5hY3RpdmVFbGVtZW50ID0gbnVsbCB9XG4gICAgICB0YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgdGhpcylcbiAgICAgIHRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIiwgdGhpcylcbiAgICB9XG4gICAgdGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIGNhbmNlbClcbiAgICB0YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsIGNhbmNlbClcbiAgfVxuXG4gIGdldEFjdGl2ZUVsZW1lbnQoKXtcbiAgICBpZihkb2N1bWVudC5hY3RpdmVFbGVtZW50ID09PSBkb2N1bWVudC5ib2R5KXtcbiAgICAgIHJldHVybiB0aGlzLmFjdGl2ZUVsZW1lbnQgfHwgZG9jdW1lbnQuYWN0aXZlRWxlbWVudFxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBkb2N1bWVudC5hY3RpdmVFbGVtZW50IGNhbiBiZSBudWxsIGluIEludGVybmV0IEV4cGxvcmVyIDExXG4gICAgICByZXR1cm4gZG9jdW1lbnQuYWN0aXZlRWxlbWVudCB8fCBkb2N1bWVudC5ib2R5XG4gICAgfVxuICB9XG5cbiAgZHJvcEFjdGl2ZUVsZW1lbnQodmlldyl7XG4gICAgaWYodGhpcy5wcmV2QWN0aXZlICYmIHZpZXcub3duc0VsZW1lbnQodGhpcy5wcmV2QWN0aXZlKSl7XG4gICAgICB0aGlzLnByZXZBY3RpdmUgPSBudWxsXG4gICAgfVxuICB9XG5cbiAgcmVzdG9yZVByZXZpb3VzbHlBY3RpdmVGb2N1cygpe1xuICAgIGlmKHRoaXMucHJldkFjdGl2ZSAmJiB0aGlzLnByZXZBY3RpdmUgIT09IGRvY3VtZW50LmJvZHkpe1xuICAgICAgdGhpcy5wcmV2QWN0aXZlLmZvY3VzKClcbiAgICB9XG4gIH1cblxuICBibHVyQWN0aXZlRWxlbWVudCgpe1xuICAgIHRoaXMucHJldkFjdGl2ZSA9IHRoaXMuZ2V0QWN0aXZlRWxlbWVudCgpXG4gICAgaWYodGhpcy5wcmV2QWN0aXZlICE9PSBkb2N1bWVudC5ib2R5KXsgdGhpcy5wcmV2QWN0aXZlLmJsdXIoKSB9XG4gIH1cblxuICBiaW5kVG9wTGV2ZWxFdmVudHMoe2RlYWR9ID0ge30pe1xuICAgIGlmKHRoaXMuYm91bmRUb3BMZXZlbEV2ZW50cyl7IHJldHVybiB9XG5cbiAgICB0aGlzLmJvdW5kVG9wTGV2ZWxFdmVudHMgPSB0cnVlXG4gICAgLy8gZW50ZXIgZmFpbHNhZmUgcmVsb2FkIGlmIHNlcnZlciBoYXMgZ29uZSBhd2F5IGludGVudGlvbmFsbHksIHN1Y2ggYXMgXCJkaXNjb25uZWN0XCIgYnJvYWRjYXN0XG4gICAgdGhpcy5zb2NrZXQub25DbG9zZShldmVudCA9PiB7XG4gICAgICAvLyB1bmxvYWQgd2hlbiBuYXZpZ2F0aW5nIGhyZWYgb3IgZm9ybSBzdWJtaXQgKHN1Y2ggYXMgZm9yIGZpcmVmb3gpXG4gICAgICBpZihldmVudCAmJiBldmVudC5jb2RlID09PSAxMDAxKXsgcmV0dXJuIHRoaXMudW5sb2FkKCkgfVxuICAgICAgLy8gZmFpbHNhZmUgcmVsb2FkIGlmIG5vcm1hbCBjbG9zdXJlIGFuZCB3ZSBzdGlsbCBoYXZlIGEgbWFpbiBMVlxuICAgICAgaWYoZXZlbnQgJiYgZXZlbnQuY29kZSA9PT0gMTAwMCAmJiB0aGlzLm1haW4peyByZXR1cm4gdGhpcy5yZWxvYWRXaXRoSml0dGVyKHRoaXMubWFpbikgfVxuICAgIH0pXG4gICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCl7IH0pIC8vIGVuc3VyZSBhbGwgY2xpY2sgZXZlbnRzIGJ1YmJsZSBmb3IgbW9iaWxlIFNhZmFyaVxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicGFnZXNob3dcIiwgZSA9PiB7XG4gICAgICBpZihlLnBlcnNpc3RlZCl7IC8vIHJlbG9hZCBwYWdlIGlmIGJlaW5nIHJlc3RvcmVkIGZyb20gYmFjay9mb3J3YXJkIGNhY2hlXG4gICAgICAgIHRoaXMuZ2V0U29ja2V0KCkuZGlzY29ubmVjdCgpXG4gICAgICAgIHRoaXMud2l0aFBhZ2VMb2FkaW5nKHt0bzogd2luZG93LmxvY2F0aW9uLmhyZWYsIGtpbmQ6IFwicmVkaXJlY3RcIn0pXG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKVxuICAgICAgfVxuICAgIH0sIHRydWUpXG4gICAgaWYoIWRlYWQpeyB0aGlzLmJpbmROYXYoKSB9XG4gICAgdGhpcy5iaW5kQ2xpY2tzKClcbiAgICBpZighZGVhZCl7IHRoaXMuYmluZEZvcm1zKCkgfVxuICAgIHRoaXMuYmluZCh7a2V5dXA6IFwia2V5dXBcIiwga2V5ZG93bjogXCJrZXlkb3duXCJ9LCAoZSwgdHlwZSwgdmlldywgdGFyZ2V0RWwsIHBoeEV2ZW50LCBldmVudFRhcmdldCkgPT4ge1xuICAgICAgbGV0IG1hdGNoS2V5ID0gdGFyZ2V0RWwuZ2V0QXR0cmlidXRlKHRoaXMuYmluZGluZyhQSFhfS0VZKSlcbiAgICAgIGxldCBwcmVzc2VkS2V5ID0gZS5rZXkgJiYgZS5rZXkudG9Mb3dlckNhc2UoKSAvLyBjaHJvbWUgY2xpY2tlZCBhdXRvY29tcGxldGVzIHNlbmQgYSBrZXlkb3duIHdpdGhvdXQga2V5XG4gICAgICBpZihtYXRjaEtleSAmJiBtYXRjaEtleS50b0xvd2VyQ2FzZSgpICE9PSBwcmVzc2VkS2V5KXsgcmV0dXJuIH1cblxuICAgICAgbGV0IGRhdGEgPSB7a2V5OiBlLmtleSwgLi4udGhpcy5ldmVudE1ldGEodHlwZSwgZSwgdGFyZ2V0RWwpfVxuICAgICAgSlMuZXhlYyh0eXBlLCBwaHhFdmVudCwgdmlldywgdGFyZ2V0RWwsIFtcInB1c2hcIiwge2RhdGF9XSlcbiAgICB9KVxuICAgIHRoaXMuYmluZCh7Ymx1cjogXCJmb2N1c291dFwiLCBmb2N1czogXCJmb2N1c2luXCJ9LCAoZSwgdHlwZSwgdmlldywgdGFyZ2V0RWwsIHBoeEV2ZW50LCBldmVudFRhcmdldCkgPT4ge1xuICAgICAgaWYoIWV2ZW50VGFyZ2V0KXtcbiAgICAgICAgbGV0IGRhdGEgPSB7a2V5OiBlLmtleSwgLi4udGhpcy5ldmVudE1ldGEodHlwZSwgZSwgdGFyZ2V0RWwpfVxuICAgICAgICBKUy5leGVjKHR5cGUsIHBoeEV2ZW50LCB2aWV3LCB0YXJnZXRFbCwgW1wicHVzaFwiLCB7ZGF0YX1dKVxuICAgICAgfVxuICAgIH0pXG4gICAgdGhpcy5iaW5kKHtibHVyOiBcImJsdXJcIiwgZm9jdXM6IFwiZm9jdXNcIn0sIChlLCB0eXBlLCB2aWV3LCB0YXJnZXRFbCwgdGFyZ2V0Q3R4LCBwaHhFdmVudCwgcGh4VGFyZ2V0KSA9PiB7XG4gICAgICAvLyBibHVyIGFuZCBmb2N1cyBhcmUgdHJpZ2dlcmVkIG9uIGRvY3VtZW50IGFuZCB3aW5kb3cuIERpc2NhcmQgb25lIHRvIGF2b2lkIGR1cHNcbiAgICAgIGlmKHBoeFRhcmdldCA9PT0gXCJ3aW5kb3dcIil7XG4gICAgICAgIGxldCBkYXRhID0gdGhpcy5ldmVudE1ldGEodHlwZSwgZSwgdGFyZ2V0RWwpXG4gICAgICAgIEpTLmV4ZWModHlwZSwgcGh4RXZlbnQsIHZpZXcsIHRhcmdldEVsLCBbXCJwdXNoXCIsIHtkYXRhfV0pXG4gICAgICB9XG4gICAgfSlcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdvdmVyXCIsIGUgPT4gZS5wcmV2ZW50RGVmYXVsdCgpKVxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiZHJvcFwiLCBlID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgICAgbGV0IGRyb3BUYXJnZXRJZCA9IG1heWJlKGNsb3Nlc3RQaHhCaW5kaW5nKGUudGFyZ2V0LCB0aGlzLmJpbmRpbmcoUEhYX0RST1BfVEFSR0VUKSksIHRydWVUYXJnZXQgPT4ge1xuICAgICAgICByZXR1cm4gdHJ1ZVRhcmdldC5nZXRBdHRyaWJ1dGUodGhpcy5iaW5kaW5nKFBIWF9EUk9QX1RBUkdFVCkpXG4gICAgICB9KVxuICAgICAgbGV0IGRyb3BUYXJnZXQgPSBkcm9wVGFyZ2V0SWQgJiYgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZHJvcFRhcmdldElkKVxuICAgICAgbGV0IGZpbGVzID0gQXJyYXkuZnJvbShlLmRhdGFUcmFuc2Zlci5maWxlcyB8fCBbXSlcbiAgICAgIGlmKCFkcm9wVGFyZ2V0IHx8IGRyb3BUYXJnZXQuZGlzYWJsZWQgfHwgZmlsZXMubGVuZ3RoID09PSAwIHx8ICEoZHJvcFRhcmdldC5maWxlcyBpbnN0YW5jZW9mIEZpbGVMaXN0KSl7IHJldHVybiB9XG5cbiAgICAgIExpdmVVcGxvYWRlci50cmFja0ZpbGVzKGRyb3BUYXJnZXQsIGZpbGVzLCBlLmRhdGFUcmFuc2ZlcilcbiAgICAgIGRyb3BUYXJnZXQuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoXCJpbnB1dFwiLCB7YnViYmxlczogdHJ1ZX0pKVxuICAgIH0pXG4gICAgdGhpcy5vbihQSFhfVFJBQ0tfVVBMT0FEUywgZSA9PiB7XG4gICAgICBsZXQgdXBsb2FkVGFyZ2V0ID0gZS50YXJnZXRcbiAgICAgIGlmKCFET00uaXNVcGxvYWRJbnB1dCh1cGxvYWRUYXJnZXQpKXsgcmV0dXJuIH1cbiAgICAgIGxldCBmaWxlcyA9IEFycmF5LmZyb20oZS5kZXRhaWwuZmlsZXMgfHwgW10pLmZpbHRlcihmID0+IGYgaW5zdGFuY2VvZiBGaWxlIHx8IGYgaW5zdGFuY2VvZiBCbG9iKVxuICAgICAgTGl2ZVVwbG9hZGVyLnRyYWNrRmlsZXModXBsb2FkVGFyZ2V0LCBmaWxlcylcbiAgICAgIHVwbG9hZFRhcmdldC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcImlucHV0XCIsIHtidWJibGVzOiB0cnVlfSkpXG4gICAgfSlcbiAgfVxuXG4gIGV2ZW50TWV0YShldmVudE5hbWUsIGUsIHRhcmdldEVsKXtcbiAgICBsZXQgY2FsbGJhY2sgPSB0aGlzLm1ldGFkYXRhQ2FsbGJhY2tzW2V2ZW50TmFtZV1cbiAgICByZXR1cm4gY2FsbGJhY2sgPyBjYWxsYmFjayhlLCB0YXJnZXRFbCkgOiB7fVxuICB9XG5cbiAgc2V0UGVuZGluZ0xpbmsoaHJlZil7XG4gICAgdGhpcy5saW5rUmVmKytcbiAgICB0aGlzLnBlbmRpbmdMaW5rID0gaHJlZlxuICAgIHJldHVybiB0aGlzLmxpbmtSZWZcbiAgfVxuXG4gIGNvbW1pdFBlbmRpbmdMaW5rKGxpbmtSZWYpe1xuICAgIGlmKHRoaXMubGlua1JlZiAhPT0gbGlua1JlZil7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5ocmVmID0gdGhpcy5wZW5kaW5nTGlua1xuICAgICAgdGhpcy5wZW5kaW5nTGluayA9IG51bGxcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICB9XG5cbiAgZ2V0SHJlZigpeyByZXR1cm4gdGhpcy5ocmVmIH1cblxuICBoYXNQZW5kaW5nTGluaygpeyByZXR1cm4gISF0aGlzLnBlbmRpbmdMaW5rIH1cblxuICBiaW5kKGV2ZW50cywgY2FsbGJhY2spe1xuICAgIGZvcihsZXQgZXZlbnQgaW4gZXZlbnRzKXtcbiAgICAgIGxldCBicm93c2VyRXZlbnROYW1lID0gZXZlbnRzW2V2ZW50XVxuXG4gICAgICB0aGlzLm9uKGJyb3dzZXJFdmVudE5hbWUsIGUgPT4ge1xuICAgICAgICBsZXQgYmluZGluZyA9IHRoaXMuYmluZGluZyhldmVudClcbiAgICAgICAgbGV0IHdpbmRvd0JpbmRpbmcgPSB0aGlzLmJpbmRpbmcoYHdpbmRvdy0ke2V2ZW50fWApXG4gICAgICAgIGxldCB0YXJnZXRQaHhFdmVudCA9IGUudGFyZ2V0LmdldEF0dHJpYnV0ZSAmJiBlLnRhcmdldC5nZXRBdHRyaWJ1dGUoYmluZGluZylcbiAgICAgICAgaWYodGFyZ2V0UGh4RXZlbnQpe1xuICAgICAgICAgIHRoaXMuZGVib3VuY2UoZS50YXJnZXQsIGUsIGJyb3dzZXJFdmVudE5hbWUsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMud2l0aGluT3duZXJzKGUudGFyZ2V0LCB2aWV3ID0+IHtcbiAgICAgICAgICAgICAgY2FsbGJhY2soZSwgZXZlbnQsIHZpZXcsIGUudGFyZ2V0LCB0YXJnZXRQaHhFdmVudCwgbnVsbClcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBET00uYWxsKGRvY3VtZW50LCBgWyR7d2luZG93QmluZGluZ31dYCwgZWwgPT4ge1xuICAgICAgICAgICAgbGV0IHBoeEV2ZW50ID0gZWwuZ2V0QXR0cmlidXRlKHdpbmRvd0JpbmRpbmcpXG4gICAgICAgICAgICB0aGlzLmRlYm91bmNlKGVsLCBlLCBicm93c2VyRXZlbnROYW1lLCAoKSA9PiB7XG4gICAgICAgICAgICAgIHRoaXMud2l0aGluT3duZXJzKGVsLCB2aWV3ID0+IHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhlLCBldmVudCwgdmlldywgZWwsIHBoeEV2ZW50LCBcIndpbmRvd1wiKVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIGJpbmRDbGlja3MoKXtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGUgPT4gdGhpcy5jbGlja1N0YXJ0ZWRBdFRhcmdldCA9IGUudGFyZ2V0KVxuICAgIHRoaXMuYmluZENsaWNrKFwiY2xpY2tcIiwgXCJjbGlja1wiLCBmYWxzZSlcbiAgICB0aGlzLmJpbmRDbGljayhcIm1vdXNlZG93blwiLCBcImNhcHR1cmUtY2xpY2tcIiwgdHJ1ZSlcbiAgfVxuXG4gIGJpbmRDbGljayhldmVudE5hbWUsIGJpbmRpbmdOYW1lLCBjYXB0dXJlKXtcbiAgICBsZXQgY2xpY2sgPSB0aGlzLmJpbmRpbmcoYmluZGluZ05hbWUpXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBlID0+IHtcbiAgICAgIGxldCB0YXJnZXQgPSBudWxsXG4gICAgICBpZihjYXB0dXJlKXtcbiAgICAgICAgdGFyZ2V0ID0gZS50YXJnZXQubWF0Y2hlcyhgWyR7Y2xpY2t9XWApID8gZS50YXJnZXQgOiBlLnRhcmdldC5xdWVyeVNlbGVjdG9yKGBbJHtjbGlja31dYClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxldCBjbGlja1N0YXJ0ZWRBdFRhcmdldCA9IHRoaXMuY2xpY2tTdGFydGVkQXRUYXJnZXQgfHwgZS50YXJnZXRcbiAgICAgICAgdGFyZ2V0ID0gY2xvc2VzdFBoeEJpbmRpbmcoY2xpY2tTdGFydGVkQXRUYXJnZXQsIGNsaWNrKVxuICAgICAgICB0aGlzLmRpc3BhdGNoQ2xpY2tBd2F5KGUsIGNsaWNrU3RhcnRlZEF0VGFyZ2V0KVxuICAgICAgICB0aGlzLmNsaWNrU3RhcnRlZEF0VGFyZ2V0ID0gbnVsbFxuICAgICAgfVxuICAgICAgbGV0IHBoeEV2ZW50ID0gdGFyZ2V0ICYmIHRhcmdldC5nZXRBdHRyaWJ1dGUoY2xpY2spXG4gICAgICBpZighcGh4RXZlbnQpe1xuICAgICAgICBsZXQgaHJlZiA9IGUudGFyZ2V0IGluc3RhbmNlb2YgSFRNTEFuY2hvckVsZW1lbnQgPyBlLnRhcmdldC5nZXRBdHRyaWJ1dGUoXCJocmVmXCIpIDogbnVsbFxuICAgICAgICBpZighY2FwdHVyZSAmJiBocmVmICE9PSBudWxsICYmICFET00ud2FudHNOZXdUYWIoZSkgJiYgRE9NLmlzTmV3UGFnZUhyZWYoaHJlZiwgd2luZG93LmxvY2F0aW9uKSl7XG4gICAgICAgICAgdGhpcy51bmxvYWQoKVxuICAgICAgICB9XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgaWYodGFyZ2V0LmdldEF0dHJpYnV0ZShcImhyZWZcIikgPT09IFwiI1wiKXsgZS5wcmV2ZW50RGVmYXVsdCgpIH1cblxuICAgICAgdGhpcy5kZWJvdW5jZSh0YXJnZXQsIGUsIFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLndpdGhpbk93bmVycyh0YXJnZXQsIHZpZXcgPT4ge1xuICAgICAgICAgIEpTLmV4ZWMoXCJjbGlja1wiLCBwaHhFdmVudCwgdmlldywgdGFyZ2V0LCBbXCJwdXNoXCIsIHtkYXRhOiB0aGlzLmV2ZW50TWV0YShcImNsaWNrXCIsIGUsIHRhcmdldCl9XSlcbiAgICAgICAgfSlcbiAgICAgIH0pXG4gICAgfSwgY2FwdHVyZSlcbiAgfVxuXG4gIGRpc3BhdGNoQ2xpY2tBd2F5KGUsIGNsaWNrU3RhcnRlZEF0KXtcbiAgICBsZXQgcGh4Q2xpY2tBd2F5ID0gdGhpcy5iaW5kaW5nKFwiY2xpY2stYXdheVwiKVxuICAgIERPTS5hbGwoZG9jdW1lbnQsIGBbJHtwaHhDbGlja0F3YXl9XWAsIGVsID0+IHtcbiAgICAgIGlmKCEoZWwuaXNTYW1lTm9kZShjbGlja1N0YXJ0ZWRBdCkgfHwgZWwuY29udGFpbnMoY2xpY2tTdGFydGVkQXQpKSl7XG4gICAgICAgIHRoaXMud2l0aGluT3duZXJzKGUudGFyZ2V0LCB2aWV3ID0+IHtcbiAgICAgICAgICBsZXQgcGh4RXZlbnQgPSBlbC5nZXRBdHRyaWJ1dGUocGh4Q2xpY2tBd2F5KVxuICAgICAgICAgIGlmKEpTLmlzVmlzaWJsZShlbCkpe1xuICAgICAgICAgICAgSlMuZXhlYyhcImNsaWNrXCIsIHBoeEV2ZW50LCB2aWV3LCBlbCwgW1wicHVzaFwiLCB7ZGF0YTogdGhpcy5ldmVudE1ldGEoXCJjbGlja1wiLCBlLCBlLnRhcmdldCl9XSlcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIGJpbmROYXYoKXtcbiAgICBpZighQnJvd3Nlci5jYW5QdXNoU3RhdGUoKSl7IHJldHVybiB9XG4gICAgaWYoaGlzdG9yeS5zY3JvbGxSZXN0b3JhdGlvbil7IGhpc3Rvcnkuc2Nyb2xsUmVzdG9yYXRpb24gPSBcIm1hbnVhbFwiIH1cbiAgICBsZXQgc2Nyb2xsVGltZXIgPSBudWxsXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgX2UgPT4ge1xuICAgICAgY2xlYXJUaW1lb3V0KHNjcm9sbFRpbWVyKVxuICAgICAgc2Nyb2xsVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgQnJvd3Nlci51cGRhdGVDdXJyZW50U3RhdGUoc3RhdGUgPT4gT2JqZWN0LmFzc2lnbihzdGF0ZSwge3Njcm9sbDogd2luZG93LnNjcm9sbFl9KSlcbiAgICAgIH0sIDEwMClcbiAgICB9KVxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicG9wc3RhdGVcIiwgZXZlbnQgPT4ge1xuICAgICAgaWYoIXRoaXMucmVnaXN0ZXJOZXdMb2NhdGlvbih3aW5kb3cubG9jYXRpb24pKXsgcmV0dXJuIH1cbiAgICAgIGxldCB7dHlwZSwgaWQsIHJvb3QsIHNjcm9sbH0gPSBldmVudC5zdGF0ZSB8fCB7fVxuICAgICAgbGV0IGhyZWYgPSB3aW5kb3cubG9jYXRpb24uaHJlZlxuXG4gICAgICB0aGlzLnJlcXVlc3RET01VcGRhdGUoKCkgPT4ge1xuICAgICAgICBpZih0aGlzLm1haW4uaXNDb25uZWN0ZWQoKSAmJiAodHlwZSA9PT0gXCJwYXRjaFwiICYmIGlkID09PSB0aGlzLm1haW4uaWQpKXtcbiAgICAgICAgICB0aGlzLm1haW4ucHVzaExpbmtQYXRjaChocmVmLCBudWxsLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm1heWJlU2Nyb2xsKHNjcm9sbClcbiAgICAgICAgICB9KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMucmVwbGFjZU1haW4oaHJlZiwgbnVsbCwgKCkgPT4ge1xuICAgICAgICAgICAgaWYocm9vdCl7IHRoaXMucmVwbGFjZVJvb3RIaXN0b3J5KCkgfVxuICAgICAgICAgICAgdGhpcy5tYXliZVNjcm9sbChzY3JvbGwpXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9LCBmYWxzZSlcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGUgPT4ge1xuICAgICAgbGV0IHRhcmdldCA9IGNsb3Nlc3RQaHhCaW5kaW5nKGUudGFyZ2V0LCBQSFhfTElWRV9MSU5LKVxuICAgICAgbGV0IHR5cGUgPSB0YXJnZXQgJiYgdGFyZ2V0LmdldEF0dHJpYnV0ZShQSFhfTElWRV9MSU5LKVxuICAgICAgaWYoIXR5cGUgfHwgIXRoaXMuaXNDb25uZWN0ZWQoKSB8fCAhdGhpcy5tYWluIHx8IERPTS53YW50c05ld1RhYihlKSl7IHJldHVybiB9XG5cbiAgICAgIGxldCBocmVmID0gdGFyZ2V0LmhyZWZcbiAgICAgIGxldCBsaW5rU3RhdGUgPSB0YXJnZXQuZ2V0QXR0cmlidXRlKFBIWF9MSU5LX1NUQVRFKVxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpIC8vIGRvIG5vdCBidWJibGUgY2xpY2sgdG8gcmVndWxhciBwaHgtY2xpY2sgYmluZGluZ3NcbiAgICAgIGlmKHRoaXMucGVuZGluZ0xpbmsgPT09IGhyZWYpeyByZXR1cm4gfVxuXG4gICAgICB0aGlzLnJlcXVlc3RET01VcGRhdGUoKCkgPT4ge1xuICAgICAgICBpZih0eXBlID09PSBcInBhdGNoXCIpe1xuICAgICAgICAgIHRoaXMucHVzaEhpc3RvcnlQYXRjaChocmVmLCBsaW5rU3RhdGUsIHRhcmdldClcbiAgICAgICAgfSBlbHNlIGlmKHR5cGUgPT09IFwicmVkaXJlY3RcIil7XG4gICAgICAgICAgdGhpcy5oaXN0b3J5UmVkaXJlY3QoaHJlZiwgbGlua1N0YXRlKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgZXhwZWN0ZWQgJHtQSFhfTElWRV9MSU5LfSB0byBiZSBcInBhdGNoXCIgb3IgXCJyZWRpcmVjdFwiLCBnb3Q6ICR7dHlwZX1gKVxuICAgICAgICB9XG4gICAgICAgIGxldCBwaHhDbGljayA9IHRhcmdldC5nZXRBdHRyaWJ1dGUodGhpcy5iaW5kaW5nKFwiY2xpY2tcIikpXG4gICAgICAgIGlmKHBoeENsaWNrKXtcbiAgICAgICAgICB0aGlzLnJlcXVlc3RET01VcGRhdGUoKCkgPT4gdGhpcy5leGVjSlModGFyZ2V0LCBwaHhDbGljaywgXCJjbGlja1wiKSlcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9LCBmYWxzZSlcbiAgfVxuXG4gIG1heWJlU2Nyb2xsKHNjcm9sbCkge1xuICAgIGlmKHR5cGVvZihzY3JvbGwpID09PSBcIm51bWJlclwiKXtcbiAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgIHdpbmRvdy5zY3JvbGxUbygwLCBzY3JvbGwpXG4gICAgICB9KSAvLyB0aGUgYm9keSBuZWVkcyB0byByZW5kZXIgYmVmb3JlIHdlIHNjcm9sbC5cbiAgICB9XG4gIH1cblxuICBkaXNwYXRjaEV2ZW50KGV2ZW50LCBwYXlsb2FkID0ge30pe1xuICAgIERPTS5kaXNwYXRjaEV2ZW50KHdpbmRvdywgYHBoeDoke2V2ZW50fWAsIHtkZXRhaWw6IHBheWxvYWR9KVxuICB9XG5cbiAgZGlzcGF0Y2hFdmVudHMoZXZlbnRzKXtcbiAgICBldmVudHMuZm9yRWFjaCgoW2V2ZW50LCBwYXlsb2FkXSkgPT4gdGhpcy5kaXNwYXRjaEV2ZW50KGV2ZW50LCBwYXlsb2FkKSlcbiAgfVxuXG4gIHdpdGhQYWdlTG9hZGluZyhpbmZvLCBjYWxsYmFjayl7XG4gICAgRE9NLmRpc3BhdGNoRXZlbnQod2luZG93LCBcInBoeDpwYWdlLWxvYWRpbmctc3RhcnRcIiwge2RldGFpbDogaW5mb30pXG4gICAgbGV0IGRvbmUgPSAoKSA9PiBET00uZGlzcGF0Y2hFdmVudCh3aW5kb3csIFwicGh4OnBhZ2UtbG9hZGluZy1zdG9wXCIsIHtkZXRhaWw6IGluZm99KVxuICAgIHJldHVybiBjYWxsYmFjayA/IGNhbGxiYWNrKGRvbmUpIDogZG9uZVxuICB9XG5cbiAgcHVzaEhpc3RvcnlQYXRjaChocmVmLCBsaW5rU3RhdGUsIHRhcmdldEVsKXtcbiAgICBpZighdGhpcy5pc0Nvbm5lY3RlZCgpKXsgcmV0dXJuIEJyb3dzZXIucmVkaXJlY3QoaHJlZikgfVxuXG4gICAgdGhpcy53aXRoUGFnZUxvYWRpbmcoe3RvOiBocmVmLCBraW5kOiBcInBhdGNoXCJ9LCBkb25lID0+IHtcbiAgICAgIHRoaXMubWFpbi5wdXNoTGlua1BhdGNoKGhyZWYsIHRhcmdldEVsLCBsaW5rUmVmID0+IHtcbiAgICAgICAgdGhpcy5oaXN0b3J5UGF0Y2goaHJlZiwgbGlua1N0YXRlLCBsaW5rUmVmKVxuICAgICAgICBkb25lKClcbiAgICAgIH0pXG4gICAgfSlcbiAgfVxuXG4gIGhpc3RvcnlQYXRjaChocmVmLCBsaW5rU3RhdGUsIGxpbmtSZWYgPSB0aGlzLnNldFBlbmRpbmdMaW5rKGhyZWYpKXtcbiAgICBpZighdGhpcy5jb21taXRQZW5kaW5nTGluayhsaW5rUmVmKSl7IHJldHVybiB9XG5cbiAgICBCcm93c2VyLnB1c2hTdGF0ZShsaW5rU3RhdGUsIHt0eXBlOiBcInBhdGNoXCIsIGlkOiB0aGlzLm1haW4uaWR9LCBocmVmKVxuICAgIHRoaXMucmVnaXN0ZXJOZXdMb2NhdGlvbih3aW5kb3cubG9jYXRpb24pXG4gIH1cblxuICBoaXN0b3J5UmVkaXJlY3QoaHJlZiwgbGlua1N0YXRlLCBmbGFzaCl7XG4gICAgLy8gY29udmVydCB0byBmdWxsIGhyZWYgaWYgb25seSBwYXRoIHByZWZpeFxuICAgIGlmKCF0aGlzLmlzQ29ubmVjdGVkKCkpeyByZXR1cm4gQnJvd3Nlci5yZWRpcmVjdChocmVmLCBmbGFzaCkgfVxuICAgIGlmKC9eXFwvJHxeXFwvW15cXC9dKy4qJC8udGVzdChocmVmKSl7XG4gICAgICBsZXQge3Byb3RvY29sLCBob3N0fSA9IHdpbmRvdy5sb2NhdGlvblxuICAgICAgaHJlZiA9IGAke3Byb3RvY29sfS8vJHtob3N0fSR7aHJlZn1gXG4gICAgfVxuICAgIGxldCBzY3JvbGwgPSB3aW5kb3cuc2Nyb2xsWVxuICAgIHRoaXMud2l0aFBhZ2VMb2FkaW5nKHt0bzogaHJlZiwga2luZDogXCJyZWRpcmVjdFwifSwgZG9uZSA9PiB7XG4gICAgICB0aGlzLnJlcGxhY2VNYWluKGhyZWYsIGZsYXNoLCAoKSA9PiB7XG4gICAgICAgIEJyb3dzZXIucHVzaFN0YXRlKGxpbmtTdGF0ZSwge3R5cGU6IFwicmVkaXJlY3RcIiwgaWQ6IHRoaXMubWFpbi5pZCwgc2Nyb2xsOiBzY3JvbGx9LCBocmVmKVxuICAgICAgICB0aGlzLnJlZ2lzdGVyTmV3TG9jYXRpb24od2luZG93LmxvY2F0aW9uKVxuICAgICAgICBkb25lKClcbiAgICAgIH0pXG4gICAgfSlcbiAgfVxuXG4gIHJlcGxhY2VSb290SGlzdG9yeSgpe1xuICAgIEJyb3dzZXIucHVzaFN0YXRlKFwicmVwbGFjZVwiLCB7cm9vdDogdHJ1ZSwgdHlwZTogXCJwYXRjaFwiLCBpZDogdGhpcy5tYWluLmlkfSlcbiAgfVxuXG4gIHJlZ2lzdGVyTmV3TG9jYXRpb24obmV3TG9jYXRpb24pe1xuICAgIGxldCB7cGF0aG5hbWUsIHNlYXJjaH0gPSB0aGlzLmN1cnJlbnRMb2NhdGlvblxuICAgIGlmKHBhdGhuYW1lICsgc2VhcmNoID09PSBuZXdMb2NhdGlvbi5wYXRobmFtZSArIG5ld0xvY2F0aW9uLnNlYXJjaCl7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jdXJyZW50TG9jYXRpb24gPSBjbG9uZShuZXdMb2NhdGlvbilcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICB9XG5cbiAgYmluZEZvcm1zKCl7XG4gICAgbGV0IGl0ZXJhdGlvbnMgPSAwXG4gICAgbGV0IGV4dGVybmFsRm9ybVN1Ym1pdHRlZCA9IGZhbHNlXG5cbiAgICAvLyBkaXNhYmxlIGZvcm1zIG9uIHN1Ym1pdCB0aGF0IHRyYWNrIHBoeC1jaGFuZ2UgYnV0IHBlcmZvcm0gZXh0ZXJuYWwgc3VibWl0XG4gICAgdGhpcy5vbihcInN1Ym1pdFwiLCBlID0+IHtcbiAgICAgIGxldCBwaHhTdWJtaXQgPSBlLnRhcmdldC5nZXRBdHRyaWJ1dGUodGhpcy5iaW5kaW5nKFwic3VibWl0XCIpKVxuICAgICAgbGV0IHBoeENoYW5nZSA9IGUudGFyZ2V0LmdldEF0dHJpYnV0ZSh0aGlzLmJpbmRpbmcoXCJjaGFuZ2VcIikpXG4gICAgICBpZighZXh0ZXJuYWxGb3JtU3VibWl0dGVkICYmIHBoeENoYW5nZSAmJiAhcGh4U3VibWl0KXtcbiAgICAgICAgZXh0ZXJuYWxGb3JtU3VibWl0dGVkID0gdHJ1ZVxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgdGhpcy53aXRoaW5Pd25lcnMoZS50YXJnZXQsIHZpZXcgPT4ge1xuICAgICAgICAgIHZpZXcuZGlzYWJsZUZvcm0oZS50YXJnZXQpXG4gICAgICAgICAgLy8gc2FmYXJpIG5lZWRzIG5leHQgdGlja1xuICAgICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICAgICAgaWYoRE9NLmlzVW5sb2FkYWJsZUZvcm1TdWJtaXQoZSkpeyB0aGlzLnVubG9hZCgpIH1cbiAgICAgICAgICAgIGUudGFyZ2V0LnN1Ym1pdCgpXG4gICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9LCB0cnVlKVxuXG4gICAgdGhpcy5vbihcInN1Ym1pdFwiLCBlID0+IHtcbiAgICAgIGxldCBwaHhFdmVudCA9IGUudGFyZ2V0LmdldEF0dHJpYnV0ZSh0aGlzLmJpbmRpbmcoXCJzdWJtaXRcIikpXG4gICAgICBpZighcGh4RXZlbnQpe1xuICAgICAgICBpZihET00uaXNVbmxvYWRhYmxlRm9ybVN1Ym1pdChlKSl7IHRoaXMudW5sb2FkKCkgfVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgICAgZS50YXJnZXQuZGlzYWJsZWQgPSB0cnVlXG4gICAgICB0aGlzLndpdGhpbk93bmVycyhlLnRhcmdldCwgdmlldyA9PiB7XG4gICAgICAgIEpTLmV4ZWMoXCJzdWJtaXRcIiwgcGh4RXZlbnQsIHZpZXcsIGUudGFyZ2V0LCBbXCJwdXNoXCIsIHtzdWJtaXR0ZXI6IGUuc3VibWl0dGVyfV0pXG4gICAgICB9KVxuICAgIH0sIGZhbHNlKVxuXG4gICAgZm9yKGxldCB0eXBlIG9mIFtcImNoYW5nZVwiLCBcImlucHV0XCJdKXtcbiAgICAgIHRoaXMub24odHlwZSwgZSA9PiB7XG4gICAgICAgIGxldCBwaHhDaGFuZ2UgPSB0aGlzLmJpbmRpbmcoXCJjaGFuZ2VcIilcbiAgICAgICAgbGV0IGlucHV0ID0gZS50YXJnZXRcbiAgICAgICAgbGV0IGlucHV0RXZlbnQgPSBpbnB1dC5nZXRBdHRyaWJ1dGUocGh4Q2hhbmdlKVxuICAgICAgICBsZXQgZm9ybUV2ZW50ID0gaW5wdXQuZm9ybSAmJiBpbnB1dC5mb3JtLmdldEF0dHJpYnV0ZShwaHhDaGFuZ2UpXG4gICAgICAgIGxldCBwaHhFdmVudCA9IGlucHV0RXZlbnQgfHwgZm9ybUV2ZW50XG4gICAgICAgIGlmKCFwaHhFdmVudCl7IHJldHVybiB9XG4gICAgICAgIGlmKGlucHV0LnR5cGUgPT09IFwibnVtYmVyXCIgJiYgaW5wdXQudmFsaWRpdHkgJiYgaW5wdXQudmFsaWRpdHkuYmFkSW5wdXQpeyByZXR1cm4gfVxuXG4gICAgICAgIGxldCBkaXNwYXRjaGVyID0gaW5wdXRFdmVudCA/IGlucHV0IDogaW5wdXQuZm9ybVxuICAgICAgICBsZXQgY3VycmVudEl0ZXJhdGlvbnMgPSBpdGVyYXRpb25zXG4gICAgICAgIGl0ZXJhdGlvbnMrK1xuICAgICAgICBsZXQge2F0OiBhdCwgdHlwZTogbGFzdFR5cGV9ID0gRE9NLnByaXZhdGUoaW5wdXQsIFwicHJldi1pdGVyYXRpb25cIikgfHwge31cbiAgICAgICAgLy8gZGV0ZWN0IGR1cCBiZWNhdXNlIHNvbWUgYnJvd3NlcnMgZGlzcGF0Y2ggYm90aCBcImlucHV0XCIgYW5kIFwiY2hhbmdlXCJcbiAgICAgICAgaWYoYXQgPT09IGN1cnJlbnRJdGVyYXRpb25zIC0gMSAmJiB0eXBlICE9PSBsYXN0VHlwZSl7IHJldHVybiB9XG5cbiAgICAgICAgRE9NLnB1dFByaXZhdGUoaW5wdXQsIFwicHJldi1pdGVyYXRpb25cIiwge2F0OiBjdXJyZW50SXRlcmF0aW9ucywgdHlwZTogdHlwZX0pXG5cbiAgICAgICAgdGhpcy5kZWJvdW5jZShpbnB1dCwgZSwgdHlwZSwgKCkgPT4ge1xuICAgICAgICAgIHRoaXMud2l0aGluT3duZXJzKGRpc3BhdGNoZXIsIHZpZXcgPT4ge1xuICAgICAgICAgICAgRE9NLnB1dFByaXZhdGUoaW5wdXQsIFBIWF9IQVNfRk9DVVNFRCwgdHJ1ZSlcbiAgICAgICAgICAgIGlmKCFET00uaXNUZXh0dWFsSW5wdXQoaW5wdXQpKXtcbiAgICAgICAgICAgICAgdGhpcy5zZXRBY3RpdmVFbGVtZW50KGlucHV0KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgSlMuZXhlYyhcImNoYW5nZVwiLCBwaHhFdmVudCwgdmlldywgaW5wdXQsIFtcInB1c2hcIiwge190YXJnZXQ6IGUudGFyZ2V0Lm5hbWUsIGRpc3BhdGNoZXI6IGRpc3BhdGNoZXJ9XSlcbiAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgfSwgZmFsc2UpXG4gICAgfVxuICAgIHRoaXMub24oXCJyZXNldFwiLCAoZSkgPT4ge1xuICAgICAgbGV0IGZvcm0gPSBlLnRhcmdldFxuICAgICAgRE9NLnJlc2V0Rm9ybShmb3JtLCB0aGlzLmJpbmRpbmcoUEhYX0ZFRURCQUNLX0ZPUikpXG4gICAgICBsZXQgaW5wdXQgPSBBcnJheS5mcm9tKGZvcm0uZWxlbWVudHMpLmZpbmQoZWwgPT4gZWwudHlwZSA9PT0gXCJyZXNldFwiKVxuICAgICAgLy8gd2FpdCB1bnRpbCBuZXh0IHRpY2sgdG8gZ2V0IHVwZGF0ZWQgaW5wdXQgdmFsdWVcbiAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICBpbnB1dC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcImlucHV0XCIsIHtidWJibGVzOiB0cnVlLCBjYW5jZWxhYmxlOiBmYWxzZX0pKVxuICAgICAgfSlcbiAgICB9KVxuICB9XG5cbiAgZGVib3VuY2UoZWwsIGV2ZW50LCBldmVudFR5cGUsIGNhbGxiYWNrKXtcbiAgICBpZihldmVudFR5cGUgPT09IFwiYmx1clwiIHx8IGV2ZW50VHlwZSA9PT0gXCJmb2N1c291dFwiKXsgcmV0dXJuIGNhbGxiYWNrKCkgfVxuXG4gICAgbGV0IHBoeERlYm91bmNlID0gdGhpcy5iaW5kaW5nKFBIWF9ERUJPVU5DRSlcbiAgICBsZXQgcGh4VGhyb3R0bGUgPSB0aGlzLmJpbmRpbmcoUEhYX1RIUk9UVExFKVxuICAgIGxldCBkZWZhdWx0RGVib3VuY2UgPSB0aGlzLmRlZmF1bHRzLmRlYm91bmNlLnRvU3RyaW5nKClcbiAgICBsZXQgZGVmYXVsdFRocm90dGxlID0gdGhpcy5kZWZhdWx0cy50aHJvdHRsZS50b1N0cmluZygpXG5cbiAgICB0aGlzLndpdGhpbk93bmVycyhlbCwgdmlldyA9PiB7XG4gICAgICBsZXQgYXN5bmNGaWx0ZXIgPSAoKSA9PiAhdmlldy5pc0Rlc3Ryb3llZCgpICYmIGRvY3VtZW50LmJvZHkuY29udGFpbnMoZWwpXG4gICAgICBET00uZGVib3VuY2UoZWwsIGV2ZW50LCBwaHhEZWJvdW5jZSwgZGVmYXVsdERlYm91bmNlLCBwaHhUaHJvdHRsZSwgZGVmYXVsdFRocm90dGxlLCBhc3luY0ZpbHRlciwgKCkgPT4ge1xuICAgICAgICBjYWxsYmFjaygpXG4gICAgICB9KVxuICAgIH0pXG4gIH1cblxuICBzaWxlbmNlRXZlbnRzKGNhbGxiYWNrKXtcbiAgICB0aGlzLnNpbGVuY2VkID0gdHJ1ZVxuICAgIGNhbGxiYWNrKClcbiAgICB0aGlzLnNpbGVuY2VkID0gZmFsc2VcbiAgfVxuXG4gIG9uKGV2ZW50LCBjYWxsYmFjayl7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIGUgPT4ge1xuICAgICAgaWYoIXRoaXMuc2lsZW5jZWQpeyBjYWxsYmFjayhlKSB9XG4gICAgfSlcbiAgfVxufVxuXG5jbGFzcyBUcmFuc2l0aW9uU2V0IHtcbiAgY29uc3RydWN0b3IoKXtcbiAgICB0aGlzLnRyYW5zaXRpb25zID0gbmV3IFNldCgpXG4gICAgdGhpcy5wZW5kaW5nT3BzID0gW11cbiAgfVxuXG4gIHJlc2V0KCl7XG4gICAgdGhpcy50cmFuc2l0aW9ucy5mb3JFYWNoKHRpbWVyID0+IHtcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lcilcbiAgICAgIHRoaXMudHJhbnNpdGlvbnMuZGVsZXRlKHRpbWVyKVxuICAgIH0pXG4gICAgdGhpcy5mbHVzaFBlbmRpbmdPcHMoKVxuICB9XG5cbiAgYWZ0ZXIoY2FsbGJhY2spe1xuICAgIGlmKHRoaXMuc2l6ZSgpID09PSAwKXtcbiAgICAgIGNhbGxiYWNrKClcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5wdXNoUGVuZGluZ09wKGNhbGxiYWNrKVxuICAgIH1cbiAgfVxuXG4gIGFkZFRyYW5zaXRpb24odGltZSwgb25TdGFydCwgb25Eb25lKXtcbiAgICBvblN0YXJ0KClcbiAgICBsZXQgdGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMudHJhbnNpdGlvbnMuZGVsZXRlKHRpbWVyKVxuICAgICAgb25Eb25lKClcbiAgICAgIHRoaXMuZmx1c2hQZW5kaW5nT3BzKClcbiAgICB9LCB0aW1lKVxuICAgIHRoaXMudHJhbnNpdGlvbnMuYWRkKHRpbWVyKVxuICB9XG5cbiAgcHVzaFBlbmRpbmdPcChvcCl7IHRoaXMucGVuZGluZ09wcy5wdXNoKG9wKSB9XG5cbiAgc2l6ZSgpeyByZXR1cm4gdGhpcy50cmFuc2l0aW9ucy5zaXplIH1cblxuICBmbHVzaFBlbmRpbmdPcHMoKXtcbiAgICBpZih0aGlzLnNpemUoKSA+IDApeyByZXR1cm4gfVxuICAgIGxldCBvcCA9IHRoaXMucGVuZGluZ09wcy5zaGlmdCgpXG4gICAgaWYob3Ape1xuICAgICAgb3AoKVxuICAgICAgdGhpcy5mbHVzaFBlbmRpbmdPcHMoKVxuICAgIH1cbiAgfVxufVxuIiwgIi8vIFdlIGltcG9ydCB0aGUgQ1NTIHdoaWNoIGlzIGV4dHJhY3RlZCB0byBpdHMgb3duIGZpbGUgYnkgZXNidWlsZC5cbi8vIFJlbW92ZSB0aGlzIGxpbmUgaWYgeW91IGFkZCBhIHlvdXIgb3duIENTUyBidWlsZCBwaXBlbGluZSAoZS5nIHBvc3Rjc3MpLlxuaW1wb3J0IFwiLi4vY3NzL2FwcC5jc3NcIlxuLy8gSW1wb3J0IHRoZSBkYXJrIG1vZGUgdG9nZ2xlIHNjcmlwdFxuaW1wb3J0IFwiLi9kYXJrX21vZGVcIlxuXG4vLyBBZGRpbmcgUG9zdEhvZyBqcyBsaWJyYXJ5IGdvb2RpZXNcbmltcG9ydCBwb3N0aG9nIGZyb20gXCJwb3N0aG9nLWpzXCJcblxucG9zdGhvZy5pbml0KCdwaGNfQnlhZ29iYTZUUzZVQlo0QUFNT1NZNU5acGJhRVVKbHRNS0g5Q3Naa3Y0bCcsIHsgYXBpX2hvc3Q6ICdodHRwczovL2FwcC5wb3N0aG9nLmNvbScgfSlcblxuLy8gSWYgeW91IHdhbnQgdG8gdXNlIFBob2VuaXggY2hhbm5lbHMsIHJ1biBgbWl4IGhlbHAgcGh4Lmdlbi5jaGFubmVsYFxuLy8gdG8gZ2V0IHN0YXJ0ZWQgYW5kIHRoZW4gdW5jb21tZW50IHRoZSBsaW5lIGJlbG93LlxuLy8gaW1wb3J0IFwiLi91c2VyX3NvY2tldC5qc1wiXG5cbi8vIFlvdSBjYW4gaW5jbHVkZSBkZXBlbmRlbmNpZXMgaW4gdHdvIHdheXMuXG4vL1xuLy8gVGhlIHNpbXBsZXN0IG9wdGlvbiBpcyB0byBwdXQgdGhlbSBpbiBhc3NldHMvdmVuZG9yIGFuZFxuLy8gaW1wb3J0IHRoZW0gdXNpbmcgcmVsYXRpdmUgcGF0aHM6XG4vL1xuLy8gICAgIGltcG9ydCBcIi4uL3ZlbmRvci9zb21lLXBhY2thZ2UuanNcIlxuLy9cbi8vIEFsdGVybmF0aXZlbHksIHlvdSBjYW4gYG5wbSBpbnN0YWxsIHNvbWUtcGFja2FnZSAtLXByZWZpeCBhc3NldHNgIGFuZCBpbXBvcnRcbi8vIHRoZW0gdXNpbmcgYSBwYXRoIHN0YXJ0aW5nIHdpdGggdGhlIHBhY2thZ2UgbmFtZTpcbi8vXG4vLyAgICAgaW1wb3J0IFwic29tZS1wYWNrYWdlXCJcbi8vXG5cbi8vIEluY2x1ZGUgcGhvZW5peF9odG1sIHRvIGhhbmRsZSBtZXRob2Q9UFVUL0RFTEVURSBpbiBmb3JtcyBhbmQgYnV0dG9ucy5cbmltcG9ydCBcInBob2VuaXhfaHRtbFwiXG4vLyBFc3RhYmxpc2ggUGhvZW5peCBTb2NrZXQgYW5kIExpdmVWaWV3IGNvbmZpZ3VyYXRpb24uXG5pbXBvcnQge1NvY2tldH0gZnJvbSBcInBob2VuaXhcIlxuaW1wb3J0IHtMaXZlU29ja2V0fSBmcm9tIFwicGhvZW5peF9saXZlX3ZpZXdcIlxuaW1wb3J0IHRvcGJhciBmcm9tIFwiLi4vdmVuZG9yL3RvcGJhclwiXG5cbmxldCBjc3JmVG9rZW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwibWV0YVtuYW1lPSdjc3JmLXRva2VuJ11cIikuZ2V0QXR0cmlidXRlKFwiY29udGVudFwiKVxubGV0IGxpdmVTb2NrZXQgPSBuZXcgTGl2ZVNvY2tldChcIi9saXZlXCIsIFNvY2tldCwge3BhcmFtczoge19jc3JmX3Rva2VuOiBjc3JmVG9rZW59fSlcblxuLy8gQ2FwdHVyZSBzZWFyY2hlcyBmb3IgUG9zdEhvZyBjdXN0b20gZXZlbnRcbmxldCBzZWFyY2hUaW1lb3V0O1xuXG4vLyBBdHRhY2ggZXZlbnQgbGlzdGVuZXIgdG8gdGhlIHNlYXJjaCBpbnB1dCBmb3IgUG9zdEhvZyBjdXN0b20gZXZlbnRcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gIGlmIChldmVudC50YXJnZXQubWF0Y2hlcygnLnNlYXJjaC1ib3gtZGVmYXVsdCcpKSB7XG4gICAgY29uc3Qgc2VhcmNoUXVlcnkgPSBldmVudC50YXJnZXQudmFsdWU7XG4gICAgXG4gICAgLy8gQ2xlYXIgdGhlIHByZXZpb3VzIHRpbWVvdXRcbiAgICBjbGVhclRpbWVvdXQoc2VhcmNoVGltZW91dCk7XG4gICAgXG4gICAgLy8gU2V0IGEgbmV3IHRpbWVvdXQgdG8gY2FwdHVyZSB0aGUgZXZlbnQgYWZ0ZXIgNSBzZWNvbmRzIG9mIGluYWN0aXZpdHlcbiAgICBzZWFyY2hUaW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgIHBvc3Rob2cuY2FwdHVyZSgndXNlZF9zZWFyY2gnLCB7IHF1ZXJ5OiBzZWFyY2hRdWVyeSB9KTtcbiAgICB9LCA1MDAwKTtcbiAgfVxufSwgZmFsc2UpO1xuXG5cbi8vIFNob3cgcHJvZ3Jlc3MgYmFyIG9uIGxpdmUgbmF2aWdhdGlvbiBhbmQgZm9ybSBzdWJtaXRzLCBpZiBzdGlsbCBsb2FkaW5nIGFmdGVyIDUwMG1zXG50b3BiYXIuY29uZmlnKHtiYXJDb2xvcnM6IHswOiBcIiMyOWRcIn0sIHNoYWRvd0NvbG9yOiBcInJnYmEoMCwgMCwgMCwgLjMpXCJ9KVxubGV0IHRvcEJhclNjaGVkdWxlZCA9IHVuZGVmaW5lZFxuXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInBoeDpwYWdlLWxvYWRpbmctc3RhcnRcIiwgKCkgPT4ge1xuICBpZighdG9wQmFyU2NoZWR1bGVkKSB7XG4gICAgdG9wQmFyU2NoZWR1bGVkID0gc2V0VGltZW91dCgoKSA9PiB0b3BiYXIuc2hvdygpLCA1MDApXG4gIH1cbn0pXG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicGh4OnBhZ2UtbG9hZGluZy1zdG9wXCIsICgpID0+IHtcbiAgY2xlYXJUaW1lb3V0KHRvcEJhclNjaGVkdWxlZClcbiAgdG9wQmFyU2NoZWR1bGVkID0gdW5kZWZpbmVkXG4gIHRvcGJhci5oaWRlKClcbn0pXG5cbi8vIGNvbm5lY3QgaWYgdGhlcmUgYXJlIGFueSBMaXZlVmlld3Mgb24gdGhlIHBhZ2VcbmxpdmVTb2NrZXQuY29ubmVjdCgpXG5cbi8vIGV4cG9zZSBsaXZlU29ja2V0IG9uIHdpbmRvdyBmb3Igd2ViIGNvbnNvbGUgZGVidWcgbG9ncyBhbmQgbGF0ZW5jeSBzaW11bGF0aW9uOlxubGl2ZVNvY2tldC5lbmFibGVEZWJ1ZygpXG4vLyA+PiBsaXZlU29ja2V0LmVuYWJsZUxhdGVuY3lTaW0oMTAwMCkgIC8vIGVuYWJsZWQgZm9yIGR1cmF0aW9uIG9mIGJyb3dzZXIgc2Vzc2lvblxuLy8gPj4gbGl2ZVNvY2tldC5kaXNhYmxlTGF0ZW5jeVNpbSgpXG53aW5kb3cubGl2ZVNvY2tldCA9IGxpdmVTb2NrZXRcblxuIl0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBTUEsTUFBQyxVQUFVLFNBQVEsV0FBVTtBQUMzQjtBQUdBLFFBQUMsWUFBWTtBQUNYLGNBQUksV0FBVztBQUNmLGNBQUksVUFBVSxDQUFDLE1BQU0sT0FBTyxVQUFVLEdBQUc7QUFDekMsbUJBQVMsS0FBSSxHQUFHLEtBQUksUUFBUSxVQUFVLENBQUMsUUFBTyx1QkFBdUIsRUFBRSxJQUFHO0FBQ3hFLG9CQUFPLHdCQUNMLFFBQU8sUUFBUSxNQUFLO0FBQ3RCLG9CQUFPLHVCQUNMLFFBQU8sUUFBUSxNQUFLLDJCQUNwQixRQUFPLFFBQVEsTUFBSztBQUFBLFVBQ3hCO0FBQ0EsY0FBSSxDQUFDLFFBQU87QUFDVixvQkFBTyx3QkFBd0IsU0FBVSxVQUFVLFNBQVM7QUFDMUQsa0JBQUksV0FBVyxJQUFJLEtBQUssRUFBRSxRQUFRO0FBQ2xDLGtCQUFJLGFBQWEsS0FBSyxJQUFJLEdBQUcsS0FBTSxZQUFXLFNBQVM7QUFDdkQsa0JBQUksS0FBSyxRQUFPLFdBQVcsV0FBWTtBQUNyQyx5QkFBUyxXQUFXLFVBQVU7QUFBQSxjQUNoQyxHQUFHLFVBQVU7QUFDYix5QkFBVyxXQUFXO0FBQ3RCLHFCQUFPO0FBQUEsWUFDVDtBQUNGLGNBQUksQ0FBQyxRQUFPO0FBQ1Ysb0JBQU8sdUJBQXVCLFNBQVUsSUFBSTtBQUMxQywyQkFBYSxFQUFFO0FBQUEsWUFDakI7QUFBQSxRQUNKLEdBQUc7QUFFSCxZQUFJLFFBQ0YsaUJBQ0EsYUFDQSxpQkFDQSxTQUNBLFdBQVcsU0FBVSxNQUFNLE1BQU0sU0FBUztBQUN4QyxjQUFJLEtBQUs7QUFBa0IsaUJBQUssaUJBQWlCLE1BQU0sU0FBUyxLQUFLO0FBQUEsbUJBQzVELEtBQUs7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
